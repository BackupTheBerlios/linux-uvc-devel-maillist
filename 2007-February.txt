From rizzo at icir.org  Thu Feb  1 00:52:24 2007
From: rizzo at icir.org (Luigi Rizzo)
Date: Wed, 31 Jan 2007 15:52:24 -0800
Subject: [Linux-uvc-devel] -Werror fixes for uvcvideo
Message-ID: <20070131155224.D63447@xorpc.icir.org>

Hi,
attached are just a couple of trivial patches to
uvcvideo to suppress some compiler warnings - one
related to a missing const, one related to
pointer arithmetic done on a void *

On passing - i notice that in a couple of structs
in uvcvideo.h you are used unnamed unions, which are
a gcc extension which is not guaranteed to be supported
in the future.

I suppose that, besides convenience, the choice has been
inspired by a similar pattern in videodev2.h .

Before the use gets too widespread, it might be a good
idea to use standard C and put a name to the union ?
The changes to the source now are relatively small,
and this would prevent the use
of unnamed unions in derived works, which would require
far more work to be fixed.

cheers
luigi
-----------------------------------+-------------------------------------
  Luigi RIZZO, rizzo at iet.unipi.it  . Dip. di Ing. dell'Informazione
  http://www.iet.unipi.it/~luigi/  . Universita` di Pisa
  TEL/FAX: +39-050-2217.533/600    . via Diotisalvi 2, 56122 PISA (Italy)
  Mobile   +39-347-0373137
-----------------------------------+-------------------------------------

diff -ubwr trunk/trunk/uvc_ctrl.c ./uvc_ctrl.c
--- trunk/trunk/uvc_ctrl.c	Wed Jan 31 23:53:36 2007
+++ ./uvc_ctrl.c	Wed Jan 31 23:29:59 2007
@@ -795,6 +795,7 @@
 	mutex_unlock(&uvc_driver.ctrl_mutex);
 }
 
+static
 void uvc_ctrl_add_mapping(struct uvc_control_mapping *mapping)
 {
 	struct uvc_control_info *info;
diff -ubwr trunk/trunk/uvc_driver.c ./uvc_driver.c
--- trunk/trunk/uvc_driver.c	Wed Jan 31 23:53:36 2007
+++ ./uvc_driver.c	Wed Jan 31 21:36:15 2007
@@ -664,7 +664,7 @@
 		unit->type = VC_EXTENSION_UNIT;
 		memcpy(unit->extension.guidExtensionCode, &buffer[4], 16);
 		unit->extension.bNumControls = buffer[20];
-		unit->extension.bNrInPins = le16_to_cpup((__le16*)&buffer[21]);
+		unit->extension.bNrInPins = le16_to_cpup((const __le16*)&buffer[21]);
 		unit->extension.baSourceID = (__u8*)unit + sizeof *unit;
 		memcpy(unit->extension.baSourceID, &buffer[22], p);
 		unit->extension.bControlSize = buffer[22+p];
diff -ubwr trunk/trunk/uvcvideo.h ./uvcvideo.h
--- trunk/trunk/uvcvideo.h	Wed Jan 31 23:53:36 2007
+++ ./uvcvideo.h	Wed Jan 31 23:23:50 2007
@@ -478,7 +478,7 @@
 };
 
 struct uvc_video_queue {
-	void *mem;
+	char *mem;	/* we do pointer arithmetic here */
 	unsigned int streaming;
 	__u32 sequence;
 	__u8 last_fid;





From muddyboots at gmail.com  Thu Feb  1 09:34:58 2007
From: muddyboots at gmail.com (Lee Wild)
Date: Thu, 1 Feb 2007 08:34:58 +0000
Subject: [Linux-uvc-devel]  Jumbled images from Logitech Quickcam 500
Message-ID: <607ab3010702010034t5cd4efd1nfff6b862a6d01e28@mail.gmail.com>

Does anyone have any ideas on this one ?

Thanks
Lee


From linux at rubli.info  Thu Feb  1 19:40:30 2007
From: linux at rubli.info (Martin Rubli)
Date: Thu, 01 Feb 2007 10:40:30 -0800
Subject: [Linux-uvc-devel] green screen
In-Reply-To: <45BB9E70.5020505@ozob.net>
References: <45BB9E70.5020505@ozob.net>
Message-ID: <op.tm215sfv42iof8@nb-mrublixp.am.logitech.com>

Does your Proscope work with any other applications like luvcview? If so,  
there might be a bug in the Ekiga decoder, in which case you should take  
your request to the Ekiga developers.

Cheers,
Martin


On Sat, 27 Jan 2007 10:48:16 -0800, Gene Imes <ebi9 at ozob.net> wrote:

> My Bodelin ProScopeHR renders a green screen in Ekiga. I can see video.
> A screenshot is here:
>
> http://ozob.net/luvc/ekiga-screen-shot.jpg
>
> Thanks for any help,




From linux at rubli.info  Thu Feb  1 20:02:10 2007
From: linux at rubli.info (Martin Rubli)
Date: Thu, 01 Feb 2007 11:02:10 -0800
Subject: [Linux-uvc-devel] Window resize crash report,
	with luvcveiw-20070107 and QC Fusion	(046d:08c1)
In-Reply-To: <1169967574.3040.16.camel@linux23dragon.example.org>
References: <1169967574.3040.16.camel@linux23dragon.example.org>
Message-ID: <op.tm225wfd42iof8@nb-mrublixp.am.logitech.com>

Thanks for your extensive report. :-)

The ?EOF in empty packet? is harmless and merely a debug output relict  
 from an old version. I thought it was removed at some point but apparently  
that's not the case.

Laurent, can you please apply the attached patch? Thanks.

About our luvcview crash, that would be something to take to Michel  
Xhaard, the author of the application.

> Jan 28 15:15:08 kernel: uvcvideo: Failed to query (135) UVC control 2  
> (unit 2) : -32 (exp. 2).

And finally, the failed queries in your syslog are a bug in the camera's  
USB chip. It was discussed at length in previous threads. Please have a  
look at:
https://lists.berlios.de/pipermail/linux-uvc-devel/

There are a few workarounds to be found in the list archive, but none of  
them was confirmed to be 100% effective.

Cheers,
Martin


On Sat, 27 Jan 2007 22:59:34 -0800, linux23dragon  
<linux23dragon at iprimus.com.au> wrote:

> ________________________________________________________________________
> This is just a ?end user feedback? report, on using both the UVC driver
> and luvcveiw program.
>
> This post describes only one crash issues (window re size crash).
>
> !!!Warning!!!
>
> Beware, the details of this report is a bit ?over the top? and could
> cause one to go crazy. I wrote this report to be useful, and to show
> that I'm grateful for this web cam driver support.
>
> Some Log information may not be relevant to the bug report.
> ________________________________________________________________________
>
> Hi
>
> I thought It might be useful to share some information on the
> intermittent crashing issues I've been having with luvcveiw.
>
> This is the following content:
>
>
>      1. System used
>     2. Web cam and driver information
>     3. Running the luvcveiw application
>     1. Luvcveiw crash
>     2. Restarting luvcveiw after crash
>     3. 2nd luvcveiw crash
> -----------------------------------------------------------------------
>
>
> 1 System used:
>
>
> AMD Athlon(tm) 64 processor 3200+ (Running a 32bit Linux system)
> Linux version 2.6.16.38 #2 PREEMPT
> gcc version 3.4.6
> GNU ld version 2.16.1
> GNU C Library stable release version 2.3.6
>
>
> 2 Web cam and driver information:
>
> This is the kernel driver (SVN: committed-rev="78", revision="79") log
> output (Jan 28 12:05:52) when I first plug in the QC Fusion Web cam (My
> Edit - without the time stamp or host name):
>
>
> kernel: usb 1-6: new high speed USB device using ehci_hcd and address 4
> kernel: usb 1-6: configuration #1 chosen from 1 choice
> kernel: uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c1)
> kernel: usbcore: registered new driver uvcvideo
> kernel: USB Video Class driver (v0.1.0)
> kernel: 4:3:1: cannot set freq 0 to ep 0x86
> kernel: 4:3:2: cannot set freq 0 to ep 0x86
> kernel: 4:3:3: cannot get freq at ep 0x86
> kernel: usbcore: registered new driver snd-usb-audio
>
>
>
> 3 Running the luvcveiw application:
>
> This is the console output when I start luvcveiw-20070107:
>
> david at localhost:~$ luvcview
> luvcview version 0.2.0
> Video driver: x11
> A window manager is available
> video /dev/video0
>
>
> luvcview is a very cool testing tool.
>
> The video motion performance is fast and the image quality is very good.
> I can also see the light correction working. The default brightness
> settings from luvcveiw is a little dark, but can be adjusted. I just
> left luvcveiw going with the default window size and video settings at
> this time.
>
> After leaving uvcview running for around 45 minutes, I had the following
> kernel log messages (My Edit - with the time stamp, without the host
> name):
>
> Jan 28 12:34:53 kernel: EOF in empty packet.
> Jan 28 12:37:31 kernel: EOF in empty packet.
> Jan 28 12:40:04 kernel: EOF in empty packet.
> Jan 28 12:42:11 kernel: EOF in empty packet.
>
>
>         I don't know if the kernel log output is to do with the driver,
>         but I have been doing nothing else but typing with Open Office
>         and running Gnome terminal, luvcveiw and Gnome system log viewer
>         in the background. My system is not connected to the net or
>         network at this time (I do have a firewall, but it shouldn't be
>         running AFAIK).
>
>
>
> 4 Crashing luvcveiw application:
>
>
> After viewing the log output about ?EOF in empty packet?, I moved the
> luvcview window around the desktop, all was good. I then tried to
> maximise the window, but the program then just caused a Segmentation
> fault.
>
> However, It looked as though it was trying to unmaximize (or resize)
> just before it crashed.
> I did not have any system or kernel logging reports. And a output in the
> gnome-terminal saying ?Segmentation fault?.
>
> Luvcview did appear to exit out cleanly, without leaving any related
> process running in the background (according to the system monitor
> program ?top?). I'm not sure about memory buffers or anything like that
> at this time.
>
>
>
> 5 Restarting luvcveiw after crash:
>
> I restarted luvcveiw again without any issues and was able to maximise
> unmaximise and minimise the window. I even played around with the
> brightness settings. (I won't go into details about the brightness
> control settings).
> Again, the video motion performance was fast and the image quality was
> very good. The the light correction was working.
>
>
> This was the kernel log while I was adjusting just the brightness
> levels:
>
>
> Jan 28 15:13:20 kernel: uvcvideo: Failed to query (130) UVC control 1
> (unit 0) : -32 (exp. 26).
> Jan 28 15:14:21 kernel: uvcvideo: Failed to query (135) UVC control 2
> (unit 2) : -32 (exp. 2).
> Jan 28 15:14:21 kernel: uvcvideo: Failed to query (130) UVC control 2
> (unit 2) : -32 (exp. 2).
> Jan 28 15:14:21 kernel: uvcvideo: Failed to query (131) UVC control 2
> (unit 2) : -32 (exp. 2).
> Jan 28 15:14:22 kernel: uvcvideo: Failed to query (130) UVC control 2
> (unit 2) : -32 (exp. 2).
> Jan 28 15:14:23 kernel: EOF in empty packet.
> Jan 28 15:14:27 kernel: uvcvideo: Failed to query (132) UVC control 2
> (unit 2) : -32 (exp. 2).
> Jan 28 15:14:27 kernel: uvcvideo: Failed to query (1) UVC control 2
> (unit 2) : -32 (exp. 2).
> Jan 28 15:14:27 kernel: EOF in empty packet.
> Jan 28 15:14:45 kernel: uvcvideo: Failed to query (130) UVC control 2
> (unit 2) : -32 (exp. 2).
> Jan 28 15:15:05 last message repeated 2 times
> Jan 28 15:15:05 kernel: EOF in empty packet.
> Jan 28 15:15:07 kernel: EOF in empty packet.
> Jan 28 15:15:08 kernel: uvcvideo: Failed to query (135) UVC control 2
> (unit 2) : -32 (exp. 2).
> Jan 28 15:15:10 kernel: uvcvideo: Failed to query (135) UVC control 2
> (unit 2) : -32 (exp. 2).
> ------------------------//sniped//-----------------------------------
>
> As you can see, the ?EOF in empty packet? (issue?), has come back. I
> don't think that has to do with the brightness settings (?). But I did
> not need to wait 30-40 minutes to get that message.
>
>
> This was some of the terminal output while I was adjusting brightness
> levels:
>
>
> -----------// sniped //-------------------------
>
> max 255, min 0, step 1, default 127 ,current 17
>
> Control name:Brightness set to value:17
>
> max 255, min 0, step 1, default 127 ,current 18
>
> Control name:Brightness set to value:18
>
> ioctl querycontrol error 5
>
> max 255, min 0, step 1, default 127 ,current 0
>
> Control name:Brightness set to value:0
>
> ---------//sniped//---------------------------
>
> Control name:Brightness set to value:60
>
> max 255, min 0, step 1, default 127 ,current 61
>
> Control name:Brightness set to value:61
>
> ioctl querycontrol error 22
>
> reset Hue error
>
> ioctl querycontrol error 5
>
> reset Gain error
>
> control disabled
>
> reset pantilt error
>
> max 255, min 0, step 1, default 127 ,current 128
>
> Control name:Brightness set to value:128
>
> ---------------//sniped//----------------------
>
>
>
> 6 2nd luvcveiw crash:
>
>
> After I had adjusted the brightness control and finding the same ?EOF in
> empty packet? in the kernel log, I tried to resize luvcveiw. And yes, it
> crashed again.
>
> So I had the same pattern:
>
> 1 ?EOF in empty packet? log message (From 5: - Restarting luvcveiw after
> crash)
>
> 2 luvcveiw looked as though it was trying to unmaximise, just before it
> crashed.
>
>
> This is the terminal log output that I was left with:
>
> X Error of failed request: BadAtom (invalid Atom parameter)
> Major opcode of failed request: 19 (X_DeleteProperty)
> Atom id in failed request: 0x3200003
> Serial number of failed request: 25627
> Current serial number in output stream: 25632
>
>
>
> This ends my (rather large) report.
>
>
> Hope this helps :)
>
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel

-------------- next part --------------
A non-text attachment was scrubbed...
Name: fix_eof_in_empty_packet_debug_output.patch
Type: application/octet-stream
Size: 454 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070201/4dcc9ccc/attachment.obj>

From linux at rubli.info  Thu Feb  1 20:09:47 2007
From: linux at rubli.info (Martin Rubli)
Date: Thu, 01 Feb 2007 11:09:47 -0800
Subject: [Linux-uvc-devel] Jumbled images from Logitech Quickcam 5000
In-Reply-To: <607ab3010701290728r57a074f1je597b3f8c07c5f3@mail.gmail.com>
References: <607ab3010701290728r57a074f1je597b3f8c07c5f3@mail.gmail.com>
Message-ID: <op.tm23ilzb42iof8@nb-mrublixp.am.logitech.com>

Hi Lee,

I don't see your point, the landscape and the colors in your pictures look  
perfectly fine. ;-)

On a more serious note, I haven't seen anything similar myself. Could you  
check your camera with luvcview to see if the pictures are also jumbled  
up? If yes, I would be very surprised. If not, can you try if you can get  
Motion to use the YUV format instead of MJPEG (which it seems to be using  
now)? You may also want to capture some raw frames with luvcview (check  
the -h option) to analyze them--or have the Motion people analyze them.  
The driver really does nothing to the image data, so image corruption is  
rarely the driver's fault.

Let us know if you find something ...

Cheers,
Martin


On Mon, 29 Jan 2007 07:28:38 -0800, Lee Wild <muddyboots at gmail.com> wrote:

> Hi
>
> I'm running a Logitech Quickcam Pro 5000 webcam from a machine
> installed with Fedora Core 6. I built the linux-uvc drivers, and am
> running Motion webcam software.
> It's been a long road to get everything to build correctly and get
> this far, however....
>
> My problem is that the majority of images being output are jumbled up,
> a bit like some sliding-block puzzle, here are a couple of examples:
> http://ukselfbuild.com/webcam/2007/January/29/cam2/2007-01-29-15-00-00-snapshot.jpg
> http://ukselfbuild.com/webcam/2007/January/29/cam2/2007-01-29-08-00-00-snapshot.jpg
>
> I first asked for support from the people behind Motion, but they are
> thinking the issue is to do with the linux-uvc driver.
>
> Does anyone have any ideas what might be causing this, and how I might
> get around it ?
>
> Many thanks
> Lee
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel




From linux at rubli.info  Thu Feb  1 20:42:45 2007
From: linux at rubli.info (Martin Rubli)
Date: Thu, 01 Feb 2007 11:42:45 -0800
Subject: [Linux-uvc-devel] Control mappings
In-Reply-To: <200701292250.28445.contact@alexandredenis.net>
References: <200701292250.28445.contact@alexandredenis.net>
Message-ID: <op.tm241jtf42iof8@nb-mrublixp.am.logitech.com>

Hi Alexandre,

On Mon, 29 Jan 2007 13:50:28 -0800, Alexandre DENIS  
<contact at alexandredenis.net> wrote:

> I would believe that the following extended controls should actually be
> mapped onto standard V4L2 controls :
>
>  "Exposure, Auto" = V4L2_CID_AUTOGAIN
>  "Exposure (Absolute)" = V4L2_CID_EXPOSURE
>  "White Balance Temperature, Auto" = V4L2_CID_AUTO_WHITE_BALANCE
>  "White Balance Temperature" = V4L2_CID_GAMMA
>
> Or am I missing something?

There is still some ongoing discussion (euphemism alert) on how to best  
map UVC controls (the USB Video Class spec defines quite a few) to V4L2  
controls. The fact is that V4L2 controls are not even kinda close to what  
we need for the UVC driver. If you have a strong opinion on that or any  
helpful arguments, then feel free to speak up on the v4l-list  
(https://www.redhat.com/mailman/private/video4linux-list/2007-January/thread.html,  
search for "New control identifiers"). We're especially looking for people  
with a background in photography/imaging.

Back to your e-mail, though. :-) We'll certainly review these controls  
once V4L2 is updated. In the meantime a few notes:
- White balance can be specified in temperature or a red/blue channel  
correction. But Gamma correction is a completely different story.
- Gain and exposure time are often related, but, in camera terms, are two  
different controls.
- There is relative and absolute exposure time. V4L2 does not specify what  
V4L2_CID_EXPOSURE means.

Cheers,
Martin


From linux at rubli.info  Thu Feb  1 20:50:24 2007
From: linux at rubli.info (Martin Rubli)
Date: Thu, 01 Feb 2007 11:50:24 -0800
Subject: [Linux-uvc-devel] -Werror fixes for uvcvideo
In-Reply-To: <20070131155224.D63447@xorpc.icir.org>
References: <20070131155224.D63447@xorpc.icir.org>
Message-ID: <op.tm25eau442iof8@nb-mrublixp.am.logitech.com>

Hi Luigi,

> attached are just a couple of trivial patches to
> uvcvideo to suppress some compiler warnings - one
> related to a missing const, one related to
> pointer arithmetic done on a void *

How did you trigger the warnings? The driver uses the standard kernel  
build system and on my machine no warnings show up ...

> On passing - i notice that in a couple of structs
> in uvcvideo.h you are used unnamed unions, which are
> a gcc extension which is not guaranteed to be supported
> in the future.
>
> I suppose that, besides convenience, the choice has been
> inspired by a similar pattern in videodev2.h .
>
> Before the use gets too widespread, it might be a good
> idea to use standard C and put a name to the union ?
> The changes to the source now are relatively small,
> and this would prevent the use
> of unnamed unions in derived works, which would require
> far more work to be fixed.

If I'm not mistaken, GNU C (as opposed to ANSI C) is the official language  
used by the Linux kernel and there are quite a few other extensions that  
are consistently used throughout the kernel. I therefore don't think  
there's going to be a problem with that in the future. But If I'm missing  
something, please correct me!

Laurent, can you check Luigi's patch anyway? Some of the changes make  
sense regardless of the above. Thanks.

Cheers,
Martin


> diff -ubwr trunk/trunk/uvc_ctrl.c ./uvc_ctrl.c
> --- trunk/trunk/uvc_ctrl.c	Wed Jan 31 23:53:36 2007
> +++ ./uvc_ctrl.c	Wed Jan 31 23:29:59 2007
> @@ -795,6 +795,7 @@
>  	mutex_unlock(&uvc_driver.ctrl_mutex);
>  }
> +static
>  void uvc_ctrl_add_mapping(struct uvc_control_mapping *mapping)
>  {
>  	struct uvc_control_info *info;
> diff -ubwr trunk/trunk/uvc_driver.c ./uvc_driver.c
> --- trunk/trunk/uvc_driver.c	Wed Jan 31 23:53:36 2007
> +++ ./uvc_driver.c	Wed Jan 31 21:36:15 2007
> @@ -664,7 +664,7 @@
>  		unit->type = VC_EXTENSION_UNIT;
>  		memcpy(unit->extension.guidExtensionCode, &buffer[4], 16);
>  		unit->extension.bNumControls = buffer[20];
> -		unit->extension.bNrInPins = le16_to_cpup((__le16*)&buffer[21]);
> +		unit->extension.bNrInPins = le16_to_cpup((const __le16*)&buffer[21]);
>  		unit->extension.baSourceID = (__u8*)unit + sizeof *unit;
>  		memcpy(unit->extension.baSourceID, &buffer[22], p);
>  		unit->extension.bControlSize = buffer[22+p];
> diff -ubwr trunk/trunk/uvcvideo.h ./uvcvideo.h
> --- trunk/trunk/uvcvideo.h	Wed Jan 31 23:53:36 2007
> +++ ./uvcvideo.h	Wed Jan 31 23:23:50 2007
> @@ -478,7 +478,7 @@
>  };
> struct uvc_video_queue {
> -	void *mem;
> +	char *mem;	/* we do pointer arithmetic here */
>  	unsigned int streaming;
>  	__u32 sequence;
>  	__u8 last_fid;
>
>
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel




From rizzo at icir.org  Thu Feb  1 21:12:00 2007
From: rizzo at icir.org (Luigi Rizzo)
Date: Thu, 1 Feb 2007 12:12:00 -0800
Subject: [Linux-uvc-devel] -Werror fixes for uvcvideo
In-Reply-To: <op.tm25eau442iof8@nb-mrublixp.am.logitech.com>;
	from linux@rubli.info on Thu, Feb 01, 2007 at 11:50:24AM -0800
References: <20070131155224.D63447@xorpc.icir.org>
	<op.tm25eau442iof8@nb-mrublixp.am.logitech.com>
Message-ID: <20070201121200.A84181@xorpc.icir.org>

On Thu, Feb 01, 2007 at 11:50:24AM -0800, Martin Rubli wrote:
> Hi Luigi,
> 
> > attached are just a couple of trivial patches to
> > uvcvideo to suppress some compiler warnings - one
> > related to a missing const, one related to
> > pointer arithmetic done on a void *
> 
> How did you trigger the warnings? The driver uses the standard kernel  
> build system and on my machine no warnings show up ...

I should have said more - i am building this stuff on FreeBSD:

	http://info.iet.unipi.it/~luigi/FreeBSD/linux_bsd_kld.html

so the set of compiler flags is different.

> > On passing - i notice that in a couple of structs
> > in uvcvideo.h you are used unnamed unions, which are
> > a gcc extension which is not guaranteed to be supported
> > in the future.
> >
> > I suppose that, besides convenience, the choice has been
> > inspired by a similar pattern in videodev2.h .
> >
> > Before the use gets too widespread, it might be a good
> > idea to use standard C and put a name to the union ?
> > The changes to the source now are relatively small,
> > and this would prevent the use
> > of unnamed unions in derived works, which would require
> > far more work to be fixed.
> 
> If I'm not mistaken, GNU C (as opposed to ANSI C) is the official language  
> used by the Linux kernel and there are quite a few other extensions that  
> are consistently used throughout the kernel. I therefore don't think  
> there's going to be a problem with that in the future. But If I'm missing  
> something, please correct me!

one reason of concern is a note about future support that i misread
in http://gcc.gnu.org/onlinedocs/gcc/Unnamed-Fields.html:

	... For example, this structure:
		...
	It is ambiguous which a is being referred to with `foo.a'.
	Such constructs are not supported and must be avoided.  In
	the future, such constructs may be detected and treated as
	compilation errors.

maybe the note on treating these as errors in the future
refers only to ambiguous constructs and not to all unnamed unions.

the other reason for concern is ease of porting to other systems -- things
like pragmas and attributes are easy to remap with a one time
#define, but unnamed extensions are a pain to handle because you
have to modify all references to the fields in the source.

and of course - there is the issue of code safety, because
1)this feature can cause ambiguous constructs, and 2) it doesn't
suggest the programmer that multiple items are sharing the same
memory location. The union name at least gives you some hints,
especially if you call it 'u' ...

> Laurent, can you check Luigi's patch anyway? Some of the changes make  
> sense regardless of the above. Thanks.

cheers
luigi

> Cheers,
> Martin
> 
> 
> > diff -ubwr trunk/trunk/uvc_ctrl.c ./uvc_ctrl.c
> > --- trunk/trunk/uvc_ctrl.c	Wed Jan 31 23:53:36 2007
> > +++ ./uvc_ctrl.c	Wed Jan 31 23:29:59 2007
> > @@ -795,6 +795,7 @@
> >  	mutex_unlock(&uvc_driver.ctrl_mutex);
> >  }
> > +static
> >  void uvc_ctrl_add_mapping(struct uvc_control_mapping *mapping)
> >  {
> >  	struct uvc_control_info *info;
> > diff -ubwr trunk/trunk/uvc_driver.c ./uvc_driver.c
> > --- trunk/trunk/uvc_driver.c	Wed Jan 31 23:53:36 2007
> > +++ ./uvc_driver.c	Wed Jan 31 21:36:15 2007
> > @@ -664,7 +664,7 @@
> >  		unit->type = VC_EXTENSION_UNIT;
> >  		memcpy(unit->extension.guidExtensionCode, &buffer[4], 16);
> >  		unit->extension.bNumControls = buffer[20];
> > -		unit->extension.bNrInPins = le16_to_cpup((__le16*)&buffer[21]);
> > +		unit->extension.bNrInPins = le16_to_cpup((const __le16*)&buffer[21]);
> >  		unit->extension.baSourceID = (__u8*)unit + sizeof *unit;
> >  		memcpy(unit->extension.baSourceID, &buffer[22], p);
> >  		unit->extension.bControlSize = buffer[22+p];
> > diff -ubwr trunk/trunk/uvcvideo.h ./uvcvideo.h
> > --- trunk/trunk/uvcvideo.h	Wed Jan 31 23:53:36 2007
> > +++ ./uvcvideo.h	Wed Jan 31 23:23:50 2007
> > @@ -478,7 +478,7 @@
> >  };
> > struct uvc_video_queue {
> > -	void *mem;
> > +	char *mem;	/* we do pointer arithmetic here */
> >  	unsigned int streaming;
> >  	__u32 sequence;
> >  	__u8 last_fid;
> >
> >
> >
> > _______________________________________________
> > Linux-uvc-devel mailing list
> > Linux-uvc-devel at lists.berlios.de
> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 
> 


From linux at rubli.info  Thu Feb  1 21:24:04 2007
From: linux at rubli.info (Martin Rubli)
Date: Thu, 1 Feb 2007 12:24:04 -0800
Subject: [Linux-uvc-devel] Sony Vaio VGN-SZ3VWP/X built-in laptop webcam
In-Reply-To: <1170093257.5805.17.camel@mercurial>
References: op.tkf9ksee42iof8@maya <1170093257.5805.17.camel@mercurial>
Message-ID: <000101c7463e$ed7d5880$c8780980$@info>

Hi Daniel,

Unfortunately, this camera isn't a UVC webcam either. Below are instructions
how you can find out ...

Unless you know what kind of chipset the camera uses you might have a hard
time finding a driver. Maybe you can tell from the Windows driver?

Cheers,
Martin


Use the lsusb tool and look for video class interfaces like this: (In this
example, the VID is 046d and the PID is 08cb.)

lsusb -d 046d:08cb -v | grep "14 Video"

If your device is a UVC device, you should see a number of lines that look
like this: 
bFunctionClass         14 Video
bInterfaceClass        14 Video
bInterfaceClass        14 Video
bInterfaceClass        14 Video

In this case the Linux UVC driver should recognize your camera when you plug
it in. 

If there are no such lines, your device is not a UVC device.



> -----Original Message-----
> From: Daniel Storm [mailto:daniel at verbena.co.uk]
> Sent: Monday, January 29, 2007 9:54 AM
> To: linux at rubli.info
> Subject: [Linux-uvc-devel] HP Pavillon dv6000 built-in laptop webcam
> 
> Hi Martin,
> 
> Apologies for the direct mail, rather than to the uvc-devel list (I'm
> not a member right now).
> 
> Here's another Ricoh built in webcam from a Sony Vaio PCG-6N1M (or
> VGN-SZ3VWP/X if you prefer). It's a different model to the one you
> listed in your post.
> 
> I don't know whether this card is already supported by the uvc driver,
> the source didn't build or mention Ricoh, so I hope this mail isn't a
> waste of your time.
> 
> Please feel free to pass my details to anyone constructing a letter to
> Ricoh requesting technical details (as long as my email isn't
> published).
> 
> Dan
> 
> # lsusb -v -s 005:003
> 
> Bus 005 Device 003: ID 05ca:1830 Ricoh Co., Ltd
> Device Descriptor:
>   bLength                18
>   bDescriptorType         1
>   bcdUSB               2.00
>   bDeviceClass            0 (Defined at Interface level)
>   bDeviceSubClass         0
>   bDeviceProtocol         0
>   bMaxPacketSize0        64
>   idVendor           0x05ca Ricoh Co., Ltd
>   idProduct          0x1830
>   bcdDevice            1.00
>   iManufacturer           0
>   iProduct                0
>   iSerial                 0
>   bNumConfigurations      1
>   Configuration Descriptor:
>     bLength                 9
>     bDescriptorType         2
>     wTotalLength           78
>     bNumInterfaces          1
>     bConfigurationValue     1
>     iConfiguration          0
>     bmAttributes         0x80
>       (Bus Powered)
>     MaxPower              100mA
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       0
>       bNumEndpoints           2
>       bInterfaceClass         6 Imaging
>       bInterfaceSubClass      0
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0040  1x 64 bytes
>         bInterval               1
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x86  EP 6 IN
>         bmAttributes            1
>           Transfer Type            Isochronous
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0000  1x 0 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       1
>       bNumEndpoints           2
>       bInterfaceClass         6 Imaging
>       bInterfaceSubClass      0
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0040  1x 64 bytes
>         bInterval               1
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x86  EP 6 IN
>         bmAttributes            1
>           Transfer Type            Isochronous
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0c00  2x 0 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       2
>       bNumEndpoints           2
>       bInterfaceClass         6 Imaging
>       bInterfaceSubClass      0
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0040  1x 64 bytes
>         bInterval               1
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x86  EP 6 IN
>         bmAttributes            1
>           Transfer Type            Isochronous
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x1400  3x 0 bytes
>         bInterval               1
> Device Qualifier (for other device speed):
>   bLength                10
>   bDescriptorType         6
>   bcdUSB               2.00
>   bDeviceClass            0 (Defined at Interface level)
>   bDeviceSubClass         0
>   bDeviceProtocol         0
>   bMaxPacketSize0        64
>   bNumConfigurations      1
> Device Status:     0x0000
>   (Bus Powered)




From linux at rubli.info  Fri Feb  2 02:24:33 2007
From: linux at rubli.info (Martin Rubli)
Date: Thu, 01 Feb 2007 17:24:33 -0800
Subject: [Linux-uvc-devel] Automatic Gain Control
In-Reply-To: <200701110907.46797.mxhaard@magic.fr>
References: <a4fd5c620701080918l7ee8bc70w1673299b1e71fcb5@mail.gmail.com>
	<200701101049.31698.mxhaard@magic.fr>
	<op.tlyzhqf242iof8@nb-mrublixp.am.logitech.com>
	<200701110907.46797.mxhaard@magic.fr>
Message-ID: <op.tm3ku7za42iof8@nb-mrublixp.am.logitech.com>

Hi Michel,

On Thu, 11 Jan 2007 00:07:46 -0800, Michel Xhaard <mxhaard at magic.fr> wrote:

>> The zero step size for the absolute exposure time is obviously wrong. I
>> don't currently have my USB analyzer to check what's going on there.

I found the problem in the driver. There is a bug in the uvc_get_le_value  
function, which leads to wrong values when reading 32-bit wide controls. I  
have a patch and I'll submit it to Laurent. The control now looks as  
follows:

   Exposure (Absolute)
     ID      : 17,
     Type    : Dword,
     Flags   : { CAN_READ, CAN_WRITE, IS_CUSTOM },
     Values  : [ 1 .. 10000, step size: 1 ],
     Default : 166

>> Also, I get errors when I try to read these controls. This seems to be  
>> why the
>> controls don't work in luvcview.

Another bug in the control definition in the UVC driver. Certain controls  
were accidentally marked as write-only, which explains the error. It's  
part of the patch that I mentioned, it should be fixed soon in the  
repository.

> Yes luvcview used the step value.

We'll post a message to the list as soon as the patch is committed. It  
would be great if you could retest it ...

Cheers,
Martin


From linux at rubli.info  Fri Feb  2 03:33:12 2007
From: linux at rubli.info (Martin Rubli)
Date: Thu, 01 Feb 2007 18:33:12 -0800
Subject: [Linux-uvc-devel] -Werror fixes for uvcvideo
In-Reply-To: <20070201121200.A84181@xorpc.icir.org>
References: <20070131155224.D63447@xorpc.icir.org>
	<op.tm25eau442iof8@nb-mrublixp.am.logitech.com>
	<20070201121200.A84181@xorpc.icir.org>
Message-ID: <op.tm3n1mh842iof8@nb-mrublixp.am.logitech.com>

On Thu, 01 Feb 2007 12:12:00 -0800, Luigi Rizzo <rizzo at icir.org> wrote:

> one reason of concern is a note about future support that i misread
> in http://gcc.gnu.org/onlinedocs/gcc/Unnamed-Fields.html:
>
> 	... For example, this structure:
> 		...
> 	It is ambiguous which a is being referred to with `foo.a'.
> 	Such constructs are not supported and must be avoided.  In
> 	the future, such constructs may be detected and treated as
> 	compilation errors.
>
> maybe the note on treating these as errors in the future
> refers only to ambiguous constructs and not to all unnamed unions.

Yes, indeed. In our case there is no ambiguity. The whole struct becomes  
much easier to read if the unions are anonymous.

> the other reason for concern is ease of porting to other systems --  
> things like pragmas and attributes are easy to remap with a one time
> #define, but unnamed extensions are a pain to handle because you
> have to modify all references to the fields in the source.
>
> and of course - there is the issue of code safety, because
> 1)this feature can cause ambiguous constructs, and 2) it doesn't
> suggest the programmer that multiple items are sharing the same
> memory location. The union name at least gives you some hints,
> especially if you call it 'u' ...

I somewhat agree with the portability part. However, these Linux system  
structures (they're part of V4L2 and, therefore, the official Linux  
kernel) are not designed to be portable. And given the wide availability  
of gcc I think you'd have a hard time finding a platform to port V4L2 to  
that doesn't support these constructs.

If you want, you can raise the discussion on the V4L2 mailing list. When  
we proposed the changes we were really just trying to fit in to what was  
already there.

Cheers,
Martin


From rizzo at icir.org  Fri Feb  2 09:03:19 2007
From: rizzo at icir.org (Luigi Rizzo)
Date: Fri, 2 Feb 2007 00:03:19 -0800
Subject: [Linux-uvc-devel] -Werror fixes for uvcvideo
In-Reply-To: <op.tm3n1mh842iof8@nb-mrublixp.am.logitech.com>;
	from linux@rubli.info on Thu, Feb 01, 2007 at 06:33:12PM -0800
References: <20070131155224.D63447@xorpc.icir.org>
	<op.tm25eau442iof8@nb-mrublixp.am.logitech.com>
	<20070201121200.A84181@xorpc.icir.org>
	<op.tm3n1mh842iof8@nb-mrublixp.am.logitech.com>
Message-ID: <20070202000319.A91277@xorpc.icir.org>

On Thu, Feb 01, 2007 at 06:33:12PM -0800, Martin Rubli wrote:
> On Thu, 01 Feb 2007 12:12:00 -0800, Luigi Rizzo <rizzo at icir.org> wrote:
...
> > the other reason for concern is ease of porting to other systems --  
> > things like pragmas and attributes are easy to remap with a one time
> > #define, but unnamed extensions are a pain to handle because you
> > have to modify all references to the fields in the source.
> >
> > and of course - there is the issue of code safety, because
> > 1)this feature can cause ambiguous constructs, and 2) it doesn't
> > suggest the programmer that multiple items are sharing the same
> > memory location. The union name at least gives you some hints,
> > especially if you call it 'u' ...
> 
> I somewhat agree with the portability part. However, these Linux system  
> structures (they're part of V4L2 and, therefore, the official Linux  
> kernel) are not designed to be portable.

yes i know - probably not a smart decision given that they define an API,
so the impact is not just on the kernel but also third party
code written for userland.

I find it also somewhat ironical that someone writing GPL code (where
the license claims "... the GNU General Public License is intended
to guarantee your freedom to share and change free software") may
also assert that their code is not designed to be portable, because
this negates the share/reuse principle in the first place.

On the other hand, i understand that changing things now would
be problematic. In my version of videodev2.h i do this:

	/*
	 * This file has some anonymous unions that are invalid for C99,
	 * but required by some linux apps that use this interface.
	 * As a workaround, we put a default name of 'u' to them,
	 * unless the caller compiles with -DANONYMOUS_UNION
	 * and then we set to the empty string.
	 */
	#ifndef ANONYMOUS_UNION
	#define ANONYMOUS_UNION u
	#else
	#undef  ANONYMOUS_UNION /* clear previous value */
	#define ANONYMOUS_UNION /* and set to empty */
	#endif

	...

		union {                                 /* Frame size */
			struct v4l2_frmsize_discrete    discrete;
			struct v4l2_frmsize_stepwise    stepwise;
		} ANONYMOUS_UNION;
	...

so at compile time you can adapt to both dialect.

> of gcc I think you'd have a hard time finding a platform to port V4L2 to  
> that doesn't support these constructs.

right - but sometimes you need to build software from various sources
and it is a pain to use different compiler settings for each source file.

> If you want, you can raise the discussion on the V4L2 mailing list. When  

i suspect it would turn into a religion war.

For the time being i just wanted to raise the portability issues to
this project, and would just be happy if you would take the
the pros and cons in proper consideration.

thanks for the feeback
luigi


From mxhaard at magic.fr  Fri Feb  2 12:01:29 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Fri, 2 Feb 2007 12:01:29 +0100
Subject: [Linux-uvc-devel] Automatic Gain Control
In-Reply-To: <op.tm3ku7za42iof8@nb-mrublixp.am.logitech.com>
References: <a4fd5c620701080918l7ee8bc70w1673299b1e71fcb5@mail.gmail.com>
	<200701110907.46797.mxhaard@magic.fr>
	<op.tm3ku7za42iof8@nb-mrublixp.am.logitech.com>
Message-ID: <200702021201.30026.mxhaard@magic.fr>

Le Vendredi 2 F?vrier 2007 02:24, Martin Rubli a ?crit?:
> Hi Michel,
>
> On Thu, 11 Jan 2007 00:07:46 -0800, Michel Xhaard <mxhaard at magic.fr> wrote:
> >> The zero step size for the absolute exposure time is obviously wrong. I
> >> don't currently have my USB analyzer to check what's going on there.
>
> I found the problem in the driver. 
Cool, thanks :)
> There is a bug in the uvc_get_le_value 
> function, which leads to wrong values when reading 32-bit wide controls. I
> have a patch and I'll submit it to Laurent. The control now looks as
> follows:
>
>    Exposure (Absolute)
>      ID      : 17,
>      Type    : Dword,
>      Flags   : { CAN_READ, CAN_WRITE, IS_CUSTOM },
>      Values  : [ 1 .. 10000, step size: 1 ],
>      Default : 166
>
> >> Also, I get errors when I try to read these controls. This seems to be
> >> why the
> >> controls don't work in luvcview.
>
> Another bug in the control definition in the UVC driver. Certain controls
> were accidentally marked as write-only, which explains the error. It's
> part of the patch that I mentioned, it should be fixed soon in the
> repository.
>
> > Yes luvcview used the step value.
>
> We'll post a message to the list as soon as the patch is committed. It
> would be great if you could retest it ...
No problem
>
> Cheers,
> Martin
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
Cheers
-- 
Michel Xhaard
http://mxhaard.free.fr


From ebi9 at ozob.net  Fri Feb  2 17:45:02 2007
From: ebi9 at ozob.net (Gene Imes)
Date: Fri, 02 Feb 2007 10:45:02 -0600
Subject: [Linux-uvc-devel] green screen
In-Reply-To: <op.tm215sfv42iof8@nb-mrublixp.am.logitech.com>
References: <45BB9E70.5020505@ozob.net>
	<op.tm215sfv42iof8@nb-mrublixp.am.logitech.com>
Message-ID: <45C36A8E.5020201@ozob.net>

Martin Rubli wrote:
> Does your Proscope work with any other applications like luvcview? If 
> so, there might be a bug in the Ekiga decoder, in which case you should 
> take your request to the Ekiga developers.
> 
> Cheers,
> Martin


Yes, it works with luvcview. Ekiga developers said I should look here. 
Are there any other v4l2 applications I can try?


> 
> 
> On Sat, 27 Jan 2007 10:48:16 -0800, Gene Imes <ebi9 at ozob.net> wrote:
> 
>> My Bodelin ProScopeHR renders a green screen in Ekiga. I can see video.
>> A screenshot is here:
>>
>> http://ozob.net/luvc/ekiga-screen-shot.jpg
>>
>> Thanks for any help,
> 
> 

Thanks,

-- 
Gene Imes ============================= ozob.net


From luca.risolia at studio.unibo.it  Sat Feb  3 11:13:21 2007
From: luca.risolia at studio.unibo.it (Luca Risolia)
Date: Sat, 3 Feb 2007 11:13:21 +0100
Subject: [Linux-uvc-devel] poll() and read() standard system calls
Message-ID: <200702031113.21944.luca.risolia@studio.unibo.it>

Hello,

after having had a rapid look at UVC driver internals, I saw that the 
read() system call has not been implemented yet, while poll() is
implemented and can be called from userspace.

Apart from the V4L2 API, given that poll() is a standard
system call and is supposed to be closely tied to non-blocking reads()
to provide a _standard_ I/O mechanism for retrieving data, are there
any reasons for not providing read() as well together with poll(),
as it's probably confusing to have partial support for this
I/O interface?

Best regards
Luca


From ML at Bartschnet.de  Sun Feb  4 00:56:30 2007
From: ML at Bartschnet.de (Rene Bartsch)
Date: Sun, 4 Feb 2007 00:56:30 +0100 (CET)
Subject: [Linux-uvc-devel] V4L software with linux-uvc?
Message-ID: <63895.84.174.199.230.1170546990.squirrel@www.bartschnet.de>

Hi,

I'm successfully using "Logitech QuickCam for Notebooks Pro" on two Gentoo
machines with with Linux-UVC and V4L2 (e.g. Ekiga).

But as a lot of applications haven't been ported to V4L2, yet (Adobe Flash
Player, Sane-Backends, ...) I'm looking for a way to emulate an V4L1
device. Is there any way to do this with linux-uvc?

Thanx for any hint

Renne



From laurent.pinchart at skynet.be  Sun Feb  4 17:42:16 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 4 Feb 2007 17:42:16 +0100
Subject: [Linux-uvc-devel] Control mappings
In-Reply-To: <op.tm241jtf42iof8@nb-mrublixp.am.logitech.com>
References: <200701292250.28445.contact@alexandredenis.net>
	<op.tm241jtf42iof8@nb-mrublixp.am.logitech.com>
Message-ID: <200702041742.18320.laurent.pinchart@skynet.be>

Hi Alexandre,

> > I would believe that the following extended controls should actually be
> > mapped onto standard V4L2 controls :
> >
> >  "Exposure, Auto" = V4L2_CID_AUTOGAIN
> >  "Exposure (Absolute)" = V4L2_CID_EXPOSURE
> >  "White Balance Temperature, Auto" = V4L2_CID_AUTO_WHITE_BALANCE
> >  "White Balance Temperature" = V4L2_CID_GAMMA
> >
> > Or am I missing something?

For the sake of clarity, there are no "extended" controls. We currently have 
standard controls (defined in the V4L2 specification) and private controls 
(defined by drivers). There is also an extended control API, where "extended" 
refers to the API and not the individual controls.

> There is still some ongoing discussion (euphemism alert) on how to best
> map UVC controls (the USB Video Class spec defines quite a few) to V4L2
> controls. The fact is that V4L2 controls are not even kinda close to what
> we need for the UVC driver. If you have a strong opinion on that or any
> helpful arguments, then feel free to speak up on the v4l-list
> (https://www.redhat.com/mailman/private/video4linux-list/2007-January/threa
>d.html, search for "New control identifiers"). We're especially looking for
> people with a background in photography/imaging.
>
> Back to your e-mail, though. :-) We'll certainly review these controls
> once V4L2 is updated. In the meantime a few notes:
> - White balance can be specified in temperature or a red/blue channel
> correction. But Gamma correction is a completely different story.
> - Gain and exposure time are often related, but, in camera terms, are two
> different controls.
> - There is relative and absolute exposure time. V4L2 does not specify what
> V4L2_CID_EXPOSURE means.

All standard UVC controls should be mapped to standard V4L2 controls. Mauro 
(the V4L maintainer) agreed to add some of the needed controls to the V4L2 
spec, but still disagrees about the others. As Martin stated, we need people 
with technical knowledge on the subject to voice their opinion on the V4L 
mailing list. This is the last step before submitting the driver for 
inclusion in the mainline kernel.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Feb  4 18:12:29 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 4 Feb 2007 18:12:29 +0100
Subject: [Linux-uvc-devel]
	=?utf-8?q?Window_resize_crash_report=2C_with_lu?=
	=?utf-8?q?vcveiw-20070107_and_QC_Fusion_=28046d=3A08c1=29?=
In-Reply-To: <op.tm225wfd42iof8@nb-mrublixp.am.logitech.com>
References: <1169967574.3040.16.camel@linux23dragon.example.org>
	<op.tm225wfd42iof8@nb-mrublixp.am.logitech.com>
Message-ID: <200702041812.31309.laurent.pinchart@skynet.be>

> Thanks for your extensive report. :-)
>
> The ?EOF in empty packet? is harmless and merely a debug output relict
>  from an old version. I thought it was removed at some point but apparently
> that's not the case.
>
> Laurent, can you please apply the attached patch? Thanks.

Applied, thanks.

> About our luvcview crash, that would be something to take to Michel
> Xhaard, the author of the application.
>
> > Jan 28 15:15:08 kernel: uvcvideo: Failed to query (135) UVC control 2
> > (unit 2) : -32 (exp. 2).
>
> And finally, the failed queries in your syslog are a bug in the camera's
> USB chip. It was discussed at length in previous threads. Please have a
> look at:
> https://lists.berlios.de/pipermail/linux-uvc-devel/
>
> There are a few workarounds to be found in the list archive, but none of
> them was confirmed to be 100% effective.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Feb  4 21:43:42 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 4 Feb 2007 21:43:42 +0100
Subject: [Linux-uvc-devel] V4L software with linux-uvc?
In-Reply-To: <63895.84.174.199.230.1170546990.squirrel@www.bartschnet.de>
References: <63895.84.174.199.230.1170546990.squirrel@www.bartschnet.de>
Message-ID: <200702042143.43781.laurent.pinchart@skynet.be>

Hi Rene,

> I'm successfully using "Logitech QuickCam for Notebooks Pro" on two Gentoo
> machines with with Linux-UVC and V4L2 (e.g. Ekiga).
>
> But as a lot of applications haven't been ported to V4L2, yet (Adobe Flash
> Player, Sane-Backends, ...) I'm looking for a way to emulate an V4L1
> device. Is there any way to do this with linux-uvc?

V4L2 provides a V4L1 compatibility layer. I haven't heard about anyone getting 
it working with the UVC driver, so it will probably not be easy.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Feb  4 21:47:30 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 4 Feb 2007 21:47:30 +0100
Subject: [Linux-uvc-devel] poll() and read() standard system calls
In-Reply-To: <200702031113.21944.luca.risolia@studio.unibo.it>
References: <200702031113.21944.luca.risolia@studio.unibo.it>
Message-ID: <200702042147.31553.laurent.pinchart@skynet.be>

Hi Luca,

> after having had a rapid look at UVC driver internals, I saw that the
> read() system call has not been implemented yet, while poll() is
> implemented and can be called from userspace.
>
> Apart from the V4L2 API, given that poll() is a standard
> system call and is supposed to be closely tied to non-blocking reads()
> to provide a _standard_ I/O mechanism for retrieving data, are there
> any reasons for not providing read() as well together with poll(),
> as it's probably confusing to have partial support for this
> I/O interface?

The only reason why read() hasn't been implemented (yet) is that mmap() has 
been implemented first, and there hasn't been any demand for read(). It's on 
my todo list though.

poll() without read() makes sense, using VIDIOC_DQBUF.

Best regards,

Laurent Pinchart


From bnc at astronomicalresearchaustralia.org  Mon Feb  5 05:31:48 2007
From: bnc at astronomicalresearchaustralia.org (Brian)
Date: Mon, 05 Feb 2007 15:31:48 +1100
Subject: [Linux-uvc-devel] QuickCam Fusion lockup
In-Reply-To: <45A40727.4020607@cetoncorp.com>
References: <45A32C4F.7080004@astronomicalresearchaustralia.org>	<200701092119.25145.laurent.pinchart@skynet.be>
	<45A40727.4020607@cetoncorp.com>
Message-ID: <45C6B334.7040901@astronomicalresearchaustralia.org>

Laurent,
I have recently recompiled the lastest EKIGA which now seems to be
working pretty well with my Fusion webcam.
I have stopped and started  it many times without experiencing problems.
(it used to happen every 3-4 times).
Anyway, something for your thought processes:),I got the lockout last
night and just decided to shutdown ekiga and go to bed.
When I tried Ekiga the next morning to get the error messages, it worked!
To emphasize I did nothing in between. Did not reset the usb or power
off the pc etc.
It has to be a timeout issue somewhere?

Thanks for a very usable driver.

Brian
-------------- next part --------------
A non-text attachment was scrubbed...
Name: bnc.vcf
Type: text/x-vcard
Size: 110 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070205/6ff1de3d/attachment.vcf>

From luca.risolia at studio.unibo.it  Mon Feb  5 10:13:06 2007
From: luca.risolia at studio.unibo.it (Luca Risolia)
Date: Mon, 5 Feb 2007 10:13:06 +0100
Subject: [Linux-uvc-devel] poll() and read() standard system calls
In-Reply-To: <200702042147.31553.laurent.pinchart@skynet.be>
References: <200702031113.21944.luca.risolia@studio.unibo.it>
	<200702042147.31553.laurent.pinchart@skynet.be>
Message-ID: <200702051013.07242.luca.risolia@studio.unibo.it>

Alle 21:47, domenica 4 febbraio 2007, Laurent Pinchart ha scritto:
> poll() without read() makes sense, using VIDIOC_DQBUF.

It has little sense. It looks like a mix of I/O methods from the user
point of view. Furthermore, poll() does not seem to start to
capture video data as expected. This is a flaw. I wonder how you can
implement the code to start the video streaming and integrate the
resulting streaming with all the ioctl's related to the mmap() I/O
method described by the V4L2 protocol.
(VIDIOC_QUERYBUF fo istance).

Best regards
Luca


From avilella at gmail.com  Mon Feb  5 10:20:17 2007
From: avilella at gmail.com (Albert Vilella)
Date: Mon, 5 Feb 2007 09:20:17 +0000
Subject: [Linux-uvc-devel] Sony Vaio VGN-SZ3VWP/X built-in laptop webcam
In-Reply-To: <000101c7463e$ed7d5880$c8780980$@info>
References: <1170093257.5805.17.camel@mercurial>
	<000101c7463e$ed7d5880$c8780980$@info>
Message-ID: <358f4d650702050120k472ab7fdta92f44457a32d328@mail.gmail.com>

This is weird because the support people from Ricoh insist on the UVC
compliance of their devices:

> Ricoh's USB-Video controllers comply with USB Video Class, > so it will operate with Linux driver which complies with USB > Video Class, then you can develop it by yourself.

But, the way I see it from what I have read in this mailing list, if
lsusb does not find this "14 Video" lines, the device should not be
UVC compliant, right?

Cheers,

    Albert.

On 2/1/07, Martin Rubli <linux at rubli.info> wrote:
> Hi Daniel,
>
> Unfortunately, this camera isn't a UVC webcam either. Below are instructions
> how you can find out ...
>
> Unless you know what kind of chipset the camera uses you might have a hard
> time finding a driver. Maybe you can tell from the Windows driver?
>
> Cheers,
> Martin
>
>
> Use the lsusb tool and look for video class interfaces like this: (In this
> example, the VID is 046d and the PID is 08cb.)
>
> lsusb -d 046d:08cb -v | grep "14 Video"
>
> If your device is a UVC device, you should see a number of lines that look
> like this:
> bFunctionClass         14 Video
> bInterfaceClass        14 Video
> bInterfaceClass        14 Video
> bInterfaceClass        14 Video
>
> In this case the Linux UVC driver should recognize your camera when you plug
> it in.
>
> If there are no such lines, your device is not a UVC device.
>
>
>
> > -----Original Message-----
> > From: Daniel Storm [mailto:daniel at verbena.co.uk]
> > Sent: Monday, January 29, 2007 9:54 AM
> > To: linux at rubli.info
> > Subject: [Linux-uvc-devel] HP Pavillon dv6000 built-in laptop webcam
> >
> > Hi Martin,
> >
> > Apologies for the direct mail, rather than to the uvc-devel list (I'm
> > not a member right now).
> >
> > Here's another Ricoh built in webcam from a Sony Vaio PCG-6N1M (or
> > VGN-SZ3VWP/X if you prefer). It's a different model to the one you
> > listed in your post.
> >
> > I don't know whether this card is already supported by the uvc driver,
> > the source didn't build or mention Ricoh, so I hope this mail isn't a
> > waste of your time.
> >
> > Please feel free to pass my details to anyone constructing a letter to
> > Ricoh requesting technical details (as long as my email isn't
> > published).
> >
> > Dan
> >
> > # lsusb -v -s 005:003
> >
> > Bus 005 Device 003: ID 05ca:1830 Ricoh Co., Ltd
> > Device Descriptor:
> >   bLength                18
> >   bDescriptorType         1
> >   bcdUSB               2.00
> >   bDeviceClass            0 (Defined at Interface level)
> >   bDeviceSubClass         0
> >   bDeviceProtocol         0
> >   bMaxPacketSize0        64
> >   idVendor           0x05ca Ricoh Co., Ltd
> >   idProduct          0x1830
> >   bcdDevice            1.00
> >   iManufacturer           0
> >   iProduct                0
> >   iSerial                 0
> >   bNumConfigurations      1
> >   Configuration Descriptor:
> >     bLength                 9
> >     bDescriptorType         2
> >     wTotalLength           78
> >     bNumInterfaces          1
> >     bConfigurationValue     1
> >     iConfiguration          0
> >     bmAttributes         0x80
> >       (Bus Powered)
> >     MaxPower              100mA
> >     Interface Descriptor:
> >       bLength                 9
> >       bDescriptorType         4
> >       bInterfaceNumber        0
> >       bAlternateSetting       0
> >       bNumEndpoints           2
> >       bInterfaceClass         6 Imaging
> >       bInterfaceSubClass      0
> >       bInterfaceProtocol      0
> >       iInterface              0
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x81  EP 1 IN
> >         bmAttributes            3
> >           Transfer Type            Interrupt
> >           Synch Type               None
> >           Usage Type               Data
> >         wMaxPacketSize     0x0040  1x 64 bytes
> >         bInterval               1
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x86  EP 6 IN
> >         bmAttributes            1
> >           Transfer Type            Isochronous
> >           Synch Type               None
> >           Usage Type               Data
> >         wMaxPacketSize     0x0000  1x 0 bytes
> >         bInterval               1
> >     Interface Descriptor:
> >       bLength                 9
> >       bDescriptorType         4
> >       bInterfaceNumber        0
> >       bAlternateSetting       1
> >       bNumEndpoints           2
> >       bInterfaceClass         6 Imaging
> >       bInterfaceSubClass      0
> >       bInterfaceProtocol      0
> >       iInterface              0
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x81  EP 1 IN
> >         bmAttributes            3
> >           Transfer Type            Interrupt
> >           Synch Type               None
> >           Usage Type               Data
> >         wMaxPacketSize     0x0040  1x 64 bytes
> >         bInterval               1
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x86  EP 6 IN
> >         bmAttributes            1
> >           Transfer Type            Isochronous
> >           Synch Type               None
> >           Usage Type               Data
> >         wMaxPacketSize     0x0c00  2x 0 bytes
> >         bInterval               1
> >     Interface Descriptor:
> >       bLength                 9
> >       bDescriptorType         4
> >       bInterfaceNumber        0
> >       bAlternateSetting       2
> >       bNumEndpoints           2
> >       bInterfaceClass         6 Imaging
> >       bInterfaceSubClass      0
> >       bInterfaceProtocol      0
> >       iInterface              0
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x81  EP 1 IN
> >         bmAttributes            3
> >           Transfer Type            Interrupt
> >           Synch Type               None
> >           Usage Type               Data
> >         wMaxPacketSize     0x0040  1x 64 bytes
> >         bInterval               1
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x86  EP 6 IN
> >         bmAttributes            1
> >           Transfer Type            Isochronous
> >           Synch Type               None
> >           Usage Type               Data
> >         wMaxPacketSize     0x1400  3x 0 bytes
> >         bInterval               1
> > Device Qualifier (for other device speed):
> >   bLength                10
> >   bDescriptorType         6
> >   bcdUSB               2.00
> >   bDeviceClass            0 (Defined at Interface level)
> >   bDeviceSubClass         0
> >   bDeviceProtocol         0
> >   bMaxPacketSize0        64
> >   bNumConfigurations      1
> > Device Status:     0x0000
> >   (Bus Powered)
>
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From laurent.pinchart at skynet.be  Mon Feb  5 10:22:37 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 5 Feb 2007 10:22:37 +0100
Subject: [Linux-uvc-devel] poll() and read() standard system calls
In-Reply-To: <200702051013.07242.luca.risolia@studio.unibo.it>
References: <200702031113.21944.luca.risolia@studio.unibo.it>
	<200702042147.31553.laurent.pinchart@skynet.be>
	<200702051013.07242.luca.risolia@studio.unibo.it>
Message-ID: <200702051022.37791.laurent.pinchart@skynet.be>

Hi Luca,

> > poll() without read() makes sense, using VIDIOC_DQBUF.
>
> It has little sense. It looks like a mix of I/O methods from the user
> point of view.

It isn't. The Linux UVC driver supports the streaming I/O with memory mapped 
buffers only. This is allowed by the V4L2 spec:

"The V4L2 API de?nes several different methods to read from or write to a 
device. All drivers exchanging data with applications must support at least 
one of them." (p. 44)

read() support will be implemented later. Regarding poll(), V4L2 states that

"All drivers implementing the read() or write() function or streaming I/O must 
also support the poll() function. See the poll() manual page for details." 
(p. 172)

poll() support is thus required.

> Furthermore, poll() does not seem to start to capture video data as
> expected. This is a flaw.

poll() is not expected to start to capture video data when using a streaming 
I/O method. You need to explicitely call VIDIOC_STREAMON.

> I wonder how you can implement the code to start the video streaming and
> integrate the resulting streaming with all the ioctl's related to the mmap()
> I/O method described by the V4L2 protocol.
> (VIDIOC_QUERYBUF fo istance).

I'm not sure what you mean there. poll() must not start video streaming when 
using a streaming I/O method.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Feb  5 10:28:52 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 5 Feb 2007 10:28:52 +0100
Subject: [Linux-uvc-devel] Sony Vaio VGN-SZ3VWP/X built-in laptop webcam
In-Reply-To: <358f4d650702050120k472ab7fdta92f44457a32d328@mail.gmail.com>
References: <1170093257.5805.17.camel@mercurial>
	<000101c7463e$ed7d5880$c8780980$@info>
	<358f4d650702050120k472ab7fdta92f44457a32d328@mail.gmail.com>
Message-ID: <200702051028.52959.laurent.pinchart@skynet.be>

> This is weird because the support people from Ricoh insist on the UVC
>
> compliance of their devices:
> > Ricoh's USB-Video controllers comply with USB Video Class, > so it will
> > operate with Linux driver which complies with USB > Video Class, then you
> > can develop it by yourself.
>
> But, the way I see it from what I have read in this mailing list, if
> lsusb does not find this "14 Video" lines, the device should not be
> UVC compliant, right?

That's right. Now, some devices might be nearly UVC compliant, and could thus  
be supported by the Linux UVC driver with minor modifications. I'm thinking 
about the first generation Logitech UVC webcams which advertised a vendor 
class (255 or 0xff) instead of a video class (14 or 0x0e), but were UVC 
compliant otherwise. For such devices, adding the vendor ID/product ID to the 
driver was enough.

The USB descriptor below clearly advertises a USB Imaging device, not a USB 
Video device. Unless there is a hidden, magical way to switch the device to 
UVC mode, there's not much the Linux UVC driver can do.

Best regards,

Laurent Pinchart

> On 2/1/07, Martin Rubli <linux at rubli.info> wrote:
> > Hi Daniel,
> >
> > Unfortunately, this camera isn't a UVC webcam either. Below are
> > instructions how you can find out ...
> >
> > Unless you know what kind of chipset the camera uses you might have a
> > hard time finding a driver. Maybe you can tell from the Windows driver?
> >
> > Cheers,
> > Martin
> >
> >
> > Use the lsusb tool and look for video class interfaces like this: (In
> > this example, the VID is 046d and the PID is 08cb.)
> >
> > lsusb -d 046d:08cb -v | grep "14 Video"
> >
> > If your device is a UVC device, you should see a number of lines that
> > look like this:
> > bFunctionClass         14 Video
> > bInterfaceClass        14 Video
> > bInterfaceClass        14 Video
> > bInterfaceClass        14 Video
> >
> > In this case the Linux UVC driver should recognize your camera when you
> > plug it in.
> >
> > If there are no such lines, your device is not a UVC device.
> >
> > > -----Original Message-----
> > > From: Daniel Storm [mailto:daniel at verbena.co.uk]
> > > Sent: Monday, January 29, 2007 9:54 AM
> > > To: linux at rubli.info
> > > Subject: [Linux-uvc-devel] HP Pavillon dv6000 built-in laptop webcam
> > >
> > > Hi Martin,
> > >
> > > Apologies for the direct mail, rather than to the uvc-devel list (I'm
> > > not a member right now).
> > >
> > > Here's another Ricoh built in webcam from a Sony Vaio PCG-6N1M (or
> > > VGN-SZ3VWP/X if you prefer). It's a different model to the one you
> > > listed in your post.
> > >
> > > I don't know whether this card is already supported by the uvc driver,
> > > the source didn't build or mention Ricoh, so I hope this mail isn't a
> > > waste of your time.
> > >
> > > Please feel free to pass my details to anyone constructing a letter to
> > > Ricoh requesting technical details (as long as my email isn't
> > > published).
> > >
> > > Dan
> > >
> > > # lsusb -v -s 005:003
> > >
> > > Bus 005 Device 003: ID 05ca:1830 Ricoh Co., Ltd
> > > Device Descriptor:
> > >   bLength                18
> > >   bDescriptorType         1
> > >   bcdUSB               2.00
> > >   bDeviceClass            0 (Defined at Interface level)
> > >   bDeviceSubClass         0
> > >   bDeviceProtocol         0
> > >   bMaxPacketSize0        64
> > >   idVendor           0x05ca Ricoh Co., Ltd
> > >   idProduct          0x1830
> > >   bcdDevice            1.00
> > >   iManufacturer           0
> > >   iProduct                0
> > >   iSerial                 0
> > >   bNumConfigurations      1
> > >   Configuration Descriptor:
> > >     bLength                 9
> > >     bDescriptorType         2
> > >     wTotalLength           78
> > >     bNumInterfaces          1
> > >     bConfigurationValue     1
> > >     iConfiguration          0
> > >     bmAttributes         0x80
> > >       (Bus Powered)
> > >     MaxPower              100mA
> > >     Interface Descriptor:
> > >       bLength                 9
> > >       bDescriptorType         4
> > >       bInterfaceNumber        0
> > >       bAlternateSetting       0
> > >       bNumEndpoints           2
> > >       bInterfaceClass         6 Imaging
> > >       bInterfaceSubClass      0
> > >       bInterfaceProtocol      0
> > >       iInterface              0
> > >       Endpoint Descriptor:
> > >         bLength                 7
> > >         bDescriptorType         5
> > >         bEndpointAddress     0x81  EP 1 IN
> > >         bmAttributes            3
> > >           Transfer Type            Interrupt
> > >           Synch Type               None
> > >           Usage Type               Data
> > >         wMaxPacketSize     0x0040  1x 64 bytes
> > >         bInterval               1
> > >       Endpoint Descriptor:
> > >         bLength                 7
> > >         bDescriptorType         5
> > >         bEndpointAddress     0x86  EP 6 IN
> > >         bmAttributes            1
> > >           Transfer Type            Isochronous
> > >           Synch Type               None
> > >           Usage Type               Data
> > >         wMaxPacketSize     0x0000  1x 0 bytes
> > >         bInterval               1
> > >     Interface Descriptor:
> > >       bLength                 9
> > >       bDescriptorType         4
> > >       bInterfaceNumber        0
> > >       bAlternateSetting       1
> > >       bNumEndpoints           2
> > >       bInterfaceClass         6 Imaging
> > >       bInterfaceSubClass      0
> > >       bInterfaceProtocol      0
> > >       iInterface              0
> > >       Endpoint Descriptor:
> > >         bLength                 7
> > >         bDescriptorType         5
> > >         bEndpointAddress     0x81  EP 1 IN
> > >         bmAttributes            3
> > >           Transfer Type            Interrupt
> > >           Synch Type               None
> > >           Usage Type               Data
> > >         wMaxPacketSize     0x0040  1x 64 bytes
> > >         bInterval               1
> > >       Endpoint Descriptor:
> > >         bLength                 7
> > >         bDescriptorType         5
> > >         bEndpointAddress     0x86  EP 6 IN
> > >         bmAttributes            1
> > >           Transfer Type            Isochronous
> > >           Synch Type               None
> > >           Usage Type               Data
> > >         wMaxPacketSize     0x0c00  2x 0 bytes
> > >         bInterval               1
> > >     Interface Descriptor:
> > >       bLength                 9
> > >       bDescriptorType         4
> > >       bInterfaceNumber        0
> > >       bAlternateSetting       2
> > >       bNumEndpoints           2
> > >       bInterfaceClass         6 Imaging
> > >       bInterfaceSubClass      0
> > >       bInterfaceProtocol      0
> > >       iInterface              0
> > >       Endpoint Descriptor:
> > >         bLength                 7
> > >         bDescriptorType         5
> > >         bEndpointAddress     0x81  EP 1 IN
> > >         bmAttributes            3
> > >           Transfer Type            Interrupt
> > >           Synch Type               None
> > >           Usage Type               Data
> > >         wMaxPacketSize     0x0040  1x 64 bytes
> > >         bInterval               1
> > >       Endpoint Descriptor:
> > >         bLength                 7
> > >         bDescriptorType         5
> > >         bEndpointAddress     0x86  EP 6 IN
> > >         bmAttributes            1
> > >           Transfer Type            Isochronous
> > >           Synch Type               None
> > >           Usage Type               Data
> > >         wMaxPacketSize     0x1400  3x 0 bytes
> > >         bInterval               1
> > > Device Qualifier (for other device speed):
> > >   bLength                10
> > >   bDescriptorType         6
> > >   bcdUSB               2.00
> > >   bDeviceClass            0 (Defined at Interface level)
> > >   bDeviceSubClass         0
> > >   bDeviceProtocol         0
> > >   bMaxPacketSize0        64
> > >   bNumConfigurations      1
> > > Device Status:     0x0000
> > >   (Bus Powered)
> >
> > _______________________________________________
> > Linux-uvc-devel mailing list
> > Linux-uvc-devel at lists.berlios.de
> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel


From laurent.pinchart at skynet.be  Mon Feb  5 10:43:05 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 5 Feb 2007 10:43:05 +0100
Subject: [Linux-uvc-devel] QuickCam Fusion lockup
In-Reply-To: <45C6B334.7040901@astronomicalresearchaustralia.org>
References: <45A32C4F.7080004@astronomicalresearchaustralia.org>
	<45A40727.4020607@cetoncorp.com>
	<45C6B334.7040901@astronomicalresearchaustralia.org>
Message-ID: <200702051043.05383.laurent.pinchart@skynet.be>

Hi Brian,

> I have recently recompiled the lastest EKIGA which now seems to be
> working pretty well with my Fusion webcam.
> I have stopped and started  it many times without experiencing problems.
> (it used to happen every 3-4 times).
> Anyway, something for your thought processes:),I got the lockout last
> night and just decided to shutdown ekiga and go to bed.
> When I tried Ekiga the next morning to get the error messages, it worked!
> To emphasize I did nothing in between. Did not reset the usb or power
> off the pc etc.
> It has to be a timeout issue somewhere?

It's more of a timing issue than a timeout issue. A USB control request is 
made of several USB transactions, made themselves of USB packets. The 
Logitech webcams fail to generate an interrupt (on the device side) when the 
packets arrive with a "wrong" timing (wrong doesn't imply USB non-compliance, 
it's just wrong according to the webcam hardware). The timing depends on many 
parameters (USB host controller, CPU speed, OS, ...) and is unfortunately 
always "right" on Windows. There is no single point of failure in Linux: 
Windows got the timing "right" but sheer luck. As the hardware has been 
tested with Windows only, the problem has never been detected before devices 
hit the market.

> Thanks for a very usable driver.

You're welcome. Future Logitech products should hopefully include a firmware 
modification to workaround the hardware bug.

Best regards,

Laurent Pinchart


From avilella at gmail.com  Mon Feb  5 11:36:27 2007
From: avilella at gmail.com (Albert Vilella)
Date: Mon, 5 Feb 2007 10:36:27 +0000
Subject: [Linux-uvc-devel] Sony Vaio VGN-SZ3VWP/X built-in laptop webcam
In-Reply-To: <200702051028.52959.laurent.pinchart@skynet.be>
References: <1170093257.5805.17.camel@mercurial>
	<000101c7463e$ed7d5880$c8780980$@info>
	<358f4d650702050120k472ab7fdta92f44457a32d328@mail.gmail.com>
	<200702051028.52959.laurent.pinchart@skynet.be>
Message-ID: <358f4d650702050236t6a1a800dhc0a374c5e163e8dd@mail.gmail.com>

Do you guys know of any tool in Windows that will show up the kind of
information lsusb does?

Any tool that will provide information about what the device can do,
in a similar fashion to the lsusb info, but for Windows.

I would then send an email to Ricoh with this data, because I am
almost sure about the answer I would get if I send them the lsusb data
straight away...

Thanks in advance,

    Albert.

On 2/5/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > This is weird because the support people from Ricoh insist on the UVC
> >
> > compliance of their devices:
> > > Ricoh's USB-Video controllers comply with USB Video Class, > so it will
> > > operate with Linux driver which complies with USB > Video Class, then you
> > > can develop it by yourself.
> >
> > But, the way I see it from what I have read in this mailing list, if
> > lsusb does not find this "14 Video" lines, the device should not be
> > UVC compliant, right?
>
> That's right. Now, some devices might be nearly UVC compliant, and could thus
> be supported by the Linux UVC driver with minor modifications. I'm thinking
> about the first generation Logitech UVC webcams which advertised a vendor
> class (255 or 0xff) instead of a video class (14 or 0x0e), but were UVC
> compliant otherwise. For such devices, adding the vendor ID/product ID to the
> driver was enough.
>
> The USB descriptor below clearly advertises a USB Imaging device, not a USB
> Video device. Unless there is a hidden, magical way to switch the device to
> UVC mode, there's not much the Linux UVC driver can do.
>
> Best regards,
>
> Laurent Pinchart
>
> > On 2/1/07, Martin Rubli <linux at rubli.info> wrote:
> > > Hi Daniel,
> > >
> > > Unfortunately, this camera isn't a UVC webcam either. Below are
> > > instructions how you can find out ...
> > >
> > > Unless you know what kind of chipset the camera uses you might have a
> > > hard time finding a driver. Maybe you can tell from the Windows driver?
> > >
> > > Cheers,
> > > Martin
> > >
> > >
> > > Use the lsusb tool and look for video class interfaces like this: (In
> > > this example, the VID is 046d and the PID is 08cb.)
> > >
> > > lsusb -d 046d:08cb -v | grep "14 Video"
> > >
> > > If your device is a UVC device, you should see a number of lines that
> > > look like this:
> > > bFunctionClass         14 Video
> > > bInterfaceClass        14 Video
> > > bInterfaceClass        14 Video
> > > bInterfaceClass        14 Video
> > >
> > > In this case the Linux UVC driver should recognize your camera when you
> > > plug it in.
> > >
> > > If there are no such lines, your device is not a UVC device.
> > >
> > > > -----Original Message-----
> > > > From: Daniel Storm [mailto:daniel at verbena.co.uk]
> > > > Sent: Monday, January 29, 2007 9:54 AM
> > > > To: linux at rubli.info
> > > > Subject: [Linux-uvc-devel] HP Pavillon dv6000 built-in laptop webcam
> > > >
> > > > Hi Martin,
> > > >
> > > > Apologies for the direct mail, rather than to the uvc-devel list (I'm
> > > > not a member right now).
> > > >
> > > > Here's another Ricoh built in webcam from a Sony Vaio PCG-6N1M (or
> > > > VGN-SZ3VWP/X if you prefer). It's a different model to the one you
> > > > listed in your post.
> > > >
> > > > I don't know whether this card is already supported by the uvc driver,
> > > > the source didn't build or mention Ricoh, so I hope this mail isn't a
> > > > waste of your time.
> > > >
> > > > Please feel free to pass my details to anyone constructing a letter to
> > > > Ricoh requesting technical details (as long as my email isn't
> > > > published).
> > > >
> > > > Dan
> > > >
> > > > # lsusb -v -s 005:003
> > > >
> > > > Bus 005 Device 003: ID 05ca:1830 Ricoh Co., Ltd
> > > > Device Descriptor:
> > > >   bLength                18
> > > >   bDescriptorType         1
> > > >   bcdUSB               2.00
> > > >   bDeviceClass            0 (Defined at Interface level)
> > > >   bDeviceSubClass         0
> > > >   bDeviceProtocol         0
> > > >   bMaxPacketSize0        64
> > > >   idVendor           0x05ca Ricoh Co., Ltd
> > > >   idProduct          0x1830
> > > >   bcdDevice            1.00
> > > >   iManufacturer           0
> > > >   iProduct                0
> > > >   iSerial                 0
> > > >   bNumConfigurations      1
> > > >   Configuration Descriptor:
> > > >     bLength                 9
> > > >     bDescriptorType         2
> > > >     wTotalLength           78
> > > >     bNumInterfaces          1
> > > >     bConfigurationValue     1
> > > >     iConfiguration          0
> > > >     bmAttributes         0x80
> > > >       (Bus Powered)
> > > >     MaxPower              100mA
> > > >     Interface Descriptor:
> > > >       bLength                 9
> > > >       bDescriptorType         4
> > > >       bInterfaceNumber        0
> > > >       bAlternateSetting       0
> > > >       bNumEndpoints           2
> > > >       bInterfaceClass         6 Imaging
> > > >       bInterfaceSubClass      0
> > > >       bInterfaceProtocol      0
> > > >       iInterface              0
> > > >       Endpoint Descriptor:
> > > >         bLength                 7
> > > >         bDescriptorType         5
> > > >         bEndpointAddress     0x81  EP 1 IN
> > > >         bmAttributes            3
> > > >           Transfer Type            Interrupt
> > > >           Synch Type               None
> > > >           Usage Type               Data
> > > >         wMaxPacketSize     0x0040  1x 64 bytes
> > > >         bInterval               1
> > > >       Endpoint Descriptor:
> > > >         bLength                 7
> > > >         bDescriptorType         5
> > > >         bEndpointAddress     0x86  EP 6 IN
> > > >         bmAttributes            1
> > > >           Transfer Type            Isochronous
> > > >           Synch Type               None
> > > >           Usage Type               Data
> > > >         wMaxPacketSize     0x0000  1x 0 bytes
> > > >         bInterval               1
> > > >     Interface Descriptor:
> > > >       bLength                 9
> > > >       bDescriptorType         4
> > > >       bInterfaceNumber        0
> > > >       bAlternateSetting       1
> > > >       bNumEndpoints           2
> > > >       bInterfaceClass         6 Imaging
> > > >       bInterfaceSubClass      0
> > > >       bInterfaceProtocol      0
> > > >       iInterface              0
> > > >       Endpoint Descriptor:
> > > >         bLength                 7
> > > >         bDescriptorType         5
> > > >         bEndpointAddress     0x81  EP 1 IN
> > > >         bmAttributes            3
> > > >           Transfer Type            Interrupt
> > > >           Synch Type               None
> > > >           Usage Type               Data
> > > >         wMaxPacketSize     0x0040  1x 64 bytes
> > > >         bInterval               1
> > > >       Endpoint Descriptor:
> > > >         bLength                 7
> > > >         bDescriptorType         5
> > > >         bEndpointAddress     0x86  EP 6 IN
> > > >         bmAttributes            1
> > > >           Transfer Type            Isochronous
> > > >           Synch Type               None
> > > >           Usage Type               Data
> > > >         wMaxPacketSize     0x0c00  2x 0 bytes
> > > >         bInterval               1
> > > >     Interface Descriptor:
> > > >       bLength                 9
> > > >       bDescriptorType         4
> > > >       bInterfaceNumber        0
> > > >       bAlternateSetting       2
> > > >       bNumEndpoints           2
> > > >       bInterfaceClass         6 Imaging
> > > >       bInterfaceSubClass      0
> > > >       bInterfaceProtocol      0
> > > >       iInterface              0
> > > >       Endpoint Descriptor:
> > > >         bLength                 7
> > > >         bDescriptorType         5
> > > >         bEndpointAddress     0x81  EP 1 IN
> > > >         bmAttributes            3
> > > >           Transfer Type            Interrupt
> > > >           Synch Type               None
> > > >           Usage Type               Data
> > > >         wMaxPacketSize     0x0040  1x 64 bytes
> > > >         bInterval               1
> > > >       Endpoint Descriptor:
> > > >         bLength                 7
> > > >         bDescriptorType         5
> > > >         bEndpointAddress     0x86  EP 6 IN
> > > >         bmAttributes            1
> > > >           Transfer Type            Isochronous
> > > >           Synch Type               None
> > > >           Usage Type               Data
> > > >         wMaxPacketSize     0x1400  3x 0 bytes
> > > >         bInterval               1
> > > > Device Qualifier (for other device speed):
> > > >   bLength                10
> > > >   bDescriptorType         6
> > > >   bcdUSB               2.00
> > > >   bDeviceClass            0 (Defined at Interface level)
> > > >   bDeviceSubClass         0
> > > >   bDeviceProtocol         0
> > > >   bMaxPacketSize0        64
> > > >   bNumConfigurations      1
> > > > Device Status:     0x0000
> > > >   (Bus Powered)
> > >
> > > _______________________________________________
> > > Linux-uvc-devel mailing list
> > > Linux-uvc-devel at lists.berlios.de
> > > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> >
> > _______________________________________________
> > Linux-uvc-devel mailing list
> > Linux-uvc-devel at lists.berlios.de
> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From tkoehler at acm.org  Mon Feb  5 12:16:14 2007
From: tkoehler at acm.org (Timo Koehler)
Date: Mon, 05 Feb 2007 12:16:14 +0100
Subject: [Linux-uvc-devel] QuickCam Fusion lockup
In-Reply-To: <200702051043.05383.laurent.pinchart@skynet.be> (Laurent
	Pinchart's message of "Mon, 5 Feb 2007 10:43:05 +0100")
References: <45A32C4F.7080004@astronomicalresearchaustralia.org>
	<45A40727.4020607@cetoncorp.com>
	<45C6B334.7040901@astronomicalresearchaustralia.org>
	<200702051043.05383.laurent.pinchart@skynet.be>
Message-ID: <87bqk8q2gx.fsf@tim.cisco.com>

Hi Laurent / Brian,

Laurent Pinchart <laurent.pinchart at skynet.be> writes:

 > Hi Brian,
 >
 >> I have recently recompiled the lastest EKIGA which now seems to be
 >> working pretty well with my Fusion webcam.
 >> I have stopped and started  it many times without experiencing problems.
 >> (it used to happen every 3-4 times).
 >> Anyway, something for your thought processes:),I got the lockout last
 >> night and just decided to shutdown ekiga and go to bed.
 >> When I tried Ekiga the next morning to get the error messages, it worked!
 >> To emphasize I did nothing in between. Did not reset the usb or power
 >> off the pc etc.
 >> It has to be a timeout issue somewhere?
 >
 > It's more of a timing issue than a timeout issue. A USB control request is 
 > made of several USB transactions, made themselves of USB packets. The 
 > Logitech webcams fail to generate an interrupt (on the device side) when the 
 > packets arrive with a "wrong" timing (wrong doesn't imply USB non-compliance, 
 > it's just wrong according to the webcam hardware). The timing depends on many 
 > parameters (USB host controller, CPU speed, OS, ...) and is unfortunately 
 > always "right" on Windows. There is no single point of failure in Linux: 
 > Windows got the timing "right" but sheer luck. As the hardware has been 
 > tested with Windows only, the problem has never been detected before devices 
 > hit the market.

I am not an expert on USB but it looks like the bug is
specific to USB 2.0? After my QuickCam Fusion reliably locked
up I used to rmmod the ehci-hcd module. This unlocks my cam
immediately. Without ehci-hcd I never had any lock up.
This workaround means that I am only using USB 1.1 which is OK
in my case. 
HTH,
 Timo

 >
 >> Thanks for a very usable driver.
 >
 > You're welcome. Future Logitech products should hopefully include a firmware 
 > modification to workaround the hardware bug.
 >
 > Best regards,
 >
 > Laurent Pinchart
 > _______________________________________________
 > Linux-uvc-devel mailing list
 > Linux-uvc-devel at lists.berlios.de
 > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel


From echtler at in.tum.de  Mon Feb  5 14:26:22 2007
From: echtler at in.tum.de (Florian Echtler)
Date: Mon, 05 Feb 2007 14:26:22 +0100
Subject: [Linux-uvc-devel] VIDIOC_DQBUF fails with input/output error
Message-ID: <1170681982.24383.25.camel@lapnavab35.informatik.tu-muenchen.de>

Hello everybody,

I'm currently having a bit of a struggle with a Logitech Quickcam 5000
Pro. I'm using a self-written library to access the camera in my
computer vision software, and I have already accounted for the dreaded
Logitech bug by disabling gain/exposure changes for now (or at least
getting them down to an absolute minimum).

However, I'm still getting a different kind of error: after capturing
some 100 frames, my VIDIOC_DQBUF ioctl will fail with -EIO. I'm using
revision 84 with a small part of the patch from Evgeny (only the 500 us
delay after control transfers).

This comes from uvc_dequeue_buffer(..), with a trace message warning
about corrupted data. Now, I have at times used an USB extension cable
to connect the camera, and it seemed like the error happened more
quickly then. So, is this really a problem of bad cabling? 

The syslog also seems to indicate this:

Feb  5 14:03:24 atnavab12 kernel: usb 4-4: device descriptor read/64,
error -110
Feb  5 14:03:27 atnavab12 kernel: ehci_hcd 0000:00:1d.7: port 4 reset
error -110
Feb  5 14:03:27 atnavab12 kernel: hub 4-0:1.0: hub_port_status failed
(err = -32)
Feb  5 14:03:27 atnavab12 kernel: hub 4-0:1.0: Cannot enable port 4.
Maybe the USB cable is bad?
Feb  5 14:03:28 atnavab12 kernel: usb 4-4: new high speed USB device
using ehci_hcd and address 115
Feb  5 14:03:30 atnavab12 kernel: usb 4-4: device descriptor read/8,
error -71
Feb  5 14:03:30 atnavab12 kernel: usb 4-4: device descriptor read/8,
error -71
Feb  5 14:03:30 atnavab12 kernel: usb 4-4: new high speed USB device
using ehci_hcd and address 116
Feb  5 14:03:30 atnavab12 kernel: usb 4-4: device descriptor read/8,
error -71
Feb  5 14:03:30 atnavab12 kernel: usb 4-4: device descriptor read/8,
error -71

Are there any hints on how to avoid this? Should I try swapping the
cable for one from another Logitech cam?

Thanks in advance for your help,
Yours, Florian
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: Dies ist ein digital signierter Nachrichtenteil
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070205/46ed2842/attachment.pgp>

From pauljurczak at yahoo.com  Mon Feb  5 23:12:14 2007
From: pauljurczak at yahoo.com (Paul Jurczak)
Date: Mon, 5 Feb 2007 14:12:14 -0800 (PST)
Subject: [Linux-uvc-devel] Sony Vaio VGN-SZ3VWP/X built-in laptop webcam
Message-ID: <259373.47264.qm@web60519.mail.yahoo.com>

Hi Albert,

Try UVCView at: <http://www.microsoft.com/whdc/device/stream/vidcap/UVCView.mspx>
 
Regards,
Paul.

----- Original Message ----
From: Albert Vilella <avilella at gmail.com>
To: Laurent Pinchart <laurent.pinchart at skynet.be>
Cc: Daniel Storm <daniel at verbena.co.uk>; linux-uvc-devel at lists.berlios.de; Martin Rubli <linux at rubli.info>
Sent: Monday, February 5, 2007 4:36:27 AM
Subject: Re: [Linux-uvc-devel] Sony Vaio VGN-SZ3VWP/X built-in laptop webcam

Do you guys know of any tool in Windows that will show up the kind of
information lsusb does?

Any tool that will provide information about what the device can do,
in a similar fashion to the lsusb info, but for Windows.

I would then send an email to Ricoh with this data, because I am
almost sure about the answer I would get if I send them the lsusb data
straight away...

Thanks in advance,

    Albert.






 
____________________________________________________________________________________
Have a burning question?  
Go to www.Answers.yahoo.com and get answers from real people who know.


From linux at rubli.info  Mon Feb  5 23:47:01 2007
From: linux at rubli.info (Martin Rubli)
Date: Mon, 05 Feb 2007 14:47:01 -0800
Subject: [Linux-uvc-devel] Sony Vaio VGN-SZ3VWP/X built-in laptop webcam
In-Reply-To: <358f4d650702050236t6a1a800dhc0a374c5e163e8dd@mail.gmail.com>
References: <1170093257.5805.17.camel@mercurial>
	<000101c7463e$ed7d5880$c8780980$@info>
	<358f4d650702050120k472ab7fdta92f44457a32d328@mail.gmail.com>
	<200702051028.52959.laurent.pinchart@skynet.be>
	<358f4d650702050236t6a1a800dhc0a374c5e163e8dd@mail.gmail.com>
Message-ID: <op.tnar8nb042iof8@nb-mrublixp.am.logitech.com>

On Mon, 05 Feb 2007 02:36:27 -0800, Albert Vilella <avilella at gmail.com>  
wrote:

> Do you guys know of any tool in Windows that will show up the kind of
> information lsusb does?
>
> Any tool that will provide information about what the device can do,
> in a similar fashion to the lsusb info, but for Windows.

Yes, Microsoft provides such a tool:
http://www.microsoft.com/whdc/device/stream/vidcap/UVCView.mspx

> I would then send an email to Ricoh with this data, because I am
> almost sure about the answer I would get if I send them the lsusb data
> straight away...

Could you post the output of UVCView to the list as well for completeness'  
sake? Thanks!

Cheers,
Martin


From avilella at gmail.com  Mon Feb  5 23:50:31 2007
From: avilella at gmail.com (Albert Vilella)
Date: Mon, 5 Feb 2007 22:50:31 +0000
Subject: [Linux-uvc-devel] Sony Vaio VGN-SZ3VWP/X built-in laptop webcam
In-Reply-To: <op.tnar8nb042iof8@nb-mrublixp.am.logitech.com>
References: <1170093257.5805.17.camel@mercurial>
	<000101c7463e$ed7d5880$c8780980$@info>
	<358f4d650702050120k472ab7fdta92f44457a32d328@mail.gmail.com>
	<200702051028.52959.laurent.pinchart@skynet.be>
	<358f4d650702050236t6a1a800dhc0a374c5e163e8dd@mail.gmail.com>
	<op.tnar8nb042iof8@nb-mrublixp.am.logitech.com>
Message-ID: <358f4d650702051450w4d7027aubd521a84209e1e34@mail.gmail.com>

          ---===>Device Information<===---

ConnectionStatus:
Current Config Value:              0x01  -> Device Bus Speed: High
Device Address:                    0x02
Open Pipes:                           2

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x81  -> Direction: IN - EndpointID: 1
bmAttributes:                      0x03  -> Interrupt Transfer Type
wMaxPacketSize:                  0x0040 = 1 transactions per
microframe, 0x40 max bytes
bInterval:                         0x01

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x86  -> Direction: IN - EndpointID: 6
bmAttributes:                      0x01  -> Isochronous Transfer Type
                   Synchronization Type = No Synchronization
Bulk Transfer Type
wMaxPacketSize:                  0x0000 = 1 transactions per
microframe, 0x00 max bytes
bInterval:                         0x01

          ===>Device Descriptor<===
bLength:                           0x12
bDescriptorType:                   0x01
bcdUSB:                          0x0200
bDeviceClass:                      0x00  -> This is an Interface Class
Defined Device
bDeviceSubClass:                   0x00
bDeviceProtocol:                   0x00
bMaxPacketSize0:                   0x40 = (64) Bytes
idVendor:                        0x05CA = Ricoh Company Ltd.
idProduct:                       0x1830
bcdDevice:                       0x0100
iManufacturer:                     0x00
iProduct:                          0x00
iSerialNumber:                     0x00
bNumConfigurations:                0x01

          ===>Configuration Descriptor<===
bLength:                           0x09
bDescriptorType:                   0x02
wTotalLength:                    0x004E  -> Validated
bNumInterfaces:                    0x01
bConfigurationValue:               0x01
iConfiguration:                    0x00
bmAttributes:                      0x80  -> Bus Powered
MaxPower:                          0x32 = 100 mA

          ===>Interface Descriptor<===
bLength:                           0x09
bDescriptorType:                   0x04
bInterfaceNumber:                  0x00
bAlternateSetting:                 0x00
bNumEndpoints:                     0x02
bInterfaceClass:                   0x06  -> This is a Power USB Device
Interface Class (This may be obsolete)
bInterfaceSubClass:                0x00
bInterfaceProtocol:                0x00
CAUTION:  This may be an invalid bInterfaceProtocol
iInterface:                        0x00

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x81  -> Direction: IN - EndpointID: 1
bmAttributes:                      0x03  -> Interrupt Transfer Type
wMaxPacketSize:                  0x0040 = 1 transactions per
microframe, 0x40 max bytes
bInterval:                         0x01

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x86  -> Direction: IN - EndpointID: 6
bmAttributes:                      0x01  -> Isochronous Transfer Type
                   Synchronization Type = No Synchronization
Bulk Transfer Type
wMaxPacketSize:                  0x0000 = 1 transactions per
microframe, 0x00 max bytes
bInterval:                         0x01

          ===>Interface Descriptor<===
bLength:                           0x09
bDescriptorType:                   0x04
bInterfaceNumber:                  0x00
bAlternateSetting:                 0x01
bNumEndpoints:                     0x02
bInterfaceClass:                   0x06  -> This is a Power USB Device
Interface Class (This may be obsolete)
bInterfaceSubClass:                0x00
bInterfaceProtocol:                0x00
CAUTION:  This may be an invalid bInterfaceProtocol
iInterface:                        0x00

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x81  -> Direction: IN - EndpointID: 1
bmAttributes:                      0x03  -> Interrupt Transfer Type
wMaxPacketSize:                  0x0040 = 1 transactions per
microframe, 0x40 max bytes
bInterval:                         0x01

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x86  -> Direction: IN - EndpointID: 6
bmAttributes:                      0x01  -> Isochronous Transfer Type
                   Synchronization Type = No Synchronization
Bulk Transfer Type
wMaxPacketSize:                  0x0C00 = 2 transactions per
microframe, 0x00 max bytes
bInterval:                         0x01

          ===>Interface Descriptor<===
bLength:                           0x09
bDescriptorType:                   0x04
bInterfaceNumber:                  0x00
bAlternateSetting:                 0x02
bNumEndpoints:                     0x02
bInterfaceClass:                   0x06  -> This is a Power USB Device
Interface Class (This may be obsolete)
bInterfaceSubClass:                0x00
bInterfaceProtocol:                0x00
CAUTION:  This may be an invalid bInterfaceProtocol
iInterface:                        0x00

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x81  -> Direction: IN - EndpointID: 1
bmAttributes:                      0x03  -> Interrupt Transfer Type
wMaxPacketSize:                  0x0040 = 1 transactions per
microframe, 0x40 max bytes
bInterval:                         0x01

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x86  -> Direction: IN - EndpointID: 6
bmAttributes:                      0x01  -> Isochronous Transfer Type
                   Synchronization Type = No Synchronization
Bulk Transfer Type
wMaxPacketSize:                  0x1400 = 3 transactions per
microframe, 0x00 max bytes
bInterval:                         0x01


On 2/5/07, Martin Rubli <linux at rubli.info> wrote:
> On Mon, 05 Feb 2007 02:36:27 -0800, Albert Vilella <avilella at gmail.com>
> wrote:
>
> > Do you guys know of any tool in Windows that will show up the kind of
> > information lsusb does?
> >
> > Any tool that will provide information about what the device can do,
> > in a similar fashion to the lsusb info, but for Windows.
>
> Yes, Microsoft provides such a tool:
> http://www.microsoft.com/whdc/device/stream/vidcap/UVCView.mspx
>
> > I would then send an email to Ricoh with this data, because I am
> > almost sure about the answer I would get if I send them the lsusb data
> > straight away...
>
> Could you post the output of UVCView to the list as well for completeness'
> sake? Thanks!
>
> Cheers,
> Martin
>


From avilella at gmail.com  Tue Feb  6 11:47:03 2007
From: avilella at gmail.com (Albert Vilella)
Date: Tue, 6 Feb 2007 10:47:03 +0000
Subject: [Linux-uvc-devel] Sony Vaio VGN-SZ3VWP/X built-in laptop webcam
In-Reply-To: <358f4d650702051450w4d7027aubd521a84209e1e34@mail.gmail.com>
References: <1170093257.5805.17.camel@mercurial>
	<000101c7463e$ed7d5880$c8780980$@info>
	<358f4d650702050120k472ab7fdta92f44457a32d328@mail.gmail.com>
	<200702051028.52959.laurent.pinchart@skynet.be>
	<358f4d650702050236t6a1a800dhc0a374c5e163e8dd@mail.gmail.com>
	<op.tnar8nb042iof8@nb-mrublixp.am.logitech.com>
	<358f4d650702051450w4d7027aubd521a84209e1e34@mail.gmail.com>
Message-ID: <358f4d650702060247i74e97c0el4ea0fc2a1eee7a9b@mail.gmail.com>

Just to add to my previous email, I don't see any "video" tags, so I
guess it means no UVC compliance whatsoever.

Also, this entries:

> This is a Power USB Device Interface Class (This may be obsolete)

Are a bit confusing. Does this happen to other people?

On 2/5/07, Albert Vilella <avilella at gmail.com> wrote:
>           ---===>Device Information<===---
>
> ConnectionStatus:
> Current Config Value:              0x01  -> Device Bus Speed: High
> Device Address:                    0x02
> Open Pipes:                           2
>
>           ===>Endpoint Descriptor<===
> bLength:                           0x07
> bDescriptorType:                   0x05
> bEndpointAddress:                  0x81  -> Direction: IN - EndpointID: 1
> bmAttributes:                      0x03  -> Interrupt Transfer Type
> wMaxPacketSize:                  0x0040 = 1 transactions per
> microframe, 0x40 max bytes
> bInterval:                         0x01
>
>           ===>Endpoint Descriptor<===
> bLength:                           0x07
> bDescriptorType:                   0x05
> bEndpointAddress:                  0x86  -> Direction: IN - EndpointID: 6
> bmAttributes:                      0x01  -> Isochronous Transfer Type
>                    Synchronization Type = No Synchronization
> Bulk Transfer Type
> wMaxPacketSize:                  0x0000 = 1 transactions per
> microframe, 0x00 max bytes
> bInterval:                         0x01
>
>           ===>Device Descriptor<===
> bLength:                           0x12
> bDescriptorType:                   0x01
> bcdUSB:                          0x0200
> bDeviceClass:                      0x00  -> This is an Interface Class
> Defined Device
> bDeviceSubClass:                   0x00
> bDeviceProtocol:                   0x00
> bMaxPacketSize0:                   0x40 = (64) Bytes
> idVendor:                        0x05CA = Ricoh Company Ltd.
> idProduct:                       0x1830
> bcdDevice:                       0x0100
> iManufacturer:                     0x00
> iProduct:                          0x00
> iSerialNumber:                     0x00
> bNumConfigurations:                0x01
>
>           ===>Configuration Descriptor<===
> bLength:                           0x09
> bDescriptorType:                   0x02
> wTotalLength:                    0x004E  -> Validated
> bNumInterfaces:                    0x01
> bConfigurationValue:               0x01
> iConfiguration:                    0x00
> bmAttributes:                      0x80  -> Bus Powered
> MaxPower:                          0x32 = 100 mA
>
>           ===>Interface Descriptor<===
> bLength:                           0x09
> bDescriptorType:                   0x04
> bInterfaceNumber:                  0x00
> bAlternateSetting:                 0x00
> bNumEndpoints:                     0x02
> bInterfaceClass:                   0x06  -> This is a Power USB Device
> Interface Class (This may be obsolete)
> bInterfaceSubClass:                0x00
> bInterfaceProtocol:                0x00
> CAUTION:  This may be an invalid bInterfaceProtocol
> iInterface:                        0x00
>
>           ===>Endpoint Descriptor<===
> bLength:                           0x07
> bDescriptorType:                   0x05
> bEndpointAddress:                  0x81  -> Direction: IN - EndpointID: 1
> bmAttributes:                      0x03  -> Interrupt Transfer Type
> wMaxPacketSize:                  0x0040 = 1 transactions per
> microframe, 0x40 max bytes
> bInterval:                         0x01
>
>           ===>Endpoint Descriptor<===
> bLength:                           0x07
> bDescriptorType:                   0x05
> bEndpointAddress:                  0x86  -> Direction: IN - EndpointID: 6
> bmAttributes:                      0x01  -> Isochronous Transfer Type
>                    Synchronization Type = No Synchronization
> Bulk Transfer Type
> wMaxPacketSize:                  0x0000 = 1 transactions per
> microframe, 0x00 max bytes
> bInterval:                         0x01
>
>           ===>Interface Descriptor<===
> bLength:                           0x09
> bDescriptorType:                   0x04
> bInterfaceNumber:                  0x00
> bAlternateSetting:                 0x01
> bNumEndpoints:                     0x02
> bInterfaceClass:                   0x06  -> This is a Power USB Device
> Interface Class (This may be obsolete)
> bInterfaceSubClass:                0x00
> bInterfaceProtocol:                0x00
> CAUTION:  This may be an invalid bInterfaceProtocol
> iInterface:                        0x00
>
>           ===>Endpoint Descriptor<===
> bLength:                           0x07
> bDescriptorType:                   0x05
> bEndpointAddress:                  0x81  -> Direction: IN - EndpointID: 1
> bmAttributes:                      0x03  -> Interrupt Transfer Type
> wMaxPacketSize:                  0x0040 = 1 transactions per
> microframe, 0x40 max bytes
> bInterval:                         0x01
>
>           ===>Endpoint Descriptor<===
> bLength:                           0x07
> bDescriptorType:                   0x05
> bEndpointAddress:                  0x86  -> Direction: IN - EndpointID: 6
> bmAttributes:                      0x01  -> Isochronous Transfer Type
>                    Synchronization Type = No Synchronization
> Bulk Transfer Type
> wMaxPacketSize:                  0x0C00 = 2 transactions per
> microframe, 0x00 max bytes
> bInterval:                         0x01
>
>           ===>Interface Descriptor<===
> bLength:                           0x09
> bDescriptorType:                   0x04
> bInterfaceNumber:                  0x00
> bAlternateSetting:                 0x02
> bNumEndpoints:                     0x02
> bInterfaceClass:                   0x06  -> This is a Power USB Device
> Interface Class (This may be obsolete)
> bInterfaceSubClass:                0x00
> bInterfaceProtocol:                0x00
> CAUTION:  This may be an invalid bInterfaceProtocol
> iInterface:                        0x00
>
>           ===>Endpoint Descriptor<===
> bLength:                           0x07
> bDescriptorType:                   0x05
> bEndpointAddress:                  0x81  -> Direction: IN - EndpointID: 1
> bmAttributes:                      0x03  -> Interrupt Transfer Type
> wMaxPacketSize:                  0x0040 = 1 transactions per
> microframe, 0x40 max bytes
> bInterval:                         0x01
>
>           ===>Endpoint Descriptor<===
> bLength:                           0x07
> bDescriptorType:                   0x05
> bEndpointAddress:                  0x86  -> Direction: IN - EndpointID: 6
> bmAttributes:                      0x01  -> Isochronous Transfer Type
>                    Synchronization Type = No Synchronization
> Bulk Transfer Type
> wMaxPacketSize:                  0x1400 = 3 transactions per
> microframe, 0x00 max bytes
> bInterval:                         0x01
>
>
> On 2/5/07, Martin Rubli <linux at rubli.info> wrote:
> > On Mon, 05 Feb 2007 02:36:27 -0800, Albert Vilella <avilella at gmail.com>
> > wrote:
> >
> > > Do you guys know of any tool in Windows that will show up the kind of
> > > information lsusb does?
> > >
> > > Any tool that will provide information about what the device can do,
> > > in a similar fashion to the lsusb info, but for Windows.
> >
> > Yes, Microsoft provides such a tool:
> > http://www.microsoft.com/whdc/device/stream/vidcap/UVCView.mspx
> >
> > > I would then send an email to Ricoh with this data, because I am
> > > almost sure about the answer I would get if I send them the lsusb data
> > > straight away...
> >
> > Could you post the output of UVCView to the list as well for completeness'
> > sake? Thanks!
> >
> > Cheers,
> > Martin
> >
>


From linux at rubli.info  Tue Feb  6 22:09:57 2007
From: linux at rubli.info (Martin Rubli)
Date: Tue, 06 Feb 2007 13:09:57 -0800
Subject: [Linux-uvc-devel] QuickCam Fusion lockup
In-Reply-To: <87bqk8q2gx.fsf@tim.cisco.com>
References: <45A32C4F.7080004@astronomicalresearchaustralia.org>
	<45A40727.4020607@cetoncorp.com>
	<45C6B334.7040901@astronomicalresearchaustralia.org>
	<200702051043.05383.laurent.pinchart@skynet.be>
	<87bqk8q2gx.fsf@tim.cisco.com>
Message-ID: <op.tncievnj42iof8@nb-mrublixp.am.logitech.com>

On Mon, 05 Feb 2007 03:16:14 -0800, Timo Koehler <tkoehler at acm.org> wrote:

> I am not an expert on USB but it looks like the bug is
> specific to USB 2.0? After my QuickCam Fusion reliably locked
> up I used to rmmod the ehci-hcd module. This unlocks my cam
> immediately. Without ehci-hcd I never had any lock up.
> This workaround means that I am only using USB 1.1 which is OK
> in my case.

That's right, I've never seen the problem happen in full-speed. It seems  
related to how the controller splits requests into different microframes,  
which is something that only exists on USB 2.0.

Cheers,
Martin


From laurent.pinchart at skynet.be  Tue Feb  6 23:42:00 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 6 Feb 2007 23:42:00 +0100
Subject: [Linux-uvc-devel] Automatic Gain Control
In-Reply-To: <op.tm3ku7za42iof8@nb-mrublixp.am.logitech.com>
References: <a4fd5c620701080918l7ee8bc70w1673299b1e71fcb5@mail.gmail.com>
	<200701110907.46797.mxhaard@magic.fr>
	<op.tm3ku7za42iof8@nb-mrublixp.am.logitech.com>
Message-ID: <200702062342.00422.laurent.pinchart@skynet.be>

> >> The zero step size for the absolute exposure time is obviously wrong. I
> >> don't currently have my USB analyzer to check what's going on there.
>
> I found the problem in the driver. There is a bug in the uvc_get_le_value
> function, which leads to wrong values when reading 32-bit wide controls. I
> have a patch and I'll submit it to Laurent. The control now looks as
> follows:
>
>    Exposure (Absolute)
>      ID      : 17,
>      Type    : Dword,
>      Flags   : { CAN_READ, CAN_WRITE, IS_CUSTOM },
>      Values  : [ 1 .. 10000, step size: 1 ],
>      Default : 166
>
> >> Also, I get errors when I try to read these controls. This seems to be
> >> why the
> >> controls don't work in luvcview.
>
> Another bug in the control definition in the UVC driver. Certain controls
> were accidentally marked as write-only, which explains the error. It's
> part of the patch that I mentioned, it should be fixed soon in the
> repository.
>
> > Yes luvcview used the step value.
>
> We'll post a message to the list as soon as the patch is committed. It
> would be great if you could retest it ...

This should now be fixed. Happy testing :-)

Laurent Pinchart


From Giuseppe.Castagna at ens.fr  Tue Feb  6 23:57:23 2007
From: Giuseppe.Castagna at ens.fr (Giuseppe Castagna)
Date: Tue, 06 Feb 2007 23:57:23 +0100
Subject: [Linux-uvc-devel] Any HQ videoconference with uvcvideo?
Message-ID: <45C907D3.60904@ens.fr>

Hi,

    first of all let me thank you for your work on the uvcvideo driver. I own 
two Logitech Ultra Vision webcam that works perfectly (well nearly, see later 
on) on my linux workstations, at least as long as I use it with luvcview (-s 
640x480 and the available -f options work too). I would like to use it for 
videoconferencing at a resolution of 640x480, essentially because at that 
resolution my correspondents can read the whiteboard on which I would have been 
writing.
    Of course there is ekiga but it dows not work at the 640x480 resolution. I 
tried tcpcam and vlvc (a videoconference extension of vlc). But neither support 
v4l2.
    Has any of you experience with a videoconference application working with 
uvcvideo and supporting the 640x480 resolution?

Thanks in advance

Beppe

P.S. The is a small quibble with my logitech webcam. When I plug it and reboot 
my machine the audio of the builtin Intel Corporation 82801G audio chipset 
disappears and only the webcam internal microphone result present. I know that 
this is not related with uvcvideo, nevertheless if somebody has a suggestion it 
would be welcome.



From David.C.Trotz at jpl.nasa.gov  Wed Feb  7 03:00:52 2007
From: David.C.Trotz at jpl.nasa.gov (David C Trotz Jr)
Date: Tue, 6 Feb 2007 18:00:52 -0800
Subject: [Linux-uvc-devel] UVC Camera not registering as UVC
Message-ID: <2F80C2C3-0DC4-4E5D-964E-C87D981F803E@jpl.nasa.gov>

Hi all,
I am an employee here at JPL and my current task is to get some IR  
camera's which claim to be UVC compliant to talk to linux. This is  
the camera: http://www.thermoteknix.com/content/english/products/ 
miricle/110k/index.html

First let me say that I am so thankful for the work you have already  
done in this area, you have given me a head start on this task.

The problem I am having is this. I downloaded and installed the  
latest drivers from the svn server. The driver does not detect the  
cameras. Upon further investigation I found out that lsusb -d 17dc: 
0100 -v | grep "14 Video" returns nothing, so it appears that this is  
not a UVC camera, except I am 99.9% sure it is. I was reading one of  
the threads in this list and found out that I might be able to add  
the Vendor id and Device id. So I added this to the file

/* Thermoteknix MIRICLE */
{
	.match_flags = USB_DEVICE_ID_MATCH_DEVICE |  
USB_DEVICE_ID_MATCH_INT_INFO,
	.idVendor = 0x17dc,
	.idProduct = 0x0100,
	.bInterfaceClass = USB_CLASS_VENDOR_SPEC, // Also tried USB_CLASS_VIDEO
	.bInterfaceSubClass = 1
	.bInterfaceProtocol = 0,
	// tried .driver_info as well
}

When I run lsusb -d 17dc:0100 -v I get the following:

<SNIP>
Bus 005 Device 012: ID 17dc:0100
Device Descriptor:
   bLength                18
   bDescriptorType         1
   bcdUSB               2.00
   bDeviceClass          255 Vendor Specific Class
   bDeviceSubClass       255 Vendor Specific Subclass
   bDeviceProtocol       255 Vendor Specific Protocol
   bMaxPacketSize0        64
   idVendor           0x17dc
   idProduct          0x0100
   bcdDevice            0.00
   iManufacturer           0
   iProduct                0
   iSerial                 0
   bNumConfigurations      1
   Configuration Descriptor:
     bLength                 9
     bDescriptorType         2
     wTotalLength          171
     bNumInterfaces          1
     bConfigurationValue     1
     iConfiguration          0
     bmAttributes         0x80
     MaxPower              100mA
     Interface Descriptor:
       bLength                 9
       bDescriptorType         4
       bInterfaceNumber        0
       bAlternateSetting       0
       bNumEndpoints           0
       bInterfaceClass       255 Vendor Specific Class
       bInterfaceSubClass    255 Vendor Specific Subclass
       bInterfaceProtocol    255 Vendor Specific Protocol
       iInterface              0
     Interface Descriptor:
       bLength                 9
       bDescriptorType         4
       bInterfaceNumber        0
       bAlternateSetting       1
       bNumEndpoints           6
       bInterfaceClass       255 Vendor Specific Class
       bInterfaceSubClass    255 Vendor Specific Subclass
       bInterfaceProtocol    255 Vendor Specific Protocol
       iInterface              0
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x01  EP 1 OUT
         bmAttributes            2
           Transfer Type            Bulk
           Synch Type               None
           Usage Type               Data
         wMaxPacketSize     0x0200  1x 512 bytes
         bInterval               0
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x81  EP 1 IN
         bmAttributes            2
           Transfer Type            Bulk
           Synch Type               None
           Usage Type               Data
         wMaxPacketSize     0x0200  1x 512 bytes
         bInterval               0
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x02  EP 2 OUT
         bmAttributes            2
           Transfer Type            Bulk
           Synch Type               None
           Usage Type               Data
         wMaxPacketSize     0x0200  1x 512 bytes
         bInterval               0
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x04  EP 4 OUT
         bmAttributes            2
           Transfer Type            Bulk
           Synch Type               None
           Usage Type               Data
         wMaxPacketSize     0x0200  1x 512 bytes
         bInterval               0
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x86  EP 6 IN
         bmAttributes            2
           Transfer Type            Bulk
           Synch Type               None
           Usage Type               Data
         wMaxPacketSize     0x0200  1x 512 bytes
         bInterval               0
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x88  EP 8 IN
         bmAttributes            2
           Transfer Type            Bulk
           Synch Type               None
           Usage Type               Data
         wMaxPacketSize     0x0200  1x 512 bytes
         bInterval               0
     Interface Descriptor:
       bLength                 9
       bDescriptorType         4
       bInterfaceNumber        0
       bAlternateSetting       2
       bNumEndpoints           6
       bInterfaceClass       255 Vendor Specific Class
       bInterfaceSubClass    255 Vendor Specific Subclass
       bInterfaceProtocol    255 Vendor Specific Protocol
       iInterface              0
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x01  EP 1 OUT
         bmAttributes            3
           Transfer Type            Interrupt
           Synch Type               None
           Usage Type               Data
         wMaxPacketSize     0x0040  1x 64 bytes
         bInterval               1
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x81  EP 1 IN
         bmAttributes            3
           Transfer Type            Interrupt
           Synch Type               None
           Usage Type               Data
         wMaxPacketSize     0x0040  1x 64 bytes
         bInterval               1
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x02  EP 2 OUT
         bmAttributes            3
           Transfer Type            Interrupt
           Synch Type               None
           Usage Type               Data
         wMaxPacketSize     0x0200  1x 512 bytes
         bInterval               1
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x04  EP 4 OUT
         bmAttributes            2
           Transfer Type            Bulk
           Synch Type               None
           Usage Type               Data
         wMaxPacketSize     0x0200  1x 512 bytes
         bInterval               0
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x86  EP 6 IN
         bmAttributes            3
           Transfer Type            Interrupt
           Synch Type               None
           Usage Type               Data
         wMaxPacketSize     0x0200  1x 512 bytes
         bInterval               1
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x88  EP 8 IN
         bmAttributes            2
           Transfer Type            Bulk
           Synch Type               None
           Usage Type               Data
         wMaxPacketSize     0x0200  1x 512 bytes
         bInterval               0
     Interface Descriptor:
       bLength                 9
       bDescriptorType         4
       bInterfaceNumber        0
       bAlternateSetting       3
       bNumEndpoints           6
       bInterfaceClass       255 Vendor Specific Class
       bInterfaceSubClass    255 Vendor Specific Subclass
       bInterfaceProtocol    255 Vendor Specific Protocol
       iInterface              0
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x01  EP 1 OUT
         bmAttributes            3
           Transfer Type            Interrupt
           Synch Type               None
           Usage Type               Data
         wMaxPacketSize     0x0040  1x 64 bytes
         bInterval               1
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x81  EP 1 IN
         bmAttributes            3
           Transfer Type            Interrupt
           Synch Type               None
           Usage Type               Data
         wMaxPacketSize     0x0040  1x 64 bytes
         bInterval               1
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x02  EP 2 OUT
         bmAttributes            1
           Transfer Type            Isochronous
           Synch Type               None
           Usage Type               Data
         wMaxPacketSize     0x0200  1x 512 bytes
         bInterval               1
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x04  EP 4 OUT
         bmAttributes            2
           Transfer Type            Bulk
           Synch Type               None
           Usage Type               Data
         wMaxPacketSize     0x0200  1x 512 bytes
         bInterval               0
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x86  EP 6 IN
         bmAttributes            1
           Transfer Type            Isochronous
           Synch Type               None
           Usage Type               Data
         wMaxPacketSize     0x0200  1x 512 bytes
         bInterval               1
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x88  EP 8 IN
         bmAttributes            2
           Transfer Type            Bulk
           Synch Type               None
           Usage Type               Data
         wMaxPacketSize     0x0200  1x 512 bytes
         bInterval               0
Device Qualifier (for other device speed):
   bLength                10
   bDescriptorType         6
   bcdUSB               2.00
   bDeviceClass          255 Vendor Specific Class
   bDeviceSubClass       255 Vendor Specific Subclass
   bDeviceProtocol       255 Vendor Specific Protocol
   bMaxPacketSize0        64
   bNumConfigurations      1
</SNIP>



When I run the USB Device Viewer in Windows I get the following info  
on the camera:

<SNIP>
           ---===>Device Information<===---
English product name: "MIRICLE"

ConnectionStatus:
Current Config Value:              0x01  -> Device Bus Speed: High
Device Address:                    0x04
Open Pipes:                           1

           ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x82  -> Direction: IN -  
EndpointID: 2
bmAttributes:                      0x02  -> Bulk Transfer Type
wMaxPacketSize:                  0x0200 = 0x200 max bytes
bInterval:                         0x00

           ===>Device Descriptor<===
bLength:                           0x12
bDescriptorType:                   0x01
bcdUSB:                          0x0200
bDeviceClass:                      0xEF  -> This is a Multi-interface  
Function Code Device
bDeviceSubClass:                   0x02  -> This is the Common Class  
Sub Class
bDeviceProtocol:                   0x01  -> This is the Interface  
Association Descriptor protocol
bMaxPacketSize0:                   0x40 = (64) Bytes
idVendor:                         
0x17DCidProduct:                       0x0201
bcdDevice:                       0x0001
iManufacturer:                     0x01
      English (United States)  "Thermoteknix Systems Ltd"
iProduct:                          0x02
      English (United States)  "MIRICLE"
iSerialNumber:                     0x03
      English (United States)  "00000"
bNumConfigurations:                0x01

           ===>Configuration Descriptor<===
bLength:                           0x09
bDescriptorType:                   0x02
wTotalLength:                    0x00A5  -> Validated
bNumInterfaces:                    0x02
bConfigurationValue:               0x01
iConfiguration:                    0x02
      English (United States)  "MIRICLE"
bmAttributes:                      0x40  -> Self Powered
MaxPower:                          0x32 = 100 mA

           ===>IAD Descriptor<===
bLength:                           0x08
bDescriptorType:                   0x0B
bFirstInterface:                   0x00
bInterfaceCount:                   0x02
bFunctionClass:                    0x0E  -> Video Interface Class
bFunctionSubClass:                 0x03  -> Video Interface Collection
bFunctionProtocol:                 0x00  -> PC_PROTOCOL_UNDEFINED  
protocol
iFunction:                         0x02
      English (United States)  "MIRICLE"

           ===>Interface Descriptor<===
bLength:                           0x09
bDescriptorType:                   0x04
bInterfaceNumber:                  0x00
bAlternateSetting:                 0x00
bNumEndpoints:                     0x00
bInterfaceClass:                   0x0E  -> Video Interface Class
bInterfaceSubClass:                0x01  -> Video Control Interface  
SubClass
bInterfaceProtocol:                0x00
iInterface:                        0x02
      English (United States)  "MIRICLE"

           ===>Class-Specific Video Control Interface Header  
Descriptor<===
bLength:                           0x0D
bDescriptorType:                   0x24
bDescriptorSubtype:                0x01
bcdVDC:                          0x0110
wTotalLength:                    0x002E  -> Validated
dwClockFrequency:            0x003D0900 = (4000000) Hz
bInCollection:                     0x01
baInterfaceNr[1]:                  0x01

           ===>Video Control Input Terminal Descriptor<===
bLength:                           0x11
bDescriptorType:                   0x24
bDescriptorSubtype:                0x02
bTerminalID:                       0x01
wTerminalType:                   0x0201 = (ITT_CAMERA)
bAssocTerminal:                    0x00
iTerminal:                         0x05
      English (United States)  "Miricle Video"
===>Camera Input Terminal Data
wObjectiveFocalLengthMin:        0x0000
wObjectiveFocalLengthMax:        0x0000
wOcularFocalLength:              0x0000
bControlSize:                      0x02
bmControls : 0x20 0x00
      D00 = 0   no -  Scanning Mode
      D01 = 0   no -  Auto-Exposure Mode
      D02 = 0   no -  Auto-Exposure Priority
      D03 = 0   no -  Exposure Time (Absolute)
      D04 = 0   no -  Exposure Time (Relative)
      D05 = 1  yes -  Focus (Absolute)
      D06 = 0   no -  Focus (Relative)
      D07 = 0   no -  Iris (Absolute)
      D08 = 0   no -  Iris (Relative)
      D09 = 0   no -  Zoom (Absolute)
      D10 = 0   no -  Zoom (Relative)
      D11 = 0   no -  Pan (Absolute)
      D12 = 0   no -  Pan (Relative)
      D13 = 0   no -  Roll (Absolute)
      D14 = 0   no -  Roll (Relative)
      D15 = 0   no -  Tilt (Absolute)

           ===>Video Control Output Terminal Descriptor<===
bLength:                           0x09
bDescriptorType:                   0x24
bDescriptorSubtype:                0x03
bTerminalID:                       0x02
wTerminalType:                   0x0101 = (TT_STREAMING)
bAssocTerminal:                    0x00
bSourceID:                         0x03
iTerminal:                         0x06
      English (United States)  "Miricle USB"

           ===>Video Control Selector Unit Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x24
bDescriptorSubtype:                0x04
bUnitID:                           0x03
bNrInPins:                         0x01
===>List of Connected Unit and Terminal ID's
baSourceID[1]:                     0x01
iSelector:                         0x02
      English (United States)  "MIRICLE"

           ===>Interface Descriptor<===
bLength:                           0x09
bDescriptorType:                   0x04
bInterfaceNumber:                  0x01
bAlternateSetting:                 0x00
bNumEndpoints:                     0x01
bInterfaceClass:                   0x0E  -> Video Interface Class
bInterfaceSubClass:                0x02  -> Video Streaming Interface  
SubClass
bInterfaceProtocol:                0x00
iInterface:                        0x06
      English (United States)  "Miricle USB"

           ===>Video Class-Specific VS Video Input Header Descriptor<===
bLength:                           0x0E
bDescriptorType:                   0x24
bDescriptorSubtype:                0x01
bNumFormats:                       0x01
wTotalLength:                    0x004D  -> Validated
bEndpointAddress:                  0x82  -> Direction: IN -  
EndpointID: 2
bmInfo:                            0x00  -> Dynamic Format Change not  
Supported
bTerminalLink:                     0x02
bStillCaptureMethod:               0x00  -> Still Capture Method 0
bTriggerSupport:                   0x00  -> No Hardware Triggering  
Support
bTriggerUsage:                     0x00
bControlSize:                      0x01
Video Payload Format 1             0x00
      D00 = 0   no -  Key Frame Rate
      D01 = 0   no -  P Frame Rate
      D02 = 0   no -  Compression Quality
      D03 = 0   no -  Compression Window Size
      D04 = 0   no -  Generate Key Frame
      D05 = 0   no -  Update Frame Segment
      D06 = 0   no -  Reserved
      D07 = 0   no -  Reserved

           ===>Video Streaming Uncompressed Format Type Descriptor<===
bLength:                           0x1B
bDescriptorType:                   0x24
bDescriptorSubtype:                0x04
bFormatIndex:                      0x01
bNumFrameDescriptors:              0x01
guidFormat:                         
{32595559-0000-0010-8000-00AA00389B71} = YUY2 Format
bBitsPerPixel:                     0x10
bDefaultFrameIndex:                0x01
bAspectRatioX:                     0x04
bAspectRatioY:                     0x03
bmInterlaceFlags:                  0x00
      D0    = 0x00 Interlaced stream or variable: No
      D1    = 0x00 Fields per frame: 2 fields
      D2    = 0x00 Field 1 first: No
      D3    = 0x00 Reserved
      D4..5 = 0x00 Field patterns  -> Field 1 only
      D6..7 = 0x00 Display Mode  -> Bob only
bCopyProtect:                      0x00  -> Duplication Unrestricted

           ===>Video Streaming Uncompressed Frame Type Descriptor<===
bLength:                           0x1E
bDescriptorType:                   0x24
bDescriptorSubtype:                0x05
bFrameIndex:                       0x01
bmCapabilities:                    0x02
wWidth:                          0x0180
wHeight:                         0x0120
dwMinBitRate:                0x05460000
dwMaxBitRate:                0x05460000
dwMaxVideoFrameBufferSize:   0x00036000
dwDefaultFrameInterval:      0x00030D40
bFrameIntervalType:                0x01
===>Additional Discrete Frame Type Data
dwFrameInterval[1]:          0x00030D40

           ===>Color Matching Descriptor<===
bLength:                           0x06
bDescriptorType:                   0x24
bDescriptorSubtype:                0x0D
bColorPrimaries:                   0x00
bTransferCharacteristics:          0x00
bMatrixCoefficients:               0x00

           ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x82  -> Direction: IN -  
EndpointID: 2
bmAttributes:                      0x02  -> Bulk Transfer Type
wMaxPacketSize:                  0x0200 = 0x200 max bytes
bInterval:                         0x00
</SNIP>


Funny thing is, I am getting a bInterfaceClass as 0x0E which is the  
flag for UVC right? But I am not getting this same info when I lsusb,  
this is weird. So my question is is my entry listed above correct?  
Are there certain parameters I need to supply that I haven't? And if  
I am certain this is a UVC device how do I go about coercing the  
uvcvideo driver to agree with me? Also is there an irc chat room  
setup for uvc_driver devs?
Thanks in advance for the help,
--
David Trotz
Technical Staff, Computer Vision Group
Jet Propulsion Laboratory
Mail Stop 198-235
4800 Oak Grove Drive
Pasadena, CA 91109
Office 818-354-1897, Fax 818-393-5007


From ondrej at sury.org  Wed Feb  7 08:38:44 2007
From: ondrej at sury.org (=?UTF-8?Q?Ond=C5=99ej_Sur=C3=BD?=)
Date: Wed, 07 Feb 2007 08:38:44 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Ultra Vision - no output	on
	/dev/video0
In-Reply-To: <45BB74FA.4060502@sury.org>
References: <941538.40335.qm@web60520.mail.yahoo.com>
	<45BB74FA.4060502@sury.org>
Message-ID: <1170833924.6377.2.camel@yuna>

Hi everybody,

is there anything I can do to help get my QC UV working?

Camera is detected just fine (it even receives button events), when
luvcview is started light on camera turns blue.  But I just receive no
picture and luvcview hangs when I close it.

Ondrej.

On So, 2007-01-27 at 16:51 +0100, Ond?ej Sur? wrote:
> Paul Jurczak napsal(a):
> > Hi Ondrej,
> >
> >   try luvcview.
> >   
> 
> Tried lucview, and I get just black output.
> 
> Ondrej.
> 
> > ----- Original Message ----
> > From: Ond?ej Sur? <ondrej at sury.org>
> > To: linux-uvc-devel at lists.berlios.de
> > Sent: Thursday, January 25, 2007 4:45:37 AM
> > Subject: [Linux-uvc-devel] Logitech QuickCam Ultra Vision - no output on /dev/video0
> >
> > Hi,
> >
> > I bought Ultra Vision cam and it seems to have some problems.  Kernel is 
> > 2.6.20-5-generic on Ubuntu 7.04 (daily updated).  UVC drivers are latest 
> > SVN.
> >
> > xawtv prints:
> >
> > """
> > ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument
> > v4l2: oops: select timeout
> > """
> >
> > and nothing is displayed
> >
> > tvtime reports:
> >
> > "videoinput: Driver won't tell us its norm: Invalid argument"
> >
> > and
> >
> > "Frames too short from uvcvideo."
> >
> > However some comm happens, because camera turns blue light on when I
> > access /dev/video0.
> >
> >
> > Ondrej
> >
> >   
> 
> 
-- 
Ond?ej Sur? <ondrej at sury.org>  ***  http://blog.rfc1925.org/
Kulturn? ob?asn?k              ***  http://www.obcasnik.cz/




From lee at leewild.com  Wed Feb  7 08:59:36 2007
From: lee at leewild.com (Lee Wild)
Date: Wed, 7 Feb 2007 07:59:36 +0000
Subject: [Linux-uvc-devel] Jumbled images from Logitech Quickcam 500
In-Reply-To: <20070206105538.40ff8c42@be.back.l8r.net>
References: <607ab3010702010034t5cd4efd1nfff6b862a6d01e28@mail.gmail.com>
	<20070201072802.1a620ffd@be.back.l8r.net>
	<607ab3010702060507p386e5b97i89eb35a69a7eae9c@mail.gmail.com>
	<20070206105538.40ff8c42@be.back.l8r.net>
Message-ID: <607ab3010702062359g27a0e22dq4040023bcac223ed@mail.gmail.com>

> > > > Does anyone have any ideas on this one ?
> > > >
> > >
> > >
> > > I sometimes get jumbled images if my cable is too long...
> >
> > Really - do you get the same type of "jumbling" as in the example
> > images I posted ?
> >
> > My cameras are both Logitec Quickcam 5000s, and each have a 2m USB
> > extension - but which probably takes them up to around 3-4m in total.
> >
> > I will have a go at temporarily moving the box closer to the cams and
> > see if the problem goes away without the extensions.
> >
> > Cheers
> > Lee
>
> I get discoloured lower half frames, images from past frames, and a few
> other things.  Heck though, it won't hurt to give it a go with shorter
> cables... although I did manage to get to 10M by using a hub with one cam!
>

Well what do you know.

I recabled my cams last night and made 2 changes:
1) Attached them to the USB ports at the rear of my PC, which connect
direct to the motherboard, and
2) Noticed one of the USB extension cables had a lump of gunk in it's
socket, preventing full mating to the connector on the cam cable (only
by a tiny amount, perhaps 1-2mm - but it was on the cam producing
jumbled images).

The jumbled image problem seems to have gone away.

So it was either the incomplete mating of the extension cable, or the
fact I was using the front panel USB connectors on my PC - instead of
connecting directly to the motherboard they are connected to it by a
foot or so of loose fly leads, these are not twisted or shielded.
Maybe these were allowing noise, and using the direct motherboard
connection prevents this.

Anyway, whichever it was - problem solved.
Many thanks for your suggestion Brad.


From echtler at in.tum.de  Wed Feb  7 10:17:53 2007
From: echtler at in.tum.de (Florian Echtler)
Date: Wed, 07 Feb 2007 10:17:53 +0100
Subject: [Linux-uvc-devel] UVC Camera not registering as UVC
In-Reply-To: <2F80C2C3-0DC4-4E5D-964E-C87D981F803E@jpl.nasa.gov>
References: <2F80C2C3-0DC4-4E5D-964E-C87D981F803E@jpl.nasa.gov>
Message-ID: <1170839884.21818.5.camel@lapnavab35.informatik.tu-muenchen.de>

> Funny thing is, I am getting a bInterfaceClass as 0x0E which is the
> flag for UVC right? But I am not getting this same info when I lsusb,
> this is weird. So my question is is my entry listed above correct?
Well, I fear it is. This behaviour is common with a number of USB 
interface chips, AFAIK Cypress has even a trademark for it, called 
"ReNumeration" (c) ;-) The problem is that the interface chip is in some 
generic state on powerup (-> device class 0xFF IIRC) and first needs a 
firmware to be loaded. So what you'd need is a small firmware driver and 
afterwards, you should be able to use the uvcvideo driver.

Have you tried using the camera under Windows and afterwards rebooting 
with Linux without unplugging? If you're lucky, the firmware will stay 
loaded as long as you don't unplug the camera. You might also try to use a 
virtual machine with Windows to initialize it.

Yours, Florian
-- 
"_Nothing_ brightens up my morning. Coffee simply provides a shade of
grey just above the pitch-black of the infinite depths of the _abyss_."
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: Dies ist ein digital signierter Nachrichtenteil
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070207/5b275556/attachment.pgp>

From laurent.pinchart at skynet.be  Wed Feb  7 10:22:51 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 7 Feb 2007 10:22:51 +0100
Subject: [Linux-uvc-devel]
	=?utf-8?q?Logitech_QuickCam_Ultra_Vision_-_no_o?=
	=?utf-8?q?utput=09on_/dev/video0?=
In-Reply-To: <1170833924.6377.2.camel@yuna>
References: <941538.40335.qm@web60520.mail.yahoo.com>
	<45BB74FA.4060502@sury.org> <1170833924.6377.2.camel@yuna>
Message-ID: <200702071022.51310.laurent.pinchart@skynet.be>

Hi,

> is there anything I can do to help get my QC UV working?
>
> Camera is detected just fine (it even receives button events), when
> luvcview is started light on camera turns blue.  But I just receive no
> picture and luvcview hangs when I close it.

Does the kernel log report any error ?

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Feb  7 10:25:22 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 7 Feb 2007 10:25:22 +0100
Subject: [Linux-uvc-devel] UVC Camera not registering as UVC
In-Reply-To: <1170839884.21818.5.camel@lapnavab35.informatik.tu-muenchen.de>
References: <2F80C2C3-0DC4-4E5D-964E-C87D981F803E@jpl.nasa.gov>
	<1170839884.21818.5.camel@lapnavab35.informatik.tu-muenchen.de>
Message-ID: <200702071025.22886.laurent.pinchart@skynet.be>

> > Funny thing is, I am getting a bInterfaceClass as 0x0E which is the
> > flag for UVC right? But I am not getting this same info when I lsusb,
> > this is weird. So my question is is my entry listed above correct?
>
> Well, I fear it is. This behaviour is common with a number of USB
> interface chips, AFAIK Cypress has even a trademark for it, called
> "ReNumeration" (c) ;-) The problem is that the interface chip is in some
> generic state on powerup (-> device class 0xFF IIRC) and first needs a
> firmware to be loaded. So what you'd need is a small firmware driver and
> afterwards, you should be able to use the uvcvideo driver.
>
> Have you tried using the camera under Windows and afterwards rebooting
> with Linux without unplugging? If you're lucky, the firmware will stay
> loaded as long as you don't unplug the camera. You might also try to use a
> virtual machine with Windows to initialize it.

Or better, try to find if the Windows driver stores the firmware in some kind 
of readable form. The fxload utility can be used to load EZ-USB firmwares in 
Linux.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Feb  7 10:28:36 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 7 Feb 2007 10:28:36 +0100
Subject: [Linux-uvc-devel] Building the driver and application with raw
	Bayer capability
In-Reply-To: <20070124184521.98052.qmail@web60518.mail.yahoo.com>
References: <20070124184521.98052.qmail@web60518.mail.yahoo.com>
Message-ID: <200702071028.36800.laurent.pinchart@skynet.be>

Hi Paul,

>   I'm making steps toward being able to use UVC cameras in my application.
> I've successfully built V4L2 application capturing streaming data from
> camera - my first Linux, non-"Hello World" application. I've got stuck on
> trying to get raw Bayer mode working. I was trying to get the newest
> version of the driver and header files from
> http://developer.berlios.de/projects/linux-uvc, but it shows: This Project
> Has Not Released Any Files. Is there another place to get them?

You need to get the sources from SVN. More information is available on 
http://linux-uvc.berlios.de.

Regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Feb  7 11:10:24 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 7 Feb 2007 11:10:24 +0100
Subject: [Linux-uvc-devel] -Werror fixes for uvcvideo
In-Reply-To: <20070131155224.D63447@xorpc.icir.org>
References: <20070131155224.D63447@xorpc.icir.org>
Message-ID: <200702071110.24449.laurent.pinchart@skynet.be>

Hi Luigi,

> attached are just a couple of trivial patches to
> uvcvideo to suppress some compiler warnings - one
> related to a missing const, one related to
> pointer arithmetic done on a void *

I applied the missing const and the missing static modifications.

I'm not sure to agree with the void* arithmetic patch. Have a look at 
http://kerneltrap.org/node/3848. The mem field is a pointer to a storage 
area, which is not supposed to be accessed by the driver. Keeping the pointer 
void helps catching illegal accesses to the memory. I'd rather cast the 
pointer to an integer type before performing arithmetic.

> On passing - i notice that in a couple of structs
> in uvcvideo.h you are used unnamed unions, which are
> a gcc extension which is not guaranteed to be supported
> in the future.
>
> I suppose that, besides convenience, the choice has been
> inspired by a similar pattern in videodev2.h .
>
> Before the use gets too widespread, it might be a good
> idea to use standard C and put a name to the union ?
> The changes to the source now are relatively small,
> and this would prevent the use
> of unnamed unions in derived works, which would require
> far more work to be fixed.

I don't plan to make anonymous unions widespread in the driver. The two 
anonymous unions have been made anonymous to make the code easier to read, 
and not to mimic videodev2.h. I don't think they are an issue for internal 
driver structures.

Best regards, and thanks for your help.

Laurent Pinchart


From rizzo at icir.org  Wed Feb  7 11:24:42 2007
From: rizzo at icir.org (Luigi Rizzo)
Date: Wed, 7 Feb 2007 02:24:42 -0800
Subject: [Linux-uvc-devel] -Werror fixes for uvcvideo
In-Reply-To: <200702071110.24449.laurent.pinchart@skynet.be>;
	from laurent.pinchart@skynet.be on Wed, Feb 07, 2007 at
	11:10:24AM +0100
References: <20070131155224.D63447@xorpc.icir.org>
	<200702071110.24449.laurent.pinchart@skynet.be>
Message-ID: <20070207022442.A63529@xorpc.icir.org>

On Wed, Feb 07, 2007 at 11:10:24AM +0100, Laurent Pinchart wrote:
> Hi Luigi,
> 
> > attached are just a couple of trivial patches to
> > uvcvideo to suppress some compiler warnings - one
> > related to a missing const, one related to
> > pointer arithmetic done on a void *
> 
> I applied the missing const and the missing static modifications.
> 
> I'm not sure to agree with the void* arithmetic patch. Have a look at 
> http://kerneltrap.org/node/3848. The mem field is a pointer to a storage 
> area, which is not supposed to be accessed by the driver. Keeping the pointer 
> void helps catching illegal accesses to the memory. I'd rather cast the 
> pointer to an integer type before performing arithmetic.

I am all for having compiler checks as strict as possible.

Thing is, you have two pieces of code (uvcvideo.h and uvc_video.c)
which conflict in the use of this field, so one way or the other
you need to sort it out :)

The alternative then could be to fix uvc_video.c::uvc_video_decode()
around line 296:

        /* Copy the video data to the buffer. */
        len -= data[0];
        maxlen = buf->buf.length - buf->buf.bytesused;
-       mem = queue->mem + buf->buf.m.offset + buf->buf.bytesused;
+       mem = (char *)queue->mem + buf->buf.m.offset + buf->buf.bytesused;
        nbytes = min(len, maxlen);
        memcpy(mem, data + data[0], nbytes);
        buf->buf.bytesused += nbytes;


> > On passing - i notice that in a couple of structs
> > in uvcvideo.h you are used unnamed unions, which are
>..
> I don't plan to make anonymous unions widespread in the driver. The two 
> anonymous unions have been made anonymous to make the code easier to read, 
> and not to mimic videodev2.h. I don't think they are an issue for internal 
> driver structures.

ok it was just a portability issue, which i can handle locally
on FreeBSD.

thanks
luigi


From Giuseppe.Castagna at ens.fr  Wed Feb  7 11:26:29 2007
From: Giuseppe.Castagna at ens.fr (Giuseppe Castagna)
Date: Wed, 07 Feb 2007 11:26:29 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Ultra Vision - no output
 on	/dev/video0
In-Reply-To: <1170833924.6377.2.camel@yuna>
References: <941538.40335.qm@web60520.mail.yahoo.com>	<45BB74FA.4060502@sury.org>
	<1170833924.6377.2.camel@yuna>
Message-ID: <45C9A955.6000908@ens.fr>

Ond?ej Sur? wrote:
> Hi everybody,
> 
> is there anything I can do to help get my QC UV working?
> 
> Camera is detected just fine (it even receives button events), when
> luvcview is started light on camera turns blue.  But I just receive no
> picture and luvcview hangs when I close it.

Bizarre,

    I have two QC UV on two different workstations (an AMD64 and a Core 2 Duo) 
with kernels 2.6.19.2, 2.6.20 and with luvcview they both work very well. 
However I noticed that for one machine the  QC UV did not work if I plugged it 
into the front panel USB port or into the USB hub of my lcd panel. Have you 
plugged it directly on the motherboard? If you plug and unplug it, what do 
system log say?

---Beppe---


From echtler at in.tum.de  Wed Feb  7 13:54:51 2007
From: echtler at in.tum.de (Florian Echtler)
Date: Wed, 07 Feb 2007 13:54:51 +0100
Subject: [Linux-uvc-devel] VIDIOC_DQBUF fails with input/output error
In-Reply-To: <1170681982.24383.25.camel@lapnavab35.informatik.tu-muenchen.de>
References: <1170681982.24383.25.camel@lapnavab35.informatik.tu-muenchen.de>
Message-ID: <1170852891.21818.31.camel@lapnavab35.informatik.tu-muenchen.de>

> However, I'm still getting a different kind of error: after capturing
> some 100 frames, my VIDIOC_DQBUF ioctl will fail with -EIO. I'm using
> revision 84 with a small part of the patch from Evgeny (only the 500 us
> delay after control transfers).
Just for reference: I seem to have fixed my problem, at least sort of,
by spending money :-) I went to the next computer store and bought a new
USB 2.0 controller card, this time with a NEC chipset, and the camera
has now been running stable for at least 40 minutes, even with frequent
control requests. 

So, as far as I can tell, it works with:

02:0a.2 Class 0c03: 1033:00e0 (rev 04)

02:0a.2 USB Controller: NEC Corporation USB 2.0 (rev 04) (prog-if 20
[EHCI])
        Subsystem: DTK Computer PTI-205N USB 2.0 Host Controller

and fails quite reliably with:

00:1d.7 Class 0c03: 8086:24cd (rev 02)

00:1d.7 USB Controller: Intel Corporation 82801DB/DBM (ICH4/ICH4-M) USB2
EHCI Controller (rev 02) (prog-if 20 [EHCI])
        Subsystem: ASUSTeK Computer Inc. Unknown device 8089

I didn't use audio in any case. The only difference between the two
controllers is that the non-working one has an UHCI companion
controller, the working one has OHCI.

Would it make sense to create a Wiki or something like that in order to
collect working and non-working controllers? Or is the influence of
other factors so large that this is useless?

Yours, Florian
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: Dies ist ein digital signierter Nachrichtenteil
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070207/9d9008f6/attachment.pgp>

From otroeduardo at gmail.com  Thu Feb  8 01:53:49 2007
From: otroeduardo at gmail.com (Eduardo Suarez)
Date: Thu, 8 Feb 2007 00:53:49 +0000
Subject: [Linux-uvc-devel] /dev/video not found
Message-ID: <53360e010702071653w354242bcle3acb5b594830e57@mail.gmail.com>

I do
# modprobe uvcvideo
but there is no /dev/video found afterwards. Who is the responsible for
creating this device?

I'm working with a linux gentoo distribution.

Thanks in advance,
-Eduardo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070208/53ff96c0/attachment.html>

From idht4n at hotmail.com  Thu Feb  8 07:13:27 2007
From: idht4n at hotmail.com (David L)
Date: Wed, 07 Feb 2007 22:13:27 -0800
Subject: [Linux-uvc-devel] (no subject)
Message-ID: <BAY113-F1479208F8786EB5EFF9A09849D0@phx.gbl>

I bought a Logitech Quickcam Pro 5000 today and tried to use
it with ekiga.  Sometimes it works and other times I get this
error at the beginning or in the middle of a session:

"Your driver doesn't seem to support any of the color formats supported by 
Ekiga.
Please check your kernel driver documentation in order to determine which 
Palette is supported."

I have to unplug the camera and plug it in again to get it to work
again.  The log shows  this:

uvcvideo: UVC device initialized.
usbcore: registered new interface driver uvcvideo
USB Video Class driver (v0.1.0)
uvcvideo: Trying format 0x56595559 (YUYV): 720x480.
uvcvideo: Using default frame interval 33333.3 us (30.0 fps).
uvcvideo: Trying format 0x56595559 (YUYV): 10000x480.
uvcvideo: Using default frame interval 33333.3 us (30.0 fps).
uvcvideo: Control 0x00980903 not found.
uvcvideo: Control 0x00980903 not found.
uvcvideo: Control 0x00980909 not found.
uvcvideo: Failed to resubmit video URB (-1).
uvcvideo: Failed to resubmit video URB (-1).
uvcvideo: Failed to resubmit video URB (-1).
uvcvideo: Failed to resubmit video URB (-1).
uvcvideo: Failed to resubmit video URB (-1).
uvcvideo: Failed to resubmit video URB (-1).
uvcvideo: Failed to resubmit video URB (-1).
uvcvideo: Trying format 0x47504a4d (MJPG): 10000x10000.
uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
uvcvideo: Trying format 0x32315559 (YU12): 640x480.
uvcvideo: Unsupported format 0x32315559.
uvcvideo: Trying format 0x34424752 (RGB4): 640x480.
uvcvideo: Unsupported format 0x34424752.
uvcvideo: Trying format 0x34524742 (BGR4): 640x480.
uvcvideo: Unsupported format 0x34524742.
uvcvideo: Trying format 0x33424752 (RGB3): 640x480.
uvcvideo: Unsupported format 0x33424752.
uvcvideo: Trying format 0x33524742 (BGR3): 640x480.
uvcvideo: Unsupported format 0x33524742.
uvcvideo: Trying format 0x47504a4d (MJPG): 640x480.
uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
uvcvideo: Setting frame interval to 1/30 (333333).
uvcvideo: Setting frame interval to 1/30 (333333).
uvcvideo: Trying format 0x47504a4d (MJPG): 176x144.
uvcvideo: Using default frame interval 33333.3 us (30.0 fps).
uvcvideo: Setting frame interval to 1/30 (333333).
uvcvideo: Failed to query (135) UVC control 3 (unit 2) : -32 (exp. 2).
uvcvideo: Control 0x00980903 not found.
uvcvideo: Trying format 0x32315559 (YU12): 176x144.
uvcvideo: Unsupported format 0x32315559.
uvcvideo: Trying format 0x34424752 (RGB4): 176x144.
uvcvideo: Unsupported format 0x34424752.
uvcvideo: Trying format 0x34524742 (BGR4): 176x144.
uvcvideo: Unsupported format 0x34524742.
uvcvideo: Trying format 0x33424752 (RGB3): 176x144.
uvcvideo: Unsupported format 0x33424752.
uvcvideo: Trying format 0x33524742 (BGR3): 176x144.
uvcvideo: Unsupported format 0x33524742.
uvcvideo: Trying format 0x47504a4d (MJPG): 176x144.
uvcvideo: Using default frame interval 33333.3 us (30.0 fps).
uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32 (exp. 26).
uvcvideo: Trying format 0x4745504a (JPEG): 176x144.
uvcvideo: Unsupported format 0x4745504a.
uvcvideo: Trying format 0x56595559 (YUYV): 176x144.
uvcvideo: Using default frame interval 33333.3 us (30.0 fps).
uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110 (exp. 26).
uvcvideo: Trying format 0x56595559 (YUYV): 176x144.
uvcvideo: Using default frame interval 33333.3 us (30.0 fps).
uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110 (exp. 26).
uvcvideo: Trying format 0x50323234 (422P): 176x144.
uvcvideo: Unsupported format 0x50323234.
uvcvideo: Trying format 0x50313459 (Y41P): 176x144.
uvcvideo: Unsupported format 0x50313459.
uvcvideo: Trying format 0x50313134 (411P): 176x144.
uvcvideo: Unsupported format 0x50313134.
uvcvideo: Trying format 0x50424752 (RGBP): 176x144.
uvcvideo: Unsupported format 0x50424752.
uvcvideo: Trying format 0x4f424752 (RGBO): 176x144.
uvcvideo: Unsupported format 0x4f424752.
uvcvideo: Trying format 0x3132564e (NV21): 176x144.
uvcvideo: Unsupported format 0x3132564e.
uvcvideo: Trying format 0x32315559 (YU12): 176x144.
uvcvideo: Unsupported format 0x32315559.
uvcvideo: Trying format 0x59455247 (GREY): 176x144.
uvcvideo: Unsupported format 0x59455247.
uvcvideo: Trying format 0x59565955 (UYVY): 176x144.
uvcvideo: Unsupported format 0x59565955.
uvcvideo: Trying format 0x31384142 (BA81): 176x144.
uvcvideo: Unsupported format 0x31384142.

_________________________________________________________________
Turn searches into helpful donations. Make your search count. 
http://click4thecause.live.com/search/charity/default.aspx?source=hmemtagline_donation&FORM=WLMTAG



From echtler at in.tum.de  Thu Feb  8 19:19:38 2007
From: echtler at in.tum.de (Florian Echtler)
Date: Thu, 08 Feb 2007 19:19:38 +0100
Subject: [Linux-uvc-devel] Large variance in time between frames?
Message-ID: <1170958778.22445.18.camel@lapnavab35.informatik.tu-muenchen.de>

Hello everybody,

me again with another question. I have my Quickcam up and running
beautifully now, however, I've run into another problem today..

I'm trying to take every two successive frames with completely different
lighting conditions. The lighting is controlled by a hardware setup
connected to the parallel port.

Now, I've noticed that the flash that should be visible only in the
odd-numbered frames is most of the time also visible in the
even-numbered frames. I have to add a delay of up to 30 ms before and
after taking the image, only then the separation between the two
different lighting conditions is acceptable.

So, my question is: can the camera actually cause a variance of up to 
+- 30 ms? I'm using mmap IO with 2 buffers. I've tried up to 16, without
a noticeable change.

Any hints?

Thanks, Yours, Florian
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: Dies ist ein digital signierter Nachrichtenteil
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070208/de084da4/attachment.pgp>

From laurent.pinchart at skynet.be  Thu Feb  8 23:06:54 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 8 Feb 2007 23:06:54 +0100
Subject: [Linux-uvc-devel] /dev/video not found
In-Reply-To: <53360e010702071653w354242bcle3acb5b594830e57@mail.gmail.com>
References: <53360e010702071653w354242bcle3acb5b594830e57@mail.gmail.com>
Message-ID: <200702082306.54600.laurent.pinchart@skynet.be>

Hi Eduardo,

> I do
> # modprobe uvcvideo
> but there is no /dev/video found afterwards. Who is the responsible for
> creating this device?
>
> I'm working with a linux gentoo distribution.

udev is responsible for creating the device node. Have a look at the kernel 
log (dmesg). The driver should print something like

uvcvideo: Found UVC 1.00 device ProScope HR (19ab:1000)

or

uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c2)

when it detects a device successfully. If it does, your system configuration 
(udev or something else) is to blame. If it doesn't, there's another problem.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Feb  8 23:19:18 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 8 Feb 2007 23:19:18 +0100
Subject: [Linux-uvc-devel] (no subject)
In-Reply-To: <BAY113-F1479208F8786EB5EFF9A09849D0@phx.gbl>
References: <BAY113-F1479208F8786EB5EFF9A09849D0@phx.gbl>
Message-ID: <200702082319.18663.laurent.pinchart@skynet.be>

Hi David,

> I bought a Logitech Quickcam Pro 5000 today and tried to use
> it with ekiga.  Sometimes it works and other times I get this
> error at the beginning or in the middle of a session:
>
> "Your driver doesn't seem to support any of the color formats supported by
> Ekiga.
> Please check your kernel driver documentation in order to determine which
> Palette is supported."
>
> I have to unplug the camera and plug it in again to get it to work
> again.  The log shows  this:

It seems you are experiencing the dreadful Logitech hardware bug :-( I don't 
think you can do much here. Martin, can you confirm ?

> uvcvideo: UVC device initialized.
> usbcore: registered new interface driver uvcvideo
> USB Video Class driver (v0.1.0)
> uvcvideo: Trying format 0x56595559 (YUYV): 720x480.
> uvcvideo: Using default frame interval 33333.3 us (30.0 fps).
> uvcvideo: Trying format 0x56595559 (YUYV): 10000x480.
> uvcvideo: Using default frame interval 33333.3 us (30.0 fps).
> uvcvideo: Control 0x00980903 not found.
> uvcvideo: Control 0x00980903 not found.
> uvcvideo: Control 0x00980909 not found.
> uvcvideo: Failed to resubmit video URB (-1).
> uvcvideo: Failed to resubmit video URB (-1).
> uvcvideo: Failed to resubmit video URB (-1).
> uvcvideo: Failed to resubmit video URB (-1).
> uvcvideo: Failed to resubmit video URB (-1).
> uvcvideo: Failed to resubmit video URB (-1).
> uvcvideo: Failed to resubmit video URB (-1).

This puzzles me as well. Those errors are probably not fatal to the problem 
you are experiencing, but they still should not happen.

> uvcvideo: Trying format 0x47504a4d (MJPG): 10000x10000.
> uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
> uvcvideo: Trying format 0x32315559 (YU12): 640x480.
> uvcvideo: Unsupported format 0x32315559.
> uvcvideo: Trying format 0x34424752 (RGB4): 640x480.
> uvcvideo: Unsupported format 0x34424752.
> uvcvideo: Trying format 0x34524742 (BGR4): 640x480.
> uvcvideo: Unsupported format 0x34524742.
> uvcvideo: Trying format 0x33424752 (RGB3): 640x480.
> uvcvideo: Unsupported format 0x33424752.
> uvcvideo: Trying format 0x33524742 (BGR3): 640x480.
> uvcvideo: Unsupported format 0x33524742.
> uvcvideo: Trying format 0x47504a4d (MJPG): 640x480.
> uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
> uvcvideo: Setting frame interval to 1/30 (333333).
> uvcvideo: Setting frame interval to 1/30 (333333).
> uvcvideo: Trying format 0x47504a4d (MJPG): 176x144.
> uvcvideo: Using default frame interval 33333.3 us (30.0 fps).
> uvcvideo: Setting frame interval to 1/30 (333333).
> uvcvideo: Failed to query (135) UVC control 3 (unit 2) : -32 (exp. 2).
> uvcvideo: Control 0x00980903 not found.
> uvcvideo: Trying format 0x32315559 (YU12): 176x144.
> uvcvideo: Unsupported format 0x32315559.
> uvcvideo: Trying format 0x34424752 (RGB4): 176x144.
> uvcvideo: Unsupported format 0x34424752.
> uvcvideo: Trying format 0x34524742 (BGR4): 176x144.
> uvcvideo: Unsupported format 0x34524742.
> uvcvideo: Trying format 0x33424752 (RGB3): 176x144.
> uvcvideo: Unsupported format 0x33424752.
> uvcvideo: Trying format 0x33524742 (BGR3): 176x144.
> uvcvideo: Unsupported format 0x33524742.
> uvcvideo: Trying format 0x47504a4d (MJPG): 176x144.
> uvcvideo: Using default frame interval 33333.3 us (30.0 fps).
> uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32 (exp. 26).
> uvcvideo: Trying format 0x4745504a (JPEG): 176x144.
> uvcvideo: Unsupported format 0x4745504a.
> uvcvideo: Trying format 0x56595559 (YUYV): 176x144.
> uvcvideo: Using default frame interval 33333.3 us (30.0 fps).
> uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110 (exp. 26).
> uvcvideo: Trying format 0x56595559 (YUYV): 176x144.
> uvcvideo: Using default frame interval 33333.3 us (30.0 fps).
> uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110 (exp. 26).
> uvcvideo: Trying format 0x50323234 (422P): 176x144.
> uvcvideo: Unsupported format 0x50323234.
> uvcvideo: Trying format 0x50313459 (Y41P): 176x144.
> uvcvideo: Unsupported format 0x50313459.
> uvcvideo: Trying format 0x50313134 (411P): 176x144.
> uvcvideo: Unsupported format 0x50313134.
> uvcvideo: Trying format 0x50424752 (RGBP): 176x144.
> uvcvideo: Unsupported format 0x50424752.
> uvcvideo: Trying format 0x4f424752 (RGBO): 176x144.
> uvcvideo: Unsupported format 0x4f424752.
> uvcvideo: Trying format 0x3132564e (NV21): 176x144.
> uvcvideo: Unsupported format 0x3132564e.
> uvcvideo: Trying format 0x32315559 (YU12): 176x144.
> uvcvideo: Unsupported format 0x32315559.
> uvcvideo: Trying format 0x59455247 (GREY): 176x144.
> uvcvideo: Unsupported format 0x59455247.
> uvcvideo: Trying format 0x59565955 (UYVY): 176x144.
> uvcvideo: Unsupported format 0x59565955.
> uvcvideo: Trying format 0x31384142 (BA81): 176x144.
> uvcvideo: Unsupported format 0x31384142.

Best regards,

Laurent Pinchart


From wstephenson at suse.de  Thu Feb  8 23:39:34 2007
From: wstephenson at suse.de (Will Stephenson)
Date: Thu, 8 Feb 2007 23:39:34 +0100
Subject: [Linux-uvc-devel] uvcvideo openSUSE package available
Message-ID: <200702082339.34759.wstephenson@suse.de>

Hi all

I've packaged r87 of uvcvideo for openSUSE - it seems to work pretty well.  I 
had to tweak the Makefile so that it detects when it is being called by 
kbuild and when it isn't, please see attached.  It would be nice if you could 
commit this :).

The 10.2 repository is here, go up for other versions: 
http://software.opensuse.org/download/drivers:/webcam/openSUSE_10.2/

HTH

Will
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Makefile.diff
Type: text/x-diff
Size: 935 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070208/b1ab35d9/attachment.diff>

From luca.risolia at studio.unibo.it  Fri Feb  9 16:25:00 2007
From: luca.risolia at studio.unibo.it (Luca Risolia)
Date: Fri, 9 Feb 2007 16:25:00 +0100
Subject: [Linux-uvc-devel] BUG: uvc_v4l2_mmap() does not check the memory
	protection flags.
Message-ID: <200702091625.01777.luca.risolia@studio.unibo.it>

According to the V4L2 API, the prot argument of the mmap()
system call must be set to PROT_READ | PROT_WRITE by the caller
(whetever is the direction of data exchange):

http://www.linuxtv.org/downloads/video4linux/API/V4L2_API/spec-single/v4l2.html#FUNC-MMAP

The UVC driver should enforce this requirement by  checking  the memory
flags and returning the -EACCESS error code to the caller, in case of missing
flags.

---

On the other hand, "luvcview" does not pass PROT_WRITE to mmap(),
which is a bug too, since it may cause other more compliant
V4L2 drivers to return an error if PROT_WRITE is not set.

Best regards
Luca Risolia


From mxhaard at magic.fr  Fri Feb  9 17:08:50 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Fri, 9 Feb 2007 17:08:50 +0100
Subject: [Linux-uvc-devel] BUG: uvc_v4l2_mmap() does not check the
	memory protection flags.
In-Reply-To: <200702091625.01777.luca.risolia@studio.unibo.it>
References: <200702091625.01777.luca.risolia@studio.unibo.it>
Message-ID: <200702091708.50870.mxhaard@magic.fr>

Le Vendredi 9 F?vrier 2007 16:25, Luca Risolia a ?crit?:
> According to the V4L2 API, the prot argument of the mmap()
> system call must be set to PROT_READ | PROT_WRITE by the caller
> (whetever is the direction of data exchange):
>
> http://www.linuxtv.org/downloads/video4linux/API/V4L2_API/spec-single/v4l2.
>html#FUNC-MMAP
>
> The UVC driver should enforce this requirement by  checking  the memory
> flags and returning the -EACCESS error code to the caller, in case of
> missing flags.
>
> ---
>
> On the other hand, "luvcview" does not pass PROT_WRITE to mmap(),
> which is a bug too, since it may cause other more compliant
> V4L2 drivers to return an error if PROT_WRITE is not set.
Ok thanks.
>
> Best regards
> Luca Risolia
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
Best regards
-- 
Michel Xhaard
http://mxhaard.free.fr


From laurent.pinchart at skynet.be  Fri Feb  9 18:44:25 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 9 Feb 2007 18:44:25 +0100
Subject: [Linux-uvc-devel] BUG: uvc_v4l2_mmap() does not check the
	memory protection flags.
In-Reply-To: <200702091625.01777.luca.risolia@studio.unibo.it>
References: <200702091625.01777.luca.risolia@studio.unibo.it>
Message-ID: <200702091844.25701.laurent.pinchart@skynet.be>

Hi Luca,

> According to the V4L2 API, the prot argument of the mmap()
> system call must be set to PROT_READ | PROT_WRITE by the caller
> (whetever is the direction of data exchange):
>
> http://www.linuxtv.org/downloads/video4linux/API/V4L2_API/spec-single/v4l2.
>html#FUNC-MMAP
>
> The UVC driver should enforce this requirement by  checking  the memory
> flags and returning the -EACCESS error code to the caller, in case of
> missing flags.

Thanks for pointing this out. Out of curiosity, do you have any idea why 
PROT_WRITE is required for video acquisition mappings ? Without PROT_WRITE, 
user space applications can't write to the buffer. I haven't been able to 
find any other implication.

Best regards,

Laurent Pinchart


From linux at rubli.info  Fri Feb  9 18:58:15 2007
From: linux at rubli.info (Martin Rubli)
Date: Fri, 09 Feb 2007 09:58:15 -0800
Subject: [Linux-uvc-devel] VIDIOC_DQBUF fails with input/output error
In-Reply-To: <1170852891.21818.31.camel@lapnavab35.informatik.tu-muenchen.de>
References: <1170681982.24383.25.camel@lapnavab35.informatik.tu-muenchen.de>
	<1170852891.21818.31.camel@lapnavab35.informatik.tu-muenchen.de>
Message-ID: <op.tnhtjdvs42iof8@nb-mrublixp.am.logitech.com>

Hi Florian,

>> However, I'm still getting a different kind of error: after capturing
>> some 100 frames, my VIDIOC_DQBUF ioctl will fail with -EIO. I'm using
>> revision 84 with a small part of the patch from Evgeny (only the 500 us
>> delay after control transfers).
> Just for reference: I seem to have fixed my problem, at least sort of,
> by spending money :-) I went to the next computer store and bought a new
> USB 2.0 controller card, this time with a NEC chipset, and the camera
> has now been running stable for at least 40 minutes, even with frequent
> control requests.

That's good news!

> So, as far as I can tell, it works with:
>
> 02:0a.2 Class 0c03: 1033:00e0 (rev 04)
>
> 02:0a.2 USB Controller: NEC Corporation USB 2.0 (rev 04) (prog-if 20
> [EHCI])
>         Subsystem: DTK Computer PTI-205N USB 2.0 Host Controller

Can you tell me the name of the product you bought? Maybe I can get one of  
those for testing ...

> and fails quite reliably with:
>
> 00:1d.7 Class 0c03: 8086:24cd (rev 02)
>
> 00:1d.7 USB Controller: Intel Corporation 82801DB/DBM (ICH4/ICH4-M) USB2
> EHCI Controller (rev 02) (prog-if 20 [EHCI])
>         Subsystem: ASUSTeK Computer Inc. Unknown device 8089
>
> I didn't use audio in any case. The only difference between the two
> controllers is that the non-working one has an UHCI companion
> controller, the working one has OHCI.

Audio hasn't created any issues that I know of. I've no idea whether the  
type of the USB 1.1 controller part is somehow related to the issue, but  
it's something to keep in mind!

> Would it make sense to create a Wiki or something like that in order to
> collect working and non-working controllers? Or is the influence of
> other factors so large that this is useless?

I'm working on a general Wiki for all sorts of webcam information. I think  
your suggestion is a good idea if it turns out that different people with  
same host controller have comparable experiences.

In case you want to contribute to such a database, let me know ...

Thanks for all the valuable information!

Cheers,
Martin


From linux at rubli.info  Fri Feb  9 19:09:44 2007
From: linux at rubli.info (Martin Rubli)
Date: Fri, 09 Feb 2007 10:09:44 -0800
Subject: [Linux-uvc-devel] (no subject)
In-Reply-To: <200702082319.18663.laurent.pinchart@skynet.be>
References: <BAY113-F1479208F8786EB5EFF9A09849D0@phx.gbl>
	<200702082319.18663.laurent.pinchart@skynet.be>
Message-ID: <op.tnht2i0742iof8@nb-mrublixp.am.logitech.com>

On Thu, 08 Feb 2007 14:19:18 -0800, Laurent Pinchart  
<laurent.pinchart at skynet.be> wrote:

> Hi David,
>
>> I bought a Logitech Quickcam Pro 5000 today and tried to use
>> it with ekiga.  Sometimes it works and other times I get this
>> error at the beginning or in the middle of a session:
>>
>> "Your driver doesn't seem to support any of the color formats supported  
>> by Ekiga.
>> Please check your kernel driver documentation in order to determine  
>> which Palette is supported."
>>
>> I have to unplug the camera and plug it in again to get it to work
>> again.  The log shows  this:
>
> It seems you are experiencing the dreadful Logitech hardware bug :-( I  
> don't think you can do much here. Martin, can you confirm ?

It does indeed look like it. Ekiga has always been very good at triggering  
it ...

>> uvcvideo: UVC device initialized.
>> usbcore: registered new interface driver uvcvideo
>> USB Video Class driver (v0.1.0)
>> uvcvideo: Trying format 0x56595559 (YUYV): 720x480.
>> uvcvideo: Using default frame interval 33333.3 us (30.0 fps).
>> uvcvideo: Trying format 0x56595559 (YUYV): 10000x480.
>> uvcvideo: Using default frame interval 33333.3 us (30.0 fps).
>> uvcvideo: Control 0x00980903 not found.
>> uvcvideo: Control 0x00980903 not found.
>> uvcvideo: Control 0x00980909 not found.
>> uvcvideo: Failed to resubmit video URB (-1).
>> uvcvideo: Failed to resubmit video URB (-1).
>> uvcvideo: Failed to resubmit video URB (-1).
>> uvcvideo: Failed to resubmit video URB (-1).
>> uvcvideo: Failed to resubmit video URB (-1).
>> uvcvideo: Failed to resubmit video URB (-1).
>> uvcvideo: Failed to resubmit video URB (-1).
>
> This puzzles me as well. Those errors are probably not fatal to the  
> problem you are experiencing, but they still should not happen.

Agreed. I've seen these before, they were always "harmless", but I never  
really found the connection to the other problem. I think I saw them  
happen independently, but I'm not sure anymore ...

Cheers,
Martin


From luca.risolia at studio.unibo.it  Sat Feb 10 15:08:11 2007
From: luca.risolia at studio.unibo.it (Luca Risolia)
Date: Sat, 10 Feb 2007 15:08:11 +0100
Subject: [Linux-uvc-devel] BUG: uvc_v4l2_mmap() does not check the
	memory protection flags.
In-Reply-To: <200702091844.25701.laurent.pinchart@skynet.be>
References: <200702091625.01777.luca.risolia@studio.unibo.it>
	<200702091844.25701.laurent.pinchart@skynet.be>
Message-ID: <200702101508.12719.luca.risolia@studio.unibo.it>

Alle 18:44, venerd? 9 febbraio 2007, Laurent Pinchart ha scritto:
> Thanks for pointing this out. Out of curiosity, do you have any idea why 
> PROT_WRITE is required for video acquisition mappings ? Without PROT_WRITE, 
> user space applications can't write to the buffer. I haven't been able to 
> find any other implication.

Consistency is one reason why PROT_WRITE is required. The access mode
to the device is always RW regardless of the type of device, open() flags
must be set to O_RDRW, so both PROT_READ and PROT_WRITE must
be passed to mmap().

Best regards
Luca Risolia


From luca.risolia at studio.unibo.it  Sat Feb 10 16:24:43 2007
From: luca.risolia at studio.unibo.it (Luca Risolia)
Date: Sat, 10 Feb 2007 16:24:43 +0100
Subject: [Linux-uvc-devel] BUG: VIDIOC_STREAMON does not return an error if
	no input buffers are enqueued
Message-ID: <200702101624.44348.luca.risolia@studio.unibo.it>

Hello,

the UVC driver seems to be out of standard about VIDIOC_STREAMON.

According to the V4L2 API, ioctl(VIDIOC_STREAMON)
should return the -EINVAL error code if no input buffers
are enqueued (yet), while the UVC driver returns 0.

Best regards
Luca Risolia


From laurent.pinchart at skynet.be  Sat Feb 10 17:18:39 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 10 Feb 2007 17:18:39 +0100
Subject: [Linux-uvc-devel] BUG: VIDIOC_STREAMON does not return an error
	if no input buffers are enqueued
In-Reply-To: <200702101624.44348.luca.risolia@studio.unibo.it>
References: <200702101624.44348.luca.risolia@studio.unibo.it>
Message-ID: <200702101718.40059.laurent.pinchart@skynet.be>

Hi,

> the UVC driver seems to be out of standard about VIDIOC_STREAMON.
>
> According to the V4L2 API, ioctl(VIDIOC_STREAMON)
> should return the -EINVAL error code if no input buffers
> are enqueued (yet), while the UVC driver returns 0.

No, according to the V4L2 API, ioctl(VIDIOC_STREAMON) should return -EINVAL 
if "no buffers have been allocated (memory mapping) or enqueued (output) 
yet.". The specification clearly states that the lack of queued *output* 
buffers leads to -EINVAL. Having no queued input buffers shouldn't trigger 
any error condition.

Best regards,

Laurent Pinchart


From luca.risolia at studio.unibo.it  Sat Feb 10 18:03:57 2007
From: luca.risolia at studio.unibo.it (Luca Risolia)
Date: Sat, 10 Feb 2007 18:03:57 +0100
Subject: [Linux-uvc-devel] BUG: VIDIOC_STREAMON does not return an error
	if no input buffers are enqueued
In-Reply-To: <200702101718.40059.laurent.pinchart@skynet.be>
References: <200702101624.44348.luca.risolia@studio.unibo.it>
	<200702101718.40059.laurent.pinchart@skynet.be>
Message-ID: <200702101803.58622.luca.risolia@studio.unibo.it>

Alle 17:18, sabato 10 febbraio 2007, Laurent Pinchart ha scritto:
> Hi,
> 
> > the UVC driver seems to be out of standard about VIDIOC_STREAMON.
> >
> > According to the V4L2 API, ioctl(VIDIOC_STREAMON)
> > should return the -EINVAL error code if no input buffers
> > are enqueued (yet), while the UVC driver returns 0.
> 
> No, according to the V4L2 API, ioctl(VIDIOC_STREAMON) should return -EINVAL 
> if "no buffers have been allocated (memory mapping) or enqueued (output) 
> yet.". The specification clearly states that the lack of queued *output* 
> buffers leads to -EINVAL. Having no queued input buffers shouldn't trigger 
> any error condition.

Sorry, I didn't remember that "(output)". It turns out that I found
a bug in my driver. However, do you know any reasons why
VIDIOC_STREAMON should trigger an error when there are no enqueued
output buffers, while VIDIOC_STREAMON has to succed in the same case for
input buffers?

Best regards
Luca Risolia


From laurent.pinchart at skynet.be  Sat Feb 10 18:12:58 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 10 Feb 2007 18:12:58 +0100
Subject: [Linux-uvc-devel] BUG: VIDIOC_STREAMON does not return an error
	if no input buffers are enqueued
In-Reply-To: <200702101803.58622.luca.risolia@studio.unibo.it>
References: <200702101624.44348.luca.risolia@studio.unibo.it>
	<200702101718.40059.laurent.pinchart@skynet.be>
	<200702101803.58622.luca.risolia@studio.unibo.it>
Message-ID: <200702101812.59761.laurent.pinchart@skynet.be>

> > > the UVC driver seems to be out of standard about VIDIOC_STREAMON.
> > >
> > > According to the V4L2 API, ioctl(VIDIOC_STREAMON)
> > > should return the -EINVAL error code if no input buffers
> > > are enqueued (yet), while the UVC driver returns 0.
> >
> > No, according to the V4L2 API, ioctl(VIDIOC_STREAMON) should return
> > -EINVAL if "no buffers have been allocated (memory mapping) or enqueued
> > (output) yet.". The specification clearly states that the lack of queued
> > *output* buffers leads to -EINVAL. Having no queued input buffers
> > shouldn't trigger any error condition.
>
> Sorry, I didn't remember that "(output)". It turns out that I found
> a bug in my driver. However, do you know any reasons why
> VIDIOC_STREAMON should trigger an error when there are no enqueued
> output buffers, while VIDIOC_STREAMON has to succed in the same case for
> input buffers?

No, not really. It's a bit inconsistent. I don't see any technical reason to 
force the user to enqueue buffers before calling STREAMON. Might be worth 
asking on the V4L list.

Best regards,

Laurent Pinchart


From elim at lim.ca  Sat Feb 10 19:54:34 2007
From: elim at lim.ca (Ernie Lim)
Date: Sat, 10 Feb 2007 13:54:34 -0500
Subject: [Linux-uvc-devel] logitech ultra vision
Message-ID: <cffbfe510702101054sdfecddaq3d27a0bf056a3f80@mail.gmail.com>

Hi, Im having problems getting ekiga to recognize my new quick cam ultra
vision.

I've tried all the usb ports, and trace=15 as suggested but no go. Ekiga
complains about the device not providing the right format "Your video driver
doesn't support the requested video format"

uvccapture does work but the snapshots are of poor quality.

Can anyone suggest anything??

Here is my dmesg output:


uvcvideo: UVC device initialized.
usb 5-6: USB disconnect, address 9
usb 5-6: new high speed USB device using ehci_hcd and address 10
usb 5-6: configuration #1 chosen from 1 choice
uvcvideo: Probing generic UVC device 6
uvcvideo: Found format MJPEG.
uvcvideo: - 160x120 (30.0 fps)
uvcvideo: - 176x144 (30.0 fps)
uvcvideo: - 320x240 (15.0 fps)
uvcvideo: - 352x288 (15.0 fps)
uvcvideo: - 640x480 (15.0 fps)
uvcvideo: - 960x720 (15.0 fps)
uvcvideo: Found format Uncompressed.
uvcvideo: - 160x120 (30.0 fps)
uvcvideo: - 176x144 (30.0 fps)
uvcvideo: - 320x240 (15.0 fps)
uvcvideo: - 352x288 (15.0 fps)
uvcvideo: - 640x480 (15.0 fps)
uvcvideo: - 960x720 (10.0 fps)
uvcvideo: - 1280x960 (7.5 fps)
uvcvideo: Found a Status endpoint (addr 87).
uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c9)
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/2 to device 6
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/3 to device 6
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/7 to device 6
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/8 to device 6
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/1 to device 6
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/4 to device 6
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/5 to device 6
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/2 to device 6
entity 1
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/4 to device 6
entity 1
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/11 to device 6
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/10 to device 6
entity 2
uvcvideo: Scanning UVC chain: OT 5 (-> 12 8 10 11) <- Unit 4 (-> 13) <- Unit
3 <- Unit 2 <- IT 1
uvcvideo: Found a valid video chain (1 -> 5).
uvcvideo: UVC device initialized.
uvcvideo: Trying format 0x47504a4d (MJPG): 10000x10000.
uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
uvcvideo: Trying format 0x47504a4d (MJPG): 10000x10000.
uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
uvcvideo: Trying format 0x47504a4d (MJPG): 10000x10000.
uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
uvcvideo: Trying format 0x47504a4d (MJPG): 10000x10000.
uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
uvcvideo: Trying format 0x47504a4d (MJPG): 10000x10000.
uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
uvcvideo: Trying format 0x47504a4d (MJPG): 10000x10000.
uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070210/bd3ff404/attachment.html>

From otroeduardo at gmail.com  Sun Feb 11 15:02:04 2007
From: otroeduardo at gmail.com (Eduardo Suarez)
Date: Sun, 11 Feb 2007 14:02:04 +0000
Subject: [Linux-uvc-devel] Fwd:  /dev/video not found
In-Reply-To: <53360e010702110601p27cd2b00yefcdb2ad0f747601@mail.gmail.com>
References: <53360e010702071653w354242bcle3acb5b594830e57@mail.gmail.com>
	<200702082306.54600.laurent.pinchart@skynet.be>
	<53360e010702110601p27cd2b00yefcdb2ad0f747601@mail.gmail.com>
Message-ID: <53360e010702110602w74bdda43q6866ebee9ac6b846@mail.gmail.com>

On 2/8/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> udev is responsible for creating the device node. Have a look at the
> kernel
> log (dmesg). The driver should print something like
>
> uvcvideo: Found UVC 1.00 device ProScope HR (19ab:1000)
>
> or
>
> uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c2)
>

This is the output of dmesg:

Linux video capture interface: v2.00
usbcore: registered new interface driver uvcvideo
USB Video Class driver (v0.1.0)

Does it means it does not get detected?

Thanks a lot,
-Eduardo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070211/dd4be990/attachment.html>

From laurent.pinchart at skynet.be  Sun Feb 11 18:21:32 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 11 Feb 2007 18:21:32 +0100
Subject: [Linux-uvc-devel] Fwd:  /dev/video not found
In-Reply-To: <53360e010702110602w74bdda43q6866ebee9ac6b846@mail.gmail.com>
References: <53360e010702071653w354242bcle3acb5b594830e57@mail.gmail.com>
	<53360e010702110601p27cd2b00yefcdb2ad0f747601@mail.gmail.com>
	<53360e010702110602w74bdda43q6866ebee9ac6b846@mail.gmail.com>
Message-ID: <200702111821.32752.laurent.pinchart@skynet.be>

Hi Eduardo,

> > udev is responsible for creating the device node. Have a look at the
> > kernel log (dmesg). The driver should print something like
> >
> > uvcvideo: Found UVC 1.00 device ProScope HR (19ab:1000)
> >
> > or
> >
> > uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c2)
>
> This is the output of dmesg:
>
> Linux video capture interface: v2.00
> usbcore: registered new interface driver uvcvideo
> USB Video Class driver (v0.1.0)
>
> Does it means it does not get detected?

It seems so. Try to set the trace parameter to 15 and paste the kernel log.

Best regards,

Laurent Pinchart


From prest at fisica.uniud.it  Sun Feb 11 22:10:39 2007
From: prest at fisica.uniud.it (Prest Alessandro)
Date: Sun, 11 Feb 2007 22:10:39 +0100 (CET)
Subject: [Linux-uvc-devel] UVC Driver problem: unknown cmd
Message-ID: <10612.151.54.125.241.1171228239.squirrel@www1.ud.infn.it>

Hi everybody,
I'm trying to use the uvc driver for a Logitech Quickcam Zoom on a
Playstation 3 which runs Fedora 5 PPC.

Actually I've been able to compile the driver and load it.
I have "/dev/video0" but when I try to read something from the camera, for
example with luvcview, I get an error from luvcview and "dmesg" says:

luvcview: unknown cmd fd(5)

Do you have any advice? Would it help if I copy and paste some other info
from the system log?

Thanks in advance,
bye!



From prest at fisica.uniud.it  Sun Feb 11 22:38:55 2007
From: prest at fisica.uniud.it (Prest Alessandro)
Date: Sun, 11 Feb 2007 22:38:55 +0100 (CET)
Subject: [Linux-uvc-devel] UVC Driver problem on a PPC: unknown cmd
Message-ID: <10779.151.54.125.241.1171229935.squirrel@www1.ud.infn.it>

Hi everybody,
I'm trying to use the uvc driver for a Logitech Quickcam Zoom on a
Playstation 3 which runs Fedora 5 PPC.

Actually I've been able to compile the driver and load it.
I have "/dev/video0" but when I try to read something from the camera, for
example with luvcview, I get an error from luvcview and "dmesg" says:

luvcview: unknown cmd fd(5)

Do you have any advice? Would it help if I copy and paste some other info
from the system log?

Thanks in advance,
bye!




From prest at fisica.uniud.it  Mon Feb 12 00:05:53 2007
From: prest at fisica.uniud.it (Alessandro Prest)
Date: Mon, 12 Feb 2007 00:05:53 +0100
Subject: [Linux-uvc-devel]  Camera working on ARM
Message-ID: <002801c74e31$2e798b70$0601a8c0@alex>


> Incidental I received a PPC G4 Mac mini today. I've got Fedora Core 6
> installed and uvcvideo seems to work as well with my Orbit as it does on
> x86_64.

> I say 'as well' because there are a few errors (attached) - it takes a
> couple of goes to capture an image. Is it possible this is the firmware
> bug that affects certain systems?


I'm trying to make uvc works with a quickcam zoom on a PPC64,
what are you suggestion to make it?
It seems that you've been able to make a snapshot, can you be more precise about the procedure and the parameters?

I'm in big trouble, since I can load the drive but I get strange error message as soon as I try to read from /dev/video0

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070212/0f36fe88/attachment.html>

From linux at rubli.info  Mon Feb 12 07:18:01 2007
From: linux at rubli.info (Martin Rubli)
Date: Sun, 11 Feb 2007 22:18:01 -0800
Subject: [Linux-uvc-devel] UVC Driver problem on a PPC: unknown cmd
In-Reply-To: <10779.151.54.125.241.1171229935.squirrel@www1.ud.infn.it>
References: <10779.151.54.125.241.1171229935.squirrel@www1.ud.infn.it>
Message-ID: <op.tnmg4bog42iof8@nb-mrublixp.am.logitech.com>

The QuickCam Zoom is not a UVC camera and therefore not supported by this  
driver. I think it should work with the PWC driver, however.

Cheers,
Martin


On Sun, 11 Feb 2007 13:38:55 -0800, Prest Alessandro  
<prest at fisica.uniud.it> wrote:

> Hi everybody,
> I'm trying to use the uvc driver for a Logitech Quickcam Zoom on a
> Playstation 3 which runs Fedora 5 PPC.
>
> Actually I've been able to compile the driver and load it.
> I have "/dev/video0" but when I try to read something from the camera,  
> for
> example with luvcview, I get an error from luvcview and "dmesg" says:
>
> luvcview: unknown cmd fd(5)
>
> Do you have any advice? Would it help if I copy and paste some other info
> from the system log?
>
> Thanks in advance,
> bye!
>
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel




From prest at fisica.uniud.it  Mon Feb 12 09:44:46 2007
From: prest at fisica.uniud.it (Prest Alessandro)
Date: Mon, 12 Feb 2007 09:44:46 +0100
Subject: [Linux-uvc-devel]  UVC Driver problem on a PPC: unknown cmd
Message-ID: <45D028FE.8040201@fisica.uniud.it>

I'm sorry, there was a mistake in my original post.
I'm using a Quickcam Fusion.

I've tried also with uvccapture but I get the same message:
"unable to query device" and if I look in dmesg I see "uvccaputer:
unknown cmd fd(5) ..."



From adsluard at tpg.com.au  Mon Feb 12 09:49:12 2007
From: adsluard at tpg.com.au (dbglt)
Date: Mon, 12 Feb 2007 19:49:12 +1100
Subject: [Linux-uvc-devel] Dell m1210 - Inbuilt webcam - device not found
Message-ID: <200702121949.12602.adsluard@tpg.com.au>

Hey all,
I'm trying to get a dell m1210 inbuilt webcam going with the uvcvideo module. 
This webcam definitely works with the uvc driver (everywhere, across multiple 
distros and setups has reported success).

I'm running 2.6.20-6-generic SMP kernel, and ubuntu linux.

I am able to build the module, and modprobe it with no problems. But it fails 
to find the device. I know the webcam works, as I have used it fine under a 
windows dual-boot.

No device /dev/video is created, as the device is not found or initialised. 
Any help would be sorely appreciated!

Following is the output of "dmesg" after "modprobe uvcvideo":

[24666.260000] Linux video capture interface: v2.00
[24666.336000] usbcore: registered new interface driver uvcvideo
[24666.336000] USB Video Class driver (v0.1.0-c)

The relevant output of "lsusb":

Bus 005 Device 002: ID 046d:08c6 Logitech, Inc.



This is REPORTED output from dmesg (from a HOWTO). It is NOT my own output:

[4294680.802000] Linux video capture interface: v1.00 
[4294680.940000] uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c6) 
[4294680.958000] usbcore: registered new driver uvcvideo 
[4294680.958000] USB Video Class driver (v0.1.0) 

Does the device/video capture interface being v1.00 (as opposed to v2.00 for 
me) play any role here? :


And finally, my own verbose output "lsusb -v -s005:002":

Bus 005 Device 002: ID 046d:08c6 Logitech, Inc. 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         1 
  bMaxPacketSize0        64
  idVendor           0x046d Logitech, Inc.
  idProduct          0x08c6 
  bcdDevice           80.05
  iManufacturer           0 
  iProduct                0 
  iSerial                 2 9C26C1BF
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength         1293
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass        255 Vendor Specific Class
      bFunctionSubClass       3 
      bFunctionProtocol       0 
      iFunction               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      1 
      bInterfaceProtocol      0 
      iInterface              0 
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      UNRECOGNIZED:  20 41 01 08 82 06 61 63 70 50 ab 49 b8 cc b3 85 5e 8d 22 
51 03 01 04 03 19 00 00 00 00 00 00 00
      UNRECOGNIZED:  20 41 01 0a 82 06 61 63 70 50 ab 49 b8 cc b3 85 5e 8d 22 
52 01 01 04 03 00 40 00 00 00 00 00 00
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x87  EP 7 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               8
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      2 
      bInterfaceProtocol      0 
      iInterface              0 
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      2 
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x00c0  1x 192 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      2 
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0180  1x 384 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      2 
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      2 
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0280  1x 640 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      2 
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      2 
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x03b0  1x 944 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       7
      bNumEndpoints           1
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      2 
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0a80  2x 640 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       8
      bNumEndpoints           1
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      2 
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0b20  2x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       9
      bNumEndpoints           1
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      2 
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0be0  2x 992 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting      10
      bNumEndpoints           1
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      2 
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x1380  3x 896 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting      11
      bNumEndpoints           1
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      2 
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x13fc  3x 1020 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       2 Streaming
      bFunctionProtocol       0 
      iFunction               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0 
      iInterface              0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           38
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0 
        iTerminal               0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               5
        iTerminal               0 
      AudioControl Interface Descriptor:
        bLength                 8
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 5
        bSourceID               1
        bControlSize            1
        bmaControls( 0)      0x03
          Mute
          Volume
        iFeature                0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       2
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            1 Discrete
        tSamFreq[ 0]        16000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0030  1x 48 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         1 
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)



From laurent.pinchart at skynet.be  Mon Feb 12 10:53:24 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 12 Feb 2007 10:53:24 +0100
Subject: [Linux-uvc-devel] Dell m1210 - Inbuilt webcam - device not found
In-Reply-To: <200702121949.12602.adsluard@tpg.com.au>
References: <200702121949.12602.adsluard@tpg.com.au>
Message-ID: <200702121053.24106.laurent.pinchart@skynet.be>

Hi,

> I'm trying to get a dell m1210 inbuilt webcam going with the uvcvideo
> module. This webcam definitely works with the uvc driver (everywhere,
> across multiple distros and setups has reported success).
>
> I'm running 2.6.20-6-generic SMP kernel, and ubuntu linux.
>
> I am able to build the module, and modprobe it with no problems. But it
> fails to find the device. I know the webcam works, as I have used it fine
> under a windows dual-boot.

Could you set the trace parameter to 15 (modprobe uvcvideo trace=15) and post 
the dmesg output ?

Best regards,

Laurent Pinchart


From contact at alexandredenis.net  Mon Feb 12 11:34:44 2007
From: contact at alexandredenis.net (Alexandre DENIS)
Date: Mon, 12 Feb 2007 11:34:44 +0100
Subject: [Linux-uvc-devel] Kopete support for uvc
In-Reply-To: <JDB067$69EC0289B1ECA5B48DE52838FA6C22B9@laposte.net>
References: <JDB067$69EC0289B1ECA5B48DE52838FA6C22B9@laposte.net>
Message-ID: <200702121134.44899.contact@alexandredenis.net>


Hi,
This bug has been reported on the kopete-devel list too. It's weird 
because I can't reproduce it.

On Sunday 11 February 2007 15:56, Maxime Delorme wrote:
> Thank you so much for your effort but
> I didn't succed in making it work
> (...)
> ./configure --enable-debug
> cd kopete
> make
> su -c "make install"
>
> when I launch kopete, it's ok, then when I go in configuration
> it crashes :
> kopete: kopete:config (avdevice):
> KopeteAVDeviceConfigFactory::instance() called.
> kopete: libkopete (avdevice): self() called
> kopete: libkopete (avdevice): self() exited successfuly.
> m_clients = 0
> kopete: [int Kopete::AV::VideoDevicePool::open()] open(): No
> devices found. Must scan for available devices.7667791
> kopete: [int Kopete::AV::VideoDevicePool::scanDevices()] called
> KCrash: Application 'kopete' crashing...

Can you send me the backtrace and the config.log file? Moreover, you may 
try the new version 
<http://www.alexandredenis.net/software/kopete-uvc/kopete-uvc-patch-20060206.tgz> 
which adds new features (preview as mirror) and fixes some other 
webcam-related bugs.

-a.



From contact at alexandredenis.net  Mon Feb 12 11:36:41 2007
From: contact at alexandredenis.net (Alexandre DENIS)
Date: Mon, 12 Feb 2007 11:36:41 +0100
Subject: [Linux-uvc-devel] Kopete support for uvc
In-Reply-To: <45D03BA5.4080609@laposte.net>
References: <20061230100509.GA14498@delight>
	<200701120041.38298.contact@alexandredenis.net>
	<45D03BA5.4080609@laposte.net>
Message-ID: <200702121136.42156.contact@alexandredenis.net>

On Monday 12 February 2007 11:04, Maxime Delorme wrote:
> Hi after following your instruction my kopete crash. I am  running
> OpenSuse 10.2
> I show you the result of
> /configure --enable-debug > result_configure.txt
> configure: WARNING: linux/tcp.h: present but cannot be compiled
> configure: WARNING: linux/tcp.h:     check for missing prerequisite
> headers? configure: WARNING: linux/tcp.h: see the Autoconf
> documentation configure: WARNING: linux/tcp.h:     section "Present
> But Cannot Be Compiled"
> configure: WARNING: linux/tcp.h: proceeding with the preprocessor's
> result configure: WARNING: linux/tcp.h: in the future, the compiler
> will take precedence
> configure: WARNING: linux/if_ppp.h: present but cannot be compiled
> configure: WARNING: linux/if_ppp.h:     check for missing
> prerequisite headers?
> configure: WARNING: linux/if_ppp.h: see the Autoconf documentation
> configure: WARNING: linux/if_ppp.h:     section "Present But Cannot
> Be Compiled"
> configure: WARNING: linux/if_ppp.h: proceeding with the
> preprocessor's result
> configure: WARNING: linux/if_ppp.h: in the future, the compiler will
> take precedence

There is something wrong with your system. You shouldn't get these 
warnings.

> ./configure: line 43862: xmms-config: command not found
> ./configure: line 43864: xmms-config: command not found
> configure: WARNING: oRTP is required to build Jabber Jingle voice
> support. You can get it from http://www.linphone.org/ortp/
> configure: WARNING: Could not find a libspeex version that have the
> speex_encode_int() function. Please install libspeex=1.0.5 or
> libspeex>=1.1.6 from http://www.speex.org/

This is needed for Jingle support only. Please try to configure 
with --disable-jingle.

-a.




From adsluard at tpg.com.au  Mon Feb 12 11:38:24 2007
From: adsluard at tpg.com.au (dbglt)
Date: Mon, 12 Feb 2007 21:38:24 +1100
Subject: [Linux-uvc-devel] Dell m1210 - Inbuilt webcam - device not found
In-Reply-To: <200702121053.24106.laurent.pinchart@skynet.be>
References: <200702121949.12602.adsluard@tpg.com.au>
	<200702121053.24106.laurent.pinchart@skynet.be>
Message-ID: <200702122138.24669.adsluard@tpg.com.au>

Thanks for the quick response - 

> > I'm trying to get a dell m1210 inbuilt webcam going with the uvcvideo
> > module. This webcam definitely works with the uvc driver (everywhere,
> > across multiple distros and setups has reported success).
> >
> > I'm running 2.6.20-6-generic SMP kernel, and ubuntu linux.
> >
> > I am able to build the module, and modprobe it with no problems. But it
> > fails to find the device. I know the webcam works, as I have used it fine
> > under a windows dual-boot.
>
> Could you set the trace parameter to 15 (modprobe uvcvideo trace=15) and
> post the dmesg output ?

The dmesg output is exactly the same, and as follows:

"sudo modprobe uvcvideo trace=15"

"dmesg":

[  771.188000] Linux video capture interface: v2.00
[  771.192000] usbcore: registered new interface driver uvcvideo
[  771.192000] USB Video Class driver (v0.1.0-c)





From otroeduardo at gmail.com  Mon Feb 12 12:21:45 2007
From: otroeduardo at gmail.com (Eduardo Suarez)
Date: Mon, 12 Feb 2007 11:21:45 +0000
Subject: [Linux-uvc-devel] Fwd: /dev/video not found
In-Reply-To: <200702111821.32752.laurent.pinchart@skynet.be>
References: <53360e010702071653w354242bcle3acb5b594830e57@mail.gmail.com>
	<53360e010702110601p27cd2b00yefcdb2ad0f747601@mail.gmail.com>
	<53360e010702110602w74bdda43q6866ebee9ac6b846@mail.gmail.com>
	<200702111821.32752.laurent.pinchart@skynet.be>
Message-ID: <53360e010702120321g8e177f5m9e96124ba5dd6c04@mail.gmail.com>

On 2/11/07, Laurent Pinchart <laurent.pinchart at skynet.be > wrote:
>
> > Does it means it does not get detected?
>
> It seems so. Try to set the trace parameter to 15 and paste the kernel
> log.
>

I found here how to do that:
http://www.mail-archive.com/linux-uvc-devel at lists.berlios.de/msg00600.html

However, I have a dell xps m1210 with an integrated camera as 'dbglt', and
after setting it to 15 nothing seems to happen.

dogbert ~ # modprobe uvcvideo trace=15

dogbert ~ # tail -f /var/log/messages
...
Feb 12 11:18:58 dogbert Linux video capture interface: v2.00
Feb 12 11:18:58 dogbert usbcore: registered new interface driver uvcvideo
Feb 12 11:18:58 dogbert USB Video Class driver (v0.1.0)

dogbert ~ # tail -f /var/log/dmesg
[nothing new]

dogbert ~ # lsusb
Bus 004 Device 001: ID 0000:0000
Bus 005 Device 002: ID 046d:08c6 Logitech, Inc.
Bus 005 Device 001: ID 0000:0000
Bus 001 Device 001: ID 0000:0000
Bus 003 Device 001: ID 0000:0000
Bus 002 Device 001: ID 0000:0000

dogbert ~ # equery list linux-uvc
[ Searching for package 'linux-uvc' in all categories among: ]
* installed packages
[I--] [ ~] media-video/linux-uvc-0.1.0e (0)

dogbert ~ # uname -sr
Linux 2.6.19-gentoo-r5-edu11a
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070212/fbce606c/attachment.html>

From edgard.lima at indt.org.br  Mon Feb 12 14:26:52 2007
From: edgard.lima at indt.org.br (Edgard Lima)
Date: Mon, 12 Feb 2007 10:26:52 -0300
Subject: [Linux-uvc-devel] make my N800 work as web-cam
Message-ID: <45D06B1C.7050503@indt.org.br>


Hi all, someone could help me please?!?!

Im trying to compile Linux-UVC on scratchbox to use it on my N800:

1- I'm getting the following error on my  N800:

Nokia-N800-01:/home/user# modprobe uvcvideo.ko
modprobe: could not parse modules.dep

2- and the following warnings to compile it:

[sbox-ARMEL: ~/linuxuvc/trunk] > make
Building USB Video Class driver...
make[1]: Entering directory 
`/home/edlima/rx-34-kernel-2.6.18/kernel-source-rx-34'
  CC [M]  /home/edlima/linuxuvc/trunk/uvc_driver.o
  CC [M]  /home/edlima/linuxuvc/trunk/uvc_queue.o
  CC [M]  /home/edlima/linuxuvc/trunk/uvc_v4l2.o
/home/edlima/linuxuvc/trunk/uvc_v4l2.c: In function `uvc_v4l2_open':
/home/edlima/linuxuvc/trunk/uvc_v4l2.c:392: warning: implicit 
declaration of function `video_devdata'
/home/edlima/linuxuvc/trunk/uvc_v4l2.c:392: warning: assignment makes 
pointer from integer without a cast
/home/edlima/linuxuvc/trunk/uvc_v4l2.c: In function `uvc_v4l2_release':
/home/edlima/linuxuvc/trunk/uvc_v4l2.c:420: warning: initialization 
makes pointer from integer without a cast
/home/edlima/linuxuvc/trunk/uvc_v4l2.c: In function `uvc_v4l2_do_ioctl':
/home/edlima/linuxuvc/trunk/uvc_v4l2.c:449: warning: initialization 
makes pointer from integer without a cast
/home/edlima/linuxuvc/trunk/uvc_v4l2.c: In function `uvc_v4l2_mmap':
/home/edlima/linuxuvc/trunk/uvc_v4l2.c:889: warning: initialization 
makes pointer from integer without a cast
/home/edlima/linuxuvc/trunk/uvc_v4l2.c: In function `uvc_v4l2_poll':
/home/edlima/linuxuvc/trunk/uvc_v4l2.c:944: warning: initialization 
makes pointer from integer without a cast
  CC [M]  /home/edlima/linuxuvc/trunk/uvc_video.o
/home/edlima/linuxuvc/trunk/uvc_video.c: In function `uvc_video_enable':
/home/edlima/linuxuvc/trunk/uvc_video.c:713: warning: 'ep' might be used 
uninitialized in this function
  CC [M]  /home/edlima/linuxuvc/trunk/uvc_ctrl.o
  LD [M]  /home/edlima/linuxuvc/trunk/uvcvideo.o
  Building modules, stage 2.
  MODPOST
WARNING: "usb_buffer_alloc" [/home/edlima/linuxuvc/trunk/uvcvideo.ko] 
undefined!
WARNING: "usb_buffer_free" [/home/edlima/linuxuvc/trunk/uvcvideo.ko] 
undefined!
WARNING: "usb_kill_urb" [/home/edlima/linuxuvc/trunk/uvcvideo.ko] undefined!
WARNING: "usb_string" [/home/edlima/linuxuvc/trunk/uvcvideo.ko] undefined!
WARNING: "usb_deregister" [/home/edlima/linuxuvc/trunk/uvcvideo.ko] 
undefined!
WARNING: "usb_set_interface" [/home/edlima/linuxuvc/trunk/uvcvideo.ko] 
undefined!
WARNING: "usb_control_msg" [/home/edlima/linuxuvc/trunk/uvcvideo.ko] 
undefined!
WARNING: "usb_driver_claim_interface" 
[/home/edlima/linuxuvc/trunk/uvcvideo.ko] undefined!
WARNING: "usb_submit_urb" [/home/edlima/linuxuvc/trunk/uvcvideo.ko] 
undefined!
WARNING: "usb_get_dev" [/home/edlima/linuxuvc/trunk/uvcvideo.ko] undefined!
WARNING: "usb_put_dev" [/home/edlima/linuxuvc/trunk/uvcvideo.ko] undefined!
WARNING: "usb_get_intf" [/home/edlima/linuxuvc/trunk/uvcvideo.ko] undefined!
WARNING: "usb_register_driver" [/home/edlima/linuxuvc/trunk/uvcvideo.ko] 
undefined!
WARNING: "usb_ifnum_to_if" [/home/edlima/linuxuvc/trunk/uvcvideo.ko] 
undefined!
WARNING: "usb_free_urb" [/home/edlima/linuxuvc/trunk/uvcvideo.ko] undefined!
WARNING: "usb_alloc_urb" [/home/edlima/linuxuvc/trunk/uvcvideo.ko] 
undefined!
WARNING: "usb_put_intf" [/home/edlima/linuxuvc/trunk/uvcvideo.ko] undefined!
  CC      /home/edlima/linuxuvc/trunk/uvcvideo.mod.o
  LD [M]  /home/edlima/linuxuvc/trunk/uvcvideo.ko
make[1]: Leaving directory 
`/home/edlima/rx-34-kernel-2.6.18/kernel-source-rx-34'


Thanks In Advance,
Edgard



From laurent.pinchart at skynet.be  Mon Feb 12 15:00:29 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 12 Feb 2007 15:00:29 +0100
Subject: [Linux-uvc-devel] Fwd: /dev/video not found
In-Reply-To: <53360e010702120321g8e177f5m9e96124ba5dd6c04@mail.gmail.com>
References: <53360e010702071653w354242bcle3acb5b594830e57@mail.gmail.com>
	<200702111821.32752.laurent.pinchart@skynet.be>
	<53360e010702120321g8e177f5m9e96124ba5dd6c04@mail.gmail.com>
Message-ID: <200702121500.29578.laurent.pinchart@skynet.be>

> > > Does it means it does not get detected?
> >
> > It seems so. Try to set the trace parameter to 15 and paste the kernel
> > log.
>
> I found here how to do that:
> http://www.mail-archive.com/linux-uvc-devel at lists.berlios.de/msg00600.html
>
> However, I have a dell xps m1210 with an integrated camera as 'dbglt', and
> after setting it to 15 nothing seems to happen.
>
> dogbert ~ # modprobe uvcvideo trace=15
>
> dogbert ~ # tail -f /var/log/messages
> ...
> Feb 12 11:18:58 dogbert Linux video capture interface: v2.00
> Feb 12 11:18:58 dogbert usbcore: registered new interface driver uvcvideo
> Feb 12 11:18:58 dogbert USB Video Class driver (v0.1.0)
>
> dogbert ~ # tail -f /var/log/dmesg
> [nothing new]

Don't look in /var/log/messages or /var/log/dmesg. Use the dmesg command 
directly.

- Clear the kernel log with dmesg -c
- Insert the module with modprobe uvcvideo trace=15
- Check the kernel log with dmesg to see if anything is wrong
- Plug in the webcam
- Check the kernel log again

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Feb 12 15:03:17 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 12 Feb 2007 15:03:17 +0100
Subject: [Linux-uvc-devel] Dell m1210 - Inbuilt webcam - device not found
In-Reply-To: <200702122138.24669.adsluard@tpg.com.au>
References: <200702121949.12602.adsluard@tpg.com.au>
	<200702121053.24106.laurent.pinchart@skynet.be>
	<200702122138.24669.adsluard@tpg.com.au>
Message-ID: <200702121503.17842.laurent.pinchart@skynet.be>

> Thanks for the quick response -

You're welcome.

> > > I'm trying to get a dell m1210 inbuilt webcam going with the uvcvideo
> > > module. This webcam definitely works with the uvc driver (everywhere,
> > > across multiple distros and setups has reported success).
> > >
> > > I'm running 2.6.20-6-generic SMP kernel, and ubuntu linux.
> > >
> > > I am able to build the module, and modprobe it with no problems. But it
> > > fails to find the device. I know the webcam works, as I have used it
> > > fine under a windows dual-boot.
> >
> > Could you set the trace parameter to 15 (modprobe uvcvideo trace=15) and
> > post the dmesg output ?
>
> The dmesg output is exactly the same, and as follows:
>
> "sudo modprobe uvcvideo trace=15"
>
> "dmesg":
>
> [  771.188000] Linux video capture interface: v2.00
> [  771.192000] usbcore: registered new interface driver uvcvideo
> [  771.192000] USB Video Class driver (v0.1.0-c)

Did you plug the webcam after loading the driver ? Please perform the 
following steps:

1. Clear the kernel log with dmesg -c
2. Insert the module with modprobe uvcvideo trace=15
3. Check the kernel log with dmesg to see if anything is wrong
4. Plug in the webcam
5. Check the kernel log again

Paste the whole dmesg output after 3. and 5.

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Feb 12 15:08:50 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 12 Feb 2007 15:08:50 +0100
Subject: [Linux-uvc-devel] make my N800 work as web-cam
In-Reply-To: <45D06B1C.7050503@indt.org.br>
References: <45D06B1C.7050503@indt.org.br>
Message-ID: <200702121508.50243.laurent.pinchart@skynet.be>

Hi Edgard,

> Hi all, someone could help me please?!?!
>
> Im trying to compile Linux-UVC on scratchbox to use it on my N800:
>
> 1- I'm getting the following error on my  N800:
>
> Nokia-N800-01:/home/user# modprobe uvcvideo.ko
> modprobe: could not parse modules.dep
>
> 2- and the following warnings to compile it:
>
> [sbox-ARMEL: ~/linuxuvc/trunk] > make
> Building USB Video Class driver...
> make[1]: Entering directory
> `/home/edlima/rx-34-kernel-2.6.18/kernel-source-rx-34'
>   CC [M]  /home/edlima/linuxuvc/trunk/uvc_driver.o
>   CC [M]  /home/edlima/linuxuvc/trunk/uvc_queue.o
>   CC [M]  /home/edlima/linuxuvc/trunk/uvc_v4l2.o
> /home/edlima/linuxuvc/trunk/uvc_v4l2.c: In function `uvc_v4l2_open':
> /home/edlima/linuxuvc/trunk/uvc_v4l2.c:392: warning: implicit
> declaration of function `video_devdata'
[more errors]

I suspect your kernel to be heavily patched. There's something wrong with the 
V4L2 support. How can I have a look at the sources ?

Laurent Pinchart


From james at studdart.com  Mon Feb 12 16:00:05 2007
From: james at studdart.com (James Studdart)
Date: Mon, 12 Feb 2007 10:00:05 -0500
Subject: [Linux-uvc-devel] make my N800 work as web-cam
In-Reply-To: <200702121508.50243.laurent.pinchart@skynet.be>
References: <45D06B1C.7050503@indt.org.br>
	<200702121508.50243.laurent.pinchart@skynet.be>
Message-ID: <45D080F5.3060604@studdart.com>


>>Im trying to compile Linux-UVC on scratchbox to use it on my N800:
>>    
>>
Urm... why exactly do you need to do this? The camera already works with 
the provided kernel and drivers. I think it's even a v4l2 device.

j.



From tdphette at gmail.com  Mon Feb 12 16:34:22 2007
From: tdphette at gmail.com (Thad Phetteplace)
Date: Mon, 12 Feb 2007 09:34:22 -0600
Subject: [Linux-uvc-devel] Still Image Capture
Message-ID: <e9390bb90702120734g274bc15ey25eeccb7502a6613@mail.gmail.com>

Hello All,

I Just joined this list with the intention of working on still image
capture in linux-uvc.  I'm working with a quickcam for notebooks
pro, and I see someone was working on similar a few months
back.  Any word on how that went?

Also, considering the v4l2 API does not really have an interface
for single image still frame capture, I'm wondering if anyone
has any thoughts on how best to handle that.  My application
requires capturing a single frame at a very specific time (not
a regular interval).  I am totally fine with bypassing the v4l
layer and interfacing with the driver directly if need be, but I
would like to do something with general utility to the most
users, not just a hack that only I can use.

Perhaps I should join the v4l dev mailing list and see what their
thoughts are.  Your input is appreciated.

Thanks,

Thad Phetteplace
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070212/cad4f354/attachment.html>

From otroeduardo at gmail.com  Mon Feb 12 16:45:39 2007
From: otroeduardo at gmail.com (Eduardo Suarez)
Date: Mon, 12 Feb 2007 15:45:39 +0000
Subject: [Linux-uvc-devel] Fwd: /dev/video not found
In-Reply-To: <200702121500.29578.laurent.pinchart@skynet.be>
References: <53360e010702071653w354242bcle3acb5b594830e57@mail.gmail.com>
	<200702111821.32752.laurent.pinchart@skynet.be>
	<53360e010702120321g8e177f5m9e96124ba5dd6c04@mail.gmail.com>
	<200702121500.29578.laurent.pinchart@skynet.be>
Message-ID: <53360e010702120745s140bc79cjed32aaff89851f13@mail.gmail.com>

On 2/12/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> Don't look in /var/log/messages or /var/log/dmesg. Use the dmesg command
> directly.
>
> 1- Clear the kernel log with dmesg -c
> 2- Insert the module with modprobe uvcvideo trace=15
> 3- Check the kernel log with dmesg to see if anything is wrong
> 4- Plug in the webcam
> 5- Check the kernel log again
>
> Laurent Pinchart



Doing 3 after 1 and 2, i get the same that i got before with /var/log/dmesg.
How do I plug in an integrated camera? Does it make
sense? Perhaps that is the problem. The driver is thougth to be loaded
"before" the camera is plugged in, but that cannot be done in an
obvious way.

Regards and thanks for all your comments,
-Eduardo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070212/bde90ba4/attachment.html>

From laurent.pinchart at skynet.be  Mon Feb 12 21:10:09 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 12 Feb 2007 21:10:09 +0100
Subject: [Linux-uvc-devel] UVC Driver problem on a PPC: unknown cmd
In-Reply-To: <45D028FE.8040201@fisica.uniud.it>
References: <45D028FE.8040201@fisica.uniud.it>
Message-ID: <200702122110.09955.laurent.pinchart@skynet.be>

Hi Alessandro,

> I'm sorry, there was a mistake in my original post.
> I'm using a Quickcam Fusion.
>
> I've tried also with uvccapture but I get the same message:
> "unable to query device" and if I look in dmesg I see "uvccaputer:
> unknown cmd fd(5) ..."

This seems to be playstation-specific. Could you get me a PS3 to investigate 
the problem ? :-)

Seriously, the message is not printed by the Linux UVC driver. I quick search 
for the error message in the Linux kernel sources didn't return an meaningful 
result. I suspect your kernel is heavily patched, so you might need a Linux 
PPC/PS3 developer to look into the issue.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Feb 12 21:15:16 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 12 Feb 2007 21:15:16 +0100
Subject: [Linux-uvc-devel] Fwd: /dev/video not found
In-Reply-To: <53360e010702120745s140bc79cjed32aaff89851f13@mail.gmail.com>
References: <53360e010702071653w354242bcle3acb5b594830e57@mail.gmail.com>
	<200702121500.29578.laurent.pinchart@skynet.be>
	<53360e010702120745s140bc79cjed32aaff89851f13@mail.gmail.com>
Message-ID: <200702122115.16830.laurent.pinchart@skynet.be>

> > Don't look in /var/log/messages or /var/log/dmesg. Use the dmesg command
> > directly.
> >
> > 1- Clear the kernel log with dmesg -c
> > 2- Insert the module with modprobe uvcvideo trace=15
> > 3- Check the kernel log with dmesg to see if anything is wrong
> > 4- Plug in the webcam
> > 5- Check the kernel log again
> >
> > Laurent Pinchart
>
> Doing 3 after 1 and 2, i get the same that i got before with
> /var/log/dmesg. How do I plug in an integrated camera?

Hmmm... that might be a bit difficult, right :-)

> Does it make sense? Perhaps that is the problem. The driver is thougth to be
> loaded "before" the camera is plugged in, but that cannot be done in an
> obvious way.

The driver can be loaded before or after plugging the camera, it just 
shouldn't matter. You're having another issue here.

Could you try with the driver from linux-uvc.berlios.de instead of the Gentoo 
package ?

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Feb 12 21:20:31 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 12 Feb 2007 21:20:31 +0100
Subject: [Linux-uvc-devel] Still Image Capture
In-Reply-To: <e9390bb90702120734g274bc15ey25eeccb7502a6613@mail.gmail.com>
References: <e9390bb90702120734g274bc15ey25eeccb7502a6613@mail.gmail.com>
Message-ID: <200702122120.31449.laurent.pinchart@skynet.be>

Hi Thad,

> I Just joined this list with the intention of working on still image
> capture in linux-uvc.  I'm working with a quickcam for notebooks
> pro, and I see someone was working on similar a few months
> back.  Any word on how that went?
>
> Also, considering the v4l2 API does not really have an interface
> for single image still frame capture, I'm wondering if anyone
> has any thoughts on how best to handle that.  My application
> requires capturing a single frame at a very specific time (not
> a regular interval).  I am totally fine with bypassing the v4l
> layer and interfacing with the driver directly if need be, but I
> would like to do something with general utility to the most
> users, not just a hack that only I can use.

V4L2 can start and stop video streaming at any time. All you have to do is 
initialise the device (allocate buffers, set the video format, ...), and 
start streaming when you need an image. You can stop streaming right after 
getting the data, and start again later when required by your application.

> Perhaps I should join the v4l dev mailing list and see what their
> thoughts are.  Your input is appreciated.

Best regards,

Laurent Pinchart


From edgard.lima at indt.org.br  Mon Feb 12 22:19:17 2007
From: edgard.lima at indt.org.br (Edgard Lima)
Date: Mon, 12 Feb 2007 18:19:17 -0300
Subject: [Linux-uvc-devel] make my N800 work as web-cam
In-Reply-To: <45D080F5.3060604@studdart.com>
References: <45D06B1C.7050503@indt.org.br>	<200702121508.50243.laurent.pinchart@skynet.be>
	<45D080F5.3060604@studdart.com>
Message-ID: <45D0D9D5.7000201@indt.org.br>


Urm...yes, you are right...I have misunderstood the linux-uvc project

Indeed....What I would like to do is to make my N800 work as WebCam, I 
mean, plug the N800 usb cable to my desktop and then my desktop think it 
is a Video Class device.

No problem I will write my own code to do it ;-) thanks anyway

btw: where in the code (usb stack) my device reports to be a mass 
storage device.....I would like to make it report as a video class usb 
device and them map the function to the v4l2 driver, this way it could 
be used by any linux device implementing v4l2 driver and usb in 
peripheral mode (non-host)...what do you think about it....I think I 
will start a project in sourceforge

Thanks you all, Best Regards
Edgard


ext James Studdart escreveu:
>>> Im trying to compile Linux-UVC on scratchbox to use it on my N800:
>>>    
>>>
>>>       
> Urm... why exactly do you need to do this? The camera already works with 
> the provided kernel and drivers. I think it's even a v4l2 device.
>
> j.
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>   



From edgard.lima at indt.org.br  Mon Feb 12 22:23:38 2007
From: edgard.lima at indt.org.br (Edgard Lima)
Date: Mon, 12 Feb 2007 18:23:38 -0300
Subject: [Linux-uvc-devel] make my N800 work as web-cam
In-Reply-To: <200702121508.50243.laurent.pinchart@skynet.be>
References: <45D06B1C.7050503@indt.org.br>
	<200702121508.50243.laurent.pinchart@skynet.be>
Message-ID: <45D0DADA.5010805@indt.org.br>



I have fixed the warning modifyng the kernel config file to suport usbcore.

config file
kernel-source-rx-34-2.6.18/arch/arm/configs/n800_defconfig

Please read my last mail, anyway follows bellow where is the source code:


[sbox-SDK_ARMEL: ~] > cat /etc/apt/sources.list
deb http://repository.maemo.org/ bora free non-free extras
deb-src http://repository.maemo.org/ bora free non-free extras

[sbox-SDK_ARMEL: ~/kernel_src] > apt-get source kernel-source-rx-34
Reading Package Lists... Done
Building Dependency Tree... Done
Need to get 53.6MB of source archives.
Get:1 http://repository.maemo.org bora/free kernel-source-rx-34 
2.6.18-osso29 (dsc) [451B]
Get:2 http://repository.maemo.org bora/free kernel-source-rx-34 
2.6.18-osso29 (tar) [53.6MB]
Get:3 http://repository.maemo.org bora/free kernel-source-rx-34 
2.6.18-osso29 (diff) [62.8kB]
Fetched 53.6MB in 2m54s (307kB/s)
dpkg-source: warning: extracting unsigned source package 
(./kernel-source-rx-34_2.6.18-osso29.dsc)
dpkg-source: extracting kernel-source-rx-34 in kernel-source-rx-34-2.6.18
dpkg-source: unpacking kernel-source-rx-34_2.6.18.orig.tar.gz
dpkg-source: applying ./kernel-source-rx-34_2.6.18-osso29.diff.gz


-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: n800_defconfig
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070212/87d7fc80/attachment.ksh>

From laurent.pinchart at skynet.be  Mon Feb 12 22:52:46 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 12 Feb 2007 22:52:46 +0100
Subject: [Linux-uvc-devel] Dell m1210 - Inbuilt webcam - device not found
In-Reply-To: <200702122138.24669.adsluard@tpg.com.au>
References: <200702121949.12602.adsluard@tpg.com.au>
	<200702121053.24106.laurent.pinchart@skynet.be>
	<200702122138.24669.adsluard@tpg.com.au>
Message-ID: <200702122252.46463.laurent.pinchart@skynet.be>

> > > I'm trying to get a dell m1210 inbuilt webcam going with the uvcvideo
> > > module. This webcam definitely works with the uvc driver (everywhere,
> > > across multiple distros and setups has reported success).
> > >
> > > I'm running 2.6.20-6-generic SMP kernel, and ubuntu linux.
> > >
> > > I am able to build the module, and modprobe it with no problems. But it
> > > fails to find the device. I know the webcam works, as I have used it
> > > fine under a windows dual-boot.
> >
> > Could you set the trace parameter to 15 (modprobe uvcvideo trace=15) and
> > post the dmesg output ?
>
> The dmesg output is exactly the same, and as follows:
>
> "sudo modprobe uvcvideo trace=15"
>
> "dmesg":
>
> [  771.188000] Linux video capture interface: v2.00
> [  771.192000] usbcore: registered new interface driver uvcvideo
> [  771.192000] USB Video Class driver (v0.1.0-c)

modprobe doesn't report any error if the driver is already loaded. Try to 
unload the driver (rmmod uvcvideo), clear the kernel log (dmesg -c) and load 
the driver again (modprobe uvcvideo trace=15). Please post the kernel log 
(dmesg) after doing so.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Feb 12 22:54:58 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 12 Feb 2007 22:54:58 +0100
Subject: [Linux-uvc-devel] Fwd: /dev/video not found
In-Reply-To: <200702122115.16830.laurent.pinchart@skynet.be>
References: <53360e010702071653w354242bcle3acb5b594830e57@mail.gmail.com>
	<53360e010702120745s140bc79cjed32aaff89851f13@mail.gmail.com>
	<200702122115.16830.laurent.pinchart@skynet.be>
Message-ID: <200702122254.58279.laurent.pinchart@skynet.be>

> > > Don't look in /var/log/messages or /var/log/dmesg. Use the dmesg
> > > command directly.
> > >
> > > 1- Clear the kernel log with dmesg -c
> > > 2- Insert the module with modprobe uvcvideo trace=15
> > > 3- Check the kernel log with dmesg to see if anything is wrong
> > > 4- Plug in the webcam
> > > 5- Check the kernel log again
> > >
> > > Laurent Pinchart
> >
> > Doing 3 after 1 and 2, i get the same that i got before with
> > /var/log/dmesg. How do I plug in an integrated camera?
>
> Hmmm... that might be a bit difficult, right :-)
>
> > Does it make sense? Perhaps that is the problem. The driver is thougth to
> > be loaded "before" the camera is plugged in, but that cannot be done in
> > an obvious way.
>
> The driver can be loaded before or after plugging the camera, it just
> shouldn't matter. You're having another issue here.
>
> Could you try with the driver from linux-uvc.berlios.de instead of the
> Gentoo package ?

Please first try to remove the driver before loading it with trace=15. If the 
driver is already loaded, modprobe will exit silently without raising the 
trace level.

rmmod uvcvideo
dmesg -c
modprobe uvcvideo trace=15

Post the kernel log (dmesg) after the last command.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Feb 12 23:14:45 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 12 Feb 2007 23:14:45 +0100
Subject: [Linux-uvc-devel] uvcvideo openSUSE package available
In-Reply-To: <200702082339.34759.wstephenson@suse.de>
References: <200702082339.34759.wstephenson@suse.de>
Message-ID: <200702122314.46119.laurent.pinchart@skynet.be>

Hi Will,

> I've packaged r87 of uvcvideo for openSUSE - it seems to work pretty well.

Thanks. We now have packages for most major distributions (I'd say all if I 
wasn't scared of being flamed for forgetting one of them :-)).

> I had to tweak the Makefile so that it detects when it is being called by
> kbuild and when it isn't, please see attached.  It would be nice if you
> could commit this :).

Could you explain why this is needed ? The Makefile is supposed to be called 
twice, the first time directly from the command line. This triggers the 
kernel build process, which calls the Makefile back from kbuild. This seems 
to work fine, why does it fail with openSuse ?

> The 10.2 repository is here, go up for other versions:
> http://software.opensuse.org/download/drivers:/webcam/openSUSE_10.2/

Best regards,

Laurent Pinchart


From adsluard at tpg.com.au  Tue Feb 13 03:03:37 2007
From: adsluard at tpg.com.au (dbglt)
Date: Tue, 13 Feb 2007 13:03:37 +1100
Subject: [Linux-uvc-devel] Dell m1210 - Inbuilt webcam - device not found
In-Reply-To: <200702121503.17842.laurent.pinchart@skynet.be>
References: <200702121949.12602.adsluard@tpg.com.au>
	<200702122138.24669.adsluard@tpg.com.au>
	<200702121503.17842.laurent.pinchart@skynet.be>
Message-ID: <200702131303.37977.adsluard@tpg.com.au>

The module is NOT loaded ("lsmod | grep uvc" returns nothing), after a fresh 
reboot. Following steps outlined:

> 1. Clear the kernel log with dmesg -c

Done.

> 2. Insert the module with modprobe uvcvideo trace=15

Done.

> 3. Check the kernel log with dmesg to see if anything is wrong

Entirety of dmesg output is now:

[  595.376000] Linux video capture interface: v2.00
[  595.384000] usbcore: registered new interface driver uvcvideo
[  595.384000] USB Video Class driver (v0.1.0-c)

> 4. Plug in the webcam

The webcam is *BUILT IN* to the laptop. It shows up on lsusb as a usb device. 
I cannot plug in/remove it, as it is a part of the laptop (not 
detatchable/removeable).

> 5. Check the kernel log again

No change. Dmesg output is those three lines only, and nothing more.



From desso at ono.com  Tue Feb 13 04:35:21 2007
From: desso at ono.com (desso at ono.com)
Date: Tue, 13 Feb 2007 04:35:21 +0100 (CET)
Subject: [Linux-uvc-devel] cannot install linux-uvc on Fedora Core 6
Message-ID: <21870214.1362361171337721807.JavaMail.defaultUser@defaultHost>

mmm..seems easy to fix..it's just that I don't know how ...


[root at desso trunk]# make
Building USB Video Class driver...
make[1]: Entering directory `/usr/src/kernels/2.6.19-1.2895.fc6-i686'
CC [M] /home/desso/trunk/uvc_driver.o
CC [M] /home/desso/trunk/uvc_queue.o
CC [M] /home/desso/trunk/uvc_v4l2.o
CC [M] /home/desso/trunk/uvc_video.o
CC [M] /home/desso/trunk/uvc_ctrl.o
LD [M] /home/desso/trunk/uvcvideo.o
Building modules, stage 2.
MODPOST 1 modules
CC /home/desso/trunk/uvcvideo.mod.o
LD [M] /home/desso/trunk/uvcvideo.ko
make[1]: Leaving directory `/usr/src/kernels/2.6.19-1.2895.fc6-i686'
[root at desso trunk]# ls
Makefile uvc_compat.h uvc_ctrl.o uvc_driver.o uvc_queue.o uvc_v4l2.o uvcvideo.h uvcvideo.mod.c uvc_video.o
Module.symvers uvc_ctrl.c uvc_driver.c uvc_queue.c uvc_v4l2.c uvc_video.c uvcvideo.ko uvcvideo.mod.o uvcvideo.o
[root at desso trunk]# make install
Installing USB Video Class driver...
make[1]: Entering directory `/usr/src/kernels/2.6.19-1.2895.fc6-i686'
INSTALL /home/desso/trunk/uvcvideo.ko
DEPMOD 2.6.19-1.2895.fc6
make[1]: Leaving directory `/usr/src/kernels/2.6.19-1.2895.fc6-i686'
depmod -ae
make: depmod: Command not found
make: *** [install] Error 127
[root at desso trunk]#



...I already have linux-uvc installed from an .rpm of revision 79 ..but I just love using svn :( . Anyway thanks for all your great work guys... didn't own a webcam until learning about your driver.Thank you all!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070213/29095d80/attachment.html>

From panemade at gmail.com  Tue Feb 13 07:43:29 2007
From: panemade at gmail.com (=?UTF-8?Q?Parag_N(=E0=A4=AA=E0=A4=B0=E0=A4=BE=E0=A5=9A)?=)
Date: Tue, 13 Feb 2007 12:13:29 +0530
Subject: [Linux-uvc-devel] cannot install linux-uvc on Fedora Core 6
In-Reply-To: <21870214.1362361171337721807.JavaMail.defaultUser@defaultHost>
References: <21870214.1362361171337721807.JavaMail.defaultUser@defaultHost>
Message-ID: <f4586a2e0702122243u819fd2ai1de739685b1b59f3@mail.gmail.com>

Hi,
 On 2/13/07, desso at ono.com <desso at ono.com> wrote:
> mmm..seems easy to fix..it's just that I don't know how ...
>
>
> [root at desso trunk]# make
> Building USB Video Class driver...
> make[1]: Entering directory `/usr/src/kernels/2.6.19-1.2895.fc6-i686'
> CC [M] /home/desso/trunk/uvc_driver.o
> CC [M] /home/desso/trunk/uvc_queue.o
> CC [M] /home/desso/trunk/uvc_v4l2.o
> CC [M] /home/desso/trunk/uvc_video.o
> CC [M] /home/desso/trunk/uvc_ctrl.o
> LD [M] /home/desso/trunk/uvcvideo.o
> Building modules, stage 2.
> MODPOST 1 modules
> CC /home/desso/trunk/uvcvideo.mod.o
> LD [M] /home/desso/trunk/uvcvideo.ko
> make[1]: Leaving directory `/usr/src/kernels/2.6.19-1.2895.fc6-i686'
> [root at desso trunk]# ls
> Makefile uvc_compat.h uvc_ctrl.o uvc_driver.o uvc_queue.o uvc_v4l2.o
> uvcvideo.h uvcvideo.mod.c uvc_video.o
> Module.symvers uvc_ctrl.c uvc_driver.c uvc_queue.c uvc_v4l2.c uvc_video.c
> uvcvideo.ko uvcvideo.mod.o uvcvideo.o
> [root at desso trunk]# make install
> Installing USB Video Class driver...
> make[1]: Entering directory `/usr/src/kernels/2.6.19-1.2895.fc6-i686'
> INSTALL /home/desso/trunk/uvcvideo.ko
> DEPMOD 2.6.19-1.2895.fc6
> make[1]: Leaving directory `/usr/src/kernels/2.6.19-1.2895.fc6-i686'
> depmod -ae
> make: depmod: Command not found
> make: *** [install] Error 127
> [root at desso trunk]#
>
>
>
> ...I already have linux-uvc installed from an .rpm of revision 79 ..but I
> just love using svn :( . Anyway thanks for all your great work guys...
> didn't own a webcam until learning about your driver.Thank you all!

  I found no problem in installing svn verison on FC6. Here what i did
[root at host ~]# rpm -qa | grep kernel
kernel-headers-2.6.19-1.2895.fc6
kernel-devel-2.6.19-1.2895.fc6
kernel-2.6.19-1.2895.fc6
[root at host ~]# svn checkout svn://svn.berlios.de/linux-uvc/linux-uvc/trunk
A    trunk/uvc_ctrl.c
A    trunk/uvc_queue.c
A    trunk/uvc_video.c
A    trunk/uvc_v4l2.c
A    trunk/uvc_compat.h
A    trunk/uvc_driver.c
A    trunk/uvcvideo.h
A    trunk/Makefile
Checked out revision 88.
[root at host ~]# cd trunk/
[root at host trunk]# ls
Makefile  uvc_compat.h  uvc_ctrl.c  uvc_driver.c  uvc_queue.c
uvc_v4l2.c  uvc_video.c  uvcvideo.h
[root at host trunk]# make
Building USB Video Class driver...
make[1]: Entering directory `/usr/src/kernels/2.6.18-1.2849.fc6-i686'
  CC [M]  /root/trunk/uvc_driver.o
  CC [M]  /root/trunk/uvc_queue.o
  CC [M]  /root/trunk/uvc_v4l2.o
  CC [M]  /root/trunk/uvc_video.o
  CC [M]  /root/trunk/uvc_ctrl.o
  LD [M]  /root/trunk/uvcvideo.o
  Building modules, stage 2.
  MODPOST
  CC      /root/trunk/uvcvideo.mod.o
  LD [M]  /root/trunk/uvcvideo.ko
make[1]: Leaving directory `/usr/src/kernels/2.6.18-1.2849.fc6-i686'
[root at host trunk]# make install
Installing USB Video Class driver...
make[1]: Entering directory `/usr/src/kernels/2.6.18-1.2849.fc6-i686'
  INSTALL /root/trunk/uvcvideo.ko
  DEPMOD  2.6.18-1.2849.fc6
make[1]: Leaving directory `/usr/src/kernels/2.6.18-1.2849.fc6-i686'
depmod -ae


Are you sure you have following rpm installed?
module-init-tools-3.3-0.pre1.4.17

Regards,
Parag.


From panemade at gmail.com  Tue Feb 13 07:48:15 2007
From: panemade at gmail.com (=?UTF-8?Q?Parag_N(=E0=A4=AA=E0=A4=B0=E0=A4=BE=E0=A5=9A)?=)
Date: Tue, 13 Feb 2007 12:18:15 +0530
Subject: [Linux-uvc-devel] cannot install linux-uvc on Fedora Core 6
In-Reply-To: <f4586a2e0702122243u819fd2ai1de739685b1b59f3@mail.gmail.com>
References: <21870214.1362361171337721807.JavaMail.defaultUser@defaultHost>
	<f4586a2e0702122243u819fd2ai1de739685b1b59f3@mail.gmail.com>
Message-ID: <f4586a2e0702122248x15f935cbjc7e594801e9b713e@mail.gmail.com>

Hi,
  Oops I just updated my kernel and forgot that my current kernel is
still 2.6.18. Ok no problem here comes output for 2.6.19 kernel where
i manually edited Makefile to build against 2.6.19 kernel

[root at host trunk]# vi Makefile
[root at host trunk]# make
Building USB Video Class driver...
make[1]: Entering directory `/usr/src/kernels/2.6.19-1.2895.fc6-i686'
  CC [M]  /root/trunk/uvc_driver.o
  CC [M]  /root/trunk/uvc_queue.o
  CC [M]  /root/trunk/uvc_v4l2.o
  CC [M]  /root/trunk/uvc_video.o
  CC [M]  /root/trunk/uvc_ctrl.o
  LD [M]  /root/trunk/uvcvideo.o
  Building modules, stage 2.
  MODPOST 1 modules
  CC      /root/trunk/uvcvideo.mod.o
  LD [M]  /root/trunk/uvcvideo.ko
make[1]: Leaving directory `/usr/src/kernels/2.6.19-1.2895.fc6-i686'
[root at host trunk]# make install
Installing USB Video Class driver...
make[1]: Entering directory `/usr/src/kernels/2.6.19-1.2895.fc6-i686'
  INSTALL /root/trunk/uvcvideo.ko
  DEPMOD  2.6.19-1.2895.fc6
make[1]: Leaving directory `/usr/src/kernels/2.6.19-1.2895.fc6-i686'
depmod -ae


Regards,
Parag.


From ondrej at sury.org  Tue Feb 13 08:25:09 2007
From: ondrej at sury.org (=?UTF-8?Q?Ond=C5=99ej_Sur=C3=BD?=)
Date: Tue, 13 Feb 2007 08:25:09 +0100
Subject: [Linux-uvc-devel] Dell m1210 - Inbuilt webcam - device not	found
In-Reply-To: <200702131303.37977.adsluard@tpg.com.au>
References: <200702121949.12602.adsluard@tpg.com.au>
	<200702122138.24669.adsluard@tpg.com.au>
	<200702121503.17842.laurent.pinchart@skynet.be>
	<200702131303.37977.adsluard@tpg.com.au>
Message-ID: <1171351509.6503.0.camel@yuna>

On ?t, 2007-02-13 at 13:03 +1100, dbglt wrote:
> The module is NOT loaded ("lsmod | grep uvc" returns nothing), after a fresh 
> reboot. Following steps outlined:
> 
> > 1. Clear the kernel log with dmesg -c
> 
> Done.
> 
> > 2. Insert the module with modprobe uvcvideo trace=15
> 
> Done.

Do
modprobe -r uvcvideo
modprobe uvcvideo trace=15

To remove module from running kernel and insert it there again.

Ondrej.
-- 
Ond?ej Sur? <ondrej at sury.org>  ***  http://blog.rfc1925.org/
Kulturn? ob?asn?k              ***  http://www.obcasnik.cz/




From adsluard at tpg.com.au  Tue Feb 13 08:43:21 2007
From: adsluard at tpg.com.au (dbglt)
Date: Tue, 13 Feb 2007 18:43:21 +1100
Subject: [Linux-uvc-devel]
	=?utf-8?q?Dell_m1210_-_Inbuilt_webcam_-_device_?=
	=?utf-8?q?not=09found?=
In-Reply-To: <1171351509.6503.0.camel@yuna>
References: <200702121949.12602.adsluard@tpg.com.au>
	<200702131303.37977.adsluard@tpg.com.au>
	<1171351509.6503.0.camel@yuna>
Message-ID: <200702131843.22226.adsluard@tpg.com.au>

Hi there,

> Do
> modprobe -r uvcvideo
> modprobe uvcvideo trace=15
>
> To remove module from running kernel and insert it there again.

Doing this has the same result:

Dmesg output:

[ 9184.404000] Linux video capture interface: v2.00
[ 9184.416000] usbcore: registered new interface driver uvcvideo
[ 9184.416000] USB Video Class driver (v0.1.0-c)

No device is found, still.


From otroeduardo at gmail.com  Tue Feb 13 12:56:41 2007
From: otroeduardo at gmail.com (Eduardo Suarez)
Date: Tue, 13 Feb 2007 11:56:41 +0000
Subject: [Linux-uvc-devel] Fwd:  Fwd: /dev/video not found
In-Reply-To: <53360e010702130355w98d618eq5ba1f6d1160b95a5@mail.gmail.com>
References: <53360e010702071653w354242bcle3acb5b594830e57@mail.gmail.com>
	<53360e010702120745s140bc79cjed32aaff89851f13@mail.gmail.com>
	<200702122115.16830.laurent.pinchart@skynet.be>
	<200702122254.58279.laurent.pinchart@skynet.be>
	<53360e010702130355w98d618eq5ba1f6d1160b95a5@mail.gmail.com>
Message-ID: <53360e010702130356p54e98024uc76a218afd0bec59@mail.gmail.com>

---------- Forwarded message ----------
From: Eduardo Suarez <otroeduardo at gmail.com>
Date: Feb 13, 2007 11:55 AM
Subject: Re: [Linux-uvc-devel] Fwd: /dev/video not found
To: Laurent Pinchart <laurent.pinchart at skynet.be>



On 2/12/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> > > > Don't look in /var/log/messages or /var/log/dmesg. Use the dmesg
> > > > command directly.
> > > >
> > > > 1- Clear the kernel log with dmesg -c
> > > > 2- Insert the module with modprobe uvcvideo trace=15
> > > > 3- Check the kernel log with dmesg to see if anything is wrong
> > > > 4- Plug in the webcam
> > > > 5- Check the kernel log again
> > > >
> > > > Laurent Pinchart
> > >
> > > Doing 3 after 1 and 2, i get the same that i got before with
> > > /var/log/dmesg. How do I plug in an integrated camera?
> >
> > Hmmm... that might be a bit difficult, right :-)
> >
> > > Does it make sense? Perhaps that is the problem. The driver is thougth
> to
> > > be loaded "before" the camera is plugged in, but that cannot be done
> in
> > > an obvious way.
> >
> > The driver can be loaded before or after plugging the camera, it just
> > shouldn't matter. You're having another issue here.
> >
> > Could you try with the driver from linux-uvc.berlios.de instead of the
> > Gentoo package ?
>
> Please first try to remove the driver before loading it with trace=15. If
> the
> driver is already loaded, modprobe will exit silently without raising the
> trace level.
>
> rmmod uvcvideo
> dmesg -c
> modprobe uvcvideo trace=15
>
> Post the kernel log (dmesg) after the last command.
>

I already tried before with modprobe -r uvcvideo. There is no change. Same
than the message DELL M1210...
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070213/d187cc86/attachment.html>

From laurent.pinchart at skynet.be  Tue Feb 13 13:04:02 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 13 Feb 2007 13:04:02 +0100
Subject: [Linux-uvc-devel] Fwd:  Fwd: /dev/video not found
In-Reply-To: <53360e010702130356p54e98024uc76a218afd0bec59@mail.gmail.com>
References: <53360e010702071653w354242bcle3acb5b594830e57@mail.gmail.com>
	<53360e010702130355w98d618eq5ba1f6d1160b95a5@mail.gmail.com>
	<53360e010702130356p54e98024uc76a218afd0bec59@mail.gmail.com>
Message-ID: <200702131304.02956.laurent.pinchart@skynet.be>

> > > > > Don't look in /var/log/messages or /var/log/dmesg. Use the dmesg
> > > > > command directly.
> > > > >
> > > > > 1- Clear the kernel log with dmesg -c
> > > > > 2- Insert the module with modprobe uvcvideo trace=15
> > > > > 3- Check the kernel log with dmesg to see if anything is wrong
> > > > > 4- Plug in the webcam
> > > > > 5- Check the kernel log again
> > > > >
> > > > > Laurent Pinchart
> > > >
> > > > Doing 3 after 1 and 2, i get the same that i got before with
> > > > /var/log/dmesg. How do I plug in an integrated camera?
> > >
> > > Hmmm... that might be a bit difficult, right :-)
> > >
> > > > Does it make sense? Perhaps that is the problem. The driver is
> > > > thougth
> >
> > to
> >
> > > > be loaded "before" the camera is plugged in, but that cannot be done
> >
> > in
> >
> > > > an obvious way.
> > >
> > > The driver can be loaded before or after plugging the camera, it just
> > > shouldn't matter. You're having another issue here.
> > >
> > > Could you try with the driver from linux-uvc.berlios.de instead of the
> > > Gentoo package ?
> >
> > Please first try to remove the driver before loading it with trace=15. If
> > the
> > driver is already loaded, modprobe will exit silently without raising the
> > trace level.
> >
> > rmmod uvcvideo
> > dmesg -c
> > modprobe uvcvideo trace=15
> >
> > Post the kernel log (dmesg) after the last command.
>
> I already tried before with modprobe -r uvcvideo. There is no change. Same
> than the message DELL M1210...

Then please try to download the driver source code from linux-uvc.berlios.de 
instead of using the Gentoo package (you will need to checkout the code from 
SVN).

Laurent Pinchart


From adsluard at tpg.com.au  Tue Feb 13 13:12:12 2007
From: adsluard at tpg.com.au (dbglt)
Date: Tue, 13 Feb 2007 23:12:12 +1100
Subject: [Linux-uvc-devel] Fwd:  Fwd: /dev/video not found
In-Reply-To: <200702131304.02956.laurent.pinchart@skynet.be>
References: <53360e010702071653w354242bcle3acb5b594830e57@mail.gmail.com>
	<53360e010702130356p54e98024uc76a218afd0bec59@mail.gmail.com>
	<200702131304.02956.laurent.pinchart@skynet.be>
Message-ID: <200702132312.13158.adsluard@tpg.com.au>

Hi Laurent,
Just wondering if you have any further clues or information as to why I can't 
get a /dev/video device (no device is found), even following your steps 
provided.

Any help would be much appreciated. Thank you for your assistance thusfar.

Regards,
Drossos Stamboulakis


From laurent.pinchart at skynet.be  Tue Feb 13 13:17:26 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 13 Feb 2007 13:17:26 +0100
Subject: [Linux-uvc-devel] Fwd:  Fwd: /dev/video not found
In-Reply-To: <200702132312.13158.adsluard@tpg.com.au>
References: <53360e010702071653w354242bcle3acb5b594830e57@mail.gmail.com>
	<200702131304.02956.laurent.pinchart@skynet.be>
	<200702132312.13158.adsluard@tpg.com.au>
Message-ID: <200702131317.26836.laurent.pinchart@skynet.be>

Hi,

> Just wondering if you have any further clues or information as to why I
> can't get a /dev/video device (no device is found), even following your
> steps provided.

I'm sorry, I don't :-( From the information you and Eduardo reported, it seems 
the driver's probe function is not called at all. Maybe the device is already 
claimed by another driver ? Try locating your device in /sys/bus/usb/devices, 
and see if it is claimed by anything.

Laurent Pinchart


From desso at ono.com  Tue Feb 13 14:28:00 2007
From: desso at ono.com (desso at ono.com)
Date: Tue, 13 Feb 2007 14:28:00 +0100 (CET)
Subject: [Linux-uvc-devel] cannot install linux-uvc on Fedora Core 6
Message-ID: <23912510.732211171373280659.JavaMail.root@resprs04>





----Mensaje original----

De: desso at ono.com

Fecha: 13/02/2007 4:35

Para: 

Asunto: [Linux-uvc-devel] cannot install linux-uvc on Fedora Core 6



mmm..seems easy to fix..it's just that I don't know how ...


[root at desso trunk]# make
Building USB Video Class driver...
make[1]: Entering directory `/usr/src/kernels/2.6.19-1.2895.fc6-i686'
CC [M] /home/desso/trunk/uvc_driver.o
CC [M] /home/desso/trunk/uvc_queue.o
CC [M] /home/desso/trunk/uvc_v4l2.o
CC [M] /home/desso/trunk/uvc_video.o
CC [M] /home/desso/trunk/uvc_ctrl.o
LD [M] /home/desso/trunk/uvcvideo.o
Building modules, stage 2.
MODPOST 1 modules
CC /home/desso/trunk/uvcvideo.mod.o
LD [M] /home/desso/trunk/uvcvideo.ko
make[1]: Leaving directory `/usr/src/kernels/2.6.19-1.2895.fc6-i686'
[root at desso trunk]# ls
Makefile uvc_compat.h uvc_ctrl.o uvc_driver.o uvc_queue.o uvc_v4l2.o uvcvideo.h uvcvideo.mod.c uvc_video.o
Module.symvers uvc_ctrl.c uvc_driver.c uvc_queue.c uvc_v4l2.c uvc_video.c uvcvideo.ko uvcvideo.mod.o uvcvideo.o
[root at desso trunk]# make install
Installing USB Video Class driver...
make[1]: Entering directory `/usr/src/kernels/2.6.19-1.2895.fc6-i686'
INSTALL /home/desso/trunk/uvcvideo.ko
DEPMOD 2.6.19-1.2895.fc6
make[1]: Leaving directory `/usr/src/kernels/2.6.19-1.2895.fc6-i686'
depmod -ae
make: depmod: Command not found
make: *** [install] Error 127
[root at desso trunk]#



...I already have linux-uvc installed from an .rpm of revision 79 ..but I just love using svn :( . Anyway thanks for all your great work guys... didn't own a webcam until learning about your driver.Thank you all!






 Changing  "depmod -ae" with "/sbin/depmod -ae" on line 19 of the Makefile fixes the installation :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070213/b4ef2c89/attachment.html>

From echtler at in.tum.de  Tue Feb 13 14:50:00 2007
From: echtler at in.tum.de (Florian Echtler)
Date: Tue, 13 Feb 2007 14:50:00 +0100
Subject: [Linux-uvc-devel] VIDIOC_DQBUF fails with input/output error
In-Reply-To: <op.tnhtjdvs42iof8@nb-mrublixp.am.logitech.com>
References: <1170681982.24383.25.camel@lapnavab35.informatik.tu-muenchen.de>
	<1170852891.21818.31.camel@lapnavab35.informatik.tu-muenchen.de>
	<op.tnhtjdvs42iof8@nb-mrublixp.am.logitech.com>
Message-ID: <1171374600.27620.5.camel@lapnavab35.informatik.tu-muenchen.de>

> Can you tell me the name of the product you bought? Maybe I can get one of  
> those for testing ...
It was this one:
http://www.dtk-computer.de/index.php?page=shop.product_details&flypage=shop.flypage&product_id=60&category_id=5&manufacturer_id=0&option=com_virtuemart&Itemid=30&lang=de
The card I have looks a bit different, but it has the same controller..

> I'm working on a general Wiki for all sorts of webcam information. I think  
> your suggestion is a good idea if it turns out that different people with  
> same host controller have comparable experiences.
> In case you want to contribute to such a database, let me know ...
Of course. Can you post a link?

Yours, Florian

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: Dies ist ein digital signierter Nachrichtenteil
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070213/7c1bd3d6/attachment.pgp>

From theBohemian at gmx.net  Tue Feb 13 14:55:32 2007
From: theBohemian at gmx.net (Robert Schuster)
Date: Tue, 13 Feb 2007 14:55:32 +0100
Subject: [Linux-uvc-devel] make my N800 work as web-cam
In-Reply-To: <45D0D9D5.7000201@indt.org.br>
References: <45D06B1C.7050503@indt.org.br>	<200702121508.50243.laurent.pinchart@skynet.be>	<45D080F5.3060604@studdart.com>
	<45D0D9D5.7000201@indt.org.br>
Message-ID: <45D1C354.5030604@gmx.net>

Hi,
what you are describing is done through the "gagdet" driver. Look into
the Linux source for a driver named g_ether or g_serial. These program a
USB client chip to act as a network device or serial console.

Regards
Robert

Edgard Lima schrieb:
> Urm...yes, you are right...I have misunderstood the linux-uvc project
> 
> Indeed....What I would like to do is to make my N800 work as WebCam, I 
> mean, plug the N800 usb cable to my desktop and then my desktop think it 
> is a Video Class device.
> 
> No problem I will write my own code to do it ;-) thanks anyway
> 
> btw: where in the code (usb stack) my device reports to be a mass 
> storage device.....I would like to make it report as a video class usb 
> device and them map the function to the v4l2 driver, this way it could 
> be used by any linux device implementing v4l2 driver and usb in 
> peripheral mode (non-host)...what do you think about it....I think I 
> will start a project in sourceforge
> 
> Thanks you all, Best Regards
> Edgard
> 
> 
> ext James Studdart escreveu:
>>>> Im trying to compile Linux-UVC on scratchbox to use it on my N800:
>>>>    
>>>>
>>>>       
>> Urm... why exactly do you need to do this? The camera already works with 
>> the provided kernel and drivers. I think it's even a v4l2 device.
>>
>> j.
>>
>> _______________________________________________
>> Linux-uvc-devel mailing list
>> Linux-uvc-devel at lists.berlios.de
>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>   
> 
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 252 bytes
Desc: OpenPGP digital signature
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070213/7f88a28a/attachment.pgp>

From theBohemian at gmx.net  Tue Feb 13 15:14:48 2007
From: theBohemian at gmx.net (Robert Schuster)
Date: Tue, 13 Feb 2007 15:14:48 +0100
Subject: [Linux-uvc-devel] make my N800 work as web-cam
In-Reply-To: <45D0D9D5.7000201@indt.org.br>
References: <45D06B1C.7050503@indt.org.br>	<200702121508.50243.laurent.pinchart@skynet.be>	<45D080F5.3060604@studdart.com>
	<45D0D9D5.7000201@indt.org.br>
Message-ID: <45D1C7D8.9070505@gmx.net>

Hi,
what you are describing is done through the "gagdet" driver. Look into
the Linux source for a driver named g_ether or g_serial. These program a
USB client chip to act as a network device or serial console.

Regards
Robert

Edgard Lima schrieb:
> Urm...yes, you are right...I have misunderstood the linux-uvc project
> 
> Indeed....What I would like to do is to make my N800 work as WebCam, I 
> mean, plug the N800 usb cable to my desktop and then my desktop think it 
> is a Video Class device.
> 
> No problem I will write my own code to do it ;-) thanks anyway
> 
> btw: where in the code (usb stack) my device reports to be a mass 
> storage device.....I would like to make it report as a video class usb 
> device and them map the function to the v4l2 driver, this way it could 
> be used by any linux device implementing v4l2 driver and usb in 
> peripheral mode (non-host)...what do you think about it....I think I 
> will start a project in sourceforge
> 
> Thanks you all, Best Regards
> Edgard
> 
> 
> ext James Studdart escreveu:
>>>> Im trying to compile Linux-UVC on scratchbox to use it on my N800:
>>>>    
>>>>
>>>>       
>> Urm... why exactly do you need to do this? The camera already works with 
>> the provided kernel and drivers. I think it's even a v4l2 device.
>>
>> j.
>>
>> _______________________________________________
>> Linux-uvc-devel mailing list
>> Linux-uvc-devel at lists.berlios.de
>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>   
> 
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 252 bytes
Desc: OpenPGP digital signature
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070213/2e0de68e/attachment.pgp>

From ich at martinfunk.de  Tue Feb 13 17:54:01 2007
From: ich at martinfunk.de (Martin Funk)
Date: Tue, 13 Feb 2007 17:54:01 +0100
Subject: [Linux-uvc-devel] Quick Cam Pro 5000 046d:08ce don't run on Ubuntu
	Feisty Fawn
Message-ID: <45D1ED29.9070406@martinfunk.de>

Hi,

I just got myself a QuickCam Pro 5000 046d:08ce
it runs using Windows, but using Linux I have problems

When I plug in the cam ist is recognized by lsusb:
Bus 002 Device 019: ID 046d:08ce Logitech, Inc.

I got
URL: svn://svn.berlios.de/linux-uvc/linux-uvc/trunk
in
Revision: 88

I made the little:
 >make all
 >sudo make install

I think I also made
 >sudo modprobe uvcvideo

anyway when I plug the cam out/in
i find this in the syslog


Feb 13 17:43:06 fnk64-desktop kernel: [ 5558.432070] usb 2-4.4: new high 
speed USB device using ehci_hcd and address 23
Feb 13 17:43:06 fnk64-desktop NetworkManager: <debug 
info>^I[1171384986.425407] nm_hal_device_added (): New device added (hal 
udi is '/org/freedesktop/Hal/devices/usb_device_46d_8ce_DD8DC2A1').
Feb 13 17:43:06 fnk64-desktop NetworkManager: <debug 
info>^I[1171384986.494433] nm_hal_device_added (): New device added (hal 
udi is 
'/org/freedesktop/Hal/devices/usb_device_46d_8ce_DD8DC2A1_alsa_capture_0').
Feb 13 17:43:06 fnk64-desktop NetworkManager: <debug 
info>^I[1171384986.572748] nm_hal_device_added (): New device added (hal 
udi is 
'/org/freedesktop/Hal/devices/usb_device_46d_8ce_DD8DC2A1_oss_pcm_0').
Feb 13 17:43:06 fnk64-desktop NetworkManager: <debug 
info>^I[1171384986.705243] nm_hal_device_added (): New device added (hal 
udi is 
'/org/freedesktop/Hal/devices/usb_device_46d_8ce_DD8DC2A1_oss_pcm_0_0').
Feb 13 17:43:06 fnk64-desktop NetworkManager: <debug 
info>^I[1171384986.722874] nm_hal_device_added (): New device added (hal 
udi is 
'/org/freedesktop/Hal/devices/usb_device_46d_8ce_DD8DC2A1_oss_mixer__1').
Feb 13 17:43:06 fnk64-desktop NetworkManager: <debug 
info>^I[1171384986.730878] nm_hal_device_added (): New device added (hal 
udi is '/org/freedesktop/Hal/devices/usb_device_46d_8ce_DD8DC2A1_if3').
Feb 13 17:43:06 fnk64-desktop NetworkManager: <debug 
info>^I[1171384986.732857] nm_hal_device_added (): New device added (hal 
udi is '/org/freedesktop/Hal/devices/usb_device_46d_8ce_DD8DC2A1_if2').
Feb 13 17:43:06 fnk64-desktop NetworkManager: <debug 
info>^I[1171384986.734673] nm_hal_device_added (): New device added (hal 
udi is 
'/org/freedesktop/Hal/devices/usb_device_46d_8ce_DD8DC2A1_if2_alsa_control__1'). 

Feb 13 17:43:06 fnk64-desktop kernel: [ 5558.526977] usb 2-4.4: 
configuration #1 chosen from 1 choice
Feb 13 17:43:06 fnk64-desktop kernel: [ 5558.680078] Linux video capture 
interface: v2.00
Feb 13 17:43:06 fnk64-desktop kernel: [ 5558.681719] uvcvideo: Found UVC 
1.00 device <unnamed> (046d:08ce)
Feb 13 17:43:06 fnk64-desktop kernel: [ 5558.710975] usbcore: registered 
new interface driver uvcvideo
Feb 13 17:43:06 fnk64-desktop kernel: [ 5558.710981] USB Video Class 
driver (v0.1.0-c)
Feb 13 17:43:06 fnk64-desktop NetworkManager: <debug 
info>^I[1171384986.852581] nm_hal_device_added (): New device added (hal 
udi is '/org/freedesktop/Hal/devices/usb_device_46d_8ce_DD8DC2A1_if1').
Feb 13 17:43:06 fnk64-desktop NetworkManager: <debug 
info>^I[1171384986.899166] nm_hal_device_added (): New device added (hal 
udi is '/org/freedesktop/Hal/devices/usb_device_46d_8ce_DD8DC2A1_if0').
Feb 13 17:43:06 fnk64-desktop NetworkManager: <debug 
info>^I[1171384986.927331] nm_hal_device_added (): New device added (hal 
udi is 
'/org/freedesktop/Hal/devices/usb_device_46d_8ce_DD8DC2A1_video4linux').
Feb 13 17:43:06 fnk64-desktop NetworkManager: <debug 
info>^I[1171384986.927850] nm_hal_device_added (): New device added (hal 
udi is '/org/freedesktop/Hal/devices/usb_device_46d_8ce_DD8DC2A1_usbraw').

and a
crw-rw---- 1 root video 81, 0 2007-02-13 17:43 /dev/video0
is created.

Unfortunately when I start
 >xawtv
The little green lamp is turned on but I see this on the shell

This is xawtv-3.95.dfsg.1, running on Linux/x86_64 (2.6.20-8-generic)
/dev/video0 [v4l2]: no overlay support
v4l-conf had some trouble, trying to continue anyway
Warning: Cannot convert string 
"-*-ledfixed-medium-r-*--39-*-*-*-c-*-*-*" to type FontStruct
ioctl: VIDIOC_G_STD(std=0x7fff55eeb4a4 
[PAL_G,PAL_D,PAL_K,PAL_Nc,NTSC_M,NTSC_M_JP,?,SECAM_D,SECAM_G,SECAM_H,SECAM_K1,SECAM_L,?ATSC_8_VSB,ATSC_16_VSB,(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null)]): 
Invalid argument
Xlib:  extension "GLX" missing on display ":0.0".
ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument
v4l2: oops: select timeout


and this in the kern.log


Feb 13 17:48:56 fnk64-desktop kernel: [ 5734.284810] uvcvideo: Failed to 
query (130) UVC control 1 (unit 0) : -32 (exp: 26).
Feb 13 17:48:56 fnk64-desktop kernel: [ 5734.288033] uvcvideo: Failed to 
query (1) UVC control 2 (unit 0) : -32 (exp: 26).


I don't have no good questions on the problem no more

by the way:
 >uname -a
Linux fnk64-desktop 2.6.20-8-generic #2 SMP Tue Feb 13 01:14:41 UTC 2007 
x86_64 GNU/Linux

Tell me where to be more specific to help to solve this.

Martin



From laurent.pinchart at skynet.be  Tue Feb 13 20:39:32 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 13 Feb 2007 20:39:32 +0100
Subject: [Linux-uvc-devel] Quick Cam Pro 5000 046d:08ce don't run on
	Ubuntu Feisty Fawn
In-Reply-To: <45D1ED29.9070406@martinfunk.de>
References: <45D1ED29.9070406@martinfunk.de>
Message-ID: <200702132039.32895.laurent.pinchart@skynet.be>

Hi Martin,

> I just got myself a QuickCam Pro 5000 046d:08ce
> it runs using Windows, but using Linux I have problems
>
> When I plug in the cam ist is recognized by lsusb:
> Bus 002 Device 019: ID 046d:08ce Logitech, Inc.
>
[...]
>
> Linux video capture interface: v2.00
> uvcvideo: Found UVC 1.00 device <unnamed> (046d:08ce)

This line is good news, it means the driver recognised your webcam and 
initialised it successfully.

> usbcore: registered new interface driver uvcvideo
> USB Video Class driver (v0.1.0-c)
>
> and a
> crw-rw---- 1 root video 81, 0 2007-02-13 17:43 /dev/video0
> is created.

That's good too.

> Unfortunately when I start
>
>  >xawtv
>
> The little green lamp is turned on but I see this on the shell

xawtv is not known to work the the Linux UVC driver. Could you try luvcview 
and see if you're more successful ?

Best regards,

Laurent Pinchart


From linux at rubli.info  Wed Feb 14 07:30:05 2007
From: linux at rubli.info (Martin Rubli)
Date: Tue, 13 Feb 2007 22:30:05 -0800
Subject: [Linux-uvc-devel] Still Image Capture
In-Reply-To: <200702122120.31449.laurent.pinchart@skynet.be>
References: <e9390bb90702120734g274bc15ey25eeccb7502a6613@mail.gmail.com>
	<200702122120.31449.laurent.pinchart@skynet.be>
Message-ID: <op.tnp60fub42iof8@nb-mrublixp.am.logitech.com>

On Mon, 12 Feb 2007 12:20:31 -0800, Laurent Pinchart  
<laurent.pinchart at skynet.be> wrote:

>> I Just joined this list with the intention of working on still image
>> capture in linux-uvc.  I'm working with a quickcam for notebooks
>> pro, and I see someone was working on similar a few months
>> back.  Any word on how that went?

You're probably referring to:
https://lists.berlios.de/pipermail/linux-uvc-devel/2006-October/000841.html

I've no idea what happened there, but feel free to ask the guy before you  
start coding yourself.

>> Also, considering the v4l2 API does not really have an interface
>> for single image still frame capture, I'm wondering if anyone
>> has any thoughts on how best to handle that.  My application
>> requires capturing a single frame at a very specific time (not
>> a regular interval).  I am totally fine with bypassing the v4l
>> layer and interfacing with the driver directly if need be, but I
>> would like to do something with general utility to the most
>> users, not just a hack that only I can use.
>
> V4L2 can start and stop video streaming at any time. All you have to do  
> is initialise the device (allocate buffers, set the video format, ...),  
> and
> start streaming when you need an image. You can stop streaming right  
> after getting the data, and start again later when required by your  
> application.

Laurent, I think Thad was talking about actual still image support (UVC  
standard, section 2.4.2.4), which can - if the camera supports it -  
provide better quality than the streaming modes.

It would be great if you could actually implement that. We've had  
discussions about how best to do it before and didn't actually reach a  
conclusion. My personal favorite is this: dd if=/dev/video0  
of=mystillpicture.jpg

If that's in the spirit of V4L2 or not is probably subject to discussion  
and there are several other ways to do it, so if you want to have a go,  
we'll be happy to help.

>> Perhaps I should join the v4l dev mailing list and see what their
>> thoughts are.  Your input is appreciated.

 From my experience the V4L mailing list is most helpful when you already  
have a more or less concrete suggestion and want people's opinions. Can't  
hurt after you've given it some thought.

Cheers,
Martin


From linux at rubli.info  Wed Feb 14 07:32:11 2007
From: linux at rubli.info (Martin Rubli)
Date: Tue, 13 Feb 2007 22:32:11 -0800
Subject: [Linux-uvc-devel] VIDIOC_DQBUF fails with input/output error
In-Reply-To: <1171374600.27620.5.camel@lapnavab35.informatik.tu-muenchen.de>
References: <1170681982.24383.25.camel@lapnavab35.informatik.tu-muenchen.de>
	<1170852891.21818.31.camel@lapnavab35.informatik.tu-muenchen.de>
	<op.tnhtjdvs42iof8@nb-mrublixp.am.logitech.com>
	<1171374600.27620.5.camel@lapnavab35.informatik.tu-muenchen.de>
Message-ID: <op.tnp63x0f42iof8@nb-mrublixp.am.logitech.com>

On Tue, 13 Feb 2007 05:50:00 -0800, Florian Echtler <echtler at in.tum.de>  
wrote:

>> I'm working on a general Wiki for all sorts of webcam information. I  
>> think
>> your suggestion is a good idea if it turns out that different people  
>> with
>> same host controller have comparable experiences.
>> In case you want to contribute to such a database, let me know ...
>
> Of course. Can you post a link?

Unfortunately, I can't quite yet as the site is still not publicly  
available. (I'm talking Intranet, it's not that I don't want to. ;-) But  
as soon as this changes, I'll let you know and I will certainly announce  
the availability here.

Cheers,
Martin


From tdphette at gmail.com  Wed Feb 14 08:30:10 2007
From: tdphette at gmail.com (Thad Phetteplace)
Date: Wed, 14 Feb 2007 01:30:10 -0600
Subject: [Linux-uvc-devel] Still Image Capture
In-Reply-To: <op.tnp60fub42iof8@nb-mrublixp.am.logitech.com>
References: <e9390bb90702120734g274bc15ey25eeccb7502a6613@mail.gmail.com>
	<200702122120.31449.laurent.pinchart@skynet.be>
	<op.tnp60fub42iof8@nb-mrublixp.am.logitech.com>
Message-ID: <e9390bb90702132330q4b7bc1adua2a1938a5d4d5833@mail.gmail.com>

On 2/14/07, Martin Rubli <linux at rubli.info> wrote:
>
> You're probably referring to:
> https://lists.berlios.de/pipermail/linux-uvc-devel/2006-October/000841.html
>
> I've no idea what happened there, but feel free to ask the guy before you
> start coding yourself.

I've traded some email with the guy.  Unfortunately he needed to
getting something working quickly and decided to go with a different
solution.

> > start streaming when you need an image. You can stop streaming right
> > after getting the data, and start again later when required by your
> > application.
>
> Laurent, I think Thad was talking about actual still image support (UVC
> standard, section 2.4.2.4), which can - if the camera supports it -
> provide better quality than the streaming modes.

Yes, this is exactly right.  The QC notebook pro can capture a still
image at 1.3 megapixel, much better than any single frame when it
is streaming.  This is one of the few webcams that can produce stills
of that quality that and is definitely the smallest I've found.  That is
important for my application; I plan to suspend it on a flexible arm
over my drafting table to use it as part of my animation toolchain.

> It would be great if you could actually implement that. We've had
> discussions about how best to do it before and didn't actually reach a
> conclusion. My personal favorite is this: dd if=/dev/video0
> of=mystillpicture.jpg
>
> If that's in the spirit of V4L2 or not is probably subject to discussion
> and there are several other ways to do it, so if you want to have a go,
> we'll be happy to help.

I'll probably dive in and try to get the communication to the camera
correct first.  The interface can always be adjusted later.  I'm off to
a good start... I've got the current linux-uvc driver working with the
webcam, I've downloaded the UVC standards docs, and I've logged
an initial capture of traffic on the USB bus while taking some snaps
with the webcam on a WinXP system.  I'll probably dig through the
UVC docs and the capture file over the next few days in my spare
time.

> >> Perhaps I should join the v4l dev mailing list and see what their
> >> thoughts are.  Your input is appreciated.
>
>  From my experience the V4L mailing list is most helpful when you already
> have a more or less concrete suggestion and want people's opinions. Can't
> hurt after you've given it some thought.

Well, I'll at least lurk on the v4l list for while.

Later,

Thad Phetteplace


From laurent.pinchart at skynet.be  Wed Feb 14 10:24:43 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 14 Feb 2007 10:24:43 +0100
Subject: [Linux-uvc-devel] Still Image Capture
In-Reply-To: <e9390bb90702132330q4b7bc1adua2a1938a5d4d5833@mail.gmail.com>
References: <e9390bb90702120734g274bc15ey25eeccb7502a6613@mail.gmail.com>
	<op.tnp60fub42iof8@nb-mrublixp.am.logitech.com>
	<e9390bb90702132330q4b7bc1adua2a1938a5d4d5833@mail.gmail.com>
Message-ID: <200702141024.43241.laurent.pinchart@skynet.be>

Hi Thad,

[...]
> > > start streaming when you need an image. You can stop streaming right
> > > after getting the data, and start again later when required by your
> > > application.
> >
> > Laurent, I think Thad was talking about actual still image support (UVC
> > standard, section 2.4.2.4), which can - if the camera supports it -
> > provide better quality than the streaming modes.
>
> Yes, this is exactly right.  The QC notebook pro can capture a still
> image at 1.3 megapixel, much better than any single frame when it
> is streaming.  This is one of the few webcams that can produce stills
> of that quality that and is definitely the smallest I've found.  That is
> important for my application; I plan to suspend it on a flexible arm
> over my drafting table to use it as part of my animation toolchain.

The good news is the QC notebook pro can capture video at 1.3 megapixel as 
well :-) All UVC webcams I am aware of implement still image capture method 
1, which means they don't implement still image capture at all (method 1 
emulates still image capture in software).

> > It would be great if you could actually implement that. We've had
> > discussions about how best to do it before and didn't actually reach a
> > conclusion. My personal favorite is this: dd if=/dev/video0
> > of=mystillpicture.jpg
> >
> > If that's in the spirit of V4L2 or not is probably subject to discussion
> > and there are several other ways to do it, so if you want to have a go,
> > we'll be happy to help.

That's on my todo list, but I currently lack hardware to test this on. Is 
anyone aware of a webcam implementing still image capture method 2 or method 
3 ?

Cheers,

Laurent Pinchart


From ich at martinfunk.de  Wed Feb 14 12:16:01 2007
From: ich at martinfunk.de (Martin Funk)
Date: Wed, 14 Feb 2007 12:16:01 +0100
Subject: [Linux-uvc-devel] Quick Cam Pro 5000 046d:08ce don't run on
 Ubuntu Feisty Fawn
In-Reply-To: <200702132039.32895.laurent.pinchart@skynet.be>
References: <45D1ED29.9070406@martinfunk.de>
	<200702132039.32895.laurent.pinchart@skynet.be>
Message-ID: <45D2EF71.3040508@martinfunk.de>

Hi Laurent,

 >luvcview

response with this on the shell:

luvcview version 0.2.0
Video driver: x11
A window manager is available
video /dev/video0


a new window with the title "LUVCview(c)Laurent Pinchart && Michel Xhaard"
is opened.
The green light on the cam is turned on.
There are no messages in any log file, but: No pictures to be seen 
nowhere :-(

luvcview seems to see the device though, since:
 >luvcview -L
luvcview version 0.2.0
Video driver: x11
A window manager is available
video /dev/video0
/dev/video0 does not support read i/o
{ pixelformat = 'MJPG', description = 'MJPEG' }
{ pixelformat = 'YUYV', description = 'Uncompressed' }

Also uvcvideo seems to see something of the device, since a push on the 
cam button leads to this entry:
Feb 14 10:41:52 fnk64-desktop kernel: [ 1505.024051] uvcvideo: Button 
event (1).
Feb 14 10:41:52 fnk64-desktop kernel: [ 1505.123872] uvcvideo: Button 
event (0).
in the syslog.

The XWindow can't be closed either. luvcvideo responses with "Stop 
asked" but doesn't close the window.
To close the window I do a kill -9 on luvcvideo.

By the way Ekiga can't drive the video either, but it can drive the 
cam's microphone.

Anything else, I can do to assist?

Martin

Laurent Pinchart schrieb:
> Hi Martin,
>
>   
>> I just got myself a QuickCam Pro 5000 046d:08ce
>> it runs using Windows, but using Linux I have problems
>>
>> When I plug in the cam ist is recognized by lsusb:
>> Bus 002 Device 019: ID 046d:08ce Logitech, Inc.
>>
>>     
> [...]
>   
>> Linux video capture interface: v2.00
>> uvcvideo: Found UVC 1.00 device <unnamed> (046d:08ce)
>>     
>
> This line is good news, it means the driver recognised your webcam and 
> initialised it successfully.
>
>   
>> usbcore: registered new interface driver uvcvideo
>> USB Video Class driver (v0.1.0-c)
>>
>> and a
>> crw-rw---- 1 root video 81, 0 2007-02-13 17:43 /dev/video0
>> is created.
>>     
>
> That's good too.
>
>   
>> Unfortunately when I start
>>
>>  >xawtv
>>
>> The little green lamp is turned on but I see this on the shell
>>     
>
> xawtv is not known to work the the Linux UVC driver. Could you try luvcview 
> and see if you're more successful ?
>
> Best regards,
>
> Laurent Pinchart
>
>   



From tdphette at gmail.com  Wed Feb 14 17:18:10 2007
From: tdphette at gmail.com (Thad Phetteplace)
Date: Wed, 14 Feb 2007 10:18:10 -0600
Subject: [Linux-uvc-devel] Still Image Capture
In-Reply-To: <200702141024.43241.laurent.pinchart@skynet.be>
References: <e9390bb90702120734g274bc15ey25eeccb7502a6613@mail.gmail.com>
	<op.tnp60fub42iof8@nb-mrublixp.am.logitech.com>
	<e9390bb90702132330q4b7bc1adua2a1938a5d4d5833@mail.gmail.com>
	<200702141024.43241.laurent.pinchart@skynet.be>
Message-ID: <e9390bb90702140818g6c888d60p18778934b28e709d@mail.gmail.com>

On 2/14/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> The good news is the QC notebook pro can capture video at 1.3 megapixel as
> well :-) All UVC webcams I am aware of implement still image capture method
> 1, which means they don't implement still image capture at all (method 1
> emulates still image capture in software).

I seem to remember reading that the QC notebook pro interpolates
frames when streaming at resolutions greater than 640x480, but does
a non-interpolated still capture.  This is easy enough to test.  I can do
some capturing and compare image quality.  I also have a log of usb
traffic.  I can look at the transfer frames and see if the snap sends
more data.

Not sure if I'll get to that today... I'm currently neck deep in an embedded
linux driver project.  Then again, if my new variable power supply doesn't
show up soon, I'll be spinning my tires and have plenty of free time...  :(

Later,

Thad


From linux at rubli.info  Wed Feb 14 18:48:22 2007
From: linux at rubli.info (Martin Rubli)
Date: Wed, 14 Feb 2007 09:48:22 -0800
Subject: [Linux-uvc-devel] Still Image Capture
In-Reply-To: <e9390bb90702140818g6c888d60p18778934b28e709d@mail.gmail.com>
References: <e9390bb90702120734g274bc15ey25eeccb7502a6613@mail.gmail.com>
	<op.tnp60fub42iof8@nb-mrublixp.am.logitech.com>
	<e9390bb90702132330q4b7bc1adua2a1938a5d4d5833@mail.gmail.com>
	<200702141024.43241.laurent.pinchart@skynet.be>
	<e9390bb90702140818g6c888d60p18778934b28e709d@mail.gmail.com>
Message-ID: <op.tnq2ew2g42iof8@nb-mrublixp.am.logitech.com>

On Wed, 14 Feb 2007 08:18:10 -0800, Thad Phetteplace <tdphette at gmail.com>  
wrote:

> On 2/14/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>>
>> The good news is the QC notebook pro can capture video at 1.3 megapixel  
>> as well :-) All UVC webcams I am aware of implement still image capture  
>> method 1, which means they don't implement still image capture at all  
>> (method 1
>> emulates still image capture in software).

Laurent is right for the first part, all our Logitech QuickCam UVC cameras  
(except the QuickCam Pro 5000, which has a VGA sensor) can indeed stream  
at 1.3 MP. It's done without interpolation.

However, they have method 2 still image capture support. Here's the  
corresponding section from the UVC descriptor: (This happens to be from a  
Pro 5000, but the others should be the same.)

           ===>Video Class-Specific VS Video Input Header Descriptor<===
bLength:                           0x10
bDescriptorType:                   0x24
bDescriptorSubtype:                0x01
bNumFormats:                       0x03
wTotalLength:                    0x0270  -> Validated
bEndpointAddress:                  0x81  -> Direction: IN - EndpointID: 1
bmInfo:                            0x00  -> Dynamic Format Change not  
Supported
bTerminalLink:                     0x05
bStillCaptureMethod:               0x02  -> Still Capture Method 2
bTriggerSupport:                   0x01  -> Hardware Triggering Support
bTriggerUsage:                     0x00  -> Host will initiate still image  
capture

> I seem to remember reading that the QC notebook pro interpolates
> frames when streaming at resolutions greater than 640x480, but does
> a non-interpolated still capture.  This is easy enough to test.  I can do
> some capturing and compare image quality.  I also have a log of usb
> traffic.  I can look at the transfer frames and see if the snap sends
> more data.
>
> Not sure if I'll get to that today... I'm currently neck deep in an  
> embedded linux driver project.  Then again, if my new variable power  
> supply doesn't show up soon, I'll be spinning my tires and have plenty  
> of free time... :(

I don't want to be unsupportive, but in the name of the Linux webcam  
community, let's hope for some shipping delay on your power supply. ;-)

Cheers,
Martin


From ich at martinfunk.de  Thu Feb 15 00:16:23 2007
From: ich at martinfunk.de (Martin Funk)
Date: Thu, 15 Feb 2007 00:16:23 +0100
Subject: [Linux-uvc-devel] Quick Cam Pro 5000 046d:08ce don't run on
 Ubuntu Feisty Fawn
In-Reply-To: <45D2EF71.3040508@martinfunk.de>
References: <45D1ED29.9070406@martinfunk.de>	<200702132039.32895.laurent.pinchart@skynet.be>
	<45D2EF71.3040508@martinfunk.de>
Message-ID: <45D39847.5080108@martinfunk.de>

I dug a little deeper into this.

Before I this I didn't know how to set the trace level for a kernel 
module, but now I think I do.

At least this
 >sudo modprobe uvcvideo trace=0xffff
made the module very talkative:

The first messages seem to belong to the startup phase of the driver.
At [284.099774] i started luvcview

Feb 14 23:54:47 fnk64-desktop kernel: [  244.790239] uvcvideo: Probing 
generic UVC device 4.4
Feb 14 23:54:47 fnk64-desktop kernel: [  244.790251] uvcvideo: Found 
format MJPEG.
Feb 14 23:54:47 fnk64-desktop kernel: [  244.790253] uvcvideo: - 160x120 
(30.0 fps)
Feb 14 23:54:47 fnk64-desktop kernel: [  244.790256] uvcvideo: - 176x144 
(30.0 fps)
Feb 14 23:54:47 fnk64-desktop kernel: [  244.790258] uvcvideo: - 320x240 
(15.0 fps)
Feb 14 23:54:47 fnk64-desktop kernel: [  244.790261] uvcvideo: - 352x288 
(15.0 fps)
Feb 14 23:54:47 fnk64-desktop kernel: [  244.790263] uvcvideo: - 640x480 
(15.0 fps)
Feb 14 23:54:47 fnk64-desktop kernel: [  244.790265] uvcvideo: Found 
format Uncompressed.
Feb 14 23:54:47 fnk64-desktop kernel: [  244.790267] uvcvideo: - 160x120 
(30.0 fps)
Feb 14 23:54:47 fnk64-desktop kernel: [  244.790269] uvcvideo: - 176x144 
(30.0 fps)
Feb 14 23:54:47 fnk64-desktop kernel: [  244.790272] uvcvideo: - 320x240 
(15.0 fps)
Feb 14 23:54:47 fnk64-desktop kernel: [  244.790274] uvcvideo: - 352x288 
(15.0 fps)
Feb 14 23:54:47 fnk64-desktop kernel: [  244.790276] uvcvideo: - 640x480 
(15.0 fps)
Feb 14 23:54:47 fnk64-desktop kernel: [  244.790283] uvcvideo: Found a 
Status endpoint (addr 87).
Feb 14 23:54:47 fnk64-desktop kernel: [  244.790286] uvcvideo: Found UVC 
1.00 device <unnamed> (046d:08ce)
Feb 14 23:54:47 fnk64-desktop kernel: [  244.790288] uvcvideo: Scanning 
UVC chain: OT 5 <- Unit 4 <- Unit 3 <- Unit 2 <- IT 1
Feb 14 23:54:47 fnk64-desktop kernel: [  244.790293] uvcvideo: Found a 
valid video chain (1 -> 5).
Feb 14 23:54:48 fnk64-desktop kernel: [  244.799665] uvcvideo: UVC 
device initialized.
Feb 14 23:54:48 fnk64-desktop kernel: [  244.799725] usbcore: registered 
new interface driver uvcvideo
Feb 14 23:54:48 fnk64-desktop kernel: [  244.799797] USB Video Class 
driver (v0.1.0-c)
Feb 14 23:54:48 fnk64-desktop NetworkManager: <debug 
info>^I[1171493688.045799] nm_hal_device_added (): New device added (hal 
udi is 
'/org/freedesktop/Hal/devices/usb_device_46d_8ce_DD8DC2A1_video4linux').
Feb 14 23:55:14 fnk64-desktop kernel: [  255.904563] usbcore: 
deregistering interface driver uvcvideo
Feb 14 23:55:14 fnk64-desktop NetworkManager: <debug 
info>^I[1171493714.727154] nm_hal_device_removed (): Device removed (hal 
udi is 
'/org/freedesktop/Hal/devices/usb_device_46d_8ce_DD8DC2A1_video4linux').
Feb 14 23:55:33 fnk64-desktop kernel: [  263.893769] Linux video capture 
interface: v2.00
Feb 14 23:55:33 fnk64-desktop kernel: [  263.895334] uvcvideo: Probing 
generic UVC device 4.4
Feb 14 23:55:33 fnk64-desktop kernel: [  263.895347] uvcvideo: Found 
format MJPEG.
Feb 14 23:55:33 fnk64-desktop kernel: [  263.895349] uvcvideo: - 160x120 
(30.0 fps)
Feb 14 23:55:33 fnk64-desktop kernel: [  263.895352] uvcvideo: - 176x144 
(30.0 fps)
Feb 14 23:55:33 fnk64-desktop kernel: [  263.895354] uvcvideo: - 320x240 
(15.0 fps)
Feb 14 23:55:33 fnk64-desktop kernel: [  263.895357] uvcvideo: - 352x288 
(15.0 fps)
Feb 14 23:55:33 fnk64-desktop kernel: [  263.895359] uvcvideo: - 640x480 
(15.0 fps)
Feb 14 23:55:33 fnk64-desktop kernel: [  263.895361] uvcvideo: Found 
format Uncompressed.
Feb 14 23:55:33 fnk64-desktop kernel: [  263.895363] uvcvideo: - 160x120 
(30.0 fps)
Feb 14 23:55:33 fnk64-desktop kernel: [  263.895365] uvcvideo: - 176x144 
(30.0 fps)
Feb 14 23:55:33 fnk64-desktop kernel: [  263.895368] uvcvideo: - 320x240 
(15.0 fps)
Feb 14 23:55:33 fnk64-desktop kernel: [  263.895370] uvcvideo: - 352x288 
(15.0 fps)
Feb 14 23:55:33 fnk64-desktop kernel: [  263.895372] uvcvideo: - 640x480 
(15.0 fps)
Feb 14 23:55:33 fnk64-desktop kernel: [  263.895381] uvcvideo: Found a 
Status endpoint (addr 87).
Feb 14 23:55:33 fnk64-desktop kernel: [  263.895384] uvcvideo: Found UVC 
1.00 device <unnamed> (046d:08ce)
Feb 14 23:55:33 fnk64-desktop kernel: [  263.895387] uvcvideo: Scanning 
UVC chain: OT 5 <- Unit 4 <- Unit 3 <- Unit 2 <- IT 1
Feb 14 23:55:33 fnk64-desktop kernel: [  263.895392] uvcvideo: Found a 
valid video chain (1 -> 5).
Feb 14 23:55:33 fnk64-desktop kernel: [  263.904850] uvcvideo: UVC 
device initialized.
Feb 14 23:55:33 fnk64-desktop kernel: [  263.904917] usbcore: registered 
new interface driver uvcvideo
Feb 14 23:55:33 fnk64-desktop kernel: [  263.904986] USB Video Class 
driver (v0.1.0-c)
Feb 14 23:55:33 fnk64-desktop NetworkManager: <debug 
info>^I[1171493733.983507] nm_hal_device_added (): New device added (hal 
udi is 
'/org/freedesktop/Hal/devices/usb_device_46d_8ce_DD8DC2A1_video4linux').
Feb 14 23:56:19 fnk64-desktop kernel: [  284.099774] uvcvideo: uvc_v4l2_open
Feb 14 23:56:19 fnk64-desktop kernel: [  284.099824] uvcvideo: 
uvc_v4l2_ioctl
Feb 14 23:56:19 fnk64-desktop kernel: [  284.099827] v4l2 ioctl 
VIDIOC_QUERYCAP, dir=r- (0x80685600)
Feb 14 23:56:19 fnk64-desktop kernel: [  284.099918] uvcvideo: 
uvc_v4l2_ioctl
Feb 14 23:56:19 fnk64-desktop kernel: [  284.099956] v4l2 ioctl 
VIDIOC_S_FMT, dir=rw (0xc0d05605)
Feb 14 23:56:19 fnk64-desktop kernel: [  284.099959] uvcvideo: Trying 
format 0x47504a4d (MJPG): 320x240.
Feb 14 23:56:19 fnk64-desktop kernel: [  284.099962] uvcvideo: Using 
default frame interval 66666.6 us (15.0 fps).
Feb 14 23:56:19 fnk64-desktop kernel: [  284.119175] uvcvideo: 
uvc_v4l2_ioctl
Feb 14 23:56:19 fnk64-desktop kernel: [  284.119228] v4l2 ioctl 
VIDIOC_S_PARM, dir=rw (0xc0cc5616)
Feb 14 23:56:19 fnk64-desktop kernel: [  284.119231] uvcvideo: Setting 
frame interval to 1/15 (666666).
Feb 14 23:56:19 fnk64-desktop kernel: [  284.135809] uvcvideo: 
uvc_v4l2_ioctl
Feb 14 23:56:19 fnk64-desktop kernel: [  284.135812] v4l2 ioctl 
VIDIOC_REQBUFS, dir=rw (0xc0145608)
Feb 14 23:56:19 fnk64-desktop kernel: [  284.135925] uvcvideo: 
uvc_v4l2_ioctl
Feb 14 23:56:19 fnk64-desktop kernel: [  284.135927] v4l2 ioctl 
VIDIOC_QUERYBUF, dir=rw (0xc0585609)
Feb 14 23:56:19 fnk64-desktop kernel: [  284.136025] uvcvideo: uvc_v4l2_mmap
Feb 14 23:56:19 fnk64-desktop kernel: [  284.136069] uvcvideo: 
uvc_v4l2_ioctl
Feb 14 23:56:19 fnk64-desktop kernel: [  284.136071] v4l2 ioctl 
VIDIOC_QUERYBUF, dir=rw (0xc0585609)
Feb 14 23:56:19 fnk64-desktop kernel: [  284.136172] uvcvideo: uvc_v4l2_mmap
Feb 14 23:56:19 fnk64-desktop kernel: [  284.136218] uvcvideo: 
uvc_v4l2_ioctl
Feb 14 23:56:19 fnk64-desktop kernel: [  284.136219] v4l2 ioctl 
VIDIOC_QUERYBUF, dir=rw (0xc0585609)
Feb 14 23:56:19 fnk64-desktop kernel: [  284.136319] uvcvideo: uvc_v4l2_mmap
Feb 14 23:56:19 fnk64-desktop kernel: [  284.136371] uvcvideo: 
uvc_v4l2_ioctl
Feb 14 23:56:19 fnk64-desktop kernel: [  284.136373] v4l2 ioctl 
VIDIOC_QUERYBUF, dir=rw (0xc0585609)
Feb 14 23:56:19 fnk64-desktop kernel: [  284.136476] uvcvideo: uvc_v4l2_mmap
Feb 14 23:56:19 fnk64-desktop kernel: [  284.136522] uvcvideo: 
uvc_v4l2_ioctl
Feb 14 23:56:19 fnk64-desktop kernel: [  284.136524] v4l2 ioctl 
VIDIOC_QBUF, dir=rw (0xc058560f)
Feb 14 23:56:19 fnk64-desktop kernel: [  284.136525] uvcvideo: Queuing 
buffer 0.
Feb 14 23:56:19 fnk64-desktop kernel: [  284.136665] uvcvideo: 
uvc_v4l2_ioctl
Feb 14 23:56:19 fnk64-desktop kernel: [  284.136667] v4l2 ioctl 
VIDIOC_QBUF, dir=rw (0xc058560f)
Feb 14 23:56:19 fnk64-desktop kernel: [  284.136669] uvcvideo: Queuing 
buffer 1.
Feb 14 23:56:19 fnk64-desktop kernel: [  284.136809] uvcvideo: 
uvc_v4l2_ioctl
Feb 14 23:56:19 fnk64-desktop kernel: [  284.136811] v4l2 ioctl 
VIDIOC_QBUF, dir=rw (0xc058560f)
Feb 14 23:56:19 fnk64-desktop kernel: [  284.136812] uvcvideo: Queuing 
buffer 2.
Feb 14 23:56:19 fnk64-desktop kernel: [  284.136953] uvcvideo: 
uvc_v4l2_ioctl
Feb 14 23:56:19 fnk64-desktop kernel: [  284.136955] v4l2 ioctl 
VIDIOC_QBUF, dir=rw (0xc058560f)
Feb 14 23:56:19 fnk64-desktop kernel: [  284.136957] uvcvideo: Queuing 
buffer 3.
Feb 14 23:56:19 fnk64-desktop kernel: [  284.165685] uvcvideo: 
uvc_v4l2_ioctl
Feb 14 23:56:19 fnk64-desktop kernel: [  284.165691] v4l2 ioctl 
VIDIOC_STREAMON, dir=-w (0x40045612)
Feb 14 23:56:19 fnk64-desktop kernel: [  284.165967] uvcvideo: 
uvc_v4l2_ioctl
Feb 14 23:56:19 fnk64-desktop kernel: [  284.165970] v4l2 ioctl 
VIDIOC_DQBUF, dir=rw (0xc0585611)
Feb 14 23:56:19 fnk64-desktop kernel: [  284.166061] uvcvideo: Dequeuing 
buffer 0.
Feb 14 23:56:19 fnk64-desktop kernel: [  284.171785] uvcvideo: Dropping 
packet (out of sync).
Feb 14 23:56:19 fnk64-desktop kernel: [  284.171788] uvcvideo: Dropping 
packet (out of sync).
Feb 14 23:56:19 fnk64-desktop kernel: [  284.171790] uvcvideo: Dropping 
packet (out of sync).
Feb 14 23:56:19 fnk64-desktop kernel: [  284.171791] uvcvideo: Dropping 
packet (out of sync).

Martin Funk schrieb:
> Hi Laurent,
>
>  >luvcview
>
> response with this on the shell:
>
> luvcview version 0.2.0
> Video driver: x11
> A window manager is available
> video /dev/video0
>
>
> a new window with the title "LUVCview(c)Laurent Pinchart && Michel Xhaard"
> is opened.
> The green light on the cam is turned on.
> There are no messages in any log file, but: No pictures to be seen 
> nowhere :-(
>
> luvcview seems to see the device though, since:
>  >luvcview -L
> luvcview version 0.2.0
> Video driver: x11
> A window manager is available
> video /dev/video0
> /dev/video0 does not support read i/o
> { pixelformat = 'MJPG', description = 'MJPEG' }
> { pixelformat = 'YUYV', description = 'Uncompressed' }
>
> Also uvcvideo seems to see something of the device, since a push on the 
> cam button leads to this entry:
> Feb 14 10:41:52 fnk64-desktop kernel: [ 1505.024051] uvcvideo: Button 
> event (1).
> Feb 14 10:41:52 fnk64-desktop kernel: [ 1505.123872] uvcvideo: Button 
> event (0).
> in the syslog.
>
> The XWindow can't be closed either. luvcvideo responses with "Stop 
> asked" but doesn't close the window.
> To close the window I do a kill -9 on luvcvideo.
>
> By the way Ekiga can't drive the video either, but it can drive the 
> cam's microphone.
>
> Anything else, I can do to assist?
>
> Martin
>
> Laurent Pinchart schrieb:
>   
>> Hi Martin,
>>
>>   
>>     
>>> I just got myself a QuickCam Pro 5000 046d:08ce
>>> it runs using Windows, but using Linux I have problems
>>>
>>> When I plug in the cam ist is recognized by lsusb:
>>> Bus 002 Device 019: ID 046d:08ce Logitech, Inc.
>>>
>>>     
>>>       
>> [...]
>>   
>>     
>>> Linux video capture interface: v2.00
>>> uvcvideo: Found UVC 1.00 device <unnamed> (046d:08ce)
>>>     
>>>       
>> This line is good news, it means the driver recognised your webcam and 
>> initialised it successfully.
>>
>>   
>>     
>>> usbcore: registered new interface driver uvcvideo
>>> USB Video Class driver (v0.1.0-c)
>>>
>>> and a
>>> crw-rw---- 1 root video 81, 0 2007-02-13 17:43 /dev/video0
>>> is created.
>>>     
>>>       
>> That's good too.
>>
>>   
>>     
>>> Unfortunately when I start
>>>
>>>  >xawtv
>>>
>>> The little green lamp is turned on but I see this on the shell
>>>     
>>>       
>> xawtv is not known to work the the Linux UVC driver. Could you try luvcview 
>> and see if you're more successful ?
>>
>> Best regards,
>>
>> Laurent Pinchart
>>
>>   
>>     
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>   



From rrs at researchut.com  Fri Feb 16 09:11:42 2007
From: rrs at researchut.com (Ritesh Raj Sarraf)
Date: Fri, 16 Feb 2007 13:41:42 +0530
Subject: [Linux-uvc-devel] Dell m1210 - Inbuilt webcam - device not found
References: <200702121949.12602.adsluard@tpg.com.au>
	<200702121053.24106.laurent.pinchart@skynet.be>
	<200702122138.24669.adsluard@tpg.com.au>
	<200702122252.46463.laurent.pinchart@skynet.be>
Message-ID: <ui5ga4-krv.ln1@www.researchut.com>

Laurent Pinchart wrote:

> modprobe doesn't report any error if the driver is already loaded. Try to
> unload the driver (rmmod uvcvideo), clear the kernel log (dmesg -c) and load
> the driver again (modprobe uvcvideo trace=15). Please post the kernel log
> (dmesg) after doing so.

Hi,

I have the same laptop. Here's the message you're looking for.

Linux video capture interface: v2.00
uvcvideo: Probing known UVC device 5 (046d:08c6)
uvcvideo: Found format MJPEG.
uvcvideo: - 160x120 (30.0 fps)
uvcvideo: - 176x144 (30.0 fps)
uvcvideo: - 320x240 (15.0 fps)
uvcvideo: - 352x288 (30.0 fps)
uvcvideo: - 432x240 (30.0 fps)
uvcvideo: - 480x360 (30.0 fps)
uvcvideo: - 512x288 (30.0 fps)
uvcvideo: - 640x360 (30.0 fps)
uvcvideo: - 640x480 (15.0 fps)
uvcvideo: - 704x576 (15.0 fps)
uvcvideo: - 864x480 (15.0 fps)
uvcvideo: - 960x720 (15.0 fps)
uvcvideo: Found format Uncompressed.
uvcvideo: - 1024x576 (10.0 fps)
uvcvideo: - 1280x960 (7.5 fps)
uvcvideo: Found a Status endpoint (addr 87).
uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c6)
uvcvideo: Scanning UVC chain: OT 5 <- Unit 4 <- Unit 3 <- Unit 2 <- IT 1
uvcvideo: Found a valid video chain (1 -> 5).
uvcvideo: UVC device initialized.
usbcore: registered new driver uvcvideo
USB Video Class driver (v0.1.0-c)


For me, I'm able to use my webcam with uvcvideo + luvcview. But not really
usable. I can't use it with my IM application, kopete.

At times I've also noticed issues with the uvcvideo driver. At times, when using
luvcview, I get a grey screen and only can see the outline of myself. No clear
images. At situations like that, the following messages are logged into dmesg:

EOF in empty packet.
EOF in empty packet.



Thanks,
Ritesh
-- 
Ritesh Raj Sarraf
RESEARCHUT - http://www.researchut.com
"Necessity is the mother of invention."
"Stealing logic from one person is plagiarism, stealing from many is research."
"The great are those who achieve the impossible, the petty are those who
cannot - rrs"



From cristiane.koda at gmail.com  Sun Feb 18 16:29:53 2007
From: cristiane.koda at gmail.com (Cristiane koda)
Date: Sun, 18 Feb 2007 17:29:53 +0200
Subject: [Linux-uvc-devel] Cannot run linux-uvc under CENTOS
Message-ID: <e47b5af60702180729o5650fac1oac161aa4a3b5f449@mail.gmail.com>

Hi,

    I'm trying to install the uvcvideo driver on CENTOS, but I'm getting
some erros during make..
    The Kernel version is: 2.6.9-42.EL

--------------------BEGIN---------------------
[root at localhost trunk]# make
Building USB Video Class driver...
make[1]: Entering directory `/usr/src/kernels/2.6.9-42.EL-i686'
  CC [M]  /home/utrafe/uvcvideo-r75/trunk/uvc_driver.o
In file included from /home/utrafe/uvcvideo-r75/trunk/uvcvideo.h:8,
                 from /home/utrafe/uvcvideo-r75/trunk/uvc_driver.c:44:
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:134: error: syntax error before
"gfp_flags"
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:136: warning: static
declaration of 'kzalloc' follows non-static declaration
include/linux/slab.h:101: warning: previous declaration of 'kzalloc' was
here
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h: In function `kzalloc':
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:136: error: number of arguments
doesn't match prototype
include/linux/slab.h:101: error: prototype declaration
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:137: error: `size' undeclared
(first use in this function)
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:137: error: (Each undeclared
identifier is reported only once
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:137: error: for each function
it appears in.)
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:137: error: `gfp_flags'
undeclared (first use in this function)
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h: In function `vm_insert_page':
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:158: warning: implicit
declaration of function `remap_pfn_range'
make[2]: *** [/home/utrafe/uvcvideo-r75/trunk/uvc_driver.o] Error 1
make[1]: *** [_module_/home/utrafe/uvcvideo-r75/trunk] Error 2
make[1]: Leaving directory `/usr/src/kernels/2.6.9-42.EL-i686'
make: *** [uvcvideo] Error 2
------------------END--------------------------------

     So, as a test I modified the file uvc_compat.h, removing from the line
134, "__nocast", then it compiles but I can't add the driver to the kernel,
using modprobe.

     Here is the output:

----------------BEGIN---------------------------
[root at localhost trunk]# make
Building USB Video Class driver...
make[1]: Entering directory `/usr/src/kernels/2.6.9-42.EL-i686'
  CC [M]  /home/utrafe/uvcvideo-r75/trunk/uvc_driver.o
In file included from /home/utrafe/uvcvideo-r75/trunk/uvcvideo.h:8,
                 from /home/utrafe/uvcvideo-r75/trunk/uvc_driver.c:44:
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:136: warning: static
declaration of 'kzalloc' follows non-static declaration
include/linux/slab.h:101: warning: previous declaration of 'kzalloc' was
here
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h: In function `vm_insert_page':
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:158: warning: implicit
declaration of function `remap_pfn_range'
  CC [M]  /home/utrafe/uvcvideo-r75/trunk/uvc_queue.o
In file included from /home/utrafe/uvcvideo-r75/trunk/uvcvideo.h:8,
                 from /home/utrafe/uvcvideo-r75/trunk/uvc_queue.c:24:
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:136: warning: static
declaration of 'kzalloc' follows non-static declaration
include/linux/slab.h:101: warning: previous declaration of 'kzalloc' was
here
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h: In function `vm_insert_page':
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:158: warning: implicit
declaration of function `remap_pfn_range'
  CC [M]  /home/utrafe/uvcvideo-r75/trunk/uvc_v4l2.o
In file included from /home/utrafe/uvcvideo-r75/trunk/uvcvideo.h:8,
                 from /home/utrafe/uvcvideo-r75/trunk/uvc_v4l2.c:28:
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:136: warning: static
declaration of 'kzalloc' follows non-static declaration
include/linux/slab.h:101: warning: previous declaration of 'kzalloc' was
here
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h: In function `vm_insert_page':
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:158: warning: implicit
declaration of function `remap_pfn_range'
  CC [M]  /home/utrafe/uvcvideo-r75/trunk/uvc_video.o
In file included from /home/utrafe/uvcvideo-r75/trunk/uvcvideo.h:8,
                 from /home/utrafe/uvcvideo-r75/trunk/uvc_video.c:24:
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:136: warning: static
declaration of 'kzalloc' follows non-static declaration
include/linux/slab.h:101: warning: previous declaration of 'kzalloc' was
here
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h: In function `vm_insert_page':
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:158: warning: implicit
declaration of function `remap_pfn_range'
/home/utrafe/uvcvideo-r75/trunk/uvc_video.c: In function `uvc_video_enable':
/home/utrafe/uvcvideo-r75/trunk/uvc_video.c:696: warning: 'ep' might be used
uninitialized in this function
  CC [M]  /home/utrafe/uvcvideo-r75/trunk/uvc_ctrl.o
In file included from /home/utrafe/uvcvideo-r75/trunk/uvcvideo.h:8,
                 from /home/utrafe/uvcvideo-r75/trunk/uvc_ctrl.c:24:
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:136: warning: static
declaration of 'kzalloc' follows non-static declaration
include/linux/slab.h:101: warning: previous declaration of 'kzalloc' was
here
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h: In function `vm_insert_page':
/home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:158: warning: implicit
declaration of function `remap_pfn_range'
  LD [M]  /home/utrafe/uvcvideo-r75/trunk/uvcvideo.o
  Building modules, stage 2.
  MODPOST
*** Warning: "usb_get_intf" [/home/utrafe/uvcvideo-r75/trunk/uvcvideo.ko]
undefined!
*** Warning: "remap_pfn_range" [/home/utrafe/uvcvideo-r75/trunk/uvcvideo.ko]
undefined!
*** Warning: "usb_put_intf" [/home/utrafe/uvcvideo-r75/trunk/uvcvideo.ko]
undefined!
  CC      /home/utrafe/uvcvideo-r75/trunk/uvcvideo.mod.o
  LD [M]  /home/utrafe/uvcvideo-r75/trunk/uvcvideo.ko
make[1]: Leaving directory `/usr/src/kernels/2.6.9-42.EL-i686'
[root at localhost trunk]#
------------------END-------------------------------

[root at localhost trunk]# ls
Makefile      uvc_ctrl.o    uvc_queue.c  uvc_v4l2.o   uvcvideo.ko
uvc_video.o
uvc_compat.h  uvc_driver.c  uvc_queue.o  uvc_video.c  uvcvideo.mod.c
uvcvideo.o
uvc_ctrl.c    uvc_driver.o  uvc_v4l2.c   uvcvideo.h   uvcvideo.mod.o
[root at localhost trunk]# modprobe uvcvideo
FATAL: Module uvcvideo not found.

The dmesg output is:
usb 1-5: new high speed USB device using address 3
usbcore: registered new driver snd-usb-audio
uvcvideo: Unknown symbol usb_put_intf
uvcvideo: Unknown symbol v4l_compat_translate_ioctl
uvcvideo: Unknown symbol remap_pfn_range
uvcvideo: Unknown symbol usb_get_intf
uvcvideo: Unknown symbol video_devdata
uvcvideo: Unknown symbol video_unregister_device
uvcvideo: Unknown symbol video_device_alloc
uvcvideo: Unknown symbol video_register_device
uvcvideo: Unknown symbol v4l2_ioctl_names
uvcvideo: Unknown symbol video_usercopy
uvcvideo: Unknown symbol video_device_release

    Any ideas? Any help is really appreciated.

Thanks in advance!
Cristiane
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070218/c9618f75/attachment.html>

From cristiane.koda at gmail.com  Sun Feb 18 18:44:26 2007
From: cristiane.koda at gmail.com (Cristiane koda)
Date: Sun, 18 Feb 2007 19:44:26 +0200
Subject: [Linux-uvc-devel] Java Applet for linux-uvc V4l2
Message-ID: <e47b5af60702180944k3c3d5f3s2a43b64c0df1eea2@mail.gmail.com>

Dear All,

    I'm using the application developed on C++, called luvcview.  I'm trying
to find a java applet for V4l2, like luvcview, that is possible to wrapper
the video. Do you guys know if is this available?
    I already tried jmfstudio, but it works just for v4l and there is no
forecast to deliver a solution for v4l2.
    Any ideas?

Thanks in advance,
Cristiane
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070218/0253f47d/attachment.html>

From list at mrtech.ru  Mon Feb 19 23:32:04 2007
From: list at mrtech.ru (Troex Nevelin)
Date: Tue, 20 Feb 2007 01:32:04 +0300
Subject: [Linux-uvc-devel] Choosing Logitech Pro 5000 or Fusion
Message-ID: <f3ecaa9eb73e9b41ea908cc4e76e54e4@mrtech.ru>

Hello

I'm planning to buy Logitech QuickCam Pro 5000 or Fusion model for 
capuring
Moscow city skyline with realtime uploading to web, maybe in future even
streaming. Currently I can't understand which camera is better for this 
task,
maybe someone can give me advise? What I want is better image quality 
and
better hardware support.

P.S.: I think gallery on site with images taken from UVC camera would 
be great.



From pierre.gronlier at gmail.com  Tue Feb 20 08:58:45 2007
From: pierre.gronlier at gmail.com (pierre gronlier)
Date: Tue, 20 Feb 2007 08:58:45 +0100
Subject: [Linux-uvc-devel] Choosing Logitech Pro 5000 or Fusion
In-Reply-To: <f3ecaa9eb73e9b41ea908cc4e76e54e4@mrtech.ru>
References: <f3ecaa9eb73e9b41ea908cc4e76e54e4@mrtech.ru>
Message-ID: <ecc945da0702192358h72a40f7bs602a51b21e75b6e0@mail.gmail.com>

Hi,

I don't know about the diff between Pro 5000 and Fusion model but you
should take a look here:
http://www.lesnumeriques.com/duels.php?ty=18&ma1=33&mo1=28&p1=786&ma2=33&mo2=40&p2=1275&ph=1

And if you are planning to build a streaming server, you should have a
look to ZoneMinder: http://www.zoneminder.com/

Btw, I have a Pro 5000 and it gives really great quality pictures and video.

regards,

--
pierre

On 19/02/07, Troex Nevelin <list at mrtech.ru> wrote:
> Hello
>
> I'm planning to buy Logitech QuickCam Pro 5000 or Fusion model for
> capuring
> Moscow city skyline with realtime uploading to web, maybe in future even
> streaming. Currently I can't understand which camera is better for this
> task,
> maybe someone can give me advise? What I want is better image quality
> and
> better hardware support.
>
> P.S.: I think gallery on site with images taken from UVC camera would
> be great.
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


-- 
http://ticapix.blogspot.com/


From linux at rubli.info  Tue Feb 20 09:18:08 2007
From: linux at rubli.info (Martin Rubli)
Date: Tue, 20 Feb 2007 00:18:08 -0800
Subject: [Linux-uvc-devel] Choosing Logitech Pro 5000 or Fusion
In-Reply-To: <f3ecaa9eb73e9b41ea908cc4e76e54e4@mrtech.ru>
References: <f3ecaa9eb73e9b41ea908cc4e76e54e4@mrtech.ru>
Message-ID: <op.tn1f0iat42iof8@nb-mrublixp.am.logitech.com>

On Mon, 19 Feb 2007 14:32:04 -0800, Troex Nevelin <list at mrtech.ru> wrote:

> I'm planning to buy Logitech QuickCam Pro 5000 or Fusion model for
> capuring
> Moscow city skyline with realtime uploading to web, maybe in future even
> streaming. Currently I can't understand which camera is better for this
> task,
> maybe someone can give me advise? What I want is better image quality
> and
> better hardware support.

Driver-wise the cameras are almost identical. Both are UVC compliant and  
you can use the same drivers for both on Linux (and Windows).

The main difference is the resolution they support. The Pro 5000 has a VGA  
sensor while the Fusion goes up to 1280x960. I posted a frame format  
matrix a while back, you can check the archives.

> P.S.: I think gallery on site with images taken from UVC camera would
> be great.

Good idea, I've added it on my todo list ...

Cheers,
Martin


From ich at martinfunk.de  Tue Feb 20 09:56:15 2007
From: ich at martinfunk.de (Martin Funk)
Date: Tue, 20 Feb 2007 09:56:15 +0100
Subject: [Linux-uvc-devel] Quick Cam Pro 5000 046d:08ce don't run on
 Ubuntu Feisty Fawn
In-Reply-To: <45D39847.5080108@martinfunk.de>
References: <45D1ED29.9070406@martinfunk.de>	<200702132039.32895.laurent.pinchart@skynet.be>	<45D2EF71.3040508@martinfunk.de>
	<45D39847.5080108@martinfunk.de>
Message-ID: <45DAB7AF.9050308@martinfunk.de>

Hi,

sorry for reheating my question, but I'm still in search of the 
component to blame, that the cam is not working. I understand that the 
Linux distro I'm using is in alpha state so problems have to be expected.
It's a Ubuntu Feisty Fawn on a amd64 dual core and uname -a tells me:
Linux fnk64-desktop 2.6.20-8-generic #2 SMP Tue Feb 13 01:14:41 UTC 2007 
x86_64 GNU/Linux

Maybe someone can give me a hint on where to tweak the logging to get 
more information.
I'm not much of a c-programmer and far off understanding the 
architecture of the uvcvideo module, but I should be able to add another 
uvc_trace here or there.

K?lle Alaaf,

Martin Funk

Martin Funk schrieb:
> I dug a little deeper into this.
>
> Before I this I didn't know how to set the trace level for a kernel 
> module, but now I think I do.
>
> At least this
>  >sudo modprobe uvcvideo trace=0xffff
> made the module very talkative:
>
> The first messages seem to belong to the startup phase of the driver.
> At [284.099774] i started luvcview
>
> Feb 14 23:54:47 fnk64-desktop kernel: [  244.790239] uvcvideo: Probing 
> generic UVC device 4.4
> Feb 14 23:54:47 fnk64-desktop kernel: [  244.790251] uvcvideo: Found 
> format MJPEG.
> Feb 14 23:54:47 fnk64-desktop kernel: [  244.790253] uvcvideo: - 160x120 
> (30.0 fps)
> Feb 14 23:54:47 fnk64-desktop kernel: [  244.790256] uvcvideo: - 176x144 
> (30.0 fps)
> Feb 14 23:54:47 fnk64-desktop kernel: [  244.790258] uvcvideo: - 320x240 
> (15.0 fps)
> Feb 14 23:54:47 fnk64-desktop kernel: [  244.790261] uvcvideo: - 352x288 
> (15.0 fps)
> Feb 14 23:54:47 fnk64-desktop kernel: [  244.790263] uvcvideo: - 640x480 
> (15.0 fps)
> Feb 14 23:54:47 fnk64-desktop kernel: [  244.790265] uvcvideo: Found 
> format Uncompressed.
> Feb 14 23:54:47 fnk64-desktop kernel: [  244.790267] uvcvideo: - 160x120 
> (30.0 fps)
> Feb 14 23:54:47 fnk64-desktop kernel: [  244.790269] uvcvideo: - 176x144 
> (30.0 fps)
> Feb 14 23:54:47 fnk64-desktop kernel: [  244.790272] uvcvideo: - 320x240 
> (15.0 fps)
> Feb 14 23:54:47 fnk64-desktop kernel: [  244.790274] uvcvideo: - 352x288 
> (15.0 fps)
> Feb 14 23:54:47 fnk64-desktop kernel: [  244.790276] uvcvideo: - 640x480 
> (15.0 fps)
> Feb 14 23:54:47 fnk64-desktop kernel: [  244.790283] uvcvideo: Found a 
> Status endpoint (addr 87).
> Feb 14 23:54:47 fnk64-desktop kernel: [  244.790286] uvcvideo: Found UVC 
> 1.00 device <unnamed> (046d:08ce)
> Feb 14 23:54:47 fnk64-desktop kernel: [  244.790288] uvcvideo: Scanning 
> UVC chain: OT 5 <- Unit 4 <- Unit 3 <- Unit 2 <- IT 1
> Feb 14 23:54:47 fnk64-desktop kernel: [  244.790293] uvcvideo: Found a 
> valid video chain (1 -> 5).
> Feb 14 23:54:48 fnk64-desktop kernel: [  244.799665] uvcvideo: UVC 
> device initialized.
> Feb 14 23:54:48 fnk64-desktop kernel: [  244.799725] usbcore: registered 
> new interface driver uvcvideo
> Feb 14 23:54:48 fnk64-desktop kernel: [  244.799797] USB Video Class 
> driver (v0.1.0-c)
> Feb 14 23:54:48 fnk64-desktop NetworkManager: <debug 
> info>^I[1171493688.045799] nm_hal_device_added (): New device added (hal 
> udi is 
> '/org/freedesktop/Hal/devices/usb_device_46d_8ce_DD8DC2A1_video4linux').
> Feb 14 23:55:14 fnk64-desktop kernel: [  255.904563] usbcore: 
> deregistering interface driver uvcvideo
> Feb 14 23:55:14 fnk64-desktop NetworkManager: <debug 
> info>^I[1171493714.727154] nm_hal_device_removed (): Device removed (hal 
> udi is 
> '/org/freedesktop/Hal/devices/usb_device_46d_8ce_DD8DC2A1_video4linux').
> Feb 14 23:55:33 fnk64-desktop kernel: [  263.893769] Linux video capture 
> interface: v2.00
> Feb 14 23:55:33 fnk64-desktop kernel: [  263.895334] uvcvideo: Probing 
> generic UVC device 4.4
> Feb 14 23:55:33 fnk64-desktop kernel: [  263.895347] uvcvideo: Found 
> format MJPEG.
> Feb 14 23:55:33 fnk64-desktop kernel: [  263.895349] uvcvideo: - 160x120 
> (30.0 fps)
> Feb 14 23:55:33 fnk64-desktop kernel: [  263.895352] uvcvideo: - 176x144 
> (30.0 fps)
> Feb 14 23:55:33 fnk64-desktop kernel: [  263.895354] uvcvideo: - 320x240 
> (15.0 fps)
> Feb 14 23:55:33 fnk64-desktop kernel: [  263.895357] uvcvideo: - 352x288 
> (15.0 fps)
> Feb 14 23:55:33 fnk64-desktop kernel: [  263.895359] uvcvideo: - 640x480 
> (15.0 fps)
> Feb 14 23:55:33 fnk64-desktop kernel: [  263.895361] uvcvideo: Found 
> format Uncompressed.
> Feb 14 23:55:33 fnk64-desktop kernel: [  263.895363] uvcvideo: - 160x120 
> (30.0 fps)
> Feb 14 23:55:33 fnk64-desktop kernel: [  263.895365] uvcvideo: - 176x144 
> (30.0 fps)
> Feb 14 23:55:33 fnk64-desktop kernel: [  263.895368] uvcvideo: - 320x240 
> (15.0 fps)
> Feb 14 23:55:33 fnk64-desktop kernel: [  263.895370] uvcvideo: - 352x288 
> (15.0 fps)
> Feb 14 23:55:33 fnk64-desktop kernel: [  263.895372] uvcvideo: - 640x480 
> (15.0 fps)
> Feb 14 23:55:33 fnk64-desktop kernel: [  263.895381] uvcvideo: Found a 
> Status endpoint (addr 87).
> Feb 14 23:55:33 fnk64-desktop kernel: [  263.895384] uvcvideo: Found UVC 
> 1.00 device <unnamed> (046d:08ce)
> Feb 14 23:55:33 fnk64-desktop kernel: [  263.895387] uvcvideo: Scanning 
> UVC chain: OT 5 <- Unit 4 <- Unit 3 <- Unit 2 <- IT 1
> Feb 14 23:55:33 fnk64-desktop kernel: [  263.895392] uvcvideo: Found a 
> valid video chain (1 -> 5).
> Feb 14 23:55:33 fnk64-desktop kernel: [  263.904850] uvcvideo: UVC 
> device initialized.
> Feb 14 23:55:33 fnk64-desktop kernel: [  263.904917] usbcore: registered 
> new interface driver uvcvideo
> Feb 14 23:55:33 fnk64-desktop kernel: [  263.904986] USB Video Class 
> driver (v0.1.0-c)
> Feb 14 23:55:33 fnk64-desktop NetworkManager: <debug 
> info>^I[1171493733.983507] nm_hal_device_added (): New device added (hal 
> udi is 
> '/org/freedesktop/Hal/devices/usb_device_46d_8ce_DD8DC2A1_video4linux').
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.099774] uvcvideo: uvc_v4l2_open
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.099824] uvcvideo: 
> uvc_v4l2_ioctl
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.099827] v4l2 ioctl 
> VIDIOC_QUERYCAP, dir=r- (0x80685600)
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.099918] uvcvideo: 
> uvc_v4l2_ioctl
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.099956] v4l2 ioctl 
> VIDIOC_S_FMT, dir=rw (0xc0d05605)
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.099959] uvcvideo: Trying 
> format 0x47504a4d (MJPG): 320x240.
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.099962] uvcvideo: Using 
> default frame interval 66666.6 us (15.0 fps).
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.119175] uvcvideo: 
> uvc_v4l2_ioctl
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.119228] v4l2 ioctl 
> VIDIOC_S_PARM, dir=rw (0xc0cc5616)
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.119231] uvcvideo: Setting 
> frame interval to 1/15 (666666).
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.135809] uvcvideo: 
> uvc_v4l2_ioctl
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.135812] v4l2 ioctl 
> VIDIOC_REQBUFS, dir=rw (0xc0145608)
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.135925] uvcvideo: 
> uvc_v4l2_ioctl
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.135927] v4l2 ioctl 
> VIDIOC_QUERYBUF, dir=rw (0xc0585609)
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.136025] uvcvideo: uvc_v4l2_mmap
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.136069] uvcvideo: 
> uvc_v4l2_ioctl
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.136071] v4l2 ioctl 
> VIDIOC_QUERYBUF, dir=rw (0xc0585609)
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.136172] uvcvideo: uvc_v4l2_mmap
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.136218] uvcvideo: 
> uvc_v4l2_ioctl
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.136219] v4l2 ioctl 
> VIDIOC_QUERYBUF, dir=rw (0xc0585609)
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.136319] uvcvideo: uvc_v4l2_mmap
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.136371] uvcvideo: 
> uvc_v4l2_ioctl
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.136373] v4l2 ioctl 
> VIDIOC_QUERYBUF, dir=rw (0xc0585609)
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.136476] uvcvideo: uvc_v4l2_mmap
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.136522] uvcvideo: 
> uvc_v4l2_ioctl
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.136524] v4l2 ioctl 
> VIDIOC_QBUF, dir=rw (0xc058560f)
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.136525] uvcvideo: Queuing 
> buffer 0.
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.136665] uvcvideo: 
> uvc_v4l2_ioctl
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.136667] v4l2 ioctl 
> VIDIOC_QBUF, dir=rw (0xc058560f)
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.136669] uvcvideo: Queuing 
> buffer 1.
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.136809] uvcvideo: 
> uvc_v4l2_ioctl
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.136811] v4l2 ioctl 
> VIDIOC_QBUF, dir=rw (0xc058560f)
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.136812] uvcvideo: Queuing 
> buffer 2.
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.136953] uvcvideo: 
> uvc_v4l2_ioctl
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.136955] v4l2 ioctl 
> VIDIOC_QBUF, dir=rw (0xc058560f)
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.136957] uvcvideo: Queuing 
> buffer 3.
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.165685] uvcvideo: 
> uvc_v4l2_ioctl
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.165691] v4l2 ioctl 
> VIDIOC_STREAMON, dir=-w (0x40045612)
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.165967] uvcvideo: 
> uvc_v4l2_ioctl
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.165970] v4l2 ioctl 
> VIDIOC_DQBUF, dir=rw (0xc0585611)
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.166061] uvcvideo: Dequeuing 
> buffer 0.
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.171785] uvcvideo: Dropping 
> packet (out of sync).
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.171788] uvcvideo: Dropping 
> packet (out of sync).
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.171790] uvcvideo: Dropping 
> packet (out of sync).
> Feb 14 23:56:19 fnk64-desktop kernel: [  284.171791] uvcvideo: Dropping 
> packet (out of sync).
>
> Martin Funk schrieb:
>   
>> Hi Laurent,
>>
>>  >luvcview
>>
>> response with this on the shell:
>>
>> luvcview version 0.2.0
>> Video driver: x11
>> A window manager is available
>> video /dev/video0
>>
>>
>> a new window with the title "LUVCview(c)Laurent Pinchart && Michel Xhaard"
>> is opened.
>> The green light on the cam is turned on.
>> There are no messages in any log file, but: No pictures to be seen 
>> nowhere :-(
>>
>> luvcview seems to see the device though, since:
>>  >luvcview -L
>> luvcview version 0.2.0
>> Video driver: x11
>> A window manager is available
>> video /dev/video0
>> /dev/video0 does not support read i/o
>> { pixelformat = 'MJPG', description = 'MJPEG' }
>> { pixelformat = 'YUYV', description = 'Uncompressed' }
>>
>> Also uvcvideo seems to see something of the device, since a push on the 
>> cam button leads to this entry:
>> Feb 14 10:41:52 fnk64-desktop kernel: [ 1505.024051] uvcvideo: Button 
>> event (1).
>> Feb 14 10:41:52 fnk64-desktop kernel: [ 1505.123872] uvcvideo: Button 
>> event (0).
>> in the syslog.
>>
>> The XWindow can't be closed either. luvcvideo responses with "Stop 
>> asked" but doesn't close the window.
>> To close the window I do a kill -9 on luvcvideo.
>>
>> By the way Ekiga can't drive the video either, but it can drive the 
>> cam's microphone.
>>
>> Anything else, I can do to assist?
>>
>> Martin
>>
>> Laurent Pinchart schrieb:
>>   
>>     
>>> Hi Martin,
>>>
>>>   
>>>     
>>>       
>>>> I just got myself a QuickCam Pro 5000 046d:08ce
>>>> it runs using Windows, but using Linux I have problems
>>>>
>>>> When I plug in the cam ist is recognized by lsusb:
>>>> Bus 002 Device 019: ID 046d:08ce Logitech, Inc.
>>>>
>>>>     
>>>>       
>>>>         
>>> [...]
>>>   
>>>     
>>>       
>>>> Linux video capture interface: v2.00
>>>> uvcvideo: Found UVC 1.00 device <unnamed> (046d:08ce)
>>>>     
>>>>       
>>>>         
>>> This line is good news, it means the driver recognised your webcam and 
>>> initialised it successfully.
>>>
>>>   
>>>     
>>>       
>>>> usbcore: registered new interface driver uvcvideo
>>>> USB Video Class driver (v0.1.0-c)
>>>>
>>>> and a
>>>> crw-rw---- 1 root video 81, 0 2007-02-13 17:43 /dev/video0
>>>> is created.
>>>>     
>>>>       
>>>>         
>>> That's good too.
>>>
>>>   
>>>     
>>>       
>>>> Unfortunately when I start
>>>>
>>>>  >xawtv
>>>>
>>>> The little green lamp is turned on but I see this on the shell
>>>>     
>>>>       
>>>>         
>>> xawtv is not known to work the the Linux UVC driver. Could you try luvcview 
>>> and see if you're more successful ?
>>>
>>> Best regards,
>>>
>>> Laurent Pinchart
>>>
>>>   
>>>     
>>>       
>> _______________________________________________
>> Linux-uvc-devel mailing list
>> Linux-uvc-devel at lists.berlios.de
>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>
>>   
>>     
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>   



From noblepepper at bellsouth.net  Tue Feb 20 13:05:45 2007
From: noblepepper at bellsouth.net (Noble Pepper)
Date: Tue, 20 Feb 2007 12:05:45 +0000 (UTC)
Subject: [Linux-uvc-devel] make my N800 work as web-cam
References: <45D06B1C.7050503@indt.org.br>
Message-ID: <loom.20070220T123558-647@post.gmane.org>

Edgard Lima <edgard.lima <at> indt.org.br> writes:

> 
> 
> Hi all, someone could help me please?!?!
> 
> Im trying to compile Linux-UVC on scratchbox to use it on my N800:
> 
> 1- I'm getting the following error on my  N800:
> 
> Nokia-N800-01:/home/user# modprobe uvcvideo.ko
<snip>

> 
> Thanks In Advance,
> Edgard
> 
If you look in the archives from October 2006 you will see some messages from me
about getting the UVC-video driver to work on a N770, the N800 should be about
the same. I'm working on my 800 right now duplicating what I did on the 770.

All this is to use the Nokia in USB controller mode to use a UVC compliant
camera, in my case a logitech Orb. I then connect over wifi and can serve the
pictures to whereever. Of course you need to use the USB power hacks to power
the camera. 

The warnings are irrelevant, ignore them. There were some issues with constants
defined in V4L2 header files, they cause unable to allocate buffer errors. I
worked around this by hardcoding the values instead of using the defines.

I don't think modprobe works on the Nokia you can use insmod.




From schlesix at gmx.de  Tue Feb 20 20:02:45 2007
From: schlesix at gmx.de (Thomas Schlesinger)
Date: Tue, 20 Feb 2007 20:02:45 +0100
Subject: [Linux-uvc-devel] Quick Cam Pro 5000 046d:08ce don't run on
 Ubuntu Feisty Fawn
In-Reply-To: <45DAB7AF.9050308@martinfunk.de>
References: <45D1ED29.9070406@martinfunk.de>
	<200702132039.32895.laurent.pinchart@skynet.be>
	<45D2EF71.3040508@martinfunk.de>	<45D39847.5080108@martinfunk.de>
	<45DAB7AF.9050308@martinfunk.de>
Message-ID: <20070220190245.301040@gmx.net>


-------- Original-Nachricht --------
Datum: Tue, 20 Feb 2007 09:56:15 +0100
Von: Martin Funk <ich at martinfunk.de>
An: linux-uvc-devel at lists.berlios.de
CC: 
Betreff: Re: [Linux-uvc-devel] Quick Cam Pro 5000 046d:08ce don\'t run on Ubuntu Feisty Fawn

> Hi,
> 
> sorry for reheating my question, but I'm still in search of the 
> component to blame, that the cam is not working. I understand that the 
> Linux distro I'm using is in alpha state so problems have to be expected.

Hi,

I've bought this Webcam yesterday, too, in trust of http://linux-uvc.berlios.de/#devices.

I want to add the output of v4l-video here, hoping it helps somehow ;-)

I've modified the usb_driver.c of uvc, like mentioned in another posting:

static struct usb_device_id uvc_ids[] = {
? ? ? ? { .match_flags = USB_DEVICE_ID_MATCH_DEVICE
? ? ? ? ? ? ? ? ? ? ? ? | USB_DEVICE_ID_MATCH_INT_INFO,
? ? ? ? ? ? ? ? ? ? ? ? .idVendor = 0x046d,
? ? ? ? ? ? ? ? ? ? ? ? .idProduct = 0x08ce,
? ? ? ? ? ? ? ? ? ? ? ? .bInterfaceClass = USB_CLASS_VENDOR_SPEC,
? ? ? ? ? ? ? ? ? ? ? ? .bInterfaceSubClass = 1,
? ? ? ? ? ? ? ? ? ? ? ? .bInterfaceProtocol = 0
? ? ? ? },
[..]

This is the output of v4l-info:

thomas at SchlesisTP:~$ v4l-info

### v4l2 device info [/dev/video0] ###
general info
? ? VIDIOC_QUERYCAP
? ? ? ? driver ? ? ? ? ? ? ? ? ?: "uvcvideo"
? ? ? ? card ? ? ? ? ? ? ? ? ? ?: "USB Video Class device"
? ? ? ? bus_info ? ? ? ? ? ? ? ?: "0000:00:1d.7"
? ? ? ? version ? ? ? ? ? ? ? ? : 0.1.0
? ? ? ? capabilities ? ? ? ? ? ?: 0x4000001 [VIDEO_CAPTURE,STREAMING]

standards

inputs
? ? VIDIOC_ENUMINPUT(0)
? ? ? ? index ? ? ? ? ? ? ? ? ? : 0
? ? ? ? name ? ? ? ? ? ? ? ? ? ?: "Camera"
? ? ? ? type ? ? ? ? ? ? ? ? ? ?: CAMERA
? ? ? ? audioset ? ? ? ? ? ? ? ?: 0
? ? ? ? tuner ? ? ? ? ? ? ? ? ? : 0
? ? ? ? std ? ? ? ? ? ? ? ? ? ? : 0x0 []
? ? ? ? status ? ? ? ? ? ? ? ? ?: 0x0 []

video capture
? ? VIDIOC_ENUM_FMT(0,VIDEO_CAPTURE)
? ? ? ? index ? ? ? ? ? ? ? ? ? : 0
? ? ? ? type ? ? ? ? ? ? ? ? ? ?: VIDEO_CAPTURE
? ? ? ? flags ? ? ? ? ? ? ? ? ? : 1
? ? ? ? description ? ? ? ? ? ? : "MJPEG"
? ? ? ? pixelformat ? ? ? ? ? ? : 0x47504a4d [MJPG]
? ? VIDIOC_ENUM_FMT(1,VIDEO_CAPTURE)
? ? ? ? index ? ? ? ? ? ? ? ? ? : 1
? ? ? ? type ? ? ? ? ? ? ? ? ? ?: VIDEO_CAPTURE
? ? ? ? flags ? ? ? ? ? ? ? ? ? : 0
? ? ? ? description ? ? ? ? ? ? : "Uncompressed"
? ? ? ? pixelformat ? ? ? ? ? ? : 0x56595559 [YUYV]
? ? VIDIOC_G_FMT(VIDEO_CAPTURE)
? ? ? ? type ? ? ? ? ? ? ? ? ? ?: VIDEO_CAPTURE
? ? ? ? fmt.pix.width ? ? ? ? ? : 160
? ? ? ? fmt.pix.height ? ? ? ? ?: 120
? ? ? ? fmt.pix.pixelformat ? ? : 0x47504a4d [MJPG]
? ? ? ? fmt.pix.field ? ? ? ? ? : NONE
? ? ? ? fmt.pix.bytesperline ? ?: 0
? ? ? ? fmt.pix.sizeimage ? ? ? : 38400
? ? ? ? fmt.pix.colorspace ? ? ?: SRGB
? ? ? ? fmt.pix.priv ? ? ? ? ? ?: 0

controls
? ? VIDIOC_QUERYCTRL(BASE+0)
? ? ? ? id ? ? ? ? ? ? ? ? ? ? ?: 9963776
? ? ? ? type ? ? ? ? ? ? ? ? ? ?: INTEGER
? ? ? ? name ? ? ? ? ? ? ? ? ? ?: "Brightness"
? ? ? ? minimum ? ? ? ? ? ? ? ? : 0
? ? ? ? maximum ? ? ? ? ? ? ? ? : 255
? ? ? ? step ? ? ? ? ? ? ? ? ? ?: 1
? ? ? ? default_value ? ? ? ? ? : 127
? ? ? ? flags ? ? ? ? ? ? ? ? ? : 0
? ? VIDIOC_QUERYCTRL(BASE+1)
? ? ? ? id ? ? ? ? ? ? ? ? ? ? ?: 9963777
? ? ? ? type ? ? ? ? ? ? ? ? ? ?: INTEGER
? ? ? ? name ? ? ? ? ? ? ? ? ? ?: "Contrast"
? ? ? ? minimum ? ? ? ? ? ? ? ? : 0
? ? ? ? maximum ? ? ? ? ? ? ? ? : 255
? ? ? ? step ? ? ? ? ? ? ? ? ? ?: 1
? ? ? ? default_value ? ? ? ? ? : 32
? ? ? ? flags ? ? ? ? ? ? ? ? ? : 0
? ? VIDIOC_QUERYCTRL(BASE+2)
? ? ? ? id ? ? ? ? ? ? ? ? ? ? ?: 9963778
? ? ? ? type ? ? ? ? ? ? ? ? ? ?: INTEGER
? ? ? ? name ? ? ? ? ? ? ? ? ? ?: "Saturation"
? ? ? ? minimum ? ? ? ? ? ? ? ? : 0
? ? ? ? maximum ? ? ? ? ? ? ? ? : 255
? ? ? ? step ? ? ? ? ? ? ? ? ? ?: 1
? ? ? ? default_value ? ? ? ? ? : 32
? ? ? ? flags ? ? ? ? ? ? ? ? ? : 0
? ? VIDIOC_QUERYCTRL(PRIVATE_BASE+0)
? ? ? ? id ? ? ? ? ? ? ? ? ? ? ?: 134217728
? ? ? ? type ? ? ? ? ? ? ? ? ? ?: INTEGER
? ? ? ? name ? ? ? ? ? ? ? ? ? ?: "Backlight Compensation"
? ? ? ? minimum ? ? ? ? ? ? ? ? : 0
? ? ? ? maximum ? ? ? ? ? ? ? ? : 2
? ? ? ? step ? ? ? ? ? ? ? ? ? ?: 1
? ? ? ? default_value ? ? ? ? ? : 1
? ? ? ? flags ? ? ? ? ? ? ? ? ? : 0
? ? VIDIOC_QUERYCTRL(PRIVATE_BASE+1)
? ? ? ? id ? ? ? ? ? ? ? ? ? ? ?: 134217729
? ? ? ? type ? ? ? ? ? ? ? ? ? ?: MENU
? ? ? ? name ? ? ? ? ? ? ? ? ? ?: "Power Line Frequency"
? ? ? ? minimum ? ? ? ? ? ? ? ? : 0
? ? ? ? maximum ? ? ? ? ? ? ? ? : 2
? ? ? ? step ? ? ? ? ? ? ? ? ? ?: 1
? ? ? ? default_value ? ? ? ? ? : 2
? ? ? ? flags ? ? ? ? ? ? ? ? ? : 0
? ? VIDIOC_QUERYCTRL(PRIVATE_BASE+2)
? ? ? ? id ? ? ? ? ? ? ? ? ? ? ?: 134217730
? ? ? ? type ? ? ? ? ? ? ? ? ? ?: INTEGER
? ? ? ? name ? ? ? ? ? ? ? ? ? ?: "Sharpness"
? ? ? ? minimum ? ? ? ? ? ? ? ? : 0
? ? ? ? maximum ? ? ? ? ? ? ? ? : 255
? ? ? ? step ? ? ? ? ? ? ? ? ? ?: 1
? ? ? ? default_value ? ? ? ? ? : 50
? ? ? ? flags ? ? ? ? ? ? ? ? ? : 0

### video4linux device info [/dev/video0] ###
general info
? ? VIDIOCGCAP
? ? ? ? name ? ? ? ? ? ? ? ? ? ?: "USB Video Class device"
? ? ? ? type ? ? ? ? ? ? ? ? ? ?: 0x1 [CAPTURE]
? ? ? ? channels ? ? ? ? ? ? ? ?: 1
? ? ? ? audios ? ? ? ? ? ? ? ? ?: 0
? ? ? ? maxwidth ? ? ? ? ? ? ? ?: 640
? ? ? ? maxheight ? ? ? ? ? ? ? : 480
? ? ? ? minwidth ? ? ? ? ? ? ? ?: 48
? ? ? ? minheight ? ? ? ? ? ? ? : 32

channels
ioctl VIDIOCGCHAN: Invalid argument

tuner
ioctl VIDIOCGTUNER: Invalid argument

audio
ioctl VIDIOCGAUDIO: Invalid argument

picture
? ? VIDIOCGPICT
? ? ? ? brightness ? ? ? ? ? ? ?: 32639
? ? ? ? hue ? ? ? ? ? ? ? ? ? ? : 0
? ? ? ? colour ? ? ? ? ? ? ? ? ?: 8224
? ? ? ? contrast ? ? ? ? ? ? ? ?: 8224
? ? ? ? whiteness ? ? ? ? ? ? ? : 0
? ? ? ? depth ? ? ? ? ? ? ? ? ? : 0
? ? ? ? palette ? ? ? ? ? ? ? ? : unknown

buffer
ioctl VIDIOCGFBUF: Invalid argument

window
? ? VIDIOCGWIN
? ? ? ? x ? ? ? ? ? ? ? ? ? ? ? : 0
? ? ? ? y ? ? ? ? ? ? ? ? ? ? ? : 0
? ? ? ? width ? ? ? ? ? ? ? ? ? : 160
? ? ? ? height ? ? ? ? ? ? ? ? ?: 120
? ? ? ? chromakey ? ? ? ? ? ? ? : 0
? ? ? ? flags ? ? ? ? ? ? ? ? ? : 0


K?lle Alaaf!
Thomas

-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser


From ich at martinfunk.de  Tue Feb 20 22:05:26 2007
From: ich at martinfunk.de (Martin Funk)
Date: Tue, 20 Feb 2007 22:05:26 +0100
Subject: [Linux-uvc-devel] Quick Cam Pro 5000 046d:08ce don't run on
 Ubuntu Feisty Fawn
In-Reply-To: <20070220190245.301040@gmx.net>
References: <45D1ED29.9070406@martinfunk.de>	<200702132039.32895.laurent.pinchart@skynet.be>	<45D2EF71.3040508@martinfunk.de>	<45D39847.5080108@martinfunk.de>	<45DAB7AF.9050308@martinfunk.de>
	<20070220190245.301040@gmx.net>
Message-ID: <45DB6296.7090108@martinfunk.de>

Hi Thomas,

verry same output of v4l-video here, just the bus_info differs.
It also makes no difference if the given uvc_ids is added to the code or 
not.

Martin


Thomas Schlesinger schrieb:
> -------- Original-Nachricht --------
> Datum: Tue, 20 Feb 2007 09:56:15 +0100
> Von: Martin Funk <ich at martinfunk.de>
> An: linux-uvc-devel at lists.berlios.de
> CC: 
> Betreff: Re: [Linux-uvc-devel] Quick Cam Pro 5000 046d:08ce don\'t run on Ubuntu Feisty Fawn
>
>   
>> Hi,
>>
>> sorry for reheating my question, but I'm still in search of the 
>> component to blame, that the cam is not working. I understand that the 
>> Linux distro I'm using is in alpha state so problems have to be expected.
>>     
>
> Hi,
>
> I've bought this Webcam yesterday, too, in trust of http://linux-uvc.berlios.de/#devices.
>
> I want to add the output of v4l-video here, hoping it helps somehow ;-)
>
> I've modified the usb_driver.c of uvc, like mentioned in another posting:
>
> static struct usb_device_id uvc_ids[] = {
>         { .match_flags = USB_DEVICE_ID_MATCH_DEVICE
>                         | USB_DEVICE_ID_MATCH_INT_INFO,
>                         .idVendor = 0x046d,
>                         .idProduct = 0x08ce,
>                         .bInterfaceClass = USB_CLASS_VENDOR_SPEC,
>                         .bInterfaceSubClass = 1,
>                         .bInterfaceProtocol = 0
>         },
> [..]
>
> This is the output of v4l-info:
>
> thomas at SchlesisTP:~$ v4l-info
>
> ### v4l2 device info [/dev/video0] ###
> general info
>     VIDIOC_QUERYCAP
>         driver                  : "uvcvideo"
>         card                    : "USB Video Class device"
>         bus_info                : "0000:00:1d.7"
>         version                 : 0.1.0
>         capabilities            : 0x4000001 [VIDEO_CAPTURE,STREAMING]
>
> standards
>
> inputs
>     VIDIOC_ENUMINPUT(0)
>         index                   : 0
>         name                    : "Camera"
>         type                    : CAMERA
>         audioset                : 0
>         tuner                   : 0
>         std                     : 0x0 []
>         status                  : 0x0 []
>
> video capture
>     VIDIOC_ENUM_FMT(0,VIDEO_CAPTURE)
>         index                   : 0
>         type                    : VIDEO_CAPTURE
>         flags                   : 1
>         description             : "MJPEG"
>         pixelformat             : 0x47504a4d [MJPG]
>     VIDIOC_ENUM_FMT(1,VIDEO_CAPTURE)
>         index                   : 1
>         type                    : VIDEO_CAPTURE
>         flags                   : 0
>         description             : "Uncompressed"
>         pixelformat             : 0x56595559 [YUYV]
>     VIDIOC_G_FMT(VIDEO_CAPTURE)
>         type                    : VIDEO_CAPTURE
>         fmt.pix.width           : 160
>         fmt.pix.height          : 120
>         fmt.pix.pixelformat     : 0x47504a4d [MJPG]
>         fmt.pix.field           : NONE
>         fmt.pix.bytesperline    : 0
>         fmt.pix.sizeimage       : 38400
>         fmt.pix.colorspace      : SRGB
>         fmt.pix.priv            : 0
>
> controls
>     VIDIOC_QUERYCTRL(BASE+0)
>         id                      : 9963776
>         type                    : INTEGER
>         name                    : "Brightness"
>         minimum                 : 0
>         maximum                 : 255
>         step                    : 1
>         default_value           : 127
>         flags                   : 0
>     VIDIOC_QUERYCTRL(BASE+1)
>         id                      : 9963777
>         type                    : INTEGER
>         name                    : "Contrast"
>         minimum                 : 0
>         maximum                 : 255
>         step                    : 1
>         default_value           : 32
>         flags                   : 0
>     VIDIOC_QUERYCTRL(BASE+2)
>         id                      : 9963778
>         type                    : INTEGER
>         name                    : "Saturation"
>         minimum                 : 0
>         maximum                 : 255
>         step                    : 1
>         default_value           : 32
>         flags                   : 0
>     VIDIOC_QUERYCTRL(PRIVATE_BASE+0)
>         id                      : 134217728
>         type                    : INTEGER
>         name                    : "Backlight Compensation"
>         minimum                 : 0
>         maximum                 : 2
>         step                    : 1
>         default_value           : 1
>         flags                   : 0
>     VIDIOC_QUERYCTRL(PRIVATE_BASE+1)
>         id                      : 134217729
>         type                    : MENU
>         name                    : "Power Line Frequency"
>         minimum                 : 0
>         maximum                 : 2
>         step                    : 1
>         default_value           : 2
>         flags                   : 0
>     VIDIOC_QUERYCTRL(PRIVATE_BASE+2)
>         id                      : 134217730
>         type                    : INTEGER
>         name                    : "Sharpness"
>         minimum                 : 0
>         maximum                 : 255
>         step                    : 1
>         default_value           : 50
>         flags                   : 0
>
> ### video4linux device info [/dev/video0] ###
> general info
>     VIDIOCGCAP
>         name                    : "USB Video Class device"
>         type                    : 0x1 [CAPTURE]
>         channels                : 1
>         audios                  : 0
>         maxwidth                : 640
>         maxheight               : 480
>         minwidth                : 48
>         minheight               : 32
>
> channels
> ioctl VIDIOCGCHAN: Invalid argument
>
> tuner
> ioctl VIDIOCGTUNER: Invalid argument
>
> audio
> ioctl VIDIOCGAUDIO: Invalid argument
>
> picture
>     VIDIOCGPICT
>         brightness              : 32639
>         hue                     : 0
>         colour                  : 8224
>         contrast                : 8224
>         whiteness               : 0
>         depth                   : 0
>         palette                 : unknown
>
> buffer
> ioctl VIDIOCGFBUF: Invalid argument
>
> window
>     VIDIOCGWIN
>         x                       : 0
>         y                       : 0
>         width                   : 160
>         height                  : 120
>         chromakey               : 0
>         flags                   : 0
>
>
> K?lle Alaaf!
> Thomas
>
>   



From lists at l8r.net  Wed Feb 21 05:04:35 2007
From: lists at l8r.net (Brad Barnett)
Date: Tue, 20 Feb 2007 23:04:35 -0500
Subject: [Linux-uvc-devel] system bootup pain
Message-ID: <20070220230435.1c1e5462@be.back.l8r.net>



Hey all,

I seem to have no problems using UVC, unless I bootup my system with my
camera attached.  When that happens, effectively my system stops booting.

For debugging purposes, I removed the uvcvideo module, and then manually
insmoded it after a boot.  When doing so, the insmod command never exits,
and the process uses almost 100% CPU.  I am using the various patches I
found around, in order to resolve the constant issue with the
driver/camera crashing and falling into a dead state.

Anyone have any ideas?  I am using a USB hub with the camera...


From christophe.gisquet at free.fr  Thu Feb 22 15:34:15 2007
From: christophe.gisquet at free.fr (christophe.gisquet at free.fr)
Date: Thu, 22 Feb 2007 15:34:15 +0100
Subject: [Linux-uvc-devel] Divide by 0 in uvcvideo module with 2 webcams
	plugged
Message-ID: <1172154855.45dda9e781e3c@imp.free.fr>

The setup:
- 2 uvcvideo webcams (in my case Logitech Pro 5000 and Fusion)
- A proprietary display software (can't start capture with mplayer
SVN-r21861 to validate)
- uvcvideo r88
- stock Debian Etch kernel (but tainted by nvidia proprietary module):
Linux tobago 2.6.18-3-686 #1 SMP Mon Dec 4 16:41:14 UTC 2006 i686 GNU/Linux

How to reproduce:
- open and initialize first device (any of /dev/video[0-1])
- then do the same for second device

What happens:
- first device continues streaming seamlessly
- second device causes a divide by zero in uvcvideo module:
=== Start message ===
divide error: 0000 [#3]
SMP
Modules linked in: uvcvideo snd_usb_audio snd_usb_lib snd_hwdep tsdev
binfmt_misc ppdev lp autofs4 button ac battery ipv6 nfs lockd nfs_acl sunrpc
fuse dm_crypt dm_snapshot dm_mirror dm_mod ovcamchip ov511 pwc usbmouse usbhid
sermouse oprofile nvidia sr_mod sbp2 snd_intel8x0 snd_ac97_codec snd_ac97_bus
snd_pcm_oss snd_mixer_oss snd_pcm snd_seq_dummy snd_seq_oss snd_seq_midi
snd_rawmidi snd_seq_midi_event snd_seq snd_timer compat_ioctl32 i2c_algo_bit
snd_seq_device videocodec videodev intel_agp v4l1_compat agpgart v4l2_common snd
i82875p_edac parport_pc i2c_i801 edac_mc psmouse serio_raw parport pcspkr
i2c_core soundcore shpchp pci_hotplug eth1394 floppy evdev snd_page_alloc rtc
ext3 jbd mbcache ide_generic ide_cd cdrom ide_disk ata_piix libata scsi_mod piix
ohci1394 e1000 ieee1394 generic ide_core ehci_hcd uhci_hcd usbcore thermal
processor fan
CPU:    1
EIP:    0060:[<f8e35048>]    Tainted: P      VLI
EFLAGS: 00210246   (2.6.18-3-686 #1)
EIP is at uvc_fraction_to_interval+0x9/0x42 [uvcvideo]
eax: 00000000   ebx: 00000000   ecx: 00000000   edx: 00000000
esi: f75a6a0c   edi: d14d3e78   ebp: d6961030   esp: d14d3e18
ds: 007b   es: 007b   ss: 0068
Process gtkplay (pid: 14110, ti=d14d2000 task=f655faa0 task.ti=d14d2000)
Stack: f75305c0 f75a6a0c d14d3e78 f8e37b68 d14d3e54 00000003 e323d600 d9a07ea0
       ec5ddf18 00000000 00000000 d14d3e68 c011669e e88a39a8 00000000 02020001
       00051615 00000000 00000004 00000000 00096000 00000bd0 02dc6c00 00000000
Call Trace:
 [<f8e37b68>] uvc_v4l2_do_ioctl+0x81a/0xaca [uvcvideo]
 [<c011669e>] __wake_up+0x2a/0x3d
 [<c0130a26>] futex_requeue+0x214/0x220
 [<f8a7e649>] video_usercopy+0x175/0x23b [videodev]
 [<c0102819>] do_notify_resume+0x4e4/0x5d7
 [<c0158e33>] do_filp_open+0x2b/0x31
 [<f8e36f7d>] uvc_v4l2_ioctl+0x31/0x37 [uvcvideo]
 [<f8e3734e>] uvc_v4l2_do_ioctl+0x0/0xaca [uvcvideo]
 [<c016937b>] do_ioctl+0x47/0x5d
 [<c01695db>] vfs_ioctl+0x24a/0x25c
 [<c0132030>] sys_futex+0xdc/0xf1
 [<c0169635>] sys_ioctl+0x48/0x5f
 [<c0102c11>] sysenter_past_esp+0x56/0x79
Code: 89 d5 8a 44 24 03 03 6b 0c 38 01 74 0d 46 83 c2 24 83 c1 24 39 fe 75 e8 31
ed 5a 89 e8 5b 5e 5f 5d c3 57 89 d1 56 31 d2 53 89 c3 <f7> f1 83 cf ff be 80 96
98 00 3d ac 01 00 00 76 06 eb 20 d1 ee
EIP: [<f8e35048>] uvc_fraction_to_interval+0x9/0x42 [uvcvideo] SS:ESP
0068:d14d3e18
=== End message ===
- the associated device is not cleaned, and is seen by the system as still in
use (modprobe -r uvcvideo fails)
- whatever the order of initialization, the second device

This corresponds to a divide by 0 in uvc_fraction_to_interval at uvc_drive:203 :
if (numerator/denominator >= ((uint32_t)-1)/10000000)

While 0 could be returned when denominator is 0, I didn't try that for 2
reasons:
- I can't unload the module (rmmod -f leaves the /dev/video* entries), probably
unless I reboot
- This is a symptom, not a cause

I have another uvcvideo device (Microsoft LifeCam NX-6000) to test with, once
I'll have figured whether it really works or not.

Best regards,
Christophe Gisquet


From laurent.pinchart at skynet.be  Fri Feb 23 13:27:13 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 23 Feb 2007 13:27:13 +0100
Subject: [Linux-uvc-devel] Still Image Capture
In-Reply-To: <op.tnq2ew2g42iof8@nb-mrublixp.am.logitech.com>
References: <e9390bb90702120734g274bc15ey25eeccb7502a6613@mail.gmail.com>
	<e9390bb90702140818g6c888d60p18778934b28e709d@mail.gmail.com>
	<op.tnq2ew2g42iof8@nb-mrublixp.am.logitech.com>
Message-ID: <200702231327.14175.laurent.pinchart@skynet.be>

> >> The good news is the QC notebook pro can capture video at 1.3 megapixel
> >> as well :-) All UVC webcams I am aware of implement still image capture
> >> method 1, which means they don't implement still image capture at all
> >> (method 1
> >> emulates still image capture in software).
>
> Laurent is right for the first part, all our Logitech QuickCam UVC cameras
> (except the QuickCam Pro 5000, which has a VGA sensor) can indeed stream
> at 1.3 MP. It's done without interpolation.
>
> However, they have method 2 still image capture support. Here's the
> corresponding section from the UVC descriptor: (This happens to be from a
> Pro 5000, but the others should be the same.)
>
>            ===>Video Class-Specific VS Video Input Header Descriptor<===
> bLength:                           0x10
> bDescriptorType:                   0x24
> bDescriptorSubtype:                0x01
> bNumFormats:                       0x03
> wTotalLength:                    0x0270  -> Validated
> bEndpointAddress:                  0x81  -> Direction: IN - EndpointID: 1
> bmInfo:                            0x00  -> Dynamic Format Change not
> Supported
> bTerminalLink:                     0x05
> bStillCaptureMethod:               0x02  -> Still Capture Method 2
> bTriggerSupport:                   0x01  -> Hardware Triggering Support
> bTriggerUsage:                     0x00  -> Host will initiate still image
> capture

You're right. My UVC parsing code in usb-utils has a small bug which reported 
invalid values for bStillCaptureMethod.

> > I seem to remember reading that the QC notebook pro interpolates
> > frames when streaming at resolutions greater than 640x480, but does
> > a non-interpolated still capture.  This is easy enough to test.  I can do
> > some capturing and compare image quality.  I also have a log of usb
> > traffic.  I can look at the transfer frames and see if the snap sends
> > more data.
> >
> > Not sure if I'll get to that today... I'm currently neck deep in an
> > embedded linux driver project.  Then again, if my new variable power
> > supply doesn't show up soon, I'll be spinning my tires and have plenty
> > of free time... :(
>
> I don't want to be unsupportive, but in the name of the Linux webcam
> community, let's hope for some shipping delay on your power supply. ;-)

I'll try to work on still image capture in the near future. I'm quite busy 
with another project right now, so there might be some delay. Still image 
capture method 2 requires the driver to suspend video streaming, so I might 
have to change some code deep in the driver. Hopefully I'll find a not too 
intrusive way.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Feb 23 13:28:51 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 23 Feb 2007 13:28:51 +0100
Subject: [Linux-uvc-devel] Quick Cam Pro 5000 046d:08ce don't run on
	Ubuntu Feisty Fawn
In-Reply-To: <20070220190245.301040@gmx.net>
References: <45D1ED29.9070406@martinfunk.de> <45DAB7AF.9050308@martinfunk.de>
	<20070220190245.301040@gmx.net>
Message-ID: <200702231328.51713.laurent.pinchart@skynet.be>

 Hi,

> > sorry for reheating my question, but I'm still in search of the
> > component to blame, that the cam is not working. I understand that the
> > Linux distro I'm using is in alpha state so problems have to be expected.
>
> Hi,
>
> I've bought this Webcam yesterday, too, in trust of
> http://linux-uvc.berlios.de/#devices.
>
> I want to add the output of v4l-video here, hoping it helps somehow ;-)
>
> I've modified the usb_driver.c of uvc, like mentioned in another posting:
>
> static struct usb_device_id uvc_ids[] = {
> ? ? ? ? { .match_flags = USB_DEVICE_ID_MATCH_DEVICE
> ? ? ? ? ? ? ? ? ? ? ? ? | USB_DEVICE_ID_MATCH_INT_INFO,
> ? ? ? ? ? ? ? ? ? ? ? ? .idVendor = 0x046d,
> ? ? ? ? ? ? ? ? ? ? ? ? .idProduct = 0x08ce,
> ? ? ? ? ? ? ? ? ? ? ? ? .bInterfaceClass = USB_CLASS_VENDOR_SPEC,
> ? ? ? ? ? ? ? ? ? ? ? ? .bInterfaceSubClass = 1,
> ? ? ? ? ? ? ? ? ? ? ? ? .bInterfaceProtocol = 0
> ? ? ? ? },

This shouldn't be needed. The driver should detect your camera without that 
change. If it doesn't, let's try to investigate that.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Feb 23 13:40:25 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 23 Feb 2007 13:40:25 +0100
Subject: [Linux-uvc-devel] Quick Cam Pro 5000 046d:08ce don't run on
	Ubuntu Feisty Fawn
In-Reply-To: <45DB6296.7090108@martinfunk.de>
References: <45D1ED29.9070406@martinfunk.de> <20070220190245.301040@gmx.net>
	<45DB6296.7090108@martinfunk.de>
Message-ID: <200702231340.25569.laurent.pinchart@skynet.be>

On Tuesday 20 February 2007 22:05, Martin Funk wrote:
> Hi Thomas,
>
> verry same output of v4l-video here, just the bus_info differs.
> It also makes no difference if the given uvc_ids is added to the code or
> not.

Here's what bothers me in your kernel log:

[  284.165685] uvcvideo: uvc_v4l2_ioctl
[  284.165691] v4l2 ioctl VIDIOC_STREAMON, dir=-w (0x40045612)
[  284.165967] uvcvideo: uvc_v4l2_ioctl
[  284.165970] v4l2 ioctl VIDIOC_DQBUF, dir=rw (0xc0585611)
[  284.166061] uvcvideo: Dequeuing buffer 0.
[  284.171785] uvcvideo: Dropping packet (out of sync).
[  284.171788] uvcvideo: Dropping packet (out of sync).
[  284.171790] uvcvideo: Dropping packet (out of sync).
[  284.171791] uvcvideo: Dropping packet (out of sync).

Right after started streaming, the application tries to dequeue the first 
buffer using VIDIOC_DQBUF. The ioctl checks the first buffer in the queue 
(which is buffer 0) and blocks until the buffer is filled with image data. It 
seems from what you reported that this never happens.

The driver keeps printing out-of-sync messages, and that shouldn't happen. An 
out-of-sync message can happen from times to times, but definitely not at the 
very beginning. Could you hack uvc_video.c to print more information in the 
out of sync message, such as the buffer number (buff->buf.index) and state 
(buff->buf.index) ?

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Feb 23 13:43:56 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 23 Feb 2007 13:43:56 +0100
Subject: [Linux-uvc-devel] Cannot run linux-uvc under CENTOS
In-Reply-To: <e47b5af60702180729o5650fac1oac161aa4a3b5f449@mail.gmail.com>
References: <e47b5af60702180729o5650fac1oac161aa4a3b5f449@mail.gmail.com>
Message-ID: <200702231343.56693.laurent.pinchart@skynet.be>

On Sunday 18 February 2007 16:29, Cristiane koda wrote:
> Hi,
>
>     I'm trying to install the uvcvideo driver on CENTOS, but I'm getting
> some erros during make..
>     The Kernel version is: 2.6.9-42.EL
>
> --------------------BEGIN---------------------
> [root at localhost trunk]# make
> Building USB Video Class driver...
> make[1]: Entering directory `/usr/src/kernels/2.6.9-42.EL-i686'
>   CC [M]  /home/utrafe/uvcvideo-r75/trunk/uvc_driver.o
> In file included from /home/utrafe/uvcvideo-r75/trunk/uvcvideo.h:8,
>                  from /home/utrafe/uvcvideo-r75/trunk/uvc_driver.c:44:
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:134: error: syntax error
> before "gfp_flags"
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:136: warning: static
> declaration of 'kzalloc' follows non-static declaration
> include/linux/slab.h:101: warning: previous declaration of 'kzalloc' was
> here
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h: In function `kzalloc':
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:136: error: number of
> arguments doesn't match prototype
> include/linux/slab.h:101: error: prototype declaration
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:137: error: `size' undeclared
> (first use in this function)
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:137: error: (Each undeclared
> identifier is reported only once
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:137: error: for each function
> it appears in.)
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:137: error: `gfp_flags'
> undeclared (first use in this function)
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h: In function `vm_insert_page':
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:158: warning: implicit
> declaration of function `remap_pfn_range'
> make[2]: *** [/home/utrafe/uvcvideo-r75/trunk/uvc_driver.o] Error 1
> make[1]: *** [_module_/home/utrafe/uvcvideo-r75/trunk] Error 2
> make[1]: Leaving directory `/usr/src/kernels/2.6.9-42.EL-i686'
> make: *** [uvcvideo] Error 2
> ------------------END--------------------------------
>
>      So, as a test I modified the file uvc_compat.h, removing from the line
> 134, "__nocast", then it compiles but I can't add the driver to the kernel,
> using modprobe.
>
>      Here is the output:
>
> ----------------BEGIN---------------------------
> [root at localhost trunk]# make
> Building USB Video Class driver...
> make[1]: Entering directory `/usr/src/kernels/2.6.9-42.EL-i686'
>   CC [M]  /home/utrafe/uvcvideo-r75/trunk/uvc_driver.o
> In file included from /home/utrafe/uvcvideo-r75/trunk/uvcvideo.h:8,
>                  from /home/utrafe/uvcvideo-r75/trunk/uvc_driver.c:44:
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:136: warning: static
> declaration of 'kzalloc' follows non-static declaration
> include/linux/slab.h:101: warning: previous declaration of 'kzalloc' was
> here
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h: In function `vm_insert_page':
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:158: warning: implicit
> declaration of function `remap_pfn_range'
>   CC [M]  /home/utrafe/uvcvideo-r75/trunk/uvc_queue.o
> In file included from /home/utrafe/uvcvideo-r75/trunk/uvcvideo.h:8,
>                  from /home/utrafe/uvcvideo-r75/trunk/uvc_queue.c:24:
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:136: warning: static
> declaration of 'kzalloc' follows non-static declaration
> include/linux/slab.h:101: warning: previous declaration of 'kzalloc' was
> here
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h: In function `vm_insert_page':
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:158: warning: implicit
> declaration of function `remap_pfn_range'
>   CC [M]  /home/utrafe/uvcvideo-r75/trunk/uvc_v4l2.o
> In file included from /home/utrafe/uvcvideo-r75/trunk/uvcvideo.h:8,
>                  from /home/utrafe/uvcvideo-r75/trunk/uvc_v4l2.c:28:
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:136: warning: static
> declaration of 'kzalloc' follows non-static declaration
> include/linux/slab.h:101: warning: previous declaration of 'kzalloc' was
> here
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h: In function `vm_insert_page':
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:158: warning: implicit
> declaration of function `remap_pfn_range'
>   CC [M]  /home/utrafe/uvcvideo-r75/trunk/uvc_video.o
> In file included from /home/utrafe/uvcvideo-r75/trunk/uvcvideo.h:8,
>                  from /home/utrafe/uvcvideo-r75/trunk/uvc_video.c:24:
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:136: warning: static
> declaration of 'kzalloc' follows non-static declaration
> include/linux/slab.h:101: warning: previous declaration of 'kzalloc' was
> here
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h: In function `vm_insert_page':
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:158: warning: implicit
> declaration of function `remap_pfn_range'
> /home/utrafe/uvcvideo-r75/trunk/uvc_video.c: In function
> `uvc_video_enable': /home/utrafe/uvcvideo-r75/trunk/uvc_video.c:696:
> warning: 'ep' might be used uninitialized in this function
>   CC [M]  /home/utrafe/uvcvideo-r75/trunk/uvc_ctrl.o
> In file included from /home/utrafe/uvcvideo-r75/trunk/uvcvideo.h:8,
>                  from /home/utrafe/uvcvideo-r75/trunk/uvc_ctrl.c:24:
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:136: warning: static
> declaration of 'kzalloc' follows non-static declaration
> include/linux/slab.h:101: warning: previous declaration of 'kzalloc' was
> here
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h: In function `vm_insert_page':
> /home/utrafe/uvcvideo-r75/trunk/uvc_compat.h:158: warning: implicit
> declaration of function `remap_pfn_range'
>   LD [M]  /home/utrafe/uvcvideo-r75/trunk/uvcvideo.o
>   Building modules, stage 2.
>   MODPOST
> *** Warning: "usb_get_intf" [/home/utrafe/uvcvideo-r75/trunk/uvcvideo.ko]
> undefined!
> *** Warning: "remap_pfn_range"
> [/home/utrafe/uvcvideo-r75/trunk/uvcvideo.ko] undefined!
> *** Warning: "usb_put_intf" [/home/utrafe/uvcvideo-r75/trunk/uvcvideo.ko]
> undefined!
>   CC      /home/utrafe/uvcvideo-r75/trunk/uvcvideo.mod.o
>   LD [M]  /home/utrafe/uvcvideo-r75/trunk/uvcvideo.ko
> make[1]: Leaving directory `/usr/src/kernels/2.6.9-42.EL-i686'
> [root at localhost trunk]#
> ------------------END-------------------------------
>
> [root at localhost trunk]# ls
> Makefile      uvc_ctrl.o    uvc_queue.c  uvc_v4l2.o   uvcvideo.ko
> uvc_video.o
> uvc_compat.h  uvc_driver.c  uvc_queue.o  uvc_video.c  uvcvideo.mod.c
> uvcvideo.o
> uvc_ctrl.c    uvc_driver.o  uvc_v4l2.c   uvcvideo.h   uvcvideo.mod.o
> [root at localhost trunk]# modprobe uvcvideo
> FATAL: Module uvcvideo not found.
>
> The dmesg output is:
> usb 1-5: new high speed USB device using address 3
> usbcore: registered new driver snd-usb-audio
> uvcvideo: Unknown symbol usb_put_intf
> uvcvideo: Unknown symbol v4l_compat_translate_ioctl
> uvcvideo: Unknown symbol remap_pfn_range
> uvcvideo: Unknown symbol usb_get_intf
> uvcvideo: Unknown symbol video_devdata
> uvcvideo: Unknown symbol video_unregister_device
> uvcvideo: Unknown symbol video_device_alloc
> uvcvideo: Unknown symbol video_register_device
> uvcvideo: Unknown symbol v4l2_ioctl_names
> uvcvideo: Unknown symbol video_usercopy
> uvcvideo: Unknown symbol video_device_release
>
>     Any ideas? Any help is really appreciated.

Could you upgrade to Linux 2.6.15 or newer ? Older versions are not known to 
work properly with the driver.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Feb 23 13:54:58 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 23 Feb 2007 13:54:58 +0100
Subject: [Linux-uvc-devel] system bootup pain
In-Reply-To: <20070220230435.1c1e5462@be.back.l8r.net>
References: <20070220230435.1c1e5462@be.back.l8r.net>
Message-ID: <200702231354.58704.laurent.pinchart@skynet.be>

> I seem to have no problems using UVC, unless I bootup my system with my
> camera attached.  When that happens, effectively my system stops booting.
>
> For debugging purposes, I removed the uvcvideo module, and then manually
> insmoded it after a boot.  When doing so, the insmod command never exits,
> and the process uses almost 100% CPU.  I am using the various patches I
> found around, in order to resolve the constant issue with the
> driver/camera crashing and falling into a dead state.
>
> Anyone have any ideas?  I am using a USB hub with the camera...

Could you try to connect the camera directly to the computer to see if the 
problem goes away ? Could you set the driver trace level to 255 (modprobe 
uvcvideo trace=255) and send me the kernel log when the CPU usage goes to 
100% ?

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Feb 23 14:06:08 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 23 Feb 2007 14:06:08 +0100
Subject: [Linux-uvc-devel] Divide by 0 in uvcvideo module with 2 webcams
	plugged
In-Reply-To: <1172154855.45dda9e781e3c@imp.free.fr>
References: <1172154855.45dda9e781e3c@imp.free.fr>
Message-ID: <200702231406.08783.laurent.pinchart@skynet.be>

Hi Christophe,

thanks for the bug report. There was indeed a possible division by zero, 
caused by a missing check on user-supplied parameters. I committed a fix to 
SVN. Could you please try it with your setup ? Thanks.

Best regards,

Laurent Pinchart


From ich at martinfunk.de  Fri Feb 23 18:13:17 2007
From: ich at martinfunk.de (Martin Funk)
Date: Fri, 23 Feb 2007 18:13:17 +0100
Subject: [Linux-uvc-devel] Quick Cam Pro 5000 046d:08ce don't run on
 Ubuntu Feisty Fawn
In-Reply-To: <200702231340.25569.laurent.pinchart@skynet.be>
References: <45D1ED29.9070406@martinfunk.de> <20070220190245.301040@gmx.net>
	<45DB6296.7090108@martinfunk.de>
	<200702231340.25569.laurent.pinchart@skynet.be>
Message-ID: <45DF20AD.3010302@martinfunk.de>

it works now!

And I'm a little ashamed of why it didn't before:

svn diff -r HEAD
Index: Makefile
===================================================================
--- Makefile    (Revision 89)
+++ Makefile    (Arbeitskopie)
@@ -1,6 +1,6 @@
  KERNEL_VERSION := `uname -r`
  KERNEL_DIR     := /lib/modules/$(KERNEL_VERSION)/build
-INSTALL_MOD_DIR        := usb/media
+INSTALL_MOD_DIR        := kernel/ubuntu/media/usbvideo

  PWD            := $(shell pwd)


adding the trace messages showed me, that I wasn't using the downloaded 
module at all, but the
module provided by ubuntu.

If you don't mind I'll drop a bugreport at https://launchpad.net/ 
telling em that the uvcvideo module they provide is outdated.

Martin


Laurent Pinchart schrieb:
> On Tuesday 20 February 2007 22:05, Martin Funk wrote:
>> Hi Thomas,
>>
>> verry same output of v4l-video here, just the bus_info differs.
>> It also makes no difference if the given uvc_ids is added to the code or
>> not.
> 
> Here's what bothers me in your kernel log:
> 
> [  284.165685] uvcvideo: uvc_v4l2_ioctl
> [  284.165691] v4l2 ioctl VIDIOC_STREAMON, dir=-w (0x40045612)
> [  284.165967] uvcvideo: uvc_v4l2_ioctl
> [  284.165970] v4l2 ioctl VIDIOC_DQBUF, dir=rw (0xc0585611)
> [  284.166061] uvcvideo: Dequeuing buffer 0.
> [  284.171785] uvcvideo: Dropping packet (out of sync).
> [  284.171788] uvcvideo: Dropping packet (out of sync).
> [  284.171790] uvcvideo: Dropping packet (out of sync).
> [  284.171791] uvcvideo: Dropping packet (out of sync).
> 
> Right after started streaming, the application tries to dequeue the first 
> buffer using VIDIOC_DQBUF. The ioctl checks the first buffer in the queue 
> (which is buffer 0) and blocks until the buffer is filled with image data. It 
> seems from what you reported that this never happens.
> 
> The driver keeps printing out-of-sync messages, and that shouldn't happen. An 
> out-of-sync message can happen from times to times, but definitely not at the 
> very beginning. Could you hack uvc_video.c to print more information in the 
> out of sync message, such as the buffer number (buff->buf.index) and state 
> (buff->buf.index) ?
> 
> Best regards,
> 
> Laurent Pinchart
> 



From schlesix at gmx.de  Fri Feb 23 19:54:05 2007
From: schlesix at gmx.de (Thomas Schlesinger)
Date: Fri, 23 Feb 2007 19:54:05 +0100
Subject: [Linux-uvc-devel] Quick Cam Pro 5000 046d:08ce don't run on
 Ubuntu Feisty Fawn
In-Reply-To: <45DF20AD.3010302@martinfunk.de>
References: <45D1ED29.9070406@martinfunk.de> <20070220190245.301040@gmx.net>
	<45DB6296.7090108@martinfunk.de>
	<200702231340.25569.laurent.pinchart@skynet.be>
	<45DF20AD.3010302@martinfunk.de>
Message-ID: <20070223185405.199590@gmx.net>


-------- Original-Nachricht --------
Datum: Fri, 23 Feb 2007 18:13:17 +0100
Von: Martin Funk <ich at martinfunk.de>
An: linux-uvc-devel at lists.berlios.de
CC: 
Betreff: Re: [Linux-uvc-devel] Quick Cam Pro 5000 046d:08ce don\'t run on Ubuntu Feisty Fawn

> it works now!
> 
> And I'm a little ashamed of why it didn't before:
> 
> svn diff -r HEAD
> Index: Makefile
> ===================================================================
> --- Makefile    (Revision 89)
> +++ Makefile    (Arbeitskopie)
> @@ -1,6 +1,6 @@
>   KERNEL_VERSION := `uname -r`
>   KERNEL_DIR     := /lib/modules/$(KERNEL_VERSION)/build
> -INSTALL_MOD_DIR        := usb/media
> +INSTALL_MOD_DIR        := kernel/ubuntu/media/usbvideo
> 
>   PWD            := $(shell pwd)
> 
> 
> adding the trace messages showed me, that I wasn't using the downloaded 
> module at all, but the
> module provided by ubuntu.
> 
> If you don't mind I'll drop a bugreport at https://launchpad.net/ 
> telling em that the uvcvideo module they provide is outdated.
> 
> Martin
> 

Ok, same thing here, too. Laurent, I apologize for wasting your time ;-)

I get a video now with lucview, but not with xawtv.

xawtv tells me:
thomas at SchlesisTP:~$ xawtv
This is xawtv-3.95.dfsg.1, running on Linux/i686 (2.6.20-8-generic)
/dev/video0 [v4l2]: no overlay support
v4l-conf had some trouble, trying to continue anyway
Warning: Cannot convert string "-*-ledfixed-medium-r-*--39-*-*-*-c-*-*-*" to type FontStruct
ioctl: VIDIOC_G_STD(std=0xb7d64450b7f6de42 [PAL_B1,PAL_D1,PAL_N,PAL_Nc,PAL_60,NTSC_M,?,?,SECAM_D,SECAM_G,SECAM_K,SECAM_K1,SECAM_L,?ATSC_8_VSB,ATSC_16_VSB,(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null)]): Invalid argument
ioctl: VIDIOC_REQBUFS(count=2;type=VIDEO_CAPTURE;memory=MMAP): Success
ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument
ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0 [];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.seconds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0;memory=unknown): Invalid argument
ioctl: VIDIOC_REQBUFS(count=1;type=VIDEO_CAPTURE;memory=MMAP): Invalid argument
ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0 [];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.seconds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0;memory=unknown): Invalid argument

I can't use the webcam in Koptete, and that's my goal. Kopete tells me:
read error 19, No such device

and dmesg tells me:
[ 1209.516000] uvcvideo: Failed to query (131) UVC control 3 (unit 2) : -32 (exp. 2).

There's a similar bug report here on the Kopete devel list:
http://lists.kde.org/?l=kopete-devel&m=115881070211310&w=2 that point to this linux-uvc bug report: http://developer.berlios.de/bugs/?func=detailbug&bug_id=7605&group_id=5681

Are there chances to enable the Quick Cam Pro 5000 (046d:08ce) to work with Kopete?

Thanks,
Thomas
-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer


From jcline at hep.physics.mcgill.ca  Mon Feb 26 20:13:15 2007
From: jcline at hep.physics.mcgill.ca (Jim Cline)
Date: Mon, 26 Feb 2007 14:13:15 -0500 (EST)
Subject: [Linux-uvc-devel] problems with Logitech Quickcam Fusion
Message-ID: <Pine.LNX.4.61.0702261410070.20469@shiva.physics.mcgill.ca>

I have successfully compiled and loaded the uvcvideo module with the Logitech 
Quickcam Fusion, but have not gotten it to work with any applications. dmesg 
gives

usb 2-2: new full speed USB device using uhci_hcd and address 104
uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c1)

and xawtv -hwscan shows

/dev/video0: OK                         [ -device /dev/video0 ]
     type : v4l2
     name : USB Video Class device
     flags:  capture

However when I try to use the camera with xawtv  it gives:

This is xawtv-3.94, running on Linux/i686 (2.6.13.2)
/dev/video0 [v4l2]: no overlay support
v4l-conf had some trouble, trying to continue anyway
Warning: Cannot convert string "-*-ledfixed-medium-r-*--39-*-*-*-c-*-*-*" to 
type FontStruct
ioctl: VIDIOC_G_STD(std=0x81001b80808c888 
[PAL_H,PAL_K,PAL_60,?,?,SECAM_H,(null),(null),(null),(null),(null),(null),(null),(null)]): 
Invalid argument
ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument

and mplayer tv:// -tv driver=v4l2:device=/dev/video0 gives (after other 
messages)

Playing tv://.
TV detected! ;-)
No such driver: v4l2

The loaded modules include

uvcvideo               42884  0
v4l1_compat            13956  1 uvcvideo
videodev                7424  1 uvcvideo
v4l2_common             4864  1 uvcvideo

Any hints would be greatly appreciated.  Thanks!

--Jim



From pauljurczak at yahoo.com  Tue Feb 27 12:10:35 2007
From: pauljurczak at yahoo.com (Paul Jurczak)
Date: Tue, 27 Feb 2007 03:10:35 -0800 (PST)
Subject: [Linux-uvc-devel] The source clock
Message-ID: <986987.65892.qm@web60513.mail.yahoo.com>

Hello,

Is there a clock on UVC cameras to get Presentation Time Stamp and Source Clock Reference, or these values are created by the driver on the PC? My understanding of the UVC specification  supports the internal camera clock theory, which would be great for synchronization of 2 (or more) cameras (stereo vision). Does Linux UVC driver support time stamps? I couldn't find scrSourceClock and dwPresentationTime in header files.
 
Paul.




 
____________________________________________________________________________________
We won't tell. Get more on shows you hate to love 
(and love to hate): Yahoo! TV's Guilty Pleasures list.
http://tv.yahoo.com/collections/265 


From linux at rubli.info  Wed Feb 28 07:35:28 2007
From: linux at rubli.info (Martin Rubli)
Date: Tue, 27 Feb 2007 22:35:28 -0800
Subject: [Linux-uvc-devel] dreadful Logitech hardware bug
In-Reply-To: <BAY113-F22F4A13E8BD13849057D184820@phx.gbl>
References: <op.tnht2i0742iof8@nb-mrublixp.am.logitech.com>
	<BAY113-F22F4A13E8BD13849057D184820@phx.gbl>
Message-ID: <000501c75b02$a586de10$f0949a30$@info>


> -----Original Message-----
> From: David L [mailto:idht4n at hotmail.com]
> Sent: Tuesday, February 27, 2007 3:53 PM
> To: linux at rubli.info
> Subject: Re: [Linux-uvc-devel] dreadful Logitech hardware bug
> 
> >On Thu, 08 Feb 2007 14:19:18 -0800, Laurent Pinchart 
> ><laurent.pinchart at skynet.be> wrote:
> >
> > > Hi David,
> > >
> > >> I bought a Logitech Quickcam Pro 5000 today and tried to use it 
> > >> with ekiga.  Sometimes it works and other times I get this error 
> > >> at the beginning or in the middle of a session:
> > >>
> > >> "Your driver doesn't seem to support any of the color formats
> supported
> > >> by Ekiga.
> > >> Please check your kernel driver documentation in order to 
> > >> determine which Palette is supported."
> > >>
> > >> I have to unplug the camera and plug it in again to get it to 
> > >> work again.  The log shows  this:
> > >
> > > It seems you are experiencing the dreadful Logitech hardware bug 
> > > :-( I don't think you can do much here. Martin, can you confirm ?
> 
> Should I just return it then?

I doubt that they'll take it back as long as it works fine on Windows.
Unfortunately there's no Penguin on the box. ;-)

> Is there a recommended
> alternative that doesn't have the dreadful bug?

I have no experience with other UVC cameras so far but future models should
not have the same problems anymore. Also, be sure to check this mailing list
in the future as well as its archive. There were a few patches posted that
resolved/alleviated the problem.

Cheers,
Martin



From jgpiccinali at free.fr  Wed Feb 28 10:51:49 2007
From: jgpiccinali at free.fr (jgpiccinali at free.fr)
Date: Wed, 28 Feb 2007 10:51:49 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Fusion webcam
Message-ID: <20070228105149.cxpm2nn2o8so8w04@imp4.free.fr>

Hello,

Under debian, I would like to use Logitech QuickCam Fusion webcam

I compiled  and installed uvcvideo :

  * svn checkout svn://svn.berlios.de/linux-uvc/linux-uvc/trunk
  * make
  * make install

lsmod | grep -n uvc :

34:uvcvideo               36676  0
46:videodev               21120  1 uvcvideo
47:v4l1_compat            12036  2 uvcvideo,videodev
48:v4l2_common            20448  2 uvcvideo,videodev
81:usbcore               112676  5 snd_usb_audio,uvcvideo,snd_usb_lib,uhci_hcd


ls /lib/modules/2.6.18-3-686/usb/media/
-rw-r--r-- 1 root root 44308 2007-02-27 20:27 uvcvideo.ko

I read in the maililng-list that camstream is not supported because  
"UVC driver only support V4L2. So, no camstream."

Indeed, camstream shows an empty blue screen

What can I do next please ?


ps: apology for my written english...



From laurent.pinchart at skynet.be  Wed Feb 28 23:44:44 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 28 Feb 2007 23:44:44 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Fusion webcam
In-Reply-To: <20070228105149.cxpm2nn2o8so8w04@imp4.free.fr>
References: <20070228105149.cxpm2nn2o8so8w04@imp4.free.fr>
Message-ID: <200702282344.44815.laurent.pinchart@skynet.be>

Hi,

> Hello,
>
> Under debian, I would like to use Logitech QuickCam Fusion webcam
>
> I compiled  and installed uvcvideo :
>
>   * svn checkout svn://svn.berlios.de/linux-uvc/linux-uvc/trunk
>   * make
>   * make install
>
> lsmod | grep -n uvc :
>
> 34:uvcvideo               36676  0
> 46:videodev               21120  1 uvcvideo
> 47:v4l1_compat            12036  2 uvcvideo,videodev
> 48:v4l2_common            20448  2 uvcvideo,videodev
> 81:usbcore               112676  5
> snd_usb_audio,uvcvideo,snd_usb_lib,uhci_hcd
>
>
> ls /lib/modules/2.6.18-3-686/usb/media/
> -rw-r--r-- 1 root root 44308 2007-02-27 20:27 uvcvideo.ko
>
> I read in the maililng-list that camstream is not supported because
> "UVC driver only support V4L2. So, no camstream."
>
> Indeed, camstream shows an empty blue screen
>
> What can I do next please ?

Port camstream to V4L2 ? :-)

The code base is quite clean, so it shouldn't be too difficult.

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Feb 28 23:41:18 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 28 Feb 2007 23:41:18 +0100
Subject: [Linux-uvc-devel] problems with Logitech Quickcam Fusion
In-Reply-To: <Pine.LNX.4.61.0702261410070.20469@shiva.physics.mcgill.ca>
References: <Pine.LNX.4.61.0702261410070.20469@shiva.physics.mcgill.ca>
Message-ID: <200702282341.18592.laurent.pinchart@skynet.be>

Hi Jim,

> I have successfully compiled and loaded the uvcvideo module with the
> Logitech Quickcam Fusion, but have not gotten it to work with any
> applications. dmesg gives
>
> usb 2-2: new full speed USB device using uhci_hcd and address 104
> uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c1)
>
> and xawtv -hwscan shows
>
> /dev/video0: OK                         [ -device /dev/video0 ]
>      type : v4l2
>      name : USB Video Class device
>      flags:  capture
>
> However when I try to use the camera with xawtv  it gives:
>
> This is xawtv-3.94, running on Linux/i686 (2.6.13.2)
> /dev/video0 [v4l2]: no overlay support
> v4l-conf had some trouble, trying to continue anyway
> Warning: Cannot convert string "-*-ledfixed-medium-r-*--39-*-*-*-c-*-*-*"
> to type FontStruct
> ioctl: VIDIOC_G_STD(std=0x81001b80808c888
> [PAL_H,PAL_K,PAL_60,?,?,SECAM_H,(null),(null),(null),(null),(null),(null),(
>null),(null)]): Invalid argument
> ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument
>
> and mplayer tv:// -tv driver=v4l2:device=/dev/video0 gives (after other
> messages)
>
> Playing tv://.
> TV detected! ;-)
> No such driver: v4l2
>
> The loaded modules include
>
> uvcvideo               42884  0
> v4l1_compat            13956  1 uvcvideo
> videodev                7424  1 uvcvideo
> v4l2_common             4864  1 uvcvideo
>
> Any hints would be greatly appreciated.  Thanks!

Xawtv is known not to work with the Linux UVC driver. It doesn't support V4L2 
properly. The latest mplayer version should work, as I sent a patch to fix a 
few small problems. You could also try luvcview and ekiga.

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Feb 28 23:46:37 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 28 Feb 2007 23:46:37 +0100
Subject: [Linux-uvc-devel] The source clock
In-Reply-To: <986987.65892.qm@web60513.mail.yahoo.com>
References: <986987.65892.qm@web60513.mail.yahoo.com>
Message-ID: <200702282346.37974.laurent.pinchart@skynet.be>

Hi Paul,

> Is there a clock on UVC cameras to get Presentation Time Stamp and Source
> Clock Reference, or these values are created by the driver on the PC? My
> understanding of the UVC specification  supports the internal camera clock
> theory, which would be great for synchronization of 2 (or more) cameras
> (stereo vision). Does Linux UVC driver support time stamps? I couldn't find
> scrSourceClock and dwPresentationTime in header files.

I'm glad you raise the PTS and SCR issue. You are right, those values are 
provided by UVC devices along with video data. However, the spec is not very 
clear on the subject, and I don't know how to map them to V4L2 fields.

I'd be happy to implement PTS and SCR support if someone can think of a good 
way to map them to V4L2.

Best regards,

Laurent Pinchart


