<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] support for 05ca:183a
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2008-November/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20support%20for%2005ca%3A183a&In-Reply-To=%3C1226274434.21482.47.camel%40mentalek%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004189.html">
   <LINK REL="Next"  HREF="004200.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] support for 05ca:183a</H1>
    <B>Petr Men&#353;&#237;k</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20support%20for%2005ca%3A183a&In-Reply-To=%3C1226274434.21482.47.camel%40mentalek%3E"
       TITLE="[Linux-uvc-devel] support for 05ca:183a">pihhan at cipis.net
       </A><BR>
    <I>Mon Nov 10 00:47:14 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="004189.html">[Linux-uvc-devel] support for 05ca:183a
</A></li>
        <LI>Next message: <A HREF="004200.html">[Linux-uvc-devel] support for 05ca:183a
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4192">[ date ]</a>
              <a href="thread.html#4192">[ thread ]</a>
              <a href="subject.html#4192">[ subject ]</a>
              <a href="author.html#4192">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hi,

i found interesting news. my camera will change its resolution, but only
to 640x480 and 1280x1024 correctly. I was astonished when high
resolution worked, i did not expect that. I got working svn version of
luvcview, but really lower resolutions are still wrong in that also.

Yes, lower resolutions worked fine in ekiga before, i believe it is
using lowest one, 160x120. Really firmware loading is a bit problem, as
you have to reload module if you did not load before usb subsystem.
Camera cannot be unpluged, because is built-in.

What is for input layer for webcamera by the way? I have one pretty old
Genius GE111 with button on it, yet driver did not support button when i
tested it (and i doubt it will ever do, as image quality from camera is
very low).

It might be useful to direct owners of r5u870 to web page about it, tell
them it needs firmware and maybe refuse to handle them without special
parameters. Maybe print some warning at least for usb vendor id for
these cameras. 

Oh and i forget to note interesting feature. In mplayer, it started to
show anything always after 10th frame on lower resolutions. There is
black first ten frames when resolution is lower than 640x480.

When i see usage of UVC standard for my camera, is that reliable to buy
some camera claiming to support standard? Is it unusual having camera
like mine, working only after firmware loading? I hoped that with
adoption of uvc webcams will be finally plug&amp;play without messing with
strage drivers from strange place. Is it again more about marketing than
engineering?

Best Regards,

Petr

Laurent Pinchart p&#237;&#353;e v Ne 09. 11. 2008 v 23:00 +0100:
&gt;<i> Hi Petr, hi Pavel,
</I>&gt;<i> 
</I>&gt;<i> On Sunday 09 November 2008, Petr Men&#353;&#237;k wrote:
</I>&gt;<i> &gt; I think i can reply here also, as i have 05ca:183b that is very similar.
</I>&gt;<i> &gt; It is integrated in Sony Vaio VGN-FZ21 series.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I made some tests at <A HREF="http://www.pihhan.info/sony/webcam/webcam-tests">http://www.pihhan.info/sony/webcam/webcam-tests</A>
</I>&gt;<i> &gt; There are also scripts i used and lsusb verbose output for camera.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Laurent Pinchart p&#237;&#353;e v &#268;t 06. 11. 2008 v 01:17 +0100:
</I>&gt;<i> &gt; &gt; On Tuesday 04 November 2008, Pavel Revak wrote:
</I>&gt;<i> &gt; &gt; &gt; Hi Philipp
</I>&gt;<i> &gt; &gt; &gt; very nice, this solved my problem :)
</I>&gt;<i> &gt; &gt; &gt; thanks.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; also I do some tests with luvcview and any other grabbed resolution
</I>&gt;<i> &gt; &gt; &gt; than 640x480 is broken ...
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; How broken ? Can you post screenshots ?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; See <A HREF="http://www.pihhan.info/sony/webcam/webcam-tests/160/00000012.png">http://www.pihhan.info/sony/webcam/webcam-tests/160/00000012.png</A> as
</I>&gt;<i> &gt; example. After simpel transformation of buffer to width 640, you will se
</I>&gt;<i> &gt; camera never changed its resolution. Only software thinks it did. See
</I>&gt;<i> &gt; <A HREF="http://www.pihhan.info/sony/webcam/webcam-tests/160/00000012-mod.png">http://www.pihhan.info/sony/webcam/webcam-tests/160/00000012-mod.png</A> to
</I>&gt;<i> &gt; get upper part of original image.
</I>&gt;<i> 
</I>&gt;<i> Thanks for the analysis. I agree with your conclusion, the camera hasn't 
</I>&gt;<i> changed its capture resolution.
</I>&gt;<i> 
</I>&gt;<i> &gt; &gt; As a side note, make sure you check the kernel log (dmesg) for uvcvideo
</I>&gt;<i> &gt; &gt; error messages when performing your tests.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; No errors in kernel for my model. I made some debug info with controls
</I>&gt;<i> &gt; and stuff using:
</I>&gt;<i> &gt; options uvcvideo trace=0x307
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Output is at <A HREF="http://www.pihhan.info/sony/webcam/uvcload.txt">http://www.pihhan.info/sony/webcam/uvcload.txt</A>
</I>&gt;<i> &gt; it is somehow bigger to paste it into mail i think. Only strange warning is
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Nov  9 14:02:17 mentalek kernel: [23909.937596] uvcvideo: Control
</I>&gt;<i> &gt; 0x00980909 not found.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It does so when i play it using mplayer <A HREF="tv:///,">tv:///,</A> i dont know what does that
</I>&gt;<i> &gt; mean.
</I>&gt;<i> 
</I>&gt;<i> Nothing to worry about. 0x00980909 is V4L2_CID_AUDIO_MUTE and is not supported 
</I>&gt;<i> by UVC devices.
</I>&gt;<i> 
</I>&gt;<i> &gt; &gt; &gt; is here possible to disable, these resolutions for this camera
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; The resolutions are reported by the camera itself. The UVC driver merely
</I>&gt;<i> &gt; &gt; pass the data to userspace without any modification.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; They are reported but not working. R5u870 driver seems to be not
</I>&gt;<i> &gt; developed now, as work is put to upload firmware and then handle camera
</I>&gt;<i> &gt; using uvcvideo.
</I>&gt;<i> 
</I>&gt;<i> Did resolutions other than 640x480 ever worked with the r5u870 driver ?
</I>&gt;<i> 
</I>&gt;<i> &gt; &gt; &gt; or make software image resize ?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; The driver doesn't resize or process the image in any way. This kind of
</I>&gt;<i> &gt; &gt; function belongs to userspace.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; luvcview reports the following resolutions:
</I>&gt;<i> &gt; &gt; &gt; $ lucview -L
</I>&gt;<i> &gt; &gt; &gt; luvcview 0.2.4
</I>&gt;<i> &gt; &gt; &gt; SDL information:
</I>&gt;<i> &gt; &gt; &gt;   Video driver: x11
</I>&gt;<i> &gt; &gt; &gt;   A window manager is available
</I>&gt;<i> &gt; &gt; &gt; Device information:
</I>&gt;<i> &gt; &gt; &gt;   Device path:  /dev/video0
</I>&gt;<i> &gt; &gt; &gt; /dev/video0 does not support read i/o
</I>&gt;<i> &gt; &gt; &gt; { pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
</I>&gt;<i> &gt; &gt; &gt; { discrete: width = 640, height = 480 }
</I>&gt;<i> &gt; &gt; &gt;         Time interval between frame: 1/15,
</I>&gt;<i> &gt; &gt; &gt; { discrete: width = 320, height = 240 }
</I>&gt;<i> &gt; &gt; &gt;         Time interval between frame: 1/15,
</I>&gt;<i> &gt; &gt; &gt; { discrete: width = 176, height = 144 }
</I>&gt;<i> &gt; &gt; &gt;         Time interval between frame: 1/15,
</I>&gt;<i> &gt; &gt; &gt; { discrete: width = 160, height = 120 }
</I>&gt;<i> &gt; &gt; &gt;         Time interval between frame: 1/15,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; My output:
</I>&gt;<i> &gt; luvcview version 0.2.1
</I>&gt;<i> &gt; Video driver: x11
</I>&gt;<i> &gt; A window manager is available
</I>&gt;<i> &gt; video /dev/video0
</I>&gt;<i> &gt; /dev/video0 does not support read i/o
</I>&gt;<i> &gt; { pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
</I>&gt;<i> &gt; { discrete: width = 640, height = 480 }
</I>&gt;<i> &gt; 	Time interval between frame: 1/30,
</I>&gt;<i> &gt; { discrete: width = 1280, height = 1024 }
</I>&gt;<i> &gt; 	Time interval between frame: 2/15,
</I>&gt;<i> &gt; { discrete: width = 320, height = 240 }
</I>&gt;<i> &gt; 	Time interval between frame: 1/30,
</I>&gt;<i> &gt; { discrete: width = 176, height = 144 }
</I>&gt;<i> &gt; 	Time interval between frame: 1/30,
</I>&gt;<i> &gt; { discrete: width = 160, height = 120 }
</I>&gt;<i> &gt; 	Time interval between frame: 1/30,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Where can i get newer version? i found this most recent one at
</I>&gt;<i> &gt; <A HREF="http://mxhaard.free.fr/spca50x/Investigation/uvc/">http://mxhaard.free.fr/spca50x/Investigation/uvc/</A> but i have older
</I>&gt;<i> &gt; version it seems.
</I>&gt;<i> 
</I>&gt;<i> You can grab the latest version from the quickcamteam.net SVN repository at 
</I>&gt;<i> <A HREF="http://svn.quickcamteam.net/svn/luvcview/">http://svn.quickcamteam.net/svn/luvcview/</A>
</I>&gt;<i> 
</I>&gt;<i> &gt; Also, my luvcview will not show anything to me, it fails with:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; luvcview version 0.2.1
</I>&gt;<i> &gt; Video driver: x11
</I>&gt;<i> &gt; A window manager is available
</I>&gt;<i> &gt; video /dev/video0
</I>&gt;<i> &gt; Unable to set format: 22.
</I>&gt;<i> &gt;  Init v4L2 failed !! exit fatal
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Do you where it could fail or how could i fix this? I tried different
</I>&gt;<i> &gt; formats and sizes, but i never saw image from luvcview.
</I>&gt;<i> 
</I>&gt;<i> luvcview (at least its old versions) defaulted to MJPEG even if the camera 
</I>&gt;<i> doesn't support that format. You can force YUYV with
</I>&gt;<i> 
</I>&gt;<i> luvcview -f yuv
</I>&gt;<i> 
</I>&gt;<i> &gt; Mplayer <A HREF="tv:///">tv:///</A> will work (1.0rc2-4.2.3), as is cheese 2.22.3. xawtv will
</I>&gt;<i> &gt; choose wrong resolution and i dont know how to change it. It worked with
</I>&gt;<i> &gt; r5u870 driver.
</I>&gt;<i> 
</I>&gt;<i> What resolution did xawtv pick with the r5u870 driver ?
</I>&gt;<i> 
</I>&gt;<i> &gt; But Mplayer has somehow strange colors, image from cheese is better in
</I>&gt;<i> &gt; quality.
</I>&gt;<i> 
</I>&gt;<i> That might be caused by default control values chosen by mplayer and cheese, 
</I>&gt;<i> especially the hue control.
</I>&gt;<i> 
</I>&gt;<i> &gt; &gt; Please note that the r5u870 chipset is not completely UVC compliant and
</I>&gt;<i> &gt; &gt; is currently not officially supported by the UVC driver.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Do you know about anything exactly that this camera does not support as
</I>&gt;<i> &gt; it should?
</I>&gt;<i> 
</I>&gt;<i> There are a number of UVC non compliance issues with the r5u870 chipset:
</I>&gt;<i> 
</I>&gt;<i> - The chipset advertises UVC descriptors when no firmware is loaded. It won't 
</I>&gt;<i> re-enumerate or change its descriptors after firmware loading. This makes 
</I>&gt;<i> initialisation quite difficult.
</I>&gt;<i> 
</I>&gt;<i> - Some proprietary controls supported by the camera are not advertised in its 
</I>&gt;<i> descriptors and are only accessible through a proprietary protocol. The UVC 
</I>&gt;<i> driver has no way to access those controls.
</I>&gt;<i> 
</I>&gt;<i> - As you reported, resolutions other than 640x480 seem to be broken. More 
</I>&gt;<i> investigation is probably required.
</I>&gt;<i> 
</I>&gt;<i> &gt; I would like to get it working with uvcvideo module and i may 
</I>&gt;<i> &gt; try to create patch, but i dont understand well how is resolution
</I>&gt;<i> &gt; switching done in UVC video module. Would it be fixed with some custom
</I>&gt;<i> &gt; quirk for example? iSight has some special, why not this?
</I>&gt;<i> 
</I>&gt;<i> The uvcvideo driver supports some non-standard cameras using device-specific 
</I>&gt;<i> quirks. The iSight is the worst example of such devices. Still, it only 
</I>&gt;<i> overrides very specific portion of the driver's logic. Supporting r5u870 
</I>&gt;<i> chipsets in the uvcvideo driver would require introducing hooks pretty much 
</I>&gt;<i> all over the place and I'm not happy with that. r5u870-based cameras are far 
</I>&gt;<i> from being UVC compliant, and for the time being they are better served by a 
</I>&gt;<i> separate driver.
</I>&gt;<i> 
</I>&gt;<i> Best regards,
</I>&gt;<i> 
</I>&gt;<i> Laurent Pinchart
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004189.html">[Linux-uvc-devel] support for 05ca:183a
</A></li>
	<LI>Next message: <A HREF="004200.html">[Linux-uvc-devel] support for 05ca:183a
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4192">[ date ]</a>
              <a href="thread.html#4192">[ thread ]</a>
              <a href="subject.html#4192">[ subject ]</a>
              <a href="author.html#4192">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
