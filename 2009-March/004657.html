<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] UVC with Panasonic camcorder: &quot;Cannot find a	proper format.&quot;
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2009-March/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20UVC%20with%20Panasonic%20camcorder%3A%20%22Cannot%20find%20a%0A%09proper%20format.%22&In-Reply-To=%3C49BE7324.6000708%40mrnaz.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004674.html">
   <LINK REL="Next"  HREF="004663.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] UVC with Panasonic camcorder: &quot;Cannot find a	proper format.&quot;</H1>
    <B>Naz</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20UVC%20with%20Panasonic%20camcorder%3A%20%22Cannot%20find%20a%0A%09proper%20format.%22&In-Reply-To=%3C49BE7324.6000708%40mrnaz.com%3E"
       TITLE="[Linux-uvc-devel] UVC with Panasonic camcorder: &quot;Cannot find a	proper format.&quot;">lists at mrnaz.com
       </A><BR>
    <I>Mon Mar 16 16:41:24 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004674.html">[Linux-uvc-devel] Logitech Quickcam Notebook Pro for Business
</A></li>
        <LI>Next message: <A HREF="004663.html">[Linux-uvc-devel] UVC with Panasonic camcorder: &quot;Cannot find a	proper format.&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4657">[ date ]</a>
              <a href="thread.html#4657">[ thread ]</a>
              <a href="subject.html#4657">[ subject ]</a>
              <a href="author.html#4657">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there,
    I am trying to get video from my Panasonic NV-GS11 to ffmpeg. I am 
certain that the device is supported, as the UVC web site explicitly 
lists it, and the device ID matches that in the UVC web site's 
compatible devices list.

    I have output the error that ffmpeg outputs, which I think is being 
caused in the UVC layer. I have included the output of lsmod, lsusb and 
lsusb -v for that device, just to confirm that, as far as I can tell, 
the device is connected properly.

    I would be extremely grateful if anyone can tell me what is causing 
the problem.
Thanks in advance!


<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">cic at cic-webcam</A>:~$ ffmpeg -f video4linux2 -s 320x240 -i /dev/video0 ouput.mpg
FFmpeg version 0.5, Copyright (c) 2000-2009 Fabrice Bellard, et al.
  configuration: --enable-libmp3lame --enable-libtheora --enable-libx264 
--enable-libgsm --enable-postproc --enable-libxvid --enable-libfaac 
--enable-pthreads --enable-libvorbis --enable-libfaad --enable-gpl 
--enable-x11grab --enable-libamr-nb --enable-libamr-wb --enable-nonfree 
--enable-gpl
  libavutil     49.15. 0 / 49.15. 0
  libavcodec    52.20. 0 / 52.20. 0
  libavformat   52.31. 0 / 52.31. 0
  libavdevice   52. 1. 0 / 52. 1. 0
  libpostproc   51. 2. 0 / 51. 2. 0
  built on Mar  6 2009 23:31:07, gcc: 4.3.2
[video4linux2 @ 0x95e3290][3]Capabilities: 4000001
[video4linux2 @ 0x95e3290]Cannot find a proper format.
/dev/video0: I/O error occurred
Usually that means that input file is truncated and/or corrupted.
<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">cic at cic-webcam</A>:~$


<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">cic at cic-webcam</A>:~$ lsmod | grep uvc
uvcvideo               63624  0
compat_ioctl32          9344  1 uvcvideo
videodev               41344  1 uvcvideo
v4l1_compat            22404  2 uvcvideo,videodev
usbcore               149360  8 
usb_storage,libusual,uvcvideo,snd_usb_audio,snd_usb_lib,ehci_hcd,uhci_hcd
<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">cic at cic-webcam</A>:~$


<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">cic at cic-webcam</A>:~$ lsusb
Bus 004 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 003 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 002 Device 005: ID 04da:2318 Panasonic (Matsushita)
Bus 002 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 001 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">cic at cic-webcam</A>:~$


<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">cic at cic-webcam</A>:~$ lsusb -d 04da:2318 -v
Bus 002 Device 005: ID 04da:2318 Panasonic (Matsushita)
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x04da Panasonic (Matsushita)
  idProduct          0x2318
  bcdDevice            1.00
  iManufacturer           1
  iProduct                2
  iSerial                 3
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          258
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0xc0
      Self Powered
    MaxPower                2mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               4
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              5
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           39
        dwClockFrequency       13.500000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                17
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          2
        iTerminal               6
        wObjectiveFocalLengthMin    100
        wObjectiveFocalLengthMax   1000
        wOcularFocalLength          100
        bControlSize                  2
        bmControls           0x00000200
          Zoom (Absolute)
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          1
        bSourceID               1
        iTerminal               7
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              8
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                        1
        wTotalLength                       69
        bEndPointAddress                  135
        bmInfo                              0
        bTerminalLink                       2
        bStillCaptureMethod                 0
        bTriggerSupport                     0
        bTriggerUsage                       0
        bControlSize                        1
        bmaControls( 0)                    11
      VideoStreaming Interface Descriptor:
        bLength                            11
        bDescriptorType                    36
        bDescriptorSubtype                  6 (FORMAT_MJPEG)
        bFormatIndex                        1
        bNumFrameDescriptors                1
        bFlags                              0
          Fixed-size samples: No
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x02
          Interlaced stream or variable: No
          Fields per frame: 2 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   786432
        dwMaxBitRate                  3932160
        dwMaxVideoFrameBufferSize       32768
        dwDefaultFrameInterval         666667
        bFrameIntervalType                  0
        dwMinFrameInterval             666667
        dwMaxFrameInterval             666667
        dwFrameIntervalStep                 0
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     0 (Unspecified)
        bTransferCharacteristics            0 (Unspecified)
        bMatrixCoefficients                 0 (Unspecified)
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              8
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x87  EP 7 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       1 Control Device
      bFunctionProtocol       0
      iFunction               4
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0
      iInterface              0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           30
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             2
        wChannelConfig     0x0003
          Left Front (L)
          Right Front (R)
        iChannelNames           0
        iTerminal               0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               1
        iTerminal               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           2
        bDelay                  2 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             2
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            1 Discrete
        tSamFreq[ 0]        16000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               1
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x00
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
can't get device qualifier: Operation not permitted
can't get debug descriptor: Operation not permitted
cannot read device status, Operation not permitted (1)
<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">cic at cic-webcam</A>:~$ lsusb -d 04da:2318 -v






-- 
&#1575;&#1604;&#1587;&#1604;&#1575;&#1605; &#1593;&#1604;&#1610;&#1603;&#1605;

Web:  www.mrnaz.com
Ph:   +61 400 460 662


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004674.html">[Linux-uvc-devel] Logitech Quickcam Notebook Pro for Business
</A></li>
	<LI>Next message: <A HREF="004663.html">[Linux-uvc-devel] UVC with Panasonic camcorder: &quot;Cannot find a	proper format.&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4657">[ date ]</a>
              <a href="thread.html#4657">[ thread ]</a>
              <a href="subject.html#4657">[ subject ]</a>
              <a href="author.html#4657">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
