<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] Logitech QuickCam Pro 9000, unable to get more then 5 fps when live recording, whats going on?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2009-March/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Logitech%20QuickCam%20Pro%209000%2C%0A%20unable%20to%20get%20more%20then%205%20fps%20when%20live%20recording%2C%20whats%20going%20on%3F&In-Reply-To=%3C49BAD271.7050402%40powercraft.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004641.html">
   <LINK REL="Next"  HREF="004643.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] Logitech QuickCam Pro 9000, unable to get more then 5 fps when live recording, whats going on?</H1>
    <B>Jelle de Jong</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Logitech%20QuickCam%20Pro%209000%2C%0A%20unable%20to%20get%20more%20then%205%20fps%20when%20live%20recording%2C%20whats%20going%20on%3F&In-Reply-To=%3C49BAD271.7050402%40powercraft.nl%3E"
       TITLE="[Linux-uvc-devel] Logitech QuickCam Pro 9000, unable to get more then 5 fps when live recording, whats going on?">jelledejong at powercraft.nl
       </A><BR>
    <I>Fri Mar 13 22:38:57 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004641.html">[Linux-uvc-devel] Logitech QuickCam Pro 9000, unable to get more then 5 fps when live recording, whats going on?
</A></li>
        <LI>Next message: <A HREF="004643.html">[Linux-uvc-devel] Logitech QuickCam Pro 9000,	unable to get more 	then 5 fps when live recording, whats going on?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4642">[ date ]</a>
              <a href="thread.html#4642">[ thread ]</a>
              <a href="subject.html#4642">[ subject ]</a>
              <a href="author.html#4642">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Paulo Assis wrote:
&gt;<i> Jelle,
</I>&gt;<i> 
</I>&gt;<i> Jelle de Jong escreveu:
</I>&gt;&gt;<i> Paulo Assis wrote:
</I>&gt;&gt;<i>   
</I>&gt;&gt;&gt;<i> Jelle,
</I>&gt;&gt;&gt;<i> You must tick off the &quot;Exposure, Auto Priority&quot; control this is enable
</I>&gt;&gt;&gt;<i> by default and increases the exposure time (reducing fps) in order to
</I>&gt;&gt;&gt;<i> get a brighter picture.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Just use libwebcam or guvcview.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Best regards,
</I>&gt;&gt;&gt;<i> Paulo
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Jelle de Jong escreveu:
</I>&gt;&gt;&gt;<i>     
</I>&gt;&gt;&gt;&gt;<i> Philipp Kolmann wrote:
</I>&gt;&gt;&gt;&gt;<i>   
</I>&gt;&gt;&gt;&gt;<i>       
</I>&gt;&gt;&gt;&gt;&gt;<i> Jelle de Jong wrote:
</I>&gt;&gt;&gt;&gt;&gt;<i>     
</I>&gt;&gt;&gt;&gt;&gt;<i>         
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Hello everybody,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> I bought a Logitech QuickCam Pro 9000[1] (80euro) to make a budget
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> free/libre open source live video recording systems from a laptop. But I
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> am unable to get more then 5 frames per seconds (fps) out of the webcam
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> under any resolution. The last 4 days I have been trying to get this
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> system to work both with webcam and a digital video camera on combisite1
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> of a usb video grabber.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> The webcam only delivers 5 fps tops most time its lower is this normal
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> and what to do about is, should I buy an other webcam and witch one?
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Please see the attachments for all good reports about fps and mencoder
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> and mplayer commands.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>   
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>       
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>           
</I>&gt;&gt;&gt;&gt;&gt;<i> It seems you use eeepc. Did you test the cam with another PC? Is your 
</I>&gt;&gt;&gt;&gt;&gt;<i> USB Port 1.1 or 2.0 (check with usbview).
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> I have several 9000 here and I don't have issues with debian and this cam.
</I>&gt;&gt;&gt;&gt;&gt;<i> You might want to get latest uvcvideo kernel module, but this cam is 
</I>&gt;&gt;&gt;&gt;&gt;<i> supported for a long time already.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> hth,
</I>&gt;&gt;&gt;&gt;&gt;<i> Philipp
</I>&gt;&gt;&gt;&gt;&gt;<i>     
</I>&gt;&gt;&gt;&gt;&gt;<i>         
</I>&gt;&gt;&gt;&gt;<i> Hi Philipp,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Thanks for responding, what version of the webcam do you have? I seem to
</I>&gt;&gt;&gt;&gt;<i> have a got a 0.08
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> My ports are usb 2.0 I did not test it with an other pc I only have
</I>&gt;&gt;&gt;&gt;<i> eeepc's around me.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Is there a debian package for the latest uvcvideo kernel module?
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Could you test this command for me and show me the output: (especially fps)
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> mencoder <A HREF="tv://">tv://</A> -tv driver=v4l2:device=/dev/video0:fps=5 -ovc lavc
</I>&gt;&gt;&gt;&gt;<i> -lavcopts vcodec=mpeg4:vbitrate=2240:threads=2 -of rawvideo -o webcam4.mp4
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Thanks in advance,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Jelle de Jong
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i> Hello Paulo,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thank you for your response.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I now see whats happening, the fps drops to around 5fps when the
</I>&gt;&gt;<i> environment is dark and goes to around 30fps when the environment is bright.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I changed Exposure, Auto Priority to 0 and now I seem to have an higher
</I>&gt;&gt;<i> stable fps.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It also seems that when recording to disk the fps also drop form say
</I>&gt;&gt;<i> 30fps to 10fps but the cpu load and mem use is very low, is this normal?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have installed guvcview and played a bit with the many controls. The
</I>&gt;&gt;<i> commandline shows a lot of errors, and the webcam responses very weird,
</I>&gt;&gt;<i> when trying to change the settings most things fail. I have attached the
</I>&gt;&gt;<i> guvcview.log.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   
</I>&gt;<i> The warnings you see under guvcview  are related to dynamic controls
</I>&gt;<i> (focus, LED control, ...) if you want these controls enabled you must
</I>&gt;<i> run guvcview as the root user at least once per session.
</I>&gt;<i> 
</I>&gt;<i> If you try to change let's say gain and you have auto gain set then this
</I>&gt;<i> will fail, the same for exposure and white balance.
</I>&gt;<i>  
</I>&gt;<i> Has for a fixed frame rate your best option with that model is using
</I>&gt;<i> manual exposure. Just choose an appropriate exposure setting and stick
</I>&gt;<i> with that.
</I>&gt;<i> 
</I>&gt;&gt;<i> How can I control the webcam with standardized v4l2 controls?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   
</I>&gt;<i> guvcview uses a standard v4l2 interface.
</I>&gt;<i> if you just want to use the controls, and capture video with some other
</I>&gt;<i> app. run:
</I>&gt;<i> guvcview --controls_only
</I>&gt;<i> 
</I>&gt;&gt;<i> I want to use a webcam to record live images that move and have different
</I>&gt;&gt;<i> light environments, so the webcam has to adjust automatically to output
</I>&gt;&gt;<i> the best possible images. Is this a very hard thing to ask? I am willing
</I>&gt;&gt;<i> to buy a new device the only demands are usb interface and full v4l2
</I>&gt;&gt;<i> support. I have no idea of what is a good usb camera and what is not is
</I>&gt;&gt;<i> the QuickCam Pro 9000 the best one available? (200euro budget)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   
</I>&gt;<i> In my case I own a sphere AF and a pro5000 (2007 model) and at least
</I>&gt;<i> with guvcview  I never noticed any significant frame drop  when
</I>&gt;<i> recording video, but then guvcview doesn't use any expensive video
</I>&gt;<i> compression  (just  MJPG in case of yuv data).
</I>&gt;<i> With mencoder you are compressing to mpeg4, this is very CPU expensive.
</I>&gt;<i> 
</I>&gt;&gt;<i> Is there a some anti shakiness feature like photo and video cameras have.
</I>&gt;&gt;<i> I kind of have shocking hands when video recording?
</I>&gt;&gt;<i>   
</I>&gt;<i> In a webcam ???
</I>&gt;<i> Never heard of any such feature.
</I>&gt;<i> 
</I>&gt;&gt;<i> Is there also some feature to say well do auto exposure but make sure it
</I>&gt;&gt;<i> does not go below 20 fps?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   
</I>&gt;<i> I always use auto-exposure with both my cameras and I can easily record
</I>&gt;<i> avi's with 30 fps, be it a dark or bright environment.
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;&gt;<i> So now I use the following command to record with the webcam:
</I>&gt;&gt;<i> mencoder <A HREF="tv://">tv://</A> -tv
</I>&gt;&gt;<i> driver=v4l2:device=/dev/video0:adevice=/dev/dsp1:immediatemode=0:forceaudio:width=800:height=600:fps=25
</I>&gt;&gt;<i> -oac lavc -lavcopts acodec=libmp3lame:abitrate=128 -ovc lavc -lavcopts
</I>&gt;&gt;<i> vcodec=mpeg4:vbitrate=2240:threads=2 -of lavf -lavfopts format=avi -o
</I>&gt;&gt;<i> webcam5.avi
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> but the output is 640x480 with 15 fps not the resolution and fps I
</I>&gt;&gt;<i> supplied with the mencoder command why is this and how to fix this using
</I>&gt;&gt;<i> mencoder to record? Please also see the attached webcam5.log.
</I>&gt;&gt;<i>   
</I>&gt;<i> 
</I>&gt;<i> I'm not really a mencoder guru, have you tried recording on guvcview or
</I>&gt;<i> cheese ?
</I>&gt;<i> Maybe you should try some other lighter compression method when
</I>&gt;<i> recording, and convert the resulting file to mpg4 ( I recommend avidemux
</I>&gt;<i> for editing and compressing the captured file).
</I>&gt;&gt;<i> Any help is welcome.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks in advance,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Jelle de Jong
</I>&gt;&gt;<i>   
</I>&gt;<i> Best regards,
</I>&gt;<i> 
</I>&gt;<i> Paulo
</I>
I did a lot more testing today (this is full day 5 already) and I found
some very disturbing discoveries!

I can watch the webcam at width=320:height=240:fps=30 and have the
correct result. However when going over this resolution I will get only
15 fps and i can max go to 640x480 resolution.

Any idea why a tool as guvcviewer seems to output 800x600 and even
1600x1200 but mplayer does not want go higher as 640x480 (it does go lower)

I upgraded to guvcview 1.0.2 and tested some more there is still the
issue that i get lower fps when recording. Could somebody test recording
800x600 with 25fps and sound, if its really 25fps the sound will be in sync.

Also i tested the v4l2 fields of the webcam and there are a lot of errors
and non working fields. Is the device really v4l2 compatible? Could
somebody check this out further?

I also want to use the device on headless machines so no X. How can I
configure the device then so it does not use auto exposure...?

I attacked all test reports I made that lead to my conclusions please
look at them.

I can be contacted on chat.freenode.org as /msg tuxcrafter

Does somebody know a usb device that can be used for recording with v4l2
capable tools at at-leased 25pfs and 800x600 some auto balancing and
focusing would be nice to.

Again please checkout the attachment.

Thanks in advance for help.

Jelle de Jong
-------------- next part --------------
A non-text attachment was scrubbed...
Name: reports2.tar.gz
Type: application/gzip
Size: 21318 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090313/38bf1f3a/attachment.bin">https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090313/38bf1f3a/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004641.html">[Linux-uvc-devel] Logitech QuickCam Pro 9000, unable to get more then 5 fps when live recording, whats going on?
</A></li>
	<LI>Next message: <A HREF="004643.html">[Linux-uvc-devel] Logitech QuickCam Pro 9000,	unable to get more 	then 5 fps when live recording, whats going on?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4642">[ date ]</a>
              <a href="thread.html#4642">[ thread ]</a>
              <a href="subject.html#4642">[ subject ]</a>
              <a href="author.html#4642">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
