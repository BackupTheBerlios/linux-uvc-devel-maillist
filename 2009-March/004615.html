<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] getting vid:pid
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2009-March/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20getting%20vid%3Apid&In-Reply-To=%3C49ABAD06.3030604%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004610.html">
   <LINK REL="Next"  HREF="004618.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] getting vid:pid</H1>
    <B>Paulo Assis</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20getting%20vid%3Apid&In-Reply-To=%3C49ABAD06.3030604%40gmail.com%3E"
       TITLE="[Linux-uvc-devel] getting vid:pid">pj.assis at gmail.com
       </A><BR>
    <I>Mon Mar  2 10:55:18 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004610.html">[Linux-uvc-devel] getting vid:pid
</A></li>
        <LI>Next message: <A HREF="004618.html">[Linux-uvc-devel] getting vid:pid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4615">[ date ]</a>
              <a href="thread.html#4615">[ thread ]</a>
              <a href="subject.html#4615">[ subject ]</a>
              <a href="author.html#4615">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Laurent,

Laurent Pinchart escreveu:
&gt;<i> Hi Paulo,
</I>&gt;<i>
</I>&gt;<i> On Thursday 26 February 2009 21:53:58 Paulo Assis wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i> In order to proper add dynamic controls to the uvc driver, I need at least
</I>&gt;&gt;<i> the vid string for the selected device.
</I>&gt;&gt;<i> I tried libwebcam approach  by using /sys/class/video4linux, but this
</I>&gt;&gt;<i> proved highly distribution dependent and has caused a lot of trouble,
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> Really ? The /sys tree shouldn't be distribution dependent. What kind of 
</I>&gt;<i> problems have you run into ?
</I>&gt;<i>
</I>&gt;<i>   
</I>Here is a little example for video0:

In Ubuntu I can get the values from:
     /sys/class/video4linux/video0/device/input/   &lt;-(here I list the
contents and there is always only one dir with some index lets say input6)
so vid I can get from input6/id/vendor and pid from input6/id/product

In Mandriva 2009 vid:pid is set in:
    /sys/class/video4linux/video0/device/input/event6

libwebcam (not sure what distro was used for development) gets this
values from:
    /sys/class/video4linux/video0/device/idVendor and
    /sys/class/video4linux/video0/device/idProduct
&gt;&gt;<i> so no I'm parsing the values passed in the device card field of
</I>&gt;&gt;<i> v4l2_capability struct. UVC sets this to &quot;UVC Camera (vid:pid)&quot; and since I
</I>&gt;&gt;<i> only need these fields for the uvc driver there shouldn't be a problem,
</I>&gt;&gt;<i> right?
</I>&gt;&gt;<i> Or are there any plans to change this field in the future ?
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> There are no plans, but the card field isn't meant to convey that information. 
</I>&gt;<i> The format might change in the future without notice.
</I>&gt;<i>
</I>&gt;<i>   
</I>This may prove to be a problem, but for now it seems my best option.
I've set the code so that in case parsing these values fails, dynamic
controls are added anyway,
since you need to run the process with root user so that it can succeed,
only logitech owners will
bother doing with it (although it produces a really ugly output :-) ).
The best solution for users is setting a udev script so that these
controls are added upon device connection,
but this seems to be a bit difficult for a lot of people, so they rather
start guvcview with root privileges once.

Best regards,
Paulo



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004610.html">[Linux-uvc-devel] getting vid:pid
</A></li>
	<LI>Next message: <A HREF="004618.html">[Linux-uvc-devel] getting vid:pid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4615">[ date ]</a>
              <a href="thread.html#4615">[ thread ]</a>
              <a href="subject.html#4615">[ subject ]</a>
              <a href="author.html#4615">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
