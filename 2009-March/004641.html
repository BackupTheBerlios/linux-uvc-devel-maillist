<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] Logitech QuickCam Pro 9000, unable to get more then 5 fps when live recording, whats going on?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2009-March/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Logitech%20QuickCam%20Pro%209000%2C%0A%20unable%20to%20get%20more%20then%205%20fps%20when%20live%20recording%2C%20whats%20going%20on%3F&In-Reply-To=%3C49BA6361.3050107%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004640.html">
   <LINK REL="Next"  HREF="004642.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] Logitech QuickCam Pro 9000, unable to get more then 5 fps when live recording, whats going on?</H1>
    <B>Paulo Assis</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Logitech%20QuickCam%20Pro%209000%2C%0A%20unable%20to%20get%20more%20then%205%20fps%20when%20live%20recording%2C%20whats%20going%20on%3F&In-Reply-To=%3C49BA6361.3050107%40gmail.com%3E"
       TITLE="[Linux-uvc-devel] Logitech QuickCam Pro 9000, unable to get more then 5 fps when live recording, whats going on?">pj.assis at gmail.com
       </A><BR>
    <I>Fri Mar 13 14:45:05 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004640.html">[Linux-uvc-devel] Logitech QuickCam Pro 9000, unable to get more then 5 fps when live recording, whats going on?
</A></li>
        <LI>Next message: <A HREF="004642.html">[Linux-uvc-devel] Logitech QuickCam Pro 9000, unable to get more then 5 fps when live recording, whats going on?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4641">[ date ]</a>
              <a href="thread.html#4641">[ thread ]</a>
              <a href="subject.html#4641">[ subject ]</a>
              <a href="author.html#4641">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jelle,

Jelle de Jong escreveu:
&gt;<i> Paulo Assis wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> Jelle,
</I>&gt;&gt;<i> You must tick off the &quot;Exposure, Auto Priority&quot; control this is enable
</I>&gt;&gt;<i> by default and increases the exposure time (reducing fps) in order to
</I>&gt;&gt;<i> get a brighter picture.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Just use libwebcam or guvcview.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Best regards,
</I>&gt;&gt;<i> Paulo
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Jelle de Jong escreveu:
</I>&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i> Philipp Kolmann wrote:
</I>&gt;&gt;&gt;<i>   
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;&gt;&gt;<i> Jelle de Jong wrote:
</I>&gt;&gt;&gt;&gt;<i>     
</I>&gt;&gt;&gt;&gt;<i>         
</I>&gt;&gt;&gt;&gt;&gt;<i> Hello everybody,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> I bought a Logitech QuickCam Pro 9000[1] (80euro) to make a budget
</I>&gt;&gt;&gt;&gt;&gt;<i> free/libre open source live video recording systems from a laptop. But I
</I>&gt;&gt;&gt;&gt;&gt;<i> am unable to get more then 5 frames per seconds (fps) out of the webcam
</I>&gt;&gt;&gt;&gt;&gt;<i> under any resolution. The last 4 days I have been trying to get this
</I>&gt;&gt;&gt;&gt;&gt;<i> system to work both with webcam and a digital video camera on combisite1
</I>&gt;&gt;&gt;&gt;&gt;<i> of a usb video grabber.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> The webcam only delivers 5 fps tops most time its lower is this normal
</I>&gt;&gt;&gt;&gt;&gt;<i> and what to do about is, should I buy an other webcam and witch one?
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Please see the attachments for all good reports about fps and mencoder
</I>&gt;&gt;&gt;&gt;&gt;<i> and mplayer commands.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>   
</I>&gt;&gt;&gt;&gt;&gt;<i>       
</I>&gt;&gt;&gt;&gt;&gt;<i>           
</I>&gt;&gt;&gt;&gt;<i> It seems you use eeepc. Did you test the cam with another PC? Is your 
</I>&gt;&gt;&gt;&gt;<i> USB Port 1.1 or 2.0 (check with usbview).
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> I have several 9000 here and I don't have issues with debian and this cam.
</I>&gt;&gt;&gt;&gt;<i> You might want to get latest uvcvideo kernel module, but this cam is 
</I>&gt;&gt;&gt;&gt;<i> supported for a long time already.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> hth,
</I>&gt;&gt;&gt;&gt;<i> Philipp
</I>&gt;&gt;&gt;&gt;<i>     
</I>&gt;&gt;&gt;&gt;<i>         
</I>&gt;&gt;&gt;<i> Hi Philipp,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thanks for responding, what version of the webcam do you have? I seem to
</I>&gt;&gt;&gt;<i> have a got a 0.08
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> My ports are usb 2.0 I did not test it with an other pc I only have
</I>&gt;&gt;&gt;<i> eeepc's around me.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Is there a debian package for the latest uvcvideo kernel module?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Could you test this command for me and show me the output: (especially fps)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> mencoder <A HREF="tv://">tv://</A> -tv driver=v4l2:device=/dev/video0:fps=5 -ovc lavc
</I>&gt;&gt;&gt;<i> -lavcopts vcodec=mpeg4:vbitrate=2240:threads=2 -of rawvideo -o webcam4.mp4
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thanks in advance,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Jelle de Jong
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>       
</I>&gt;<i>
</I>&gt;<i> Hello Paulo,
</I>&gt;<i>
</I>&gt;<i> Thank you for your response.
</I>&gt;<i>
</I>&gt;<i> I now see whats happening, the fps drops to around 5fps when the
</I>&gt;<i> environment is dark and goes to around 30fps when the environment is bright.
</I>&gt;<i>
</I>&gt;<i> I changed Exposure, Auto Priority to 0 and now I seem to have an higher
</I>&gt;<i> stable fps.
</I>&gt;<i>
</I>&gt;<i> It also seems that when recording to disk the fps also drop form say
</I>&gt;<i> 30fps to 10fps but the cpu load and mem use is very low, is this normal?
</I>&gt;<i>
</I>&gt;<i> I have installed guvcview and played a bit with the many controls. The
</I>&gt;<i> commandline shows a lot of errors, and the webcam responses very weird,
</I>&gt;<i> when trying to change the settings most things fail. I have attached the
</I>&gt;<i> guvcview.log.
</I>&gt;<i>
</I>&gt;<i>   
</I>The warnings you see under guvcview  are related to dynamic controls
(focus, LED control, ...) if you want these controls enabled you must
run guvcview as the root user at least once per session.

If you try to change let's say gain and you have auto gain set then this
will fail, the same for exposure and white balance.
 
Has for a fixed frame rate your best option with that model is using
manual exposure. Just choose an appropriate exposure setting and stick
with that.

&gt;<i> How can I control the webcam with standardized v4l2 controls?
</I>&gt;<i>
</I>&gt;<i>   
</I>guvcview uses a standard v4l2 interface.
if you just want to use the controls, and capture video with some other
app. run:
guvcview --controls_only

&gt;<i> I want to use a webcam to record live images that move and have different
</I>&gt;<i> light environments, so the webcam has to adjust automatically to output
</I>&gt;<i> the best possible images. Is this a very hard thing to ask? I am willing
</I>&gt;<i> to buy a new device the only demands are usb interface and full v4l2
</I>&gt;<i> support. I have no idea of what is a good usb camera and what is not is
</I>&gt;<i> the QuickCam Pro 9000 the best one available? (200euro budget)
</I>&gt;<i>
</I>&gt;<i>   
</I>In my case I own a sphere AF and a pro5000 (2007 model) and at least
with guvcview  I never noticed any significant frame drop  when
recording video, but then guvcview doesn't use any expensive video
compression  (just  MJPG in case of yuv data).
With mencoder you are compressing to mpeg4, this is very CPU expensive.

&gt;<i> Is there a some anti shakiness feature like photo and video cameras have.
</I>&gt;<i> I kind of have shocking hands when video recording?
</I>&gt;<i>   
</I>In a webcam ???
Never heard of any such feature.

&gt;<i> Is there also some feature to say well do auto exposure but make sure it
</I>&gt;<i> does not go below 20 fps?
</I>&gt;<i>
</I>&gt;<i>   
</I>I always use auto-exposure with both my cameras and I can easily record
avi's with 30 fps, be it a dark or bright environment.
 

&gt;<i> So now I use the following command to record with the webcam:
</I>&gt;<i> mencoder <A HREF="tv://">tv://</A> -tv
</I>&gt;<i> driver=v4l2:device=/dev/video0:adevice=/dev/dsp1:immediatemode=0:forceaudio:width=800:height=600:fps=25
</I>&gt;<i> -oac lavc -lavcopts acodec=libmp3lame:abitrate=128 -ovc lavc -lavcopts
</I>&gt;<i> vcodec=mpeg4:vbitrate=2240:threads=2 -of lavf -lavfopts format=avi -o
</I>&gt;<i> webcam5.avi
</I>&gt;<i>
</I>&gt;<i> but the output is 640x480 with 15 fps not the resolution and fps I
</I>&gt;<i> supplied with the mencoder command why is this and how to fix this using
</I>&gt;<i> mencoder to record? Please also see the attached webcam5.log.
</I>&gt;<i>   
</I>
I'm not really a mencoder guru, have you tried recording on guvcview or
cheese ?
Maybe you should try some other lighter compression method when
recording, and convert the resulting file to mpg4 ( I recommend avidemux
for editing and compressing the captured file).
&gt;<i> Any help is welcome.
</I>&gt;<i>
</I>&gt;<i> Thanks in advance,
</I>&gt;<i>
</I>&gt;<i> Jelle de Jong
</I>&gt;<i>   
</I>Best regards,

Paulo

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004640.html">[Linux-uvc-devel] Logitech QuickCam Pro 9000, unable to get more then 5 fps when live recording, whats going on?
</A></li>
	<LI>Next message: <A HREF="004642.html">[Linux-uvc-devel] Logitech QuickCam Pro 9000, unable to get more then 5 fps when live recording, whats going on?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4641">[ date ]</a>
              <a href="thread.html#4641">[ thread ]</a>
              <a href="subject.html#4641">[ subject ]</a>
              <a href="author.html#4641">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
