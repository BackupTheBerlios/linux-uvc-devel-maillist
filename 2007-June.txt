From hrastgar at teksavvy.com  Fri Jun  1 16:18:35 2007
From: hrastgar at teksavvy.com (Houman R.)
Date: Fri, 01 Jun 2007 10:18:35 -0400
Subject: [Linux-uvc-devel] logitech pro 5000
Message-ID: <46602ABB.7000609@teksavvy.com>

hi everyone;

I have recently acquired a refurbished logitech 5000 webcam and I tried 
using it with the uvc drivers. The problem is that ekiga and amsn can 
use it perfectly after i install the uvc drivers. However, when i try to 
load it using gstreamer-properties the video shown is garbled. The odd 
thing is that on top of the video there is a small strip of pixels which 
are perfectly fine (if i move my hand in front of the webcam I can see 
it in that small strip) but the majority of the picture is just noise.

I need to be able to use gstreamer with this webcam because the 
application that I need to use doesn't support v4l2 but it supports the 
gstreamer framework (so I assume it can read v4l2 video through 
gstreamer). Any help will be much appreciated.


regards
Houman


From p4olo_prete at yahoo.it  Sat Jun  2 19:23:13 2007
From: p4olo_prete at yahoo.it (Paolo Prete)
Date: Sat, 2 Jun 2007 19:23:13 +0200 (CEST)
Subject: [Linux-uvc-devel] YUYV to RGB converter
Message-ID: <934188.10547.qm@web28004.mail.ukl.yahoo.com>

Hi,

when I grab frames from my Logitech Fusion cam (using
a code based on
http://v4l2spec.bytesex.org/v4l2spec/capture.c) i can
save them in YUYV format.
Now i need to convert them in RGB format in order to
see them with common viewers. Are there helper
functions in v4l2 API for this?
Otherwise, is there any other lib which I can use,
instead of writing from scratch a converter?


Thnks,
Paolo Prete


      ___________________________________ 
L'email della prossima generazione? Puoi averla con la nuova Yahoo! Mail: http://it.docs.yahoo.com/nowyoucan.html


From markmccarron_itt at hotmail.com  Sun Jun  3 13:08:56 2007
From: markmccarron_itt at hotmail.com (Mark McCarron)
Date: Sun, 03 Jun 2007 11:08:56 +0000
Subject: [Linux-uvc-devel] Bison Integrated Webcam - Used in Acer 5104WLMi
Message-ID: <BAY101-F29D21DBADC5518FD9455BAE1220@phx.gbl>

Hi guys,

I have a integrated webcam in my Acer laptop.  The manufacter is Bison (not 
logitech) and I'm having a problem with uvcvideo driver which is similar to 
the logitech orbicam issue.  The cam itself is 1.3 Megapixels, whether that 
is obtained through interpolation is another question.

Please read through this as I provided additional information throughout.

Here is the output of lsusb:

Bus 003 Device 002: ID 5986:0100
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x5986
  idProduct          0x0100
  bcdDevice            1.00
  iManufacturer           0
  iProduct                1 USB2.0 Camera
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          632
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
    MaxPower              500mA
    UNRECOGNIZED:  08 0b 00 02 0e 03 00 01
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              1 USB2.0 Camera
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              15
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 0 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0        64
  bNumConfigurations      1

When running lucview I get the following error:

# /usr/local/bin/luvcview
luvcview version 0.2.1
Video driver: x11
A window manager is available
video /dev/video0
Unable to set format: 5.
Init v4L2 failed !! exit fatal

# /usr/local/bin/luvcview -L
luvcview version 0.2.1
Video driver: x11
A window manager is available
video /dev/video0
/dev/video0 does not support read i/o
{ pixelformat = 'MJPG', description = 'MJPEG' }
{ discrete: width = 640, height = 480 }
        Time interval between frame: 1/30, 1/15, 1/10,
{ discrete: width = 320, height = 240 }
        Time interval between frame: 1/30, 1/15, 1/10,
{ discrete: width = 160, height = 120 }
        Time interval between frame: 1/30, 1/15, 1/10,
{ discrete: width = 352, height = 288 }
        Time interval between frame: 1/30, 1/15, 1/10,
{ discrete: width = 176, height = 144 }
        Time interval between frame: 1/30, 1/15, 1/10,
{ pixelformat = 'YUYV', description = 'Uncompressed' }
{ discrete: width = 640, height = 480 }
        Time interval between frame: 1/30, 1/15, 1/10,
{ discrete: width = 320, height = 240 }
        Time interval between frame: 1/30, 1/15, 1/10,
{ discrete: width = 160, height = 120 }
        Time interval between frame: 1/30, 1/15, 1/10,
{ discrete: width = 352, height = 288 }
        Time interval between frame: 1/30, 1/15, 1/10,
{ discrete: width = 176, height = 144 }
        Time interval between frame: 1/30, 1/15, 1/10,

I patched the current svn release with the USB Reset patch, this adds an 
extra line to my messages:

Jun  3 18:50:31 localhost kernel: uvcvideo: Failed to query (130) UVC 
control 1 (unit 0) : 2 (exp. 26).
Jun  3 18:50:31 localhost kernel: usb 3-5: reset high speed USB device using 
ehci_hcd and address 2

Adding trace=255 does not produce much more in the way of useful 
information.

At no time does the webcam function, in saying that it is *recognised*.  I 
can confirm that using Ekiga and the webcam appears in the list.  Ekiga is 
unable to obtain the requested pallete.

It appears to fail, when using luvcview, at the following section:

/* set format in */
    memset(&vd->fmt, 0, sizeof(struct v4l2_format));
    vd->fmt.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
    vd->fmt.fmt.pix.width = vd->width;
    vd->fmt.fmt.pix.height = vd->height;
    vd->fmt.fmt.pix.pixelformat = vd->formatIn;
    vd->fmt.fmt.pix.field = V4L2_FIELD_ANY;
    ret = ioctl(vd->fd, VIDIOC_S_FMT, &vd->fmt);
    if (ret < 0) {
	printf("Unable to set format: %d.\n", errno);
	goto fatal;

Any suggestions???

Thanks,

Mark.

_________________________________________________________________
The next generation of Hotmail is here! http://www.newhotmail.co.uk



From Glenn.West at aarcorp.com  Sun Jun  3 16:13:31 2007
From: Glenn.West at aarcorp.com (Glenn West)
Date: Sun, 3 Jun 2007 22:13:31 +0800
Subject: [Linux-uvc-devel] Linux-uvc-devel Digest, Vol 12, Issue 3
Message-ID: <0D7DB474101986479884361BBE91929F01251480@sinsiw2k1.aarcorp.com>

You may want to look at the python image library

it has a huge number of image manipulations

--------------------------
Sent from my BlackBerry Wireless Handheld


----- Original Message -----
From: linux-uvc-devel-bounces at lists.berlios.de <linux-uvc-devel-bounces at lists.berlios.de>
To: linux-uvc-devel at lists.berlios.de <linux-uvc-devel at lists.berlios.de>
Sent: Sun Jun 03 05:01:25 2007
Subject: Linux-uvc-devel Digest, Vol 12, Issue 3

Send Linux-uvc-devel mailing list submissions to
	linux-uvc-devel at lists.berlios.de

To subscribe or unsubscribe via the World Wide Web, visit
	https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
or, via email, send a message with subject or body 'help' to
	linux-uvc-devel-request at lists.berlios.de

You can reach the person managing the list at
	linux-uvc-devel-owner at lists.berlios.de

When replying, please edit your Subject line so it is more specific
than "Re: Contents of Linux-uvc-devel digest..."


Today's Topics:

   1. YUYV to RGB converter (Paolo Prete)


----------------------------------------------------------------------

Message: 1
Date: Sat, 2 Jun 2007 19:23:13 +0200 (CEST)
From: Paolo Prete <p4olo_prete at yahoo.it>
Subject: [Linux-uvc-devel] YUYV to RGB converter
To: linux-uvc-devel at lists.berlios.de
Message-ID: <934188.10547.qm at web28004.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=iso-8859-1

Hi,

when I grab frames from my Logitech Fusion cam (using
a code based on
http://v4l2spec.bytesex.org/v4l2spec/capture.c) i can
save them in YUYV format.
Now i need to convert them in RGB format in order to
see them with common viewers. Are there helper
functions in v4l2 API for this?
Otherwise, is there any other lib which I can use,
instead of writing from scratch a converter?


Thnks,
Paolo Prete


      ___________________________________ 
L'email della prossima generazione? Puoi averla con la nuova Yahoo! Mail: http://it.docs.yahoo.com/nowyoucan.html


------------------------------

_______________________________________________
Linux-uvc-devel mailing list
Linux-uvc-devel at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/linux-uvc-devel


End of Linux-uvc-devel Digest, Vol 12, Issue 3
**********************************************


DISCLAIMER:
IMPORTANT - This E-Mail is intended for the use of the individual or entity to which it is addressed, and may contain information that is privileged, confidential and exempt from disclosure under applicable law. If the reader of this E-mail is not the intended recipient, or the employee or agent responsible to deliver it to the  intended recipient, you are hereby notified that reading, disseminating, distributing or copying this communication is strictly  PROHIBITED. If you have received this communication in error, please immediately notify AAR CORP by e-mail and return  the original message to us by e-mail. THANK YOU.


From wixorpeek at gmail.com  Mon Jun  4 21:07:46 2007
From: wixorpeek at gmail.com (wixor)
Date: Mon, 4 Jun 2007 21:07:46 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS180 hardly works
Message-ID: <c43b2e150706041207s7ebd91d6j8a8ca62f95f2b9c@mail.gmail.com>

Hi,
I have Panasonic NV-GS180 (ID 04da:2318) digital camera with "webcam
mode". when uvcvideo driver discovers it, says:

usb 2-9: new full speed USB device using ohci_hcd and address 2
usb 2-9: configuration #1 chosen from 1 choice
uvcvideo: Found UVC 1.00 device DVC (04da:2318)
usbcore: registered new interface driver uvcvideo
USB Video Class driver (v0.1.0)

and /dev/video1 appears. But no known v4l framegrabber is able to use it.

---------------------------------------------------------------------------------------------------------------
mplayer with v4l2 drivers says:

Selected driver: v4l2
 name: Video 4 Linux 2 input
 author: Martin Olschewski <olschewski at zpr.uni-koeln.de>
 comment: first try, more to come ;-)
v4l2: ioctl get standard failed: Invalid argument
Selected device: DVC
 Capabilites:  video capture  streaming
 supported norms:
 inputs: 0 = Camera;
 Current input: 0
 Current format: unknown (0x47504a4d)
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl enum norm failed: Invalid argument
Error: Cannot set norm!
Selected input hasn't got a tuner!
v4l2: ioctl set mute failed: Invalid argument
v4l2: ioctl query control failed: Invalid argument
v4l2: ioctl query control failed: Invalid argument
v4l2: ioctl query control failed: Invalid argument
v4l2: ioctl query control failed: Invalid argument
FPS not specified in the header or invalid, use the -fps option.
No stream found.

v4l2: ioctl set mute failed: Invalid argument
v4l2: 0 frames successfully processed, 0 frames dropped.

when provided with -fps setting (tried various ranging from 1 to 25),
floods console with
v4l2: ioctl dequeue buffer failed: Invalid argument, idx = 0

---------------------------------------------------------------------------------------------------------------
mplayer with v4l driver says:

TV file format detected.
Selected driver: v4l
 name: Video 4 Linux input
 author: Alex Beregszaszi
 comment: under development
=================================================================
 WARNING: YOU ARE USING V4L DEMUXER WITH V4L2 DRIVERS!!!
 As the V4L1 compatibility layer is broken, this may not work.
 If you encounter any problems, use driver=v4l2 instead.
 Bugreports on driver=v4l with v4l2 drivers will be ignored.
=================================================================
Selected device: DVC
 Capabilites: capture
 Device type: 1
 Supported sizes: 48x32 => 320x240
 Inputs: 1
ioctl get channel failed: Invalid argument
ioctl get mbuf failed: Invalid argument
Segmentation fault

---------------------------------------------------------------------------------------------------------------
mencoder gets: (in dmesg)
mencoder[7143] trap divide error rip:51cb31 rsp:7ffff5e02dd0 error:0
mencoder[7181]: segfault at 0000000000000008 rip 0000000000517aa7 rsp
00007ffffb1eb378 error 4

---------------------------------------------------------------------------------------------------------------
xcam gets:

v4l1 ioctl VIDIOCGCAP, dir=r- (0x803c7601)
v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc050561a)
v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc050561a)
v4l2 ioctl VIDIOC_ENUM_FMT, dir=rw (0xc0405602)
v4l2 ioctl VIDIOC_TRY_FMT, dir=rw (0xc0d05640)
ppdev0: registered pardevice
ppdev0: unregistered pardevice
v4l1 ioctl VIDIOCGCAP, dir=r- (0x803c7601)
v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc050561a)
v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc050561a)
v4l2 ioctl VIDIOC_ENUM_FMT, dir=rw (0xc0405602)
v4l2 ioctl VIDIOC_TRY_FMT, dir=rw (0xc0d05640)
v4l1 ioctl VIDIOCGCHAN, dir=rw (0xc0307602)
v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc050561a)
v4l2 ioctl VIDIOC_G_STD, dir=r- (0x80085617)
uvcvideo: Unsupported ioctl 0x80085617
xcam[10553]: segfault at 0000000000000048 rip 000000000040563b rsp
00007fff1b8c8df0 error 4

[I have honestly no idea what ppdev does here, but these messages
appear evey time I launch xcam]

---------------------------------------------------------------------------------------------------------------
xawtv shows no image and says:

This is xawtv-3.95.dfsg.1, running on Linux/x86_64 (2.6.21)
/dev/video1 [v4l2]: no overlay support
v4l-conf had some trouble, trying to continue anyway
Warning: Cannot convert string
"-*-ledfixed-medium-r-*--39-*-*-*-c-*-*-*" to type FontStruct
ioctl: VIDIOC_G_STD(std=0x2b83d4c9f14d
[PAL_B,PAL_G,PAL_H,PAL_D1,PAL_M,NTSC_M,NTSC_M_JP,?,?,SECAM_B,SECAM_H,SECAM_L,?ATSC_8_VSB,(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null)]):
Invalid argument
ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument
no way to get: 384x288 32 bit TrueColor (LE: bgr-)

---------------------------------------------------------------------------------------------------------------
gqcam shows green image and says:
Error reading image...
dmesg says:
uvcvideo: Unknown ioctl 0x8030560a
uvcvideo: Unknown ioctl 0x400e7607
(I've enabled trace-level-64, so there are much more different
messages, but these two seem most interesting).

---------------------------------------------------------------------------------------------------------------
vlc gives just no image. Moreover, these apps behave slight
differently in each run, but the main "idea" is the same - i didn't
manage to get image captured even once. I've tried all methods and
known applications. I've searched this mailing list. Your website says
this chipset is supported (as far as I understand this). So what am I
missing? Thanks for paying attention

--
wixor


From phil at sanslogic.co.uk  Mon Jun  4 23:11:39 2007
From: phil at sanslogic.co.uk (Philip Heron)
Date: Mon, 04 Jun 2007 22:11:39 +0100
Subject: [Linux-uvc-devel] Panasonic NV-GS180 hardly works
In-Reply-To: <c43b2e150706041207s7ebd91d6j8a8ca62f95f2b9c@mail.gmail.com>
References: <c43b2e150706041207s7ebd91d6j8a8ca62f95f2b9c@mail.gmail.com>
Message-ID: <1180991499.5745.8.camel@beastie.lan>

(Hmm.. forgot to CC this to the list again)

Hi wixor,

On Mon, 2007-06-04 at 21:07 +0200, wixor wrote:
> Hi,
> I have Panasonic NV-GS180 (ID 04da:2318) digital camera with "webcam
> mode". when uvcvideo driver discovers it, says:
> 
> usb 2-9: new full speed USB device using ohci_hcd and address 2
> usb 2-9: configuration #1 chosen from 1 choice
> uvcvideo: Found UVC 1.00 device DVC (04da:2318)
> usbcore: registered new interface driver uvcvideo
> USB Video Class driver (v0.1.0)
> 
> and /dev/video1 appears. But no known v4l framegrabber is able to use it.

Have you tried Ekiga, lucview, uvccapture or fswebcam at all? They
should all work more-or-less perfectly with uvcvideo supported devices,
excluding the Logitech firmware bug which shouldn't affect you.

-Phil



From davidgalv at hotmail.com  Tue Jun  5 13:42:17 2007
From: davidgalv at hotmail.com (D G)
Date: Tue, 5 Jun 2007 13:42:17 +0200
Subject: [Linux-uvc-devel] I am also in the business of Bison integrated
	webcam
Message-ID: <BAY123-W133378912224DB8C27498AAD200@phx.gbl>


Hello,

Like Mark McCarron, I also have this camera on an Acer laptop, and it does not work under Linux either. I also look forward to helping in the upstream.

The easiest way to see that the camera does not work is that no /dev/video is created.

By the way, I have the message reception for this list disabled, so please Cc to my email address when replying to this thread. Thank you (I will check the messages on the web from time to time too).

Here I copy some output:

# lsusb -v | less

[...]

Bus 001 Device 002: ID 5986:0100 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x5986
  idProduct          0x0100
  bcdDevice            1.00
  iManufacturer           0
  iProduct                1 USB2.0 Camera
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          632
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               1 USB2.0 Camera
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              1 USB2.0 Camera
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           84
        dwClockFrequency       30.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                17
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  2
        bmControls           0x00000a0e
          Auto-Exposure Mode
          Auto-Exposure Priority
          Exposure Time (Absolute)
          Zoom (Absolute)
          PanTilt (Absolute)
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               6
        iTerminal               0
      VideoControl Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      4 (SELECTOR_UNIT)
        bUnitID                 4
        bNrInPins               1
        baSource( 0)            1
        iSelector               0
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 5
        bSourceID               4
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000157f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Power Line Frequency
          White Balance Temperature, Auto
        iProcessing             0
        bmVideoStandards     0x1b
          None
          NTSC - 525/60
          SECAM - 625/50
          NTSC - 625/50
      VideoControl Interface Descriptor:
        bLength                27
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 6
        guidExtensionCode         {a7974c56-a77e-4b90-8cbf-1c71ec303000}
        bNumControl            16
        bNrPins                 1
        baSourceID( 0)          5
        bControlSize            2
        bmControls( 0)       0xff
        bmControls( 1)       0xff
        iExtension              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              15
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            15
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormarts                        2
        wTotalLength                    33025
        bEndPointAddress                    0
        bmInfo                              3
        bTerminalLink                       2
        bStillCaptureMethod                 1
        bTriggerSupport                     1
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    11
        bmaControls( 1)                    11
      VideoStreaming Interface Descriptor:
        bLength                            11
        bDescriptorType                    36
        bDescriptorSubtype                  6 (FORMAT_MJPEG)
        bFormatIndex                        1
        bNumFrameDescriptors                5
        bFlags                              1
          Fixed-size samples: Yes
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         1
        bmCapabilities                   0x01
          Still image supported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      921600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         2
        bmCapabilities                   0x01
          Still image supported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      230400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         3
    bmCapabilities                   0x01
          Still image supported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize       57600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         4
        bmCapabilities                   0x01
          Still image supported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      304128
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         5
        bmCapabilities                   0x01
          Still image supported
        wWidth                            176
     wHeight                           144
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize       76032
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            26
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               5
        wWidth( 0)                        640
        wHeight( 0)                       480
        wWidth( 1)                        320
        wHeight( 1)                       240
        wWidth( 2)                        160
        wHeight( 2)                       120
        wWidth( 3)                        352
        wHeight( 3)                       288
        wWidth( 4)                        176
        wHeight( 4)                       144
        bNumCompressionPatterns             5
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        2
        bNumFrameDescriptors                5
        guidFormat                            {32595559-0000-0010-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x01
          Still image supported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x01
          Still image supported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      230400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x01
          Still image supported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize       57600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x01
          Still image supported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      304128
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
       bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x01
          Still image supported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize       76032
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            26
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               5
        wWidth( 0)                        640
        wHeight( 0)                       480
        wWidth( 1)                        320
        wHeight( 1)                       240
        wWidth( 2)                        160
        wHeight( 2)                       120
        wWidth( 3)                        352
        wHeight( 3)                       288
        wWidth( 4)                        176
        wHeight( 4)                       144
        bNumCompressionPatterns             5
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 0 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)

[...] 

And here the message when trying to load the module:

# modprobe uvcvideo
# dmesg
Linux video capture interface: v2.00
uvcvideo: Found UVC 1.00 device USB2.0 Camera (5986:0100)
uvcvideo: No valid video chain found.
usbcore: registered new interface driver uvcvideo
USB Video Class driver (v0.1.0-c) 

_________________________________________________________________
With Windows Live Hotmail, you can personalize your inbox with your favorite color.
www.windowslive-hotmail.com/learnmore/personalize.html?locale=en-us&ocid=TXT_TAGLM_HMWL_reten_addcolor_0607

From markmccarron_itt at hotmail.com  Tue Jun  5 14:48:14 2007
From: markmccarron_itt at hotmail.com (Mark McCarron)
Date: Tue, 05 Jun 2007 12:48:14 +0000
Subject: [Linux-uvc-devel] I am also in the business of Bison
	integratedwebcam
In-Reply-To: <BAY123-W133378912224DB8C27498AAD200@phx.gbl>
Message-ID: <BAY101-F23756A719BA7F1C86193D6E1200@phx.gbl>

David,

Have you tried the svn release?

With that release I get a video device registered.  The device doesn't 
function properly though, I can see it, but not use it.

Linux video capture interface: v2.00
uvcvideo: Found UVC 1.00 device USB2.0 Camera (5986:0100)
usbcore: registered new driver uvcvideo
USB Video Class driver (v0.1.0)

Mark.

>From: D G <davidgalv at hotmail.com>
>To: <linux-uvc-devel at lists.berlios.de>
>Subject: [Linux-uvc-devel] I am also in the business of Bison 
>integratedwebcam
>Date: Tue, 5 Jun 2007 13:42:17 +0200
>MIME-Version: 1.0
>
>
>Hello,
>
>Like Mark McCarron, I also have this camera on an Acer laptop, and it does 
>not work under Linux either. I also look forward to helping in the 
>upstream.
>
>The easiest way to see that the camera does not work is that no /dev/video 
>is created.
>
>By the way, I have the message reception for this list disabled, so please 
>Cc to my email address when replying to this thread. Thank you (I will 
>check the messages on the web from time to time too).
>
>Here I copy some output:
>
># lsusb -v | less
>
>[...]
>
>And here the message when trying to load the module:
>
># modprobe uvcvideo
># dmesg
>Linux video capture interface: v2.00
>uvcvideo: Found UVC 1.00 device USB2.0 Camera (5986:0100)
>uvcvideo: No valid video chain found.
>usbcore: registered new interface driver uvcvideo
>USB Video Class driver (v0.1.0-c)
>
>_________________________________________________________________
>With Windows Live Hotmail, you can personalize your inbox with your 
>favorite color.
>www.windowslive-hotmail.com/learnmore/personalize.html?locale=en-us&ocid=TXT_TAGLM_HMWL_reten_addcolor_0607
>_______________________________________________
>Linux-uvc-devel mailing list
>Linux-uvc-devel at lists.berlios.de
>https://lists.berlios.de/mailman/listinfo/linux-uvc-devel

_________________________________________________________________
The next generation of Hotmail is here! http://www.newhotmail.co.uk



From wixorpeek at gmail.com  Tue Jun  5 18:27:38 2007
From: wixorpeek at gmail.com (wixor)
Date: Tue, 5 Jun 2007 18:27:38 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS180 hardly works
In-Reply-To: <1180991499.5745.8.camel@beastie.lan>
References: <c43b2e150706041207s7ebd91d6j8a8ca62f95f2b9c@mail.gmail.com>
	<1180991499.5745.8.camel@beastie.lan>
Message-ID: <c43b2e150706050927j5e43c570weecf778cc4383206@mail.gmail.com>

>
> Have you tried Ekiga, lucview, uvccapture or fswebcam at all? They
> should all work more-or-less perfectly with uvcvideo supported devices,
> excluding the Logitech firmware bug which shouldn't affect you.
>
> -Phil
>
Hmmm..... yes.... now it seems to be working - luvcview shows me
picture at 12 fps, so it's like ok... But is there any way to use
uvcvideo with mplayer? I'd like to stream my webcam image to website
visitors, so mplayer would be perfect..... any hints?

--
wixor


From linux-uvc-devel at sf.ecog.de  Tue Jun  5 23:43:47 2007
From: linux-uvc-devel at sf.ecog.de (Stefan Fuhrmann)
Date: Tue, 05 Jun 2007 22:43:47 +0100
Subject: [Linux-uvc-devel] Logitech Quickcam Pro 5000 (again)
In-Reply-To: <200705271939.39202.laurent.pinchart@skynet.be>
References: <20070524225417.o59gzyvan8kgwso0@webmail.df.eu>
	<200705271939.39202.laurent.pinchart@skynet.be>
Message-ID: <4665D913.1070200@sf.ecog.de>

Hi Laurent

Thank you for your extensive answer. Unfortunately I don't really find 
the time to get my camera running, but didn't want to leave your mail 
unreplied.


Laurent Pinchart wrote:
> 
> Xawtv has a little bug which makes the application not compatible with the 
> Linux UVC driver. There's a patch available in the SVN repository at 
> svn://svn.berlios.de/linux-uvc/patches/xawtv.

I am having a little trouble understanding how to compile xawtv (it 
compiled, but I can't find an executable 'xawtv' file), but I'll get 
there eventually.


>> The error messages dmesg is showing look like that:
>>
>> uvcvideo: Failed to query (1) UVC control 2 (unit 0) : -32 (exp. 26).
>> uvcvideo: Failed to query (135) UVC control 2 (unit 2) : -32 (exp. 2).
>> uvcvideo: Failed to query (135) UVC control 3 (unit 2) : -110 (exp. 2).
>> uvcvideo: Failed to query (135) UVC control 7 (unit 2) : -75 (exp. 2).
>> uvcvideo: Failed to query (130) UVC control 7 (unit 2) : -32 (exp. 2).
>>
>> [...]
>>
>> Can anyone suggest a way to debug that problem?
> 
> Try to apply the abovementioned patch, it should fix your problem.
> 
> -32 is -EPIPE, and -110 is -ETIMEDOUT. Error codes are defined in errno.h. 
> Those errors should not be fatal, but they certainly indicate that you suffer 
> from the Logitech hardware bug.

Now that I managed to run the compiled version - it turned out that 
'INSTALL_MOD_DIR := usb/media' in the makefile was indeed the correct path.
I activated the UVC_RESET_ON_TIMEOUT define in uvcvideo.h, but I can't 
see any of the messages that where added as part of the reset patch, 
like "...trying to reset ...". I guess I just haven't come into a 
situation where the camera timed out. Even with that define deactivated, 
no -ETIMEDOUT or -EPIPE appear in the logs. Maybe this also has to do 
with the fact that I was using an old driver version, or I'm not trying 
hard enough...

I will investigate further to get zoneminder and xawtv running with the 
camera and will probably bother you again when I get stuck ;-)

Thank you very much for your help so far,

Stefan



From phil at sanslogic.co.uk  Wed Jun  6 00:02:52 2007
From: phil at sanslogic.co.uk (Philip Heron)
Date: Tue, 05 Jun 2007 23:02:52 +0100
Subject: [Linux-uvc-devel] Panasonic NV-GS180 hardly works
In-Reply-To: <c43b2e150706050927j5e43c570weecf778cc4383206@mail.gmail.com>
References: <c43b2e150706041207s7ebd91d6j8a8ca62f95f2b9c@mail.gmail.com>
	<1180991499.5745.8.camel@beastie.lan>
	<c43b2e150706050927j5e43c570weecf778cc4383206@mail.gmail.com>
Message-ID: <1181080972.8388.17.camel@beastie.lan>

On Tue, 2007-06-05 at 18:27 +0200, wixor wrote:
> >
> > Have you tried Ekiga, lucview, uvccapture or fswebcam at all? They
> > should all work more-or-less perfectly with uvcvideo supported devices,
> > excluding the Logitech firmware bug which shouldn't affect you.
> >
> > -Phil
> >
> Hmmm..... yes.... now it seems to be working - luvcview shows me
> picture at 12 fps, so it's like ok... But is there any way to use
> uvcvideo with mplayer? I'd like to stream my webcam image to website
> visitors, so mplayer would be perfect..... any hints?

I don't believe mplayer is appropriate for this kind of thing. If your
after the traditional style of webcam (updates every few
seconds/minutes) then uvccapture and fswebcam are probably your best
bet. Both will capture regular images and can have them uploaded or
saved to file where your visitors can access them. A bit of Javascript
on the website to refresh the image and your set.

If your after proper streaming video, that's another matter entirely :-)

-Phil



From wixorpeek at gmail.com  Wed Jun  6 16:10:48 2007
From: wixorpeek at gmail.com (wixor)
Date: Wed, 6 Jun 2007 16:10:48 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS180 hardly works
In-Reply-To: <1181080972.8388.17.camel@beastie.lan>
References: <c43b2e150706041207s7ebd91d6j8a8ca62f95f2b9c@mail.gmail.com>
	<1180991499.5745.8.camel@beastie.lan>
	<c43b2e150706050927j5e43c570weecf778cc4383206@mail.gmail.com>
	<1181080972.8388.17.camel@beastie.lan>
Message-ID: <c43b2e150706060710q3828891di823f4ae29920b61f@mail.gmail.com>

>
> I don't believe mplayer is appropriate for this kind of thing. If your
> after the traditional style of webcam (updates every few
> seconds/minutes) then uvccapture and fswebcam are probably your best
> bet. Both will capture regular images and can have them uploaded or
> saved to file where your visitors can access them. A bit of Javascript
> on the website to refresh the image and your set.
>
> If your after proper streaming video, that's another matter entirely :-)
>
> -Phil
>
Well, all I know is that mplayer/ffmpeg have video streaming feature,
what is what I want. I've done some
capture-jpeg-upload-it-and-refresh-website stuff before with bttv &
webcam tool from xawtv (that camera was generating tv signal) but now
i need to stream my video. Any tool that supports this with uvcvideo?

--
wixor


From laurent.pinchart at skynet.be  Thu Jun  7 21:15:18 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 7 Jun 2007 21:15:18 +0200
Subject: [Linux-uvc-devel] uvcvideo driver for x86_64
In-Reply-To: <32209efe0705311245n1f181ef5xc6320e0808105d3f@mail.gmail.com>
References: <32209efe0703272038k10a6f281v6cf0121e2442aefb@mail.gmail.com>
	<32209efe0705251353t42ded626x3310daf91d968cc7@mail.gmail.com>
	<32209efe0705311245n1f181ef5xc6320e0808105d3f@mail.gmail.com>
Message-ID: <200706072115.18687.laurent.pinchart@skynet.be>

Hi Natalie,

Sorry not to have answered sooner. I've been busy with real life for a whole 
week.

On Thursday 31 May 2007, Natalie Protasevich wrote:
> On 5/25/07, Natalie Protasevich <protasnb at gmail.com> wrote:
> > Hi Laurent,
> >
> >  > V4l: device has no mmap support
> >  >
> > > > ioctl VIDIOCSWIN: Input/output error
> > > > ioctl VIDIOCGWIN: Invalid argument
> > > > ioctl VIDIOCGCHAN: Invalid argument
> > > > ioctl VIDIOCGWIN: Invalid argument
> > > > yuvgrab, read failed!
> > > > yuvgrab, read failed!
> > > > yuvgrab, read failed!
> > >
> > > Those ioctls are from the V4L1 API, which the Linux UVC driver doesn't
> > > support. It might be possible to use the V4L1 compatibility layer, and
> > > that's probably what you're doing already (maybe without even being
> > > aware) if Marratech works on a 32 bits machine. In that case, there
> > > might be some issues with the V4L1 compatibility layer on 64 bit
> > > architectures. 
> >
> > That is exactly what I am suspecting...
> >
> > > uvccapture and luvcview:
> > > > nataliep at 4300-test:/tmp$ ./uvccapture
> > > > sending ioctl VIDIOC_QUERYCAP
> > > > sending ioctl VIDIOC_S_FMT
> > > > Unable to set format: 22.
> > > >  Init v4L2 failed !! exit fatal
> > >
> > > Those are definitely V4L2 calls. -22 means invalid argument. There
> > > might again be some issue with 64 bit architectures, either in the
> > > driver or in luvcview.
> > > I can't help you much as I have no 64 bit machine to test this on.
> >
> > Actually, I am happy to report that the latest  kernel patches have
> > resolved this issue.

Good news :-)

> > > > I also have a kernel trace with my debug, this is a part of it that
> > > > shows that the driver calls into the l1 compat layer, which seems odd
> > > > to  me since everything from application to kernel is all l2:
> > >
> > > compat_ioctl32 is the 32bit/64bit compatibility layer, not the V4L1
> > > compatibility layer.
> >
> > With new updates to the kernel videodev and compat_ioctl32 layer we can
> > run UVC cameras very nicely, using applications like luvcview, it works
> > just great.
> >
> > However, the problem is that we would like to use conferencing software
> > that is written to support old v4L1 mechanism, and the rewrite is going
> > on...slowly :)  But the V4L1 compat layer it it was working could be a
> > solution for the time being. I tracked couple first ioctl's that fail
> > without proper support/translation in the v4l_compat_ioctl32 - those are
> > VIDIOCGMBUF and VIDIOCGCHAN. I am not sure if it is feasible/easy to
> > implement those, the latter one seems to be just a matter of filling out
> > a structure according to the camera's features, but the memory mapped
> > buffer looks a bit challenging.

V4L2 maps buffer individually, while V4L2 maps them in a single call. This is 
why VIDIOCGMBUF calls can't be translated automatically by the V4L1 
compatibility layer but must be handled by drivers.

It shouldn't be too difficult to come up with a V4L1 compatibility patch, but 
I'm not too keen on including it in the driver. V4L1 is deprecated, and 
applications should really move on to V4L2. If drivers implement V4L1 
compatibility, application developers will just stick with V4L1 for longer.

> > Although looking at the way it is implemented in videodev - it seems
> > possible to do something similar. I would really appreciate your opinion
> > on this problem. 
>
> I'm taking this back. With a closer look the software seems to assume that
> device is capable of read and mmap, whereas the new Logitech cams are
> streaming devices, so they can't really do read from the user mmaped
> buffer...

V4L2 specifies 3 I/O methods to move data from kernel space to user space. The 
first I/O method is plain read(), which the Linux UVC driver doesn't 
implement yet. The second and third I/O methods are very similar. The kernel 
writes data in video buffers which are mapped to userspace using mmap(). 
Userspace applications then use the VIDIOC_DQBUF ioctl to wait until a buffer 
is ready, and then proceed to read the data directly from the memory buffer. 
This is much more efficient than read() calls, and is referred as streaming 
I/O.

Drivers can implement one or all I/O methods regardless of device 
capabilities. I decided to implement the mmap streaming I/O method first as 
this was the most efficient one, and the one used by most userspace 
applications. Implementing read() support is certainly possible and wouldn't 
be that difficult.

> (am I right?) So since the software doesn't implement streaming 
> (it turns it off in fact), and doesn't call QBUF, DQBUF etc. instead it's
> just sending reads that fail of course. So there is no really a point to
> implement VIDOCGMBUF as I think I understand now.

If your V4L1 software uses read() to retrieve video data, implementing read 
support would indeed be more useful than implementing VIDIOCGMBUF.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Jun  7 21:44:13 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 7 Jun 2007 21:44:13 +0200
Subject: [Linux-uvc-devel] logitech pro 5000
In-Reply-To: <46602ABB.7000609@teksavvy.com>
References: <46602ABB.7000609@teksavvy.com>
Message-ID: <200706072144.13937.laurent.pinchart@skynet.be>

Hi Houman,

> I have recently acquired a refurbished logitech 5000 webcam and I tried
> using it with the uvc drivers. The problem is that ekiga and amsn can
> use it perfectly after i install the uvc drivers. However, when i try to
> load it using gstreamer-properties the video shown is garbled. The odd
> thing is that on top of the video there is a small strip of pixels which
> are perfectly fine (if i move my hand in front of the webcam I can see
> it in that small strip) but the majority of the picture is just noise.

Have you tried both MJPEG and YUV ? I haven't used gstreamer myself but I seem 
to recall some people made it work.

> I need to be able to use gstreamer with this webcam because the
> application that I need to use doesn't support v4l2 but it supports the
> gstreamer framework (so I assume it can read v4l2 video through
> gstreamer). Any help will be much appreciated.

Regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Jun  7 21:55:32 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 7 Jun 2007 21:55:32 +0200
Subject: [Linux-uvc-devel] YUYV to RGB converter
In-Reply-To: <934188.10547.qm@web28004.mail.ukl.yahoo.com>
References: <934188.10547.qm@web28004.mail.ukl.yahoo.com>
Message-ID: <200706072155.32438.laurent.pinchart@skynet.be>

Hi Paolo,

> when I grab frames from my Logitech Fusion cam (using
> a code based on
> http://v4l2spec.bytesex.org/v4l2spec/capture.c) i can
> save them in YUYV format.
> Now i need to convert them in RGB format in order to
> see them with common viewers. Are there helper
> functions in v4l2 API for this?

No there isn't. V4L2 is a kernel/userspace interface and doesn't provide video 
format conversion.

> Otherwise, is there any other lib which I can use,
> instead of writing from scratch a converter?

There are probably YUYV to RGB converters in major codec libraries and/or in 
webcam applications.

Lots of people have stated their interest for a userspace V4L2 library which 
would handle simple video format conversions. Unfortunately, nobody has 
implemented it yet. Wanna have a go ? :-)

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Jun  7 22:20:56 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 7 Jun 2007 22:20:56 +0200
Subject: [Linux-uvc-devel] Bison Integrated Webcam - Used in Acer
	5104WLMi
In-Reply-To: <BAY101-F29D21DBADC5518FD9455BAE1220@phx.gbl>
References: <BAY101-F29D21DBADC5518FD9455BAE1220@phx.gbl>
Message-ID: <200706072220.56997.laurent.pinchart@skynet.be>

Hi Mark,

> I have a integrated webcam in my Acer laptop.  The manufacter is Bison (not
> logitech) and I'm having a problem with uvcvideo driver which is similar to
> the logitech orbicam issue.  The cam itself is 1.3 Megapixels, whether that
> is obtained through interpolation is another question.

From the luvcview -L output you posted, it seems the camera has a VGA 
(640x480) sensor. Higher resolutions are probably achieved using software 
interpolation.

> Please read through this as I provided additional information throughout.
>
> Here is the output of lsusb:
[snip]

Could you please post lsusb output with usbutils 0.72 or newer ?

> When running lucview I get the following error:
>
> # /usr/local/bin/luvcview
> luvcview version 0.2.1
> Video driver: x11
> A window manager is available
> video /dev/video0
> Unable to set format: 5.
> Init v4L2 failed !! exit fatal
>
> # /usr/local/bin/luvcview -L
> luvcview version 0.2.1
> Video driver: x11
> A window manager is available
> video /dev/video0
> /dev/video0 does not support read i/o
> { pixelformat = 'MJPG', description = 'MJPEG' }
> { discrete: width = 640, height = 480 }
>         Time interval between frame: 1/30, 1/15, 1/10,
> { discrete: width = 320, height = 240 }
>         Time interval between frame: 1/30, 1/15, 1/10,
> { discrete: width = 160, height = 120 }
>         Time interval between frame: 1/30, 1/15, 1/10,
> { discrete: width = 352, height = 288 }
>         Time interval between frame: 1/30, 1/15, 1/10,
> { discrete: width = 176, height = 144 }
>         Time interval between frame: 1/30, 1/15, 1/10,
> { pixelformat = 'YUYV', description = 'Uncompressed' }
> { discrete: width = 640, height = 480 }
>         Time interval between frame: 1/30, 1/15, 1/10,
> { discrete: width = 320, height = 240 }
>         Time interval between frame: 1/30, 1/15, 1/10,
> { discrete: width = 160, height = 120 }
>         Time interval between frame: 1/30, 1/15, 1/10,
> { discrete: width = 352, height = 288 }
>         Time interval between frame: 1/30, 1/15, 1/10,
> { discrete: width = 176, height = 144 }
>         Time interval between frame: 1/30, 1/15, 1/10,

As mentioned above, the highest resolution supported by the device is 640x480.

> I patched the current svn release with the USB Reset patch, this adds an
> extra line to my messages:

The reset patch should only be useful with Logitech devices. This was worth a 
try though, as the webcam might have been a rebranded Logitech device, or 
have been based on the same hardware.

> Jun  3 18:50:31 localhost kernel: uvcvideo: Failed to query (130) UVC
> control 1 (unit 0) : 2 (exp. 26).

This is the issue. The webcam sends a wrong response to a video format 
negotiation command. I suspect the Windows driver not to use that command, 
which is why the bug has gone undetected.

> Jun  3 18:50:31 localhost kernel: usb 3-5: reset high speed USB device
> using ehci_hcd and address 2
>
> Adding trace=255 does not produce much more in the way of useful
> information.
>
> At no time does the webcam function, in saying that it is *recognised*.  I
> can confirm that using Ekiga and the webcam appears in the list.  Ekiga is
> unable to obtain the requested pallete.
>
> It appears to fail, when using luvcview, at the following section:
>
> /* set format in */
>     memset(&vd->fmt, 0, sizeof(struct v4l2_format));
>     vd->fmt.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
>     vd->fmt.fmt.pix.width = vd->width;
>     vd->fmt.fmt.pix.height = vd->height;
>     vd->fmt.fmt.pix.pixelformat = vd->formatIn;
>     vd->fmt.fmt.pix.field = V4L2_FIELD_ANY;
>     ret = ioctl(vd->fd, VIDIOC_S_FMT, &vd->fmt);
>     if (ret < 0) {
> 	printf("Unable to set format: %d.\n", errno);
> 	goto fatal;
>
> Any suggestions???

Please try the attached patch. Don't forget to post lsusb output with usbutils 
0.72 or newer.

Best regards,

Laurent Pinchart
-------------- next part --------------
A non-text attachment was scrubbed...
Name: bison.patch
Type: text/x-diff
Size: 638 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070607/6ad45fad/attachment.patch>

From brian at interlinx.bc.ca  Thu Jun  7 21:49:09 2007
From: brian at interlinx.bc.ca (Brian J. Murrell)
Date: Thu, 07 Jun 2007 15:49:09 -0400
Subject: [Linux-uvc-devel] logitech pro 5000
In-Reply-To: <200706072144.13937.laurent.pinchart@skynet.be>
References: <46602ABB.7000609@teksavvy.com>
	<200706072144.13937.laurent.pinchart@skynet.be>
Message-ID: <1181245749.6691.122.camel@pc.ilinx>

On Thu, 2007-06-07 at 21:44 +0200, Laurent Pinchart wrote:
> Hi Houman,
> 
> > I have recently acquired a refurbished logitech 5000 webcam and I tried
> > using it with the uvc drivers. The problem is that ekiga and amsn can
> > use it perfectly after i install the uvc drivers. However, when i try to
> > load it using gstreamer-properties the video shown is garbled. The odd
> > thing is that on top of the video there is a small strip of pixels which
> > are perfectly fine (if i move my hand in front of the webcam I can see
> > it in that small strip) but the majority of the picture is just noise.

Yeah, I get the same thing here.  Ubuntu gutsy.

> Have you tried both MJPEG and YUV ? I haven't used gstreamer myself but I seem 
> to recall some people made it work.

I don't think there are any knobs for that in gstreamer-properties.

b.

-- 
My other computer is your Microsoft Windows server.

Brian J. Murrell
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070607/7d4a85cf/attachment.pgp>

From laurent.pinchart at skynet.be  Thu Jun  7 22:46:24 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 7 Jun 2007 22:46:24 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS180 hardly works
In-Reply-To: <c43b2e150706060710q3828891di823f4ae29920b61f@mail.gmail.com>
References: <c43b2e150706041207s7ebd91d6j8a8ca62f95f2b9c@mail.gmail.com>
	<1181080972.8388.17.camel@beastie.lan>
	<c43b2e150706060710q3828891di823f4ae29920b61f@mail.gmail.com>
Message-ID: <200706072246.24821.laurent.pinchart@skynet.be>

On Wednesday 06 June 2007, wixor wrote:
> > I don't believe mplayer is appropriate for this kind of thing. If your
> > after the traditional style of webcam (updates every few
> > seconds/minutes) then uvccapture and fswebcam are probably your best
> > bet. Both will capture regular images and can have them uploaded or
> > saved to file where your visitors can access them. A bit of Javascript
> > on the website to refresh the image and your set.
> >
> > If your after proper streaming video, that's another matter entirely :-)
> >
> > -Phil
>
> Well, all I know is that mplayer/ffmpeg have video streaming feature,
> what is what I want. I've done some
> capture-jpeg-upload-it-and-refresh-website stuff before with bttv &
> webcam tool from xawtv (that camera was generating tv signal) but now
> i need to stream my video. Any tool that supports this with uvcvideo?

A patch has been integrated into the MPlayer SVN repository to fix the issue 
you experienced. You will still need to pass the -fps command line argument.

Best regards,

Laurent Pinchart


From hrastgar at teksavvy.com  Fri Jun  8 02:08:15 2007
From: hrastgar at teksavvy.com (Houman R.)
Date: Thu, 07 Jun 2007 20:08:15 -0400
Subject: [Linux-uvc-devel] logitech pro 5000
In-Reply-To: <200706072144.13937.laurent.pinchart@skynet.be>
References: <46602ABB.7000609@teksavvy.com>
	<200706072144.13937.laurent.pinchart@skynet.be>
Message-ID: <46689DEF.6020104@teksavvy.com>

Laurent Pinchart wrote:
> Hi Houman,
>
>   
>> I have recently acquired a refurbished logitech 5000 webcam and I tried
>> using it with the uvc drivers. The problem is that ekiga and amsn can
>> use it perfectly after i install the uvc drivers. However, when i try to
>> load it using gstreamer-properties the video shown is garbled. The odd
>> thing is that on top of the video there is a small strip of pixels which
>> are perfectly fine (if i move my hand in front of the webcam I can see
>> it in that small strip) but the majority of the picture is just noise.
>>     
>
> Have you tried both MJPEG and YUV ? I haven't used gstreamer myself but I seem 
> to recall some people made it work.
>
>   
>> I need to be able to use gstreamer with this webcam because the
>> application that I need to use doesn't support v4l2 but it supports the
>> gstreamer framework (so I assume it can read v4l2 video through
>> gstreamer). Any help will be much appreciated.
>>     
>
> Regards,
>
> Laurent Pinchart
>
>   
hi Laurent and thanks for the reply;

gstreamer-properties doesnt give me an optionof choosing YUV or MJPEG. 
Also I doubt its a format issue because a part of the image is fine and 
the rest garbled. Also if you know anyone who has managed to get it 
working could you please send me a link to a post ?
Also a side question, this camera is suppose to support VGA format, but 
so far in amsn I have not been able to get more than 320x240 with 
luvcview resolution from it. Is this as much as we can get out of this 
camera?

thanks again for your reply;

Houman


From benlau at embedded.hk  Fri Jun  8 11:26:02 2007
From: benlau at embedded.hk (Ben Lau)
Date: Fri, 8 Jun 2007 17:26:02 +0800
Subject: [Linux-uvc-devel] YUYV to RGB converter
In-Reply-To: <200706072155.32438.laurent.pinchart@skynet.be>
References: <934188.10547.qm@web28004.mail.ukl.yahoo.com>
	<200706072155.32438.laurent.pinchart@skynet.be>
Message-ID: <f9a7555e0706080226o2ddba2cawbf91cd50b5018ef@mail.gmail.com>

On 6/8/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> Hi Paolo,
>
> > when I grab frames from my Logitech Fusion cam (using
> > a code based on
> > http://v4l2spec.bytesex.org/v4l2spec/capture.c) i can
> > save them in YUYV format.
> > Now i need to convert them in RGB format in order to
> > see them with common viewers. Are there helper
> > functions in v4l2 API for this?
>
> No there isn't. V4L2 is a kernel/userspace interface and doesn't provide video
> format conversion.
>
> > Otherwise, is there any other lib which I can use,
> > instead of writing from scratch a converter?
>
> There are probably YUYV to RGB converters in major codec libraries and/or in
> webcam applications.
>
> Lots of people have stated their interest for a userspace V4L2 library which
> would handle simple video format conversions. Unfortunately, nobody has
> implemented it yet. Wanna have a go ? :-)
>
> Laurent Pinchart
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>

Hi Laurent Pinchart,

In fact, I have implemented a v4l2 library for my own project. And
just published on web. You could download the source code through
Bazaar:

bzr branch http://benlau.e-fever.org/projects/bzr/libv4l2 libv4l2

Features of the library:

- V4L2 API (only)

- Query and set video device properties that include:
	Resolution , Image Format, Channel, Norm , fps,...

- Read/Write and Memory mapped streaming I/O

- YUYV/YUV420 to RGB conversion. (No MJPEG yet)

- A simple GTK+ dialog to choose the video device to open and set the
properties.

- Utility to convert video frame to IplImage format for use with OpenCV.

License: BSD

The source comes with two libraries. They are libv4l2 and libcv-v4l2.
libv4l2 is the core library to deal with v4l2 device. libcv-v4l2 is
"supposed" to be an extension to OpenCV for access low level device
setting, but only few functions are implemented and the design is not
well. It will be completely rewrote afterward. All features that
should not be provided by libv4l2 will be there(e.g GTK+ Dialog)

libv4l2 itself is a very simple library that just requires standard
library like libc6-dev in order to build, but libcv-v4l2 need packages
of  gtk+-2.0 and OpenCV.

The package of OpenCV has been available in Debian Etch/SID, they
could be installed by :

  	apt-get install libcv-dev libcvaux-dev libhighgui-dev

The build instructions:

aclocal
automake
autoconf
./configure --prefix=/tmp/usr # for testing
make
make install

There are two demo applications available. The first one is a video
viewer with two dialogs to choose the input video device and set the
properties respectively. The other one is a face detection program
based on the sample code from OpenCV :

/tmp/usr/bin/v4l2-demo
/tmp/usr/bin/facedetect

The library is still under development. The API may change for new
version. Therefore, only static link libraries are provided.

API Doc:

http://benlau.e-fever.org/projects/docs/libcv-v4l2/index.html
http://benlau.e-fever.org/projects/docs/libv4l2/index.html

Known Issue: Could not use streaming I/O with EM28XX driver. The mmap
function reports error.

Please feel free to contact me for any comment for the source. :)


From wixorpeek at gmail.com  Fri Jun  8 18:33:41 2007
From: wixorpeek at gmail.com (wixor)
Date: Fri, 8 Jun 2007 18:33:41 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS180 hardly works
In-Reply-To: <200706072246.24821.laurent.pinchart@skynet.be>
References: <c43b2e150706041207s7ebd91d6j8a8ca62f95f2b9c@mail.gmail.com>
	<1181080972.8388.17.camel@beastie.lan>
	<c43b2e150706060710q3828891di823f4ae29920b61f@mail.gmail.com>
	<200706072246.24821.laurent.pinchart@skynet.be>
Message-ID: <c43b2e150706080933v4a840659nfb6fb58bf7ea6aaf@mail.gmail.com>

>
> A patch has been integrated into the MPlayer SVN repository to fix the issue
> you experienced. You will still need to pass the -fps command line argument.
>
Thanks very much! However, current svn source does not compile on
x86_64. The following is fatal:

gcc -I../libavcodec -I../libavformat -Wdisabled-optimization
-Wno-pointer-sign -Wdeclaration-after-statement -I. -I..
-I../libavutil -Wall -Wno-switch -Wpointer-arith -Wredundant-decls -O4
-march=k8 -mtune=k8 -pipe -ffast-math -fomit-frame-pointer
-D_REENTRANT -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64
-D_LARGEFILE64_SOURCE -I/usr/include  -I/usr/include/SDL  -D_REENTRANT
-I/usr/include/freetype2 -DPNG_NO_MMX_CODE -I/usr/include/gtk-2.0
-I/usr/lib/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo
-I/usr/include/pango-1.0 -I/usr/include/glib-2.0
-I/usr/lib/glib-2.0/include -I/usr/include/freetype2
-I/usr/include/libpng12     -c -o vf_ilpack.o vf_ilpack.c
{standard input}: Assembler messages:
{standard input}:491: Error: suffix or operands invalid for `push'
{standard input}:570: Error: suffix or operands invalid for `pop'
{standard input}:631: Error: suffix or operands invalid for `push'
{standard input}:714: Error: suffix or operands invalid for `pop'
make[1]: *** [vf_ilpack.o] Error 1
make[1]: Leaving directory `/usr/src/mplayer/libmpcodecs'
make: *** [libmpcodecs/libmpcodecs.a] Error 2

If you would be so kind to point me to exact patch, I would apply it
on mplayer-1.0rc1 (that does compile) and then test. Again, thanks for
writing the patch

--
wixor


From frmas at free.fr  Sun Jun 10 19:12:54 2007
From: frmas at free.fr (Francois)
Date: Sun, 10 Jun 2007 19:12:54 +0200
Subject: [Linux-uvc-devel] Fatal:error inserting uvcvideo.
Message-ID: <200706101912.55000.frmas@free.fr>

Hi,

I used to use my webcam, which worked fine, two or three months ago. I 
stopped using it. After a while I decided to reuse it, and now, it doesn't 
work anymore (no new hardware has been installed). I have the following 
message :

# modprobe uvcvideo
FATAL: Error inserting uvcvideo 
(/lib/modules/2.6.17.8/usb/media/uvcvideo.ko): Unknown symbol in module, or 
unknown parameter (see dmesg)

# dmesg:
[drm] Initialized card for AGP DMA.
uvcvideo: Unknown symbol v4l_compat_ioctl32
uvcvideo: Unknown symbol v4l_compat_ioctl32

# lsmod :
snd_hwdep               9092  1 snd_usb_audio
v4l1_compat            12292  0
videodev                9216  0
v4l2_common            14336  0
sg                     32412  0
snd_seq_oss            28800  0

# lsusb
Bus 005 Device 002: ID 046d:08c2 Logitech, Inc.

I use uvcvideo revision 110

Thank you. Francois

-- 


From edgimar at lycos.com  Sun Jun 10 20:52:30 2007
From: edgimar at lycos.com (Mark Edgington)
Date: Sun, 10 Jun 2007 14:52:30 -0400 (EDT)
Subject: [Linux-uvc-devel] using 'read' method for device access
Message-ID: <20070610145230.HM.0000000000000Tj@edgimar.bos-mail-wwl17.lycos.com>

An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070610/8fd2b923/attachment.html>

From davidgalv at hotmail.com  Mon Jun 11 21:49:23 2007
From: davidgalv at hotmail.com (D G)
Date: Mon, 11 Jun 2007 21:49:23 +0200
Subject: [Linux-uvc-devel] Bison webcam: the patch doesn't work
Message-ID: <BAY123-W127D78018CC22DC6245231AD1A0@phx.gbl>


I tried your patch (add a few lines to uvc_driver.c for Bison, and recompile). dmesg does not complain at boot time:

uvcvideo: Found UVC 1.00 device USB2.0 Camera (5986:0100)
usbcore: registered new interface driver uvcvideo
USB Video Class driver (v0.1.0)

But it does not work. Examples with three applications:

* Camorama: A window with "Could not connect to video device (/dev/video0)" (although /dev/video0 does exist). No output on the terminal

* amsn: 

Type: IP-Restrict-NAT, Listening: false , the same if I completely disconnect the firewall.

If I do "change video settings", dmesg says  uvcvideo: Button event (0). (I think it is at that moment, but not sure).

Surprisingly, when I change a video setting in amsn, the led on the webcam lights and stays lit. But the message Type: IP-Restrict-NAT, Listening: false is still the same.

* With xawtv . The led lights for a second and then stops. The capture screen is black.

The output on the terminal:

# xawtv
This is xawtv-3.95.dfsg.1, running on Linux/i686 (2.6.21-1-686)
xinerama 0: 1280x800+0+0
/dev/video0 [v4l2]: no overlay support
v4l-conf had some trouble, trying to continue anyway
Warning: Cannot convert string "-*-ledfixed-medium-r-*--39-*-*-*-c-*-*-*" to type FontStruct
ioctl: VIDIOC_G_STD(std=0xbfbe3bb4 [PAL_G,PAL_I,PAL_D,PAL_K,PAL_M,PAL_N,PAL_60,NTSC_M,NTSC_M_JP,SECAM_D,SECAM_G,SECAM_H,SECAM_K,SECAM_K1,?ATSC_8_VSB,ATSC_16_VSB,(null),(null),(null),(null),(null),(null)]): Invalid argument
ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument
libGL warning: 3D driver claims to not support visual 0x66
ioctl: VIDIOC_REQBUFS(count=1;type=VIDEO_CAPTURE;memory=MMAP): Invalid argument
ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0 [];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.seconds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0;memory=unknown): Invalid argument
ioctl: VIDIOC_REQBUFS(count=2;type=VIDEO_CAPTURE;memory=MMAP): Device or resource busy
ioctl: VIDIOC_QBUF(index=0;type=unknown;bytesused=0;flags=0x0 [];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.seconds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0;memory=unknown): Invalid argument
v4l2: oops: select timeout
munmap: Invalid argument
ioctl: VIDIOC_REQBUFS(count=1;type=VIDEO_CAPTURE;memory=MMAP): Device or resource busy
X Error of failed request:  BadWindow (invalid Window parameter)
  Major opcode of failed request:  2 (X_ChangeWindowAttributes)
  Resource id in failed request:  0x1c0005c
  Serial number of failed request:  1537
  Current serial number in output stream:  1537

and dmesg stays the same.

Hope it helps,

David
_________________________________________________________________
Play free games, earn tickets, get cool prizes! Join Live Search Club.?
http://club.live.com/home.aspx?icid=CLUB_wlmailtextlink

From markmccarron_itt at hotmail.com  Tue Jun 12 02:36:41 2007
From: markmccarron_itt at hotmail.com (Mark McCarron)
Date: Tue, 12 Jun 2007 00:36:41 +0000
Subject: [Linux-uvc-devel] Bison webcam: the patch doesn't work
In-Reply-To: <BAY123-W127D78018CC22DC6245231AD1A0@phx.gbl>
Message-ID: <BAY101-F249E19E04F8CECEDF62912E1190@phx.gbl>

The cam does function with with luvcview.

I've been getting the a similiar 'BadWindow' error with Ekiga though.  When 
patched with the USB reset patch, the white balance, contrast and brightness 
appear to function better.  The default setting are a little too low.

So, the patch does work, its how it interfaces with other applications that 
seems to be the problem.

Mark.


>From: D G <davidgalv at hotmail.com>
>To: <linux-uvc-devel at lists.berlios.de>
>Subject: [Linux-uvc-devel] Bison webcam: the patch doesn't work
>Date: Mon, 11 Jun 2007 21:49:23 +0200
>MIME-Version: 1.0
>
>
>I tried your patch (add a few lines to uvc_driver.c for Bison, and 
>recompile). dmesg does not complain at boot time:
>
>uvcvideo: Found UVC 1.00 device USB2.0 Camera (5986:0100)
>usbcore: registered new interface driver uvcvideo
>USB Video Class driver (v0.1.0)
>
>But it does not work. Examples with three applications:
>
>* Camorama: A window with "Could not connect to video device (/dev/video0)" 
>(although /dev/video0 does exist). No output on the terminal
>
>* amsn:
>
>Type: IP-Restrict-NAT, Listening: false , the same if I completely 
>disconnect the firewall.
>
>If I do "change video settings", dmesg says  uvcvideo: Button event (0). (I 
>think it is at that moment, but not sure).
>
>Surprisingly, when I change a video setting in amsn, the led on the webcam 
>lights and stays lit. But the message Type: IP-Restrict-NAT, Listening: 
>false is still the same.
>
>* With xawtv . The led lights for a second and then stops. The capture 
>screen is black.
>
>The output on the terminal:
>
># xawtv
>This is xawtv-3.95.dfsg.1, running on Linux/i686 (2.6.21-1-686)
>xinerama 0: 1280x800+0+0
>/dev/video0 [v4l2]: no overlay support
>v4l-conf had some trouble, trying to continue anyway
>Warning: Cannot convert string "-*-ledfixed-medium-r-*--39-*-*-*-c-*-*-*" 
>to type FontStruct
>ioctl: VIDIOC_G_STD(std=0xbfbe3bb4 
>[PAL_G,PAL_I,PAL_D,PAL_K,PAL_M,PAL_N,PAL_60,NTSC_M,NTSC_M_JP,SECAM_D,SECAM_G,SECAM_H,SECAM_K,SECAM_K1,?ATSC_8_VSB,ATSC_16_VSB,(null),(null),(null),(null),(null),(null)]): 
>Invalid argument
>ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument
>libGL warning: 3D driver claims to not support visual 0x66
>ioctl: VIDIOC_REQBUFS(count=1;type=VIDEO_CAPTURE;memory=MMAP): Invalid 
>argument
>ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0 
>[];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.seconds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0;memory=unknown): 
>Invalid argument
>ioctl: VIDIOC_REQBUFS(count=2;type=VIDEO_CAPTURE;memory=MMAP): Device or 
>resource busy
>ioctl: VIDIOC_QBUF(index=0;type=unknown;bytesused=0;flags=0x0 
>[];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.seconds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0;memory=unknown): 
>Invalid argument
>v4l2: oops: select timeout
>munmap: Invalid argument
>ioctl: VIDIOC_REQBUFS(count=1;type=VIDEO_CAPTURE;memory=MMAP): Device or 
>resource busy
>X Error of failed request:  BadWindow (invalid Window parameter)
>   Major opcode of failed request:  2 (X_ChangeWindowAttributes)
>   Resource id in failed request:  0x1c0005c
>   Serial number of failed request:  1537
>   Current serial number in output stream:  1537
>
>and dmesg stays the same.
>
>Hope it helps,
>
>David
>_________________________________________________________________
>Play free games, earn tickets, get cool prizes! Join Live Search Club.?
>http://club.live.com/home.aspx?icid=CLUB_wlmailtextlink
>_______________________________________________
>Linux-uvc-devel mailing list
>Linux-uvc-devel at lists.berlios.de
>https://lists.berlios.de/mailman/listinfo/linux-uvc-devel

_________________________________________________________________
The next generation of Hotmail is here! http://www.newhotmail.co.uk/



From davidgalv at hotmail.com  Tue Jun 12 19:44:04 2007
From: davidgalv at hotmail.com (D G)
Date: Tue, 12 Jun 2007 19:44:04 +0200
Subject: [Linux-uvc-devel] Bison webcam and pathes
Message-ID: <BAY123-W228B3B4801CB757FBB964BAD190@phx.gbl>


Thank you for the reply.

Which patch are you mentioning? The one by Laurent Pinchart from 7 June? (That's what I tested) Your patch? (I don't know how to get it). To use both patches?

And, sorry for my poor knowledge: what is luvcview?

If I can abuse of your patience; can you tell me how you made the camera work, so I can test it? 

If possible, very detailed, something like: download the trunk, add those lines to this file, change those lines on the other file, etc, etc, and make and make install. Then, use this application to test the webcam (tell me which application).

By the way, may the USB reset patch spoil other things? (for example, if I have a USB disk plugged in)

Thank you,

David

--------- Original message -----------

The cam does function with with luvcview.

I've been getting the a similiar 'BadWindow' error with Ekiga though.  When 
patched with the USB reset patch, the white balance, contrast and brightness 
appear to function better.  The default setting are a little too low.

So, the patch does work, its how it interfaces with other applications that 
seems to be the problem.

Mark.
_________________________________________________________________
With Windows Live Hotmail, you can personalize your inbox with your favorite color.
www.windowslive-hotmail.com/learnmore/personalize.html?locale=en-us&ocid=TXT_TAGLM_HMWL_reten_addcolor_0607

From markmccarron_itt at hotmail.com  Wed Jun 13 02:32:20 2007
From: markmccarron_itt at hotmail.com (Mark McCarron)
Date: Wed, 13 Jun 2007 00:32:20 +0000
Subject: [Linux-uvc-devel] Bison webcam and pathes
In-Reply-To: <BAY123-W228B3B4801CB757FBB964BAD190@phx.gbl>
Message-ID: <BAY101-F2239DEFC36DD1DEA66F197E1180@phx.gbl>

>Which patch are you mentioning?

Laurent Pinchart's Bison patch from 7 June.


>what is luvcview?

luvcview is a tool to test your webcam.  You can download it here:
http://mxhaard.free.fr/spca50x/Investigation/uvc/luvcview-20070512.tar.gz


>If I can abuse of your patience; can you tell me how you made the camera 
>work, so I can test it?

Merge the Bison Patch with the svn trunk and install.


>If possible, very detailed, something like: download the trunk, add those 
>lines to this file, change
>those lines on the other file, etc, etc, and make and make install. Then, 
>use this application to
>test the webcam (tell me which application).

That's pretty much everything.  If you are patching manually, simply add the 
lines marked with a + sign and comment out lines with a - sign.


Mark.

>From: D G <davidgalv at hotmail.com>
>To: <linux-uvc-devel at lists.berlios.de>
>Subject: [Linux-uvc-devel] Bison webcam and pathes
>Date: Tue, 12 Jun 2007 19:44:04 +0200
>MIME-Version: 1.0
>
>
>Thank you for the reply.
>
>Which patch are you mentioning? The one by Laurent Pinchart from 7 June? 
>(That's what I tested) Your patch? (I don't know how to get it). To use 
>both patches?
>
>And, sorry for my poor knowledge: what is luvcview?
>
>If I can abuse of your patience; can you tell me how you made the camera 
>work, so I can test it?
>
>If possible, very detailed, something like: download the trunk, add those 
>lines to this file, change those lines on the other file, etc, etc, and 
>make and make install. Then, use this application to test the webcam (tell 
>me which application).
>
>By the way, may the USB reset patch spoil other things? (for example, if I 
>have a USB disk plugged in)
>
>Thank you,
>
>David
>
>--------- Original message -----------
>
>The cam does function with with luvcview.
>
>I've been getting the a similiar 'BadWindow' error with Ekiga though.  When
>patched with the USB reset patch, the white balance, contrast and 
>brightness
>appear to function better.  The default setting are a little too low.
>
>So, the patch does work, its how it interfaces with other applications that
>seems to be the problem.
>
>Mark.
>_________________________________________________________________
>With Windows Live Hotmail, you can personalize your inbox with your 
>favorite color.
>www.windowslive-hotmail.com/learnmore/personalize.html?locale=en-us&ocid=TXT_TAGLM_HMWL_reten_addcolor_0607
>_______________________________________________
>Linux-uvc-devel mailing list
>Linux-uvc-devel at lists.berlios.de
>https://lists.berlios.de/mailman/listinfo/linux-uvc-devel

_________________________________________________________________
The next generation of Hotmail is here! http://www.newhotmail.co.uk/



From laurent.pinchart at skynet.be  Wed Jun 13 18:59:02 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 13 Jun 2007 18:59:02 +0200
Subject: [Linux-uvc-devel] logitech pro 5000
In-Reply-To: <46689DEF.6020104@teksavvy.com>
References: <46602ABB.7000609@teksavvy.com>
	<200706072144.13937.laurent.pinchart@skynet.be>
	<46689DEF.6020104@teksavvy.com>
Message-ID: <200706131859.03061.laurent.pinchart@skynet.be>

Hi Houman,

On Friday 08 June 2007, Houman R. wrote:
> Laurent Pinchart wrote:
> >> I have recently acquired a refurbished logitech 5000 webcam and I tried
> >> using it with the uvc drivers. The problem is that ekiga and amsn can
> >> use it perfectly after i install the uvc drivers. However, when i try to
> >> load it using gstreamer-properties the video shown is garbled. The odd
> >> thing is that on top of the video there is a small strip of pixels which
> >> are perfectly fine (if i move my hand in front of the webcam I can see
> >> it in that small strip) but the majority of the picture is just noise.
> >
> > Have you tried both MJPEG and YUV ? I haven't used gstreamer myself but I
> > seem to recall some people made it work.
> >
> >> I need to be able to use gstreamer with this webcam because the
> >> application that I need to use doesn't support v4l2 but it supports the
> >> gstreamer framework (so I assume it can read v4l2 video through
> >> gstreamer). Any help will be much appreciated.
> >
> > Regards,
> >
> > Laurent Pinchart
>
> hi Laurent and thanks for the reply;
>
> gstreamer-properties doesnt give me an optionof choosing YUV or MJPEG.
> Also I doubt its a format issue because a part of the image is fine and
> the rest garbled.

Ekiga and aMSN might be using one of the formats while gstreamer defaults to 
the other, so the format can be an issue.

> Also if you know anyone who has managed to get it working could you please
> send me a link to a post ?

I don't think there's a post anywhere. I'll have to ask.

> Also a side question, this camera is suppose to support VGA format, but
> so far in amsn I have not been able to get more than 320x240 with
> luvcview resolution from it. Is this as much as we can get out of this
> camera?

The camera definitely supports 640x480 in both MJPEG and YUV (make sure the 
webcam is plugged in a USB 2.0 port for YUV).

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Jun 13 19:01:52 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 13 Jun 2007 19:01:52 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS180 hardly works
In-Reply-To: <c43b2e150706080933v4a840659nfb6fb58bf7ea6aaf@mail.gmail.com>
References: <c43b2e150706041207s7ebd91d6j8a8ca62f95f2b9c@mail.gmail.com>
	<200706072246.24821.laurent.pinchart@skynet.be>
	<c43b2e150706080933v4a840659nfb6fb58bf7ea6aaf@mail.gmail.com>
Message-ID: <200706131901.52515.laurent.pinchart@skynet.be>

On Friday 08 June 2007, wixor wrote:
> > A patch has been integrated into the MPlayer SVN repository to fix the
> > issue you experienced. You will still need to pass the -fps command line
> > argument.
>
> Thanks very much! However, current svn source does not compile on
> x86_64. The following is fatal:
>
> gcc -I../libavcodec -I../libavformat -Wdisabled-optimization
> -Wno-pointer-sign -Wdeclaration-after-statement -I. -I..
> -I../libavutil -Wall -Wno-switch -Wpointer-arith -Wredundant-decls -O4
> -march=k8 -mtune=k8 -pipe -ffast-math -fomit-frame-pointer
> -D_REENTRANT -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64
> -D_LARGEFILE64_SOURCE -I/usr/include  -I/usr/include/SDL  -D_REENTRANT
> -I/usr/include/freetype2 -DPNG_NO_MMX_CODE -I/usr/include/gtk-2.0
> -I/usr/lib/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo
> -I/usr/include/pango-1.0 -I/usr/include/glib-2.0
> -I/usr/lib/glib-2.0/include -I/usr/include/freetype2
> -I/usr/include/libpng12     -c -o vf_ilpack.o vf_ilpack.c
> {standard input}: Assembler messages:
> {standard input}:491: Error: suffix or operands invalid for `push'
> {standard input}:570: Error: suffix or operands invalid for `pop'
> {standard input}:631: Error: suffix or operands invalid for `push'
> {standard input}:714: Error: suffix or operands invalid for `pop'
> make[1]: *** [vf_ilpack.o] Error 1
> make[1]: Leaving directory `/usr/src/mplayer/libmpcodecs'
> make: *** [libmpcodecs/libmpcodecs.a] Error 2
>
> If you would be so kind to point me to exact patch, I would apply it
> on mplayer-1.0rc1 (that does compile) and then test. Again, thanks for
> writing the patch

Here's the patch.

http://svn.mplayerhq.hu/mplayer/trunk/stream/tvi_v4l2.c?r1=20662&r2=21603&view=patch

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Jun 13 19:21:41 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 13 Jun 2007 19:21:41 +0200
Subject: [Linux-uvc-devel] Fatal:error inserting uvcvideo.
In-Reply-To: <200706101912.55000.frmas@free.fr>
References: <200706101912.55000.frmas@free.fr>
Message-ID: <200706131921.41912.laurent.pinchart@skynet.be>

On Sunday 10 June 2007, Francois wrote:
> Hi,
>
> I used to use my webcam, which worked fine, two or three months ago. I
> stopped using it. After a while I decided to reuse it, and now, it doesn't
> work anymore (no new hardware has been installed). I have the following
> message :
>
> # modprobe uvcvideo
> FATAL: Error inserting uvcvideo
> (/lib/modules/2.6.17.8/usb/media/uvcvideo.ko): Unknown symbol in module, or
> unknown parameter (see dmesg)
>
> # dmesg:
> [drm] Initialized card for AGP DMA.
> uvcvideo: Unknown symbol v4l_compat_ioctl32
> uvcvideo: Unknown symbol v4l_compat_ioctl32
>
> # lsmod :
> snd_hwdep               9092  1 snd_usb_audio
> v4l1_compat            12292  0
> videodev                9216  0
> v4l2_common            14336  0
> sg                     32412  0
> snd_seq_oss            28800  0
>
> # lsusb
> Bus 005 Device 002: ID 046d:08c2 Logitech, Inc.
>
> I use uvcvideo revision 110

This seems to be a kernel version/compilation issue. Have you upgraded (or 
maybe downgraded) your kernel in the meantime ? If so you might have to 
recompile the UVC driver.

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Jun 13 19:30:58 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 13 Jun 2007 19:30:58 +0200
Subject: [Linux-uvc-devel] Bison webcam: the patch doesn't work
In-Reply-To: <BAY123-W127D78018CC22DC6245231AD1A0@phx.gbl>
References: <BAY123-W127D78018CC22DC6245231AD1A0@phx.gbl>
Message-ID: <200706131930.58357.laurent.pinchart@skynet.be>

On Monday 11 June 2007, D G wrote:
> I tried your patch (add a few lines to uvc_driver.c for Bison, and
> recompile). dmesg does not complain at boot time:
>
> uvcvideo: Found UVC 1.00 device USB2.0 Camera (5986:0100)
> usbcore: registered new interface driver uvcvideo
> USB Video Class driver (v0.1.0)
>
> But it does not work. Examples with three applications:
>
> * Camorama: A window with "Could not connect to video device (/dev/video0)"
> (although /dev/video0 does exist). No output on the terminal

Camorama supports the deprecated V4L1 interface only and won't work with the 
driver.

> * amsn:
>
> Type: IP-Restrict-NAT, Listening: false , the same if I completely
> disconnect the firewall.
>
> If I do "change video settings", dmesg says  uvcvideo: Button event (0). (I
> think it is at that moment, but not sure).
>
> Surprisingly, when I change a video setting in amsn, the led on the webcam
> lights and stays lit. But the message Type: IP-Restrict-NAT, Listening:
> false is still the same.

That seems to be a networking issue unrelated to the webcam driver.

> * With xawtv . The led lights for a second and then stops. The capture
> screen is black.
>
> The output on the terminal:
>
> # xawtv
> This is xawtv-3.95.dfsg.1, running on Linux/i686 (2.6.21-1-686)
> xinerama 0: 1280x800+0+0
> /dev/video0 [v4l2]: no overlay support
> v4l-conf had some trouble, trying to continue anyway
> Warning: Cannot convert string "-*-ledfixed-medium-r-*--39-*-*-*-c-*-*-*"
> to type FontStruct ioctl: VIDIOC_G_STD(std=0xbfbe3bb4
> [PAL_G,PAL_I,PAL_D,PAL_K,PAL_M,PAL_N,PAL_60,NTSC_M,NTSC_M_JP,SECAM_D,SECAM_
>G,SECAM_H,SECAM_K,SECAM_K1,?ATSC_8_VSB,ATSC_16_VSB,(null),(null),(null),(nul
>l),(null),(null)]): Invalid argument ioctl: VIDIOC_S_STD(std=0x0 []):
> Invalid argument
> libGL warning: 3D driver claims to not support visual 0x66
> ioctl: VIDIOC_REQBUFS(count=1;type=VIDEO_CAPTURE;memory=MMAP): Invalid
> argument ioctl:
> VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0
> [];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.s
>econds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0
>;memory=unknown): Invalid argument ioctl:
> VIDIOC_REQBUFS(count=2;type=VIDEO_CAPTURE;memory=MMAP): Device or resource
> busy ioctl: VIDIOC_QBUF(index=0;type=unknown;bytesused=0;flags=0x0
> [];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.s
>econds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0
>;memory=unknown): Invalid argument v4l2: oops: select timeout
> munmap: Invalid argument
> ioctl: VIDIOC_REQBUFS(count=1;type=VIDEO_CAPTURE;memory=MMAP): Device or
> resource busy X Error of failed request:  BadWindow (invalid Window
> parameter)
>   Major opcode of failed request:  2 (X_ChangeWindowAttributes)
>   Resource id in failed request:  0x1c0005c
>   Serial number of failed request:  1537
>   Current serial number in output stream:  1537

There are two issues with xawtv. xawtv requires a patch available in the Linux 
UVC driver's SVN repository at

svn://svn.berlios.de/linux-uvc/patches/xawtv

The second issue (BadWindow) is a X-server related problem, and again out of 
scope of the Linux UVC driver.

To summarise the situation, the patch you tried probably helped, but you 
picked the wrong applications. Please try luvcview or Ekiga.

Laurent Pinchart


From hrastgar at teksavvy.com  Wed Jun 13 19:46:35 2007
From: hrastgar at teksavvy.com (Houman R.)
Date: Wed, 13 Jun 2007 13:46:35 -0400
Subject: [Linux-uvc-devel] logitech pro 5000
In-Reply-To: <200706131859.03061.laurent.pinchart@skynet.be>
References: <46602ABB.7000609@teksavvy.com>
	<200706072144.13937.laurent.pinchart@skynet.be>
	<46689DEF.6020104@teksavvy.com>
	<200706131859.03061.laurent.pinchart@skynet.be>
Message-ID: <46702D7B.9020202@teksavvy.com>

Hi Laurent and thank you for the reply;

Laurent Pinchart wrote:
> Hi Houman,
>
> On Friday 08 June 2007, Houman R. wrote:
>   
>> Laurent Pinchart wrote:
>>     
>>>> I have recently acquired a refurbished logitech 5000 webcam and I tried
>>>> using it with the uvc drivers. The problem is that ekiga and amsn can
>>>> use it perfectly after i install the uvc drivers. However, when i try to
>>>> load it using gstreamer-properties the video shown is garbled. The odd
>>>> thing is that on top of the video there is a small strip of pixels which
>>>> are perfectly fine (if i move my hand in front of the webcam I can see
>>>> it in that small strip) but the majority of the picture is just noise.
>>>>         
>>> Have you tried both MJPEG and YUV ? I haven't used gstreamer myself but I
>>> seem to recall some people made it work.
>>>
>>>       
>>>> I need to be able to use gstreamer with this webcam because the
>>>> application that I need to use doesn't support v4l2 but it supports the
>>>> gstreamer framework (so I assume it can read v4l2 video through
>>>> gstreamer). Any help will be much appreciated.
>>>>         
>>> Regards,
>>>
>>> Laurent Pinchart
>>>       
>> hi Laurent and thanks for the reply;
>>
>> gstreamer-properties doesnt give me an optionof choosing YUV or MJPEG.
>> Also I doubt its a format issue because a part of the image is fine and
>> the rest garbled.
>>     
>
> Ekiga and aMSN might be using one of the formats while gstreamer defaults to 
> the other, so the format can be an issue.
>
>   
>> Also if you know anyone who has managed to get it working could you please
>> send me a link to a post ?
>>     
>
> I don't think there's a post anywhere. I'll have to ask.
>
>   
>> Also a side question, this camera is suppose to support VGA format, but
>> so far in amsn I have not been able to get more than 320x240 with
>> luvcview resolution from it. Is this as much as we can get out of this
>> camera?
>>     
>
> The camera definitely supports 640x480 in both MJPEG and YUV (make sure the 
> webcam is plugged in a USB 2.0 port for YUV).
>   
I was able to get that resolution with "luvcview -s 640x480" (although 
the frame rate is kind of low, around 17 fps on average). But how would 
I achieve this in amsn or ekiga? it seems the default resolution is 320x240.
> Laurent Pinchart
>
>   
thank you ;

Houman


From davidgalv at hotmail.com  Wed Jun 13 22:37:36 2007
From: davidgalv at hotmail.com (D G)
Date: Wed, 13 Jun 2007 22:37:36 +0200
Subject: [Linux-uvc-devel] Bison: only works with luvcview
Message-ID: <BAY123-W14EB4F75B7C39111E4C606AD180@phx.gbl>


Hello,

By the way, the https certificate for the web page of the mailing list is expired.

With Ekiga, it does not work: a window appears with "Error while opening video device USB2.0 Camera", "Your video driver doesn't support the requested video format."

luvcview works. But, at the moment, it is the only working webcam application in my system :-(

I also tried with kopete, but it doesn't work either. The preview shows nothing, and when I try to adjust something of the webcam, kopete crashes.

Thank you,

David
_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today it's FREE!
http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/

From bnc at astronomicalresearchaustralia.org  Thu Jun 14 16:46:46 2007
From: bnc at astronomicalresearchaustralia.org (Brian)
Date: Fri, 15 Jun 2007 00:46:46 +1000
Subject: [Linux-uvc-devel] Bison: only works with luvcview
In-Reply-To: <BAY123-W14EB4F75B7C39111E4C606AD180@phx.gbl>
References: <BAY123-W14EB4F75B7C39111E4C606AD180@phx.gbl>
Message-ID: <467154D6.9000906@astronomicalresearchaustralia.org>

David,
I am assuming this is a V4L2 camera.
If you want it to work with kopete you have to recompile with a patch.
I have just been through the process and kopete works fine with my Fusion.
You can get the patch from here
<http://www.alexandredenis.net/software/kopete-uvc/kopete-uvc-patch-2006011


What version of EKIGA are you using? I started with 2.03 and got similar
results to you. Then got it to work with 2.04 and I am currently using 2.09.
The other thing I have discovered is that my Fusion will not work of my
2.0 hub(pain really as that is why I bought the hub). It only works off
the 2.0 port in the back of the computer.

HTH
Brian

D G wrote:
> Hello,
> 
> By the way, the https certificate for the web page of the mailing list is expired.
> 
> With Ekiga, it does not work: a window appears with "Error while opening video device USB2.0 Camera", "Your video driver doesn't support the requested video format."
> 
> luvcview works. But, at the moment, it is the only working webcam application in my system :-(
> 
> I also tried with kopete, but it doesn't work either. The preview shows nothing, and when I try to adjust something of the webcam, kopete crashes.
> 
> Thank you,
> 
> David
> _________________________________________________________________
> Express yourself instantly with MSN Messenger! Download today it's FREE!
> http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel

-------------- next part --------------
A non-text attachment was scrubbed...
Name: bnc.vcf
Type: text/x-vcard
Size: 172 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070615/6af9a0eb/attachment.vcf>

From kv11111 at mail.ru  Fri Jun 15 11:40:35 2007
From: kv11111 at mail.ru (Vladimir)
Date: Fri, 15 Jun 2007 13:40:35 +0400
Subject: [Linux-uvc-devel] QuickCam for Notebooks Pro (046d:08cb) and mplayer
Message-ID: <f4tmt9$njq$1@sea.gmane.org>

Hello,

I'm just bought this webcam. After applying 'reset patch' and recompiling it
works with luvcview, after applying patch for xawtv it works too. The only
problem is too low FPS (15 instead of 30).

But I want to save captured video to the disk. So I've tried mplayer but it
does not work (the output is bellow). Are the any way to get mplayer
working or are the any other ways to save captured video to disk ?


$ mplayer tv:// -tv driver=v4l:width=640:height=480
Playing tv://.
TV file format detected.
Selected driver: v4l
 name: Video 4 Linux input
 author: Alex Beregszaszi
 comment: under development
=================================================================
 WARNING: YOU ARE USING V4L DEMUXER WITH V4L2 DRIVERS!!!
 As the V4L1 compatibility layer is broken, this may not work.
 If you encounter any problems, use driver=v4l2 instead.
 Bugreports on driver=v4l with v4l2 drivers will be ignored.
=================================================================
Selected device: UVC Camera (046d:08cb)
 Capabilites: capture
 Device type: 1
 Supported sizes: 48x32 => 960x720
 Inputs: 1
ioctl get channel failed: Invalid argument
ioctl get mbuf failed: Invalid argument


MPlayer interrupted by signal 11 in module: demux_open




$ mplayer tv:// -tv driver=v4l2:width=640:height=480
Playing tv://.
TV file format detected.
Selected driver: v4l2
 name: Video 4 Linux 2 input
 author: Martin Olschewski <olschewski at zpr.uni-koeln.de>
 comment: first try, more to come ;-)
v4l2: ioctl get standard failed: Invalid argument
Selected device: UVC Camera (046d:08cb)
 Capabilites:  video capture  streaming
 supported norms:
 inputs: 0 = Camera 1;
 Current input: 0
 Current format: YUYV
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl enum norm failed: Invalid argument
Error: Cannot set norm!
Selected input hasn't got a tuner!
v4l2: ioctl set mute failed: Invalid argument
v4l2: ioctl query control failed: Invalid argument
FPS not specified in the header or invalid, use the -fps option.
No stream found.

v4l2: ioctl set mute failed: Invalid argument
v4l2: 0 frames successfully processed, 0 frames dropped.

Exiting... (End of file)



-- 
         Best Regards,
           Vladimir



From kv11111 at mail.ru  Fri Jun 15 13:31:20 2007
From: kv11111 at mail.ru (Vladimir)
Date: Fri, 15 Jun 2007 15:31:20 +0400
Subject: [Linux-uvc-devel] QuickCam for Notebooks Pro (046d:08cb) and
	mplayer
References: <f4tmt9$njq$1@sea.gmane.org>
Message-ID: <f4ttcu$hun$1@sea.gmane.org>

Hello again,

I've found how to capture video using xawtv (or streamer), but so far it
does not works for me. For any file format xawtv says the following:

ioctl: VIDIOC_REQBUFS(count=2;type=VIDEO_CAPTURE;memory=MMAP): Invalid
argument
ioctl: VIDIOC_REQBUFS(count=1;type=VIDEO_CAPTURE;memory=MMAP): Invalid
argument
no way to get: 384x288 12 bit YUV 4:2:0 (planar)

Vladimir wrote:

> Hello,
> 
> I'm just bought this webcam. After applying 'reset patch' and recompiling
> it works with luvcview, after applying patch for xawtv it works too. The
> only problem is too low FPS (15 instead of 30).
> 
> But I want to save captured video to the disk. So I've tried mplayer but
> it does not work (the output is bellow). Are the any way to get mplayer
> working or are the any other ways to save captured video to disk ?
> 
> 
> $ mplayer tv:// -tv driver=v4l:width=640:height=480
> Playing tv://.
> TV file format detected.
> Selected driver: v4l
>  name: Video 4 Linux input
>  author: Alex Beregszaszi
>  comment: under development
> =================================================================
>  WARNING: YOU ARE USING V4L DEMUXER WITH V4L2 DRIVERS!!!
>  As the V4L1 compatibility layer is broken, this may not work.
>  If you encounter any problems, use driver=v4l2 instead.
>  Bugreports on driver=v4l with v4l2 drivers will be ignored.
> =================================================================
> Selected device: UVC Camera (046d:08cb)
>  Capabilites: capture
>  Device type: 1
>  Supported sizes: 48x32 => 960x720
>  Inputs: 1
> ioctl get channel failed: Invalid argument
> ioctl get mbuf failed: Invalid argument
> 
> 
> MPlayer interrupted by signal 11 in module: demux_open
> 
> 
> 
> 
> $ mplayer tv:// -tv driver=v4l2:width=640:height=480
> Playing tv://.
> TV file format detected.
> Selected driver: v4l2
>  name: Video 4 Linux 2 input
>  author: Martin Olschewski <olschewski at zpr.uni-koeln.de>
>  comment: first try, more to come ;-)
> v4l2: ioctl get standard failed: Invalid argument
> Selected device: UVC Camera (046d:08cb)
>  Capabilites:  video capture  streaming
>  supported norms:
>  inputs: 0 = Camera 1;
>  Current input: 0
>  Current format: YUYV
> v4l2: ioctl set format failed: Invalid argument
> v4l2: ioctl set format failed: Invalid argument
> v4l2: ioctl set format failed: Invalid argument
> v4l2: ioctl enum norm failed: Invalid argument
> Error: Cannot set norm!
> Selected input hasn't got a tuner!
> v4l2: ioctl set mute failed: Invalid argument
> v4l2: ioctl query control failed: Invalid argument
> FPS not specified in the header or invalid, use the -fps option.
> No stream found.
> 
> v4l2: ioctl set mute failed: Invalid argument
> v4l2: 0 frames successfully processed, 0 frames dropped.
> 
> Exiting... (End of file)
> 
> 
> 

-- 
         Best Regards,
              Vladimir



From harri_klapuri at yahoo.com  Fri Jun 15 14:53:33 2007
From: harri_klapuri at yahoo.com (Harri Klapuri)
Date: Fri, 15 Jun 2007 05:53:33 -0700 (PDT)
Subject: [Linux-uvc-devel] Support for frame-based payloads
Message-ID: <648568.3317.qm@web63915.mail.re1.yahoo.com>

Hi,

I needed support for the UVC frame-based payload, so I added that. The
changes I did are actually quite small.

I have tested this patch with my bulk frame-based device.

  Regards,
  Harri Klapuri


       
---------------------------------
Luggage? GPS? Comic books? 
Check out fitting  gifts for grads at Yahoo! Search.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070615/6de778e8/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: framebased.diff
Type: application/octet-stream
Size: 5241 bytes
Desc: 3252186158-framebased.diff
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070615/6de778e8/attachment.obj>

From laurent.pinchart at skynet.be  Sat Jun 16 12:09:54 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 16 Jun 2007 12:09:54 +0200
Subject: [Linux-uvc-devel] logitech pro 5000
In-Reply-To: <46702D7B.9020202@teksavvy.com>
References: <46602ABB.7000609@teksavvy.com>
	<200706131859.03061.laurent.pinchart@skynet.be>
	<46702D7B.9020202@teksavvy.com>
Message-ID: <200706161209.54636.laurent.pinchart@skynet.be>

On Wednesday 13 June 2007, Houman R. wrote:
> Hi Laurent and thank you for the reply;
>
> Laurent Pinchart wrote:
> > Hi Houman,
> >
> > On Friday 08 June 2007, Houman R. wrote:
> >> Laurent Pinchart wrote:
> >>>> I have recently acquired a refurbished logitech 5000 webcam and I
> >>>> tried using it with the uvc drivers. The problem is that ekiga and
> >>>> amsn can use it perfectly after i install the uvc drivers. However,
> >>>> when i try to load it using gstreamer-properties the video shown is
> >>>> garbled. The odd thing is that on top of the video there is a small
> >>>> strip of pixels which are perfectly fine (if i move my hand in front
> >>>> of the webcam I can see it in that small strip) but the majority of
> >>>> the picture is just noise.
> >>>
> >>> Have you tried both MJPEG and YUV ? I haven't used gstreamer myself but
> >>> I seem to recall some people made it work.
> >>>
> >>>> I need to be able to use gstreamer with this webcam because the
> >>>> application that I need to use doesn't support v4l2 but it supports
> >>>> the gstreamer framework (so I assume it can read v4l2 video through
> >>>> gstreamer). Any help will be much appreciated.
> >>>
> >>> Regards,
> >>>
> >>> Laurent Pinchart
> >>
> >> hi Laurent and thanks for the reply;
> >>
> >> gstreamer-properties doesnt give me an optionof choosing YUV or MJPEG.
> >> Also I doubt its a format issue because a part of the image is fine and
> >> the rest garbled.
> >
> > Ekiga and aMSN might be using one of the formats while gstreamer defaults
> > to the other, so the format can be an issue.
> >
> >> Also if you know anyone who has managed to get it working could you
> >> please send me a link to a post ?
> >
> > I don't think there's a post anywhere. I'll have to ask.
> >
> >> Also a side question, this camera is suppose to support VGA format, but
> >> so far in amsn I have not been able to get more than 320x240 with
> >> luvcview resolution from it. Is this as much as we can get out of this
> >> camera?
> >
> > The camera definitely supports 640x480 in both MJPEG and YUV (make sure
> > the webcam is plugged in a USB 2.0 port for YUV).
>
> I was able to get that resolution with "luvcview -s 640x480" (although
> the frame rate is kind of low, around 17 fps on average). But how would
> I achieve this in amsn or ekiga? it seems the default resolution is
> 320x240.

There's not much I can do if applications do not request 640x480 when the 
driver/webcam can provide it. You should ask for help on application-specific 
mailing lists or forums.

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Jun 16 12:58:22 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 16 Jun 2007 12:58:22 +0200
Subject: [Linux-uvc-devel] QuickCam for Notebooks Pro (046d:08cb) and
	mplayer
In-Reply-To: <f4tmt9$njq$1@sea.gmane.org>
References: <f4tmt9$njq$1@sea.gmane.org>
Message-ID: <200706161258.22873.laurent.pinchart@skynet.be>

On Friday 15 June 2007, Vladimir wrote:
> Hello,
>
> I'm just bought this webcam. After applying 'reset patch' and recompiling
> it works with luvcview, after applying patch for xawtv it works too. The
> only problem is too low FPS (15 instead of 30).
>
> But I want to save captured video to the disk. So I've tried mplayer but it
> does not work (the output is bellow). Are the any way to get mplayer
> working or are the any other ways to save captured video to disk ?

Applying the following patch to MPlayer (from the SVN repository) should help.

http://svn.mplayerhq.hu/mplayer/trunk/stream/tvi_v4l2.c?r1=20662&r2=21603&view=patch

Laurent Pinchart


From kv11111 at mail.ru  Sat Jun 16 13:23:40 2007
From: kv11111 at mail.ru (Vladimir)
Date: Sat, 16 Jun 2007 15:23:40 +0400
Subject: [Linux-uvc-devel] QuickCam for Notebooks Pro (046d:08cb) and
	mplayer
References: <f4tmt9$njq$1@sea.gmane.org>
	<200706161258.22873.laurent.pinchart@skynet.be>
Message-ID: <f50hai$bf$1@sea.gmane.org>

Thanks a lot for you help ! I've found in the archives 
'noformatcheck.patch' and 'tuner.patch' which have helped me (however as far
as I understand the patch you referred to is quite cleaner solution).
Without 'tuner.path' mplayer works well but mencoder works only
with -nosound option.

Now there is one more problem: I can't get video larger than 640x480 or with
more then 15fps with mplayer (with luvcview I can get 960x720 at 15fps or
640x480 at 25fps). I've tried it with:
$ mplayer tv:// -tv driver=v4l2:fps=15:width=960:height=720
$ mplayer tv:// -tv driver=v4l2:fps=25:width=640:height=480
but mplayer still shows 640x480 picture with 15 fps

Laurent Pinchart wrote:

> On Friday 15 June 2007, Vladimir wrote:
>> Hello,
>>
>> I'm just bought this webcam. After applying 'reset patch' and recompiling
>> it works with luvcview, after applying patch for xawtv it works too. The
>> only problem is too low FPS (15 instead of 30).
>>
>> But I want to save captured video to the disk. So I've tried mplayer but
>> it does not work (the output is bellow). Are the any way to get mplayer
>> working or are the any other ways to save captured video to disk ?
> 
> Applying the following patch to MPlayer (from the SVN repository) should
> help.
> 
>
http://svn.mplayerhq.hu/mplayer/trunk/stream/tvi_v4l2.c?r1=20662&r2=21603&view=patch
> 
> Laurent Pinchart

-- 
         Best Regards,
              Vladimir



From hrastgar at teksavvy.com  Sat Jun 16 16:35:39 2007
From: hrastgar at teksavvy.com (Houman R.)
Date: Sat, 16 Jun 2007 10:35:39 -0400
Subject: [Linux-uvc-devel] logitech pro 5000
In-Reply-To: <200706161209.54636.laurent.pinchart@skynet.be>
References: <46602ABB.7000609@teksavvy.com>
	<200706131859.03061.laurent.pinchart@skynet.be>
	<46702D7B.9020202@teksavvy.com>
	<200706161209.54636.laurent.pinchart@skynet.be>
Message-ID: <4673F53B.1060400@teksavvy.com>

Laurent Pinchart wrote:
> On Wednesday 13 June 2007, Houman R. wrote:
>   
>> Hi Laurent and thank you for the reply;
>>
>> Laurent Pinchart wrote:
>>     
>>> Hi Houman,
>>>
>>> On Friday 08 June 2007, Houman R. wrote:
>>>       
>>>> Laurent Pinchart wrote:
>>>>         
>>>>>> I have recently acquired a refurbished logitech 5000 webcam and I
>>>>>> tried using it with the uvc drivers. The problem is that ekiga and
>>>>>> amsn can use it perfectly after i install the uvc drivers. However,
>>>>>> when i try to load it using gstreamer-properties the video shown is
>>>>>> garbled. The odd thing is that on top of the video there is a small
>>>>>> strip of pixels which are perfectly fine (if i move my hand in front
>>>>>> of the webcam I can see it in that small strip) but the majority of
>>>>>> the picture is just noise.
>>>>>>             
>>>>> Have you tried both MJPEG and YUV ? I haven't used gstreamer myself but
>>>>> I seem to recall some people made it work.
>>>>>
>>>>>           
>>>>>> I need to be able to use gstreamer with this webcam because the
>>>>>> application that I need to use doesn't support v4l2 but it supports
>>>>>> the gstreamer framework (so I assume it can read v4l2 video through
>>>>>> gstreamer). Any help will be much appreciated.
>>>>>>             
>>>>> Regards,
>>>>>
>>>>> Laurent Pinchart
>>>>>           
>>>> hi Laurent and thanks for the reply;
>>>>
>>>> gstreamer-properties doesnt give me an optionof choosing YUV or MJPEG.
>>>> Also I doubt its a format issue because a part of the image is fine and
>>>> the rest garbled.
>>>>         
>>> Ekiga and aMSN might be using one of the formats while gstreamer defaults
>>> to the other, so the format can be an issue.
>>>
>>>       
>>>> Also if you know anyone who has managed to get it working could you
>>>> please send me a link to a post ?
>>>>         
>>> I don't think there's a post anywhere. I'll have to ask.
>>>
>>>       
>>>> Also a side question, this camera is suppose to support VGA format, but
>>>> so far in amsn I have not been able to get more than 320x240 with
>>>> luvcview resolution from it. Is this as much as we can get out of this
>>>> camera?
>>>>         
>>> The camera definitely supports 640x480 in both MJPEG and YUV (make sure
>>> the webcam is plugged in a USB 2.0 port for YUV).
>>>       
>> I was able to get that resolution with "luvcview -s 640x480" (although
>> the frame rate is kind of low, around 17 fps on average). But how would
>> I achieve this in amsn or ekiga? it seems the default resolution is
>> 320x240.
>>     
>
> There's not much I can do if applications do not request 640x480 when the 
> driver/webcam can provide it. You should ask for help on application-specific 
> mailing lists or forums.
>
> Laurent Pinchart
>
>   
Thank you Laurent for the help, I will ask the amsn guys;

regards

Houman


From linux at giopas.eu  Sun Jun 17 00:26:11 2007
From: linux at giopas.eu (giopas)
Date: Sun, 17 Jun 2007 00:26:11 +0200
Subject: [Linux-uvc-devel] [Webcam & DVB] UVC & EM28XX modules: can I make
	them both work?
Message-ID: <46746383.1070102@giopas.eu>

Hi crew!

I've always used my logitech camera with uvc driver and everything was 
really perfect (thanks!).

Last week I received a  "Terratec Cinergy T USB XS" usb key and of 
course I've tryed to make it work. :D

This dvb hardware works with em28xx module, so I had to compile it and 
install.

The problem is that after such installation, I can not longer use my 
camera, because I receive the following error (if I try to reload uvc 
module):

> # modprobe uvcvideo
> FATAL: Error inserting uvcvideo 
> (/lib/modules/2.6.22-rc3-k7/usb/media/uvcvideo.ko): Unknown symbol in 
> module, or unknown parameter (see dmesg)
Infact, if I run dmesg, I can see:

> em28xx v4l2 driver version 0.0.1 loaded
> usbcore: registered new interface driver em28xx
> uvcvideo: disagrees about version of symbol video_devdata
> uvcvideo: Unknown symbol video_devdata
> uvcvideo: disagrees about version of symbol video_unregister_device
> uvcvideo: Unknown symbol video_unregister_device
> uvcvideo: disagrees about version of symbol video_device_alloc
> uvcvideo: Unknown symbol video_device_alloc
> uvcvideo: disagrees about version of symbol video_register_device
> uvcvideo: Unknown symbol video_register_device
> uvcvideo: disagrees about version of symbol video_device_release
> uvcvideo: Unknown symbol video_device_release

I suspect that both video devices want to use the same /dev/video 
address, but I'm not sure at all.

What do you suggest to do?

Thank you,

giopas

ps: I run Debian SID/Experimental, both drivers are compiled from last 
avaible svn/hg revisions, I found such errors both with 2.6.22 and 
2.6.21 kernels.

-- 
"The paradigm of competition is a race: by
rewarding the winner, we encourage everyone
to run faster. When capitalism really works
this way, it does a good job; but its defenders
are wrong in assuming it always works this way.
If the runners forget why the reward is offered
and become intent on winning, no matter how, they
may find other strategies--such as, attacking
other runners. If the runners get into a fist
fight, they will all finish late."
(GNU manifesto/R. Stallman)



From bnc at astronomicalresearchaustralia.org  Sun Jun 17 05:11:14 2007
From: bnc at astronomicalresearchaustralia.org (Brian)
Date: Sun, 17 Jun 2007 13:11:14 +1000
Subject: [Linux-uvc-devel] logitech pro 5000
In-Reply-To: <4673F53B.1060400@teksavvy.com>
References: <46602ABB.7000609@teksavvy.com>	<200706131859.03061.laurent.pinchart@skynet.be>	<46702D7B.9020202@teksavvy.com>	<200706161209.54636.laurent.pinchart@skynet.be>
	<4673F53B.1060400@teksavvy.com>
Message-ID: <4674A652.8010200@astronomicalresearchaustralia.org>

Hi Houman,

Another possible option is to use kopete.
To get it to work you need to compile it with a patch.
http://www.alexandredenis.net/software/kopete-uvc/kopete-uvc-patch-20060206

FYI
Brian

Houman R. wrote:
> Laurent Pinchart wrote:
>> On Wednesday 13 June 2007, Houman R. wrote:
>>   
>>> Hi Laurent and thank you for the reply;
>>>
>>> Laurent Pinchart wrote:
>>>     
>>>> Hi Houman,
>>>>
>>>> On Friday 08 June 2007, Houman R. wrote:
>>>>       
>>>>> Laurent Pinchart wrote:
>>>>>         
>>>>>>> I have recently acquired a refurbished logitech 5000 webcam and I
>>>>>>> tried using it with the uvc drivers. The problem is that ekiga and
>>>>>>> amsn can use it perfectly after i install the uvc drivers. However,
>>>>>>> when i try to load it using gstreamer-properties the video shown is
>>>>>>> garbled. The odd thing is that on top of the video there is a small
>>>>>>> strip of pixels which are perfectly fine (if i move my hand in front
>>>>>>> of the webcam I can see it in that small strip) but the majority of
>>>>>>> the picture is just noise.
>>>>>>>             
>>>>>> Have you tried both MJPEG and YUV ? I haven't used gstreamer myself but
>>>>>> I seem to recall some people made it work.
>>>>>>
>>>>>>           
>>>>>>> I need to be able to use gstreamer with this webcam because the
>>>>>>> application that I need to use doesn't support v4l2 but it supports
>>>>>>> the gstreamer framework (so I assume it can read v4l2 video through
>>>>>>> gstreamer). Any help will be much appreciated.
>>>>>>>             
>>>>>> Regards,
>>>>>>
>>>>>> Laurent Pinchart
>>>>>>           
>>>>> hi Laurent and thanks for the reply;
>>>>>
>>>>> gstreamer-properties doesnt give me an optionof choosing YUV or MJPEG.
>>>>> Also I doubt its a format issue because a part of the image is fine and
>>>>> the rest garbled.
>>>>>         
>>>> Ekiga and aMSN might be using one of the formats while gstreamer defaults
>>>> to the other, so the format can be an issue.
>>>>
>>>>       
>>>>> Also if you know anyone who has managed to get it working could you
>>>>> please send me a link to a post ?
>>>>>         
>>>> I don't think there's a post anywhere. I'll have to ask.
>>>>
>>>>       
>>>>> Also a side question, this camera is suppose to support VGA format, but
>>>>> so far in amsn I have not been able to get more than 320x240 with
>>>>> luvcview resolution from it. Is this as much as we can get out of this
>>>>> camera?
>>>>>         
>>>> The camera definitely supports 640x480 in both MJPEG and YUV (make sure
>>>> the webcam is plugged in a USB 2.0 port for YUV).
>>>>       
>>> I was able to get that resolution with "luvcview -s 640x480" (although
>>> the frame rate is kind of low, around 17 fps on average). But how would
>>> I achieve this in amsn or ekiga? it seems the default resolution is
>>> 320x240.
>>>     
>> There's not much I can do if applications do not request 640x480 when the 
>> driver/webcam can provide it. You should ask for help on application-specific 
>> mailing lists or forums.
>>
>> Laurent Pinchart
>>
>>   
> Thank you Laurent for the help, I will ask the amsn guys;
> 
> regards
> 
> Houman
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel

-------------- next part --------------
A non-text attachment was scrubbed...
Name: bnc.vcf
Type: text/x-vcard
Size: 172 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070617/03f75faf/attachment.vcf>

From nick at customdesigns.ca  Sun Jun 17 23:51:02 2007
From: nick at customdesigns.ca (Nick Wiltshire)
Date: Sun, 17 Jun 2007 15:51:02 -0600
Subject: [Linux-uvc-devel] logitech pro 5000
In-Reply-To: <4674A652.8010200@astronomicalresearchaustralia.org>
References: <46602ABB.7000609@teksavvy.com> <4673F53B.1060400@teksavvy.com>
	<4674A652.8010200@astronomicalresearchaustralia.org>
Message-ID: <200706171551.02760.nick@customdesigns.ca>

On Saturday 16 June 2007 21:11, Brian wrote:
> Hi Houman,
>
> Another possible option is to use kopete.
> To get it to work you need to compile it with a patch.
> http://www.alexandredenis.net/software/kopete-uvc/kopete-uvc-patch-20060206

Is this patch against Kopete SVN? Is there a howto on using it for n00bs? :)

>
> FYI
> Brian
>
> Houman R. wrote:
> > Laurent Pinchart wrote:
> >> On Wednesday 13 June 2007, Houman R. wrote:
> >>> Hi Laurent and thank you for the reply;
> >>>
> >>> Laurent Pinchart wrote:
> >>>> Hi Houman,
> >>>>
> >>>> On Friday 08 June 2007, Houman R. wrote:
> >>>>> Laurent Pinchart wrote:
> >>>>>>> I have recently acquired a refurbished logitech 5000 webcam and I
> >>>>>>> tried using it with the uvc drivers. The problem is that ekiga and
> >>>>>>> amsn can use it perfectly after i install the uvc drivers. However,
> >>>>>>> when i try to load it using gstreamer-properties the video shown is
> >>>>>>> garbled. The odd thing is that on top of the video there is a small
> >>>>>>> strip of pixels which are perfectly fine (if i move my hand in
> >>>>>>> front of the webcam I can see it in that small strip) but the
> >>>>>>> majority of the picture is just noise.
> >>>>>>
> >>>>>> Have you tried both MJPEG and YUV ? I haven't used gstreamer myself
> >>>>>> but I seem to recall some people made it work.
> >>>>>>
> >>>>>>> I need to be able to use gstreamer with this webcam because the
> >>>>>>> application that I need to use doesn't support v4l2 but it supports
> >>>>>>> the gstreamer framework (so I assume it can read v4l2 video through
> >>>>>>> gstreamer). Any help will be much appreciated.
> >>>>>>
> >>>>>> Regards,
> >>>>>>
> >>>>>> Laurent Pinchart
> >>>>>
> >>>>> hi Laurent and thanks for the reply;
> >>>>>
> >>>>> gstreamer-properties doesnt give me an optionof choosing YUV or
> >>>>> MJPEG. Also I doubt its a format issue because a part of the image is
> >>>>> fine and the rest garbled.
> >>>>
> >>>> Ekiga and aMSN might be using one of the formats while gstreamer
> >>>> defaults to the other, so the format can be an issue.
> >>>>
> >>>>> Also if you know anyone who has managed to get it working could you
> >>>>> please send me a link to a post ?
> >>>>
> >>>> I don't think there's a post anywhere. I'll have to ask.
> >>>>
> >>>>> Also a side question, this camera is suppose to support VGA format,
> >>>>> but so far in amsn I have not been able to get more than 320x240 with
> >>>>> luvcview resolution from it. Is this as much as we can get out of
> >>>>> this camera?
> >>>>
> >>>> The camera definitely supports 640x480 in both MJPEG and YUV (make
> >>>> sure the webcam is plugged in a USB 2.0 port for YUV).
> >>>
> >>> I was able to get that resolution with "luvcview -s 640x480" (although
> >>> the frame rate is kind of low, around 17 fps on average). But how would
> >>> I achieve this in amsn or ekiga? it seems the default resolution is
> >>> 320x240.
> >>
> >> There's not much I can do if applications do not request 640x480 when
> >> the driver/webcam can provide it. You should ask for help on
> >> application-specific mailing lists or forums.
> >>
> >> Laurent Pinchart
> >
> > Thank you Laurent for the help, I will ask the amsn guys;
> >
> > regards
> >
> > Houman
> > _______________________________________________
> > Linux-uvc-devel mailing list
> > Linux-uvc-devel at lists.berlios.de
> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel


From Glenn.West at aarcorp.com  Mon Jun 18 02:52:29 2007
From: Glenn.West at aarcorp.com (Glenn West)
Date: Mon, 18 Jun 2007 08:52:29 +0800
Subject: [Linux-uvc-devel] Saving video to disk
In-Reply-To: <mailman.103.1181988109.16874.linux-uvc-devel@lists.berlios.de>
References: <mailman.103.1181988109.16874.linux-uvc-devel@lists.berlios.de>
Message-ID: <0D7DB474101986479884361BBE91929F0216C31C@sinsiw2k1.aarcorp.com>

One of the questions, was saving "video" to disk from uvc,
Try using the "motion" application. It has all the configureation
You need to take and store your video.


DISCLAIMER:
IMPORTANT - This E-Mail is intended for the use of the individual or entity to which it is addressed, and may contain information that is privileged, confidential and exempt from disclosure under applicable law. If the reader of this E-mail is not the intended recipient, or the employee or agent responsible to deliver it to the  intended recipient, you are hereby notified that reading, disseminating, distributing or copying this communication is strictly  PROHIBITED. If you have received this communication in error, please immediately notify AAR CORP by e-mail and return  the original message to us by e-mail. THANK YOU.


From whites11 at inwind.it  Mon Jun 18 20:28:06 2007
From: whites11 at inwind.it (whites11 at inwind.it)
Date: Mon, 18 Jun 2007 20:28:06 +0200
Subject: [Linux-uvc-devel] acer cristal eye recognised but not working
Message-ID: <JJUGMU$CC5A741FACC218E0872DC6A8258888D9@libero.it>

hi all!
i tried to install the integrated webcam of my acer aspire 5920 using uvcvideo on slackware 11.
driver builds and runs good, webcam is found :

$ dmesg | grep uvc
uvcvideo: Found UVC 1.00 device Acer CrystalEye webcam (064e:a101)
usbcore: registered new interface driver uvcvideo

lucview fails to run:

luvcview version 0.2.1
Video driver: x11
A window manager is available
video /dev/video0
Unable to set format: 22.
 Init v4L2 failed !! exit fatal

webcam chip is a suyin :
$ lsusb
Bus 1 Device 1: ID 0000:0000
Bus 1 Device 2: ID 064e:a101 Suyin Corp.
Bus 3 Device 1: ID 0000:0000
Bus 7 Device 1: ID 0000:0000
Bus 2 Device 1: ID 0000:0000
Bus 4 Device 1: ID 0000:0000
Bus 6 Device 1: ID 0000:0000
Bus 5 Device 1: ID 0000:0000

any suggestion?

thanks


From laurent.pinchart at skynet.be  Mon Jun 18 22:18:46 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 18 Jun 2007 22:18:46 +0200
Subject: [Linux-uvc-devel] Support for frame-based payloads
In-Reply-To: <648568.3317.qm@web63915.mail.re1.yahoo.com>
References: <648568.3317.qm@web63915.mail.re1.yahoo.com>
Message-ID: <200706182218.46461.laurent.pinchart@skynet.be>

Hi Harri,

> I needed support for the UVC frame-based payload, so I added that. The
> changes I did are actually quite small.
>
> I have tested this patch with my bulk frame-based device.

Thanks for the patch. I'm reviewing it and will send it back to you for 
testing after making the necessary (small) modifications. You can expect a 
mail tomorrow or the day after.

Regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Jun 18 22:44:57 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 18 Jun 2007 22:44:57 +0200
Subject: [Linux-uvc-devel] [Webcam & DVB] UVC & EM28XX modules: can I
	make them both work?
In-Reply-To: <46746383.1070102@giopas.eu>
References: <46746383.1070102@giopas.eu>
Message-ID: <200706182244.58875.laurent.pinchart@skynet.be>

Hi,

On Sunday 17 June 2007, giopas wrote:
> Hi crew!
>
> I've always used my logitech camera with uvc driver and everything was
> really perfect (thanks!).
>
> Last week I received a  "Terratec Cinergy T USB XS" usb key and of
> course I've tryed to make it work. :D
>
> This dvb hardware works with em28xx module, so I had to compile it and
> install.
>
> The problem is that after such installation, I can not longer use my
> camera, because I receive the following error (if I try to reload uvc
>
> module):
> > # modprobe uvcvideo
> > FATAL: Error inserting uvcvideo
> > (/lib/modules/2.6.22-rc3-k7/usb/media/uvcvideo.ko): Unknown symbol in
> > module, or unknown parameter (see dmesg)
>
> Infact, if I run dmesg, I can see:
> > em28xx v4l2 driver version 0.0.1 loaded
> > usbcore: registered new interface driver em28xx
> > uvcvideo: disagrees about version of symbol video_devdata
> > uvcvideo: Unknown symbol video_devdata
> > uvcvideo: disagrees about version of symbol video_unregister_device
> > uvcvideo: Unknown symbol video_unregister_device
> > uvcvideo: disagrees about version of symbol video_device_alloc
> > uvcvideo: Unknown symbol video_device_alloc
> > uvcvideo: disagrees about version of symbol video_register_device
> > uvcvideo: Unknown symbol video_register_device
> > uvcvideo: disagrees about version of symbol video_device_release
> > uvcvideo: Unknown symbol video_device_release
>
> I suspect that both video devices want to use the same /dev/video
> address, but I'm not sure at all.

No, there's another compilation-related issue. Does the em28xx module come 
with its own videodev driver ? What happens if you load uvcvideo before 
loading em28xx ?

> What do you suggest to do?

Contact the em28xx maintainer ? ;-)

> Thank you,
>
> giopas
>
> ps: I run Debian SID/Experimental, both drivers are compiled from last
> avaible svn/hg revisions, I found such errors both with 2.6.22 and
> 2.6.21 kernels.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Jun 18 22:46:29 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 18 Jun 2007 22:46:29 +0200
Subject: [Linux-uvc-devel] acer cristal eye recognised but not working
In-Reply-To: <JJUGMU$CC5A741FACC218E0872DC6A8258888D9@libero.it>
References: <JJUGMU$CC5A741FACC218E0872DC6A8258888D9@libero.it>
Message-ID: <200706182246.29669.laurent.pinchart@skynet.be>

Hi,

On Monday 18 June 2007, whites11 at inwind.it wrote:
> hi all!
> i tried to install the integrated webcam of my acer aspire 5920 using
> uvcvideo on slackware 11. driver builds and runs good, webcam is found :
>
> $ dmesg | grep uvc
> uvcvideo: Found UVC 1.00 device Acer CrystalEye webcam (064e:a101)
> usbcore: registered new interface driver uvcvideo
>
> lucview fails to run:
>
> luvcview version 0.2.1
> Video driver: x11
> A window manager is available
> video /dev/video0
> Unable to set format: 22.
>  Init v4L2 failed !! exit fatal
>
> webcam chip is a suyin :
> $ lsusb
> Bus 1 Device 1: ID 0000:0000
> Bus 1 Device 2: ID 064e:a101 Suyin Corp.
> Bus 3 Device 1: ID 0000:0000
> Bus 7 Device 1: ID 0000:0000
> Bus 2 Device 1: ID 0000:0000
> Bus 4 Device 1: ID 0000:0000
> Bus 6 Device 1: ID 0000:0000
> Bus 5 Device 1: ID 0000:0000
>
> any suggestion?

Please post the output of luvcview -L and lsusb -v (using usbutils 0.72 or 
newer).

Thanks.

Laurent Pinchart


From linux at giopas.eu  Tue Jun 19 22:38:12 2007
From: linux at giopas.eu (giopas)
Date: Tue, 19 Jun 2007 22:38:12 +0200
Subject: [Linux-uvc-devel] [Webcam & DVB] UVC & EM28XX modules: can I
 make them both work?
In-Reply-To: <200706182244.58875.laurent.pinchart@skynet.be>
References: <46746383.1070102@giopas.eu>
	<200706182244.58875.laurent.pinchart@skynet.be>
Message-ID: <46783EB4.8000307@giopas.eu>

Laurent Pinchart wrote:
>
>> What do you suggest to do?
>>     
>
> Contact the em28xx maintainer ? ;-)
>   
Thanks Laurent, I just did it!

enjoy, ;)
giopas

-- 
"The paradigm of competition is a race: by
rewarding the winner, we encourage everyone
to run faster. When capitalism really works
this way, it does a good job; but its defenders
are wrong in assuming it always works this way.
If the runners forget why the reward is offered
and become intent on winning, no matter how, they
may find other strategies--such as, attacking
other runners. If the runners get into a fist
fight, they will all finish late."
(GNU manifesto/R. Stallman)



From laurent.pinchart at skynet.be  Wed Jun 20 00:01:55 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 20 Jun 2007 00:01:55 +0200
Subject: [Linux-uvc-devel] Support for frame-based payloads
In-Reply-To: <648568.3317.qm@web63915.mail.re1.yahoo.com>
References: <648568.3317.qm@web63915.mail.re1.yahoo.com>
Message-ID: <200706200001.55868.laurent.pinchart@skynet.be>

Hi Harri,

here is a slightly revised patch. Could you please test it with your 
hardware ?

I'm a bit concerned about the MPEG format, which should be stream-based and 
not frame-based. Beside, the GUID doesn't seem to be defined anywhere, and is 
quite ambiguous. Could you please give me more information about the device 
you are targetting ?

Best regards,

Laurent Pinchart
-------------- next part --------------
A non-text attachment was scrubbed...
Name: framebased.diff
Type: text/x-diff
Size: 8980 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070620/93f3baac/attachment.diff>

From laurent.pinchart at skynet.be  Wed Jun 20 00:03:49 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 20 Jun 2007 00:03:49 +0200
Subject: [Linux-uvc-devel] acer cristal eye recognised but not working
In-Reply-To: <JJWD5W$3B4A744D6453D4A19BE209AFCB6AEE6A@libero.it>
References: <JJWD5W$3B4A744D6453D4A19BE209AFCB6AEE6A@libero.it>
Message-ID: <200706200003.49883.laurent.pinchart@skynet.be>

Hi,

On Tuesday 19 June 2007, whites11 at inwind.it wrote:
> thanks for the answer!
> (it's the first time i use a mailing list: must i send all messages to 
> ml's address or have i got to answer directly to you?)

Please post replies to the mailing list. You can CC the author.

> this is what you asked for:
[snip]

Thanks for the information. Your webcam supports the YUV video format only. 
luvcview -f yuv should help.

Best regards,

Laurent Pinchart


From harri_klapuri at yahoo.com  Wed Jun 20 11:22:05 2007
From: harri_klapuri at yahoo.com (Harri Klapuri)
Date: Wed, 20 Jun 2007 02:22:05 -0700 (PDT)
Subject: [Linux-uvc-devel] Support for frame-based payloads
In-Reply-To: <200706200001.55868.laurent.pinchart@skynet.be>
Message-ID: <654834.93116.qm@web63904.mail.re1.yahoo.com>

Hi Laurent,

thanks for working with the patch. I tested it and it works fine.
I noticed a minor issue: in uvc_driver.c, line 339, the word
"frame-based" is better removed.

> I'm a bit concerned about the MPEG format, which should be stream-based and
> not frame-based. Beside, the GUID doesn't seem to be defined anywhere, and is
> quite ambiguous.

I know. Actually the problem is the same for stream-based because
the GUID is needed there, too.

Currently I don't have better GUIDs for MPEG formats. However, I
would like to provide something, simply to match V4L2_PIX_FMT_MPEG,
which seems like an important format (or a set of formats).

> Could you please give me more information about the device
> you are targetting ?

It is not out yet (available for sale). Besides the typical MJPEG
and Uncompressed, it supports frame-based payloads.

   Best Regards,
   Harri Klapuri


 
---------------------------------
No need to miss a message. Get email on-the-go 
with Yahoo! Mail for Mobile. Get started.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070620/36088d48/attachment.html>

From contact at alexandredenis.net  Wed Jun 20 16:30:01 2007
From: contact at alexandredenis.net (Alexandre DENIS)
Date: Wed, 20 Jun 2007 16:30:01 +0200
Subject: [Linux-uvc-devel] logitech pro 5000
In-Reply-To: <200706171551.02760.nick@customdesigns.ca>
References: <46602ABB.7000609@teksavvy.com>
	<4674A652.8010200@astronomicalresearchaustralia.org>
	<200706171551.02760.nick@customdesigns.ca>
Message-ID: <200706201630.01628.contact@alexandredenis.net>

On Sunday 17 June 2007, Nick Wiltshire wrote:
> On Saturday 16 June 2007 21:11, Brian wrote:
> > Hi Houman,
> >
> > Another possible option is to use kopete.
> > To get it to work you need to compile it with a patch.
> > http://www.alexandredenis.net/software/kopete-uvc/kopete-uvc-patch-
> >20060206
>
> Is this patch against Kopete SVN?

Yes, this is a patch against Kopete 3.5 svn branch.

> Is there a howto on using it for n00bs? :)

There is a README enclosed in the tarball.

-a.


From whites11 at inwind.it  Wed Jun 20 21:21:00 2007
From: whites11 at inwind.it (whites11 at inwind.it)
Date: Wed, 20 Jun 2007 21:21:00 +0200
Subject: [Linux-uvc-devel] acer cristal eye recognised but not working
Message-ID: <JJY8F0$012346873B720CEC4A997A6185034F28@libero.it>

ok
i tryed to do
luvcview -f yuv
but my x server crashes :)

i will investigate





Hi,

On Tuesday 19 June 2007, whites11 at inwind.it wrote:
> thanks for the answer!
> (it's the first time i use a mailing list: must i send all messages to 
> ml's address or have i got to answer directly to you?)

Please post replies to the mailing list. You can CC the author.

> this is what you asked for:
[snip]

Thanks for the information. Your webcam supports the YUV video format only. 
luvcview -f yuv should help.

Best regards,

Laurent Pinchart



From freqmod at gmail.com  Thu Jun 21 11:44:19 2007
From: freqmod at gmail.com (Frederik M.J. Vestre)
Date: Thu, 21 Jun 2007 11:44:19 +0200
Subject: [Linux-uvc-devel] DV-capture program for NV-GS 37
Message-ID: <200706211144.19658.freqmod@gmail.com>

Thank you for a working linux driver for NV-GS 37 with USB. 

I have modified the sample capture program for v4l2 to support dv data, and 
pipe it to stdout (all messages now goes to stderr). 

The (raw) dv file may be played back with MPlayer, edited with cinelerra etc.

It works with linux-uvc (svn) and Panasonic NV-GS37 in dv mode. 

http://freqmod.dyndns.org/upload/dvcapture.c

Frederik M.J.V.


From damian at math.wvu.edu  Thu Jun 21 19:48:22 2007
From: damian at math.wvu.edu (Damian Christey)
Date: Thu, 21 Jun 2007 13:48:22 -0400
Subject: [Linux-uvc-devel] Creative Optia AF working
Message-ID: <1182448102.7668.2.camel@307H-1.ARM.math.wvu.edu>

Hi all,

Just wanted to report that the new Optia AF (
http://www.creative.com/products/product.asp?category=218&subcategory=219&product=16425
) is working beautifully with the uvcvideo driver.

I'm using it with the development version of Motion (
http://www.lavrsen.dk/twiki/bin/view/Motion/ ) to capture ridiculously
high resolution video (1600x1200!)

Thanks, Laurent, for your work on this driver!


dmesg output follows:

[176817.579322] usb 4-2: new high speed USB device using ehci_hcd and
address 6
[176817.972814] usb 4-2: configuration #1 chosen from 1 choice
[176817.973533] uvcvideo: Probing generic UVC device 2
[176817.973550] uvcvideo: Found format Uncompressed.
[176817.973553] uvcvideo: - 640x480 (30.0 fps)
[176817.973556] uvcvideo: - 320x240 (30.0 fps)
[176817.973558] uvcvideo: - 160x120 (30.0 fps)
[176817.973561] uvcvideo: - 352x288 (30.0 fps)
[176817.973563] uvcvideo: - 176x144 (30.0 fps)
[176817.973566] uvcvideo: - 1280x960 (7.5 fps)
[176817.973569] uvcvideo: - 1600x1200 (5.0 fps)
[176817.973571] uvcvideo: Found format MJPEG.
[176817.973574] uvcvideo: - 640x480 (30.0 fps)
[176817.973576] uvcvideo: - 320x240 (30.0 fps)
[176817.973579] uvcvideo: - 160x120 (30.0 fps)
[176817.973581] uvcvideo: - 352x288 (30.0 fps)
[176817.973584] uvcvideo: - 176x144 (30.0 fps)
[176817.973586] uvcvideo: - 1280x960 (10.0 fps)
[176817.973593] uvcvideo: Found a Status endpoint (addr 81).
[176817.973596] uvcvideo: Found UVC 1.00 device <unnamed> (041e:4058)
[176817.973607] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/2 to device 2 entity 2
[176817.973612] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/3 to device 2 entity 2
[176817.973617] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/6 to device 2 entity 2
[176817.973621] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/7 to device 2 entity 2
[176817.973626] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/8 to device 2 entity 2
[176817.973630] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/9 to device 2 entity 2
[176817.973635] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/1 to device 2 entity 2
[176817.973640] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/5 to device 2 entity 2
[176817.973645] uvcvideo: Added control
00000000-0000-0000-0000-000000000001/2 to device 2 entity 1
[176817.973649] uvcvideo: Added control
00000000-0000-0000-0000-000000000001/4 to device 2 entity 1
[176817.973654] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/11 to device 2 entity 2
[176817.973659] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/10 to device 2 entity 2
[176817.973663] uvcvideo: Scanning UVC chain: OT 3 <- PU 2 <- IT 1
[176817.973668]  (-> XU 4)<6>uvcvideo: Found a valid video chain (1 -> 3).
[176817.975040] uvcvideo: UVC device initialized.

-- 
Damian Christey <damian at math.wvu.edu>
System Administration, WVU Department of Mathematics



From phil at sanslogic.co.uk  Thu Jun 21 20:22:18 2007
From: phil at sanslogic.co.uk (Philip Heron)
Date: Thu, 21 Jun 2007 19:22:18 +0100
Subject: [Linux-uvc-devel] Creative Optia AF working
In-Reply-To: <1182448102.7668.2.camel@307H-1.ARM.math.wvu.edu>
References: <1182448102.7668.2.camel@307H-1.ARM.math.wvu.edu>
Message-ID: <1182450138.6727.1.camel@beastie.lan>

Hi Damian,

On Thu, 2007-06-21 at 13:48 -0400, Damian Christey wrote:
> Hi all,
> 
> Just wanted to report that the new Optia AF (
> http://www.creative.com/products/product.asp?category=218&subcategory=219&product=16425
> ) is working beautifully with the uvcvideo driver.
> 
> I'm using it with the development version of Motion (
> http://www.lavrsen.dk/twiki/bin/view/Motion/ ) to capture ridiculously
> high resolution video (1600x1200!)
> 
> Thanks, Laurent, for your work on this driver!
> 

Just out of curiosity, what does the AF (Auto Focus) mean? Is it just a
software gimmick?

> [176817.973569] uvcvideo: - 1600x1200 (5.0 fps)

Nice :-)

-Phil <phil at sanslogic.co.uk>


From damian at math.wvu.edu  Thu Jun 21 23:00:50 2007
From: damian at math.wvu.edu (Damian Christey)
Date: Thu, 21 Jun 2007 17:00:50 -0400
Subject: [Linux-uvc-devel] Creative Optia AF working
In-Reply-To: <1182450138.6727.1.camel@beastie.lan>
References: <1182448102.7668.2.camel@307H-1.ARM.math.wvu.edu>
	<1182450138.6727.1.camel@beastie.lan>
Message-ID: <1182459650.7668.17.camel@307H-1.ARM.math.wvu.edu>

On Thu, 2007-06-21 at 19:22 +0100, Philip Heron wrote:
> Just out of curiosity, what does the AF (Auto Focus) mean? Is it just a
> software gimmick?

Believe it or not, it actually means what it says: the camera
automatically focuses on whatever is nearest to it.  This functionality
is implemented in hardware, and there is no apparent way to override it.

It's most noticeable if you suddenly move toward or away from the
camera, as there is a bit of lag where everything becomes blurry while
it refocuses.  Also it occasionally decides to focus on something in the
background, but 90% of the time it gets the focal point right, and the
picture is very sharp for a fairly cheap webcam.

cheers,
-- 
Damian Christey <damian at math.wvu.edu>
System Administration, WVU Department of Mathematics



From cyroreal at gmail.com  Fri Jun 22 16:55:05 2007
From: cyroreal at gmail.com (Cyro Corte Real Filho)
Date: Fri, 22 Jun 2007 11:55:05 -0300
Subject: [Linux-uvc-devel] Problem with Asus W5Fm webcam (0c45:6253 Microdia)
Message-ID: <b0435a020706220755jc978dk5435e6637939b11b@mail.gmail.com>

Hello all,


I have just bought an Asus W5Fm notebook with an integrated webcam,
and i am trying to make it work on Linux, as it is my only OS
installed on the machine.

I have compiled linuxuvc driver, but when i run the module it only
shows on dmesg:

-----start

[ 4074.140000] Linux video capture interface: v2.00
[ 4074.144000] usbcore: registered new interface driver uvcvideo
[ 4074.144000] USB Video Class driver (v0.1.0)

-----end

So it does not recognize the camera, nor creates the /dev/video0 file!

The output of lsusb -v command is:

-----start

Bus 001 Device 003: ID 0c45:6253 Microdia
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0        64
  idVendor           0x0c45 Microdia
  idProduct          0x6253
  bcdDevice            1.00
  iManufacturer           0
  iProduct                1 USB20 Camera
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          279
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       1
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       2
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       3
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0180  1x 384 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       4
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       5
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x02a8  1x 680 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       6
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       7
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0b84  2x 900 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       8
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 0 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval              10


So i would like to ask if there is any chance to this camera works
with this driver. Can i help in any way?

Thanks a lot for any help.

Cyro


From laurent.pinchart at skynet.be  Sat Jun 23 22:01:53 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 23 Jun 2007 22:01:53 +0200
Subject: [Linux-uvc-devel] DV-capture program for NV-GS 37
In-Reply-To: <200706211144.19658.freqmod@gmail.com>
References: <200706211144.19658.freqmod@gmail.com>
Message-ID: <200706232201.53677.laurent.pinchart@skynet.be>

Hi Frederik,

On Thursday 21 June 2007, Frederik M.J. Vestre wrote:
> Thank you for a working linux driver for NV-GS 37 with USB.
>
> I have modified the sample capture program for v4l2 to support dv data, and
> pipe it to stdout (all messages now goes to stderr).
>
> The (raw) dv file may be played back with MPlayer, edited with cinelerra
> etc.
>
> It works with linux-uvc (svn) and Panasonic NV-GS37 in dv mode.
>
> http://freqmod.dyndns.org/upload/dvcapture.c

Thanks for your work. I'll be sure to try it if someone sends me a Panasonic 
camera :-)

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Jun 23 22:04:55 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 23 Jun 2007 22:04:55 +0200
Subject: [Linux-uvc-devel] Problem with Asus W5Fm webcam (0c45:6253
	Microdia)
In-Reply-To: <b0435a020706220755jc978dk5435e6637939b11b@mail.gmail.com>
References: <b0435a020706220755jc978dk5435e6637939b11b@mail.gmail.com>
Message-ID: <200706232204.56315.laurent.pinchart@skynet.be>

Hi Cyro,

On Friday 22 June 2007, Cyro Corte Real Filho wrote:
> Hello all,
>
>
> I have just bought an Asus W5Fm notebook with an integrated webcam,
> and i am trying to make it work on Linux, as it is my only OS
> installed on the machine.
>
> I have compiled linuxuvc driver, but when i run the module it only
> shows on dmesg:
>
> -----start
>
> [ 4074.140000] Linux video capture interface: v2.00
> [ 4074.144000] usbcore: registered new interface driver uvcvideo
> [ 4074.144000] USB Video Class driver (v0.1.0)
>
> -----end
>
> So it does not recognize the camera, nor creates the /dev/video0 file!
>
> The output of lsusb -v command is:
>
> -----start
>
> Bus 001 Device 003: ID 0c45:6253 Microdia
> Device Descriptor:
>   bLength                18
>   bDescriptorType         1
>   bcdUSB               2.00
>   bDeviceClass            0 (Defined at Interface level)
>   bDeviceSubClass         0
>   bDeviceProtocol         0
>   bMaxPacketSize0        64
>   idVendor           0x0c45 Microdia
>   idProduct          0x6253
>   bcdDevice            1.00
>   iManufacturer           0
>   iProduct                1 USB20 Camera
>   iSerial                 0
>   bNumConfigurations      1
>   Configuration Descriptor:
>     bLength                 9
>     bDescriptorType         2
>     wTotalLength          279
>     bNumInterfaces          1
>     bConfigurationValue     1
>     iConfiguration          0
>     bmAttributes         0x80
>       (Bus Powered)
>     MaxPower              500mA
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       0
>       bNumEndpoints           3
>       bInterfaceClass       255 Vendor Specific Class
>       bInterfaceSubClass    255 Vendor Specific Subclass
>       bInterfaceProtocol    255 Vendor Specific Protocol
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            1
>           Transfer Type            Isochronous
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0000  1x 0 bytes
>         bInterval               1
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x82  EP 2 IN
>         bmAttributes            2
>           Transfer Type            Bulk
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0200  1x 512 bytes
>         bInterval               0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x83  EP 3 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0001  1x 1 bytes
>         bInterval              10
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       1
>       bNumEndpoints           3
>       bInterfaceClass       255 Vendor Specific Class
>       bInterfaceSubClass    255 Vendor Specific Subclass
>       bInterfaceProtocol    255 Vendor Specific Protocol
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            1
>           Transfer Type            Isochronous
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0080  1x 128 bytes
>         bInterval               1
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x82  EP 2 IN
>         bmAttributes            2
>           Transfer Type            Bulk
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0200  1x 512 bytes
>         bInterval               0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x83  EP 3 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0001  1x 1 bytes
>         bInterval              10
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       2
>       bNumEndpoints           3
>       bInterfaceClass       255 Vendor Specific Class
>       bInterfaceSubClass    255 Vendor Specific Subclass
>       bInterfaceProtocol    255 Vendor Specific Protocol
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            1
>           Transfer Type            Isochronous
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0100  1x 256 bytes
>         bInterval               1
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x82  EP 2 IN
>         bmAttributes            2
>           Transfer Type            Bulk
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0200  1x 512 bytes
>         bInterval               0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x83  EP 3 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0001  1x 1 bytes
>         bInterval              10
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       3
>       bNumEndpoints           3
>       bInterfaceClass       255 Vendor Specific Class
>       bInterfaceSubClass    255 Vendor Specific Subclass
>       bInterfaceProtocol    255 Vendor Specific Protocol
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            1
>           Transfer Type            Isochronous
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0180  1x 384 bytes
>         bInterval               1
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x82  EP 2 IN
>         bmAttributes            2
>           Transfer Type            Bulk
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0200  1x 512 bytes
>         bInterval               0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x83  EP 3 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0001  1x 1 bytes
>         bInterval              10
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       4
>       bNumEndpoints           3
>       bInterfaceClass       255 Vendor Specific Class
>       bInterfaceSubClass    255 Vendor Specific Subclass
>       bInterfaceProtocol    255 Vendor Specific Protocol
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            1
>           Transfer Type            Isochronous
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0200  1x 512 bytes
>         bInterval               1
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x82  EP 2 IN
>         bmAttributes            2
>           Transfer Type            Bulk
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0200  1x 512 bytes
>         bInterval               0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x83  EP 3 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0001  1x 1 bytes
>         bInterval              10
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       5
>       bNumEndpoints           3
>       bInterfaceClass       255 Vendor Specific Class
>       bInterfaceSubClass    255 Vendor Specific Subclass
>       bInterfaceProtocol    255 Vendor Specific Protocol
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            1
>           Transfer Type            Isochronous
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x02a8  1x 680 bytes
>         bInterval               1
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x82  EP 2 IN
>         bmAttributes            2
>           Transfer Type            Bulk
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0200  1x 512 bytes
>         bInterval               0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x83  EP 3 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0001  1x 1 bytes
>         bInterval              10
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       6
>       bNumEndpoints           3
>       bInterfaceClass       255 Vendor Specific Class
>       bInterfaceSubClass    255 Vendor Specific Subclass
>       bInterfaceProtocol    255 Vendor Specific Protocol
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            1
>           Transfer Type            Isochronous
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0320  1x 800 bytes
>         bInterval               1
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x82  EP 2 IN
>         bmAttributes            2
>           Transfer Type            Bulk
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0200  1x 512 bytes
>         bInterval               0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x83  EP 3 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0001  1x 1 bytes
>         bInterval              10
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       7
>       bNumEndpoints           3
>       bInterfaceClass       255 Vendor Specific Class
>       bInterfaceSubClass    255 Vendor Specific Subclass
>       bInterfaceProtocol    255 Vendor Specific Protocol
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            1
>           Transfer Type            Isochronous
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0b84  2x 900 bytes
>         bInterval               1
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x82  EP 2 IN
>         bmAttributes            2
>           Transfer Type            Bulk
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0200  1x 512 bytes
>         bInterval               0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x83  EP 3 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0001  1x 1 bytes
>         bInterval              10
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       8
>       bNumEndpoints           3
>       bInterfaceClass       255 Vendor Specific Class
>       bInterfaceSubClass    255 Vendor Specific Subclass
>       bInterfaceProtocol    255 Vendor Specific Protocol
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            1
>           Transfer Type            Isochronous
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x1400  3x 0 bytes
>         bInterval               1
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x82  EP 2 IN
>         bmAttributes            2
>           Transfer Type            Bulk
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0200  1x 512 bytes
>         bInterval               0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x83  EP 3 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0001  1x 1 bytes
>         bInterval              10
>
>
> So i would like to ask if there is any chance to this camera works
> with this driver. Can i help in any way?

Your webcam isn't a UVC device, so there is no chance to get it working with 
the Linux UVC driver.

Sorry.

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Jun 23 22:10:35 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 23 Jun 2007 22:10:35 +0200
Subject: [Linux-uvc-devel] using 'read' method for device access
In-Reply-To: <20070610145230.HM.0000000000000Tj@edgimar.bos-mail-wwl17.lycos.com>
References: <20070610145230.HM.0000000000000Tj@edgimar.bos-mail-wwl17.lycos.com>
Message-ID: <200706232210.35838.laurent.pinchart@skynet.be>

Hi Mark,

On Sunday 10 June 2007, Mark Edgington wrote:
> Probably this is already being addressed, but it seems like providing a
> 'read' (as opposed to 'mmap') method for accessing video devices is
> important. If many pieces of software are using this method, then they
> would instantly benefit from the linux-uvc project if a read method was
> made possible.
>
> For a bug comment which highlights this problem, please see the following:
> https://bugs.launchpad.net/ubuntu/+source/linux-source-2.6.20/+bug/77456/co
>mments/8

read() is indeed on my todo-list. The mmap() method was implemented first, is 
it was the most efficient and widely used method. I just haven't had time to 
implement read() yet.

I'm not sure if read() was a good idea in the first place, but as it's now in 
the V4L2 specification I'll try to implement it sometimes.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Jun 23 22:38:01 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 23 Jun 2007 22:38:01 +0200
Subject: [Linux-uvc-devel] Support for frame-based payloads
In-Reply-To: <654834.93116.qm@web63904.mail.re1.yahoo.com>
References: <654834.93116.qm@web63904.mail.re1.yahoo.com>
Message-ID: <200706232238.01936.laurent.pinchart@skynet.be>

Hi Harri,
>
> thanks for working with the patch. I tested it and it works fine.
> I noticed a minor issue: in uvc_driver.c, line 339, the word
> "frame-based" is better removed.

Thanks for pointing this out.

> > I'm a bit concerned about the MPEG format, which should be stream-based
> > and not frame-based. Beside, the GUID doesn't seem to be defined
> > anywhere, and is quite ambiguous.
>
> I know. Actually the problem is the same for stream-based because
> the GUID is needed there, too.

You're right, but MPEG should still not be a frame-based format :-)

> Currently I don't have better GUIDs for MPEG formats. However, I
> would like to provide something, simply to match V4L2_PIX_FMT_MPEG,
> which seems like an important format (or a set of formats).

V4L2_PIX_FMT_MPEG seems to be a set of formats. If you're targetting MPEG2-TS, 
UVC defines a specific format for that. For other MPEG flavors, you should 
probably contact the USB implementers forum to find out if there are any 
ongoing discussions.

Has MS defined GUIDs for the different MPEG payloads ?

> > Could you please give me more information about the device
> > you are targetting ?
>
> It is not out yet (available for sale). Besides the typical MJPEG
> and Uncompressed, it supports frame-based payloads.

Will it support MPEG as well ?

Best regards,

Laurent Pinchart


From linux at giopas.eu  Sun Jun 24 20:34:52 2007
From: linux at giopas.eu (giopas)
Date: Sun, 24 Jun 2007 20:34:52 +0200
Subject: [Linux-uvc-devel] [Webcam & DVB] UVC & EM28XX modules: can I
 make them both work?
In-Reply-To: <46783EB4.8000307@giopas.eu>
References: <46746383.1070102@giopas.eu>	<200706182244.58875.laurent.pinchart@skynet.be>
	<46783EB4.8000307@giopas.eu>
Message-ID: <467EB94C.5090005@giopas.eu>

giopas wrote:
> Laurent Pinchart wrote:
>   
>>> What do you suggest to do?
>>>     
>>>       
>> Contact the em28xx maintainer ? ;-)
>>   
>>     
> Thanks Laurent, I just did it!
>
> enjoy, ;)
> giopas
>
>   
Hi Laurent, I did not received any suggest/answer by dvb module's 
mantainer, I've found instead this email: 
http://osdir.com/ml/linux.drivers.uvc.devel/2007-01/msg00181.html

Could you please have a look at it, because it looks exactelly like my 
problem.

Thanks,

giopas

-- 
"The paradigm of competition is a race: by
rewarding the winner, we encourage everyone
to run faster. When capitalism really works
this way, it does a good job; but its defenders
are wrong in assuming it always works this way.
If the runners forget why the reward is offered
and become intent on winning, no matter how, they
may find other strategies--such as, attacking
other runners. If the runners get into a fist
fight, they will all finish late."
(GNU manifesto/R. Stallman)



From harri_klapuri at yahoo.com  Mon Jun 25 08:28:55 2007
From: harri_klapuri at yahoo.com (Harri Klapuri)
Date: Sun, 24 Jun 2007 23:28:55 -0700 (PDT)
Subject: [Linux-uvc-devel] Support for frame-based payloads
In-Reply-To: <200706232238.01936.laurent.pinchart@skynet.be>
Message-ID: <857056.17051.qm@web63915.mail.re1.yahoo.com>

Hi Laurent,

>> I know. Actually the problem is the same for stream-based because
>> the GUID is needed there, too.
>
> You're right, but MPEG should still not be a frame-based format :-)

Usually MPEG formats are transmitted as streams but encoders
and decoders often work on full frames. Forcing the frames
into a byte-oriented stream seems like a loss of information.

Isn't V4L2 inherently frame-oriented or is there a way to
pass streams/packets, too? A stream contains frame indicators
of course, so the driver could be looking for them but that
means more work for the driver.

> Has MS defined GUIDs for the different MPEG payloads ?

I am not aware of anything useful in this area.

>> It is not out yet (available for sale). Besides the typical MJPEG
>> and Uncompressed, it supports frame-based payloads.
>
> Will it support MPEG as well ?

It is possible. In any case I anticipate the number of
MPEG4 devices is going to increase pretty soon.

  Best Regards,
  Harri


       
---------------------------------
Luggage? GPS? Comic books? 
Check out fitting  gifts for grads at Yahoo! Search.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070624/be5776db/attachment.html>

From xbenlau at gmail.com  Thu Jun 28 20:36:45 2007
From: xbenlau at gmail.com (Ben Lau)
Date: Fri, 29 Jun 2007 02:36:45 +0800
Subject: [Linux-uvc-devel] Fails to use V-Gear Talkcam MX6 AF for 2.6.19.1
	or above
Message-ID: <f9a7555e0706281136t53eae8e9hae2f53b530b75465@mail.gmail.com>

Hi all,

   I want to report a problem for uvc driver to work with V-Gear
Talkcam MX6 AF. It is working fine for 2.6.18 kernel with svn rev
54(the Debian package) and rev 111. But it was failed to start for
2.6.19.1 kernel with svn rev 111. I have also tested for 2.6.21.3 with
rev 87 | 111 , it prompts the same error messages as below.

uvcvideo: Found UVC 1.00 device USB 2.0 Camera (0c45:62c0)
uvcvideo: Failed to query (1) UVC control 2 (unit 0) : -110 (exp. 26).
uvcvideo: Failed to initialize the device (-5).
ALSA sound/usb/usbaudio.c:2750: 6:3:1: add audio endpoint 0x84
ALSA sound/usb/usbaudio.c:1276: 6:3:1: cannot get freq at ep 0x84
ALSA sound/usb/usbmixer.c:989: [2] FU [Mic Capture Switch] ch = 1, val = 0/1/1
ALSA sound/usb/usbmixer.c:406: cannot set ctl value: req = 0x4, wValue
= 0x200, wIndex = 0x202, type = 4, data = 0xc0/0x0
ALSA sound/usb/usbmixer.c:989: [2] FU [Mic Capture Volume] ch = 1, val
= 0/5760/384
-------------- next part --------------

Bus 005 Device 006: ID 0c45:62c0 Microdia 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x0c45 Microdia
  idProduct          0x62c0 
  bcdDevice            1.00
  iManufacturer           2 Sonix Technology Co., Ltd.
  iProduct                1 USB 2.0 Camera
  iSerial                 3 SN0001
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          753
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0 
      iFunction               1 USB 2.0 Camera
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0 
      iInterface              1 USB 2.0 Camera
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           77
        dwClockFrequency        6.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               4
        iTerminal               0 
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {28f03370-6311-4a2e-ba2c-6890eb334016}
        bNumControl             1
        bNrPins                 1
        baSourceID( 0)          3
        bControlSize            1
        bmControls( 0)       0x01
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0 
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000000
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000053f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          Backlight Compensation
          Power Line Frequency
        iProcessing             0 
        bmVideoStandards     0x74
          PAL - 625/50
          NTSC - 625/50
          PAL - 525/60
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormarts                        1
        wTotalLength                    33025
        bEndPointAddress                    0
        bmInfo                              2
        bTerminalLink                       2
        bStillCaptureMethod                 1
        bTriggerSupport                     0
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                7
        guidFormat                            {32595559-0000-0010-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   614400
        dwMaxBitRate                 18432000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
        dwFrameInterval( 5)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   202752
        dwMaxBitRate                  6082560
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
        dwFrameInterval( 5)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   153600
        dwMaxBitRate                  4608000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
        dwFrameInterval( 5)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                    50688
        dwMaxBitRate                  1520640
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
        dwFrameInterval( 5)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                    38400
        dwMaxBitRate                  1152000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
        dwFrameInterval( 5)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                           960
        dwMinBitRate                  2457600
        dwMaxBitRate                 22118400
        dwMaxVideoFrameBufferSize     2457600
        dwDefaultFrameInterval        1111111
        bFrameIntervalType                  3
        dwFrameInterval( 0)           1111111
        dwFrameInterval( 1)           2000000
        dwFrameInterval( 2)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         7
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                  2621440
        dwMaxBitRate                 23592960
        dwMaxVideoFrameBufferSize     2621440
        dwDefaultFrameInterval        1111111
        bFrameIntervalType                  3
        dwFrameInterval( 0)           1111111
        dwFrameInterval( 1)           2000000
        dwFrameInterval( 2)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               7
        wWidth( 0)                       1280
        wHeight( 0)                      1024
        wWidth( 1)                       1280
        wHeight( 1)                       960
        wWidth( 2)                        640
        wHeight( 2)                       480
        wWidth( 3)                        352
        wHeight( 3)                       288
        wWidth( 4)                        320
        wHeight( 4)                       240
        wWidth( 5)                        176
        wHeight( 5)                       144
        wWidth( 6)                        160
        wHeight( 6)                       120
        bNumCompressionPatterns             7
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b20  2x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1320  3x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x13e8  3x 1000 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       0 
      bFunctionProtocol       0 
      iFunction               4 USB Microphone
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0 
      iInterface              4 USB Microphone
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           39
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0 
        iTerminal               0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 2
        bSourceID               1
        bControlSize            2
        bmaControls( 0)      0x03
        bmaControls( 0)      0x00
          Mute
          Volume
        iFeature                0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               2
        iTerminal               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                29
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            7 Discrete
        tSamFreq[ 0]         8000
        tSamFreq[ 1]        11025
        tSamFreq[ 2]        16000
        tSamFreq[ 3]        22050
        tSamFreq[ 4]        24000
        tSamFreq[ 5]        44100
        tSamFreq[ 6]        48000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x84  EP 4 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0190  1x 400 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)

From lists at brachttal.net  Thu Jun 28 22:32:05 2007
From: lists at brachttal.net (Andreas Volz)
Date: Thu, 28 Jun 2007 22:32:05 +0200
Subject: [Linux-uvc-devel] DV-capture program for NV-GS 37
In-Reply-To: <200706211144.19658.freqmod@gmail.com>
References: <200706211144.19658.freqmod@gmail.com>
Message-ID: <20070628223205.13d0f347@frodo.mittelerde>

Am Thu, 21 Jun 2007 11:44:19 +0200 schrieb Frederik M.J. Vestre:

> Thank you for a working linux driver for NV-GS 37 with USB. 
> 
> I have modified the sample capture program for v4l2 to support dv
> data, and pipe it to stdout (all messages now goes to stderr). 
> 
> The (raw) dv file may be played back with MPlayer, edited with
> cinelerra etc.
> 
> It works with linux-uvc (svn) and Panasonic NV-GS37 in dv mode. 
> 
> http://freqmod.dyndns.org/upload/dvcapture.c

Hello,

I've a Panasonic NV-GS37. If there's time the next days I'll try it.
Some weeks ago I tested some code that Laurent provided to me. It
switched the camera dvmode<->webcam mode. It's also able to get the
webcam video. Did you try this?

BTW: It seems you link is dead. :-(

regards
Andreas


