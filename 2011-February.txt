From linux.newbie79 at gmail.com  Wed Feb  2 01:07:41 2011
From: linux.newbie79 at gmail.com (linux newbie)
Date: Wed, 2 Feb 2011 11:07:41 +1100
Subject: [Linux-uvc-devel] MS Lifecam disconnect event
Message-ID: <AANLkTikzGL96pKUbBNvLhF79MZv_94UoFk0YPKOSsxEV@mail.gmail.com>

Hi,

I developed one application that keeps on reading one frame of data
from camera. If I connect MS Lifecam, I am getting USB disconnect
event randomly. But this is not happening in Logitech versions of
Camera.

Has anyone came across this sort of issue? Is there any solution worth
trying it?

Thanks


From r3pek at r3pek.org  Wed Feb  2 01:32:23 2011
From: r3pek at r3pek.org (Carlos Silva)
Date: Tue, 1 Feb 2011 23:32:23 -0100
Subject: [Linux-uvc-devel] HP Pavillion DV3 WebCam
Message-ID: <AANLkTimF0ucM69vHaSf7Dxu4-=0Mw1b63KSXnEm69xY1@mail.gmail.com>

Hi,

I recently bought an HP Pavillion DV3 laptop that has an integrated webcam.
After searching a while I found out that the webcam is an UVC webcam but it
isn't on the list of supported cams.

This is the usb entry of lsusb:
Bus 002 Device 004: ID 174f:1118 Syntek


I added the usb vendor + product id to the driver like this:
        /* Syntek (HP Pavillion dv3) */
        { .match_flags          = USB_DEVICE_ID_MATCH_DEVICE
                                | USB_DEVICE_ID_MATCH_INT_INFO,
          .idVendor             = 0x174f,
          .idProduct            = 0x1118,
          .bInterfaceClass      = USB_CLASS_VIDEO,
          .bInterfaceSubClass   = 1,
          .bInterfaceProtocol   = 0,
          .driver_info          = UVC_QUIRK_STREAM_NO_FID },


The device is recognized by the driver:
uvcvideo: Found UVC 1.00 device HP Webcam (174f:1118)


Now I have a problem. When I try to use it, the "in use" led from the camera
lights up, but software doesn't receive any image (stays black all the
time).
Here is my dmesg:
uvcvideo: Failed to resubmit video URB (-1).
uvcvideo: Trying format 0x56595559 (YUYV): 640x480.
uvcvideo: Using default frame interval 41666.6 us (24.0 fps).
uvcvideo: Setting frame interval to 1/24 (416666).
uvcvideo: Trying format 0x56595559 (YUYV): 640x480.
^^ This last 2 lines repeat themself several times (the first one has got my
attention but I don't know what's the problem)

Attached is a log of "guvcview" program starting and closing. After it
starts, it starts printing the errors:
 Could not grab image (select timeout): Resource temporarily unavailable
 Could not grab image (select timeout): Resource temporarily unavailable
 Could not grab image (select timeout): Resource temporarily unavailable
 Could not grab image (select timeout): Resource temporarily unavailable
 Could not grab image (select timeout): Resource temporarily unavailable


Any pointers on how can I help getting this camera supported on the driver?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110201/f14913ec/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: log
Type: application/octet-stream
Size: 6179 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110201/f14913ec/attachment.obj>

From bug-track at fisher-privat.net  Wed Feb  2 17:02:07 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Wed, 02 Feb 2011 17:02:07 +0100
Subject: [Linux-uvc-devel] [new cam] 0408:1fc3 buildin webcam on fujisu
 lifebook a340
In-Reply-To: <201101251438.27552.laurent.pinchart@ideasonboard.com>
References: <1295168273.14638.27.camel@asaminew-LIFEBOOK-A530>
	<201101251438.27552.laurent.pinchart@ideasonboard.com>
Message-ID: <1296662527.24948.8.camel@zwerg>

Am Dienstag, den 25.01.2011, 14:38 +0100 schrieb Laurent Pinchart:
> Hi Alexey,
> 
> On Sunday 16 January 2011 09:57:53 Alexey Fisher wrote:
> > Hi,
> > i helping my friend to install linux on his new laptop "fujisu lifebook
> > a340". It is cheap one (350?) but seems to work good with linux. But web
> > cam has some issues, which i will discuss with you.
> > 
> > It is uvc webcam (0408:1fc3 Quanta Computer, Inc.).
> > For most frame sizes it aims to support 10, 15,25, 30 fps. In real life it
> > stream only with 30fps, if i try to set 10fps, it will silently ignore it.
> > The real problem - there is no exposure control and autoexposure do not
> > working with 30fps too. So with normal light the image will be dark and
> > noisy.
> > 
> > With frame sizes 1280x960 and 1280x1024, it has max frame rate 9fps
> > (aims to support 9 and 5 fps). Interesting thing is, autoexposure seems
> > to work here. If i close the cam, frame rate will drop to ~4fps, and if
> > i add extra light it will go to ~9fps. The image with this framerate is
> > better than with 30fps.
> > 
> > By tracing i also found "uvcvideo: Dropping payload (out of sync)."
> > messages. So i added two quirks for this cam: UVC_QUIRK_STREAM_NO_FID
> > for out of sync;
> 
> Did UVC_QUIRK_STREAM_NO_FID make any difference ?

It remove all "out of sync" errors from trace. But i didn't noticed any
stability or quality difference.

> > UVC_QUIRK_RESTRICT_FRAME_RATE for dummy frame rates.
> >
> > Now my question: is it possible to pull/force some registers to test if
> > auto exposure can work with 30fps too?
> 
> The camera doesn't report exposure/auto exposure controls in its descriptors. 
> You could hack the driver to make it think the camera supports those controls. 
> You should then be able to set them from userspace to see if they make any 
> difference.
> 
> The easiest way would be to modify uvc_ctrl_init_device() in uvc_ctrl.c. Add
> 
> static const u8 camera_controls[3] = { 0x0e, 0x00, 0x00 };
> 
> at the beginning of the function, and replace
> 
>                 } else if (UVC_ENTITY_TYPE(entity) == UVC_ITT_CAMERA) {
>                         bmControls = entity->camera.bmControls;
>                         bControlSize = entity->camera.bControlSize;
>                 }
> 
> with
> 
>                 } else if (UVC_ENTITY_TYPE(entity) == UVC_ITT_CAMERA) {
>                         bmControls = camera_controls;
>                         bControlSize = entity->camera.bControlSize;
>                 }

This is not working. I did other hack, i just allowed only high
resolution. This is my last diff:


> diff --git a/drivers/media/video/uvc/uvc_driver.c b/drivers/media/video/uvc/uvc_
> index a1e9dfb..e771530 100644
> --- a/drivers/media/video/uvc/uvc_driver.c
> +++ b/drivers/media/video/uvc/uvc_driver.c
> @@ -495,7 +495,9 @@ static int uvc_parse_format(struct uvc_device *dev,
>                         10000000/frame->dwDefaultFrameInterval,
>                         (100000000/frame->dwDefaultFrameInterval)%10);
> -               format->nframes++;
> +               if (get_unaligned_le16(&buffer[5]) == 1280)
> +                       format->nframes++;
> +
>                 buflen -= buffer[0];
>                 buffer += buffer[0];
>         }
> @@ -1957,6 +1959,16 @@ MODULE_PARM_DESC(timeout, "Streaming control requests tim
>   * though they are compliant.
>   */
>  static struct usb_device_id uvc_ids[] = {
> +       /* (Quanta Computer, Inc.) Build in webcam found on Lifebook A530 */
> +       { .match_flags          = USB_DEVICE_ID_MATCH_DEVICE
> +                               | USB_DEVICE_ID_MATCH_INT_INFO,
> +         .idVendor             = 0x0408,
> +         .idProduct            = 0x1fc3,
> +         .bInterfaceClass      = USB_CLASS_VIDEO,
> +         .bInterfaceSubClass   = 1,
> +         .bInterfaceProtocol   = 0,
> +         .driver_info          = UVC_QUIRK_STREAM_NO_FID
> +                               | UVC_QUIRK_RESTRICT_FRAME_RATE },
>         /* Genius eFace 2025 */
>         { .match_flags          = USB_DEVICE_ID_MATCH_DEVICE
>                                 | USB_DEVICE_ID_MATCH_INT_INFO,


This i get before patch:
uvcdynctrl -f
Listing available frame formats for device video0:
Pixel format: YUYV (YUV 4:2:2 (YUYV); MIME type: video/x-raw-yuv)
  Frame size: 640x480
    Frame rates: 30, 25, 15, 10
  Frame size: 352x288
    Frame rates: 30, 25, 15, 10
  Frame size: 320x240
    Frame rates: 30, 25, 15, 10
  Frame size: 176x144
    Frame rates: 30, 25, 15, 10
  Frame size: 160x120
    Frame rates: 30, 25, 15, 10
  Frame size: 1280x960
    Frame rates: 9, 5
  Frame size: 1280x1024
    Frame rates: 9, 5



This is after patch:
....
Pixel format: YUYV (YUV 4:2:2 (YUYV); MIME type: video/x-raw-yuv)
  Frame size: 1280x960
    Frame rates: 9
  Frame size: 1280x1024
    Frame rates: 9


-- 
Regards,
        Alexey



From brentweatherall at gmail.com  Wed Feb  2 19:51:54 2011
From: brentweatherall at gmail.com (Brent Weatherall)
Date: Wed, 2 Feb 2011 10:51:54 -0800
Subject: [Linux-uvc-devel] XU architecture
Message-ID: <AANLkTimSUUL4xybyjtiSG2GA-wE0F8kUW5RsU+5-SJPQ@mail.gmail.com>

Hello.  I just want to clarify my understanding of the use of XUs in the
Linux UVC driver.

When a device driver wishes to use an XU for a device, it must first add the
XU descriptions (so to speak) to the standard Linux UVC driver.  The Linux
kernel driver module (usbhid.ko for example) is indeed the layer this
happens in, correct or no?

I am working with a device that operates with the standard UVC interface and
detects the proper XU additions automatically (which I am assuming is
normal).  I have found if I unplug the device to reset it and plug it back
in and then run the test application (which adds the XU controls every time)
the device will time out.  If I leave the device plugged in it usually
works, but it is not guaranteed.  To correct this I must restart my USB
system completely (i.e. rmmod
/lib/modules/2.6.35-22-generic/kernel/drivers/hid/usbhid/usbhid.ko, rmmod
/lib/modules/2.6.35-22-generic/kernel/drivers/hid/hid.ko, insmod
/lib/modules/2.6.35-22-generic/kernel/drivers/hid/hid.ko, insmod
/lib/modules/2.6.35-22-generic/kernel/drivers/hid/usbhid/usbhid.ko).

>From a driver standpoint, should I check for the presence of the XU controls
and then only add them if they are not present?  I would expect adding them
every time should not cause the system to break down, but I could be wrong.
 Theoretically speaking, is this most likely a UVC problem, or most likely a
device problem?  Again, just theoretically speaking.

Stephen,

     At this point I have NOT updated my system to the revision you
mentioned (2.6.3[67]).

Thank you.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110202/4af30ad2/attachment.html>

From aponteg.jesus at gmail.com  Wed Feb  2 20:21:37 2011
From: aponteg.jesus at gmail.com (=?ISO-8859-1?Q?Jes=FAs_Aponte?=)
Date: Wed, 2 Feb 2011 14:51:37 -0430
Subject: [Linux-uvc-devel]  Looking for upside down uvc cams
In-Reply-To: <1296673718.2769.1.camel@poncaire>
References: <4A39F219.10301@redhat.com>
	<1296673718.2769.1.camel@poncaire>
Message-ID: <AANLkTinLx1ZSOZA49z45hxPraAgaw8gvW64TW9zj55jo@mail.gmail.com>

Manufacturer: S?ragon
Laptop model: SL-6120



-- 
Jes?s Aponte
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110202/75862464/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: dmi.log
Type: text/x-log
Size: 17433 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110202/75862464/attachment.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lsusb.log
Type: text/x-log
Size: 376 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110202/75862464/attachment-0001.bin>

From jp.francois at cynove.com  Thu Feb  3 15:16:46 2011
From: jp.francois at cynove.com (jean-philippe francois)
Date: Thu, 3 Feb 2011 15:16:46 +0100
Subject: [Linux-uvc-devel] How to test UVC gadget
Message-ID: <AANLkTi=DHjWAGzLAcyeroPX2p6RYTDF5qpYNmdCAkNat@mail.gmail.com>

Hi,

I am currently stuck with pre 2.6.35 kernel on my machine (DM365), but
I would like to test
the uvc gadget code.

I used the patch from september 2009 because it does not need the
v4l2_event code.

How far is it from the "final" patch posted in April/May 2010 ?

Any example code on the gadget side is welcome. I am used to writing
V4L2 apps, but usually as a master when it comes to format setting, and decision
when to start or stop streaming.
Here the application should react to the Host orders, and I guess
it is doable through the event part,
but how does it work ?

Here is my current idea of how it should work.

wait_for_event (using the special event IOCTL or the v4l2_event
mechanism if available)
on connection, or format negotiation
  G_FMT to get resolution and format
  buffer setup
  STREAM_ON
  loop
     select
     read event ???
     QBUF
     DQBUF

Regards,
Jean-Philippe Fran?ois


From reiniger at free4net.cz  Thu Feb  3 22:10:16 2011
From: reiniger at free4net.cz (Milan Reiniger)
Date: Thu, 3 Feb 2011 22:10:16 +0100
Subject: [Linux-uvc-devel] Problem with camera Aveo Technology Corp. USB2.0
	Camera (1871:0d01)
Message-ID: <01b701cbc3e6$c1d5a690$4580f3b0$@cz>

Hello,

I have usb camera Aveo Technology Corp. USB2.0 Camera (1871:0d01) and I
connected it to RouterStationPro with OpenWrt 10.03RC4 (code name backfire).
After connect this camera and run mjpg-streamer, camera not worked.

Please help me.

Milan
-------------- next part --------------
A non-text attachment was scrubbed...
Name: kernel.log
Type: application/octet-stream
Size: 10016 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110203/fcb9a39b/attachment.obj>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: lsusb_v.txt
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110203/fcb9a39b/attachment.txt>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: lsusb.txt
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110203/fcb9a39b/attachment-0001.txt>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Syslog_openwrt.txt
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110203/fcb9a39b/attachment-0002.txt>

From roskamikko at gmail.com  Sat Feb  5 14:24:01 2011
From: roskamikko at gmail.com (Mikko R)
Date: Sat, 5 Feb 2011 13:24:01 +0000 (UTC)
Subject: [Linux-uvc-devel] unlisted webcam device
References: <1295304115.28471.23.camel@kira-main-XPS9000>
	<201101251649.25835.laurent.pinchart@ideasonboard.com>
Message-ID: <loom.20110205T142136-946@post.gmane.org>

Laurent Pinchart <laurent.pinchart <at> ideasonboard.com> writes:

> 
> Hi Ian,
> 
> On Monday 17 January 2011 23:41:55 Ian Macalinao wrote:
> > 046d:0825
> > 
> > Logitech C270 webcam
> 
> Could you please send me the output of
> 
> lsusb -v -d 046d:0825
> 
> (run as root if possible) ?
> 

Bus 001 Device 018: ID 046d:0825 Logitech, Inc. 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x046d Logitech, Inc.
  idProduct          0x0825 
  bcdDevice            0.10
  iManufacturer           0 
  iProduct                0 
  iSerial                 2 674E05A0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength         2469
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0 
      iFunction               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0 
      iInterface              0 
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength          159
        dwClockFrequency       48.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0 
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x0000000e
          Auto-Exposure Mode
          Auto-Exposure Priority
          Exposure Time (Absolute)
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 2
        bSourceID               1
        wMaxMultiplier      16384
        bControlSize            2
        bmControls     0x0000175b
          Brightness
          Contrast
          Saturation
          Sharpness
          White Balance Temperature
          Backlight Compensation
          Gain
          Power Line Frequency
          White Balance Temperature, Auto
        iProcessing             0 
        bmVideoStandards     0x1b
          None
          NTSC - 525/60
          SECAM - 625/50
          NTSC - 625/50
      VideoControl Interface Descriptor:
        bLength                27
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 3
        guidExtensionCode         {e48e6769-0f41-db40-a850-7420d7d8240e}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          2
        bControlSize            2
        bmControls( 0)       0x3f
        bmControls( 1)       0x03
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {1502e449-34f4-fe47-b158-0e885023e51b}
        bNumControl             0
        bNrPins                 1
        baSourceID( 0)          2
        bControlSize            1
        bmControls( 0)       0x00
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                28
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 6
        guidExtensionCode         {a94c5d1f-11de-8744-840d-50933c8ec8d1}
        bNumControl            18
        bNrPins                 1
        baSourceID( 0)          4
        bControlSize            3
        bmControls( 0)       0xff
        bmControls( 1)       0xff
        bmControls( 2)       0x03
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                27
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 7
        guidExtensionCode         {212de5ff-3080-2c4e-82d9-f587d00540bd}
        bNumControl             2
        bNrPins                 1
        baSourceID( 0)          4
        bControlSize            2
        bmControls( 0)       0x00
        bmControls( 1)       0x03
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             5
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               4
        iTerminal               0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x87  EP 7 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               8
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      VideoStreaming Interface Descriptor:
        bLength                            16
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                         3
        wTotalLength                     1850
        bEndPointAddress                  129
        bmInfo                              0
        bTerminalLink                       5
        bStillCaptureMethod                 1
        bTriggerSupport                     0
        bTriggerUsage                       0
        bControlSize                        1
        bmaControls( 0)                    27
        bmaControls( 1)                    27
        bmaControls( 2)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors               19
        guidFormat                            {59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x01
          Still image supported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                 24576000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x01
          Still image supported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                  1536000
        dwMaxBitRate                  9216000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x01
          Still image supported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                  2027520
        dwMaxBitRate                 12165120
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x01
          Still image supported
        wWidth                            320
        wHeight                           176
        dwMinBitRate                  4505600
        dwMaxBitRate                 27033600
        dwMaxVideoFrameBufferSize      112640
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x01
          Still image supported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                  6144000
        dwMaxBitRate                 36864000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x01
          Still image supported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                  8110080
        dwMaxBitRate                 48660480
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         7
        bmCapabilities                   0x01
          Still image supported
        wWidth                            432
        wHeight                           240
        dwMinBitRate                  8294400
        dwMaxBitRate                 49766400
        dwMaxVideoFrameBufferSize      207360
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         8
        bmCapabilities                   0x01
          Still image supported
        wWidth                            544
        wHeight                           288
        dwMinBitRate                 12533760
        dwMaxBitRate                 75202560
        dwMaxVideoFrameBufferSize      313344
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         9
        bmCapabilities                   0x01
          Still image supported
        wWidth                            640
        wHeight                           360
        dwMinBitRate                 18432000
        dwMaxBitRate                110592000
        dwMaxVideoFrameBufferSize      460800
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            46
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                        10
        bmCapabilities                   0x01
          Still image supported
        wWidth                            752
        wHeight                           416
        dwMinBitRate                 25026560
        dwMaxBitRate                125132800
        dwMaxVideoFrameBufferSize      625664
        dwDefaultFrameInterval         400000
        bFrameIntervalType                  5
        dwFrameInterval( 0)            400000
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            46
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                        11
        bmCapabilities                   0x01
          Still image supported
        wWidth                            800
        wHeight                           448
        dwMinBitRate                 28672000
        dwMaxBitRate                143360000
        dwMaxVideoFrameBufferSize      716800
        dwDefaultFrameInterval         400000
        bFrameIntervalType                  5
        dwFrameInterval( 0)            400000
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            42
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                        12
        bmCapabilities                   0x01
          Still image supported
        wWidth                            800
        wHeight                           600
        dwMinBitRate                 38400000
        dwMaxBitRate                153600000
        dwMaxVideoFrameBufferSize      960000
        dwDefaultFrameInterval         500000
        bFrameIntervalType                  4
        dwFrameInterval( 0)            500000
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
        dwFrameInterval( 3)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            42
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                        13
        bmCapabilities                   0x01
          Still image supported
        wWidth                            864
        wHeight                           480
        dwMinBitRate                 33177600
        dwMaxBitRate                132710400
        dwMaxVideoFrameBufferSize      829440
        dwDefaultFrameInterval         500000
        bFrameIntervalType                  4
        dwFrameInterval( 0)            500000
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
        dwFrameInterval( 3)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                        14
        bmCapabilities                   0x01
          Still image supported
        wWidth                            960
        wHeight                           544
        dwMinBitRate                 41779200
        dwMaxBitRate                125337600
        dwMaxVideoFrameBufferSize     1044480
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  3
        dwFrameInterval( 0)            666666
        dwFrameInterval( 1)           1000000
        dwFrameInterval( 2)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                        15
        bmCapabilities                   0x01
          Still image supported
        wWidth                            960
        wHeight                           720
        dwMinBitRate                 55296000
        dwMaxBitRate                110592000
        dwMaxVideoFrameBufferSize     1382400
        dwDefaultFrameInterval        1000000
        bFrameIntervalType                  2
        dwFrameInterval( 0)           1000000
        dwFrameInterval( 1)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                        16
        bmCapabilities                   0x01
          Still image supported
        wWidth                           1024
        wHeight                           576
        dwMinBitRate                 47185920
        dwMaxBitRate                 94371840
        dwMaxVideoFrameBufferSize     1179648
        dwDefaultFrameInterval        1000000
        bFrameIntervalType                  2
        dwFrameInterval( 0)           1000000
        dwFrameInterval( 1)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                        17
        bmCapabilities                   0x01
          Still image supported
        wWidth                           1184
        wHeight                           656
        dwMinBitRate                 62136320
        dwMaxBitRate                124272640
        dwMaxVideoFrameBufferSize     1553408
        dwDefaultFrameInterval        1000000
        bFrameIntervalType                  2
        dwFrameInterval( 0)           1000000
        dwFrameInterval( 1)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                        18
        bmCapabilities                   0x01
          Still image supported
        wWidth                           1280
        wHeight                           720
        dwMinBitRate                 73728000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize     1843200
        dwDefaultFrameInterval        1000000
        bFrameIntervalType                  2
        dwFrameInterval( 0)           1000000
        dwFrameInterval( 1)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                        19
        bmCapabilities                   0x01
          Still image supported
        wWidth                           1280
        wHeight                           960
        dwMinBitRate                 98304000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize     2457600
        dwDefaultFrameInterval        2000000
        bFrameIntervalType                  2
        dwFrameInterval( 0)           1333333
        dwFrameInterval( 1)           2000000
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
      VideoStreaming Interface Descriptor:
        bLength                            11
        bDescriptorType                    36
        bDescriptorSubtype                  6 (FORMAT_MJPEG)
        bFormatIndex                        2
        bNumFrameDescriptors               19
        bFlags                              1
          Fixed-size samples: Yes
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         1
        bmCapabilities                   0x01
          Still image supported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                 24576000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         2
        bmCapabilities                   0x01
          Still image supported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                  1536000
        dwMaxBitRate                  9216000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         3
        bmCapabilities                   0x01
          Still image supported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                  2027520
        dwMaxBitRate                 12165120
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         4
        bmCapabilities                   0x01
          Still image supported
        wWidth                            320
        wHeight                           176
        dwMinBitRate                  4505600
        dwMaxBitRate                 27033600
        dwMaxVideoFrameBufferSize      112640
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         5
        bmCapabilities                   0x01
          Still image supported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                  6144000
        dwMaxBitRate                 36864000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         6
        bmCapabilities                   0x01
          Still image supported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                  8110080
        dwMaxBitRate                 48660480
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         7
        bmCapabilities                   0x01
          Still image supported
        wWidth                            432
        wHeight                           240
        dwMinBitRate                  8294400
        dwMaxBitRate                 49766400
        dwMaxVideoFrameBufferSize      207360
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         8
        bmCapabilities                   0x01
          Still image supported
        wWidth                            544
        wHeight                           288
        dwMinBitRate                 12533760
        dwMaxBitRate                 75202560
        dwMaxVideoFrameBufferSize      313344
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         9
        bmCapabilities                   0x01
          Still image supported
        wWidth                            640
        wHeight                           360
        dwMinBitRate                 18432000
        dwMaxBitRate                110592000
        dwMaxVideoFrameBufferSize      460800
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                        10
        bmCapabilities                   0x01
          Still image supported
        wWidth                            752
        wHeight                           416
        dwMinBitRate                 25026560
        dwMaxBitRate                150159360
        dwMaxVideoFrameBufferSize      625664
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                        11
        bmCapabilities                   0x01
          Still image supported
        wWidth                            800
        wHeight                           448
        dwMinBitRate                 28672000
        dwMaxBitRate                172032000
        dwMaxVideoFrameBufferSize      716800
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                        12
        bmCapabilities                   0x01
          Still image supported
        wWidth                            800
        wHeight                           600
        dwMinBitRate                 38400000
        dwMaxBitRate                230400000
        dwMaxVideoFrameBufferSize      960000
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                        13
        bmCapabilities                   0x01
          Still image supported
        wWidth                            864
        wHeight                           480
        dwMinBitRate                 33177600
        dwMaxBitRate                199065600
        dwMaxVideoFrameBufferSize      829440
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                        14
        bmCapabilities                   0x01
          Still image supported
        wWidth                            960
        wHeight                           544
        dwMinBitRate                 41779200
        dwMaxBitRate                250675200
        dwMaxVideoFrameBufferSize     1044480
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                        15
        bmCapabilities                   0x01
          Still image supported
        wWidth                            960
        wHeight                           720
        dwMinBitRate                 55296000
        dwMaxBitRate                331776000
        dwMaxVideoFrameBufferSize     1382400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                        16
        bmCapabilities                   0x01
          Still image supported
        wWidth                           1024
        wHeight                           576
        dwMinBitRate                 47185920
        dwMaxBitRate                283115520
        dwMaxVideoFrameBufferSize     1179648
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                        17
        bmCapabilities                   0x01
          Still image supported
        wWidth                           1184
        wHeight                           656
        dwMinBitRate                 62136320
        dwMaxBitRate                372817920
        dwMaxVideoFrameBufferSize     1553408
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                        18
        bmCapabilities                   0x01
          Still image supported
        wWidth                           1280
        wHeight                           720
        dwMinBitRate                 73728000
        dwMaxBitRate                442368000
        dwMaxVideoFrameBufferSize     1843200
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                        19
        bmCapabilities                   0x01
          Still image supported
        wWidth                           1280
        wHeight                           960
        dwMinBitRate                 98304000
        dwMaxBitRate                589824000
        dwMaxVideoFrameBufferSize     2457600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x00c0  1x 192 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0180  1x 384 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0280  1x 640 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x03b0  1x 944 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       7
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0a80  2x 640 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       8
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b20  2x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       9
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0be0  2x 992 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting      10
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1380  3x 896 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting      11
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x13fc  3x 1020 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       2 Streaming
      bFunctionProtocol       0 
      iFunction               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0 
      iInterface              0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           38
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0 
        iTerminal               0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          1
        bSourceID               5
        iTerminal               0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 5
        bSourceID               1
        bControlSize            1
        bmaControls( 0)      0x03
          Mute
          Volume
        bmaControls( 1)      0x00
        iFeature                0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            1 Discrete
        tSamFreq[ 0]        16000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0044  1x 68 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            1 Discrete
        tSamFreq[ 0]        24000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0064  1x 100 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            1 Discrete
        tSamFreq[ 0]        32000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0084  1x 132 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            1 Discrete
        tSamFreq[ 0]        48000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x00c4  1x 196 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)



From x.luke at ymail.com  Sun Feb  6 05:57:50 2011
From: x.luke at ymail.com (Luke X.)
Date: Sat, 5 Feb 2011 20:57:50 -0800 (PST)
Subject: [Linux-uvc-devel] Logitech C310 and MJPEG won't work - a kernel bug?
Message-ID: <828539.6146.qm@web113707.mail.gq1.yahoo.com>

Hello,

I have 2 identical Logitech C310 webcams and 2 different Linux boxes (Ubuntu Karmic 64bit, 2.6.31 AND Ubuntu Lucid 32bit, 2.6.32). None of the combinations can save jpegs directly from the camera. I always get the same error which I am starting to believe comes straight from the kernel (many different programs I've tried give the same error message). For instance:

fswebcam -v
--- Opening /dev/video0...
Trying source module v4l2...
/dev/video0 opened.
src_v4l2_get_capability,81: /dev/video0 information:
src_v4l2_get_capability,82: cap.driver: "uvcvideo"
src_v4l2_get_capability,83: cap.card: "UVC Camera (046d:081b)"
src_v4l2_get_capability,84: cap.bus_info: "usb-0000:00:1d.7-2"
src_v4l2_get_capability,85: cap.capabilities=0x04000001
src_v4l2_get_capability,86: - VIDEO_CAPTURE
src_v4l2_get_capability,97: - STREAMING
No input was specified, using the first.
src_v4l2_set_input,173: /dev/video0: Input 0 information:
src_v4l2_set_input,174: name = "Camera 1"
src_v4l2_set_input,175: type = 00000002
src_v4l2_set_input,177: - CAMERA
src_v4l2_set_input,178: audioset = 00000000
src_v4l2_set_input,179: tuner = 00000000
src_v4l2_set_input,180: status = 00000000
src_v4l2_set_pix_format,530: Device offers the following V4L2 pixel formats:
src_v4l2_set_pix_format,542: 0: YUYV (YUV 4:2:2 (YUYV))
src_v4l2_set_pix_format,542: 1: MJPG (MJPEG)
Using palette MJPEG
Adjusting resolution from 384x288 to 352x288.
src_v4l2_set_mmap,648: mmap information:
src_v4l2_set_mmap,649: frames=4
src_v4l2_set_mmap,694: 0 length=102400
src_v4l2_set_mmap,694: 1 length=102400
src_v4l2_set_mmap,694: 2 length=102400
src_v4l2_set_mmap,694: 3 length=102400
--- Capturing frame...
fswc_verify_jpeg_dht,420: Inserting DHT segment into JPEG frame.
Corrupt JPEG data: 1 extraneous bytes before marker 0xd1
Captured frame in 0.00 seconds.
--- Processing captured image...
There are unsaved changes to the image.

The line with error is:
Corrupt JPEG data: 1 extraneous bytes before marker 0xd1

Any hope to make it work? Please let me know if you need more data. I've used Linux for years but I am no driver/module/kernel expert.

Thanks,
Luke




      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110205/70cf6c9c/attachment.html>

From oliver at neukum.org  Sun Feb  6 09:56:42 2011
From: oliver at neukum.org (Oliver Neukum)
Date: Sun, 6 Feb 2011 09:56:42 +0100
Subject: [Linux-uvc-devel] Logitech C310 and MJPEG won't work - a kernel
	bug?
In-Reply-To: <828539.6146.qm@web113707.mail.gq1.yahoo.com>
References: <828539.6146.qm@web113707.mail.gq1.yahoo.com>
Message-ID: <201102060956.42745.oliver@neukum.org>

Am Sonntag, 6. Februar 2011, 05:57:50 schrieb Luke X.:
> Hello,
> 
> I have 2 identical Logitech C310 webcams and 2 different Linux boxes (Ubuntu Karmic 64bit, 2.6.31 AND Ubuntu Lucid 32bit, 2.6.32). None of the combinations can save jpegs directly from the camera. I always get the same error which I am starting to believe comes straight from the kernel (many different programs I've tried give the same error message). For instance:

> --- Capturing frame...
> fswc_verify_jpeg_dht,420: Inserting DHT segment into JPEG frame.
> Corrupt JPEG data: 1 extraneous bytes before marker 0xd1
> Captured frame in 0.00 seconds.
> --- Processing captured image...
> There are unsaved changes to the image.
> 
> The line with error is:
> Corrupt JPEG data: 1 extraneous bytes before marker 0xd1
> 
> Any hope to make it work? Please let me know if you need more data. I've used Linux for years but I am no driver/module/kernel expert.

It would be easiest to get an usbmon trace to verify that the camera
indeed does provide an extra byte before marker 0xd1.

	Regards
		Oliver


From x.luke at ymail.com  Sun Feb  6 16:00:46 2011
From: x.luke at ymail.com (Luke X.)
Date: Sun, 6 Feb 2011 07:00:46 -0800 (PST)
Subject: [Linux-uvc-devel] Logitech C310 and MJPEG won't work - a kernel
	bug?
In-Reply-To: <201102060956.42745.oliver@neukum.org>
Message-ID: <245807.90980.qm@web113708.mail.gq1.yahoo.com>

I'm sorry but my kernels don't support that module (usbmon). The only remedy is recompilation but I can't do it now. Any other solutions? Or maybe you know some other distro ("live" preferred) with usbmon built in, so I could quickly try it?

Thanks,
Luke


--- On Sun, 2/6/11, Oliver Neukum <oliver at neukum.org> wrote:

From: Oliver Neukum <oliver at neukum.org>
Subject: Re: [Linux-uvc-devel] Logitech C310 and MJPEG won't work - a kernel bug?
To: linux-uvc-devel at lists.berlios.de, anaumov at suse.de
Cc: "Luke X." <x.luke at ymail.com>
Date: Sunday, February 6, 2011, 8:56 AM

Am Sonntag, 6. Februar 2011, 05:57:50 schrieb Luke X.:
> Hello,
> 
> I have 2 identical Logitech C310 webcams and 2 different Linux boxes (Ubuntu Karmic 64bit, 2.6.31 AND Ubuntu Lucid 32bit, 2.6.32). None of the combinations can save jpegs directly from the camera. I always get the same error which I am starting to believe comes straight from the kernel (many different programs I've tried give the same error message). For instance:

> --- Capturing frame...
> fswc_verify_jpeg_dht,420: Inserting DHT segment into JPEG frame.
> Corrupt JPEG data: 1 extraneous bytes before marker 0xd1
> Captured frame in 0.00 seconds.
> --- Processing captured image...
> There are unsaved changes to the image.
> 
> The line with error is:
> Corrupt JPEG data: 1 extraneous bytes before marker 0xd1
> 
> Any hope to make it work? Please let me know if you need more data. I've used Linux for years but I am no driver/module/kernel expert.

It would be easiest to get an usbmon trace to verify that the camera
indeed does provide an extra byte before marker 0xd1.

??? Regards
??? ??? Oliver



      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110206/67e55e39/attachment.html>

From x.luke at ymail.com  Sun Feb  6 17:18:43 2011
From: x.luke at ymail.com (Luke X.)
Date: Sun, 6 Feb 2011 08:18:43 -0800 (PST)
Subject: [Linux-uvc-devel] Logitech C310 and MJPEG won't work - a kernel
	bug?
Message-ID: <717085.36338.qm@web113720.mail.gq1.yahoo.com>

Resending with the attachment zipped up.

Luke

--- On Sun, 2/6/11, Luke X. <x.luke at ymail.com> wrote:

From: Luke X. <x.luke at ymail.com>
Subject: Re: [Linux-uvc-devel] Logitech C310 and MJPEG won't work - a kernel bug?
To: linux-uvc-devel at lists.berlios.de, anaumov at suse.de, "Oliver Neukum" <oliver at neukum.org>
Date: Sunday, February 6, 2011, 3:22 PM

Yet I think I managed to make it work (it's not a module, but built directly into the kernel).

Please find a trace file attached. A started monitoring, then ran "fswebcam -v" and when it finished I killed usbmon sniffing. Did this on my 64bit box.

Thanks,
Luke


--- On Sun, 2/6/11, Oliver Neukum <oliver at neukum.org> wrote:

From: Oliver Neukum <oliver at neukum.org>
Subject: Re: [Linux-uvc-devel] Logitech C310 and MJPEG won't work - a kernel bug?
To: linux-uvc-devel at lists.berlios.de, anaumov at suse.de
Cc: "Luke X." <x.luke at ymail.com>
Date: Sunday, February 6, 2011, 8:56 AM

Am Sonntag, 6. Februar 2011, 05:57:50 schrieb Luke X.:
> Hello,
> 
> I have 2
 identical Logitech C310 webcams and 2 different Linux boxes (Ubuntu Karmic 64bit, 2.6.31 AND Ubuntu Lucid 32bit, 2.6.32). None of the combinations can save jpegs directly from the camera. I always get the same error which I am starting to believe comes straight from the kernel (many different programs I've tried give the same error message). For instance:

> --- Capturing frame...
> fswc_verify_jpeg_dht,420: Inserting DHT segment into JPEG frame.
> Corrupt JPEG data: 1 extraneous bytes before marker 0xd1
> Captured frame in 0.00 seconds.
> --- Processing captured image...
> There are unsaved changes to the image.
> 
> The line with error is:
> Corrupt JPEG data: 1 extraneous bytes before marker 0xd1
> 
> Any hope to make it work? Please let me know if you need more data. I've used Linux for years but I am no driver/module/kernel expert.

It would be easiest to get an usbmon trace
 to verify that the camera
indeed does provide an extra byte before marker 0xd1.

??? Regards
??? ??? Oliver



      


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110206/6215610c/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: c310-cam.tgz
Type: application/x-gtar
Size: 8696 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110206/6215610c/attachment.tgz>

From x.luke at ymail.com  Sun Feb  6 17:47:40 2011
From: x.luke at ymail.com (Luke X.)
Date: Sun, 6 Feb 2011 08:47:40 -0800 (PST)
Subject: [Linux-uvc-devel] Logitech C310 and MJPEG won't work - a kernel
	bug?
Message-ID: <320744.55549.qm@web113720.mail.gq1.yahoo.com>

One more comment:

For the test I attached the error message was:

Corrupt JPEG data: 1 extraneous bytes before marker 0xd2

The number of bytes or the marker itself can vary, for instance here's what I got running "motion":

Corrupt JPEG data: 1 extraneous bytes before marker 0xd0
Corrupt JPEG data: 1 extraneous bytes before marker 0xd1
Corrupt JPEG data: 1 extraneous bytes before marker 0xd2
Corrupt JPEG data: 1 extraneous bytes before marker 0xd3
Corrupt JPEG data: 1 extraneous bytes before marker 0xd4
Corrupt JPEG data: 1 extraneous bytes before marker 0xd5
Corrupt JPEG data: 1 extraneous bytes before marker 0xd6
Corrupt JPEG data: 1 extraneous bytes before marker 0xd7
Corrupt JPEG data: 2 extraneous bytes before marker 0xd0
Corrupt JPEG data: 2 extraneous bytes before marker 0xd1
Corrupt JPEG data: 2 extraneous bytes before marker 0xd2
Corrupt JPEG data: 2 extraneous bytes before marker 0xd3
Corrupt JPEG data: 2 extraneous bytes before marker 0xd4
Corrupt JPEG data: 2 extraneous bytes before marker 0xd5
Corrupt JPEG data: 2 extraneous bytes before marker 0xd6
Corrupt JPEG data: 2 extraneous bytes before marker 0xd7
Corrupt JPEG data: 3 extraneous bytes before marker 0xd1
Corrupt JPEG data: 3 extraneous bytes before marker 0xd2
Corrupt JPEG data: 3 extraneous bytes before marker 0xd3
Corrupt JPEG data: 3 extraneous bytes before marker 0xd4
Corrupt JPEG data: 3 extraneous bytes before marker 0xd5
Corrupt JPEG data: 3 extraneous bytes before marker 0xd6
Corrupt JPEG data: 3 extraneous bytes before marker 0xd7
Corrupt JPEG data: 4 extraneous bytes before marker 0xd0
Corrupt JPEG data: 4 extraneous bytes before marker 0xd3
Corrupt JPEG data: 4 extraneous bytes before marker 0xd5
Corrupt JPEG data: 4 extraneous bytes before marker 0xd7
Corrupt JPEG data: 5 extraneous bytes before marker 0xd3
Corrupt JPEG data: 5 extraneous bytes before marker 0xd7
Corrupt JPEG data: 6 extraneous bytes before marker 0xd1


--- On Sun, 2/6/11, Luke X. <x.luke at ymail.com> wrote:

From: Luke X. <x.luke at ymail.com>
Subject: Re: [Linux-uvc-devel] Logitech C310 and MJPEG won't work - a kernel bug?
To: linux-uvc-devel at lists.berlios.de, anaumov at suse.de, "Oliver Neukum" <oliver at neukum.org>
Date: Sunday, February 6, 2011, 4:18 PM

Resending with the attachment zipped up.

Luke

--- On Sun, 2/6/11, Luke X. <x.luke at ymail.com> wrote:

From: Luke X. <x.luke at ymail.com>
Subject: Re: [Linux-uvc-devel] Logitech C310 and MJPEG won't work - a kernel bug?
To: linux-uvc-devel at lists.berlios.de, anaumov at suse.de, "Oliver Neukum" <oliver at neukum.org>
Date: Sunday, February 6, 2011, 3:22 PM

Yet I think I managed to make it work (it's not a module, but built directly into the kernel).

Please find a trace file attached. A started monitoring, then ran "fswebcam -v" and when it finished I killed usbmon sniffing. Did
 this on my 64bit box.

Thanks,
Luke


--- On Sun, 2/6/11, Oliver Neukum <oliver at neukum.org> wrote:

From: Oliver Neukum <oliver at neukum.org>
Subject: Re: [Linux-uvc-devel] Logitech C310 and MJPEG won't work - a kernel bug?
To: linux-uvc-devel at lists.berlios.de, anaumov at suse.de
Cc: "Luke X." <x.luke at ymail.com>
Date: Sunday, February 6, 2011, 8:56 AM

Am Sonntag, 6. Februar 2011, 05:57:50 schrieb Luke X.:
> Hello,
> 
> I have 2
 identical Logitech C310 webcams and 2 different Linux boxes (Ubuntu Karmic 64bit, 2.6.31 AND Ubuntu Lucid 32bit, 2.6.32). None of the combinations can save jpegs directly from the camera. I always get the same error which I am starting to believe comes straight from the kernel (many different programs I've tried give the same error message). For instance:

> --- Capturing frame...
> fswc_verify_jpeg_dht,420: Inserting DHT segment into JPEG frame.
> Corrupt JPEG data: 1 extraneous bytes before marker 0xd1
> Captured frame in 0.00 seconds.
> --- Processing captured image...
> There are unsaved changes to the image.
> 
> The line with error is:
> Corrupt JPEG data: 1 extraneous bytes before marker 0xd1
> 
> Any hope to make it work? Please let me know if you need more data. I've used Linux for years but I am no driver/module/kernel expert.

It would be easiest to get an usbmon trace
 to verify that the camera
indeed does provide an extra byte before marker 0xd1.

??? Regards
??? ??? Oliver



      


      


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110206/7d3c3d46/attachment.html>

From linux.newbie79 at gmail.com  Sun Feb  6 23:17:32 2011
From: linux.newbie79 at gmail.com (linux newbie)
Date: Mon, 7 Feb 2011 09:17:32 +1100
Subject: [Linux-uvc-devel] MS Lifecam disconnect event
In-Reply-To: <AANLkTikzGL96pKUbBNvLhF79MZv_94UoFk0YPKOSsxEV@mail.gmail.com>
References: <AANLkTikzGL96pKUbBNvLhF79MZv_94UoFk0YPKOSsxEV@mail.gmail.com>
Message-ID: <AANLkTimkbfPaDgsspM4HwWwC7KEHDpE+2rA+893VORLm@mail.gmail.com>

Hi,

Any suggestions?

Thanks

On Wed, Feb 2, 2011 at 11:07 AM, linux newbie <linux.newbie79 at gmail.com> wrote:
> Hi,
>
> I developed one application that keeps on reading one frame of data
> from camera. If I connect MS Lifecam, I am getting USB disconnect
> event randomly. But this is not happening in Logitech versions of
> Camera.
>
> Has anyone came across this sort of issue? Is there any solution worth
> trying it?
>
> Thanks
>


From monkeyiq at users.sourceforge.net  Tue Feb  8 03:01:23 2011
From: monkeyiq at users.sourceforge.net (Ben Martin)
Date: Tue, 08 Feb 2011 12:01:23 +1000
Subject: [Linux-uvc-devel] Logitech C910 reliability
Message-ID: <1297130483.6973.47.camel@alkid.localdomain>

Hi,
  I recently updated from a generic uvc 640x480 camera to a Logitech
C910 (up to 1080p) camera. I learnt early on that the C910 likes to
chomp up the USB2.0 bandwidth so trying two cameras on the same bus is a
mistake, even at lower resolutions.

  The main problem I am having with the camera is that after a while it
fails to work. I am using mjpg-streamer-r63 to bounce the mjpeg stream
over the network. I restart mjpg_streamer every 5 seconds in a loop if
it exits and subsequent attempts at restarting fail to initialize the
uvc video source. Depending on kernel version I get 1, 2, or 7 days
before this happens. (2.6.33 = 2 day, 2.6.34 = 1 week, >2.6.34 = 1 day,
in particular 2.6.38 =~ 1 day). 

  Is there a recommended way to reset the usb bus / uvc driver? I've
tried a bunch of things in proc and sys but at the moment a system
reboot is the only way I have found to bring back video. Perhaps a good
candidate for the below if the usb controller is the cause?
http://www.ideasonboard.org/uvc/faq/

  Please let me know what information might be most useful in finding
this bug.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 198 bytes
Desc: This is a digitally signed message part
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110208/9c2ad48a/attachment.pgp>

From jp.francois at cynove.com  Tue Feb  8 16:13:56 2011
From: jp.francois at cynove.com (jean-philippe francois)
Date: Tue, 8 Feb 2011 16:13:56 +0100
Subject: [Linux-uvc-devel] UVC gadget : implementing setup
Message-ID: <AANLkTikrzikMHS_+FCuQQxFN4urZgBCyaQzW3V4ywqbx@mail.gmail.com>

Hi,

With the current uvc code, class specific setup request are redirected
to userspace.
However, in order to decode these request, userspace needs some information,
that are currently available in the gadget descriptor. Which is kernel code.

Let's take an example request :

bRequestType = 0xa1
bRequest = 0x87 (UVC_GET_DEF)
wValue = 0x200;
wIndex = 0x200;
wLength = 2;

wIndex is (UnitId | Interface)

Interface = 0 means control interface.
Now, to translate wValue into a CS (Control Selector Code), I need to map
UnitId to an entity type.

To do this, I can look in the driver/usb/gadget/webcam.c file, and
find the answer :
 UnitID = 2 means processing unit.

I can (and will) hardcode this mapping (UnitId = 2  <=> Processing Unit) in
my userspace setup request handling code.

But then I make a camera with two input unit, a selector unit,
and my userspace code is broken :(

What's the plan for future enhancement of this code ?

Jean-Philippe Fran?ois


From roylzuo at gmail.com  Thu Feb 10 14:14:27 2011
From: roylzuo at gmail.com (Roy Zuo)
Date: Thu, 10 Feb 2011 21:14:27 +0800
Subject: [Linux-uvc-devel] Upside down image for my webcam on ASUS UL30A
Message-ID: <20110210131427.GA5876@bender>

Hi,

I just bought a new ASUS UL30A which comes with a Suyin Corp webcam which shows
upside down images. After reading some uvcvideo documentation I find that the
only solution other than holding my computer upside-down is to ask for help
here.

Bellow is output from ``lsusb`` and ``dmidecode`` commands. Let me know if
anything else is needed to fix the problem. 

-------------------------------------------------------------------------

 *lsusb*

 Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
 Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
 Bus 003 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
 Bus 004 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
 Bus 005 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
 Bus 006 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
 Bus 007 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
 Bus 008 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
 Bus 001 Device 002: ID 064e:a136 Suyin Corp. Asus Integrated Webcam [CN031B]
 Bus 006 Device 002: ID 0461:4d22 Primax Electronics, Ltd

-------------------------------------------------------------------------

 *dmidecode*

# dmidecode 2.11
SMBIOS 2.5 present.
41 structures occupying 1867 bytes.
Table at 0x000FCCA0.

Handle 0x0000, DMI type 0, 24 bytes
BIOS Information
	Vendor: American Megatrends Inc.
	Version: 206    
	Release Date: 08/20/2009
	Address: 0xF0000
	Runtime Size: 64 kB
	ROM Size: 1024 kB
	Characteristics:
		ISA is supported
		PCI is supported
		PNP is supported
		BIOS is upgradeable
		BIOS shadowing is allowed
		ESCD support is available
		Boot from CD is supported
		Selectable boot is supported
		EDD is supported
		5.25"/1.2 MB floppy services are supported (int 13h)
		3.5"/720 kB floppy services are supported (int 13h)
		3.5"/2.88 MB floppy services are supported (int 13h)
		Print screen service is supported (int 5h)
		8042 keyboard services are supported (int 9h)
		Printer services are supported (int 17h)
		CGA/mono video services are supported (int 10h)
		ACPI is supported
		USB legacy is supported
		Smart battery is supported
		BIOS boot specification is supported
		Function key-initiated network boot is supported
		Targeted content distribution is supported
	BIOS Revision: 2.6
	Firmware Revision: 32.1

Handle 0x0001, DMI type 1, 27 bytes
System Information
	Manufacturer: ASUSTeK Computer Inc.        
	Product Name: UL30A               
	Version: 1.0       
	Serial Number: 101783840256        
	UUID: 8038DFAF-70A3-DE81-3C1C-90E6BA423822
	Wake-up Type: Power Switch
	SKU Number:                     
	Family:                     

Handle 0x0002, DMI type 2, 15 bytes
Base Board Information
	Manufacturer: ASUSTeK Computer Inc.        
	Product Name: UL30A     
	Version: 1.0       
	Serial Number: BSN12345678901234567
	Asset Tag: ATN12345678901234567
	Features:
		Board is a hosting board
		Board requires at least one daughter board
		Board is replaceable
	Location In Chassis: MIDDLE              
	Chassis Handle: 0x0003
	Type: Motherboard
	Contained Object Handles: 0

Handle 0x0003, DMI type 3, 21 bytes
Chassis Information
	Manufacturer: ASUSTeK Computer Inc.        
	Type: Notebook
	Lock: Not Present
	Version: 1.0       
	Serial Number: CSN12345678901234567
	Asset Tag: ATN12345678901234567
	Boot-up State: Safe
	Power Supply State: Safe
	Thermal State: Other
	Security Status: Other
	OEM Information: 0x00000000
	Height: Unspecified
	Number Of Power Cords: 1
	Contained Elements: 0

Handle 0x0004, DMI type 4, 40 bytes
Processor Information
	Socket Designation: Socket 478
	Type: Central Processor
	Family: Other
	Manufacturer: Intel            
	ID: 7A 06 01 00 FF FB EB BF
	Version: Genuine Intel(R) CPU U7300 @ 1.30GHz                
	Voltage: 1.0 V
	External Clock: 200 MHz
	Max Speed: 1300 MHz
	Current Speed: 1300 MHz
	Status: Populated, Enabled
	Upgrade: Socket 478
	L1 Cache Handle: 0x0005
	L2 Cache Handle: 0x0007
	L3 Cache Handle: Not Provided
	Serial Number: PSN12345678901234567
	Asset Tag: PATN1234567890123456
	Part Number: PPN12345678901234567
	Core Count: 2
	Core Enabled: 2
	Thread Count: 2
	Characteristics:
		64-bit capable

Handle 0x0005, DMI type 7, 19 bytes
Cache Information
	Socket Designation: L1-Cache
	Configuration: Enabled, Not Socketed, Level 1
	Operational Mode: Write Back
	Location: Internal
	Installed Size: 64 kB
	Maximum Size: 64 kB
	Supported SRAM Types:
		Other
	Installed SRAM Type: Other
	Speed: Unknown
	Error Correction Type: Single-bit ECC
	System Type: Data
	Associativity: 8-way Set-associative

Handle 0x0006, DMI type 7, 19 bytes
Cache Information
	Socket Designation: L1-Cache
	Configuration: Enabled, Not Socketed, Level 1
	Operational Mode: Write Back
	Location: Internal
	Installed Size: 64 kB
	Maximum Size: 64 kB
	Supported SRAM Types:
		Other
	Installed SRAM Type: Other
	Speed: Unknown
	Error Correction Type: Single-bit ECC
	System Type: Instruction
	Associativity: 8-way Set-associative

Handle 0x0007, DMI type 7, 19 bytes
Cache Information
	Socket Designation: L2-Cache
	Configuration: Enabled, Not Socketed, Level 2
	Operational Mode: Write Back
	Location: Internal
	Installed Size: 3072 kB
	Maximum Size: 3072 kB
	Supported SRAM Types:
		Other
	Installed SRAM Type: Other
	Speed: Unknown
	Error Correction Type: Single-bit ECC
	System Type: Unified
	Associativity: Other

Handle 0x0008, DMI type 8, 9 bytes
Port Connector Information
	Internal Reference Designator: J3401
	Internal Connector Type: None
	External Reference Designator: LAN
	External Connector Type: RJ-45
	Port Type: Network Port

Handle 0x0009, DMI type 8, 9 bytes
Port Connector Information
	Internal Reference Designator: J4501
	Internal Connector Type: None
	External Reference Designator: VGA
	External Connector Type: DB-15 female
	Port Type: Video Port

Handle 0x000A, DMI type 8, 9 bytes
Port Connector Information
	Internal Reference Designator: J5201
	Internal Connector Type: None
	External Reference Designator: USB1
	External Connector Type: Access Bus (USB)
	Port Type: USB

Handle 0x000B, DMI type 8, 9 bytes
Port Connector Information
	Internal Reference Designator: J5201
	Internal Connector Type: None
	External Reference Designator: USB2
	External Connector Type: Access Bus (USB)
	Port Type: USB

Handle 0x000C, DMI type 8, 9 bytes
Port Connector Information
	Internal Reference Designator: J4800
	Internal Connector Type: None
	External Reference Designator: HDMI
	External Connector Type: Other
	Port Type: Other

Handle 0x000D, DMI type 8, 9 bytes
Port Connector Information
	Internal Reference Designator: J5101
	Internal Connector Type: None
	External Reference Designator: SATA 1
	External Connector Type: SAS/SATA Plug Receptacle
	Port Type: SATA

Handle 0x000E, DMI type 8, 9 bytes
Port Connector Information
	Internal Reference Designator: J4202
	Internal Connector Type: None
	External Reference Designator: FlashCard
	External Connector Type: Other
	Port Type: Other

Handle 0x000F, DMI type 8, 9 bytes
Port Connector Information
	Internal Reference Designator: J4301
	Internal Connector Type: None
	External Reference Designator: ExpressCard
	External Connector Type: Other
	Port Type: Other

Handle 0x0010, DMI type 8, 9 bytes
Port Connector Information
	Internal Reference Designator: J6601
	Internal Connector Type: None
	External Reference Designator: eSATA
	External Connector Type: SAS/SATA Plug Receptacle
	Port Type: SATA

Handle 0x0011, DMI type 8, 9 bytes
Port Connector Information
	Internal Reference Designator: J3703
	Internal Connector Type: None
	External Reference Designator: Audio Out
	External Connector Type: Mini Jack (headphones)
	Port Type: Audio Port

Handle 0x0012, DMI type 8, 9 bytes
Port Connector Information
	Internal Reference Designator: J3801
	Internal Connector Type: None
	External Reference Designator: Mic In
	External Connector Type: Mini Jack (headphones)
	Port Type: Audio Port

Handle 0x0013, DMI type 8, 9 bytes
Port Connector Information
	Internal Reference Designator: J2502
	Internal Connector Type: None
	External Reference Designator: USB3
	External Connector Type: Access Bus (USB)
	Port Type: USB

Handle 0x0014, DMI type 8, 9 bytes
Port Connector Information
	Internal Reference Designator: J4203
	Internal Connector Type: None
	External Reference Designator: 1394
	External Connector Type: IEEE 1394
	Port Type: Firewire (IEEE P1394)

Handle 0x0015, DMI type 8, 9 bytes
Port Connector Information
	Internal Reference Designator: J5401
	Internal Connector Type: None
	External Reference Designator: DockPort
	External Connector Type: Other
	Port Type: Other

Handle 0x0016, DMI type 9, 13 bytes
System Slot Information
	Designation: PCIE1
	Type: x1 PCI Express
	Current Usage: In Use
	Length: Short
	ID: 0
	Characteristics:
		3.3 V is provided
		PME signal is supported

Handle 0x0017, DMI type 9, 13 bytes
System Slot Information
	Designation: PCIE2
	Type: x1 PCI Express
	Current Usage: Available
	Length: Short
	ID: 1
	Characteristics:
		3.3 V is provided
		PME signal is supported

Handle 0x0018, DMI type 9, 13 bytes
System Slot Information
	Designation: PCIE3
	Type: x1 PCI Express
	Current Usage: Available
	Length: Short
	ID: 2
	Characteristics:
		3.3 V is provided
		PME signal is supported

Handle 0x0019, DMI type 9, 13 bytes
System Slot Information
	Designation: PCIE4
	Type: x1 PCI Express
	Current Usage: Available
	Length: Short
	ID: 3
	Characteristics:
		3.3 V is provided
		PME signal is supported

Handle 0x001A, DMI type 10, 6 bytes
On Board Device Information
	Type: Video
	Status: Enabled
	Description:  UMA

Handle 0x001B, DMI type 10, 6 bytes
On Board Device Information
	Type: Ethernet
	Status: Enabled
	Description:  NIC

Handle 0x001C, DMI type 10, 6 bytes
On Board Device Information
	Type: Sound
	Status: Enabled
	Description:  Audio Codec

Handle 0x001D, DMI type 10, 6 bytes
On Board Device Information
	Type: SATA Controller
	Status: Enabled
	Description:  SATA Controller

Handle 0x001E, DMI type 10, 6 bytes
On Board Device Information
	Type: Other
	Status: Enabled
	Description:  1394/FlashCardReader

Handle 0x001F, DMI type 13, 22 bytes
BIOS Language Information
	Language Description Format: Abbreviated
	Installable Languages: 1
		en|US|iso8859-1
	Currently Installed Language: en|US|iso8859-1

Handle 0x0020, DMI type 16, 15 bytes
Physical Memory Array
	Location: System Board Or Motherboard
	Use: System Memory
	Error Correction Type: None
	Maximum Capacity: 8 GB
	Error Information Handle: Not Provided
	Number Of Devices: 2

Handle 0x0021, DMI type 19, 15 bytes
Memory Array Mapped Address
	Starting Address: 0x00000000000
	Ending Address: 0x000FFFFFFFF
	Range Size: 4 GB
	Physical Array Handle: 0x0020
	Partition Width: 4

Handle 0x0022, DMI type 17, 27 bytes
Memory Device
	Array Handle: 0x0020
	Error Information Handle: Not Provided
	Total Width: 64 bits
	Data Width: 64 bits
	Size: 2048 MB
	Form Factor: SODIMM
	Set: None
	Locator: SODIMM0
	Bank Locator: BANK0
	Type: Other
	Type Detail: Synchronous
	Speed: 800 MHz
	Manufacturer: N/A                           
	Serial Number: N/A                           
	Asset Tag: N/A                           
	Part Number: N/A                           

Handle 0x0023, DMI type 20, 19 bytes
Memory Device Mapped Address
	Starting Address: 0x00000000000
	Ending Address: 0x0007FFFFFFF
	Range Size: 2 GB
	Physical Device Handle: 0x0022
	Memory Array Mapped Address Handle: 0x0021
	Partition Row Position: Unknown
	Interleave Position: Unknown
	Interleaved Data Depth: Unknown

Handle 0x0024, DMI type 17, 27 bytes
Memory Device
	Array Handle: 0x0020
	Error Information Handle: Not Provided
	Total Width: 64 bits
	Data Width: 64 bits
	Size: 2048 MB
	Form Factor: SODIMM
	Set: None
	Locator: SODIMM1
	Bank Locator: BANK1
	Type: Other
	Type Detail: Synchronous
	Speed: 800 MHz
	Manufacturer: N/A                           
	Serial Number: N/A                           
	Asset Tag: N/A                           
	Part Number: N/A                           

Handle 0x0025, DMI type 20, 19 bytes
Memory Device Mapped Address
	Starting Address: 0x00080000000
	Ending Address: 0x000FFFFFFFF
	Range Size: 2 GB
	Physical Device Handle: 0x0024
	Memory Array Mapped Address Handle: 0x0021
	Partition Row Position: Unknown
	Interleave Position: Unknown
	Interleaved Data Depth: Unknown

Handle 0x0026, DMI type 22, 26 bytes
Portable Battery
	Location: In the back
	Manufacturer: AS176OC2KF
	Manufacture Date: 09/08/06
	Serial Number: A200
	Name: UL50-56         
	Chemistry: Other
	Design Capacity: 5600 mWh
	Design Voltage: 15000 mV
	SBDS Version: SMART Ver 0123
	Maximum Error: Unknown
	OEM-specific Information: 0x00000000

Handle 0x0027, DMI type 200, 27 bytes
OEM-specific Type
	Header and Data:
		C8 1B 27 00 01 02 03 00 00 00 00 00 00 00 00 00
		00 00 00 00 00 00 00 00 00 00 00
	Strings:
		ASUSTeK Computer Inc.        
		Notebook  
		1.0       

Handle 0x0028, DMI type 127, 4 bytes
End Of Table
-------------------------------------------------------------------------


Thank you very much because I do not want my friends to see me hanging like a
bat all the time. :)

Regards, 

Roy
-- 
 _____________________________________________________________________ 
/ If you want your spouse to listen and pay strict attention to every \
\ word you say, talk in your sleep.                                   /
 --------------------------------------------------------------------- 
       \   ,__,
        \  (oo)____
           (__)    )\
              ||--|| *


From ducktayp at gmail.com  Fri Feb 11 09:02:34 2011
From: ducktayp at gmail.com (Duck Tayp)
Date: Fri, 11 Feb 2011 03:02:34 -0500
Subject: [Linux-uvc-devel] Microsoft Lifecam Studio (045e:0772) appears to
	work
Message-ID: <4D54ED1A.8080606@gmail.com>

Just tested the Microsoft Lifecam Studio; it works out of the box on
Ubuntu 10.10 (both video and microphone worked perfectly). I tested
using cheese, camorama and skype. Attached is the output of lsusb -v -d
045e:0772.

One thing I did notice is that when I run v4l2ucp, the "Exposure,Auto"
setting has four modes (Auto, Manual, Shutter Priority and Aperture
Priority) but only Manual and Aperture Priority work (the other two
result in a dialog saying "Unable to set Exposure,Auto; input/output
error". I'm not sure this is the driver's fault though.

In any case, many thanks to the developers of the linux UVC drivers for
your excellent work.


-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: lsusboutput.txt
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110211/9d96049e/attachment.txt>

From asmaa.elassal.student at pua.edu.eg  Fri Feb 11 17:30:32 2011
From: asmaa.elassal.student at pua.edu.eg (modysama)
Date: Fri, 11 Feb 2011 16:30:32 +0000 (UTC)
Subject: [Linux-uvc-devel] WebCam configuration on Kubuntu 10.10
Message-ID: <loom.20110211T170158-928@post.gmane.org>

I use Genius FaceCam 312 doesn't correctly work on Kubuntu 10.10 .
Kerenl: 2.6.35-25 generic
Laptop: HP pro-book 4520s
Once trying skype test camera , Kopete, cheese or ekiga the camera's
led lights without any response no output is appeared.


- However, that camera is supported for linux kernel 2.6.21 above .
- I tried to fix the bandwidth by the following two commands :

sudo rmmod uvcvideo
sudo modprobe uvcvideo quirks=128

But still the probelm.

for a more permanent fix I created the following file:
/etc/modprobe.d/uvcvideo.conf
and I add the following line:
options uvcvideo quirks=128

modysama at ubuntu:~$ cheese
libv4l2: error turning on stream: No space left on device

I recently tried the webcam on another laptop:
mini Hp laptop.
with the same kernel.
It works too out of box on every software.

------------------------------------------------------------------------
sok at sok-HP-ProBook-4520s:~$ dmesg | tail
[ 9014.027823] HP WMI: Unknown response received
[11532.813381] usb 2-1.1: new full speed USB device using ehci_hcd
and address 3
[11533.036563] uvcvideo: Found UVC 1.00 device FaceCam 312(0458:7076)
[11533.036570] uvcvideo: Forcing device quirks to 0x80 by module 
parameter-for testing purpose.
[11533.036576] uvcvideo: Please report required quirks to the
linux-uvc-devel mailing list.
[11533.051169] input: FaceCam 312 as /devices/pci0000:00/0000:00:1
d.0/usb2/2-1/2-1.1/2-1.1:1.0/input/input12
[11533.386733] usbcore: registered new interface driver snd-usb-audio
[14869.857110] HP WMI: Unknown response received
[15692.956427] show_signal_msg: 9 callbacks suppressed
[15692.956437] xawtv.bin[29033]: segfault at 0 ip 0106d770 sp bfe12bf8
error 4 in libc-2.12.1.so[ff9000+157000]
---------------------------------------------------------------------------

I am in need to help,
what is the resone of the problem ?





From monkeyiq at users.sourceforge.net  Fri Feb 11 23:41:36 2011
From: monkeyiq at users.sourceforge.net (Ben Martin)
Date: Sat, 12 Feb 2011 08:41:36 +1000
Subject: [Linux-uvc-devel] Logitech C910 reliability
In-Reply-To: <1297130483.6973.47.camel@alkid.localdomain>
References: <1297130483.6973.47.camel@alkid.localdomain>
Message-ID: <1297464096.6973.86.camel@alkid.localdomain>

OK,
  After the camera dies, I get 
ERROR opening V4L interface: Cannot send after transport endpoint
shutdown
 Init v4L2 failed !! exit fatal 
 i: init_VideoIn failed
when trying to use it and dmesg shows
ehci_hcd 0000:00:10.3: force halt; handshake f7c26014 00004000 00000000
-> -110

So I assume there is something there that the kernel doesn't like with
the usb bus and shuts things down. Is there is any other info which
might help that I can try to get?

Also, any way to reset the usb bus?


On Tue, 2011-02-08 at 12:01 +1000, Ben Martin wrote:
> Hi,
>   I recently updated from a generic uvc 640x480 camera to a Logitech
> C910 (up to 1080p) camera. I learnt early on that the C910 likes to
> chomp up the USB2.0 bandwidth so trying two cameras on the same bus is a
> mistake, even at lower resolutions.
> 
>   The main problem I am having with the camera is that after a while it
> fails to work. I am using mjpg-streamer-r63 to bounce the mjpeg stream
> over the network. I restart mjpg_streamer every 5 seconds in a loop if
> it exits and subsequent attempts at restarting fail to initialize the
> uvc video source. Depending on kernel version I get 1, 2, or 7 days
> before this happens. (2.6.33 = 2 day, 2.6.34 = 1 week, >2.6.34 = 1 day,
> in particular 2.6.38 =~ 1 day). 
> 
>   Is there a recommended way to reset the usb bus / uvc driver? I've
> tried a bunch of things in proc and sys but at the moment a system
> reboot is the only way I have found to bring back video. Perhaps a good
> candidate for the below if the usb controller is the cause?
> http://www.ideasonboard.org/uvc/faq/
> 
>   Please let me know what information might be most useful in finding
> this bug.
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 198 bytes
Desc: This is a digitally signed message part
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110212/c851eaa5/attachment.pgp>

From pj.assis at gmail.com  Sat Feb 12 00:33:54 2011
From: pj.assis at gmail.com (Paulo Assis)
Date: Fri, 11 Feb 2011 23:33:54 +0000
Subject: [Linux-uvc-devel] WebCam configuration on Kubuntu 10.10
In-Reply-To: <loom.20110211T170158-928@post.gmane.org>
References: <loom.20110211T170158-928@post.gmane.org>
Message-ID: <AANLkTik8J6yr-CDk=PPwraJv5eZE_Yb9ETs4c7STNJcm@mail.gmail.com>

Hi,
> [11532.813381] usb 2-1.1: new full speed USB device using ehci_hcd

Are you connecting your camera to a usb1.1 port ?

The camera should be detected as a High Speed device.
check the difference here:
http://www.photoxels.com/article-usb-2.0-high-speed-vs-full-speed.html

Regards,
Paulo

2011/2/11 modysama <asmaa.elassal.student at pua.edu.eg>:
> I use Genius FaceCam 312 doesn't correctly work on Kubuntu 10.10 .
> Kerenl: 2.6.35-25 generic
> Laptop: HP pro-book 4520s
> Once trying skype test camera , Kopete, cheese or ekiga the camera's
> led lights without any response no output is appeared.
>
>
> - However, that camera is supported for linux kernel 2.6.21 above .
> - I tried to fix the bandwidth by the following two commands :
>
> sudo rmmod uvcvideo
> sudo modprobe uvcvideo quirks=128
>
> But still the probelm.
>
> for a more permanent fix I created the following file:
> /etc/modprobe.d/uvcvideo.conf
> and I add the following line:
> options uvcvideo quirks=128
>
> modysama at ubuntu:~$ cheese
> libv4l2: error turning on stream: No space left on device
>
> I recently tried the webcam on another laptop:
> mini Hp laptop.
> with the same kernel.
> It works too out of box on every software.
>
> ------------------------------------------------------------------------
> sok at sok-HP-ProBook-4520s:~$ dmesg | tail
> [ 9014.027823] HP WMI: Unknown response received
> [11532.813381] usb 2-1.1: new full speed USB device using ehci_hcd
> and address 3
> [11533.036563] uvcvideo: Found UVC 1.00 device FaceCam 312(0458:7076)
> [11533.036570] uvcvideo: Forcing device quirks to 0x80 by module
> parameter-for testing purpose.
> [11533.036576] uvcvideo: Please report required quirks to the
> linux-uvc-devel mailing list.
> [11533.051169] input: FaceCam 312 as /devices/pci0000:00/0000:00:1
> d.0/usb2/2-1/2-1.1/2-1.1:1.0/input/input12
> [11533.386733] usbcore: registered new interface driver snd-usb-audio
> [14869.857110] HP WMI: Unknown response received
> [15692.956427] show_signal_msg: 9 callbacks suppressed
> [15692.956437] xawtv.bin[29033]: segfault at 0 ip 0106d770 sp bfe12bf8
> error 4 in libc-2.12.1.so[ff9000+157000]
> ---------------------------------------------------------------------------
>
> I am in need to help,
> what is the resone of the problem ?
>
>
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From asmaa.elassal.student at pua.edu.eg  Sat Feb 12 13:21:55 2011
From: asmaa.elassal.student at pua.edu.eg (modysama)
Date: Sat, 12 Feb 2011 12:21:55 +0000 (UTC)
Subject: [Linux-uvc-devel] WebCam configuration on Kubuntu 10.10
References: <loom.20110211T170158-928@post.gmane.org>
	<AANLkTik8J6yr-CDk=PPwraJv5eZE_Yb9ETs4c7STNJcm@mail.gmail.com>
Message-ID: <loom.20110212T132127-859@post.gmane.org>

Paulo Assis <pj.assis <at> gmail.com> writes:

> 
> Hi,
> > [11532.813381] usb 2-1.1: new full speed USB device using ehci_hcd
> 
> Are you connecting your camera to a usb1.1 port ?
> 
> The camera should be detected as a High Speed device.
> check the difference here:
> http://www.photoxels.com/article-usb-2.0-high-speed-vs-full-speed.html
> 
> Regards,
> Paulo
> 
Hi,
My hp probook contain 3 USB 2.0 ports, which I connect the webcam to.
what is the problem,please?







From x.luke at ymail.com  Sun Feb  6 16:22:46 2011
From: x.luke at ymail.com (Luke X.)
Date: Sun, 6 Feb 2011 07:22:46 -0800 (PST)
Subject: [Linux-uvc-devel] Logitech C310 and MJPEG won't work - a kernel
	bug?
Message-ID: <708949.40424.qm@web113716.mail.gq1.yahoo.com>

Yet I think I managed to make it work (it's not a module, but built directly into the kernel).

Please find a trace file attached. A started monitoring, then ran "fswebcam -v" and when it finished I killed usbmon sniffing. Did this on my 64bit box.

Thanks,
Luke


--- On Sun, 2/6/11, Oliver Neukum <oliver at neukum.org> wrote:

From: Oliver Neukum <oliver at neukum.org>
Subject: Re: [Linux-uvc-devel] Logitech C310 and MJPEG won't work - a kernel bug?
To: linux-uvc-devel at lists.berlios.de, anaumov at suse.de
Cc: "Luke X." <x.luke at ymail.com>
Date: Sunday, February 6, 2011, 8:56 AM

Am Sonntag, 6. Februar 2011, 05:57:50 schrieb Luke X.:
> Hello,
> 
> I have 2 identical Logitech C310 webcams and 2 different Linux boxes (Ubuntu Karmic 64bit, 2.6.31 AND Ubuntu Lucid 32bit, 2.6.32). None of the combinations can save jpegs directly from the camera. I always get the same error which I am starting to believe comes straight from the kernel (many different programs I've tried give the same error message). For instance:

> --- Capturing frame...
> fswc_verify_jpeg_dht,420: Inserting DHT segment into JPEG frame.
> Corrupt JPEG data: 1 extraneous bytes before marker 0xd1
> Captured frame in 0.00 seconds.
> --- Processing captured image...
> There are unsaved changes to the image.
> 
> The line with error is:
> Corrupt JPEG data: 1 extraneous bytes before marker 0xd1
> 
> Any hope to make it work? Please let me know if you need more data. I've used Linux for years but I am no driver/module/kernel expert.

It would be easiest to get an usbmon trace to verify that the camera
indeed does provide an extra byte before marker 0xd1.

??? Regards
??? ??? Oliver



      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110206/e2363cdc/attachment.html>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: c310-cam.txt
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110206/e2363cdc/attachment.txt>

From ubuntu at goatnetwork.com  Sat Feb 12 23:50:24 2011
From: ubuntu at goatnetwork.com (ubuntu at goatnetwork.com)
Date: Sat, 12 Feb 2011 14:50:24 -0800
Subject: [Linux-uvc-devel] [new cam] Success with Rosewill RCM-8163
Message-ID: <20110212225024.GF18245@beaver.dehavilland>

Greetings,

$ lsusb
Bus 001 Device 034: ID 0c45:62e0 Microdia MSI Starcam Racer

$ uname -a
Linux host 2.6.35-25-generic #44-Ubuntu SMP Fri Jan 21 17:40:48 UTC 2011 i686 GNU/Linux

Built-in microphone works over USB.

Cheers,
Brian


From asmaa.elassal.student at pua.edu.eg  Sun Feb 13 15:33:49 2011
From: asmaa.elassal.student at pua.edu.eg (asmaa)
Date: Sun, 13 Feb 2011 14:33:49 +0000 (UTC)
Subject: [Linux-uvc-devel] WebCam configuration on Kubuntu 10.10
References: <loom.20110211T170158-928@post.gmane.org>
	<AANLkTik8J6yr-CDk=PPwraJv5eZE_Yb9ETs4c7STNJcm@mail.gmail.com>
	<loom.20110212T132127-859@post.gmane.org>
Message-ID: <loom.20110213T153200-408@post.gmane.org>

I am in need to help please, sir.
I have been more than month ago in that problem searching and trying no effect.



From laurent.pinchart at ideasonboard.com  Tue Feb 15 18:38:14 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Tue, 15 Feb 2011 18:38:14 +0100
Subject: [Linux-uvc-devel] WebCam configuration on Kubuntu 10.10
In-Reply-To: <loom.20110211T170158-928@post.gmane.org>
References: <loom.20110211T170158-928@post.gmane.org>
Message-ID: <201102151838.14939.laurent.pinchart@ideasonboard.com>

Hi,

On Friday 11 February 2011 17:30:32 modysama wrote:
> I use Genius FaceCam 312 doesn't correctly work on Kubuntu 10.10 .

Please post the output of

lsusb -v -d 0458:7076

running as root if possible.

> Kerenl: 2.6.35-25 generic
> Laptop: HP pro-book 4520s
> Once trying skype test camera , Kopete, cheese or ekiga the camera's
> led lights without any response no output is appeared.
> 
> 
> - However, that camera is supported for linux kernel 2.6.21 above .
> - I tried to fix the bandwidth by the following two commands :
> 
> sudo rmmod uvcvideo
> sudo modprobe uvcvideo quirks=128
> 
> But still the probelm.
> 
> for a more permanent fix I created the following file:
> /etc/modprobe.d/uvcvideo.conf
> and I add the following line:
> options uvcvideo quirks=128
> 
> modysama at ubuntu:~$ cheese
> libv4l2: error turning on stream: No space left on device

Do you get the exact same error with the other software you've tested ? What 
about luvcview ?

> I recently tried the webcam on another laptop:
> mini Hp laptop.
> with the same kernel.
> It works too out of box on every software.

Do you mean that it works on the other laptop but not with yours ?

> ------------------------------------------------------------------------
> sok at sok-HP-ProBook-4520s:~$ dmesg | tail
> [ 9014.027823] HP WMI: Unknown response received
> [11532.813381] usb 2-1.1: new full speed USB device using ehci_hcd
> and address 3

I'm not sure if it's related, but your camera seems to be a full-speed device, 
not a high-speed device.

> [11533.036563] uvcvideo: Found UVC 1.00 device FaceCam 312(0458:7076)
> [11533.036570] uvcvideo: Forcing device quirks to 0x80 by module
> parameter-for testing purpose.
> [11533.036576] uvcvideo: Please report required quirks to the
> linux-uvc-devel mailing list.
> [11533.051169] input: FaceCam 312 as /devices/pci0000:00/0000:00:1
> d.0/usb2/2-1/2-1.1/2-1.1:1.0/input/input12
> [11533.386733] usbcore: registered new interface driver snd-usb-audio
> [14869.857110] HP WMI: Unknown response received
> [15692.956427] show_signal_msg: 9 callbacks suppressed
> [15692.956437] xawtv.bin[29033]: segfault at 0 ip 0106d770 sp bfe12bf8
> error 4 in libc-2.12.1.so[ff9000+157000]
> ---------------------------------------------------------------------------

-- 
Regards,

Laurent Pinchart


From r3pek at r3pek.org  Tue Feb 15 18:46:52 2011
From: r3pek at r3pek.org (Carlos Silva)
Date: Tue, 15 Feb 2011 16:46:52 -0100
Subject: [Linux-uvc-devel] HP Pavillion DV3 WebCam
In-Reply-To: <AANLkTimF0ucM69vHaSf7Dxu4-=0Mw1b63KSXnEm69xY1@mail.gmail.com>
References: <AANLkTimF0ucM69vHaSf7Dxu4-=0Mw1b63KSXnEm69xY1@mail.gmail.com>
Message-ID: <AANLkTinxAR=YQZB352AS4TnY3BO0LZVHpKX3qmY+ykTA@mail.gmail.com>

No help on this? :(

On Tue, Feb 1, 2011 at 23:32, Carlos Silva <r3pek at r3pek.org> wrote:

> Hi,
>
> I recently bought an HP Pavillion DV3 laptop that has an integrated webcam.
> After searching a while I found out that the webcam is an UVC webcam but it
> isn't on the list of supported cams.
>
> This is the usb entry of lsusb:
> Bus 002 Device 004: ID 174f:1118 Syntek
>
>
> I added the usb vendor + product id to the driver like this:
>          /* Syntek (HP Pavillion dv3) */
>         { .match_flags          = USB_DEVICE_ID_MATCH_DEVICE
>                                 | USB_DEVICE_ID_MATCH_INT_INFO,
>           .idVendor             = 0x174f,
>           .idProduct            = 0x1118,
>           .bInterfaceClass      = USB_CLASS_VIDEO,
>           .bInterfaceSubClass   = 1,
>           .bInterfaceProtocol   = 0,
>           .driver_info          = UVC_QUIRK_STREAM_NO_FID },
>
>
> The device is recognized by the driver:
> uvcvideo: Found UVC 1.00 device HP Webcam (174f:1118)
>
>
> Now I have a problem. When I try to use it, the "in use" led from the
> camera lights up, but software doesn't receive any image (stays black all
> the time).
> Here is my dmesg:
> uvcvideo: Failed to resubmit video URB (-1).
> uvcvideo: Trying format 0x56595559 (YUYV): 640x480.
> uvcvideo: Using default frame interval 41666.6 us (24.0 fps).
> uvcvideo: Setting frame interval to 1/24 (416666).
> uvcvideo: Trying format 0x56595559 (YUYV): 640x480.
> ^^ This last 2 lines repeat themself several times (the first one has got
> my attention but I don't know what's the problem)
>
> Attached is a log of "guvcview" program starting and closing. After it
> starts, it starts printing the errors:
>  Could not grab image (select timeout): Resource temporarily unavailable
>  Could not grab image (select timeout): Resource temporarily unavailable
>  Could not grab image (select timeout): Resource temporarily unavailable
>  Could not grab image (select timeout): Resource temporarily unavailable
>  Could not grab image (select timeout): Resource temporarily unavailable
>
>
> Any pointers on how can I help getting this camera supported on the driver?
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110215/f11fba78/attachment.html>

From laurent.pinchart at ideasonboard.com  Tue Feb 15 19:24:39 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Tue, 15 Feb 2011 19:24:39 +0100
Subject: [Linux-uvc-devel] [new cam] Success with Rosewill RCM-8163
In-Reply-To: <20110212225024.GF18245@beaver.dehavilland>
References: <20110212225024.GF18245@beaver.dehavilland>
Message-ID: <201102151924.39314.laurent.pinchart@ideasonboard.com>

Hi,

On Saturday 12 February 2011 23:50:24 ubuntu at goatnetwork.com wrote:
> Greetings,
> 
> $ lsusb
> Bus 001 Device 034: ID 0c45:62e0 Microdia MSI Starcam Racer
> 
> $ uname -a
> Linux host 2.6.35-25-generic #44-Ubuntu SMP Fri Jan 21 17:40:48 UTC 2011
> i686 GNU/Linux
> 
> Built-in microphone works over USB.

Thanks for the report. Your camera is a rebranded MSI Starcam Racer. I've 
updated the website.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Tue Feb 15 19:33:40 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Tue, 15 Feb 2011 19:33:40 +0100
Subject: [Linux-uvc-devel] Microsoft Lifecam Studio (045e:0772) appears
	to work
In-Reply-To: <4D54ED1A.8080606@gmail.com>
References: <4D54ED1A.8080606@gmail.com>
Message-ID: <201102151933.40924.laurent.pinchart@ideasonboard.com>

Hi,

On Friday 11 February 2011 09:02:34 Duck Tayp wrote:
> Just tested the Microsoft Lifecam Studio; it works out of the box on
> Ubuntu 10.10 (both video and microphone worked perfectly). I tested
> using cheese, camorama and skype. Attached is the output of lsusb -v -d
> 045e:0772.

Thanks for the report. I've updated the supported devices list on the website.

> One thing I did notice is that when I run v4l2ucp, the "Exposure,Auto"
> setting has four modes (Auto, Manual, Shutter Priority and Aperture
> Priority) but only Manual and Aperture Priority work (the other two
> result in a dialog saying "Unable to set Exposure,Auto; input/output
> error". I'm not sure this is the driver's fault though.

It could be the driver's fault, I've added this to my TODO list :-)

> In any case, many thanks to the developers of the linux UVC drivers for
> your excellent work.

You're welcome.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Tue Feb 15 19:35:21 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Tue, 15 Feb 2011 19:35:21 +0100
Subject: [Linux-uvc-devel] Logitech C910 reliability
In-Reply-To: <1297464096.6973.86.camel@alkid.localdomain>
References: <1297130483.6973.47.camel@alkid.localdomain>
	<1297464096.6973.86.camel@alkid.localdomain>
Message-ID: <201102151935.21821.laurent.pinchart@ideasonboard.com>

Hi Ben,

On Friday 11 February 2011 23:41:36 Ben Martin wrote:
> OK,
>   After the camera dies, I get
> ERROR opening V4L interface: Cannot send after transport endpoint
> shutdown
>  Init v4L2 failed !! exit fatal
>  i: init_VideoIn failed
> when trying to use it and dmesg shows
> ehci_hcd 0000:00:10.3: force halt; handshake f7c26014 00004000 00000000
> -> -110
> 
> So I assume there is something there that the kernel doesn't like with
> the usb bus and shuts things down. Is there is any other info which
> might help that I can try to get?
> 
> Also, any way to reset the usb bus?

You should report this to the linux-usb mailing list. It's a low-level USB 
issue out of scope of the UVC driver.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Tue Feb 15 19:58:12 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Tue, 15 Feb 2011 19:58:12 +0100
Subject: [Linux-uvc-devel] uvcvideo problem when changing grab size in a
	WebCam SCB-0370N (Samsung SF510)
In-Reply-To: <4D3FF573.4000301@dit.upm.es>
References: <4D387ACA.9050800@dit.upm.es>
	<201101251654.42585.laurent.pinchart@ideasonboard.com>
	<4D3FF573.4000301@dit.upm.es>
Message-ID: <201102151958.12348.laurent.pinchart@ideasonboard.com>

Hi Gabriel,

On Wednesday 26 January 2011 11:20:35 Gabriel Huecas wrote:
> Hi Laurent,
> 
> thank you for your attention,
> 
> I enclose as a file the output of "lsusb -v -d 2232:1001" (a bit long).

You forgot to attach the files.

> There are nothing (in the execution of my program) printed in
> "/var/log/messages/".
> Also, the command "dmesg" gives no additional information ( I run it
> before executing my program and after it).  (anyway, I copy the last
> lines of dmesg) output:
> 
> [ 2909.989414] tun0: Disabled Privacy Extensions
> [ 2910.281249] nf_conntrack version 0.5.0 (16384 buckets, 65536 max)
> [ 2910.281749] CONFIG_NF_CT_ACCT is deprecated and will be removed soon.
> Please use
> [ 2910.281752] nf_conntrack.acct=1 kernel parameter, acct=1 nf_conntrack
> module option or
> [ 2910.281754] sysctl net.netfilter.nf_conntrack_acct=1 to enable it.
> [ 2928.462797] hda-intel: IRQ timing workaround is activated for card
> #0. Suggest a bigger bdl_pos_adj.
> 
> 
> BTW, I also enclose the output of my program (called "isabel_video")
> with debug information activated (which prints all ioctls send to the
> driver). There is a pretty good bunch of information, but the last grab
> size change is at line 788 (you can see other previous changes searching
> for the "setGrabSize" string).
> 
> The schema is:
> VIDIOC_STREAMOFF(mode=1)
> VIDIOC_REQBUFS (count=0,type=1,memory=1)        # CARE HERE: I introduce
> it because some drivers requires to ask
>                                                                            
>           # for zero buffer to release memory. # I found this idea came in
> the "lucview" program then, some VIDIOC_ENUM_FRAMESIZES to poll for gram
> sizes (again),
> VIDIOC_G_FMT      # get current values
> VIDIOC_TRY_FMT  # sanity check
> VIDIOC_S_FMT      # set the new values
> 
> finally,
> VIDIOC_REQBUFS(count=2,type=1,memory=1)
> VIDIOC_QUERYBUF(0, ...
> VIDIOC_QBUF(0, ...
> VIDIOC_QUERYBUF(1,...
> VIDIOC_QBUF(1,...
> VIDIOC_STREAMON(mode=1)
> 
> and no further evolution... Note that all ioctl return value >= 0 (are ok).

Is it the change of resolution that makes it hang, or is it the resolution ? 
What happen if you try to capture images in the problematic resolution with a 
test software such as yavta (git.ideasonboard.com) ?

> Should you need any further information, or something I can do at my
> laptop, just ask for it ,

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Tue Feb 15 20:06:30 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Tue, 15 Feb 2011 20:06:30 +0100
Subject: [Linux-uvc-devel] UVC gadget : implementing setup
In-Reply-To: <AANLkTikrzikMHS_+FCuQQxFN4urZgBCyaQzW3V4ywqbx@mail.gmail.com>
References: <AANLkTikrzikMHS_+FCuQQxFN4urZgBCyaQzW3V4ywqbx@mail.gmail.com>
Message-ID: <201102152006.31107.laurent.pinchart@ideasonboard.com>

Hi Jean-Philippe,

On Tuesday 08 February 2011 16:13:56 jean-philippe francois wrote:
> Hi,
> 
> With the current uvc code, class specific setup request are redirected
> to userspace.
> However, in order to decode these request, userspace needs some
> information, that are currently available in the gadget descriptor. Which
> is kernel code.
> 
> Let's take an example request :
> 
> bRequestType = 0xa1
> bRequest = 0x87 (UVC_GET_DEF)
> wValue = 0x200;
> wIndex = 0x200;
> wLength = 2;
> 
> wIndex is (UnitId | Interface)
> 
> Interface = 0 means control interface.
> Now, to translate wValue into a CS (Control Selector Code), I need to map
> UnitId to an entity type.
> 
> To do this, I can look in the driver/usb/gadget/webcam.c file, and
> find the answer :
>  UnitID = 2 means processing unit.
> 
> I can (and will) hardcode this mapping (UnitId = 2  <=> Processing Unit) in
> my userspace setup request handling code.
> 
> But then I make a camera with two input unit, a selector unit,
> and my userspace code is broken :(
> 
> What's the plan for future enhancement of this code ?

webcam.c is sample code only. For real-world applications you're supposed to 
write your own gadget driver than instanciates a UVC function, and develop a 
userspace application (which can be based on uvc-gadget - note the GPL license 
though) that matches your driver.

There's currently no plan to export the descriptors to the application. Do you 
think that would be useful ?

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Tue Feb 15 20:07:04 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Tue, 15 Feb 2011 20:07:04 +0100
Subject: [Linux-uvc-devel] MS Lifecam disconnect event
In-Reply-To: <AANLkTikzGL96pKUbBNvLhF79MZv_94UoFk0YPKOSsxEV@mail.gmail.com>
References: <AANLkTikzGL96pKUbBNvLhF79MZv_94UoFk0YPKOSsxEV@mail.gmail.com>
Message-ID: <201102152007.04506.laurent.pinchart@ideasonboard.com>

Hi,

On Wednesday 02 February 2011 01:07:41 linux newbie wrote:
> I developed one application that keeps on reading one frame of data
> from camera. If I connect MS Lifecam, I am getting USB disconnect
> event randomly. But this is not happening in Logitech versions of
> Camera.
> 
> Has anyone came across this sort of issue? Is there any solution worth
> trying it?

Kernel log ?

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Tue Feb 15 20:12:55 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Tue, 15 Feb 2011 20:12:55 +0100
Subject: [Linux-uvc-devel] Logitech C310 and MJPEG won't work - a kernel
	bug?
In-Reply-To: <708949.40424.qm@web113716.mail.gq1.yahoo.com>
References: <708949.40424.qm@web113716.mail.gq1.yahoo.com>
Message-ID: <201102152012.56123.laurent.pinchart@ideasonboard.com>

Hi,

On Sunday 06 February 2011 16:22:46 Luke X. wrote:
> Yet I think I managed to make it work (it's not a module, but built
> directly into the kernel).
> 
> Please find a trace file attached. A started monitoring, then ran "fswebcam
> -v" and when it finished I killed usbmon sniffing. Did this on my 64bit
> box.

The trace is in text format and doesn't contain the data, so it's not very 
useful. Can you capture a couple of raw MJPEG frames (with yavta from instance 
- git.ideasonboard.org) and send them for analysis ?

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Tue Feb 15 20:59:42 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Tue, 15 Feb 2011 20:59:42 +0100
Subject: [Linux-uvc-devel] unlisted webcam device
In-Reply-To: <loom.20110205T142136-946@post.gmane.org>
References: <1295304115.28471.23.camel@kira-main-XPS9000>
	<201101251649.25835.laurent.pinchart@ideasonboard.com>
	<loom.20110205T142136-946@post.gmane.org>
Message-ID: <201102152059.43175.laurent.pinchart@ideasonboard.com>

Hi,

On Saturday 05 February 2011 14:24:01 Mikko R wrote:
> Laurent Pinchart <laurent.pinchart <at> ideasonboard.com> writes:
> > Hi Ian,
> > 
> > On Monday 17 January 2011 23:41:55 Ian Macalinao wrote:
> > > 046d:0825
> > > 
> > > Logitech C270 webcam
> > 
> > Could you please send me the output of
> > 
> > lsusb -v -d 046d:0825
> > 
> > (run as root if possible) ?
> 
> Bus 001 Device 018: ID 046d:0825 Logitech, Inc.

[snip]

Thanks for the information. I've updated the supported devices list.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Tue Feb 15 21:20:56 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Tue, 15 Feb 2011 21:20:56 +0100
Subject: [Linux-uvc-devel] Problem with camera Aveo Technology Corp.
	USB2.0 Camera (1871:0d01)
In-Reply-To: <01b701cbc3e6$c1d5a690$4580f3b0$@cz>
References: <01b701cbc3e6$c1d5a690$4580f3b0$@cz>
Message-ID: <201102152120.56459.laurent.pinchart@ideasonboard.com>

Hi Milan,

On Thursday 03 February 2011 22:10:16 Milan Reiniger wrote:
> Hello,
> 
> I have usb camera Aveo Technology Corp. USB2.0 Camera (1871:0d01) and I
> connected it to RouterStationPro with OpenWrt 10.03RC4 (code name
> backfire). After connect this camera and run mjpg-streamer, camera not
> worked.

mjpg-streamer requires a camera that supports MJPEG in hardware. Your webcam 
supports YUV only.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Tue Feb 15 21:56:42 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Tue, 15 Feb 2011 21:56:42 +0100
Subject: [Linux-uvc-devel] How to test UVC gadget
In-Reply-To: <AANLkTi=DHjWAGzLAcyeroPX2p6RYTDF5qpYNmdCAkNat@mail.gmail.com>
References: <AANLkTi=DHjWAGzLAcyeroPX2p6RYTDF5qpYNmdCAkNat@mail.gmail.com>
Message-ID: <201102152156.42887.laurent.pinchart@ideasonboard.com>

Hi Jean-Philippe,

On Thursday 03 February 2011 15:16:46 jean-philippe francois wrote:
> Hi,
> 
> I am currently stuck with pre 2.6.35 kernel on my machine (DM365), but
> I would like to test
> the uvc gadget code.
> 
> I used the patch from september 2009 because it does not need the
> v4l2_event code.
> 
> How far is it from the "final" patch posted in April/May 2010 ?

I would really advice using the latest UVC gadget driver and backporting the 
V4L2 event support to 2.6.35. It shouldn't be too difficult.

> Any example code on the gadget side is welcome.

http://git.ideasonboard.org/?p=uvc-gadget.git;a=summary

The sample application uses the V4L2 events API though.

> I am used to writing V4L2 apps, but usually as a master when it comes to
> format setting, and decision when to start or stop streaming.
> Here the application should react to the Host orders, and I guess
> it is doable through the event part,
> but how does it work ?

Please have a look at the sample code.

> Here is my current idea of how it should work.
> 
> wait_for_event (using the special event IOCTL or the v4l2_event
> mechanism if available)
> on connection, or format negotiation
>   G_FMT to get resolution and format
>   buffer setup
>   STREAM_ON
>   loop
>      select
>      read event ???
>      QBUF
>      DQBUF


-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Tue Feb 15 22:06:37 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Tue, 15 Feb 2011 22:06:37 +0100
Subject: [Linux-uvc-devel] XU architecture
In-Reply-To: <AANLkTimSUUL4xybyjtiSG2GA-wE0F8kUW5RsU+5-SJPQ@mail.gmail.com>
References: <AANLkTimSUUL4xybyjtiSG2GA-wE0F8kUW5RsU+5-SJPQ@mail.gmail.com>
Message-ID: <201102152206.37356.laurent.pinchart@ideasonboard.com>

Hi Brent,

On Wednesday 02 February 2011 19:51:54 Brent Weatherall wrote:
> Hello.  I just want to clarify my understanding of the use of XUs in the
> Linux UVC driver.
> 
> When a device driver wishes to use an XU for a device, it must first add
> the XU descriptions (so to speak) to the standard Linux UVC driver.  The
> Linux kernel driver module (usbhid.ko for example) is indeed the layer
> this happens in, correct or no?

Not exactly.

XU descriptors contain (among other information) a list of controls supported 
by the device for that particular extension unit. As extension units are 
vendor-specific, the Linux UVC driver (uvcvideo.ko) doesn't know about those 
controls. It must be taught how to map those XU controls to V4L2 controls.

> I am working with a device that operates with the standard UVC interface
> and detects the proper XU additions automatically (which I am assuming is
> normal).  I have found if I unplug the device to reset it and plug it back
> in and then run the test application (which adds the XU controls every
> time) the device will time out.  If I leave the device plugged in it
> usually works, but it is not guaranteed.  To correct this I must restart
> my USB system completely (i.e. rmmod
> /lib/modules/2.6.35-22-generic/kernel/drivers/hid/usbhid/usbhid.ko, rmmod
> /lib/modules/2.6.35-22-generic/kernel/drivers/hid/hid.ko, insmod
> /lib/modules/2.6.35-22-generic/kernel/drivers/hid/hid.ko, insmod
> /lib/modules/2.6.35-22-generic/kernel/drivers/hid/usbhid/usbhid.ko).

usbhid has nothing to do with this. The UVC driver is uvcvideo.ko.

> From a driver standpoint, should I check for the presence of the XU
> controls and then only add them if they are not present?

There's not way to check from userspace if mappings have already been added. 
That's not a big issue, you can just add them, and the driver will return -
EEXIST if they're already present.

I'm working on making the mappings device-specific, so you will need to add 
them every time a device is plugged in.

> I would expect adding them every time should not cause the system to break
> down, but I could be wrong. Theoretically speaking, is this most likely a
> UVC problem, or most likely a device problem?  Again, just theoretically
> speaking.

It must definitely not break down. Whether it's a uvcvideo or device issue is 
hard to tell, you haven't really told me what goes wrong.

-- 
Regards,

Laurent Pinchart


From asmaa.elassal.student at pua.edu.eg  Tue Feb 15 22:12:09 2011
From: asmaa.elassal.student at pua.edu.eg (modysama)
Date: Tue, 15 Feb 2011 21:12:09 +0000 (UTC)
Subject: [Linux-uvc-devel] WebCam configuration on Kubuntu 10.10
References: <loom.20110211T170158-928@post.gmane.org>
	<201102151838.14939.laurent.pinchart@ideasonboard.com>
Message-ID: <loom.20110215T220410-379@post.gmane.org>

Laurent Pinchart <laurent.pinchart <at> ideasonboard.com> writes:

> 
> Hi,
> 
> On Friday 11 February 2011 17:30:32 modysama wrote:
> > I use Genius FaceCam 312 doesn't correctly work on Kubuntu 10.10 .
> 
> Please post the output of
> 
> lsusb -v -d 0458:7076
> 
> running as root if possible.
[CODE]root at sok-HP-ProBook-4520s:/home/sok# lsusb -v -d 0458:7076

Bus 002 Device 003: ID 0458:7076 KYE Systems Corp. (Mouse Systems) 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x0458 KYE Systems Corp. (Mouse Systems)
  idProduct          0x7076 
  bcdDevice            0.01
  iManufacturer           1 PixArt Imaging Inc.
  iProduct                2 FaceCam 312
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          735
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0 
      iFunction               2 FaceCam 312
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0 
      iInterface              2 FaceCam 312
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           77
        dwClockFrequency       12.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               4
        iTerminal               0 
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {f07735d1-898d-0047-812e-7dd5e2fdb898}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          3
        bControlSize            1
        bmControls( 0)       0xff
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0 
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000200
          Zoom (Absolute)
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000057f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Power Line Frequency
        iProcessing             0 
        bmVideoStandards     0x30
          NTSC - 625/50
          PAL - 525/60
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      VideoStreaming Interface Descriptor:
        bLength                            15
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                         2
        wTotalLength                      424
        bEndPointAddress                  129
        bmInfo                              0
        bTerminalLink                       2
        bStillCaptureMethod                 2
        bTriggerSupport                     1
        bTriggerUsage                       0
        bControlSize                        1
        bmaControls( 0)                    11
        bmaControls( 1)                    11
      VideoStreaming Interface Descriptor:
        bLength                            11
        bDescriptorType                    36
        bDescriptorSubtype                  6 (FORMAT_MJPEG)
        bFormatIndex                        1
        bNumFrameDescriptors                5
        bFlags                              1
          Fixed-size samples: Yes
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                  4915200
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                  1228800
        dwMaxBitRate                 36864000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   307200
        dwMaxBitRate                  9216000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                   405504
        dwMaxBitRate                 12165120
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                  1622016
        dwMaxBitRate                 48660480
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               5
        wWidth( 0)                        640
        wHeight( 0)                       480
        wWidth( 1)                        160
        wHeight( 1)                       120
        wWidth( 2)                        176
        wHeight( 2)                       144
        wWidth( 3)                        320
        wHeight( 3)                       240
        wWidth( 4)                        352
        wHeight( 4)                       288
        bNumCompressionPatterns             5
        bCompression( 0)                  100
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        2
        bNumFrameDescriptors                4
        guidFormat                            {59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                  1228800
        dwMaxBitRate                  7372800
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval        2000000
        bFrameIntervalType                  1
        dwFrameInterval( 0)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   307200
        dwMaxBitRate                  7680000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         500000
        bFrameIntervalType                  1
        dwFrameInterval( 0)            500000
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                   405504
        dwMaxBitRate                  6082560
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  1
        dwFrameInterval( 0)            666666
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                  1622016
        dwMaxBitRate                  6488064
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval        2500000
        bFrameIntervalType                  1
        dwFrameInterval( 0)           2500000
      VideoStreaming Interface Descriptor:
        bLength                            22
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               4
        wWidth( 0)                        320
        wHeight( 0)                       240
        wWidth( 1)                        160
        wHeight( 1)                       120
        wWidth( 2)                        176
        wHeight( 2)                       144
        wWidth( 3)                        352
        wHeight( 3)                       288
        bNumCompressionPatterns             4
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0300  1x 768 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0350  1x 848 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0380  1x 896 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x039f  1x 927 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       0 
      bFunctionProtocol       0 
      iFunction               4 FaceCam 312 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0 
      iInterface              4 FaceCam 312 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           38
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0 
        iTerminal               0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               5
        iTerminal               0 
      AudioControl Interface Descriptor:
        bLength                 8
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 5
        bSourceID               1
        bControlSize            1
        bmaControls( 0)      0x03
          Mute
          Volume
        iFeature                0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            1 Discrete
        tSamFreq[ 0]        48000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0060  1x 96 bytes
        bInterval               1
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Status:     0x0000
  (Bus Powered)[/CODE]
> 
> > Kerenl: 2.6.35-25 generic
> > Laptop: HP pro-book 4520s
> > Once trying skype test camera , Kopete, cheese or ekiga the camera's
> > led lights without any response no output is appeared.
> > 
> > 
> > - However, that camera is supported for linux kernel 2.6.21 above .
> > - I tried to fix the bandwidth by the following two commands :
> > 
> > sudo rmmod uvcvideo
> > sudo modprobe uvcvideo quirks=128
> > 
> > But still the probelm.
> > 
> > for a more permanent fix I created the following file:
> > /etc/modprobe.d/uvcvideo.conf
> > and I add the following line:
> > options uvcvideo quirks=128
> > 
> > modysama <at> ubuntu:~$ cheese
> > libv4l2: error turning on stream: No space left on device
> 
> Do you get the exact same error with the other software you've tested ? What 
> about luvcview ?
[B]root at sok-HP-ProBook-4520s:/home/sok# luvcview
luvcview 0.2.6

No protocol specified
No protocol specified
init kbd.
SDL information:
  Video driver: fbcon
  Hardware surfaces are available (4224k video memory)
Device information:
  Device path:  /dev/video0
Stream settings:
  Frame format: YUYV (MJPG is not supported by device)
  Frame size:   640x480
  Frame rate:   30 fps
Segmentation fault
root at sok-HP-ProBook-4520s:/home/sok# [/B]
> 
> > I recently tried the webcam on another laptop:
> > mini Hp laptop.
> > with the same kernel.
> > It works too out of box on every software.
> 
> Do you mean that it works on the other laptop but not with yours ?
[B]Yes, sir.[/B]
> 
> > ------------------------------------------------------------------------
> > sok <at> sok-HP-ProBook-4520s:~$ dmesg | tail
> > [ 9014.027823] HP WMI: Unknown response received
> > [11532.813381] usb 2-1.1: new full speed USB device using ehci_hcd
> > and address 3
> 
> I'm not sure if it's related, but your camera seems to be a full-speed device, 
> not a high-speed device.
[B]my Genius FaceCam 312 is USB 1.1 and my HP laptop USB port is 2.0.[/B]
> 
> > [11533.036563] uvcvideo: Found UVC 1.00 device FaceCam 312(0458:7076)
> > [11533.036570] uvcvideo: Forcing device quirks to 0x80 by module
> > parameter-for testing purpose.
> > [11533.036576] uvcvideo: Please report required quirks to the
> > linux-uvc-devel mailing list.
> > [11533.051169] input: FaceCam 312 as /devices/pci0000:00/0000:00:1
> > d.0/usb2/2-1/2-1.1/2-1.1:1.0/input/input12
> > [11533.386733] usbcore: registered new interface driver snd-usb-audio
> > [14869.857110] HP WMI: Unknown response received
> > [15692.956427] show_signal_msg: 9 callbacks suppressed
> > [15692.956437] xawtv.bin[29033]: segfault at 0 ip 0106d770 sp bfe12bf8
> > error 4 in libc-2.12.1.so[ff9000+157000]
> > ---------------------------------------------------------------------------
> 






From laurent.pinchart at ideasonboard.com  Wed Feb 16 00:03:35 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Wed, 16 Feb 2011 00:03:35 +0100
Subject: [Linux-uvc-devel] Missing Webcam in device list
In-Reply-To: <loom.20110127T180641-70@post.gmane.org>
References: <4D3D5AD6.2070301@desk2000.co.uk>
	<201101251703.03114.laurent.pinchart@ideasonboard.com>
	<loom.20110127T180641-70@post.gmane.org>
Message-ID: <201102160003.35403.laurent.pinchart@ideasonboard.com>

Hi Mark,

On Thursday 27 January 2011 18:10:15 Mark Muir wrote:
> > Could you please send me the output of
> > 
> > lsusb -v -d 5986:0314
> 
> Hi - I just landed on this thread from a web search, looking to resolve the
> I/O errors reported when attempting to use that same webcam (built into
> a MSI Wind U135DX netbook).
> 
> Here's the output of the above command:

[snip]

Thanks for the report.

-- 
Regards,

Laurent Pinchart


From pj.assis at gmail.com  Wed Feb 16 11:24:16 2011
From: pj.assis at gmail.com (Paulo Assis)
Date: Wed, 16 Feb 2011 10:24:16 +0000
Subject: [Linux-uvc-devel] HP Pavillion DV3 WebCam
In-Reply-To: <AANLkTinxAR=YQZB352AS4TnY3BO0LZVHpKX3qmY+ykTA@mail.gmail.com>
References: <AANLkTimF0ucM69vHaSf7Dxu4-=0Mw1b63KSXnEm69xY1@mail.gmail.com>
	<AANLkTinxAR=YQZB352AS4TnY3BO0LZVHpKX3qmY+ykTA@mail.gmail.com>
Message-ID: <AANLkTi=kXC5V4uARwM1YjY9rm4fPSJXALmiwrN8BK623@mail.gmail.com>

Carlos Hi,

2011/2/15 Carlos Silva <r3pek at r3pek.org>:
> No help on this? :(
>
> On Tue, Feb 1, 2011 at 23:32, Carlos Silva <r3pek at r3pek.org> wrote:
>>
>> Hi,
>> I recently bought an?HP Pavillion DV3 laptop that has an integrated
>> webcam. After searching a while I found out that the webcam is an UVC webcam
>> but it isn't on the list of supported cams.
>> This is the usb entry of lsusb:
>> Bus 002 Device 004: ID 174f:1118 Syntek
>>
>> I added the usb vendor + product id to the driver like this:
>> ?? ? ? ?/* Syntek (HP Pavillion dv3) */
>> ?? ? ? ?{ .match_flags ? ? ? ? ?= USB_DEVICE_ID_MATCH_DEVICE
>> ?? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?| USB_DEVICE_ID_MATCH_INT_INFO,
>> ?? ? ? ? ?.idVendor ? ? ? ? ? ? = 0x174f,
>> ?? ? ? ? ?.idProduct ? ? ? ? ? ?= 0x1118,
>> ?? ? ? ? ?.bInterfaceClass ? ? ?= USB_CLASS_VIDEO,
>> ?? ? ? ? ?.bInterfaceSubClass ? = 1,
>> ?? ? ? ? ?.bInterfaceProtocol ? = 0,
>> ?? ? ? ? ?.driver_info ? ? ? ? ?= UVC_QUIRK_STREAM_NO_FID },
>>

You shouldn't really need to add this, if you want to test driver
quirks just pass them when loading the driver module, in this case:

modprobe uvcvideo quirks=0x00000010

or for a permanent change just create /etc/modprobe.d/uvcvideo.conf
and add the following line:
options uvcvideo quirks=0x00000010

>> The device is recognized by the driver:
>> uvcvideo: Found UVC 1.00 device HP Webcam (174f:1118)
>>
>> Now I have a problem. When I try to use it, the "in use" led from the
>> camera lights up, but software doesn't receive any image (stays black all
>> the time).
>> Here is my dmesg:
>> uvcvideo: Failed to resubmit video URB (-1).
>> uvcvideo: Trying format 0x56595559 (YUYV): 640x480.
>> uvcvideo: Using default frame interval 41666.6 us (24.0 fps).
>> uvcvideo: Setting frame interval to 1/24 (416666).
>> uvcvideo: Trying format 0x56595559 (YUYV): 640x480.
>> ^^ This last 2 lines repeat themself several times (the first one has got
>> my attention but I don't know what's the problem)
>> Attached is a log of "guvcview" program starting and closing. After it
>> starts, it starts printing the errors:
>> ?Could not grab image (select timeout): Resource temporarily unavailable
>> ?Could not grab image (select timeout): Resource temporarily unavailable
>> ?Could not grab image (select timeout): Resource temporarily unavailable
>> ?Could not grab image (select timeout): Resource temporarily unavailable
>> ?Could not grab image (select timeout): Resource temporarily unavailable
>>
>> Any pointers on how can I help getting this camera supported on the
>> driver?
>


Did you try it without the quirk ? Not all syntek cameras require it:
http://lists.berlios.de/pipermail/linux-uvc-devel/2009-March/004705.html

also increasing the driver verbosity would be helpful, just add
trace=65535 to the driver options.

Regards,
Paulo


From barsnick at gmx.net  Wed Feb 16 13:38:38 2011
From: barsnick at gmx.net (Moritz Barsnick)
Date: Wed, 16 Feb 2011 13:38:38 +0100
Subject: [Linux-uvc-devel] yavta (Was: Re: uvcvideo problem when changing
 grab size in a WebCam SCB-0370N (Samsung SF510))
Message-ID: <20110216123838.GA25730@sunshine.barsnick.net>

On Tue, Feb 15, 2011 at 19:58:12 +0100, Laurent Pinchart wrote:
> What happen if you try to capture images in the problematic resolution with a 
> test software such as yavta (git.ideasonboard.com) ?

Wow, I wasn't aware of this neat little tool. It has so many
advantages:
- no SDL dependency like luvcview
- no big chunk of dependencies like guvcview (which is otherwise really
  great, especially since it's not restricted to UVC anymore)
- no age-old tool like those from the xawtv suite (which some distros
  don't package anymore).

Would it enumerate resolutions and frame rates like {l,g}uvcview do? (I
only tested on a TV V4L device, my webcam is blocked.)

Do you mind if I submit a patch or two for some things that came to
mind, notably error reporting?

Thanks,
Moritz


From xinglp at gmail.com  Thu Feb 17 05:01:14 2011
From: xinglp at gmail.com (xinglp)
Date: Thu, 17 Feb 2011 12:01:14 +0800
Subject: [Linux-uvc-devel] VIDIOC_G_PARM not get the correct fps
Message-ID: <AANLkTimuuVSssm50q5MBO37TCL+bKHE_8yYYHcOFh6cZ@mail.gmail.com>

Hi

I'm use "1c4f:3002 SiGma Micro", It's real fps is 25,but VIDIOC_G_PARM
 got a fps value of 30.
And in dark enviroment, It's  will fall to 12.5fps even 6fps  but
VIDIOC_G_PARM  still get 30fps.

My "1871:01f0 Aveo Technology Corp" has the same problem in dark.


                                                      Best wish


From xinglp at gmail.com  Thu Feb 17 05:06:44 2011
From: xinglp at gmail.com (xinglp)
Date: Thu, 17 Feb 2011 12:06:44 +0800
Subject: [Linux-uvc-devel] VIDIOC_G_PARM not get the correct fps
In-Reply-To: <AANLkTimuuVSssm50q5MBO37TCL+bKHE_8yYYHcOFh6cZ@mail.gmail.com>
References: <AANLkTimuuVSssm50q5MBO37TCL+bKHE_8yYYHcOFh6cZ@mail.gmail.com>
Message-ID: <AANLkTinrGiAvPtoUUCs9Bj4U2ro1E0zMo+5PXaERf3qx@mail.gmail.com>

is this the hardware issue?


From gabriel at dit.upm.es  Thu Feb 17 10:01:10 2011
From: gabriel at dit.upm.es (Gabriel Huecas)
Date: Thu, 17 Feb 2011 10:01:10 +0100
Subject: [Linux-uvc-devel] yavta (Was: Re: uvcvideo problem when
 changing grab size in a WebCam SCB-0370N (Samsung SF510))
In-Reply-To: <20110216123838.GA25730@sunshine.barsnick.net>
References: <20110216123838.GA25730@sunshine.barsnick.net>
Message-ID: <4D5CE3D6.6020408@dit.upm.es>


Dear Laurent, Moritz,

This is the output of my program, I think information is pretty clear, 
you may see that grab sizes are correctly detected (enclosed below).
The last messages are warnings trying to set YUV420P (I try this by 
default, but I can handle yuv422 as well, through libv4l2 and 
libv4lconvert),

The relevant lines is:

 >>  [2011/01/20 17:46:37] +++......grab sizes: 5 discrete values: 
640x480 352x288 320x240 176x144 160x120

(I request grab size for each pixelformat, maybe an overwork)

The sizes are correctly request. I can get this lines with DEBUG on, so 
each ioctl can be properly debugged, let me know if you need more 
information,

Thank you very much for your time and effort,

best regards

Gabriel Huecas

(relevant) OUTPUT of my video program:

[2011/01/20 17:46:37] v4lUnified: starting up
[2011/01/20 17:46:37] +++Open device: /dev/video0
[2011/01/20 17:46:37] +++v4l2 supported
[2011/01/20 17:46:37] +++
[2011/01/20 17:46:37] +++Description of device
[2011/01/20 17:46:37] +++=====================
[2011/01/20 17:46:37] +++device: WebCam SCB-0370N
[2011/01/20 17:46:37] +++driver: uvcvideo
[2011/01/20 17:46:37] +++version: 0.1.0
[2011/01/20 17:46:37] +++bus: usb-0000:00:1a.0-1.4
[2011/01/20 17:46:37] +++supports:
[2011/01/20 17:46:37] +++...V4L2_CAP_VIDEO_CAPTURE
[2011/01/20 17:46:37] +++...V4L2_CAP_STREAMING
[2011/01/20 17:46:37] +++..description for channel 0
[2011/01/20 17:46:37] +++....identifier: 0
[2011/01/20 17:46:37] +++....name    : Camera 1
[2011/01/20 17:46:37] +++....type    : CAMERA
[2011/01/20 17:46:37] +++....tuners    : 0
[2011/01/20 17:46:37] +++....flags    : 0x0
[2011/01/20 17:46:37] +++....audioset: 0
[2011/01/20 17:46:37] +++
[2011/01/20 17:46:37] +++..List of supported standards:
[2011/01/20 17:46:37] ---....NO video standard in use
[2011/01/20 17:46:37] +++
[2011/01/20 17:46:37] +++..List of controls:
[2011/01/20 17:46:37] +++...Brightness:
[2011/01/20 17:46:37] +++....id: 9963776:
[2011/01/20 17:46:37] +++....type: 1:
[2011/01/20 17:46:37] +++....name: Brightness:
[2011/01/20 17:46:37] +++....min: 0:
[2011/01/20 17:46:37] +++....max: 255:
[2011/01/20 17:46:37] +++....step: 1:
[2011/01/20 17:46:37] +++....default: 128:
[2011/01/20 17:46:37] +++....current: 127:
[2011/01/20 17:46:37] +++....flags: 0x0:
[2011/01/20 17:46:37] +++...Contrast:
[2011/01/20 17:46:37] +++....id: 9963777:
[2011/01/20 17:46:37] +++....type: 1:
[2011/01/20 17:46:37] +++....name: Contrast:
[2011/01/20 17:46:37] +++....min: 0:
[2011/01/20 17:46:37] +++....max: 127:
[2011/01/20 17:46:37] +++....step: 1:
[2011/01/20 17:46:37] +++....default: 35:
[2011/01/20 17:46:37] +++....current: 63:
[2011/01/20 17:46:37] +++....flags: 0x0:
[2011/01/20 17:46:37] +++...Saturation:
[2011/01/20 17:46:37] +++....id: 9963778:
[2011/01/20 17:46:37] +++....type: 1:
[2011/01/20 17:46:37] +++....name: Saturation:
[2011/01/20 17:46:37] +++....min: 0:
[2011/01/20 17:46:37] +++....max: 127:
[2011/01/20 17:46:37] +++....step: 1:
[2011/01/20 17:46:37] +++....default: 40:
[2011/01/20 17:46:37] +++....current: 63:
[2011/01/20 17:46:37] +++....flags: 0x0:
[2011/01/20 17:46:37] +++...Hue:
[2011/01/20 17:46:37] +++....id: 9963779:
[2011/01/20 17:46:37] +++....type: 1:
[2011/01/20 17:46:37] +++....name: Hue:
[2011/01/20 17:46:37] +++....min: -15:
[2011/01/20 17:46:37] +++....max: 15:
[2011/01/20 17:46:37] +++....step: 1:
[2011/01/20 17:46:37] +++....default: 0:
[2011/01/20 17:46:37] +++....current: 0:
[2011/01/20 17:46:37] +++....flags: 0x0:
[2011/01/20 17:46:37] +++
[2011/01/20 17:46:37] +++..List of grab formats for '/dev/video0'
[2011/01/20 17:46:37] +++...Index 0 de VIDEO_CAPTURE
[2011/01/20 17:46:37] +++......type: V4L2_BUF_TYPE_VIDEO_CAPTURE
[2011/01/20 17:46:37] +++......flags: 0x0 (uncompressed)
[2011/01/20 17:46:37] +++......description: YUV 4:2:2 (YUYV)
[2011/01/20 17:46:37] +++......format: [0x56595559] YUYV
[2011/01/20 17:46:37] +++......grab sizes: 5 discrete values: 640x480 
352x288 320x240 176x144 160x120
[2011/01/20 17:46:37] +++
[2011/01/20 17:46:37] +++..Default capture values:
[2011/01/20 17:46:37] +++...type: V4L2_BUF_TYPE_VIDEO_CAPTURE
[2011/01/20 17:46:37] +++...WxH: 320x240, bytesperline: 640, sizeimage: 
153600
[2011/01/20 17:46:37] +++...field: V4L2_FIELD_NONE
[2011/01/20 17:46:37] +++...pixelformat: YUYV, colorspace: 
UNKNOWN_COLORSPACE
[2011/01/20 17:46:37] +++..Grab sizes for default capture: 5 discrete 
values: 640x480 352x288 320x240 176x144 160x120
[2011/01/20 17:46:37] +++...MIN/MAX sizes: (160x120)..(640x480)
[2011/01/20 17:46:37] v4l2DS_t::setGrabFormat: trying to set format 
YUV::420P
[2011/01/20 17:46:37] v4l2DS_t::setGrabFormat: V4L2 ID=[0x32315559] YU12
[2011/01/20 17:46:37] setGrabFormat: default capture params:
     type=V4L2_BUF_TYPE_VIDEO_CAPTURE,width=320,height=240,
     pixelformat=YUYV,field=V4L2_FIELD_NONE,bytesperline=640,
     sizeimage=153600,colorspace=UNKNOWN_COLORSPACE
[2011/01/20 17:46:37] v4l2DS_t:setGrabFormat: VIDIOC_TRY_FMT failed: 
error 22 Invalid argument
[2011/01/20 17:46:37] v4l2DS_t:setGrabFormat: trying to continue anyway
[2011/01/20 17:46:37] v4l2DS_t:setGrabFormat: VIDIOC_S_FMT failed: error 
22 Invalid argument

El 16/02/2011 13:38, Moritz Barsnick escribi?:
> On Tue, Feb 15, 2011 at 19:58:12 +0100, Laurent Pinchart wrote:
>> What happen if you try to capture images in the problematic resolution with a
>> test software such as yavta (git.ideasonboard.com) ?
> Wow, I wasn't aware of this neat little tool. It has so many
> advantages:
> - no SDL dependency like luvcview
> - no big chunk of dependencies like guvcview (which is otherwise really
>    great, especially since it's not restricted to UVC anymore)
> - no age-old tool like those from the xawtv suite (which some distros
>    don't package anymore).
>
> Would it enumerate resolutions and frame rates like {l,g}uvcview do? (I
> only tested on a TV V4L device, my webcam is blocked.)
>
> Do you mind if I submit a patch or two for some things that came to
> mind, notably error reporting?
>
> Thanks,
> Moritz
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gabriel.vcf
Type: text/x-vcard
Size: 383 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110217/953bbff9/attachment.vcf>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3646 bytes
Desc: S/MIME Cryptographic Signature
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110217/953bbff9/attachment.bin>

From pj.assis at gmail.com  Thu Feb 17 15:27:03 2011
From: pj.assis at gmail.com (Paulo Assis)
Date: Thu, 17 Feb 2011 14:27:03 +0000
Subject: [Linux-uvc-devel] VIDIOC_G_PARM not get the correct fps
In-Reply-To: <AANLkTinrGiAvPtoUUCs9Bj4U2ro1E0zMo+5PXaERf3qx@mail.gmail.com>
References: <AANLkTimuuVSssm50q5MBO37TCL+bKHE_8yYYHcOFh6cZ@mail.gmail.com>
	<AANLkTinrGiAvPtoUUCs9Bj4U2ro1E0zMo+5PXaERf3qx@mail.gmail.com>
Message-ID: <AANLkTimtr1Rng+R-+mVCEVTbe6hScY=7t8Fn4VVmwpHo@mail.gmail.com>

Hi,
This may be caused by auto exposure, in dark environments exposure
increases so fps is reduced despite the requested value.
In some cameras you can disable auto exposure so that you always get
the requested fps, but some lower end models don't have support for
this control .

Regards,
Paulo

2011/2/17 xinglp <xinglp at gmail.com>:
> is this the hardware issue?
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From laurent.pinchart at ideasonboard.com  Thu Feb 17 17:01:56 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Thu, 17 Feb 2011 17:01:56 +0100
Subject: [Linux-uvc-devel] [PATCH RFC] uvcvideo: Add a mapping for H.264
	payloads
In-Reply-To: <1296243538.17673.23.camel@svmlwks101>
References: <1296243538.17673.23.camel@svmlwks101>
Message-ID: <201102171701.57759.laurent.pinchart@ideasonboard.com>

HI Stephan,

Thanks for the patch, and sorry for the late reply.

On Friday 28 January 2011 20:38:58 Stephan Lachowsky wrote:
> Associate the H.264 GUID with an H.264 pixel format so that frame
> and stream based format descriptors with this GUID are recognized
> by the UVC video driver.
> ---
>  drivers/media/video/uvc/uvc_driver.c |    5 +++++
>  drivers/media/video/uvc/uvcvideo.h   |    3 +++
>  include/linux/videodev2.h            |    1 +
>  3 files changed, 9 insertions(+), 0 deletions(-)
> 
> diff --git a/drivers/media/video/uvc/uvc_driver.c
> b/drivers/media/video/uvc/uvc_driver.c index 6bcb9e1..a5a86ce 100644
> --- a/drivers/media/video/uvc/uvc_driver.c
> +++ b/drivers/media/video/uvc/uvc_driver.c
> @@ -108,6 +108,11 @@ static struct uvc_format_desc uvc_fmts[] = {
>  		.guid		= UVC_GUID_FORMAT_MPEG,
>  		.fcc		= V4L2_PIX_FMT_MPEG,
>  	},
> +	{
> +		.name		= "H.264",
> +		.guid		= UVC_GUID_FORMAT_H264,
> +		.fcc		= V4L2_PIX_FMT_H264,
> +	},
>  };
> 
>  /*
> ------------------------------------------------------------------------
> diff --git a/drivers/media/video/uvc/uvcvideo.h
> b/drivers/media/video/uvc/uvcvideo.h index e522f99..4f65ac6 100644
> --- a/drivers/media/video/uvc/uvcvideo.h
> +++ b/drivers/media/video/uvc/uvcvideo.h
> @@ -155,6 +155,9 @@ struct uvc_xu_control {
>  #define UVC_GUID_FORMAT_MPEG \
>  	{ 'M',  'P',  'E',  'G', 0x00, 0x00, 0x10, 0x00, \
>  	 0x80, 0x00, 0x00, 0xaa, 0x00, 0x38, 0x9b, 0x71}
> +#define UVC_GUID_FORMAT_H264 \
> +	{ 'H',  '2',  '6',  '4', 0x00, 0x00, 0x10, 0x00, \
> +	 0x80, 0x00, 0x00, 0xaa, 0x00, 0x38, 0x9b, 0x71}
> 
>  /*
> ------------------------------------------------------------------------ *
> Driver specific constants.
> diff --git a/include/linux/videodev2.h b/include/linux/videodev2.h
> index 5f6f470..d3b5877 100644
> --- a/include/linux/videodev2.h
> +++ b/include/linux/videodev2.h
> @@ -341,6 +341,7 @@ struct v4l2_pix_format {
>  #define V4L2_PIX_FMT_JPEG     v4l2_fourcc('J', 'P', 'E', 'G') /* JFIF JPEG
>     */ #define V4L2_PIX_FMT_DV       v4l2_fourcc('d', 'v', 's', 'd') /*
> 1394          */ #define V4L2_PIX_FMT_MPEG     v4l2_fourcc('M', 'P', 'E',
> 'G') /* MPEG-1/2/4    */ +#define V4L2_PIX_FMT_H264     v4l2_fourcc('H',
> '2', '6', '4') /* H.264 Annex-B NAL Units */

I've discussed H.264 support with Hans Verkuil (CC'ed) some time ago, and his 
opinion was that we shouldn't use a new V4L2 format for it. H.264 is 
essentially an MPEG version, so drivers should use V4L2_PIX_FMT_MPEG and 
select the details using the MPEG CIDs.

Of course feel free to disagree with Hans and discuss the matter with him :-)

>  /*  Vendor-specific formats   */
>  #define V4L2_PIX_FMT_CPIA1    v4l2_fourcc('C', 'P', 'I', 'A') /* cpia1 YUV
> */

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Thu Feb 17 17:03:16 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Thu, 17 Feb 2011 17:03:16 +0100
Subject: [Linux-uvc-devel] [PATCH RFC] uvcvideo: Add support for MPEG-2
	TS payload
In-Reply-To: <1296243305.17673.20.camel@svmlwks101>
References: <1296243305.17673.20.camel@svmlwks101>
Message-ID: <201102171703.17164.laurent.pinchart@ideasonboard.com>

Hi Stephan,

On Friday 28 January 2011 20:35:05 Stephan Lachowsky wrote:
> Parse the UVC 1.0 and UVC 1.1 VS_FORMAT_MPEG2TS descriptors.
> This a stream based format, so we generate a dummy frame descriptor
> with a dummy frame interval range.

Thanks for the patch, and sorry for the late reply.

Don't you also need to implement support for the V4L2 MPEG CIDs ? I would 
expect the driver to support at least the controls used to select the MPEG 
format (MPEG2, TS), even if they're hardcoded to MPEG2-TS.

> ---
>  drivers/media/video/uvc/uvc_driver.c |   41
> ++++++++++++++++++++++++++++++++++ drivers/media/video/uvc/uvcvideo.h   | 
>   3 ++
>  2 files changed, 44 insertions(+), 0 deletions(-)
> 
> diff --git a/drivers/media/video/uvc/uvc_driver.c
> b/drivers/media/video/uvc/uvc_driver.c index a1e9dfb..6bcb9e1 100644
> --- a/drivers/media/video/uvc/uvc_driver.c
> +++ b/drivers/media/video/uvc/uvc_driver.c
> @@ -103,6 +103,11 @@ static struct uvc_format_desc uvc_fmts[] = {
>  		.guid		= UVC_GUID_FORMAT_BY8,
>  		.fcc		= V4L2_PIX_FMT_SBGGR8,
>  	},
> +	{
> +		.name		= "MPEG2 TS",
> +		.guid		= UVC_GUID_FORMAT_MPEG,
> +		.fcc		= V4L2_PIX_FMT_MPEG,
> +	},
>  };
> 
>  /*
> ------------------------------------------------------------------------
> @@ -398,6 +403,33 @@ static int uvc_parse_format(struct uvc_device *dev,
> break;
> 
>  	case UVC_VS_FORMAT_MPEG2TS:
> +		n = dev->uvc_version >= 0x0110 ? 23 : 7;
> +		if (buflen < n) {
> +			uvc_trace(UVC_TRACE_DESCR, "device %d videostreaming "
> +			       "interface %d FORMAT error\n",
> +			       dev->udev->devnum,
> +			       alts->desc.bInterfaceNumber);
> +			return -EINVAL;
> +		}
> +
> +		strlcpy(format->name, "MPEG2 TS", sizeof format->name);
> +		format->fcc = V4L2_PIX_FMT_MPEG;
> +		format->flags = UVC_FMT_FLAG_COMPRESSED | UVC_FMT_FLAG_STREAM;
> +		format->bpp = 0;
> +		ftype = 0;
> +
> +		/* Create a dummy frame descriptor. */
> +		frame = &format->frame[0];
> +		memset(&format->frame[0], 0, sizeof format->frame[0]);
> +		frame->bFrameIntervalType = 0;
> +		frame->dwDefaultFrameInterval = 1;
> +		frame->dwFrameInterval = *intervals;
> +		*(*intervals)++ = 1;
> +		*(*intervals)++ = 10000000;
> +		*(*intervals)++ = 1;
> +		format->nframes = 1;
> +		break;
> +
>  	case UVC_VS_FORMAT_STREAM_BASED:
>  		/* Not supported yet. */
>  	default:
> @@ -673,6 +705,14 @@ static int uvc_parse_streaming(struct uvc_device *dev,
>  			break;
> 
>  		case UVC_VS_FORMAT_MPEG2TS:
> +			/* MPEG2TS format has no frame descriptor. We will create a
> +			 * dummy frame descriptor with a dummy frame interval range.
> +			 */
> +			nformats++;
> +			nframes++;
> +			nintervals += 3;
> +			break;
> +
>  		case UVC_VS_FORMAT_STREAM_BASED:
>  			uvc_trace(UVC_TRACE_DESCR, "device %d videostreaming "
>  				"interface %d FORMAT %u is not supported.\n",
> @@ -724,6 +764,7 @@ static int uvc_parse_streaming(struct uvc_device *dev,
>  		switch (buffer[2]) {
>  		case UVC_VS_FORMAT_UNCOMPRESSED:
>  		case UVC_VS_FORMAT_MJPEG:
> +		case UVC_VS_FORMAT_MPEG2TS:
>  		case UVC_VS_FORMAT_DV:
>  		case UVC_VS_FORMAT_FRAME_BASED:
>  			format->frame = frame;
> diff --git a/drivers/media/video/uvc/uvcvideo.h
> b/drivers/media/video/uvc/uvcvideo.h index 45f01e7..e522f99 100644
> --- a/drivers/media/video/uvc/uvcvideo.h
> +++ b/drivers/media/video/uvc/uvcvideo.h
> @@ -152,6 +152,9 @@ struct uvc_xu_control {
>  #define UVC_GUID_FORMAT_BY8 \
>  	{ 'B',  'Y',  '8',  ' ', 0x00, 0x00, 0x10, 0x00, \
>  	 0x80, 0x00, 0x00, 0xaa, 0x00, 0x38, 0x9b, 0x71}
> +#define UVC_GUID_FORMAT_MPEG \
> +	{ 'M',  'P',  'E',  'G', 0x00, 0x00, 0x10, 0x00, \
> +	 0x80, 0x00, 0x00, 0xaa, 0x00, 0x38, 0x9b, 0x71}
> 
>  /*
> ------------------------------------------------------------------------ *
> Driver specific constants.

-- 
Regards,

Laurent Pinchart


From stephan.lachowsky at maxim-ic.com  Thu Feb 17 18:18:38 2011
From: stephan.lachowsky at maxim-ic.com (Stephan Lachowsky)
Date: Thu, 17 Feb 2011 09:18:38 -0800
Subject: [Linux-uvc-devel] [PATCH RFC] uvcvideo: Add support for MPEG-2
	TS payload
In-Reply-To: <201102171703.17164.laurent.pinchart@ideasonboard.com>
References: <1296243305.17673.20.camel@svmlwks101>
	<201102171703.17164.laurent.pinchart@ideasonboard.com>
Message-ID: <1297963118.2620.36.camel@svmlwks101>

Hi Laurent,

On Thu, 2011-02-17 at 08:03 -0800, Laurent Pinchart wrote:
> Hi Stephan,
> 
> On Friday 28 January 2011 20:35:05 Stephan Lachowsky wrote:
> > Parse the UVC 1.0 and UVC 1.1 VS_FORMAT_MPEG2TS descriptors.
> > This a stream based format, so we generate a dummy frame descriptor
> > with a dummy frame interval range.
> 
> Thanks for the patch, and sorry for the late reply.
> 

No worries, just glad to have the moss knocked off the stone.

> Don't you also need to implement support for the V4L2 MPEG CIDs ? I would 
> expect the driver to support at least the controls used to select the MPEG 
> format (MPEG2, TS), even if they're hardcoded to MPEG2-TS.

That would be possible, for the stream type there is your choice of
MPEG2-TS so that is trivial. There are a very limited set of
standardized controls that can be mapped: wKeyFrameRate, wPFrameRate,
wCompQuality from the VS probe/commit (GOP size, B frames, bitrate).

Since these controls are optional in the spec, and an overly simplistic
projection of the encoder's actual configuration space, device
manufactures (typically) choose instead to use custom XUs that expose
richer more representative ones.

Given this state of affairs, I think it would be prudent to blindly
forward the data stream (Which is all, in essence, this patch enables)
leaving the configuration to userspace.

I'm not suggesting we preclude adding XU -> MPEG2 CID mappings into
uvcvideo later, just that as is this is a valuable step forward.

Stephan

> > ---
> >  drivers/media/video/uvc/uvc_driver.c |   41
> > ++++++++++++++++++++++++++++++++++ drivers/media/video/uvc/uvcvideo.h   | 
> >   3 ++
> >  2 files changed, 44 insertions(+), 0 deletions(-)
> > 
> > diff --git a/drivers/media/video/uvc/uvc_driver.c
> > b/drivers/media/video/uvc/uvc_driver.c index a1e9dfb..6bcb9e1 100644
> > --- a/drivers/media/video/uvc/uvc_driver.c
> > +++ b/drivers/media/video/uvc/uvc_driver.c
> > @@ -103,6 +103,11 @@ static struct uvc_format_desc uvc_fmts[] = {
> >  		.guid		= UVC_GUID_FORMAT_BY8,
> >  		.fcc		= V4L2_PIX_FMT_SBGGR8,
> >  	},
> > +	{
> > +		.name		= "MPEG2 TS",
> > +		.guid		= UVC_GUID_FORMAT_MPEG,
> > +		.fcc		= V4L2_PIX_FMT_MPEG,
> > +	},
> >  };
> > 
> >  /*
> > ------------------------------------------------------------------------
> > @@ -398,6 +403,33 @@ static int uvc_parse_format(struct uvc_device *dev,
> > break;
> > 
> >  	case UVC_VS_FORMAT_MPEG2TS:
> > +		n = dev->uvc_version >= 0x0110 ? 23 : 7;
> > +		if (buflen < n) {
> > +			uvc_trace(UVC_TRACE_DESCR, "device %d videostreaming "
> > +			       "interface %d FORMAT error\n",
> > +			       dev->udev->devnum,
> > +			       alts->desc.bInterfaceNumber);
> > +			return -EINVAL;
> > +		}
> > +
> > +		strlcpy(format->name, "MPEG2 TS", sizeof format->name);
> > +		format->fcc = V4L2_PIX_FMT_MPEG;
> > +		format->flags = UVC_FMT_FLAG_COMPRESSED | UVC_FMT_FLAG_STREAM;
> > +		format->bpp = 0;
> > +		ftype = 0;
> > +
> > +		/* Create a dummy frame descriptor. */
> > +		frame = &format->frame[0];
> > +		memset(&format->frame[0], 0, sizeof format->frame[0]);
> > +		frame->bFrameIntervalType = 0;
> > +		frame->dwDefaultFrameInterval = 1;
> > +		frame->dwFrameInterval = *intervals;
> > +		*(*intervals)++ = 1;
> > +		*(*intervals)++ = 10000000;
> > +		*(*intervals)++ = 1;
> > +		format->nframes = 1;
> > +		break;
> > +
> >  	case UVC_VS_FORMAT_STREAM_BASED:
> >  		/* Not supported yet. */
> >  	default:
> > @@ -673,6 +705,14 @@ static int uvc_parse_streaming(struct uvc_device *dev,
> >  			break;
> > 
> >  		case UVC_VS_FORMAT_MPEG2TS:
> > +			/* MPEG2TS format has no frame descriptor. We will create a
> > +			 * dummy frame descriptor with a dummy frame interval range.
> > +			 */
> > +			nformats++;
> > +			nframes++;
> > +			nintervals += 3;
> > +			break;
> > +
> >  		case UVC_VS_FORMAT_STREAM_BASED:
> >  			uvc_trace(UVC_TRACE_DESCR, "device %d videostreaming "
> >  				"interface %d FORMAT %u is not supported.\n",
> > @@ -724,6 +764,7 @@ static int uvc_parse_streaming(struct uvc_device *dev,
> >  		switch (buffer[2]) {
> >  		case UVC_VS_FORMAT_UNCOMPRESSED:
> >  		case UVC_VS_FORMAT_MJPEG:
> > +		case UVC_VS_FORMAT_MPEG2TS:
> >  		case UVC_VS_FORMAT_DV:
> >  		case UVC_VS_FORMAT_FRAME_BASED:
> >  			format->frame = frame;
> > diff --git a/drivers/media/video/uvc/uvcvideo.h
> > b/drivers/media/video/uvc/uvcvideo.h index 45f01e7..e522f99 100644
> > --- a/drivers/media/video/uvc/uvcvideo.h
> > +++ b/drivers/media/video/uvc/uvcvideo.h
> > @@ -152,6 +152,9 @@ struct uvc_xu_control {
> >  #define UVC_GUID_FORMAT_BY8 \
> >  	{ 'B',  'Y',  '8',  ' ', 0x00, 0x00, 0x10, 0x00, \
> >  	 0x80, 0x00, 0x00, 0xaa, 0x00, 0x38, 0x9b, 0x71}
> > +#define UVC_GUID_FORMAT_MPEG \
> > +	{ 'M',  'P',  'E',  'G', 0x00, 0x00, 0x10, 0x00, \
> > +	 0x80, 0x00, 0x00, 0xaa, 0x00, 0x38, 0x9b, 0x71}
> > 
> >  /*
> > ------------------------------------------------------------------------ *
> > Driver specific constants.
> 




From asmaa.elassal.student at pua.edu.eg  Fri Feb 18 00:27:24 2011
From: asmaa.elassal.student at pua.edu.eg (modysama)
Date: Thu, 17 Feb 2011 23:27:24 +0000 (UTC)
Subject: [Linux-uvc-devel] WebCam configuration on Kubuntu 10.10
References: <loom.20110211T170158-928@post.gmane.org>
	<201102151838.14939.laurent.pinchart@ideasonboard.com>
	<loom.20110215T220410-379@post.gmane.org>
Message-ID: <loom.20110218T002610-646@post.gmane.org>

please need your help.



From stephan.lachowsky at maxim-ic.com  Fri Feb 18 00:28:54 2011
From: stephan.lachowsky at maxim-ic.com (Stephan Lachowsky)
Date: Thu, 17 Feb 2011 15:28:54 -0800
Subject: [Linux-uvc-devel] [PATCH RFC] uvcvideo: Add a mapping for H.264
	payloads
In-Reply-To: <201102171701.57759.laurent.pinchart@ideasonboard.com>
References: <1296243538.17673.23.camel@svmlwks101>
	<201102171701.57759.laurent.pinchart@ideasonboard.com>
Message-ID: <1297985334.2620.86.camel@svmlwks101>

Hi,

On Thu, 2011-02-17 at 08:01 -0800, Laurent Pinchart wrote:
> HI Stephan,
> 
> Thanks for the patch, and sorry for the late reply.
> 
> On Friday 28 January 2011 20:38:58 Stephan Lachowsky wrote:
> > Associate the H.264 GUID with an H.264 pixel format so that frame
> > and stream based format descriptors with this GUID are recognized
> > by the UVC video driver.
> > ---
> >  drivers/media/video/uvc/uvc_driver.c |    5 +++++
> >  drivers/media/video/uvc/uvcvideo.h   |    3 +++
> >  include/linux/videodev2.h            |    1 +
> >  3 files changed, 9 insertions(+), 0 deletions(-)
> > 
> > diff --git a/drivers/media/video/uvc/uvc_driver.c
> > b/drivers/media/video/uvc/uvc_driver.c index 6bcb9e1..a5a86ce 100644
> > --- a/drivers/media/video/uvc/uvc_driver.c
> > +++ b/drivers/media/video/uvc/uvc_driver.c
> > @@ -108,6 +108,11 @@ static struct uvc_format_desc uvc_fmts[] = {
> >  		.guid		= UVC_GUID_FORMAT_MPEG,
> >  		.fcc		= V4L2_PIX_FMT_MPEG,
> >  	},
> > +	{
> > +		.name		= "H.264",
> > +		.guid		= UVC_GUID_FORMAT_H264,
> > +		.fcc		= V4L2_PIX_FMT_H264,
> > +	},
> >  };
> > 
> >  /*
> > ------------------------------------------------------------------------
> > diff --git a/drivers/media/video/uvc/uvcvideo.h
> > b/drivers/media/video/uvc/uvcvideo.h index e522f99..4f65ac6 100644
> > --- a/drivers/media/video/uvc/uvcvideo.h
> > +++ b/drivers/media/video/uvc/uvcvideo.h
> > @@ -155,6 +155,9 @@ struct uvc_xu_control {
> >  #define UVC_GUID_FORMAT_MPEG \
> >  	{ 'M',  'P',  'E',  'G', 0x00, 0x00, 0x10, 0x00, \
> >  	 0x80, 0x00, 0x00, 0xaa, 0x00, 0x38, 0x9b, 0x71}
> > +#define UVC_GUID_FORMAT_H264 \
> > +	{ 'H',  '2',  '6',  '4', 0x00, 0x00, 0x10, 0x00, \
> > +	 0x80, 0x00, 0x00, 0xaa, 0x00, 0x38, 0x9b, 0x71}
> > 
> >  /*
> > ------------------------------------------------------------------------ *
> > Driver specific constants.
> > diff --git a/include/linux/videodev2.h b/include/linux/videodev2.h
> > index 5f6f470..d3b5877 100644
> > --- a/include/linux/videodev2.h
> > +++ b/include/linux/videodev2.h
> > @@ -341,6 +341,7 @@ struct v4l2_pix_format {
> >  #define V4L2_PIX_FMT_JPEG     v4l2_fourcc('J', 'P', 'E', 'G') /* JFIF JPEG
> >     */ #define V4L2_PIX_FMT_DV       v4l2_fourcc('d', 'v', 's', 'd') /*
> > 1394          */ #define V4L2_PIX_FMT_MPEG     v4l2_fourcc('M', 'P', 'E',
> > 'G') /* MPEG-1/2/4    */ +#define V4L2_PIX_FMT_H264     v4l2_fourcc('H',
> > '2', '6', '4') /* H.264 Annex-B NAL Units */
> 
> I've discussed H.264 support with Hans Verkuil (CC'ed) some time ago, and his 
> opinion was that we shouldn't use a new V4L2 format for it. H.264 is 
> essentially an MPEG version, so drivers should use V4L2_PIX_FMT_MPEG and 
> select the details using the MPEG CIDs.
> 
> Of course feel free to disagree with Hans and discuss the matter with him :-)
> 

Well MPEG is a loaded acronym to throw around, it means many, many
things in different contexts.  Saying H.264 is essentially an MPEG
version is true, but putting something in a labelled drawer doesn't
necessarily make it square (unless the drawer is square, structurally
solid, smaller than the something, and the insertion is done with
extreme prejudice).

Let me throw a few points out for critique:

      * There is a 1-1 mapping between between the contents of this UVC
        stream, and what would be found inside an AVI container with the
        same fourcc code... Why fight an existing defacto labelling?
      * There is currently a straightforward correspondence between UVC
        payload formats and v4l2 fourcc types... Why would you want to
        add indirection through an overloaded fourcc type, increasing
        the complexity for all parties involved?
      * If you don't use the fourcc code to denote the payload format,
        you lose the ability to enumerate supported formats generically.
        You require interface users to understand MPEG CID, and use it
        to sub-enumerate any formats considered MPEG -- which is an
        arbitrary label in this context -- you wouldn't try to shim
        Theora or WebM in this way, so why H.264?
      * MPEG CID
        (http://v4l2spec.bytesex.org/spec/x802.htm#MPEG-CONTROLS) does
        not currently have defined controls beyond MPEG2 (No MPEG4 ASP,
        no MPEG4 AVC)... configuring the minutiae of these codecs is
        complex enough that they probably deserve their own extended
        control classes.

I'm quite persuadable by reason, and quite partial to wit; so do cc
anyone else that will respond with insight (and/or humour).

Stephan

> >  /*  Vendor-specific formats   */
> >  #define V4L2_PIX_FMT_CPIA1    v4l2_fourcc('C', 'P', 'I', 'A') /* cpia1 YUV
> > */
> 




From pj.assis at gmail.com  Fri Feb 18 10:45:48 2011
From: pj.assis at gmail.com (Paulo Assis)
Date: Fri, 18 Feb 2011 09:45:48 +0000
Subject: [Linux-uvc-devel]  WebCam configuration on Kubuntu 10.10
In-Reply-To: <AANLkTinp6Ueh+kuzcF1S_kO4s82YLPsGXujBvnzeJO0M@mail.gmail.com>
References: <loom.20110211T170158-928@post.gmane.org>
	<201102151838.14939.laurent.pinchart@ideasonboard.com>
	<loom.20110215T220410-379@post.gmane.org>
	<loom.20110218T002610-646@post.gmane.org>
	<AANLkTinp6Ueh+kuzcF1S_kO4s82YLPsGXujBvnzeJO0M@mail.gmail.com>
Message-ID: <AANLkTimLD12UJ55nZUSG1ePdVEnqkz8AKMFWQFfaaVFT@mail.gmail.com>

Hi, I find strange the following output from luvcview:

Frame format: YUYV (MJPG is not supported by device)

Your lsusb output seems to indicate that MJPG is indeed supported.

Could you post the output of guvcview --verbose?
This should list all video formats available in your device (and the
ones converted by libv4l)

Regards,
Paulo

2011/2/17 modysama <asmaa.elassal.student at pua.edu.eg>:
> please need your help.
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From laurent.pinchart at ideasonboard.com  Fri Feb 18 11:36:02 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 18 Feb 2011 11:36:02 +0100
Subject: [Linux-uvc-devel] [PATCH RFC] uvcvideo: Add a mapping for H.264
	payloads
In-Reply-To: <1297985334.2620.86.camel@svmlwks101>
References: <1296243538.17673.23.camel@svmlwks101>
	<201102171701.57759.laurent.pinchart@ideasonboard.com>
	<1297985334.2620.86.camel@svmlwks101>
Message-ID: <201102181136.02404.laurent.pinchart@ideasonboard.com>

Hi Stephan,

On Friday 18 February 2011 00:28:54 Stephan Lachowsky wrote:
> On Thu, 2011-02-17 at 08:01 -0800, Laurent Pinchart wrote:
> > On Friday 28 January 2011 20:38:58 Stephan Lachowsky wrote:
> > > Associate the H.264 GUID with an H.264 pixel format so that frame
> > > and stream based format descriptors with this GUID are recognized
> > > by the UVC video driver.
> > > ---
> > > 
> > >  drivers/media/video/uvc/uvc_driver.c |    5 +++++
> > >  drivers/media/video/uvc/uvcvideo.h   |    3 +++
> > >  include/linux/videodev2.h            |    1 +
> > >  3 files changed, 9 insertions(+), 0 deletions(-)
> > > 
> > > diff --git a/drivers/media/video/uvc/uvc_driver.c
> > > b/drivers/media/video/uvc/uvc_driver.c index 6bcb9e1..a5a86ce 100644
> > > --- a/drivers/media/video/uvc/uvc_driver.c
> > > +++ b/drivers/media/video/uvc/uvc_driver.c
> > > @@ -108,6 +108,11 @@ static struct uvc_format_desc uvc_fmts[] = {
> > > 
> > >  		.guid		= UVC_GUID_FORMAT_MPEG,
> > >  		.fcc		= V4L2_PIX_FMT_MPEG,
> > >  	
> > >  	},
> > > 
> > > +	{
> > > +		.name		= "H.264",
> > > +		.guid		= UVC_GUID_FORMAT_H264,
> > > +		.fcc		= V4L2_PIX_FMT_H264,
> > > +	},
> > > 
> > >  };
> > >  
> > >  /*
> > > 
> > > -----------------------------------------------------------------------
> > > - diff --git a/drivers/media/video/uvc/uvcvideo.h
> > > b/drivers/media/video/uvc/uvcvideo.h index e522f99..4f65ac6 100644
> > > --- a/drivers/media/video/uvc/uvcvideo.h
> > > +++ b/drivers/media/video/uvc/uvcvideo.h
> > > @@ -155,6 +155,9 @@ struct uvc_xu_control {
> > > 
> > >  #define UVC_GUID_FORMAT_MPEG \
> > >  
> > >  	{ 'M',  'P',  'E',  'G', 0x00, 0x00, 0x10, 0x00, \
> > >  	
> > >  	 0x80, 0x00, 0x00, 0xaa, 0x00, 0x38, 0x9b, 0x71}
> > > 
> > > +#define UVC_GUID_FORMAT_H264 \
> > > +	{ 'H',  '2',  '6',  '4', 0x00, 0x00, 0x10, 0x00, \
> > > +	 0x80, 0x00, 0x00, 0xaa, 0x00, 0x38, 0x9b, 0x71}
> > > 
> > >  /*
> > > 
> > > -----------------------------------------------------------------------
> > > - * Driver specific constants.
> > > diff --git a/include/linux/videodev2.h b/include/linux/videodev2.h
> > > index 5f6f470..d3b5877 100644
> > > --- a/include/linux/videodev2.h
> > > +++ b/include/linux/videodev2.h
> > > @@ -341,6 +341,7 @@ struct v4l2_pix_format {
> > > 
> > >  #define V4L2_PIX_FMT_JPEG     v4l2_fourcc('J', 'P', 'E', 'G') /* JFIF
> > >  JPEG
> > >  
> > >     */ #define V4L2_PIX_FMT_DV       v4l2_fourcc('d', 'v', 's', 'd') /*
> > > 
> > > 1394          */ #define V4L2_PIX_FMT_MPEG     v4l2_fourcc('M', 'P',
> > > 'E', 'G') /* MPEG-1/2/4    */ +#define V4L2_PIX_FMT_H264    
> > > v4l2_fourcc('H', '2', '6', '4') /* H.264 Annex-B NAL Units */
> > 
> > I've discussed H.264 support with Hans Verkuil (CC'ed) some time ago, and
> > his opinion was that we shouldn't use a new V4L2 format for it. H.264 is
> > essentially an MPEG version, so drivers should use V4L2_PIX_FMT_MPEG and
> > select the details using the MPEG CIDs.
> > 
> > Of course feel free to disagree with Hans and discuss the matter with him
> > :-)
> 
> Well MPEG is a loaded acronym to throw around, it means many, many
> things in different contexts.  Saying H.264 is essentially an MPEG
> version is true, but putting something in a labelled drawer doesn't
> necessarily make it square (unless the drawer is square, structurally
> solid, smaller than the something, and the insertion is done with
> extreme prejudice).
> 
> Let me throw a few points out for critique:
> 
>       * There is a 1-1 mapping between between the contents of this UVC
>         stream, and what would be found inside an AVI container with the
>         same fourcc code... Why fight an existing defacto labelling?
>       * There is currently a straightforward correspondence between UVC
>         payload formats and v4l2 fourcc types... Why would you want to
>         add indirection through an overloaded fourcc type, increasing
>         the complexity for all parties involved?
>       * If you don't use the fourcc code to denote the payload format,
>         you lose the ability to enumerate supported formats generically.
>         You require interface users to understand MPEG CID, and use it
>         to sub-enumerate any formats considered MPEG -- which is an
>         arbitrary label in this context -- you wouldn't try to shim
>         Theora or WebM in this way, so why H.264?
>       * MPEG CID
>         (http://v4l2spec.bytesex.org/spec/x802.htm#MPEG-CONTROLS) does
>         not currently have defined controls beyond MPEG2 (No MPEG4 ASP,
>         no MPEG4 AVC)... configuring the minutiae of these codecs is
>         complex enough that they probably deserve their own extended
>         control classes.
> 
> I'm quite persuadable by reason, and quite partial to wit; so do cc
> anyone else that will respond with insight (and/or humour).

One of the reason why MPEG support is implemented with a single fourcc in V4L2 
is that defining a new fourcc for every MPEG flavour (or rather combination of 
flavours) would lead to a very long list of fourccs.

This being said, I have no strong opinion on whether we should define a new 
H.264 fourcc or use the MPEG one with new MPEG4/H.264-specific MPEG controls. 
Hans did when I talked to him about this topic a couple of months ago, so I'll 
let him argue with you :-)

BTW, H.264 "elementary streams" comes in at least two flavours, one with start 
codes and one without. Would you use two fourccs for that ?

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Fri Feb 18 11:56:08 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 18 Feb 2011 11:56:08 +0100
Subject: [Linux-uvc-devel] [PATCH RFC] uvcvideo: Add support for MPEG-2
	TS payload
In-Reply-To: <1297963118.2620.36.camel@svmlwks101>
References: <1296243305.17673.20.camel@svmlwks101>
	<201102171703.17164.laurent.pinchart@ideasonboard.com>
	<1297963118.2620.36.camel@svmlwks101>
Message-ID: <201102181156.09061.laurent.pinchart@ideasonboard.com>

Hi Stephan,

On Thursday 17 February 2011 18:18:38 Stephan Lachowsky wrote:
> On Thu, 2011-02-17 at 08:03 -0800, Laurent Pinchart wrote:
> > On Friday 28 January 2011 20:35:05 Stephan Lachowsky wrote:
> > > Parse the UVC 1.0 and UVC 1.1 VS_FORMAT_MPEG2TS descriptors.
> > > This a stream based format, so we generate a dummy frame descriptor
> > > with a dummy frame interval range.
> > 
> > Thanks for the patch, and sorry for the late reply.
> 
> No worries, just glad to have the moss knocked off the stone.
> 
> > Don't you also need to implement support for the V4L2 MPEG CIDs ? I would
> > expect the driver to support at least the controls used to select the
> > MPEG format (MPEG2, TS), even if they're hardcoded to MPEG2-TS.
> 
> That would be possible, for the stream type there is your choice of
> MPEG2-TS so that is trivial. There are a very limited set of
> standardized controls that can be mapped: wKeyFrameRate, wPFrameRate,
> wCompQuality from the VS probe/commit (GOP size, B frames, bitrate).
> 
> Since these controls are optional in the spec, and an overly simplistic
> projection of the encoder's actual configuration space, device
> manufactures (typically) choose instead to use custom XUs that expose
> richer more representative ones.
> 
> Given this state of affairs, I think it would be prudent to blindly
> forward the data stream (Which is all, in essence, this patch enables)
> leaving the configuration to userspace.
> 
> I'm not suggesting we preclude adding XU -> MPEG2 CID mappings into
> uvcvideo later, just that as is this is a valuable step forward.

I agree with this, but I would still implement support for the 
V4L2_CID_MPEG_STREAM_TYPE control. MPEG applications expect it to be 
supported.

-- 
Regards,

Laurent Pinchart


From asmaa.elassal.student at pua.edu.eg  Fri Feb 18 12:53:06 2011
From: asmaa.elassal.student at pua.edu.eg (Modysama)
Date: Fri, 18 Feb 2011 11:53:06 +0000 (UTC)
Subject: [Linux-uvc-devel] WebCam configuration on Kubuntu 10.10
References: <loom.20110211T170158-928@post.gmane.org>
	<201102151838.14939.laurent.pinchart@ideasonboard.com>
	<loom.20110215T220410-379@post.gmane.org>
	<loom.20110218T002610-646@post.gmane.org>
	<AANLkTinp6Ueh+kuzcF1S_kO4s82YLPsGXujBvnzeJO0M@mail.gmail.com>
	<AANLkTimLD12UJ55nZUSG1ePdVEnqkz8AKMFWQFfaaVFT@mail.gmail.com>
Message-ID: <loom.20110218T124308-662@post.gmane.org>

Paulo Assis <pj.assis <at> gmail.com> writes:

> 
> Hi, I find strange the following output from luvcview:
> 
> Frame format: YUYV (MJPG is not supported by device)
> 
> Your lsusb output seems to indicate that MJPG is indeed supported.

Thanks, sir for being helpful.
I just want to cleare something .
Luvcview
Is open the hp integrate camera not my usb webcam.

> 
> Could you post the output of guvcview --verbose?
> This should list all video formats available in your device (and the
> ones converted by libv4l)

sok at sok-HP-ProBook-4520s:~$ guvcview --verbose
guvcview 1.4.1
video_device: /dev/video0
vid_sleep: 0
cap_meth: 1
resolution: 176 x 144
windowsize: 512 x 700
vert pane: 578
spin behavior: 0
mode: yuyv
fps: 1/30
Display Fps: 0
bpp: 0
hwaccel: 1
avi_format: 0
sound: 1
sound Device: 0
sound samp rate: 0
sound Channels: 0
Sound delay: 0 nanosec
Sound Format: 80 
Pan Step: 2 degrees
Tilt Step: 2 degrees
Video Filter Flags: 0
image inc: 0
profile(default):/home/sok/default.gpfl
starting portaudio...
Cannot connect to server socket err = No such file or directory
Cannot connect to server socket
jack server is not running or cannot be started
language catalog=> dir:/usr/share/locale type:UTF-8 lang:en_US.UTF-8 
cat:guvcview.mo
yuyv: setting format to 1448695129
capture method = 1
video device: /dev/video0 
/dev/video0 - device 1
/dev/video1 - device 2
Init. HP Webcam [2 MP Fixed] (location: usb-0000:00:1a.0-1.5)
{ pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
{ discrete: width = 640, height = 480 }
        Time interval between frame: 1/30, 
{ discrete: width = 176, height = 144 }
        Time interval between frame: 1/30, 
{ discrete: width = 320, height = 240 }
        Time interval between frame: 1/30, 
{ discrete: width = 1024, height = 768 }
        Time interval between frame: 1/10, 
{ discrete: width = 1280, height = 720 }
        Time interval between frame: 1/8, 
{ discrete: width = 1280, height = 1024 }
        Time interval between frame: 1/8, 
{ discrete: width = 1600, height = 900 }
        Time interval between frame: 1/5, 
{ discrete: width = 1600, height = 1200 }
        Time interval between frame: 1/5, 
{ discrete: width = 640, height = 480 }
        Time interval between frame: 1/30, 
{ pixelformat = 'RGB3', description = 'RGB3' }
{ discrete: width = 640, height = 480 }
        Time interval between frame: 1/30, 
{ discrete: width = 176, height = 144 }
        Time interval between frame: 1/30, 
{ discrete: width = 320, height = 240 }
        Time interval between frame: 1/30, 
{ discrete: width = 1024, height = 768 }
        Time interval between frame: 1/10, 
{ discrete: width = 1280, height = 720 }
        Time interval between frame: 1/8, 
{ discrete: width = 1280, height = 1024 }
        Time interval between frame: 1/8, 
{ discrete: width = 1600, height = 900 }
        Time interval between frame: 1/5, 
{ discrete: width = 1600, height = 1200 }
        Time interval between frame: 1/5, 
{ pixelformat = 'BGR3', description = 'BGR3' }
{ discrete: width = 640, height = 480 }
        Time interval between frame: 1/30, 
{ discrete: width = 176, height = 144 }
        Time interval between frame: 1/30, 
{ discrete: width = 320, height = 240 }
        Time interval between frame: 1/30, 
{ discrete: width = 1024, height = 768 }
        Time interval between frame: 1/10, 
{ discrete: width = 1280, height = 720 }
        Time interval between frame: 1/8, 
{ discrete: width = 1280, height = 1024 }
        Time interval between frame: 1/8, 
{ discrete: width = 1600, height = 900 }
        Time interval between frame: 1/5, 
{ discrete: width = 1600, height = 1200 }
        Time interval between frame: 1/5, 
{ pixelformat = 'YU12', description = 'YU12' }
{ discrete: width = 640, height = 480 }
        Time interval between frame: 1/30, 
{ discrete: width = 176, height = 144 }
        Time interval between frame: 1/30, 
{ discrete: width = 320, height = 240 }
        Time interval between frame: 1/30, 
{ discrete: width = 1024, height = 768 }
        Time interval between frame: 1/10, 
{ discrete: width = 1280, height = 720 }
        Time interval between frame: 1/8, 
{ discrete: width = 1280, height = 1024 }
        Time interval between frame: 1/8, 
{ discrete: width = 1600, height = 900 }
        Time interval between frame: 1/5, 
{ discrete: width = 1600, height = 1200 }
        Time interval between frame: 1/5, 
{ pixelformat = 'YV12', description = 'YV12' }
{ discrete: width = 640, height = 480 }
        Time interval between frame: 1/30, 
{ discrete: width = 176, height = 144 }
        Time interval between frame: 1/30, 
{ discrete: width = 320, height = 240 }
        Time interval between frame: 1/30, 
{ discrete: width = 1024, height = 768 }
        Time interval between frame: 1/10, 
{ discrete: width = 1280, height = 720 }
        Time interval between frame: 1/8, 
{ discrete: width = 1280, height = 1024 }
        Time interval between frame: 1/8, 
{ discrete: width = 1600, height = 900 }
        Time interval between frame: 1/5, 
{ discrete: width = 1600, height = 1200 }
        Time interval between frame: 1/5, 
vid:05c8 
pid:0403 
driver:uvcvideo
checking format: 1448695129
fps is set to 1/30
drawing controls

control[0]: 0x980900  Brightness, -64:64:1, default 0
control[0]: 0x980901  Contrast, 0:64:1, default 25
control[0]: 0x980902  Saturation, 0:128:1, default 64
control[0]: 0x980903  Hue, -40:40:1, default 0
control[0]: 0x98090c  White Balance Temperature, Auto, 0:1:1, default 1
control[0]: 0x980910  Gamma, 72:500:1, default 100
control[0]: 0x980918  Power Line Frequency, 0:2:1, default 2
control[0]: 0x98091a  White Balance Temperature, 2800:6500:1, default 4000
control[0]: 0x98091b  Sharpness, 0:5:1, default 2
control[0]: 0x98091c  Backlight Compensation, 0:1:1, default 0
control[0]: 0x9a0903  Exposure, Auto Priority, 0:1:1, default 0
resolutions of format(1) = 9 
frame rates of 2? resolution=1 
fps is set to 1/30
Def. Res: 1  numb. fps:1
--------------------------------------- device #0
Name                     = HDA Intel: STAC92xx Analog (hw:0,0)
Host API                 = ALSA
Max inputs = 2, Max outputs = 2
Def. low input latency   =    0.012
Def. low output latency  =    0.012
Def. high input latency  =    0.046
Def. high output latency =    0.046
Def. sample rate         = 44100.00
--------------------------------------- device #1
Name                     = HDA ATI HDMI: ATI HDMI (hw:1,3)
Host API                 = ALSA
Max inputs = 0, Max outputs = 2
Def. low input latency   =   -1.000
Def. low output latency  =    0.012
Def. high input latency  =   -1.000
Def. high output latency =    0.046
Def. sample rate         = 44100.00
--------------------------------------- device #2
Name                     = FaceCam 312: USB Audio (hw:2,0)
Host API                 = ALSA
Max inputs = 1, Max outputs = 0
Def. low input latency   =    0.011
Def. low output latency  =   -1.000
Def. high input latency  =    0.043
Def. high output latency =   -1.000
Def. sample rate         = 48000.00
--------------------------------------- device #3
Name                     = front
Host API                 = ALSA
Max inputs = 0, Max outputs = 2
Def. low input latency   =   -1.000
Def. low output latency  =    0.012
Def. high input latency  =   -1.000
Def. high output latency =    0.046
Def. sample rate         = 44100.00
--------------------------------------- device #4
Name                     = surround40
Host API                 = ALSA
Max inputs = 0, Max outputs = 2
Def. low input latency   =   -1.000
Def. low output latency  =    0.012
Def. high input latency  =   -1.000
Def. high output latency =    0.046
Def. sample rate         = 44100.00
--------------------------------------- device #5
Name                     = surround51
Host API                 = ALSA
Max inputs = 0, Max outputs = 2
Def. low input latency   =   -1.000
Def. low output latency  =    0.012
Def. high input latency  =   -1.000
Def. high output latency =    0.046
Def. sample rate         = 44100.00
--------------------------------------- device #6
Name                     = surround71
Host API                 = ALSA
Max inputs = 0, Max outputs = 2
Def. low input latency   =   -1.000
Def. low output latency  =    0.012
Def. high input latency  =   -1.000
Def. high output latency =    0.046
Def. sample rate         = 44100.00
--------------------------------------- device #7
Name                     = pulse
Host API                 = ALSA
Max inputs = 32, Max outputs = 32
Def. low input latency   =    0.012
Def. low output latency  =    0.012
Def. high input latency  =    0.046
Def. high output latency =    0.046
Def. sample rate         = 44100.00
--------------------------------------- device #8
Name                     = dmix
Host API                 = ALSA
Max inputs = 0, Max outputs = 2
Def. low input latency   =   -1.000
Def. low output latency  =    0.043
Def. high input latency  =   -1.000
Def. high output latency =    0.043
Def. sample rate         = 48000.00
--------------------------------------- device #9
[ Default Input, Default Output ]
Name                     = default
Host API                 = ALSA
Max inputs = 32, Max outputs = 32
Def. low input latency   =    0.012
Def. low output latency  =    0.012
Def. high input latency  =    0.046
Def. high output latency =    0.046
Def. sample rate         = 44100.00
----------------------------------------------
SampleRate:0 Channels:0
Video driver: x11
A window manager is available
guvcview 1.4.1
Cannot connect to server socket err = No such file or directory
Cannot connect to server socket
jack server is not running or cannot be started
video device: /dev/video1 
/dev/video0 - device 1
/dev/video1 - device 2
Init. FaceCam 312 (location: usb-0000:00:1d.0-1.1)
{ pixelformat = 'MJPG', description = 'MJPEG' }
{ discrete: width = 640, height = 480 }
        Time interval between frame: 1/30, 1/15, 1/1, 
{ discrete: width = 320, height = 240 }
        Time interval between frame: 1/30, 1/15, 1/1, 
{ discrete: width = 160, height = 120 }
        Time interval between frame: 1/30, 1/15, 1/1, 
{ discrete: width = 176, height = 144 }
        Time interval between frame: 1/30, 1/15, 1/1, 
{ discrete: width = 352, height = 288 }
        Time interval between frame: 1/30, 1/15, 1/1, 
{ pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
{ discrete: width = 320, height = 240 }
        Time interval between frame: 1/5, 
{ discrete: width = 160, height = 120 }
        Time interval between frame: 1/20, 
{ discrete: width = 176, height = 144 }
        Time interval between frame: 1/15, 
{ discrete: width = 352, height = 288 }
        Time interval between frame: 1/4, 
{ pixelformat = 'RGB3', description = 'RGB3' }
{ discrete: width = 640, height = 480 }
        Time interval between frame: 1/30, 1/15, 1/1, 
{ discrete: width = 320, height = 240 }
        Time interval between frame: 1/30, 1/15, 1/1, 
{ discrete: width = 160, height = 120 }
        Time interval between frame: 1/20, 
{ discrete: width = 176, height = 144 }
        Time interval between frame: 1/15, 
{ discrete: width = 352, height = 288 }
        Time interval between frame: 1/30, 1/15, 1/1, 
{ pixelformat = 'BGR3', description = 'BGR3' }
{ discrete: width = 640, height = 480 }
        Time interval between frame: 1/30, 1/15, 1/1, 
{ discrete: width = 320, height = 240 }
        Time interval between frame: 1/30, 1/15, 1/1, 
{ discrete: width = 160, height = 120 }
        Time interval between frame: 1/20, 
{ discrete: width = 176, height = 144 }
        Time interval between frame: 1/15, 
{ discrete: width = 352, height = 288 }
        Time interval between frame: 1/30, 1/15, 1/1, 
{ pixelformat = 'YU12', description = 'YU12' }
{ discrete: width = 640, height = 480 }
        Time interval between frame: 1/30, 1/15, 1/1, 
{ discrete: width = 320, height = 240 }
        Time interval between frame: 1/30, 1/15, 1/1, 
{ discrete: width = 160, height = 120 }
        Time interval between frame: 1/20, 
{ discrete: width = 176, height = 144 }
        Time interval between frame: 1/15, 
{ discrete: width = 352, height = 288 }
        Time interval between frame: 1/30, 1/15, 1/1, 
{ pixelformat = 'YV12', description = 'YV12' }
{ discrete: width = 640, height = 480 }
        Time interval between frame: 1/30, 1/15, 1/1, 
{ discrete: width = 320, height = 240 }
        Time interval between frame: 1/30, 1/15, 1/1, 
{ discrete: width = 160, height = 120 }
        Time interval between frame: 1/20, 
{ discrete: width = 176, height = 144 }
        Time interval between frame: 1/15, 
{ discrete: width = 352, height = 288 }
        Time interval between frame: 1/30, 1/15, 1/1, 
vid:0458 
pid:7076 
driver:uvcvideo
checking format: 1196444237
VIDIOC_G_COMP:: Invalid argument
   compression control not supported
fps is set to 1/30
drawing controls

fps is set to 1/30

> 
> Regards,
> Paulo
_______________________________________________
> > Linux-uvc-devel mailing list
> > Linux-uvc-devel <at> lists.berlios.de
> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> >
> 






From pj.assis at gmail.com  Fri Feb 18 15:10:55 2011
From: pj.assis at gmail.com (Paulo Assis)
Date: Fri, 18 Feb 2011 14:10:55 +0000
Subject: [Linux-uvc-devel] WebCam configuration on Kubuntu 10.10
In-Reply-To: <loom.20110218T124308-662@post.gmane.org>
References: <loom.20110211T170158-928@post.gmane.org>
	<201102151838.14939.laurent.pinchart@ideasonboard.com>
	<loom.20110215T220410-379@post.gmane.org>
	<loom.20110218T002610-646@post.gmane.org>
	<AANLkTinp6Ueh+kuzcF1S_kO4s82YLPsGXujBvnzeJO0M@mail.gmail.com>
	<AANLkTimLD12UJ55nZUSG1ePdVEnqkz8AKMFWQFfaaVFT@mail.gmail.com>
	<loom.20110218T124308-662@post.gmane.org>
Message-ID: <AANLkTi=2FTF_5fe6e4sQ1nb4yG-+LAPhiO0HNsp5bnsU@mail.gmail.com>

Everything looks fine here, I see no error messages (maybe you should
have set the device parameter: guvcview --device=video1 --verbose).
Do you have any other usb devices connected to your system besides the
integrated webcam?
If so, try disabling them, if you could also disable the integrated
webcam (maybe in BIOS) it would be great.

Regards,
Paulo

2011/2/18 Modysama <asmaa.elassal.student at pua.edu.eg>:
> Paulo Assis <pj.assis <at> gmail.com> writes:
>
>>
>> Hi, I find strange the following output from luvcview:
>>
>> Frame format: YUYV (MJPG is not supported by device)
>>
>> Your lsusb output seems to indicate that MJPG is indeed supported.
>
> Thanks, sir for being helpful.
> I just want to cleare something .
> Luvcview
> Is open the hp integrate camera not my usb webcam.
>
>>
>> Could you post the output of guvcview --verbose?
>> This should list all video formats available in your device (and the
>> ones converted by libv4l)
>
> sok at sok-HP-ProBook-4520s:~$ guvcview --verbose
> guvcview 1.4.1
> video_device: /dev/video0
> vid_sleep: 0
> cap_meth: 1
> resolution: 176 x 144
> windowsize: 512 x 700
> vert pane: 578
> spin behavior: 0
> mode: yuyv
> fps: 1/30
> Display Fps: 0
> bpp: 0
> hwaccel: 1
> avi_format: 0
> sound: 1
> sound Device: 0
> sound samp rate: 0
> sound Channels: 0
> Sound delay: 0 nanosec
> Sound Format: 80
> Pan Step: 2 degrees
> Tilt Step: 2 degrees
> Video Filter Flags: 0
> image inc: 0
> profile(default):/home/sok/default.gpfl
> starting portaudio...
> Cannot connect to server socket err = No such file or directory
> Cannot connect to server socket
> jack server is not running or cannot be started
> language catalog=> dir:/usr/share/locale type:UTF-8 lang:en_US.UTF-8
> cat:guvcview.mo
> yuyv: setting format to 1448695129
> capture method = 1
> video device: /dev/video0
> /dev/video0 - device 1
> /dev/video1 - device 2
> Init. HP Webcam [2 MP Fixed] (location: usb-0000:00:1a.0-1.5)
> { pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
> { discrete: width = 640, height = 480 }
> ? ? ? ?Time interval between frame: 1/30,
> { discrete: width = 176, height = 144 }
> ? ? ? ?Time interval between frame: 1/30,
> { discrete: width = 320, height = 240 }
> ? ? ? ?Time interval between frame: 1/30,
> { discrete: width = 1024, height = 768 }
> ? ? ? ?Time interval between frame: 1/10,
> { discrete: width = 1280, height = 720 }
> ? ? ? ?Time interval between frame: 1/8,
> { discrete: width = 1280, height = 1024 }
> ? ? ? ?Time interval between frame: 1/8,
> { discrete: width = 1600, height = 900 }
> ? ? ? ?Time interval between frame: 1/5,
> { discrete: width = 1600, height = 1200 }
> ? ? ? ?Time interval between frame: 1/5,
> { discrete: width = 640, height = 480 }
> ? ? ? ?Time interval between frame: 1/30,
> { pixelformat = 'RGB3', description = 'RGB3' }
> { discrete: width = 640, height = 480 }
> ? ? ? ?Time interval between frame: 1/30,
> { discrete: width = 176, height = 144 }
> ? ? ? ?Time interval between frame: 1/30,
> { discrete: width = 320, height = 240 }
> ? ? ? ?Time interval between frame: 1/30,
> { discrete: width = 1024, height = 768 }
> ? ? ? ?Time interval between frame: 1/10,
> { discrete: width = 1280, height = 720 }
> ? ? ? ?Time interval between frame: 1/8,
> { discrete: width = 1280, height = 1024 }
> ? ? ? ?Time interval between frame: 1/8,
> { discrete: width = 1600, height = 900 }
> ? ? ? ?Time interval between frame: 1/5,
> { discrete: width = 1600, height = 1200 }
> ? ? ? ?Time interval between frame: 1/5,
> { pixelformat = 'BGR3', description = 'BGR3' }
> { discrete: width = 640, height = 480 }
> ? ? ? ?Time interval between frame: 1/30,
> { discrete: width = 176, height = 144 }
> ? ? ? ?Time interval between frame: 1/30,
> { discrete: width = 320, height = 240 }
> ? ? ? ?Time interval between frame: 1/30,
> { discrete: width = 1024, height = 768 }
> ? ? ? ?Time interval between frame: 1/10,
> { discrete: width = 1280, height = 720 }
> ? ? ? ?Time interval between frame: 1/8,
> { discrete: width = 1280, height = 1024 }
> ? ? ? ?Time interval between frame: 1/8,
> { discrete: width = 1600, height = 900 }
> ? ? ? ?Time interval between frame: 1/5,
> { discrete: width = 1600, height = 1200 }
> ? ? ? ?Time interval between frame: 1/5,
> { pixelformat = 'YU12', description = 'YU12' }
> { discrete: width = 640, height = 480 }
> ? ? ? ?Time interval between frame: 1/30,
> { discrete: width = 176, height = 144 }
> ? ? ? ?Time interval between frame: 1/30,
> { discrete: width = 320, height = 240 }
> ? ? ? ?Time interval between frame: 1/30,
> { discrete: width = 1024, height = 768 }
> ? ? ? ?Time interval between frame: 1/10,
> { discrete: width = 1280, height = 720 }
> ? ? ? ?Time interval between frame: 1/8,
> { discrete: width = 1280, height = 1024 }
> ? ? ? ?Time interval between frame: 1/8,
> { discrete: width = 1600, height = 900 }
> ? ? ? ?Time interval between frame: 1/5,
> { discrete: width = 1600, height = 1200 }
> ? ? ? ?Time interval between frame: 1/5,
> { pixelformat = 'YV12', description = 'YV12' }
> { discrete: width = 640, height = 480 }
> ? ? ? ?Time interval between frame: 1/30,
> { discrete: width = 176, height = 144 }
> ? ? ? ?Time interval between frame: 1/30,
> { discrete: width = 320, height = 240 }
> ? ? ? ?Time interval between frame: 1/30,
> { discrete: width = 1024, height = 768 }
> ? ? ? ?Time interval between frame: 1/10,
> { discrete: width = 1280, height = 720 }
> ? ? ? ?Time interval between frame: 1/8,
> { discrete: width = 1280, height = 1024 }
> ? ? ? ?Time interval between frame: 1/8,
> { discrete: width = 1600, height = 900 }
> ? ? ? ?Time interval between frame: 1/5,
> { discrete: width = 1600, height = 1200 }
> ? ? ? ?Time interval between frame: 1/5,
> vid:05c8
> pid:0403
> driver:uvcvideo
> checking format: 1448695129
> fps is set to 1/30
> drawing controls
>
> control[0]: 0x980900 ?Brightness, -64:64:1, default 0
> control[0]: 0x980901 ?Contrast, 0:64:1, default 25
> control[0]: 0x980902 ?Saturation, 0:128:1, default 64
> control[0]: 0x980903 ?Hue, -40:40:1, default 0
> control[0]: 0x98090c ?White Balance Temperature, Auto, 0:1:1, default 1
> control[0]: 0x980910 ?Gamma, 72:500:1, default 100
> control[0]: 0x980918 ?Power Line Frequency, 0:2:1, default 2
> control[0]: 0x98091a ?White Balance Temperature, 2800:6500:1, default 4000
> control[0]: 0x98091b ?Sharpness, 0:5:1, default 2
> control[0]: 0x98091c ?Backlight Compensation, 0:1:1, default 0
> control[0]: 0x9a0903 ?Exposure, Auto Priority, 0:1:1, default 0
> resolutions of format(1) = 9
> frame rates of 2? resolution=1
> fps is set to 1/30
> Def. Res: 1 ?numb. fps:1
> --------------------------------------- device #0
> Name ? ? ? ? ? ? ? ? ? ? = HDA Intel: STAC92xx Analog (hw:0,0)
> Host API ? ? ? ? ? ? ? ? = ALSA
> Max inputs = 2, Max outputs = 2
> Def. low input latency ? = ? ?0.012
> Def. low output latency ?= ? ?0.012
> Def. high input latency ?= ? ?0.046
> Def. high output latency = ? ?0.046
> Def. sample rate ? ? ? ? = 44100.00
> --------------------------------------- device #1
> Name ? ? ? ? ? ? ? ? ? ? = HDA ATI HDMI: ATI HDMI (hw:1,3)
> Host API ? ? ? ? ? ? ? ? = ALSA
> Max inputs = 0, Max outputs = 2
> Def. low input latency ? = ? -1.000
> Def. low output latency ?= ? ?0.012
> Def. high input latency ?= ? -1.000
> Def. high output latency = ? ?0.046
> Def. sample rate ? ? ? ? = 44100.00
> --------------------------------------- device #2
> Name ? ? ? ? ? ? ? ? ? ? = FaceCam 312: USB Audio (hw:2,0)
> Host API ? ? ? ? ? ? ? ? = ALSA
> Max inputs = 1, Max outputs = 0
> Def. low input latency ? = ? ?0.011
> Def. low output latency ?= ? -1.000
> Def. high input latency ?= ? ?0.043
> Def. high output latency = ? -1.000
> Def. sample rate ? ? ? ? = 48000.00
> --------------------------------------- device #3
> Name ? ? ? ? ? ? ? ? ? ? = front
> Host API ? ? ? ? ? ? ? ? = ALSA
> Max inputs = 0, Max outputs = 2
> Def. low input latency ? = ? -1.000
> Def. low output latency ?= ? ?0.012
> Def. high input latency ?= ? -1.000
> Def. high output latency = ? ?0.046
> Def. sample rate ? ? ? ? = 44100.00
> --------------------------------------- device #4
> Name ? ? ? ? ? ? ? ? ? ? = surround40
> Host API ? ? ? ? ? ? ? ? = ALSA
> Max inputs = 0, Max outputs = 2
> Def. low input latency ? = ? -1.000
> Def. low output latency ?= ? ?0.012
> Def. high input latency ?= ? -1.000
> Def. high output latency = ? ?0.046
> Def. sample rate ? ? ? ? = 44100.00
> --------------------------------------- device #5
> Name ? ? ? ? ? ? ? ? ? ? = surround51
> Host API ? ? ? ? ? ? ? ? = ALSA
> Max inputs = 0, Max outputs = 2
> Def. low input latency ? = ? -1.000
> Def. low output latency ?= ? ?0.012
> Def. high input latency ?= ? -1.000
> Def. high output latency = ? ?0.046
> Def. sample rate ? ? ? ? = 44100.00
> --------------------------------------- device #6
> Name ? ? ? ? ? ? ? ? ? ? = surround71
> Host API ? ? ? ? ? ? ? ? = ALSA
> Max inputs = 0, Max outputs = 2
> Def. low input latency ? = ? -1.000
> Def. low output latency ?= ? ?0.012
> Def. high input latency ?= ? -1.000
> Def. high output latency = ? ?0.046
> Def. sample rate ? ? ? ? = 44100.00
> --------------------------------------- device #7
> Name ? ? ? ? ? ? ? ? ? ? = pulse
> Host API ? ? ? ? ? ? ? ? = ALSA
> Max inputs = 32, Max outputs = 32
> Def. low input latency ? = ? ?0.012
> Def. low output latency ?= ? ?0.012
> Def. high input latency ?= ? ?0.046
> Def. high output latency = ? ?0.046
> Def. sample rate ? ? ? ? = 44100.00
> --------------------------------------- device #8
> Name ? ? ? ? ? ? ? ? ? ? = dmix
> Host API ? ? ? ? ? ? ? ? = ALSA
> Max inputs = 0, Max outputs = 2
> Def. low input latency ? = ? -1.000
> Def. low output latency ?= ? ?0.043
> Def. high input latency ?= ? -1.000
> Def. high output latency = ? ?0.043
> Def. sample rate ? ? ? ? = 48000.00
> --------------------------------------- device #9
> [ Default Input, Default Output ]
> Name ? ? ? ? ? ? ? ? ? ? = default
> Host API ? ? ? ? ? ? ? ? = ALSA
> Max inputs = 32, Max outputs = 32
> Def. low input latency ? = ? ?0.012
> Def. low output latency ?= ? ?0.012
> Def. high input latency ?= ? ?0.046
> Def. high output latency = ? ?0.046
> Def. sample rate ? ? ? ? = 44100.00
> ----------------------------------------------
> SampleRate:0 Channels:0
> Video driver: x11
> A window manager is available
> guvcview 1.4.1
> Cannot connect to server socket err = No such file or directory
> Cannot connect to server socket
> jack server is not running or cannot be started
> video device: /dev/video1
> /dev/video0 - device 1
> /dev/video1 - device 2
> Init. FaceCam 312 (location: usb-0000:00:1d.0-1.1)
> { pixelformat = 'MJPG', description = 'MJPEG' }
> { discrete: width = 640, height = 480 }
> ? ? ? ?Time interval between frame: 1/30, 1/15, 1/1,
> { discrete: width = 320, height = 240 }
> ? ? ? ?Time interval between frame: 1/30, 1/15, 1/1,
> { discrete: width = 160, height = 120 }
> ? ? ? ?Time interval between frame: 1/30, 1/15, 1/1,
> { discrete: width = 176, height = 144 }
> ? ? ? ?Time interval between frame: 1/30, 1/15, 1/1,
> { discrete: width = 352, height = 288 }
> ? ? ? ?Time interval between frame: 1/30, 1/15, 1/1,
> { pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
> { discrete: width = 320, height = 240 }
> ? ? ? ?Time interval between frame: 1/5,
> { discrete: width = 160, height = 120 }
> ? ? ? ?Time interval between frame: 1/20,
> { discrete: width = 176, height = 144 }
> ? ? ? ?Time interval between frame: 1/15,
> { discrete: width = 352, height = 288 }
> ? ? ? ?Time interval between frame: 1/4,
> { pixelformat = 'RGB3', description = 'RGB3' }
> { discrete: width = 640, height = 480 }
> ? ? ? ?Time interval between frame: 1/30, 1/15, 1/1,
> { discrete: width = 320, height = 240 }
> ? ? ? ?Time interval between frame: 1/30, 1/15, 1/1,
> { discrete: width = 160, height = 120 }
> ? ? ? ?Time interval between frame: 1/20,
> { discrete: width = 176, height = 144 }
> ? ? ? ?Time interval between frame: 1/15,
> { discrete: width = 352, height = 288 }
> ? ? ? ?Time interval between frame: 1/30, 1/15, 1/1,
> { pixelformat = 'BGR3', description = 'BGR3' }
> { discrete: width = 640, height = 480 }
> ? ? ? ?Time interval between frame: 1/30, 1/15, 1/1,
> { discrete: width = 320, height = 240 }
> ? ? ? ?Time interval between frame: 1/30, 1/15, 1/1,
> { discrete: width = 160, height = 120 }
> ? ? ? ?Time interval between frame: 1/20,
> { discrete: width = 176, height = 144 }
> ? ? ? ?Time interval between frame: 1/15,
> { discrete: width = 352, height = 288 }
> ? ? ? ?Time interval between frame: 1/30, 1/15, 1/1,
> { pixelformat = 'YU12', description = 'YU12' }
> { discrete: width = 640, height = 480 }
> ? ? ? ?Time interval between frame: 1/30, 1/15, 1/1,
> { discrete: width = 320, height = 240 }
> ? ? ? ?Time interval between frame: 1/30, 1/15, 1/1,
> { discrete: width = 160, height = 120 }
> ? ? ? ?Time interval between frame: 1/20,
> { discrete: width = 176, height = 144 }
> ? ? ? ?Time interval between frame: 1/15,
> { discrete: width = 352, height = 288 }
> ? ? ? ?Time interval between frame: 1/30, 1/15, 1/1,
> { pixelformat = 'YV12', description = 'YV12' }
> { discrete: width = 640, height = 480 }
> ? ? ? ?Time interval between frame: 1/30, 1/15, 1/1,
> { discrete: width = 320, height = 240 }
> ? ? ? ?Time interval between frame: 1/30, 1/15, 1/1,
> { discrete: width = 160, height = 120 }
> ? ? ? ?Time interval between frame: 1/20,
> { discrete: width = 176, height = 144 }
> ? ? ? ?Time interval between frame: 1/15,
> { discrete: width = 352, height = 288 }
> ? ? ? ?Time interval between frame: 1/30, 1/15, 1/1,
> vid:0458
> pid:7076
> driver:uvcvideo
> checking format: 1196444237
> VIDIOC_G_COMP:: Invalid argument
> ? compression control not supported
> fps is set to 1/30
> drawing controls
>
> fps is set to 1/30
>
>>
>> Regards,
>> Paulo
> _______________________________________________
>> > Linux-uvc-devel mailing list
>> > Linux-uvc-devel <at> lists.berlios.de
>> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>> >
>>
>
>
>
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From stephan.lachowsky at maxim-ic.com  Sat Feb 19 01:57:25 2011
From: stephan.lachowsky at maxim-ic.com (Stephan Lachowsky)
Date: Fri, 18 Feb 2011 16:57:25 -0800
Subject: [Linux-uvc-devel] [PATCH RFC] uvcvideo: Add support for MPEG-2
	TS payload
In-Reply-To: <201102181156.09061.laurent.pinchart@ideasonboard.com>
References: <1296243305.17673.20.camel@svmlwks101>
	<201102171703.17164.laurent.pinchart@ideasonboard.com>
	<1297963118.2620.36.camel@svmlwks101>
	<201102181156.09061.laurent.pinchart@ideasonboard.com>
Message-ID: <1DE7EE94-2763-483E-8064-BE554A635544@maxim-ic.com>

Hi Laurent,

On Feb 18, 2011, at 2:56 AM, Laurent Pinchart wrote:

> Hi Stephan,
> 
> On Thursday 17 February 2011 18:18:38 Stephan Lachowsky wrote:
>> On Thu, 2011-02-17 at 08:03 -0800, Laurent Pinchart wrote:
>>> On Friday 28 January 2011 20:35:05 Stephan Lachowsky wrote:
>>>> Parse the UVC 1.0 and UVC 1.1 VS_FORMAT_MPEG2TS descriptors.
>>>> This a stream based format, so we generate a dummy frame descriptor
>>>> with a dummy frame interval range.
>>> 
>>> Thanks for the patch, and sorry for the late reply.
>> 
>> No worries, just glad to have the moss knocked off the stone.
>> 
>>> Don't you also need to implement support for the V4L2 MPEG CIDs ? I would
>>> expect the driver to support at least the controls used to select the
>>> MPEG format (MPEG2, TS), even if they're hardcoded to MPEG2-TS.
>> 
>> That would be possible, for the stream type there is your choice of
>> MPEG2-TS so that is trivial. There are a very limited set of
>> standardized controls that can be mapped: wKeyFrameRate, wPFrameRate,
>> wCompQuality from the VS probe/commit (GOP size, B frames, bitrate).
>> 
>> Since these controls are optional in the spec, and an overly simplistic
>> projection of the encoder's actual configuration space, device
>> manufactures (typically) choose instead to use custom XUs that expose
>> richer more representative ones.
>> 
>> Given this state of affairs, I think it would be prudent to blindly
>> forward the data stream (Which is all, in essence, this patch enables)
>> leaving the configuration to userspace.
>> 
>> I'm not suggesting we preclude adding XU -> MPEG2 CID mappings into
>> uvcvideo later, just that as is this is a valuable step forward.
> 
> I agree with this, but I would still implement support for the 
> V4L2_CID_MPEG_STREAM_TYPE control. MPEG applications expect it to be 
> supported.
> 

Ok, this is reasonable: expect another patch for the control next week.

Stephan


From asmaa.elassal.student at pua.edu.eg  Sat Feb 19 02:00:30 2011
From: asmaa.elassal.student at pua.edu.eg (Modysama)
Date: Sat, 19 Feb 2011 01:00:30 +0000 (UTC)
Subject: [Linux-uvc-devel] WebCam configuration on Kubuntu 10.10
References: <loom.20110211T170158-928@post.gmane.org>
	<201102151838.14939.laurent.pinchart@ideasonboard.com>
	<loom.20110215T220410-379@post.gmane.org>
	<loom.20110218T002610-646@post.gmane.org>
	<AANLkTinp6Ueh+kuzcF1S_kO4s82YLPsGXujBvnzeJO0M@mail.gmail.com>
	<AANLkTimLD12UJ55nZUSG1ePdVEnqkz8AKMFWQFfaaVFT@mail.gmail.com>
	<loom.20110218T124308-662@post.gmane.org>
	<AANLkTi=2FTF_5fe6e4sQ1nb4yG-+LAPhiO0HNsp5bnsU@mail.gmail.com>
Message-ID: <loom.20110219T015543-246@post.gmane.org>

Paulo Assis <pj.assis <at> gmail.com> writes:
Hello, sir.
> 
> Everything looks fine here, I see no error messages (maybe you should
> have set the device parameter: guvcview --device=video1 --verbose).

The problem appears when changing the resolution:
A window manager is available
setting new resolution (320 x 240)
cleaning buffer allocations
checking format: 1196444237
VIDIOC_G_COMP:: Invalid argument
   compression control not supported
libv4l2: error turning on stream: No space left on device
VIDIOC_STREAMON - Unable to start capture: No space left on device
libv4l2: error turning on stream: Device or resource busy
VIDIOC_STREAMON - Unable to start capture: Device or resource busy
libv4l2: error turning on stream: Device or resource busy
VIDIOC_STREAMON - Unable to start capture: Device or resource busy
Thread terminated...
cleaning Thread allocations: 100%
SDL Quit
Shuting Down Thread
Video Thread finished
write /home/sok/.guvcviewrc-video1 OK
free audio mutex
closed v4l2 strutures
free controls
free controls - vidState
cleaned allocations - 100%
Closing portaudio ...OK
Closing GTK... OK

Also it supported to be worked in that resolution.
> Do you have any other usb devices connected to your system besides the
> integrated webcam?

I already unplugged the usb mouse. Now have no addition usb devices.
But I faild to disable the integrated 
webcam on kubuntu.And still the problem.
Is that propably , that problem refere to my HP laptop?!

> If so, try disabling them, if you could also disable the integrated
> webcam (maybe in BIOS) it would be great.
> 
> Regards,
> Paulo
>



From pj.assis at gmail.com  Sat Feb 19 11:38:12 2011
From: pj.assis at gmail.com (Paulo Assis)
Date: Sat, 19 Feb 2011 10:38:12 +0000
Subject: [Linux-uvc-devel] WebCam configuration on Kubuntu 10.10
In-Reply-To: <loom.20110219T015543-246@post.gmane.org>
References: <loom.20110211T170158-928@post.gmane.org>
	<201102151838.14939.laurent.pinchart@ideasonboard.com>
	<loom.20110215T220410-379@post.gmane.org>
	<loom.20110218T002610-646@post.gmane.org>
	<AANLkTinp6Ueh+kuzcF1S_kO4s82YLPsGXujBvnzeJO0M@mail.gmail.com>
	<AANLkTimLD12UJ55nZUSG1ePdVEnqkz8AKMFWQFfaaVFT@mail.gmail.com>
	<loom.20110218T124308-662@post.gmane.org>
	<AANLkTi=2FTF_5fe6e4sQ1nb4yG-+LAPhiO0HNsp5bnsU@mail.gmail.com>
	<loom.20110219T015543-246@post.gmane.org>
Message-ID: <AANLkTi=92L9uM-bCXbnNxkSMmwvmbnH1pEypotyWZh+k@mail.gmail.com>

Hi,

> The problem appears when changing the resolution:
Are you saying it works on a higher resolution but falls on a lower one?

The fix bandwidth quirk only works on uncompressed streams (yuv), if
you pick mjpg or any other format (libv4l will convert from mjpg) then
this quirk is useless.
Make sure you use the yuyv format.

Regards,
Paulo

> A window manager is available
> setting new resolution (320 x 240)
> cleaning buffer allocations
> checking format: 1196444237
> VIDIOC_G_COMP:: Invalid argument
> ? compression control not supported
> libv4l2: error turning on stream: No space left on device
> VIDIOC_STREAMON - Unable to start capture: No space left on device
> libv4l2: error turning on stream: Device or resource busy
> VIDIOC_STREAMON - Unable to start capture: Device or resource busy
> libv4l2: error turning on stream: Device or resource busy
> VIDIOC_STREAMON - Unable to start capture: Device or resource busy
> Thread terminated...
> cleaning Thread allocations: 100%
> SDL Quit
> Shuting Down Thread
> Video Thread finished
> write /home/sok/.guvcviewrc-video1 OK
> free audio mutex
> closed v4l2 strutures
> free controls
> free controls - vidState
> cleaned allocations - 100%
> Closing portaudio ...OK
> Closing GTK... OK
>
> Also it supported to be worked in that resolution.
>> Do you have any other usb devices connected to your system besides the
>> integrated webcam?
>
> I already unplugged the usb mouse. Now have no addition usb devices.
> But I faild to disable the integrated
> webcam on kubuntu.And still the problem.
> Is that propably , that problem refere to my HP laptop?!
>
>> If so, try disabling them, if you could also disable the integrated
>> webcam (maybe in BIOS) it would be great.
>>
>> Regards,
>> Paulo
>>
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From laurent.pinchart at ideasonboard.com  Sat Feb 19 13:22:10 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Sat, 19 Feb 2011 13:22:10 +0100
Subject: [Linux-uvc-devel] WebCam configuration on Kubuntu 10.10
In-Reply-To: <loom.20110215T220410-379@post.gmane.org>
References: <loom.20110211T170158-928@post.gmane.org>
	<201102151838.14939.laurent.pinchart@ideasonboard.com>
	<loom.20110215T220410-379@post.gmane.org>
Message-ID: <201102191322.10972.laurent.pinchart@ideasonboard.com>

On Tuesday 15 February 2011 22:12:09 modysama wrote:
> Laurent Pinchart  writes:
> > On Friday 11 February 2011 17:30:32 modysama wrote:

[snip]

> > > modysama <at> ubuntu:~$ cheese
> > > libv4l2: error turning on stream: No space left on device
> > 
> > Do you get the exact same error with the other software you've tested ?
> > What about luvcview ?
> 
> root at sok-HP-ProBook-4520s:/home/sok# luvcview
> luvcview 0.2.6
> 
> No protocol specified
> No protocol specified
> init kbd.
> SDL information:
>   Video driver: fbcon
>   Hardware surfaces are available (4224k video memory)
> Device information:
>   Device path:  /dev/video0
> Stream settings:
>   Frame format: YUYV (MJPG is not supported by device)
>   Frame size:   640x480
>   Frame rate:   30 fps
> Segmentation fault
> root at sok-HP-ProBook-4520s:/home/sok#

From the guvcview --verbose output you posted in another e-mail, it looks like 
you have two cameras connected to your computer. If you constantly mix the two 
it will be difficult to help you. Please redo your tests with the correct 
camera, and post the results.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Sat Feb 19 13:23:23 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Sat, 19 Feb 2011 13:23:23 +0100
Subject: [Linux-uvc-devel] yavta (Was: Re: uvcvideo problem when
	changing grab size in a WebCam SCB-0370N (Samsung SF510))
In-Reply-To: <20110216123838.GA25730@sunshine.barsnick.net>
References: <20110216123838.GA25730@sunshine.barsnick.net>
Message-ID: <201102191323.23963.laurent.pinchart@ideasonboard.com>

On Wednesday 16 February 2011 13:38:38 Moritz Barsnick wrote:
> On Tue, Feb 15, 2011 at 19:58:12 +0100, Laurent Pinchart wrote:
> > What happen if you try to capture images in the problematic resolution
> > with a test software such as yavta (git.ideasonboard.com) ?
> 
> Wow, I wasn't aware of this neat little tool. It has so many
> advantages:
> - no SDL dependency like luvcview
> - no big chunk of dependencies like guvcview (which is otherwise really
>   great, especially since it's not restricted to UVC anymore)
> - no age-old tool like those from the xawtv suite (which some distros
>   don't package anymore).
> 
> Would it enumerate resolutions and frame rates like {l,g}uvcview do? (I
> only tested on a TV V4L device, my webcam is blocked.)

--enum-formats should do that.

> Do you mind if I submit a patch or two for some things that came to
> mind, notably error reporting?

Patches are welcome :-)

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Sat Feb 19 13:28:06 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Sat, 19 Feb 2011 13:28:06 +0100
Subject: [Linux-uvc-devel] yavta (Was: Re: uvcvideo problem when
	changing grab size in a WebCam SCB-0370N (Samsung SF510))
In-Reply-To: <4D5CE3D6.6020408@dit.upm.es>
References: <20110216123838.GA25730@sunshine.barsnick.net>
	<4D5CE3D6.6020408@dit.upm.es>
Message-ID: <201102191328.07050.laurent.pinchart@ideasonboard.com>

Hi Gabriel,

On Thursday 17 February 2011 10:01:10 Gabriel Huecas wrote:
> Dear Laurent, Moritz,
> 
> This is the output of my program, I think information is pretty clear,
> you may see that grab sizes are correctly detected (enclosed below).
> The last messages are warnings trying to set YUV420P (I try this by
> default, but I can handle yuv422 as well, through libv4l2 and
> libv4lconvert),
> 
> The relevant lines is:
>  >>  [2011/01/20 17:46:37] +++......grab sizes: 5 discrete values:
> 640x480 352x288 320x240 176x144 160x120
> 
> (I request grab size for each pixelformat, maybe an overwork)
> 
> The sizes are correctly request. I can get this lines with DEBUG on, so
> each ioctl can be properly debugged, let me know if you need more
> information,

You haven't answered my question. What happens if you try to capture images in 
the problematic resolution with a test software such as yavta 
(git.ideasonboard.com) ?

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Sat Feb 19 13:32:04 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Sat, 19 Feb 2011 13:32:04 +0100
Subject: [Linux-uvc-devel] HP Pavillion DV3 WebCam
In-Reply-To: <AANLkTi=kXC5V4uARwM1YjY9rm4fPSJXALmiwrN8BK623@mail.gmail.com>
References: <AANLkTimF0ucM69vHaSf7Dxu4-=0Mw1b63KSXnEm69xY1@mail.gmail.com>
	<AANLkTinxAR=YQZB352AS4TnY3BO0LZVHpKX3qmY+ykTA@mail.gmail.com>
	<AANLkTi=kXC5V4uARwM1YjY9rm4fPSJXALmiwrN8BK623@mail.gmail.com>
Message-ID: <201102191332.05234.laurent.pinchart@ideasonboard.com>

Hi Carlos,

On Wednesday 16 February 2011 11:24:16 Paulo Assis wrote:
> 2011/2/15 Carlos Silva <r3pek at r3pek.org>:
> > On Tue, Feb 1, 2011 at 23:32, Carlos Silva <r3pek at r3pek.org> wrote:
> >> Hi,
> >> I recently bought an HP Pavillion DV3 laptop that has an integrated
> >> webcam. After searching a while I found out that the webcam is an UVC
> >> webcam but it isn't on the list of supported cams.
> >> This is the usb entry of lsusb:
> >> Bus 002 Device 004: ID 174f:1118 Syntek
> >> 
> >> I added the usb vendor + product id to the driver like this:
> >>         /* Syntek (HP Pavillion dv3) */
> >>         { .match_flags          = USB_DEVICE_ID_MATCH_DEVICE
> >>                                 | USB_DEVICE_ID_MATCH_INT_INFO,
> >>           .idVendor             = 0x174f,
> >>           .idProduct            = 0x1118,
> >>           .bInterfaceClass      = USB_CLASS_VIDEO,
> >>           .bInterfaceSubClass   = 1,
> >>           .bInterfaceProtocol   = 0,
> >>           .driver_info          = UVC_QUIRK_STREAM_NO_FID },
> 
> You shouldn't really need to add this, if you want to test driver
> quirks just pass them when loading the driver module, in this case:
> 
> modprobe uvcvideo quirks=0x00000010
> 
> or for a permanent change just create /etc/modprobe.d/uvcvideo.conf
> and add the following line:
> options uvcvideo quirks=0x00000010
> 
> >> The device is recognized by the driver:
> >> uvcvideo: Found UVC 1.00 device HP Webcam (174f:1118)
> >> 
> >> Now I have a problem. When I try to use it, the "in use" led from the
> >> camera lights up, but software doesn't receive any image (stays black
> >> all the time).
> >> Here is my dmesg:
> >> uvcvideo: Failed to resubmit video URB (-1).
> >> uvcvideo: Trying format 0x56595559 (YUYV): 640x480.
> >> uvcvideo: Using default frame interval 41666.6 us (24.0 fps).
> >> uvcvideo: Setting frame interval to 1/24 (416666).
> >> uvcvideo: Trying format 0x56595559 (YUYV): 640x480.
> >> ^^ This last 2 lines repeat themself several times (the first one has
> >> got my attention but I don't know what's the problem)
> >> Attached is a log of "guvcview" program starting and closing. After it
> >> starts, it starts printing the errors:
> >>  Could not grab image (select timeout): Resource temporarily unavailable
> >>  Could not grab image (select timeout): Resource temporarily unavailable
> >>  Could not grab image (select timeout): Resource temporarily unavailable
> >>  Could not grab image (select timeout): Resource temporarily unavailable
> >>  Could not grab image (select timeout): Resource temporarily unavailable
> >> 
> >> Any pointers on how can I help getting this camera supported on the
> >> driver?
> 
> Did you try it without the quirk ? Not all syntek cameras require it:
> http://lists.berlios.de/pipermail/linux-uvc-devel/2009-March/004705.html

If the quirk turns out to be required I'll add it to the driver, but please 
try without it first.

> also increasing the driver verbosity would be helpful, just add
> trace=65535 to the driver options.

Could you please also send me the output of

lsusb -v -d 174f:1118

(running as root if possible) ?

-- 
Regards,

Laurent Pinchart


From asmaa.elassal.student at pua.edu.eg  Sat Feb 19 14:51:02 2011
From: asmaa.elassal.student at pua.edu.eg (modysama)
Date: Sat, 19 Feb 2011 13:51:02 +0000 (UTC)
Subject: [Linux-uvc-devel] WebCam configuration on Kubuntu 10.10
References: <loom.20110211T170158-928@post.gmane.org>
	<201102151838.14939.laurent.pinchart@ideasonboard.com>
	<loom.20110215T220410-379@post.gmane.org>
	<201102191322.10972.laurent.pinchart@ideasonboard.com>
Message-ID: <loom.20110219T144443-327@post.gmane.org>

I want to disable or remove the integrated hp camera on my laptop. 
But I don't know how disabling it on 
Kubuntu.
How it in details, please?

However it works out of box on another mini hp with also integrated camera.



From asmaa.elassal.student at pua.edu.eg  Sat Feb 19 15:05:40 2011
From: asmaa.elassal.student at pua.edu.eg (modysama)
Date: Sat, 19 Feb 2011 14:05:40 +0000 (UTC)
Subject: [Linux-uvc-devel] WebCam configuration on Kubuntu 10.10
References: <loom.20110211T170158-928@post.gmane.org>
	<201102151838.14939.laurent.pinchart@ideasonboard.com>
	<loom.20110215T220410-379@post.gmane.org>
	<loom.20110218T002610-646@post.gmane.org>
	<AANLkTinp6Ueh+kuzcF1S_kO4s82YLPsGXujBvnzeJO0M@mail.gmail.com>
	<AANLkTimLD12UJ55nZUSG1ePdVEnqkz8AKMFWQFfaaVFT@mail.gmail.com>
	<loom.20110218T124308-662@post.gmane.org>
	<AANLkTi=2FTF_5fe6e4sQ1nb4yG-+LAPhiO0HNsp5bnsU@mail.gmail.com>
	<loom.20110219T015543-246@post.gmane.org>
	<AANLkTi=92L9uM-bCXbnNxkSMmwvmbnH1pEypotyWZh+k@mail.gmail.com>
Message-ID: <loom.20110219T145651-859@post.gmane.org>

Paulo Assis <pj.assis <at> gmail.com> writes:

> > The problem appears when changing the resolution:
> Are you saying it works on a higher resolution but falls on a lower one?

The problem:
____________
Webcam work only on """guvcview"""" in only """"resolutions:
170*144
160*120 

The output format is "mjpg". yuyv doesn't make it work.

That webcam works out of box on anther HP-but mini hp- with the same kernel 
with also another integrated 
camera and in all its supported resolutions and in several chat programs.
I don't know whats wrong. Is the problem in my laptop!!

sok at sok-HP-ProBook-4520s:~$ gstreamer-properties
gstreamer-properties-Message: Skipping unavailable plugin 'alsasink'
gstreamer-properties-Message: Skipping unavailable plugin 'artsdsink'
gstreamer-properties-Message: Skipping unavailable plugin 'esdsink'
gstreamer-properties-Message: Skipping unavailable plugin 'sunaudiosink'
gstreamer-properties-Message: Skipping unavailable plugin 'glimagesink'
gstreamer-properties-Message: Skipping unavailable plugin 'sdlvideosink'
gstreamer-properties-Message: Skipping unavailable plugin 'v4lmjpegsrc'
gstreamer-properties-Message: Skipping unavailable plugin 'qcamsrc'
gstreamer-properties-Message: Skipping unavailable plugin 'alsasrc'
gstreamer-properties-Message: Skipping unavailable plugin 'esdmon'
gstreamer-properties-Message: Skipping unavailable plugin 'sunaudiosrc'
libv4l2: error turning on stream: Input/output error
gstreamer-properties-Message: Error running pipeline 'Video for Linux 2 (v4l2)': 
Error starting streaming on device '/dev/video1'. [gstv4l2object.c(1983):
 gst_v4l2_object_start_streaming (): /GstPipelineipeline0/GstV4l2Src:v4l2src1:
system error: Input/output error]

Thank you.



From barsnick at gmx.net  Sat Feb 19 17:02:33 2011
From: barsnick at gmx.net (Moritz Barsnick)
Date: Sat, 19 Feb 2011 17:02:33 +0100
Subject: [Linux-uvc-devel] yavta
In-Reply-To: <201102191323.23963.laurent.pinchart@ideasonboard.com>
References: <20110216123838.GA25730@sunshine.barsnick.net>
	<201102191323.23963.laurent.pinchart@ideasonboard.com>
Message-ID: <20110219160233.GA6387@sunshine.barsnick.net>

Hi Laurent,

On Sat, Feb 19, 2011 at 13:23:23 +0100, Laurent Pinchart wrote:
> > Would it enumerate resolutions and frame rates like {l,g}uvcview do? (I
> > only tested on a TV V4L device, my webcam is blocked.)
> 
> --enum-formats should do that.

Indeed it does. I had the chance to try now. Cool!

Many thanks,
Moritz


From pj.assis at gmail.com  Sat Feb 19 22:09:08 2011
From: pj.assis at gmail.com (Paulo Assis)
Date: Sat, 19 Feb 2011 21:09:08 +0000
Subject: [Linux-uvc-devel] WebCam configuration on Kubuntu 10.10
In-Reply-To: <loom.20110219T145651-859@post.gmane.org>
References: <loom.20110211T170158-928@post.gmane.org>
	<201102151838.14939.laurent.pinchart@ideasonboard.com>
	<loom.20110215T220410-379@post.gmane.org>
	<loom.20110218T002610-646@post.gmane.org>
	<AANLkTinp6Ueh+kuzcF1S_kO4s82YLPsGXujBvnzeJO0M@mail.gmail.com>
	<AANLkTimLD12UJ55nZUSG1ePdVEnqkz8AKMFWQFfaaVFT@mail.gmail.com>
	<loom.20110218T124308-662@post.gmane.org>
	<AANLkTi=2FTF_5fe6e4sQ1nb4yG-+LAPhiO0HNsp5bnsU@mail.gmail.com>
	<loom.20110219T015543-246@post.gmane.org>
	<AANLkTi=92L9uM-bCXbnNxkSMmwvmbnH1pEypotyWZh+k@mail.gmail.com>
	<loom.20110219T145651-859@post.gmane.org>
Message-ID: <AANLkTin5xCb655LHD3i94WFY-a3b7G0jRZ78TQ4xqqJK@mail.gmail.com>

Hi,

2011/2/19 modysama <asmaa.elassal.student at pua.edu.eg>:
> Paulo Assis <pj.assis <at> gmail.com> writes:
>
>> > The problem appears when changing the resolution:
>> Are you saying it works on a higher resolution but falls on a lower one?
>
> The problem:
> ____________
> Webcam work only on """guvcview"""" in only """"resolutions:
> 170*144
> 160*120
>
> The output format is "mjpg". yuyv doesn't make it work.
>

Ok this is definitely a bandwidth issue.

> That webcam works out of box on anther HP-but mini hp- with the same kernel
> with also another integrated
> camera and in all its supported resolutions and in several chat programs.
> I don't know whats wrong. Is the problem in my laptop!!
>

I would recommend you checking your bios configuration, specially your
usb settings.
The integrated camera will only be a problem when streaming, so I
doubt this is the cause behind your problem.

I would be interested in dmesg output from the working laptop, just to
check if the camera is added as a full speed or high speed device.

Regards,
Paulo

> sok at sok-HP-ProBook-4520s:~$ gstreamer-properties
> gstreamer-properties-Message: Skipping unavailable plugin 'alsasink'
> gstreamer-properties-Message: Skipping unavailable plugin 'artsdsink'
> gstreamer-properties-Message: Skipping unavailable plugin 'esdsink'
> gstreamer-properties-Message: Skipping unavailable plugin 'sunaudiosink'
> gstreamer-properties-Message: Skipping unavailable plugin 'glimagesink'
> gstreamer-properties-Message: Skipping unavailable plugin 'sdlvideosink'
> gstreamer-properties-Message: Skipping unavailable plugin 'v4lmjpegsrc'
> gstreamer-properties-Message: Skipping unavailable plugin 'qcamsrc'
> gstreamer-properties-Message: Skipping unavailable plugin 'alsasrc'
> gstreamer-properties-Message: Skipping unavailable plugin 'esdmon'
> gstreamer-properties-Message: Skipping unavailable plugin 'sunaudiosrc'
> libv4l2: error turning on stream: Input/output error
> gstreamer-properties-Message: Error running pipeline 'Video for Linux 2 (v4l2)':
> Error starting streaming on device '/dev/video1'. [gstv4l2object.c(1983):
> ?gst_v4l2_object_start_streaming (): /GstPipelineipeline0/GstV4l2Src:v4l2src1:
> system error: Input/output error]
>
> Thank you.
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From gustavob at pilar-ciudad.com.ar  Sat Feb 19 22:49:34 2011
From: gustavob at pilar-ciudad.com.ar (gustavo battiti)
Date: Sat, 19 Feb 2011 18:49:34 -0300
Subject: [Linux-uvc-devel] genius eface1300
Message-ID: <20110219184934.244108bf@gus>

I want to notice you that I have a genius eface1300 webcam working so
fine, both cam and micro, under Debian Lenny with custom kernel 2.6.32
compiled with the UVC modular driver. 
[    5.881421] usbcore: registered new interface driver uvcvideo
[  399.291173] uvcvideo 1-4:1.0: usb_probe_interface
[  399.291179] uvcvideo 1-4:1.0: usb_probe_interface - got id
[  399.291205] uvcvideo: Found UVC 1.00 device eFace 1300 (0458:707c)

gustavo


From asmaa.elassal.student at pua.edu.eg  Sat Feb 19 23:39:17 2011
From: asmaa.elassal.student at pua.edu.eg (modysama)
Date: Sat, 19 Feb 2011 22:39:17 +0000 (UTC)
Subject: [Linux-uvc-devel] WebCam configuration on Kubuntu 10.10
References: <loom.20110211T170158-928@post.gmane.org>
	<201102151838.14939.laurent.pinchart@ideasonboard.com>
	<loom.20110215T220410-379@post.gmane.org>
	<loom.20110218T002610-646@post.gmane.org>
	<AANLkTinp6Ueh+kuzcF1S_kO4s82YLPsGXujBvnzeJO0M@mail.gmail.com>
	<AANLkTimLD12UJ55nZUSG1ePdVEnqkz8AKMFWQFfaaVFT@mail.gmail.com>
	<loom.20110218T124308-662@post.gmane.org>
	<AANLkTi=2FTF_5fe6e4sQ1nb4yG-+LAPhiO0HNsp5bnsU@mail.gmail.com>
	<loom.20110219T015543-246@post.gmane.org>
	<AANLkTi=92L9uM-bCXbnNxkSMmwvmbnH1pEypotyWZh+k@mail.gmail.com>
	<loom.20110219T145651-859@post.gmane.org>
	<AANLkTin5xCb655LHD3i94WFY-a3b7G0jRZ78TQ4xqqJK@mail.gmail.com>
Message-ID: <loom.20110219T233726-298@post.gmane.org>

Paulo Assis <pj.assis <at> gmail.com> writes:

> 
> Hi,
> 
> 2011/2/19 modysama <asmaa.elassal.student <at> pua.edu.eg>:
> > Paulo Assis <pj.assis <at> gmail.com> writes:
> >
> >> > The problem appears when changing the resolution:
> >> Are you saying it works on a higher resolution but falls on a lower one?
> >
> > The problem:
> > ____________
> > Webcam work only on """guvcview"""" in only """"resolutions:
> > 170*144
> > 160*120
> >
> > The output format is "mjpg". yuyv doesn't make it work.
> >
> 
> Ok this is definitely a bandwidth issue.
> 
> > That webcam works out of box on anther HP-but mini hp- with the same kernel
> > with also another integrated
> > camera and in all its supported resolutions and in several chat programs.
> > I don't know whats wrong. Is the problem in my laptop!!
> >
> 
> I would recommend you checking your bios configuration, specially your
> usb settings.
> The integrated camera will only be a problem when streaming, so I
> doubt this is the cause behind your problem.
> 
> I would be interested in dmesg output from the working laptop, just to
> check if the camera is added as a full speed or high speed device.
> 
> Regards,
> Paulo

Hi,
modysama at ubuntu:~$ dmesg | grep video
[    1.072354] pci 0000:01:00.0: Boot video device
[   16.828371] Linux video capture interface: v2.00
[   16.855169] uvcvideo: Found UVC 1.00 device HP Webcam [2 MP Fixed] (05c8:0403)
[   16.855173] uvcvideo: Forcing device quirks to 0x80 by module parameter for
testing purpose.
[   16.855176] uvcvideo: Please report required quirks to the linux-uvc-devel
mailing list.
[   16.872704] usbcore: registered new interface driver uvcvideo
[  645.219163] uvcvideo: Found UVC 1.00 device FaceCam 312 (0458:7076)
[  645.219169] uvcvideo: Forcing device quirks to 0x80 by module parameter for
testing purpose.
[  645.219175] uvcvideo: Please report required quirks to the linux-uvc-devel
mailing list.
[  661.755987] uvcvideo: Failed to submit URB 0 (-28).
[  665.638474] uvcvideo: Failed to submit URB 0 (-28).
[  669.394923] uvcvideo: Failed to submit URB 0 (-28).
[  685.515586] uvcvideo: Failed to submit URB 0 (-28).
[ 1481.612178] uvcvideo: Failed to submit URB 0 (-28).
[ 1500.938069] uvcvideo: Failed to submit URB 0 (-28).
[ 1504.605183] uvcvideo: Failed to submit URB 0 (-28).
[ 1806.297974] uvcvideo: Failed to submit URB 0 (-28).
[ 2135.434620] uvcvideo: Failed to submit URB 0 (-28).
[ 7667.769636] uvcvideo: Failed to submit URB 0 (-28).
[ 7671.844673] uvcvideo: Failed to submit URB 0 (-28).
[ 8431.580540] uvcvideo: Failed to submit URB 0 (-28).
[ 8443.404832] uvcvideo: Failed to submit URB 0 (-28).
[12659.793266] uvcvideo: Found UVC 1.00 device FaceCam 312 (0458:7076)
[12659.793273] uvcvideo: Forcing device quirks to 0x80 by module parameter for
testing purpose.
[12659.793278] uvcvideo: Please report required quirks to the linux-uvc-devel
mailing list.
[13083.417260] uvcvideo: Found UVC 1.00 device FaceCam 312 (0458:7076)
[13083.417267] uvcvideo: Forcing device quirks to 0x80 by module parameter for
testing purpose.
[13083.417272] uvcvideo: Please report required quirks to the linux-uvc-devel
mailing list.
[13083.451097] uvcvideo: Failed to query (135) UVC control 3 (unit 3) : -32
(exp. 2).
[13083.454342] uvcvideo: Failed to query (130) UVC control 3 (unit 3) : -32
(exp. 2).
[13083.457711] uvcvideo: Failed to query (130) UVC control 3 (unit 3) : -32
(exp. 2).
[13083.460952] uvcvideo: Failed to query (130) UVC control 3 (unit 3) : -32
(exp. 2).
[13083.464321] uvcvideo: Failed to query (130) UVC control 3 (unit 3) : -32
(exp. 2).
[13549.310085] uvcvideo: Found UVC 1.00 device FaceCam 312 (0458:7076)
[13549.310091] uvcvideo: Forcing device quirks to 0x80 by module parameter for
testing purpose.
[13549.310096] uvcvideo: Please report required quirks to the linux-uvc-devel
mailing list.
[13549.343695] uvcvideo: Failed to query (135) UVC control 3 (unit 3) : -32
(exp. 2).
[13549.347071] uvcvideo: Failed to query (130) UVC control 3 (unit 3) : -32
(exp. 2).
[13549.350441] uvcvideo: Failed to query (130) UVC control 3 (unit 3) : -32
(exp. 2).
[13549.353678] uvcvideo: Failed to query (130) UVC control 3 (unit 3) : -32
(exp. 2).
[13549.357086] uvcvideo: Failed to query (130) UVC control 3 (unit 3) : -32
(exp. 2).
[15264.444474] uvcvideo: Found UVC 1.00 device FaceCam 312 (0458:7076)
[15264.444478] uvcvideo: Forcing device quirks to 0x80 by module parameter for
testing purpose.
[15264.444480] uvcvideo: Please report required quirks to the linux-uvc-devel
mailing list.
[15264.478638] uvcvideo: Failed to query (130) UVC control 3 (unit 3) : -32
(exp. 2).
[15264.481929] uvcvideo: Failed to query (130) UVC control 3 (unit 3) : -32
(exp. 2).
[15264.485183] uvcvideo: Failed to query (130) UVC control 3 (unit 3) : -32
(exp. 2).
[15264.488291] uvcvideo: Failed to query (130) UVC control 3 (unit 3) : -32
(exp. 2).
[15264.489039] uvcvideo: Failed to query (135) UVC control 3 (unit 3) : -32
(exp. 2).
[15264.588381] uvcvideo: Failed to query (130) UVC control 3 (unit 3) : -32
(exp. 2).
[15264.589610] uvcvideo: Failed to query (135) UVC control 3 (unit 3) : -32
(exp. 2).





From r3pek at r3pek.org  Sun Feb 20 00:13:08 2011
From: r3pek at r3pek.org (Carlos Silva)
Date: Sat, 19 Feb 2011 22:13:08 -0100
Subject: [Linux-uvc-devel] HP Pavillion DV3 WebCam
In-Reply-To: <201102191332.05234.laurent.pinchart@ideasonboard.com>
References: <AANLkTimF0ucM69vHaSf7Dxu4-=0Mw1b63KSXnEm69xY1@mail.gmail.com>
	<AANLkTinxAR=YQZB352AS4TnY3BO0LZVHpKX3qmY+ykTA@mail.gmail.com>
	<AANLkTi=kXC5V4uARwM1YjY9rm4fPSJXALmiwrN8BK623@mail.gmail.com>
	<201102191332.05234.laurent.pinchart@ideasonboard.com>
Message-ID: <AANLkTi=4CEyGytG0zZzBAkHB35HEnpwHfwajPcFSPmdp@mail.gmail.com>

On Sat, Feb 19, 2011 at 11:32, Laurent Pinchart <
laurent.pinchart at ideasonboard.com> wrote:

> Hi Carlos,
>
> On Wednesday 16 February 2011 11:24:16 Paulo Assis wrote:
> > 2011/2/15 Carlos Silva <r3pek at r3pek.org>:
> > > On Tue, Feb 1, 2011 at 23:32, Carlos Silva <r3pek at r3pek.org> wrote:
> > >> Hi,
> > >> I recently bought an HP Pavillion DV3 laptop that has an integrated
> > >> webcam. After searching a while I found out that the webcam is an UVC
> > >> webcam but it isn't on the list of supported cams.
> > >> This is the usb entry of lsusb:
> > >> Bus 002 Device 004: ID 174f:1118 Syntek
> > >>
> > >> I added the usb vendor + product id to the driver like this:
> > >>         /* Syntek (HP Pavillion dv3) */
> > >>         { .match_flags          = USB_DEVICE_ID_MATCH_DEVICE
> > >>                                 | USB_DEVICE_ID_MATCH_INT_INFO,
> > >>           .idVendor             = 0x174f,
> > >>           .idProduct            = 0x1118,
> > >>           .bInterfaceClass      = USB_CLASS_VIDEO,
> > >>           .bInterfaceSubClass   = 1,
> > >>           .bInterfaceProtocol   = 0,
> > >>           .driver_info          = UVC_QUIRK_STREAM_NO_FID },
> >
> > You shouldn't really need to add this, if you want to test driver
> > quirks just pass them when loading the driver module, in this case:
> >
> > modprobe uvcvideo quirks=0x00000010
> >
> > or for a permanent change just create /etc/modprobe.d/uvcvideo.conf
> > and add the following line:
> > options uvcvideo quirks=0x00000010
> >
> > >> The device is recognized by the driver:
> > >> uvcvideo: Found UVC 1.00 device HP Webcam (174f:1118)
> > >>
> > >> Now I have a problem. When I try to use it, the "in use" led from the
> > >> camera lights up, but software doesn't receive any image (stays black
> > >> all the time).
> > >> Here is my dmesg:
> > >> uvcvideo: Failed to resubmit video URB (-1).
> > >> uvcvideo: Trying format 0x56595559 (YUYV): 640x480.
> > >> uvcvideo: Using default frame interval 41666.6 us (24.0 fps).
> > >> uvcvideo: Setting frame interval to 1/24 (416666).
> > >> uvcvideo: Trying format 0x56595559 (YUYV): 640x480.
> > >> ^^ This last 2 lines repeat themself several times (the first one has
> > >> got my attention but I don't know what's the problem)
> > >> Attached is a log of "guvcview" program starting and closing. After it
> > >> starts, it starts printing the errors:
> > >>  Could not grab image (select timeout): Resource temporarily
> unavailable
> > >>  Could not grab image (select timeout): Resource temporarily
> unavailable
> > >>  Could not grab image (select timeout): Resource temporarily
> unavailable
> > >>  Could not grab image (select timeout): Resource temporarily
> unavailable
> > >>  Could not grab image (select timeout): Resource temporarily
> unavailable
> > >>
> > >> Any pointers on how can I help getting this camera supported on the
> > >> driver?
> >
> > Did you try it without the quirk ? Not all syntek cameras require it:
> > http://lists.berlios.de/pipermail/linux-uvc-devel/2009-March/004705.html
>
> If the quirk turns out to be required I'll add it to the driver, but please
> try without it first.
>

Well, all I did as add as copy/paste and change the usbid to match my
device's.
I really don't know what a quirk is nor if it is needed...


>
> > also increasing the driver verbosity would be helpful, just add
> > trace=65535 to the driver options.
>
> Could you please also send me the output of
>
> lsusb -v -d 174f:1118
>
> (running as root if possible) ?
>

Sure,

 # lsusb -v -d 174f:1118

Bus 002 Device 004: ID 174f:1118 Syntek
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x174f Syntek
  idProduct          0x1118
  bcdDevice            4.21
  iManufacturer           1 D-MAX
  iProduct                2 HP Webcam
  iSerial                 3 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          471
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               2 HP Webcam
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              2 HP Webcam
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           80
        dwClockFrequency       48.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000000
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 2
        bSourceID               1
        wMaxMultiplier      16384
        bControlSize            2
        bmControls     0x0000157f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Power Line Frequency
          White Balance Temperature, Auto
        iProcessing             0
        bmVideoStandards     0x1d
          None
          PAL - 625/50
          SECAM - 625/50
          NTSC - 625/50
      VideoControl Interface Descriptor:
        bLength                29
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 3
        guidExtensionCode         {82066163-7050-ab49-b8cc-b3855e8d221d}
        bNumControl             0
        bNrPins                 1
        baSourceID( 0)          2
        bControlSize            4
        bmControls( 0)       0xff
        bmControls( 1)       0xff
        bmControls( 2)       0x04
        bmControls( 3)       0x00
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             4
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               3
        iTerminal               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x87  EP 7 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               8
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                         1
        wTotalLength                      168
        bEndPointAddress                  129
        bmInfo                              0
        bTerminalLink                       4
        bStillCaptureMethod                 2
        bTriggerSupport                     1
        bTriggerUsage                       0
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                3
        guidFormat
 {59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 2 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                 58982400
        dwMaxBitRate                117964800
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         416666
        bFrameIntervalType                  2
        dwFrameInterval( 0)            416666
        dwFrameInterval( 1)            833333
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                  3686400
        dwMaxBitRate                  7372800
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         416666
        bFrameIntervalType                  2
        dwFrameInterval( 0)            416666
        dwFrameInterval( 1)            833333
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                 14745600
        dwMaxBitRate                 29491200
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         416666
        bFrameIntervalType                  2
        dwFrameInterval( 0)            416666
        dwFrameInterval( 1)            833333
      VideoStreaming Interface Descriptor:
        bLength                            19
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               3
        wWidth( 0)                        640
        wHeight( 0)                       480
        wWidth( 1)                        160
        wHeight( 1)                       120
        wWidth( 2)                        320
        wHeight( 2)                       240
        bNumCompressionPatterns             3
        bCompression( 0)                    1
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x00c0  1x 192 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0180  1x 384 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0280  1x 640 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x03b0  1x 944 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       7
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0a80  2x 640 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       8
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b20  2x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       9
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0be0  2x 992 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting      10
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1380  3x 896 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting      11
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x13fc  3x 1020 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110219/49bf3957/attachment.html>

From r3pek at r3pek.org  Sun Feb 20 00:50:04 2011
From: r3pek at r3pek.org (Carlos Silva)
Date: Sat, 19 Feb 2011 22:50:04 -0100
Subject: [Linux-uvc-devel] HP Pavillion DV3 WebCam
In-Reply-To: <AANLkTi=4CEyGytG0zZzBAkHB35HEnpwHfwajPcFSPmdp@mail.gmail.com>
References: <AANLkTimF0ucM69vHaSf7Dxu4-=0Mw1b63KSXnEm69xY1@mail.gmail.com>
	<AANLkTinxAR=YQZB352AS4TnY3BO0LZVHpKX3qmY+ykTA@mail.gmail.com>
	<AANLkTi=kXC5V4uARwM1YjY9rm4fPSJXALmiwrN8BK623@mail.gmail.com>
	<201102191332.05234.laurent.pinchart@ideasonboard.com>
	<AANLkTi=4CEyGytG0zZzBAkHB35HEnpwHfwajPcFSPmdp@mail.gmail.com>
Message-ID: <AANLkTinaFWGZbx=0Cse0qP4WjyeY7+C+-f-++ZXyA1bo@mail.gmail.com>

OK, just tested with no quirks and it works. Want me to send a patch for it?

On Sat, Feb 19, 2011 at 22:13, Carlos Silva <r3pek at r3pek.org> wrote:

> On Sat, Feb 19, 2011 at 11:32, Laurent Pinchart <
> laurent.pinchart at ideasonboard.com> wrote:
>
>> Hi Carlos,
>>
>> On Wednesday 16 February 2011 11:24:16 Paulo Assis wrote:
>> > 2011/2/15 Carlos Silva <r3pek at r3pek.org>:
>> > > On Tue, Feb 1, 2011 at 23:32, Carlos Silva <r3pek at r3pek.org> wrote:
>> > >> Hi,
>> > >> I recently bought an HP Pavillion DV3 laptop that has an integrated
>> > >> webcam. After searching a while I found out that the webcam is an UVC
>> > >> webcam but it isn't on the list of supported cams.
>> > >> This is the usb entry of lsusb:
>> > >> Bus 002 Device 004: ID 174f:1118 Syntek
>> > >>
>> > >> I added the usb vendor + product id to the driver like this:
>> > >>         /* Syntek (HP Pavillion dv3) */
>> > >>         { .match_flags          = USB_DEVICE_ID_MATCH_DEVICE
>> > >>                                 | USB_DEVICE_ID_MATCH_INT_INFO,
>> > >>           .idVendor             = 0x174f,
>> > >>           .idProduct            = 0x1118,
>> > >>           .bInterfaceClass      = USB_CLASS_VIDEO,
>> > >>           .bInterfaceSubClass   = 1,
>> > >>           .bInterfaceProtocol   = 0,
>> > >>           .driver_info          = UVC_QUIRK_STREAM_NO_FID },
>> >
>> > You shouldn't really need to add this, if you want to test driver
>> > quirks just pass them when loading the driver module, in this case:
>> >
>> > modprobe uvcvideo quirks=0x00000010
>> >
>> > or for a permanent change just create /etc/modprobe.d/uvcvideo.conf
>> > and add the following line:
>> > options uvcvideo quirks=0x00000010
>> >
>> > >> The device is recognized by the driver:
>> > >> uvcvideo: Found UVC 1.00 device HP Webcam (174f:1118)
>> > >>
>> > >> Now I have a problem. When I try to use it, the "in use" led from the
>> > >> camera lights up, but software doesn't receive any image (stays black
>> > >> all the time).
>> > >> Here is my dmesg:
>> > >> uvcvideo: Failed to resubmit video URB (-1).
>> > >> uvcvideo: Trying format 0x56595559 (YUYV): 640x480.
>> > >> uvcvideo: Using default frame interval 41666.6 us (24.0 fps).
>> > >> uvcvideo: Setting frame interval to 1/24 (416666).
>> > >> uvcvideo: Trying format 0x56595559 (YUYV): 640x480.
>> > >> ^^ This last 2 lines repeat themself several times (the first one has
>> > >> got my attention but I don't know what's the problem)
>> > >> Attached is a log of "guvcview" program starting and closing. After
>> it
>> > >> starts, it starts printing the errors:
>> > >>  Could not grab image (select timeout): Resource temporarily
>> unavailable
>> > >>  Could not grab image (select timeout): Resource temporarily
>> unavailable
>> > >>  Could not grab image (select timeout): Resource temporarily
>> unavailable
>> > >>  Could not grab image (select timeout): Resource temporarily
>> unavailable
>> > >>  Could not grab image (select timeout): Resource temporarily
>> unavailable
>> > >>
>> > >> Any pointers on how can I help getting this camera supported on the
>> > >> driver?
>> >
>> > Did you try it without the quirk ? Not all syntek cameras require it:
>> >
>> http://lists.berlios.de/pipermail/linux-uvc-devel/2009-March/004705.html
>>
>> If the quirk turns out to be required I'll add it to the driver, but
>> please
>> try without it first.
>>
>
> Well, all I did as add as copy/paste and change the usbid to match my
> device's.
> I really don't know what a quirk is nor if it is needed...
>
>
>>
>> > also increasing the driver verbosity would be helpful, just add
>> > trace=65535 to the driver options.
>>
>> Could you please also send me the output of
>>
>> lsusb -v -d 174f:1118
>>
>> (running as root if possible) ?
>>
>
> Sure,
>
>  # lsusb -v -d 174f:1118
>
> Bus 002 Device 004: ID 174f:1118 Syntek
> Device Descriptor:
>   bLength                18
>   bDescriptorType         1
>   bcdUSB               2.00
>   bDeviceClass          239 Miscellaneous Device
>   bDeviceSubClass         2 ?
>   bDeviceProtocol         1 Interface Association
>   bMaxPacketSize0        64
>   idVendor           0x174f Syntek
>   idProduct          0x1118
>   bcdDevice            4.21
>   iManufacturer           1 D-MAX
>   iProduct                2 HP Webcam
>   iSerial                 3 0
>   bNumConfigurations      1
>   Configuration Descriptor:
>     bLength                 9
>     bDescriptorType         2
>     wTotalLength          471
>     bNumInterfaces          2
>     bConfigurationValue     1
>     iConfiguration          0
>     bmAttributes         0x80
>       (Bus Powered)
>     MaxPower              500mA
>     Interface Association:
>       bLength                 8
>       bDescriptorType        11
>       bFirstInterface         0
>       bInterfaceCount         2
>       bFunctionClass         14 Video
>       bFunctionSubClass       3 Video Interface Collection
>       bFunctionProtocol       0
>       iFunction               2 HP Webcam
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       0
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      1 Video Control
>       bInterfaceProtocol      0
>       iInterface              2 HP Webcam
>       VideoControl Interface Descriptor:
>         bLength                13
>         bDescriptorType        36
>         bDescriptorSubtype      1 (HEADER)
>         bcdUVC               1.00
>         wTotalLength           80
>         dwClockFrequency       48.000000MHz
>         bInCollection           1
>         baInterfaceNr( 0)       1
>       VideoControl Interface Descriptor:
>         bLength                18
>         bDescriptorType        36
>         bDescriptorSubtype      2 (INPUT_TERMINAL)
>         bTerminalID             1
>         wTerminalType      0x0201 Camera Sensor
>         bAssocTerminal          0
>         iTerminal               0
>         wObjectiveFocalLengthMin      0
>         wObjectiveFocalLengthMax      0
>         wOcularFocalLength            0
>         bControlSize                  3
>         bmControls           0x00000000
>       VideoControl Interface Descriptor:
>         bLength                11
>         bDescriptorType        36
>         bDescriptorSubtype      5 (PROCESSING_UNIT)
>       Warning: Descriptor too short
>         bUnitID                 2
>         bSourceID               1
>         wMaxMultiplier      16384
>         bControlSize            2
>         bmControls     0x0000157f
>            Brightness
>           Contrast
>           Hue
>           Saturation
>           Sharpness
>           Gamma
>           White Balance Temperature
>           Backlight Compensation
>           Power Line Frequency
>           White Balance Temperature, Auto
>         iProcessing             0
>         bmVideoStandards     0x1d
>           None
>           PAL - 625/50
>           SECAM - 625/50
>           NTSC - 625/50
>       VideoControl Interface Descriptor:
>         bLength                29
>         bDescriptorType        36
>         bDescriptorSubtype      6 (EXTENSION_UNIT)
>         bUnitID                 3
>         guidExtensionCode         {82066163-7050-ab49-b8cc-b3855e8d221d}
>         bNumControl             0
>         bNrPins                 1
>         baSourceID( 0)          2
>         bControlSize            4
>         bmControls( 0)       0xff
>         bmControls( 1)       0xff
>         bmControls( 2)       0x04
>         bmControls( 3)       0x00
>          iExtension              0
>       VideoControl Interface Descriptor:
>         bLength                 9
>         bDescriptorType        36
>         bDescriptorSubtype      3 (OUTPUT_TERMINAL)
>         bTerminalID             4
>         wTerminalType      0x0101 USB Streaming
>         bAssocTerminal          0
>         bSourceID               3
>         iTerminal               0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x87  EP 7 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0010  1x 16 bytes
>         bInterval               8
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       0
>       bNumEndpoints           0
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       VideoStreaming Interface Descriptor:
>         bLength                            14
>         bDescriptorType                    36
>         bDescriptorSubtype                  1 (INPUT_HEADER)
>         bNumFormats                         1
>         wTotalLength                      168
>         bEndPointAddress                  129
>         bmInfo                              0
>         bTerminalLink                       4
>         bStillCaptureMethod                 2
>         bTriggerSupport                     1
>         bTriggerUsage                       0
>         bControlSize                        1
>         bmaControls( 0)                    27
>       VideoStreaming Interface Descriptor:
>         bLength                            27
>         bDescriptorType                    36
>         bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
>         bFormatIndex                        1
>         bNumFrameDescriptors                3
>         guidFormat
>  {59555932-0000-1000-8000-00aa00389b71}
>         bBitsPerPixel                      16
>         bDefaultFrameIndex                  1
>         bAspectRatioX                       0
>         bAspectRatioY                       0
>         bmInterlaceFlags                 0x00
>           Interlaced stream or variable: No
>           Fields per frame: 2 fields
>           Field 1 first: No
>           Field pattern: Field 1 only
>           bCopyProtect                      0
>       VideoStreaming Interface Descriptor:
>         bLength                            34
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         1
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                            640
>         wHeight                           480
>         dwMinBitRate                 58982400
>         dwMaxBitRate                117964800
>         dwMaxVideoFrameBufferSize      614400
>         dwDefaultFrameInterval         416666
>         bFrameIntervalType                  2
>         dwFrameInterval( 0)            416666
>         dwFrameInterval( 1)            833333
>       VideoStreaming Interface Descriptor:
>         bLength                            34
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         2
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                            160
>         wHeight                           120
>         dwMinBitRate                  3686400
>         dwMaxBitRate                  7372800
>         dwMaxVideoFrameBufferSize       38400
>         dwDefaultFrameInterval         416666
>         bFrameIntervalType                  2
>         dwFrameInterval( 0)            416666
>         dwFrameInterval( 1)            833333
>       VideoStreaming Interface Descriptor:
>         bLength                            34
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         3
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                            320
>         wHeight                           240
>         dwMinBitRate                 14745600
>         dwMaxBitRate                 29491200
>         dwMaxVideoFrameBufferSize      153600
>         dwDefaultFrameInterval         416666
>         bFrameIntervalType                  2
>         dwFrameInterval( 0)            416666
>         dwFrameInterval( 1)            833333
>       VideoStreaming Interface Descriptor:
>         bLength                            19
>         bDescriptorType                    36
>         bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
>         bEndpointAddress                    0
>         bNumImageSizePatterns               3
>         wWidth( 0)                        640
>         wHeight( 0)                       480
>         wWidth( 1)                        160
>         wHeight( 1)                       120
>         wWidth( 2)                        320
>         wHeight( 2)                       240
>         bNumCompressionPatterns             3
>         bCompression( 0)                    1
>       VideoStreaming Interface Descriptor:
>         bLength                             6
>         bDescriptorType                    36
>         bDescriptorSubtype                 13 (COLORFORMAT)
>         bColorPrimaries                     1 (BT.709,sRGB)
>         bTransferCharacteristics            1 (BT.709)
>         bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       1
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>          bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x00c0  1x 192 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       2
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>          bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0180  1x 384 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       3
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>          bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0200  1x 512 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       4
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>          bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0280  1x 640 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       5
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>          bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0320  1x 800 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       6
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>          bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x03b0  1x 944 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       7
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>          bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0a80  2x 640 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       8
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>          bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0b20  2x 800 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       9
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>          bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0be0  2x 992 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting      10
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>          bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x1380  3x 896 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting      11
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>          bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x13fc  3x 1020 bytes
>         bInterval               1
> Device Qualifier (for other device speed):
>   bLength                10
>   bDescriptorType         6
>   bcdUSB               2.00
>   bDeviceClass          239 Miscellaneous Device
>   bDeviceSubClass         2 ?
>   bDeviceProtocol         1 Interface Association
>   bMaxPacketSize0        64
>   bNumConfigurations      1
> Device Status:     0x0000
>   (Bus Powered)
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110219/fbed980a/attachment.html>

From philip at gladstonefamily.net  Sun Feb 20 21:57:24 2011
From: philip at gladstonefamily.net (Philip Gladstone)
Date: Sun, 20 Feb 2011 15:57:24 -0500
Subject: [Linux-uvc-devel] Logitech C910 -- trying to run more than one.
Message-ID: <4D618034.5030807@gladstonefamily.net>

I attached two C910s to a small linux box, and ran into the 'Failed to 
submit URB' problem.

When I look at the descriptors for this camera, I think I understand the 
problem. I'm capturing at 5 Mpixels and I'm trying two cameras.

       VideoStreaming Interface Descriptor:
         bLength                            38
         bDescriptorType                    36
         bDescriptorSubtype                  7 (FRAME_MJPEG)
         bFrameIndex                        28
         bmCapabilities                   0x01
           Still image supported
         wWidth                           2592
         wHeight                          1944
         dwMinBitRate                403107840
         dwMaxBitRate                806215680
         dwMaxVideoFrameBufferSize    10077696
         dwDefaultFrameInterval        1000000
         bFrameIntervalType                  3
         dwFrameInterval( 0)           1000000
         dwFrameInterval( 1)           1333333
         dwFrameInterval( 2)           2000000

The video frame size is set to 10Mb. This is surprisingly large as 
actual frames captured with MJPEG on this camera are typically 500kb or 
less. When I checked the descriptor for the uncompressed version of the 
same frame, it came back with the same value of 
dwMaxVideoFrameBufferSize (effectively 16 bits per pixel). The values 
for min/max bit rate are (correctly) calculated from the frame intervals 
and the buffer size.

Typical JPEG compression gets down to 1 bit per pixel, and 2 bits is 
very unusual.

What I want to know is what the impact would be of defining a new QUIRK 
that overrode the frame buffer size for compressed frames and calculated 
them at (say) 2 bits per pixel?

Do other webcams get this right?

Thanks

Philip



From bug-track at fisher-privat.net  Mon Feb 21 08:46:18 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Mon, 21 Feb 2011 08:46:18 +0100
Subject: [Linux-uvc-devel] Logitech C910 -- trying to run more than one.
In-Reply-To: <4D618034.5030807@gladstonefamily.net>
References: <4D618034.5030807@gladstonefamily.net>
Message-ID: <1298274378.6370.7.camel@zwerg>

Am Sonntag, den 20.02.2011, 15:57 -0500 schrieb Philip Gladstone:
> I attached two C910s to a small linux box, and ran into the 'Failed to 
> submit URB' problem.
> 
> When I look at the descriptors for this camera, I think I understand the 
> problem. I'm capturing at 5 Mpixels and I'm trying two cameras.
> 
>        VideoStreaming Interface Descriptor:
>          bLength                            38
>          bDescriptorType                    36
>          bDescriptorSubtype                  7 (FRAME_MJPEG)
>          bFrameIndex                        28
>          bmCapabilities                   0x01
>            Still image supported
>          wWidth                           2592
>          wHeight                          1944
>          dwMinBitRate                403107840
>          dwMaxBitRate                806215680
>          dwMaxVideoFrameBufferSize    10077696
>          dwDefaultFrameInterval        1000000
>          bFrameIntervalType                  3
>          dwFrameInterval( 0)           1000000
>          dwFrameInterval( 1)           1333333
>          dwFrameInterval( 2)           2000000
> 
> The video frame size is set to 10Mb. This is surprisingly large as 
> actual frames captured with MJPEG on this camera are typically 500kb or 
> less. When I checked the descriptor for the uncompressed version of the 
> same frame, it came back with the same value of 
> dwMaxVideoFrameBufferSize (effectively 16 bits per pixel). The values 
> for min/max bit rate are (correctly) calculated from the frame intervals 
> and the buffer size.
> 
> Typical JPEG compression gets down to 1 bit per pixel, and 2 bits is 
> very unusual.
> 
> What I want to know is what the impact would be of defining a new QUIRK 
> that overrode the frame buffer size for compressed frames and calculated 
> them at (say) 2 bits per pixel?
> 
> Do other webcams get this right?

Tyke a look to the attached patch. Do you mean some thing like this?
-- 
Regards,
        Alexey
-------------- next part --------------
A non-text attachment was scrubbed...
Name: uvc.diff
Type: text/x-patch
Size: 799 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110221/de13649c/attachment.bin>

From radek at masin.eu  Mon Feb 21 11:22:51 2011
From: radek at masin.eu (=?utf-8?Q?Radek_Ma=C5=A1=C3=ADn?=)
Date: Mon, 21 Feb 2011 11:22:51 +0100
Subject: [Linux-uvc-devel] Logitech C910 -- trying to run more than one.
In-Reply-To: <4D618034.5030807@gladstonefamily.net>
References: <4D618034.5030807@gladstonefamily.net>
Message-ID: <1298283771608404500@masin.eu>

   Hello,
I have same problem. I have found, that C910 alocate whole USB bus and there is no possibility
to run two C910 in one USB controller, if you connect second C910 to different USB controllers both cameras
are working. 

Regards
Radek Masin
radek at masin.eu

Dne Ne, 20 ?no 2011 21:57 , Philip Gladstone <philip at gladstonefamily.net> napsal(a):
> I attached two C910s to a small linux box, and ran into the 'Failed to 
> submit URB' problem.
> 
> When I look at the descriptors for this camera, I think I understand the 
> problem. I'm capturing at 5 Mpixels and I'm trying two cameras.
> 
>        VideoStreaming Interface Descriptor:
>          bLength                            38
>          bDescriptorType                    36
>          bDescriptorSubtype                  7 (FRAME_MJPEG)
>          bFrameIndex                        28
>          bmCapabilities                   0x01
>            Still image supported
>          wWidth                           2592
>          wHeight                          1944
>          dwMinBitRate                403107840
>          dwMaxBitRate                806215680
>          dwMaxVideoFrameBufferSize    10077696
>          dwDefaultFrameInterval        1000000
>          bFrameIntervalType                  3
>          dwFrameInterval( 0)           1000000
>          dwFrameInterval( 1)           1333333
>          dwFrameInterval( 2)           2000000
> 
> The video frame size is set to 10Mb. This is surprisingly large as 
> actual frames captured with MJPEG on this camera are typically 500kb or 
> less. When I checked the descriptor for the uncompressed version of the 
> same frame, it came back with the same value of 
> dwMaxVideoFrameBufferSize (effectively 16 bits per pixel). The values 
> for min/max bit rate are (correctly) calculated from the frame intervals 
> and the buffer size.
> 
> Typical JPEG compression gets down to 1 bit per pixel, and 2 bits is 
> very unusual.
> 
> What I want to know is what the impact would be of defining a new QUIRK 
> that overrode the frame buffer size for compressed frames and calculated 
> them at (say) 2 bits per pixel?
> 
> Do other webcams get this right?
> 
> Thanks
> 
> Philip
> 
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110221/e8a1c65e/attachment.html>

From bug-track at fisher-privat.net  Mon Feb 21 11:34:24 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Mon, 21 Feb 2011 11:34:24 +0100
Subject: [Linux-uvc-devel] Logitech C910 -- trying to run more than one.
In-Reply-To: <1298274378.6370.7.camel@zwerg>
References: <4D618034.5030807@gladstonefamily.net>
	<1298274378.6370.7.camel@zwerg>
Message-ID: <1298284464.7594.20.camel@zwerg>

Am Montag, den 21.02.2011, 08:46 +0100 schrieb Alexey Fisher:
> Am Sonntag, den 20.02.2011, 15:57 -0500 schrieb Philip Gladstone:
> > I attached two C910s to a small linux box, and ran into the 'Failed to 
> > submit URB' problem.
> > 
> > When I look at the descriptors for this camera, I think I understand the 
> > problem. I'm capturing at 5 Mpixels and I'm trying two cameras.
> > 
> >        VideoStreaming Interface Descriptor:
> >          bLength                            38
> >          bDescriptorType                    36
> >          bDescriptorSubtype                  7 (FRAME_MJPEG)
> >          bFrameIndex                        28
> >          bmCapabilities                   0x01
> >            Still image supported
> >          wWidth                           2592
> >          wHeight                          1944
> >          dwMinBitRate                403107840
> >          dwMaxBitRate                806215680
> >          dwMaxVideoFrameBufferSize    10077696
> >          dwDefaultFrameInterval        1000000
> >          bFrameIntervalType                  3
> >          dwFrameInterval( 0)           1000000
> >          dwFrameInterval( 1)           1333333
> >          dwFrameInterval( 2)           2000000
> > 
> > The video frame size is set to 10Mb. This is surprisingly large as 
> > actual frames captured with MJPEG on this camera are typically 500kb or 
> > less. When I checked the descriptor for the uncompressed version of the 
> > same frame, it came back with the same value of 
> > dwMaxVideoFrameBufferSize (effectively 16 bits per pixel). The values 
> > for min/max bit rate are (correctly) calculated from the frame intervals 
> > and the buffer size.
> > 
> > Typical JPEG compression gets down to 1 bit per pixel, and 2 bits is 
> > very unusual.
> > 
> > What I want to know is what the impact would be of defining a new QUIRK 
> > that overrode the frame buffer size for compressed frames and calculated 
> > them at (say) 2 bits per pixel?
> > 
> > Do other webcams get this right?

Ok, i did some test with my webcam (046d:0991 Logitech, Inc. QuickCam
Pro for Notebooks). With normal conditions, get result with about 1bpp,
but it depend on framerate and captured image. Jpeg is really bad with
text, so i capteured moving text from command line on my display and i
got max 4bpp.

For my test i used this command:
gst-launch -v v4l2src ! image/jpeg,width=320,height=240 ! identity !
decodebin2 ! autovideosink

So it looks like we can recalculate buffer size for jpeg, but the
question is - why? If the cam still provide uncoressed stream it will
fail with big frame size, or it will fail with compressed but bigger
frame size. 

The question is, is it possible to make driver calculate the bandwidth
and recalculate it if second cam is inserted, and reduce possible frame
size?
I think not...

Any solution for this problem?

There is a mistake in previous patch, here is fixed one. Can you test it please?

-- 
Regards,
        Alexey
-------------- next part --------------
A non-text attachment was scrubbed...
Name: uvc.diff
Type: text/x-patch
Size: 1254 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110221/8f31c688/attachment.bin>

From gabriel at dit.upm.es  Mon Feb 21 11:47:21 2011
From: gabriel at dit.upm.es (Gabriel Huecas)
Date: Mon, 21 Feb 2011 11:47:21 +0100
Subject: [Linux-uvc-devel] yavta (Was: Re: uvcvideo problem when
 changing grab size in a WebCam SCB-0370N (Samsung SF510))
In-Reply-To: <201102191328.07050.laurent.pinchart@ideasonboard.com>
References: <20110216123838.GA25730@sunshine.barsnick.net>
	<4D5CE3D6.6020408@dit.upm.es>
	<201102191328.07050.laurent.pinchart@ideasonboard.com>
Message-ID: <4D6242B9.4040705@dit.upm.es>


Hi,

unfortunately, we no longer have the laptop available, was loaned
by Smasung for the WMC, and they have collected them last week,
I cannot execute yavta  ...

sorry for that, I do not know how we can progress... perhaps just sit
and wait for a twin to come up...

thank you very much, anyway,

Gabriel Huecas



El 19/02/2011 13:28, Laurent Pinchart escribi?:
> Hi Gabriel,
>
> On Thursday 17 February 2011 10:01:10 Gabriel Huecas wrote:
>> Dear Laurent, Moritz,
>>
>> This is the output of my program, I think information is pretty clear,
>> you may see that grab sizes are correctly detected (enclosed below).
>> The last messages are warnings trying to set YUV420P (I try this by
>> default, but I can handle yuv422 as well, through libv4l2 and
>> libv4lconvert),
>>
>> The relevant lines is:
>>   >>   [2011/01/20 17:46:37] +++......grab sizes: 5 discrete values:
>> 640x480 352x288 320x240 176x144 160x120
>>
>> (I request grab size for each pixelformat, maybe an overwork)
>>
>> The sizes are correctly request. I can get this lines with DEBUG on, so
>> each ioctl can be properly debugged, let me know if you need more
>> information,
> You haven't answered my question. What happens if you try to capture images in
> the problematic resolution with a test software such as yavta
> (git.ideasonboard.com) ?
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gabriel.vcf
Type: text/x-vcard
Size: 383 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110221/279bda92/attachment.vcf>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3646 bytes
Desc: S/MIME Cryptographic Signature
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110221/279bda92/attachment.bin>

From linux.newbie79 at gmail.com  Tue Feb 22 01:53:59 2011
From: linux.newbie79 at gmail.com (linux newbie)
Date: Tue, 22 Feb 2011 11:53:59 +1100
Subject: [Linux-uvc-devel] MS Lifecam disconnect event
In-Reply-To: <201102152007.04506.laurent.pinchart@ideasonboard.com>
References: <AANLkTikzGL96pKUbBNvLhF79MZv_94UoFk0YPKOSsxEV@mail.gmail.com>
	<201102152007.04506.laurent.pinchart@ideasonboard.com>
Message-ID: <AANLkTi=zeM=qbkEA57rJnpS_LrySH0C59jWR6MUhqrb2@mail.gmail.com>

[  515.220000] hub 1-0:1.0: state 7 ports 2 chg 0000 evt 0004
[  515.220000] str8100-ehci str8100-ehci: GetStatus port 2 status
001009 POWER sig=se0 PEC CONNECT
[  515.220000] hub 1-0:1.0: port 2 enable change, status 00000501
[  515.220000] hub 1-0:1.0: port 2 disabled by hub (EMI?), re-enabling...
[  515.220000] hub 1-0:1.0: port 2, status 0501, change 0002, 480 Mb/s
[  515.220000] usb 1-2: USB disconnect, address 2
[  515.220000] usb 1-2: unregistering device
[  515.220000] usb 1-2: usb_disable_device nuking all URBs
[  515.220000] str8100-ehci str8100-ehci: shutdown urb c3fbe000 ep1in-iso
[  515.220000] str8100-ehci str8100-ehci: shutdown urb c3c4d000 ep1in-iso
[  515.220000] str8100-ehci str8100-ehci: shutdown urb c3fbf800 ep1in-iso
[  515.220000] str8100-ehci str8100-ehci: shutdown urb c3fbf000 ep1in-iso
[  515.220000] str8100-ehci str8100-ehci: shutdown urb c3fbe800 ep1in-iso
[  515.260000] usb 1-2: unlink qh16-0001/ffc02100 start 15 [1/0 us]
[  515.260000] str8100-ehci str8100-ehci: shutdown urb c3c5b540 ep3in-intr
[  515.260000] usb 1-2: unregistering interface 1-2:1.0
[  515.270000] usb 1-2:1.0: uevent
[  515.270000] usb 1-2: unregistering interface 1-2:1.1
[  515.270000] usb 1-2:1.1: uevent
[  515.280000] usb 1-2: unregistering interface 1-2:1.2
[  515.280000] usb 1-2:1.2: uevent
[  515.280000] usb 1-2: unregistering interface 1-2:1.3
[  515.280000] usb 1-2:1.3: uevent
[  515.280000] usb 1-2: uevent
[  515.340000] str8100-ehci str8100-ehci: GetStatus port 2 status
001002 POWER sig=se0 CSC
[  515.340000] hub 1-0:1.0: state 7 ports 2 chg 0000 evt 0004


On Wed, Feb 16, 2011 at 6:07 AM, Laurent Pinchart
<laurent.pinchart at ideasonboard.com> wrote:
> Hi,
>
> On Wednesday 02 February 2011 01:07:41 linux newbie wrote:
>> I developed one application that keeps on reading one frame of data
>> from camera. If I connect MS Lifecam, I am getting USB disconnect
>> event randomly. But this is not happening in Logitech versions of
>> Camera.
>>
>> Has anyone came across this sort of issue? Is there any solution worth
>> trying it?
>
> Kernel log ?
>
> --
> Regards,
>
> Laurent Pinchart
>


From bug-track at fisher-privat.net  Wed Feb 23 18:01:25 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Wed, 23 Feb 2011 18:01:25 +0100
Subject: [Linux-uvc-devel] MS Lifecam disconnect event
In-Reply-To: <AANLkTi=zeM=qbkEA57rJnpS_LrySH0C59jWR6MUhqrb2@mail.gmail.com>
References: <AANLkTikzGL96pKUbBNvLhF79MZv_94UoFk0YPKOSsxEV@mail.gmail.com>
	<201102152007.04506.laurent.pinchart@ideasonboard.com>
	<AANLkTi=zeM=qbkEA57rJnpS_LrySH0C59jWR6MUhqrb2@mail.gmail.com>
Message-ID: <1298480485.22768.9.camel@zwerg>

in this log i see only the usb-host part. Can you please reload uvcvideo
module with:
rmmod uvcvideo && modprobe uvcvideo trace=0xfff
and attach the log again.

on my logitech cam you can bring it to freeze if you starts the video
and stop it before it actually starts. So may be your app send some
command before other was finished.

Am Dienstag, den 22.02.2011, 11:53 +1100 schrieb linux newbie:
> [  515.220000] hub 1-0:1.0: state 7 ports 2 chg 0000 evt 0004
> [  515.220000] str8100-ehci str8100-ehci: GetStatus port 2 status
> 001009 POWER sig=se0 PEC CONNECT
> [  515.220000] hub 1-0:1.0: port 2 enable change, status 00000501
> [  515.220000] hub 1-0:1.0: port 2 disabled by hub (EMI?), re-enabling...
> [  515.220000] hub 1-0:1.0: port 2, status 0501, change 0002, 480 Mb/s
> [  515.220000] usb 1-2: USB disconnect, address 2
> [  515.220000] usb 1-2: unregistering device
> [  515.220000] usb 1-2: usb_disable_device nuking all URBs
> [  515.220000] str8100-ehci str8100-ehci: shutdown urb c3fbe000 ep1in-iso
> [  515.220000] str8100-ehci str8100-ehci: shutdown urb c3c4d000 ep1in-iso
> [  515.220000] str8100-ehci str8100-ehci: shutdown urb c3fbf800 ep1in-iso
> [  515.220000] str8100-ehci str8100-ehci: shutdown urb c3fbf000 ep1in-iso
> [  515.220000] str8100-ehci str8100-ehci: shutdown urb c3fbe800 ep1in-iso
> [  515.260000] usb 1-2: unlink qh16-0001/ffc02100 start 15 [1/0 us]
> [  515.260000] str8100-ehci str8100-ehci: shutdown urb c3c5b540 ep3in-intr
> [  515.260000] usb 1-2: unregistering interface 1-2:1.0
> [  515.270000] usb 1-2:1.0: uevent
> [  515.270000] usb 1-2: unregistering interface 1-2:1.1
> [  515.270000] usb 1-2:1.1: uevent
> [  515.280000] usb 1-2: unregistering interface 1-2:1.2
> [  515.280000] usb 1-2:1.2: uevent
> [  515.280000] usb 1-2: unregistering interface 1-2:1.3
> [  515.280000] usb 1-2:1.3: uevent
> [  515.280000] usb 1-2: uevent
> [  515.340000] str8100-ehci str8100-ehci: GetStatus port 2 status
> 001002 POWER sig=se0 CSC
> [  515.340000] hub 1-0:1.0: state 7 ports 2 chg 0000 evt 0004
> 
> 
> On Wed, Feb 16, 2011 at 6:07 AM, Laurent Pinchart
> <laurent.pinchart at ideasonboard.com> wrote:
> > Hi,
> >
> > On Wednesday 02 February 2011 01:07:41 linux newbie wrote:
> >> I developed one application that keeps on reading one frame of data
> >> from camera. If I connect MS Lifecam, I am getting USB disconnect
> >> event randomly. But this is not happening in Logitech versions of
> >> Camera.
> >>
> >> Has anyone came across this sort of issue? Is there any solution worth
> >> trying it?
> >
> > Kernel log ?
> >
> > --
> > Regards,
> >
> > Laurent Pinchart
> >
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel

-- 
Regards,
        Alexey



From linux.newbie79 at gmail.com  Thu Feb 24 04:54:55 2011
From: linux.newbie79 at gmail.com (linux newbie)
Date: Thu, 24 Feb 2011 14:54:55 +1100
Subject: [Linux-uvc-devel] MS Lifecam disconnect event
In-Reply-To: <1298480485.22768.9.camel@zwerg>
References: <AANLkTikzGL96pKUbBNvLhF79MZv_94UoFk0YPKOSsxEV@mail.gmail.com>
	<201102152007.04506.laurent.pinchart@ideasonboard.com>
	<AANLkTi=zeM=qbkEA57rJnpS_LrySH0C59jWR6MUhqrb2@mail.gmail.com>
	<1298480485.22768.9.camel@zwerg>
Message-ID: <AANLkTims8Mr4D=RMOb4TfHcR=OKuX1pHDd9OdF98Ux5M@mail.gmail.com>

Hi,

Following is the debug message. My application code uses one mmap
buffer. It queue's the buffer and then waits for one frame of data
(using select), once the select breaks, it de-queue's the buffer and
copies to application buffer and again re-queue's it. After some time
(not consistent), disconnect event occurs.This happens only with MS
life cam and not with Logitech cam.

# dmesg
).
[  975.040000] uvcvideo: Dropping payload (out of sync).
[  975.040000] uvcvideo: Dropping payload (out of sync).
[  975.040000] uvcvideo: Dropping payload (out of sync).
[  975.040000] uvcvideo: Dropping payload (out of sync).
[  975.040000] uvcvideo: Dropping payload (out of sync).
[  975.040000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.050000] uvcvideo: Dropping payload (out of sync).
[  975.060000] uvcvideo: Dropping payload (out of sync).
[  975.060000] uvcvideo: Dropping payload (out of sync).
[  975.060000] uvcvideo: Dropping payload (out of sync).
[  975.060000] uvcvideo: Dropping payload (out of sync).
[  975.060000] uvcvideo: Dropping payload (out of sync).
[  975.060000] uvcvideo: Dropping payload (out of sync).
[  975.060000] uvcvideo: Dropping payload (out of sync).
[  975.060000] uvcvideo: Dropping payload (out of sync).
[  975.060000] uvcvideo: Dropping payload (out of sync).
[  975.060000] uvcvideo: Dropping payload (out of sync).
[  975.060000] uvcvideo: Dropping payload (out of sync).
[  975.060000] uvcvideo: Dropping payload (out of sync).
[  975.060000] uvcvideo: Dropping payload (out of sync).
[  975.060000] uvcvideo: Dropping payload (out of sync).
[  975.060000] uvcvideo: Dropping payload (out of sync).
[  975.060000] uvcvideo: Dropping payload (out of sync).
[  975.060000] uvcvideo: Dropping payload (out of sync).
[  975.060000] uvcvideo: Dropping payload (out of sync).
[  975.060000] uvcvideo: Dropping payload (out of sync).
[  975.060000] uvcvideo: Dropping payload (out of sync).
[  975.070000] uvcvideo: Frame complete (EOF found).
[  975.070000] uvcvideo: EOF in empty payload.
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.070000] uvcvideo: USB isochronous frame lost (-18).
[  975.080000] uvcvideo: uvc_v4l2_poll
[  975.080000] uvcvideo: uvc_v4l2_ioctl
[  975.080000] v4l2 ioctl VIDIOC_DQBUF, dir=rw (0xc0445611)
[  975.080000] uvcvideo: Dequeuing buffer 0 (3, 2048000 bytes).
[  975.140000] hub 1-0:1.0: state 7 ports 2 chg 0000 evt 0004
[  975.140000] str8100-ehci str8100-ehci: GetStatus port 2 status
001009 POWER sig=se0 PEC CONNECT
[  975.140000] hub 1-0:1.0: port 2 enable change, status 00000501
[  975.140000] hub 1-0:1.0: port 2 disabled by hub (EMI?), re-enabling...
[  975.140000] hub 1-0:1.0: port 2, status 0501, change 0002, 480 Mb/s
[  975.140000] usb 1-2: USB disconnect, address 2
[  975.140000] usb 1-2: unregistering device
[  975.140000] usb 1-2: usb_disable_device nuking all URBs
[  975.140000] str8100-ehci str8100-ehci: shutdown urb c346c000 ep1in-iso
[  975.140000] str8100-ehci str8100-ehci: shutdown urb c3fbf800 ep1in-iso
[  975.140000] str8100-ehci str8100-ehci: shutdown urb c3fbf000 ep1in-iso
[  975.140000] str8100-ehci str8100-ehci: shutdown urb c3fbe800 ep1in-iso
[  975.140000] str8100-ehci str8100-ehci: shutdown urb c3fbe000 ep1in-iso
[  975.170000] usb 1-2: unlink qh16-0001/ffc02100 start 15 [1/0 us]
[  975.170000] str8100-ehci str8100-ehci: shutdown urb c3c5b540 ep3in-intr
[  975.170000] usb 1-2: unregistering interface 1-2:1.0
[  975.180000] usb 1-2:1.0: uevent
[  975.180000] usb 1-2: unregistering interface 1-2:1.1
[  975.180000] usb 1-2:1.1: uevent
[  975.180000] uvcvideo: uvc_v4l2_ioctl
[  975.180000] v4l2 ioctl VIDIOC_QBUF, dir=rw (0xc044560f)
[  975.180000] uvcvideo: Queuing buffer 0.
[  975.180000] uvcvideo: uvc_v4l2_ioctl
[  975.180000] v4l2 ioctl VIDIOC_STREAMOFF, dir=-w (0x40045613)
[  975.190000] usb 1-2: unregistering interface 1-2:1.2
[  975.190000] usb 1-2:1.2: uevent
[  975.190000] usb 1-2: unregistering interface 1-2:1.3
[  975.190000] usb 1-2:1.3: uevent
[  975.190000] usb 1-2: uevent
[  975.200000] uvcvideo: uvc_v4l2_release
[  975.200000] usb 1-2: selecting invalid interface 1
[  975.260000] str8100-ehci str8100-ehci: GetStatus port 2 status
001002 POWER sig=se0 CSC
[  975.260000] hub 1-0:1.0: state 7 ports 2 chg 0000 evt 0004
[  975.260000] str8100-ehci str8100-ehci: GetStatus port 2 status
001002 POWER sig=se0 CSC
[  975.260000] hub 1-0:1.0: port 2, status 0100, change 0001, 12 Mb/s
[  975.420000] hub 1-0:1.0: debounce: port 2: total 100ms stable 100ms
status 0x100

On Thu, Feb 24, 2011 at 4:01 AM, Alexey Fisher
<bug-track at fisher-privat.net> wrote:
> in this log i see only the usb-host part. Can you please reload uvcvideo
> module with:
> rmmod uvcvideo && modprobe uvcvideo trace=0xfff
> and attach the log again.
>
> on my logitech cam you can bring it to freeze if you starts the video
> and stop it before it actually starts. So may be your app send some
> command before other was finished.
>
> Am Dienstag, den 22.02.2011, 11:53 +1100 schrieb linux newbie:
>> [ ?515.220000] hub 1-0:1.0: state 7 ports 2 chg 0000 evt 0004
>> [ ?515.220000] str8100-ehci str8100-ehci: GetStatus port 2 status
>> 001009 POWER sig=se0 PEC CONNECT
>> [ ?515.220000] hub 1-0:1.0: port 2 enable change, status 00000501
>> [ ?515.220000] hub 1-0:1.0: port 2 disabled by hub (EMI?), re-enabling...
>> [ ?515.220000] hub 1-0:1.0: port 2, status 0501, change 0002, 480 Mb/s
>> [ ?515.220000] usb 1-2: USB disconnect, address 2
>> [ ?515.220000] usb 1-2: unregistering device
>> [ ?515.220000] usb 1-2: usb_disable_device nuking all URBs
>> [ ?515.220000] str8100-ehci str8100-ehci: shutdown urb c3fbe000 ep1in-iso
>> [ ?515.220000] str8100-ehci str8100-ehci: shutdown urb c3c4d000 ep1in-iso
>> [ ?515.220000] str8100-ehci str8100-ehci: shutdown urb c3fbf800 ep1in-iso
>> [ ?515.220000] str8100-ehci str8100-ehci: shutdown urb c3fbf000 ep1in-iso
>> [ ?515.220000] str8100-ehci str8100-ehci: shutdown urb c3fbe800 ep1in-iso
>> [ ?515.260000] usb 1-2: unlink qh16-0001/ffc02100 start 15 [1/0 us]
>> [ ?515.260000] str8100-ehci str8100-ehci: shutdown urb c3c5b540 ep3in-intr
>> [ ?515.260000] usb 1-2: unregistering interface 1-2:1.0
>> [ ?515.270000] usb 1-2:1.0: uevent
>> [ ?515.270000] usb 1-2: unregistering interface 1-2:1.1
>> [ ?515.270000] usb 1-2:1.1: uevent
>> [ ?515.280000] usb 1-2: unregistering interface 1-2:1.2
>> [ ?515.280000] usb 1-2:1.2: uevent
>> [ ?515.280000] usb 1-2: unregistering interface 1-2:1.3
>> [ ?515.280000] usb 1-2:1.3: uevent
>> [ ?515.280000] usb 1-2: uevent
>> [ ?515.340000] str8100-ehci str8100-ehci: GetStatus port 2 status
>> 001002 POWER sig=se0 CSC
>> [ ?515.340000] hub 1-0:1.0: state 7 ports 2 chg 0000 evt 0004
>>
>>
>> On Wed, Feb 16, 2011 at 6:07 AM, Laurent Pinchart
>> <laurent.pinchart at ideasonboard.com> wrote:
>> > Hi,
>> >
>> > On Wednesday 02 February 2011 01:07:41 linux newbie wrote:
>> >> I developed one application that keeps on reading one frame of data
>> >> from camera. If I connect MS Lifecam, I am getting USB disconnect
>> >> event randomly. But this is not happening in Logitech versions of
>> >> Camera.
>> >>
>> >> Has anyone came across this sort of issue? Is there any solution worth
>> >> trying it?
>> >
>> > Kernel log ?
>> >
>> > --
>> > Regards,
>> >
>> > Laurent Pinchart
>> >
>> _______________________________________________
>> Linux-uvc-devel mailing list
>> Linux-uvc-devel at lists.berlios.de
>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
> --
> Regards,
> ? ? ? ?Alexey
>
>


From bug-track at fisher-privat.net  Thu Feb 24 07:33:46 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Thu, 24 Feb 2011 07:33:46 +0100
Subject: [Linux-uvc-devel] MS Lifecam disconnect event
In-Reply-To: <AANLkTims8Mr4D=RMOb4TfHcR=OKuX1pHDd9OdF98Ux5M@mail.gmail.com>
References: <AANLkTikzGL96pKUbBNvLhF79MZv_94UoFk0YPKOSsxEV@mail.gmail.com>
	<201102152007.04506.laurent.pinchart@ideasonboard.com>
	<AANLkTi=zeM=qbkEA57rJnpS_LrySH0C59jWR6MUhqrb2@mail.gmail.com>
	<1298480485.22768.9.camel@zwerg>
	<AANLkTims8Mr4D=RMOb4TfHcR=OKuX1pHDd9OdF98Ux5M@mail.gmail.com>
Message-ID: <1298529226.27937.10.camel@zwerg>

Hi,

suddenly i do not have complete log, but may be your cam do not send a
FID bit. Try to reload the uvcvideo module with NO_FID quirk:

rmmod uvcvideo && modprobe uvcvideo trace=0xfff quirks=0x10

You can find more quirks in source include/linux/uvcvideo.h or
drivers/media/video/uvc/uvcvideo.h

grep -R UVC_QUIRK_* uvcvideo.h | awk '{print $2" "$3}'
UVC_QUIRK_STATUS_INTERVAL 0x00000001
UVC_QUIRK_PROBE_MINMAX 0x00000002
UVC_QUIRK_PROBE_EXTRAFIELDS 0x00000004
UVC_QUIRK_BUILTIN_ISIGHT 0x00000008
UVC_QUIRK_STREAM_NO_FID 0x00000010
UVC_QUIRK_IGNORE_SELECTOR_UNIT 0x00000020
UVC_QUIRK_FIX_BANDWIDTH 0x00000080
UVC_QUIRK_PROBE_DEF 0x00000100
UVC_QUIRK_RESTRICT_FRAME_RATE 0x00000200

Am Donnerstag, den 24.02.2011, 14:54 +1100 schrieb linux newbie:
> Hi,
> 
> Following is the debug message. My application code uses one mmap
> buffer. It queue's the buffer and then waits for one frame of data
> (using select), once the select breaks, it de-queue's the buffer and
> copies to application buffer and again re-queue's it. After some time
> (not consistent), disconnect event occurs.This happens only with MS
> life cam and not with Logitech cam.
> 
> # dmesg
> ).
> [  975.040000] uvcvideo: Dropping payload (out of sync).
> [  975.040000] uvcvideo: Dropping payload (out of sync).
> [  975.040000] uvcvideo: Dropping payload (out of sync).
> [  975.040000] uvcvideo: Dropping payload (out of sync).
> [  975.040000] uvcvideo: Dropping payload (out of sync).
> [  975.040000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.050000] uvcvideo: Dropping payload (out of sync).
> [  975.060000] uvcvideo: Dropping payload (out of sync).
> [  975.060000] uvcvideo: Dropping payload (out of sync).
> [  975.060000] uvcvideo: Dropping payload (out of sync).
> [  975.060000] uvcvideo: Dropping payload (out of sync).
> [  975.060000] uvcvideo: Dropping payload (out of sync).
> [  975.060000] uvcvideo: Dropping payload (out of sync).
> [  975.060000] uvcvideo: Dropping payload (out of sync).
> [  975.060000] uvcvideo: Dropping payload (out of sync).
> [  975.060000] uvcvideo: Dropping payload (out of sync).
> [  975.060000] uvcvideo: Dropping payload (out of sync).
> [  975.060000] uvcvideo: Dropping payload (out of sync).
> [  975.060000] uvcvideo: Dropping payload (out of sync).
> [  975.060000] uvcvideo: Dropping payload (out of sync).
> [  975.060000] uvcvideo: Dropping payload (out of sync).
> [  975.060000] uvcvideo: Dropping payload (out of sync).
> [  975.060000] uvcvideo: Dropping payload (out of sync).
> [  975.060000] uvcvideo: Dropping payload (out of sync).
> [  975.060000] uvcvideo: Dropping payload (out of sync).
> [  975.060000] uvcvideo: Dropping payload (out of sync).
> [  975.060000] uvcvideo: Dropping payload (out of sync).
> [  975.070000] uvcvideo: Frame complete (EOF found).
> [  975.070000] uvcvideo: EOF in empty payload.
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.070000] uvcvideo: USB isochronous frame lost (-18).
> [  975.080000] uvcvideo: uvc_v4l2_poll
> [  975.080000] uvcvideo: uvc_v4l2_ioctl
> [  975.080000] v4l2 ioctl VIDIOC_DQBUF, dir=rw (0xc0445611)
> [  975.080000] uvcvideo: Dequeuing buffer 0 (3, 2048000 bytes).
> [  975.140000] hub 1-0:1.0: state 7 ports 2 chg 0000 evt 0004
> [  975.140000] str8100-ehci str8100-ehci: GetStatus port 2 status
> 001009 POWER sig=se0 PEC CONNECT
> [  975.140000] hub 1-0:1.0: port 2 enable change, status 00000501
> [  975.140000] hub 1-0:1.0: port 2 disabled by hub (EMI?), re-enabling...
> [  975.140000] hub 1-0:1.0: port 2, status 0501, change 0002, 480 Mb/s
> [  975.140000] usb 1-2: USB disconnect, address 2
> [  975.140000] usb 1-2: unregistering device
> [  975.140000] usb 1-2: usb_disable_device nuking all URBs
> [  975.140000] str8100-ehci str8100-ehci: shutdown urb c346c000 ep1in-iso
> [  975.140000] str8100-ehci str8100-ehci: shutdown urb c3fbf800 ep1in-iso
> [  975.140000] str8100-ehci str8100-ehci: shutdown urb c3fbf000 ep1in-iso
> [  975.140000] str8100-ehci str8100-ehci: shutdown urb c3fbe800 ep1in-iso
> [  975.140000] str8100-ehci str8100-ehci: shutdown urb c3fbe000 ep1in-iso
> [  975.170000] usb 1-2: unlink qh16-0001/ffc02100 start 15 [1/0 us]
> [  975.170000] str8100-ehci str8100-ehci: shutdown urb c3c5b540 ep3in-intr
> [  975.170000] usb 1-2: unregistering interface 1-2:1.0
> [  975.180000] usb 1-2:1.0: uevent
> [  975.180000] usb 1-2: unregistering interface 1-2:1.1
> [  975.180000] usb 1-2:1.1: uevent
> [  975.180000] uvcvideo: uvc_v4l2_ioctl
> [  975.180000] v4l2 ioctl VIDIOC_QBUF, dir=rw (0xc044560f)
> [  975.180000] uvcvideo: Queuing buffer 0.
> [  975.180000] uvcvideo: uvc_v4l2_ioctl
> [  975.180000] v4l2 ioctl VIDIOC_STREAMOFF, dir=-w (0x40045613)
> [  975.190000] usb 1-2: unregistering interface 1-2:1.2
> [  975.190000] usb 1-2:1.2: uevent
> [  975.190000] usb 1-2: unregistering interface 1-2:1.3
> [  975.190000] usb 1-2:1.3: uevent
> [  975.190000] usb 1-2: uevent
> [  975.200000] uvcvideo: uvc_v4l2_release
> [  975.200000] usb 1-2: selecting invalid interface 1
> [  975.260000] str8100-ehci str8100-ehci: GetStatus port 2 status
> 001002 POWER sig=se0 CSC
> [  975.260000] hub 1-0:1.0: state 7 ports 2 chg 0000 evt 0004
> [  975.260000] str8100-ehci str8100-ehci: GetStatus port 2 status
> 001002 POWER sig=se0 CSC
> [  975.260000] hub 1-0:1.0: port 2, status 0100, change 0001, 12 Mb/s
> [  975.420000] hub 1-0:1.0: debounce: port 2: total 100ms stable 100ms
> status 0x100
> 
> On Thu, Feb 24, 2011 at 4:01 AM, Alexey Fisher
> <bug-track at fisher-privat.net> wrote:
> > in this log i see only the usb-host part. Can you please reload uvcvideo
> > module with:
> > rmmod uvcvideo && modprobe uvcvideo trace=0xfff
> > and attach the log again.
> >
> > on my logitech cam you can bring it to freeze if you starts the video
> > and stop it before it actually starts. So may be your app send some
> > command before other was finished.
> >
> > Am Dienstag, den 22.02.2011, 11:53 +1100 schrieb linux newbie:
> >> [  515.220000] hub 1-0:1.0: state 7 ports 2 chg 0000 evt 0004
> >> [  515.220000] str8100-ehci str8100-ehci: GetStatus port 2 status
> >> 001009 POWER sig=se0 PEC CONNECT
> >> [  515.220000] hub 1-0:1.0: port 2 enable change, status 00000501
> >> [  515.220000] hub 1-0:1.0: port 2 disabled by hub (EMI?), re-enabling...
> >> [  515.220000] hub 1-0:1.0: port 2, status 0501, change 0002, 480 Mb/s
> >> [  515.220000] usb 1-2: USB disconnect, address 2
> >> [  515.220000] usb 1-2: unregistering device
> >> [  515.220000] usb 1-2: usb_disable_device nuking all URBs
> >> [  515.220000] str8100-ehci str8100-ehci: shutdown urb c3fbe000 ep1in-iso
> >> [  515.220000] str8100-ehci str8100-ehci: shutdown urb c3c4d000 ep1in-iso
> >> [  515.220000] str8100-ehci str8100-ehci: shutdown urb c3fbf800 ep1in-iso
> >> [  515.220000] str8100-ehci str8100-ehci: shutdown urb c3fbf000 ep1in-iso
> >> [  515.220000] str8100-ehci str8100-ehci: shutdown urb c3fbe800 ep1in-iso
> >> [  515.260000] usb 1-2: unlink qh16-0001/ffc02100 start 15 [1/0 us]
> >> [  515.260000] str8100-ehci str8100-ehci: shutdown urb c3c5b540 ep3in-intr
> >> [  515.260000] usb 1-2: unregistering interface 1-2:1.0
> >> [  515.270000] usb 1-2:1.0: uevent
> >> [  515.270000] usb 1-2: unregistering interface 1-2:1.1
> >> [  515.270000] usb 1-2:1.1: uevent
> >> [  515.280000] usb 1-2: unregistering interface 1-2:1.2
> >> [  515.280000] usb 1-2:1.2: uevent
> >> [  515.280000] usb 1-2: unregistering interface 1-2:1.3
> >> [  515.280000] usb 1-2:1.3: uevent
> >> [  515.280000] usb 1-2: uevent
> >> [  515.340000] str8100-ehci str8100-ehci: GetStatus port 2 status
> >> 001002 POWER sig=se0 CSC
> >> [  515.340000] hub 1-0:1.0: state 7 ports 2 chg 0000 evt 0004
> >>
> >>
> >> On Wed, Feb 16, 2011 at 6:07 AM, Laurent Pinchart
> >> <laurent.pinchart at ideasonboard.com> wrote:
> >> > Hi,
> >> >
> >> > On Wednesday 02 February 2011 01:07:41 linux newbie wrote:
> >> >> I developed one application that keeps on reading one frame of data
> >> >> from camera. If I connect MS Lifecam, I am getting USB disconnect
> >> >> event randomly. But this is not happening in Logitech versions of
> >> >> Camera.
> >> >>
> >> >> Has anyone came across this sort of issue? Is there any solution worth
> >> >> trying it?
> >> >
> >> > Kernel log ?
> >> >
> >> > --
> >> > Regards,
> >> >
> >> > Laurent Pinchart
> >> >
> >> _______________________________________________
> >> Linux-uvc-devel mailing list
> >> Linux-uvc-devel at lists.berlios.de
> >> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> >
> > --
> > Regards,
> >        Alexey
> >
> >

-- 
Regards,
        Alexey



From j.frilander at gmail.com  Sun Feb 27 08:42:33 2011
From: j.frilander at gmail.com (Jani Frilander)
Date: Sun, 27 Feb 2011 09:42:33 +0200
Subject: [Linux-uvc-devel] Microsoft LifeCam HD-5000 exposure/fps problem
	and a workaround
Message-ID: <AANLkTinwmkQBMnncZX2=MT7USfm5d3duqs5MqScHUwOF@mail.gmail.com>

Hi.

I have a Microsoft LifeCam HD-5000 (045e:076d) working almost perfectly.
I had some trouble getting a mjpeg stream @ 30 fps out of it. I figured out
that I needed to turn auto-exposure off and adjust it manually.

But the camera does not respond to exposure adjustment linearly. There
are some valid values between 5-20000. They are from darkest to brightest
5, 9 & 10 (same brightness), 19 & 20, 39, 78, 156, 312, 625, 1250, 2500,
5000 and 10000. Every other value gives the maximum brightness. 156 is the
maximum value to get 30 fps.

I'm running 2.6.32-29-generic kernel on Ubuntu Lucid 64-bit. Don't know the
driver version.

Cheers,
Jani


