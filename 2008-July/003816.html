<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] Problems setting manual exposure on Creative	Live! Cam Optia
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2008-July/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Problems%20setting%20manual%20exposure%20on%20Creative%0A%09Live%21%20Cam%20Optia&In-Reply-To=%3C4879D0CA.6070101%40pd.infn.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003819.html">
   <LINK REL="Next"  HREF="003849.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] Problems setting manual exposure on Creative	Live! Cam Optia</H1>
    <B>Moreno Marzolla</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Problems%20setting%20manual%20exposure%20on%20Creative%0A%09Live%21%20Cam%20Optia&In-Reply-To=%3C4879D0CA.6070101%40pd.infn.it%3E"
       TITLE="[Linux-uvc-devel] Problems setting manual exposure on Creative	Live! Cam Optia">moreno.marzolla at pd.infn.it
       </A><BR>
    <I>Sun Jul 13 11:54:18 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003819.html">[Linux-uvc-devel] Skype not working
</A></li>
        <LI>Next message: <A HREF="003849.html">[Linux-uvc-devel] Problems setting manual exposure on Creative	Live! Cam Optia
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3816">[ date ]</a>
              <a href="thread.html#3816">[ thread ]</a>
              <a href="subject.html#3816">[ subject ]</a>
              <a href="author.html#3816">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I'm trying to play around with the manual exposure settings of my 
Creative Live! Cam Optia (the non-AF version), in order to address the 
everexposure issues I described in another post 
(<A HREF="https://lists.berlios.de/pipermail/linux-uvc-devel/2008-June/003658.html">https://lists.berlios.de/pipermail/linux-uvc-devel/2008-June/003658.html</A>).
Unfortunately, there seems to be problems with manual exposure on this 
camera: I am experiencing the exact same problem described here: 
<A HREF="http://www.mail-archive.com/linux-uvc-devel@lists.berlios.de/msg02799.html,">http://www.mail-archive.com/linux-uvc-devel@lists.berlios.de/msg02799.html,</A> 
that is, manual exposure can be set, but every value results in an 
overexposed image no matter what value I use (lower ones or higher ones 
do not matter).

I'm working on a debian 4.0 machine (debian kernel 2.6.18-6-686) with 
the latest (as far as I know) version of the uvcvideo module:

<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">moreno at colossus</A>:~$ /sbin/modinfo uvcvideo
filename:       /lib/modules/2.6.18-6-686/usb/media/uvcvideo.ko
version:        SVN r228

I'm also using the latest svn version of uvcdynctrl

<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">moreno at colossus</A>:~$ uvcdynctrl --version
uvcdynctrl 0.2

This is the output of uvcdynctrl -c -v:

----------

Listing available controls for device video0:
   Exposure, Auto Priority
     ID      : 0x00000010,
     Type    : Boolean,
     Flags   : { CAN_READ, CAN_WRITE },
     Values  : [ 20 .. 5000, step size: 1 ],
     Default : 79
   Exposure (Absolute)
     ID      : 0x00000011,
     Type    : Dword,
     Flags   : { CAN_READ, CAN_WRITE },
     Values  : [ 20 .. 5000, step size: 1 ],
     Default : 79
   Exposure, Auto
     ID      : 0x0000000f,
     Type    : Choice,
     Flags   : { CAN_READ, CAN_WRITE },
     Values  : { 'Manual Mode'[0], 'Auto Mode'[1], 'Shutter Priority 
Mode'[2], 'Aperture Priority Mode'[3] },
     Default : 1
   Sharpness
     ID      : 0x00000007,
     Type    : Dword,
     Flags   : { CAN_READ, CAN_WRITE },
     Values  : [ 0 .. 96, step size: 1 ],
     Default : 40
   Power Line Frequency
     ID      : 0x0000000d,
     Type    : Choice,
     Flags   : { CAN_READ, CAN_WRITE },
     Values  : { 'Disabled'[0], '50 Hz'[1], '60 Hz'[2] },
     Default : 0
   Gamma
     ID      : 0x00000006,
     Type    : Dword,
     Flags   : { CAN_READ, CAN_WRITE },
     Values  : [ 0 .. 7, step size: 1 ],
     Default : 3
   Hue
     ID      : 0x00000005,
     Type    : Dword,
     Flags   : { CAN_READ, CAN_WRITE },
     Values  : [ -4 .. 4, step size: 1 ],
     Default : 0
   Saturation
     ID      : 0x00000004,
     Type    : Dword,
     Flags   : { CAN_READ, CAN_WRITE },
     Values  : [ 0 .. 8, step size: 1 ],
     Default : 3
   Contrast
     ID      : 0x00000002,
     Type    : Dword,
     Flags   : { CAN_READ, CAN_WRITE },
     Values  : [ 0 .. 6, step size: 1 ],
     Default : 2
   Brightness
     ID      : 0x00000001,
     Type    : Dword,
     Flags   : { CAN_READ, CAN_WRITE },
     Values  : [ 0 .. 100, step size: 1 ],
     Default : 30

----------

There is something I don't understand: the Exposure (Auto Priority) control:

   Exposure, Auto Priority
     ID      : 0x00000010,
     Type    : Boolean,
     Flags   : { CAN_READ, CAN_WRITE },
     Values  : [ 20 .. 5000, step size: 1 ],
     Default : 79

is reported of being of type Boolean, but the allowable values are 
described as integers; nevertheless, I'm unable to change its value in 
any way, and also getting its current value returns an error:

<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">moreno at colossus</A>:~$ uvcdynctrl -g &quot;Exposure, Auto Priority&quot;
ERROR: Unable to retrieve control value: A Video4Linux2 API call 
returned an unexpected error 5. (Code: 12)

dmesg says:

uvcvideo: Failed to query (129) UVC control 3 (unit 1) : -32 (exp. 1).

However, this is likely a problem with uvcdynctrl rather than with the 
uvcvideo module.

Now, as far as manual exposure is concerned, I'm doing this:

<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">moreno at colossus</A>:~$ uvcdynctrl -s &quot;Exposure, Auto&quot; 0
<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">moreno at colossus</A>:~$ uvcdynctrl -g &quot;Exposure, Auto&quot;
0
<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">moreno at colossus</A>:~$ uvcdynctrl -s &quot;Exposure (Absolute)&quot; 20
<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">moreno at colossus</A>:~$ uvcdynctrl -g &quot;Exposure (Absolute)&quot;
20

After that, the image shown by luvcview is completely overexposed; the 
same happens if I set the Exposure (Absolute) control with a high value:

<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">moreno at colossus</A>:~$ uvcdynctrl -s &quot;Exposure (Absolute)&quot; 4000
<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">moreno at colossus</A>:~$ uvcdynctrl -g &quot;Exposure (Absolute)&quot;
4000

I also tried to play around with the &quot;Shutter Priority&quot; and &quot;Aperture 
Priority&quot; values for the &quot;Exposure, Auto&quot; control, but without any 
apparent effect.

If I set &quot;Exposure, Auto&quot; to 1 (Auto mode) and run luvcview, I can see 
that setting any value to the &quot;Exposure (Absolute)&quot; control results in 
the image becoming immediately overexposed, and then quickly coming back 
to normal as the camera automatically adjusts the exposure.

Has any body been able to manually set the exposure on the Creative 
Live! Cam Optia (non-AF)?

Thanks in advance,

Moreno.

-- 
Moreno Marzolla
EMail: <A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">moreno.marzolla at pd.infn.it</A>
WWW  : <A HREF="http://www.dsi.unive.it/~marzolla">http://www.dsi.unive.it/~marzolla</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003819.html">[Linux-uvc-devel] Skype not working
</A></li>
	<LI>Next message: <A HREF="003849.html">[Linux-uvc-devel] Problems setting manual exposure on Creative	Live! Cam Optia
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3816">[ date ]</a>
              <a href="thread.html#3816">[ thread ]</a>
              <a href="subject.html#3816">[ subject ]</a>
              <a href="author.html#3816">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
