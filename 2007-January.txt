From pawankumar.gupta at ittiam.com  Mon Jan  1 08:40:35 2007
From: pawankumar.gupta at ittiam.com (Pawan Kumar Gupta)
Date: Mon, 1 Jan 2007 13:10:35 +0530
Subject: [Linux-uvc-devel] Using USB webcam with TI's davinci EVM and 2.6.19
	Kernel
Message-ID: <904DEC693BE1AB429622C6F5ABA7E0B801CED70E@is01ex02.ittiam.com>

Hi,

I am trying to use Logitech USB webcam pro5000 with TI's DA-VINCI EVM.
Currently I am running 2.6.19 kernel from http://source.mvista.com/git/

Since the camera is compliant to USB video class, I have used UVC driver
available from http://developer.berlios.de/projects/linux-uvc/

The driver gets initialized properly.

When I try to run video loopback (proprietary application), I am not
getting any video data from the webcam. All the IOCTL calls to the
driver succeed but when I start streaming I am only getting empty
packets (12bytes long) with just header.
The camera and driver works fine on my Linux PC with the luvcview
application.

I have compared the luvcview code and my proprietary loopback
application and found that sequence of initialization steps is same in
both cases. I am not able to find whether the issue is somewhere with
the driver or with the device or with the kernel.

Please let me know if somebody has used USB webcam (USB video class) for
any embedded applications

Regards
Pawan 



**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
helpdesk at ittiam.com.
**********************************************************************

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070101/c5444655/attachment.html>

From kcbanner at gmail.com  Tue Jan  2 08:35:04 2007
From: kcbanner at gmail.com (kc banner)
Date: Mon, 1 Jan 2007 23:35:04 -0800
Subject: [Linux-uvc-devel] luvcview isn't compiling / Orbit MP problems
Message-ID: <5a6283750701012335r1af4e62ar6e298713c84f9bb2@mail.gmail.com>

Hi,

I think this is the most appropriate place for this so here goes. I'm having
problems compiling luvcview. I am only compiling it because I cant view my
webcam (Logitech Orbit MP).

The luvcview error is:

[kcbanner at kc luvcview-20060920]$ make
gcc -DUSE_SDL -O2 -DLINUX -DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc
-I/usr/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT  -DUSE_SDL -O2 -DLINUX
-DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc -I/usr/include/SDL
-D_GNU_SOURCE=1 -D_REENTRANT   -c -o luvcview.o luvcview.c
gcc -DUSE_SDL -O2 -DLINUX -DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc
-I/usr/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT  -DUSE_SDL -O2 -DLINUX
-DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc -I/usr/include/SDL
-D_GNU_SOURCE=1 -D_REENTRANT   -c -o utils.o utils.c
gcc -DUSE_SDL -O2 -DLINUX -DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc
-I/usr/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT  -DUSE_SDL -O2 -DLINUX
-DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc -I/usr/include/SDL
-D_GNU_SOURCE=1 -D_REENTRANT   -c -o v4l2uvc.o v4l2uvc.c
gcc -DUSE_SDL -O2 -DLINUX -DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc
-I/usr/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT  -DUSE_SDL -O2 -DLINUX
-DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc -I/usr/include/SDL
-D_GNU_SOURCE=1 -D_REENTRANT   -c -o gui.o gui.c
gcc -DUSE_SDL -O2 -DLINUX -DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc
-I/usr/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT  -DUSE_SDL -O2 -DLINUX
-DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc -I/usr/include/SDL
-D_GNU_SOURCE=1 -D_REENTRANT   -c -o avilib.o avilib.c
gcc -DUSE_SDL -O2 -DLINUX -DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc
-I/usr/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT  -DUSE_SDL -O2 -DLINUX
-DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc -I/usr/include/SDL
-D_GNU_SOURCE=1 -D_REENTRANT   -c -o frmfmtenum.o frmfmtenum.c
In file included from frmfmtenum.c:36:
v4l2_enumfrmfmt.h:8: error: nested redefinition of 'enum v4l2_frmsizetypes'
v4l2_enumfrmfmt.h:8: error: redeclaration of 'enum v4l2_frmsizetypes'
v4l2_enumfrmfmt.h:9: error: redeclaration of enumerator
'V4L2_FRMSIZE_TYPE_DISCRETE'
/usr/include/linux/videodev2.h:281: error: previous definition of
'V4L2_FRMSIZE_TYPE_DISCRETE' was here
v4l2_enumfrmfmt.h:10: error: redeclaration of enumerator
'V4L2_FRMSIZE_TYPE_CONTINUOUS'
/usr/include/linux/videodev2.h:282: error: previous definition of
'V4L2_FRMSIZE_TYPE_CONTINUOUS' was here
v4l2_enumfrmfmt.h:11: error: redeclaration of enumerator
'V4L2_FRMSIZE_TYPE_STEPWISE'
/usr/include/linux/videodev2.h:283: error: previous definition of
'V4L2_FRMSIZE_TYPE_STEPWISE' was here
v4l2_enumfrmfmt.h:14: error: nested redefinition of 'enum v4l2_frmivaltypes'
v4l2_enumfrmfmt.h:14: error: redeclaration of 'enum v4l2_frmivaltypes'
v4l2_enumfrmfmt.h:15: error: redeclaration of enumerator
'V4L2_FRMIVAL_TYPE_DISCRETE'
/usr/include/linux/videodev2.h:321: error: previous definition of
'V4L2_FRMIVAL_TYPE_DISCRETE' was here
v4l2_enumfrmfmt.h:16: error: redeclaration of enumerator
'V4L2_FRMIVAL_TYPE_CONTINUOUS'
/usr/include/linux/videodev2.h:322: error: previous definition of
'V4L2_FRMIVAL_TYPE_CONTINUOUS' was here
v4l2_enumfrmfmt.h:17: error: redeclaration of enumerator
'V4L2_FRMIVAL_TYPE_STEPWISE'
/usr/include/linux/videodev2.h:323: error: previous definition of
'V4L2_FRMIVAL_TYPE_STEPWISE' was here
v4l2_enumfrmfmt.h:24: error: redefinition of 'struct v4l2_frmsize_discrete'
v4l2_enumfrmfmt.h:32: error: redefinition of 'struct v4l2_frmsize_stepwise'
v4l2_enumfrmfmt.h:52: error: redefinition of 'struct v4l2_frmsizeenum'
v4l2_enumfrmfmt.h:73: error: redefinition of 'struct v4l2_frmival_stepwise'
v4l2_enumfrmfmt.h:84: error: redefinition of 'struct v4l2_frmivalenum'
In file included from frmfmtenum.c:36:
v4l2_enumfrmfmt.h:116:1: warning: "VIDIOC_ENUM_FRAMESIZES" redefined
In file included from /usr/include/linux/videodev.h:15,
                 from frmfmtenum.c:34:
/usr/include/linux/videodev2.h:1233:1: warning: this is the location of the
previous definition
In file included from frmfmtenum.c:36:
v4l2_enumfrmfmt.h:117:1: warning: "VIDIOC_ENUM_FRAMEINTERVALS" redefined
In file included from /usr/include/linux/videodev.h:15,
                 from frmfmtenum.c:34:
/usr/include/linux/videodev2.h:1234:1: warning: this is the location of the
previous definition
make: *** [frmfmtenum.o] Error 1

There was one other post about this but it seemed to have gotten hijacked.
Any ideas on that error?

Also, the xawtv error:

[kcbanner at kc luvcview-20060920]$ xawtv -c /dev/video0 -nodga
This is xawtv-3.95, running on Linux/i686 (2.6.19-beyond)
xinerama 0: 1280x1024+0+0
xinerama 1: 1280x1024+1280+0
X Error of failed request:  XF86DGANoDirectVideoMode
  Major opcode of failed request:  137 (XFree86-DGA)
  Minor opcode of failed request:  1 (XF86DGAGetVideoLL)
  Serial number of failed request:  13
  Current serial number in output stream:  13
v4l-conf had some trouble, trying to continue anyway
ioctl:
VIDIOC_QUERYCTRL(id=134217735;type=unknown;name="";minimum=0;maximum=0;step=0;default_value=0;flags=0):
Input/output error
ioctl:
VIDIOC_QUERYCTRL(id=134217739;type=unknown;name="";minimum=0;maximum=0;step=0;default_value=0;flags=0):
Input/output error
Warning: Cannot convert string "-*-ledfixed-medium-r-*--39-*-*-*-c-*-*-*" to
type FontStruct
ioctl: VIDIOC_G_STD(std=0xbfabc8c4
[PAL_G,PAL_D1,PAL_K,PAL_60,?,?,SECAM_B,SECAM_D,SECAM_H,SECAM_K1,?ATSC_8_VSB,ATSC_16_VSB,(null),(null),(null),(null),(null),(null)]):
Invalid argument
ioctl: VIDIOC_G_CTRL(id=134217736;value=134693284): Invalid argument
ioctl: VIDIOC_G_CTRL(id=134217737;value=134693284): Invalid argument
ioctl: VIDIOC_G_CTRL(id=134217741;value=1): Invalid argument
ioctl: VIDIOC_REQBUFS(count=2;type=VIDEO_CAPTURE;memory=MMAP): Success
ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument
ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0
[];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.seconds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0;memory=unknown):
Invalid argument
ioctl:
VIDIOC_S_FMT(type=VIDEO_CAPTURE;fmt.pix.width=384;fmt.pix.height=288;fmt.pix.pixelformat=0x56595559
[YUYV];fmt.pix.field=ANY;fmt.pix.bytesperline=0;fmt.pix.sizeimage=1179648;fmt.pix.colorspace=SRGB;fmt.pix.priv=0):
Input/output error
no way to get: 384x288 32 bit TrueColor (LE: bgr-)
oss: open /dev/dsp: Invalid argument
ioctl:
VIDIOC_S_FMT(type=VIDEO_CAPTURE;fmt.pix.width=1024;fmt.pix.height=576;fmt.pix.pixelformat=0x56595559
[YUYV];fmt.pix.field=ANY;fmt.pix.bytesperline=0;fmt.pix.sizeimage=1179648;fmt.pix.colorspace=SRGB;fmt.pix.priv=0):
Input/output error
ioctl:
VIDIOC_S_FMT(type=VIDEO_CAPTURE;fmt.pix.width=384;fmt.pix.height=288;fmt.pix.pixelformat=0x56595559
[YUYV];fmt.pix.field=ANY;fmt.pix.bytesperline=0;fmt.pix.sizeimage=1179648;fmt.pix.colorspace=SRGB;fmt.pix.priv=0):
Input/output error
no way to get: 384x288 32 bit TrueColor (LE: bgr-)
oss: open /dev/dsp: Invalid argument
ioctl:
VIDIOC_S_FMT(type=VIDEO_CAPTURE;fmt.pix.width=1024;fmt.pix.height=576;fmt.pix.pixelformat=0x56595559
[YUYV];fmt.pix.field=ANY;fmt.pix.bytesperline=0;fmt.pix.sizeimage=1179648;fmt.pix.colorspace=SRGB;fmt.pix.priv=0):
Input/output error
ioctl:
VIDIOC_S_FMT(type=VIDEO_CAPTURE;fmt.pix.width=384;fmt.pix.height=288;fmt.pix.pixelformat=0x56595559
[YUYV];fmt.pix.field=ANY;fmt.pix.bytesperline=0;fmt.pix.sizeimage=1179648;fmt.pix.colorspace=SRGB;fmt.pix.priv=0):
Input/output error
no way to get: 384x288 32 bit TrueColor (LE: bgr-)

I have no other audio programs running that would be using OSS...I tried
with aoss wrapper too...no diff.

Thanks for your time!
-kcbanner
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070101/29efe69d/attachment.html>

From laurent.pinchart at skynet.be  Tue Jan  2 20:35:58 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 2 Jan 2007 20:35:58 +0100
Subject: [Linux-uvc-devel] Logitech Orbit on 64-bit kernel
In-Reply-To: <87bqllvz5f.fsf@arbol.wsrcc.com>
References: <87bqllvz5f.fsf@arbol.wsrcc.com>
Message-ID: <200701022035.58443.laurent.pinchart@skynet.be>

Hi Wolfgang,

> Is anyone using the Logitech Orbit on a 64-bit linux kernel such as
> current fedora fc6 (2.6.18-1.2868.fc6 x86_64)?

I've never tried that myself, for lack of a 64bit CPU. Of course, if you want 
to send me a brand new AMD64 laptop, I won't complain ;-)

> With linux-uvc (svn Revision: 74, 2006-12-13 14:34:57) and
> luvcview-20060920 I can get a picture and can pan in both directions,
> but the tilt is non-functional.  In fact, the "reset" button in
> luvcview caused the tilt to go to the lower extreme and now I'm stuck
> with it there and now way to raise the tilt back to horizontal.
>
> At first it looked like a problem with one of the uvc structs changing
> and luvcview was using the old version.  More things seemed to work
> once I did change luvcview to use the current uvc include files, but
> the tilt was still non-functional.  Appended is what I did.  (Quite a
> few fixes were just to quiet down gcc.)

luvcview uses the old pan/tilt API. Pan and tilt are not separate controls. 
You should contact Michel Xhaard about that, he's the luvcview author.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Jan  2 20:45:08 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 2 Jan 2007 20:45:08 +0100
Subject: [Linux-uvc-devel] Using USB webcam with TI's davinci EVM and
	2.6.19 Kernel
In-Reply-To: <904DEC693BE1AB429622C6F5ABA7E0B801CED70E@is01ex02.ittiam.com>
References: <904DEC693BE1AB429622C6F5ABA7E0B801CED70E@is01ex02.ittiam.com>
Message-ID: <200701022045.08797.laurent.pinchart@skynet.be>

Hi Pawan,

> I am trying to use Logitech USB webcam pro5000 with TI's DA-VINCI EVM.
> Currently I am running 2.6.19 kernel from http://source.mvista.com/git/
>
> Since the camera is compliant to USB video class, I have used UVC driver
> available from http://developer.berlios.de/projects/linux-uvc/
>
> The driver gets initialized properly.
>
> When I try to run video loopback (proprietary application), I am not
> getting any video data from the webcam. All the IOCTL calls to the
> driver succeed but when I start streaming I am only getting empty
> packets (12bytes long) with just header.
> The camera and driver works fine on my Linux PC with the luvcview
> application.
>
> I have compared the luvcview code and my proprietary loopback
> application and found that sequence of initialization steps is same in
> both cases. I am not able to find whether the issue is somewhere with
> the driver or with the device or with the kernel.
>
> Please let me know if somebody has used USB webcam (USB video class) for
> any embedded applications

I've used the Logitech webcams for PC-based embedded applications. You're the 
first to report this problem. Does your platform support USB 2.0 ? Is it EHCI 
(or OHCI/UHCI if it only supports USB 1.1) compliant ? You might want to 
enable verbose debugging (and even add a few print statements to the driver) 
to see if the buffers are allocated properly (are they big enough ?). If they 
are, I don't know how to help you.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Jan  2 20:50:25 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 2 Jan 2007 20:50:25 +0100
Subject: [Linux-uvc-devel] luvcview isn't compiling / Orbit MP problems
In-Reply-To: <5a6283750701012335r1af4e62ar6e298713c84f9bb2@mail.gmail.com>
References: <5a6283750701012335r1af4e62ar6e298713c84f9bb2@mail.gmail.com>
Message-ID: <200701022050.25279.laurent.pinchart@skynet.be>

Hi,

> I think this is the most appropriate place for this so here goes. I'm
> having problems compiling luvcview. I am only compiling it because I cant
> view my webcam (Logitech Orbit MP).

You should also try contacting Michel Xhaard for luvcview related problems. He 
is the software author.

> The luvcview error is:
>
> [kcbanner at kc luvcview-20060920]$ make
> gcc -DUSE_SDL -O2 -DLINUX -DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc
> -I/usr/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT  -DUSE_SDL -O2 -DLINUX
> -DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc -I/usr/include/SDL
> -D_GNU_SOURCE=1 -D_REENTRANT   -c -o luvcview.o luvcview.c
> gcc -DUSE_SDL -O2 -DLINUX -DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc
> -I/usr/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT  -DUSE_SDL -O2 -DLINUX
> -DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc -I/usr/include/SDL
> -D_GNU_SOURCE=1 -D_REENTRANT   -c -o utils.o utils.c
> gcc -DUSE_SDL -O2 -DLINUX -DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc
> -I/usr/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT  -DUSE_SDL -O2 -DLINUX
> -DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc -I/usr/include/SDL
> -D_GNU_SOURCE=1 -D_REENTRANT   -c -o v4l2uvc.o v4l2uvc.c
> gcc -DUSE_SDL -O2 -DLINUX -DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc
> -I/usr/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT  -DUSE_SDL -O2 -DLINUX
> -DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc -I/usr/include/SDL
> -D_GNU_SOURCE=1 -D_REENTRANT   -c -o gui.o gui.c
> gcc -DUSE_SDL -O2 -DLINUX -DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc
> -I/usr/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT  -DUSE_SDL -O2 -DLINUX
> -DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc -I/usr/include/SDL
> -D_GNU_SOURCE=1 -D_REENTRANT   -c -o avilib.o avilib.c
> gcc -DUSE_SDL -O2 -DLINUX -DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc
> -I/usr/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT  -DUSE_SDL -O2 -DLINUX
> -DVERSION=\"0.1.7\" -I/usr/src/modules/linux-uvc -I/usr/include/SDL
> -D_GNU_SOURCE=1 -D_REENTRANT   -c -o frmfmtenum.o frmfmtenum.c
> In file included from frmfmtenum.c:36:
> v4l2_enumfrmfmt.h:8: error: nested redefinition of 'enum v4l2_frmsizetypes'
> v4l2_enumfrmfmt.h:8: error: redeclaration of 'enum v4l2_frmsizetypes'
> v4l2_enumfrmfmt.h:9: error: redeclaration of enumerator
> 'V4L2_FRMSIZE_TYPE_DISCRETE'
> /usr/include/linux/videodev2.h:281: error: previous definition of
> 'V4L2_FRMSIZE_TYPE_DISCRETE' was here
> v4l2_enumfrmfmt.h:10: error: redeclaration of enumerator
> 'V4L2_FRMSIZE_TYPE_CONTINUOUS'
> /usr/include/linux/videodev2.h:282: error: previous definition of
> 'V4L2_FRMSIZE_TYPE_CONTINUOUS' was here
> v4l2_enumfrmfmt.h:11: error: redeclaration of enumerator
> 'V4L2_FRMSIZE_TYPE_STEPWISE'
> /usr/include/linux/videodev2.h:283: error: previous definition of
> 'V4L2_FRMSIZE_TYPE_STEPWISE' was here
> v4l2_enumfrmfmt.h:14: error: nested redefinition of 'enum
> v4l2_frmivaltypes' v4l2_enumfrmfmt.h:14: error: redeclaration of 'enum
> v4l2_frmivaltypes' v4l2_enumfrmfmt.h:15: error: redeclaration of enumerator
> 'V4L2_FRMIVAL_TYPE_DISCRETE'
> /usr/include/linux/videodev2.h:321: error: previous definition of
> 'V4L2_FRMIVAL_TYPE_DISCRETE' was here
> v4l2_enumfrmfmt.h:16: error: redeclaration of enumerator
> 'V4L2_FRMIVAL_TYPE_CONTINUOUS'
> /usr/include/linux/videodev2.h:322: error: previous definition of
> 'V4L2_FRMIVAL_TYPE_CONTINUOUS' was here
> v4l2_enumfrmfmt.h:17: error: redeclaration of enumerator
> 'V4L2_FRMIVAL_TYPE_STEPWISE'
> /usr/include/linux/videodev2.h:323: error: previous definition of
> 'V4L2_FRMIVAL_TYPE_STEPWISE' was here
> v4l2_enumfrmfmt.h:24: error: redefinition of 'struct v4l2_frmsize_discrete'
> v4l2_enumfrmfmt.h:32: error: redefinition of 'struct v4l2_frmsize_stepwise'
> v4l2_enumfrmfmt.h:52: error: redefinition of 'struct v4l2_frmsizeenum'
> v4l2_enumfrmfmt.h:73: error: redefinition of 'struct v4l2_frmival_stepwise'
> v4l2_enumfrmfmt.h:84: error: redefinition of 'struct v4l2_frmivalenum'
> In file included from frmfmtenum.c:36:
> v4l2_enumfrmfmt.h:116:1: warning: "VIDIOC_ENUM_FRAMESIZES" redefined
> In file included from /usr/include/linux/videodev.h:15,
>                  from frmfmtenum.c:34:
> /usr/include/linux/videodev2.h:1233:1: warning: this is the location of the
> previous definition
> In file included from frmfmtenum.c:36:
> v4l2_enumfrmfmt.h:117:1: warning: "VIDIOC_ENUM_FRAMEINTERVALS" redefined
> In file included from /usr/include/linux/videodev.h:15,
>                  from frmfmtenum.c:34:
> /usr/include/linux/videodev2.h:1234:1: warning: this is the location of the
> previous definition
> make: *** [frmfmtenum.o] Error 1
>
> There was one other post about this but it seemed to have gotten hijacked.
> Any ideas on that error?

Are you using the latest driver version (revision 75 from the trunk) ? Which 
kernel version are you running ? Do the kernel headers 
(in /usr/include/linux) match the running kernel version ? Is your kernel 
patched by your distribution ?

> Also, the xawtv error:
[snip]
> I have no other audio programs running that would be using OSS...I tried
> with aoss wrapper too...no diff.

xawtv is known to have issues with V4L2.

> Thanks for your time!

You're welcome :-)

Cheers,

Laurent Pinchart


From wolfgang.rupprecht+gnus200701 at gmail.com  Tue Jan  2 20:51:05 2007
From: wolfgang.rupprecht+gnus200701 at gmail.com (Wolfgang S. Rupprecht)
Date: Tue, 02 Jan 2007 11:51:05 -0800
Subject: [Linux-uvc-devel] Logitech Orbit on 64-bit kernel
References: <87bqllvz5f.fsf@arbol.wsrcc.com>
	<200701022035.58443.laurent.pinchart@skynet.be>
Message-ID: <87lkklgqc6.fsf@arbol.wsrcc.com>


Hi Laurent,

Laurent Pinchart <laurent.pinchart at skynet.be> writes:
> I've never tried that myself, for lack of a 64bit CPU. Of course, if
> you want to send me a brand new AMD64 laptop, I won't complain ;-)

;-)

It turns out that it wasn't a 64-bit problem after all.  So much code
does seem to have problems with 8-byte pointers and structs that no
longer pack to 4-byte boundaries, that it was the first thing that
crossed my mind.

> luvcview uses the old pan/tilt API. Pan and tilt are not separate controls. 
> You should contact Michel Xhaard about that, he's the luvcview author.

Just an hour ago I found a posting of yours from Nov 22 that mentioned
the changed API.  That was the clue I needed.  Things started working
when I changed the code to use the new API and the new include files
(instead of the now incorrect base-offset constants that were included
with luvcview )

These are my patches so far.  Tilt/pan works now, but the right-hand
pan-reset and tilt reset still need work.  I'll get in touch with 
Michel Xhaard when I get it working and we can compare notes.

          http://www.wsrcc.com/wolfgang/ftp/luvcview-20060920.diff

-wolfgang
-- 
Wolfgang S. Rupprecht                http://www.wsrcc.com/wolfgang/




From phil at sanslogic.co.uk  Tue Jan  2 21:13:15 2007
From: phil at sanslogic.co.uk (Philip Heron)
Date: Tue, 02 Jan 2007 20:13:15 +0000
Subject: [Linux-uvc-devel] Logitech Orbit on 64-bit kernel
In-Reply-To: <87lkklgqc6.fsf@arbol.wsrcc.com>
References: <87bqllvz5f.fsf@arbol.wsrcc.com>
	<200701022035.58443.laurent.pinchart@skynet.be>
	<87lkklgqc6.fsf@arbol.wsrcc.com>
Message-ID: <1167768795.3429.2.camel@beastie.lan>

On Tue, 2007-01-02 at 11:51 -0800, Wolfgang S. Rupprecht wrote:
> These are my patches so far.  Tilt/pan works now, but the right-hand
> pan-reset and tilt reset still need work.  I'll get in touch with 
> Michel Xhaard when I get it working and we can compare notes.
> 
>           http://www.wsrcc.com/wolfgang/ftp/luvcview-20060920.diff

Works well here, thanks wolfgang!

One question; is the pan/tilt movement on your camera smooth? Mine jumps
all over the place when it's moving.

-Phil



From wolfgang.rupprecht+gnus200701 at gmail.com  Tue Jan  2 21:34:38 2007
From: wolfgang.rupprecht+gnus200701 at gmail.com (Wolfgang S. Rupprecht)
Date: Tue, 02 Jan 2007 12:34:38 -0800
Subject: [Linux-uvc-devel] Logitech Orbit on 64-bit kernel
References: <87bqllvz5f.fsf@arbol.wsrcc.com>
	<200701022035.58443.laurent.pinchart@skynet.be>
	<87lkklgqc6.fsf@arbol.wsrcc.com> <1167768795.3429.2.camel@beastie.lan>
Message-ID: <87hcv9gobl.fsf@arbol.wsrcc.com>


Philip Heron <phil at sanslogic.co.uk> writes:
> Works well here, thanks wolfgang!

You are very welcome!

> One question; is the pan/tilt movement on your camera smooth? Mine jumps
> all over the place when it's moving.

Mine jumps too.  There seem to be two issues.  1) Holding the pan
"button" down causes the program to repeatedly pan by a small
increment.  The camera seems to pan very quickly with a relatively
long time between steps so The motion is very jerky.  It is impressive
how quickly the camera actuators work.  They actually make a loud
ticking sound as each step takes place.  2) When panning there is a
certain position that "hickups" for lack of a better description.  The
camera seems to briefly move in the backwards direction and then
catches itself and continues the forward motion.  This only seems like
it happens with panning in left direction (eg. when using the
downward-facing pan button).  The rightwards pan ticks forward
monotonically, (even if not that smoothly).

-wolfgang
-- 
Wolfgang S. Rupprecht                http://www.wsrcc.com/wolfgang/



From mxhaard at magic.fr  Tue Jan  2 21:29:32 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Tue, 2 Jan 2007 21:29:32 +0100
Subject: [Linux-uvc-devel] Logitech Orbit on 64-bit kernel
In-Reply-To: <87lkklgqc6.fsf@arbol.wsrcc.com>
References: <87bqllvz5f.fsf@arbol.wsrcc.com>
	<200701022035.58443.laurent.pinchart@skynet.be>
	<87lkklgqc6.fsf@arbol.wsrcc.com>
Message-ID: <200701022129.32194.mxhaard@magic.fr>

Le Mardi 2 Janvier 2007 20:51, Wolfgang S. Rupprecht a ?crit?:
> Hi Laurent,
>
> Laurent Pinchart <laurent.pinchart at skynet.be> writes:
> > I've never tried that myself, for lack of a 64bit CPU. Of course, if
> > you want to send me a brand new AMD64 laptop, I won't complain ;-)
>
> ;-)
>
> It turns out that it wasn't a 64-bit problem after all.  So much code
> does seem to have problems with 8-byte pointers and structs that no
> longer pack to 4-byte boundaries, that it was the first thing that
> crossed my mind.
>
> > luvcview uses the old pan/tilt API. Pan and tilt are not separate
> > controls. You should contact Michel Xhaard about that, he's the luvcview
> > author.
>
> Just an hour ago I found a posting of yours from Nov 22 that mentioned
> the changed API.  That was the clue I needed.  Things started working
> when I changed the code to use the new API and the new include files
> (instead of the now incorrect base-offset constants that were included
> with luvcview )
>
> These are my patches so far.  Tilt/pan works now, but the right-hand
> pan-reset and tilt reset still need work.  I'll get in touch with
> Michel Xhaard when I get it working and we can compare notes.
>
>           http://www.wsrcc.com/wolfgang/ftp/luvcview-20060920.diff
>
> -wolfgang
Wolfgang,
Thanks :)
Best regards
-- 
Michel Xhaard
http://mxhaard.free.fr


From mxhaard at magic.fr  Tue Jan  2 21:25:20 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Tue, 2 Jan 2007 21:25:20 +0100
Subject: [Linux-uvc-devel] Logitech Orbit on 64-bit kernel
In-Reply-To: <200701022035.58443.laurent.pinchart@skynet.be>
References: <87bqllvz5f.fsf@arbol.wsrcc.com>
	<200701022035.58443.laurent.pinchart@skynet.be>
Message-ID: <200701022125.20468.mxhaard@magic.fr>

Le Mardi 2 Janvier 2007 20:35, Laurent Pinchart a ?crit?:
> Hi Wolfgang,
>
> > Is anyone using the Logitech Orbit on a 64-bit linux kernel such as
> > current fedora fc6 (2.6.18-1.2868.fc6 x86_64)?
>
> I've never tried that myself, for lack of a 64bit CPU. Of course, if you
> want to send me a brand new AMD64 laptop, I won't complain ;-)
>
> > With linux-uvc (svn Revision: 74, 2006-12-13 14:34:57) and
> > luvcview-20060920 I can get a picture and can pan in both directions,
> > but the tilt is non-functional.  In fact, the "reset" button in
> > luvcview caused the tilt to go to the lower extreme and now I'm stuck
> > with it there and now way to raise the tilt back to horizontal.
> >
> > At first it looked like a problem with one of the uvc structs changing
> > and luvcview was using the old version.  More things seemed to work
> > once I did change luvcview to use the current uvc include files, but
> > the tilt was still non-functional.  Appended is what I did.  (Quite a
> > few fixes were just to quiet down gcc.)
>
> luvcview uses the old pan/tilt API. Pan and tilt are not separate controls.
> You should contact Michel Xhaard about that, he's the luvcview author.
>
> Best regards,
>
> Laurent Pinchart
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
Dear Laurent,
First happy new year :)
I have see your message(s) about luvcview and the Pan/Tilt function i will 
correct it when i get some times. I have tested the Logitech Orbit on  a 
x86_64 architecture ( dual core) without any probleme.
Best regards
-- 
Michel Xhaard
http://mxhaard.free.fr


From iain at lazygnome.net  Tue Jan  2 21:59:19 2007
From: iain at lazygnome.net (Iain Cuthbertson)
Date: Tue, 2 Jan 2007 20:59:19 +0000
Subject: [Linux-uvc-devel] LT Quickcam Pro 5000 - usable software?
In-Reply-To: <1167410114.9990.2.camel@hollerith>
References: <1167410114.9990.2.camel@hollerith>
Message-ID: <20070102205455.M63952@lazygnome.net>

On Fri, 29 Dec 2006 17:35:14 +0100, Robert Spielmann wrote
> Hi,
> 
> thanks a lot for developing the driver for the Logitech webcams. 
> Nice to have - but I cannot find ANY application that works with the 
> driver :-) Someone have a hint in the right direction?
> 
> Thanks,
> Robert
> 
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel


Hi Robert,

If you are after a simple to use timed still capture program, check out
uvccapture by Gabriel A. Devenyi:
http://staticwave.ca/source/uvccapture/uvccapture-0.4.tar.bz2

And to add captions to the images, use my perl script:
http://www.lazygnome.net/projects/caption/0.1/caption-pl.txt

Regards,
Iain Cuthbertson

--
Warning! Content may contain nuts.



From timo.taskinen at iki.fi  Wed Jan  3 15:58:47 2007
From: timo.taskinen at iki.fi (Timo Taskinen)
Date: Wed, 3 Jan 2007 16:58:47 +0200
Subject: [Linux-uvc-devel] Logitech Ultra Vision - Failed to query
Message-ID: <eec6ea3b0701030658l4161f47ct50ab0df847a1bdc7@mail.gmail.com>

Just bought a Logitech Ultra Vision (Bus 005 Device 003: ID 046d:08c9
Logitech, Inc.) and fetched the latest SVN code and compiled and
installed it. When I plug my camera to the computer, dmesg says the
following:

[31812.967386] usbcore: registered new interface driver uvcvideo
[31812.967392] USB Video Class driver (v0.1.0)
[80416.916669] usb 5-4: new high speed USB device using ehci_hcd and address 2
[80417.209159] usb 5-4: configuration #1 chosen from 1 choice
[80417.209349] uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c9)

(I loaded the module manually beforehand)

The /dev/video and /dev/video0 devices are created when camera is plugged in.

But now when I try to capture images from it, I get the following
error in dmesg:

[81559.905342] uvcvideo: Failed to query (1) UVC control 1 (unit 0) :
-110 (exp. 26).

First I tried "motion", it said:

[0] Processing thread 0 - config file /etc/motion/motion.conf
[1] Thread is from /etc/motion/motion.conf
[1] Thread started
[1] motion-httpd/3.2.3 running, accepting connections
[1] motion-httpd: waiting for data on port TCP 82
[1] No mmap falling back on read
[1] ioctl (VIDIOCSWIN): Input/output error
[1] Capture error calling vid_start
[1] Thread finishing...

Then I falled back to uvccapture-0.4, compiled it and tried to start:

Unable to set format: 5.
 Init v4L2 failed !! exit fatal

Both tries results in the same error in dmesg.

Machine is a Intel D945GNT board with integrated USB2 controller.
Linux is Ubuntu 6.10 Edgy with custom 2.6.19.1 i386 kernel.

-- 
Timo Taskinen


From emil at nishra.com  Wed Jan  3 17:36:59 2007
From: emil at nishra.com (Emil Soleyman)
Date: Wed, 3 Jan 2007 08:36:59 -0800
Subject: [Linux-uvc-devel] Logitech Ultra Vision - Failed to query
In-Reply-To: <eec6ea3b0701030658l4161f47ct50ab0df847a1bdc7@mail.gmail.com>
References: <eec6ea3b0701030658l4161f47ct50ab0df847a1bdc7@mail.gmail.com>
Message-ID: <20070103163659.GA16469@soleyman.com>

On Wed, Jan 03, 2007 at 04:58:47PM +0200, Timo Taskinen wrote:
> Just bought a Logitech Ultra Vision (Bus 005 Device 003: ID 046d:08c9
> Logitech, Inc.) and fetched the latest SVN code and compiled and
> installed it. When I plug my camera to the computer, dmesg says the
> following:
> 
> [31812.967386] usbcore: registered new interface driver uvcvideo
> [31812.967392] USB Video Class driver (v0.1.0)
> [80416.916669] usb 5-4: new high speed USB device using ehci_hcd and address 2
> [80417.209159] usb 5-4: configuration #1 chosen from 1 choice
> [80417.209349] uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c9)
> 
> (I loaded the module manually beforehand)
> 
> The /dev/video and /dev/video0 devices are created when camera is plugged in.
> 
> But now when I try to capture images from it, I get the following
> error in dmesg:
> 
> [81559.905342] uvcvideo: Failed to query (1) UVC control 1 (unit 0) :
> -110 (exp. 26).
> 
> First I tried "motion", it said:
> 
> [0] Processing thread 0 - config file /etc/motion/motion.conf
> [1] Thread is from /etc/motion/motion.conf
> [1] Thread started
> [1] motion-httpd/3.2.3 running, accepting connections
> [1] motion-httpd: waiting for data on port TCP 82
> [1] No mmap falling back on read
> [1] ioctl (VIDIOCSWIN): Input/output error
> [1] Capture error calling vid_start
> [1] Thread finishing...
> 
> Then I falled back to uvccapture-0.4, compiled it and tried to start:
> 
> Unable to set format: 5.
>  Init v4L2 failed !! exit fatal
> 
> Both tries results in the same error in dmesg.
> 
> Machine is a Intel D945GNT board with integrated USB2 controller.
> Linux is Ubuntu 6.10 Edgy with custom 2.6.19.1 i386 kernel.

Timo,

My experience with the Logitech Ultra Vision is the same except that I
used Ekiga to view the video. I have found that if you load the
module with trace set to 15, then Ekiga is able to show the picture.

-
Emil Soleyman


From laurent.pinchart at skynet.be  Wed Jan  3 22:04:57 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 3 Jan 2007 22:04:57 +0100
Subject: [Linux-uvc-devel] Logitech Ultra Vision - Failed to query
In-Reply-To: <20070103163659.GA16469@soleyman.com>
References: <eec6ea3b0701030658l4161f47ct50ab0df847a1bdc7@mail.gmail.com>
	<20070103163659.GA16469@soleyman.com>
Message-ID: <200701032204.57754.laurent.pinchart@skynet.be>

Hi,

> > Just bought a Logitech Ultra Vision (Bus 005 Device 003: ID 046d:08c9
> > Logitech, Inc.) and fetched the latest SVN code and compiled and
> > installed it. When I plug my camera to the computer, dmesg says the
> > following:
> >
> > [31812.967386] usbcore: registered new interface driver uvcvideo
> > [31812.967392] USB Video Class driver (v0.1.0)
> > [80416.916669] usb 5-4: new high speed USB device using ehci_hcd and
> > address 2 [80417.209159] usb 5-4: configuration #1 chosen from 1 choice
> > [80417.209349] uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c9)
> >
> > (I loaded the module manually beforehand)
> >
> > The /dev/video and /dev/video0 devices are created when camera is plugged
> > in.
> >
> > But now when I try to capture images from it, I get the following
> > error in dmesg:
> >
> > [81559.905342] uvcvideo: Failed to query (1) UVC control 1 (unit 0) :
> > -110 (exp. 26).
> >
> > First I tried "motion", it said:
> >
> > [0] Processing thread 0 - config file /etc/motion/motion.conf
> > [1] Thread is from /etc/motion/motion.conf
> > [1] Thread started
> > [1] motion-httpd/3.2.3 running, accepting connections
> > [1] motion-httpd: waiting for data on port TCP 82
> > [1] No mmap falling back on read
> > [1] ioctl (VIDIOCSWIN): Input/output error
> > [1] Capture error calling vid_start
> > [1] Thread finishing...
> >
> > Then I falled back to uvccapture-0.4, compiled it and tried to start:
> >
> > Unable to set format: 5.
> >  Init v4L2 failed !! exit fatal
> >
> > Both tries results in the same error in dmesg.
> >
> > Machine is a Intel D945GNT board with integrated USB2 controller.
> > Linux is Ubuntu 6.10 Edgy with custom 2.6.19.1 i386 kernel.
>
> Timo,
>
> My experience with the Logitech Ultra Vision is the same except that I
> used Ekiga to view the video. I have found that if you load the
> module with trace set to 15, then Ekiga is able to show the picture.

There are known timing-related hardware issues with Logitech webcams. The 
problem doesn't affect all users. Nobody has been able to find a workaround 
so far (neither developers at Logitech or Linux UVC users). This might change 
in the future, but I don't want to give anyone false hope. I'm not working on 
this, as I tried everything I could think of. We haven't been able to find 
what exactly triggers the hardware bug.

Laurent Pinchart


From timo.taskinen at iki.fi  Wed Jan  3 22:11:42 2007
From: timo.taskinen at iki.fi (Timo Taskinen)
Date: Wed, 3 Jan 2007 23:11:42 +0200
Subject: [Linux-uvc-devel] Logitech Ultra Vision - Failed to query
In-Reply-To: <200701032204.57754.laurent.pinchart@skynet.be>
References: <eec6ea3b0701030658l4161f47ct50ab0df847a1bdc7@mail.gmail.com>
	<20070103163659.GA16469@soleyman.com>
	<200701032204.57754.laurent.pinchart@skynet.be>
Message-ID: <eec6ea3b0701031311n2b6e708fkdb5ddc8946574394@mail.gmail.com>

On 1/3/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:

> We haven't been able to find what exactly triggers the hardware bug.

The "trace=15" modprobe parameter seems to fix the problem. Thanks!

Still I am unable to use "motion" as a capturing application, but it
seems that it doesn't support UVC webcams:
http://www.lavrsen.dk/twiki/bin/view/Motion/FeatureRequest2006x04x09x091235

The uvccapture-0.4 works perfectly now.

-- 
Timo Taskinen


From mailinglisten at habmalnefrage.de  Sun Jan  7 11:03:45 2007
From: mailinglisten at habmalnefrage.de (Martin)
Date: Sun, 07 Jan 2007 11:03:45 +0100
Subject: [Linux-uvc-devel] Creating new /dev/video?
In-Reply-To: <200612301523.57897.laurent.pinchart@skynet.be>
References: <20061230100509.GA14498@delight>
	<200612301523.57897.laurent.pinchart@skynet.be>
Message-ID: <1168164225.4488.31.camel@delight>

Hello,

sorry for slow reply, there were a lot of things to do from your message
and my time is few right now. ;-)

Am Samstag, den 30.12.2006, 15:23 +0100 schrieb Laurent Pinchart:
> On a side note, aMSN should now work properly with UVC webcams. Philippe 
> Valembois added MJPEG support, and even fixed a small bug in the driver. 
> Thanks Phil.

Right after your message (or two days later?) I checked it out from the
SVN. Yet, it did not work for me. Please do not ask me, why. I can do
some debugging in a month or two, presumed someone is interested in the
resulting stuff.

> > My personal goal is getting kopete to work with my webcam. That sounds
> > easy, but in fact is not: There's no way to scale the image for my
> > internet-bandwidth and there's no way to switch between MJPEG und
> > YUYV(?)-Mode in kopete. I first have to start ekiga, try and set the
> > right resolution, then start kopete and see a much too large picture.
> > The other way works too: I can set a smaller resolution, then start
> > kopete and see a picture with scrambled lines (looks like every line is
> > continued in the next line): kopete does not handle MJPEG.
> 
> Kopete should then be fixed :-)

I thought so. ;-)

> Seriously, applications which don't support V4L2 properly should be ported. 
> MJPEG decoding is quite easy and has been implemented in lots of places.
> 
> I had a quick look at Kopete, and fixing V4L2 support wouldn't be that 
> difficult. That's a good candidate for a junior job.

A good candidate for a job would first be some documentation of kopete.
There are three or four places dealing with webcams. Since having no
idea how to handle webcams, webstreams or outputs to screen, it took me
some time to figure out, where to search for the lack of MJPEG-support.

If I'm right, it's kopete-0.12.2/kopete/libkopete/avdevice/, espeacially
videodevice.cpp, function VideoDevice::GetFrame(). For a first hack,
here one could read the MJPEG-Frame and put it to some supported format
(YUV420P or something). There are about ten or twenty other files to be
fixed.

> > My problem right now is: Is there any program that can simulate a
> > /dev/video-device? I know of streaming-software streaming to the
> > internet, but this does not help for use with kopete, does it?
> 
> As Pierre mentioned, there's a v4l loopback module. I've never played with it, 
> and I don't know how stable/efficient/complete it is.

I found no way of reading my webcam and sending the stream back to the
loopback-input.

> If you have some C/C++ programming knowledge, Kopete wouldn't be difficult to 
> fix. I'm sure many people would thank you for your work :-)

For the next two or three month there's no way of getting more than a
quick and very dirty hack from me. By that time there's a certain
probability of "native" MJPEG-support. Very dirty includes e.g. compiled
in fixed resolutions. There will be no way of chosing resolutions via
user interface. (If no one else integrates this support, I think I could
learn Qt and a lot more C++ than I know by now, and do the job in some
months.)

Now to my real new problem: Is there some easy to understand sample
implementation of decoding some MJPEG-Frame to one of following:

PIXELFORMAT_GREY
PIXELFORMAT_RGB332
PIXELFORMAT_RGB555
PIXELFORMAT_RGB555X
PIXELFORMAT_RGB565
PIXELFORMAT_RGB565X
PIXELFORMAT_RGB24
PIXELFORMAT_BGR24
PIXELFORMAT_RGB32
PIXELFORMAT_BGR32
PIXELFORMAT_YUYV
PIXELFORMAT_UYVY
PIXELFORMAT_YUV420P
PIXELFORMAT_YUV422P

I'd prefer implementations not using additional libraries or use Qt for
decoding.

I remember some message I've seen some time ago, where one showed the
basics of MJPEG-decoding. But I did not find it again, probably because
I do not remember the place I've seen this message.

Any pointers appreciated! Thanks a lot in advance!

Have a nice day!

Martin


From alex at alexpounds.com  Sun Jan  7 14:03:24 2007
From: alex at alexpounds.com (Alex Pounds)
Date: Sun, 7 Jan 2007 13:03:24 +0000
Subject: [Linux-uvc-devel] Creating new /dev/video?
In-Reply-To: <1168164225.4488.31.camel@delight>
References: <20061230100509.GA14498@delight>
	<200612301523.57897.laurent.pinchart@skynet.be>
	<1168164225.4488.31.camel@delight>
Message-ID: <20070107130324.GA24376@localhost.localdomain>

On Sun, Jan 07, 2007 at 11:03:45AM +0100, Martin wrote:
> Am Samstag, den 30.12.2006, 15:23 +0100 schrieb Laurent Pinchart:
> > On a side note, aMSN should now work properly with UVC webcams. Philippe 
> > Valembois added MJPEG support, and even fixed a small bug in the driver. 
> > Thanks Phil.
> 
> Right after your message (or two days later?) I checked it out from the
> SVN. Yet, it did not work for me. Please do not ask me, why. I can do
> some debugging in a month or two, presumed someone is interested in the
> resulting stuff.

I also grabbed a SVN snapshot of aMSN, but I found it worked fine for me.
Well, fine-ish: I can both send and receive webcam sessions, but it does
crash occasionally. I spoke to an aMSN developer, and they tell me it's a
driver issue. I've seen no "trigger" for the crash, as in it doesn't
happen consistently when I do something. Sometimes I see the ioctl
messages before the crash, sometimes not. In the log below we can see two
crashes - the second crash occurs at the second "Unsupported marker type"
line. 


ioctl: VIDIOC_S_FMT(type=VIDEO_CAPTURE;fmt.pix.width=320;fmt.pix.height=240;fmt.pix.pixelformat=0x56595559 [YUYV];fmt.pix.field=A NY;fmt.pix.bytesperline=0;fmt.pix.sizeimage=0;fmt.pix.colorspace=unknown;fmt.pix.priv=0): Input/output error
ioctl: VIDIOC_S_FMT(type=VIDEO_CAPTURE;fmt.pix.width=320;fmt.pix.height=240;fmt.pix.pixelformat=0x47504a4d [MJPG];fmt.pix.field=A NY;fmt.pix.bytesperline=0;fmt.pix.sizeimage=0;fmt.pix.colorspace=unknown;fmt.pix.priv=0): Input/output error
ioctl: VIDIOC_QUERYCTRL(id=9963776;type=unknown;name="";minimum=0;maximum=0;step=0;default_value=0;flags=0): Input/output error
Unsupported marker type 0x1b
Oops: malloc_video_bufs is 1 (expected 0)
[utils/linux/capture/libng/grab-ng.c:malloc_bufs_check:231]
Oops: processes is 1 (expected 0)
[utils/linux/capture/libng/convert.c:process_check:179]
attempt to provide package tls 1.5 failed: package tls 1.50 provided instead
Unsupported marker type 0x1b
Oops: malloc_video_bufs is 1 (expected 0)
[utils/linux/capture/libng/grab-ng.c:malloc_bufs_check:231]
Oops: processes is 1 (expected 0)
[utils/linux/capture/libng/convert.c:process_check:179]
attempt to provide package tls 1.5 failed: package tls 1.50 provided
instead



-- 
Alex Pounds (Creature)                  .~.         http://www.alexpounds.com/
                                        /V\        http://www.ethicsgirls.com/
                                       // \\
"Variables won't; Constants aren't"   /(   )\
                                       ^`~'^


From mailinglisten at habmalnefrage.de  Sun Jan  7 15:35:33 2007
From: mailinglisten at habmalnefrage.de (Martin)
Date: Sun, 07 Jan 2007 15:35:33 +0100
Subject: [Linux-uvc-devel] Creating new /dev/video?
In-Reply-To: <20070107130324.GA24376@localhost.localdomain>
References: <20061230100509.GA14498@delight>
	<200612301523.57897.laurent.pinchart@skynet.be>
	<1168164225.4488.31.camel@delight>
	<20070107130324.GA24376@localhost.localdomain>
Message-ID: <1168180533.4488.71.camel@delight>

Am Sonntag, den 07.01.2007, 13:03 +0000 schrieb Alex Pounds:
> On Sun, Jan 07, 2007 at 11:03:45AM +0100, Martin wrote:
> > Am Samstag, den 30.12.2006, 15:23 +0100 schrieb Laurent Pinchart:
> > > On a side note, aMSN should now work properly with UVC webcams. Philippe 
> > > Valembois added MJPEG support, and even fixed a small bug in the driver. 
> > > Thanks Phil.
> > 
> > Right after your message (or two days later?) I checked it out from the
> > SVN. Yet, it did not work for me. Please do not ask me, why. I can do
> > some debugging in a month or two, presumed someone is interested in the
> > resulting stuff.
> 
> I also grabbed a SVN snapshot of aMSN, but I found it worked fine for me.

Ok, some facts now:

linux-uvc-video Revision 75
amsn Revision 7723

Bus 001 Device 003: ID 046d:08c5 Logitech, Inc. 

Procedure:
1) Starting amsn from command line (gnome-Terminal) to see output
directly
2) Connecting to MSN
3) Preferences -> Others
4) "Webcam" -> UVC-driver (on the left column)

Still no output on the command line.

5) "Camera" (appeared in step 4 in the left column)

Output as follows:

ioctl: VIDIOC_REQBUFS(count=1;type=VIDEO_CAPTURE;memory=MMAP): Invalid
argument

Then several times:

ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0
[];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.seconds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0;memory=unknown): Invalid argument

So let's check out the FAQ and the test.tcl:

Selecting device is alright. A small (very small) picture appears.
Switching settings ... is a bit strange: The setting shall be set from 0
to 6553x, and no really reasonable result is put out. (Maybe I did not
try hard enough, tell me, when these values are meant to be alright,
please.)

Since the picture is too small for me, I click von "switch resolution".
It works, up to a certain amount, BUT there's some output:

ioctl: VIDIOC_REQBUFS(count=1;type=VIDEO_CAPTURE;memory=MMAP): Invalid
argument
ioctl: VIDIOC_REQBUFS(count=1;type=VIDEO_CAPTURE;memory=MMAP): Invalid
argument
Changing to QSIF
ioctl: VIDIOC_REQBUFS(count=1;type=VIDEO_CAPTURE;memory=MMAP): Invalid
argument

Changing to QCIF
ioctl: VIDIOC_REQBUFS(count=1;type=VIDEO_CAPTURE;memory=MMAP): Invalid
argument

Changing to SIF
ioctl: VIDIOC_REQBUFS(count=1;type=VIDEO_CAPTURE;memory=MMAP): Invalid
argument

Changing to CIF
ioctl: VIDIOC_REQBUFS(count=1;type=VIDEO_CAPTURE;memory=MMAP): Invalid
argument

Changing to VGA
ioctl: VIDIOC_REQBUFS(count=1;type=VIDEO_CAPTURE;memory=MMAP): Invalid
argument

Speicherzugriffsfehler

(Speicherzugriffsfehler = Segfault)

As you can imagine, the program does end when "segfault" appears.

v4l-info is not to be found on my system (Gentoo), sorry.

Hope this helps ...

Martin


From contact at alexandredenis.net  Mon Jan  8 09:17:45 2007
From: contact at alexandredenis.net (Alexandre DENIS)
Date: Mon, 8 Jan 2007 09:17:45 +0100
Subject: [Linux-uvc-devel] Creating new /dev/video?
In-Reply-To: <1168164225.4488.31.camel@delight>
References: <20061230100509.GA14498@delight>
	<200612301523.57897.laurent.pinchart@skynet.be>
	<1168164225.4488.31.camel@delight>
Message-ID: <200701080917.45587.contact@alexandredenis.net>


Hi,

> > Kopete should then be fixed :-)
>
> I thought so. ;-)

So do I :-)

> > Seriously, applications which don't support V4L2 properly should be
> > ported. MJPEG decoding is quite easy and has been implemented in lots of
> > places.
> >
> > I had a quick look at Kopete, and fixing V4L2 support wouldn't be that
> > difficult. That's a good candidate for a junior job.
>
> A good candidate for a job would first be some documentation of kopete.
> There are three or four places dealing with webcams. Since having no
> idea how to handle webcams, webstreams or outputs to screen, it took me
> some time to figure out, where to search for the lack of MJPEG-support.
>
> If I'm right, it's kopete-0.12.2/kopete/libkopete/avdevice/, espeacially
> videodevice.cpp, function VideoDevice::GetFrame(). For a first hack,
> here one could read the MJPEG-Frame and put it to some supported format
> (YUV420P or something). There are about ten or twenty other files to be
> fixed.

I had a look on kopete SVN sources and did some tests with my Quickcam Pro 
5000. Actually, it doesn't work at all OotB. With further investigation, I 
found that kopete only supports YUV420P and [RGB|BGR][24|32], where the uvc 
driver only supports YUYV and MJPEG.

With some fiddling, it was very easy to add YUYV in kopete and actually I have 
a patch that works, except that the colors are wrong (almost grayscale, my 
YUYV color decoding code must be wrong). I added hooks for MJPEG, but 
actually I have no MJPEG decoder. If someone can give me an example code for 
MJPEG decoding, I would be glad to release an kopete patch for MJPEG support.

> > > My problem right now is: Is there any program that can simulate a
> > > /dev/video-device? I know of streaming-software streaming to the
> > > internet, but this does not help for use with kopete, does it?
> >
> > As Pierre mentioned, there's a v4l loopback module. I've never played
> > with it, and I don't know how stable/efficient/complete it is.
>
> I found no way of reading my webcam and sending the stream back to the
> loopback-input.

vloopback is V4L1 only. It is not likely to work with linux-uvc.

-a.




From adrian.skehill at gmail.com  Mon Jan  8 15:03:46 2007
From: adrian.skehill at gmail.com (Adrian Skehill)
Date: Mon, 8 Jan 2007 14:03:46 +0000
Subject: [Linux-uvc-devel] No valid video chain found.
Message-ID: <56527a580701080603h83534canbe6c9603678f59dc@mail.gmail.com>

Hi There,

I saw a thread on this topic a few months ago, requesting some follow on
information and it never followed. I've just purchased a Create Live!
Optivia web cam and getting the same error with svn trunk.

Any ideas where I could start looking (haven't looked at c in years but
willing to take a stab and patch if required!)

Cheers,
Adrian.


[17234012.848000] usb 5-5: new high speed USB device using ehci_hcd and
address 15
[17234013.272000] usb 5-5: configuration #1 chosen from 1 choice
[17234013.272000] uvcvideo: Probing generic UVC device 5
[17234013.272000] uvcvideo: Found format MJPEG.
[17234013.272000] uvcvideo: - 640x480 (30.0 fps)
[17234013.272000] uvcvideo: - 320x240 (30.0 fps)
[17234013.272000] uvcvideo: - 160x120 (30.0 fps)
[17234013.272000] uvcvideo: - 352x288 (30.0 fps)
[17234013.272000] uvcvideo: - 176x144 (30.0 fps)
[17234013.272000] uvcvideo: Found format Uncompressed.
[17234013.272000] uvcvideo: - 640x480 (30.0 fps)
[17234013.272000] uvcvideo: - 320x240 (30.0 fps)
[17234013.272000] uvcvideo: - 160x120 (30.0 fps)
[17234013.272000] uvcvideo: - 352x288 (30.0 fps)
[17234013.272000] uvcvideo: - 176x144 (30.0 fps)
[17234013.272000] uvcvideo: Found a Status endpoint (addr 82).
[17234013.272000] uvcvideo: Found UVC 1.00 device Live! Cam Optia
(041e:4057)
[17234013.272000] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/2 to device 5 entity 5
[17234013.272000] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/3 to device 5 entity 5
[17234013.272000] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/6 to device 5 entity 5
[17234013.272000] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/7 to device 5 entity 5
[17234013.272000] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/8 to device 5 entity 5
[17234013.272000] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/9 to device 5 entity 5
[17234013.272000] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/5 to device 5 entity 5
[17234013.272000] uvcvideo: Added control
00000000-0000-0000-0000-000000000001/2 to device 5 entity 1
[17234013.272000] uvcvideo: Added control
00000000-0000-0000-0000-000000000001/4 to device 5 entity 1
[17234013.272000] uvcvideo: Scanning UVC chain: OT 3 <- Unit 6 <- Unit 5 <-
Unit 4<7>uvcvideo: Selector units are not supported yet.
[17234013.272000] uvcvideo: No valid video chain found.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070108/f583fc19/attachment.html>

From laurent.pinchart at skynet.be  Mon Jan  8 15:39:12 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 8 Jan 2007 15:39:12 +0100
Subject: [Linux-uvc-devel] No valid video chain found.
In-Reply-To: <56527a580701080603h83534canbe6c9603678f59dc@mail.gmail.com>
References: <56527a580701080603h83534canbe6c9603678f59dc@mail.gmail.com>
Message-ID: <200701081539.12744.laurent.pinchart@skynet.be>

Hi Adrian,

> I saw a thread on this topic a few months ago, requesting some follow on
> information and it never followed. I've just purchased a Create Live!
> Optivia web cam and getting the same error with svn trunk.
>
> Any ideas where I could start looking (haven't looked at c in years but
> willing to take a stab and patch if required!)

[snip]
> uvcvideo: Selector units are not supported yet.
> uvcvideo: No valid video chain found.

Nice, seems there is now at least one device implementing the selector unit. 
This is good news for me (because I'll have something to test) but bad news 
for you (because you will have to wait until I'm done :-)).

I'd like to have a look at the USB descriptors. Could you provide me with the 
output of lsusb -v (usbutils 0.72 or CVS) ?

Cheers,

Laurent Pinchart


From adrian.skehill at gmail.com  Mon Jan  8 16:29:30 2007
From: adrian.skehill at gmail.com (Adrian Skehill)
Date: Mon, 8 Jan 2007 15:29:30 +0000
Subject: [Linux-uvc-devel] No valid video chain found.
In-Reply-To: <200701081539.12744.laurent.pinchart@skynet.be>
References: <56527a580701080603h83534canbe6c9603678f59dc@mail.gmail.com>
	<200701081539.12744.laurent.pinchart@skynet.be>
Message-ID: <56527a580701080729h2ab764c9k641ab5e55cd9a757@mail.gmail.com>

Thanks Laurent,


> I'd like to have a look at the USB descriptors. Could you provide me with
> the
> output of lsusb -v (usbutils 0.72 or CVS) ?
>
>
>
I've attached the output of lsusb -v.

If there's anything else I can do for you, let me know.

Cheers,
Adrian.



>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070108/55c088c9/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lsusb.txt.gz
Type: application/x-gzip
Size: 3645 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070108/55c088c9/attachment.bin>

From landabaso at gmail.com  Mon Jan  8 18:18:03 2007
From: landabaso at gmail.com (Jose Luis Landabaso)
Date: Mon, 8 Jan 2007 18:18:03 +0100
Subject: [Linux-uvc-devel] Automatic Gain Control
Message-ID: <a4fd5c620701080918l7ee8bc70w1673299b1e71fcb5@mail.gmail.com>

Hi Martin Rubli and others!

First, let me thank you for the work done so far in the driver!

The thing is that I am trying to disable the camera auto gain.
I have read some previous threads that treated this same topic, but haven't
succeeded so far. I applied the patch that Martin Rubli made available. I
then compliled and installed. Later, I compiled the "bayer.c" file.

I am using a Logitech Ultra Vision camera and opencv and works pretty ok,
but when I run the bayer program I get:

sudo ./bayer /dev/video0 0
Device /dev/video0 opened: USB Video Class device.
Enabling color pipeline ...
ERROR: Unable to set device control: -1

From laurent.pinchart at skynet.be  Mon Jan  8 21:03:49 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 8 Jan 2007 21:03:49 +0100
Subject: [Linux-uvc-devel] No valid video chain found.
In-Reply-To: <56527a580701080729h2ab764c9k641ab5e55cd9a757@mail.gmail.com>
References: <56527a580701080603h83534canbe6c9603678f59dc@mail.gmail.com>
	<200701081539.12744.laurent.pinchart@skynet.be>
	<56527a580701080729h2ab764c9k641ab5e55cd9a757@mail.gmail.com>
Message-ID: <200701082103.49423.laurent.pinchart@skynet.be>

Hi Adrian,

> > I'd like to have a look at the USB descriptors. Could you provide me with
> > the output of lsusb -v (usbutils 0.72 or CVS) ?
>
> I've attached the output of lsusb -v.

Thanks.

> If there's anything else I can do for you, let me know.

Feel free to send me a webcam ;-)

I had a look at the webcam USB descriptor. Implementing support for the 
selector unit shouldn't be too difficult, but I have no webcam to test this 
on. I'll try to contact Creative to see if they can sponsor the project. In 
the meantime, you can expect a patch in the next few days. It might not work 
though :-)

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Jan  8 21:08:38 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 8 Jan 2007 21:08:38 +0100
Subject: [Linux-uvc-devel] Automatic Gain Control
In-Reply-To: <a4fd5c620701080918l7ee8bc70w1673299b1e71fcb5@mail.gmail.com>
References: <a4fd5c620701080918l7ee8bc70w1673299b1e71fcb5@mail.gmail.com>
Message-ID: <200701082108.38282.laurent.pinchart@skynet.be>

Hi Jose,

> Hi Martin Rubli and others!
>
> First, let me thank you for the work done so far in the driver!

As the project leader, let me thank you :-)

> The thing is that I am trying to disable the camera auto gain.
> I have read some previous threads that treated this same topic, but haven't
> succeeded so far. I applied the patch that Martin Rubli made available. I
> then compliled and installed. Later, I compiled the "bayer.c" file.
>
> I am using a Logitech Ultra Vision camera and opencv and works pretty ok,
> but when I run the bayer program I get:
>
> sudo ./bayer /dev/video0 0
> Device /dev/video0 opened: USB Video Class device.
> Enabling color pipeline ...
> ERROR: Unable to set device control: -1
>
> From what I understand, the idea is to change the camera behaviour in
> run-time, isn't it? I mean, I can tell the camera to stop doing
> auto-adjustments (gain, shutter, whatever) anytime. Can this be achieved?

That's right. The Quickcam Ultra Vision might have slightly different 
controls. I have no such model here, so I can't test the patch. Maybe Martin 
could have a look.

Martin, by the way, is it necessary to put the webcam in bayer mode to disable 
the auto-exposure ? Or would the auto-exposure mode control do the job 
alone ?

Cheers,

Laurent Pinchart


From mxhaard at magic.fr  Mon Jan  8 21:30:05 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Mon, 8 Jan 2007 21:30:05 +0100
Subject: [Linux-uvc-devel] Automatic Gain Control
In-Reply-To: <200701082108.38282.laurent.pinchart@skynet.be>
References: <a4fd5c620701080918l7ee8bc70w1673299b1e71fcb5@mail.gmail.com>
	<200701082108.38282.laurent.pinchart@skynet.be>
Message-ID: <200701082130.05631.mxhaard@magic.fr>

Le Lundi 8 Janvier 2007 21:08, Laurent Pinchart a ?crit?:
> Hi Jose,
>
> > Hi Martin Rubli and others!
> >
> > First, let me thank you for the work done so far in the driver!
>
> As the project leader, let me thank you :-)
>
> > The thing is that I am trying to disable the camera auto gain.
> > I have read some previous threads that treated this same topic, but
> > haven't succeeded so far. I applied the patch that Martin Rubli made
> > available. I then compliled and installed. Later, I compiled the
> > "bayer.c" file.
> >
> > I am using a Logitech Ultra Vision camera and opencv and works pretty ok,
> > but when I run the bayer program I get:
> >
> > sudo ./bayer /dev/video0 0
> > Device /dev/video0 opened: USB Video Class device.
> > Enabling color pipeline ...
> > ERROR: Unable to set device control: -1
> >
> > From what I understand, the idea is to change the camera behaviour in
> > run-time, isn't it? I mean, I can tell the camera to stop doing
> > auto-adjustments (gain, shutter, whatever) anytime. Can this be achieved?
>
> That's right. The Quickcam Ultra Vision might have slightly different
> controls. I have no such model here, so I can't test the patch. Maybe
> Martin could have a look.
>
> Martin, by the way, is it necessary to put the webcam in bayer mode to
> disable the auto-exposure ? Or would the auto-exposure mode control do the
> job alone ?
>
> Cheers,
>
> Laurent Pinchart
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
I just upload a new revision of luvcview with pan/tilt fix, a lot of 
improvements. Seem strange that we cannot change the exposure in manuel 
mode ? Is there a way to set/reset the autowhite balance too ? a lot of 
robotic project need these features
Cheers
-- 
Michel Xhaard
http://mxhaard.free.fr


From luca.risolia at studio.unibo.it  Mon Jan  8 21:56:28 2007
From: luca.risolia at studio.unibo.it (Luca Risolia)
Date: Mon, 8 Jan 2007 21:56:28 +0100
Subject: [Linux-uvc-devel] C function to convert from Bayer to RGB24 pixel
	formats
Message-ID: <200701082156.29167.luca.risolia@studio.unibo.it>

This is function in C to convert from Bayer to RGB24 pixel formats.
The linear interpolation is more efficient than the ones I saw in other
similar functions on internet, as the code omits "if-then-else" conditional
statements in the loops.

Best regards,
Luca Risolia
---

/***************************************************************************
 * Color convertion from Bayer to RGB24                                    *
 *                                                                         *
 * Copyright (C) Luca Risolia <luca.risolia at studio.unibo.it>               *
 *                                                                         *
 * This program is free software; you can redistribute it and/or modify    *
 * it under the terms of the GNU General Public License as published by    *
 * the Free Software Foundation; either version 2 of the License, or       *
 * (at your option) any later version.                                     *
 *                                                                         *
 * This program is distributed in the hope that it will be useful,         *
 * but WITHOUT ANY WARRANTY; without even the implied warranty of          *
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the           *
 * GNU General Public License for more details.                            *
 *                                                                         *
 * You should have received a copy of the GNU General Public License       *
 * along with this program; if not, write to the Free Software             *
 * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.               *
 ***************************************************************************/

/*
   bayer bgbg...grgr...to rgb24
*/

#define RED 2
#define GREEN 1
#define BLUE 0

#define avg2(x,y) ((((int)(x)) + ((int)(y))) / 2)
#define avg3(x,y,z) ((((int)(x)) + ((int)(y)) + ((int)(z))) / 3)
#define avg4(w,x,y,z) ((((int)(w)) + ((int)(x)) + ((int)(y)) + ((int)(z))) / 4)

void sbggr8_to_rgb24(unsigned char *s, unsigned int x, unsigned int y,
                     unsigned char *d)
{
	unsigned long int i, j;

	/* upper left corner */
	d[0 + RED] = s[x + 1];
	d[0 + BLUE] = s[0];
	d[0 + GREEN] = avg2(s[1], s[x]);

	/* top line (minus corners) */
	i = 1;
	while (i < x - 2) {
		d[i * 3 + RED] = s[x + i];
		d[i * 3 + GREEN] = s[i];
		d[i * 3 + BLUE] = avg2(s[i - 1], s[i + 1]);

		i++;

		d[i * 3 + RED] = avg2(s[x + i - 1], s[x + i + 1]);
		d[i * 3 + GREEN] = avg3(s[i - 1], s[i + 1], s[x + i]);
		d[i * 3 + BLUE] = s[i];

		i++;
	}

	/* upper right corner */
	d[i * 3 + RED] = s[x + i];
	d[i * 3 + GREEN] = s[i];
	d[i * 3 + BLUE] = s[i - 1];

	/* middle lines */
	j = 1;
	while (j < y - 2) {
		d[j * x * 3 + RED] = s[j * x + 1];
		d[j * x * 3 + GREEN] = s[j * x];
		d[j * x * 3 + BLUE] = avg2(s[(j - 1) * x], s[(j + 1) * x]);

		i = 1;
		while (i < x - 2) {
			d[(j * x + i) * 3 + RED] = s[j * x + i];
			d[(j * x + i) * 3 + GREEN] = avg4(s[(j - 1) * x + i],
			                                  s[j * x + i - 1],
			                                  s[j * x + i + 1],
			                                  s[(j + 1) * x + i]);
			d[(j * x + i) * 3 + BLUE] =
			                          avg4(s[(j - 1) * x + i - 1],
			                               s[(j - 1) * x + i + 1],
			                               s[(j + 1) * x + i - 1],
			                               s[(j + 1) * x + i + 1]);

			i++;

			d[(j * x + i) * 3 + RED] = avg2(s[j * x + i - 1],
			                                s[j * x + i + 1]);
			d[(j * x + i) * 3 + GREEN] = s[j * x + i];
			d[(j * x + i) * 3 + BLUE] = avg2(s[(j - 1) * x + i],
			                                 s[(j + 1) * x + i]);

			i++;
		}

		d[(j * x + i) * 3 + RED] = s[j * x + i];
		d[(j * x + i) * 3 + BLUE] = avg2(s[(j - 1) * x + i - 1],
		                                 s[(j + 1) * x + i - 1]);
		d[(j * x + i) * 3 + GREEN] = avg3(s[(j - 1) * x + i],
		                                  s[(j + 1) * x + i],
		                                  s[j * x + i - 1]);

		j++;

		d[j * x * 3 + RED] = avg2(s[(j - 1) * x + 1],
		                          s[(j + 1) * x + 1]);
		d[j * x * 3 + BLUE] = s[j * x];
		d[j * x * 3 + GREEN] = avg3(s[(j - 1) * x],
		                            s[j * x + 1],
		                            s[(j + 1) * x]);

		i = 1;
		while (i < x - 2) {
			d[(j * x + i) * 3 + RED] = avg2(s[(j - 1) * x + i],
			                                s[(j + 1) * x + i]);
			d[(j * x + i) * 3 + GREEN] = s[j * x + i];
			d[(j * x + i) * 3 + BLUE] = avg2(s[j * x + i - 1],
			                                 s[j * x + i + 1]);

			i++;

			d[(j * x + i) * 3 + RED] = avg4(s[(j - 1) * x + i - 1],
			                                s[(j - 1) * x + i + 1],
			                                s[(j + 1) * x + i - 1],
			                               s[(j + 1) * x + i + 1]);
			d[(j * x + i) * 3 + GREEN] = avg4(s[(j - 1) * x + i],
			                                  s[j * x + i - 1],
			                                  s[j * x + i + 1],
			                                  s[(j + 1) * x + i]);
			d[(j * x + i) * 3 + BLUE] = s[j * x + i];

			i++;
		}

		d[(j * x + i) * 3 + RED] = avg2(s[(j - 1) * x + i],
		                                s[(j + 1) * x + i]);
		d[(j * x + i) * 3 + BLUE] = s[j * x + i - 1];
		d[(j * x + i) * 3 + GREEN] = s[j * x + i];

		j++;
	}

	/* lower left corner */
	d[(j * x) * 3 + RED] = s[j * x + 1];
	d[(j * x) * 3 + GREEN] = s[j * x];
	d[(j * x) * 3 + BLUE] = s[(j - 1) * x];

	/* bottom line */
	i = 1;
	while (i < x - 2) {
		d[(j * x + i) * 3 + RED] = s[j * x + i];
		d[(j * x + i) * 3 + GREEN] = avg3(s[(j - 1) * x + i],
		                                  s[j * x + i - 1],
		                                  s[j * x + i + 1]);
		d[(j * x + i) * 3 + BLUE] = avg2(s[(j - 1) * x + i - 1],
		                                 s[(j - 1) * x + i + 1]);

		i++;

		d[(j * x + i) * 3 + RED] = avg2(s[j * x + i - 1],
		                                s[j * x + i + 1]);
		d[(j * x + i) * 3 + GREEN] = s[j * x + i];
		d[(j * x + i) * 3 + BLUE] = s[(j - 1) * x + i];

		i++;
	}

	/* lower right corner */
	d[(j * x + i) * 3 + RED] = s[j * x + i];
	d[(j * x + i) * 3 + GREEN] = avg2(s[(j - 1) * x + i],
	                                  s[j * x + i - 1]);
	d[(j * x + i) * 3 + BLUE] = s[(j - 1) * x + i - 1];
}


From bnc at astronomicalresearchaustralia.org  Tue Jan  9 06:46:55 2007
From: bnc at astronomicalresearchaustralia.org (Brian)
Date: Tue, 09 Jan 2007 16:46:55 +1100
Subject: [Linux-uvc-devel] QuickCam Fusion lockup
Message-ID: <45A32C4F.7080004@astronomicalresearchaustralia.org>

Laurent,
Will try again...

> > Just to let you know that I am getting the uvc lockups as well
> > **************************************************************
[snip]
> > *****************************************************************
> > Sometimes I can unplug the camera and it will recover, mostly it just
> > locks up.

>> >>What do you mean by lock ups ? Does your computer freeze ? Or does the
>> >>webcam
>> >>just stop working ? If the computer is still responsive, do other USB
>> >>devices
>> >>still work ?

Yes the computer is still working, it is only the camera that locks up.
If I try to run an application I get;
nice -4 uvccapture -vvv -t120  -d/dev/video1  -x1280 -y1024 -otest.jpg
Using videodevice: /dev/video1
Saving images to: test.jpg
Image size: 1280x1024
Taking snapshot every 120 seconds
Taking images using mmap
Unable to set format: 5.
 Init v4L2 failed !! exit fatal

This is because the camera appears to have disappeared from my system;
xawtv -hwscan
This is xawtv-3.94, running on Linux/i686 (2.6.16.21-0.25-default)
looking for available devices
port 73-73                              [ -xvport 73 ]
    type : Xvideo, video overlay
    name : video4linux

port 74-74
    type : Xvideo, image scaler
    name : Matrox G-Series Backend Scaler

/dev/video0: OK                         [ -device /dev/video0 ]
    type : v4l2
    name : WinFast DTV1000-T
    flags: overlay capture tuner

The camera normally comes up as video1.

Thanks,
Brian


-------------- next part --------------
A non-text attachment was scrubbed...
Name: bnc.vcf
Type: text/x-vcard
Size: 110 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070109/3332eefb/attachment.vcf>

From mailinglisten at habmalnefrage.de  Tue Jan  9 07:02:17 2007
From: mailinglisten at habmalnefrage.de (Martin)
Date: Tue, 09 Jan 2007 07:02:17 +0100
Subject: [Linux-uvc-devel] Creating new /dev/video?
In-Reply-To: <200701080917.45587.contact@alexandredenis.net>
References: <20061230100509.GA14498@delight>
	<200612301523.57897.laurent.pinchart@skynet.be>
	<1168164225.4488.31.camel@delight>
	<200701080917.45587.contact@alexandredenis.net>
Message-ID: <1168322537.14804.21.camel@delight>

Am Montag, den 08.01.2007, 09:17 +0100 schrieb Alexandre DENIS:
> I had a look on kopete SVN sources and did some tests with my Quickcam Pro 
> 5000. Actually, it doesn't work at all OotB. With further investigation, I 
> found that kopete only supports YUV420P and [RGB|BGR][24|32], where the uvc 
> driver only supports YUYV and MJPEG.

That's quite strange: My kopete sources do know some PIXELFORMAT_YUYV.
(0.12.2 and svn, revision 621573 after svn update in directory
libkopete/avdevice)

And by playing around with it, there's one thing I found out:

I first set the camera to YUYV-mode (using some program working and
chosing a high resolution, high resolutions are being worked on as YUYV,
lo resolutions are sent as MJPEG). Then I stopped this other program
(luvcview, iirc) and started kopete. In the configuration dialog
displayed the upper half of a picture (the window was much too small).
AND this picture seemed to have the right colours and be correct.

So I assume, YUYV is supported at the moment. But it is not small enough
to fit in the webcam-assumptions. ;-)

> With some fiddling, it was very easy to add YUYV in kopete and actually I have 
> a patch that works, except that the colors are wrong (almost grayscale, my 
> YUYV color decoding code must be wrong). I added hooks for MJPEG, but 
> actually I have no MJPEG decoder. If someone can give me an example code for 
> MJPEG decoding, I would be glad to release an kopete patch for MJPEG support.

I want to thank you for your work and time you invest in this project.
By now I do not know some examples. I'll mail again when I find some.

> vloopback is V4L1 only. It is not likely to work with linux-uvc.

My intention was reading by some daemon program, rewriting the stream,
putting it back in v4l1, then reread via kopete or something. Well, it
would have been a quick solution, nonetheless it's not worth any more
investigation I think.

Have a nice day,

Martin


From contact at alexandredenis.net  Tue Jan  9 09:17:03 2007
From: contact at alexandredenis.net (Alexandre DENIS)
Date: Tue, 9 Jan 2007 09:17:03 +0100
Subject: [Linux-uvc-devel] Creating new /dev/video?
In-Reply-To: <1168322537.14804.21.camel@delight>
References: <20061230100509.GA14498@delight>
	<200701080917.45587.contact@alexandredenis.net>
	<1168322537.14804.21.camel@delight>
Message-ID: <200701090917.03574.contact@alexandredenis.net>

Le mar 9 janvier 2007 07:02, Martin a ?crit :
> That's quite strange: My kopete sources do know some PIXELFORMAT_YUYV.
> (0.12.2 and svn, revision 621573 after svn update in directory
> libkopete/avdevice)

The strange thing is that kopete code is actually able to decode YUYV if ever 
it is selected, but it never tries to ask the webcam for YUYV. And the YUYV 
decoding is actually broken (wrong colors). It seems that the color problem 
comes from using the wrong colorspace (chromaticities and quantization are 
hard-coded in kopete). I fixed it and now I get right colors.

I will release my patch shortly. I still get some size-related problems (the 
webcam pretends that its max size is 176 x 144, though we get one 320 x 240 
picture before checking for max size!)

-a.



From landabaso at gmail.com  Tue Jan  9 09:33:00 2007
From: landabaso at gmail.com (Jose Luis Landabaso)
Date: Tue, 9 Jan 2007 09:33:00 +0100
Subject: [Linux-uvc-devel] No valid video chain found.
In-Reply-To: <200701082103.49423.laurent.pinchart@skynet.be>
References: <56527a580701080603h83534canbe6c9603678f59dc@mail.gmail.com>
	<200701081539.12744.laurent.pinchart@skynet.be>
	<56527a580701080729h2ab764c9k641ab5e55cd9a757@mail.gmail.com>
	<200701082103.49423.laurent.pinchart@skynet.be>
Message-ID: <a4fd5c620701090033x6c1957bel97f47103ca874fc7@mail.gmail.com>

Thanks Laurent!

The problem was I hadn't rmmoded the pre-patched driver. Now I can use
"bayer" without getting error messages.
However, the program doesn't have change the way the capture is being done.
As I mentioned yesterday, I have a very simple opencv program (see
copy/paste below) that keeps working the same way even if I disable the
color pipeline with the program "bayer" in the background.

I know it is autoadjusting all the time because when I put my hand over the
lens and remove it, then I capture a color transition from white to the
actual image, which means (if I am correct) that it is autoadjusting...

Is this the normal behaviour? Am I missing something?

Thanks!

OpenCV prog:

int main(int argc, char* argv[])
{
        IplImage * frame = NULL;
        CvCapture *input_cam = cvCaptureFromCAM(-1);

        frame = cvQueryFrame(input_cam);

        cvNamedWindow("capture", 0);
        cvResizeWindow("capture", frame->width, frame->height);

        while(frame != NULL){
                cvShowImage("capture", frame);
                cvWaitKey(10);
                frame = cvQueryFrame(input_cam);
        }
        return 0;
}



On 1/8/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> Hi Adrian,
>
> > > I'd like to have a look at the USB descriptors. Could you provide me
> with
> > > the output of lsusb -v (usbutils 0.72 or CVS) ?
> >
> > I've attached the output of lsusb -v.
>
> Thanks.
>
> > If there's anything else I can do for you, let me know.
>
> Feel free to send me a webcam ;-)
>
> I had a look at the webcam USB descriptor. Implementing support for the
> selector unit shouldn't be too difficult, but I have no webcam to test
> this
> on. I'll try to contact Creative to see if they can sponsor the project.
> In
> the meantime, you can expect a patch in the next few days. It might not
> work
> though :-)
>
> Cheers,
>
> Laurent Pinchart
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070109/a43b7904/attachment.html>

From ebi9 at ozob.net  Tue Jan  9 14:43:11 2007
From: ebi9 at ozob.net (Gene Imes)
Date: Tue, 09 Jan 2007 07:43:11 -0600
Subject: [Linux-uvc-devel] Automatic Gain Control
In-Reply-To: <200701082130.05631.mxhaard@magic.fr>
References: <a4fd5c620701080918l7ee8bc70w1673299b1e71fcb5@mail.gmail.com>	<200701082108.38282.laurent.pinchart@skynet.be>
	<200701082130.05631.mxhaard@magic.fr>
Message-ID: <45A39BEF.9070608@ozob.net>

> I just upload a new revision of luvcview with pan/tilt fix, a lot of 
> improvements. Seem strange that we cannot change the exposure in manuel 
> mode ? Is there a way to set/reset the autowhite balance too ? a lot of 
> robotic project need these features
> Cheers

Michel, If I click the 'Take a Picture!' button or the 'AVI Start/Stop' 
buttons nothing seems to happen. Is there a trick to it? If so what?

Or perhaps luvcview is writing to some directory I can not find.


Thanks,


-- 
Gene Imes ============================= ozob.net


From landabaso at gmail.com  Tue Jan  9 15:53:29 2007
From: landabaso at gmail.com (Jose Luis Landabaso)
Date: Tue, 9 Jan 2007 15:53:29 +0100
Subject: [Linux-uvc-devel] Automatic Gain Control
In-Reply-To: <200701082108.38282.laurent.pinchart@skynet.be>
References: <a4fd5c620701080918l7ee8bc70w1673299b1e71fcb5@mail.gmail.com>
	<200701082108.38282.laurent.pinchart@skynet.be>
Message-ID: <a4fd5c620701090653i2566c5f9n1942bc943b099e41@mail.gmail.com>

Laurent, Martin, others,

I have arrived to a point in which I'm very confused.
I have learnt that you can only turn off the color processing when the
camera is not capturing.
So, I stop the capture program, and then run bayer.
If I disable color processing I cannot run my capture program again since.
I always get:

select timeout
VIDIOC_DQBUF error 11, Resource temporarily unavailable

When I turn again the video processing on then the program works fine again.

Any ideas?


On 1/8/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> Hi Jose,
>
> > Hi Martin Rubli and others!
> >
> > First, let me thank you for the work done so far in the driver!
>
> As the project leader, let me thank you :-)
>
> > The thing is that I am trying to disable the camera auto gain.
> > I have read some previous threads that treated this same topic, but
> haven't
> > succeeded so far. I applied the patch that Martin Rubli made available.
> I
> > then compliled and installed. Later, I compiled the "bayer.c" file.
> >
> > I am using a Logitech Ultra Vision camera and opencv and works pretty
> ok,
> > but when I run the bayer program I get:
> >
> > sudo ./bayer /dev/video0 0
> > Device /dev/video0 opened: USB Video Class device.
> > Enabling color pipeline ...
> > ERROR: Unable to set device control: -1
> >
> > From what I understand, the idea is to change the camera behaviour in
> > run-time, isn't it? I mean, I can tell the camera to stop doing
> > auto-adjustments (gain, shutter, whatever) anytime. Can this be
> achieved?
>
> That's right. The Quickcam Ultra Vision might have slightly different
> controls. I have no such model here, so I can't test the patch. Maybe
> Martin
> could have a look.
>
> Martin, by the way, is it necessary to put the webcam in bayer mode to
> disable
> the auto-exposure ? Or would the auto-exposure mode control do the job
> alone ?
>
> Cheers,
>
> Laurent Pinchart
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070109/4ff9444f/attachment.html>

From alex at alexpounds.com  Tue Jan  9 15:58:45 2007
From: alex at alexpounds.com (Alex Pounds)
Date: Tue, 9 Jan 2007 14:58:45 +0000
Subject: [Linux-uvc-devel] Automatic Gain Control
In-Reply-To: <45A39BEF.9070608@ozob.net>
References: <a4fd5c620701080918l7ee8bc70w1673299b1e71fcb5@mail.gmail.com>
	<200701082108.38282.laurent.pinchart@skynet.be>
	<200701082130.05631.mxhaard@magic.fr> <45A39BEF.9070608@ozob.net>
Message-ID: <20070109145844.GA19869@localhost.localdomain>

On Tue, Jan 09, 2007 at 07:43:11AM -0600, Gene Imes wrote:
> Michel, If I click the 'Take a Picture!' button or the 'AVI Start/Stop' 
> buttons nothing seems to happen. Is there a trick to it? If so what?
> Or perhaps luvcview is writing to some directory I can not find.

On my system, luvcview will produce a "quickcam.jpg" and/or a "video.avi"
in the current directory when I hit those buttons. Note that the avi may
well be huge, as it's an MJPEG stream. 

If you run luvcview from a terminal, you'll see log messages like "get
picture !" when it takes a picture successfully. 

Hope this helps, 

-- 
Alex Pounds (Creature)                  .~.         http://www.alexpounds.com/
                                        /V\        http://www.ethicsgirls.com/
                                       // \\
"Variables won't; Constants aren't"   /(   )\
                                       ^`~'^


From landabaso at gmail.com  Tue Jan  9 16:02:14 2007
From: landabaso at gmail.com (Jose Luis Landabaso)
Date: Tue, 9 Jan 2007 16:02:14 +0100
Subject: [Linux-uvc-devel] Automatic Gain Control
In-Reply-To: <a4fd5c620701090653i2566c5f9n1942bc943b099e41@mail.gmail.com>
References: <a4fd5c620701080918l7ee8bc70w1673299b1e71fcb5@mail.gmail.com>
	<200701082108.38282.laurent.pinchart@skynet.be>
	<a4fd5c620701090653i2566c5f9n1942bc943b099e41@mail.gmail.com>
Message-ID: <a4fd5c620701090702y30c872fbq7444bb1e84bd28d5@mail.gmail.com>

In case it helps, the errors come from mainloop_v4l2 opencv's function:


   1160 static void mainloop_v4l2(CvCaptureCAM_V4L* capture)
   1161 {
   1162   unsigned int count;
   1163
   1164         count = 1;
   1165
   1166         while (count-- > 0) {
   1167                 for (;;) {
   1168                         fd_set fds;
   1169                         struct timeval tv;
   1170                         int r;
   1171
   1172                         FD_ZERO (&fds);
   1173                         FD_SET (capture->deviceHandle, &fds);
   1174
   1175                         /* Timeout. */
   1176                         tv.tv_sec = 2;
   1177                         tv.tv_usec = 0;
   1178
   1179                         r = select (capture->deviceHandle+1, &fds,
NULL, NULL, &tv);
   1180
   1181                         if (-1 == r) {
   1182                                 if (EINTR == errno)
   1183                                         continue;
   1184
   1185                                 errno_exit ("select");
   1186                         }
   1187
   1188                         if (0 == r) {
   1189                                 fprintf (stderr, "select
timeout\n");
   1190 //                                exit (EXIT_FAILURE);
   1191                         }
   1192
   1193       if (read_frame_v4l2 (capture))
   1194                                 break;
   1195
   1196       /* EAGAIN - continue select loop. */
   1197                 }
   1198         }
   1199 }

On 1/9/07, Jose Luis Landabaso <landabaso at gmail.com> wrote:
>
> Laurent, Martin, others,
>
> I have arrived to a point in which I'm very confused.
> I have learnt that you can only turn off the color processing when the
> camera is not capturing.
> So, I stop the capture program, and then run bayer.
> If I disable color processing I cannot run my capture program again
> since.  I always get:
>
> select timeout
> VIDIOC_DQBUF error 11, Resource temporarily unavailable
>
> When I turn again the video processing on then the program works fine
> again.
>
> Any ideas?
>
>
> On 1/8/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> >
> > Hi Jose,
> >
> > > Hi Martin Rubli and others!
> > >
> > > First, let me thank you for the work done so far in the driver!
> >
> > As the project leader, let me thank you :-)
> >
> > > The thing is that I am trying to disable the camera auto gain.
> > > I have read some previous threads that treated this same topic, but
> > haven't
> > > succeeded so far. I applied the patch that Martin Rubli made
> > available. I
> > > then compliled and installed. Later, I compiled the " bayer.c" file.
> > >
> > > I am using a Logitech Ultra Vision camera and opencv and works pretty
> > ok,
> > > but when I run the bayer program I get:
> > >
> > > sudo ./bayer /dev/video0 0
> > > Device /dev/video0 opened: USB Video Class device.
> > > Enabling color pipeline ...
> > > ERROR: Unable to set device control: -1
> > >
> > > From what I understand, the idea is to change the camera behaviour in
> > > run-time, isn't it? I mean, I can tell the camera to stop doing
> > > auto-adjustments (gain, shutter, whatever) anytime. Can this be
> > achieved?
> >
> > That's right. The Quickcam Ultra Vision might have slightly different
> > controls. I have no such model here, so I can't test the patch. Maybe
> > Martin
> > could have a look.
> >
> > Martin, by the way, is it necessary to put the webcam in bayer mode to
> > disable
> > the auto-exposure ? Or would the auto-exposure mode control do the job
> > alone ?
> >
> > Cheers,
> >
> > Laurent Pinchart
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070109/f39c467f/attachment.html>

From Serge.A.S at tochka.ru  Tue Jan  9 15:57:46 2007
From: Serge.A.S at tochka.ru (Serge A. Suchkov)
Date: Tue, 9 Jan 2007 17:57:46 +0300
Subject: [Linux-uvc-devel] Automatic Gain Control
In-Reply-To: <45A39BEF.9070608@ozob.net>
References: <a4fd5c620701080918l7ee8bc70w1673299b1e71fcb5@mail.gmail.com>
	<200701082130.05631.mxhaard@magic.fr> <45A39BEF.9070608@ozob.net>
Message-ID: <200701091757.46238.Serge.A.S@tochka.ru>

> > I just upload a new revision of luvcview with pan/tilt fix, a lot of 
> > improvements. Seem strange that we cannot change the exposure in manuel 
> > mode ? Is there a way to set/reset the autowhite balance too ? a lot of 
> > robotic project need these features
> > Cheers
> 
> Michel, If I click the 'Take a Picture!' button or the 'AVI Start/Stop' 
> buttons nothing seems to happen. Is there a trick to it? If so what?

Hmm,  latest luvcview work fine (with  gspcav2/mgspcav2  driver, except unsupported features of course )

AVI file saved in video.avi 
jpg snapshots saved in quickcam.jpg 

> Or perhaps luvcview is writing to some directory I can not find.

Both files saved in current directory

> 
> 
> Thanks,
> 
> 



-- 
Regards,
Serge A. Suchkov
--
"Acting is an art which consists of keeping the audience from
coughing."


From adrian.skehill at gmail.com  Tue Jan  9 17:05:15 2007
From: adrian.skehill at gmail.com (Adrian Skehill)
Date: Tue, 9 Jan 2007 16:05:15 +0000
Subject: [Linux-uvc-devel] No valid video chain found.
In-Reply-To: <200701082103.49423.laurent.pinchart@skynet.be>
References: <56527a580701080603h83534canbe6c9603678f59dc@mail.gmail.com>
	<200701081539.12744.laurent.pinchart@skynet.be>
	<56527a580701080729h2ab764c9k641ab5e55cd9a757@mail.gmail.com>
	<200701082103.49423.laurent.pinchart@skynet.be>
Message-ID: <56527a580701090805j2c9faa1p817dec4c44acfc73@mail.gmail.com>

Laurent,

Thanks a million for this. I'm looking forward to testing the patch for you!

Cheers,
Adrian.

On 1/8/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> Hi Adrian,
>
> > > I'd like to have a look at the USB descriptors. Could you provide me
> with
> > > the output of lsusb -v (usbutils 0.72 or CVS) ?
> >
> > I've attached the output of lsusb -v.
>
> Thanks.
>
> > If there's anything else I can do for you, let me know.
>
> Feel free to send me a webcam ;-)
>
> I had a look at the webcam USB descriptor. Implementing support for the
> selector unit shouldn't be too difficult, but I have no webcam to test
> this
> on. I'll try to contact Creative to see if they can sponsor the project.
> In
> the meantime, you can expect a patch in the next few days. It might not
> work
> though :-)
>
> Cheers,
>
> Laurent Pinchart
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070109/344fc4ae/attachment.html>

From mxhaard at magic.fr  Tue Jan  9 18:09:13 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Tue, 9 Jan 2007 18:09:13 +0100
Subject: [Linux-uvc-devel] Automatic Gain Control
In-Reply-To: <45A39BEF.9070608@ozob.net>
References: <a4fd5c620701080918l7ee8bc70w1673299b1e71fcb5@mail.gmail.com>
	<200701082130.05631.mxhaard@magic.fr> <45A39BEF.9070608@ozob.net>
Message-ID: <200701091809.13398.mxhaard@magic.fr>

Le Mardi 9 Janvier 2007 14:43, Gene Imes a ?crit?:
> > I just upload a new revision of luvcview with pan/tilt fix, a lot of
> > improvements. Seem strange that we cannot change the exposure in manuel
> > mode ? Is there a way to set/reset the autowhite balance too ? a lot of
> > robotic project need these features
> > Cheers
>
> Michel, If I click the 'Take a Picture!' button or the 'AVI Start/Stop'
> buttons nothing seems to happen. Is there a trick to it? If so what?
>
> Or perhaps luvcview is writing to some directory I can not find.
>
>
> Thanks,
Maybe because Picture and Avi only works with the MJPEG palette. Did you need 
Picture and AVI for all palettes ?
regards
-- 
Michel Xhaard
http://mxhaard.free.fr


From laurent.pinchart at skynet.be  Tue Jan  9 21:19:24 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 9 Jan 2007 21:19:24 +0100
Subject: [Linux-uvc-devel] QuickCam Fusion lockup
In-Reply-To: <45A32C4F.7080004@astronomicalresearchaustralia.org>
References: <45A32C4F.7080004@astronomicalresearchaustralia.org>
Message-ID: <200701092119.25145.laurent.pinchart@skynet.be>

Hi Brian,

> Will try again...
>
> > > Just to let you know that I am getting the uvc lockups as well
> > > **************************************************************
>
> [snip]
>
> > > *****************************************************************
> > > Sometimes I can unplug the camera and it will recover, mostly it just
> > > locks up.
> > >
> >> >>What do you mean by lock ups ? Does your computer freeze ? Or does the
> >> >>webcam
> >> >>just stop working ? If the computer is still responsive, do other USB
> >> >>devices
> >> >>still work ?
>
> Yes the computer is still working, it is only the camera that locks up.

Like I mentioned many times before, Logitech webcams are quite sensitive to 
USB timings. They work fine for some people, mostly fine for other, or even 
sometimes not at all. Martin Rubli and I tried to fix the issue, or at least 
find a workaround. The only thing we found is that there is a hardware bug in 
the webcams for which no workaround exists today. New generation webcams will 
hopefully be tested with the Linux UVC driver, and should include a firmware 
workaround. Unfortunately, on the PC side, there's not much we can do. I 
stopped working on the problem a few weeks ago. There will probably be no fix 
unless Logitech decides to put enough man-power on the project to really find 
out what happens and why Windows doesn't trigger the bug. In the meantime, 
you can consider your webcam broken when connected to your specific computer. 
It might work fine with another USB controller or another computer (even 
changing the CPU clock could influence the webcam behaviour).

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Jan  9 21:35:32 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 9 Jan 2007 21:35:32 +0100
Subject: [Linux-uvc-devel] No valid video chain found.
In-Reply-To: <56527a580701090805j2c9faa1p817dec4c44acfc73@mail.gmail.com>
References: <56527a580701080603h83534canbe6c9603678f59dc@mail.gmail.com>
	<200701082103.49423.laurent.pinchart@skynet.be>
	<56527a580701090805j2c9faa1p817dec4c44acfc73@mail.gmail.com>
Message-ID: <200701092135.32422.laurent.pinchart@skynet.be>

Hi Adrian,

> Thanks a million for this. I'm looking forward to testing the patch for
> you!

Could you test the following patch ? Please use the latest driver revision 
from SVN (75).

Cheers,

Laurent Pinchart

-------------- next part --------------
A non-text attachment was scrubbed...
Name: selector.patch
Type: text/x-diff
Size: 1918 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070109/7bd616dd/attachment.patch>

From austinf at cetoncorp.com  Tue Jan  9 22:20:39 2007
From: austinf at cetoncorp.com (Austin Foxley)
Date: Tue, 09 Jan 2007 13:20:39 -0800
Subject: [Linux-uvc-devel] QuickCam Fusion lockup
In-Reply-To: <200701092119.25145.laurent.pinchart@skynet.be>
References: <45A32C4F.7080004@astronomicalresearchaustralia.org>
	<200701092119.25145.laurent.pinchart@skynet.be>
Message-ID: <45A40727.4020607@cetoncorp.com>

Laurent Pinchart wrote:
> Hi Brian,
>
>> Will try again...
>>
>>>> Just to let you know that I am getting the uvc lockups as well
>>>> **************************************************************
>> [snip]
>>
>>>> *****************************************************************
>>>> Sometimes I can unplug the camera and it will recover, mostly it just
>>>> locks up.
>>>>
>>>>>> What do you mean by lock ups ? Does your computer freeze ? Or does the
>>>>>> webcam
>>>>>> just stop working ? If the computer is still responsive, do other USB
>>>>>> devices
>>>>>> still work ?
>> Yes the computer is still working, it is only the camera that locks up.
>
> Like I mentioned many times before, Logitech webcams are quite sensitive to 
> USB timings. They work fine for some people, mostly fine for other, or even 
> sometimes not at all. Martin Rubli and I tried to fix the issue, or at least 
> find a workaround. The only thing we found is that there is a hardware bug in 
> the webcams for which no workaround exists today. New generation webcams will 
> hopefully be tested with the Linux UVC driver, and should include a firmware 
> workaround. Unfortunately, on the PC side, there's not much we can do. I 
> stopped working on the problem a few weeks ago. There will probably be no fix 
> unless Logitech decides to put enough man-power on the project to really find 
> out what happens and why Windows doesn't trigger the bug. In the meantime, 
> you can consider your webcam broken when connected to your specific computer. 
> It might work fine with another USB controller or another computer (even 
> changing the CPU clock could influence the webcam behaviour).
>
> Laurent Pinchart
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
Given that a good chunk of cameras people are using are sometimes not 
functional,
i think it would be good to put something on the website about this. I 
own two
webcams that exhibit these problems regularly, and have been messing 
with various
versions of the "reset" patch, trying to get better behavior.

(Discussed here: 
http://www.mail-archive.com/linux-uvc-devel at lists.berlios.de/msg00322.html )

What is the opinion on putting some version of this hack in trunk? (even 
if temporarily)

Thanks for all the great work so far on this driver!

-- 
Austin Foxle



From bnc at astronomicalresearchaustralia.org  Wed Jan 10 00:46:37 2007
From: bnc at astronomicalresearchaustralia.org (Brian)
Date: Wed, 10 Jan 2007 10:46:37 +1100
Subject: [Linux-uvc-devel] QuickCam Fusion lockup
In-Reply-To: <200701092119.25145.laurent.pinchart@skynet.be>
References: <45A32C4F.7080004@astronomicalresearchaustralia.org>
	<200701092119.25145.laurent.pinchart@skynet.be>
Message-ID: <45A4295D.90806@astronomicalresearchaustralia.org>


Laurent,

<SNIP>
>> Yes the computer is still working, it is only the camera that locks up.
> 
> Like I mentioned many times before, Logitech webcams are quite sensitive to 
> USB timings. They work fine for some people, mostly fine for other, or even 
> sometimes not at all. Martin Rubli and I tried to fix the issue, or at least 
> find a workaround. 
Yes, I have been following that discussion

>The only thing we found is that there is a hardware bug in 
> the webcams for which no workaround exists today.
That is the definitive statement that I had not understood.

> New generation webcams will 
> hopefully be tested with the Linux UVC driver, and should include a firmware 
> workaround. Unfortunately, on the PC side, there's not much we can do. I 
> stopped working on the problem a few weeks ago. There will probably be no fix 
> unless Logitech decides to put enough man-power on the project to really find 
> out what happens and why Windows doesn't trigger the bug.
Disappointing, can firmware be uploaded to webcams?

> In the meantime, 
> you can consider your webcam broken when connected to your specific computer. 
> It might work fine with another USB controller or another computer (even 
> changing the CPU clock could influence the webcam behaviour).
> 
My webcam appears to be working fine, I have tested it by leaving it
running for extended periods. The only thing that 'seems' to trigger the
problem is if I stop and start it several times.

As I mentioned in an email my camera is not in a production environment
so if you send me the svn instruction I am happy to test things for you.

Thanks for the driver,
Brian

-------------- next part --------------
A non-text attachment was scrubbed...
Name: bnc.vcf
Type: text/x-vcard
Size: 116 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070110/76c16e60/attachment.vcf>

From linux at rubli.info  Wed Jan 10 02:31:49 2007
From: linux at rubli.info (Martin Rubli)
Date: Tue, 09 Jan 2007 17:31:49 -0800
Subject: [Linux-uvc-devel] Creating new /dev/video?
In-Reply-To: <20070107130324.GA24376@localhost.localdomain>
References: <20061230100509.GA14498@delight>
	<200612301523.57897.laurent.pinchart@skynet.be>
	<1168164225.4488.31.camel@delight>
	<20070107130324.GA24376@localhost.localdomain>
Message-ID: <op.tlwzvbmv42iof8@maya>

On Sun, 07 Jan 2007 05:03:24 -0800, Alex Pounds <alex at alexpounds.com>  
wrote:

> I also grabbed a SVN snapshot of aMSN, but I found it worked fine for me.
> Well, fine-ish: I can both send and receive webcam sessions, but it does
> crash occasionally. I spoke to an aMSN developer, and they tell me it's a
> driver issue. I've seen no "trigger" for the crash, as in it doesn't
> happen consistently when I do something. Sometimes I see the ioctl
> messages before the crash, sometimes not. In the log below we can see two
> crashes - the second crash occurs at the second "Unsupported marker type"
> line.
>
> ioctl:  
> VIDIOC_S_FMT(type=VIDEO_CAPTURE;fmt.pix.width=320;fmt.pix.height=240;fmt.pix.pixelformat=0x56595559  
> [YUYV];fmt.pix.field=A  
> NY;fmt.pix.bytesperline=0;fmt.pix.sizeimage=0;fmt.pix.colorspace=unknown;fmt.pix.priv=0):  
> Input/output error
> ioctl:  
> VIDIOC_S_FMT(type=VIDEO_CAPTURE;fmt.pix.width=320;fmt.pix.height=240;fmt.pix.pixelformat=0x47504a4d  
> [MJPG];fmt.pix.field=A  
> NY;fmt.pix.bytesperline=0;fmt.pix.sizeimage=0;fmt.pix.colorspace=unknown;fmt.pix.priv=0):  
> Input/output error
> ioctl:  
> VIDIOC_QUERYCTRL(id=9963776;type=unknown;name="";minimum=0;maximum=0;step=0;default_value=0;flags=0):  
> Input/output error
> Unsupported marker type 0x1b
> Oops: malloc_video_bufs is 1 (expected 0)
> [utils/linux/capture/libng/grab-ng.c:malloc_bufs_check:231]
> Oops: processes is 1 (expected 0)
> [utils/linux/capture/libng/convert.c:process_check:179]
> attempt to provide package tls 1.5 failed: package tls 1.50 provided  
> instead
> Unsupported marker type 0x1b
> Oops: malloc_video_bufs is 1 (expected 0)
> [utils/linux/capture/libng/grab-ng.c:malloc_bufs_check:231]
> Oops: processes is 1 (expected 0)
> [utils/linux/capture/libng/convert.c:process_check:179]
> attempt to provide package tls 1.5 failed: package tls 1.50 provided
> instead

I doubt that we're looking at a driver issue here, but before I go out on  
a limb here, I'd like to be sure about two things:

1. The camera is streaming in MJPEG format when the error occurs, right?  
(The S_FMT to MJPG seems to fail, so that confuses me a little bit ...)
2. If so, what JPEG decoder does aMSN use?

Cheers,
Martin


From linux at rubli.info  Wed Jan 10 02:22:10 2007
From: linux at rubli.info (Martin Rubli)
Date: Tue, 09 Jan 2007 17:22:10 -0800
Subject: [Linux-uvc-devel] Creating new /dev/video?
In-Reply-To: <1168164225.4488.31.camel@delight>
References: <20061230100509.GA14498@delight>
	<200612301523.57897.laurent.pinchart@skynet.be>
	<1168164225.4488.31.camel@delight>
Message-ID: <op.tlwze81r42iof8@maya>

On Sun, 07 Jan 2007 02:03:45 -0800, Martin  
<mailinglisten at habmalnefrage.de> wrote:

> Now to my real new problem: Is there some easy to understand sample
> implementation of decoding some MJPEG-Frame to one of following:
>
> PIXELFORMAT_GREY
> PIXELFORMAT_RGB332
> PIXELFORMAT_RGB555
> PIXELFORMAT_RGB555X
> PIXELFORMAT_RGB565
> PIXELFORMAT_RGB565X
> PIXELFORMAT_RGB24
> PIXELFORMAT_BGR24
> PIXELFORMAT_RGB32
> PIXELFORMAT_BGR32
> PIXELFORMAT_YUYV
> PIXELFORMAT_UYVY
> PIXELFORMAT_YUV420P
> PIXELFORMAT_YUV422P
>
> I'd prefer implementations not using additional libraries or use Qt for
> decoding.

 From my experience that's a rather bad idea. A while ago I had to  
debug/fix at least two different MJPEG decoders because they didn't like  
the pictures that one particular camera provided. JPEG decoding can be  
simple but if you want a complete version it's far from trivial. A quick  
look at libjpeg should give you an idea.

That being said, if you only need it for a quick hack, you could have a  
look at luvcview or Ekiga. They both have their own JPEG decoders built-in.

Cheers,
Martin


From linux at rubli.info  Wed Jan 10 03:00:07 2007
From: linux at rubli.info (Martin Rubli)
Date: Tue, 09 Jan 2007 18:00:07 -0800
Subject: [Linux-uvc-devel] Automatic Gain Control
In-Reply-To: <200701082108.38282.laurent.pinchart@skynet.be>
References: <a4fd5c620701080918l7ee8bc70w1673299b1e71fcb5@mail.gmail.com>
	<200701082108.38282.laurent.pinchart@skynet.be>
Message-ID: <op.tlw06hjn42iof8@maya>

Hi all,

On Mon, 08 Jan 2007 12:08:38 -0800, Laurent Pinchart  
<laurent.pinchart at skynet.be> wrote:

>> The thing is that I am trying to disable the camera auto gain.

> Martin, by the way, is it necessary to put the webcam in bayer mode to  
> disable the auto-exposure ? Or would the auto-exposure mode control do  
> the job
> alone ?

I think what you're doing by enabling raw Bayer mode shoots way over the  
top of what you want. Have you checked out this one here?
https://lists.berlios.de/pipermail/linux-uvc-devel/2006-December/001099.html

This disables auto gain/exposure mode and should be what you're looking  
for.

> That's right. The Quickcam Ultra Vision might have slightly different
> controls. I have no such model here, so I can't test the patch. Maybe  
> Martin could have a look.

This control is the same for the Ultra Vision as for the other controls.  
IIRC we're talking about a standard UVC control here anyway.

Cheers,
Martin


From linux at rubli.info  Wed Jan 10 03:03:38 2007
From: linux at rubli.info (Martin Rubli)
Date: Tue, 09 Jan 2007 18:03:38 -0800
Subject: [Linux-uvc-devel] Automatic Gain Control
In-Reply-To: <a4fd5c620701090653i2566c5f9n1942bc943b099e41@mail.gmail.com>
References: <a4fd5c620701080918l7ee8bc70w1673299b1e71fcb5@mail.gmail.com>
	<200701082108.38282.laurent.pinchart@skynet.be>
	<a4fd5c620701090653i2566c5f9n1942bc943b099e41@mail.gmail.com>
Message-ID: <op.tlw1cclw42iof8@maya>

Jose,

On Tue, 09 Jan 2007 06:53:29 -0800, Jose Luis Landabaso  
<landabaso at gmail.com> wrote:

> I have arrived to a point in which I'm very confused.
> I have learnt that you can only turn off the color processing when the
> camera is not capturing.

True.

> So, I stop the capture program, and then run bayer.
> If I disable color processing I cannot run my capture program again  
> since.
> I always get:
>
> select timeout
> VIDIOC_DQBUF error 11, Resource temporarily unavailable
>
> When I turn again the video processing on then the program works fine  
> again.
>
> Any ideas?

I'm assuming you're not using any of the native resolutions for which raw  
mode works. Quoting from the FAQ entry:

"For 1.3 MP cameras raw mode may only work in the camera's "native"  
resolutions, which are 960x720 or 1280x960. If color processing is  
disabled and streaming is started in a not supported resolution, the  
camera sends no data and the application may appear to hang."

This would certainly explain the timeout. What camera are you using and at  
which resolution?

Cheers,
Martin


From linux at rubli.info  Wed Jan 10 03:33:13 2007
From: linux at rubli.info (Martin Rubli)
Date: Tue, 09 Jan 2007 18:33:13 -0800
Subject: [Linux-uvc-devel] Automatic Gain Control
In-Reply-To: <200701082130.05631.mxhaard@magic.fr>
References: <a4fd5c620701080918l7ee8bc70w1673299b1e71fcb5@mail.gmail.com>
	<200701082108.38282.laurent.pinchart@skynet.be>
	<200701082130.05631.mxhaard@magic.fr>
Message-ID: <op.tlw2pnzq42iof8@maya>

Michel,

On Mon, 08 Jan 2007 12:30:05 -0800, Michel Xhaard <mxhaard at magic.fr> wrote:

> I just upload a new revision of luvcview with pan/tilt fix, a lot of
> improvements.

Cool! :-)

> Seem strange that we cannot change the exposure in manuel
> mode ?

There should be a control to set the absolute exposure time ...

> Is there a way to set/reset the autowhite balance too ? a lot of
> robotic project need these features

... and one for white balance temperature. I'll double check tomorrow on  
my Linux machine but those are standard UVC controls that our cameras  
support.

Cheers,
Martin


From linux at rubli.info  Wed Jan 10 03:38:41 2007
From: linux at rubli.info (Martin Rubli)
Date: Tue, 09 Jan 2007 18:38:41 -0800
Subject: [Linux-uvc-devel] QuickCam Fusion lockup
In-Reply-To: <45A4295D.90806@astronomicalresearchaustralia.org>
References: <45A32C4F.7080004@astronomicalresearchaustralia.org>
	<200701092119.25145.laurent.pinchart@skynet.be>
	<45A4295D.90806@astronomicalresearchaustralia.org>
Message-ID: <op.tlw2yrm242iof8@maya>

Brian,

On Tue, 09 Jan 2007 15:46:37 -0800, Brian  
<bnc at astronomicalresearchaustralia.org> wrote:

> Disappointing, can firmware be uploaded to webcams?

No, sorry, the only way to update the firmware is a soldering iron. :-|

> My webcam appears to be working fine, I have tested it by leaving it
> running for extended periods. The only thing that 'seems' to trigger the
> problem is if I stop and start it several times.

The problem never occurs during simple streaming, it is triggered only by  
control requests.

Cheers,
Martin


From linux at rubli.info  Wed Jan 10 03:41:54 2007
From: linux at rubli.info (Martin Rubli)
Date: Tue, 09 Jan 2007 18:41:54 -0800
Subject: [Linux-uvc-devel] QuickCam Fusion lockup
In-Reply-To: <45A40727.4020607@cetoncorp.com>
References: <45A32C4F.7080004@astronomicalresearchaustralia.org>
	<200701092119.25145.laurent.pinchart@skynet.be>
	<45A40727.4020607@cetoncorp.com>
Message-ID: <op.tlw234te42iof8@maya>

> Given that a good chunk of cameras people are using are sometimes not
> functional,
> i think it would be good to put something on the website about this. I
> own two
> webcams that exhibit these problems regularly, and have been messing
> with various
> versions of the "reset" patch, trying to get better behavior.
>
> (Discussed here:
> http://www.mail-archive.com/linux-uvc-devel at lists.berlios.de/msg00322.html  
> )
>
> What is the opinion on putting some version of this hack in trunk? (even
> if temporarily)

Evgeny mentioned about a month ago that he was about to publish a new  
patch that should improve the behavior on most machines. I don't know the  
state of that. Any updates, Evgeny? :-) Basically, we were waiting for  
that, but the plan is indeed to either integrate such a hack into the  
trunk or, at least, put it up for download.

Cheers,
Martin


From alex at alexpounds.com  Wed Jan 10 03:43:01 2007
From: alex at alexpounds.com (Alex Pounds)
Date: Wed, 10 Jan 2007 02:43:01 +0000
Subject: [Linux-uvc-devel] Creating new /dev/video?
In-Reply-To: <op.tlwzvbmv42iof8@maya>
References: <20061230100509.GA14498@delight>
	<200612301523.57897.laurent.pinchart@skynet.be>
	<1168164225.4488.31.camel@delight>
	<20070107130324.GA24376@localhost.localdomain>
	<op.tlwzvbmv42iof8@maya>
Message-ID: <20070110024301.GA25326@localhost.localdomain>

On Tue, Jan 09, 2007 at 05:31:49PM -0800, Martin Rubli wrote:
> Alex Pounds wrote: 
> >I also grabbed a SVN snapshot of aMSN, but I found it worked fine for me.
> >Well, fine-ish: I can both send and receive webcam sessions, but it does
> >crash occasionally. I spoke to an aMSN developer, and they tell me it's a
> >driver issue.
> 
> I doubt that we're looking at a driver issue here, but before I go out on  
> a limb here, I'd like to be sure about two things:
> 
> 1. The camera is streaming in MJPEG format when the error occurs, right?  
> (The S_FMT to MJPG seems to fail, so that confuses me a little bit ...)

I'm afraid I'm a little out of my depth here; I don't think there's
anything in aMSN to tell me that it's working in MJPEG. All I know is that
before (ie. with the Debian testing version of aMSN - "0.95+dfsg2-0.1") I
got an "error getting capabilities" from aMSN when I tried to open the
webcam. Someone else reported on the list that aMSN has added MJPEG
support into it, so I got a SVN snapshot the other night and built it. I
can't tell you what version I got, I'm afraid - The aMSN in my source dir
suggests it is 0.96RC1, whereas the aMSN about box suggests its version
0.97b, but even that is a bit old. So it's a snapshot from about a week
ago, and I apologise for not being more specific. 

Anyway, this version does work with my webcam, but crashes intermittently.
This is output from one aMSN session, from startup to it segfaulting: 


attempt to provide package tls 1.5 failed: package tls 1.50 provided instead
bplay: /dev/dsp: Device or resource busy
[snip 8 lines of this]
bplay: /dev/dsp: Device or resource busy
Unsupported marker type 0x1b
Oops: malloc_video_bufs is 1 (expected 0) [utils/linux/capture/libng/grab-ng.c:malloc_bufs_check:231]
Oops: processes is 1 (expected 0) [utils/linux/capture/libng/convert.c:process_check:179]
attempt to provide package tls 1.5 failed: package tls 1.50 provided instead
ioctl: VIDIOC_QUERYCTRL(id=134217739;type=unknown;name="";minimum=0;maximum=0;step=0;default_value=0;flags=0): Input/output error

The "device or resource busy" is aMSN saying "I wanted to play a sound but
you're listening to music, so I can't." If this isn't the same error as
you were considering before, I suspect they are both present but this is
the one that causes the crash. 


> 2. If so, what JPEG decoder does aMSN use?

I'm afraid tcl is not a language I've touched before (aMSN is a tcl
program) but as far as I can tell it's using the libng code by Gerd Knorr.


If there's more I can do to help, do let me know. 

-- 
Alex Pounds (Creature)                  .~.         http://www.alexpounds.com/
                                        /V\        http://www.ethicsgirls.com/
                                       // \\
"Variables won't; Constants aren't"   /(   )\
                                       ^`~'^


From mxhaard at magic.fr  Wed Jan 10 10:49:31 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Wed, 10 Jan 2007 10:49:31 +0100
Subject: [Linux-uvc-devel] Automatic Gain Control
In-Reply-To: <op.tlw2pnzq42iof8@maya>
References: <a4fd5c620701080918l7ee8bc70w1673299b1e71fcb5@mail.gmail.com>
	<200701082130.05631.mxhaard@magic.fr> <op.tlw2pnzq42iof8@maya>
Message-ID: <200701101049.31698.mxhaard@magic.fr>

Le Mercredi 10 Janvier 2007 03:33, Martin Rubli a ?crit?:
Martin,
> Michel,
>
> On Mon, 08 Jan 2007 12:30:05 -0800, Michel Xhaard <mxhaard at magic.fr> wrote:
> > I just upload a new revision of luvcview with pan/tilt fix, a lot of
> > improvements.
>
> Cool! :-)
>
> > Seem strange that we cannot change the exposure in manuel
> > mode ?
>
> There should be a control to set the absolute exposure time ...
>
> > Is there a way to set/reset the autowhite balance too ? a lot of
> > robotic project need these features
>
> ... and one for white balance temperature. I'll double check tomorrow on
> my Linux machine but those are standard UVC controls that our cameras
> support.
I have try to used it (look at the last luvcview release) but that did not 
work on my orbit. luvcview use the same code for all control, each control 
can be up or down from the v4l2 step parameter luvcview test if we are 
between min and max and then apply the needed change. For some strange reason 
exposure and white balance always return a value outside the range ? maybe i 
am wrong here, but i don't see the reason :( Help are welcome !!
>
> Cheers,
> Martin
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
Cheers,
-- 
Michel Xhaard
http://mxhaard.free.fr


From ebi9 at ozob.net  Wed Jan 10 19:55:23 2007
From: ebi9 at ozob.net (Gene Imes)
Date: Wed, 10 Jan 2007 12:55:23 -0600
Subject: [Linux-uvc-devel] Automatic Gain Control
In-Reply-To: <200701091809.13398.mxhaard@magic.fr>
References: <a4fd5c620701080918l7ee8bc70w1673299b1e71fcb5@mail.gmail.com>
	<200701082130.05631.mxhaard@magic.fr> <45A39BEF.9070608@ozob.net>
	<200701091809.13398.mxhaard@magic.fr>
Message-ID: <45A5369B.4090706@ozob.net>

Michel Xhaard wrote:
> Le Mardi 9 Janvier 2007 14:43, Gene Imes a ?crit :
>>> I just upload a new revision of luvcview with pan/tilt fix, a lot of
>>> improvements. Seem strange that we cannot change the exposure in manuel
>>> mode ? Is there a way to set/reset the autowhite balance too ? a lot of
>>> robotic project need these features
>>> Cheers
>> Michel, If I click the 'Take a Picture!' button or the 'AVI Start/Stop'
>> buttons nothing seems to happen. Is there a trick to it? If so what?
>>
>> Or perhaps luvcview is writing to some directory I can not find.
>>
>>
>> Thanks,
> Maybe because Picture and Avi only works with the MJPEG palette. Did you need 
> Picture and AVI for all palettes ?
> regards


I do not have a clue about MJPEG palette. I have to start luvcview like 
this for it to work.

luvcview -f yuv -s 640x480

would that have any effect?

By the way I am using a Bodelin ProScopeHR, which a cool hand held video 
micorscope.

Thanks,

-- 
Gene Imes ============================= ozob.net


From mxhaard at magic.fr  Wed Jan 10 20:24:47 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Wed, 10 Jan 2007 20:24:47 +0100
Subject: [Linux-uvc-devel] Automatic Gain Control
In-Reply-To: <45A5369B.4090706@ozob.net>
References: <a4fd5c620701080918l7ee8bc70w1673299b1e71fcb5@mail.gmail.com>
	<200701091809.13398.mxhaard@magic.fr> <45A5369B.4090706@ozob.net>
Message-ID: <200701102024.47501.mxhaard@magic.fr>

Le Mercredi 10 Janvier 2007 19:55, Gene Imes a ?crit?:
> Michel Xhaard wrote:
> > Le Mardi 9 Janvier 2007 14:43, Gene Imes a ?crit :
> >>> I just upload a new revision of luvcview with pan/tilt fix, a lot of
> >>> improvements. Seem strange that we cannot change the exposure in manuel
> >>> mode ? Is there a way to set/reset the autowhite balance too ? a lot of
> >>> robotic project need these features
> >>> Cheers
> >>
> >> Michel, If I click the 'Take a Picture!' button or the 'AVI Start/Stop'
> >> buttons nothing seems to happen. Is there a trick to it? If so what?
> >>
> >> Or perhaps luvcview is writing to some directory I can not find.
> >>
> >>
> >> Thanks,
> >
> > Maybe because Picture and Avi only works with the MJPEG palette. Did you
> > need Picture and AVI for all palettes ?
> > regards
>
> I do not have a clue about MJPEG palette. I have to start luvcview like
> this for it to work.
>
> luvcview -f yuv -s 640x480
Did you try
luvcview -f jpg -s 640x480
?
>
> would that have any effect?
yes yuv did not allow avi and picture ATM
>
> By the way I am using a Bodelin ProScopeHR, which a cool hand held video
> micorscope.
for a Microscope i suspect you need rgb24 picture from the yuv palette right ?
>
> Thanks,
regards
-- 
Michel Xhaard
http://mxhaard.free.fr


From mxhaard at magic.fr  Wed Jan 10 20:36:26 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Wed, 10 Jan 2007 20:36:26 +0100
Subject: [Linux-uvc-devel] Automatic Gain Control
In-Reply-To: <200701102024.47501.mxhaard@magic.fr>
References: <a4fd5c620701080918l7ee8bc70w1673299b1e71fcb5@mail.gmail.com>
	<45A5369B.4090706@ozob.net> <200701102024.47501.mxhaard@magic.fr>
Message-ID: <200701102036.26685.mxhaard@magic.fr>

Le Mercredi 10 Janvier 2007 20:24, Michel Xhaard a ?crit?:
> Le Mercredi 10 Janvier 2007 19:55, Gene Imes a ?crit?:
> > Michel Xhaard wrote:
> > > Le Mardi 9 Janvier 2007 14:43, Gene Imes a ?crit :
> > >>> I just upload a new revision of luvcview with pan/tilt fix, a lot of
> > >>> improvements. Seem strange that we cannot change the exposure in
> > >>> manuel mode ? Is there a way to set/reset the autowhite balance too ?
> > >>> a lot of robotic project need these features
> > >>> Cheers
> > >>
> > >> Michel, If I click the 'Take a Picture!' button or the 'AVI
> > >> Start/Stop' buttons nothing seems to happen. Is there a trick to it?
> > >> If so what?
> > >>
> > >> Or perhaps luvcview is writing to some directory I can not find.
> > >>
> > >>
> > >> Thanks,
> > >
> > > Maybe because Picture and Avi only works with the MJPEG palette. Did
> > > you need Picture and AVI for all palettes ?
> > > regards
> >
> > I do not have a clue about MJPEG palette. I have to start luvcview like
> > this for it to work.
> >
> > luvcview -f yuv -s 640x480
>
> Did you try
> luvcview -f jpg -s 640x480
> ?
>
> > would that have any effect?
>
> yes yuv did not allow avi and picture ATM
>
> > By the way I am using a Bodelin ProScopeHR, which a cool hand held video
> > micorscope.
>
> for a Microscope i suspect you need rgb24 picture from the yuv palette
> right ?
>
> > Thanks,
>
> regards
Just read the small spec from the ProScopeHR have you try
luvcview -L to get all resolution available?
seem 1280x1024 can be possible at 3.5 fp/s with a usb2.0 socket. Let me know 
if you are interested by picture, avi and maybe more :)
regards
-- 
Michel Xhaard
http://mxhaard.free.fr


From adrian.skehill at gmail.com  Wed Jan 10 21:49:16 2007
From: adrian.skehill at gmail.com (Adrian Skehill)
Date: Wed, 10 Jan 2007 20:49:16 +0000
Subject: [Linux-uvc-devel] No valid video chain found.
In-Reply-To: <200701092135.32422.laurent.pinchart@skynet.be>
References: <56527a580701080603h83534canbe6c9603678f59dc@mail.gmail.com>
	<200701082103.49423.laurent.pinchart@skynet.be>
	<56527a580701090805j2c9faa1p817dec4c44acfc73@mail.gmail.com>
	<200701092135.32422.laurent.pinchart@skynet.be>
Message-ID: <56527a580701101249q32db1cb2rf5c4c0b27fcb1acf@mail.gmail.com>

Hi Laurent,

I popped in the patch supplied and we certainly got a bit further along this
time.  I got a /dev/video0 but was unable to use the device. I fired up
ekiga to point at it and got the following error message:

Error while opening video device Live! Cam Optia

A moving logo will be transmitted during calls. Notice that you can always
transmit a given image or the moving logo by choosing "Picture" as video
plugin and "MovingLogo" or "StaticPicture" as device.

Your driver doesn't seem to support any of the color formats supported by
Ekiga.
 Please check your kernel driver documentation in order to determine which
Palette is supported.

And the logs from the syslog are attached.


Thanks for all your help. Any luck with creative giving some help?

Cheers,
Adrian.



On 1/9/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> Hi Adrian,
>
> > Thanks a million for this. I'm looking forward to testing the patch for
> > you!
>
> Could you test the following patch ? Please use the latest driver revision
> from SVN (75).
>
> Cheers,
>
> Laurent Pinchart
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070110/f9b7405f/attachment.html>
-------------- next part --------------
Jan 10 20:41:45 localhost kernel: [17179871.704000] usb 5-5: new high speed USB device using ehci_hcd and address 5
Jan 10 20:41:45 localhost kernel: [17179872.128000] usb 5-5: configuration #1 chosen from 1 choice
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: Probing generic UVC device 5
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: Found format MJPEG.
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: - 640x480 (30.0 fps)
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: - 320x240 (30.0 fps)
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: - 160x120 (30.0 fps)
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: - 352x288 (30.0 fps)
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: - 176x144 (30.0 fps)
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: Found format Uncompressed.
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: - 640x480 (30.0 fps)
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: - 320x240 (30.0 fps)
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: - 160x120 (30.0 fps)
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: - 352x288 (30.0 fps)
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: - 176x144 (30.0 fps)
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: Found a Status endpoint (addr 82).
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: Found UVC 1.00 device Live! Cam Optia (041e:4057)
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/2 to device 5 entity 5
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/3 to device 5 entity 5
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/6 to device 5 entity 5
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/7 to device 5 entity 5
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/8 to device 5 entity 5
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/9 to device 5 entity 5
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/5 to device 5 entity 5
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: Added control 00000000-0000-0000-0000-000000000001/2 to device 5 entity 1
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: Added control 00000000-0000-0000-0000-000000000001/4 to device 5 entity 1
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: Scanning UVC chain: OT 3 <- Unit 6 <- Unit 5 <- Unit 4 <- IT 1
Jan 10 20:41:45 localhost kernel: [17179872.128000] uvcvideo: Found a valid video chain (1 -> 3).
Jan 10 20:41:45 localhost NetworkManager: <debug info>^I[1168461705.827444] nm_hal_device_added (): New device added (hal udi is '/org/freedesktop/Hal/devices/usb_device_41e_4057_noserial'). 
Jan 10 20:41:46 localhost kernel: [17179872.400000] uvcvideo: UVC device initialized.
Jan 10 20:41:46 localhost NetworkManager: <debug info>^I[1168461706.178796] nm_hal_device_added (): New device added (hal udi is '/org/freedesktop/Hal/devices/usb_device_41e_4057_noserial_if0'). 
Jan 10 20:41:46 localhost NetworkManager: <debug info>^I[1168461706.208812] nm_hal_device_added (): New device added (hal udi is '/org/freedesktop/Hal/devices/usb_device_41e_4057_noserial_if1'). 
Jan 10 20:41:46 localhost NetworkManager: <debug info>^I[1168461706.250532] nm_hal_device_added (): New device added (hal udi is '/org/freedesktop/Hal/devices/usb_device_41e_4057_noserial_video4linux'). 
Jan 10 20:41:46 localhost NetworkManager: <debug info>^I[1168461706.273564] nm_hal_device_added (): New device added (hal udi is '/org/freedesktop/Hal/devices/usb_device_41e_4057_noserial_usbraw'). 
Jan 10 20:42:02 localhost ypbind[4677]: broadcast: RPC: Timed out.
Jan 10 20:42:17 localhost kernel: [17179903.384000] uvcvideo: Trying format 0x47504a4d (MJPG): 10000x10000.
Jan 10 20:42:17 localhost kernel: [17179903.384000] uvcvideo: Using default frame interval 33333.3 us (30.0 fps).
Jan 10 20:42:17 localhost kernel: [17179903.452000] uvcvideo: Failed to query (130) UVC control 1 (unit 0) : 2 (exp. 26).
Jan 10 20:42:22 localhost kernel: [17179908.356000] uvcvideo: Trying format 0x32315559 (YU12): 160x120.
Jan 10 20:42:22 localhost kernel: [17179908.356000] uvcvideo: Unsupported format 0x32315559.
Jan 10 20:42:22 localhost kernel: [17179908.360000] uvcvideo: Trying format 0x34424752 (RGB4): 160x120.
Jan 10 20:42:22 localhost kernel: [17179908.360000] uvcvideo: Unsupported format 0x34424752.
Jan 10 20:42:22 localhost kernel: [17179908.360000] uvcvideo: Trying format 0x34524742 (BGR4): 160x120.
Jan 10 20:42:22 localhost kernel: [17179908.360000] uvcvideo: Unsupported format 0x34524742.
Jan 10 20:42:22 localhost kernel: [17179908.360000] uvcvideo: Trying format 0x33424752 (RGB3): 160x120.
Jan 10 20:42:22 localhost kernel: [17179908.360000] uvcvideo: Unsupported format 0x33424752.
Jan 10 20:42:22 localhost kernel: [17179908.360000] uvcvideo: Trying format 0x33524742 (BGR3): 160x120.
Jan 10 20:42:22 localhost kernel: [17179908.360000] uvcvideo: Unsupported format 0x33524742.
Jan 10 20:42:22 localhost kernel: [17179908.360000] uvcvideo: Trying format 0x47504a4d (MJPG): 160x120.
Jan 10 20:42:22 localhost kernel: [17179908.360000] uvcvideo: Using default frame interval 33333.3 us (30.0 fps).
Jan 10 20:42:22 localhost kernel: [17179908.428000] uvcvideo: Failed to query (130) UVC control 1 (unit 0) : 2 (exp. 26).
Jan 10 20:42:22 localhost kernel: [17179908.428000] uvcvideo: Trying format 0x4745504a (JPEG): 160x120.
Jan 10 20:42:22 localhost kernel: [17179908.428000] uvcvideo: Unsupported format 0x4745504a.
Jan 10 20:42:22 localhost kernel: [17179908.428000] uvcvideo: Trying format 0x56595559 (YUYV): 160x120.
Jan 10 20:42:22 localhost kernel: [17179908.428000] uvcvideo: Using default frame interval 33333.3 us (30.0 fps).
Jan 10 20:42:22 localhost kernel: [17179908.496000] uvcvideo: Failed to query (130) UVC control 1 (unit 0) : 2 (exp. 26).
Jan 10 20:42:22 localhost kernel: [17179908.496000] uvcvideo: Trying format 0x56595559 (YUYV): 160x120.
Jan 10 20:42:22 localhost kernel: [17179908.496000] uvcvideo: Using default frame interval 33333.3 us (30.0 fps).
Jan 10 20:42:22 localhost kernel: [17179908.564000] uvcvideo: Failed to query (130) UVC control 1 (unit 0) : 2 (exp. 26).
Jan 10 20:42:22 localhost kernel: [17179908.564000] uvcvideo: Trying format 0x50323234 (422P): 160x120.
Jan 10 20:42:22 localhost kernel: [17179908.564000] uvcvideo: Unsupported format 0x50323234.
Jan 10 20:42:22 localhost kernel: [17179908.564000] uvcvideo: Trying format 0x50313459 (Y41P): 160x120.
Jan 10 20:42:22 localhost kernel: [17179908.564000] uvcvideo: Unsupported format 0x50313459.
Jan 10 20:42:22 localhost kernel: [17179908.564000] uvcvideo: Trying format 0x50313134 (411P): 160x120.
Jan 10 20:42:22 localhost kernel: [17179908.564000] uvcvideo: Unsupported format 0x50313134.
Jan 10 20:42:22 localhost kernel: [17179908.564000] uvcvideo: Trying format 0x50424752 (RGBP): 160x120.
Jan 10 20:42:22 localhost kernel: [17179908.564000] uvcvideo: Unsupported format 0x50424752.
Jan 10 20:42:22 localhost kernel: [17179908.564000] uvcvideo: Trying format 0x4f424752 (RGBO): 160x120.
Jan 10 20:42:22 localhost kernel: [17179908.564000] uvcvideo: Unsupported format 0x4f424752.
Jan 10 20:42:22 localhost kernel: [17179908.564000] uvcvideo: Trying format 0x3132564e (NV21): 160x120.
Jan 10 20:42:22 localhost kernel: [17179908.564000] uvcvideo: Unsupported format 0x3132564e.
Jan 10 20:42:22 localhost kernel: [17179908.564000] uvcvideo: Trying format 0x32315559 (YU12): 160x120.
Jan 10 20:42:22 localhost kernel: [17179908.564000] uvcvideo: Unsupported format 0x32315559.
Jan 10 20:42:22 localhost kernel: [17179908.564000] uvcvideo: Trying format 0x59455247 (GREY): 160x120.
Jan 10 20:42:22 localhost kernel: [17179908.564000] uvcvideo: Unsupported format 0x59455247.
Jan 10 20:42:22 localhost kernel: [17179908.568000] uvcvideo: Trying format 0x59565955 (UYVY): 160x120.
Jan 10 20:42:22 localhost kernel: [17179908.568000] uvcvideo: Unsupported format 0x59565955.
Jan 10 20:42:22 localhost kernel: [17179908.568000] uvcvideo: Trying format 0x31384142 (BA81): 160x120.
Jan 10 20:42:22 localhost kernel: [17179908.568000] uvcvideo: Unsupported format 0x31384142.

From laurent.pinchart at skynet.be  Wed Jan 10 22:56:07 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 10 Jan 2007 22:56:07 +0100
Subject: [Linux-uvc-devel] No valid video chain found.
In-Reply-To: <56527a580701101249q32db1cb2rf5c4c0b27fcb1acf@mail.gmail.com>
References: <56527a580701080603h83534canbe6c9603678f59dc@mail.gmail.com>
	<200701092135.32422.laurent.pinchart@skynet.be>
	<56527a580701101249q32db1cb2rf5c4c0b27fcb1acf@mail.gmail.com>
Message-ID: <200701102256.08087.laurent.pinchart@skynet.be>

Hi Adrian,

> I popped in the patch supplied and we certainly got a bit further along
> this time.

Good. It wouldn't be fun if we had solved the problem in one go :-)

> I got a /dev/video0 but was unable to use the device. I fired 
> up ekiga to point at it and got the following error message:
>
> Error while opening video device Live! Cam Optia
>
> A moving logo will be transmitted during calls. Notice that you can always
> transmit a given image or the moving logo by choosing "Picture" as video
> plugin and "MovingLogo" or "StaticPicture" as device.
>
> Your driver doesn't seem to support any of the color formats supported by
> Ekiga.
>  Please check your kernel driver documentation in order to determine which
> Palette is supported.
>
> And the logs from the syslog are attached.

The interesting part is this:

uvcvideo: Failed to query (130) UVC control 1 (unit 0) : 2 (exp. 26)

It seems the webcam doesn't properly implement the GET_MIN and GET_MAX 
requests on VS_PROBE_CONTROL. Instead of returning 26 bytes, it just returns 
2 bytes.

I'll try to write a simple workaround. Having an Optia webcam would help. I 
wonder what those 2 bytes contain.

> Thanks for all your help. Any luck with creative giving some help?

They still haven't answered. I'll try to phone them tomorrow.

Cheers,

Laurent Pinchart


From linux at rubli.info  Thu Jan 11 04:21:58 2007
From: linux at rubli.info (Martin Rubli)
Date: Wed, 10 Jan 2007 19:21:58 -0800
Subject: [Linux-uvc-devel] Automatic Gain Control
In-Reply-To: <200701101049.31698.mxhaard@magic.fr>
References: <a4fd5c620701080918l7ee8bc70w1673299b1e71fcb5@mail.gmail.com>
	<200701082130.05631.mxhaard@magic.fr> <op.tlw2pnzq42iof8@maya>
	<200701101049.31698.mxhaard@magic.fr>
Message-ID: <op.tlyzhqf242iof8@nb-mrublixp.am.logitech.com>

Michel,

On Wed, 10 Jan 2007 01:49:31 -0800, Michel Xhaard <mxhaard at magic.fr> wrote:

>> > Seem strange that we cannot change the exposure in manuel
>> > mode ?
>>
>> There should be a control to set the absolute exposure time ...
>>
>> > Is there a way to set/reset the autowhite balance too ? a lot of
>> > robotic project need these features
>>
>> ... and one for white balance temperature. I'll double check tomorrow on
>> my Linux machine but those are standard UVC controls that our cameras
>> support.
> I have try to used it (look at the last luvcview release) but that did  
> not work on my orbit. luvcview use the same code for all control, each  
> control can be up or down from the v4l2 step parameter luvcview test if  
> we are
> between min and max and then apply the needed change. For some strange  
> reason exposure and white balance always return a value outside the  
> range ? maybe i am wrong here, but i don't see the reason :( Help are  
> welcome !!

I've just tested it and both controls work for me. Here's what they look  
like on my Fusion (2006 model):

Listing available controls for device video0:
   White Balance Temperature
     ID      : 8,
     Type    : Dword,
     Flags   : { CAN_READ, CAN_WRITE, IS_CUSTOM },
     Values  : [ 0 .. 10000, step size: 10 ],
     Default : 4000
   White Balance Temperature, Auto
     ID      : 9,
     Type    : Boolean,
     Flags   : { CAN_READ, CAN_WRITE, IS_CUSTOM },
     Values  : [ 0 .. 9984, step size: 0 ],
     Default : 1
   Exposure (Absolute)
     ID      : 17,
     Type    : Dword,
     Flags   : { CAN_READ, CAN_WRITE, IS_CUSTOM },
     Values  : [ 0 .. 9984, step size: 0 ],
     Default : 0
   Auto-exposure mode
     ID      : 15,
     Type    : Choice,
     Flags   : { CAN_READ, CAN_WRITE },
     Values  : { 'Manual'[1], 'Aperture priority'[8] },
     Default : 8
[...]

The zero step size for the absolute exposure time is obviously wrong. I  
don't currently have my USB analyzer to check what's going on there. Also,  
I get errors when I try to read these controls. This seems to be why the  
controls don't work in luvcview.

Apart from that everything seems okay. Both controls, white balance and  
exposure time, do what they should in my test application. I'll post an  
update as soon as I find out what's going on there.

Cheers,
Martin



From mxhaard at magic.fr  Thu Jan 11 09:07:46 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Thu, 11 Jan 2007 09:07:46 +0100
Subject: [Linux-uvc-devel] Automatic Gain Control
In-Reply-To: <op.tlyzhqf242iof8@nb-mrublixp.am.logitech.com>
References: <a4fd5c620701080918l7ee8bc70w1673299b1e71fcb5@mail.gmail.com>
	<200701101049.31698.mxhaard@magic.fr>
	<op.tlyzhqf242iof8@nb-mrublixp.am.logitech.com>
Message-ID: <200701110907.46797.mxhaard@magic.fr>

Le Jeudi 11 Janvier 2007 04:21, Martin Rubli a ?crit?:
> Michel,
>
> On Wed, 10 Jan 2007 01:49:31 -0800, Michel Xhaard <mxhaard at magic.fr> wrote:
> >> > Seem strange that we cannot change the exposure in manuel
> >> > mode ?
> >>
> >> There should be a control to set the absolute exposure time ...
> >>
> >> > Is there a way to set/reset the autowhite balance too ? a lot of
> >> > robotic project need these features
> >>
> >> ... and one for white balance temperature. I'll double check tomorrow on
> >> my Linux machine but those are standard UVC controls that our cameras
> >> support.
> >
> > I have try to used it (look at the last luvcview release) but that did
> > not work on my orbit. luvcview use the same code for all control, each
> > control can be up or down from the v4l2 step parameter luvcview test if
> > we are
> > between min and max and then apply the needed change. For some strange
> > reason exposure and white balance always return a value outside the
> > range ? maybe i am wrong here, but i don't see the reason :( Help are
> > welcome !!
>
> I've just tested it and both controls work for me. Here's what they look
> like on my Fusion (2006 model):
i have tested only with the orbit (a old one from 2005 :)) 
>
> Listing available controls for device video0:
>    White Balance Temperature
>      ID      : 8,
>      Type    : Dword,
>      Flags   : { CAN_READ, CAN_WRITE, IS_CUSTOM },
>      Values  : [ 0 .. 10000, step size: 10 ],
>      Default : 4000
>    White Balance Temperature, Auto
>      ID      : 9,
>      Type    : Boolean,
>      Flags   : { CAN_READ, CAN_WRITE, IS_CUSTOM },
>      Values  : [ 0 .. 9984, step size: 0 ],
>      Default : 1
>    Exposure (Absolute)
>      ID      : 17,
>      Type    : Dword,
>      Flags   : { CAN_READ, CAN_WRITE, IS_CUSTOM },
>      Values  : [ 0 .. 9984, step size: 0 ],
>      Default : 0
>    Auto-exposure mode
>      ID      : 15,
>      Type    : Choice,
>      Flags   : { CAN_READ, CAN_WRITE },
>      Values  : { 'Manual'[1], 'Aperture priority'[8] },
>      Default : 8
> [...]
>
> The zero step size for the absolute exposure time is obviously wrong. I
> don't currently have my USB analyzer to check what's going on there. Also,
> I get errors when I try to read these controls. This seems to be why the
> controls don't work in luvcview.
Yes luvcview used the step value.
>
> Apart from that everything seems okay. Both controls, white balance and
> exposure time, do what they should in my test application. I'll post an
> update as soon as I find out what's going on there.
Thanks, i will double check with another webcam.
>
> Cheers,
> Martin
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
Cheers,
-- 
Michel Xhaard
http://mxhaard.free.fr


From gregory.kokanosky at gmail.com  Thu Jan 11 16:40:51 2007
From: gregory.kokanosky at gmail.com (Gregory Kokanosky)
Date: Thu, 11 Jan 2007 16:40:51 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
Message-ID: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>

Hi all,

I'm trying to get my laptop built-in webcam working.

I think this is a Microdia/Sonix sn9c201, but I can't find a way to get it
working ...

Is this webcam supported by the uvc project ?

If this might help, find attached the result of lsusb -v on the webcam
device ....

Cheers,
Greg
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lsusbsonix
Type: application/octet-stream
Size: 14812 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070111/0b49fb05/attachment.obj>

From laurent.pinchart at skynet.be  Thu Jan 11 16:47:47 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 11 Jan 2007 16:47:47 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
Message-ID: <200701111647.47339.laurent.pinchart@skynet.be>

Hi Gregory,

> I'm trying to get my laptop built-in webcam working.
>
> I think this is a Microdia/Sonix sn9c201, but I can't find a way to get it
> working ...
>
> Is this webcam supported by the uvc project ?
>
> If this might help, find attached the result of lsusb -v on the webcam
> device ....

I'm afraid your device is not UVC-compatible. The sn9c20x chipsets use a 
vendor-specific protocol. The sn9c21x chipsets are UVC-compatible.

Cheers,

Laurent Pinchart


From gregory.kokanosky at gmail.com  Thu Jan 11 16:51:23 2007
From: gregory.kokanosky at gmail.com (Gregory Kokanosky)
Date: Thu, 11 Jan 2007 16:51:23 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <200701111647.47339.laurent.pinchart@skynet.be>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701111647.47339.laurent.pinchart@skynet.be>
Message-ID: <761cc8520701110751o22380094m4affeca7b0965331@mail.gmail.com>

2007/1/11, Laurent Pinchart <laurent.pinchart at skynet.be>:
> Hi Gregory,
>
> > I'm trying to get my laptop built-in webcam working.
> >
> > I think this is a Microdia/Sonix sn9c201, but I can't find a way to get it
> > working ...
> >
> > Is this webcam supported by the uvc project ?
> >
> > If this might help, find attached the result of lsusb -v on the webcam
> > device ....
>
> I'm afraid your device is not UVC-compatible. The sn9c20x chipsets use a
> vendor-specific protocol. The sn9c21x chipsets are UVC-compatible.
>

Ok thanks Laurent,

Are you aware of any linux driver for this chipset ?

Cheers,
Gr?g


From avilella at gmail.com  Thu Jan 11 17:04:33 2007
From: avilella at gmail.com (Albert Vilella)
Date: Thu, 11 Jan 2007 16:04:33 +0000
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <761cc8520701110751o22380094m4affeca7b0965331@mail.gmail.com>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701111647.47339.laurent.pinchart@skynet.be>
	<761cc8520701110751o22380094m4affeca7b0965331@mail.gmail.com>
Message-ID: <358f4d650701110804o1bb2e39dh2fdc0ce99b8cc10f@mail.gmail.com>

www.linux-projects.org hosts the drivers for a bunch of chip specific drivers :)

http://www.linux-projects.org/modules/mydownloads/

On 1/11/07, Gregory Kokanosky <gregory.kokanosky at gmail.com> wrote:
> 2007/1/11, Laurent Pinchart <laurent.pinchart at skynet.be>:
> > Hi Gregory,
> >
> > > I'm trying to get my laptop built-in webcam working.
> > >
> > > I think this is a Microdia/Sonix sn9c201, but I can't find a way to get it
> > > working ...
> > >
> > > Is this webcam supported by the uvc project ?
> > >
> > > If this might help, find attached the result of lsusb -v on the webcam
> > > device ....
> >
> > I'm afraid your device is not UVC-compatible. The sn9c20x chipsets use a
> > vendor-specific protocol. The sn9c21x chipsets are UVC-compatible.
> >
>
> Ok thanks Laurent,
>
> Are you aware of any linux driver for this chipset ?
>
> Cheers,
> Gr?g
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From laurent.pinchart at skynet.be  Thu Jan 11 19:54:47 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 11 Jan 2007 19:54:47 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <358f4d650701110804o1bb2e39dh2fdc0ce99b8cc10f@mail.gmail.com>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<761cc8520701110751o22380094m4affeca7b0965331@mail.gmail.com>
	<358f4d650701110804o1bb2e39dh2fdc0ce99b8cc10f@mail.gmail.com>
Message-ID: <200701111954.48283.laurent.pinchart@skynet.be>

> www.linux-projects.org hosts the drivers for a bunch of chip specific
> drivers :)
>
> http://www.linux-projects.org/modules/mydownloads/

As far as I know, there is currently no Linux driver for the sn9c20x chips. 
Michel Xhaard might be working on it, you could try to contact him.

Cheers,

Laurent Pinchart


From mxhaard at magic.fr  Thu Jan 11 19:59:37 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Thu, 11 Jan 2007 19:59:37 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <200701111954.48283.laurent.pinchart@skynet.be>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<358f4d650701110804o1bb2e39dh2fdc0ce99b8cc10f@mail.gmail.com>
	<200701111954.48283.laurent.pinchart@skynet.be>
Message-ID: <200701111959.38072.mxhaard@magic.fr>

Le Jeudi 11 Janvier 2007 19:54, Laurent Pinchart a ?crit?:
Hi Laurent,
> > www.linux-projects.org hosts the drivers for a bunch of chip specific
> > drivers :)
> >
> > http://www.linux-projects.org/modules/mydownloads/
>
> As far as I know, there is currently no Linux driver for the sn9c20x chips.
> Michel Xhaard might be working on it, you could try to contact him.
Yes it is, i just finish the zc0321 support and start the sn9c201/202 soon :)
>
> Cheers,
>
> Laurent Pinchart
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
Cheers
-- 
Michel Xhaard
http://mxhaard.free.fr


From gregory.kokanosky at gmail.com  Thu Jan 11 21:44:03 2007
From: gregory.kokanosky at gmail.com (Gregory Kokanosky)
Date: Thu, 11 Jan 2007 21:44:03 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <200701111959.38072.mxhaard@magic.fr>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<358f4d650701110804o1bb2e39dh2fdc0ce99b8cc10f@mail.gmail.com>
	<200701111954.48283.laurent.pinchart@skynet.be>
	<200701111959.38072.mxhaard@magic.fr>
Message-ID: <761cc8520701111244w522e04abycc730d102f35c401@mail.gmail.com>

2007/1/11, Michel Xhaard <mxhaard at magic.fr>:
> Le Jeudi 11 Janvier 2007 19:54, Laurent Pinchart a ?crit:
> > As far as I know, there is currently no Linux driver for the sn9c20x chips.
> > Michel Xhaard might be working on it, you could try to contact him.
> Yes it is, i just finish the zc0321 support and start the sn9c201/202 soon :)

If you need someone to test it, I'm your man !

> >
> Cheers


From laurent.pinchart at skynet.be  Thu Jan 11 22:18:44 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 11 Jan 2007 22:18:44 +0100
Subject: [Linux-uvc-devel] No valid video chain found.
In-Reply-To: <200701102256.08087.laurent.pinchart@skynet.be>
References: <56527a580701080603h83534canbe6c9603678f59dc@mail.gmail.com>
	<56527a580701101249q32db1cb2rf5c4c0b27fcb1acf@mail.gmail.com>
	<200701102256.08087.laurent.pinchart@skynet.be>
Message-ID: <200701112218.44914.laurent.pinchart@skynet.be>

Hi Adrian,

here's a patch that might fix the problem. It includes the previous patch. Let 
me know if it helps.

Cheers,

Laurent Pinchart
-------------- next part --------------
A non-text attachment was scrubbed...
Name: creative.patch
Type: text/x-diff
Size: 3930 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070111/8adccbce/attachment.patch>

From laurent.pinchart at skynet.be  Thu Jan 11 22:47:10 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 11 Jan 2007 22:47:10 +0100
Subject: [Linux-uvc-devel] C function to convert from Bayer to RGB24
	pixel formats
In-Reply-To: <200701082156.29167.luca.risolia@studio.unibo.it>
References: <200701082156.29167.luca.risolia@studio.unibo.it>
Message-ID: <200701112247.11121.laurent.pinchart@skynet.be>

Hi Luca,

> This is function in C to convert from Bayer to RGB24 pixel formats.
> The linear interpolation is more efficient than the ones I saw in other
> similar functions on internet, as the code omits "if-then-else" conditional
> statements in the loops.

Thanks for the code. This will be usefull for all the users who are interested 
in raw image processing. There seem to be quite a lot of them lately :-)

Best regards,

Laurent Pinchart


From luca.risolia at studio.unibo.it  Thu Jan 11 22:52:39 2007
From: luca.risolia at studio.unibo.it (Luca Risolia)
Date: Thu, 11 Jan 2007 22:52:39 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <200701111954.48283.laurent.pinchart@skynet.be>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<358f4d650701110804o1bb2e39dh2fdc0ce99b8cc10f@mail.gmail.com>
	<200701111954.48283.laurent.pinchart@skynet.be>
Message-ID: <200701112252.39757.luca.risolia@studio.unibo.it>

Alle 19:54, gioved? 11 gennaio 2007, Laurent Pinchart ha scritto:
> > www.linux-projects.org hosts the drivers for a bunch of chip specific
> > drivers :)
> >
> > http://www.linux-projects.org/modules/mydownloads/
> 
> As far as I know, there is currently no Linux driver for the sn9c20x chips. 
> Michel Xhaard might be working on it, you could try to contact him.

I Will start to write a driver for the 20x series as well.

Best regards
Luca Risolia


From vojtech at suse.cz  Thu Jan 11 23:44:47 2007
From: vojtech at suse.cz (Vojtech Pavlik)
Date: Thu, 11 Jan 2007 23:44:47 +0100
Subject: [Linux-uvc-devel] C function to convert from Bayer to RGB24
	pixel formats
In-Reply-To: <200701112247.11121.laurent.pinchart@skynet.be>
References: <200701082156.29167.luca.risolia@studio.unibo.it>
	<200701112247.11121.laurent.pinchart@skynet.be>
Message-ID: <20070111224447.GA5832@suse.cz>

On Thu, Jan 11, 2007 at 10:47:10PM +0100, Laurent Pinchart wrote:
> Hi Luca,
> 
> > This is function in C to convert from Bayer to RGB24 pixel formats.
> > The linear interpolation is more efficient than the ones I saw in other
> > similar functions on internet, as the code omits "if-then-else" conditional
> > statements in the loops.
> 
> Thanks for the code. This will be usefull for all the users who are interested 
> in raw image processing. There seem to be quite a lot of them lately :-)
 
That is easy to explain: Those interested in raw processing are looking
for a webcam that can do USB 2.0 and is supported on Linux. Not that
much choice. ;)

Btw, my take on Bayer->RGB processing: (attached)

-- 
Vojtech Pavlik
Director SuSE Labs
-------------- next part --------------
#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>
#include <unistd.h>
#include <sys/mman.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <sys/ioctl.h>
#include <string.h>
#include <sys/select.h>

#define u8 uint8_t
#define u16 uint16_t
#define u32 uint32_t

static uint8_t rgb[640*480*3];

#define R(x,y) pRGB24[0 + 3 * ((x) + 640 * (y))]
#define G(x,y) pRGB24[1 + 3 * ((x) + 640 * (y))]
#define B(x,y) pRGB24[2 + 3 * ((x) + 640 * (y))]

#define Bay(x,y) pBay[(x) + 640 * (y)]

static void bayer_copy(u8 *pBay, u8 *pRGB24, int x, int y)
{

	G(x + 0, y + 0) = Bay(x + 0, y + 0);
	G(x + 1, y + 1) = Bay(x + 1, y + 1);
	G(x + 0, y + 1) = G(x + 1, y + 0) = ((u32)Bay(x + 0, y + 0) + (u32)Bay(x + 1, y + 1)) / 2;
	R(x + 0, y + 0) = R(x + 1, y + 0) = R(x + 1, y + 1) = R(x + 0, y + 1) = Bay(x + 0, y + 1);
	B(x + 1, y + 1) = B(x + 0, y + 0) = B(x + 0, y + 1) = B(x + 1, y + 0) = Bay(x + 1, y + 0);
}

static void bayer_bilinear(u8 *pBay, u8 *pRGB24, int x, int y)
{
	R(x + 0, y + 0) = ((u32)Bay(x + 0, y + 1) + (u32)Bay(x + 0, y - 1)) / 2;
	G(x + 0, y + 0) = Bay(x + 0, y + 0);
	B(x + 0, y + 0) = ((u32)Bay(x - 1, y + 0) + (u32)Bay(x + 1, y + 0)) / 2;

	R(x + 0, y + 1) = Bay(x + 0, y + 1);
	G(x + 0, y + 1) = ((u32)Bay(x + 0, y + 0) + (u32)Bay(x + 0, y + 2)
			 + (u32)Bay(x - 1, y + 1) + (u32)Bay(x + 1, y + 1)) / 4;
	B(x + 0, y + 1) = ((u32)Bay(x + 1, y + 0) + (u32)Bay(x - 1, y + 0)
			 + (u32)Bay(x + 1, y + 2) + (u32)Bay(x - 1, y + 2)) / 4;

	R(x + 1, y + 0) = ((u32)Bay(x + 0, y + 1) + (u32)Bay(x + 2, y + 1)
			 + (u32)Bay(x + 0, y - 1) + (u32)Bay(x + 2, y - 1)) / 4;
	G(x + 1, y + 0) = ((u32)Bay(x + 0, y + 0) + (u32)Bay(x + 2, y + 0)
			 + (u32)Bay(x + 1, y - 1) + (u32)Bay(x + 1, y + 1)) / 4;
	B(x + 1, y + 0) = Bay(x + 1, y + 0);

	R(x + 1, y + 1) = ((u32)Bay(x + 0, y + 1) + (u32)Bay(x + 2, y + 1)) / 2;
	G(x + 1, y + 1) = Bay(x + 1, y + 1);
	B(x + 1, y + 1) = ((u32)Bay(x + 1, y + 0) + (u32)Bay(x + 1, y + 2)) / 2;
}


static void bayer_to_rgb24(u8 *pBay, u8 *pRGB24)
{
	int i, j;

	for (i = 0; i < 640; i += 2)
		for (j = 0; j < 480; j += 2)
			if (i == 0 || j == 0 || i == 640 - 2 || j == 480 - 2)
				bayer_copy(pBay, pRGB24, i, j);
			else
				bayer_bilinear(pBay, pRGB24, i, j);
}

void writepnm(uint8_t *data, int i)
{
	FILE *fd;
	char name[32];
	sprintf(name, "p5-%04d.pnm", i);
	fd = fopen(name, "w");
	fputs("P6\n", fd);
	fputs("640 480\n", fd);
	fputs("255\n", fd);
	fwrite(data, 640*480*3, 1, fd);
	fclose(fd);	
}

int main(void)
{
	int fdi;
	u8 *ibot;

	if ((fdi = open("bayer.raw", O_RDONLY)) < 0) {
		perror("open");
		return -1;
	}

	if ((ibot = mmap(NULL, 640 * 480 + 640*4, PROT_READ, MAP_SHARED, fdi, 0)) == MAP_FAILED) {
		perror("mmap");
		return -1;
	}

	bayer_to_rgb24(ibot, rgb);
	writepnm(rgb, 0);

	close(fdi);

	return 0;
}

From contact at alexandredenis.net  Fri Jan 12 00:41:38 2007
From: contact at alexandredenis.net (Alexandre DENIS)
Date: Fri, 12 Jan 2007 00:41:38 +0100
Subject: [Linux-uvc-devel] Kopete support for uvc [was: Creating new
	/dev/video?]
In-Reply-To: <200701090917.03574.contact@alexandredenis.net>
References: <20061230100509.GA14498@delight>
	<1168322537.14804.21.camel@delight>
	<200701090917.03574.contact@alexandredenis.net>
Message-ID: <200701120041.38298.contact@alexandredenis.net>


Hi,

My patch to add support for uvc in Kopete SVN is ready. You can download it 
at:
<http://www.alexandredenis.net/software/kopete-uvc/kopete-uvc-patch-20060111.tgz>
There is a README enclosed with instructions.

This patch fixes the following:
  -- improves YUYV decoding (colors corrected)
  -- adds MJPEG support (decoder from luvcview)
  -- fixes image size detection
  -- fixes V4L version detection (if V4L2 support is detected from the device, 
don't try V4L1!)

What is not implemented yet:
  -- most controls (brightness/contrast/saturation) are not implemented for 
V4L2 in Kopete at all.

Please report how it works. If it is ok, I will submit it for inclusion in 
Kopete SVN.

Enjoy!
-a.



From laurent.pinchart at skynet.be  Fri Jan 12 08:38:42 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 12 Jan 2007 08:38:42 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <200701112252.39757.luca.risolia@studio.unibo.it>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701111954.48283.laurent.pinchart@skynet.be>
	<200701112252.39757.luca.risolia@studio.unibo.it>
Message-ID: <200701120838.43227.laurent.pinchart@skynet.be>

> > > www.linux-projects.org hosts the drivers for a bunch of chip specific
> > > drivers :)
> > >
> > > http://www.linux-projects.org/modules/mydownloads/
> >
> > As far as I know, there is currently no Linux driver for the sn9c20x
> > chips. Michel Xhaard might be working on it, you could try to contact
> > him.
>
> I Will start to write a driver for the 20x series as well.

Is there any technical reason to duplicate the effort ?

Laurent Pinchart


From mxhaard at magic.fr  Fri Jan 12 08:50:15 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Fri, 12 Jan 2007 08:50:15 +0100
Subject: [Linux-uvc-devel] Kopete support for uvc [was: Creating new
	/dev/video?]
In-Reply-To: <200701120041.38298.contact@alexandredenis.net>
References: <20061230100509.GA14498@delight>
	<200701090917.03574.contact@alexandredenis.net>
	<200701120041.38298.contact@alexandredenis.net>
Message-ID: <200701120850.15127.mxhaard@magic.fr>

Le Vendredi 12 Janvier 2007 00:41, Alexandre DENIS a ?crit?:
> Hi,
>
> My patch to add support for uvc in Kopete SVN is ready. You can download it
> at:
> <http://www.alexandredenis.net/software/kopete-uvc/kopete-uvc-patch-2006011
>1.tgz> There is a README enclosed with instructions.
>
> This patch fixes the following:
>   -- improves YUYV decoding (colors corrected)
>   -- adds MJPEG support (decoder from luvcview)
>   -- fixes image size detection
>   -- fixes V4L version detection (if V4L2 support is detected from the
> device, don't try V4L1!)
>
> What is not implemented yet:
>   -- most controls (brightness/contrast/saturation) are not implemented for
> V4L2 in Kopete at all.
>
> Please report how it works. If it is ok, I will submit it for inclusion in
> Kopete SVN.
>
> Enjoy!
> -a.
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
Alexandre,
I have set the CREDIT for the jpeg decoder in the readme of luvcview maybe you 
can add these lines to videocodec.h
JPEG decoder from http://www.bootsplash.org/
 	(w) August 2001 by Michael Schroeder, <mls at suse.de>
Bests regards
-- 
Michel Xhaard
http://mxhaard.free.fr


From mm.mpathy at googlemail.com  Fri Jan 12 08:51:57 2007
From: mm.mpathy at googlemail.com (Markus Majer)
Date: Fri, 12 Jan 2007 08:51:57 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <200701120838.43227.laurent.pinchart@skynet.be>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701111954.48283.laurent.pinchart@skynet.be>
	<200701112252.39757.luca.risolia@studio.unibo.it>
	<200701120838.43227.laurent.pinchart@skynet.be>
Message-ID: <b399e0ee0701112351g2b774020lac6abed7c432431e@mail.gmail.com>

Hi there..

I am longing also a driver for this chipset, its great news to hear that
their is development for these.
I have a integrated webcam in my Lenovo 3000 N100, which seems to be also a
Microdia webcam with a Sonix 20x series chipset.
I can remind me for testing purposes too.
I also would help you wherever I can (documentation etc.) - I am not that
programming guy, if I program I use Python but have no clue of this hardcore
C programming ;)
I also hope you two guys - Laurent and Luca - could join forces.. Perhaps
the driver is finished even faster ;)
I you guys need webspace or sth. like that for your development, I own a
rootserver which I could give you some resources on.
Or just what you need - also donating for sth.

Greetings from germany..
Markus Majer


2007/1/12, Laurent Pinchart <laurent.pinchart at skynet.be>:
>
> > > > www.linux-projects.org hosts the drivers for a bunch of chip
> specific
> > > > drivers :)
> > > >
> > > > http://www.linux-projects.org/modules/mydownloads/
> > >
> > > As far as I know, there is currently no Linux driver for the sn9c20x
> > > chips. Michel Xhaard might be working on it, you could try to contact
> > > him.
> >
> > I Will start to write a driver for the 20x series as well.
>
> Is there any technical reason to duplicate the effort ?
>
> Laurent Pinchart
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070112/ca1cd05a/attachment.html>

From laurent.pinchart at skynet.be  Fri Jan 12 08:56:43 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 12 Jan 2007 08:56:43 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <b399e0ee0701112351g2b774020lac6abed7c432431e@mail.gmail.com>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701120838.43227.laurent.pinchart@skynet.be>
	<b399e0ee0701112351g2b774020lac6abed7c432431e@mail.gmail.com>
Message-ID: <200701120856.44232.laurent.pinchart@skynet.be>

Hi Markus,

> I am longing also a driver for this chipset, its great news to hear that
> their is development for these.
> I have a integrated webcam in my Lenovo 3000 N100, which seems to be also a
> Microdia webcam with a Sonix 20x series chipset.
> I can remind me for testing purposes too.
> I also would help you wherever I can (documentation etc.) - I am not that
> programming guy, if I program I use Python but have no clue of this
> hardcore C programming ;)
> I also hope you two guys - Laurent and Luca - could join forces.. Perhaps
> the driver is finished even faster ;)

I was actually refering to Michel Xhaard and Luca Risolia when I mentioned 
duplicate efforts. The Linux UVC driver already takes all the spare time I 
can afford.

Michel will start working on the sn9c20x chipset as well. Having two 
developers working on a single driver would be nice, but having them working 
on two separate projects is clearly a waste of resources.

> I you guys need webspace or sth. like that for your development, I own a
> rootserver which I could give you some resources on.
> Or just what you need - also donating for sth.

Cheers,

Laurent Pinchart


From luca.risolia at studio.unibo.it  Fri Jan 12 15:25:24 2007
From: luca.risolia at studio.unibo.it (Luca Risolia)
Date: Fri, 12 Jan 2007 15:25:24 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <200701120838.43227.laurent.pinchart@skynet.be>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701112252.39757.luca.risolia@studio.unibo.it>
	<200701120838.43227.laurent.pinchart@skynet.be>
Message-ID: <200701121525.24599.luca.risolia@studio.unibo.it>

Alle 08:38, venerd? 12 gennaio 2007, Laurent Pinchart ha scritto:
> > > > www.linux-projects.org hosts the drivers for a bunch of chip specific
> > > > drivers :)
> > > >
> > > > http://www.linux-projects.org/modules/mydownloads/
> > >
> > > As far as I know, there is currently no Linux driver for the sn9c20x
> > > chips. Michel Xhaard might be working on it, you could try to contact
> > > him.
> >
> > I Will start to write a driver for the 20x series as well.
> 
> Is there any technical reason to duplicate the effort ?

If I am not wrong, Micheal's drivers are based on V4L1, while I have been
using V4L2 for years..We could collaborate on the V4L2 part, why not.

Luca


From mxhaard at magic.fr  Fri Jan 12 16:46:59 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Fri, 12 Jan 2007 16:46:59 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <200701121525.24599.luca.risolia@studio.unibo.it>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701120838.43227.laurent.pinchart@skynet.be>
	<200701121525.24599.luca.risolia@studio.unibo.it>
Message-ID: <200701121647.00362.mxhaard@magic.fr>

Le Vendredi 12 Janvier 2007 15:25, Luca Risolia a ?crit?:
Hi Luca,
> Alle 08:38, venerd? 12 gennaio 2007, Laurent Pinchart ha scritto:
> > > > > www.linux-projects.org hosts the drivers for a bunch of chip
> > > > > specific drivers :)
> > > > >
> > > > > http://www.linux-projects.org/modules/mydownloads/
> > > >
> > > > As far as I know, there is currently no Linux driver for the sn9c20x
> > > > chips. Michel Xhaard might be working on it, you could try to contact
> > > > him.
> > >
> > > I Will start to write a driver for the 20x series as well.
> >
> > Is there any technical reason to duplicate the effort ?
>
> If I am not wrong, 
You are wrong here.The new design (gspca) is split with two branchs one for 
v4l1 the other one for v4l2. 
> Micheal's drivers
My name is Michel and spca5xx/gspca are not mine, IMHO there are more than 100 
contributors:)
> are based on V4L1, while I have been  
> using V4L2 for years..We could collaborate on the V4L2 part, why not.
gpsca is set for a generic core "driver" that mean all webcam hardware able to  
stream video over usb bus(228 today) . The v4l2 drivers you set in the kernel 
are hardware specific,  that mean one core driver per webcam hardware. I am 
not sure it is the same project, but why not a discuss about the goal of a 
collaboration :) 
>
> Luca
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
Cheers,
-- 
Michel Xhaard
http://mxhaard.free.fr


From laurent.pinchart at skynet.be  Fri Jan 12 16:57:06 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 12 Jan 2007 16:57:06 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <200701121647.00362.mxhaard@magic.fr>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701121525.24599.luca.risolia@studio.unibo.it>
	<200701121647.00362.mxhaard@magic.fr>
Message-ID: <200701121657.06826.laurent.pinchart@skynet.be>

[snip]
> gpsca is set for a generic core "driver" that mean all webcam hardware able
> to stream video over usb bus(228 today).

Do you really mean all webcams, or all webcams that conform to a specific 
architecture (bridge with some minimum functionalities controlling an i2c 
sensor, where i2c commands are sent by the driver) ?

> The v4l2 drivers you set in the kernel are hardware specific,  that mean one
> core driver per webcam hardware. I am not sure it is the same project, but
> why not a discuss about the goal of a collaboration :)

I think unifying to drivers (where possible and where it makes sense) would 
allow for a lot of code sharing. That would be great for developers and 
end-users.

Cheers,

Laurent Pinchart


From mxhaard at magic.fr  Fri Jan 12 18:33:24 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Fri, 12 Jan 2007 18:33:24 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <200701121657.06826.laurent.pinchart@skynet.be>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701121647.00362.mxhaard@magic.fr>
	<200701121657.06826.laurent.pinchart@skynet.be>
Message-ID: <200701121833.24172.mxhaard@magic.fr>

Le Vendredi 12 Janvier 2007 16:57, Laurent Pinchart a ?crit?:
> [snip]
>
> > gpsca is set for a generic core "driver" that mean all webcam hardware
> > able to stream video over usb bus(228 today).
>
> Do you really mean all webcams, or all webcams that conform to a specific
> architecture (bridge with some minimum functionalities controlling an i2c
> sensor, where i2c commands are sent by the driver) ?
 I mean all webcams with an ISO or BULK endpoint, set with a Vendor Class, we 
can provided the video decompressor (GPL) :) 
>
> > The v4l2 drivers you set in the kernel are hardware specific,  that mean
> > one core driver per webcam hardware. I am not sure it is the same
> > project, but why not a discuss about the goal of a collaboration :)
>
> I think unifying to drivers (where possible and where it makes sense) would
> allow for a lot of code sharing. That would be great for developers and
> end-users.
>
> Cheers,
>
> Laurent Pinchart
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel

-- 
Michel Xhaard
http://mxhaard.free.fr


From luca.risolia at studio.unibo.it  Fri Jan 12 20:06:46 2007
From: luca.risolia at studio.unibo.it (Luca Risolia)
Date: Fri, 12 Jan 2007 20:06:46 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <200701121647.00362.mxhaard@magic.fr>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701121525.24599.luca.risolia@studio.unibo.it>
	<200701121647.00362.mxhaard@magic.fr>
Message-ID: <200701122006.46657.luca.risolia@studio.unibo.it>

Alle 16:46, venerd? 12 gennaio 2007, Michel Xhaard ha scritto:
> Le Vendredi 12 Janvier 2007 15:25, Luca Risolia a ?crit?:
> Hi Luca,
> > Alle 08:38, venerd? 12 gennaio 2007, Laurent Pinchart ha scritto:
> > > > > > www.linux-projects.org hosts the drivers for a bunch of chip
> > > > > > specific drivers :)
> > > > > >
> > > > > > http://www.linux-projects.org/modules/mydownloads/
> > > > >
> > > > > As far as I know, there is currently no Linux driver for the sn9c20x
> > > > > chips. Michel Xhaard might be working on it, you could try to contact
> > > > > him.
> > > >
> > > > I Will start to write a driver for the 20x series as well.
> > >
> > > Is there any technical reason to duplicate the effort ?
> >
> > If I am not wrong, 
> You are wrong here.The new design (gspca) is split with two branchs one for 
> v4l1 the other one for v4l2. 

From the user point of view, I do not see any real advantages in having a single
bloated driver _collecting_ (not abstracting) code specific to every chipset
rather than having one thin driver per chipset.
On the contrary, from the developer point of view, the lack of documentation,
the features and the internal differences between the chips are substantial
and specific enough to justify clean and separate drivers, even considering that
the design and core part are basically identical. This makes the code easier
to debug - and it's probably one of the most important aspects to consider
in kernel development.
But the main question is why you don't profit by the V4L2 drivers
already present in the kernel instead of porting them from V4l1 and having
them outside the kernel? The core part of the drivers is really stable. This
would let you focus on particular features or add support for more hardware.

> > Micheal's drivers
> My name is Michel and spca5xx/gspca are not mine, IMHO there are more than 100 
> contributors:)

It's evident I was referring to _Michel_ as the formal maintainer of the drivers :)

Best regards,
Luca


From luca.risolia at studio.unibo.it  Fri Jan 12 20:19:16 2007
From: luca.risolia at studio.unibo.it (Luca Risolia)
Date: Fri, 12 Jan 2007 20:19:16 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <200701122006.46657.luca.risolia@studio.unibo.it>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701121647.00362.mxhaard@magic.fr>
	<200701122006.46657.luca.risolia@studio.unibo.it>
Message-ID: <200701122019.17027.luca.risolia@studio.unibo.it>

> But the main question is why you don't profit by the V4L2 drivers
> already present in the kernel instead of porting ---> them
> from V4l1 and having 
> them outside the kernel? The core part of the drivers is really stable. This
> would let you focus on particular features or add support for more hardware.

Sorry, I miswrote - too much work today. "them" stands for "your drivers". 



From laurent.pinchart at skynet.be  Fri Jan 12 20:50:30 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 12 Jan 2007 20:50:30 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <200701122006.46657.luca.risolia@studio.unibo.it>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701121647.00362.mxhaard@magic.fr>
	<200701122006.46657.luca.risolia@studio.unibo.it>
Message-ID: <200701122050.31036.laurent.pinchart@skynet.be>

> > > > > > > www.linux-projects.org hosts the drivers for a bunch of chip
> > > > > > > specific drivers :)
> > > > > > >
> > > > > > > http://www.linux-projects.org/modules/mydownloads/
> > > > > >
> > > > > > As far as I know, there is currently no Linux driver for the
> > > > > > sn9c20x chips. Michel Xhaard might be working on it, you could
> > > > > > try to contact him.
> > > > >
> > > > > I Will start to write a driver for the 20x series as well.
> > > >
> > > > Is there any technical reason to duplicate the effort ?
> > >
> > > If I am not wrong,
> >
> > You are wrong here.The new design (gspca) is split with two branchs one
> > for v4l1 the other one for v4l2.
>
> From the user point of view, I do not see any real advantages in having a
> single bloated driver _collecting_ (not abstracting) code specific to every
> chipset rather than having one thin driver per chipset.

From the end-user point of view, the only thing that matters is having a 
stable driver for his hardware. By sharing code between similar drivers, 
development time will be reduced, and fewer bugs will be introduced.

> On the contrary, from the developer point of view, the lack of
> documentation, the features and the internal differences between the chips
> are substantial and specific enough to justify clean and separate drivers,
> even considering that the design and core part are basically identical.

I'm not advocating a single driver for all webcams. It only makes sense when 
webcams share similar features. Many webcams use a USB bridge that relays I2C 
commands from the host and handles video streaming. Having common code makes 
sense there, with small bridge-specific and sensor-specific kernels modules 
that would plug into a core driver.

> This makes the code easier to debug - and it's probably one of the most
> important aspects to consider in kernel development.
> But the main question is why you don't profit by the V4L2 drivers
> already present in the kernel instead of porting them from V4l1 and having
> them outside the kernel? The core part of the drivers is really stable.
> This would let you focus on particular features or add support for more
> hardware.

I can't answer for Michel here, but when I started developing the Linux UVC 
driver, I decided to start from scratch instead of reusing current code from 
kernel drivers. The code was just not clean enough.

Laurent Pinchart


From luca.risolia at studio.unibo.it  Fri Jan 12 20:57:11 2007
From: luca.risolia at studio.unibo.it (Luca Risolia)
Date: Fri, 12 Jan 2007 20:57:11 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <200701121833.24172.mxhaard@magic.fr>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701121657.06826.laurent.pinchart@skynet.be>
	<200701121833.24172.mxhaard@magic.fr>
Message-ID: <200701122057.12049.luca.risolia@studio.unibo.it>

> > > gpsca is set for a generic core "driver" that mean all webcam hardware
> > > able to stream video over usb bus(228 today).
> >
> > Do you really mean all webcams, or all webcams that conform to a specific
> > architecture (bridge with some minimum functionalities controlling an i2c
> > sensor, where i2c commands are sent by the driver) ?

The ideal approach is to separate the I2C adaptors (implemented on the
BUSes of the single bridges) from a generic I2C driver for the sensors (connected to
various I2C clients corresponding to specific models) implementing the standard
V4L2 controls, This is not easy, since bridges and sensors are strictly tied in a
particular configuration. So the practical approach is to embe  the code for the
sensor in the driver directly.

>  I mean all webcams with an ISO or BULK endpoint, set with a Vendor Class, we 
> can provided the video decompressor (GPL) :) 

I hope you won't include all the decoding stuff in the driver..!? This would not make
any sense.

Best regards
Luca


From laurent.pinchart at skynet.be  Fri Jan 12 21:02:34 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 12 Jan 2007 21:02:34 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <200701122057.12049.luca.risolia@studio.unibo.it>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701121833.24172.mxhaard@magic.fr>
	<200701122057.12049.luca.risolia@studio.unibo.it>
Message-ID: <200701122102.34560.laurent.pinchart@skynet.be>

On Friday 12 January 2007 20:57, Luca Risolia wrote:
> > > > gpsca is set for a generic core "driver" that mean all webcam
> > > > hardware able to stream video over usb bus(228 today).
> > >
> > > Do you really mean all webcams, or all webcams that conform to a
> > > specific architecture (bridge with some minimum functionalities
> > > controlling an i2c sensor, where i2c commands are sent by the driver) ?
>
> The ideal approach is to separate the I2C adaptors (implemented on the
> BUSes of the single bridges) from a generic I2C driver for the sensors
> (connected to various I2C clients corresponding to specific models)
> implementing the standard V4L2 controls, This is not easy, since bridges
> and sensors are strictly tied in a particular configuration. So the
> practical approach is to embe  the code for the sensor in the driver
> directly.

Are they really ? A single bridge can handle dozens of different sensors. Why 
couldn't we abstract the sensor drivers and make them as small as possible ? 
This would make it easier to support new bridge/sensor combinations.

> >  I mean all webcams with an ISO or BULK endpoint, set with a Vendor
> > Class, we can provided the video decompressor (GPL) :)
>
> I hope you won't include all the decoding stuff in the driver..!? This
> would not make any sense.

It has been stated clearly before that video codecs are not to be implemented 
in kernel space. Basic decoding (such as stripping headers) is of course 
allowed, but any operation on video data must be performed in userspace. I 
think we all agree here.

By the way, the lack of a standard user-space framework for video codecs 
doesn't make multimedia programming easy. This is in my opinion a major issue 
to address.

Laurent Pinchart


From mailinglisten at habmalnefrage.de  Fri Jan 12 21:11:46 2007
From: mailinglisten at habmalnefrage.de (Martin)
Date: Fri, 12 Jan 2007 21:11:46 +0100
Subject: [Linux-uvc-devel] Kopete support for uvc [was: Creating
	new	/dev/video?]
In-Reply-To: <200701120041.38298.contact@alexandredenis.net>
References: <20061230100509.GA14498@delight>
	<1168322537.14804.21.camel@delight>
	<200701090917.03574.contact@alexandredenis.net>
	<200701120041.38298.contact@alexandredenis.net>
Message-ID: <1168632706.9159.22.camel@delight>

Hi,

Am Freitag, den 12.01.2007, 00:41 +0100 schrieb Alexandre DENIS:
> This patch fixes the following:
>   -- improves YUYV decoding (colors corrected)
>   -- adds MJPEG support (decoder from luvcview)
>   -- fixes image size detection
>   -- fixes V4L version detection (if V4L2 support is detected from the device, 
> don't try V4L1!)
> 
> What is not implemented yet:
>   -- most controls (brightness/contrast/saturation) are not implemented for 
> V4L2 in Kopete at all.

Does not matter. Somehow I seem to have automatic correction of
brightness and all.

Thank you for your wonderful work! Works for me!

> Please report how it works. If it is ok, I will submit it for inclusion in 
> Kopete SVN.

Works fine, but the framerate seems to be a bit low.

> Enjoy!

I do so. :-)

For any Gentooer's convenience:

Attached there's a tar.bz2, you can unpack into your /usr/local/portage,
in case anyone wants to try on his/her Gentoo system.

Please be aware, that you just have to unpack it to your portage
overlay, and you should get a new version (kopete-3.5.3-r3). Problem is:
I do NOT know, what happens, when the official tree updates to -r3.
Maybe you will not get this official update/bugfix shown. In any case: I
assume, that if you are using any kind of own portage overlay, you know
what you're doing...

This ebuild/files-tree is based on the original ebuild and files. I just
told the ebuild to follow Alexandres instructions from the README. And I
added the CREDITS to the Description-line. (Sorry, I found no better
place for them as the README does not get installed and any other place
would efficiently hide the credits.)

Enjoy! ;-)

Martin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: kopete-v4l2-gentoo.tar.bz2
Type: application/x-bzip-compressed-tar
Size: 1656 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070112/6392b865/attachment.bin>

From luca.risolia at studio.unibo.it  Fri Jan 12 21:31:41 2007
From: luca.risolia at studio.unibo.it (Luca Risolia)
Date: Fri, 12 Jan 2007 21:31:41 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <200701122050.31036.laurent.pinchart@skynet.be>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701122006.46657.luca.risolia@studio.unibo.it>
	<200701122050.31036.laurent.pinchart@skynet.be>
Message-ID: <200701122131.41382.luca.risolia@studio.unibo.it>

> > On the contrary, from the developer point of view, the lack of
> > documentation, the features and the internal differences between the chips
> > are substantial and specific enough to justify clean and separate drivers,
> > even considering that the design and core part are basically identical.
> 
> I'm not advocating a single driver for all webcams. It only makes sense when 
> webcams share similar features. Many webcams use a USB bridge that relays I2C 
> commands from the host and handles video streaming. Having common code makes 
> sense there, with small bridge-specific and sensor-specific kernels modules 
> that would plug into a core driver.

By a rapid look, I do not see such abstraction in the gspca driver and 
I wouldn't like to go in technical details about the quality of the code for now.
You probably didn't understand my point. The core part of the ZC0301,
ET61X251 and SN9C1xx IS common. It's just that it is not in a single
driver. Why? Because it's worth isolating all the differences in different drivers,
for the reasons I gave before, instead of collecting them in a bloated driver.
Furthermore they _already_ exist, they have been present in the kernel
for years and I can honestly say they are stable.
So why duplicating the efforts and confusing the
users with another driver supporting the same hardware?

> I can't answer for Michel here, but when I started developing the Linux UVC 
> driver, I decided to start from scratch instead of reusing current code from 
> kernel drivers. The code was just not clean enough.

I can't argue on personal opinions.

Best regards
Luca


From mxhaard at magic.fr  Fri Jan 12 22:20:09 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Fri, 12 Jan 2007 22:20:09 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <200701122131.41382.luca.risolia@studio.unibo.it>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701122050.31036.laurent.pinchart@skynet.be>
	<200701122131.41382.luca.risolia@studio.unibo.it>
Message-ID: <200701122220.10117.mxhaard@magic.fr>

Le Vendredi 12 Janvier 2007 21:31, Luca Risolia a ?crit?:
> > > On the contrary, from the developer point of view, the lack of
> > > documentation, the features and the internal differences between the
> > > chips are substantial and specific enough to justify clean and separate
> > > drivers, even considering that the design and core part are basically
> > > identical.
> >
> > I'm not advocating a single driver for all webcams. It only makes sense
> > when webcams share similar features. Many webcams use a USB bridge that
> > relays I2C commands from the host and handles video streaming. Having
> > common code makes sense there, with small bridge-specific and
> > sensor-specific kernels modules that would plug into a core driver.
>
> By a rapid look, I do not see such abstraction in the gspca driver and
> I wouldn't like to go in technical details about the quality of the code
> for now. You probably didn't understand my point. The core part of the
> ZC0301, ET61X251 and SN9C1xx IS common. It's just that it is not in a
> single driver. Why? Because it's worth isolating all the differences in
> different drivers, for the reasons I gave before, instead of collecting
> them in a bloated driver. Furthermore they _already_ exist, they have been
> present in the kernel for years and I can honestly say they are stable.
> So why duplicating the efforts and confusing the
> users with another driver supporting the same hardware?
As far as i know the zc0301 and the sn91xx is not so old, i did not know who 
is confusing the end users, but it is not me :)
>
> > I can't answer for Michel here, but when I started developing the Linux
> > UVC driver, I decided to start from scratch instead of reusing current
> > code from kernel drivers. The code was just not clean enough.
>
> I can't argue on personal opinions.
>
> Best regards
> Luca
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
Well the collaboration start and stop here, good luck  :)
regards
-- 
Michel Xhaard
http://mxhaard.free.fr


From vojtech at suse.cz  Fri Jan 12 22:38:57 2007
From: vojtech at suse.cz (Vojtech Pavlik)
Date: Fri, 12 Jan 2007 22:38:57 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <200701122057.12049.luca.risolia@studio.unibo.it>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701121657.06826.laurent.pinchart@skynet.be>
	<200701121833.24172.mxhaard@magic.fr>
	<200701122057.12049.luca.risolia@studio.unibo.it>
Message-ID: <20070112213857.GA14780@suse.cz>

On Fri, Jan 12, 2007 at 08:57:11PM +0100, Luca Risolia wrote:
> > > > gpsca is set for a generic core "driver" that mean all webcam hardware
> > > > able to stream video over usb bus(228 today).
> > >
> > > Do you really mean all webcams, or all webcams that conform to a specific
> > > architecture (bridge with some minimum functionalities controlling an i2c
> > > sensor, where i2c commands are sent by the driver) ?
> 
> The ideal approach is to separate the I2C adaptors (implemented on the
> BUSes of the single bridges) from a generic I2C driver for the sensors (connected to
> various I2C clients corresponding to specific models) implementing the standard
> V4L2 controls, This is not easy, since bridges and sensors are strictly tied in a
> particular configuration. So the practical approach is to embe  the code for the
> sensor in the driver directly.

I tend to agree: At least when I was hacking on the ofvx2 driver for the
iBot2 camera, the first thing I did was to remove the I2C abstraction,
because a good half of the settings of the _sensor_ needed to be
different for the bridge I was working with.

That, and the bridge didn't implement full I2C controller either, just a
small subset of the functions.

Yes, it still possible to make the sensor drivers generic enough to be
able to encompass all the bridge chip needs, with different mode
settings, etc, but I'm not sure if that's a benefit in the end, when
a sensor driver is just a thing that puts a list of numbers into a list
of registers.

> >  I mean all webcams with an ISO or BULK endpoint, set with a Vendor
> >  Class, we can provided the video decompressor (GPL) :) 
> 
> I hope you won't include all the decoding stuff in the driver..!? This
> would not make any sense.

Actually, for vendor-specific obscure encoding modes it does make sense.
Yes, V4L2 is built around the fact that no processing is done on the
actual data, but then, this is a huge pain with all the applications
having to support every quirk of every device.

And, in many cases, the driver ends up having to COPY the data from the
USB transfer buffers to the application buffers. It doesn't cost much to
do a simple transformation on top of the copy, in the same way that
copy_and_checksum is nearly as fast as just a copy.

Btw, I would like to ask driver writers to really think for a while and
consider how many copies of the video stream need to be made before it
reaches the userspace application. In many cases I believe the number
can be zero.

-- 
Vojtech Pavlik
Director SuSE Labs


From luca.risolia at studio.unibo.it  Fri Jan 12 22:55:25 2007
From: luca.risolia at studio.unibo.it (Luca Risolia)
Date: Fri, 12 Jan 2007 22:55:25 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <200701122220.10117.mxhaard@magic.fr>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701122131.41382.luca.risolia@studio.unibo.it>
	<200701122220.10117.mxhaard@magic.fr>
Message-ID: <200701122255.25862.luca.risolia@studio.unibo.it>

Alle 22:20, venerd? 12 gennaio 2007, Michel Xhaard ha scritto:
> Le Vendredi 12 Janvier 2007 21:31, Luca Risolia a ?crit?:
> > > > On the contrary, from the developer point of view, the lack of
> > > > documentation, the features and the internal differences between the
> > > > chips are substantial and specific enough to justify clean and separate
> > > > drivers, even considering that the design and core part are basically
> > > > identical.
> > >
> > > I'm not advocating a single driver for all webcams. It only makes sense
> > > when webcams share similar features. Many webcams use a USB bridge that
> > > relays I2C commands from the host and handles video streaming. Having
> > > common code makes sense there, with small bridge-specific and
> > > sensor-specific kernels modules that would plug into a core driver.
> >
> > By a rapid look, I do not see such abstraction in the gspca driver and
> > I wouldn't like to go in technical details about the quality of the code
> > for now. You probably didn't understand my point. The core part of the
> > ZC0301, ET61X251 and SN9C1xx IS common. It's just that it is not in a
> > single driver. Why? Because it's worth isolating all the differences in
> > different drivers, for the reasons I gave before, instead of collecting
> > them in a bloated driver. Furthermore they _already_ exist, they have been
> > present in the kernel for years and I can honestly say they are stable.
> > So why duplicating the efforts and confusing the
> > users with another driver supporting the same hardware?

> As far as i know the zc0301 and the sn91xx is not so old, i did not know who 
> is confusing the end users, but it is not me :)

Well, I do not intend to waste too much words about this matter :)
Just see the kernel archives or the copyright note. It's marked 2004.
I think it was the first V4L2 driver for a webcam, as I didn't see any drivers
in the kernel to derive the code from. which was useful for my purposes.
zc0301 has been derived from the sn9c1xx and added recently to the
mainline kernel, so it's basically (c)'ed 2004 too (the same
applies to the et61x251 driver, while w9968cf appeared in 2002 if i rememner well).

Luca


From Serge.A.S at tochka.ru  Fri Jan 12 23:20:14 2007
From: Serge.A.S at tochka.ru (Serge A. Suchkov)
Date: Sat, 13 Jan 2007 01:20:14 +0300
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <20070112213857.GA14780@suse.cz>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701122057.12049.luca.risolia@studio.unibo.it>
	<20070112213857.GA14780@suse.cz>
Message-ID: <200701130120.15020.Serge.A.S@tochka.ru>

> 
> > >  I mean all webcams with an ISO or BULK endpoint, set with a Vendor
> > >  Class, we can provided the video decompressor (GPL) :) 
> > 
> > I hope you won't include all the decoding stuff in the driver..!? This
> > would not make any sense.
> 
> Actually, for vendor-specific obscure encoding modes it does make sense.
> Yes, V4L2 is built around the fact that no processing is done on the
> actual data, but then, this is a huge pain with all the applications
> having to support every quirk of every device.
> 
> And, in many cases, the driver ends up having to COPY the data from the
> USB transfer buffers to the application buffers. It doesn't cost much to
> do a simple transformation on top of the copy, in the same way that
> copy_and_checksum is nearly as fast as just a copy.
> 
> Btw, I would like to ask driver writers to really think for a while and
> consider how many copies of the video stream need to be made before it
> reaches the userspace application. In many cases I believe the number
> can be zero.
> 

What prevents in this case " to leave a door   slightly opened " having         
provided the  interface which allowed to connect  external   modules     
for simple and sophisticated  transformation  (decoding) in   kernel     
space  even if such transformation   will be necessary   in one   case     
from hundred?

-- 
Regards,
Serge A. Suchkov
--
"For an adequate time call 555-3321"


From pauljurczak at yahoo.com  Fri Jan 12 23:21:13 2007
From: pauljurczak at yahoo.com (Paul Jurczak)
Date: Fri, 12 Jan 2007 14:21:13 -0800 (PST)
Subject: [Linux-uvc-devel] Raw Bayer format
Message-ID: <20070112222113.54090.qmail@web60520.mail.yahoo.com>

There was a few posts recently about receiving raw Bayer data from UVC camera. I looked at "USB Device Class Definition for Video Devices: Uncompressed Payload" document and it defines only 2 uncompressed formats: YUY2 and NV12. None of them is a raw Bayer and I don't think you can convert any of them to original Bayer values. I'm I missing something?

Paul.



 
____________________________________________________________________________________
Do you Yahoo!?
Everyone is raving about the all-new Yahoo! Mail beta.
http://new.mail.yahoo.com


From luca.risolia at studio.unibo.it  Sat Jan 13 00:06:32 2007
From: luca.risolia at studio.unibo.it (Luca Risolia)
Date: Sat, 13 Jan 2007 00:06:32 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <20070112213857.GA14780@suse.cz>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701122057.12049.luca.risolia@studio.unibo.it>
	<20070112213857.GA14780@suse.cz>
Message-ID: <200701130006.32742.luca.risolia@studio.unibo.it>

Alle 22:38, venerd? 12 gennaio 2007, Vojtech Pavlik ha scritto:
> > I hope you won't include all the decoding stuff in the driver..!? This
> > would not make any sense.

> Actually, for vendor-specific obscure encoding modes it does make sense.
> Yes, V4L2 is built around the fact that no processing is done on the
> actual data, but then, this is a huge pain with all the applications
> having to support every quirk of every device.

That's why we need a low-level library.

> And, in many cases, the driver ends up having to COPY the data from the
> USB transfer buffers to the application buffers. It doesn't cost much to
> do a simple transformation on top of the copy, in the same way that
> copy_and_checksum is nearly as fast as just a copy.

One reason (not the only one) to do postprocessing in userspace
involves CPU optimizations.
They are discouraged at kernel level but can be implemented fine in a user library.
One example from my past experiences: MMX code for converting  from YUV to RGB24,
640x480 25 fps could save up to 25% CPU on a PIII 550Mhz, compared to the solution
with convertion in the driver (but without optimization).
 
> Btw, I would like to ask driver writers to really think for a while and
> consider how many copies of the video stream need to be made before it
> reaches the userspace application. In many cases I believe the number
> can be zero.

One copy, from USB transfer buffers to the frame buffers in the driver,
which can be mmap()'ed to the user application. How can the number of copies be zero
(or did i misunderstand your question)?.

Luca


From contact at alexandredenis.net  Sat Jan 13 11:23:20 2007
From: contact at alexandredenis.net (Alexandre DENIS)
Date: Sat, 13 Jan 2007 11:23:20 +0100
Subject: [Linux-uvc-devel]
	=?iso-8859-15?q?Kopete_support_for_uvc_=5Bwas?=
	=?iso-8859-15?q?=3A_Creating_new=09/dev/video=3F=5D?=
In-Reply-To: <1168632706.9159.22.camel@delight>
References: <20061230100509.GA14498@delight>
	<200701120041.38298.contact@alexandredenis.net>
	<1168632706.9159.22.camel@delight>
Message-ID: <200701131123.20691.contact@alexandredenis.net>

Le ven 12 janvier 2007 21:11, Martin a ?crit :
> > Please report how it works. If it is ok, I will submit it for inclusion
> > in Kopete SVN.
>
> Works fine, but the framerate seems to be a bit low.

What plugin are you using? MSN or Yahoo? There was a fix committed in Kopete 
SVN 2 days ago to improve the framerate with MSN (don't know for Yahoo).

-a.



From contact at alexandredenis.net  Sat Jan 13 11:25:35 2007
From: contact at alexandredenis.net (Alexandre DENIS)
Date: Sat, 13 Jan 2007 11:25:35 +0100
Subject: [Linux-uvc-devel] Kopete support for uvc [was: Creating new
	/dev/video?]
In-Reply-To: <200701120850.15127.mxhaard@magic.fr>
References: <20061230100509.GA14498@delight>
	<200701120041.38298.contact@alexandredenis.net>
	<200701120850.15127.mxhaard@magic.fr>
Message-ID: <200701131125.35820.contact@alexandredenis.net>

Le ven 12 janvier 2007 08:50, vous avez ?crit :
> Alexandre,
> I have set the CREDIT for the jpeg decoder in the readme of luvcview maybe
> you can add these lines to videocodec.h
> JPEG decoder from http://www.bootsplash.org/
>  	(w) August 2001 by Michael Schroeder, <mls at suse.de>

I will fix it in the upcoming new release (with brightness/contrast/saturation 
controls implemented).

Btw, what does "(w)"  mean?

-a.



From vojtech at suse.cz  Sat Jan 13 12:43:48 2007
From: vojtech at suse.cz (Vojtech Pavlik)
Date: Sat, 13 Jan 2007 12:43:48 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <200701130006.32742.luca.risolia@studio.unibo.it>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701122057.12049.luca.risolia@studio.unibo.it>
	<20070112213857.GA14780@suse.cz>
	<200701130006.32742.luca.risolia@studio.unibo.it>
Message-ID: <20070113114348.GA16656@suse.cz>

On Sat, Jan 13, 2007 at 12:06:32AM +0100, Luca Risolia wrote:

> Alle 22:38, venerd? 12 gennaio 2007, Vojtech Pavlik ha scritto:
> > > I hope you won't include all the decoding stuff in the driver..!? This
> > > would not make any sense.
> 
> > Actually, for vendor-specific obscure encoding modes it does make sense.
> > Yes, V4L2 is built around the fact that no processing is done on the
> > actual data, but then, this is a huge pain with all the applications
> > having to support every quirk of every device.
> 
> That's why we need a low-level library.

Yes, and port all the applications to it. Not a small effort. Still the
raw+library approach doesn't convince me entirely. ALSA has used it, and
still a lot of people prefer the legacy /dev/dsp interface.

The reason being that too much of the complexity is still visible.

> > And, in many cases, the driver ends up having to COPY the data from
> > the USB transfer buffers to the application buffers. It doesn't cost
> > much to do a simple transformation on top of the copy, in the same
> > way that copy_and_checksum is nearly as fast as just a copy.
> 
> One reason (not the only one) to do postprocessing in userspace
> involves CPU optimizations.  They are discouraged at kernel level but
> can be implemented fine in a user library.  One example from my past
> experiences: MMX code for converting  from YUV to RGB24, 640x480 25
> fps could save up to 25% CPU on a PIII 550Mhz, compared to the
> solution with convertion in the driver (but without optimization).

I'm all for forcing a couple of sane formats onto userspace, MJPEG,
MPEG, RGB24, Bayer and some of the YUV formats fitting that description.
But I don't think hardware-specific compression schemes make sense to
export to userspace.

These compression schemes will change with further revisions of the
bridges, and it's a pain enough to have to update the kernel driver,
adding the need to update the library (or, worse, all applications),
doesn't make sense IMO.

> > Btw, I would like to ask driver writers to really think for a while
> > and consider how many copies of the video stream need to be made
> > before it reaches the userspace application. In many cases I believe
> > the number can be zero.
> 
> One copy, from USB transfer buffers to the frame buffers in the
> driver, which can be mmap()'ed to the user application. How can the
> number of copies be zero (or did i misunderstand your question)?.

You can make the USB controller do DMA directly to the user space
buffers, by using them as the transfer buffers. This is what V4L was
designed for, because some years ago, there wasn't much chance that the
PC would be able to handle all the streaming PAL video from a bttv card
if it were to be copied around.

Of course, some bridges (or standards) supply the video data in a stupid
format with headers, which need to be removed to concatenate the
individual chunks into a continuous picture. Then, most likely,
zero-copy is not possible.

But those that deliver the whole frame in a Bulk transfer without any
interfering headers, it's trivially possible to avoid the copy. (Yes,
I've done that. I needed it to be able to reach 60fps with a
ovfx2/ov7620 camera. Not using V4L2 yet, though.)

-- 
Vojtech Pavlik
Director SuSE Labs


From luca.risolia at studio.unibo.it  Sat Jan 13 13:07:33 2007
From: luca.risolia at studio.unibo.it (Luca Risolia)
Date: Sat, 13 Jan 2007 13:07:33 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <20070113114348.GA16656@suse.cz>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701130006.32742.luca.risolia@studio.unibo.it>
	<20070113114348.GA16656@suse.cz>
Message-ID: <200701131307.34177.luca.risolia@studio.unibo.it>

Alle 12:43, sabato 13 gennaio 2007, Vojtech Pavlik ha scritto:
> > Yes, and port all the applications to it. Not a small effort. Still the
> raw+library approach doesn't convince me entirely. ALSA has used it, and
> still a lot of people prefer the legacy /dev/dsp interface.

Consider that many applications are still based on the old V4L1.
In one way or the other they would have to be rewritten...

> Of course, some bridges (or standards) supply the video data in a stupid
> format with headers, which need to be removed to concatenate the
> individual chunks into a continuous picture. Then, most likely,
> zero-copy is not possible.

Exactly. One more reason why you can't map the ISOC transfer buffers directly is that
ISOC transfers does not garantuee a fixed number of video bytes per frame.

> But those that deliver the whole frame in a Bulk transfer without any
> interfering headers, it's trivially possible to avoid the copy. (Yes,
> I've done that. I needed it to be able to reach 60fps with a
> ovfx2/ov7620 camera. Not using V4L2 yet, though.)

Not all the USB controllers support bulk transfers. It's a second choice, when possible,
and, globally speaking, they are usually slower than the ISOC transfers.

Best regards
Luca Risolia


From mxhaard at magic.fr  Sat Jan 13 15:11:37 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Sat, 13 Jan 2007 15:11:37 +0100
Subject: [Linux-uvc-devel] Kopete support for uvc [was: Creating new
	/dev/video?]
In-Reply-To: <200701131125.35820.contact@alexandredenis.net>
References: <20061230100509.GA14498@delight>
	<200701120850.15127.mxhaard@magic.fr>
	<200701131125.35820.contact@alexandredenis.net>
Message-ID: <200701131511.37149.mxhaard@magic.fr>

Le Samedi 13 Janvier 2007 11:25, Alexandre DENIS a ?crit?:
> Le ven 12 janvier 2007 08:50, vous avez ?crit :
> > Alexandre,
> > I have set the CREDIT for the jpeg decoder in the readme of luvcview
> > maybe you can add these lines to videocodec.h
> > JPEG decoder from http://www.bootsplash.org/
> >  	(w) August 2001 by Michael Schroeder, <mls at suse.de>
>
> I will fix it in the upcoming new release (with
> brightness/contrast/saturation controls implemented).
>
> Btw, what does "(w)"  mean?
Don't really know, it comes from the old spca50x package, maybe write by 
Michael Schroeder in August 2001 :) In the past, this decoder was set in the 
Suse kernel by default. 
>
> -a.
Best regards
-- 
Michel Xhaard
http://mxhaard.free.fr


From vojtech at suse.cz  Sat Jan 13 16:05:41 2007
From: vojtech at suse.cz (Vojtech Pavlik)
Date: Sat, 13 Jan 2007 16:05:41 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <200701131307.34177.luca.risolia@studio.unibo.it>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701130006.32742.luca.risolia@studio.unibo.it>
	<20070113114348.GA16656@suse.cz>
	<200701131307.34177.luca.risolia@studio.unibo.it>
Message-ID: <20070113150541.GC17429@suse.cz>

On Sat, Jan 13, 2007 at 01:07:33PM +0100, Luca Risolia wrote:

> Alle 12:43, sabato 13 gennaio 2007, Vojtech Pavlik ha scritto:
> > > Yes, and port all the applications to it. Not a small effort. Still the
> > raw+library approach doesn't convince me entirely. ALSA has used it, and
> > still a lot of people prefer the legacy /dev/dsp interface.
> 
> Consider that many applications are still based on the old V4L1.
> In one way or the other they would have to be rewritten...

Consider how long V4L2 exists. The obvious answer is: They will not be
rewritten any soon. 


From ebi9 at ozob.net  Sat Jan 13 17:38:36 2007
From: ebi9 at ozob.net (Gene Imes)
Date: Sat, 13 Jan 2007 10:38:36 -0600
Subject: [Linux-uvc-devel] Automatic Gain Control
In-Reply-To: <200701102036.26685.mxhaard@magic.fr>
References: <a4fd5c620701080918l7ee8bc70w1673299b1e71fcb5@mail.gmail.com>	<45A5369B.4090706@ozob.net>
	<200701102024.47501.mxhaard@magic.fr>
	<200701102036.26685.mxhaard@magic.fr>
Message-ID: <45A90B0C.5070503@ozob.net>

Michel Xhaard wrote:
> Le Mercredi 10 Janvier 2007 20:24, Michel Xhaard a ?crit :
>> Le Mercredi 10 Janvier 2007 19:55, Gene Imes a ?crit :
>>> Michel Xhaard wrote:
>>>> Le Mardi 9 Janvier 2007 14:43, Gene Imes a ?crit :
>>>>>> I just upload a new revision of luvcview with pan/tilt fix, a lot of
>>>>>> improvements. Seem strange that we cannot change the exposure in
>>>>>> manuel mode ? Is there a way to set/reset the autowhite balance too ?
>>>>>> a lot of robotic project need these features
>>>>>> Cheers
>>>>> Michel, If I click the 'Take a Picture!' button or the 'AVI
>>>>> Start/Stop' buttons nothing seems to happen. Is there a trick to it?
>>>>> If so what?
>>>>>
>>>>> Or perhaps luvcview is writing to some directory I can not find.
>>>>>
>>>>>
>>>>> Thanks,
>>>> Maybe because Picture and Avi only works with the MJPEG palette. Did
>>>> you need Picture and AVI for all palettes ?
>>>> regards
>>> I do not have a clue about MJPEG palette. I have to start luvcview like
>>> this for it to work.
>>>
>>> luvcview -f yuv -s 640x480
>> Did you try
>> luvcview -f jpg -s 640x480
>> ?
>>
>>> would that have any effect?
>> yes yuv did not allow avi and picture ATM
>>
>>> By the way I am using a Bodelin ProScopeHR, which a cool hand held video
>>> micorscope.
>> for a Microscope i suspect you need rgb24 picture from the yuv palette
>> right ?
>>
>>> Thanks,
>> regards
> Just read the small spec from the ProScopeHR have you try
> luvcview -L to get all resolution available?
> seem 1280x1024 can be possible at 3.5 fp/s with a usb2.0 socket. Let me know 
> if you are interested by picture, avi and maybe more :)
> regards

I did not mean to imply that 640x480 is the only resolution that I can 
use. I can use all available but I can not save a picture or video.

gene at go:~# /opt/luvcview/luvcview -L
luvcview version 0.2.0
Video driver: x11
A window manager is available
video /dev/video0
/dev/video0 does not support read i/o
{ pixelformat = 'YUYV', description = 'Uncompressed' }
{ discrete: width = 1280, height = 1024 }
         Time interval between frame: 4/15,
{ discrete: width = 640, height = 480 }
         Time interval between frame: 1/15,
{ discrete: width = 320, height = 240 }
         Time interval between frame: 1/30,


Thanks,

-- 
Gene Imes ============================= ozob.net


From pauljurczak at yahoo.com  Sat Jan 13 18:28:29 2007
From: pauljurczak at yahoo.com (Paul Jurczak)
Date: Sat, 13 Jan 2007 09:28:29 -0800 (PST)
Subject: [Linux-uvc-devel] Raw Bayer format
Message-ID: <20070113172829.70269.qmail@web60524.mail.yahoo.com>

I found partial answer to my question: "Logitech UVC cameras support streaming of raw Bayer data through the use of UVC extension controls". Will this mechanism work with non-Logitech UVC cameras?
 
Paul. 

----- Original Message ----
From: Paul Jurczak <pauljurczak at yahoo.com>
To: linux-uvc-devel at lists.berlios.de
Sent: Friday, January 12, 2007 4:21:13 PM
Subject: [Linux-uvc-devel] Raw Bayer format

There was a few posts recently about receiving raw Bayer data from UVC camera. I looked at "USB Device Class Definition for Video Devices: Uncompressed Payload" document and it defines only 2 uncompressed formats: YUY2 and NV12. None of them is a raw Bayer and I don't think you can convert any of them to original Bayer values. Am I missing something?

Paul.



 
____________________________________________________________________________________
Do you Yahoo!?
Everyone is raving about the all-new Yahoo! Mail beta.
http://new.mail.yahoo.com
_______________________________________________
Linux-uvc-devel mailing list
Linux-uvc-devel at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/linux-uvc-devel





 
____________________________________________________________________________________
Looking for earth-friendly autos? 
Browse Top Cars by "Green Rating" at Yahoo! Autos' Green Center.
http://autos.yahoo.com/green_center/


From luca.risolia at studio.unibo.it  Sun Jan 14 14:34:04 2007
From: luca.risolia at studio.unibo.it (Luca Risolia)
Date: Sun, 14 Jan 2007 14:34:04 +0100
Subject: [Linux-uvc-devel] Asus W7J laptop built-in webcam
In-Reply-To: <20070113150541.GC17429@suse.cz>
References: <761cc8520701110740o2aef36c7lc17ab134a15e234d@mail.gmail.com>
	<200701131307.34177.luca.risolia@studio.unibo.it>
	<20070113150541.GC17429@suse.cz>
Message-ID: <200701141434.05634.luca.risolia@studio.unibo.it>

Alle 16:05, sabato 13 gennaio 2007, Vojtech Pavlik ha scritto:
> On Sat, Jan 13, 2007 at 01:07:33PM 
> > Consider that many applications are still based on the old V4L1.
> > In one way or the other they would have to be rewritten...
> 
> Consider how long V4L2 exists. The obvious answer is: They will not be
> rewritten any soon. 

Your point is questionable. even If the process of passing from V4L1 to V4L2
requires time, I do not think it's a good reason to implement decoders in the kernel.
IMHO, a solution to reduce this time is to _force_ the users/developers to adopt V4L2 only.
A simple example is to remove the V4L1 compat layer from the actual V4L2 drivers
at least.
I am sure that the fact that the UVC driver is based on the V4L2 API only will bear fruit with
regard to the V4L2 support in userspace, So let people complain
about "my v4l2 driver does not work with my app" in the first place.
Personally, for this reason, I also always refused to provide
support for V4L1 in my V4L2 drivers through the compat layer.

> > Exactly. One more reason why you can't map the ISOC transfer buffers
> > directly is that ISOC transfers does not garantuee a fixed number of
> > video bytes per frame.
> 
> I don't think that'd be a problem per se, we could still make the USB
> subsystem to put all the frame data into a virtually contiguous buffer,
> regardles of how long the individual transfers are.

I was talking about the lenghts of single USB  _frames_ after
ISOC transfers terminate, as described by the
"myurb->iso_frame_desc[i].actual_length" field.
You can't know these values until the submitted URB actually returns and
the IRQ handler is called by the USB subsystem. So, apart from the headers
in each frame, I still do not see how it's possible to map the data in the frames
to a contiguous buffer.

Luca



From gerald.edward.butler at gmail.com  Mon Jan 15 16:22:13 2007
From: gerald.edward.butler at gmail.com (Gerald Butler)
Date: Mon, 15 Jan 2007 10:22:13 -0500
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 5000, linux-uvc,
	and "Camorama"
Message-ID: <fb453cb30701150722wa27256fucd304066c47d7de7@mail.gmail.com>

Hello All:

I just downloaded, compiled, and installed the linux-uvc driver under Ubuntu
6.10. I found that it works very well with my Logitech QuickCam Pro
5000when used via the V4L2 API (
e.g. Ekiga); however, when an application that uses the V4L1 API (e.g.
Camoram) attempts to use it, it does not work.

My understanding is that there is a compatibility API layer (V4L1-compat.ko)
that is part of the V4L2 API, so, in theory at least, the V4L1 API should
work. This does not seem to be the case.

My questions are as follows:

    1. What would it take to make the linux-uvc driver support the V4L1
Compatibilty layer? (I am willing to work on this if it does not require an
extreme knowledge of the V4L API's etc [as I have none]).

    2. I've been unable to contact the Camorama developers, but, I'd like to
get an idea of what it would take to make Camorama support V4L2. Anyone here
have any idea what is involved with such an endeavor? Any tutorials and/or
HOW-TO's on porting an application from V4L1 to V4L2?

    3. Does anyone know of alternatives to Camorama that support
linux-uvcthat have functionality similar to
Camorama?

Thanks in Advance,

    Gerry B.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070115/6aac9897/attachment.html>

From contact at alexandredenis.net  Mon Jan 15 18:10:00 2007
From: contact at alexandredenis.net (Alexandre DENIS)
Date: Mon, 15 Jan 2007 18:10:00 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 5000, linux-uvc,
	and "Camorama"
In-Reply-To: <fb453cb30701150722wa27256fucd304066c47d7de7@mail.gmail.com>
References: <fb453cb30701150722wa27256fucd304066c47d7de7@mail.gmail.com>
Message-ID: <200701151810.00114.contact@alexandredenis.net>


Hello,

On Monday 15 January 2007 16:22, Gerald Butler wrote:
> Hello All:
>
> I just downloaded, compiled, and installed the linux-uvc driver under
> Ubuntu 6.10. I found that it works very well with my Logitech
> QuickCam Pro 5000when used via the V4L2 API (
> e.g. Ekiga); however, when an application that uses the V4L1 API
> (e.g. Camoram) attempts to use it, it does not work.
>
> My understanding is that there is a compatibility API layer
> (V4L1-compat.ko) that is part of the V4L2 API, so, in theory at
> least, the V4L1 API should work. This does not seem to be the case.

I am not aware of any V4L1 application actually working with uvc. Maybe 
I'm wrong but it looks like mmap'ed I/O are broken in v4l1_compat.

> My questions are as follows:
>
>     1. What would it take to make the linux-uvc driver support the
> V4L1 Compatibilty layer? (I am willing to work on this if it does not
> require an extreme knowledge of the V4L API's etc [as I have none]).

It requires V4L1 and V4L2 knowledege, and kernel programming.

>     2. I've been unable to contact the Camorama developers, but, I'd
> like to get an idea of what it would take to make Camorama support
> V4L2. Anyone here have any idea what is involved with such an
> endeavor? Any tutorials and/or HOW-TO's on porting an application
> from V4L1 to V4L2?

I just had a look on the sources of camorama. It looks quite simple. 
Someone who already knows V4L2 should be able to do the work in a 
matter of hours.

>     3. Does anyone know of alternatives to Camorama that support
> linux-uvcthat have functionality similar to
> Camorama?

Depending on what feature of camorama you are interested in, v4l2view or 
luvcview might be enough.

-a.


From pmarques at grupopie.com  Mon Jan 15 20:41:08 2007
From: pmarques at grupopie.com (Paulo Marques)
Date: Mon, 15 Jan 2007 19:41:08 +0000
Subject: [Linux-uvc-devel] Camera working on ARM
Message-ID: <45ABD8D4.4010902@grupopie.com>


Hi, all

Since you mostly receive bug reports or feature requests, I just thought 
you would like to ear a success story :)

I've just tested the driver on an ARM board with a Quickcam Ultra Vision 
and it worked just fine (at least as far as I've tested).

Many thanks to everyone who helped developing this driver,

-- 
Paulo Marques
Software Development Department - Grupo PIE, S.A.
Phone: +351 252 290600, Fax: +351 252 290601
Web: www.grupopie.com

"The face of a child can say it all, especially the
mouth part of the face."


From adrian.skehill at gmail.com  Tue Jan 16 14:10:32 2007
From: adrian.skehill at gmail.com (Adrian Skehill)
Date: Tue, 16 Jan 2007 13:10:32 +0000
Subject: [Linux-uvc-devel] No valid video chain found.
In-Reply-To: <200701112218.44914.laurent.pinchart@skynet.be>
References: <56527a580701080603h83534canbe6c9603678f59dc@mail.gmail.com>
	<56527a580701101249q32db1cb2rf5c4c0b27fcb1acf@mail.gmail.com>
	<200701102256.08087.laurent.pinchart@skynet.be>
	<200701112218.44914.laurent.pinchart@skynet.be>
Message-ID: <56527a580701160510i84ec665y9cd3cace1facd2e2@mail.gmail.com>

Hi Laurent,

Just got to try your patch now. Still no joy though. I've attached the
relevant pieces from the syslog.

A.



On 1/11/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> Hi Adrian,
>
> here's a patch that might fix the problem. It includes the previous patch.
> Let
> me know if it helps.
>
> Cheers,
>
> Laurent Pinchart
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070116/1788b83b/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: webcam.txt.gz
Type: application/x-gzip
Size: 1424 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070116/1788b83b/attachment.bin>

From ebi9 at ozob.net  Tue Jan 16 17:47:22 2007
From: ebi9 at ozob.net (Gene Imes)
Date: Tue, 16 Jan 2007 10:47:22 -0600
Subject: [Linux-uvc-devel] luvcview
Message-ID: <45AD019A.8010005@ozob.net>

Michel, I can not capture a picture or video with luvcview.

> root at go:/etc/portage# /opt/luvcview/luvcview -L
> luvcview version 0.2.0 
> Video driver: x11
> A window manager is available
> video /dev/video0 
> /dev/video0 does not support read i/o
> { pixelformat = 'YUYV', description = 'Uncompressed' }
> { discrete: width = 1280, height = 1024 }
>         Time interval between frame: 4/15, 
> { discrete: width = 640, height = 480 }
>         Time interval between frame: 1/15, 
> { discrete: width = 320, height = 240 }
>         Time interval between frame: 1/30, 
> gene has logged off pts/2 from :0.0.
> gene has logged off pts/3 from :0.0.

I start with this:

luvcview -f yuv -s XxX

Any ideas?

Thanks,

-- 
Gene Imes ============================= ozob.net


From Serge.A.S at tochka.ru  Tue Jan 16 17:50:42 2007
From: Serge.A.S at tochka.ru (Serge A. Suchkov)
Date: Tue, 16 Jan 2007 19:50:42 +0300
Subject: [Linux-uvc-devel] luvcview
In-Reply-To: <45AD019A.8010005@ozob.net>
References: <45AD019A.8010005@ozob.net>
Message-ID: <200701161950.42806.Serge.A.S@tochka.ru>

>  I can not capture a picture or video with luvcview.
[snip]
> I start with this:
> 
> luvcview -f yuv -s XxX
AFAIK this features not implemented for YUYV format
> Any ideas?
> 
> Thanks,
> 

-- 
Regards,
Serge A. Suchkov
--
There are three kinds of lies: Lies, Damn Lies, and Statistics.
		-- Disraeli


From mxhaard at magic.fr  Tue Jan 16 18:04:09 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Tue, 16 Jan 2007 18:04:09 +0100
Subject: [Linux-uvc-devel] luvcview
In-Reply-To: <45AD019A.8010005@ozob.net>
References: <45AD019A.8010005@ozob.net>
Message-ID: <200701161804.09906.mxhaard@magic.fr>

Le Mardi 16 Janvier 2007 17:47, Gene Imes a ?crit?:
> Michel, I can not capture a picture or video with luvcview.
>
> > root at go:/etc/portage# /opt/luvcview/luvcview -L
> > luvcview version 0.2.0
> > Video driver: x11
> > A window manager is available
> > video /dev/video0
> > /dev/video0 does not support read i/o
> > { pixelformat = 'YUYV', description = 'Uncompressed' }
> > { discrete: width = 1280, height = 1024 }
> >         Time interval between frame: 4/15,
> > { discrete: width = 640, height = 480 }
> >         Time interval between frame: 1/15,
> > { discrete: width = 320, height = 240 }
> >         Time interval between frame: 1/30,
> > gene has logged off pts/2 from :0.0.
> > gene has logged off pts/3 from :0.0.
>
> I start with this:
>
> luvcview -f yuv -s XxX
>
> Any ideas?
>
> Thanks,
Geme,
It is not allowed for YUYV palette, but i have ask you, if you need it :)
ok i will set picture in the next revision. avi is more complex as that need a 
video compressor did you need it ?
regards
-- 
Michel Xhaard
http://mxhaard.free.fr


From mxhaard at magic.fr  Tue Jan 16 18:05:07 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Tue, 16 Jan 2007 18:05:07 +0100
Subject: [Linux-uvc-devel] luvcview
In-Reply-To: <200701161950.42806.Serge.A.S@tochka.ru>
References: <45AD019A.8010005@ozob.net>
	<200701161950.42806.Serge.A.S@tochka.ru>
Message-ID: <200701161805.07202.mxhaard@magic.fr>

Le Mardi 16 Janvier 2007 17:50, Serge A. Suchkov a ?crit?:
> >  I can not capture a picture or video with luvcview.
>
> [snip]
>
> > I start with this:
> >
> > luvcview -f yuv -s XxX
>
> AFAIK this features not implemented for YUYV format
>
> > Any ideas?
> >
> > Thanks,
Serge,
Look like i have to read all messages before answer :)
best regards
-- 
Michel Xhaard
http://mxhaard.free.fr


From laurent.pinchart at skynet.be  Tue Jan 16 20:57:32 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 16 Jan 2007 20:57:32 +0100
Subject: [Linux-uvc-devel] Camera working on ARM
In-Reply-To: <45ABD8D4.4010902@grupopie.com>
References: <45ABD8D4.4010902@grupopie.com>
Message-ID: <200701162057.33000.laurent.pinchart@skynet.be>

Hi Paulo,

> Since you mostly receive bug reports or feature requests, I just thought
> you would like to ear a success story :)
>
> I've just tested the driver on an ARM board with a Quickcam Ultra Vision
> and it worked just fine (at least as far as I've tested).

Thank you ! I'm always happy to hear that the hours I spent coding the driver 
haven't been waisted :-)

> Many thanks to everyone who helped developing this driver,

You're welcome. Thank you for the report.

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Jan 16 21:05:47 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 16 Jan 2007 21:05:47 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 5000, linux-uvc,
	and "Camorama"
In-Reply-To: <200701151810.00114.contact@alexandredenis.net>
References: <fb453cb30701150722wa27256fucd304066c47d7de7@mail.gmail.com>
	<200701151810.00114.contact@alexandredenis.net>
Message-ID: <200701162105.47355.laurent.pinchart@skynet.be>

Hi Gerald,

> > I just downloaded, compiled, and installed the linux-uvc driver under
> > Ubuntu 6.10. I found that it works very well with my Logitech
> > QuickCam Pro 5000when used via the V4L2 API (
> > e.g. Ekiga); however, when an application that uses the V4L1 API
> > (e.g. Camoram) attempts to use it, it does not work.
> >
> > My understanding is that there is a compatibility API layer
> > (V4L1-compat.ko) that is part of the V4L2 API, so, in theory at
> > least, the V4L1 API should work. This does not seem to be the case.
>
> I am not aware of any V4L1 application actually working with uvc. Maybe
> I'm wrong but it looks like mmap'ed I/O are broken in v4l1_compat.

I've never really tried to get v4l1 applications working. v4l1 is deprecated, 
and even though there is a compatibility layer, I don't intend to support it. 
Applications should be ported to v4l2.

> > My questions are as follows:
> >
> >     1. What would it take to make the linux-uvc driver support the
> > V4L1 Compatibilty layer? (I am willing to work on this if it does not
> > require an extreme knowledge of the V4L API's etc [as I have none]).
>
> It requires V4L1 and V4L2 knowledege, and kernel programming.

It might not be too difficult if you have kernel programming and v4l 
programming background. I will happily accept patches that fix bugs in the 
Linux UVC driver, but I might not accept patches which sole purpose is to add 
v4l1 compatibility (especially if they introduce additional issues).

> >     2. I've been unable to contact the Camorama developers, but, I'd
> > like to get an idea of what it would take to make Camorama support
> > V4L2. Anyone here have any idea what is involved with such an
> > endeavor? Any tutorials and/or HOW-TO's on porting an application
> > from V4L1 to V4L2?
>
> I just had a look on the sources of camorama. It looks quite simple.
> Someone who already knows V4L2 should be able to do the work in a
> matter of hours.

And if you have any trouble, feel free to ask for support :-)

> >     3. Does anyone know of alternatives to Camorama that support
> > linux-uvcthat have functionality similar to
> > Camorama?
>
> Depending on what feature of camorama you are interested in, v4l2view or
> luvcview might be enough.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Jan 16 21:09:14 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 16 Jan 2007 21:09:14 +0100
Subject: [Linux-uvc-devel] No valid video chain found.
In-Reply-To: <56527a580701160510i84ec665y9cd3cace1facd2e2@mail.gmail.com>
References: <56527a580701080603h83534canbe6c9603678f59dc@mail.gmail.com>
	<200701112218.44914.laurent.pinchart@skynet.be>
	<56527a580701160510i84ec665y9cd3cace1facd2e2@mail.gmail.com>
Message-ID: <200701162109.14867.laurent.pinchart@skynet.be>

Hi Adrian,

> Just got to try your patch now. Still no joy though. I've attached the
> relevant pieces from the syslog.

I should get a Creative Live! Optia soon from Creative Labs (many thanks to 
their developer relationship team). I'll be able to debug the problem here. 
You can expect a patch soon.

Best regards,

Laurent Pinchart


From phil at sanslogic.co.uk  Tue Jan 16 23:32:38 2007
From: phil at sanslogic.co.uk (Philip Heron)
Date: Tue, 16 Jan 2007 22:32:38 +0000
Subject: [Linux-uvc-devel] Camera working on ARM
In-Reply-To: <45ABD8D4.4010902@grupopie.com>
References: <45ABD8D4.4010902@grupopie.com>
Message-ID: <1168986758.3360.5.camel@mini.firestorm.cx>

On Mon, 2007-01-15 at 19:41 +0000, Paulo Marques wrote:
> I've just tested the driver on an ARM board with a Quickcam Ultra Vision 
> and it worked just fine (at least as far as I've tested).

Incidental I received a PPC G4 Mac mini today. I've got Fedora Core 6
installed and uvcvideo seems to work as well with my Orbit as it does on
x86_64.

I say 'as well' because there are a few errors (attached) - it takes a
couple of goes to capture an image. Is it possible this is the firmware
bug that affects certain systems?

> Many thanks to everyone who helped developing this driver,

Hear hear!

-Phil

-------------- next part --------------
[phil at mini ~]$ fswebcam -p yuyv -r 1280x960 --skip 20 output.jpeg
--- Opening /dev/video0...
Trying source module v4l2...
/dev/video0 opened.
No input was specified, using the first.
Error setting pixel format.
VIDIOC_S_FMT: Input/output error
[phil at mini ~]$ fswebcam -p yuyv -r 1280x960 --skip 20 output.jpeg
--- Opening /dev/video0...
Trying source module v4l2...
/dev/video0 opened.
No input was specified, using the first.
Unable to find a compatible palette format.
[phil at mini ~]$ fswebcam -p yuyv -r 1280x960 --skip 20 output.jpeg
--- Opening /dev/video0...
Trying source module v4l2...
/dev/video0 opened.
No input was specified, using the first.
Error setting pixel format.
VIDIOC_S_FMT: Input/output error
[phil at mini ~]$ fswebcam -p yuyv -r 1280x960 --skip 20 output.jpeg
--- Opening /dev/video0...
Trying source module v4l2...
/dev/video0 opened.
No input was specified, using the first.
--- Capturing frame...
Skipping 20 frames...
Capturing 1 frames...
Captured 21 frames in 6.70 seconds. (3 fps)
--- Processing captured image...
Could not find/open font
Could not find/open font
Writing JPEG image to 'output.jpeg'.

From laurent.pinchart at skynet.be  Wed Jan 17 11:29:51 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 17 Jan 2007 11:29:51 +0100
Subject: [Linux-uvc-devel] No valid video chain found.
In-Reply-To: <56527a580701160510i84ec665y9cd3cace1facd2e2@mail.gmail.com>
References: <56527a580701080603h83534canbe6c9603678f59dc@mail.gmail.com>
	<200701112218.44914.laurent.pinchart@skynet.be>
	<56527a580701160510i84ec665y9cd3cace1facd2e2@mail.gmail.com>
Message-ID: <200701171129.51192.laurent.pinchart@skynet.be>

Hi Adrian,

> Just got to try your patch now. Still no joy though. I've attached the
> relevant pieces from the syslog.

Checkout the latest SVN version and tell me if it works better.

Cheers,

Laurent Pinchart


From s0238762 at sms.ed.ac.uk  Wed Jan 17 13:47:25 2007
From: s0238762 at sms.ed.ac.uk (Ioannis Nousias)
Date: Wed, 17 Jan 2007 12:47:25 +0000
Subject: [Linux-uvc-devel] fuji finepix support?
Message-ID: <45AE1ADD.30909@sms.ed.ac.uk>

An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070117/a6118bb3/attachment.html>

From laurent.pinchart at skynet.be  Wed Jan 17 14:50:53 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 17 Jan 2007 14:50:53 +0100
Subject: [Linux-uvc-devel] fuji finepix support?
In-Reply-To: <45AE1ADD.30909@sms.ed.ac.uk>
References: <45AE1ADD.30909@sms.ed.ac.uk>
Message-ID: <200701171450.54268.laurent.pinchart@skynet.be>

Hi Ioannis,

>  I have a fuji finepix e550 which is "recognised" by the uvc driver. When I
> plug in the camera I see this messages in dmesg:
>
>  usb 2-1: new full speed USB device using uhci_hcd and address 5
>  usb 2-1: configuration #1 chosen from 1 choice
>  uvcvideo: Found UVC 1.00 device USB Web Camera (04cb:0172)
>
>  and a device node is created:
>  /dev/video0
>
>  (and a symlink /dev/video to it)
>
>  unfortunately it does work. It fails with the following error message:
[snip]

This is definitely a bug in the UVC driver. It should not crash.

Could you please set the trace parameter to 127 ?

echo 127 > /sys/modules/uvcvideo/parameters/trace

Then try to plug your camera and let the kernel crash :-) I'll need the dmesg 
output (you can leave out the syslog output) with all the uvcvideo messages 
and the crash dump.

Cheers,

Laurent Pinchart


From Serge.A.S at tochka.ru  Wed Jan 17 15:01:48 2007
From: Serge.A.S at tochka.ru (Serge A. Suchkov)
Date: Wed, 17 Jan 2007 17:01:48 +0300
Subject: [Linux-uvc-devel] fuji finepix support?
In-Reply-To: <45AE1ADD.30909@sms.ed.ac.uk>
References: <45AE1ADD.30909@sms.ed.ac.uk>
Message-ID: <200701171701.48778.Serge.A.S@tochka.ru>

>  Hi 
>  
>  I have a fuji finepix e550 which is "recognised" by the uvc driver. When I plug in the camera I see this messages in dmesg: 
>  
>  usb 2-1: new full speed USB device using uhci_hcd and address 5 
>  usb 2-1: configuration #1 chosen from 1 choice 
>  uvcvideo: Found UVC 1.00 device USB Web Camera (04cb:0172) 
>  
>  and a device node is created: 
>  /dev/video0 
>  
>  (and a symlink /dev/video to it) 
>  Message from syslogd at dellD800 at Wed Jan 17 01:20:25 2007 ... 
>  dellD800 kernel:? [<f8e74d13>] v4l_compat_translate_ioctl+0xb7b/0x1b48 [v4l1_compat] 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
You are used V4L1 app ?

>  Process camE (pid: 3997, ti=d0623000 task=f7ccd9f0 task.ti=d0623000) 
^^^^^^^^^^^^^^^^^^^^^^^^
Seems true

AFAIK v4l_compat layer was broken.

Try use v4l2 app in this case e.g. luvcview or other.
>  
>  -Ioannis  

-- 
Regards,
Serge A. Suchkov
--
Commitment, n.:
	Commitment can be illustrated by a breakfast of ham and eggs.
The chicken was involved, the pig was committed.


From s0238762 at sms.ed.ac.uk  Wed Jan 17 15:05:42 2007
From: s0238762 at sms.ed.ac.uk (Ioannis Nousias)
Date: Wed, 17 Jan 2007 14:05:42 +0000
Subject: [Linux-uvc-devel] fuji finepix support?
In-Reply-To: <200701171450.54268.laurent.pinchart@skynet.be>
References: <45AE1ADD.30909@sms.ed.ac.uk>
	<200701171450.54268.laurent.pinchart@skynet.be>
Message-ID: <45AE2D36.2050300@sms.ed.ac.uk>

Laurent Pinchart wrote:
> Hi Ioannis,
>
>   
>>  I have a fuji finepix e550 which is "recognised" by the uvc driver. When I
>> plug in the camera I see this messages in dmesg:
>>
>>  usb 2-1: new full speed USB device using uhci_hcd and address 5
>>  usb 2-1: configuration #1 chosen from 1 choice
>>  uvcvideo: Found UVC 1.00 device USB Web Camera (04cb:0172)
>>
>>  and a device node is created:
>>  /dev/video0
>>
>>  (and a symlink /dev/video to it)
>>
>>  unfortunately it does work. It fails with the following error message:
>>     
> [snip]
>
> This is definitely a bug in the UVC driver. It should not crash.
>
> Could you please set the trace parameter to 127 ?
>
> echo 127 > /sys/modules/uvcvideo/parameters/trace
>
> Then try to plug your camera and let the kernel crash :-) I'll need the dmesg 
> output (you can leave out the syslog output) with all the uvcvideo messages 
> and the crash dump.
>
> Cheers,
>
> Laurent Pinchart
>   
gladly :)

here you go:

uvcvideo: Probing generic UVC device 1
uvcvideo: Found format MJPEG.
uvcvideo: - 352x288 (10.0 fps)
uvcvideo: Found UVC 1.00 device USB Web Camera (04cb:0172)
uvcvideo: Scanning UVC chain: OT 3 <- Unit 2 <- IT 1
uvcvideo: Found a valid video chain (1 -> 3).
uvcvideo: UVC device initialized.
uvcvideo: uvc_v4l2_open
uvcvideo: uvc_v4l2_ioctl
v4l1 ioctl VIDIOCGCAP, dir=r- (0x803c7601)
v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
v4l2 ioctl VIDIOC_ENUM_FMT, dir=rw (0xc0405602)
v4l2 ioctl VIDIOC_TRY_FMT, dir=rw (0xc0cc5640)
uvcvideo: Trying format 0x47504a4d (MJPG): 10000x10000.
uvcvideo: Using default frame interval 100000.0 us (10.0 fps).
uvcvideo: uvc_v4l2_ioctl
v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
uvcvideo: Control 0x00980900 not found.
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
uvcvideo: Control 0x00980903 not found.
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
uvcvideo: Control 0x00980901 not found.
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
uvcvideo: Control 0x00980902 not found.
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
uvcvideo: Control 0x00980910 not found.
v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
BUG: unable to handle kernel paging request at virtual address ffffffe2
 printing eip:
f8f13af7
*pde = 00004067
Oops: 0000 [#1]
SMP
last sysfs file: /devices/system/cpu/cpu0/cpufreq/scaling_cur_freq
Modules linked in: uvcvideo(U) videodev v4l1_compat v4l2_common autofs4 
hidp rfcomm l2cap vmnet(U) vmmon(U) sunrpc i8k ip_conntrack_netbios_ns 
ipt_REJECT iptable_filter ip_tables xt_state ip_conntrack nfnetlink 
xt_tcpudp ip6table_filter ip6_tables x_tables cpufreq_ondemand video sbs 
i2c_ec dock button battery asus_acpi ac ipv6 parport_pc lp parport 
snd_intel8x0m snd_intel8x0 snd_ac97_codec snd_ac97_bus snd_seq_dummy 
snd_seq_oss snd_seq_midi_event snd_seq nvidia(U) snd_seq_device 
snd_pcm_oss ide_cd snd_mixer_oss snd_pcm hci_usb joydev snd_timer 
ohci1394 tg3 cdrom ieee1394 pcspkr i2c_core snd ndiswrapper(U) bluetooth 
soundcore serio_raw snd_page_alloc dm_snapshot dm_zero dm_mirror dm_mod 
ext3 jbd ehci_hcd ohci_hcd uhci_hcd
CPU:    0
EIP:    0060:[<f8f13af7>]    Tainted: P      VLI
EFLAGS: 00210282   (2.6.18-1.2869.fc6 #1)
EIP is at uvc_v4l2_do_ioctl+0x5c0/0xadf [uvcvideo]
eax: 00000000   ebx: d0e1fec0   ecx: e220520c   edx: ffffffe0
esi: c0cc5604   edi: 00000008   ebp: d82c2030   esp: c8799848
ds: 007b   es: 007b   ss: 0068
Process camE (pid: 9269, ti=c8799000 task=cc662030 task.ti=c8799000)
Stack: 00000000 00000000 c0612dda 00000000 c64d0a40 000006cd d3db7e00 
d400dd1c
       f723d730 f723d730 c65c4c80 000006cd 000f4240 00000000 cc662140 
c180a4e0
       000f4240 00000000 00000000 00000032 00008000 00008000 000b71b0 
000000d0
Call Trace:
 [<f8e74d13>] v4l_compat_translate_ioctl+0xb7b/0x1b48 [v4l1_compat]
 [<f8f13f88>] uvc_v4l2_do_ioctl+0xa51/0xadf [uvcvideo]
 [<f8e7cbc8>] video_usercopy+0x172/0x237 [videodev]
 [<f8f1311f>] uvc_v4l2_ioctl+0x3b/0x41 [uvcvideo]
 [<c047f204>] do_ioctl+0x4c/0x62
 [<c047f464>] vfs_ioctl+0x24a/0x25c
 [<c047f4c2>] sys_ioctl+0x4c/0x66
 [<c0404013>] syscall_call+0x7/0xb
DWARF2 unwinder stuck at syscall_call+0x7/0xb
Leftover inexact backtrace:
 =======================
Code: 00 83 3b 01 8b 48 4c 8b 50 50 0f 85 d0 04 00 00 85 c9 0f 84 c8 04 
00 00 85 d2 0f 84 c0 04 00 00 8b 41 04 bf 08 00 00 00 89 43 0c <0f> b7 
42 02 89 43 04 0f b7 42 04 c7 43 10 01 00 00 00 89 43 08
EIP: [<f8f13af7>] uvc_v4l2_do_ioctl+0x5c0/0xadf [uvcvideo] SS:ESP 
0068:c8799848
 <3>BUG: sleeping function called from invalid context at kernel/rwsem.c:20
in_atomic():0, irqs_disabled():1
 [<c04051db>] dump_trace+0x69/0x1af
 [<c0405339>] show_trace_log_lvl+0x18/0x2c
 [<c04058ed>] show_trace+0xf/0x11
 [<c04059ea>] dump_stack+0x15/0x17
 [<c0439482>] down_read+0x12/0x20
 [<c04315e1>] blocking_notifier_call_chain+0xe/0x29
 [<c0427638>] do_exit+0x1b/0x776
 [<c040588e>] die+0x29d/0x2c2
 [<c0615835>] do_page_fault+0x408/0x4db
 [<c0404b85>] error_code+0x39/0x40
DWARF2 unwinder stuck at error_code+0x39/0x40
Leftover inexact backtrace:
 [<f8e6007b>] rfcomm_run+0x414/0x10d2 [rfcomm]
 [<f8f13af7>] uvc_v4l2_do_ioctl+0x5c0/0xadf [uvcvideo]
 [<c0612dda>] schedule+0x9b6/0x9dd
 [<f8f13537>] uvc_v4l2_do_ioctl+0x0/0xadf [uvcvideo]
 [<c0420768>] __cond_resched+0x25/0x3c
 [<c0612e2b>] cond_resched+0x2a/0x31
 [<f8f13537>] uvc_v4l2_do_ioctl+0x0/0xadf [uvcvideo]
 [<f8e74d13>] v4l_compat_translate_ioctl+0xb7b/0x1b48 [v4l1_compat]
 [<c0614640>] _spin_lock_irqsave+0x9/0xd
 [<c042e24e>] lock_timer_base+0x15/0x2f
 [<c042e364>] __mod_timer+0x9e/0xa8
 [<c04562af>] mempool_alloc+0x37/0xd8
 [<c04e2d6a>] cfq_set_request+0x221/0x345
 [<c04e21d3>] cfq_add_crq_rb+0xba/0xc3
 [<c061461d>] _read_unlock_irq+0x5/0x7
 [<c0471073>] __find_get_block_slow+0x11f/0x129
 [<c047139d>] __find_get_block+0x15c/0x166
 [<c04713e2>] __getblk+0x3b/0x2a3
 [<f8850000>] __journal_remove_journal_head+0xce/0x192 [jbd]
 [<f8887e34>] ext3_get_blocks_handle+0xc0/0x93d [ext3]
 [<c0472b82>] __bread+0x10/0xa9
 [<f8887c31>] ext3_get_branch+0x79/0xcb [ext3]
 [<c061461d>] _read_unlock_irq+0x5/0x7
 [<c0471073>] __find_get_block_slow+0x11f/0x129
 [<f8887e34>] ext3_get_blocks_handle+0xc0/0x93d [ext3]
 [<c047139d>] __find_get_block+0x15c/0x166
 [<f8891606>] ext3fs_dirhash+0xf9/0x1c7 [ext3]
 [<f888bbbf>] dx_probe+0x95/0x2d8 [ext3]
 [<c04068d1>] do_IRQ+0xb0/0xbc
 [<c04e7ffd>] vsnprintf+0x459/0x495
 [<c053e819>] vt_console_print+0x0/0x224
 [<c042516a>] release_console_sem+0x183/0x1c2
 [<c0436aa9>] autoremove_wake_function+0x15/0x35
 [<c041d78c>] __wake_up_common+0x2f/0x53
 [<c041e760>] enqueue_task+0x29/0x39
 [<c04257f5>] printk+0x1f/0x95
 [<f8e6cae2>] v4l_printk_ioctl+0xa5/0xf4 [v4l2_common]
 [<f8f13f88>] uvc_v4l2_do_ioctl+0xa51/0xadf [uvcvideo]
 [<f8f13537>] uvc_v4l2_do_ioctl+0x0/0xadf [uvcvideo]
 [<c06146f2>] __reacquire_kernel_lock+0x35/0x46
 [<c0436aa9>] autoremove_wake_function+0x15/0x35
 [<c041d78c>] __wake_up_common+0x2f/0x53
 [<c041e580>] __wake_up+0x2a/0x3d
 [<f8e7cbc8>] video_usercopy+0x172/0x237 [videodev]
 [<c04c16f7>] inode_has_perm+0x5b/0x63
 [<c045f0d0>] __handle_mm_fault+0x7e7/0x860
 [<c04257f5>] printk+0x1f/0x95
 [<f8f1311f>] uvc_v4l2_ioctl+0x3b/0x41 [uvcvideo]
 [<f8f13537>] uvc_v4l2_do_ioctl+0x0/0xadf [uvcvideo]
 [<c047f204>] do_ioctl+0x4c/0x62
 [<c047f464>] vfs_ioctl+0x24a/0x25c
 [<c047f4c2>] sys_ioctl+0x4c/0x66
 [<c0404013>] syscall_call+0x7/0xb
 =======================
uvcvideo: uvc_v4l2_release





From s0238762 at sms.ed.ac.uk  Wed Jan 17 15:12:42 2007
From: s0238762 at sms.ed.ac.uk (Ioannis Nousias)
Date: Wed, 17 Jan 2007 14:12:42 +0000
Subject: [Linux-uvc-devel] fuji finepix support?
In-Reply-To: <200701171701.48778.Serge.A.S@tochka.ru>
References: <45AE1ADD.30909@sms.ed.ac.uk>
	<200701171701.48778.Serge.A.S@tochka.ru>
Message-ID: <45AE2EDA.5000708@sms.ed.ac.uk>

Serge A. Suchkov wrote:
>>  Hi 
>>  
>>  I have a fuji finepix e550 which is "recognised" by the uvc driver. When I plug in the camera I see this messages in dmesg: 
>>  
>>  usb 2-1: new full speed USB device using uhci_hcd and address 5 
>>  usb 2-1: configuration #1 chosen from 1 choice 
>>  uvcvideo: Found UVC 1.00 device USB Web Camera (04cb:0172) 
>>  
>>  and a device node is created: 
>>  /dev/video0 
>>  
>>  (and a symlink /dev/video to it) 
>>  Message from syslogd at dellD800 at Wed Jan 17 01:20:25 2007 ... 
>>  dellD800 kernel:  [<f8e74d13>] v4l_compat_translate_ioctl+0xb7b/0x1b48 [v4l1_compat] 
>>     
> ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> You are used V4L1 app ?
>
>   
>>  Process camE (pid: 3997, ti=d0623000 task=f7ccd9f0 task.ti=d0623000) 
>>     
> ^^^^^^^^^^^^^^^^^^^^^^^^
> Seems true
>
> AFAIK v4l_compat layer was broken.
>
> Try use v4l2 app in this case e.g. luvcview or other.
>   
>>  
>>  -Ioannis  
>>     
>
>   
ok. In the previous one I was using "camE". This is with ekiga in v4l2 
setting:


uvcvideo: Probing generic UVC device 1
uvcvideo: Found format MJPEG.
uvcvideo: - 352x288 (10.0 fps)
uvcvideo: Found UVC 1.00 device USB Web Camera (04cb:0172)
uvcvideo: Scanning UVC chain: OT 3 <- Unit 2 <- IT 1
uvcvideo: Found a valid video chain (1 -> 3).
uvcvideo: UVC device initialized.
uvcvideo: uvc_v4l2_open
uvcvideo: uvc_v4l2_release
uvcvideo: uvc_v4l2_open
uvcvideo: uvc_v4l2_ioctl
v4l1 ioctl VIDIOCGCAP, dir=r- (0x803c7601)
v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
v4l2 ioctl VIDIOC_ENUM_FMT, dir=rw (0xc0405602)
v4l2 ioctl VIDIOC_TRY_FMT, dir=rw (0xc0cc5640)
uvcvideo: Trying format 0x47504a4d (MJPG): 10000x10000.
uvcvideo: Using default frame interval 100000.0 us (10.0 fps).
uvcvideo: uvc_v4l2_release
uvcvideo: uvc_v4l2_open
uvcvideo: uvc_v4l2_ioctl
v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
uvcvideo: uvc_v4l2_release
uvcvideo: uvc_v4l2_open
uvcvideo: uvc_v4l2_ioctl
v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
uvcvideo: uvc_v4l2_release
uvcvideo: uvc_v4l2_open
uvcvideo: uvc_v4l2_ioctl
v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
uvcvideo: uvc_v4l2_release
uvcvideo: uvc_v4l2_open
uvcvideo: uvc_v4l2_ioctl
v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
uvcvideo: uvc_v4l2_release
uvcvideo: uvc_v4l2_open
uvcvideo: uvc_v4l2_ioctl
v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
uvcvideo: uvc_v4l2_release
uvcvideo: uvc_v4l2_open
uvcvideo: uvc_v4l2_ioctl
v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
uvcvideo: uvc_v4l2_release
uvcvideo: uvc_v4l2_open
uvcvideo: uvc_v4l2_ioctl
v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
uvcvideo: uvc_v4l2_ioctl
v4l2 ioctl VIDIOC_G_PARM, dir=rw (0xc0cc5615)
uvcvideo: uvc_v4l2_ioctl
v4l2 ioctl VIDIOC_ENUMSTD, dir=rw (0xc0405619)
uvcvideo: Unsupported ioctl 0xc0405619
uvcvideo: uvc_v4l2_ioctl
v4l2 ioctl VIDIOC_S_STD, dir=-w (0x40085618)
uvcvideo: Unsupported ioctl 0x40085618
uvcvideo: uvc_v4l2_ioctl
v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
uvcvideo: uvc_v4l2_ioctl
v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
uvcvideo: uvc_v4l2_ioctl
v4l2 ioctl VIDIOC_S_INPUT, dir=rw (0xc0045627)
uvcvideo: uvc_v4l2_ioctl
v4l2 ioctl VIDIOC_QUERYBUF, dir=rw (0xc0445609)
uvcvideo: uvc_v4l2_ioctl
v4l2 ioctl VIDIOC_G_PARM, dir=rw (0xc0cc5615)
uvcvideo: uvc_v4l2_ioctl
v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
BUG: unable to handle kernel paging request at virtual address ffffffe2
 printing eip:
f8f13af7
*pde = 00004067
Oops: 0000 [#2]
SMP
last sysfs file: /class/net/eth0/carrier
Modules linked in: uvcvideo(U) videodev v4l1_compat v4l2_common autofs4 
hidp rfcomm l2cap vmnet(U) vmmon(U) sunrpc i8k ip_conntrack_netbios_ns 
ipt_REJECT iptable_filter ip_tables xt_state ip_conntrack nfnetlink 
xt_tcpudp ip6table_filter ip6_tables x_tables cpufreq_ondemand video sbs 
i2c_ec dock button battery asus_acpi ac ipv6 parport_pc lp parport 
snd_intel8x0m snd_intel8x0 snd_ac97_codec snd_ac97_bus snd_seq_dummy 
snd_seq_oss snd_seq_midi_event snd_seq nvidia(U) snd_seq_device 
snd_pcm_oss ide_cd snd_mixer_oss snd_pcm hci_usb joydev snd_timer 
ohci1394 tg3 cdrom ieee1394 pcspkr i2c_core snd ndiswrapper(U) bluetooth 
soundcore serio_raw snd_page_alloc dm_snapshot dm_zero dm_mirror dm_mod 
ext3 jbd ehci_hcd ohci_hcd uhci_hcd
CPU:    0
EIP:    0060:[<f8f13af7>]    Tainted: P      VLI
EFLAGS: 00010282   (2.6.18-1.2869.fc6 #1)
EIP is at uvc_v4l2_do_ioctl+0x5c0/0xadf [uvcvideo]
eax: d642b280   ebx: d824b180   ecx: e220540c   edx: ffffffe0
esi: c0cc5604   edi: 00000008   ebp: f15a4030   esp: d3612e18
ds: 007b   es: 007b   ss: 0068
Process ekiga (pid: 9373, ti=d3612000 task=cc662b10 task.ti=d3612000)
Stack: 0000014d 40085618 ffffffff ffffffff 00000000 000affff d0590900 
f3fc0720
       d0c948a0 cc662b10 0000001b c04c16f7 00000006 d3612e58 cc840dc0 
d3612e58
       000001ef 00000166 0000000a 000006da c07e52d4 000a0000 c0692e80 
c053e819
Call Trace:
 [<f8e7cbc8>] video_usercopy+0x172/0x237 [videodev]
 [<f8f1311f>] uvc_v4l2_ioctl+0x3b/0x41 [uvcvideo]
 [<c047f204>] do_ioctl+0x4c/0x62
 [<c047f464>] vfs_ioctl+0x24a/0x25c
 [<c047f4c2>] sys_ioctl+0x4c/0x66
 [<c0404013>] syscall_call+0x7/0xb
DWARF2 unwinder stuck at syscall_call+0x7/0xb
Leftover inexact backtrace:
 =======================
Code: 00 83 3b 01 8b 48 4c 8b 50 50 0f 85 d0 04 00 00 85 c9 0f 84 c8 04 
00 00 85 d2 0f 84 c0 04 00 00 8b 41 04 bf 08 00 00 00 89 43 0c <0f> b7 
42 02 89 43 04 0f b7 42 04 c7 43 10 01 00 00 00 89 43 08
EIP: [<f8f13af7>] uvc_v4l2_do_ioctl+0x5c0/0xadf [uvcvideo] SS:ESP 
0068:d3612e18
 <3>BUG: sleeping function called from invalid context at kernel/rwsem.c:20
in_atomic():0, irqs_disabled():1
 [<c04051db>] dump_trace+0x69/0x1af
 [<c0405339>] show_trace_log_lvl+0x18/0x2c
 [<c04058ed>] show_trace+0xf/0x11
 [<c04059ea>] dump_stack+0x15/0x17
 [<c0439482>] down_read+0x12/0x20
 [<c04315e1>] blocking_notifier_call_chain+0xe/0x29
 [<c0427638>] do_exit+0x1b/0x776
 [<c040588e>] die+0x29d/0x2c2
 [<c0615835>] do_page_fault+0x408/0x4db
 [<c0404b85>] error_code+0x39/0x40
DWARF2 unwinder stuck at error_code+0x39/0x40
Leftover inexact backtrace:
 [<f8e6007b>] rfcomm_run+0x414/0x10d2 [rfcomm]
 [<f8f13af7>] uvc_v4l2_do_ioctl+0x5c0/0xadf [uvcvideo]
 [<c04c16f7>] inode_has_perm+0x5b/0x63
 [<c053e819>] vt_console_print+0x0/0x224
 [<f8e7cbc8>] video_usercopy+0x172/0x237 [videodev]
 [<c04c16f7>] inode_has_perm+0x5b/0x63
 [<c04257f5>] printk+0x1f/0x95
 [<f8f1311f>] uvc_v4l2_ioctl+0x3b/0x41 [uvcvideo]
 [<f8f13537>] uvc_v4l2_do_ioctl+0x0/0xadf [uvcvideo]
 [<c047f204>] do_ioctl+0x4c/0x62
 [<c047f464>] vfs_ioctl+0x24a/0x25c
 [<c047f4c2>] sys_ioctl+0x4c/0x66
 [<c0404013>] syscall_call+0x7/0xb
 =======================




From laurent.pinchart at skynet.be  Wed Jan 17 15:17:41 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 17 Jan 2007 15:17:41 +0100
Subject: [Linux-uvc-devel] fuji finepix support?
In-Reply-To: <45AE2D36.2050300@sms.ed.ac.uk>
References: <45AE1ADD.30909@sms.ed.ac.uk>
	<200701171450.54268.laurent.pinchart@skynet.be>
	<45AE2D36.2050300@sms.ed.ac.uk>
Message-ID: <200701171517.41560.laurent.pinchart@skynet.be>

Hi Ioannis.

Thanks for the trace. Could you please apply the following patch and send me 
the kernel log ? Please send me your compiled uvcvideo.ko module as well.

Thanks.

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Jan 17 15:18:10 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 17 Jan 2007 15:18:10 +0100
Subject: [Linux-uvc-devel] fuji finepix support?
In-Reply-To: <45AE2D36.2050300@sms.ed.ac.uk>
References: <45AE1ADD.30909@sms.ed.ac.uk>
	<200701171450.54268.laurent.pinchart@skynet.be>
	<45AE2D36.2050300@sms.ed.ac.uk>
Message-ID: <200701171518.10731.laurent.pinchart@skynet.be>

Patch attached :-)

Laurent
-------------- next part --------------
A non-text attachment was scrubbed...
Name: debug.diff
Type: text/x-diff
Size: 439 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070117/8b37940d/attachment.diff>

From laurent.pinchart at skynet.be  Wed Jan 17 15:19:29 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 17 Jan 2007 15:19:29 +0100
Subject: [Linux-uvc-devel] fuji finepix support?
In-Reply-To: <45AE2D36.2050300@sms.ed.ac.uk>
References: <45AE1ADD.30909@sms.ed.ac.uk>
	<200701171450.54268.laurent.pinchart@skynet.be>
	<45AE2D36.2050300@sms.ed.ac.uk>
Message-ID: <200701171519.29512.laurent.pinchart@skynet.be>

Hi Ioannis,

could you please send me the output of 'lsusb -v' as well ? You will need 
usbutils 0.72 or newer (the CVS version should do as well).

Thanks

Laurent Pinchart


From ebi9 at ozob.net  Wed Jan 17 19:58:38 2007
From: ebi9 at ozob.net (Gene Imes)
Date: Wed, 17 Jan 2007 12:58:38 -0600
Subject: [Linux-uvc-devel] luvcview
In-Reply-To: <200701161804.09906.mxhaard@magic.fr>
References: <45AD019A.8010005@ozob.net> <200701161804.09906.mxhaard@magic.fr>
Message-ID: <45AE71DE.1070204@ozob.net>

Michel Xhaard wrote:
> Le Mardi 16 Janvier 2007 17:47, Gene Imes a ?crit :
>> Michel, I can not capture a picture or video with luvcview.
>>
>>> root at go:/etc/portage# /opt/luvcview/luvcview -L
>>> luvcview version 0.2.0
>>> Video driver: x11
>>> A window manager is available
>>> video /dev/video0
>>> /dev/video0 does not support read i/o
>>> { pixelformat = 'YUYV', description = 'Uncompressed' }
>>> { discrete: width = 1280, height = 1024 }
>>>         Time interval between frame: 4/15,
>>> { discrete: width = 640, height = 480 }
>>>         Time interval between frame: 1/15,
>>> { discrete: width = 320, height = 240 }
>>>         Time interval between frame: 1/30,
>>> gene has logged off pts/2 from :0.0.
>>> gene has logged off pts/3 from :0.0.
>> I start with this:
>>
>> luvcview -f yuv -s XxX
>>
>> Any ideas?
>>
>> Thanks,
> Geme,
> It is not allowed for YUYV palette, but i have ask you, if you need it :)
> ok i will set picture in the next revision. avi is more complex as that need a 
> video compressor did you need it ?
> regards

Hi, Michel. Yes I need picture and video. I would greatly appreciate it 
if you would include it.

Thanks,

-- 
Gene Imes ============================= ozob.net



From laurent.pinchart at skynet.be  Wed Jan 17 22:37:02 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 17 Jan 2007 22:37:02 +0100
Subject: [Linux-uvc-devel] [SVN] New devices supported
Message-ID: <200701172237.02865.laurent.pinchart@skynet.be>

Hi everybody.

I committed a few patches today. This in itself is not big news, but as the 
driver now supports two new devices I though I should keep you informed.

So, as of today, Creative Live! Optia and Fuji FinePix E550 users should be 
able to use their device with the Linux UVC driver. Note that Ekiga seems to 
crash with the Fuji FinePix E550, but that's not the driver's fault, is 
it ? :-)

I'd like to thank Gene Imes for sending me a Bodelin ProScope HR (it was very 
helpful to implement bulk transfer support), Creative Labs for sending me an 
Optia webcam, and Ioannis Nousias for letting me crash his kernel many times 
until the remaining bugs were sorted out.

Cheers,

Laurent Pinchart


From pauljurczak at yahoo.com  Wed Jan 17 23:35:29 2007
From: pauljurczak at yahoo.com (Paul Jurczak)
Date: Wed, 17 Jan 2007 14:35:29 -0800 (PST)
Subject: [Linux-uvc-devel] [SVN] New devices supported
Message-ID: <20070117223529.71836.qmail@web60523.mail.yahoo.com>

Hi Laurent,

It's a great news to have more devices supported! BTW, does Creative Live! Optia exhibit similar USB control request problems as Logitech cameras?
 
Regards,
Paul Jurczak
 

----- Original Message ----
From: Laurent Pinchart <laurent.pinchart at skynet.be>
To: linux-uvc-devel at lists.berlios.de
Sent: Wednesday, January 17, 2007 3:37:02 PM
Subject: [Linux-uvc-devel] [SVN] New devices supported

Hi everybody.

I committed a few patches today. This in itself is not big news, but as the 
driver now supports two new devices I though I should keep you informed.

So, as of today, Creative Live! Optia and Fuji FinePix E550 users should be 
able to use their device with the Linux UVC driver. Note that Ekiga seems to 
crash with the Fuji FinePix E550, but that's not the driver's fault, is 
it ? :-)

I'd like to thank Gene Imes for sending me a Bodelin ProScope HR (it was very 
helpful to implement bulk transfer support), Creative Labs for sending me an 
Optia webcam, and Ioannis Nousias for letting me crash his kernel many times 
until the remaining bugs were sorted out.

Cheers,

Laurent Pinchart
_______________________________________________
Linux-uvc-devel mailing list
Linux-uvc-devel at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/linux-uvc-devel





 
____________________________________________________________________________________
Need a quick answer? Get one in minutes from people who know.
Ask your question on www.Answers.yahoo.com






 
____________________________________________________________________________________
Need Mail bonding?
Go to the Yahoo! Mail Q&A for great tips from Yahoo! Answers users.
http://answers.yahoo.com/dir/?link=list&sid=396546091


From gerald.edward.butler at gmail.com  Thu Jan 18 16:57:01 2007
From: gerald.edward.butler at gmail.com (Gerald Butler)
Date: Thu, 18 Jan 2007 10:57:01 -0500
Subject: [Linux-uvc-devel] Funding development of "linux-uvc"????
Message-ID: <fb453cb30701180757v4607b10eydc0ba733f48a577c@mail.gmail.com>

To the "linux-uvc" developers:

    If I were inclined to fund development of the "linux-uvc" driver with
respect to some particular camera model....

    How much money would be reasonably required in order to have the
necessary changes patched to support the particular camera model?

    I would supply the Camera for free as well as fund the testing and
development.

    I'm not looking for any sort or precise commitment at this point, I only
would like to know if this is an option should I, or actually the company I
work for, need a particular UVC Camera Model to function in the near future.


Thank You and I look forward to hearing from all of you,

    Gerald Butler
    gerald.edward.butler at gmail.com

    Project Manager - Store Systems Group
    Sterling Jewelers Inc.
    http://www.sterlingjewelers.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070118/4aadcbf6/attachment.html>

From adrian.skehill at gmail.com  Thu Jan 18 17:51:47 2007
From: adrian.skehill at gmail.com (Adrian Skehill)
Date: Thu, 18 Jan 2007 16:51:47 +0000
Subject: [Linux-uvc-devel] [SVN] New devices supported
In-Reply-To: <200701172237.02865.laurent.pinchart@skynet.be>
References: <200701172237.02865.laurent.pinchart@skynet.be>
Message-ID: <56527a580701180851u1df578a4w8800998e940ea71e@mail.gmail.com>

Hi Laurent,

Just wanted to say thanks very much for this, my Creative Live! Optia kicked
into life today, it was great seeing the blue light coming on!

Cheers,
Adrian.

On 1/17/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> Hi everybody.
>
> I committed a few patches today. This in itself is not big news, but as
> the
> driver now supports two new devices I though I should keep you informed.
>
> So, as of today, Creative Live! Optia and Fuji FinePix E550 users should
> be
> able to use their device with the Linux UVC driver. Note that Ekiga seems
> to
> crash with the Fuji FinePix E550, but that's not the driver's fault, is
> it ? :-)
>
> I'd like to thank Gene Imes for sending me a Bodelin ProScope HR (it was
> very
> helpful to implement bulk transfer support), Creative Labs for sending me
> an
> Optia webcam, and Ioannis Nousias for letting me crash his kernel many
> times
> until the remaining bugs were sorted out.
>
> Cheers,
>
> Laurent Pinchart
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070118/2340ef3c/attachment.html>

From laurent.pinchart at skynet.be  Thu Jan 18 19:28:37 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 18 Jan 2007 19:28:37 +0100
Subject: [Linux-uvc-devel] [SVN] New devices supported
In-Reply-To: <20070117223529.71836.qmail@web60523.mail.yahoo.com>
References: <20070117223529.71836.qmail@web60523.mail.yahoo.com>
Message-ID: <200701181928.37302.laurent.pinchart@skynet.be>

Hi Paul

> It's a great news to have more devices supported! BTW, does Creative Live!
> Optia exhibit similar USB control request problems as Logitech cameras?

So far, no. But I haven't conducted any stress-test.

Regards,

Laurent Pinchart


From pauljurczak at yahoo.com  Thu Jan 18 20:37:55 2007
From: pauljurczak at yahoo.com (Paul Jurczak)
Date: Thu, 18 Jan 2007 11:37:55 -0800 (PST)
Subject: [Linux-uvc-devel] [SVN] New devices supported
Message-ID: <20070118193755.42143.qmail@web60522.mail.yahoo.com>

Hi Laurent,

  if you think that there is a good chance Creative Live! Optia is free of these problems, I could buy one and do some stress testing on multiple platforms - I have lots of PC hardware laying around. I'm looking for reliable UVC camera for embedded application, so I can spend some time on testing, provided you send me stress-test program or instructions to build one (I'm still a Linux wannabe). Any chance for raw Bayer support on Optia?
 
Regards,
Paul.

----- Original Message ----
From: Laurent Pinchart <laurent.pinchart at skynet.be>
To: linux-uvc-devel at lists.berlios.de
Cc: Paul Jurczak <pauljurczak at yahoo.com>
Sent: Thursday, January 18, 2007 12:28:37 PM
Subject: Re: [Linux-uvc-devel] [SVN] New devices supported

Hi Paul

> It's a great news to have more devices supported! BTW, does Creative Live!
> Optia exhibit similar USB control request problems as Logitech cameras?

So far, no. But I haven't conducted any stress-test.

Regards,

Laurent Pinchart





 
____________________________________________________________________________________
The fish are biting. 
Get more visitors on your site using Yahoo! Search Marketing.
http://searchmarketing.yahoo.com/arp/sponsoredsearch_v2.php


From laurent.pinchart at skynet.be  Thu Jan 18 20:50:39 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 18 Jan 2007 20:50:39 +0100
Subject: [Linux-uvc-devel] [SVN] New devices supported
In-Reply-To: <20070118193755.42143.qmail@web60522.mail.yahoo.com>
References: <20070118193755.42143.qmail@web60522.mail.yahoo.com>
Message-ID: <200701182050.40211.laurent.pinchart@skynet.be>

Hi Paul,

>   if you think that there is a good chance Creative Live! Optia is free of
> these problems, I could buy one and do some stress testing on multiple
> platforms - I have lots of PC hardware laying around.

There is a chance. A friend of mine had *lots* of problem with the Logitech 
webcams, and the Optia works fine for him.

> I'm looking for reliable UVC camera for embedded application, so I can spend
> some time on testing, provided you send me stress-test program or
> instructions to build one (I'm still a Linux wannabe).

Anyone want to write a stress-test program ? :-)

> Any chance for raw Bayer support on Optia? 

I don't know yet. I contacted Creative to have more information about the 
extension units. I don't know if the camera supports Bayer mode.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Jan 18 20:59:35 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 18 Jan 2007 20:59:35 +0100
Subject: [Linux-uvc-devel] Funding development of "linux-uvc"????
In-Reply-To: <fb453cb30701180757v4607b10eydc0ba733f48a577c@mail.gmail.com>
References: <fb453cb30701180757v4607b10eydc0ba733f48a577c@mail.gmail.com>
Message-ID: <200701182059.35547.laurent.pinchart@skynet.be>

Hi Gerald,

>     If I were inclined to fund development of the "linux-uvc" driver with
> respect to some particular camera model....

... that would be greatly appreciated :-)

>     How much money would be reasonably required in order to have the
> necessary changes patched to support the particular camera model?

That would depend on the particular features the camera provides. Could you 
provide me with more details at this point ? Would it be a camera with 
standard features, or would it have exotic capabilities ? I'm particularly 
concerned by how the features would fit the current v4l2 API.

If you could give me a broad overview of the project, I'll provide you with 
pricing information. Feel free to contact me in provide for this.

>     I would supply the Camera for free as well as fund the testing and
> development.
>
>     I'm not looking for any sort or precise commitment at this point, I
> only would like to know if this is an option should I, or actually the
> company I work for, need a particular UVC Camera Model to function in the
> near future.

Yes, that's definitely an option. I'd be happy to help you with the project.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Jan 18 21:44:35 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 18 Jan 2007 21:44:35 +0100
Subject: [Linux-uvc-devel] Camera working on ARM
In-Reply-To: <1168986758.3360.5.camel@mini.firestorm.cx>
References: <45ABD8D4.4010902@grupopie.com>
	<1168986758.3360.5.camel@mini.firestorm.cx>
Message-ID: <200701182144.35905.laurent.pinchart@skynet.be>

Hi Philip,

> > I've just tested the driver on an ARM board with a Quickcam Ultra Vision
> > and it worked just fine (at least as far as I've tested).
>
> Incidental I received a PPC G4 Mac mini today. I've got Fedora Core 6
> installed and uvcvideo seems to work as well with my Orbit as it does on
> x86_64.
>
> I say 'as well' because there are a few errors (attached) - it takes a
> couple of goes to capture an image. Is it possible this is the firmware
> bug that affects certain systems?

It seems so, unfortunately :-/

Cheers,

Laurent Pinchart


From louisg00 at bellsouth.net  Thu Jan 18 20:21:20 2007
From: louisg00 at bellsouth.net (Louis E Garcia II)
Date: Thu, 18 Jan 2007 14:21:20 -0500
Subject: [Linux-uvc-devel] kernel 2.6.20 includes a USB vision driver which
	will bring	support for USB Web cams
Message-ID: <1169148080.13420.4.camel@sonlaptop>

Just read about this driver. Any relationship or overlap with the uvc
driver?

http://www.computerpartner.nl/article.php?news=int&id=4630

-Louis



From laurent.pinchart at skynet.be  Thu Jan 18 22:22:18 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 18 Jan 2007 22:22:18 +0100
Subject: [Linux-uvc-devel]
	=?iso-8859-1?q?kernel_2=2E6=2E20_includes_a_USB?=
	=?iso-8859-1?q?_vision_driver_which_will_bring=09support_for_USB_W?=
	=?iso-8859-1?q?eb_cams?=
In-Reply-To: <1169148080.13420.4.camel@sonlaptop>
References: <1169148080.13420.4.camel@sonlaptop>
Message-ID: <200701182222.18937.laurent.pinchart@skynet.be>

> Just read about this driver. Any relationship or overlap with the uvc
> driver?
>
> http://www.computerpartner.nl/article.php?news=int&id=4630

No, that's a totally unrelated driver that supports a few Zoran chipsets. It 
would probably have been better named with a less generic, less confusing 
name, but that's life :-)

I still plan to submit the Linux UVC driver for inclusion in the kernel, as I 
believe it is now ready. I need to get a few controls standardised at the 
V4L2 level first, and that hasn't been easy so far. I keep trying though.

Cheers,

Laurent Pinchart


From gerald.edward.butler at gmail.com  Fri Jan 19 02:08:34 2007
From: gerald.edward.butler at gmail.com (Gerald Edward Butler)
Date: Thu, 18 Jan 2007 20:08:34 -0500
Subject: [Linux-uvc-devel] Funding development of "linux-uvc"????
In-Reply-To: <200701182059.35547.laurent.pinchart@skynet.be>
References: <fb453cb30701180757v4607b10eydc0ba733f48a577c@mail.gmail.com>
	<200701182059.35547.laurent.pinchart@skynet.be>
Message-ID: <1169168914.5212.4.camel@olivaw>

Hi Laurent,

On Thu, 2007-01-18 at 20:59 +0100, Laurent Pinchart wrote:

> Hi Gerald,
> 
> >     If I were inclined to fund development of the "linux-uvc" driver with
> > respect to some particular camera model....
> 
> ... that would be greatly appreciated :-)
> 
> >     How much money would be reasonably required in order to have the
> > necessary changes patched to support the particular camera model?
> 
> That would depend on the particular features the camera provides. Could you 
> provide me with more details at this point ? Would it be a camera with 
> standard features, or would it have exotic capabilities ? I'm particularly 
> concerned by how the features would fit the current v4l2 API.
> 
> If you could give me a broad overview of the project, I'll provide you with 
> pricing information. Feel free to contact me in provide for this.
> 


Well....it's a little amorphous at this point. I'm looking at deploying
about 300 WebCams with
feature set much like the Logitech QuickCam Pro 5000. Nothing exotic.
We're intending to use
them for Jewelry photography for tracking purposes.

We're using Ubuntu 6.10 (Stock Kernel). I intend to create semi-custom
software suited to our
use cases that integrates with our current systems. Most likely using
Python and GStreamer.

Pretty much, I just need to know what sort of possibilities there will
be for supporting newer 
Camera models in the near future.


> >     I would supply the Camera for free as well as fund the testing and
> > development.
> >
> >     I'm not looking for any sort or precise commitment at this point, I
> > only would like to know if this is an option should I, or actually the
> > company I work for, need a particular UVC Camera Model to function in the
> > near future.
> 
> Yes, that's definitely an option. I'd be happy to help you with the project.
> 


Thanks for the Feedback and thanks for all the work you've done so far
on the UVC drivers!


> Best regards,
> 
> Laurent Pinchart
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070118/024faf47/attachment.html>

From laurent.pinchart at skynet.be  Fri Jan 19 10:48:31 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 19 Jan 2007 10:48:31 +0100
Subject: [Linux-uvc-devel] Funding development of "linux-uvc"????
In-Reply-To: <1169168914.5212.4.camel@olivaw>
References: <fb453cb30701180757v4607b10eydc0ba733f48a577c@mail.gmail.com>
	<200701182059.35547.laurent.pinchart@skynet.be>
	<1169168914.5212.4.camel@olivaw>
Message-ID: <200701191048.31523.laurent.pinchart@skynet.be>

Hi Gerald,

> > >     If I were inclined to fund development of the "linux-uvc" driver
> > > with respect to some particular camera model....
> >
> > ... that would be greatly appreciated :-)
> >
> > >     How much money would be reasonably required in order to have the
> > > necessary changes patched to support the particular camera model?
> >
> > That would depend on the particular features the camera provides. Could
> > you provide me with more details at this point ? Would it be a camera
> > with standard features, or would it have exotic capabilities ? I'm
> > particularly concerned by how the features would fit the current v4l2
> > API.
> >
> > If you could give me a broad overview of the project, I'll provide you
> > with pricing information. Feel free to contact me in provide for this.
>
> Well....it's a little amorphous at this point. I'm looking at deploying
> about 300 WebCams with feature set much like the Logitech QuickCam Pro 5000.
> Nothing exotic. We're intending to use them for Jewelry photography for
> tracking purposes. 

I assume the cameras will be UVC compliant. If that's the case, they might 
work out of the box, without any driver modification. Adding support for 
custom controls (through extension units) isn't difficult.

> We're using Ubuntu 6.10 (Stock Kernel). I intend to create semi-custom
> software suited to our use cases that integrates with our current systems.
> Most likely using Python and GStreamer.

The GStreamer V4L2 plugin is listed as a 'bad' plugin. Not that the plugin is 
unusable, but it could have a few bugs or issues that you might have to fix. 
Nothing difficult though.

> Pretty much, I just need to know what sort of possibilities there will
> be for supporting newer Camera models in the near future.

For UVC-compliant models without exotic features, you really don't have to 
worry. More exotic features, such as loops in the UVC units chain, would be 
more difficult to support, but I doubt any webcam will require that in the 
near future.

> > >     I would supply the Camera for free as well as fund the testing and
> > > development.
> > >
> > >     I'm not looking for any sort or precise commitment at this point, I
> > > only would like to know if this is an option should I, or actually the
> > > company I work for, need a particular UVC Camera Model to function in
> > > the near future.
> >
> > Yes, that's definitely an option. I'd be happy to help you with the
> > project.
>
> Thanks for the Feedback and thanks for all the work you've done so far
> on the UVC drivers!

You're welcome :-)

Best regards,

Laurent Pinchart


From s0238762 at sms.ed.ac.uk  Fri Jan 19 18:22:54 2007
From: s0238762 at sms.ed.ac.uk (Ioannis Nousias)
Date: Fri, 19 Jan 2007 17:22:54 +0000
Subject: [Linux-uvc-devel] Fuji FinePix and ekiga
Message-ID: <45B0FE6E.5020808@sms.ed.ac.uk>

I'd like to inform you that the latest ekiga cvs-snapshot (18-Jan-07) 
works well with Fuji FinePix E550 and the linux-uvc driver.

regards,
Ioannis
 


From pauljurczak at yahoo.com  Fri Jan 19 19:07:12 2007
From: pauljurczak at yahoo.com (Paul Jurczak)
Date: Fri, 19 Jan 2007 10:07:12 -0800 (PST)
Subject: [Linux-uvc-devel] Fuji FinePix and ekiga
Message-ID: <20070119180713.47239.qmail@web60519.mail.yahoo.com>

Hi Ioannis,

can you control this camera through linux-uvc driver (not touching any buttons on the camera) to take high resolution pictures?
 
Regards,
Paul. 

----- Original Message ----
From: Ioannis Nousias <s0238762 at sms.ed.ac.uk>
To: linux-uvc-devel at lists.berlios.de
Sent: Friday, January 19, 2007 11:22:54 AM
Subject: [Linux-uvc-devel] Fuji FinePix and ekiga

I'd like to inform you that the latest ekiga cvs-snapshot (18-Jan-07) 
works well with Fuji FinePix E550 and the linux-uvc driver.

regards,
Ioannis
 
_______________________________________________
Linux-uvc-devel mailing list
Linux-uvc-devel at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/linux-uvc-devel





 
____________________________________________________________________________________
Don't pick lemons.
See all the new 2007 cars at Yahoo! Autos.
http://autos.yahoo.com/new_cars.html 


From antonio.bertoni at infinito.it  Sat Jan 20 00:46:58 2007
From: antonio.bertoni at infinito.it (Antonio Bertoni)
Date: Fri, 19 Jan 2007 23:46:58 +0000
Subject: [Linux-uvc-devel] 046d:08c1 Logitech, Inc. Fusion and qc-usb-0.6.6
Message-ID: <200701192346.58152.antonio.bertoni@infinito.it>

I have some problems with Logitech Fusion webcam.
I try the latest qc-usb-0.6.6 driver with
the kernel 2.6.19.1  ( x86_64 AMD Athlon )
But when i do a modprobe quickcam i get the error message:

root at Storm:/home/antonio/qc-usb-0.6.6# modprobe quickcam
FATAL: Error inserting quickcam (/lib/modules/2.6.19.1/misc/quickcam.ko): 
Invalid module format
quickcam: disagrees about version of symbol struct_module


What is wrong ?
Thanks 
Antonio



From antonio.bertoni at infinito.it  Sat Jan 20 00:39:48 2007
From: antonio.bertoni at infinito.it (Antonio Bertoni)
Date: Fri, 19 Jan 2007 23:39:48 +0000
Subject: [Linux-uvc-devel] 046d:08c1 Logitech, Inc. Fusion and qc-usb-0.6.6
Message-ID: <200701192339.48314.antonio.bertoni@infinito.it>

I have some problems with Logitech Fusion webcam.
I try the latest qc-usb-0.6.6 driver with
the kernel 2.6.19.1  ( x86_64 AMD Athlon )
But when i do a modprobe quickcam i get the error message:

root at Storm:/home/antonio/qc-usb-0.6.6# modprobe quickcam
FATAL: Error inserting quickcam (/lib/modules/2.6.19.1/misc/quickcam.ko): 
Invalid module format
quickcam: disagrees about version of symbol struct_module


What is wrong ?
Thanks 
Antonio


From s0238762 at sms.ed.ac.uk  Sat Jan 20 14:21:21 2007
From: s0238762 at sms.ed.ac.uk (Ioannis Nousias)
Date: Sat, 20 Jan 2007 13:21:21 +0000
Subject: [Linux-uvc-devel] Fuji FinePix and ekiga
In-Reply-To: <45B177A8.3070401@sms.ed.ac.uk>
References: <20070119180713.47239.qmail@web60519.mail.yahoo.com>
	<45B177A8.3070401@sms.ed.ac.uk>
Message-ID: <45B21751.7000906@sms.ed.ac.uk>


Paul Jurczak wrote:
> can you control this camera through linux-uvc driver (not touching any 
> buttons on the camera) to take high resolution pictures?
>  

I'm not sure if this is possible with this camera (take high resolution 
pictures whilst controlling it via the computer). When the camera is in 
webcam mode it captures at 352x288. Correct me if I'm wrong, but that's 
what the UVC driver is for (a webcam driver).

I can tell you that NONE of the controls for brightness, contrast and 
the rest of "luvcview" work. Most of them report "ioctl querycontrol 
error 22" and the rest simply fail without a specific error code. Mind 
you, I don't know if these controls are suppose to change the settings 
of the camera or if they only have local effects.

regards,
Ioannis




From laurent.pinchart at skynet.be  Sat Jan 20 15:50:22 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 20 Jan 2007 15:50:22 +0100
Subject: [Linux-uvc-devel] Fuji FinePix and ekiga
In-Reply-To: <45B21751.7000906@sms.ed.ac.uk>
References: <20070119180713.47239.qmail@web60519.mail.yahoo.com>
	<45B177A8.3070401@sms.ed.ac.uk> <45B21751.7000906@sms.ed.ac.uk>
Message-ID: <200701201550.22688.laurent.pinchart@skynet.be>

> > can you control this camera through linux-uvc driver (not touching any
> > buttons on the camera) to take high resolution pictures?
>
> I'm not sure if this is possible with this camera (take high resolution
> pictures whilst controlling it via the computer). When the camera is in
> webcam mode it captures at 352x288. Correct me if I'm wrong, but that's
> what the UVC driver is for (a webcam driver).

The Fuji FinePix E550 is one of the simplest UVC device. It has no controls, 
can stream in a single format (MJPEG), frame size (352x288) and frame rate 
(10fps). It doesn't report any event and has no still image capture 
capabilities.

> I can tell you that NONE of the controls for brightness, contrast and
> the rest of "luvcview" work. Most of them report "ioctl querycontrol
> error 22" and the rest simply fail without a specific error code. Mind
> you, I don't know if these controls are suppose to change the settings
> of the camera or if they only have local effects.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Jan 20 15:53:04 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 20 Jan 2007 15:53:04 +0100
Subject: [Linux-uvc-devel] 046d:08c1 Logitech,
	Inc. Fusion and qc-usb-0.6.6
In-Reply-To: <200701192339.48314.antonio.bertoni@infinito.it>
References: <200701192339.48314.antonio.bertoni@infinito.it>
Message-ID: <200701201553.04256.laurent.pinchart@skynet.be>

Hi Antonio,

> I have some problems with Logitech Fusion webcam.
> I try the latest qc-usb-0.6.6 driver with
> the kernel 2.6.19.1  ( x86_64 AMD Athlon )
> But when i do a modprobe quickcam i get the error message:
>
> root at Storm:/home/antonio/qc-usb-0.6.6# modprobe quickcam
> FATAL: Error inserting quickcam (/lib/modules/2.6.19.1/misc/quickcam.ko):
> Invalid module format
> quickcam: disagrees about version of symbol struct_module

Your module and your running kernel have probably been compiled with different 
source trees.

Just out of curiosity, as this mailing list is about the Linux UVC driver, 
which supports the Logitech Fusion webcam, and as the qc-usb driver doesn't 
support the Logitech Fusion webcam, what are you trying to do ? :-)

Cheers,

Laurent Pinchart


From kcbanner at gmail.com  Sat Jan 20 20:21:46 2007
From: kcbanner at gmail.com (kc banner)
Date: Sat, 20 Jan 2007 11:21:46 -0800
Subject: [Linux-uvc-devel] Recording video and sound from Orbit MP camera.
Message-ID: <5a6283750701201121k36c9fb5bod72e869b60989aa7@mail.gmail.com>

Hey all,

Right now I can record video just fine using luvcview, from my logitech
Orbit MP camera. I was wondering if there was a way to record both video and
sound...I suppose I could create a script to somehow start the video
recording and an audio recording in a separate program...but is there an
easier way to do this?

Thanks,
kcbanner
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070120/7ab0b1f4/attachment.html>

From antonio.bertoni at infinito.it  Sun Jan 21 02:24:40 2007
From: antonio.bertoni at infinito.it (Antonio Bertoni)
Date: Sun, 21 Jan 2007 01:24:40 +0000
Subject: [Linux-uvc-devel] 046d:08c1 Logitech, Inc. Fusion and UVC !
In-Reply-To: <200701201553.04256.laurent.pinchart@skynet.be>
References: <200701192339.48314.antonio.bertoni@infinito.it>
	<200701201553.04256.laurent.pinchart@skynet.be>
Message-ID: <200701210124.41064.antonio.bertoni@infinito.it>

It' s my error ... sorry  ;-(
I have try first the  UVC driver but 
without success :

root at Storm:/home/antonio/trunk# modprobe uvcvideo
FATAL: Error inserting uvcvideo 
(/lib/modules/2.6.19.1/kernel/drivers/usb/image/uvcvideo.ko): Unknown symbol 
in module, or unknown parameter (see dmesg)

dmesg output :
uvcvideo: disagrees about version of symbol v4l_compat_translate_ioctl
uvcvideo: Unknown symbol v4l_compat_translate_ioctl
uvcvideo: disagrees about version of symbol video_devdata
uvcvideo: Unknown symbol video_devdata
uvcvideo: disagrees about version of symbol video_unregister_device
uvcvideo: Unknown symbol video_unregister_device
uvcvideo: disagrees about version of symbol video_device_alloc
uvcvideo: Unknown symbol video_device_alloc
uvcvideo: disagrees about version of symbol video_register_device
uvcvideo: Unknown symbol video_register_device
uvcvideo: disagrees about version of symbol video_usercopy
uvcvideo: Unknown symbol video_usercopy
uvcvideo: disagrees about version of symbol video_device_release
uvcvideo: Unknown symbol video_device_release

The compilation was ok :

root at Storm:/home/antonio/trunk# make
Building USB Video Class driver...
make[1]: Entering directory `/usr/src/linux-2.6.19.1'
  Building modules, stage 2.
  MODPOST 1 modules
make[1]: Leaving directory `/usr/src/linux-2.6.19.1'

root at Storm:/home/antonio/trunk# make install
Installing USB Video Class driver...
make[1]: Entering directory `/usr/src/linux-2.6.19.1'
  INSTALL /home/antonio/trunk/uvcvideo.ko
  DEPMOD  2.6.19.1
make[1]: Leaving directory `/usr/src/linux-2.6.19.1'
depmod -ae
root at Storm:/home/antonio/trunk#                              

Best Regards
Antonio



On Saturday 20 January 2007 14:53, Laurent Pinchart wrote:
> Hi Antonio,
>
> > I have some problems with Logitech Fusion webcam.
> > I try the latest qc-usb-0.6.6 driver with
> > the kernel 2.6.19.1  ( x86_64 AMD Athlon )
> > But when i do a modprobe quickcam i get the error message:
> >
> > root at Storm:/home/antonio/qc-usb-0.6.6# modprobe quickcam
> > FATAL: Error inserting quickcam (/lib/modules/2.6.19.1/misc/quickcam.ko):
> > Invalid module format
> > quickcam: disagrees about version of symbol struct_module
>
> Your module and your running kernel have probably been compiled with
> different source trees.
>
> Just out of curiosity, as this mailing list is about the Linux UVC driver,
> which supports the Logitech Fusion webcam, and as the qc-usb driver doesn't
> support the Logitech Fusion webcam, what are you trying to do ? :-)
>
> Cheers,
>
> Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Jan 21 11:14:29 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 21 Jan 2007 11:14:29 +0100
Subject: [Linux-uvc-devel] 046d:08c1 Logitech, Inc. Fusion and UVC !
In-Reply-To: <200701210124.41064.antonio.bertoni@infinito.it>
References: <200701192339.48314.antonio.bertoni@infinito.it>
	<200701201553.04256.laurent.pinchart@skynet.be>
	<200701210124.41064.antonio.bertoni@infinito.it>
Message-ID: <200701211114.29283.laurent.pinchart@skynet.be>

Hi Antonio,

> It' s my error ... sorry  ;-(
> I have try first the  UVC driver but
> without success :
>
> root at Storm:/home/antonio/trunk# modprobe uvcvideo
> FATAL: Error inserting uvcvideo
> (/lib/modules/2.6.19.1/kernel/drivers/usb/image/uvcvideo.ko): Unknown
> symbol in module, or unknown parameter (see dmesg)
>
> dmesg output :
> uvcvideo: disagrees about version of symbol v4l_compat_translate_ioctl
> uvcvideo: Unknown symbol v4l_compat_translate_ioctl
> uvcvideo: disagrees about version of symbol video_devdata
> uvcvideo: Unknown symbol video_devdata
> uvcvideo: disagrees about version of symbol video_unregister_device
> uvcvideo: Unknown symbol video_unregister_device
> uvcvideo: disagrees about version of symbol video_device_alloc
> uvcvideo: Unknown symbol video_device_alloc
> uvcvideo: disagrees about version of symbol video_register_device
> uvcvideo: Unknown symbol video_register_device
> uvcvideo: disagrees about version of symbol video_usercopy
> uvcvideo: Unknown symbol video_usercopy
> uvcvideo: disagrees about version of symbol video_device_release
> uvcvideo: Unknown symbol video_device_release

Are you sure your running current kernel has been compiled 
from /usr/src/linx-2.6.19.1, or at least with the same set of options ? It 
doesn't seem so.

> The compilation was ok :
>
> root at Storm:/home/antonio/trunk# make
> Building USB Video Class driver...
> make[1]: Entering directory `/usr/src/linux-2.6.19.1'
>   Building modules, stage 2.
>   MODPOST 1 modules
> make[1]: Leaving directory `/usr/src/linux-2.6.19.1'
>
> root at Storm:/home/antonio/trunk# make install
> Installing USB Video Class driver...
> make[1]: Entering directory `/usr/src/linux-2.6.19.1'
>   INSTALL /home/antonio/trunk/uvcvideo.ko
>   DEPMOD  2.6.19.1
> make[1]: Leaving directory `/usr/src/linux-2.6.19.1'
> depmod -ae
> root at Storm:/home/antonio/trunk#

Best Regards,

Laurent Pinchart


From s0238762 at sms.ed.ac.uk  Sun Jan 21 15:39:55 2007
From: s0238762 at sms.ed.ac.uk (Ioannis Nousias)
Date: Sun, 21 Jan 2007 14:39:55 +0000
Subject: [Linux-uvc-devel] general questions
Message-ID: <45B37B3B.7020209@sms.ed.ac.uk>

How does one check if a usb device is UVC capable or not (apart from 
testing the driver and see if it works or not :P)?

Are the presence of video-streaming present in lsusb a good indication ?
(eg "Interface Descriptor" -> "bInterfaceSubClass" -> "2 Video Streaming" ?)

If a camera is not UVC compliant what other options are there ?

thanks,
Ioannis
 


From james at studdart.com  Mon Jan 22 04:43:51 2007
From: james at studdart.com (James Studdart)
Date: Sun, 21 Jan 2007 22:43:51 -0500
Subject: [Linux-uvc-devel] Microsoft NX-6000
Message-ID: <45B432F7.1060101@studdart.com>

Hi,
 so after spending the last few hours messing with the UVC code trying 
to get this to work, it's loading but I need help. UVC is getting the 
formats fine and it creates /dev/video0, but no program I've tried 
works. I can't install sdl-dev at the moment (damn dependencies) which 
means I've not tried luvcview, I'll get around to that asap.

I'm a c/c++ programmer by profession and I'm happy to put in some effort 
to get this working, but I don't really know where to start. What I 
should be looking for? Any pointers would be great.

I've attached the lsusb -v output for reference. The dmesg output is 
also attached. The first part is just uvc loading, then ekiga followed 
by kopete and a gst test. This is the command line I tried for gst and 
it's corresponding output:

~/dev/linux_uvc/trunk $ gst-launch-0.10 v4l2src use-fixed-fps=false ! video/x-raw-yuv,width=320,height=240 ! ffmpegcolorspace ! ximagesink
Setting pipeline to PAUSED ...
ERROR: Pipeline doesn't want to pause.
ERROR: from element /pipeline0/v4l2src0: Could not negotiate format
Additional debug info:
gstbasesrc.c(1730): gst_base_src_start (): /pipeline0/v4l2src0:
Check your filtered caps, if any
Setting pipeline to NULL ...
FREEING pipeline ...


Something I noticed, in the lsusb output bColorPrimaries is sRGB and I 
would have expected yuv. Will that cause a problem if gst is looking for 
yuv? Is there anything else I should be looking at?

Many thanks,
 James.

P.s. I'm running Ubuntu 6.06 on a Samsung x50 at the moment, I should be 
able to upgrade to 6.10 in the next few days.

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: lsusb_output
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070121/0b86cf91/attachment.ksh>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: dmesg_output
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070121/0b86cf91/attachment-0001.ksh>

From laurent.pinchart at skynet.be  Mon Jan 22 09:26:43 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 22 Jan 2007 09:26:43 +0100
Subject: [Linux-uvc-devel] Microsoft NX-6000
In-Reply-To: <45B432F7.1060101@studdart.com>
References: <45B432F7.1060101@studdart.com>
Message-ID: <200701220926.43692.laurent.pinchart@skynet.be>

Hi James,

>  so after spending the last few hours messing with the UVC code trying
> to get this to work, it's loading but I need help.

Just out of curiosity, what modifications have you made to the driver to get 
the camera detected ? Having a look at the descriptors, the device shouldn't 
require an entry in the USB IDs list.

> UVC is getting the 
> formats fine and it creates /dev/video0, but no program I've tried
> works. I can't install sdl-dev at the moment (damn dependencies) which
> means I've not tried luvcview, I'll get around to that asap.

There is a command line capture program called uvccapture, you could try it.

> I'm a c/c++ programmer by profession and I'm happy to put in some effort
> to get this working, but I don't really know where to start. What I
> should be looking for? Any pointers would be great.

What happens when you run Ekiga ? The dmesg log doesn't show anything wrong. I 
assume it fails, but you didn't give any error message or failure 
description.

> I've attached the lsusb -v output for reference. The dmesg output is
> also attached. The first part is just uvc loading, then ekiga followed
> by kopete and a gst test. This is the command line I tried for gst and
> it's corresponding output:
>
> ~/dev/linux_uvc/trunk $ gst-launch-0.10 v4l2src use-fixed-fps=false !
> video/x-raw-yuv,width=320,height=240 ! ffmpegcolorspace ! ximagesink
> Setting pipeline to PAUSED ...
> ERROR: Pipeline doesn't want to pause.
> ERROR: from element /pipeline0/v4l2src0: Could not negotiate format
> Additional debug info:
> gstbasesrc.c(1730): gst_base_src_start (): /pipeline0/v4l2src0:
> Check your filtered caps, if any
> Setting pipeline to NULL ...
> FREEING pipeline ...
>
>
> Something I noticed, in the lsusb output bColorPrimaries is sRGB and I
> would have expected yuv. Will that cause a problem if gst is looking for
> yuv? Is there anything else I should be looking at?

The bColorPrimaries isn't related to the frame format, so it isn't a problem 
in itself. However, the camera supports MJPEG only. It can't stream YUV 
images.

Best regards,

Laurent Pinchart


From james at studdart.com  Mon Jan 22 16:52:43 2007
From: james at studdart.com (James Studdart)
Date: Mon, 22 Jan 2007 10:52:43 -0500
Subject: [Linux-uvc-devel] Microsoft NX-6000
In-Reply-To: <200701220926.43692.laurent.pinchart@skynet.be>
References: <45B432F7.1060101@studdart.com>
	<200701220926.43692.laurent.pinchart@skynet.be>
Message-ID: <45B4DDCB.3010906@studdart.com>

Hi,
 see attached for a svn diff. Be aware that I've not much idea what I'm 
doing with this code, blindly fumbling in the dark at the moment, so I'm 
certainly not advocating what I've changed! The changes do make the 
camera load though.
> Having a look at the descriptors, the device shouldn't require an entry in the USB IDs list.
>   
I added it to the list so it would have the UVC_QUIRK_PROBE_MINMAX, 
without it it doesn't get far at all. It seems the camera just doesn't 
support GET_DEF.
> There is a command line capture program called uvccapture, you could try it.
>   
Excellent, that's just the kind of thing I was looking for. So the light 
on the camera comes on and stays on but it seems like uvccapture is 
hanging. Ctrl-c doesn't kill it but disconnecting the camera does. This 
is the command line and the error I get, before pulling out the cable:
./uvccapture -x640 -y480 -t0
ioctl querycontrol error 22

This is the dmesg output up to the disconnect:

[17260296.440000] uvcvideo: Trying format 0x47504a4d (MJPG): 10000x10000.
[17260296.440000] uvcvideo: Using default frame interval 133333.3 us (7.5 fps).
[17260298.644000] uvcvideo: Trying format 0x47504a4d (MJPG): 10000x10000.
[17260298.644000] uvcvideo: Using default frame interval 133333.3 us (7.5 fps).
[17260826.716000] uvcvideo: Trying format 0x47504a4d (MJPG): 640x480.
[17260826.716000] uvcvideo: Using default frame interval 33333.3 us (30.0 fps).
[17260826.772000] uvcvideo: Control 0x00980913 not found.
[17260849.252000] usb 5-2: USB disconnect, address 33

I've not had a chance to look into the ioctl error or the control error 
yet. I can't really play too much with this at work. I'll look into it 
soon though.
> What happens when you run Ekiga ? The dmesg log doesn't show anything wrong. I 
> assume it fails, but you didn't give any error message or failure 
> description.
>   
Nothing really. No errors anywhere I can find. No video either, just the 
icon moving up and down in the video panel. Basically it's not too 
helpful at all.
> However, the camera supports MJPEG only. It can't stream YUV images.
>   
So I'm guessing that means it won't work with that gstreamer line then? 
I'll stick to uvccapture for now, it's simple and I like that. I'll look 
at other programs once that works.

By the way, the button on the camera is found and I get messages in 
dmesg when it's pressed. The mic works well too.

Thanks,
 James.

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: diff
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070122/de5d44bd/attachment.ksh>

From laurent.pinchart at skynet.be  Mon Jan 22 17:27:54 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 22 Jan 2007 17:27:54 +0100
Subject: [Linux-uvc-devel] Microsoft NX-6000
In-Reply-To: <45B4DDCB.3010906@studdart.com>
References: <45B432F7.1060101@studdart.com>
	<200701220926.43692.laurent.pinchart@skynet.be>
	<45B4DDCB.3010906@studdart.com>
Message-ID: <200701221727.55221.laurent.pinchart@skynet.be>

Hi James,

>  see attached for a svn diff. Be aware that I've not much idea what I'm
> doing with this code, blindly fumbling in the dark at the moment, so I'm
> certainly not advocating what I've changed! The changes do make the
> camera load though.
>
> > Having a look at the descriptors, the device shouldn't require an entry
> > in the USB IDs list.
>
> I added it to the list so it would have the UVC_QUIRK_PROBE_MINMAX,
> without it it doesn't get far at all. It seems the camera just doesn't
> support GET_DEF.

Nice to know. The Apple iSight was high on the list of broken cams, but it 
seems the Microsoft ones might beat it :-)

> > There is a command line capture program called uvccapture, you could try
> > it.
>
> Excellent, that's just the kind of thing I was looking for. So the light
> on the camera comes on and stays on but it seems like uvccapture is
> hanging. Ctrl-c doesn't kill it but disconnecting the camera does. This
> is the command line and the error I get, before pulling out the cable:
> ./uvccapture -x640 -y480 -t0
> ioctl querycontrol error 22
>
> This is the dmesg output up to the disconnect:
>
> [17260296.440000] uvcvideo: Trying format 0x47504a4d (MJPG): 10000x10000.
> [17260296.440000] uvcvideo: Using default frame interval 133333.3 us (7.5
> fps). [17260298.644000] uvcvideo: Trying format 0x47504a4d (MJPG):
> 10000x10000. [17260298.644000] uvcvideo: Using default frame interval
> 133333.3 us (7.5 fps). [17260826.716000] uvcvideo: Trying format 0x47504a4d
> (MJPG): 640x480. [17260826.716000] uvcvideo: Using default frame interval
> 33333.3 us (30.0 fps). [17260826.772000] uvcvideo: Control 0x00980913 not
> found.
> [17260849.252000] usb 5-2: USB disconnect, address 33
>
> I've not had a chance to look into the ioctl error or the control error
> yet. I can't really play too much with this at work. I'll look into it
> soon though.

The control shouldn't be an issue. It just means the camera doesn't implement 
V4L2_CID_GAIN.

> > What happens when you run Ekiga ? The dmesg log doesn't show anything
> > wrong. I assume it fails, but you didn't give any error message or
> > failure description.
>
> Nothing really. No errors anywhere I can find. No video either, just the
> icon moving up and down in the video panel. Basically it's not too
> helpful at all.
>
> > However, the camera supports MJPEG only. It can't stream YUV images.
>
> So I'm guessing that means it won't work with that gstreamer line then?
> I'll stick to uvccapture for now, it's simple and I like that. I'll look
> at other programs once that works.

Could you raise the trace level to 255 (modprobe uvcvideo trace=255) ? The 
driver should get much more verbose then.

> By the way, the button on the camera is found and I get messages in
> dmesg when it's pressed. The mic works well too.

So the only working features are either unusable (the button currently logs a 
message but doesn't do anything else) or out of the Linux UVC driver scope 
(audio is handled by the USB audio driver). Nice :-)

Cheers,

Laurent Pinchart


From Olivier.Bornet at idiap.ch  Mon Jan 22 17:41:08 2007
From: Olivier.Bornet at idiap.ch (Olivier Bornet)
Date: Mon, 22 Jan 2007 17:41:08 +0100
Subject: [Linux-uvc-devel] Microsoft NX-6000
In-Reply-To: <200701221727.55221.laurent.pinchart@skynet.be>
References: <45B432F7.1060101@studdart.com>
	<200701220926.43692.laurent.pinchart@skynet.be>
	<45B4DDCB.3010906@studdart.com>
	<200701221727.55221.laurent.pinchart@skynet.be>
Message-ID: <20070122164107.GB20978@idiap.ch>

Hello,

On Mon, Jan 22, 2007 at 05:27:54PM +0100, Laurent Pinchart wrote:
> Nice to know. The Apple iSight was high on the list of broken cams, but it 
> seems the Microsoft ones might beat it :-)

any progress on the iSight support ? I will be happy to help by testing
it. ;)

Thanks in advance for your answer, and thanks a lot for linux-uvc. I'm
using it daily with some uvc-based Logitech cams. :)

        Olivier
-- 
Olivier Bornet, IDIAP, CP 592, CH-1920 Martigny
http://www.idiap.ch/~bornet/
http://www.idiap.ch/~bornet/pgp/
PGP-key: 0xC53D9218
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070122/7cfc7152/attachment.pgp>

From james at studdart.com  Mon Jan 22 18:58:30 2007
From: james at studdart.com (James Studdart)
Date: Mon, 22 Jan 2007 12:58:30 -0500
Subject: [Linux-uvc-devel] Microsoft NX-6000
In-Reply-To: <200701221727.55221.laurent.pinchart@skynet.be>
References: <45B432F7.1060101@studdart.com>
	<200701220926.43692.laurent.pinchart@skynet.be>
	<45B4DDCB.3010906@studdart.com>
	<200701221727.55221.laurent.pinchart@skynet.be>
Message-ID: <45B4FB46.4090209@studdart.com>


> Could you raise the trace level to 255 (modprobe uvcvideo trace=255) ? The 
> driver should get much more verbose then.
>   
Good call. It's getting to  uvc_queue_waiton(buf, nonblocking) around 
line 294 in uvc_queue.c. I'm guessing it's waiting for the camera to 
become ready and it never does. Which means the camera needs some kind 
of setup/go/something instruction before hand?

I can't find where you get the buffer value from the camera... can you 
point me in the right direction?

Thanks again,
 James.






From james at studdart.com  Mon Jan 22 19:59:19 2007
From: james at studdart.com (James Studdart)
Date: Mon, 22 Jan 2007 13:59:19 -0500
Subject: [Linux-uvc-devel] Microsoft NX-6000
In-Reply-To: <200701221727.55221.laurent.pinchart@skynet.be>
References: <45B432F7.1060101@studdart.com>
	<200701220926.43692.laurent.pinchart@skynet.be>
	<45B4DDCB.3010906@studdart.com>
	<200701221727.55221.laurent.pinchart@skynet.be>
Message-ID: <45B50987.6070101@studdart.com>


So sometimes, just sometimes uvcapture runs through.... Not sure why or 
how yet. I get a file, which is attached, but it either contains junk or 
something strange. It's not a jpeg anyway. Anyone have any ideas what it is?

Cheers,
 James.

Laurent Pinchart wrote:
> Hi James,
>
>   
>>  see attached for a svn diff. Be aware that I've not much idea what I'm
>> doing with this code, blindly fumbling in the dark at the moment, so I'm
>> certainly not advocating what I've changed! The changes do make the
>> camera load though.
>>
>>     
>>> Having a look at the descriptors, the device shouldn't require an entry
>>> in the USB IDs list.
>>>       
>> I added it to the list so it would have the UVC_QUIRK_PROBE_MINMAX,
>> without it it doesn't get far at all. It seems the camera just doesn't
>> support GET_DEF.
>>     
>
> Nice to know. The Apple iSight was high on the list of broken cams, but it 
> seems the Microsoft ones might beat it :-)
>
>   
>>> There is a command line capture program called uvccapture, you could try
>>> it.
>>>       
>> Excellent, that's just the kind of thing I was looking for. So the light
>> on the camera comes on and stays on but it seems like uvccapture is
>> hanging. Ctrl-c doesn't kill it but disconnecting the camera does. This
>> is the command line and the error I get, before pulling out the cable:
>> ./uvccapture -x640 -y480 -t0
>> ioctl querycontrol error 22
>>
>> This is the dmesg output up to the disconnect:
>>
>> [17260296.440000] uvcvideo: Trying format 0x47504a4d (MJPG): 10000x10000.
>> [17260296.440000] uvcvideo: Using default frame interval 133333.3 us (7.5
>> fps). [17260298.644000] uvcvideo: Trying format 0x47504a4d (MJPG):
>> 10000x10000. [17260298.644000] uvcvideo: Using default frame interval
>> 133333.3 us (7.5 fps). [17260826.716000] uvcvideo: Trying format 0x47504a4d
>> (MJPG): 640x480. [17260826.716000] uvcvideo: Using default frame interval
>> 33333.3 us (30.0 fps). [17260826.772000] uvcvideo: Control 0x00980913 not
>> found.
>> [17260849.252000] usb 5-2: USB disconnect, address 33
>>
>> I've not had a chance to look into the ioctl error or the control error
>> yet. I can't really play too much with this at work. I'll look into it
>> soon though.
>>     
>
> The control shouldn't be an issue. It just means the camera doesn't implement 
> V4L2_CID_GAIN.
>
>   
>>> What happens when you run Ekiga ? The dmesg log doesn't show anything
>>> wrong. I assume it fails, but you didn't give any error message or
>>> failure description.
>>>       
>> Nothing really. No errors anywhere I can find. No video either, just the
>> icon moving up and down in the video panel. Basically it's not too
>> helpful at all.
>>
>>     
>>> However, the camera supports MJPEG only. It can't stream YUV images.
>>>       
>> So I'm guessing that means it won't work with that gstreamer line then?
>> I'll stick to uvccapture for now, it's simple and I like that. I'll look
>> at other programs once that works.
>>     
>
> Could you raise the trace level to 255 (modprobe uvcvideo trace=255) ? The 
> driver should get much more verbose then.
>
>   
>> By the way, the button on the camera is found and I get messages in
>> dmesg when it's pressed. The mic works well too.
>>     
>
> So the only working features are either unusable (the button currently logs a 
> message but doesn't do anything else) or out of the Linux UVC driver scope 
> (audio is handled by the USB audio driver). Nice :-)
>
> Cheers,
>
> Laurent Pinchart
>
> --
> This email has been verified as Virus free
> Virus Protection and more available at http://www.plus.net
>
>   
-------------- next part --------------
A non-text attachment was scrubbed...
Name: snap.jpg
Type: image/jpeg
Size: 4572 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070122/28372f39/attachment.jpg>

From laurent.pinchart at skynet.be  Mon Jan 22 23:07:53 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 22 Jan 2007 23:07:53 +0100
Subject: [Linux-uvc-devel] Microsoft NX-6000
In-Reply-To: <20070122164107.GB20978@idiap.ch>
References: <45B432F7.1060101@studdart.com>
	<200701221727.55221.laurent.pinchart@skynet.be>
	<20070122164107.GB20978@idiap.ch>
Message-ID: <200701222307.53511.laurent.pinchart@skynet.be>

Hi Olivier,

> > Nice to know. The Apple iSight was high on the list of broken cams, but
> > it seems the Microsoft ones might beat it :-)
>
> any progress on the iSight support ? I will be happy to help by testing
> it. ;)

I haven't made any progress myself (as I don't own any Mac), and haven't heard 
of my Mac developers yet. I tried to put together patches from a few months 
ago with the latest driver revision. Please test the attached patch. If it 
doesn't work, push the trace level to a higher value and send me the kernel 
log.

> Thanks in advance for your answer, and thanks a lot for linux-uvc. I'm
> using it daily with some uvc-based Logitech cams. :)

You're welcome :-)

Laurent
-------------- next part --------------
A non-text attachment was scrubbed...
Name: isight.mine.patch
Type: text/x-diff
Size: 6578 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070122/300fb9a1/attachment.patch>

From laurent.pinchart at skynet.be  Mon Jan 22 23:10:50 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 22 Jan 2007 23:10:50 +0100
Subject: [Linux-uvc-devel] Microsoft NX-6000
In-Reply-To: <45B4FB46.4090209@studdart.com>
References: <45B432F7.1060101@studdart.com>
	<200701221727.55221.laurent.pinchart@skynet.be>
	<45B4FB46.4090209@studdart.com>
Message-ID: <200701222310.50503.laurent.pinchart@skynet.be>

Hi James,

> > Could you raise the trace level to 255 (modprobe uvcvideo trace=255) ?
> > The driver should get much more verbose then.
>
> Good call. It's getting to  uvc_queue_waiton(buf, nonblocking) around
> line 294 in uvc_queue.c. I'm guessing it's waiting for the camera to
> become ready and it never does. Which means the camera needs some kind
> of setup/go/something instruction before hand?

It waits for a buffer to become ready. This means the camera probably doesn't 
send enough data (or any data at all).

> I can't find where you get the buffer value from the camera... can you
> point me in the right direction?

The video streaming code is in uvc_video.c. uvc_video_complete_isoc() is 
called when an isochronous URB completes. It will in turn call 
uvc_video_decode() to copy data from individual isochronous buffers to the 
image buffer, stripping the headers. Something is probably wrong there.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Jan 22 23:14:55 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 22 Jan 2007 23:14:55 +0100
Subject: [Linux-uvc-devel] Microsoft NX-6000
In-Reply-To: <45B50987.6070101@studdart.com>
References: <45B432F7.1060101@studdart.com>
	<200701221727.55221.laurent.pinchart@skynet.be>
	<45B50987.6070101@studdart.com>
Message-ID: <200701222314.56125.laurent.pinchart@skynet.be>

Hi James,

> So sometimes, just sometimes uvcapture runs through.... Not sure why or
> how yet. I get a file, which is attached, but it either contains junk or
> something strange. It's not a jpeg anyway. Anyone have any ideas what it
> is?

It definitely contains JPEG data in random order. It looks like part of a JPEG 
stream with lots of packets missing. This means the camera doesn't send 
enough data for some reason, or the host drops most of the packets. Do you 
have access to another UVC webcam (either a Logitech or a Creative one) to 
make sure there is no problem with your USB controller ?

You could also try to log more information in the isochronous URB completion 
handler. Printing each packet size with the first 16 bytes or so would be 
useful, but that might fill the kernel log very fast. Just make sure printk() 
is fast enough (adding a packet count to the printk's would be enough).

Cheers,

Laurent Pinchart


From james at studdart.com  Mon Jan 22 23:31:31 2007
From: james at studdart.com (James Studdart)
Date: Mon, 22 Jan 2007 17:31:31 -0500
Subject: [Linux-uvc-devel] Microsoft NX-6000
In-Reply-To: <200701222314.56125.laurent.pinchart@skynet.be>
References: <45B432F7.1060101@studdart.com>
	<200701221727.55221.laurent.pinchart@skynet.be>
	<45B50987.6070101@studdart.com>
	<200701222314.56125.laurent.pinchart@skynet.be>
Message-ID: <45B53B43.5030807@studdart.com>


Well, I'll be damned... luvcview works! Colour looks a bit off but I'll 
look at that later and quality is low,  but it might just be the camera. 
I'll get a fresh version of the uvc code base and make sure it's just 
those changes in the diff that make it work and let you know.

So, it's a bit worrying that the command line capture program doesn't 
work, or anything apart from luvcview for that matter. I'll have to look 
at that when I get a chance. uvccapture does get some data, sometimes. I 
get three behaviors:
1: get no data from the camera at all, hangs.
2: get some data but not enough, does not detect the end of the frame, 
hangs.
3: gets enough and detects the end, but it's the kind of stuff we see in 
that attachment.

I'm very happy luvcview works though.

Cheers,
 James.


Laurent Pinchart wrote:
> Hi James,
>
>   
>> So sometimes, just sometimes uvcapture runs through.... Not sure why or
>> how yet. I get a file, which is attached, but it either contains junk or
>> something strange. It's not a jpeg anyway. Anyone have any ideas what it
>> is?
>>     
>
> It definitely contains JPEG data in random order. It looks like part of a JPEG 
> stream with lots of packets missing. This means the camera doesn't send 
> enough data for some reason, or the host drops most of the packets. Do you 
> have access to another UVC webcam (either a Logitech or a Creative one) to 
> make sure there is no problem with your USB controller ?
>
> You could also try to log more information in the isochronous URB completion 
> handler. Printing each packet size with the first 16 bytes or so would be 
> useful, but that might fill the kernel log very fast. Just make sure printk() 
> is fast enough (adding a packet count to the printk's would be enough).
>
> Cheers,
>
> Laurent Pinchart
>
> --
> This email has been verified as Virus free
> Virus Protection and more available at http://www.plus.net
>
>   


From laurent.pinchart at skynet.be  Mon Jan 22 23:36:54 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 22 Jan 2007 23:36:54 +0100
Subject: [Linux-uvc-devel] Microsoft NX-6000
In-Reply-To: <20070122164107.GB20978@idiap.ch>
References: <45B432F7.1060101@studdart.com>
	<200701221727.55221.laurent.pinchart@skynet.be>
	<20070122164107.GB20978@idiap.ch>
Message-ID: <200701222336.55189.laurent.pinchart@skynet.be>

Hi Olivier,

I forgot to mention you will need to load the firmware before the camera will 
be recognised by the driver.

I attached a quick-and-dirty code to extract the firmware from the MacOSX 
driver and load it in the webcam. The code comes from a patch written by 
Ronald Bultje. My goal is to delegate firmware loading to the user-space 
fxload software, but Ronald would like to integrate it in the driver instead. 
Nothing has been decided yet.

I would welcome a tool to extract the firmware from the driver and output it 
in a file readable by fxload.

Cheers,

Laurent Pinchart
-------------- next part --------------
A non-text attachment was scrubbed...
Name: isight.fw.patch
Type: text/x-diff
Size: 3720 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070122/1043bea1/attachment.patch>

From mxhaard at magic.fr  Mon Jan 22 23:41:14 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Mon, 22 Jan 2007 23:41:14 +0100
Subject: [Linux-uvc-devel] Microsoft NX-6000
In-Reply-To: <45B53B43.5030807@studdart.com>
References: <45B432F7.1060101@studdart.com>
	<200701222314.56125.laurent.pinchart@skynet.be>
	<45B53B43.5030807@studdart.com>
Message-ID: <200701222341.15134.mxhaard@magic.fr>

Le Lundi 22 Janvier 2007 23:31, James Studdart a ?crit?:
James,
> Well, I'll be damned... luvcview works! 
Cool :)
> Colour looks a bit off but I'll 
Did you try to adjust the gamma setting ?
Can you take a picture with luvcview and mail me the file ?
> look at that later and quality is low,  but it might just be the camera.
> I'll get a fresh version of the uvc code base and make sure it's just
> those changes in the diff that make it work and let you know.
>
> So, it's a bit worrying that the command line capture program doesn't
> work, or anything apart from luvcview for that matter. I'll have to look
> at that when I get a chance. uvccapture does get some data, sometimes. I
> get three behaviors:
> 1: get no data from the camera at all, hangs.
> 2: get some data but not enough, does not detect the end of the frame,
> hangs.
> 3: gets enough and detects the end, but it's the kind of stuff we see in
> that attachment.
>
> I'm very happy luvcview works though.
I am happy for you :)
>
> Cheers,
>  James.
>
> Laurent Pinchart wrote:
> > Hi James,
> >
> >> So sometimes, just sometimes uvcapture runs through.... Not sure why or
> >> how yet. I get a file, which is attached, but it either contains junk or
> >> something strange. It's not a jpeg anyway. Anyone have any ideas what it
> >> is?
> >
> > It definitely contains JPEG data in random order. It looks like part of a
> > JPEG stream with lots of packets missing. This means the camera doesn't
> > send enough data for some reason, or the host drops most of the packets.
> > Do you have access to another UVC webcam (either a Logitech or a Creative
> > one) to make sure there is no problem with your USB controller ?
> >
> > You could also try to log more information in the isochronous URB
> > completion handler. Printing each packet size with the first 16 bytes or
> > so would be useful, but that might fill the kernel log very fast. Just
> > make sure printk() is fast enough (adding a packet count to the printk's
> > would be enough).
> >
> > Cheers,
> >
> > Laurent Pinchart
> >
> > --
> > This email has been verified as Virus free
> > Virus Protection and more available at http://www.plus.net
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
Cheers
-- 
Michel Xhaard
http://mxhaard.free.fr


From Olivier.Bornet at idiap.ch  Tue Jan 23 09:59:05 2007
From: Olivier.Bornet at idiap.ch (Olivier Bornet)
Date: Tue, 23 Jan 2007 09:59:05 +0100
Subject: [Linux-uvc-devel]  Apple iSight
In-Reply-To: <200701222307.53511.laurent.pinchart@skynet.be>
References: <45B432F7.1060101@studdart.com>
	<200701221727.55221.laurent.pinchart@skynet.be>
	<20070122164107.GB20978@idiap.ch>
	<200701222307.53511.laurent.pinchart@skynet.be>
Message-ID: <20070123085905.GA27363@idiap.ch>

Hi Laurent,

On Mon, Jan 22, 2007 at 11:07:53PM +0100, Laurent Pinchart wrote:
> I haven't made any progress myself (as I don't own any Mac), and haven't heard 
> of my Mac developers yet. I tried to put together patches from a few months 
> ago with the latest driver revision. Please test the attached patch. If it 
> doesn't work, push the trace level to a higher value and send me the kernel 
> log.

Seems that the patch don't detect the iSight at all. Here is the trace
(setting uvc_trace_param to 0xff before loading the module):

  [17182291.148000] uvcvideo: Adding mapping Brightness to control 00000000-0000-0000-0000-000000000101/2.
  [17182291.148000] uvcvideo: Adding mapping Contrast to control 00000000-0000-0000-0000-000000000101/3.
  [17182291.148000] uvcvideo: Adding mapping Hue to control 00000000-0000-0000-0000-000000000101/6.
  [17182291.148000] uvcvideo: Adding mapping Saturation to control 00000000-0000-0000-0000-000000000101/7.
  [17182291.148000] uvcvideo: Adding mapping Sharpness to control 00000000-0000-0000-0000-000000000101/8.
  [17182291.148000] uvcvideo: Adding mapping Gamma to control 00000000-0000-0000-0000-000000000101/9.
  [17182291.148000] uvcvideo: Adding mapping Backlight Compensation to control 00000000-0000-0000-0000-000000000101/1.
  [17182291.148000] uvcvideo: Adding mapping Gain to control 00000000-0000-0000-0000-000000000101/4.
  [17182291.148000] uvcvideo: Adding mapping Power Line Frequency to control 00000000-0000-0000-0000-000000000101/5.
  [17182291.148000] uvcvideo: Adding mapping Hue, Auto to control 00000000-0000-0000-0000-000000000101/16.
  [17182291.148000] uvcvideo: Adding mapping Pan (relative) to control 63610682-5070-49ab-b8cc-b3855e8d2256/1.
  [17182291.148000] uvcvideo: Adding mapping Tilt (relative) to control 63610682-5070-49ab-b8cc-b3855e8d2256/1.
  [17182291.148000] uvcvideo: Adding mapping Pan/Tilt (reset) to control 63610682-5070-49ab-b8cc-b3855e8d2256/2.
  [17182291.152000] uvcvideo: Adding mapping Exposure, Auto to control 00000000-0000-0000-0000-000000000001/2.
  [17182291.152000] uvcvideo: Adding mapping Exposure (Absolute) to control 00000000-0000-0000-0000-000000000001/4.
  [17182291.152000] uvcvideo: Adding mapping White Balance Temperature, Auto to control 00000000-0000-0000-0000-000000000101/11.
  [17182291.152000] uvcvideo: Adding mapping White Balance Temperature to control 00000000-0000-0000-0000-000000000101/10.
  [17182291.152000] usbcore: registered new driver uvcvideo
  [17182291.152000] USB Video Class driver (v0.1.0)

Using a Logitech QuickCam Fusion with this patch is OK:

  [17181893.840000] usb 5-3: new high speed USB device using ehci_hcd and address 9
  [17181894.148000] usb 5-3: configuration #1 chosen from 1 choice
  [17181894.148000] uvcvideo: Probing known UVC device 3 (046d:08c1)
  [17181894.148000] uvcvideo: Found format MJPEG.
  ...

I have loaded the firmware with the "original" extract tool from Ronald
S. Bultje.

Using the patched version from Ronald S. Bultje you can find here:

  http://blogs.gnome.org/view/rbultje/2006/10/27/0

detect the cam:

  [17182258.156000] uvcvideo: Found UVC 1.00 device Built-in iSight (05ac:8501)

So, I suspect that the loading of the firmware is OK.

I'm ready to make more tests. ;)

Have a nice day.

        Olivier
-- 
Olivier Bornet, IDIAP, CP 592, CH-1920 Martigny
http://www.idiap.ch/~bornet/
http://www.idiap.ch/~bornet/pgp/
PGP-key: 0xC53D9218
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070123/b4849f47/attachment.pgp>

From laurent.pinchart at skynet.be  Tue Jan 23 11:17:47 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 23 Jan 2007 11:17:47 +0100
Subject: [Linux-uvc-devel] Apple iSight
In-Reply-To: <20070123085905.GA27363@idiap.ch>
References: <45B432F7.1060101@studdart.com>
	<200701222307.53511.laurent.pinchart@skynet.be>
	<20070123085905.GA27363@idiap.ch>
Message-ID: <200701231117.47565.laurent.pinchart@skynet.be>

Hi Olivier,

> > I haven't made any progress myself (as I don't own any Mac), and haven't
> > heard of my Mac developers yet. I tried to put together patches from a
> > few months ago with the latest driver revision. Please test the attached
> > patch. If it doesn't work, push the trace level to a higher value and
> > send me the kernel log.
>
> Seems that the patch don't detect the iSight at all. Here is the trace
> (setting uvc_trace_param to 0xff before loading the module):
>
[snip]
>
> Using a Logitech QuickCam Fusion with this patch is OK:
>
>   [17181893.840000] usb 5-3: new high speed USB device using ehci_hcd and
> address 9 [17181894.148000] usb 5-3: configuration #1 chosen from 1 choice
> [17181894.148000] uvcvideo: Probing known UVC device 3 (046d:08c1)
> [17181894.148000] uvcvideo: Found format MJPEG.
>   ...
>
> I have loaded the firmware with the "original" extract tool from Ronald
> S. Bultje.
>
> Using the patched version from Ronald S. Bultje you can find here:
>
>   http://blogs.gnome.org/view/rbultje/2006/10/27/0
>
> detect the cam:
>
>   [17182258.156000] uvcvideo: Found UVC 1.00 device Built-in iSight
> (05ac:8501)
>
> So, I suspect that the loading of the firmware is OK.

Could you send me the iSight USB descriptors (lsusb -v with usbutils 0.72 or 
newer) ? Make sure you load the firmware first.

Cheers,

Laurent Pinchart


From Olivier.Bornet at idiap.ch  Tue Jan 23 12:03:43 2007
From: Olivier.Bornet at idiap.ch (Olivier Bornet)
Date: Tue, 23 Jan 2007 12:03:43 +0100
Subject: [Linux-uvc-devel] Apple iSight
In-Reply-To: <200701231117.47565.laurent.pinchart@skynet.be>
References: <45B432F7.1060101@studdart.com>
	<200701222307.53511.laurent.pinchart@skynet.be>
	<20070123085905.GA27363@idiap.ch>
	<200701231117.47565.laurent.pinchart@skynet.be>
Message-ID: <20070123110343.GB27363@idiap.ch>

Hi Laurent,

On Tue, Jan 23, 2007 at 11:17:47AM +0100, Laurent Pinchart wrote:
> Could you send me the iSight USB descriptors (lsusb -v with usbutils 0.72 or 
> newer) ? Make sure you load the firmware first.

usbutils version 0.72-4ubuntu2.

Firmware is loaded:

  $ sudo ./extract ~/AppleUSBVideoSupport 
  Apple iSight with firmware already loaded found
  Apple iSight with firmware already loaded found

Output of lsusb -v is attached.

Have a nice day.

        Olivier
-- 
Olivier Bornet, IDIAP, CP 592, CH-1920 Martigny
http://www.idiap.ch/~bornet/
http://www.idiap.ch/~bornet/pgp/
PGP-key: 0xC53D9218
-------------- next part --------------

Bus 005 Device 007: ID 05ac:8501 Apple Computer, Inc. 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          255 Vendor Specific Class
  bDeviceSubClass       255 Vendor Specific Subclass
  bDeviceProtocol       255 Vendor Specific Protocol
  bMaxPacketSize0        64
  idVendor           0x05ac Apple Computer, Inc.
  idProduct          0x8501 
  bcdDevice            1.84
  iManufacturer           1 Micron
  iProduct                2 Built-in iSight
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          267
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              100mA
    UNRECOGNIZED:  08 24 00 02 ff ff ff 00
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0 
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0 
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
      Class specific interface descriptor for class 255 is unsupported
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 0 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          255 Vendor Specific Class
  bDeviceSubClass       255 Vendor Specific Subclass
  bDeviceProtocol       255 Vendor Specific Protocol
  bMaxPacketSize0         8
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)

Bus 005 Device 001: ID 0000:0000  
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            9 Hub
  bDeviceSubClass         0 Unused
  bDeviceProtocol         1 Single TT
  bMaxPacketSize0        64
  idVendor           0x0000 
  idProduct          0x0000 
  bcdDevice            2.06
  iManufacturer           3 Linux 2.6.17-10-386 ehci_hcd
  iProduct                2 EHCI Host Controller
  iSerial                 1 0000:00:1d.7
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           25
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xe0
      Self Powered
      Remote Wakeup
    MaxPower                0mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         9 Hub
      bInterfaceSubClass      0 Unused
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              12
Hub Descriptor:
  bLength              11
  bDescriptorType      41
  nNbrPorts             8
  wHubCharacteristic 0x000a
    No power switching (usb 1.0)
    Per-port overcurrent protection
    TT think time 8 FS bits
  bPwrOn2PwrGood       10 * 2 milli seconds
  bHubContrCurrent      0 milli Ampere
  DeviceRemovable    0x00 0x00
  PortPwrCtrlMask    0xff 0xff
 Hub Port Status:
   Port 1: 0000.0100 power
   Port 2: 0000.0000
   Port 3: 0000.0100 power
   Port 4: 0000.0503 highspeed power enable connect
   Port 5: 0000.0100 power
   Port 6: 0000.0000
   Port 7: 0000.0000
   Port 8: 0000.0100 power
Device Status:     0x0003
  Self Powered
  Remote Wakeup Enabled

Bus 004 Device 003: ID 05ac:8205 Apple Computer, Inc. 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          224 Wireless
  bDeviceSubClass         1 Radio Frequency
  bDeviceProtocol         1 Bluetooth
  bMaxPacketSize0        64
  idVendor           0x05ac Apple Computer, Inc.
  idProduct          0x8205 
  bcdDevice           19.65
  iManufacturer           0 
  iProduct                0 
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          193
    bNumInterfaces          3
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xe0
      Self Powered
      Remote Wakeup
    MaxPower                0mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           3
      bInterfaceClass       224 Wireless
      bInterfaceSubClass      1 Radio Frequency
      bInterfaceProtocol      1 Bluetooth
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x02  EP 2 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           2
      bInterfaceClass       224 Wireless
      bInterfaceSubClass      1 Radio Frequency
      bInterfaceProtocol      1 Bluetooth
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x03  EP 3 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           2
      bInterfaceClass       224 Wireless
      bInterfaceSubClass      1 Radio Frequency
      bInterfaceProtocol      1 Bluetooth
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x03  EP 3 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0009  1x 9 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0009  1x 9 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           2
      bInterfaceClass       224 Wireless
      bInterfaceSubClass      1 Radio Frequency
      bInterfaceProtocol      1 Bluetooth
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x03  EP 3 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0011  1x 17 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0011  1x 17 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           2
      bInterfaceClass       224 Wireless
      bInterfaceSubClass      1 Radio Frequency
      bInterfaceProtocol      1 Bluetooth
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x03  EP 3 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0019  1x 25 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0019  1x 25 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           2
      bInterfaceClass       224 Wireless
      bInterfaceSubClass      1 Radio Frequency
      bInterfaceProtocol      1 Bluetooth
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x03  EP 3 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0021  1x 33 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0021  1x 33 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           2
      bInterfaceClass       224 Wireless
      bInterfaceSubClass      1 Radio Frequency
      bInterfaceProtocol      1 Bluetooth
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x03  EP 3 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0031  1x 49 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0031  1x 49 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass       254 Application Specific Interface
      bInterfaceSubClass      1 Device Firmware Update
      bInterfaceProtocol      0 
      iInterface              0 
Device Status:     0x0001
  Self Powered

Bus 004 Device 001: ID 0000:0000  
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            9 Hub
  bDeviceSubClass         0 Unused
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  idVendor           0x0000 
  idProduct          0x0000 
  bcdDevice            2.06
  iManufacturer           3 Linux 2.6.17-10-386 uhci_hcd
  iProduct                2 UHCI Host Controller
  iSerial                 1 0000:00:1d.3
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           25
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xe0
      Self Powered
      Remote Wakeup
    MaxPower                0mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         9 Hub
      bInterfaceSubClass      0 Unused
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval             255
Hub Descriptor:
  bLength               9
  bDescriptorType      41
  nNbrPorts             2
  wHubCharacteristic 0x000a
    No power switching (usb 1.0)
    Per-port overcurrent protection
  bPwrOn2PwrGood        1 * 2 milli seconds
  bHubContrCurrent      0 milli Ampere
  DeviceRemovable    0x00
  PortPwrCtrlMask    0xff
 Hub Port Status:
   Port 1: 0000.0103 power enable connect
   Port 2: 0000.0100 power
Device Status:     0x0003
  Self Powered
  Remote Wakeup Enabled

Bus 003 Device 002: ID 05ac:8240 Apple Computer, Inc. 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0         8
  idVendor           0x05ac Apple Computer, Inc.
  idProduct          0x8240 
  bcdDevice            1.09
  iManufacturer           1 Apple Computer, Inc.
  iProduct                2 IR Receiver
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           34
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xa0
      (Bus Powered)
      Remote Wakeup
    MaxPower              100mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         3 Human Interface Devices
      bInterfaceSubClass      0 No Subclass
      bInterfaceProtocol      0 None
      iInterface              0 
        HID Device Descriptor:
          bLength                 9
          bDescriptorType        33
          bcdHID               1.11
          bCountryCode            0 Not supported
          bNumDescriptors         1
          bDescriptorType        34 Report
          wDescriptorLength      41
         Report Descriptors: 
           ** UNAVAILABLE **
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval              10
Device Status:     0x0000
  (Bus Powered)

Bus 003 Device 001: ID 0000:0000  
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            9 Hub
  bDeviceSubClass         0 Unused
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  idVendor           0x0000 
  idProduct          0x0000 
  bcdDevice            2.06
  iManufacturer           3 Linux 2.6.17-10-386 uhci_hcd
  iProduct                2 UHCI Host Controller
  iSerial                 1 0000:00:1d.2
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           25
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xe0
      Self Powered
      Remote Wakeup
    MaxPower                0mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         9 Hub
      bInterfaceSubClass      0 Unused
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval             255
Hub Descriptor:
  bLength               9
  bDescriptorType      41
  nNbrPorts             2
  wHubCharacteristic 0x000a
    No power switching (usb 1.0)
    Per-port overcurrent protection
  bPwrOn2PwrGood        1 * 2 milli seconds
  bHubContrCurrent      0 milli Ampere
  DeviceRemovable    0x00
  PortPwrCtrlMask    0xff
 Hub Port Status:
   Port 1: 0000.0100 power
   Port 2: 0000.0103 power enable connect
Device Status:     0x0003
  Self Powered
  Remote Wakeup Enabled

Bus 002 Device 001: ID 0000:0000  
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            9 Hub
  bDeviceSubClass         0 Unused
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  idVendor           0x0000 
  idProduct          0x0000 
  bcdDevice            2.06
  iManufacturer           3 Linux 2.6.17-10-386 uhci_hcd
  iProduct                2 UHCI Host Controller
  iSerial                 1 0000:00:1d.1
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           25
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xe0
      Self Powered
      Remote Wakeup
    MaxPower                0mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         9 Hub
      bInterfaceSubClass      0 Unused
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval             255
Hub Descriptor:
  bLength               9
  bDescriptorType      41
  nNbrPorts             2
  wHubCharacteristic 0x000a
    No power switching (usb 1.0)
    Per-port overcurrent protection
  bPwrOn2PwrGood        1 * 2 milli seconds
  bHubContrCurrent      0 milli Ampere
  DeviceRemovable    0x00
  PortPwrCtrlMask    0xff
 Hub Port Status:
   Port 1: 0000.0100 power
   Port 2: 0000.0100 power
Device Status:     0x0003
  Self Powered
  Remote Wakeup Enabled

Bus 001 Device 004: ID 05ac:0218 Apple Computer, Inc. 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0         8
  idVendor           0x05ac Apple Computer, Inc.
  idProduct          0x0218 
  bcdDevice            0.60
  iManufacturer           1 Apple Computer
  iProduct                2 Apple Internal Keyboard / Trackpad
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           84
    bNumInterfaces          3
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xa0
      (Bus Powered)
      Remote Wakeup
    MaxPower               40mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         3 Human Interface Devices
      bInterfaceSubClass      1 Boot Interface Subclass
      bInterfaceProtocol      1 Keyboard
      iInterface              3 Apple Internal Keyboard
        HID Device Descriptor:
          bLength                 9
          bDescriptorType        33
          bcdHID               1.11
          bCountryCode           13 International (ISO)
          bNumDescriptors         1
          bDescriptorType        34 Report
          wDescriptorLength      73
         Report Descriptors: 
           ** UNAVAILABLE **
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               8
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         3 Human Interface Devices
      bInterfaceSubClass      1 Boot Interface Subclass
      bInterfaceProtocol      2 Mouse
      iInterface              4 Touchpad
        HID Device Descriptor:
          bLength                 9
          bDescriptorType        33
          bcdHID               1.11
          bCountryCode            0 Not supported
          bNumDescriptors         1
          bDescriptorType        34 Report
          wDescriptorLength      89
         Report Descriptors: 
           ** UNAVAILABLE **
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               8
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         3 Human Interface Devices
      bInterfaceSubClass      0 No Subclass
      bInterfaceProtocol      0 None
      iInterface              3 Apple Internal Keyboard
        HID Device Descriptor:
          bLength                 9
          bDescriptorType        33
          bcdHID               1.11
          bCountryCode            0 Not supported
          bNumDescriptors         1
          bDescriptorType        34 Report
          wDescriptorLength      20
         Report Descriptors: 
           ** UNAVAILABLE **
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x84  EP 4 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval               8
Device Status:     0x0000
  (Bus Powered)

Bus 001 Device 001: ID 0000:0000  
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            9 Hub
  bDeviceSubClass         0 Unused
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  idVendor           0x0000 
  idProduct          0x0000 
  bcdDevice            2.06
  iManufacturer           3 Linux 2.6.17-10-386 uhci_hcd
  iProduct                2 UHCI Host Controller
  iSerial                 1 0000:00:1d.0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           25
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xe0
      Self Powered
      Remote Wakeup
    MaxPower                0mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         9 Hub
      bInterfaceSubClass      0 Unused
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval             255
Hub Descriptor:
  bLength               9
  bDescriptorType      41
  nNbrPorts             2
  wHubCharacteristic 0x000a
    No power switching (usb 1.0)
    Per-port overcurrent protection
  bPwrOn2PwrGood        1 * 2 milli seconds
  bHubContrCurrent      0 milli Ampere
  DeviceRemovable    0x00
  PortPwrCtrlMask    0xff
 Hub Port Status:
   Port 1: 0000.0100 power
   Port 2: 0000.0103 power enable connect
Device Status:     0x0003
  Self Powered
  Remote Wakeup Enabled
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070123/1819de71/attachment.pgp>

From laurent.pinchart at skynet.be  Tue Jan 23 13:16:29 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 23 Jan 2007 13:16:29 +0100
Subject: [Linux-uvc-devel] Apple iSight
In-Reply-To: <20070123110343.GB27363@idiap.ch>
References: <45B432F7.1060101@studdart.com>
	<200701231117.47565.laurent.pinchart@skynet.be>
	<20070123110343.GB27363@idiap.ch>
Message-ID: <200701231316.29141.laurent.pinchart@skynet.be>

Hi Olivier,

> > Could you send me the iSight USB descriptors (lsusb -v with usbutils 0.72
> > or newer) ? Make sure you load the firmware first.
>
> usbutils version 0.72-4ubuntu2.
>
> Firmware is loaded:
>
>   $ sudo ./extract ~/AppleUSBVideoSupport
>   Apple iSight with firmware already loaded found
>   Apple iSight with firmware already loaded found
>
> Output of lsusb -v is attached.

Seems the iSight is getting less and less UVC compliant with each release. 
Apple engineers made it clear that the iSight is not supposed to be UVC 
compliant. They just used parts of the spec and filled gaps with proprietary 
protocols. Previous releases of the firmware advertised UVC-complient 
interfaces.

I could probably write another iSight-specific detection patch. Will it break 
with the next firmware release ? The iSight moves slowly from UVC to a full 
proprietary webcam with each firmware release. The Linux UVC driver will have 
to stop supporting this at some point. A nice alternative would be to write 
an open-source firmware. Anyone interested ? :-)

Cheers,

Laurent Pinchart


From antonio.bertoni at infinito.it  Wed Jan 24 00:33:09 2007
From: antonio.bertoni at infinito.it (Antonio Bertoni)
Date: Tue, 23 Jan 2007 23:33:09 +0000
Subject: [Linux-uvc-devel] 046d:08c1 Logitech, Inc. Fusion and UVC !
In-Reply-To: <200701211114.29283.laurent.pinchart@skynet.be>
References: <200701192339.48314.antonio.bertoni@infinito.it>
	<200701210124.41064.antonio.bertoni@infinito.it>
	<200701211114.29283.laurent.pinchart@skynet.be>
Message-ID: <200701232333.10057.antonio.bertoni@infinito.it>


> Are you sure your running current kernel has been compiled
> from /usr/src/linx-2.6.19.1, or at least with the same set of options ? It
> doesn't seem so.

Yes , I' m sure that my running kernel has been compiled 
from /usr/src/linx-2.6.19.1 .
 
root at Storm:/usr/src/linux-2.6.19.1#
   make mrproper && make xconfig && make && make modules_install ... 



What do you mean with the same set of options ?

Ciao 
Antonio

>
> > The compilation was ok :
> >
> > root at Storm:/home/antonio/trunk# make
> > Building USB Video Class driver...
> > make[1]: Entering directory `/usr/src/linux-2.6.19.1'
> >   Building modules, stage 2.
> >   MODPOST 1 modules
> > make[1]: Leaving directory `/usr/src/linux-2.6.19.1'
> >
> > root at Storm:/home/antonio/trunk# make install
> > Installing USB Video Class driver...
> > make[1]: Entering directory `/usr/src/linux-2.6.19.1'
> >   INSTALL /home/antonio/trunk/uvcvideo.ko
> >   DEPMOD  2.6.19.1
> > make[1]: Leaving directory `/usr/src/linux-2.6.19.1'
> > depmod -ae
> > root at Storm:/home/antonio/trunk#
>
> Best Regards,
>
> Laurent Pinchart


From mailinglisten at habmalnefrage.de  Wed Jan 24 07:03:38 2007
From: mailinglisten at habmalnefrage.de (Martin)
Date: Wed, 24 Jan 2007 07:03:38 +0100
Subject: [Linux-uvc-devel] 046d:08c1 Logitech, Inc. Fusion and UVC !
In-Reply-To: <200701232333.10057.antonio.bertoni@infinito.it>
References: <200701192339.48314.antonio.bertoni@infinito.it>
	<200701210124.41064.antonio.bertoni@infinito.it>
	<200701211114.29283.laurent.pinchart@skynet.be>
	<200701232333.10057.antonio.bertoni@infinito.it>
Message-ID: <20070124060338.GA16163@delight>

On Tue, Jan 23, 2007 at 11:33:09PM +0000, Antonio Bertoni wrote:
> > Are you sure your running current kernel has been compiled
> > from /usr/src/linx-2.6.19.1, or at least with the same set of options ? It
> > doesn't seem so.
> 
> Yes , I' m sure that my running kernel has been compiled 
> >from /usr/src/linx-2.6.19.1 .
>  
> root at Storm:/usr/src/linux-2.6.19.1#
                      ^^^^^^^^^^^^^^

Do the same from /usr/src/linux. ;-)

Shouldn't /usr/src/linux link to the currently used source?

>    make mrproper && make xconfig && make && make modules_install ... 
> 
> What do you mean with the same set of options ?

Before you compile a kernel, you normally do a `make menuconfig` or
xconfig or something (see make help for more options).

Then you should compile your kernel (make).

Thereafter one would recompile all of his/her kernel modules and install
them (make modules_install).

Then we all should rebuild our linux-uvc module. (cd .../linux-uvc &&
make && cp uvcvideo.ko /lib/modules/...)

He meant, it looks like you changed your kernel options before
recompiling linux-uvc. Or it looks like you did not recompile linux-uvc
after the last recompilation of your kernel.

Your error message shows, that the kernel-functions called by linux-uvc
are not found. This usually happens when the kernel is compiled, then
the module is compiled, then the kernel-config is changed and the kernel
gets recompiled.

HTH

Martin


From antonio.bertoni at infinito.it  Wed Jan 24 13:49:13 2007
From: antonio.bertoni at infinito.it (antonio.bertoni at infinito.it)
Date: Wed, 24 Jan 2007 13:49:13 +0100
Subject: [Linux-uvc-devel] 046d:08c1 Logitech, Inc. Fusion and UVC !
In-Reply-To: <20070124060338.GA16163@delight>
References: <200701192339.48314.antonio.bertoni@infinito.it>
	<200701210124.41064.antonio.bertoni@infinito.it>
	<200701211114.29283.laurent.pinchart@skynet.be>
	<200701232333.10057.antonio.bertoni@infinito.it>
	<20070124060338.GA16163@delight>
Message-ID: <web-118241378@infinito.it>

Yes /usr/src/linux-2.6.19.1 is linked with
/usr/src/linux.

I have change the .config (with "make xconfig" after the 
first compilation) in the kernel source
without recompile. Is this
the error ?

I'll try to recompile the kernel and then the UVC.

Thanks very much

Antonio

On Wed, 24 Jan 2007 07:03:38/ +0100
  Martin <mailinglisten at habmalnefrage.de> wrote:
> On Tue, Jan 23, 2007 at 11:33:09PM +0000, Antonio 
>Bertoni wrote:
>> > Are you sure your running current kernel has been 
>>compiled
>> > from /usr/src/linx-2.6.19.1, or at least with the same 
>>set of options ? It
>> > doesn't seem so.
>> 
>> Yes , I' m sure that my running kernel has been compiled 
>> >from /usr/src/linx-2.6.19.1 .
>>  
>> root at Storm:/usr/src/linux-2.6.19.1#
>                      ^^^^^^^^^^^^^^
> 
> Do the same from /usr/src/linux. ;-)
> 
> Shouldn't /usr/src/linux link to the currently used 
>source?
> 
>>    make mrproper && make xconfig && make && make 
>>modules_install ... 
>> 
>> What do you mean with the same set of options ?
> 
> Before you compile a kernel, you normally do a `make 
>menuconfig` or
> xconfig or something (see make help for more options).
> 
> Then you should compile your kernel (make).
> 
> Thereafter one would recompile all of his/her kernel 
>modules and install
> them (make modules_install).
> 
> Then we all should rebuild our linux-uvc module. (cd 
>.../linux-uvc &&
> make && cp uvcvideo.ko /lib/modules/...)
> 
> He meant, it looks like you changed your kernel options 
>before
> recompiling linux-uvc. Or it looks like you did not 
>recompile linux-uvc
> after the last recompilation of your kernel.
> 
> Your error message shows, that the kernel-functions 
>called by linux-uvc
> are not found. This usually happens when the kernel is 
>compiled, then
> the module is compiled, then the kernel-config is 
>changed and the kernel
> gets recompiled.
> 
> HTH
> 
> Martin
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel



From martijn at uncinc.nl  Wed Jan 24 15:28:09 2007
From: martijn at uncinc.nl (Martijn Houtman)
Date: Wed, 24 Jan 2007 15:28:09 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 5000 (046d:08ce) not
	recognized
Message-ID: <596C5A51-D701-4B16-B285-DFDDB93E777B@uncinc.nl>

Hi all,

I've aqcuired the above webcam, and tried to make it work with UVC, but
somehow it does not register the webcam as a V4L device:

Jan 23 18:15:48 juniorRr kernel: [17200000.456000] usbcore:  
registered new
driver uvcvideo
Jan 23 18:15:48 juniorRr kernel: [17200000.456000] USB Video Class  
driver
(v0.1.0)
Jan 23 18:15:58 juniorRr kernel: [17200010.304000] usb 1-8: new high  
speed USB
device using ehci_hcd and address 21
Jan 23 18:15:59 juniorRr kernel: [17200010.572000] usb 1-8:  
configuration #1
chosen from 1 choice
Jan 23 18:15:59 juniorRr kernel: [17200010.572000] uvcvideo: Found  
UVC 1.00
device <unnamed> (046d:08ce)

And that's it. No video-device is created. Am I missing something?

With kind regards,
-- 
Martijn Houtman



From pauljurczak at yahoo.com  Wed Jan 24 19:45:21 2007
From: pauljurczak at yahoo.com (Paul Jurczak)
Date: Wed, 24 Jan 2007 10:45:21 -0800 (PST)
Subject: [Linux-uvc-devel] Building the driver and application with raw
	Bayer capability
Message-ID: <20070124184521.98052.qmail@web60518.mail.yahoo.com>

Hello,

  I'm making steps toward being able to use UVC cameras in my application. I've successfully built V4L2 application capturing streaming data from camera - my first Linux, non-"Hello World" application. I've got stuck on trying to get raw Bayer mode working. I was trying to get the newest version of the driver and header files from http://developer.berlios.de/projects/linux-uvc, but it shows: This Project Has Not Released Any Files. Is there another place to get them?

Regards,
Paul.





 
____________________________________________________________________________________
Any questions? Get answers on any topic at www.Answers.yahoo.com.  Try it now.


From g.cataldi at email.it  Wed Jan 24 19:24:39 2007
From: g.cataldi at email.it (Giovanni Cataldi)
Date: Wed, 24 Jan 2007 19:24:39 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 5000 (046d:08ce) not
 recognized
In-Reply-To: <596C5A51-D701-4B16-B285-DFDDB93E777B@uncinc.nl>
References: <596C5A51-D701-4B16-B285-DFDDB93E777B@uncinc.nl>
Message-ID: <45B7A467.8010403@email.it>

Martijn Houtman ha scritto:
> Hi all,
>
> I've aqcuired the above webcam, and tried to make it work with UVC, but
> somehow it does not register the webcam as a V4L device:
>
> Jan 23 18:15:48 juniorRr kernel: [17200000.456000] usbcore:  
> registered new
> driver uvcvideo
> Jan 23 18:15:48 juniorRr kernel: [17200000.456000] USB Video Class  
> driver
> (v0.1.0)
> Jan 23 18:15:58 juniorRr kernel: [17200010.304000] usb 1-8: new high  
> speed USB
> device using ehci_hcd and address 21
> Jan 23 18:15:59 juniorRr kernel: [17200010.572000] usb 1-8:  
> configuration #1
> chosen from 1 choice
> Jan 23 18:15:59 juniorRr kernel: [17200010.572000] uvcvideo: Found  
> UVC 1.00
> device <unnamed> (046d:08ce)
>
> And that's it. No video-device is created. Am I missing something?
>
> With kind regards,
>   
That worked for me on my debian SID (Logitech QuickCam Pro 5000: Bus 001
Device 004: ID 046d:08c5 Logitech, Inc.). Hopin' it's the same:

1st way:
> # modprobe v4l1_compat videodev v4l2_common
> # aptitude install linux-uvc-source linux-uvc-tools libpt-plugins-v4l2
> v4l2ucp subversion libsdl1.2-dev
> # m-a a-i linux-uvc
2nd way:

> # aptitude install libpt-plugins-v4l2 v4l2ucp subversion libsdl1.2-dev
> ~ $ svn checkout svn://svn.berlios.de/linux-uvc/linux-uvc/trunk
> ~/trunk # make
> ~/trunk # make install
THEN (look at last avaible sources):

> ~ $ wget
> http://mxhaard.free.fr/spca50x/Investigation/uvc/luvcview-20060920.tar.gz
> ~ $ zcat luvcview-20060920.tar.gz |tar xvf -
> ~ $ cd luvcview-20060920
> ~/luvcview-20060920 # make
> ~/luvcview-20060920 # make install
> ~ $ luvcview

good luck,

Giovanni

ps: maybe you find here some not-strictly-needed libs, but I use this
way also to make ekiga svn work with my camera.
 
 
 --
 Email.it, the professional e-mail, gratis per te: http://www.email.it/f
 
 Sponsor:
 Cerchi un gioiello per te o da regalare? Sfoglia il nostro catalogo on-line e non lasciarti sfuggire le numerose occasioni presenti!
 Clicca qui: http://adv.email.it/cgi-bin/foclick.cgi?mid=5631&d=24-1


From laurent.pinchart at skynet.be  Wed Jan 24 21:58:55 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 24 Jan 2007 21:58:55 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 5000 (046d:08ce) not
	recognized
In-Reply-To: <596C5A51-D701-4B16-B285-DFDDB93E777B@uncinc.nl>
References: <596C5A51-D701-4B16-B285-DFDDB93E777B@uncinc.nl>
Message-ID: <200701242158.56166.laurent.pinchart@skynet.be>

On Wednesday 24 January 2007 15:28, Martijn Houtman wrote:
> Hi all,
>
> I've aqcuired the above webcam, and tried to make it work with UVC, but
> somehow it does not register the webcam as a V4L device:
>
> Jan 23 18:15:48 juniorRr kernel: [17200000.456000] usbcore:
> registered new
> driver uvcvideo
> Jan 23 18:15:48 juniorRr kernel: [17200000.456000] USB Video Class
> driver
> (v0.1.0)
> Jan 23 18:15:58 juniorRr kernel: [17200010.304000] usb 1-8: new high
> speed USB
> device using ehci_hcd and address 21
> Jan 23 18:15:59 juniorRr kernel: [17200010.572000] usb 1-8:
> configuration #1
> chosen from 1 choice
> Jan 23 18:15:59 juniorRr kernel: [17200010.572000] uvcvideo: Found
> UVC 1.00
> device <unnamed> (046d:08ce)
>
> And that's it. No video-device is created. Am I missing something?

As the driver detects the webcam and doesn't report any error, I'd have a look 
at your udev configuration.

Best regards,

Laurent Pinchart


From martijn at uncinc.nl  Wed Jan 24 22:06:22 2007
From: martijn at uncinc.nl (Martijn Houtman)
Date: Wed, 24 Jan 2007 22:06:22 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 5000 (046d:08ce) not
	recognized
In-Reply-To: <200701242158.56166.laurent.pinchart@skynet.be>
References: <596C5A51-D701-4B16-B285-DFDDB93E777B@uncinc.nl>
	<200701242158.56166.laurent.pinchart@skynet.be>
Message-ID: <90D39E72-0067-4143-8A6E-0B75E17C2816@uncinc.nl>

Hi,

On Jan 24, 2007, at 9:58 PM, Laurent Pinchart wrote:

>> And that's it. No video-device is created. Am I missing something?
>
> As the driver detects the webcam and doesn't report any error, I'd  
> have a look
> at your udev configuration.

After I rebooted the machine and tried again, it worked flawlessly.  
Nice work on the driver, the image quality seems perfect, which I can  
not say of other drivers I have seen so far.

I think the problem was that I tried many other drivers and somehow  
these mangled up with the uvc drivers. Just rmmod'ing did not appear  
to help, a hard reboot did. I'll look further into it later. For now,  
it works.

Thanks for your suggestions, all. Ekiga is next.

Kind regards,
-- 
Martijn Houtman.


From RalfK at ralfk.de  Thu Jan 25 07:56:00 2007
From: RalfK at ralfk.de (Ralf Krzyzaniak)
Date: Thu, 25 Jan 2007 07:56:00 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 5000 (046d:08ce) not
	recognized (here, too but diffrent)
Message-ID: <200701250756.00598.RalfK@ralfk.de>

Hello all,
after I read the message from Matijn, I thougt, that is the same cam I use 
(and it is), but I got nearly the same problem. Here is what I use and did:

Using SuSE 10.2 
Kernel Linux lx 2.6.18.2-34-bigsmp #1 SMP Mon Nov 27 11:46:27 UTC 2006 i686 
i686 i386 GNU/Linux
KDE 3.5.5 release 50.1

did download luvcview-20070107.tar.gz from 
http://mxhaard.free.fr/spca50x/Investigation/uvc/
tar xvfz luvcview-20070107.tar.gz
make and make install it
reboot (I know I have no windows, but better is better I thought)
plugged the cam in and got :

and lsusb told (thats nice):
Bus 005 Device 003: ID 046d:08ce Logitech, Inc.

/var/log/messages

Jan 25 07:36:22 lx kernel: usb 5-2: USB disconnect, address 2
Jan 25 07:36:48 lx kernel: usb 5-2: new high speed USB device using ehci_hcd 
and address 4
Jan 25 07:36:48 lx kernel: usb 5-2: new device found, idVendor=046d, 
idProduct=08ce
Jan 25 07:36:48 lx kernel: usb 5-2: new device strings: Mfr=0, Product=0, 
SerialNumber=2
Jan 25 07:36:48 lx kernel: usb 5-2: SerialNumber: 465ACB93
Jan 25 07:36:48 lx kernel: usb 5-2: configuration #1 chosen from 1 choice
Jan 25 07:36:48 lx kernel: usbcore: registered new driver snd-usb-audio

ralf at lx:~> luvcview
luvcview version 0.2.0
Video driver: x11
A window manager is available
video /dev/video0
ERROR opening V4L interface
: No such file or directory

I see that the cam is linked to a snd-usb-audio driver (??? thats not 
correct - or?) and luvcview tell me that there is no V4L interface.
Please can you help me, too? I like to use it with Skype and/or Wengo to chat, 
first, Ekiga I hadn't noticed yet, will look what this is after I will get 
this cam got to run. 
Thanks for any help,
Ralf Krzyzaniak


From pauljurczak at yahoo.com  Thu Jan 25 08:16:33 2007
From: pauljurczak at yahoo.com (Paul Jurczak)
Date: Wed, 24 Jan 2007 23:16:33 -0800 (PST)
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 5000 (046d:08ce) not
	recognized (here, too but diffrent)
Message-ID: <585829.48946.qm@web60513.mail.yahoo.com>

Hi Ralf,

You have to install the uvcdriver. I also installed following packages on my Ubuntu  box: libpt-plugins-v4l, libpt-plugins-v4l2 and xserver-xorg-video-v4l. Afterwards, I did what you just did and it's working fine for me. [disclaimer: I just started playing with Linux, so don't take me too seriously]
 
Regards,
Paul
----- Original Message ----
From: Ralf Krzyzaniak <RalfK at ralfk.de>
To: linux-uvc-devel at lists.berlios.de
Sent: Thursday, January 25, 2007 12:56:00 AM
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 5000 (046d:08ce) not recognized (here, too but diffrent)

Hello all,
after I read the message from Matijn, I thougt, that is the same cam I use 
(and it is), but I got nearly the same problem. Here is what I use and did:

Using SuSE 10.2 
Kernel Linux lx 2.6.18.2-34-bigsmp #1 SMP Mon Nov 27 11:46:27 UTC 2006 i686 
i686 i386 GNU/Linux
KDE 3.5.5 release 50.1

did download luvcview-20070107.tar.gz from 
http://mxhaard.free.fr/spca50x/Investigation/uvc/
tar xvfz luvcview-20070107.tar.gz
make and make install it
reboot (I know I have no windows, but better is better I thought)
plugged the cam in and got :

and lsusb told (thats nice):
Bus 005 Device 003: ID 046d:08ce Logitech, Inc.

/var/log/messages

Jan 25 07:36:22 lx kernel: usb 5-2: USB disconnect, address 2
Jan 25 07:36:48 lx kernel: usb 5-2: new high speed USB device using ehci_hcd 
and address 4
Jan 25 07:36:48 lx kernel: usb 5-2: new device found, idVendor=046d, 
idProduct=08ce
Jan 25 07:36:48 lx kernel: usb 5-2: new device strings: Mfr=0, Product=0, 
SerialNumber=2
Jan 25 07:36:48 lx kernel: usb 5-2: SerialNumber: 465ACB93
Jan 25 07:36:48 lx kernel: usb 5-2: configuration #1 chosen from 1 choice
Jan 25 07:36:48 lx kernel: usbcore: registered new driver snd-usb-audio

ralf at lx:~> luvcview
luvcview version 0.2.0
Video driver: x11
A window manager is available
video /dev/video0
ERROR opening V4L interface
: No such file or directory

I see that the cam is linked to a snd-usb-audio driver (??? thats not 
correct - or?) and luvcview tell me that there is no V4L interface.
Please can you help me, too? I like to use it with Skype and/or Wengo to chat, 
first, Ekiga I hadn't noticed yet, will look what this is after I will get 
this cam got to run. 
Thanks for any help,
Ralf Krzyzaniak
_______________________________________________
Linux-uvc-devel mailing list
Linux-uvc-devel at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/linux-uvc-devel





 
____________________________________________________________________________________
Any questions? Get answers on any topic at www.Answers.yahoo.com.  Try it now.


From ondrej at sury.org  Thu Jan 25 11:45:37 2007
From: ondrej at sury.org (=?ISO-8859-2?Q?Ond=F8ej_Sur=FD?=)
Date: Thu, 25 Jan 2007 11:45:37 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Ultra Vision - no output on
	/dev/video0
Message-ID: <45B88A51.8000003@sury.org>

Hi,

I bought Ultra Vision cam and it seems to have some problems.  Kernel is 
2.6.20-5-generic on Ubuntu 7.04 (daily updated).  UVC drivers are latest 
SVN.

xawtv prints:

"""
ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument
v4l2: oops: select timeout
"""

and nothing is displayed

tvtime reports:

"videoinput: Driver won't tell us its norm: Invalid argument"

and

"Frames too short from uvcvideo."

However some comm happens, because camera turns blue light on when I
access /dev/video0.


Ondrej

-- 
Ond?ej Sur? <ondrej at sury.org> ^_^ http://www.obcasnik.cz/




From RalfK at ralfk.de  Thu Jan 25 16:31:26 2007
From: RalfK at ralfk.de (Ralf Krzyzaniak)
Date: Thu, 25 Jan 2007 16:31:26 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 5000 (046d:08ce) not
	recognized (here, too but diffrent)
In-Reply-To: <585829.48946.qm@web60513.mail.yahoo.com>
References: <585829.48946.qm@web60513.mail.yahoo.com>
	(sfid-20070125_081947_112581_3AD84149)
Message-ID: <200701251631.26918.RalfK@ralfk.de>

Hi Paul,
thanks for youre fast response.
Am Donnerstag, 25. Januar 2007 08:16 schrieb Paul Jurczak:
> Hi Ralf,
> You have to install the uvcdriver. 
I thought I did it with the lines - or ? :

tar xvfz luvcview-20070107.tar.gz
cd luvcview-20070107
make 
make install 

all running under root

> I also installed following packages on 
> my Ubuntu  box: libpt-plugins-v4l, libpt-plugins-v4l2 and
> xserver-xorg-video-v4l. Afterwards, 
I have the following libs installed, too (as I have a SuSE I think the names 
are a bit diffrent)
- pwlib-plugins-v4l2
- v4l-conf
- v4l-tools

> I did what you just did and it's 
> working fine for me. [disclaimer: I just started playing with Linux, so
> don't take me too seriously]
Youre lucky, I always got the same messages. Anone else has an idea?
> Regards,
> Paul
Best Regards,
Ralf

> ----- Original Message ----
> From: Ralf Krzyzaniak <RalfK at ralfk.de>
> To: linux-uvc-devel at lists.berlios.de
> Sent: Thursday, January 25, 2007 12:56:00 AM
> Subject: [Linux-uvc-devel] Logitech QuickCam Pro 5000 (046d:08ce) not
> recognized (here, too but diffrent)
>
> Hello all,
> after I read the message from Matijn, I thougt, that is the same cam I use
> (and it is), but I got nearly the same problem. Here is what I use and did:
>
> Using SuSE 10.2
> Kernel Linux lx 2.6.18.2-34-bigsmp #1 SMP Mon Nov 27 11:46:27 UTC 2006 i686
> i686 i386 GNU/Linux
> KDE 3.5.5 release 50.1
>
> did download luvcview-20070107.tar.gz from
> http://mxhaard.free.fr/spca50x/Investigation/uvc/
> tar xvfz luvcview-20070107.tar.gz
> make and make install it
> reboot (I know I have no windows, but better is better I thought)
> plugged the cam in and got :
>
> and lsusb told (thats nice):
> Bus 005 Device 003: ID 046d:08ce Logitech, Inc.
>
> /var/log/messages
>
> Jan 25 07:36:22 lx kernel: usb 5-2: USB disconnect, address 2
> Jan 25 07:36:48 lx kernel: usb 5-2: new high speed USB device using
> ehci_hcd and address 4
> Jan 25 07:36:48 lx kernel: usb 5-2: new device found, idVendor=046d,
> idProduct=08ce
> Jan 25 07:36:48 lx kernel: usb 5-2: new device strings: Mfr=0, Product=0,
> SerialNumber=2
> Jan 25 07:36:48 lx kernel: usb 5-2: SerialNumber: 465ACB93
> Jan 25 07:36:48 lx kernel: usb 5-2: configuration #1 chosen from 1 choice
> Jan 25 07:36:48 lx kernel: usbcore: registered new driver snd-usb-audio
>
> ralf at lx:~> luvcview
> luvcview version 0.2.0
> Video driver: x11
> A window manager is available
> video /dev/video0
> ERROR opening V4L interface
>
> : No such file or directory
>
> I see that the cam is linked to a snd-usb-audio driver (??? thats not
> correct - or?) and luvcview tell me that there is no V4L interface.
> Please can you help me, too? I like to use it with Skype and/or Wengo to
> chat, first, Ekiga I hadn't noticed yet, will look what this is after I
> will get this cam got to run.
> Thanks for any help,
> Ralf Krzyzaniak
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>
>
>
>
>
> ___________________________________________________________________________
>_________ Any questions? Get answers on any topic at www.Answers.yahoo.com. 
> Try it now. _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel


From Serge.A.S at tochka.ru  Thu Jan 25 18:21:17 2007
From: Serge.A.S at tochka.ru (Serge A. Suchkov)
Date: Thu, 25 Jan 2007 20:21:17 +0300
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 5000 (046d:08ce) not
	recognized (here, too but diffrent)
In-Reply-To: <200701251631.26918.RalfK@ralfk.de>
References: <585829.48946.qm@web60513.mail.yahoo.com>
	<200701251631.26918.RalfK@ralfk.de>
Message-ID: <200701252021.17484.Serge.A.S@tochka.ru>

> Hi Paul,
> thanks for youre fast response.
> Am Donnerstag, 25. Januar 2007 08:16 schrieb Paul Jurczak:
> > Hi Ralf,
> > You have to install the uvcdriver. 
> I thought I did it with the lines - or ? :
> 
> tar xvfz luvcview-20070107.tar.gz
> cd luvcview-20070107
> make 
> make install 
> 
> all running under root
> 
Ralf,  luvcview - it is _viewer_ (SDL based GUI program).
You need uvcvideo - it is _driver_ (kernel module) 
-- 
Regards,
Serge A. Suchkov
--
No one can make you feel inferior without your consent.
		-- Eleanor Roosevelt


From RalfK at ralfk.de  Fri Jan 26 08:02:53 2007
From: RalfK at ralfk.de (Ralf Krzyzaniak)
Date: Fri, 26 Jan 2007 08:02:53 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 5000 (046d:08ce) not
	recognized (here, too but diffrent)
In-Reply-To: <200701252021.17484.Serge.A.S@tochka.ru>
References: <585829.48946.qm@web60513.mail.yahoo.com>
	<200701251631.26918.RalfK@ralfk.de>
	<200701252021.17484.Serge.A.S@tochka.ru>
	(sfid-20070126_071648_155049_811D333E)
Message-ID: <200701260802.53082.RalfK@ralfk.de>

Am Donnerstag, 25. Januar 2007 18:21 schrieb Serge A. Suchkov:
> Ralf,  luvcview - it is _viewer_ (SDL based GUI program).
> You need uvcvideo - it is _driver_ (kernel module)
Thats it, thanks a lot. It's working now- great.
Ralf

p.s. if someone can read, hmmmm, thats mush better *g*


From ondrej at sury.org  Sat Jan 27 16:51:22 2007
From: ondrej at sury.org (=?UTF-8?B?T25kxZllaiBTdXLDvQ==?=)
Date: Sat, 27 Jan 2007 16:51:22 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Ultra Vision - no output on
 /dev/video0
In-Reply-To: <941538.40335.qm@web60520.mail.yahoo.com>
References: <941538.40335.qm@web60520.mail.yahoo.com>
Message-ID: <45BB74FA.4060502@sury.org>

Paul Jurczak napsal(a):
> Hi Ondrej,
>
>   try luvcview.
>   

Tried lucview, and I get just black output.

Ondrej.

> ----- Original Message ----
> From: Ond?ej Sur? <ondrej at sury.org>
> To: linux-uvc-devel at lists.berlios.de
> Sent: Thursday, January 25, 2007 4:45:37 AM
> Subject: [Linux-uvc-devel] Logitech QuickCam Ultra Vision - no output on /dev/video0
>
> Hi,
>
> I bought Ultra Vision cam and it seems to have some problems.  Kernel is 
> 2.6.20-5-generic on Ubuntu 7.04 (daily updated).  UVC drivers are latest 
> SVN.
>
> xawtv prints:
>
> """
> ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument
> v4l2: oops: select timeout
> """
>
> and nothing is displayed
>
> tvtime reports:
>
> "videoinput: Driver won't tell us its norm: Invalid argument"
>
> and
>
> "Frames too short from uvcvideo."
>
> However some comm happens, because camera turns blue light on when I
> access /dev/video0.
>
>
> Ondrej
>
>   


-- 
Ond?ej Sur? <ondrej at sury.org> ^_^ http://www.obcasnik.cz/




From ebi9 at ozob.net  Sat Jan 27 19:48:16 2007
From: ebi9 at ozob.net (Gene Imes)
Date: Sat, 27 Jan 2007 12:48:16 -0600
Subject: [Linux-uvc-devel] green screen
Message-ID: <45BB9E70.5020505@ozob.net>

My Bodelin ProScopeHR renders a green screen in Ekiga. I can see video. 
A screenshot is here:

http://ozob.net/luvc/ekiga-screen-shot.jpg

Thanks for any help,
-- 
Gene Imes ============================= ozob.net


From nijusan at utdallas.edu  Sun Jan 28 02:03:22 2007
From: nijusan at utdallas.edu (Brandon Drummond)
Date: Sat, 27 Jan 2007 17:03:22 -0800
Subject: [Linux-uvc-devel] v4l-dvb and uvcvideo
Message-ID: <1169946202.5067.44.camel@satellite>

Hello,
I've been posting on the v4l-dvb mailing list about getting the uvcvideo
module to build and load properly after installing the v4l-dvb
distribution. The problem is that they supply their own version of the
v4l headers, and that causes any v4l related modules built with the
standard headers to fail loading with a number of unresolved symbols. A
way around this is to re-build the uvcvideo module using the v4l-dvb
headers. So within the v4l-dvb distribution you order a "make
kernel-links" command which updates the headers. One problem is that the
headers they supply are from a more up-to-date kernel, so when the
uvc_compat.h file checks the kernel it see a version < 2.6.18 (actually
2.6.17-10-generic) and subsequently tries to define a number of
structures already present in the more up-to-date videodev2.h file. A
dirty way around this is to force uvc_compat.h to think the kernel
version is > 2.6.19 to avoid the redefinitions. When I do that the
uvcvideo module builds without complaint, however, it still fails to
load issuing a series of unresolved symbols:

$ sudo insmod uvcvideo.ko
insmod: error inserting 'uvcvideo.ko': -1 Unknown symbol in module
[17185392.912000] uvcvideo: disagrees about version of symbol
video_devdata
[17185392.912000] uvcvideo: Unknown symbol video_devdata
[17185392.912000] uvcvideo: disagrees about version of symbol
video_unregister_device
[17185392.912000] uvcvideo: Unknown symbol video_unregister_device
[17185392.916000] uvcvideo: disagrees about version of symbol
video_device_alloc
[17185392.916000] uvcvideo: Unknown symbol video_device_alloc
[17185392.916000] uvcvideo: disagrees about version of symbol
video_register_device
[17185392.916000] uvcvideo: Unknown symbol video_register_device
[17185392.916000] uvcvideo: disagrees about version of symbol
video_device_release
[17185392.916000] uvcvideo: Unknown symbol video_device_release

Is there a problem with my dirty "fix". Perhaps uvcvideo is still
relying on a module that needs to be rebuilt with hte new headers.
Anyone have any ideas?

Cheers,
-Brandon Drummond



From linux23dragon at iprimus.com.au  Sun Jan 28 07:59:34 2007
From: linux23dragon at iprimus.com.au (linux23dragon)
Date: Sun, 28 Jan 2007 17:29:34 +1030
Subject: [Linux-uvc-devel] Window resize crash report,
	with luvcveiw-20070107 and QC Fusion	(046d:08c1)
Message-ID: <1169967574.3040.16.camel@linux23dragon.example.org>

________________________________________________________________________
This is just a ?end user feedback? report, on using both the UVC driver
and luvcveiw program.

This post describes only one crash issues (window re size crash). 

!!!Warning!!!

Beware, the details of this report is a bit ?over the top? and could
cause one to go crazy. I wrote this report to be useful, and to show
that I'm grateful for this web cam driver support.

Some Log information may not be relevant to the bug report.
________________________________________________________________________

Hi

I thought It might be useful to share some information on the
intermittent crashing issues I've been having with luvcveiw.

This is the following content: 


     1. System used
        
     2. Web cam and driver information
        
     3. Running the luvcveiw application
        
     1. Luvcveiw crash
        
     2. Restarting luvcveiw after crash
        
     3. 2nd luvcveiw crash
        
-----------------------------------------------------------------------


1 System used:


AMD Athlon(tm) 64 processor 3200+ (Running a 32bit Linux system)
Linux version 2.6.16.38 #2 PREEMPT
gcc version 3.4.6
GNU ld version 2.16.1
GNU C Library stable release version 2.3.6


2 Web cam and driver information:

This is the kernel driver (SVN: committed-rev="78", revision="79") log
output (Jan 28 12:05:52) when I first plug in the QC Fusion Web cam (My
Edit - without the time stamp or host name):


kernel: usb 1-6: new high speed USB device using ehci_hcd and address 4
kernel: usb 1-6: configuration #1 chosen from 1 choice
kernel: uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c1)
kernel: usbcore: registered new driver uvcvideo
kernel: USB Video Class driver (v0.1.0)
kernel: 4:3:1: cannot set freq 0 to ep 0x86
kernel: 4:3:2: cannot set freq 0 to ep 0x86
kernel: 4:3:3: cannot get freq at ep 0x86
kernel: usbcore: registered new driver snd-usb-audio



3 Running the luvcveiw application:

This is the console output when I start luvcveiw-20070107:

david at localhost:~$ luvcview
luvcview version 0.2.0
Video driver: x11
A window manager is available
video /dev/video0


luvcview is a very cool testing tool.

The video motion performance is fast and the image quality is very good.
I can also see the light correction working. The default brightness
settings from luvcveiw is a little dark, but can be adjusted. I just
left luvcveiw going with the default window size and video settings at
this time.

After leaving uvcview running for around 45 minutes, I had the following
kernel log messages (My Edit - with the time stamp, without the host
name):

Jan 28 12:34:53 kernel: EOF in empty packet.
Jan 28 12:37:31 kernel: EOF in empty packet.
Jan 28 12:40:04 kernel: EOF in empty packet.
Jan 28 12:42:11 kernel: EOF in empty packet.


        I don't know if the kernel log output is to do with the driver,
        but I have been doing nothing else but typing with Open Office
        and running Gnome terminal, luvcveiw and Gnome system log viewer
        in the background. My system is not connected to the net or
        network at this time (I do have a firewall, but it shouldn't be
        running AFAIK).
        



4 Crashing luvcveiw application:


After viewing the log output about ?EOF in empty packet?, I moved the
luvcview window around the desktop, all was good. I then tried to
maximise the window, but the program then just caused a Segmentation
fault.

However, It looked as though it was trying to unmaximize (or resize)
just before it crashed.
I did not have any system or kernel logging reports. And a output in the
gnome-terminal saying ?Segmentation fault?.

Luvcview did appear to exit out cleanly, without leaving any related
process running in the background (according to the system monitor
program ?top?). I'm not sure about memory buffers or anything like that
at this time.



5 Restarting luvcveiw after crash:

I restarted luvcveiw again without any issues and was able to maximise
unmaximise and minimise the window. I even played around with the
brightness settings. (I won't go into details about the brightness
control settings).
Again, the video motion performance was fast and the image quality was
very good. The the light correction was working. 


This was the kernel log while I was adjusting just the brightness
levels:


Jan 28 15:13:20 kernel: uvcvideo: Failed to query (130) UVC control 1
(unit 0) : -32 (exp. 26).
Jan 28 15:14:21 kernel: uvcvideo: Failed to query (135) UVC control 2
(unit 2) : -32 (exp. 2).
Jan 28 15:14:21 kernel: uvcvideo: Failed to query (130) UVC control 2
(unit 2) : -32 (exp. 2).
Jan 28 15:14:21 kernel: uvcvideo: Failed to query (131) UVC control 2
(unit 2) : -32 (exp. 2).
Jan 28 15:14:22 kernel: uvcvideo: Failed to query (130) UVC control 2
(unit 2) : -32 (exp. 2).
Jan 28 15:14:23 kernel: EOF in empty packet.
Jan 28 15:14:27 kernel: uvcvideo: Failed to query (132) UVC control 2
(unit 2) : -32 (exp. 2).
Jan 28 15:14:27 kernel: uvcvideo: Failed to query (1) UVC control 2
(unit 2) : -32 (exp. 2).
Jan 28 15:14:27 kernel: EOF in empty packet.
Jan 28 15:14:45 kernel: uvcvideo: Failed to query (130) UVC control 2
(unit 2) : -32 (exp. 2).
Jan 28 15:15:05 last message repeated 2 times
Jan 28 15:15:05 kernel: EOF in empty packet.
Jan 28 15:15:07 kernel: EOF in empty packet.
Jan 28 15:15:08 kernel: uvcvideo: Failed to query (135) UVC control 2
(unit 2) : -32 (exp. 2).
Jan 28 15:15:10 kernel: uvcvideo: Failed to query (135) UVC control 2
(unit 2) : -32 (exp. 2).
------------------------//sniped//-----------------------------------

As you can see, the ?EOF in empty packet? (issue?), has come back. I
don't think that has to do with the brightness settings (?). But I did
not need to wait 30-40 minutes to get that message.


This was some of the terminal output while I was adjusting brightness
levels:


-----------// sniped //-------------------------

max 255, min 0, step 1, default 127 ,current 17

Control name:Brightness set to value:17

max 255, min 0, step 1, default 127 ,current 18

Control name:Brightness set to value:18

ioctl querycontrol error 5

max 255, min 0, step 1, default 127 ,current 0

Control name:Brightness set to value:0

---------//sniped//---------------------------

Control name:Brightness set to value:60

max 255, min 0, step 1, default 127 ,current 61

Control name:Brightness set to value:61

ioctl querycontrol error 22

reset Hue error

ioctl querycontrol error 5

reset Gain error

control disabled

reset pantilt error

max 255, min 0, step 1, default 127 ,current 128

Control name:Brightness set to value:128

---------------//sniped//----------------------



6 2nd luvcveiw crash:


After I had adjusted the brightness control and finding the same ?EOF in
empty packet? in the kernel log, I tried to resize luvcveiw. And yes, it
crashed again. 

So I had the same pattern:

1 ?EOF in empty packet? log message (From 5: - Restarting luvcveiw after
crash) 

2 luvcveiw looked as though it was trying to unmaximise, just before it
crashed.


This is the terminal log output that I was left with:

X Error of failed request: BadAtom (invalid Atom parameter)
Major opcode of failed request: 19 (X_DeleteProperty)
Atom id in failed request: 0x3200003
Serial number of failed request: 25627
Current serial number in output stream: 25632



This ends my (rather large) report.


Hope this helps :)




From muddyboots at gmail.com  Mon Jan 29 16:28:38 2007
From: muddyboots at gmail.com (Lee Wild)
Date: Mon, 29 Jan 2007 15:28:38 +0000
Subject: [Linux-uvc-devel] Jumbled images from Logitech Quickcam 5000
Message-ID: <607ab3010701290728r57a074f1je597b3f8c07c5f3@mail.gmail.com>

Hi

I'm running a Logitech Quickcam Pro 5000 webcam from a machine
installed with Fedora Core 6. I built the linux-uvc drivers, and am
running Motion webcam software.
It's been a long road to get everything to build correctly and get
this far, however....

My problem is that the majority of images being output are jumbled up,
a bit like some sliding-block puzzle, here are a couple of examples:
http://ukselfbuild.com/webcam/2007/January/29/cam2/2007-01-29-15-00-00-snapshot.jpg
http://ukselfbuild.com/webcam/2007/January/29/cam2/2007-01-29-08-00-00-snapshot.jpg

I first asked for support from the people behind Motion, but they are
thinking the issue is to do with the linux-uvc driver.

Does anyone have any ideas what might be causing this, and how I might
get around it ?

Many thanks
Lee


From contact at alexandredenis.net  Mon Jan 29 22:50:28 2007
From: contact at alexandredenis.net (Alexandre DENIS)
Date: Mon, 29 Jan 2007 22:50:28 +0100
Subject: [Linux-uvc-devel] Control mappings
Message-ID: <200701292250.28445.contact@alexandredenis.net>


Hello,

When I list the available controls for my Quickcam Pro 5000, I get the 
usual Brightness/Contrast/Saturation mapped onto V4L2_CID_BRIGHTNESS, 
V4L2_CID_CONTRAST and V4L2_CID_SATURATION. However, all the other 
controls are mapped onto *extended* V4L2 controls. I do understand that 
Backlight Compensation, Power Line Frequency and Sharpness are actually 
(V4L2 speaking) non-standard. However, I am wondering why the others 
are not mapped onto V4L2 standard controls. Is there any reason?

I would believe that the following extended controls should actually be 
mapped onto standard V4L2 controls :

 "Exposure, Auto" = V4L2_CID_AUTOGAIN
 "Exposure (Absolute)" = V4L2_CID_EXPOSURE
 "White Balance Temperature, Auto" = V4L2_CID_AUTO_WHITE_BALANCE
 "White Balance Temperature" = V4L2_CID_GAMMA

Or am I missing something?

-a.


