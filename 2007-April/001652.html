<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] motion color problem
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2007-April/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20motion%20color%20problem&In-Reply-To=%3C017401c78805%2456fbb920%249100a8c0%40rese0001%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001650.html">
   <LINK REL="Next"  HREF="001647.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] motion color problem</H1>
    <B>Sebastien Cantos</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20motion%20color%20problem&In-Reply-To=%3C017401c78805%2456fbb920%249100a8c0%40rese0001%3E"
       TITLE="[Linux-uvc-devel] motion color problem">s.cantos at neopost.com
       </A><BR>
    <I>Thu Apr 26 15:18:09 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="001650.html">[Linux-uvc-devel] motion color problem
</A></li>
        <LI>Next message: <A HREF="001647.html">[Linux-uvc-devel] [Microsoft NX-6000] /dev/video0 not create
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1652">[ date ]</a>
              <a href="thread.html#1652">[ thread ]</a>
              <a href="subject.html#1652">[ subject ]</a>
              <a href="author.html#1652">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Laurent, 

Thx for your quick answer. I've tried the webcam both on windows (without
changing any param) and with lucview and the image seems to be correct (no
artifacts). The bug seems related to motion ... (maybe motion is readjusting
params for itself). I don't know if you can reproduce my config to see what
I'm talking. I've taken a snapshot and put it on my public webspace:
<A HREF="http://people.projet7.org/~truff/motion_test.jpg">http://people.projet7.org/~truff/motion_test.jpg</A>

What's strange is that the artifacts are related to some parts of the
picture but not all (see on the motion_test.jpg the black chair on the
right, it seems that there's a mask just upon it whith good colors but not
on top of this). 

Now I really don't know where to investigate but I'll be glad to help in
debugging this if you can provide me with some hints. 

Best regards,

Sebastien. 

-----Message d'origine-----
De&#160;: Laurent Pinchart [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">laurent.pinchart at skynet.be</A>] 
Envoy&#233;&#160;: mercredi 25 avril 2007 22:42
&#192;&#160;: <A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">linux-uvc-devel at lists.berlios.de</A>
Cc&#160;: Sebastien Cantos
Objet&#160;: Re: [Linux-uvc-devel] motion color problem

Hi Sebastien,

&gt;<i> I'm using motion (last beta version with v4l2 support) together with uvc
</I>&gt;<i> driver and a Logitech qc pro 5000 webcam. All is working well but I've
</I>&gt;<i> strange color outputs (lots of green and pink colors) .
</I>
You're not the first user to report that, so it seems I'll have to 
investigate :-)

&gt;<i> I'm using a 1.1 usb port so the first problem I encountered was that
</I>motion
&gt;<i> has priorities for palettes and it tries to use YUV palettes before MJPEG
</I>&gt;<i> ones. It seems that it cannot be possible to usr resolution like 320*240
</I>in
&gt;<i> yuv format with 1.1 usb port, I've then modified motion (video2.c) to make
</I>&gt;<i> sure MJPEG is used. Now I can have motion run in MJPEG 640*480.
</I>&gt;<i>
</I>&gt;<i> The problem is that colors are bad with this palette. I guess I've two
</I>&gt;<i> options:
</I>&gt;<i>
</I>&gt;<i> 1/ I've seen a recent post saying that it can be possible to config gama
</I>&gt;<i> and other parameters using windows and the putting back the cam on linux.
</I>&gt;<i> I've tried the cam on windows and colors are ok (should I changed the
</I>&gt;<i> parameters? If yes, what parameters should I use?)
</I>
Motion support setting brightness, contrast and hue. If other parameters are

needed, it should be quite straightforward to add them. The colour artifacts

you reported are probably due to invalid hue and/or saturation parameters.

To get the &quot;proper&quot; parameters, you could either use luvcview and change
them 
manually until you are satisfied, or boot Windows to set the parameters and 
reboot under Linux without unplugging the webcam (don't turn off the 
computer, just reboot it). You will then have to find a way to query the 
parameters (luvcview might be able to do that).

&gt;<i> 2/ Is there a way to make uvcvideo output higher resolution with a 1.1 usb
</I>&gt;<i> port (I only need one image per second) ?
</I>
Maybe, but not with a Quickcam Pro 5000, as the webcam has a VGA sensor.

Best regards,

Laurent Pinchart


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001650.html">[Linux-uvc-devel] motion color problem
</A></li>
	<LI>Next message: <A HREF="001647.html">[Linux-uvc-devel] [Microsoft NX-6000] /dev/video0 not create
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1652">[ date ]</a>
              <a href="thread.html#1652">[ thread ]</a>
              <a href="subject.html#1652">[ subject ]</a>
              <a href="author.html#1652">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
