From MiChI8383 at gmx.net  Fri Jan  2 06:35:03 2009
From: MiChI8383 at gmx.net (michael leicht)
Date: Fri, 02 Jan 2009 06:35:03 +0100
Subject: [Linux-uvc-devel] ID of unsuported Device
Message-ID: <495DA787.5020707@gmx.net>

Posting to linux-uvc-devel is restricted to members. You can subscribe
to the list at
https://lists.berlios.de/mailman/listinfo/linux-uvc-devel

The list owner can be contacted at
linux-uvc-devel-owner at lists.berlios.de should you need assistance.


-------------- next part --------------
An embedded message was scrubbed...
From: michael leicht <MiChI8383 at gmx.net>
Subject: ID of unsuported Device
Date: Thu, 01 Jan 2009 20:21:51 +0100
Size: 1082
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090102/89d80652/attachment.eml>

From MiChI8383 at gmx.net  Fri Jan  2 08:00:06 2009
From: MiChI8383 at gmx.net (michael leicht)
Date: Fri, 02 Jan 2009 08:00:06 +0100
Subject: [Linux-uvc-devel] ID of unsuported device
Message-ID: <495DBB76.5000104@gmx.net>

ID 068e: a102

HP Webcam 101 Usb


From MiChI8383 at gmx.net  Fri Jan  2 11:45:06 2009
From: MiChI8383 at gmx.net (michael leicht)
Date: Fri, 02 Jan 2009 11:45:06 +0100
Subject: [Linux-uvc-devel] ID of unsuported Device
Message-ID: <495DF032.6060202@gmx.net>

ID 068e: a102

HP Webcam 101 Usb


From minnooch at gmail.com  Fri Jan  2 18:24:56 2009
From: minnooch at gmail.com (minnu p)
Date: Fri, 2 Jan 2009 22:54:56 +0530
Subject: [Linux-uvc-devel] Pro 9000 and uvcvideo issue
Message-ID: <da8ad1520901020924u439f02bbv76fbfada657f23bb@mail.gmail.com>

Hi,

I am using Logitech Pro 9000 cam for video capturing for my video phone
application. I am using 2.6.22 linux kernel. Since my kernel (which is a
customized one) does not have support for uvcvideo I compiled the module and
did insmod.

Insmod went fine. But my cam is not getting detected as /dev/videoX when
connected.
This is the relevant part of dmesg output:
-------------------------------------------------------------------------------------------------
uvcvideo 1-1.3:1.0: usb_probe_interface - got id

uvcvideo: Found UVC 1.00 device <unnamed> (046d:0990)

uvcvideo: UVC non compliance - GET_DEF(PROBE) not supported. Enabling
workaround.

input: UVC Camera (046d:0990) as /class/input/input2
---------------------------------------------------------------------------------------------------

Did not find a log saying the device has been registered.
I have read in previous forum discussions that this issue is already
reported with my cam model.

I am using luvcview for capturing video. The application fails.
Is there any workaround for the issue. How to get my cam registered as usb
device /dev/video?

Thanks and regards,
Minnu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090102/611a6166/attachment.html>

From laurent.pinchart at skynet.be  Sun Jan  4 00:58:27 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 4 Jan 2009 00:58:27 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam E 3500 questions: hibernate,
	reset, and settings
In-Reply-To: <60643.84.2.65.3.1230657903.squirrel@go-nix.ca>
References: <60643.84.2.65.3.1230657903.squirrel@go-nix.ca>
Message-ID: <200901040058.27600.laurent.pinchart@skynet.be>

Hi Gabriel,

On Tuesday 30 December 2008, Gabriel Schulhof wrote:
> Hi!
>
> I have just bought such a camera, and it worked out of the box with a
> laptop running Fedora 9. Excellent!
>
> The camera has to work for a person who is over 60 years old and is only
> now (very enthusiastic about) learning to use a computer. Thus, I would
> like to configure a few things to make the camera work more reliably:
>
> 1. == This is a bit of a bug report: after recovering from hibernation,
> the camera has to be unplugged/plugged back in. Does/Will uvcvideo have
> hibernate/suspend support?

The uvcvideo driver should already support suspend/resume. Please give us a 
more detailed report of what goes wrong.

> 2. == Sometimes, when the camera comes back to life, it forgets the
> brightness/contrast/etc. settings it used to have.

The driver is supposed to restore control values when a device is resumed (I'm 
not sure if the camera itself is supposed to retain those settings or not, I 
guess it depends if the computer removes power from the USB ports during 
suspend). Please have a look at the kernel log (using dmesg) when this 
happens to see if the driver prints any error or informational message.

> Thus, I was wondering 
> if there is a console-based utility that I can run, setting reasonable
> default values either automatically or at the click of a button.
> Currently, I can use ekiga or xawtv to set brightness, contrast, and
> colour intensity. However, I think it's too complicated to teach. Thus,
> the utility would have to accept brightness/contrast/colour intensity
> values on the command line and (probably) use v4l2 to set the values.
>
> For example the quickcam messenger driver had a utility called qc-set,
> whose command line allowed me to specify values for brightness, contrast,
> colour, etc. and which would set up the camera accordingly.

The v4l2-ctl utility (found in the v4l-dvb repository on http://linuxtv.org/) 
can be used to set V4L2 controls on the command line.

> Alternatively, can I specify such values using module parameters? I
> noticed that uvcvideo (v0.1.0, according to modinfo) doesn't have any
> brightness/contrast/etc. module parameters:
>
> parm:           quirks:Forced device quirks (uint)
> parm:           trace:Trace level bitmask (uint)
>
> Is it possible to add such parameters to the module so as to specify
> default brightness/contrast/etc. values? I realize that the module may be
> responsible for multiple webcams, so addressing the
> brightness/contrast/etc. values to the right webcam may not be a trivial
> task.

Module parameters are not really suited for that job. You should use a command 
line application instead, possibly in relation with udev/hal.

> 3. == I have observed that, after multiple hibernate/resume cycles,
> /dev/video0 stops working. Even after
>
>   1. Unplugging the camera
>   2. modprobe -r uvcvideo
>   3. Plugging in the camera
>
> the resulting /dev/video0 does not work. mplayer tv:// says:
>
> MPlayer dev-SVN-r27514-4.3.0 (C) 2000-2008 MPlayer Team
> CPU: Mobile AMD Sempron(tm) Processor 2600+ (Family: 15, Model: 8,
> Stepping: 2)
> CPUflags:  MMX: 1 MMX2: 1 3DNow: 1 3DNow2: 1 SSE: 1 SSE2: 1
> Compiled with runtime CPU detection.
> mplayer: could not connect to socket
> mplayer: No such file or directory
> Failed to open LIRC support. You will not be able to use your remote
> control.
>
> Playing tv://.
> TV file format detected.
> Selected driver: v4l2
>  name: Video 4 Linux 2 input
>  author: Martin Olschewski <olschewski at zpr.uni-koeln.de>
>  comment: first try, more to come ;-)
> v4l2: your device driver does not support VIDIOC_G_STD ioctl,
> VIDIOC_G_PARM was used instead.
> Selected device: UVC Camera (046d:09a4)
>  Capabilites:  video capture  streaming
>  supported norms:
>  inputs: 0 = Camera 1;
>  Current input: 0
>  Current format: MJPEG
> v4l2: ioctl set format failed: Input/output error
> v4l2: ioctl set mute failed: Invalid argument
> v4l2: 0 frames successfully processed, 0 frames dropped.
>
> Is there a way to reset the camera so that it continues to work after
> arbitrary numbers of hibernate/resume cycles?

Please check the kernel log for error messages that could help diagnose this 
problem.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Jan  4 01:05:07 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 4 Jan 2009 01:05:07 +0100
Subject: [Linux-uvc-devel] ID of unsuported Device
In-Reply-To: <495DF032.6060202@gmx.net>
References: <495DF032.6060202@gmx.net>
Message-ID: <200901040105.07487.laurent.pinchart@skynet.be>

Hi Michael,

On Friday 02 January 2009, michael leicht wrote:
> ID 068e: a102
>
> HP Webcam 101 Usb

Could you please send me the output of

lsusb -d  068e:a102 -v

using usbutils 0.72 or newer (0.73+ preferred), along with the name of the 
laptop model in which you found the camera ? Please also specify if the 
webcam works with the uvcvideo driver.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Jan  4 01:10:52 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 4 Jan 2009 01:10:52 +0100
Subject: [Linux-uvc-devel] Pro 9000 and uvcvideo issue
In-Reply-To: <da8ad1520901020924u439f02bbv76fbfada657f23bb@mail.gmail.com>
References: <da8ad1520901020924u439f02bbv76fbfada657f23bb@mail.gmail.com>
Message-ID: <200901040110.52688.laurent.pinchart@skynet.be>

Hi Minnu,

On Friday 02 January 2009, minnu p wrote:
> Hi,
>
> I am using Logitech Pro 9000 cam for video capturing for my video phone
> application. I am using 2.6.22 linux kernel. Since my kernel (which is a
> customized one) does not have support for uvcvideo I compiled the module
> and did insmod.
>
> Insmod went fine. But my cam is not getting detected as /dev/videoX when
> connected.
> This is the relevant part of dmesg output:
> ---------------------------------------------------------------------------
> uvcvideo 1-1.3:1.0: usb_probe_interface - got id 
>
> uvcvideo: Found UVC 1.00 device <unnamed> (046d:0990)
>
> uvcvideo: UVC non compliance - GET_DEF(PROBE) not supported. Enabling
> workaround.
>
> input: UVC Camera (046d:0990) as /class/input/input2
> ---------------------------------------------------------------------------

I can't see anything wrong there. The UVC non compliance message is a bug in 
the driver and a fix has been committed to the Mercurial repository, but it 
shouldn't stop the camera from working.

> Did not find a log saying the device has been registered.
> I have read in previous forum discussions that this issue is already
> reported with my cam model.
>
> I am using luvcview for capturing video. The application fails.
> Is there any workaround for the issue. How to get my cam registered as usb
> device /dev/video?

Have a look in /sys/class/video4linux to see if the driver registers a video 
device for your camera. If it does, you're most likely having a udev problem.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Jan  4 01:14:27 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 4 Jan 2009 01:14:27 +0100
Subject: [Linux-uvc-devel] I can see them; they can't see me.
In-Reply-To: <49591730.1080409@BCScomputers.com>
References: <4958C6AD.9080807@BCScomputers.com>
	<200812291655.52819.laurent.pinchart@skynet.be>
	<49591730.1080409@BCScomputers.com>
Message-ID: <200901040114.27560.laurent.pinchart@skynet.be>

Hi Bob,

On Monday 29 December 2008, Bob Marcum wrote:
> Let's see ... I have a wireless mouse receiver, microphone, speakers, and
> videocam attached to the USB ports.  I am connecting to the system USB port
> via the Speaker USB hub for all but the mouse.  Maybe I am caught on a
> system limitation such that I cannot get past this 'til I get a new laptop.
>  ??  I could try using only the mouse and the videocam on the USB.  I can
> talk and hear my connected person by cell phone for a test of this setup.

I can't tell what's wrong with your setup, just that the kernel reports a lack 
of USB bandwidth for video streaming. You could try to unplug the speakers 
and see if the situation improves.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Jan  4 01:35:21 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 4 Jan 2009 01:35:21 +0100
Subject: [Linux-uvc-devel] Problem with webcam: 18ec:3288 (Arkmikro
	chipset)
In-Reply-To: <5d5480f60812290740h20b7ac0awa4b5cecd59b5cd4e@mail.gmail.com>
References: <5d5480f60812250653j261d59f9m25d256a97e531bf@mail.gmail.com>
	<200812291121.23120.laurent.pinchart@skynet.be>
	<5d5480f60812290740h20b7ac0awa4b5cecd59b5cd4e@mail.gmail.com>
Message-ID: <200901040135.21502.laurent.pinchart@skynet.be>

On Monday 29 December 2008, K wrote:
> Hi Laurent,
>
> I tried the quirks=2 settings. The loading looks better but Motion returns
> a 640x480 picture whose content is completely black. It seems the Jpeg
> format used by this webcam is not supported. Ok, here we go:
>
> I tried all of this with "echo 2 > ... quirks"
>
> dmesg:
>
> uvcvideo 4-2:1.0: usb_probe_interface
> uvcvideo 4-2:1.0: usb_probe_interface - got id
> uvcvideo: Found UVC 1.00 device USB2.0 PC CAMERA (18ec:3288)
> uvcvideo: Forcing device quirks 0x2 by module parameter for testing
> purpose. uvcvideo: Please report required quirks to the linux-uvc-devel
> mailing list. uvcvideo: UVC non compliance - GET_DEF(PROBE) not supported.
> Enabling workaround.
> input: USB2.0 PC CAMERA as /class/input/input28
> uhci_hcd 0000:00:09.1: reserve dev 7 ep81-INT, period 8, phase 4, 23 us
> usb 4-2: adding 4-2:1.1 (config #1, interface 1)
> usb 4-2:1.1: uevent
> drivers/usb/core/inode.c: creating file '007'
> usb 4-2: New USB device found, idVendor=18ec, idProduct=3288
> usb 4-2: New USB device strings: Mfr=1, Product=2, SerialNumber=0
> usb 4-2: Product: USB2.0 PC CAMERA
> usb 4-2: Manufacturer: ARKMICRO
>
> Motion complains about the Jpeg format. I captured the binary stream of a
> single frame using "./capture_example -d /dev/video2 -c 1 -o > vid2.dump".
> This file has been attached to this mail, watching with an hexa editor, it
> actually doesn't look like Jpeg as there is not 'JFIF' string inside.

If you skip the first 13 bytes (that surprisingly look like a possibly valid 
UVC header), the remaining data make a valid JPEG frame except for the lack 
of JFIF marker. I can see why applications would have trouble decoding that. 
Could you please capture a few consecutive frames and send them to me ? I'd 
like to have a look at the header.

> [1] Thread 1 started
> [1] cap.driver: "uvcvideo"
> [1] cap.card: "USB2.0 PC CAMERA"
> [1] cap.bus_info: "0000:00:09.1"
> [1] cap.capabilities=0x04000001
> [1] - VIDEO_CAPTURE
> [1] - STREAMING
> [1] Supported palettes:
> [1] 0: MJPG (MJPEG)
> [1] index_format 2 Test palette MJPG (640x480)
> [1] Using palette MJPG (640x480) bytesperlines 0 sizeimage 614400
> colorspace 00000000
> [1] VIDIOC_G_JPEGCOMP not supported but it should be (does your webcam
> driver support this ioctl?)
> [1] found control 0x00980900, "Brightness", range 0,255
> [1]     "Brightness", default 123, current 123
> [1] found control 0x00980901, "Contrast", range 0,255
> [1]     "Contrast", default 160, current 160
> [1] found control 0x00980902, "Saturation", range 0,255
> [1]     "Saturation", default 140, current 140
> [1] found control 0x00980903, "Hue", range -128,127
> [1]     "Hue", default 0, current 0
> [1] found control 0x00980910, "Gamma", range 1,16
> [1]     "Gamma", default 8, current 8
> [1] found control 0x00980913, "Gain", range 0,65535
> [1]     "Gain", default 16, current 0
> [1] mmap information:
> [1] frames=4
> [1] 0 length=614400
> [1] 1 length=614400
> [1] 2 length=614400
> [1] 3 length=614400
> [1] Using V4L2
> [1] Resizing pre_capture buffer to 1 items
> Not a JPEG file: starts with 0xb2 0x10
> [1] Resizing pre_capture buffer to 3 items
> Not a JPEG file: starts with 0x55 0x9b
> [1] Started stream webcam server in port 8082
> Corrupt JPEG data: 1 extraneous bytes before marker 0xd9

Best regards,

Laurent Pinchart


From thomas at feilnet.eu  Mon Jan  5 11:36:31 2009
From: thomas at feilnet.eu (Thomas Feil)
Date: Mon, 05 Jan 2009 11:36:31 +0100
Subject: [Linux-uvc-devel] Philips SPC620 stopped working after kernel update
Message-ID: <4961E2AF.9060602@feilnet.eu>

Malte,

I have the same cam. I run it on opensuse 11.0, works fine.
On opensuse 11.1, with default kernel drivers, I'm getting
limited resolution and framerate:

luvcview 0.2.4 at opensuse 11.1
============================

SDL information
  Video driver: x11
  A window manager is available
Device information
  Device path: /dev/video0
Stream settings:
  File format: YUYV 8MJPG is not supported by device)
  File size:   160x120 (reqested size 640x480 is not supported by device)
  Frame rate: 15/2 fps (requested frame rate 30 fps is not supported by
device)

luvcview 0.2.4 at opensuse 11.0
============================

SDL information:
  Video driver: x11
  A window manager is available
Device information:
  Device path:  /dev/video0
Stream settings:
  Frame format: YUYV (MJPG is not supported by device)
  Frame size:   640x480
  Frame rate:   30 fps

I was wondering if you experience similar issues?

Thx

P.S: Did you ever get mic to work?


-- 
Lesen alle anderen Ihre Email auch?
Sichere Email, einfach und kostenlos!
http://cryptocd.eduforge.org/online_version/aktuell/doku/windows/index/index.html


From minnooch at gmail.com  Mon Jan  5 16:29:33 2009
From: minnooch at gmail.com (minnu p)
Date: Mon, 5 Jan 2009 20:59:33 +0530
Subject: [Linux-uvc-devel] Pro 9000 and uvcvideo issue
In-Reply-To: <200901040110.52688.laurent.pinchart@skynet.be>
References: <da8ad1520901020924u439f02bbv76fbfada657f23bb@mail.gmail.com>
	<200901040110.52688.laurent.pinchart@skynet.be>
Message-ID: <da8ad1520901050729y6481ada9k25d8997f791712e8@mail.gmail.com>

>
>
> Have a look in /sys/class/video4linux to see if the driver registers a
> video
> device for your camera. If it does, you're most likely having a udev
> problem.
>
> Thanks a lot for your reply.

What should be the expected result here? I feel device driver is not
registered for my web cam.

luvcview is giving me error:
"ERROR opening V4L interface : No such file or directory "
Is it because the cam is not registered as /dev/videoX

Will it work fine if I use latest uvcdriver code? I have seen the change
committed for latest release . If I incorporate that change in my uvcdriver
code will that be enough?

Is it still possible to use luvcview application by specifying device other
than /dev/video with -d option when the device is registered as
/class/input/input2 ?

This is for my better understanding since I am a newbie into this.
Thanks in advance...
Minnu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090105/3a8d640f/attachment.html>

From racerz2000 at hotmail.com  Tue Jan  6 00:03:26 2009
From: racerz2000 at hotmail.com (jean agagnier)
Date: Mon, 5 Jan 2009 23:03:26 +0000
Subject: [Linux-uvc-devel] uvc web cam not supported
Message-ID: <BAY103-W3539BE28E3249259AA35ADD0E10@phx.gbl>


Bus 001 Device 002: ID 04f2:a13e Chicony Electronics Co., Ltd 



_________________________________________________________________

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090105/07ca1097/attachment.html>

From jmk at foofus.net  Tue Jan  6 04:24:09 2009
From: jmk at foofus.net (jmk)
Date: Mon, 05 Jan 2009 21:24:09 -0600
Subject: [Linux-uvc-devel] uvcvideo module crashes on load attempt
Message-ID: <C5882AF9.2804A%jmk@foofus.net>

Hi,

I?ve been successfully using a Logitech QuickCam Pro 9000 with the linux-uvc
module (iirc, linux-uvc-0.1.0_pre173) for a while. Recently, I installed the
devel version of v4l in order to test out the new hd-pvr driver.
Unfortunately, while the hd-pvr module is working nicely for me, it appears
that the new version of uvcvideo isn?t. Below is the dmesg output when the
system attempts to load the module. Any suggestions on what might be causing
the issue or what steps to take to work around it would be greatly
appreciated.

Thanks,
Joe

uvcvideo: Found UVC 1.00 device <unnamed> (046d:0990)
------------[ cut here ]------------
kernel BUG at /h/downloads/multimedia/myth/hd-pvr/hdpvr/v4l/v4l2-dev.c:261!
invalid opcode: 0000 [#1] PREEMPT SMP
Modules linked in: snd_usb_lib uvcvideo snd_rawmidi snd_hwdep sr_mod bttv
ir_common videobuf_dma_sg videobuf_core btcx_risc geode_aes snd_seq_oss
snd_seq_midi_event
 snd_seq snd_seq_device snd_pcm_oss snd_mixer_oss lirc_serial lirc_dev
dv1394 wm8775 cx25840 msp3400 saa7127 saa7115 tuner tea5767 tda8290
tuner_xc2028 xc5000 tda9887 tuner_simple tuner_types mt20xx tea5761 ivtv
snd_hda_intel snd_pcm firmware_class nvidia(P) snd_timer snd cx2341x hdpvr
snd_page_alloc parport_pc videodev v4l2_compat_ioctl32 parport pl2303
mct_u232 v4l1_compat usbserial v4l2_common forcedeth tveeprom ohci1394 sg
k8temp i2c_nforce2

Pid: 7305, comm: modprobe Tainted: P        (2.6.24-gentoo-r8 #3)
EIP: 0060:[<f0fca538>] EFLAGS: 00010246 CPU: 0
EIP is at video_register_device_index+0x408/0x450 [videodev]
EAX: 00000000 EBX: 00000000 ECX: ffffffff EDX: ee937200
ESI: ffffffff EDI: 00000000 EBP: dfb910c0 ESP: de2a5c6c
 DS: 007b ES: 007b FS: 00d8 GS: 0033 SS: 0068
Process modprobe (pid: 7305, ti=de2a4000 task=e3c90000 task.ti=de2a4000)
Stack: 000035b6 00000010 000000c0 00000000 ee937200 ffffffff eeea8800
00000000
       ffffffff 00000000 ee937200 00000001 dfb910c0 f0fca58f ffffffff
f12f1ad1
       ee937348 00000020 f12faa53 0000046d 00000990 df8ec000 df8ec030
df8ec028
Call Trace:
 [<f0fca58f>] video_register_device+0xf/0x20 [videodev]
 [<f12f1ad1>] uvc_simplify_fraction+0x6f1/0x790 [uvcvideo]
 [<f12f27bf>] uvc_delete+0xc4f/0x1eb0 [uvcvideo]
 [<c02fa01a>] idr_get_empty_slot+0xea/0x270
 [<c02fa227>] ida_get_new_above+0x87/0x180
 [<c03e5d65>] usb_probe_interface+0x75/0x100
 [<c037f598>] driver_sysfs_add+0x58/0x80
 [<c037f6ce>] driver_probe_device+0x8e/0x190
 [<c04ccc3d>] klist_next+0x5d/0xa0
 [<c037f910>] __driver_attach+0x80/0x90
 [<c037eaaa>] bus_for_each_dev+0x3a/0x60
 [<c037f536>] driver_attach+0x16/0x20
 [<c037f890>] __driver_attach+0x0/0x90
 [<c037ee5b>] bus_add_driver+0x8b/0x1e0
 [<c03e5cf0>] usb_probe_interface+0x0/0x100
 [<c03e58e5>] usb_register_driver+0x95/0x110
 [<f127d06f>] init_module+0x6f/0x86 [uvcvideo]
 [<c014a28b>] sys_init_module+0x16b/0x1930
 [<c010437e>] sysenter_past_esp+0x5f/0x85
 =======================
Code: 15 fd f0 89 81 5c 01 00 00 e9 89 fc ff ff 8b 4c 24 38 b8 b0 15 fd f0
8b 54 24 10 89 8a b0 01 00 00 e8 0d 3c 50 cf e9 14 ff ff ff <0f> 0b eb fe bb
c0 e9 fc f0 89 5c 24 04 c7 04 24 cf f0 fc f0 e8
EIP: [<f0fca538>] video_register_device_index+0x408/0x450 [videodev] SS:ESP
0068:de2a5c6c
---[ end trace fae1aa80ab5d0dfd ]---


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090105/2866b64b/attachment.html>

From matthew.f.lucas at gmail.com  Mon Jan  5 19:28:29 2009
From: matthew.f.lucas at gmail.com (Matthew Lucas)
Date: Mon, 5 Jan 2009 12:28:29 -0600
Subject: [Linux-uvc-devel] Question regarding pan and tilt on Logitech Orbit
	AF
Message-ID: <5761c2ad0901051028p7879c4a6s3f17110a69901ec7@mail.gmail.com>

Hello all!

I recently purchased a Logitech QuickCam Orbit/Sphere AF (gosh that's
a long name) and it works very well due to all of your hard work with
the uvc driver.

The pan and tilt features of the Orbit do not work at all, though, and
that is kind of disappointing.  The only thing that happens is I
receive "ioctl querycontrol error: Invalid argument / Set Pan down
error" on the command line.  The same thing occurs for pan up, tilt
up, tilt down, reset pan and reset tilt.

Is this simply a feature that has yet to be implemented?

Is this a feature that is not going to be implemented?

What might a progamming layman like myself do to assist in getting
this feature implemented?

Below is the output of 'lsusb -d 046d:0994 -v'.

Thank you very much for all the work you have done on uvc.

Sincerely,

Matthew Lucas
Chicago, IL
EEUU.

==============

Bus 002 Device 002: ID 046d:0994 Logitech, Inc. QuickCam Orbit/Sphere AF
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x046d Logitech, Inc.
  idProduct          0x0994 QuickCam Orbit/Sphere AF
  bcdDevice            0.07
  iManufacturer           0
  iProduct                0
  iSerial                 2 4D3C8611
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength         1433
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              0
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength          133
        dwClockFrequency       48.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x0000000e
          Auto-Exposure Mode
          Auto-Exposure Priority
          Exposure Time (Absolute)
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 2
        bSourceID               1
        wMaxMultiplier      16384
        bControlSize            2
        bmControls     0x0000175b
          Brightness
          Contrast
          Saturation
          Sharpness
          White Balance Temperature
          Backlight Compensation
          Gain
          Power Line Frequency
          White Balance Temperature, Auto
        iProcessing             0
        bmVideoStandards     0x1b
          None
          NTSC - 525/60
          SECAM - 625/50
          NTSC - 625/50
      VideoControl Interface Descriptor:
        bLength                27
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {82066163-7050-ab49-b8cc-b3855e8d221e}
        bNumControl            10
        bNrPins                 1
        baSourceID( 0)          2
        bControlSize            2
        bmControls( 0)       0xff
        bmControls( 1)       0x03
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                27
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                13
        guidExtensionCode         {82066163-7050-ab49-b8cc-b3855e8d221f}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          2
        bControlSize            2
        bmControls( 0)       0x7f
        bmControls( 1)       0x01
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                28
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                10
        guidExtensionCode         {82066163-7050-ab49-b8cc-b3855e8d2252}
        bNumControl            24
        bNrPins                 1
        baSourceID( 0)          4
        bControlSize            3
        bmControls( 0)       0xff
        bmControls( 1)       0xff
        bmControls( 2)       0xff
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             5
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               4
        iTerminal               0
      ** UNRECOGNIZED:  20 41 01 0c 82 06 61 63 70 50 ab 49 b8 cc b3
85 5e 8d 22 50 14 01 04 03 ff ff 0f 00 00 00 00 00
      ** UNRECOGNIZED:  20 41 01 08 82 06 61 63 70 50 ab 49 b8 cc b3
85 5e 8d 22 51 03 01 04 03 19 00 00 00 00 00 01 00
      ** UNRECOGNIZED:  20 41 01 0b 82 06 61 63 70 50 ab 49 b8 cc b3
85 5e 8d 22 55 01 01 04 03 01 00 00 00 00 00 00 00
      ** UNRECOGNIZED:  20 41 01 09 82 06 61 63 70 50 ab 49 b8 cc b3
85 5e 8d 22 56 05 01 04 03 1f 00 00 00 00 00 00 00
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x87  EP 7 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               8
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            16
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                        3
        wTotalLength                      842
        bEndPointAddress                  129
        bmInfo                              0
        bTerminalLink                       5
        bStillCaptureMethod                 2
        bTriggerSupport                     1
        bTriggerUsage                       0
        bControlSize                        1
        bmaControls( 0)                    11
        bmaControls( 1)                    11
        bmaControls( 2)                    11
      VideoStreaming Interface Descriptor:
        bLength                            11
        bDescriptorType                    36
        bDescriptorSubtype                  6 (FORMAT_MJPEG)
        bFormatIndex                        1
        bNumFrameDescriptors                7
        bFlags                              1
          Fixed-size samples: Yes
        bDefaultFrameIndex                  3
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                  1536000
        dwMaxBitRate                  9216000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                  2027520
        dwMaxBitRate                 12165120
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                  6144000
        dwMaxBitRate                 36864000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                  8110080
        dwMaxBitRate                 48660480
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                 24576000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            800
        wHeight                           600
        dwMinBitRate                 38400000
        dwMaxBitRate                230400000
        dwMaxVideoFrameBufferSize      960000
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         7
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            960
        wHeight                           720
        dwMinBitRate                 55296000
        dwMaxBitRate                165888000
        dwMaxVideoFrameBufferSize     1382400
        dwDefaultFrameInterval        1000000
        bFrameIntervalType                  3
        dwFrameInterval( 0)            666666
        dwFrameInterval( 1)           1000000
        dwFrameInterval( 2)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            39
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               7
        wWidth( 0)                        160
        wHeight( 0)                       120
        wWidth( 1)                        176
        wHeight( 1)                       144
        wWidth( 2)                        320
        wHeight( 2)                       240
        wWidth( 3)                        352
        wHeight( 3)                       288
        wWidth( 4)                        640
        wHeight( 4)                       480
        wWidth( 5)                        800
        wHeight( 5)                       600
        wWidth( 6)                        960
        wHeight( 6)                       720
        bNumCompressionPatterns             7
        bCompression( 0)                    5
        bCompression( 1)                   10
        bCompression( 2)                   15
        bCompression( 3)                   20
        bCompression( 4)                   25
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        2
        bNumFrameDescriptors                8
        guidFormat
{59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  3
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                  1536000
        dwMaxBitRate                  9216000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                  2027520
        dwMaxBitRate                 12165120
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                  6144000
        dwMaxBitRate                 36864000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                  8110080
        dwMaxBitRate                 48660480
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                 24576000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            46
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            800
        wHeight                           600
        dwMinBitRate                 38400000
        dwMaxBitRate                192000000
        dwMaxVideoFrameBufferSize      960000
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  5
        dwFrameInterval( 0)            400000
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         7
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            960
        wHeight                           720
        dwMinBitRate                 55296000
        dwMaxBitRate                110592000
        dwMaxVideoFrameBufferSize     1382400
        dwDefaultFrameInterval        1000000
        bFrameIntervalType                  2
        dwFrameInterval( 0)           1000000
        dwFrameInterval( 1)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         8
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1600
        wHeight                          1200
        dwMinBitRate                153600000
        dwMaxBitRate                153600000
        dwMaxVideoFrameBufferSize     3840000
        dwDefaultFrameInterval        2000000
        bFrameIntervalType                  1
        dwFrameInterval( 0)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            39
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               8
        wWidth( 0)                        160
        wHeight( 0)                       120
        wWidth( 1)                        176
        wHeight( 1)                       144
        wWidth( 2)                        320
        wHeight( 2)                       240
        wWidth( 3)                        352
        wHeight( 3)                       288
        wWidth( 4)                        640
        wHeight( 4)                       480
        wWidth( 5)                        800
        wHeight( 5)                       600
        wWidth( 6)                        960
        wHeight( 6)                       720
        wWidth( 7)                       1600
        wHeight( 7)                      1200
        bNumCompressionPatterns             8
        bCompression( 0)                    5
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x00c0  1x 192 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0180  1x 384 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0280  1x 640 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x03b0  1x 944 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       7
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0a80  2x 640 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       8
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b20  2x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       9
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0be0  2x 992 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting      10
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1380  3x 896 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting      11
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x13fc  3x 1020 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       2 Streaming
      bFunctionProtocol       0
      iFunction               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0
      iInterface              0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           38
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0
        iTerminal               0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          1
        bSourceID               5
        iTerminal               0
      AudioControl Interface Descriptor:
        bLength                 8
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 5
        bSourceID               1
        bControlSize            1
        bmaControls( 0)      0x03
          Mute
          Volume
        iFeature                0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            1 Discrete
        tSamFreq[ 0]        16000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0024  1x 36 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)

Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            9 Hub
  bDeviceSubClass         0 Unused
  bDeviceProtocol         0 Full speed (or root) hub
  bMaxPacketSize0        64
  idVendor           0x1d6b Linux Foundation
  idProduct          0x0002 2.0 root hub
  bcdDevice            2.06
  iManufacturer           3 Linux 2.6.26-1-amd64 ehci_hcd
  iProduct                2 EHCI Host Controller
  iSerial                 1 0000:00:02.1
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           25
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0xe0
      Self Powered
      Remote Wakeup
    MaxPower                0mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         9 Hub
      bInterfaceSubClass      0 Unused
      bInterfaceProtocol      0 Full speed (or root) hub
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0004  1x 4 bytes
        bInterval              12
Hub Descriptor:
  bLength              11
  bDescriptorType      41
  nNbrPorts            10
  wHubCharacteristic 0x000a
    No power switching (usb 1.0)
    Per-port overcurrent protection
  bPwrOn2PwrGood       10 * 2 milli seconds
  bHubContrCurrent      0 milli Ampere
  DeviceRemovable    0x00 0x00
  PortPwrCtrlMask    0xff 0xff
 Hub Port Status:
   Port 1: 0000.0100 power
   Port 2: 0000.0100 power
   Port 3: 0000.0100 power
   Port 4: 0000.0100 power
   Port 5: 0000.0100 power
   Port 6: 0000.0503 highspeed power enable connect
   Port 7: 0000.0100 power
   Port 8: 0000.0100 power
   Port 9: 0000.0100 power
   Port 10: 0000.0100 power
Device Status:     0x0003
  Self Powered
  Remote Wakeup Enabled

Bus 001 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            9 Hub
  bDeviceSubClass         0 Unused
  bDeviceProtocol         0 Full speed (or root) hub
  bMaxPacketSize0        64
  idVendor           0x1d6b Linux Foundation
  idProduct          0x0001 1.1 root hub
  bcdDevice            2.06
  iManufacturer           3 Linux 2.6.26-1-amd64 ohci_hcd
  iProduct                2 OHCI Host Controller
  iSerial                 1 0000:00:02.0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           25
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0xe0
      Self Powered
      Remote Wakeup
    MaxPower                0mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         9 Hub
      bInterfaceSubClass      0 Unused
      bInterfaceProtocol      0 Full speed (or root) hub
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval             255
Hub Descriptor:
  bLength              11
  bDescriptorType      41
  nNbrPorts            10
  wHubCharacteristic 0x0002
    No power switching (usb 1.0)
    Ganged overcurrent protection
  bPwrOn2PwrGood        1 * 2 milli seconds
  bHubContrCurrent      0 milli Ampere
  DeviceRemovable    0x00 0x00
  PortPwrCtrlMask    0xff 0xff
 Hub Port Status:
   Port 1: 0000.0100 power
   Port 2: 0000.0100 power
   Port 3: 0000.0100 power
   Port 4: 0000.0100 power
   Port 5: 0000.0100 power
   Port 6: 0000.0100 power
   Port 7: 0000.0100 power
   Port 8: 0000.0100 power
   Port 9: 0000.0100 power
   Port 10: 0000.0100 power
Device Status:     0x0003
  Self Powered
  Remote Wakeup Enabled


From Robert.Lukassen at tomtom.com  Tue Jan  6 13:25:24 2009
From: Robert.Lukassen at tomtom.com (Robert Lukassen)
Date: Tue, 6 Jan 2009 13:25:24 +0100
Subject: [Linux-uvc-devel] URB size for Bulk transport
References: <mailman.2095.1231241528.7227.linux-uvc-devel@lists.berlios.de>
Message-ID: <C3C930591D7B9D4083B73AC7CB7A5FF304826CD6@nl-exc-02.intra.local>

Hi,

I've noticed that the URB size in case of Bulk transport is set to the
maximum payload size, or to a limit that is a multiple of the bulk
packet size (psize * UVC_MAX_ISO_PACKETS). The rationale behind this is
'to be consistent with isochronous mode'.

We encounter some difficulties with this approach. These occur when
operating Bulk transport over a full-speed link. In that case, the limit
becomes 64 * 40 = 2560 bytes per URB. The device we use has 16KB
payloads. The frames typically do not consist of an exact multiple of
16KB, so a frame is send as a sequence of 16KB USB bulk transfers,
ending with a bulk transfer < 16KB.

According to the USB 2.0 specification a bulk transfer is considered
done when:

1) the expected amount of data has been transferred
2) a short packet (or zero-length packet) has been transferred

For the device, each of the transfers used to sent full sized payloads
fall in category 1. 16KB is to be expected by the host, as this is the
MaxPayloadSize (signalled in the configuration descriptor).

The device is unaware of the fact that hosts using the UVC driver split
payload transfers over multiple bulk transfers. If the payload buffer
size is not an exact multiple of the URB size determined by the UVC
driver, the host will not be able to detect the end of a payload
reliably.

Example:

Assume the frame to be transferred is 100KB. The maximum payload size is
16KB. The device will submit 6 16KB payloads and a 4KB final payload.

Because the first 16 KB payload transfers are of category 1, the device
will not insert a ZLP between the last packet of a payload and the first
packet of the next payload. The final payload is 4KB, which is a
multiple of a bulk packet (at either full or high speed), so the device
will end this payload transfer with a ZLP.

At high speed the UVC driver will issue URBs of 16KB as the limit set by
psize * UVC_MAX_ISO_PACKETS in that case is 512*40 = 20KB. Each of the
16KB payloads is reliably detected because the USB buffer is completely
full.

The URB transfers reliably detects the bulk transfer end because of the
ZLP.

At full speed, the UVC driver will submit URBs of 2650 bytes. This means
that the first 16 KB payload will result in 6 URBS completely filled,
but the 7th URB will fail to detect the boundary between the two 16KB
payloads. It will continue to fill the URB until the URB buffer is full
resulting in an URB that has 1024 bytes of the first payload and 1536
bytes of the next payload (including its payload header).

This case is not handled in the bulk data decoder I think.

It may seem that ensuring that the payload size is an multiple of the
URB size might solve this issue. For full sized payloads that is indeed
the case. Each full sized payload then results in a multiple URBs that
only contain data for that payload. However, if the last payload
contains less data than a full sized payload, the device inserts a ZLP
if the last packet was not short. This because from the device point of
view, it needs to signal that the host is going to get less data than it
expects. However, it may happen that the bulk transfer ends at an exact
multiple of the URB size.

Again, example:

100 KB frame, 16KB max payload and 2K URB size. The first 6 payload
transfers all work well. Each payload is transferred with 8 URBs, and
payload boundaries are detected based on payload buffer being full.

The 7th payload is 4 KB in size. An exact multiple of bulk packets
completes this transfer, and because 4 KB < 16KB, the device inserts a
ZLP. The host receives 2 URBs, and then an URB of 0 bytes long (=ZLP).
Normally, that ZLP would have been absorbed by the USB transport layer
and caused the URB to end 'prematurely'. But because the UVC host now
uses a smaller URB buffer lenghth, it needs to handle these ZLP as
0-length URBs.

It seems that this is indeed the case, and that 0 length URB would mark
the end of the payload. So this may be a fix:

In static int uvc_init_video_bulk(struct uvc_video_device *video,
	struct usb_host_endpoint *ep, gfp_t gfp_flags) (uvc_video.c)

	psize = le16_to_cpu(ep->desc.wMaxPacketSize) & 0x07ff;
	size = video->streaming->ctrl.dwMaxPayloadTransferSize;
	video->bulk.max_payload_size = size;
-	if (size > psize * UVC_MAX_ISO_PACKETS)
-		size = psize * UVC_MAX_ISO_PACKETS;
+ 	if (size > psize * UVC_MAX_ISO_PACKETS) {
+		size = psize * UVC_MAX_ISO_PACKETS;
+		size -= video->bulk.max_payload_size % size;
+	}
	if (uvc_alloc_urb_buffers(video, size) < 0)

I welcome a discussion about this, and a more detailed rationale behind
the use of UVC_MAX_ISO_PACKETS in this context. Especially since for
full speed, the packet size difference between bulk and iso transport
can differ significantly - 64 versus max. 1023. This results in bulk URB
sizes that are up to 16 times smaller than the ones used for isochronous
transfer.

Regards,

Robert Lukassen 


From laurent.pinchart at skynet.be  Tue Jan  6 17:41:15 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 6 Jan 2009 17:41:15 +0100
Subject: [Linux-uvc-devel] Philips SPC620 stopped working after kernel
	update
In-Reply-To: <4961E2AF.9060602@feilnet.eu>
References: <4961E2AF.9060602@feilnet.eu>
Message-ID: <200901061741.15493.laurent.pinchart@skynet.be>

Hi Thomas,

On Monday 05 January 2009, Thomas Feil wrote:
> Malte,
>
> I have the same cam. I run it on opensuse 11.0, works fine.
> On opensuse 11.1, with default kernel drivers, I'm getting
> limited resolution and framerate:
>
> luvcview 0.2.4 at opensuse 11.1
> ============================
>
> SDL information
>   Video driver: x11
>   A window manager is available
> Device information
>   Device path: /dev/video0
> Stream settings:
>   File format: YUYV 8MJPG is not supported by device)
>   File size:   160x120 (reqested size 640x480 is not supported by device)
>   Frame rate: 15/2 fps (requested frame rate 30 fps is not supported by
> device)
>
> luvcview 0.2.4 at opensuse 11.0
> ============================
>
> SDL information:
>   Video driver: x11
>   A window manager is available
> Device information:
>   Device path:  /dev/video0
> Stream settings:
>   Frame format: YUYV (MJPG is not supported by device)
>   Frame size:   640x480
>   Frame rate:   30 fps
>
> I was wondering if you experience similar issues?

First of all, please check that the device is detected as a high-speed USB 2.0 
peripheral and associated with the EHCI controller. You should get something 
similar to the following message in the kernel log:

usb 5-1: new high speed USB device using ehci_hcd and address 6

If your camera is detected as a full speed device that would probably the 
cause of your problem.

> P.S: Did you ever get mic to work?

Yes but I haven't tried for quite a long time.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Jan  6 17:43:14 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 6 Jan 2009 17:43:14 +0100
Subject: [Linux-uvc-devel] Pro 9000 and uvcvideo issue
In-Reply-To: <da8ad1520901050729y6481ada9k25d8997f791712e8@mail.gmail.com>
References: <da8ad1520901020924u439f02bbv76fbfada657f23bb@mail.gmail.com>
	<200901040110.52688.laurent.pinchart@skynet.be>
	<da8ad1520901050729y6481ada9k25d8997f791712e8@mail.gmail.com>
Message-ID: <200901061743.14798.laurent.pinchart@skynet.be>

On Monday 05 January 2009, minnu p wrote:
> > Have a look in /sys/class/video4linux to see if the driver registers a
> > video
> > device for your camera. If it does, you're most likely having a udev
> > problem.
> >
> > Thanks a lot for your reply.
>
> What should be the expected result here? I feel device driver is not
> registered for my web cam.

Here's what I get before the driver registers the camera:

# ls -al /sys/class/video4linux/
total 0
drwxr-xr-x  2 root root 0 2009-01-06 17:41 .
drwxr-xr-x 37 root root 0 2009-01-06 15:08 ..

And here's what I get after:

# ls -al /sys/class/video4linux/
total 0
drwxr-xr-x  2 root root 0 2009-01-06 17:39 .
drwxr-xr-x 37 root root 0 2009-01-06 15:08 ..
lrwxrwxrwx  1 root root 0 2009-01-06 17:41 
video0 -> ../../devices/pci0000:00/0000:00:1e.0/0000:02:09.0/0000:03:00.2/usb5/5-1/5-1:1.0/video4linux/video0

> luvcview is giving me error:
> "ERROR opening V4L interface : No such file or directory "
> Is it because the cam is not registered as /dev/videoX
>
> Will it work fine if I use latest uvcdriver code? I have seen the change
> committed for latest release . If I incorporate that change in my uvcdriver
> code will that be enough?
>
> Is it still possible to use luvcview application by specifying device other
> than /dev/video with -d option when the device is registered as
> /class/input/input2 ?

/class/input/input2 is an input device to report button press events. That 
won't help you for video streaming :-)

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Jan  6 17:47:57 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 6 Jan 2009 17:47:57 +0100
Subject: [Linux-uvc-devel] Question regarding pan and tilt on Logitech
	Orbit AF
In-Reply-To: <5761c2ad0901051028p7879c4a6s3f17110a69901ec7@mail.gmail.com>
References: <5761c2ad0901051028p7879c4a6s3f17110a69901ec7@mail.gmail.com>
Message-ID: <200901061747.57334.laurent.pinchart@skynet.be>

Hi Matthew,

On Monday 05 January 2009, Matthew Lucas wrote:
> Hello all!
>
> I recently purchased a Logitech QuickCam Orbit/Sphere AF (gosh that's
> a long name) and it works very well due to all of your hard work with
> the uvc driver.
>
> The pan and tilt features of the Orbit do not work at all, though, and
> that is kind of disappointing.  The only thing that happens is I
> receive "ioctl querycontrol error: Invalid argument / Set Pan down
> error" on the command line.  The same thing occurs for pan up, tilt
> up, tilt down, reset pan and reset tilt.
>
> Is this simply a feature that has yet to be implemented?

Pan/tilt support is implemented but requires the help of the uvcdynctrl 
application to configure the driver. 

Pan/tilt is implemented as proprietary (but documented) controls on Logitech 
webcams. The driver needs to be configured at runtime with additional 
information to access those controls.

Please install the uvcdynctrl application (part of libwebcam) to configure the 
driver. libwebcam can be downloaded from 
http://www.quickcamteam.net/software/libwebcam. Make sure you get the latest 
version from the SVN repository as the 0.1.1 package is outdated.

Control settings are not permanent so you will need to run uvcdynctrl each 
time you load the driver. This can be automated through udev/hal (libwebcam 
includes helper scripts).

> Is this a feature that is not going to be implemented?
>
> What might a progamming layman like myself do to assist in getting
> this feature implemented?
>
> Below is the output of 'lsusb -d 046d:0994 -v'.
>
> Thank you very much for all the work you have done on uvc.

You're welcome.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Jan  6 17:48:57 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 6 Jan 2009 17:48:57 +0100
Subject: [Linux-uvc-devel] uvc web cam not supported
In-Reply-To: <BAY103-W3539BE28E3249259AA35ADD0E10@phx.gbl>
References: <BAY103-W3539BE28E3249259AA35ADD0E10@phx.gbl>
Message-ID: <200901061748.57221.laurent.pinchart@skynet.be>

Hi Jean,

On Tuesday 06 January 2009, jean agagnier wrote:
> Bus 001 Device 002: ID 04f2:a13e Chicony Electronics Co., Ltd

I assume the camera doesn't work. What's wrong with it ?

Please provide me with the output of

lsusb -d 04f2:a13e -v

using usbutils 0.72 or newer (0.73+ preferred).

Best regards,

Laurent Pinchart


From thomas at feilnet.eu  Tue Jan  6 21:49:40 2009
From: thomas at feilnet.eu (Thomas Feil)
Date: Tue, 06 Jan 2009 21:49:40 +0100
Subject: [Linux-uvc-devel] Philips SPC620 stopped working after kernel
 update
In-Reply-To: <200901061741.15493.laurent.pinchart@skynet.be>
References: <4961E2AF.9060602@feilnet.eu>
	<200901061741.15493.laurent.pinchart@skynet.be>
Message-ID: <4963C3E4.6050000@feilnet.eu>

Hi Laurent,

many thanks for replying to my messsage and thanks,too for
the effort you are spending providing these drivers!

Following your advice, I checked for both installations:


@opensuse 11.1:
<6>usb 4-1: new full speed USB device using ohci_hcd and address 2
<6>usb 4-1: configuration #1 chosen from 1 choice
<6>usb 4-1: New USB device found, idVendor=0471, idProduct=0333
<6>usb 4-1: New USB device strings: Mfr=0, Product=1, SerialNumber=0
<6>usb 4-1: Product: USB Video Camera

lsmod | grep -i hci_hcd:
ohci_hcd               36548  0
ehci_hcd               55348  0
usbcore               198656  8
snd_usb_audio,usbhid,snd_usb_lib,uvcvideo,usb_storage,ohci_hcd,ehci_hcd



@opensuse 11.0:
===============
<6>usb 2-3: new high speed USB device using ehci_hcd and address 2
<6>usb 2-3: configuration #1 chosen from 1 choice
<6>usb 2-3: New USB device found, idVendor=0471, idProduct=0333
<6>usb 2-3: New USB device strings: Mfr=0, Product=1, SerialNumber=0
<6>usb 2-3: Product: USB Video Camera

lsmod | grep -i hci_hcd:
ehci_hcd               56204  0
ohci_hcd               42628  0
usbcore               188376  8
snd_usb_audio,usbhid,snd_usb_lib,uvcvideo,usb_storage,ehci_hcd,ohci_hcd


It looks like, that in 11.1 ohci_hcd is loaded first and ehci_hcd
second. Then the device gets initialized with the ohci_hcd and
the uvc driver believes it's got a slow usb camera. Does that make
sense? If yes, where to change the order?

Thx,

Thomas


Laurent Pinchart wrote:
> Hi Thomas,
> 
> On Monday 05 January 2009, Thomas Feil wrote:
>> Malte,
>>
>> I have the same cam. I run it on opensuse 11.0, works fine.
>> On opensuse 11.1, with default kernel drivers, I'm getting
>> limited resolution and framerate:
>>
>> luvcview 0.2.4 at opensuse 11.1
>> ============================
>>
>> SDL information
>>   Video driver: x11
>>   A window manager is available
>> Device information
>>   Device path: /dev/video0
>> Stream settings:
>>   File format: YUYV 8MJPG is not supported by device)
>>   File size:   160x120 (reqested size 640x480 is not supported by device)
>>   Frame rate: 15/2 fps (requested frame rate 30 fps is not supported by
>> device)
>>
>> luvcview 0.2.4 at opensuse 11.0
>> ============================
>>
>> SDL information:
>>   Video driver: x11
>>   A window manager is available
>> Device information:
>>   Device path:  /dev/video0
>> Stream settings:
>>   Frame format: YUYV (MJPG is not supported by device)
>>   Frame size:   640x480
>>   Frame rate:   30 fps
>>
>> I was wondering if you experience similar issues?
> 
> First of all, please check that the device is detected as a high-speed USB 2.0 
> peripheral and associated with the EHCI controller. You should get something 
> similar to the following message in the kernel log:
> 
> usb 5-1: new high speed USB device using ehci_hcd and address 6
> 
> If your camera is detected as a full speed device that would probably the 
> cause of your problem.
> 
>> P.S: Did you ever get mic to work?
> 
> Yes but I haven't tried for quite a long time.
> 
> Best regards,
> 
> Laurent Pinchart

-- 
Lesen alle anderen Ihre Email auch?
Sichere Email, einfach und kostenlos!
http://cryptocd.eduforge.org/online_version/aktuell/doku/windows/index/index.html


From chris at delongmechanical.com  Wed Jan  7 13:55:17 2009
From: chris at delongmechanical.com (DeLong Mechanical)
Date: Wed, 07 Jan 2009 07:55:17 -0500
Subject: [Linux-uvc-devel] PV-DV203 Panasonic Camcorder Support
Message-ID: <4964A635.2000202@delongmechanical.com>

I would like to submit my camcorder for possible implementation and
research.It would be great to get it working in linux. It really didn't
work that great as a webcam in windows xp.
I can access the memory card fine with the usb connection.

Thank You


I have a panasonic PVDV203 Camcorder. I use Ubuntu 8.10 and my camera is
"seen" with USB and Firewire. I will post the ouptput from lsusb -d
04da:090a -v

Bus 004 Device 006: ID 04da:090a Panasonic (Matsushita)
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0        64
  idVendor           0x04da Panasonic (Matsushita)
  idProduct          0x090a
  bcdDevice            1.00
  iManufacturer           0
  iProduct                0
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          125
    bNumInterfaces          3
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0xc0
      Self Powered
    MaxPower                2mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x85  EP 5 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0
      iInterface              0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           30
        bInCollection           1
        baInterfaceNr( 0)       2
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0
        iTerminal               0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               1
        iTerminal               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
        bRefresh                0
        bSynchAddress           0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            1 Discrete
        tSamFreq[ 0]        16000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0020  1x 32 bytes
        bInterval               1
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x00
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Status:     0x0001
  Self Powered




From laurent.pinchart at skynet.be  Wed Jan  7 14:29:29 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 7 Jan 2009 14:29:29 +0100
Subject: [Linux-uvc-devel] PV-DV203 Panasonic Camcorder Support
In-Reply-To: <4964A635.2000202@delongmechanical.com>
References: <4964A635.2000202@delongmechanical.com>
Message-ID: <200901071429.29798.laurent.pinchart@skynet.be>

Hi,

On Wednesday 07 January 2009, DeLong Mechanical wrote:
> I would like to submit my camcorder for possible implementation and
> research.It would be great to get it working in linux. It really didn't
> work that great as a webcam in windows xp.
> I can access the memory card fine with the usb connection.
>
> Thank You
>
>
> I have a panasonic PVDV203 Camcorder. I use Ubuntu 8.10 and my camera is
> "seen" with USB and Firewire. I will post the ouptput from lsusb -d
> 04da:090a -v

The camera, at least in that mode (camcorders often have different modes of 
operation when connected to a computer), is not UVC compatible, so it won't 
be supported by the Linux UVC driver.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Jan  7 14:41:45 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 7 Jan 2009 14:41:45 +0100
Subject: [Linux-uvc-devel] Philips SPC620 stopped working after kernel
	update
In-Reply-To: <4963C3E4.6050000@feilnet.eu>
References: <4961E2AF.9060602@feilnet.eu>
	<200901061741.15493.laurent.pinchart@skynet.be>
	<4963C3E4.6050000@feilnet.eu>
Message-ID: <200901071441.45587.laurent.pinchart@skynet.be>

Hi Thomas,

On Tuesday 06 January 2009, Thomas Feil wrote:
> Hi Laurent,
>
> many thanks for replying to my messsage and thanks,too for
> the effort you are spending providing these drivers!
>
> Following your advice, I checked for both installations:
>
>
> @opensuse 11.1:
> <6>usb 4-1: new full speed USB device using ohci_hcd and address 2
> <6>usb 4-1: configuration #1 chosen from 1 choice
> <6>usb 4-1: New USB device found, idVendor=0471, idProduct=0333
> <6>usb 4-1: New USB device strings: Mfr=0, Product=1, SerialNumber=0
> <6>usb 4-1: Product: USB Video Camera
>
> lsmod | grep -i hci_hcd:
> ohci_hcd               36548  0
> ehci_hcd               55348  0
> usbcore               198656  8
> snd_usb_audio,usbhid,snd_usb_lib,uvcvideo,usb_storage,ohci_hcd,ehci_hcd
>
>
>
> @opensuse 11.0:
> ===============
> <6>usb 2-3: new high speed USB device using ehci_hcd and address 2
> <6>usb 2-3: configuration #1 chosen from 1 choice
> <6>usb 2-3: New USB device found, idVendor=0471, idProduct=0333
> <6>usb 2-3: New USB device strings: Mfr=0, Product=1, SerialNumber=0
> <6>usb 2-3: Product: USB Video Camera
>
> lsmod | grep -i hci_hcd:
> ehci_hcd               56204  0
> ohci_hcd               42628  0
> usbcore               188376  8
> snd_usb_audio,usbhid,snd_usb_lib,uvcvideo,usb_storage,ehci_hcd,ohci_hcd
>
>
> It looks like, that in 11.1 ohci_hcd is loaded first and ehci_hcd
> second. Then the device gets initialized with the ohci_hcd and
> the uvc driver believes it's got a slow usb camera.

It's not the UVC driver that believes that, but the Linux USB stack.

> Does that make sense? If yes, where to change the order?

I'm not sure if the problem comes from module load order or from something 
else. You should try to investigate that with the help of the OpenSUSE 
people.

Best regards,

Laurent Pinchart


From oliver at neukum.org  Wed Jan  7 14:49:27 2009
From: oliver at neukum.org (Oliver Neukum)
Date: Wed, 7 Jan 2009 14:49:27 +0100
Subject: [Linux-uvc-devel] Philips SPC620 stopped working after kernel
	update
In-Reply-To: <200901071441.45587.laurent.pinchart@skynet.be>
References: <4961E2AF.9060602@feilnet.eu> <4963C3E4.6050000@feilnet.eu>
	<200901071441.45587.laurent.pinchart@skynet.be>
Message-ID: <200901071449.29741.oliver@neukum.org>

Am Wednesday 07 January 2009 14:41:45 schrieb Laurent Pinchart:
> > It looks like, that in 11.1 ohci_hcd is loaded first and ehci_hcd
> > second. Then the device gets initialized with the ohci_hcd and
> > the uvc driver believes it's got a slow usb camera.
> 
> It's not the UVC driver that believes that, but the Linux USB stack.
> 
> > Does that make sense? If yes, where to change the order?
> 
> I'm not sure if the problem comes from module load order or from something 
> else. You should try to investigate that with the help of the OpenSUSE 
> people.

Known problem. A fix is in the works.

	Regards
		Oliver



From laurent.pinchart at skynet.be  Wed Jan  7 16:05:55 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 7 Jan 2009 16:05:55 +0100
Subject: [Linux-uvc-devel] uvcvideo module crashes on load attempt
In-Reply-To: <C5882AF9.2804A%jmk@foofus.net>
References: <C5882AF9.2804A%jmk@foofus.net>
Message-ID: <200901071605.55527.laurent.pinchart@skynet.be>

Hi Joe,

On Tuesday 06 January 2009, jmk wrote:
> Hi,
>
> I?ve been successfully using a Logitech QuickCam Pro 9000 with the
> linux-uvc module (iirc, linux-uvc-0.1.0_pre173) for a while. Recently, I
> installed the devel version of v4l in order to test out the new hd-pvr
> driver.
> Unfortunately, while the hd-pvr module is working nicely for me, it appears
> that the new version of uvcvideo isn?t. Below is the dmesg output when the
> system attempts to load the module. Any suggestions on what might be
> causing the issue or what steps to take to work around it would be greatly
> appreciated.
>
> Thanks,
> Joe
>
> uvcvideo: Found UVC 1.00 device <unnamed> (046d:0990)
> ------------[ cut here ]------------
> kernel BUG at /h/downloads/multimedia/myth/hd-pvr/hdpvr/v4l/v4l2-dev.c:261!

Where did you get the source from ? I had a look at the 
http://hg.jannau.net/hdpvr/ repository, and v4l2-dev.c:261 tests for 
vdev->release being on NULL. This is quite unlikely, as the uvcvideo driver 
provides a release callback.

Could you please try the latest uvcvideo sources available from the 
linuxtv.org/hg/~pinchartl/uvcvideo repository ?

> invalid opcode: 0000 [#1] PREEMPT SMP
> Modules linked in: snd_usb_lib uvcvideo snd_rawmidi snd_hwdep sr_mod bttv
> ir_common videobuf_dma_sg videobuf_core btcx_risc geode_aes snd_seq_oss
> snd_seq_midi_event
>  snd_seq snd_seq_device snd_pcm_oss snd_mixer_oss lirc_serial lirc_dev
> dv1394 wm8775 cx25840 msp3400 saa7127 saa7115 tuner tea5767 tda8290
> tuner_xc2028 xc5000 tda9887 tuner_simple tuner_types mt20xx tea5761 ivtv
> snd_hda_intel snd_pcm firmware_class nvidia(P) snd_timer snd cx2341x hdpvr
> snd_page_alloc parport_pc videodev v4l2_compat_ioctl32 parport pl2303
> mct_u232 v4l1_compat usbserial v4l2_common forcedeth tveeprom ohci1394 sg
> k8temp i2c_nforce2
>
> Pid: 7305, comm: modprobe Tainted: P        (2.6.24-gentoo-r8 #3)
> EIP: 0060:[<f0fca538>] EFLAGS: 00010246 CPU: 0
> EIP is at video_register_device_index+0x408/0x450 [videodev]
> EAX: 00000000 EBX: 00000000 ECX: ffffffff EDX: ee937200
> ESI: ffffffff EDI: 00000000 EBP: dfb910c0 ESP: de2a5c6c
>  DS: 007b ES: 007b FS: 00d8 GS: 0033 SS: 0068
> Process modprobe (pid: 7305, ti=de2a4000 task=e3c90000 task.ti=de2a4000)
> Stack: 000035b6 00000010 000000c0 00000000 ee937200 ffffffff eeea8800
> 00000000
>        ffffffff 00000000 ee937200 00000001 dfb910c0 f0fca58f ffffffff
> f12f1ad1
>        ee937348 00000020 f12faa53 0000046d 00000990 df8ec000 df8ec030
> df8ec028
> Call Trace:
>  [<f0fca58f>] video_register_device+0xf/0x20 [videodev]
>  [<f12f1ad1>] uvc_simplify_fraction+0x6f1/0x790 [uvcvideo]
>  [<f12f27bf>] uvc_delete+0xc4f/0x1eb0 [uvcvideo]

The stacktrace appears to be corrupted.

>  [<c02fa01a>] idr_get_empty_slot+0xea/0x270
>  [<c02fa227>] ida_get_new_above+0x87/0x180
>  [<c03e5d65>] usb_probe_interface+0x75/0x100
>  [<c037f598>] driver_sysfs_add+0x58/0x80
>  [<c037f6ce>] driver_probe_device+0x8e/0x190
>  [<c04ccc3d>] klist_next+0x5d/0xa0
>  [<c037f910>] __driver_attach+0x80/0x90
>  [<c037eaaa>] bus_for_each_dev+0x3a/0x60
>  [<c037f536>] driver_attach+0x16/0x20
>  [<c037f890>] __driver_attach+0x0/0x90
>  [<c037ee5b>] bus_add_driver+0x8b/0x1e0
>  [<c03e5cf0>] usb_probe_interface+0x0/0x100
>  [<c03e58e5>] usb_register_driver+0x95/0x110
>  [<f127d06f>] init_module+0x6f/0x86 [uvcvideo]
>  [<c014a28b>] sys_init_module+0x16b/0x1930
>  [<c010437e>] sysenter_past_esp+0x5f/0x85
>  =======================
> Code: 15 fd f0 89 81 5c 01 00 00 e9 89 fc ff ff 8b 4c 24 38 b8 b0 15 fd f0
> 8b 54 24 10 89 8a b0 01 00 00 e8 0d 3c 50 cf e9 14 ff ff ff <0f> 0b eb fe
> bb c0 e9 fc f0 89 5c 24 04 c7 04 24 cf f0 fc f0 e8
> EIP: [<f0fca538>] video_register_device_index+0x408/0x450 [videodev] SS:ESP
> 0068:de2a5c6c
> ---[ end trace fae1aa80ab5d0dfd ]---

Best regards,

Laurent Pinchart


From thomas at feilnet.eu  Wed Jan  7 16:50:47 2009
From: thomas at feilnet.eu (Thomas Feil)
Date: Wed, 07 Jan 2009 16:50:47 +0100
Subject: [Linux-uvc-devel] Philips SPC620 stopped working after kernel
 update
In-Reply-To: <200901071449.29741.oliver@neukum.org>
References: <4961E2AF.9060602@feilnet.eu> <4963C3E4.6050000@feilnet.eu>
	<200901071441.45587.laurent.pinchart@skynet.be>
	<200901071449.29741.oliver@neukum.org>
Message-ID: <4964CF57.5040403@feilnet.eu>

Hi Laurent, Oliver,

thanks for you support. @Oliver: could you provide me with
a link where the problem is being worked on, so that I can
watch progress?

Thx,

Thomas

Oliver Neukum wrote:
> Am Wednesday 07 January 2009 14:41:45 schrieb Laurent Pinchart:
>>> It looks like, that in 11.1 ohci_hcd is loaded first and ehci_hcd
>>> second. Then the device gets initialized with the ohci_hcd and
>>> the uvc driver believes it's got a slow usb camera.
>> It's not the UVC driver that believes that, but the Linux USB stack.
>>
>>> Does that make sense? If yes, where to change the order?
>> I'm not sure if the problem comes from module load order or from something 
>> else. You should try to investigate that with the help of the OpenSUSE 
>> people.
> 
> Known problem. A fix is in the works.
> 
> 	Regards
> 		Oliver
> 

-- 
Lesen alle anderen Ihre Email auch?
Sichere Email, einfach und kostenlos!
http://cryptocd.eduforge.org/online_version/aktuell/doku/windows/index/index.html


From jmk at foofus.net  Thu Jan  8 04:08:51 2009
From: jmk at foofus.net (jmk)
Date: Wed, 07 Jan 2009 21:08:51 -0600
Subject: [Linux-uvc-devel] uvcvideo module crashes on load attempt
In-Reply-To: <200901071605.55527.laurent.pinchart@skynet.be>
Message-ID: <C58ACA63.281CC%jmk@foofus.net>

Hi Laurent,

On 1/7/09 9:05 AM, "Laurent Pinchart" <laurent.pinchart at skynet.be> wrote:
> Where did you get the source from ? I had a look at the
> http://hg.jannau.net/hdpvr/ repository, and v4l2-dev.c:261 tests for
> vdev->release being on NULL. This is quite unlikely, as the uvcvideo driver
> provides a release callback.
> 
> Could you please try the latest uvcvideo sources available from the
> linuxtv.org/hg/~pinchartl/uvcvideo repository ?

You are correct, the version I was running came from hg.jannau.net. I
performed a "rminstall" on that version and built and installed a checkout
from linuxtv.org/hg/~pinchart1/uvcvideo. I've attached the dmesg output from
the module load: 

---
Linux video capture interface: v2.00
uvcvideo: Found UVC 1.00 device <unnamed> (046d:0990)
WARNING: at /h/downloads/multimedia/myth/hd-pvr/uvcvideo/v4l/v4l2-dev.c:423
video_register_device_index()
Pid: 1455, comm: modprobe Not tainted 2.6.24-gentoo-r8 #3
 [<f0fb8643>] video_register_device_index+0x4b3/0x500 [videodev]
 [<f0fb869f>] video_register_device+0xf/0x20 [videodev]
 [<f0ff4ad1>] uvc_simplify_fraction+0x6f1/0x790 [uvcvideo]
 [<f0ff57bf>] uvc_delete+0xc4f/0x1eb0 [uvcvideo]
 [<c02fa01a>] idr_get_empty_slot+0xea/0x270
 [<c02fa227>] ida_get_new_above+0x87/0x180
 [<c03e5d65>] usb_probe_interface+0x75/0x100
 [<c037f598>] driver_sysfs_add+0x58/0x80
 [<c037f6ce>] driver_probe_device+0x8e/0x190
 [<c04ccc3d>] klist_next+0x5d/0xa0
 [<c037f910>] __driver_attach+0x80/0x90
 [<c037eaaa>] bus_for_each_dev+0x3a/0x60
 [<c037f536>] driver_attach+0x16/0x20
 [<c037f890>] __driver_attach+0x0/0x90
 [<c037ee5b>] bus_add_driver+0x8b/0x1e0
 [<c03e5cf0>] usb_probe_interface+0x0/0x100
 [<c03e58e5>] usb_register_driver+0x95/0x110
 [<f0fcf06f>] init_module+0x6f/0x86 [uvcvideo]
 [<c014a28b>] sys_init_module+0x16b/0x1930
 [<f0fe4000>] fw_dev_release+0x0/0x20 [firmware_class]
 [<c010437e>] sysenter_past_esp+0x5f/0x85
 =======================
usbcore: registered new interface driver uvcvideo
USB Video Class driver (v0.1.0)
---

Would seeing my v4l .config be useful? It's pretty minimal, enabling the V4L
module, V4L API1, IVTV, and UVC. I'm not sure if I'm missing something
critical or not.

Thanks for you help on this.

Joe





From linux at romal.de  Thu Jan  8 15:05:33 2009
From: linux at romal.de (Robert M. Albrecht)
Date: Thu, 08 Jan 2009 15:05:33 +0100
Subject: [Linux-uvc-devel] Playstation3 Eye
Message-ID: <4966082D.9000706@romal.de>

Hi,

I got my Playstation 3 eye today and I'm a little bit confused.

Sony writes in their PS3-manual, that you can use any UVC-compatible webcam 
with their PS3. Also they sell their own cam, which ist not UVC-compliant ?

PS3 eye seems to be OV534 based: http://lwn.net/Articles/308358/

cu romal

www.romal.de
blog.romal.de

Bus 001 Device 007: ID 1415:2000 Nam Tai E&E Products Ltd. or OmniVision 
Technologies, Inc. Sony Playstation Eye
Device Descriptor:
   bLength                18
   bDescriptorType         1
   bcdUSB               2.00
   bDeviceClass            0 (Defined at Interface level)
   bDeviceSubClass         0
   bDeviceProtocol         0
   bMaxPacketSize0        64
   idVendor           0x1415 Nam Tai E&E Products Ltd. or OmniVision 
Technologies, Inc.
   idProduct          0x2000 Sony Playstation Eye
   bcdDevice            1.00
   iManufacturer           1 OmniVision Technologies, Inc.
   iProduct                2 USB Camera-B4.04.27.1
   iSerial                 0
   bNumConfigurations      1
   Configuration Descriptor:
     bLength                 9
     bDescriptorType         2
     wTotalLength          142
     bNumInterfaces          3
     bConfigurationValue     1
     iConfiguration          0
     bmAttributes         0x80
       (Bus Powered)
     MaxPower              500mA
     Interface Descriptor:
       bLength                 9
       bDescriptorType         4
       bInterfaceNumber        0
       bAlternateSetting       0
       bNumEndpoints           3
       bInterfaceClass       255 Vendor Specific Class
       bInterfaceSubClass      0
       bInterfaceProtocol      0
       iInterface              0
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x81  EP 1 IN
         bmAttributes            2
           Transfer Type            Bulk
           Synch Type               None
           Usage Type               Data
         wMaxPacketSize     0x0200  1x 512 bytes
         bInterval               0
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x02  EP 2 OUT
         bmAttributes            2
           Transfer Type            Bulk
           Synch Type               None
           Usage Type               Data
         wMaxPacketSize     0x0200  1x 512 bytes
         bInterval               0
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x83  EP 3 IN
         bmAttributes            3
           Transfer Type            Interrupt
           Synch Type               None
           Usage Type               Data
         wMaxPacketSize     0x0040  1x 64 bytes
         bInterval              10
     Interface Descriptor:
       bLength                 9
       bDescriptorType         4
       bInterfaceNumber        1
       bAlternateSetting       0
       bNumEndpoints           0
       bInterfaceClass         1 Audio
       bInterfaceSubClass      1 Control Device
       bInterfaceProtocol      0
       iInterface              0
       AudioControl Interface Descriptor:
         bLength                 9
         bDescriptorType        36
         bDescriptorSubtype      1 (HEADER)
         bcdADC               1.00
         wTotalLength           42
         bInCollection           1
         baInterfaceNr( 0)       2
       AudioControl Interface Descriptor:
         bLength                12
         bDescriptorType        36
         bDescriptorSubtype      2 (INPUT_TERMINAL)
         bTerminalID             1
         wTerminalType      0x0201 Microphone
         bAssocTerminal          2
         bNrChannels             4
         wChannelConfig     0x0000
         iChannelNames           0
         iTerminal               0
       AudioControl Interface Descriptor:
         bLength                 9
         bDescriptorType        36
         bDescriptorSubtype      3 (OUTPUT_TERMINAL)
         bTerminalID             2
         wTerminalType      0x0101 USB Streaming
         bAssocTerminal          1
         bSourceID               3
         iTerminal               0
       AudioControl Interface Descriptor:
         bLength                12
         bDescriptorType        36
         bDescriptorSubtype      6 (FEATURE_UNIT)
         bUnitID                 3
         bSourceID               1
         bControlSize            1
         bmaControls( 0)      0x00
         bmaControls( 1)      0x02
           Volume
         bmaControls( 2)      0x02
           Volume
         bmaControls( 3)      0x02
           Volume
         bmaControls( 4)      0x02
           Volume
         iFeature                0
     Interface Descriptor:
       bLength                 9
       bDescriptorType         4
       bInterfaceNumber        2
       bAlternateSetting       0
       bNumEndpoints           0
       bInterfaceClass         1 Audio
       bInterfaceSubClass      2 Streaming
       bInterfaceProtocol      0
       iInterface              0
     Interface Descriptor:
       bLength                 9
       bDescriptorType         4
       bInterfaceNumber        2
       bAlternateSetting       1
       bNumEndpoints           1
       bInterfaceClass         1 Audio
       bInterfaceSubClass      2 Streaming
       bInterfaceProtocol      0
       iInterface              0
       AudioStreaming Interface Descriptor:
         bLength                 7
         bDescriptorType        36
         bDescriptorSubtype      1 (AS_GENERAL)
         bTerminalLink           2
         bDelay                  1 frames
         wFormatTag              1 PCM
       AudioStreaming Interface Descriptor:
         bLength                11
         bDescriptorType        36
         bDescriptorSubtype      2 (FORMAT_TYPE)
         bFormatType             1 (FORMAT_TYPE_I)
         bNrChannels             4
         bSubframeSize           2
         bBitResolution         16
         bSamFreqType            1 Discrete
         tSamFreq[ 0]        16000
       Endpoint Descriptor:
         bLength                 9
         bDescriptorType         5
         bEndpointAddress     0x84  EP 4 IN
         bmAttributes            5
           Transfer Type            Isochronous
           Synch Type               Asynchronous
           Usage Type               Data
         wMaxPacketSize     0x0300  1x 768 bytes
         bInterval               4
         bRefresh                0
         bSynchAddress           0
         AudioControl Endpoint Descriptor:
           bLength                 7
           bDescriptorType        37
           bDescriptorSubtype      1 (EP_GENERAL)
           bmAttributes         0x01
             Sampling Frequency
           bLockDelayUnits         0 Undefined
           wLockDelay              0 Undefined
Device Qualifier (for other device speed):
   bLength                10
   bDescriptorType         6
   bcdUSB               2.00
   bDeviceClass            0 (Defined at Interface level)
   bDeviceSubClass         0
   bDeviceProtocol         0
   bMaxPacketSize0        64
   bNumConfigurations      1
Device Status:     0x0000
   (Bus Powered)
[root at beowulf ~]#



From mathiasftl at gmx.de  Thu Jan  8 20:20:36 2009
From: mathiasftl at gmx.de (Mathias Buhr)
Date: Thu, 08 Jan 2009 20:20:36 +0100
Subject: [Linux-uvc-devel] Only 15fps with Logitech 9000 Pro
Message-ID: <1231442436.23135.24.camel@dodo.informatik.tu-freiberg.de>

Hi Laurent,

I'm working on a system which utilizes a large number of webcams. Almost
everything works fine (capturing, settings controls etc) except that
only my application achieves only 15fps per camera. I've tried disabling
the auto exposure and setting the exposure manually but this doesn't
help. Well...it works but the exposure has no effect "above" 15fps.It
seems that something is limiting the framerate but luvcview works fine
for example...I can't see any difference in the implementation except
that I'm using avcap which maps to similar V4L2 code for linux (cross
plattform capturing
api)(http://sourceforge.net/project/showfiles.php?group_id=231756). The
only setting that works is choosing the lowest resolution 160x120
(format independant). 
I'm pretty sure that the problem must be somewhere in the application so
I'm really sorry for filling the list with these lines but I would
appreciate any idea on that. At the moment I have no idea were to look.
The setup is Fedora 10, Kernel 2.6.27.9, various Logitech 9000pro

thanks in advance
Mathias



From barsnick at gmx.net  Thu Jan  8 22:39:59 2009
From: barsnick at gmx.net (Moritz Barsnick)
Date: Thu, 8 Jan 2009 22:39:59 +0100
Subject: [Linux-uvc-devel] Only 15fps with Logitech 9000 Pro
In-Reply-To: <1231442436.23135.24.camel@dodo.informatik.tu-freiberg.de>
References: <1231442436.23135.24.camel@dodo.informatik.tu-freiberg.de>
Message-ID: <20090108213959.GA28367@sunshine.barsnick.net>

Hi Mathias,

On Thu, Jan 08, 2009 at 20:20:36 +0100, Mathias Buhr wrote:

> Well...it works but the exposure has no effect "above" 15fps.It seems
> that something is limiting the framerate but luvcview works fine for
> example...

Working fine does not mean above 15 fps though, right?

Have you tried executing
luvcview -L
? It should properly enumerate all your webcam's possible formats and
framerates, as reported by the camera as currently connected.

Perhaps your USB stack has connected the cam with Full Speed USB (1.1)
instead of High Speed USB (2.0), like in another thread currently on
this list[*]. That would limit your resolutions and framerates.

Moritz

[*] "Philips SPC620 stopped working after kernel update"


From deloptes at yahoo.com  Thu Jan  8 22:41:38 2009
From: deloptes at yahoo.com (Emanoil Kotsev)
Date: Thu, 8 Jan 2009 13:41:38 -0800 (PST)
Subject: [Linux-uvc-devel] Philips SPC620 stopped working after kernel
	update
In-Reply-To: <mailman.101.1231412587.17046.linux-uvc-devel@lists.berlios.de>
Message-ID: <689603.4296.qm@web53205.mail.re2.yahoo.com>

 
> ------------------------------
> 
> Message: 3
> Date: Wed, 7 Jan 2009 14:41:45 +0100
> From: Laurent Pinchart <laurent.pinchart at skynet.be>
> Subject: Re: [Linux-uvc-devel] Philips SPC620 stopped
> working after
> 	kernel	update
> To: linux-uvc-devel at lists.berlios.de, thomas at feilnet.eu
> Message-ID:
> <200901071441.45587.laurent.pinchart at skynet.be>
> Content-Type: text/plain;  charset="iso-8859-1"
> 
> Hi Thomas,
> 
> On Tuesday 06 January 2009, Thomas Feil wrote:
> > Hi Laurent,
> >
> > many thanks for replying to my messsage and thanks,too
> for
> > the effort you are spending providing these drivers!
> >
> > Following your advice, I checked for both
> installations:
> >
> >
> > @opensuse 11.1:
> > <6>usb 4-1: new full speed USB device using
> ohci_hcd and address 2
> > <6>usb 4-1: configuration #1 chosen from 1
> choice
> > <6>usb 4-1: New USB device found, idVendor=0471,
> idProduct=0333
> > <6>usb 4-1: New USB device strings: Mfr=0,
> Product=1, SerialNumber=0
> > <6>usb 4-1: Product: USB Video Camera
> >
> > lsmod | grep -i hci_hcd:
> > ohci_hcd               36548  0
> > ehci_hcd               55348  0
> > usbcore               198656  8
> >
> snd_usb_audio,usbhid,snd_usb_lib,uvcvideo,usb_storage,ohci_hcd,ehci_hcd
> >
> >
> >
> > @opensuse 11.0:
> > ===============
> > <6>usb 2-3: new high speed USB device using
> ehci_hcd and address 2
> > <6>usb 2-3: configuration #1 chosen from 1
> choice
> > <6>usb 2-3: New USB device found, idVendor=0471,
> idProduct=0333
> > <6>usb 2-3: New USB device strings: Mfr=0,
> Product=1, SerialNumber=0
> > <6>usb 2-3: Product: USB Video Camera
> >
> > lsmod | grep -i hci_hcd:
> > ehci_hcd               56204  0
> > ohci_hcd               42628  0
> > usbcore               188376  8
> >
> snd_usb_audio,usbhid,snd_usb_lib,uvcvideo,usb_storage,ehci_hcd,ohci_hcd
> >
> >
> > It looks like, that in 11.1 ohci_hcd is loaded first
> and ehci_hcd
> > second. Then the device gets initialized with the
> ohci_hcd and
> > the uvc driver believes it's got a slow usb
> camera.
> 
> It's not the UVC driver that believes that, but the
> Linux USB stack.
> 

By the way the usb kernel team explicitely says the ehci_hcd should be loaded first.
This is written also in the docs. May be find out why your distro is doing something that is not correct

regards


      


From laurent.pinchart at skynet.be  Fri Jan  9 13:58:10 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 9 Jan 2009 13:58:10 +0100
Subject: [Linux-uvc-devel] uvcvideo module crashes on load attempt
In-Reply-To: <C58ACA63.281CC%jmk@foofus.net>
References: <C58ACA63.281CC%jmk@foofus.net>
Message-ID: <200901091358.11119.laurent.pinchart@skynet.be>

Hi Joe,

On Thursday 08 January 2009, jmk wrote:
> Hi Laurent,
>
> On 1/7/09 9:05 AM, "Laurent Pinchart" <laurent.pinchart at skynet.be> wrote:
> > Where did you get the source from ? I had a look at the
> > http://hg.jannau.net/hdpvr/ repository, and v4l2-dev.c:261 tests for
> > vdev->release being on NULL. This is quite unlikely, as the uvcvideo
> > driver provides a release callback.
> >
> > Could you please try the latest uvcvideo sources available from the
> > linuxtv.org/hg/~pinchartl/uvcvideo repository ?
>
> You are correct, the version I was running came from hg.jannau.net. I
> performed a "rminstall" on that version and built and installed a checkout
> from linuxtv.org/hg/~pinchart1/uvcvideo. I've attached the dmesg output
> from the module load:
>
> ---
> Linux video capture interface: v2.00
> uvcvideo: Found UVC 1.00 device <unnamed> (046d:0990)
> WARNING: at /h/downloads/multimedia/myth/hd-pvr/uvcvideo/v4l/v4l2-dev.c:423
> video_register_device_index()
> Pid: 1455, comm: modprobe Not tainted 2.6.24-gentoo-r8 #3
>  [<f0fb8643>] video_register_device_index+0x4b3/0x500 [videodev]
>  [<f0fb869f>] video_register_device+0xf/0x20 [videodev]
>  [<f0ff4ad1>] uvc_simplify_fraction+0x6f1/0x790 [uvcvideo]
>  [<f0ff57bf>] uvc_delete+0xc4f/0x1eb0 [uvcvideo]
>  [<c02fa01a>] idr_get_empty_slot+0xea/0x270
>  [<c02fa227>] ida_get_new_above+0x87/0x180
>  [<c03e5d65>] usb_probe_interface+0x75/0x100

There's something seriously wrong with the top of the backtrace. The backtrace 
might just be corrupted, but given the warning I suspect a deeper issue.

>  [<c037f598>] driver_sysfs_add+0x58/0x80
>  [<c037f6ce>] driver_probe_device+0x8e/0x190
>  [<c04ccc3d>] klist_next+0x5d/0xa0
>  [<c037f910>] __driver_attach+0x80/0x90
>  [<c037eaaa>] bus_for_each_dev+0x3a/0x60
>  [<c037f536>] driver_attach+0x16/0x20
>  [<c037f890>] __driver_attach+0x0/0x90
>  [<c037ee5b>] bus_add_driver+0x8b/0x1e0
>  [<c03e5cf0>] usb_probe_interface+0x0/0x100
>  [<c03e58e5>] usb_register_driver+0x95/0x110
>  [<f0fcf06f>] init_module+0x6f/0x86 [uvcvideo]
>  [<c014a28b>] sys_init_module+0x16b/0x1930
>  [<f0fe4000>] fw_dev_release+0x0/0x20 [firmware_class]
>  [<c010437e>] sysenter_past_esp+0x5f/0x85
>  =======================
> usbcore: registered new interface driver uvcvideo
> USB Video Class driver (v0.1.0)
> ---
>
> Would seeing my v4l .config be useful? It's pretty minimal, enabling the
> V4L module, V4L API1, IVTV, and UVC. I'm not sure if I'm missing something
> critical or not.

I don't think it would help.

Could you add printk's in video_register_device_index to print vdev and 
vdev->release (if vdev is not NULL), as well as in uvc_register_video to 
print vdev and vdev->release just before the call to video_register_device ?

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Jan  9 14:04:25 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 9 Jan 2009 14:04:25 +0100
Subject: [Linux-uvc-devel] Playstation3 Eye
In-Reply-To: <4966082D.9000706@romal.de>
References: <4966082D.9000706@romal.de>
Message-ID: <200901091404.25244.laurent.pinchart@skynet.be>

Hi Robert,

On Thursday 08 January 2009, Robert M. Albrecht wrote:
> Hi,
>
> I got my Playstation 3 eye today and I'm a little bit confused.
>
> Sony writes in their PS3-manual, that you can use any UVC-compatible webcam
> with their PS3. Also they sell their own cam, which ist not UVC-compliant ?
>
> PS3 eye seems to be OV534 based: http://lwn.net/Articles/308358/

The answer is probably quite simple, I suppose the PS3 supports both USB 
webcams and PS3 Eye webcams.

Best regards,

Laurent Pinchart


From sha4096 at gmail.com  Sat Jan 10 23:53:02 2009
From: sha4096 at gmail.com (K)
Date: Sat, 10 Jan 2009 23:53:02 +0100
Subject: [Linux-uvc-devel] Problem with webcam: 18ec:3288 (Arkmikro
	chipset)
In-Reply-To: <5d5480f60901091312lbff67ddl15fce9b4898c5395@mail.gmail.com>
References: <5d5480f60812250653j261d59f9m25d256a97e531bf@mail.gmail.com>
	<200812291121.23120.laurent.pinchart@skynet.be>
	<5d5480f60812290740h20b7ac0awa4b5cecd59b5cd4e@mail.gmail.com>
	<200901040135.21502.laurent.pinchart@skynet.be>
	<5d5480f60901091312lbff67ddl15fce9b4898c5395@mail.gmail.com>
Message-ID: <5d5480f60901101453l7609cd84w3dff18a7d957f09b@mail.gmail.com>

I tried a lot of things and they all failed. I still cannot capture
anything. Here are some info that may help. First of all, I tried updating
to 2.6.28...

# uname -a
Linux 2.6.282.6.28 #2 Sat Jan 10 17:00:05 CET 2009 i686 GNU/Linux

----
Rebuild of uvcvideo-7ec490a64a56 (make distclean && make && make install)
This the build I had used the other day (and that worked to a certain point)
I get this "uvcvideo: Unable to initialize the status endpoint (-2), status
interrupt will not be supported." I didn't have that message before..

I also tried with the latest snapshot 90c7dc24fb4d (that crashed when
probing, check the dmesg log at the end of this mail)
----

# modprobe uvcvideo trace=255 quirks=2
# dmesg
uvcvideo: uvc_v4l2_open
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCAP)
uvcvideo: uvc_v4l2_ioctl(VIDIOC_CROPCAP)
uvcvideo: uvc_v4l2_ioctl(VIDIOC_S_CROP)
uvcvideo: uvc_v4l2_ioctl(VIDIOC_G_FMT)
uvcvideo: uvc_v4l2_ioctl(VIDIOC_REQBUFS)
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYBUF)
uvcvideo: uvc_v4l2_mmap
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYBUF)
uvcvideo: uvc_v4l2_mmap
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYBUF)
uvcvideo: uvc_v4l2_mmap
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYBUF)
uvcvideo: uvc_v4l2_mmap
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
uvcvideo: Queuing buffer 0.
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
uvcvideo: Queuing buffer 1.
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
uvcvideo: Queuing buffer 2.
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
uvcvideo: Queuing buffer 3.
uvcvideo: uvc_v4l2_ioctl(VIDIOC_STREAMON)
uvcvideo: uvc_v4l2_release
usbcore: deregistering interface driver uvcvideo
uvcvideo: Adding mapping Brightness to control
00000000-0000-0000-0000-000000000101/2.
uvcvideo: Adding mapping Contrast to control
00000000-0000-0000-0000-000000000101/3.
uvcvideo: Adding mapping Hue to control
00000000-0000-0000-0000-000000000101/6.
uvcvideo: Adding mapping Saturation to control
00000000-0000-0000-0000-000000000101/7.
uvcvideo: Adding mapping Sharpness to control
00000000-0000-0000-0000-000000000101/8.
uvcvideo: Adding mapping Gamma to control
00000000-0000-0000-0000-000000000101/9.
uvcvideo: Adding mapping Backlight Compensation to control
00000000-0000-0000-0000-000000000101/1.
uvcvideo: Adding mapping Gain to control
00000000-0000-0000-0000-000000000101/4.
uvcvideo: Adding mapping Power Line Frequency to control
00000000-0000-0000-0000-000000000101/5.
uvcvideo: Adding mapping Hue, Auto to control
00000000-0000-0000-0000-000000000101/16.
uvcvideo: Adding mapping Exposure, Auto to control
00000000-0000-0000-0000-000000000001/2.
uvcvideo: Adding mapping Exposure, Auto Priority to control
00000000-0000-0000-0000-000000000001/3.
uvcvideo: Adding mapping Exposure (Absolute) to control
00000000-0000-0000-0000-000000000001/4.
uvcvideo: Adding mapping White Balance Temperature, Auto to control
00000000-0000-0000-0000-000000000101/11.
uvcvideo: Adding mapping White Balance Temperature to control
00000000-0000-0000-0000-000000000101/10.
uvcvideo: Adding mapping White Balance Component, Auto to control
00000000-0000-0000-0000-000000000101/13.
uvcvideo: Adding mapping White Balance Blue Component to control
00000000-0000-0000-0000-000000000101/12.
uvcvideo: Adding mapping White Balance Red Component to control
00000000-0000-0000-0000-000000000101/12.
uvcvideo: Adding mapping Focus (absolute) to control
00000000-0000-0000-0000-000000000001/6.
uvcvideo: Adding mapping Focus, Auto to control
00000000-0000-0000-0000-000000000001/8.
uvcvideo: Adding mapping Zoom, Absolute to control
00000000-0000-0000-0000-000000000001/11.
uvcvideo: Adding mapping Zoom, Continuous to control
00000000-0000-0000-0000-000000000001/12.
uvcvideo: Adding mapping Privacy to control
00000000-0000-0000-0000-000000000001/17.
uvcvideo 5-1:1.0: usb_probe_interface
uvcvideo 5-1:1.0: usb_probe_interface - got id
uvcvideo: Probing generic UVC device 1
uvcvideo: Found format YUV 4:2:2 (YUYV).
uvcvideo: - 640x480 (30.0 fps)
uvcvideo: - 352x288 (30.0 fps)
uvcvideo: - 320x240 (30.0 fps)
uvcvideo: - 176x144 (30.0 fps)
uvcvideo: - 160x120 (30.0 fps)
uvcvideo: Found format MJPEG.
uvcvideo: - 640x480 (30.0 fps)
uvcvideo: - 352x288 (30.0 fps)
uvcvideo: - 320x240 (30.0 fps)
uvcvideo: - 176x144 (30.0 fps)
uvcvideo: - 160x120 (30.0 fps)
uvcvideo: Found a Status endpoint (addr 83).
uvcvideo: Found UVC 1.00 device Hercules Dualpix Exchange (06f8:3005)
uvcvideo: Forcing device quirks 0x2 by module parameter for testing purpose.
uvcvideo: Please report required quirks to the linux-uvc-devel mailing list.
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/2 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/3 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/6 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/7 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/8 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/9 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/10 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/12 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/1 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/4 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/5 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/11 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/13 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/2 to device 1
entity 1
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/3 to device 1
entity 1
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/4 to device 1
entity 1
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/11 to device 1
entity 1
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/13 to device 1
entity 1
uvcvideo: Scanning UVC chain: OT 2 <- XU 5 <- XU 4 <- PU 3 <- IT 1
uvcvideo: Found a valid video chain (1 -> 2).
uvcvideo: UVC non compliance - GET_DEF(PROBE) not supported. Enabling
workaround.
input: Hercules Dualpix Exchange as /class/input/input13
uvcvideo: Unable to initialize the status endpoint (-2), status interrupt
will not be supported.
uvcvideo: UVC device initialized.
uvcvideo 4-1:1.0: usb_probe_interface
uvcvideo 4-1:1.0: usb_probe_interface - got id
uvcvideo: Probing generic UVC device 1
uvcvideo: Found format MJPEG.
uvcvideo: - 640x480 (30.0 fps)
uvcvideo: - 352x288 (30.0 fps)
uvcvideo: - 320x240 (30.0 fps)
uvcvideo: - 176x144 (30.0 fps)
uvcvideo: - 160x120 (30.0 fps)
uvcvideo: Found a Status endpoint (addr 81).
uvcvideo: Found UVC 1.00 device USB2.0 PC CAMERA (18ec:3288)
uvcvideo: Forcing device quirks 0x2 by module parameter for testing purpose.
uvcvideo: Please report required quirks to the linux-uvc-devel mailing list.
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/2 to device 1
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/3 to device 1
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/6 to device 1
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/7 to device 1
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/8 to device 1
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/9 to device 1
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/1 to device 1
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/4 to device 1
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/5 to device 1
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/2 to device 1
entity 1
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/4 to device 1
entity 1
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/15 to device 1
entity 1
uvcvideo: Scanning UVC chain: OT 3 <- PU 2 <- IT 1
uvcvideo: Found a valid video chain (1 -> 3).
uvcvideo: UVC non compliance - GET_DEF(PROBE) not supported. Enabling
workaround.
input: USB2.0 PC CAMERA as /class/input/input14
uvcvideo: Unable to initialize the status endpoint (-2), status interrupt
will not be supported.
uvcvideo: UVC device initialized.
usbcore: registered new interface driver uvcvideo
USB Video Class driver (v0.1.0)

Trying the cheap camera first...
# ./capture_example -d /dev/video1 -c1 -o
VIDIOC_STREAMON error 5, Input/output error
# dmesg
uvcvideo: uvc_v4l2_open
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCAP)
uvcvideo: uvc_v4l2_ioctl(VIDIOC_CROPCAP)
uvcvideo: uvc_v4l2_ioctl(VIDIOC_S_CROP)
uvcvideo: uvc_v4l2_ioctl(VIDIOC_G_FMT)
uvcvideo: uvc_v4l2_ioctl(VIDIOC_REQBUFS)
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYBUF)
uvcvideo: uvc_v4l2_mmap
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYBUF)
uvcvideo: uvc_v4l2_mmap
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYBUF)
uvcvideo: uvc_v4l2_mmap
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYBUF)
uvcvideo: uvc_v4l2_mmap
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
uvcvideo: Queuing buffer 0.
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
uvcvideo: Queuing buffer 1.
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
uvcvideo: Queuing buffer 2.
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
uvcvideo: Queuing buffer 3.
uvcvideo: uvc_v4l2_ioctl(VIDIOC_STREAMON)
uvcvideo: uvc_v4l2_release

Trying the Hercules webcam...
# ./capture_example -d /dev/video0 -c1 -o
select timeout
# dmesg
uvcvideo: uvc_v4l2_open
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCAP)
uvcvideo: uvc_v4l2_ioctl(VIDIOC_CROPCAP)
uvcvideo: uvc_v4l2_ioctl(VIDIOC_S_CROP)
uvcvideo: uvc_v4l2_ioctl(VIDIOC_G_FMT)
uvcvideo: uvc_v4l2_ioctl(VIDIOC_REQBUFS)
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYBUF)
uvcvideo: uvc_v4l2_mmap
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYBUF)
uvcvideo: uvc_v4l2_mmap
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYBUF)
uvcvideo: uvc_v4l2_mmap
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYBUF)
uvcvideo: uvc_v4l2_mmap
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
uvcvideo: Queuing buffer 0.
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
uvcvideo: Queuing buffer 1.
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
uvcvideo: Queuing buffer 2.
uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
uvcvideo: Queuing buffer 3.
uvcvideo: uvc_v4l2_ioctl(VIDIOC_STREAMON)
uvcvideo: uvc_v4l2_poll
uvcvideo: uvc_v4l2_poll
uvcvideo: uvc_v4l2_release


# Attempt to use a newer version of the module, crash when modprobing with
snapshot 90c7dc24fb4d
uvcvideo: Adding mapping Brightness to control
00000000-0000-0000-0000-000000000101/2.
uvcvideo: Adding mapping Contrast to control
00000000-0000-0000-0000-000000000101/3.
uvcvideo: Adding mapping Hue to control
00000000-0000-0000-0000-000000000101/6.
uvcvideo: Adding mapping Saturation to control
00000000-0000-0000-0000-000000000101/7.
uvcvideo: Adding mapping Sharpness to control
00000000-0000-0000-0000-000000000101/8.
uvcvideo: Adding mapping Gamma to control
00000000-0000-0000-0000-000000000101/9.
uvcvideo: Adding mapping Backlight Compensation to control
00000000-0000-0000-0000-000000000101/1.
uvcvideo: Adding mapping Gain to control
00000000-0000-0000-0000-000000000101/4.
uvcvideo: Adding mapping Power Line Frequency to control
00000000-0000-0000-0000-000000000101/5.
uvcvideo: Adding mapping Hue, Auto to control
00000000-0000-0000-0000-000000000101/16.
uvcvideo: Adding mapping Exposure, Auto to control
00000000-0000-0000-0000-000000000001/2.
uvcvideo: Adding mapping Exposure, Auto Priority to control
00000000-0000-0000-0000-000000000001/3.
uvcvideo: Adding mapping Exposure (Absolute) to control
00000000-0000-0000-0000-000000000001/4.
uvcvideo: Adding mapping White Balance Temperature, Auto to control
00000000-0000-0000-0000-000000000101/11.
uvcvideo: Adding mapping White Balance Temperature to control
00000000-0000-0000-0000-000000000101/10.
uvcvideo: Adding mapping White Balance Component, Auto to control
00000000-0000-0000-0000-000000000101/13.
uvcvideo: Adding mapping White Balance Blue Component to control
00000000-0000-0000-0000-000000000101/12.
uvcvideo: Adding mapping White Balance Red Component to control
00000000-0000-0000-0000-000000000101/12.
uvcvideo: Adding mapping Focus (absolute) to control
00000000-0000-0000-0000-000000000001/6.
uvcvideo: Adding mapping Focus, Auto to control
00000000-0000-0000-0000-000000000001/8.
uvcvideo: Adding mapping Zoom, Absolute to control
00000000-0000-0000-0000-000000000001/11.
uvcvideo: Adding mapping Zoom, Continuous to control
00000000-0000-0000-0000-000000000001/12.
uvcvideo: Adding mapping Privacy to control
00000000-0000-0000-0000-000000000001/17.
uvcvideo 5-1:1.0: usb_probe_interface
uvcvideo 5-1:1.0: usb_probe_interface - got id
uvcvideo: Probing generic UVC device 1
uvcvideo: Found format YUV 4:2:2 (YUYV).
uvcvideo: - 640x480 (30.0 fps)
uvcvideo: - 352x288 (30.0 fps)
uvcvideo: - 320x240 (30.0 fps)
uvcvideo: - 176x144 (30.0 fps)
uvcvideo: - 160x120 (30.0 fps)
uvcvideo: Found format MJPEG.
uvcvideo: - 640x480 (30.0 fps)
uvcvideo: - 352x288 (30.0 fps)
uvcvideo: - 320x240 (30.0 fps)
uvcvideo: - 176x144 (30.0 fps)
uvcvideo: - 160x120 (30.0 fps)
uvcvideo: Found a Status endpoint (addr 83).
uvcvideo: Found UVC 1.00 device Hercules Dualpix Exchange (06f8:3005)
uvcvideo: Forcing device quirks 0x2 by module parameter for testing purpose.
uvcvideo: Please report required quirks to the linux-uvc-devel mailing list.
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/2 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/3 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/6 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/7 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/8 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/9 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/10 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/12 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/1 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/4 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/5 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/11 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/13 to device 1
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/2 to device 1
entity 1
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/3 to device 1
entity 1
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/4 to device 1
entity 1
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/11 to device 1
entity 1
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/13 to device 1
entity 1
uvcvideo: Scanning UVC chain: OT 2 <- XU 5 <- XU 4 <- PU 3 <- IT 1
uvcvideo: Found a valid video chain (1 -> 2).
------------[ cut here ]------------
kernel BUG at /home/kevin/uvcvideo-7ec490a64a56/v4l/v4l2-dev.c:261!
invalid opcode: 0000 [#1]
last sysfs file: /sys/devices/pci0000:00/0000:00:09.1/usb4/idVendor
Modules linked in: uvcvideo(+) v4l2_compat_ioctl32 videodev v4l1_compat
8139cp 8139too ehci_hcd uhci_hcd [last unloaded: uvcvideo]

Pid: 21445, comm: modprobe Not tainted (2.6.282.6.28 #2) System Name
EIP: 0060:[<f0969075>] EFLAGS: 00010246 CPU: 0
EIP is at video_register_device_index+0x20/0x35f [videodev]
EAX: ecdf2054 EBX: ecce3800 ECX: ffffffff EDX: 00000000
ESI: 00000000 EDI: ffffffff EBP: ecdf2054 ESP: ecec5d28
 DS: 007b ES: 007b FS: 0000 GS: 0033 SS: 0068
Process modprobe (pid: 21445, ti=ecec4000 task=ef927210 task.ti=ecec4000)
Stack:
 ecdf2054 00000001 ecdf2054 00000001 ecdf2000 ecce3800 00000001 ecdf2054
 f09693bb ffffffff f0951199 ef999200 ecdf2038 ef1d6800 ecdf2000 ecdf2eb4
 ef0ea481 ef1066a8 ecdf204c ef999200 ef99921c ef1d6800 f0959b20 c0116502
Call Trace:
 [<f09693bb>] video_register_device+0x7/0x9 [videodev]
 [<f0951199>] uvc_probe+0x9cd/0xa8c [uvcvideo]
 [<c0116502>] printk+0x14/0x18
 [<c026485a>] usb_probe_interface+0x100/0x126
 [<c023832d>] driver_probe_device+0xb5/0x131
 [<c02383a9>] __driver_attach+0x0/0x67
 [<c02383f2>] __driver_attach+0x49/0x67
 [<c0237b69>] bus_for_each_dev+0x37/0x58
 [<c02381c8>] driver_attach+0x11/0x13
 [<c02383a9>] __driver_attach+0x0/0x67
 [<c0237eb7>] bus_add_driver+0x8a/0x1a5
 [<c01c2a8c>] kset_find_obj+0x18/0x40
 [<c0238549>] driver_register+0x6d/0xc1
 [<c0263f10>] usb_register_driver+0x56/0xad
 [<f080e000>] uvc_init+0x0/0x7f [uvcvideo]
 [<f080e06a>] uvc_init+0x6a/0x7f [uvcvideo]
 [<c0101134>] do_one_initcall+0x4c/0x13c
 [<c0176c12>] sysfs_add_file_mode+0x4c/0x6a
 [<c012cf92>] load_module+0x10e2/0x124d
 [<c01c32a5>] prio_tree_insert+0x1b/0x1e9
 [<c013e5b7>] vma_link+0x32/0x3a
 [<c012d184>] sys_init_module+0x87/0x176
 [<c0102aa1>] sysenter_do_call+0x12/0x25
Code: 2f 7e cf 83 c0 04 e9 e0 d7 8c cf 55 57 89 cf 56 89 d6 53 89 c3 83 ec
10 83 bb bc 01 00 00 00 8b 80 c4 00 00 00 89 44 24 08 75 04 <0f> 0b eb fe 83
fa 01 74 24 7f 0e 85 d2 c7 44 24 04 86 db 96 f0
EIP: [<f0969075>] video_register_device_index+0x20/0x35f [videodev] SS:ESP
0068:ecec5d28
---[ end trace f3fa78d13223e95d ]---
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090110/d1e5dd7b/attachment.html>

From laurent.pinchart at skynet.be  Sun Jan 11 00:05:27 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 11 Jan 2009 00:05:27 +0100
Subject: [Linux-uvc-devel] URB size for Bulk transport
In-Reply-To: <C3C930591D7B9D4083B73AC7CB7A5FF304826CD6@nl-exc-02.intra.local>
References: <mailman.2095.1231241528.7227.linux-uvc-devel@lists.berlios.de>
	<C3C930591D7B9D4083B73AC7CB7A5FF304826CD6@nl-exc-02.intra.local>
Message-ID: <200901110005.28091.laurent.pinchart@skynet.be>

Hi Robert,

sorry for the late reply.

On Tuesday 06 January 2009, Robert Lukassen wrote:
> Hi,
>
> I've noticed that the URB size in case of Bulk transport is set to the
> maximum payload size, or to a limit that is a multiple of the bulk
> packet size (psize * UVC_MAX_ISO_PACKETS). The rationale behind this is
> 'to be consistent with isochronous mode'.

To be honest, the real reason is that I had to set a limit and that value 
wasn't really worse than another (at least at that time) :-)

> We encounter some difficulties with this approach. These occur when
> operating Bulk transport over a full-speed link. In that case, the limit
> becomes 64 * 40 = 2560 bytes per URB. The device we use has 16KB
> payloads. The frames typically do not consist of an exact multiple of
> 16KB, so a frame is send as a sequence of 16KB USB bulk transfers,
> ending with a bulk transfer < 16KB.

It's really unfortunate that the USB 2.0 and UVC 1.1 specifications use the 
term "payload" for two different concepts.

In USB 2.0, a payload is the data that is carried in the data field of a data 
packet within a bus transaction. In UVC 1.1, a Payload Transfer is a unit of 
data transfer common to bulk and isochronous endpoints.

Your device has 16kB "payloads". As bulk payloads can be 512 bytes long at 
most (in high-speed) mode, I assume you mean UVC payloads (a UVC header 
followed by frame data). Is that correct ?

In that case, every 16kB UVC payload should be terminated by a short packet, 
not only the last payload.

> According to the USB 2.0 specification a bulk transfer is considered
> done when:
>
> 1) the expected amount of data has been transferred
> 2) a short packet (or zero-length packet) has been transferred
>
> For the device, each of the transfers used to sent full sized payloads
> fall in category 1. 16KB is to be expected by the host, as this is the
> MaxPayloadSize (signalled in the configuration descriptor).

You're mixing USB payloads and UVC payloads. A UVC payload is transferred in a 
single bulk transfer, made of multiple bulk data transactions, each carrying 
a USB payload. The last data packet of every bulk transfer should be a short 
(or zero) packet.

If your device sends 16kB UVC payloads, it should terminate each of them with 
a short bulk data packet.

> The device is unaware of the fact that hosts using the UVC driver split
> payload transfers over multiple bulk transfers. If the payload buffer
> size is not an exact multiple of the URB size determined by the UVC
> driver, the host will not be able to detect the end of a payload
> reliably.

The device is unaware of how the host splits a UVC payload across multiple 
URBs, but it's aware of how a UVC payload is split across bulk payloads.

> Example:
>
> Assume the frame to be transferred is 100KB. The maximum payload size is
> 16KB. The device will submit 6 16KB payloads and a 4KB final payload.
>
> Because the first 16 KB payload transfers are of category 1, the device
> will not insert a ZLP between the last packet of a payload and the first
> packet of the next payload. The final payload is 4KB, which is a
> multiple of a bulk packet (at either full or high speed), so the device
> will end this payload transfer with a ZLP.
>
> At high speed the UVC driver will issue URBs of 16KB as the limit set by
> psize * UVC_MAX_ISO_PACKETS in that case is 512*40 = 20KB. Each of the
> 16KB payloads is reliably detected because the USB buffer is completely
> full.
>
> The URB transfers reliably detects the bulk transfer end because of the
> ZLP.
>
> At full speed, the UVC driver will submit URBs of 2650 bytes. This means
> that the first 16 KB payload will result in 6 URBS completely filled,
> but the 7th URB will fail to detect the boundary between the two 16KB
> payloads. It will continue to fill the URB until the URB buffer is full
> resulting in an URB that has 1024 bytes of the first payload and 1536
> bytes of the next payload (including its payload header).
>
> This case is not handled in the bulk data decoder I think.
>
> It may seem that ensuring that the payload size is an multiple of the
> URB size might solve this issue. For full sized payloads that is indeed
> the case. Each full sized payload then results in a multiple URBs that
> only contain data for that payload. However, if the last payload
> contains less data than a full sized payload, the device inserts a ZLP
> if the last packet was not short. This because from the device point of
> view, it needs to signal that the host is going to get less data than it
> expects. However, it may happen that the bulk transfer ends at an exact
> multiple of the URB size.
>
> Again, example:
>
> 100 KB frame, 16KB max payload and 2K URB size. The first 6 payload
> transfers all work well. Each payload is transferred with 8 URBs, and
> payload boundaries are detected based on payload buffer being full.
>
> The 7th payload is 4 KB in size. An exact multiple of bulk packets
> completes this transfer, and because 4 KB < 16KB, the device inserts a
> ZLP. The host receives 2 URBs, and then an URB of 0 bytes long (=ZLP).
> Normally, that ZLP would have been absorbed by the USB transport layer
> and caused the URB to end 'prematurely'. But because the UVC host now
> uses a smaller URB buffer lenghth, it needs to handle these ZLP as
> 0-length URBs.
>
> It seems that this is indeed the case, and that 0 length URB would mark
> the end of the payload. So this may be a fix:
>
> In static int uvc_init_video_bulk(struct uvc_video_device *video,
> 	struct usb_host_endpoint *ep, gfp_t gfp_flags) (uvc_video.c)
>
> 	psize = le16_to_cpu(ep->desc.wMaxPacketSize) & 0x07ff;
> 	size = video->streaming->ctrl.dwMaxPayloadTransferSize;
> 	video->bulk.max_payload_size = size;
> -	if (size > psize * UVC_MAX_ISO_PACKETS)
> -		size = psize * UVC_MAX_ISO_PACKETS;
> + 	if (size > psize * UVC_MAX_ISO_PACKETS) {
> +		size = psize * UVC_MAX_ISO_PACKETS;
> +		size -= video->bulk.max_payload_size % size;
> +	}
> 	if (uvc_alloc_urb_buffers(video, size) < 0)
>
> I welcome a discussion about this, and a more detailed rationale behind
> the use of UVC_MAX_ISO_PACKETS in this context. Especially since for
> full speed, the packet size difference between bulk and iso transport
> can differ significantly - 64 versus max. 1023. This results in bulk URB
> sizes that are up to 16 times smaller than the ones used for isochronous
> transfer.

Let's first discuss the above confusion between USB and UVC payloads. If it 
turns our I was wrong, I'll analyse your patch :-)

Best regards,

Laurent Pinchart


From flammy at lounge-warrior.org  Sun Jan 11 22:28:22 2009
From: flammy at lounge-warrior.org (Stefan Jensen)
Date: Sun, 11 Jan 2009 22:28:22 +0100
Subject: [Linux-uvc-devel] ekiga and Quickcam Sphere AF unstable
Message-ID: <1231709302.7319.21.camel@hurricane.lounge-warrior.org>

Hi,...

i have some trouble with ekiga 3.0.1 and my Logitech QuickCam Sphere.
The cam seems works fine with ekiga. But after at least one time
activating and deactivating the video playback in ekiga, the cam
stopped working. Most of the time, i can rmmod/modprobe uvcvideo to
get it back working, but sometimes this does not work, because the
module is busy.

ekiga says "error accessing device ..." and the following errors
appears in my logs:
 
==> /var/log/messages <==
Jan 11 22:11:02 hurricane kernel: uvcvideo: Failed to set UVC probe
control : -32 (exp. 26).

(repeated 7 times)

==> .xsession-errors <==
libv4l2: error setting pixformat: Eingabe-/Ausgabefehler

(repeated 4 times)

What can i do to make it more stable? I won't hope this is a firmware
bug? Here are some additional and maybe useful info:

$ lsusb | grep -i logitech
Bus 002 Device 002: ID 046d:0994 Logitech, Inc. QuickCam Orbit/Sphere AF

$ modinfo uvcvideo
filename:       /lib/modules/2.6.27.9-159.fc10.x86_64/kernel/drivers/media/video/uvc/uvcvideo.ko
version:        v0.1.0
license:        GPL
description:    USB Video Class driver
author:         Laurent Pinchart <laurent.pinchart at skynet.be>
srcversion:     8E73F7CA1CC00B4FE89A28F
[...]
vermagic:       2.6.27.9-159.fc10.x86_64 SMP mod_unload 
parm:           quirks:Forced device quirks (uint)
parm:           trace:Trace level bitmask (uint)

$ rpm -qa| grep v4l
libv4l-0.5.7-1.fc10.x86_64
xorg-x11-drv-v4l-0.2.0-1.fc9.x86_64

$ rpm -qa| grep ekiga
ekiga-3.0.1-4.fc10.x86_64

best regards

Stefan
--



From johnm.uvc at gmail.com  Mon Jan 12 08:40:33 2009
From: johnm.uvc at gmail.com (John Mathew)
Date: Mon, 12 Jan 2009 13:10:33 +0530
Subject: [Linux-uvc-devel] Developing a UVC camera
Message-ID: <c92f85270901112340w6a36fd1cu342168d51e99a523@mail.gmail.com>

Dear UVC Developers,

I am working on developing a UVC camera. The camera itself runs linux kernel
and uses the gadget mode. We have a gadget driver written and an application
running on the device, which pushes data over USB to the host when host
requests data. The camera works in Isochronous mode and copies 1024 bytes
every microframe.

With a bit of effort (which mostly involved correcting some of the
descriptor values on the device side), I could get uvcvideo driver on the
host to work with the camera. luvcview works fine, so is a simpe gstreamer
viewer which uses the v4l2src element.

We would like to get the camera working well with the uvcvideo and is
completely standards compliant.

Below are some of the issues observed, I would appreciate any tips to debug
the issue.

The kernel message on the host says that the the uvcvideo invokes quirks=1.

kernel: [88819.299222] uvcvideo: Forcing device quirks 0x1 by module
parameter for testing purpose.
kernel: [88819.299227] uvcvideo: Please report required quirks to the
linux-uvc-devel mailing list.

I am wondering why quirks was turned on to a value of 1 and see what can be
done at the device side to fix it.

I am using gstreamer to stream from the camera and display the frames. with
the pipeline arranged as follows.

  gst-launch v4l2src ! jpegdec ! ffmpegcolorspace ! xvimagesink

I see that the gstreamer quits after streaming for afew hours saying that
there is an error in the JPEG stream. It looks like some corruption is
happening to the JPEG frames inside the camera. But I see no USB messages on
the host or the device. To narrow down the problem, we have an application
which takes  one JPEG image and keep streaming them continuously, instead of
using the ones from the camera. This probably will validate the USB data
path.

It will be great if uvc developers can throw some light on how to debug
these issues.

regards
John
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090112/48be2413/attachment.html>

From johnm.uvc at gmail.com  Mon Jan 12 08:43:39 2009
From: johnm.uvc at gmail.com (John Mathew)
Date: Mon, 12 Jan 2009 13:13:39 +0530
Subject: [Linux-uvc-devel] Developing a UVC camera
Message-ID: <c92f85270901112343n7957f927ie87a8e0328c86dff@mail.gmail.com>

Dear UVC Developers,

[Sorry for the second message, the earlier message was an HTML
formatted message, sorry!]

I am working on developing a UVC camera. The camera itself runs linux kernel
and uses the gadget mode. We have a gadget driver written and an application
running on the device, which pushes data over USB to the host when host
requests data. The camera works in Isochronous mode and copies 1024 bytes
every microframe.

With a bit of effort (which mostly involved correcting some of the
descriptor values on the device side), I could get uvcvideo driver on the
host to work with the camera. luvcview works fine, so is a simpe gstreamer
viewer which uses the v4l2src element.

We would like to get the camera working well with the uvcvideo and is
completely standards compliant.

Below are some of the issues observed, I would appreciate any tips to debug
the issue.

The kernel message on the host says that the the uvcvideo invokes quirks=1.

kernel: [88819.299222] uvcvideo: Forcing device quirks 0x1 by module
parameter for testing purpose.
kernel: [88819.299227] uvcvideo: Please report required quirks to the
linux-uvc-devel mailing list.

I am wondering why quirks was turned on to a value of 1 and see what can be
done at the device side to fix it.

I am using gstreamer to stream from the camera and display the frames. with
the pipeline arranged as follows.

  gst-launch v4l2src ! jpegdec ! ffmpegcolorspace ! xvimagesink

I see that the gstreamer quits after streaming for afew hours saying that
there is an error in the JPEG stream. It looks like some corruption is
happening to the JPEG frames inside the camera. But I see no USB messages on
the host or the device. To narrow down the problem, we have an application
which takes  one JPEG image and keep streaming them continuously, instead of
using the ones from the camera. This probably will validate the USB data
path.

It will be great if uvc developers can throw some light on how to debug
these issues.

regards
John


From Robert.Lukassen at tomtom.com  Mon Jan 12 15:31:13 2009
From: Robert.Lukassen at tomtom.com (Robert Lukassen)
Date: Mon, 12 Jan 2009 15:31:13 +0100
Subject: [Linux-uvc-devel] URB size for Bulk transport
References: <mailman.2095.1231241528.7227.linux-uvc-devel@lists.berlios.de>
	<C3C930591D7B9D4083B73AC7CB7A5FF304826CD6@nl-exc-02.intra.local>
	<200901110005.28091.laurent.pinchart@skynet.be>
Message-ID: <C3C930591D7B9D4083B73AC7CB7A5FF3048AAB43@nl-exc-02.intra.local>

> > Hi,
> >
> > I've noticed that the URB size in case of Bulk transport is set to
the
> > maximum payload size, or to a limit that is a multiple of the bulk
> > packet size (psize * UVC_MAX_ISO_PACKETS). The rationale behind this
is
> > 'to be consistent with isochronous mode'.
>
> To be honest, the real reason is that I had to set a limit and that 
> value wasn't really worse than another (at least at that time) :-)
>
> > We encounter some difficulties with this approach. These occur when
> > operating Bulk transport over a full-speed link. In that case, the
limit
> > becomes 64 * 40 = 2560 bytes per URB. The device we use has 16KB
> > payloads. The frames typically do not consist of an exact multiple
of
> > 16KB, so a frame is send as a sequence of 16KB USB bulk transfers,
> > ending with a bulk transfer < 16KB.
>
> It's really unfortunate that the USB 2.0 and UVC 1.1 specifications
use 
> > the term "payload" for two different concepts.
>
> In USB 2.0, a payload is the data that is carried in the data field of
a 
> data packet within a bus transaction. In UVC 1.1, a Payload Transfer
is a > unit of data transfer common to bulk and isochronous endpoints.
>
> Your device has 16kB "payloads". As bulk payloads can be 512 bytes
long at 
> most (in high-speed) mode, I assume you mean UVC payloads (a UVC
header 
> followed by frame data). Is that correct ?
>
> In that case, every 16kB UVC payload should be terminated by a short 
> packet, not only the last payload.
...

> Let's first discuss the above confusion between USB and UVC payloads. 
> If it turns our I was wrong, I'll analyse your patch :-)

I did not know about the USB 2.0 terminology (payload == data in a
transaction packet), now I do. My references to 'payload' are always to
the UVC payload term.

My main confusion is on the situation where a frame is split in multiple
UVC payloads, all of them of maximum size except for the last. You are
stating that for those 'maximum sized' payloads (in our device's case:
16384 bytes) the device should insert a zero-length packet. We did some
experiments and if the device was made to insert a zero-length packet in
between two 'maximum sized' UVC payloads, we received three URB's in
uvc_video_decode_bulk():

[ 16384 ]  [0]  [ 16384 ]

There was one zero-length URB in between those two payload transfers.
Apparently, the USB host driver completes the URB based on its receive
buffer being full, before it handles the zero length packet. The next
URB then starts with a zero length packet and immediately completes with
0 bytes data received.

We wanted to figure out why this was happening, so we looked into the
USB 2.0 specification and saw those 'rules' about ending a USB bulk
transfer. We think the USB host implementation in Linux signals an URB
complete when it has gathered enough data to fill the URB receive
buffer. When the last full packet comes in, the URB is 'complete' as all
16384 bytes in its receive buffer are full. The hypothesis is that this
is done under the first clause of those Bulk transfer rules: if the
expected amount of data is received, the bulk transfer is complete.

We changed the behaviour of the device to only send zero length packets
in case of 'short' UVC payloads (shorter than the maximum payload size
signaled in the configuration descriptor) that end in a full bulk
packet. That worked without problems. 

The patch that I suggested has more to do with the limit on the payload
size that is imposed in the Bulk situation. Simply put, because of the
difference in maxium size of packets in Full speed (1023 in ISO, 64 in
Bulk), there is a huge difference in the computed payload buffer size.
For ISO, the buffer size is determined based on MAX_ISO_PACKETS * 1023
(potentially, if this is the size signaled by the device) while for
Bulk, this is MAX_ISO_PACKETS * 64.

We will repeat some experiments with the device sending ZLP in between
maximally sized UVC payloads using a USB bus analyser to verify these
findings. We'll post the results to this list.

Regards,

Robert Lukassen


From linux-uvc at starlab.be  Mon Jan 12 16:42:58 2009
From: linux-uvc at starlab.be (Peter Van Hertum)
Date: Mon, 12 Jan 2009 16:42:58 +0100
Subject: [Linux-uvc-devel] dealextreme Future Boy PC USB Webcam -
 sku.12939 (058f:3820)
In-Reply-To: <200812161607.34329.laurent.pinchart@skynet.be>
References: <1229093651.3720.17.camel@nzuzi>
	<200812161605.08740.laurent.pinchart@skynet.be>
	<200812161607.34329.laurent.pinchart@skynet.be>
Message-ID: <1231774978.23229.46.camel@nzuzi>

apparently, the latest (hg) version still needs the quirks...

modprobe -r uvcvideo
hg clone http://linuxtv.org/hg/~pinchartl/uvcvideo/
make
make install
make unload
make load
...




*** Without quirks=2

==> syslog <==
Jan 12 16:23:25 nzuzi kernel: [886241.128033] usb 5-4: new high speed
USB device using ehci_hcd and address 11
Jan 12 16:23:25 nzuzi kernel: [886241.273571] usb 5-4: configuration #1
chosen from 1 choice
Jan 12 16:23:25 nzuzi kernel: [886241.274583] uvcvideo: Probing generic
UVC device 4
Jan 12 16:23:25 nzuzi kernel: [886241.274617] uvcvideo: Found format YUV
4:2:2 (YUYV).
Jan 12 16:23:25 nzuzi kernel: [886241.274624] uvcvideo: - 320x240 (30.0
fps)
Jan 12 16:23:25 nzuzi kernel: [886241.274630] uvcvideo: - 160x120 (30.0
fps)
Jan 12 16:23:25 nzuzi kernel: [886241.274636] uvcvideo: - 176x144 (30.0
fps)
Jan 12 16:23:25 nzuzi kernel: [886241.274640] uvcvideo: - 640x480 (30.0
fps)
Jan 12 16:23:25 nzuzi kernel: [886241.274645] uvcvideo: - 352x288 (30.0
fps)
Jan 12 16:23:25 nzuzi kernel: [886241.274649] uvcvideo: Found format
MJPEG.
Jan 12 16:23:25 nzuzi kernel: [886241.274653] uvcvideo: - 320x240 (30.0
fps)
Jan 12 16:23:25 nzuzi kernel: [886241.274656] uvcvideo: - 160x120 (30.0
fps)
Jan 12 16:23:25 nzuzi kernel: [886241.274661] uvcvideo: - 176x144 (30.0
fps)
Jan 12 16:23:25 nzuzi kernel: [886241.274666] uvcvideo: - 640x480 (30.0
fps)
Jan 12 16:23:25 nzuzi kernel: [886241.274671] uvcvideo: - 352x288 (30.0
fps)
Jan 12 16:23:25 nzuzi kernel: [886241.274681] uvcvideo: Found a Status
endpoint (addr 81).
Jan 12 16:23:25 nzuzi kernel: [886241.274686] uvcvideo: Found UVC 1.00
device USB 2.0 PC Camera (058f:3820)
Jan 12 16:23:25 nzuzi kernel: [886241.274696] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/2 to device 4 entity 2
Jan 12 16:23:25 nzuzi kernel: [886241.274703] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/3 to device 4 entity 2
Jan 12 16:23:25 nzuzi kernel: [886241.274710] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/6 to device 4 entity 2
Jan 12 16:23:25 nzuzi kernel: [886241.274718] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/7 to device 4 entity 2
Jan 12 16:23:25 nzuzi kernel: [886241.274725] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/8 to device 4 entity 2
Jan 12 16:23:25 nzuzi kernel: [886241.274732] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/9 to device 4 entity 2
Jan 12 16:23:25 nzuzi kernel: [886241.274739] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/10 to device 4 entity 2
Jan 12 16:23:25 nzuzi kernel: [886241.274747] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/1 to device 4 entity 2
Jan 12 16:23:25 nzuzi kernel: [886241.274754] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/5 to device 4 entity 2
Jan 12 16:23:25 nzuzi kernel: [886241.274762] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/11 to device 4 entity 2
Jan 12 16:23:25 nzuzi kernel: [886241.274774] uvcvideo: Scanning UVC
chain: OT 3 <- PU 2 (-> XU 6) <- IT 1
Jan 12 16:23:25 nzuzi kernel: [886241.274788] uvcvideo: Found a valid
video chain (1 -> 3).
Jan 12 16:23:25 nzuzi kernel: [886241.275084] uvcvideo: UVC non
compliance - GET_DEF(PROBE) not supported. Enabling workaround.
Jan 12 16:23:25 nzuzi kernel: [886241.277303] input: USB 2.0 PC Camera
as /devices/pci0000:00/0000:00:1d.7/usb5/5-4/5-4:1.0/input/input9
Jan 12 16:23:25 nzuzi kernel: [886241.308602] uvcvideo: UVC device
initialized.
Jan 12 16:23:25 nzuzi kernel: [886241.578743] uvcvideo: Trying format
0x56595559 (YUYV): 10000x10000.
Jan 12 16:23:25 nzuzi kernel: [886241.578759] uvcvideo: Using default
frame interval 33333.3 us (30.0 fps).
Jan 12 16:23:25 nzuzi kernel: [886241.579534] uvcvideo: Failed to query
(130) UVC probe control : -32 (exp. 26).

==> messages <==
Jan 12 16:23:25 nzuzi kernel: [886241.128033] usb 5-4: new high speed
USB device using ehci_hcd and address 11
Jan 12 16:23:25 nzuzi kernel: [886241.273571] usb 5-4: configuration #1
chosen from 1 choice
Jan 12 16:23:25 nzuzi kernel: [886241.274686] uvcvideo: Found UVC 1.00
device USB 2.0 PC Camera (058f:3820)
Jan 12 16:23:25 nzuzi kernel: [886241.274788] uvcvideo: Found a valid
video chain (1 -> 3).
Jan 12 16:23:25 nzuzi kernel: [886241.275084] uvcvideo: UVC non
compliance - GET_DEF(PROBE) not supported. Enabling workaround.
Jan 12 16:23:25 nzuzi kernel: [886241.277303] input: USB 2.0 PC Camera
as /devices/pci0000:00/0000:00:1d.7/usb5/5-4/5-4:1.0/input/input9



*** With quirks=2

Jan 12 16:25:11 nzuzi kernel: [886347.268035] usb 5-4: new high speed
USB device using ehci_hcd and address 12
Jan 12 16:25:11 nzuzi kernel: [886347.413564] usb 5-4: configuration #1
chosen from 1 choice
Jan 12 16:25:11 nzuzi kernel: [886347.414564] uvcvideo: Probing generic
UVC device 4
Jan 12 16:25:11 nzuzi kernel: [886347.414599] uvcvideo: Found format YUV
4:2:2 (YUYV).
Jan 12 16:25:11 nzuzi kernel: [886347.414607] uvcvideo: - 320x240 (30.0
fps)
Jan 12 16:25:11 nzuzi kernel: [886347.414612] uvcvideo: - 160x120 (30.0
fps)
Jan 12 16:25:11 nzuzi kernel: [886347.414618] uvcvideo: - 176x144 (30.0
fps)
Jan 12 16:25:11 nzuzi kernel: [886347.414622] uvcvideo: - 640x480 (30.0
fps)
Jan 12 16:25:11 nzuzi kernel: [886347.414626] uvcvideo: - 352x288 (30.0
fps)
Jan 12 16:25:11 nzuzi kernel: [886347.414631] uvcvideo: Found format
MJPEG.
Jan 12 16:25:11 nzuzi kernel: [886347.414635] uvcvideo: - 320x240 (30.0
fps)
Jan 12 16:25:11 nzuzi kernel: [886347.414638] uvcvideo: - 160x120 (30.0
fps)
Jan 12 16:25:11 nzuzi kernel: [886347.414643] uvcvideo: - 176x144 (30.0
fps)
Jan 12 16:25:11 nzuzi kernel: [886347.414649] uvcvideo: - 640x480 (30.0
fps)
Jan 12 16:25:11 nzuzi kernel: [886347.414653] uvcvideo: - 352x288 (30.0
fps)
Jan 12 16:25:11 nzuzi kernel: [886347.414663] uvcvideo: Found a Status
endpoint (addr 81).
Jan 12 16:25:11 nzuzi kernel: [886347.414668] uvcvideo: Found UVC 1.00
device USB 2.0 PC Camera (058f:3820)
Jan 12 16:25:11 nzuzi kernel: [886347.414673] uvcvideo: Forcing device
quirks 0x2 by module parameter for testing purpose.
Jan 12 16:25:11 nzuzi kernel: [886347.414678] uvcvideo: Please report
required quirks to the linux-uvc-devel mailing list.
Jan 12 16:25:11 nzuzi kernel: [886347.414688] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/2 to device 4 entity 2
Jan 12 16:25:11 nzuzi kernel: [886347.414695] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/3 to device 4 entity 2
Jan 12 16:25:11 nzuzi kernel: [886347.414702] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/6 to device 4 entity 2
Jan 12 16:25:11 nzuzi kernel: [886347.414709] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/7 to device 4 entity 2
Jan 12 16:25:11 nzuzi kernel: [886347.414716] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/8 to device 4 entity 2
Jan 12 16:25:11 nzuzi kernel: [886347.414723] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/9 to device 4 entity 2
Jan 12 16:25:11 nzuzi kernel: [886347.414730] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/10 to device 4 entity 2
Jan 12 16:25:11 nzuzi kernel: [886347.414738] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/1 to device 4 entity 2
Jan 12 16:25:11 nzuzi kernel: [886347.414745] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/5 to device 4 entity 2
Jan 12 16:25:11 nzuzi kernel: [886347.414752] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/11 to device 4 entity 2
Jan 12 16:25:11 nzuzi kernel: [886347.414764] uvcvideo: Scanning UVC
chain: OT 3 <- PU 2 (-> XU 6) <- IT 1
Jan 12 16:25:11 nzuzi kernel: [886347.414779] uvcvideo: Found a valid
video chain (1 -> 3).
Jan 12 16:25:11 nzuzi kernel: [886347.415286] uvcvideo: UVC non
compliance - GET_DEF(PROBE) not supported. Enabling workaround.
Jan 12 16:25:11 nzuzi kernel: [886347.417050] input: USB 2.0 PC Camera
as /devices/pci0000:00/0000:00:1d.7/usb5/5-4/5-4:1.0/input/input10
Jan 12 16:25:11 nzuzi kernel: [886347.444255] uvcvideo: UVC device
initialized.
Jan 12 16:25:11 nzuzi kernel: [886347.620446] uvcvideo: Trying format
0x56595559 (YUYV): 10000x10000.
Jan 12 16:25:11 nzuzi kernel: [886347.620460] uvcvideo: Using default
frame interval 33333.3 us (30.0 fps).

==> messages <==
Jan 12 16:25:11 nzuzi kernel: [886347.268035] usb 5-4: new high speed
USB device using ehci_hcd and address 12
Jan 12 16:25:11 nzuzi kernel: [886347.413564] usb 5-4: configuration #1
chosen from 1 choice
Jan 12 16:25:11 nzuzi kernel: [886347.414668] uvcvideo: Found UVC 1.00
device USB 2.0 PC Camera (058f:3820)
Jan 12 16:25:11 nzuzi kernel: [886347.414673] uvcvideo: Forcing device
quirks 0x2 by module parameter for testing purpose.
Jan 12 16:25:11 nzuzi kernel: [886347.414678] uvcvideo: Please report
required quirks to the linux-uvc-devel mailing list.
Jan 12 16:25:11 nzuzi kernel: [886347.414779] uvcvideo: Found a valid
video chain (1 -> 3).
Jan 12 16:25:11 nzuzi kernel: [886347.415286] uvcvideo: UVC non
compliance - GET_DEF(PROBE) not supported. Enabling workaround.
Jan 12 16:25:11 nzuzi kernel: [886347.417050] input: USB 2.0 PC Camera
as /devices/pci0000:00/0000:00:1d.7/usb5/5-4/5-4:1.0/input/input10



*** modinfo

root at nzuzi:/home/pvh/Documents/uvcvideo/uvcvideo# ls
-l /lib/modules/2.6.27-11-generic/kernel/drivers/media/video/uvc/uvcvideo.ko
-rw-r--r-- 1 root root 83016 2009-01-12
16:15 /lib/modules/2.6.27-11-generic/kernel/drivers/media/video/uvc/uvcvideo.ko

root at nzuzi:/home/pvh/Documents/uvcvideo/uvcvideo# modinfo uvcvideo
filename:       /lib/modules/2.6.27-11-generic/kernel/drivers/media/video/uvc/uvcvideo.ko
version:        v0.1.0
license:        GPL
description:    USB Video Class driver
author:         Laurent Pinchart <laurent.pinchart at skynet.be>
srcversion:     A1C301D09843F282304406F
alias:          usb:v*p*d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v1C4Fp3000d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v19ABp1000d00*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v19ABp1000d01[0-1]*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v19ABp1000d012[0-6]dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v18CDpCAFEd*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v17EFp480Bd*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v174Fp8A33d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v174Fp8A31d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v174Fp5931d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v174Fp5212d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v0E8Dp0004d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v05E3p0505d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v05ACp8501d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v046Dp08C7d*dc*dsc*dp*icFFisc01ip00*
alias:          usb:v046Dp08C6d*dc*dsc*dp*icFFisc01ip00*
alias:          usb:v046Dp08C5d*dc*dsc*dp*icFFisc01ip00*
alias:          usb:v046Dp08C3d*dc*dsc*dp*icFFisc01ip00*
alias:          usb:v046Dp08C2d*dc*dsc*dp*icFFisc01ip00*
alias:          usb:v046Dp08C1d*dc*dsc*dp*icFFisc01ip00*
alias:          usb:v045Ep0723d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v045Ep00F8d*dc*dsc*dp*ic0Eisc01ip00*
depends:        usbcore,videodev,v4l1-compat
vermagic:       2.6.27-11-generic SMP mod_unload modversions 586 
parm:           nodrop:Don't drop incomplete frames (uint)
parm:           quirks:Forced device quirks (uint)
parm:           trace:Trace level bitmask (uint)






From linux-uvc at bachelorguy.com  Wed Jan 14 12:49:16 2009
From: linux-uvc at bachelorguy.com (ADFH)
Date: Wed, 14 Jan 2009 22:49:16 +1100
Subject: [Linux-uvc-devel] Camera not in list - works in some apps,
	not others..
Message-ID: <20090114224916.e4584a72.linux-uvc@bachelorguy.com>

Camera is a "Traveler DC 8900" from Aldi.
Traveler appears to be a brand name of a German company, Schenker.
Anyway, it's an 8MP still cam, but it has a webcam function (when you
connect it to USB port, it asks which mode it should be in - cam,
pictbridge, webcam). Not the world's most expensive camera :D, but it's
a lot better than the old quickcam express I have!

The short version is, it works in some apps, not in others. Webpage
says to report cams that aren't listed on the page, so here's the info :)
Any suggestions welcome on making it work in more apps.

The USB circuitry/firmware whatever it is, based upon some googling,
seems to be used in other "Traveler DC" cameras also - given its cheap
price, it may pop up more often :)

Anyway, the more verbose stuff...

So I downloaded 2.6.28, compiled it with UVC enabled, rebooted, found
newer Nvidia binary drivers, got X going again, plugged in the camera,
tried to start up a video application and got:

Jan 14 19:42:51 my_pc kernel: usb 3-1.1.3: new high speed USB device using ehci_hcd and address 7
Jan 14 19:42:51 my_pc kernel: usb 3-1.1.3: configuration #1 chosen from 1 choice
Jan 14 19:42:51 my_pc kernel: usb 3-1.1.3: New USB device found, idVendor=0489, idProduct=d00a
Jan 14 19:42:51 my_pc kernel: usb 3-1.1.3: New USB device strings: Mfr=1, Product=2, SerialNumber=0
Jan 14 19:42:51 my_pc kernel: usb 3-1.1.3: Product: USB Camera
Jan 14 19:42:51 my_pc kernel: usb 3-1.1.3: Manufacturer: NT96611
Jan 14 19:42:51 my_pc kernel: uvcvideo: Found UVC 1.00 device USB Camera (0489:d00a)
Jan 14 19:42:51 my_pc kernel: input: USB Camera as /devices/pci0000:00/0000:00:03.3/usb3/3-1/3-1.1/3-1.1.3/3-1.1.3:1.0/input/input6
Jan 14 19:42:51 my_pc kernel: usbcore: registered new interface driver uvcvideo
Jan 14 19:42:51 my_pc kernel: USB Video Class driver (v0.1.0)
Jan 14 19:44:14 my_pc kernel: uvcvideo: Non-zero status (-75) in status completion handler.
... then I had to force the camera off as it locked up
Jan 14 19:51:37 my_pc kernel: usb 3-1.1.3: USB disconnect, address 7

So then I reconnected it...

Jan 14 21:48:18 my_pc kernel: usb 4-1.1.3: new high speed USB device using ehci_hcd and address 9
Jan 14 21:48:18 my_pc kernel: usb 4-1.1.3: configuration #1 chosen from 1 choice
Jan 14 21:48:18 my_pc kernel: uvcvideo: Found UVC 1.00 device USB Camera (0489:d00a)
Jan 14 21:48:18 my_pc kernel: input: USB Camera as /devices/pci0000:00/0000:00:03.3/usb4/4-1/4-1.1/4-1.1.3/4-1.1.3:1.0/input/input8
Jan 14 21:48:18 my_pc kernel: usb 4-1.1.3: New USB device found, idVendor=0489, idProduct=d00a
Jan 14 21:48:18 my_pc kernel: usb 4-1.1.3: New USB device strings: Mfr=1, Product=2, SerialNumber=0
Jan 14 21:48:18 my_pc kernel: usb 4-1.1.3: Product: USB Camera
Jan 14 21:48:18 my_pc kernel: usb 4-1.1.3: Manufacturer: NT96611

Removed the driver...

Jan 14 21:48:33 my_pc kernel: usbcore: deregistering interface driver uvcvideo

... Reloaded it with trace=255

Jan 14 21:48:49 my_pc kernel: uvcvideo: Adding mapping Brightness to control 00000000-0000-0000-0000-000000000101/2.
Jan 14 21:48:49 my_pc kernel: uvcvideo: Adding mapping Contrast to control 00000000-0000-0000-0000-000000000101/3.
Jan 14 21:48:49 my_pc kernel: uvcvideo: Adding mapping Hue to control 00000000-0000-0000-0000-000000000101/6.
Jan 14 21:48:49 my_pc kernel: uvcvideo: Adding mapping Saturation to control 00000000-0000-0000-0000-000000000101/7.
Jan 14 21:48:49 my_pc kernel: uvcvideo: Adding mapping Sharpness to control 00000000-0000-0000-0000-000000000101/8.
Jan 14 21:48:49 my_pc kernel: uvcvideo: Adding mapping Gamma to control 00000000-0000-0000-0000-000000000101/9.
Jan 14 21:48:49 my_pc kernel: uvcvideo: Adding mapping Backlight Compensation to control 00000000-0000-0000-0000-000000000101/1.
Jan 14 21:48:49 my_pc kernel: uvcvideo: Adding mapping Gain to control 00000000-0000-0000-0000-000000000101/4.
Jan 14 21:48:49 my_pc kernel: uvcvideo: Adding mapping Power Line Frequency to control 00000000-0000-0000-0000-000000000101/5.
Jan 14 21:48:49 my_pc kernel: uvcvideo: Adding mapping Hue, Auto to control 00000000-0000-0000-0000-000000000101/16.
Jan 14 21:48:49 my_pc kernel: uvcvideo: Adding mapping Exposure, Auto to control 00000000-0000-0000-0000-000000000001/2.
Jan 14 21:48:49 my_pc kernel: uvcvideo: Adding mapping Exposure, Auto Priority to control 00000000-0000-0000-0000-000000000001/3.
Jan 14 21:48:49 my_pc kernel: uvcvideo: Adding mapping Exposure (Absolute) to control 00000000-0000-0000-0000-000000000001/4.
Jan 14 21:48:49 my_pc kernel: uvcvideo: Adding mapping White Balance Temperature, Auto to control 00000000-0000-0000-0000-000000000101/11.
Jan 14 21:48:49 my_pc kernel: uvcvideo: Adding mapping White Balance Temperature to control 00000000-0000-0000-0000-000000000101/10.
Jan 14 21:48:49 my_pc kernel: uvcvideo: Adding mapping White Balance Component, Auto to control 00000000-0000-0000-0000-000000000101/13.
Jan 14 21:48:49 my_pc kernel: uvcvideo: Adding mapping White Balance Blue Component to control 00000000-0000-0000-0000-000000000101/12.
Jan 14 21:48:49 my_pc kernel: uvcvideo: Adding mapping White Balance Red Component to control 00000000-0000-0000-0000-000000000101/12.
Jan 14 21:48:49 my_pc kernel: uvcvideo: Adding mapping Focus (absolute) to control 00000000-0000-0000-0000-000000000001/6.
Jan 14 21:48:49 my_pc kernel: uvcvideo: Adding mapping Focus, Auto to control 00000000-0000-0000-0000-000000000001/8.
Jan 14 21:48:49 my_pc kernel: uvcvideo: Probing generic UVC device 1.1.3
Jan 14 21:48:49 my_pc kernel: uvcvideo: trying extra data from endpoint 0.
Jan 14 21:48:49 my_pc kernel: uvcvideo: Found format MJPEG.
Jan 14 21:48:49 my_pc kernel: uvcvideo: - 640x480 (30.0 fps)
Jan 14 21:48:49 my_pc kernel: uvcvideo: - 320x240 (30.0 fps)
Jan 14 21:48:49 my_pc kernel: uvcvideo: Found a Status endpoint (addr 83).
Jan 14 21:48:49 my_pc kernel: uvcvideo: Found UVC 1.00 device USB Camera (0489:d00a)
Jan 14 21:48:49 my_pc kernel: uvcvideo: Scanning UVC chain: OT 2 <- PU 4 <- SU 3 <- IT 1
Jan 14 21:48:49 my_pc kernel: uvcvideo: Found a valid video chain (1 -> 2).
Jan 14 21:48:49 my_pc kernel: input: USB Camera as /devices/pci0000:00/0000:00:03.3/usb4/4-1/4-1.1/4-1.1.3/4-1.1.3:1.0/input/input9
Jan 14 21:48:49 my_pc kernel: uvcvideo: Unable to initialize the status endpoint (-2), status interrupt will not be supported.
Jan 14 21:48:49 my_pc kernel: uvcvideo: UVC device initialized.
Jan 14 21:48:49 my_pc kernel: usbcore: registered new interface driver uvcvideo
Jan 14 21:48:49 my_pc kernel: USB Video Class driver (v0.1.0)
Jan 14 21:48:49 my_pc kernel: uvcvideo: uvc_v4l2_open
Jan 14 21:48:49 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 21:48:49 my_pc kernel: VIDIOC_QUERYCAP<7>uvcvideo: uvc_v4l2_ioctl
Jan 14 21:48:49 my_pc kernel: VIDIOCGCAPVIDIOC_QUERYCAPVIDIOC_ENUMINPUTVIDIOC_ENUMINPUTVIDIOC_ENUM_FMTVIDIOC_TRY_FMT<7>uvcvideo: Trying format 0x47504a4d (MJPG): 10000x10000.
Jan 14 21:48:49 my_pc kernel: uvcvideo: Using default frame interval 33333.3 us (30.0 fps).
Jan 14 21:48:49 my_pc kernel: uvcvideo: uvc_v4l2_release

... tried to start skype video preview ...

Jan 14 22:00:23 my_pc kernel: uvcvideo: uvc_v4l2_open
Jan 14 22:00:23 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:23 my_pc kernel: VIDIOC_QUERYCAP<7>uvcvideo: uvc_v4l2_release
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_open
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_QUERYCAP<7>uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x32315559 (YU12): 320x240.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x32315559.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x56595559 (YUYV): 320x240.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x56595559.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x59565955 (UYVY): 320x240.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x59565955.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x32315559 (YU12): 320x240.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x32315559.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x32315559 (YU12): 324x248.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x32315559.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x32315559 (YU12): 352x288.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x32315559.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x32315559 (YU12): 160x120.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x32315559.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x32315559 (YU12): 176x144.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x32315559.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x32315559 (YU12): 640x480.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x32315559.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x32315559 (YU12): 1024x576.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x32315559.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x56595559 (YUYV): 320x240.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x56595559.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x56595559 (YUYV): 324x248.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x56595559.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x56595559 (YUYV): 352x288.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x56595559.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x56595559 (YUYV): 160x120.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x56595559.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x56595559 (YUYV): 176x144.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x56595559.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x56595559 (YUYV): 640x480.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x56595559.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x56595559 (YUYV): 1024x576.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x56595559.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x59565955 (UYVY): 320x240.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x59565955.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x59565955 (UYVY): 324x248.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x59565955.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x59565955 (UYVY): 352x288.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x59565955.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x59565955 (UYVY): 160x120.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x59565955.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x59565955 (UYVY): 176x144.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x59565955.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x59565955 (UYVY): 640x480.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x59565955.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_ioctl
Jan 14 22:00:27 my_pc kernel: VIDIOC_S_FMT<7>uvcvideo: Trying format 0x59565955 (UYVY): 1024x576.
Jan 14 22:00:27 my_pc kernel: uvcvideo: Unsupported format 0x59565955.
Jan 14 22:00:27 my_pc kernel: uvcvideo: uvc_v4l2_poll
Jan 14 22:00:28 my_pc last message repeated 1598 times
Jan 14 22:00:28 my_pc kernel: uvcvideo: uvc_vcvideo: uvc_v4l2_poll
Jan 14 22:00:28 my_pc kernel: uvcvideo: uvc_v4l2_poll
Jan 14 22:00:28 my_pc last message repeated 1195 times
Jan 14 22:00:28 my_pc kernel: cvideo: uvc_v4l2_poll
Jan 14 22:00:28 my_pc kernel: uvcvideo: uvc_v4l2_poll

.... get a black preview window and a lotta log output like above.

... If, however, I run the mplayer command on linux-uvc website, it
works, showing me a preview window:

my_pc:~$ mplayer tv:// -tv fps=30
mplayer: /usr/lib/libtheora.so.0: no version information available (required by mplayer)
MPlayer dev-SVN-r26940
CPU: Intel(R) Pentium(R) 4 CPU 2.00GHz (Family: 15, Model: 2, Stepping: 4)
CPUflags:  MMX: 1 MMX2: 1 3DNow: 0 3DNow2: 0 SSE: 1 SSE2: 1
Compiled with runtime CPU detection.
121 audio & 253 video codecs
Can't open joystick device /dev/input/js0: No such file or directory
Can't init input joystick
mplayer: could not connect to socket
mplayer: No such file or directory
Failed to open LIRC support. You will not be able to use your remote control.

Playing tv://.
TV file format detected.
Selected driver: v4l2
 name: Video 4 Linux 2 input
 author: Martin Olschewski <olschewski at zpr.uni-koeln.de>
 comment: first try, more to come ;-)
v4l2: your device driver does not support VIDIOC_G_STD ioctl, VIDIOC_G_PARM was used instead.
Selected device: USB Camera
 Capabilites:  video capture  streaming
 supported norms:
 inputs: 0 = Camera 1;
 Current input: 0
 Current format: MJPEG
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
tv.c: norm_from_string(pal): Bogus norm parameter, setting default.
v4l2: ioctl enum norm failed: Invalid argument
Error: Cannot set norm!
Selected input hasn't got a tuner!
v4l2: ioctl set mute failed: Invalid argument
v4l2: ioctl query control failed: Invalid argument
v4l2: ioctl query control failed: Invalid argument
v4l2: ioctl query control failed: Invalid argument
v4l2: ioctl query control failed: Invalid argument
open: No such file or directory
[MGA] Couldn't open: /dev/mga_vid
open: No such file or directory
[MGA] Couldn't open: /dev/mga_vid
[VO_TDFXFB] Can't open /dev/fb0: No such file or directory.
s3fb: can't open /dev/fb0: No such file or directory
[VO_XV] Could not grab port 226.
==========================================================================
Opening video decoder: [ffmpeg] FFmpeg's libavcodec codec family
Selected video codec: [ffmjpeg] vfm: ffmpeg (FFmpeg MJPEG decoder)
==========================================================================
Audio: no sound
Starting playback...
VDec: vo config request - 640 x 480 (preferred colorspace: Planar 422P)
Could not find matching colorspace - retrying with -vf scale...
Opening video filter: [scale]
VDec: using Planar 422P as output csp (no 1)
Movie-Aspect is undefined - no prescaling applied.
SwScaler: reducing / aligning filtersize 1 -> 4
SwScaler: reducing / aligning filtersize 1 -> 4
SwScaler: reducing / aligning filtersize 1 -> 1
SwScaler: reducing / aligning filtersize 9 -> 8
[swscaler @ 0x8790db8]BICUBIC scaler, from yuv422p to yuv420p using MMX2
[swscaler @ 0x8790db8]using 4-tap MMX scaler for horizontal luminance scaling
[swscaler @ 0x8790db8]using 4-tap MMX scaler for horizontal chrominance scaling
[swscaler @ 0x8790db8]using 1-tap MMX "scaler" for vertical scaling (YV12 like)
[swscaler @ 0x8790db8]640x480 -> 640x480
VO: [xv] 640x480 => 640x480 Planar YV12 
v4l2: ioctl set mute failed: Invalid argument
v4l2: 80 frames successfully processed, -79 frames dropped.

Exiting... (Quit)

... anyway - output of some of the other available commands:

my_pc:~$ v4lctl -c /dev/video0 list
ioctl: VIDIOC_G_STD(std=0xb7f592e0bfb5fd38 [PAL_H,PAL_I,PAL_D,PAL_M,PAL_Nc,PAL_60,NTSC_M,NTSC_M_JP,?,?,SECAM_B,SECAM_G,SECAM_K,SECAM_K1,?ATSC_8_VSB,ATSC_16_VSB,(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null)]): Invalid argument
config: invalid value for input: Television
valid choices for "input": "Camera 1"
config: invalid value for norm: PAL
valid choices for "norm": 
attribute  | type   | current | default | comment
-----------+--------+---------+---------+-------------------------------------
norm       | choice | (null)  | (null)  |
input      | choice | Camera  | Camera  | Camera 1

my_pc:~$ v4l-info

### v4l2 device info [/dev/video0] ###
general info
    VIDIOC_QUERYCAP
	driver                  : "uvcvideo"
	card                    : "USB Camera"
	bus_info                : "0000:00:03.3"
	version                 : 0.1.0
	capabilities            : 0x4000001 [VIDEO_CAPTURE,STREAMING]

standards

inputs
    VIDIOC_ENUMINPUT(0)
	index                   : 0
	name                    : "Camera 1"
	type                    : CAMERA
	audioset                : 0
	tuner                   : 0
	std                     : 0x0 []
	status                  : 0x0 []

video capture
    VIDIOC_ENUM_FMT(0,VIDEO_CAPTURE)
	index                   : 0
	type                    : VIDEO_CAPTURE
	flags                   : 1
	description             : "MJPEG"
	pixelformat             : 0x47504a4d [MJPG]
    VIDIOC_G_FMT(VIDEO_CAPTURE)
	type                    : VIDEO_CAPTURE
	fmt.pix.width           : 640
	fmt.pix.height          : 480
	fmt.pix.pixelformat     : 0x47504a4d [MJPG]
	fmt.pix.field           : NONE
	fmt.pix.bytesperline    : 0
	fmt.pix.sizeimage       : 153600
	fmt.pix.colorspace      : unknown
	fmt.pix.priv            : 0

controls

### video4linux device info [/dev/video0] ###
general info
    VIDIOCGCAP
	name                    : "USB Camera"
	type                    : 0x1 [CAPTURE]
	channels                : 1
	audios                  : 0
	maxwidth                : 640
	maxheight               : 480
	minwidth                : 48
	minheight               : 32

channels
ioctl VIDIOCGCHAN: Invalid argument

tuner
ioctl VIDIOCGTUNER: Invalid argument

audio
ioctl VIDIOCGAUDIO: Invalid argument

picture
    VIDIOCGPICT
	brightness              : 0
	hue                     : 0
	colour                  : 0
	contrast                : 0
	whiteness               : 0
	depth                   : 0
	palette                 : unknown

buffer
ioctl VIDIOCGFBUF: Invalid argument

window
    VIDIOCGWIN
	x                       : 0
	y                       : 0
	width                   : 640
	height                  : 480
	chromakey               : 0
	flags                   : 0

... Verbose USB info on the camera in cam mode gives:

Bus 004 Device 010: ID 0489:d00a Foxconn / Hon Hai 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x0489 Foxconn / Hon Hai
  idProduct          0xd00a 
  bcdDevice            0.10
  iManufacturer           1 NT96611
  iProduct                2 USB Camera
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          218
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xc0
      Self Powered
    MaxPower              100mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0 
      iFunction               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0 
      iInterface              0 
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           57
        dwClockFrequency        6.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                17
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0 
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  2
        bmControls           0x00000000
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               4
        iTerminal               0 
      VideoControl Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      4 (SELECTOR_UNIT)
        bUnitID                 3
        bNrInPins               1
        baSource( 0)            1
        iSelector               0 
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 4
        bSourceID               3
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x00000000
        iProcessing             0 
        bmVideoStandards     0x 0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
        INTERFACE CLASS:  0e 24 01 01 65 00 81 01 02 01 00 00 01 00
        INTERFACE CLASS:  0b 24 06 01 02 01 01 00 00 00 00
        INTERFACE CLASS:  26 24 07 01 03 80 02 e0 01 00 ec 0d 00 00 ec 0d 00 00 58 02 00 15 16 05 00 00 15 16 05 00 15 16 05 00 00 00 00 00
        INTERFACE CLASS:  26 24 07 02 03 40 01 f0 00 00 ec 0d 00 00 ec 0d 00 00 58 02 00 15 16 05 00 00 15 16 05 00 15 16 05 00 00 00 00 00
        INTERFACE CLASS:  06 24 0d 00 00 00
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0001
  Self Powered

... it also seems to fail in "camstream" app (blank window).


From l.schimmer at cgv.tugraz.at  Wed Jan 14 14:52:43 2009
From: l.schimmer at cgv.tugraz.at (Lars Schimmer)
Date: Wed, 14 Jan 2009 14:52:43 +0100
Subject: [Linux-uvc-devel] Camera not in list - works in some apps,
 not others..
In-Reply-To: <20090114224916.e4584a72.linux-uvc@bachelorguy.com>
References: <20090114224916.e4584a72.linux-uvc@bachelorguy.com>
Message-ID: <496DEE2B.7040206@cgv.tugraz.at>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi!

So it works, just skype is bad, go mourn in skype for better v4l2
support ;-)

Any other v4l2 app you can test? Ekiga e.g. or kopete from KDE4 (from
KDE3 it does not do v4l2).


MfG,
Lars Schimmer
- --
- -------------------------------------------------------------
TU Graz, Institut f?r ComputerGraphik & WissensVisualisierung
Tel: +43 316 873-5405       E-Mail: l.schimmer at cgv.tugraz.at
Fax: +43 316 873-5402       PGP-Key-ID: 0x4A9B1723
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iEUEARECAAYFAklt7isACgkQmWhuE0qbFyP1HQCfd5N225uML7uBm16eyuqAZSgj
PUcAmLAO6c/BKXW45is5EHCUWfBQIZI=
=PtRN
-----END PGP SIGNATURE-----


From easycruel at gmail.com  Wed Jan 14 08:00:10 2009
From: easycruel at gmail.com (Shawn Zeng)
Date: Wed, 14 Jan 2009 15:00:10 +0800
Subject: [Linux-uvc-devel] Logitech QuickCam E1100 doesn't work
Message-ID: <6308067c0901132300n7c898528s8a4c81feb89ed2af@mail.gmail.com>

Hello,

I bought a Logitech QuickCam E1100 (????? UVC) 3 days before, it works well
under Windows XP but didn't work in my Ubuntu 8.04.1 x86, i am not sure
whether this is a driver issue or my misconfiguration, please help me to
debug.

The dmesg output when plugging:

[ 4066.744484] usb 5-5: new high speed USB device using ehci_hcd and address
7
[ 4065.313693] usb 5-5: configuration #1 chosen from 1 choice
[ 4065.314097] uvcvideo: Found UVC 1.00 device <unnamed> (046d:0918)
[ 4067.392612] uvcvideo: Failed to query (130) UVC control 1 (unit 0) : 2
(exp. 26).

I tried it using luvcview(Revision 17 from
http://svn.quickcamteam.net/svn/luvcview),

shawn at shawn-laptop:~/tmp/luvcview/luvcview$ ./luvcview
luvcview 0.2.5

SDL information:
  Video driver: x11
  A window manager is available
Device information:
  Device path:  /dev/video0
Stream settings:
  Frame format: YUYV (MJPG is not supported by device)
Unable to set format: Input/output error
 Init v4L2 failed !! exit fatallsusb output:


root at shawn-laptop:/home/shawn# lsusb -v -d 046d:0918
>
> Bus 005 Device 007: ID 046d:0918 Logitech, Inc.
> Device Descriptor:
>   bLength                18
>   bDescriptorType         1
>   bcdUSB               2.00
>   bDeviceClass          239 Miscellaneous Device
>   bDeviceSubClass         2 ?
>   bDeviceProtocol         1 Interface Association
>   bMaxPacketSize0        64
>   idVendor           0x046d Logitech, Inc.
>   idProduct          0x0918
>   bcdDevice            1.00
>   iManufacturer           0
>   iProduct                0
>   iSerial                 0
>   bNumConfigurations      1
>   Configuration Descriptor:
>     bLength                 9
>     bDescriptorType         2
>     wTotalLength          354
>     bNumInterfaces          2
>     bConfigurationValue     1
>     iConfiguration          0
>     bmAttributes         0x80
>       (Bus Powered)
>     MaxPower              500mA
>     Interface Association:
>       bLength                 8
>       bDescriptorType        11
>       bFirstInterface         0
>       bInterfaceCount         2
>       bFunctionClass         14 Video
>       bFunctionSubClass       3 Video Interface Collection
>       bFunctionProtocol       0
>       iFunction               1 Logitech QuickCam E 1100
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       0
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      1 Video Control
>       bInterfaceProtocol      0
>       iInterface              1 Logitech QuickCam E 1100
>       VideoControl Interface Descriptor:
>         bLength                13
>         bDescriptorType        36
>         bDescriptorSubtype      1 (HEADER)
>         bcdUVC               1.00
>         wTotalLength           84
>         dwClockFrequency       30.000000MHz
>         bInCollection           1
>         baInterfaceNr( 0)       1
>       VideoControl Interface Descriptor:
>         bLength                17
>         bDescriptorType        36
>         bDescriptorSubtype      2 (INPUT_TERMINAL)
>         bTerminalID             1
>         wTerminalType      0x0201 Camera Sensor
>         bAssocTerminal          0
>         iTerminal               0
>         wObjectiveFocalLengthMin      0
>         wObjectiveFocalLengthMax      0
>         wOcularFocalLength            0
>         bControlSize                  2
>         bmControls           0x00000000
>       VideoControl Interface Descriptor:
>         bLength                 9
>         bDescriptorType        36
>         bDescriptorSubtype      3 (OUTPUT_TERMINAL)
>         bTerminalID             3
>         wTerminalType      0x0101 USB Streaming
>         bAssocTerminal          0
>         bSourceID               6
>         iTerminal               0
>       VideoControl Interface Descriptor:
>         bLength                 7
>         bDescriptorType        36
>         bDescriptorSubtype      4 (SELECTOR_UNIT)
>         bUnitID                 4
>         bNrInPins               1
>         baSource( 0)            1
>         iSelector               0
>       VideoControl Interface Descriptor:
>         bLength                11
>         bDescriptorType        36
>         bDescriptorSubtype      5 (PROCESSING_UNIT)
>       Warning: Descriptor too short
>         bUnitID                 5
>         bSourceID               4
>         wMaxMultiplier          0
>         bControlSize            2
>         bmControls     0x00000501
>           Brightness
>           Backlight Compensation
>           Power Line Frequency
>         iProcessing             0
>         bmVideoStandards     0x1b
>           None
>           NTSC - 525/60
>           SECAM - 625/50
>           NTSC - 625/50
>       VideoControl Interface Descriptor:
>         bLength                27
>         bDescriptorType        36
>         bDescriptorSubtype      6 (EXTENSION_UNIT)
>         bUnitID                 6
>         guidExtensionCode         {564c97a7-7ea7-904b-8cbf-1c71ec303000}
>         bNumControl            16
>         bNrPins                 1
>         baSourceID( 0)          5
>         bControlSize            2
>         bmControls( 0)       0xff
>         bmControls( 1)       0xff
>         iExtension              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x82  EP 2 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0008  1x 8 bytes
>         bInterval              15
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       0
>       bNumEndpoints           0
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       VideoStreaming Interface Descriptor:
>         bLength                            14
>         bDescriptorType                    36
>         bDescriptorSubtype                  1 (INPUT_HEADER)
>         bNumFormats                        1
>         wTotalLength                      191
>         bEndPointAddress                  129
>         bmInfo                              0
>         bTerminalLink                       3
>         bStillCaptureMethod                 0
>         bTriggerSupport                     1
>         bTriggerUsage                       1
>         bControlSize                        1
>         bmaControls( 0)                    27
>       VideoStreaming Interface Descriptor:
>         bLength                            27
>         bDescriptorType                    36
>         bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
>         bFormatIndex                        1
>         bNumFrameDescriptors                5
>         guidFormat
> {59555932-0000-1000-8000-00aa00389b71}
>         bBitsPerPixel                      16
>         bDefaultFrameIndex                  1
>         bAspectRatioX                       0
>         bAspectRatioY                       0
>         bmInterlaceFlags                 0x00
>           Interlaced stream or variable: No
>           Fields per frame: 1 fields
>           Field 1 first: No
>           Field pattern: Field 1 only
>           bCopyProtect                      0
>       VideoStreaming Interface Descriptor:
>         bLength                            30
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         1
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                            640
>         wHeight                           480
>         dwMinBitRate                   912384
>         dwMaxBitRate                   912384
>         dwMaxVideoFrameBufferSize      614400
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  1
>         dwFrameInterval( 0)            333333
>       VideoStreaming Interface Descriptor:
>         bLength                            30
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         2
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                            320
>         wHeight                           240
>         dwMinBitRate                   912384
>         dwMaxBitRate                   912384
>         dwMaxVideoFrameBufferSize      230400
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  1
>         dwFrameInterval( 0)            333333
>       VideoStreaming Interface Descriptor:
>         bLength                            30
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         3
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                            160
>         wHeight                           120
>         dwMinBitRate                   912384
>         dwMaxBitRate                   912384
>         dwMaxVideoFrameBufferSize       57600
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  1
>         dwFrameInterval( 0)            333333
>       VideoStreaming Interface Descriptor:
>         bLength                            30
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         4
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                            352
>         wHeight                           288
>         dwMinBitRate                   912384
>         dwMaxBitRate                   912384
>         dwMaxVideoFrameBufferSize      304128
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  1
>         dwFrameInterval( 0)            333333
>       VideoStreaming Interface Descriptor:
>         bLength                            30
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         5
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                            176
>         wHeight                           144
>         dwMinBitRate                   912384
>         dwMaxBitRate                   912384
>         dwMaxVideoFrameBufferSize       76032
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  1
>         dwFrameInterval( 0)            333333
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       1
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x1400  3x 1024 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       2
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x13a0  3x 928 bytes
>         bInterval               1
> Device Qualifier (for other device speed):
>   bLength                10
>   bDescriptorType         6
>   bcdUSB               2.00
>   bDeviceClass            0 (Defined at Interface level)
>   bDeviceSubClass         0
>   bDeviceProtocol         0
>   bMaxPacketSize0        64
>   bNumConfigurations      1
> Device Status:     0x0000
>   (Bus Powered)
>

The uvcvideo module info is:

root at shawn-laptop:/home/shawn# modinfo uvcvideo
filename:
/lib/modules/2.6.24-23-generic/ubuntu/media/usbvideo/uvcvideo.ko
license:        GPL
description:    USB Video Class driver
author:         Laurent Pinchart <laurent.pinchart at skynet.be>
srcversion:     B4B6701205305B80D95F66D
alias:          usb:v*p*d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v5986p0141d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v5986p0200d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v5986p0102d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v5986p0100d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v19ABp1000d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v18CDpCAFEd*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v174Fp5212d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v0E8Dp0004d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v090CpB371d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v05ACp8300d*dc*dsc*dp*ic*isc*ip*
alias:          usb:v05ACp8501d*dc*dsc*dp*ic*isc*ip*
alias:          usb:v046Dp08C7d*dc*dsc*dp*icFFisc01ip00*
alias:          usb:v046Dp08C6d*dc*dsc*dp*icFFisc01ip00*
alias:          usb:v046Dp08C5d*dc*dsc*dp*icFFisc01ip00*
alias:          usb:v046Dp08C3d*dc*dsc*dp*icFFisc01ip00*
alias:          usb:v046Dp08C2d*dc*dsc*dp*icFFisc01ip00*
alias:          usb:v046Dp08C1d*dc*dsc*dp*icFFisc01ip00*
alias:          usb:v045Ep00F8d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v041Ep4057d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v0402p5606d*dc*dsc*dp*ic0Eisc01ip00*
depends:        usbcore,videodev,v4l2-common,v4l1-compat,compat_ioctl32
vermagic:       2.6.24-23-generic SMP mod_unload 586
parm:           trace:uint

Thanks & Regards,
Shawn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090114/fde75db1/attachment.html>

From laurent.pinchart at skynet.be  Wed Jan 14 16:31:30 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 14 Jan 2009 16:31:30 +0100
Subject: [Linux-uvc-devel] ekiga and Quickcam Sphere AF unstable
In-Reply-To: <1231709302.7319.21.camel@hurricane.lounge-warrior.org>
References: <1231709302.7319.21.camel@hurricane.lounge-warrior.org>
Message-ID: <200901141631.31040.laurent.pinchart@skynet.be>

Hi Stefan,

On Sunday 11 January 2009, Stefan Jensen wrote:
> Hi,...
>
> i have some trouble with ekiga 3.0.1 and my Logitech QuickCam Sphere.
> The cam seems works fine with ekiga. But after at least one time
> activating and deactivating the video playback in ekiga, the cam
> stopped working. Most of the time, i can rmmod/modprobe uvcvideo to
> get it back working, but sometimes this does not work, because the
> module is busy.
>
> ekiga says "error accessing device ..." and the following errors
> appears in my logs:
>
> ==> /var/log/messages <==
> Jan 11 22:11:02 hurricane kernel: uvcvideo: Failed to set UVC probe
> control : -32 (exp. 26).
>
> (repeated 7 times)

I'm afraid this is a bug in your webcam :-/ There's not much I can do about 
it. Various workarounds have been proposed so far (there are a few patches in 
the mailing list archive - google for "uvc reset patch") but none of them 
have been proved to work for a significant number of users without making the 
situation worse for others.

> ==> .xsession-errors <==
> libv4l2: error setting pixformat: Eingabe-/Ausgabefehler
>
> (repeated 4 times)
>
> What can i do to make it more stable? I won't hope this is a firmware
> bug? Here are some additional and maybe useful info:
>
> $ lsusb | grep -i logitech
> Bus 002 Device 002: ID 046d:0994 Logitech, Inc. QuickCam Orbit/Sphere AF
>
> $ modinfo uvcvideo
> filename:      
> /lib/modules/2.6.27.9-159.fc10.x86_64/kernel/drivers/media/video/uvc/uvcvid
>eo.ko version:        v0.1.0
> license:        GPL
> description:    USB Video Class driver
> author:         Laurent Pinchart <laurent.pinchart at skynet.be>
> srcversion:     8E73F7CA1CC00B4FE89A28F
> [...]
> vermagic:       2.6.27.9-159.fc10.x86_64 SMP mod_unload
> parm:           quirks:Forced device quirks (uint)
> parm:           trace:Trace level bitmask (uint)
>
> $ rpm -qa| grep v4l
> libv4l-0.5.7-1.fc10.x86_64
> xorg-x11-drv-v4l-0.2.0-1.fc9.x86_64
>
> $ rpm -qa| grep ekiga
> ekiga-3.0.1-4.fc10.x86_64

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Jan 14 16:49:24 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 14 Jan 2009 16:49:24 +0100
Subject: [Linux-uvc-devel] dealextreme Future Boy PC USB Webcam -
	sku.12939 (058f:3820)
In-Reply-To: <1231774978.23229.46.camel@nzuzi>
References: <1229093651.3720.17.camel@nzuzi>
	<200812161607.34329.laurent.pinchart@skynet.be>
	<1231774978.23229.46.camel@nzuzi>
Message-ID: <200901141649.24446.laurent.pinchart@skynet.be>

Hi Peter,

On Monday 12 January 2009, Peter Van Hertum wrote:
> apparently, the latest (hg) version still needs the quirks...

Thanks for the information. I've updated the driver and I'll submit the 
modifications for inclusion in the kernel.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Jan 14 17:30:34 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 14 Jan 2009 17:30:34 +0100
Subject: [Linux-uvc-devel] Developing a UVC camera
In-Reply-To: <c92f85270901112343n7957f927ie87a8e0328c86dff@mail.gmail.com>
References: <c92f85270901112343n7957f927ie87a8e0328c86dff@mail.gmail.com>
Message-ID: <200901141730.34459.laurent.pinchart@skynet.be>

Hi John,

On Monday 12 January 2009, John Mathew wrote:
> Dear UVC Developers,
>
> [Sorry for the second message, the earlier message was an HTML
> formatted message, sorry!]
>
> I am working on developing a UVC camera. The camera itself runs linux
> kernel and uses the gadget mode. We have a gadget driver written and an
> application running on the device, which pushes data over USB to the host
> when host requests data. The camera works in Isochronous mode and copies
> 1024 bytes every microframe.
>
> With a bit of effort (which mostly involved correcting some of the
> descriptor values on the device side), I could get uvcvideo driver on the
> host to work with the camera. luvcview works fine, so is a simpe gstreamer
> viewer which uses the v4l2src element.

Congratulations. Do you plan to publish the driver's source code ?

> We would like to get the camera working well with the uvcvideo and is
> completely standards compliant.
>
> Below are some of the issues observed, I would appreciate any tips to debug
> the issue.
>
> The kernel message on the host says that the the uvcvideo invokes quirks=1.
>
> kernel: [88819.299222] uvcvideo: Forcing device quirks 0x1 by module
> parameter for testing purpose.
> kernel: [88819.299227] uvcvideo: Please report required quirks to the
> linux-uvc-devel mailing list.
>
> I am wondering why quirks was turned on to a value of 1 and see what can be
> done at the device side to fix it.

This simply means you set the quirks parameter to 1 when loading the driver, 
either manually ('modprobe uvcvideo quirks=1') or automatically 
(in /etc/modules.conf or /etc/modules.d/).

The quirks parameter is used to test various driver quirks without requiring a 
recompilation. UVC compliant cameras shouldn't require any quirk.

> I am using gstreamer to stream from the camera and display the frames. with
> the pipeline arranged as follows.
>
>   gst-launch v4l2src ! jpegdec ! ffmpegcolorspace ! xvimagesink
>
> I see that the gstreamer quits after streaming for afew hours saying that
> there is an error in the JPEG stream. It looks like some corruption is
> happening to the JPEG frames inside the camera. But I see no USB messages
> on the host or the device. To narrow down the problem, we have an
> application which takes  one JPEG image and keep streaming them
> continuously, instead of using the ones from the camera. This probably will
> validate the USB data path.
>
> It will be great if uvc developers can throw some light on how to debug
> these issues.

Isochronous transfers are not guaranteed to be faultless. The driver could 
print a message in the kernel log when an isochronous packet transfer fails, 
but this currently require the UVC_TRACE_FRAME trace level, which would flood 
your kernel log.

You can modify the uvc_trace(UVC_TRACE_FRAME, ...) statement at the beginning 
of uvc_video_decode_isoc() in uvc_video.c and replace it with 
uvc_printk(KERN_INFO, ...) to get the driver to print the message regardless 
of the trace level.

I'm not sure if the EHCI controller and the USB stack report all isochronous 
transfer errors to the driver, so the message might not get printed even if a 
packet is corrupted or lost. However, this is worth trying.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Jan 14 17:50:04 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 14 Jan 2009 17:50:04 +0100
Subject: [Linux-uvc-devel] URB size for Bulk transport
In-Reply-To: <C3C930591D7B9D4083B73AC7CB7A5FF3048AAB43@nl-exc-02.intra.local>
References: <mailman.2095.1231241528.7227.linux-uvc-devel@lists.berlios.de>
	<200901110005.28091.laurent.pinchart@skynet.be>
	<C3C930591D7B9D4083B73AC7CB7A5FF3048AAB43@nl-exc-02.intra.local>
Message-ID: <200901141750.04536.laurent.pinchart@skynet.be>

Hi Robert,

On Monday 12 January 2009, Robert Lukassen wrote:
> > > Hi,
> > >
> > > I've noticed that the URB size in case of Bulk transport is set to
> > > the maximum payload size, or to a limit that is a multiple of the bulk
> > > packet size (psize * UVC_MAX_ISO_PACKETS). The rationale behind this
> > > is 'to be consistent with isochronous mode'.
> >
> > To be honest, the real reason is that I had to set a limit and that
> > value wasn't really worse than another (at least at that time) :-)
> >
> > > We encounter some difficulties with this approach. These occur when
> > > operating Bulk transport over a full-speed link. In that case, the
> > > limit becomes 64 * 40 = 2560 bytes per URB. The device we use has 16KB
> > > payloads. The frames typically do not consist of an exact multiple
> > > of 16KB, so a frame is send as a sequence of 16KB USB bulk transfers,
> > > ending with a bulk transfer < 16KB.
> >
> > It's really unfortunate that the USB 2.0 and UVC 1.1 specifications
> > use the term "payload" for two different concepts.
> >
> > In USB 2.0, a payload is the data that is carried in the data field of
> > a data packet within a bus transaction. In UVC 1.1, a Payload Transfer
> > is a unit of data transfer common to bulk and isochronous endpoints.
> > Your device has 16kB "payloads". As bulk payloads can be 512 bytes long
> > at most (in high-speed) mode, I assume you mean UVC payloads (a UVC header
> > followed by frame data). Is that correct ?
> >
> > In that case, every 16kB UVC payload should be terminated by a short
> > packet, not only the last payload.
>
> ...
>
> > Let's first discuss the above confusion between USB and UVC payloads.
> > If it turns our I was wrong, I'll analyse your patch :-)
>
> I did not know about the USB 2.0 terminology (payload == data in a
> transaction packet), now I do. My references to 'payload' are always to
> the UVC payload term.

Ok. So I assume that every 16kB payload you mentioned starts with a UVC 
header.

> My main confusion is on the situation where a frame is split in multiple
> UVC payloads, all of them of maximum size except for the last. You are
> stating that for those 'maximum sized' payloads (in our device's case:
> 16384 bytes) the device should insert a zero-length packet. We did some
> experiments and if the device was made to insert a zero-length packet in
> between two 'maximum sized' UVC payloads, we received three URB's in
> uvc_video_decode_bulk():
>
> [ 16384 ]  [0]  [ 16384 ]

Now I'm getting confused. The USB 2.0 specification could be clearer. Section 
5.8.3 states that

"[A bulk] endpoint must always transmit data payloads with a data field less 
than or equal to the endpoint?s reported wMaxPacketSize value. When a bulk 
IRP involves more data than can fit in one maximum-sized data payload, all 
data payloads are required to be maximum size except for the last data 
payload, which will contain the remaining data. A bulk transfer is complete 
when the endpoint does one of the following:

- Has transferred exactly the amount of data expected
- Transfers a packet with a payload size less than wMaxPacketSize or transfers 
a zero-length packet"

This seems to mean, in my opinion, that a device should always send a 
zero-length packet to the host to signal the end of the UVC payload and push 
the data to the UVC driver. I might be wrong though.

> There was one zero-length URB in between those two payload transfers.
> Apparently, the USB host driver completes the URB based on its receive
> buffer being full, before it handles the zero length packet. The next
> URB then starts with a zero length packet and immediately completes with
> 0 bytes data received.

Right. The host behaviour is consistent with the USB specification (which 
doesn't solve our problem of knowing if the zero-length packet should be sent 
or not).

> We wanted to figure out why this was happening, so we looked into the
> USB 2.0 specification and saw those 'rules' about ending a USB bulk
> transfer. We think the USB host implementation in Linux signals an URB
> complete when it has gathered enough data to fill the URB receive
> buffer. When the last full packet comes in, the URB is 'complete' as all
> 16384 bytes in its receive buffer are full. The hypothesis is that this
> is done under the first clause of those Bulk transfer rules: if the
> expected amount of data is received, the bulk transfer is complete.

I agree with that.

> We changed the behaviour of the device to only send zero length packets
> in case of 'short' UVC payloads (shorter than the maximum payload size
> signaled in the configuration descriptor) that end in a full bulk
> packet. That worked without problems.

That will only work if the host driver uses an URB size that divides exactly 
the UVC maximum payload size.

> The patch that I suggested has more to do with the limit on the payload
> size that is imposed in the Bulk situation. Simply put, because of the
> difference in maxium size of packets in Full speed (1023 in ISO, 64 in
> Bulk), there is a huge difference in the computed payload buffer size.
> For ISO, the buffer size is determined based on MAX_ISO_PACKETS * 1023
> (potentially, if this is the size signaled by the device) while for
> Bulk, this is MAX_ISO_PACKETS * 64.

When I implemented bulk support in the uvcvideo driver I allocated bulk 
buffers big enough to hold a whole UVC payload. As some devices use a single 
UVC payload to transfer a video frame, the amount of USB buffer memory was 
huge for embedded systems. This is why I put a limit on the USB buffer size.

Your problem doesn't arises from a small buffer size, but rather from a buffer 
size which is not a sub multiple of the UVC maximum payload size. In your 
case this could easily be fixed, even with small URB buffer sizes, but there 
is no generic solution other than sending a ZLP between UVC payloads (imagine 
a device using a large prime number for its UVC maximum payload size).

> We will repeat some experiments with the device sending ZLP in between
> maximally sized UVC payloads using a USB bus analyser to verify these
> findings. We'll post the results to this list.

I'm looking forward to discussing the results with you.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Jan 14 17:54:43 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 14 Jan 2009 17:54:43 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam E1100 doesn't work
In-Reply-To: <6308067c0901132300n7c898528s8a4c81feb89ed2af@mail.gmail.com>
References: <6308067c0901132300n7c898528s8a4c81feb89ed2af@mail.gmail.com>
Message-ID: <200901141754.43878.laurent.pinchart@skynet.be>

Hi Shawn,

On Wednesday 14 January 2009, Shawn Zeng wrote:
> Hello,
>
> I bought a Logitech QuickCam E1100 (????? UVC) 3 days before, it works well
> under Windows XP but didn't work in my Ubuntu 8.04.1 x86, i am not sure
> whether this is a driver issue or my misconfiguration, please help me to
> debug.
>
> The dmesg output when plugging:
>
> [ 4066.744484] usb 5-5: new high speed USB device using ehci_hcd and
> address 7
> [ 4065.313693] usb 5-5: configuration #1 chosen from 1 choice
> [ 4065.314097] uvcvideo: Found UVC 1.00 device <unnamed> (046d:0918)
> [ 4067.392612] uvcvideo: Failed to query (130) UVC control 1 (unit 0) : 2
> (exp. 26).

Could you try the latest version of the uvcvideo driver (either from 
2.6.29-rc1 or the linuxtv.org Mercurial repository) ? Your problem should be 
fixed there.

Alternatively, setting the quirks parameter to 2 (echo 2 
> /sys/modules/uvcvideo/parameters/quirks) before connecting the camera 
should work around the problem with your current version of the driver.

Best regards,

Laurent Pinchart


From mch-ber-45 at orange.fr  Thu Jan 15 22:32:40 2009
From: mch-ber-45 at orange.fr (b.michaud)
Date: Thu, 15 Jan 2009 22:32:40 +0100
Subject: [Linux-uvc-devel] What about 0x041e:0x4055 creative live! cam video
	IM PRO
Message-ID: <496FAB78.5040605@orange.fr>





Hi,
(new to this list)
I just purchased the abovementionned "creative live! cam video im pro",
which I supposed to work when reading the list of supported devices in
http://linux-uvc.berlios.de list of uvc devices.

But it appears not to work with kernel modules of 2.6.27.7-server-1mnb
kernel (mandriva 2009.0 distrib), and moreover, its id is 0x041e:4055
and not 0x041e:4063 as it is reported.

I tried to scan relevant posts on the list, but no news of this since
the 2008, april, 19 thread, and no conclusion. Did someone succeded to 
make the cam "0x041e:0x4055 work?

This cam is now at least two or three years old and it has been suject 
to a number of discussions on the web in other linux mailing lists and
forum, but seems not to have a working driver yet.

cdt.
BM
-- 
Nunc dimittis...
BM  http://bernard-michaud.pagespro-orange.fr










-- 
Nunc dimittis...
BM  http://bernard-michaud.pagespro-orange.fr











From laurent.pinchart at skynet.be  Fri Jan 16 01:16:25 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 16 Jan 2009 01:16:25 +0100
Subject: [Linux-uvc-devel] What about 0x041e:0x4055 creative live! cam
	video IM PRO
In-Reply-To: <496FAB78.5040605@orange.fr>
References: <496FAB78.5040605@orange.fr>
Message-ID: <200901160116.25413.laurent.pinchart@skynet.be>

Hi Bernard,

On Thursday 15 January 2009, b.michaud wrote:
> Hi,
> (new to this list)
> I just purchased the abovementionned "creative live! cam video im pro",
> which I supposed to work when reading the list of supported devices in
> http://linux-uvc.berlios.de list of uvc devices.
>
> But it appears not to work with kernel modules of 2.6.27.7-server-1mnb
> kernel (mandriva 2009.0 distrib), and moreover, its id is 0x041e:4055
> and not 0x041e:4063 as it is reported.

This probably means Creative Labs released different products under the same 
commercial name.

> I tried to scan relevant posts on the list, but no news of this since
> the 2008, april, 19 thread, and no conclusion. Did someone succeded to
> make the cam "0x041e:0x4055 work?
>
> This cam is now at least two or three years old and it has been suject
> to a number of discussions on the web in other linux mailing lists and
> forum, but seems not to have a working driver yet.

Could you please read http://linux-uvc.berlios.de/faq and apply the 
instructions to find out if your camera is UVC compatible ? If it is, please 
post the output of

lsusb -v -d 041e:4055

using usbutils 0.72 or newer (0.73+ preferred) and the messages printed by the 
uvcvideo driver to the kernel log.

Best regards,

Laurent Pinchart


From mch-ber-45 at orange.fr  Fri Jan 16 15:17:45 2009
From: mch-ber-45 at orange.fr (b.michaud)
Date: Fri, 16 Jan 2009 15:17:45 +0100
Subject: [Linux-uvc-devel] What about 0x041e:0x4055 creative live! cam
 video IM PRO
In-Reply-To: <200901160116.25413.laurent.pinchart@skynet.be>
References: <496FAB78.5040605@orange.fr>
	<200901160116.25413.laurent.pinchart@skynet.be>
Message-ID: <49709709.40503@orange.fr>

Hi Laurent,

Laurent Pinchart a ?crit :
> Hi Bernard,
> 
> On Thursday 15 January 2009, b.michaud wrote:
>
>>[snip]

>> But it appears not to work with kernel modules of 2.6.27.7-server-1mnb
>> kernel (mandriva 2009.0 distrib), and moreover, its id is 0x041e:4055
>> and not 0x041e:4063 as it is reported.
> 
> This probably means Creative Labs released different products under the same 
> commercial name.


You are right, and obviously it exists at least two different devices of
the same name, and this is confusing when trying to buy a cam known by
its name on the supported list. Maybe a a warning should be issued to
the supported device list to prevent a mistake.
> 
> 
> Could you please read http://linux-uvc.berlios.de/faq and apply the 
> instructions to find out if your camera is UVC compatible ? [..]
> 
> Laurent Pinchart
> 


The this test has failed : the device is not a UVC : so I propose to add
a comment in the device list to warn potential users : 0x041e:0x04055 is
NOT a UVC device, whereas it bears the same commercial name as
0x041e:0x04063 : Creative Live! Cam Video IM Pro, which I suppose to be
a working UVC cam.


And there was no means to know the vendor-id:device-id before buying the
object and trying to install it. A bad experience. I shall try to 
exchange this cam with a real UVC one at the reailer's.


Best regards
BMichaud












From barsnick at gmx.net  Fri Jan 16 22:51:14 2009
From: barsnick at gmx.net (Moritz Barsnick)
Date: Fri, 16 Jan 2009 22:51:14 +0100
Subject: [Linux-uvc-devel] Camera not in list - works in some apps,
	not	others..
In-Reply-To: <496DEE2B.7040206@cgv.tugraz.at>
References: <20090114224916.e4584a72.linux-uvc@bachelorguy.com>
	<496DEE2B.7040206@cgv.tugraz.at>
Message-ID: <20090116215114.GA28277@sunshine.barsnick.net>

On Wed, Jan 14, 2009 at 14:52:43 +0100, Lars Schimmer wrote:

> Any other v4l2 app you can test? Ekiga e.g. or kopete from KDE4 (from
> KDE3 it does not do v4l2).

As far as this list is concerned, luvcview[*] (or guvcview) is the
reference.  Everything else probably isn't programmed compatible
enough. ;-)

Moritz

[*] Get the latest SVN or 0.2.5, not the old 0.2.1.


From laurent.pinchart at skynet.be  Sat Jan 17 01:03:10 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 17 Jan 2009 01:03:10 +0100
Subject: [Linux-uvc-devel] What about 0x041e:0x4055 creative live! cam
	video IM PRO
In-Reply-To: <49709709.40503@orange.fr>
References: <496FAB78.5040605@orange.fr>
	<200901160116.25413.laurent.pinchart@skynet.be>
	<49709709.40503@orange.fr>
Message-ID: <200901170103.10532.laurent.pinchart@skynet.be>

Hi Bernard,

On Friday 16 January 2009, b.michaud wrote:
> Hi Laurent,
>
> Laurent Pinchart a ?crit :
> > Hi Bernard,
> >
> > On Thursday 15 January 2009, b.michaud wrote:
> >>[snip]
> >>
> >> But it appears not to work with kernel modules of 2.6.27.7-server-1mnb
> >> kernel (mandriva 2009.0 distrib), and moreover, its id is 0x041e:4055
> >> and not 0x041e:4063 as it is reported.
> >
> > This probably means Creative Labs released different products under the
> > same commercial name.
>
> You are right, and obviously it exists at least two different devices of
> the same name, and this is confusing when trying to buy a cam known by
> its name on the supported list. Maybe a a warning should be issued to
> the supported device list to prevent a mistake.

Good point. I've added a note the the linux-uvc webpage.

> > Could you please read http://linux-uvc.berlios.de/faq and apply the
> > instructions to find out if your camera is UVC compatible ? [..]
> >
> > Laurent Pinchart
>
> The this test has failed : the device is not a UVC : so I propose to add
> a comment in the device list to warn potential users : 0x041e:0x04055 is
> NOT a UVC device, whereas it bears the same commercial name as
> 0x041e:0x04063 : Creative Live! Cam Video IM Pro, which I suppose to be
> a working UVC cam.
>
> And there was no means to know the vendor-id:device-id before buying the
> object and trying to install it. A bad experience. I shall try to
> exchange this cam with a real UVC one at the reailer's.

Best regards,

Laurent Pinchart


From shaohuang at gmail.com  Sun Jan 18 22:52:38 2009
From: shaohuang at gmail.com (Brian Pin)
Date: Sun, 18 Jan 2009 13:52:38 -0800
Subject: [Linux-uvc-devel] Any dual stream UVC device?
Message-ID: <a81f87bb0901181352q338cdc85g615ce51b9422edf2@mail.gmail.com>

Hi all,

I am wondering if there is any dual stream UVC device that transfer a
preview stream and a regular stream at the same time?
Because I am going to make one so I am wondering if there is any. Besides is
the Linux UVC driver supports dual stream devices? Or it is the
application's responsibility to support?

Another question is, According to UVC 1.1 spec, there can be only one
endpoint for each video streaming interface, if I am going to have dual
stream, that means I will have to have two endpoints, and that means I will
have two video streaming interface. and that will also leads to two sets of
streaming parameters.   <----- that is my simple thoughts, any comments or
ideas please tell me.

-- 
Best Regards
Brian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090118/383911c6/attachment.html>

From laurent.pinchart at skynet.be  Mon Jan 19 19:05:48 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 19 Jan 2009 19:05:48 +0100
Subject: [Linux-uvc-devel] Any dual stream UVC device?
In-Reply-To: <a81f87bb0901181352q338cdc85g615ce51b9422edf2@mail.gmail.com>
References: <a81f87bb0901181352q338cdc85g615ce51b9422edf2@mail.gmail.com>
Message-ID: <200901191905.48120.laurent.pinchart@skynet.be>

Hi Brian,

On Sunday 18 January 2009, Brian Pin wrote:
> Hi all,
>
> I am wondering if there is any dual stream UVC device that transfer a
> preview stream and a regular stream at the same time?

Not that I know of.

> Because I am going to make one so I am wondering if there is any. Besides
> is the Linux UVC driver supports dual stream devices? Or it is the
> application's responsibility to support?

Both I guess. The V4L2 API doesn't clearly state how dual (or multi) stream 
devices should be handled, so this is a grey area.

> Another question is, According to UVC 1.1 spec, there can be only one
> endpoint for each video streaming interface, if I am going to have dual
> stream, that means I will have to have two endpoints, and that means I will
> have two video streaming interface. and that will also leads to two sets of
> streaming parameters.   <----- that is my simple thoughts, any comments or
> ideas please tell me.

Will your device support simultaneous preview and regular streams ? If so you 
will indeed need two streaming interfaces. This is not supported by the Linux 
UVC driver so we will probably have to work together.

Best regards,

Laurent Pinchart


From neil.benn at gmail.com  Tue Jan 20 01:33:46 2009
From: neil.benn at gmail.com (Neil Benn)
Date: Tue, 20 Jan 2009 01:33:46 +0100
Subject: [Linux-uvc-devel] Resolution of a PHilips PWC630nc webcam
Message-ID: <e3d042c80901191633hb9f05aflf9f592285d881e50@mail.gmail.com>

Hello,

         I working on connecting a philips usb webcam to an OpenMoko
FreeRunner with Debian.  I have the camera working using the uvc dreiver but
I'm getting a rather poor resolution at 160*120.  The device only runs in
host mode as USB1.1 - even though, I would have thought that 160 * 120 is
pretty poor even for a 1.1 connection (or am I wrong).  However I've been
looking around for a new version of the pwc driver as it seems that the
drier I have is the old pwc/pwcx driver.  I downloaded the latest verswion
of the driver from Luc Saillaard but that does not compile.  I suspect that
it is due to my old 2.6.24 kernel?

  The output from the make is here:
---
root at debian-gta02:~/pwc/pwc-10.0.12-rc1# make
make -C /lib/modules/2.6.24-20081103.git7172ec57/source
SUBDIRS=/root/pwc/pwc-10.0.12-rc1 modules
make[1]: Entering directory
`/usr/src/linux-2.6-openmoko-20081103.git7172ec57'
  CC [M]  /root/pwc/pwc-10.0.12-rc1/pwc-if.o
/root/pwc/pwc-10.0.12-rc1/pwc-if.c:171: error: unknown field 'hardware'
specified in initializer
/root/pwc/pwc-10.0.12-rc1/pwc-if.c:171: error: 'VID_HARDWARE_PWC' undeclared
here (not in a function)
/root/pwc/pwc-10.0.12-rc1/pwc-if.c: In function 'cd_to_pwc':
/root/pwc/pwc-10.0.12-rc1/pwc-if.c:1020: warning: initialization from
incompatible pointer type
/root/pwc/pwc-10.0.12-rc1/pwc-if.c: In function 'pwc_create_sysfs_files':
/root/pwc/pwc-10.0.12-rc1/pwc-if.c:1065: warning: passing argument 2 of
'video_device_create_file' from incompatible pointer type
/root/pwc/pwc-10.0.12-rc1/pwc-if.c:1066: warning: passing argument 2 of
'video_device_create_file' from incompatible pointer type
/root/pwc/pwc-10.0.12-rc1/pwc-if.c:1065: warning: ignoring return value of
'video_device_create_file', declared with attribute warn_unused_result
/root/pwc/pwc-10.0.12-rc1/pwc-if.c:1066: warning: ignoring return value of
'video_device_create_file', declared with attribute warn_unused_result
/root/pwc/pwc-10.0.12-rc1/pwc-if.c: In function 'pwc_remove_sysfs_files':
/root/pwc/pwc-10.0.12-rc1/pwc-if.c:1073: warning: passing argument 2 of
'video_device_remove_file' from incompatible pointer type
/root/pwc/pwc-10.0.12-rc1/pwc-if.c:1074: warning: passing argument 2 of
'video_device_remove_file' from incompatible pointer type
make[2]: *** [/root/pwc/pwc-10.0.12-rc1/pwc-if.o] Error 1
make[1]: *** [_module_/root/pwc/pwc-10.0.12-rc1] Error 2
make[1]: Leaving directory
`/usr/src/linux-2.6-openmoko-20081103.git7172ec57'
make: *** [all] Error 2
---

  I'm looking for some pointers here to help me determine if I am going the
right way as I'm not getting very far!!  Any help would be greatly
appreciated.

Cheers,

Neil
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090120/cfe46fcc/attachment.html>

From harshkumar1 at gmail.com  Tue Jan 20 12:50:41 2009
From: harshkumar1 at gmail.com (Harsh Kumar)
Date: Tue, 20 Jan 2009 17:20:41 +0530
Subject: [Linux-uvc-devel] Z-Star Microelectronics Corp - Product ID: 307B
	Z-Star Microelectronics Corp
In-Reply-To: <154c675c0901200344l3ceff861mcf579daf34512f56@mail.gmail.com>
References: <154c675c0901200344l3ceff861mcf579daf34512f56@mail.gmail.com>
Message-ID: <154c675c0901200350r4667c0a2w675a184f2b37edcc@mail.gmail.com>

Hi all,
I have recently bought a WebCam of Zebronics (ZEB-480WC). I do not
have a driver for it and am unable to find it on net for my Linux
system.
The Product ID of my WebCam is 307B
The Vendor ID is 0AC8.
Can you please help me loacate one of the drivers.

-- 
Harsh Kumar


From laurent.pinchart at skynet.be  Tue Jan 20 14:56:46 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 20 Jan 2009 14:56:46 +0100
Subject: [Linux-uvc-devel] Z-Star Microelectronics Corp - Product ID:
	307B Z-Star Microelectronics Corp
In-Reply-To: <154c675c0901200350r4667c0a2w675a184f2b37edcc@mail.gmail.com>
References: <154c675c0901200344l3ceff861mcf579daf34512f56@mail.gmail.com>
	<154c675c0901200350r4667c0a2w675a184f2b37edcc@mail.gmail.com>
Message-ID: <200901201456.46833.laurent.pinchart@skynet.be>

Hi,

On Tuesday 20 January 2009, Harsh Kumar wrote:
> Hi all,
> I have recently bought a WebCam of Zebronics (ZEB-480WC). I do not
> have a driver for it and am unable to find it on net for my Linux
> system.
> The Product ID of my WebCam is 307B
> The Vendor ID is 0AC8.
> Can you please help me loacate one of the drivers.

Check http://linux-uvc.berlios.de/faq to find out if your camera is UVC 
compatible. If it is, it should be supported by the uvcvideo driver. If it 
isn't I can't help you.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Jan 20 14:57:55 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 20 Jan 2009 14:57:55 +0100
Subject: [Linux-uvc-devel] Resolution of a PHilips PWC630nc webcam
In-Reply-To: <e3d042c80901191633hb9f05aflf9f592285d881e50@mail.gmail.com>
References: <e3d042c80901191633hb9f05aflf9f592285d881e50@mail.gmail.com>
Message-ID: <200901201457.56223.laurent.pinchart@skynet.be>

Hi Neil,

On Tuesday 20 January 2009, Neil Benn wrote:
> Hello,
>
>          I working on connecting a philips usb webcam to an OpenMoko
> FreeRunner with Debian.  I have the camera working using the uvc dreiver
> but I'm getting a rather poor resolution at 160*120.  The device only runs
> in host mode as USB1.1 - even though, I would have thought that 160 * 120
> is pretty poor even for a 1.1 connection (or am I wrong).  However I've
> been looking around for a new version of the pwc driver as it seems that
> the drier I have is the old pwc/pwcx driver.  I downloaded the latest
> verswion of the driver from Luc Saillaard but that does not compile.  I
> suspect that it is due to my old 2.6.24 kernel?

What makes you think the pwc driver is in any way related to the uvcvideo 
driver ? :-)

Best regards,

Laurent Pinchart


From neil.benn at gmail.com  Tue Jan 20 15:38:28 2009
From: neil.benn at gmail.com (Neil Benn)
Date: Tue, 20 Jan 2009 15:38:28 +0100
Subject: [Linux-uvc-devel] Resolution of a PHilips PWC630nc webcam
In-Reply-To: <200901201457.56223.laurent.pinchart@skynet.be>
References: <e3d042c80901191633hb9f05aflf9f592285d881e50@mail.gmail.com>
	<200901201457.56223.laurent.pinchart@skynet.be>
Message-ID: <e3d042c80901200638t4fa49b02rc4967d94ca8860c@mail.gmail.com>

Hello,

         The way I thought that the UVC driver worked was that it provides a
facade over the hardware drivers, kinda like a system API which
manufacturers (or OS developers) can design their drivers towards.  Is this
not the case?  I also tried digging around on the PWC lists but they are
pretty dead.  I assume from your question that pwc and uvc are not working
in tandem but you can use one or the other.  I guess my task is to test the
camera with uvc and pwc to see if I can get a higher resolution - is there a
way to force the camera to boot up in either system?

Cheers,

Neil

On Tue, Jan 20, 2009 at 2:57 PM, Laurent Pinchart <
laurent.pinchart at skynet.be> wrote:

> Hi Neil,
>
> On Tuesday 20 January 2009, Neil Benn wrote:
> > Hello,
> >
> >          I working on connecting a philips usb webcam to an OpenMoko
> > FreeRunner with Debian.  I have the camera working using the uvc dreiver
> > but I'm getting a rather poor resolution at 160*120.  The device only
> runs
> > in host mode as USB1.1 - even though, I would have thought that 160 * 120
> > is pretty poor even for a 1.1 connection (or am I wrong).  However I've
> > been looking around for a new version of the pwc driver as it seems that
> > the drier I have is the old pwc/pwcx driver.  I downloaded the latest
> > verswion of the driver from Luc Saillaard but that does not compile.  I
> > suspect that it is due to my old 2.6.24 kernel?
>
> What makes you think the pwc driver is in any way related to the uvcvideo
> driver ? :-)
>
> Best regards,
>
> Laurent Pinchart
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090120/b8c04093/attachment.html>

From laurent.pinchart at skynet.be  Tue Jan 20 15:51:59 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 20 Jan 2009 15:51:59 +0100
Subject: [Linux-uvc-devel] Resolution of a PHilips PWC630nc webcam
In-Reply-To: <e3d042c80901200638t4fa49b02rc4967d94ca8860c@mail.gmail.com>
References: <e3d042c80901191633hb9f05aflf9f592285d881e50@mail.gmail.com>
	<200901201457.56223.laurent.pinchart@skynet.be>
	<e3d042c80901200638t4fa49b02rc4967d94ca8860c@mail.gmail.com>
Message-ID: <200901201551.59720.laurent.pinchart@skynet.be>

Hi Neil,

On Tuesday 20 January 2009, Neil Benn wrote:
> Hello,
>
>          The way I thought that the UVC driver worked was that it provides
> a facade over the hardware drivers, kinda like a system API which
> manufacturers (or OS developers) can design their drivers towards.  Is this
> not the case?

The uvcvideo driver is a full device driver that provides an API to userspace 
applications, much like the pwc driver does.

> I also tried digging around on the PWC lists but they are pretty dead. I
> assume from your question that pwc and uvc are not working in tandem but you
> can use one or the other.

That's right. The two drivers support different peripherals. The uvcvideo 
driver supports UVC-compatible USB video devices, while the pwc driver 
supports cameras based on specific chipsets that implement a proprietary 
protocol.

> I guess my task is to test the camera with uvc and pwc to see if I can get a
> higher resolution - is there a way to force the camera to boot up in either
> system?

The camera won't work with both drivers. If it is a UVC compatible model, the 
pwc driver will not work.

UVC compatible devices advertise their capabilities through the USB 
descriptors. When plugged into a USB 1.1 port they lower the frame size and 
frame rate. You can list the supported sizes with

lsusb -v

using usbutils 0.72 or newer (0.73+ preferred).

Best regards,

Laurent Pinchart


From flammy at lounge-warrior.org  Tue Jan 20 19:50:58 2009
From: flammy at lounge-warrior.org (Stefan Jensen)
Date: Tue, 20 Jan 2009 19:50:58 +0100
Subject: [Linux-uvc-devel] ekiga and Quickcam Sphere AF unstable
In-Reply-To: <200901141631.31040.laurent.pinchart@skynet.be>
References: <1231709302.7319.21.camel@hurricane.lounge-warrior.org>
	<200901141631.31040.laurent.pinchart@skynet.be>
Message-ID: <1232477458.20838.44.camel@localhost.localdomain>

Hi Laurent,...

Am Mittwoch, den 14.01.2009, 16:31 +0100 schrieb Laurent Pinchart:

> I'm afraid this is a bug in your webcam :-/ There's not much I can do about 
> it. Various workarounds have been proposed so far (there are a few patches in

Uhm, i was afraid of this.. :-/ This is bug #2 in that * firmware that
hits me. :-(

> the mailing list archive - google for "uvc reset patch") but none of them 
> have been proved to work for a significant number of users without making the 

Thanks, i'll try it.

I have another, more general question: It seems that there are different
ways to activate a uvcvideo cam? For instance, when i have a device
already open (eg: kaffeine, watching my favorite TV-Program) and than
starting "ekiga", the video playback stopped for a few seconds and then 
goes on, when the uvc cam is ready. This is really annoying. Especially
for "ekiga", while it does it on every video call (This happens too,
when i manually load the additional motor controls for this cam.)

I notice, that "motion" doesn't shows up such behavior when activating
the cam or loading the motor controls. A current playing video is not
interrupted. That's really nice. :-)

Is it possible to have this for ekiga and other apps, too? Is this a job
for uvcvideo or more a job the application side?

btw: Is it planned to have "build-in" support in uvcvideo for the
various motor controls (like motion) or is it possible (maybe for
me ;-)) to make my own version especially for my Sphere AF?
Maybe i look in the wrong direction? ;-)

Sorry for bad English, i hope you cache my problem(s).

Thank you!

Stefan
--



From flammy at lounge-warrior.org  Tue Jan 20 20:00:16 2009
From: flammy at lounge-warrior.org (Stefan Jensen)
Date: Tue, 20 Jan 2009 20:00:16 +0100
Subject: [Linux-uvc-devel] ekiga and Quickcam Sphere AF unstable
In-Reply-To: <1232477458.20838.44.camel@localhost.localdomain>
References: <1231709302.7319.21.camel@hurricane.lounge-warrior.org>
	<200901141631.31040.laurent.pinchart@skynet.be>
	<1232477458.20838.44.camel@localhost.localdomain>
Message-ID: <1232478016.25127.2.camel@localhost.localdomain>

Hi Laurent,..

Am Dienstag, den 20.01.2009, 19:50 +0100 schrieb Stefan Jensen:

> btw: Is it planned to have "build-in" support in uvcvideo for the
> various motor controls (like motion) or is it possible (maybe for

Sorry, i mean "guvcvideo" not motion.

best regards

Stefan
--



From marien.lebreton at gmail.com  Wed Jan 21 11:15:30 2009
From: marien.lebreton at gmail.com (Marien Lebreton)
Date: Wed, 21 Jan 2009 11:15:30 +0100
Subject: [Linux-uvc-devel] New device to add to the list
Message-ID: <c8162a820901210215j151a7ddfr5caf7b88de63f70a@mail.gmail.com>

Hi there!

Glad to let you know that on my Acer TravelMate 7720 with Debian lenny
(testing),
following device is working perfectly (though a bit "too green"
display, but I assume this has nothing to do with UVC ;-)).

It is an integrated one, but connected internally through USB and not PCI.

lcf at evendim:~$ dmesg | grep uvc
[   13.214092] uvcvideo: Found UVC 1.00 device Acer Crystal Eye webcam
(5986:0102)
[   13.462867] usbcore: registered new interface driver uvcvideo

lcf at evendim:~$ lsusb | grep Acer
Bus 003 Device 002: ID 5986:0102 Acer, Inc Crystal Eye webcam

Tested OK with Kopete & Cheese.

Hope this helps, let me know should you need more details.

Kind regards,

-- 
Marien


From laurent.pinchart at skynet.be  Wed Jan 21 11:25:40 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 21 Jan 2009 11:25:40 +0100
Subject: [Linux-uvc-devel] New device to add to the list
In-Reply-To: <c8162a820901210215j151a7ddfr5caf7b88de63f70a@mail.gmail.com>
References: <c8162a820901210215j151a7ddfr5caf7b88de63f70a@mail.gmail.com>
Message-ID: <200901211125.40548.laurent.pinchart@skynet.be>

Hi Marien,

On Wednesday 21 January 2009, Marien Lebreton wrote:
> Hi there!
>
> Glad to let you know that on my Acer TravelMate 7720 with Debian lenny
> (testing),
> following device is working perfectly (though a bit "too green"
> display, but I assume this has nothing to do with UVC ;-)).
>
> It is an integrated one, but connected internally through USB and not PCI.
>
> lcf at evendim:~$ dmesg | grep uvc
> [   13.214092] uvcvideo: Found UVC 1.00 device Acer Crystal Eye webcam
> (5986:0102)
> [   13.462867] usbcore: registered new interface driver uvcvideo
>
> lcf at evendim:~$ lsusb | grep Acer
> Bus 003 Device 002: ID 5986:0102 Acer, Inc Crystal Eye webcam
>
> Tested OK with Kopete & Cheese.
>
> Hope this helps, let me know should you need more details.

Thanks for the report. The camera was already listed in the supported devices 
list, but I've updated the description to include your laptop model.

Best regards,

Laurent Pinchart


From barsnick at gmx.net  Wed Jan 21 15:44:05 2009
From: barsnick at gmx.net (Moritz Barsnick)
Date: Wed, 21 Jan 2009 15:44:05 +0100
Subject: [Linux-uvc-devel] Resolution of a PHilips PWC630nc webcam
In-Reply-To: <e3d042c80901191633hb9f05aflf9f592285d881e50@mail.gmail.com>
References: <e3d042c80901191633hb9f05aflf9f592285d881e50@mail.gmail.com>
Message-ID: <20090121144405.GA24287@sunshine.barsnick.net>

[OT, since it's purely PWC related.]

On Tue, Jan 20, 2009 at 01:33:46 +0100, Neil Benn wrote:

> driver.  I downloaded the latest verswion of the driver from Luc Saillaard but
> that does not compile.  I suspect that it is due to my old 2.6.24 kernel?

Linux kernel 2.6.24 is sufficiently new. As far as I know, no more
recent PWC development has been done.  You already have the newest
driver right in there.  The "ancient" driver with the possibly
copyright encumbered compression code (and the ancient driver without
compression support) was obsoleted veeeeery long ago.  (I know because
I use the PWC driver.  i used to download the Saillard version, but
that is no required since a few years.)

HTH,
Moritz


From deloptes at yahoo.com  Fri Jan 23 21:15:25 2009
From: deloptes at yahoo.com (Emanoil Kotsev)
Date: Fri, 23 Jan 2009 12:15:25 -0800 (PST)
Subject: [Linux-uvc-devel] webcam switch
In-Reply-To: <mailman.1478.1226849107.29648.linux-uvc-devel@lists.berlios.de>
Message-ID: <559176.25061.qm@web53211.mail.re2.yahoo.com>

hello,

I was wondering if anyone knows if there is a switch for webcams, especially one that works with skype under linux.

I want to be able to switch between two webcams. Do you have any idea what I can look at, or how it can be done?

thanks in advance and regards



      


From grice.drew at googlemail.com  Mon Jan 26 18:05:52 2009
From: grice.drew at googlemail.com (andrew grice)
Date: Mon, 26 Jan 2009 17:05:52 +0000
Subject: [Linux-uvc-devel] Unsupported Webcam 041e:406a
Message-ID: <8e32ff550901260905w4f3b943cp4034d27cfb4e47b1@mail.gmail.com>

I recently purchased a Creative Webcam Live! Cam Notebook Ultra. It has a
different product id than some of the ones i've read about. I think it might
be a UVC webcam because the uvcvideo driver loads but i cant get an image
out of it.

> lsusb -d  041e:406a -v

Bus 001 Device 003: ID 041e:406a Creative Technology, Ltd
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x041e Creative Technology, Ltd
  idProduct          0x406a
  bcdDevice            1.00
  iManufacturer           2 Creative Technology Ltd
  iProduct                1 VF0490 Live Cam Notebook Ultra
  iSerial                 3 081112_B_00805
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength         1001
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              168mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              0
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength          103
        dwClockFrequency       15.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               5
        iTerminal               0
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {7033f028-1163-2e4a-ba2c-6890eb334016}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          3
        bControlSize            1
        bmControls( 0)       0x3f
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 5
        guidExtensionCode         {3fae1228-d7bc-114e-a357-6f1edef7d61d}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          4
        bControlSize            1
        bmControls( 0)       0x00
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000a0e
          Auto-Exposure Mode
          Auto-Exposure Priority
          Exposure Time (Absolute)
          Zoom (Absolute)
          PanTilt (Absolute)
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000177f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Gain
          Power Line Frequency
          White Balance Temperature, Auto
        iProcessing             0
        bmVideoStandards     0xb7
          None
          NTSC - 525/60
          PAL - 625/50
          NTSC - 625/50
          PAL - 525/60
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            15
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                        2
        wTotalLength                      631
        bEndPointAddress                  129
        bmInfo                              0
        bTerminalLink                       2
        bStillCaptureMethod                 0
        bTriggerSupport                     1
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    27
        bmaControls( 1)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                6
        guidFormat
{59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                  3072000
        dwMaxBitRate                 18432000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                  1013760
        dwMaxBitRate                  6082560
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   768000
        dwMaxBitRate                  4608000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                   253440
        dwMaxBitRate                  1520640
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   192000
        dwMaxBitRate                  1152000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                 19660800
        dwMaxBitRate                 19660800
        dwMaxVideoFrameBufferSize     2621440
        dwDefaultFrameInterval        1333333
        bFrameIntervalType                  2
        dwFrameInterval( 0)           1333333
        dwFrameInterval( 1)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            11
        bDescriptorType                    36
        bDescriptorSubtype                  6 (FORMAT_MJPEG)
        bFormatIndex                        2
        bNumFrameDescriptors                6
        bFlags                              0
          Fixed-size samples: No
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   384000
        dwMaxBitRate                  2304000
        dwMaxVideoFrameBufferSize       76800
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   126720
        dwMaxBitRate                   760320
        dwMaxVideoFrameBufferSize       25344
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                    96000
        dwMaxBitRate                   576000
        dwMaxVideoFrameBufferSize       19200
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                    31680
        dwMaxBitRate                   190080
        dwMaxVideoFrameBufferSize        6336
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                    24000
        dwMaxBitRate                   144000
        dwMaxVideoFrameBufferSize        4800
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                  3932160
        dwMaxBitRate                  4915200
        dwMaxVideoFrameBufferSize      327680
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  3
        dwFrameInterval( 0)            666666
        dwFrameInterval( 1)           1000000
        dwFrameInterval( 2)           2000000
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b20  2x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1320  3x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 1024 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       0
      bFunctionProtocol       0
      iFunction               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0
      iInterface              0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           43
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             2
        wChannelConfig     0x0000
        iChannelNames           0
        iTerminal               0
      AudioControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 2
        bSourceID               1
        bControlSize            2
        bmaControls( 0)      0x01
        bmaControls( 0)      0x00
          Mute
        bmaControls( 1)      0x02
        bmaControls( 1)      0x00
          Volume
        bmaControls( 2)      0x02
        bmaControls( 2)      0x00
          Volume
        iFeature                0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               2
        iTerminal               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                23
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             2
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            5 Discrete
        tSamFreq[ 0]         8000
        tSamFreq[ 1]        11025
        tSamFreq[ 2]        16000
        tSamFreq[ 3]        24000
        tSamFreq[ 4]        48000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x84  EP 4 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0190  1x 400 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0002
  (Bus Powered)
  Remote Wakeup Enabled


Im running linux kernel 2.6.27.7 and using drivers from the repository
uvcvideo-f5c337ded781.tar.bz2

When I run xawtv i get the following output and a blank image:

ioctl: VIDIOC_G_STD(std=0x100000001 [PAL_B,(null)]): Invalid argument
ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument
ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0
[];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.seconds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0;memory=unknown):
Invalid argument

Does anyone know what the issue might be? Or if this cam is compatible with
uvc?

Best Regards
Andrew Grice
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090126/490c4f39/attachment.html>

From pj.assis at gmail.com  Mon Jan 26 23:20:18 2009
From: pj.assis at gmail.com (Paulo Assis)
Date: Mon, 26 Jan 2009 22:20:18 +0000
Subject: [Linux-uvc-devel] Unsupported Webcam 041e:406a
In-Reply-To: <8e32ff550901260905w4f3b943cp4034d27cfb4e47b1@mail.gmail.com>
References: <8e32ff550901260905w4f3b943cp4034d27cfb4e47b1@mail.gmail.com>
Message-ID: <59cf47a80901261420s4f58a66dq3e4a7e7722ab19fc@mail.gmail.com>

Andrew Hi,
Could you try luvcview or guvcview instead, xawtv doesn't work for me either.
I think it may have something to do with libv4l2, or then just some
configuration problem.

Best regards,
Paulo

2009/1/26 andrew grice <grice.drew at googlemail.com>:
> I recently purchased a Creative Webcam Live! Cam Notebook Ultra. It has a
> different product id than some of the ones i've read about. I think it might
> be a UVC webcam because the uvcvideo driver loads but i cant get an image
> out of it.
>
>> lsusb -d  041e:406a -v
>
> Bus 001 Device 003: ID 041e:406a Creative Technology, Ltd
> Device Descriptor:
>   bLength                18
>   bDescriptorType         1
>   bcdUSB               2.00
>   bDeviceClass          239 Miscellaneous Device
>   bDeviceSubClass         2 ?
>   bDeviceProtocol         1 Interface Association
>   bMaxPacketSize0        64
>   idVendor           0x041e Creative Technology, Ltd
>   idProduct          0x406a
>   bcdDevice            1.00
>   iManufacturer           2 Creative Technology Ltd
>   iProduct                1 VF0490 Live Cam Notebook Ultra
>   iSerial                 3 081112_B_00805
>   bNumConfigurations      1
>   Configuration Descriptor:
>     bLength                 9
>     bDescriptorType         2
>     wTotalLength         1001
>     bNumInterfaces          4
>     bConfigurationValue     1
>     iConfiguration          0
>     bmAttributes         0x80
>       (Bus Powered)
>     MaxPower              168mA
>     Interface Association:
>       bLength                 8
>       bDescriptorType        11
>       bFirstInterface         0
>       bInterfaceCount         2
>       bFunctionClass         14 Video
>       bFunctionSubClass       3 Video Interface Collection
>       bFunctionProtocol       0
>       iFunction               0
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       0
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      1 Video Control
>       bInterfaceProtocol      0
>       iInterface              0
>       VideoControl Interface Descriptor:
>         bLength                13
>         bDescriptorType        36
>         bDescriptorSubtype      1 (HEADER)
>         bcdUVC               1.00
>         wTotalLength          103
>         dwClockFrequency       15.000000MHz
>         bInCollection           1
>         baInterfaceNr( 0)       1
>       VideoControl Interface Descriptor:
>         bLength                 9
>         bDescriptorType        36
>         bDescriptorSubtype      3 (OUTPUT_TERMINAL)
>         bTerminalID             2
>         wTerminalType      0x0101 USB Streaming
>         bAssocTerminal          0
>         bSourceID               5
>         iTerminal               0
>       VideoControl Interface Descriptor:
>         bLength                26
>         bDescriptorType        36
>         bDescriptorSubtype      6 (EXTENSION_UNIT)
>         bUnitID                 4
>         guidExtensionCode         {7033f028-1163-2e4a-ba2c-6890eb334016}
>         bNumControl             8
>         bNrPins                 1
>         baSourceID( 0)          3
>         bControlSize            1
>         bmControls( 0)       0x3f
>         iExtension              0
>       VideoControl Interface Descriptor:
>         bLength                26
>         bDescriptorType        36
>         bDescriptorSubtype      6 (EXTENSION_UNIT)
>         bUnitID                 5
>         guidExtensionCode         {3fae1228-d7bc-114e-a357-6f1edef7d61d}
>         bNumControl             8
>         bNrPins                 1
>         baSourceID( 0)          4
>         bControlSize            1
>         bmControls( 0)       0x00
>         iExtension              0
>       VideoControl Interface Descriptor:
>         bLength                18
>         bDescriptorType        36
>         bDescriptorSubtype      2 (INPUT_TERMINAL)
>         bTerminalID             1
>         wTerminalType      0x0201 Camera Sensor
>         bAssocTerminal          0
>         iTerminal               0
>         wObjectiveFocalLengthMin      0
>         wObjectiveFocalLengthMax      0
>         wOcularFocalLength            0
>         bControlSize                  3
>         bmControls           0x00000a0e
>           Auto-Exposure Mode
>           Auto-Exposure Priority
>           Exposure Time (Absolute)
>           Zoom (Absolute)
>           PanTilt (Absolute)
>       VideoControl Interface Descriptor:
>         bLength                11
>         bDescriptorType        36
>         bDescriptorSubtype      5 (PROCESSING_UNIT)
>       Warning: Descriptor too short
>         bUnitID                 3
>         bSourceID               1
>         wMaxMultiplier          0
>         bControlSize            2
>         bmControls     0x0000177f
>           Brightness
>           Contrast
>           Hue
>           Saturation
>           Sharpness
>           Gamma
>           White Balance Temperature
>           Backlight Compensation
>           Gain
>           Power Line Frequency
>           White Balance Temperature, Auto
>         iProcessing             0
>         bmVideoStandards     0xb7
>           None
>           NTSC - 525/60
>           PAL - 625/50
>           NTSC - 625/50
>           PAL - 525/60
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x83  EP 3 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0010  1x 16 bytes
>         bInterval               6
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       0
>       bNumEndpoints           0
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       VideoStreaming Interface Descriptor:
>         bLength                            15
>         bDescriptorType                    36
>         bDescriptorSubtype                  1 (INPUT_HEADER)
>         bNumFormats                        2
>         wTotalLength                      631
>         bEndPointAddress                  129
>         bmInfo                              0
>         bTerminalLink                       2
>         bStillCaptureMethod                 0
>         bTriggerSupport                     1
>         bTriggerUsage                       1
>         bControlSize                        1
>         bmaControls( 0)                    27
>         bmaControls( 1)                    27
>       VideoStreaming Interface Descriptor:
>         bLength                            27
>         bDescriptorType                    36
>         bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
>         bFormatIndex                        1
>         bNumFrameDescriptors                6
>         guidFormat
> {59555932-0000-1000-8000-00aa00389b71}
>         bBitsPerPixel                      16
>         bDefaultFrameIndex                  1
>         bAspectRatioX                       0
>         bAspectRatioY                       0
>         bmInterlaceFlags                 0x00
>           Interlaced stream or variable: No
>           Fields per frame: 1 fields
>           Field 1 first: No
>           Field pattern: Field 1 only
>           bCopyProtect                      0
>       VideoStreaming Interface Descriptor:
>         bLength                            50
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         1
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                            640
>         wHeight                           480
>         dwMinBitRate                  3072000
>         dwMaxBitRate                 18432000
>         dwMaxVideoFrameBufferSize      614400
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  6
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            400000
>         dwFrameInterval( 2)            500000
>         dwFrameInterval( 3)            666666
>         dwFrameInterval( 4)           1000000
>         dwFrameInterval( 5)           2000000
>       VideoStreaming Interface Descriptor:
>         bLength                            50
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         2
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                            352
>         wHeight                           288
>         dwMinBitRate                  1013760
>         dwMaxBitRate                  6082560
>         dwMaxVideoFrameBufferSize      202752
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  6
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            400000
>         dwFrameInterval( 2)            500000
>         dwFrameInterval( 3)            666666
>         dwFrameInterval( 4)           1000000
>         dwFrameInterval( 5)           2000000
>       VideoStreaming Interface Descriptor:
>         bLength                            50
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         3
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                            320
>         wHeight                           240
>         dwMinBitRate                   768000
>         dwMaxBitRate                  4608000
>         dwMaxVideoFrameBufferSize      153600
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  6
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            400000
>         dwFrameInterval( 2)            500000
>         dwFrameInterval( 3)            666666
>         dwFrameInterval( 4)           1000000
>         dwFrameInterval( 5)           2000000
>       VideoStreaming Interface Descriptor:
>         bLength                            50
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         4
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                            176
>         wHeight                           144
>         dwMinBitRate                   253440
>         dwMaxBitRate                  1520640
>         dwMaxVideoFrameBufferSize       50688
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  6
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            400000
>         dwFrameInterval( 2)            500000
>         dwFrameInterval( 3)            666666
>         dwFrameInterval( 4)           1000000
>         dwFrameInterval( 5)           2000000
>       VideoStreaming Interface Descriptor:
>         bLength                            50
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         5
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                            160
>         wHeight                           120
>         dwMinBitRate                   192000
>         dwMaxBitRate                  1152000
>         dwMaxVideoFrameBufferSize       38400
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  6
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            400000
>         dwFrameInterval( 2)            500000
>         dwFrameInterval( 3)            666666
>         dwFrameInterval( 4)           1000000
>         dwFrameInterval( 5)           2000000
>       VideoStreaming Interface Descriptor:
>         bLength                            34
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         6
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                           1280
>         wHeight                          1024
>         dwMinBitRate                 19660800
>         dwMaxBitRate                 19660800
>         dwMaxVideoFrameBufferSize     2621440
>         dwDefaultFrameInterval        1333333
>         bFrameIntervalType                  2
>         dwFrameInterval( 0)           1333333
>         dwFrameInterval( 1)           2000000
>       VideoStreaming Interface Descriptor:
>         bLength                            11
>         bDescriptorType                    36
>         bDescriptorSubtype                  6 (FORMAT_MJPEG)
>         bFormatIndex                        2
>         bNumFrameDescriptors                6
>         bFlags                              0
>           Fixed-size samples: No
>         bDefaultFrameIndex                  1
>         bAspectRatioX                       0
>         bAspectRatioY                       0
>         bmInterlaceFlags                 0x00
>           Interlaced stream or variable: No
>           Fields per frame: 1 fields
>           Field 1 first: No
>           Field pattern: Field 1 only
>           bCopyProtect                      0
>       VideoStreaming Interface Descriptor:
>         bLength                            50
>         bDescriptorType                    36
>         bDescriptorSubtype                  7 (FRAME_MJPEG)
>         bFrameIndex                         1
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                            640
>         wHeight                           480
>         dwMinBitRate                   384000
>         dwMaxBitRate                  2304000
>         dwMaxVideoFrameBufferSize       76800
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  6
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            400000
>         dwFrameInterval( 2)            500000
>         dwFrameInterval( 3)            666666
>         dwFrameInterval( 4)           1000000
>         dwFrameInterval( 5)           2000000
>       VideoStreaming Interface Descriptor:
>         bLength                            50
>         bDescriptorType                    36
>         bDescriptorSubtype                  7 (FRAME_MJPEG)
>         bFrameIndex                         2
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                            352
>         wHeight                           288
>         dwMinBitRate                   126720
>         dwMaxBitRate                   760320
>         dwMaxVideoFrameBufferSize       25344
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  6
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            400000
>         dwFrameInterval( 2)            500000
>         dwFrameInterval( 3)            666666
>         dwFrameInterval( 4)           1000000
>         dwFrameInterval( 5)           2000000
>       VideoStreaming Interface Descriptor:
>         bLength                            50
>         bDescriptorType                    36
>         bDescriptorSubtype                  7 (FRAME_MJPEG)
>         bFrameIndex                         3
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                            320
>         wHeight                           240
>         dwMinBitRate                    96000
>         dwMaxBitRate                   576000
>         dwMaxVideoFrameBufferSize       19200
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  6
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            400000
>         dwFrameInterval( 2)            500000
>         dwFrameInterval( 3)            666666
>         dwFrameInterval( 4)           1000000
>         dwFrameInterval( 5)           2000000
>       VideoStreaming Interface Descriptor:
>         bLength                            50
>         bDescriptorType                    36
>         bDescriptorSubtype                  7 (FRAME_MJPEG)
>         bFrameIndex                         4
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                            176
>         wHeight                           144
>         dwMinBitRate                    31680
>         dwMaxBitRate                   190080
>         dwMaxVideoFrameBufferSize        6336
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  6
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            400000
>         dwFrameInterval( 2)            500000
>         dwFrameInterval( 3)            666666
>         dwFrameInterval( 4)           1000000
>         dwFrameInterval( 5)           2000000
>       VideoStreaming Interface Descriptor:
>         bLength                            50
>         bDescriptorType                    36
>         bDescriptorSubtype                  7 (FRAME_MJPEG)
>         bFrameIndex                         5
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                            160
>         wHeight                           120
>         dwMinBitRate                    24000
>         dwMaxBitRate                   144000
>         dwMaxVideoFrameBufferSize        4800
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  6
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            400000
>         dwFrameInterval( 2)            500000
>         dwFrameInterval( 3)            666666
>         dwFrameInterval( 4)           1000000
>         dwFrameInterval( 5)           2000000
>       VideoStreaming Interface Descriptor:
>         bLength                            38
>         bDescriptorType                    36
>         bDescriptorSubtype                  7 (FRAME_MJPEG)
>         bFrameIndex                         6
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                           1280
>         wHeight                          1024
>         dwMinBitRate                  3932160
>         dwMaxBitRate                  4915200
>         dwMaxVideoFrameBufferSize      327680
>         dwDefaultFrameInterval         666666
>         bFrameIntervalType                  3
>         dwFrameInterval( 0)            666666
>         dwFrameInterval( 1)           1000000
>         dwFrameInterval( 2)           2000000
>       VideoStreaming Interface Descriptor:
>         bLength                             6
>         bDescriptorType                    36
>         bDescriptorSubtype                 13 (COLORFORMAT)
>         bColorPrimaries                     1 (BT.709,sRGB)
>         bTransferCharacteristics            1 (BT.709)
>         bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       1
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0080  1x 128 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       2
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0100  1x 256 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       3
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0320  1x 800 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       4
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0b20  2x 800 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       5
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x1320  3x 800 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       6
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x1400  3x 1024 bytes
>         bInterval               1
>     Interface Association:
>       bLength                 8
>       bDescriptorType        11
>       bFirstInterface         2
>       bInterfaceCount         2
>       bFunctionClass          1 Audio
>       bFunctionSubClass       0
>       bFunctionProtocol       0
>       iFunction               0
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        2
>       bAlternateSetting       0
>       bNumEndpoints           0
>       bInterfaceClass         1 Audio
>       bInterfaceSubClass      1 Control Device
>       bInterfaceProtocol      0
>       iInterface              0
>       AudioControl Interface Descriptor:
>         bLength                 9
>         bDescriptorType        36
>         bDescriptorSubtype      1 (HEADER)
>         bcdADC               1.00
>         wTotalLength           43
>         bInCollection           1
>         baInterfaceNr( 0)       3
>       AudioControl Interface Descriptor:
>         bLength                12
>         bDescriptorType        36
>         bDescriptorSubtype      2 (INPUT_TERMINAL)
>         bTerminalID             1
>         wTerminalType      0x0201 Microphone
>         bAssocTerminal          0
>         bNrChannels             2
>         wChannelConfig     0x0000
>         iChannelNames           0
>         iTerminal               0
>       AudioControl Interface Descriptor:
>         bLength                13
>         bDescriptorType        36
>         bDescriptorSubtype      6 (FEATURE_UNIT)
>         bUnitID                 2
>         bSourceID               1
>         bControlSize            2
>         bmaControls( 0)      0x01
>         bmaControls( 0)      0x00
>           Mute
>         bmaControls( 1)      0x02
>         bmaControls( 1)      0x00
>           Volume
>         bmaControls( 2)      0x02
>         bmaControls( 2)      0x00
>           Volume
>         iFeature                0
>       AudioControl Interface Descriptor:
>         bLength                 9
>         bDescriptorType        36
>         bDescriptorSubtype      3 (OUTPUT_TERMINAL)
>         bTerminalID             3
>         wTerminalType      0x0101 USB Streaming
>         bAssocTerminal          0
>         bSourceID               2
>         iTerminal               0
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        3
>       bAlternateSetting       0
>       bNumEndpoints           0
>       bInterfaceClass         1 Audio
>       bInterfaceSubClass      2 Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        3
>       bAlternateSetting       1
>       bNumEndpoints           1
>       bInterfaceClass         1 Audio
>       bInterfaceSubClass      2 Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       AudioStreaming Interface Descriptor:
>         bLength                 7
>         bDescriptorType        36
>         bDescriptorSubtype      1 (AS_GENERAL)
>         bTerminalLink           3
>         bDelay                  1 frames
>         wFormatTag              1 PCM
>       AudioStreaming Interface Descriptor:
>         bLength                23
>         bDescriptorType        36
>         bDescriptorSubtype      2 (FORMAT_TYPE)
>         bFormatType             1 (FORMAT_TYPE_I)
>         bNrChannels             2
>         bSubframeSize           2
>         bBitResolution         16
>         bSamFreqType            5 Discrete
>         tSamFreq[ 0]         8000
>         tSamFreq[ 1]        11025
>         tSamFreq[ 2]        16000
>         tSamFreq[ 3]        24000
>         tSamFreq[ 4]        48000
>       Endpoint Descriptor:
>         bLength                 9
>         bDescriptorType         5
>         bEndpointAddress     0x84  EP 4 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0190  1x 400 bytes
>         bInterval               4
>         bRefresh                0
>         bSynchAddress           0
>         AudioControl Endpoint Descriptor:
>           bLength                 7
>           bDescriptorType        37
>           bDescriptorSubtype      1 (EP_GENERAL)
>           bmAttributes         0x01
>             Sampling Frequency
>           bLockDelayUnits         0 Undefined
>           wLockDelay              0 Undefined
> Device Qualifier (for other device speed):
>   bLength                10
>   bDescriptorType         6
>   bcdUSB               2.00
>   bDeviceClass          239 Miscellaneous Device
>   bDeviceSubClass         2 ?
>   bDeviceProtocol         1 Interface Association
>   bMaxPacketSize0        64
>   bNumConfigurations      1
> Device Status:     0x0002
>   (Bus Powered)
>   Remote Wakeup Enabled
>
>
> Im running linux kernel 2.6.27.7 and using drivers from the repository
> uvcvideo-f5c337ded781.tar.bz2
>
> When I run xawtv i get the following output and a blank image:
>
> ioctl: VIDIOC_G_STD(std=0x100000001 [PAL_B,(null)]): Invalid argument
> ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument
> ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0
> [];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.seconds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0;memory=unknown):
> Invalid argument
>
> Does anyone know what the issue might be? Or if this cam is compatible with
> uvc?
>
> Best Regards
> Andrew Grice
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>


From grice.drew at googlemail.com  Tue Jan 27 20:17:25 2009
From: grice.drew at googlemail.com (andrew grice)
Date: Tue, 27 Jan 2009 19:17:25 +0000
Subject: [Linux-uvc-devel] Unsupported Webcam 041e:406a
In-Reply-To: <59cf47a80901261420s4f58a66dq3e4a7e7722ab19fc@mail.gmail.com>
References: <8e32ff550901260905w4f3b943cp4034d27cfb4e47b1@mail.gmail.com>
	<59cf47a80901261420s4f58a66dq3e4a7e7722ab19fc@mail.gmail.com>
Message-ID: <8e32ff550901271117m2ddfd284ud98b003a5f6f6bf@mail.gmail.com>

Hi Paulo,

Thanks for the advice, luvcview works and gives me a good video from the
camera.

Regards
Andrew

On Mon, Jan 26, 2009 at 10:20 PM, Paulo Assis <pj.assis at gmail.com> wrote:

> Andrew Hi,
> Could you try luvcview or guvcview instead, xawtv doesn't work for me
> either.
> I think it may have something to do with libv4l2, or then just some
> configuration problem.
>
> Best regards,
> Paulo
>
> 2009/1/26 andrew grice <grice.drew at googlemail.com>:
> > I recently purchased a Creative Webcam Live! Cam Notebook Ultra. It has a
> > different product id than some of the ones i've read about. I think it
> might
> > be a UVC webcam because the uvcvideo driver loads but i cant get an image
> > out of it.
> >
> >> lsusb -d  041e:406a -v
> >
> > Bus 001 Device 003: ID 041e:406a Creative Technology, Ltd
> > Device Descriptor:
> >   bLength                18
> >   bDescriptorType         1
> >   bcdUSB               2.00
> >   bDeviceClass          239 Miscellaneous Device
> >   bDeviceSubClass         2 ?
> >   bDeviceProtocol         1 Interface Association
> >   bMaxPacketSize0        64
> >   idVendor           0x041e Creative Technology, Ltd
> >   idProduct          0x406a
> >   bcdDevice            1.00
> >   iManufacturer           2 Creative Technology Ltd
> >   iProduct                1 VF0490 Live Cam Notebook Ultra
> >   iSerial                 3 081112_B_00805
> >   bNumConfigurations      1
> >   Configuration Descriptor:
> >     bLength                 9
> >     bDescriptorType         2
> >     wTotalLength         1001
> >     bNumInterfaces          4
> >     bConfigurationValue     1
> >     iConfiguration          0
> >     bmAttributes         0x80
> >       (Bus Powered)
> >     MaxPower              168mA
> >     Interface Association:
> >       bLength                 8
> >       bDescriptorType        11
> >       bFirstInterface         0
> >       bInterfaceCount         2
> >       bFunctionClass         14 Video
> >       bFunctionSubClass       3 Video Interface Collection
> >       bFunctionProtocol       0
> >       iFunction               0
> >     Interface Descriptor:
> >       bLength                 9
> >       bDescriptorType         4
> >       bInterfaceNumber        0
> >       bAlternateSetting       0
> >       bNumEndpoints           1
> >       bInterfaceClass        14 Video
> >       bInterfaceSubClass      1 Video Control
> >       bInterfaceProtocol      0
> >       iInterface              0
> >       VideoControl Interface Descriptor:
> >         bLength                13
> >         bDescriptorType        36
> >         bDescriptorSubtype      1 (HEADER)
> >         bcdUVC               1.00
> >         wTotalLength          103
> >         dwClockFrequency       15.000000MHz
> >         bInCollection           1
> >         baInterfaceNr( 0)       1
> >       VideoControl Interface Descriptor:
> >         bLength                 9
> >         bDescriptorType        36
> >         bDescriptorSubtype      3 (OUTPUT_TERMINAL)
> >         bTerminalID             2
> >         wTerminalType      0x0101 USB Streaming
> >         bAssocTerminal          0
> >         bSourceID               5
> >         iTerminal               0
> >       VideoControl Interface Descriptor:
> >         bLength                26
> >         bDescriptorType        36
> >         bDescriptorSubtype      6 (EXTENSION_UNIT)
> >         bUnitID                 4
> >         guidExtensionCode         {7033f028-1163-2e4a-ba2c-6890eb334016}
> >         bNumControl             8
> >         bNrPins                 1
> >         baSourceID( 0)          3
> >         bControlSize            1
> >         bmControls( 0)       0x3f
> >         iExtension              0
> >       VideoControl Interface Descriptor:
> >         bLength                26
> >         bDescriptorType        36
> >         bDescriptorSubtype      6 (EXTENSION_UNIT)
> >         bUnitID                 5
> >         guidExtensionCode         {3fae1228-d7bc-114e-a357-6f1edef7d61d}
> >         bNumControl             8
> >         bNrPins                 1
> >         baSourceID( 0)          4
> >         bControlSize            1
> >         bmControls( 0)       0x00
> >         iExtension              0
> >       VideoControl Interface Descriptor:
> >         bLength                18
> >         bDescriptorType        36
> >         bDescriptorSubtype      2 (INPUT_TERMINAL)
> >         bTerminalID             1
> >         wTerminalType      0x0201 Camera Sensor
> >         bAssocTerminal          0
> >         iTerminal               0
> >         wObjectiveFocalLengthMin      0
> >         wObjectiveFocalLengthMax      0
> >         wOcularFocalLength            0
> >         bControlSize                  3
> >         bmControls           0x00000a0e
> >           Auto-Exposure Mode
> >           Auto-Exposure Priority
> >           Exposure Time (Absolute)
> >           Zoom (Absolute)
> >           PanTilt (Absolute)
> >       VideoControl Interface Descriptor:
> >         bLength                11
> >         bDescriptorType        36
> >         bDescriptorSubtype      5 (PROCESSING_UNIT)
> >       Warning: Descriptor too short
> >         bUnitID                 3
> >         bSourceID               1
> >         wMaxMultiplier          0
> >         bControlSize            2
> >         bmControls     0x0000177f
> >           Brightness
> >           Contrast
> >           Hue
> >           Saturation
> >           Sharpness
> >           Gamma
> >           White Balance Temperature
> >           Backlight Compensation
> >           Gain
> >           Power Line Frequency
> >           White Balance Temperature, Auto
> >         iProcessing             0
> >         bmVideoStandards     0xb7
> >           None
> >           NTSC - 525/60
> >           PAL - 625/50
> >           NTSC - 625/50
> >           PAL - 525/60
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x83  EP 3 IN
> >         bmAttributes            3
> >           Transfer Type            Interrupt
> >           Synch Type               None
> >           Usage Type               Data
> >         wMaxPacketSize     0x0010  1x 16 bytes
> >         bInterval               6
> >     Interface Descriptor:
> >       bLength                 9
> >       bDescriptorType         4
> >       bInterfaceNumber        1
> >       bAlternateSetting       0
> >       bNumEndpoints           0
> >       bInterfaceClass        14 Video
> >       bInterfaceSubClass      2 Video Streaming
> >       bInterfaceProtocol      0
> >       iInterface              0
> >       VideoStreaming Interface Descriptor:
> >         bLength                            15
> >         bDescriptorType                    36
> >         bDescriptorSubtype                  1 (INPUT_HEADER)
> >         bNumFormats                        2
> >         wTotalLength                      631
> >         bEndPointAddress                  129
> >         bmInfo                              0
> >         bTerminalLink                       2
> >         bStillCaptureMethod                 0
> >         bTriggerSupport                     1
> >         bTriggerUsage                       1
> >         bControlSize                        1
> >         bmaControls( 0)                    27
> >         bmaControls( 1)                    27
> >       VideoStreaming Interface Descriptor:
> >         bLength                            27
> >         bDescriptorType                    36
> >         bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
> >         bFormatIndex                        1
> >         bNumFrameDescriptors                6
> >         guidFormat
> > {59555932-0000-1000-8000-00aa00389b71}
> >         bBitsPerPixel                      16
> >         bDefaultFrameIndex                  1
> >         bAspectRatioX                       0
> >         bAspectRatioY                       0
> >         bmInterlaceFlags                 0x00
> >           Interlaced stream or variable: No
> >           Fields per frame: 1 fields
> >           Field 1 first: No
> >           Field pattern: Field 1 only
> >           bCopyProtect                      0
> >       VideoStreaming Interface Descriptor:
> >         bLength                            50
> >         bDescriptorType                    36
> >         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
> >         bFrameIndex                         1
> >         bmCapabilities                   0x00
> >           Still image unsupported
> >         wWidth                            640
> >         wHeight                           480
> >         dwMinBitRate                  3072000
> >         dwMaxBitRate                 18432000
> >         dwMaxVideoFrameBufferSize      614400
> >         dwDefaultFrameInterval         333333
> >         bFrameIntervalType                  6
> >         dwFrameInterval( 0)            333333
> >         dwFrameInterval( 1)            400000
> >         dwFrameInterval( 2)            500000
> >         dwFrameInterval( 3)            666666
> >         dwFrameInterval( 4)           1000000
> >         dwFrameInterval( 5)           2000000
> >       VideoStreaming Interface Descriptor:
> >         bLength                            50
> >         bDescriptorType                    36
> >         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
> >         bFrameIndex                         2
> >         bmCapabilities                   0x00
> >           Still image unsupported
> >         wWidth                            352
> >         wHeight                           288
> >         dwMinBitRate                  1013760
> >         dwMaxBitRate                  6082560
> >         dwMaxVideoFrameBufferSize      202752
> >         dwDefaultFrameInterval         333333
> >         bFrameIntervalType                  6
> >         dwFrameInterval( 0)            333333
> >         dwFrameInterval( 1)            400000
> >         dwFrameInterval( 2)            500000
> >         dwFrameInterval( 3)            666666
> >         dwFrameInterval( 4)           1000000
> >         dwFrameInterval( 5)           2000000
> >       VideoStreaming Interface Descriptor:
> >         bLength                            50
> >         bDescriptorType                    36
> >         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
> >         bFrameIndex                         3
> >         bmCapabilities                   0x00
> >           Still image unsupported
> >         wWidth                            320
> >         wHeight                           240
> >         dwMinBitRate                   768000
> >         dwMaxBitRate                  4608000
> >         dwMaxVideoFrameBufferSize      153600
> >         dwDefaultFrameInterval         333333
> >         bFrameIntervalType                  6
> >         dwFrameInterval( 0)            333333
> >         dwFrameInterval( 1)            400000
> >         dwFrameInterval( 2)            500000
> >         dwFrameInterval( 3)            666666
> >         dwFrameInterval( 4)           1000000
> >         dwFrameInterval( 5)           2000000
> >       VideoStreaming Interface Descriptor:
> >         bLength                            50
> >         bDescriptorType                    36
> >         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
> >         bFrameIndex                         4
> >         bmCapabilities                   0x00
> >           Still image unsupported
> >         wWidth                            176
> >         wHeight                           144
> >         dwMinBitRate                   253440
> >         dwMaxBitRate                  1520640
> >         dwMaxVideoFrameBufferSize       50688
> >         dwDefaultFrameInterval         333333
> >         bFrameIntervalType                  6
> >         dwFrameInterval( 0)            333333
> >         dwFrameInterval( 1)            400000
> >         dwFrameInterval( 2)            500000
> >         dwFrameInterval( 3)            666666
> >         dwFrameInterval( 4)           1000000
> >         dwFrameInterval( 5)           2000000
> >       VideoStreaming Interface Descriptor:
> >         bLength                            50
> >         bDescriptorType                    36
> >         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
> >         bFrameIndex                         5
> >         bmCapabilities                   0x00
> >           Still image unsupported
> >         wWidth                            160
> >         wHeight                           120
> >         dwMinBitRate                   192000
> >         dwMaxBitRate                  1152000
> >         dwMaxVideoFrameBufferSize       38400
> >         dwDefaultFrameInterval         333333
> >         bFrameIntervalType                  6
> >         dwFrameInterval( 0)            333333
> >         dwFrameInterval( 1)            400000
> >         dwFrameInterval( 2)            500000
> >         dwFrameInterval( 3)            666666
> >         dwFrameInterval( 4)           1000000
> >         dwFrameInterval( 5)           2000000
> >       VideoStreaming Interface Descriptor:
> >         bLength                            34
> >         bDescriptorType                    36
> >         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
> >         bFrameIndex                         6
> >         bmCapabilities                   0x00
> >           Still image unsupported
> >         wWidth                           1280
> >         wHeight                          1024
> >         dwMinBitRate                 19660800
> >         dwMaxBitRate                 19660800
> >         dwMaxVideoFrameBufferSize     2621440
> >         dwDefaultFrameInterval        1333333
> >         bFrameIntervalType                  2
> >         dwFrameInterval( 0)           1333333
> >         dwFrameInterval( 1)           2000000
> >       VideoStreaming Interface Descriptor:
> >         bLength                            11
> >         bDescriptorType                    36
> >         bDescriptorSubtype                  6 (FORMAT_MJPEG)
> >         bFormatIndex                        2
> >         bNumFrameDescriptors                6
> >         bFlags                              0
> >           Fixed-size samples: No
> >         bDefaultFrameIndex                  1
> >         bAspectRatioX                       0
> >         bAspectRatioY                       0
> >         bmInterlaceFlags                 0x00
> >           Interlaced stream or variable: No
> >           Fields per frame: 1 fields
> >           Field 1 first: No
> >           Field pattern: Field 1 only
> >           bCopyProtect                      0
> >       VideoStreaming Interface Descriptor:
> >         bLength                            50
> >         bDescriptorType                    36
> >         bDescriptorSubtype                  7 (FRAME_MJPEG)
> >         bFrameIndex                         1
> >         bmCapabilities                   0x00
> >           Still image unsupported
> >         wWidth                            640
> >         wHeight                           480
> >         dwMinBitRate                   384000
> >         dwMaxBitRate                  2304000
> >         dwMaxVideoFrameBufferSize       76800
> >         dwDefaultFrameInterval         333333
> >         bFrameIntervalType                  6
> >         dwFrameInterval( 0)            333333
> >         dwFrameInterval( 1)            400000
> >         dwFrameInterval( 2)            500000
> >         dwFrameInterval( 3)            666666
> >         dwFrameInterval( 4)           1000000
> >         dwFrameInterval( 5)           2000000
> >       VideoStreaming Interface Descriptor:
> >         bLength                            50
> >         bDescriptorType                    36
> >         bDescriptorSubtype                  7 (FRAME_MJPEG)
> >         bFrameIndex                         2
> >         bmCapabilities                   0x00
> >           Still image unsupported
> >         wWidth                            352
> >         wHeight                           288
> >         dwMinBitRate                   126720
> >         dwMaxBitRate                   760320
> >         dwMaxVideoFrameBufferSize       25344
> >         dwDefaultFrameInterval         333333
> >         bFrameIntervalType                  6
> >         dwFrameInterval( 0)            333333
> >         dwFrameInterval( 1)            400000
> >         dwFrameInterval( 2)            500000
> >         dwFrameInterval( 3)            666666
> >         dwFrameInterval( 4)           1000000
> >         dwFrameInterval( 5)           2000000
> >       VideoStreaming Interface Descriptor:
> >         bLength                            50
> >         bDescriptorType                    36
> >         bDescriptorSubtype                  7 (FRAME_MJPEG)
> >         bFrameIndex                         3
> >         bmCapabilities                   0x00
> >           Still image unsupported
> >         wWidth                            320
> >         wHeight                           240
> >         dwMinBitRate                    96000
> >         dwMaxBitRate                   576000
> >         dwMaxVideoFrameBufferSize       19200
> >         dwDefaultFrameInterval         333333
> >         bFrameIntervalType                  6
> >         dwFrameInterval( 0)            333333
> >         dwFrameInterval( 1)            400000
> >         dwFrameInterval( 2)            500000
> >         dwFrameInterval( 3)            666666
> >         dwFrameInterval( 4)           1000000
> >         dwFrameInterval( 5)           2000000
> >       VideoStreaming Interface Descriptor:
> >         bLength                            50
> >         bDescriptorType                    36
> >         bDescriptorSubtype                  7 (FRAME_MJPEG)
> >         bFrameIndex                         4
> >         bmCapabilities                   0x00
> >           Still image unsupported
> >         wWidth                            176
> >         wHeight                           144
> >         dwMinBitRate                    31680
> >         dwMaxBitRate                   190080
> >         dwMaxVideoFrameBufferSize        6336
> >         dwDefaultFrameInterval         333333
> >         bFrameIntervalType                  6
> >         dwFrameInterval( 0)            333333
> >         dwFrameInterval( 1)            400000
> >         dwFrameInterval( 2)            500000
> >         dwFrameInterval( 3)            666666
> >         dwFrameInterval( 4)           1000000
> >         dwFrameInterval( 5)           2000000
> >       VideoStreaming Interface Descriptor:
> >         bLength                            50
> >         bDescriptorType                    36
> >         bDescriptorSubtype                  7 (FRAME_MJPEG)
> >         bFrameIndex                         5
> >         bmCapabilities                   0x00
> >           Still image unsupported
> >         wWidth                            160
> >         wHeight                           120
> >         dwMinBitRate                    24000
> >         dwMaxBitRate                   144000
> >         dwMaxVideoFrameBufferSize        4800
> >         dwDefaultFrameInterval         333333
> >         bFrameIntervalType                  6
> >         dwFrameInterval( 0)            333333
> >         dwFrameInterval( 1)            400000
> >         dwFrameInterval( 2)            500000
> >         dwFrameInterval( 3)            666666
> >         dwFrameInterval( 4)           1000000
> >         dwFrameInterval( 5)           2000000
> >       VideoStreaming Interface Descriptor:
> >         bLength                            38
> >         bDescriptorType                    36
> >         bDescriptorSubtype                  7 (FRAME_MJPEG)
> >         bFrameIndex                         6
> >         bmCapabilities                   0x00
> >           Still image unsupported
> >         wWidth                           1280
> >         wHeight                          1024
> >         dwMinBitRate                  3932160
> >         dwMaxBitRate                  4915200
> >         dwMaxVideoFrameBufferSize      327680
> >         dwDefaultFrameInterval         666666
> >         bFrameIntervalType                  3
> >         dwFrameInterval( 0)            666666
> >         dwFrameInterval( 1)           1000000
> >         dwFrameInterval( 2)           2000000
> >       VideoStreaming Interface Descriptor:
> >         bLength                             6
> >         bDescriptorType                    36
> >         bDescriptorSubtype                 13 (COLORFORMAT)
> >         bColorPrimaries                     1 (BT.709,sRGB)
> >         bTransferCharacteristics            1 (BT.709)
> >         bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
> >     Interface Descriptor:
> >       bLength                 9
> >       bDescriptorType         4
> >       bInterfaceNumber        1
> >       bAlternateSetting       1
> >       bNumEndpoints           1
> >       bInterfaceClass        14 Video
> >       bInterfaceSubClass      2 Video Streaming
> >       bInterfaceProtocol      0
> >       iInterface              0
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x81  EP 1 IN
> >         bmAttributes            5
> >           Transfer Type            Isochronous
> >           Synch Type               Asynchronous
> >           Usage Type               Data
> >         wMaxPacketSize     0x0080  1x 128 bytes
> >         bInterval               1
> >     Interface Descriptor:
> >       bLength                 9
> >       bDescriptorType         4
> >       bInterfaceNumber        1
> >       bAlternateSetting       2
> >       bNumEndpoints           1
> >       bInterfaceClass        14 Video
> >       bInterfaceSubClass      2 Video Streaming
> >       bInterfaceProtocol      0
> >       iInterface              0
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x81  EP 1 IN
> >         bmAttributes            5
> >           Transfer Type            Isochronous
> >           Synch Type               Asynchronous
> >           Usage Type               Data
> >         wMaxPacketSize     0x0100  1x 256 bytes
> >         bInterval               1
> >     Interface Descriptor:
> >       bLength                 9
> >       bDescriptorType         4
> >       bInterfaceNumber        1
> >       bAlternateSetting       3
> >       bNumEndpoints           1
> >       bInterfaceClass        14 Video
> >       bInterfaceSubClass      2 Video Streaming
> >       bInterfaceProtocol      0
> >       iInterface              0
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x81  EP 1 IN
> >         bmAttributes            5
> >           Transfer Type            Isochronous
> >           Synch Type               Asynchronous
> >           Usage Type               Data
> >         wMaxPacketSize     0x0320  1x 800 bytes
> >         bInterval               1
> >     Interface Descriptor:
> >       bLength                 9
> >       bDescriptorType         4
> >       bInterfaceNumber        1
> >       bAlternateSetting       4
> >       bNumEndpoints           1
> >       bInterfaceClass        14 Video
> >       bInterfaceSubClass      2 Video Streaming
> >       bInterfaceProtocol      0
> >       iInterface              0
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x81  EP 1 IN
> >         bmAttributes            5
> >           Transfer Type            Isochronous
> >           Synch Type               Asynchronous
> >           Usage Type               Data
> >         wMaxPacketSize     0x0b20  2x 800 bytes
> >         bInterval               1
> >     Interface Descriptor:
> >       bLength                 9
> >       bDescriptorType         4
> >       bInterfaceNumber        1
> >       bAlternateSetting       5
> >       bNumEndpoints           1
> >       bInterfaceClass        14 Video
> >       bInterfaceSubClass      2 Video Streaming
> >       bInterfaceProtocol      0
> >       iInterface              0
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x81  EP 1 IN
> >         bmAttributes            5
> >           Transfer Type            Isochronous
> >           Synch Type               Asynchronous
> >           Usage Type               Data
> >         wMaxPacketSize     0x1320  3x 800 bytes
> >         bInterval               1
> >     Interface Descriptor:
> >       bLength                 9
> >       bDescriptorType         4
> >       bInterfaceNumber        1
> >       bAlternateSetting       6
> >       bNumEndpoints           1
> >       bInterfaceClass        14 Video
> >       bInterfaceSubClass      2 Video Streaming
> >       bInterfaceProtocol      0
> >       iInterface              0
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x81  EP 1 IN
> >         bmAttributes            5
> >           Transfer Type            Isochronous
> >           Synch Type               Asynchronous
> >           Usage Type               Data
> >         wMaxPacketSize     0x1400  3x 1024 bytes
> >         bInterval               1
> >     Interface Association:
> >       bLength                 8
> >       bDescriptorType        11
> >       bFirstInterface         2
> >       bInterfaceCount         2
> >       bFunctionClass          1 Audio
> >       bFunctionSubClass       0
> >       bFunctionProtocol       0
> >       iFunction               0
> >     Interface Descriptor:
> >       bLength                 9
> >       bDescriptorType         4
> >       bInterfaceNumber        2
> >       bAlternateSetting       0
> >       bNumEndpoints           0
> >       bInterfaceClass         1 Audio
> >       bInterfaceSubClass      1 Control Device
> >       bInterfaceProtocol      0
> >       iInterface              0
> >       AudioControl Interface Descriptor:
> >         bLength                 9
> >         bDescriptorType        36
> >         bDescriptorSubtype      1 (HEADER)
> >         bcdADC               1.00
> >         wTotalLength           43
> >         bInCollection           1
> >         baInterfaceNr( 0)       3
> >       AudioControl Interface Descriptor:
> >         bLength                12
> >         bDescriptorType        36
> >         bDescriptorSubtype      2 (INPUT_TERMINAL)
> >         bTerminalID             1
> >         wTerminalType      0x0201 Microphone
> >         bAssocTerminal          0
> >         bNrChannels             2
> >         wChannelConfig     0x0000
> >         iChannelNames           0
> >         iTerminal               0
> >       AudioControl Interface Descriptor:
> >         bLength                13
> >         bDescriptorType        36
> >         bDescriptorSubtype      6 (FEATURE_UNIT)
> >         bUnitID                 2
> >         bSourceID               1
> >         bControlSize            2
> >         bmaControls( 0)      0x01
> >         bmaControls( 0)      0x00
> >           Mute
> >         bmaControls( 1)      0x02
> >         bmaControls( 1)      0x00
> >           Volume
> >         bmaControls( 2)      0x02
> >         bmaControls( 2)      0x00
> >           Volume
> >         iFeature                0
> >       AudioControl Interface Descriptor:
> >         bLength                 9
> >         bDescriptorType        36
> >         bDescriptorSubtype      3 (OUTPUT_TERMINAL)
> >         bTerminalID             3
> >         wTerminalType      0x0101 USB Streaming
> >         bAssocTerminal          0
> >         bSourceID               2
> >         iTerminal               0
> >     Interface Descriptor:
> >       bLength                 9
> >       bDescriptorType         4
> >       bInterfaceNumber        3
> >       bAlternateSetting       0
> >       bNumEndpoints           0
> >       bInterfaceClass         1 Audio
> >       bInterfaceSubClass      2 Streaming
> >       bInterfaceProtocol      0
> >       iInterface              0
> >     Interface Descriptor:
> >       bLength                 9
> >       bDescriptorType         4
> >       bInterfaceNumber        3
> >       bAlternateSetting       1
> >       bNumEndpoints           1
> >       bInterfaceClass         1 Audio
> >       bInterfaceSubClass      2 Streaming
> >       bInterfaceProtocol      0
> >       iInterface              0
> >       AudioStreaming Interface Descriptor:
> >         bLength                 7
> >         bDescriptorType        36
> >         bDescriptorSubtype      1 (AS_GENERAL)
> >         bTerminalLink           3
> >         bDelay                  1 frames
> >         wFormatTag              1 PCM
> >       AudioStreaming Interface Descriptor:
> >         bLength                23
> >         bDescriptorType        36
> >         bDescriptorSubtype      2 (FORMAT_TYPE)
> >         bFormatType             1 (FORMAT_TYPE_I)
> >         bNrChannels             2
> >         bSubframeSize           2
> >         bBitResolution         16
> >         bSamFreqType            5 Discrete
> >         tSamFreq[ 0]         8000
> >         tSamFreq[ 1]        11025
> >         tSamFreq[ 2]        16000
> >         tSamFreq[ 3]        24000
> >         tSamFreq[ 4]        48000
> >       Endpoint Descriptor:
> >         bLength                 9
> >         bDescriptorType         5
> >         bEndpointAddress     0x84  EP 4 IN
> >         bmAttributes            5
> >           Transfer Type            Isochronous
> >           Synch Type               Asynchronous
> >           Usage Type               Data
> >         wMaxPacketSize     0x0190  1x 400 bytes
> >         bInterval               4
> >         bRefresh                0
> >         bSynchAddress           0
> >         AudioControl Endpoint Descriptor:
> >           bLength                 7
> >           bDescriptorType        37
> >           bDescriptorSubtype      1 (EP_GENERAL)
> >           bmAttributes         0x01
> >             Sampling Frequency
> >           bLockDelayUnits         0 Undefined
> >           wLockDelay              0 Undefined
> > Device Qualifier (for other device speed):
> >   bLength                10
> >   bDescriptorType         6
> >   bcdUSB               2.00
> >   bDeviceClass          239 Miscellaneous Device
> >   bDeviceSubClass         2 ?
> >   bDeviceProtocol         1 Interface Association
> >   bMaxPacketSize0        64
> >   bNumConfigurations      1
> > Device Status:     0x0002
> >   (Bus Powered)
> >   Remote Wakeup Enabled
> >
> >
> > Im running linux kernel 2.6.27.7 and using drivers from the repository
> > uvcvideo-f5c337ded781.tar.bz2
> >
> > When I run xawtv i get the following output and a blank image:
> >
> > ioctl: VIDIOC_G_STD(std=0x100000001 [PAL_B,(null)]): Invalid argument
> > ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument
> > ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0
> >
> [];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.seconds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0;memory=unknown):
> > Invalid argument
> >
> > Does anyone know what the issue might be? Or if this cam is compatible
> with
> > uvc?
> >
> > Best Regards
> > Andrew Grice
> >
> > _______________________________________________
> > Linux-uvc-devel mailing list
> > Linux-uvc-devel at lists.berlios.de
> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> >
> >
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090127/10867b66/attachment.html>

From laurent.pinchart at skynet.be  Tue Jan 27 23:57:21 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 27 Jan 2009 23:57:21 +0100
Subject: [Linux-uvc-devel] Unsupported Webcam 041e:406a
In-Reply-To: <8e32ff550901271117m2ddfd284ud98b003a5f6f6bf@mail.gmail.com>
References: <8e32ff550901260905w4f3b943cp4034d27cfb4e47b1@mail.gmail.com>
	<59cf47a80901261420s4f58a66dq3e4a7e7722ab19fc@mail.gmail.com>
	<8e32ff550901271117m2ddfd284ud98b003a5f6f6bf@mail.gmail.com>
Message-ID: <200901272357.21721.laurent.pinchart@skynet.be>

On Tuesday 27 January 2009, andrew grice wrote:
> Hi Paulo,
>
> Thanks for the advice, luvcview works and gives me a good video from the
> camera.

Thanks for the report. I've updated the supported devices list on the website.

Best regards,

Laurent Pinchart


From yann at lecun.org  Sat Jan 31 23:27:33 2009
From: yann at lecun.org (Yann LeCun)
Date: Sat, 31 Jan 2009 17:27:33 -0500
Subject: [Linux-uvc-devel] Minoru stereo webcam
Message-ID: <200901311727.33749.yann@lecun.org>

Laurent and all,

I just got one of those new Minoru stereo webcams.  At 90 bucks from
Amazon, the Minoru is several times cheaper than any alternative, and
there are lots of cool things you could do with a stereo camera under
Linux (see http://www.minoru3d.com/ ).

The good news is that uvcvideo recognizes the stereo camera as two
separate cameras (which appear as /dev/video0 and /dev/video1 in my
laptop with Ubuntu 8.10). I can grab video from the left and right
camera separately with no problem.  I'm using the standard uvcvideo
driver that comes with Ubuntu 8.10 Intrepid.

The problem is that I cannot seem to be able to grab from both cameras
simultaneously.  If I turn on streaming on one camera, the second
camera refuses to turn on streaming. In other words "
ioctl(fd, VIDIOC_STREAMON, &type)" with 
"type = V4L2_BUF_TYPE_VIDEO_CAPTURE" fails (it returns -2).

dmesg says:
uvcvideo: Failed to submit URB 0 (-28).

Similarly, if I have luvcview running on one camera and I try to start
luvcview on the other camera, I get the error message: 
"Unable to start capture: No space left on device"

I suspect this is a problem with the USB bus bandwidth.

The problem with luvcview occurs even if I reduce the 
resolution to 160x120 with "luvcview -d /dev/video0 -s 160x120"

Is there an easy fix? A difficult fix?

Thanks,

  -- Yann

________________________________________________________________
Trace of luvcview:

$ luvcview -d /dev/video0 &
[1] 6266
$ luvcview 0.2.4

SDL information:
  Video driver: x11
  A window manager is available
Device information:
  Device path:  /dev/video0
Stream settings:
  Frame format: YUYV (MJPG is not supported by device)
  Frame size:   640x480
  Frame rate:   30 fps

$ luvcview -d /dev/video1 &
[2] 6296
$ luvcview 0.2.4

SDL information:
  Video driver: x11
  A window manager is available
Device information:
  Device path:  /dev/video1
Stream settings:
  Frame format: YUYV (MJPG is not supported by device)
  Frame size:   640x480
  Frame rate:   30 fps
Unable to start capture: No space left on device
Error grabbing
Cleanup done. Exiting ...
$ 

________________________________________________________________
Here is the output of "sudo lsusb -v" for one of the cameras
(the other is deleted to stay below the 40KB limit).

Bus 005 Device 020: ID 0ac8:3410 Z-Star Microelectronics Corp. 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x0ac8 Z-Star Microelectronics Corp.
  idProduct          0x3410 
  bcdDevice            1.00
  iManufacturer           1 Vimicro Corp.
  iProduct                2 Vimicro USB2.0 PC Camera
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          481
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              128mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0 
      iFunction               2 Vimicro USB2.0 PC Camera
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0 
      iInterface              2 Vimicro USB2.0 PC Camera
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           79
        dwClockFrequency       30.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0 
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x0000000a
          Auto-Exposure Mode
          Exposure Time (Absolute)
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 2
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000177b
          Brightness
          Contrast
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Gain
          Power Line Frequency
          White Balance Temperature, Auto
        iProcessing             0 
        bmVideoStandards     0x 9
          None
          SECAM - 625/50
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               2
        iTerminal               0 
      VideoControl Interface Descriptor:
        bLength                28
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {5dc717a9-1941-da11-ae0e-000d56ac7b4c}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          1
        bControlSize            3
        bmControls( 0)       0x59
        bmControls( 1)       0x80
        bmControls( 2)       0x80
        iExtension              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x000a  1x 10 bytes
        bInterval               5
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                        1
        wTotalLength                      243
        bEndPointAddress                  130
        bmInfo                              0
        bTerminalLink                       3
        bStillCaptureMethod                 2
        bTriggerSupport                     1
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                5
        guidFormat                            
{59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   768000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  2
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666667
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   768000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  2
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666667
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   768000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  2
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666667
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                   768000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  2
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666667
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   768000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  2
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666667
      VideoStreaming Interface Descriptor:
        bLength                            26
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               5
        wWidth( 0)                        640
        wHeight( 0)                       480
        wWidth( 1)                        352
        wHeight( 1)                       288
        wWidth( 2)                        320
        wHeight( 2)                       240
        wWidth( 3)                        176
        wHeight( 3)                       144
        wWidth( 4)                        160
        wHeight( 4)                       120
        bNumCompressionPatterns             5
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     0 (Unspecified)
        bTransferCharacteristics            0 (Unspecified)
        bMatrixCoefficients                 0 (Unspecified)
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0400  1x 1024 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b00  2x 768 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0c00  2x 1024 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1380  3x 896 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       7
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 1024 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)





