<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] Microsoft Lifecam NX-6000
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2009-December/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Microsoft%20Lifecam%20NX-6000&In-Reply-To=%3C200912131323.49439.laurent.pinchart%40ideasonboard.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005386.html">
   <LINK REL="Next"  HREF="005425.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] Microsoft Lifecam NX-6000</H1>
    <B>Laurent Pinchart</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Microsoft%20Lifecam%20NX-6000&In-Reply-To=%3C200912131323.49439.laurent.pinchart%40ideasonboard.com%3E"
       TITLE="[Linux-uvc-devel] Microsoft Lifecam NX-6000">laurent.pinchart at ideasonboard.com
       </A><BR>
    <I>Sun Dec 13 13:23:49 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005386.html">[Linux-uvc-devel] Microsoft Lifecam NX-6000
</A></li>
        <LI>Next message: <A HREF="005425.html">[Linux-uvc-devel] Microsoft Lifecam NX-6000
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5404">[ date ]</a>
              <a href="thread.html#5404">[ thread ]</a>
              <a href="subject.html#5404">[ subject ]</a>
              <a href="author.html#5404">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Alessandro,

On Monday 07 December 2009 17:12:18 Alessandro Bonometti wrote:
&gt;<i> On Thursday 03 December 2009 20:29:24 Laurent Pinchart wrote:
</I>&gt;<i> &gt; &gt; I bought a Microsoft LifeCam NX-6000 which should be supported by UVC
</I>&gt;<i> &gt; &gt; (<A HREF="http://linux-uvc.berlios.de/#devices">http://linux-uvc.berlios.de/#devices</A>). The camera is recognized, but
</I>&gt;<i> &gt; &gt; it doesn't work in skype, kopete or luvcview. The cam is fine (I have
</I>&gt;<i> &gt; &gt; tried it on a Windows PC) and the OS should be correctly configured
</I>&gt;<i> &gt; &gt; since I have another cam on this system (it's a eeepc) and it works
</I>&gt;<i> &gt; &gt; fine.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Could you try the camera on another Linux system ?
</I>&gt;<i> 
</I>&gt;<i> Ok, this is really strange. I have two Linux system, a desktop and an
</I>&gt;<i>  eeepc, both with openSUSE 11.2 (the desktop has the X86_64 version)  and
</I>&gt;<i>  when I first tried the NX-6000, I had the same messages on both system.
</I>&gt;<i>  Here are the one from the desktop:
</I>&gt;<i> Dec  1 00:43:29 linux-l8hb kernel: [165305.462577] uvcvideo: Found UVC 1.00
</I>&gt;<i> device Microsoft&#174; LifeCam NX-6000 (045e:00f8)
</I>&gt;<i> Dec  1 00:43:29 linux-l8hb kernel: [165305.462899] uvcvideo: UVC non
</I>&gt;<i> compliance - GET_DEF(PROBE) not supported. Enabling workaround.
</I>&gt;<i> Dec  1 00:43:29 linux-l8hb kernel: [165305.463498] input: Microsoft&#174;
</I>&gt;<i>  LifeCam NX-6000 as
</I>&gt;<i> /devices/pci0000:00/0000:00:1d.7/usb2/2-1/2-1.1/2-1.1.1/2-1.1.1:1.0/inp
</I>&gt;<i> ut/input10
</I>&gt;<i> Dec  1 00:43:30 linux-l8hb kernel: [165306.269428] uvcvideo: Failed to
</I>&gt;<i>  query (1) UVC control 3 (unit 5) : -110 (exp. 2).
</I>&gt;<i> Dec  1 00:43:30 linux-l8hb kernel: [165306.569245] uvcvideo: Failed to
</I>&gt;<i>  query (135) UVC control 7 (unit 5) : -110 (exp. 2).
</I>&gt;<i> Dec  1 00:43:30 linux-l8hb kernel: [165306.869099] uvcvideo: Failed to
</I>&gt;<i>  query (135) UVC control 9 (unit 5) : -110 (exp. 2).
</I>&gt;<i> Dec  1 00:43:31 linux-l8hb kernel: [165307.169093] uvcvideo: Failed to
</I>&gt;<i>  query (135) UVC control 6 (unit 5) : -110 (exp. 2).
</I>&gt;<i> Dec  1 00:43:31 linux-l8hb kernel: [165307.376088] ALSA
</I>&gt;<i> /usr/src/packages/BUILD/kernel-
</I>&gt;<i> desktop-2.6.31.5/linux-2.6.31/sound/usb/usbmixer.c:405: cannot get current
</I>&gt;<i> value for control 1 ch 1: err = -22
</I>&gt;<i> Dec  1 00:43:32 linux-l8hb kernel: [165308.440797] ALSA
</I>&gt;<i> /usr/src/packages/BUILD/kernel-
</I>&gt;<i> desktop-2.6.31.5/linux-2.6.31/sound/usb/usbmixer.c:405: cannot get current
</I>&gt;<i> value for control 1 ch 1: err = -22
</I>&gt;<i> [and so on...]
</I>&gt;<i> 
</I>&gt;<i> I then borrowed a LifeCam Cinema (045e:075d) from a friend of mine and it
</I>&gt;<i> works perfectly on luvcview, skype and kopete, on both systems.
</I>&gt;<i> 
</I>&gt;<i> Saturday I re-attached my NX-6000 to answer your questions, and it seemed
</I>&gt;<i>  to work fine!
</I>&gt;<i> Dec  5 19:41:54 linux-l8hb kernel: [579205.650965] uvcvideo: Found UVC 1.00
</I>&gt;<i> device Microsoft&#174; LifeCam NX-6000 (045e:00f8)
</I>&gt;<i> Dec  5 19:41:54 linux-l8hb kernel: [579205.651398] uvcvideo: UVC non
</I>&gt;<i> compliance - GET_DEF(PROBE) not supported. Enabling workaround.
</I>&gt;<i> Dec  5 19:41:54 linux-l8hb kernel: [579205.652136] input: Microsoft&#174;
</I>&gt;<i>  LifeCam NX-6000 as
</I>&gt;<i> /devices/pci0000:00/0000:00:1d.7/usb2/2-1/2-1.1/2-1.1.1/2-1.1.1:1.0/inp
</I>&gt;<i> ut/input21
</I>&gt;<i> 
</I>&gt;<i> I could see it working in lucview, while in Skype and Kopete it didn't
</I>&gt;<i> work...but it seemed a step forward.
</I>&gt;<i> But now I'm back on square one! When I attach the cam, it says:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Dec  7 16:55:04 linux-l8hb kernel: [741992.357149] usb 2-1.1.1: Product:
</I>&gt;<i> Microsoft&#174; LifeCam NX-6000
</I>&gt;<i> Dec  7 16:55:04 linux-l8hb kernel: [741992.357156] usb 2-1.1.1:
</I>&gt;<i>  Manufacturer: Microsoft
</I>&gt;<i> Dec  7 16:55:04 linux-l8hb kernel: [741992.357300] usb 2-1.1.1:
</I>&gt;<i>  configuration #1 chosen from 1 choice
</I>&gt;<i> Dec  7 16:55:04 linux-l8hb kernel: [741992.357968] uvcvideo: Found UVC 1.00
</I>&gt;<i> device Microsoft&#174; LifeCam NX-6000 (045e:00f8)
</I>&gt;<i> Dec  7 16:55:04 linux-l8hb kernel: [741992.358337] uvcvideo: UVC non
</I>&gt;<i> compliance - GET_DEF(PROBE) not supported. Enabling workaround.
</I>&gt;<i> Dec  7 16:55:04 linux-l8hb kernel: [741992.358958] input: Microsoft&#174;
</I>&gt;<i>  LifeCam NX-6000 as
</I>&gt;<i> /devices/pci0000:00/0000:00:1d.7/usb2/2-1/2-1.1/2-1.1.1/2-1.1.1:1.0/input/i
</I>&gt;<i> nput25 Dec  7 16:55:05 linux-l8hb kernel: [741993.160295] uvcvideo: Failed
</I>&gt;<i>  to query (1) UVC control 3 (unit 5) : -110 (exp. 2).
</I>&gt;<i> Dec  7 16:55:05 linux-l8hb kernel: [741993.460201] uvcvideo: Failed to
</I>&gt;<i>  query (135) UVC control 7 (unit 5) : -110 (exp. 2).
</I>&gt;<i> Dec  7 16:55:06 linux-l8hb kernel: [741993.760222] uvcvideo: Failed to
</I>&gt;<i>  query (135) UVC control 9 (unit 5) : -110 (exp. 2).
</I>&gt;<i> Dec  7 16:55:06 linux-l8hb kernel: [741993.980246] ALSA
</I>&gt;<i> /usr/src/packages/BUILD/kernel-
</I>&gt;<i> desktop-2.6.31.5/linux-2.6.31/sound/usb/usbmixer.c:405: cannot get current
</I>&gt;<i> value for control 1 ch 1: err = -22
</I>&gt;<i> Dec  7 16:55:06 linux-l8hb kernel: [741994.060260] uvcvideo: Failed to
</I>&gt;<i>  query (135) UVC control 6 (unit 5) : -110 (exp. 2).
</I>&gt;<i> Dec  7 16:55:07 linux-l8hb kernel: [741995.051221] ALSA
</I>&gt;<i> /usr/src/packages/BUILD/kernel-
</I>&gt;<i> desktop-2.6.31.5/linux-2.6.31/sound/usb/usbmixer.c:405: cannot get current
</I>&gt;<i> value for control 1 ch 1: err = -22
</I>&gt;<i> Dec  7 16:55:13 linux-l8hb kernel: [742001.638202] uvcvideo: Failed to set
</I>&gt;<i>  UVC probe control : -110 (exp. 26).
</I>&gt;<i> Dec  7 16:55:23 linux-l8hb kernel: [742011.561120] uvcvideo: Failed to set
</I>&gt;<i>  UVC probe control : -110 (exp. 26).
</I>&gt;<i> 
</I>&gt;<i> &gt;Ouch. It seems the problem is not limited to uvcvideo but also impacts
</I>&gt;<i> &gt;usbaudio. Could you try not to load the uvcvideo driver (you can blacklist
</I>&gt;<i> &gt; it by adding &quot;blacklist uvcvideo&quot; to /etc/modprobe.d/blacklist.conf or
</I>&gt;<i> &gt; /etc/modprobe.conf - the file name and location might be distribution-
</I>&gt;<i> &gt; dependent) and check if ALSA still prints error messages ?
</I>&gt;<i> 
</I>&gt;<i> It doesn't:
</I>&gt;<i> Dec  7 17:05:06 linux-l8hb kernel: [742594.398463] usb 2-1.1.1: new high
</I>&gt;<i>  speed USB device using ehci_hcd and address 83
</I>&gt;<i> Dec  7 17:05:06 linux-l8hb kernel: [742594.520837] usb 2-1.1.1: New USB
</I>&gt;<i>  device found, idVendor=045e, idProduct=00f8
</I>&gt;<i> Dec  7 17:05:06 linux-l8hb kernel: [742594.520858] usb 2-1.1.1: New USB
</I>&gt;<i>  device strings: Mfr=1, Product=2, SerialNumber=0
</I>&gt;<i> Dec  7 17:05:06 linux-l8hb kernel: [742594.520870] usb 2-1.1.1: Product:
</I>&gt;<i> Microsoft&#174; LifeCam NX-6000
</I>&gt;<i> Dec  7 17:05:06 linux-l8hb kernel: [742594.520880] usb 2-1.1.1:
</I>&gt;<i>  Manufacturer: Microsoft
</I>&gt;<i> Dec  7 17:05:06 linux-l8hb kernel: [742594.521053] usb 2-1.1.1:
</I>&gt;<i>  configuration #1 chosen from 1 choice
</I>&gt;<i> 
</I>&gt;<i> &gt; Could you please send me the messages printed by the driver to the kernel
</I>&gt;<i> &gt;  log when running luvcview -d /dev/video1 ?
</I>&gt;<i> 
</I>&gt;<i> Just one line:
</I>&gt;<i> Dec  7 17:01:29 linux-l8hb kernel: [742376.860611] uvcvideo: Failed to set
</I>&gt;<i>  UVC probe control : -110 (exp. 26).
</I>&gt;<i> 
</I>&gt;<i> I didn't reboot my PC or change kernel version. I still have m friend's
</I>&gt;<i> lifecam cinema here, and it still works perfectly (so I don't think it's a
</I>&gt;<i> messed-up configuration).
</I>&gt;<i> Any hint?
</I>
You won't like it, but my guess is that the webcam firmware is buggy (like 
most webcam firmwares :-/) and crashes due to a race condition. Lack of luck 
makes your system reproduce the timings required to trigger the bug.

It might be possible to work around the problem. Could you try to load the 
driver with quirks=0x102 and timeout=3000 ? If that help, please try only one 
of those parameters to see which one fixes the problem.

-- 
Regards,

Laurent Pinchart

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005386.html">[Linux-uvc-devel] Microsoft Lifecam NX-6000
</A></li>
	<LI>Next message: <A HREF="005425.html">[Linux-uvc-devel] Microsoft Lifecam NX-6000
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5404">[ date ]</a>
              <a href="thread.html#5404">[ thread ]</a>
              <a href="subject.html#5404">[ subject ]</a>
              <a href="author.html#5404">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
