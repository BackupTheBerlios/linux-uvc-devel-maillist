<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] support for 05ca:183a
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2009-June/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20support%20for%2005ca%3A183a&In-Reply-To=%3C977967.31602.qm%40web111907.mail.gq1.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004882.html">
   <LINK REL="Next"  HREF="004897.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] support for 05ca:183a</H1>
    <B>Frito Lay</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20support%20for%2005ca%3A183a&In-Reply-To=%3C977967.31602.qm%40web111907.mail.gq1.yahoo.com%3E"
       TITLE="[Linux-uvc-devel] support for 05ca:183a">lameventanas at yahoo.com
       </A><BR>
    <I>Sun Jun 14 02:18:11 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004882.html">[Linux-uvc-devel] The video device does not support the	required video format
</A></li>
        <LI>Next message: <A HREF="004897.html">[Linux-uvc-devel] support for 05ca:183a
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4878">[ date ]</a>
              <a href="thread.html#4878">[ thread ]</a>
              <a href="subject.html#4878">[ subject ]</a>
              <a href="author.html#4878">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> On Saturday 21 February 2009 19:58:02 Pivo wrote:
</I>&gt;<i> &gt; Hi Laurent,
</I>&gt;<i> &gt; I have the same webcam, the same problems than petr but the problem is
</I>&gt;<i> &gt; not solve and I think you didn't get the answers you wanted.
</I>
I have the same problem.  My webcam is embedded in my Sony laptop (FZ series), it has the same USB id.
Just tried the uvcvideo driver included in kernel 2.6.30, and the problem persists.

&gt;<i> &gt; &gt; Hi Petr,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; On Monday 10 November 2008, Petr Men&#353;&#237;k wrote:
</I>&gt;<i> &gt; &gt; &gt; hi,
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; i found interesting news. my camera will change its resolution, but
</I>&gt;<i> &gt; &gt; &gt; only to 640x480 and 1280x1024 correctly. I was astonished when high
</I>&gt;<i> &gt; &gt; &gt; resolution worked, i did not expect that. I got working svn version
</I>&gt;<i> &gt; &gt; &gt; of luvcview, but really lower resolutions are still wrong in that
</I>&gt;<i> &gt; &gt; &gt; also.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Could you please send me the USB descriptors of your camera ? You can
</I>&gt;<i> &gt; &gt; retrieve them with 'lsusb -v'.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Bus 001 Device 002: ID 05ca:183b Ricoh Co., Ltd
</I>&gt;<i> &gt; Device Descriptor:
</I>&gt;<i> &gt;   bLength                18
</I>&gt;<i> &gt;   bDescriptorType         1
</I>&gt;<i> &gt;   bcdUSB               2.00
</I>&gt;<i> &gt;   bDeviceClass          239 Miscellaneous Device
</I>&gt;<i> &gt;   bDeviceSubClass         2 ?
</I>&gt;<i> &gt;   bDeviceProtocol         1 Interface Association
</I>&gt;<i> &gt;   bMaxPacketSize0        64
</I>&gt;<i> &gt;   idVendor           0x05ca Ricoh Co., Ltd
</I>&gt;<i> &gt;   idProduct          0x183b
</I>&gt;<i> &gt;   bcdDevice            1.00
</I>&gt;<i> &gt;   iManufacturer           0
</I>&gt;<i> &gt;   iProduct                0
</I>&gt;<i> &gt;   iSerial                 0
</I>&gt;<i> &gt;   bNumConfigurations      1
</I>&gt;<i>
</I>&gt;<i> [snip]
</I>&gt;<i>
</I>&gt;<i> Thanks for the descriptors.
</I>&gt;<i>
</I>&gt;<i> Ricoh cameras are not renowned for their UVC compatibility :-/
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; &gt; Yes, lower resolutions worked fine in ekiga before, i believe it is
</I>&gt;<i> &gt; &gt; &gt; using lowest one, 160x120.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; So there's probably a problem on the host side (or at least in the host
</I>&gt;<i> &gt; &gt; &lt;-&gt; device communication). Your tests seem to point to the resolution
</I>&gt;<i> &gt; &gt; change not being understood by the camera.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; To confirm that, I'd like you to check the kernel log with the uvcvideo
</I>&gt;<i> &gt; &gt; trace parameter set to 128 (either when loading the driver, or later
</I>&gt;<i> &gt; &gt; with 'echo 128 &gt; /sys/modules/uvcvideo/parameters/trace').
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Clear the kernel log (dmesg -c), run a video application in 640x480 for
</I>&gt;<i> &gt; &gt; a second or two (longer would write too much messages to the log),
</I>&gt;<i> &gt; &gt; close the application and capture the kernel log. Rerun the same test
</I>&gt;<i> &gt; &gt; procedure in a lower, faulty resolution such as 320x240.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; # luvcview -s 640x480 -f yuv -i 30
</I>&gt;<i> &gt; luvcview version 0.2.1
</I>&gt;<i> &gt;  size width: 640 height: 480
</I>&gt;<i> &gt;  interval: 30 fps
</I>&gt;<i> &gt; Video driver: x11
</I>&gt;<i> &gt; A window manager is available
</I>&gt;<i> &gt; video /dev/video0
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Stop asked
</I>&gt;<i> &gt;  Clean Up done Quit
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; # dmesg
</I>&gt;<i> &gt; [20451.408588] uvcvideo: Frame complete (EOF found).
</I>&gt;<i>
</I>&gt;<i> [snip]
</I>&gt;<i>
</I>&gt;<i> &gt; [20456.138594] uvcvideo: Frame complete (EOF found).
</I>&gt;<i>
</I>&gt;<i> Looks pretty normal.
</I>&gt;<i>
</I>&gt;<i> &gt; # luvcview -s 320x240 -f yuv -i 30
</I>&gt;<i> &gt; luvcview version 0.2.1
</I>&gt;<i> &gt;  size width: 320 height: 240
</I>&gt;<i> &gt;  interval: 30 fps
</I>&gt;<i> &gt; Video driver: x11
</I>&gt;<i> &gt; A window manager is available
</I>&gt;<i> &gt; video /dev/video0
</I>&gt;<i> &gt; ^C
</I>&gt;<i> &gt; Stop asked
</I>&gt;<i> &gt;  Clean Up done Quit
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; # dmesg
</I>&gt;<i> &gt; [20516.062625] uvcvideo: Frame complete (overflow).
</I>&gt;<i> &gt; [20516.062637] uvcvideo: Dropping payload (out of sync).
</I>&gt;<i>
</I>&gt;<i> [snip]
</I>&gt;<i>
</I>&gt;<i> &gt; [20516.067631] uvcvideo: Dropping payload (out of sync).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Many and many lines like that!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; If, as I suspect, the camera doesn't understand the resolution change
</I>&gt;<i> &gt; &gt; properly, it should send a whole 640x480 frame even when the driver
</I>&gt;<i> &gt; &gt; expects a lower resolution. Excess video data should be dropped and
</I>&gt;<i> &gt; &gt; logged by the driver with a &quot;Dropping payload (out of sync)&quot; message.
</I>&gt;<i> &gt; &gt; Those messages should not occur in 640x480 (or at least be way less
</I>&gt;<i> &gt; &gt; frequent than in 320x240).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; You are right!
</I>&gt;<i>
</I>&gt;<i> Unfortunately :-/
</I>&gt;<i>
</I>&gt;<i> I don't know why the device didn't understand the resolution change
</I>&gt;<i> request. It could be anything from a bug in the camera, a
</I>&gt;<i> mostly-but-not-really UVC compatible firmware, or just an inability to
</I>&gt;<i> stream at lower resolutions.
</I>&gt;<i>
</I>&gt;<i> Capturing a USB trace on Windows might help understanding what's going on.
</I>&gt;<i>
</I>&gt;<i> Best regards,
</I>&gt;<i>
</I>&gt;<i> Laurent Pinchart
</I>

Just wanted to add that I used to use the r5u870 driver and it worked
correctly at 320x240, but had to switch to uvcvideo because the
r5u870 one doesn't build with kernels newer than 2.6.27 (I think the
project was abandoned).
So maybe its possible to look into the r5u870 driver and see how it was done there?

This is a major problem, because Skype, kopete, etc, they all use 320x240, so they are not working with this driver.

Frito



      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090613/23d50f00/attachment.html">https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090613/23d50f00/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004882.html">[Linux-uvc-devel] The video device does not support the	required video format
</A></li>
	<LI>Next message: <A HREF="004897.html">[Linux-uvc-devel] support for 05ca:183a
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4878">[ date ]</a>
              <a href="thread.html#4878">[ thread ]</a>
              <a href="subject.html#4878">[ subject ]</a>
              <a href="author.html#4878">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
