From laurent.pinchart at skynet.be  Mon Mar  2 00:01:04 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 2 Mar 2009 00:01:04 +0100
Subject: [Linux-uvc-devel] Minoru stereo webcam
In-Reply-To: <200902161830.37415.yann@lecun.org>
References: <200901311727.33749.yann@lecun.org> <4999A855.6070202@gmail.com>
	<200902161830.37415.yann@lecun.org>
Message-ID: <200903020001.04667.laurent.pinchart@skynet.be>

Hi Yann,

sorry for the late answer.

On Tuesday 17 February 2009 00:30:37 Yann LeCun wrote:
> I seem to be having a strange problem with the patch:
> Using my own v4l2 grabbing code, I can do:
> 640x480 15 fps
> 320x240 30 fps
> 160x120 30 fps
> and everything works fine.
>
> but if I try 320x240 or 160x120 with an fps any
> lower than 30 fps, it doesn't work.
>
> It looks like my code hangs at the next i/o (or perhaps
> the next call to select() that it encounters) after grabbing
> a frame.  This problem doesn't happen if I set the fps to 30
> (or more).

I guess the driver fails to compute an appropriate bandwidth for the 
resolutions and frame rates.

The workaround I've added to the driver is really a heuristic. It computes the 
required bandwidth by multiplying the frame size (in bytes) by the frame rate 
and dividing the result by the number of USB isochronous frames (that's 
roughly the number of isochronous packets) per second.

To implement a more precise bandwidth computation algorithm I would have to 
know what bandwidth the chipset really needs. As I don't have access to that 
information I'm stuck with guessing.

Are small frame rates at small resolutions that important ? If not I'd be 
tempted to leave things as they are.

Best regards,

Laurent Pinchart



From laurent.pinchart at skynet.be  Mon Mar  2 00:14:59 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 2 Mar 2009 00:14:59 +0100
Subject: [Linux-uvc-devel] support for 05ca:183a
In-Reply-To: <fe0b26c40902211058r4e730792oe6f654ecc50f8ac7@mail.gmail.com>
References: <fe0b26c40902211058r4e730792oe6f654ecc50f8ac7@mail.gmail.com>
Message-ID: <200903020014.59805.laurent.pinchart@skynet.be>

Hi,

On Saturday 21 February 2009 19:58:02 Pivo wrote:
> Hi Laurent,
> I have the same webcam, the same problems than petr but the problem is not
> solve and I think you didn't get the answers you wanted.
>
> > Hi Petr,
> >
> > On Monday 10 November 2008, Petr Men??k wrote:
> > > hi,
> > >
> > > i found interesting news. my camera will change its resolution, but
> > > only to 640x480 and 1280x1024 correctly. I was astonished when high
> > > resolution worked, i did not expect that. I got working svn version of
> > > luvcview, but really lower resolutions are still wrong in that also.
> >
> > Could you please send me the USB descriptors of your camera ? You can
> > retrieve them with 'lsusb -v'.
>
> Bus 001 Device 002: ID 05ca:183b Ricoh Co., Ltd
> Device Descriptor:
>   bLength                18
>   bDescriptorType         1
>   bcdUSB               2.00
>   bDeviceClass          239 Miscellaneous Device
>   bDeviceSubClass         2 ?
>   bDeviceProtocol         1 Interface Association
>   bMaxPacketSize0        64
>   idVendor           0x05ca Ricoh Co., Ltd
>   idProduct          0x183b
>   bcdDevice            1.00
>   iManufacturer           0
>   iProduct                0
>   iSerial                 0
>   bNumConfigurations      1

[snip]

Thanks for the descriptors.

Ricoh cameras are not renowned for their UVC compatibility :-/

> > > Yes, lower resolutions worked fine in ekiga before, i believe it is
> > > using lowest one, 160x120.
> >
> > So there's probably a problem on the host side (or at least in the host
> > <-> device communication). Your tests seem to point to the resolution
> > change not being understood by the camera.
> >
> > To confirm that, I'd like you to check the kernel log with the uvcvideo
> > trace parameter set to 128 (either when loading the driver, or later with
> > 'echo 128 > /sys/modules/uvcvideo/parameters/trace').
> >
> > Clear the kernel log (dmesg -c), run a video application in 640x480 for a
> > second or two (longer would write too much messages to the log), close
> > the application and capture the kernel log. Rerun the same test procedure
> > in a lower, faulty resolution such as 320x240.
>
> # luvcview -s 640x480 -f yuv -i 30
> luvcview version 0.2.1
>  size width: 640 height: 480
>  interval: 30 fps
> Video driver: x11
> A window manager is available
> video /dev/video0
>
> Stop asked
>  Clean Up done Quit
>
> # dmesg
> [20451.408588] uvcvideo: Frame complete (EOF found).
[snip]
> [20456.138594] uvcvideo: Frame complete (EOF found).

Looks pretty normal.

> # luvcview -s 320x240 -f yuv -i 30
> luvcview version 0.2.1
>  size width: 320 height: 240
>  interval: 30 fps
> Video driver: x11
> A window manager is available
> video /dev/video0
> ^C
> Stop asked
>  Clean Up done Quit
>
> # dmesg
> [20516.062625] uvcvideo: Frame complete (overflow).
> [20516.062637] uvcvideo: Dropping payload (out of sync).
[snip]
> [20516.067631] uvcvideo: Dropping payload (out of sync).
>
> Many and many lines like that!
>
> > If, as I suspect, the camera doesn't understand the resolution change
> > properly, it should send a whole 640x480 frame even when the driver
> > expects a lower resolution. Excess video data should be dropped and logged
> > by the driver with a "Dropping payload (out of sync)" message. Those
> > messages should not occur in 640x480 (or at least be way less frequent
> > than in 320x240).
>
> You are right!

Unfortunately :-/

I don't know why the device didn't understand the resolution change request. 
It could be anything from a bug in the camera, a mostly-but-not-really UVC 
compatible firmware, or just an inability to stream at lower resolutions.

Capturing a USB trace on Windows might help understanding what's going on.

Best regards,

Laurent Pinchart



From laurent.pinchart at skynet.be  Mon Mar  2 01:18:19 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 2 Mar 2009 01:18:19 +0100
Subject: [Linux-uvc-devel] getting vid:pid
In-Reply-To: <59cf47a80902261253r26a835e4s6740d3b6ea89e5b9@mail.gmail.com>
References: <59cf47a80902261253r26a835e4s6740d3b6ea89e5b9@mail.gmail.com>
Message-ID: <200903020118.20096.laurent.pinchart@skynet.be>

Hi Paulo,

On Thursday 26 February 2009 21:53:58 Paulo Assis wrote:
> Hi,
> In order to proper add dynamic controls to the uvc driver, I need at least
> the vid string for the selected device.
> I tried libwebcam approach  by using /sys/class/video4linux, but this
> proved highly distribution dependent and has caused a lot of trouble,

Really ? The /sys tree shouldn't be distribution dependent. What kind of 
problems have you run into ?

> so no I'm parsing the values passed in the device card field of
> v4l2_capability struct. UVC sets this to "UVC Camera (vid:pid)" and since I
> only need these fields for the uvc driver there shouldn't be a problem,
> right?
> Or are there any plans to change this field in the future ?

There are no plans, but the card field isn't meant to convey that information. 
The format might change in the future without notice.

> The best solution would be if I could get these values directly in v4l2,
> but it looks like v4l2 developers "forgot" or at least didn't consider this
> information important enought.
> If there is some other distro independent solution I would like to know.
> I've also tried libusb, but failed to link the /sys/class device name to
> the usb bus-devicename provided by this library.

Best regards,

Laurent Pinchart



From laurent.pinchart at skynet.be  Mon Mar  2 01:21:06 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 2 Mar 2009 01:21:06 +0100
Subject: [Linux-uvc-devel] Video/Audio recording issues with a Philips
	SPC1300NC
In-Reply-To: <560f0caf0902261638p689dc64dhde406c0b580c45e7@mail.gmail.com>
References: <560f0caf0902261638p689dc64dhde406c0b580c45e7@mail.gmail.com>
Message-ID: <200903020121.06588.laurent.pinchart@skynet.be>

Hi,

On Friday 27 February 2009 01:38:20 Sinisa Dukanovic wrote:
> Hi everyone,
> i own a Philips SPC1300NC which runs fine with uvc. Recording video never
> was an issue, and since a weeks i can even record audio using the internal
> mix of the camera. But i was never able to record audio and video at the
> same time; not in skype, nor in any other application. When trying to
> videophone with skype my communication partner receives perfect video but
> only distorted audio. I some how realized the the audio distortion starts
> when i start video. Running a few tests outside of skype (with arecord and
> luvcview) i now have a deterinistc behaviour:
> 1) When audio recording is started prior to video recording, audio
> recording goes only well until video recording is started.
> 2) When video recording is started prior to audio recording, both work
> perfectly
> For my test i used
> skype(video test in options) + skype(audio-only phone call)
> skype(video test in options) + arecord
> luvcview + skype(audio-only phone call)
> arecord + luvcview
>
> In all cases 1) and 2) hold.
>
> Does anybody know why this happens? Whether this is a uvc-bug or an
> alsa-bug? Any hints on how to debug this?

I'm afraid I have no idea. It might even be a big in the camera itself.

Best regards,

Laurent Pinchart



From laurent.pinchart at skynet.be  Mon Mar  2 01:26:51 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 2 Mar 2009 01:26:51 +0100
Subject: [Linux-uvc-devel] uvcvideo and older kernels
In-Reply-To: <op.up0p5tuqyuj1tx@jazzy.cs.yorku.ca>
References: <op.up0p5tuqyuj1tx@jazzy.cs.yorku.ca>
Message-ID: <200903020126.51819.laurent.pinchart@skynet.be>

Hi Paul,

On Friday 27 February 2009 17:16:31 Paul Griffith wrote:
> Greetings,
>
> Is there any hope of compiling and installing uvcvideo on a older kernel?

Sure. Download the latest driver source code and backport it to your kernel. 
If you can live without the latest additions to the uvcvideo driver you can 
start with the SVN version, it includes more compatibility code for older 
kernels (down to 2.6.15).

> I am running CentOS 4.6 with kernel version 2.6.9-78.0.13.EL.smp and using
> a Logitech QuickCam Communicate MP (aka S5500) camera (usb id number:
> 0x046d:09a1). This is a lab of 24 computers and we really don't want to
> upgrade the kernel at the start of a term, the other option is to use
> Windows (we have dual boot).

If you can't backport the driver yourself ask CentOS for help. Shipping a 3 
years old kernel makes them responsible for the backports.

Best regards,

Laurent Pinchart



From laurent.pinchart at skynet.be  Mon Mar  2 01:52:38 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 2 Mar 2009 01:52:38 +0100
Subject: [Linux-uvc-devel] Strange issue with V4L, Gumstix,
	and VIDIOC_REQBUFS/VIDIOC_QUERYBUF
In-Reply-To: <49A83B16.8080506@atl.lmco.com>
References: <49A3DF53.8080302@atl.lmco.com>
	<200902250124.36542.laurent.pinchart@skynet.be>
	<49A83B16.8080506@atl.lmco.com>
Message-ID: <200903020152.38842.laurent.pinchart@skynet.be>

Hi Tom,

On Friday 27 February 2009 20:12:22 Tom Moore wrote:
> Hello again,
>
> I re-compiled the driver with tracing enabled on pretty much everything,
> and below is the output I received from plugging in the camera and
> running my control program (the output from the uvccapture program is
> very similar). Why is the camera using the MJPEG format?

Because the camera supports MJPEG only. The uvcvideo driver doesn't transcode 
video data.

> On my desktop machine (Ubunto 8.10, kernel 2.6.27), I specify that I want
> the image format to be YUYV and it works fine.

That's because applications on your desktop use libv4l and thus get MJPEG to 
YUYV transcoding for free (or rather for some CPU cycles).

> I'm even able to output .ppm files to disk. Does the camera support more
> than one format? Also, when I run uvccapture, the output file is about 8 KB
> for a 320x240 image, and it will not open in any standard image viewer.

That's because MJPEG images lack the Huffman tables compared to JPEG images. 
You need to add them back to display them in standard JPEG viewers.

Best regards,

Laurent Pinchart



From yann at lecun.org  Mon Mar  2 04:26:25 2009
From: yann at lecun.org (Yann LeCun)
Date: Sun, 1 Mar 2009 22:26:25 -0500
Subject: [Linux-uvc-devel] Minoru stereo webcam
In-Reply-To: <200903020001.04667.laurent.pinchart@skynet.be>
References: <200901311727.33749.yann@lecun.org>
	<200902161830.37415.yann@lecun.org>
	<200903020001.04667.laurent.pinchart@skynet.be>
Message-ID: <200903012226.25390.yann@lecun.org>

I don't think people really need to the slower framerates, 
so leaving things as they are for the time being is fine.

Still, people should probably be aware of the problem.

  -- Yann

On Sunday 01 March 2009, Laurent Pinchart wrote:
> Hi Yann,
>
> sorry for the late answer.
>
> On Tuesday 17 February 2009 00:30:37 Yann LeCun wrote:
> > I seem to be having a strange problem with the patch:
> > Using my own v4l2 grabbing code, I can do:
> > 640x480 15 fps
> > 320x240 30 fps
> > 160x120 30 fps
> > and everything works fine.
> >
> > but if I try 320x240 or 160x120 with an fps any
> > lower than 30 fps, it doesn't work.
> >
> > It looks like my code hangs at the next i/o (or perhaps
> > the next call to select() that it encounters) after grabbing
> > a frame.  This problem doesn't happen if I set the fps to 30
> > (or more).
>
> I guess the driver fails to compute an appropriate bandwidth for the
> resolutions and frame rates.
>
> The workaround I've added to the driver is really a heuristic. It computes
> the required bandwidth by multiplying the frame size (in bytes) by the
> frame rate and dividing the result by the number of USB isochronous frames
> (that's roughly the number of isochronous packets) per second.
>
> To implement a more precise bandwidth computation algorithm I would have to
> know what bandwidth the chipset really needs. As I don't have access to
> that information I'm stuck with guessing.
>
> Are small frame rates at small resolutions that important ? If not I'd be
> tempted to leave things as they are.
>
> Best regards,
>
> Laurent Pinchart




From pj.assis at gmail.com  Mon Mar  2 10:55:18 2009
From: pj.assis at gmail.com (Paulo Assis)
Date: Mon, 02 Mar 2009 09:55:18 +0000
Subject: [Linux-uvc-devel] getting vid:pid
In-Reply-To: <200903020118.20096.laurent.pinchart@skynet.be>
References: <59cf47a80902261253r26a835e4s6740d3b6ea89e5b9@mail.gmail.com>
	<200903020118.20096.laurent.pinchart@skynet.be>
Message-ID: <49ABAD06.3030604@gmail.com>

Laurent,

Laurent Pinchart escreveu:
> Hi Paulo,
>
> On Thursday 26 February 2009 21:53:58 Paulo Assis wrote:
>   
>> Hi,
>> In order to proper add dynamic controls to the uvc driver, I need at least
>> the vid string for the selected device.
>> I tried libwebcam approach  by using /sys/class/video4linux, but this
>> proved highly distribution dependent and has caused a lot of trouble,
>>     
>
> Really ? The /sys tree shouldn't be distribution dependent. What kind of 
> problems have you run into ?
>
>   
Here is a little example for video0:

In Ubuntu I can get the values from:
     /sys/class/video4linux/video0/device/input/   <-(here I list the
contents and there is always only one dir with some index lets say input6)
so vid I can get from input6/id/vendor and pid from input6/id/product

In Mandriva 2009 vid:pid is set in:
    /sys/class/video4linux/video0/device/input/event6

libwebcam (not sure what distro was used for development) gets this
values from:
    /sys/class/video4linux/video0/device/idVendor and
    /sys/class/video4linux/video0/device/idProduct
>> so no I'm parsing the values passed in the device card field of
>> v4l2_capability struct. UVC sets this to "UVC Camera (vid:pid)" and since I
>> only need these fields for the uvc driver there shouldn't be a problem,
>> right?
>> Or are there any plans to change this field in the future ?
>>     
>
> There are no plans, but the card field isn't meant to convey that information. 
> The format might change in the future without notice.
>
>   
This may prove to be a problem, but for now it seems my best option.
I've set the code so that in case parsing these values fails, dynamic
controls are added anyway,
since you need to run the process with root user so that it can succeed,
only logitech owners will
bother doing with it (although it produces a really ugly output :-) ).
The best solution for users is setting a udev script so that these
controls are added upon device connection,
but this seems to be a bit difficult for a lot of people, so they rather
start guvcview with root privileges once.

Best regards,
Paulo




From legrain at crans.org  Mon Mar  2 21:58:38 2009
From: legrain at crans.org (=?utf-8?q?Gr=C3=A9gory_LEGRAIN?=)
Date: Mon, 2 Mar 2009 21:58:38 +0100
Subject: [Linux-uvc-devel] Strange issue with Hercules Dualpix Infinite
Message-ID: <200903022158.38436.legrain@crans.org>

Hi, and first of all, thank you for the great work you do for uvcvideo.

I am experiencing some troubles with my Hercules Dualpix Infinite, depending 
on the computer I use :
I have two computers : 
1/ one under ubuntu hardy (kernel 2.6.24.23)
2/ one under opensuse 11.1 (kernel 2.6.27.19-3.2)

The webcam works well under ubuntu (which quite old), and does not work under 
suse: only one third of the image is visible under kopete and skype.

What is strange is that it works with cheese (as reported in a previous 
threat [1]).

You can find attached with the mail the output of the kernel 
(/var/log/messages) and from lsusb for both computer.

Any insight on this problem ?

Best Regards,
G.L.

[1] http://lists.berlios.de/pipermail/linux-uvc-devel/2008-
November/004303.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: suse.jpg
Type: image/jpeg
Size: 8741 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090302/f414ea94/attachment.jpg>
-------------- next part --------------

Bus 004 Device 003: ID 06f8:300a Guillemot Corp. 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x06f8 Guillemot Corp.
  idProduct          0x300a 
  bcdDevice            1.00
  iManufacturer           2 
  iProduct                1 
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          766
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              168mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0 
      iFunction               5 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0 
      iInterface              5 
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength          103
        dwClockFrequency       15.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               5
        iTerminal               0 
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {7033f028-1163-2e4a-ba2c-6890eb334016}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          3
        bControlSize            1
        bmControls( 0)       0x7f
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 5
        guidExtensionCode         {3fae1228-d7bc-114e-a357-6f1edef7d61d}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          4
        bControlSize            1
        bmControls( 0)       0x00
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0 
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000a0e
          Auto-Exposure Mode
          Auto-Exposure Priority
          Exposure Time (Absolute)
          Zoom (Absolute)
          PanTilt (Absolute)
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000177f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Gain
          Power Line Frequency
          White Balance Temperature, Auto
        iProcessing             0 
        bmVideoStandards     0x 0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                        1
        wTotalLength                      407
        bEndPointAddress                  129
        bmInfo                              0
        bTerminalLink                       2
        bStillCaptureMethod                 2
        bTriggerSupport                     0
        bTriggerUsage                       0
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                7
        guidFormat                            {59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   768000
        dwMaxBitRate                  4608000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   192000
        dwMaxBitRate                  1152000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                   253440
        dwMaxBitRate                  1520640
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                  1013760
        dwMaxBitRate                  6082560
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                  3072000
        dwMaxBitRate                 18432000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            42
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            800
        wHeight                           600
        dwMinBitRate                  4800000
        dwMaxBitRate                 19200000
        dwMaxVideoFrameBufferSize      960000
        dwDefaultFrameInterval         500000
        bFrameIntervalType                  4
        dwFrameInterval( 0)            500000
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
        dwFrameInterval( 3)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         8
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1600
        wHeight                          1200
        dwMinBitRate                 19200000
        dwMaxBitRate                 19200000
        dwMaxVideoFrameBufferSize     3840000
        dwDefaultFrameInterval        2000000
        bFrameIntervalType                  1
        dwFrameInterval( 0)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               8
        wWidth( 0)                        320
        wHeight( 0)                       240
        wWidth( 1)                       1600
        wHeight( 1)                      1200
        wWidth( 2)                       1280
        wHeight( 2)                       960
        wWidth( 3)                        800
        wHeight( 3)                       600
        wWidth( 4)                        640
        wHeight( 4)                       480
        wWidth( 5)                        352
        wHeight( 5)                       288
        wWidth( 6)                        176
        wHeight( 6)                       144
        wWidth( 7)                        160
        wHeight( 7)                       120
        bNumCompressionPatterns             8
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b20  2x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1320  3x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 1024 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       0 
      bFunctionProtocol       0 
      iFunction               4 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0 
      iInterface              4 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           41
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0 
        iTerminal               0 
      AudioControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 2
        bSourceID               1
        bControlSize            2
        bmaControls( 0)      0x01
        bmaControls( 0)      0x00
          Mute
        bmaControls( 1)      0x02
        bmaControls( 1)      0x00
          Volume
        iFeature                0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               2
        iTerminal               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                14
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            2 Discrete
        tSamFreq[ 0]         8000
        tSamFreq[ 1]        16000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x84  EP 4 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0190  1x 400 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
-------------- next part --------------

Bus 003 Device 005: ID 06f8:300a Guillemot Corp. 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x06f8 Guillemot Corp.
  idProduct          0x300a 
  bcdDevice            1.00
  iManufacturer           2 
  iProduct                1 
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          766
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              168mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0 
      iFunction               5 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0 
      iInterface              5 
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength          103
        dwClockFrequency       15.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               5
        iTerminal               0 
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {7033f028-1163-2e4a-ba2c-6890eb334016}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          3
        bControlSize            1
        bmControls( 0)       0x7f
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 5
        guidExtensionCode         {3fae1228-d7bc-114e-a357-6f1edef7d61d}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          4
        bControlSize            1
        bmControls( 0)       0x00
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0 
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000a0e
          Auto-Exposure Mode
          Auto-Exposure Priority
          Exposure Time (Absolute)
          Zoom (Absolute)
          PanTilt (Absolute)
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000177f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Gain
          Power Line Frequency
          White Balance Temperature, Auto
        iProcessing             0 
        bmVideoStandards     0xdb
          None
          NTSC - 525/60
          SECAM - 625/50
          NTSC - 625/50
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                        1
        wTotalLength                      407
        bEndPointAddress                  129
        bmInfo                              0
        bTerminalLink                       2
        bStillCaptureMethod                 2
        bTriggerSupport                     0
        bTriggerUsage                       0
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                7
        guidFormat                            {59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   768000
        dwMaxBitRate                  4608000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   192000
        dwMaxBitRate                  1152000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                   253440
        dwMaxBitRate                  1520640
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                  1013760
        dwMaxBitRate                  6082560
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                  3072000
        dwMaxBitRate                 18432000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            42
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            800
        wHeight                           600
        dwMinBitRate                  4800000
        dwMaxBitRate                 19200000
        dwMaxVideoFrameBufferSize      960000
        dwDefaultFrameInterval         500000
        bFrameIntervalType                  4
        dwFrameInterval( 0)            500000
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
        dwFrameInterval( 3)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         8
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1600
        wHeight                          1200
        dwMinBitRate                 19200000
        dwMaxBitRate                 19200000
        dwMaxVideoFrameBufferSize     3840000
        dwDefaultFrameInterval        2000000
        bFrameIntervalType                  1
        dwFrameInterval( 0)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               8
        wWidth( 0)                        320
        wHeight( 0)                       240
        wWidth( 1)                       1600
        wHeight( 1)                      1200
        wWidth( 2)                       1280
        wHeight( 2)                       960
        wWidth( 3)                        800
        wHeight( 3)                       600
        wWidth( 4)                        640
        wHeight( 4)                       480
        wWidth( 5)                        352
        wHeight( 5)                       288
        wWidth( 6)                        176
        wHeight( 6)                       144
        wWidth( 7)                        160
        wHeight( 7)                       120
        bNumCompressionPatterns             8
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b20  2x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1320  3x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 1024 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       0 
      bFunctionProtocol       0 
      iFunction               4 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0 
      iInterface              4 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           41
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0 
        iTerminal               0 
      AudioControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 2
        bSourceID               1
        bControlSize            2
        bmaControls( 0)      0x01
        bmaControls( 0)      0x00
          Mute
        bmaControls( 1)      0x02
        bmaControls( 1)      0x00
          Volume
        iFeature                0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               2
        iTerminal               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                14
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            2 Discrete
        tSamFreq[ 0]         8000
        tSamFreq[ 1]        16000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x84  EP 4 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0190  1x 400 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
-------------- next part --------------
Feb 25 20:49:12 ladakh kernel: usb 3-2: New USB device found, idVendor=06f8, idProduct=300a
Feb 25 20:49:12 ladakh kernel: usb 3-2: New USB device strings: Mfr=2, Product=1, SerialNumber=0
Feb 25 20:49:12 ladakh kernel: usb 3-2: Product: Hercules Dualpix Infinite
Feb 25 20:49:12 ladakh kernel: usb 3-2: Manufacturer: Guillemot Corporation
Feb 25 20:49:12 ladakh kernel: Linux video capture interface: v2.00
Feb 25 20:49:12 ladakh kernel: ALSA sound/usb/usbaudio.c:1298: 5:3:1: cannot get freq at ep 0x84
Feb 25 20:49:12 ladakh kernel: uvcvideo: Found UVC 1.00 device Hercules DualpixInfinite (06f8:300a)
Feb 25 20:49:12 ladakh kernel: input: Hercules Dualpix Infinite as /devices/pci0000:00/0000:00:1a.7/usb3/3-2/3-2:1.0/input/input5
Feb 25 20:49:12 ladakh kernel: usbcore: registered new interface driver uvcvideo
Feb 25 20:49:12 ladakh kernel: usbcore: registered new interface driver snd-usb-audio
Feb 25 20:49:12 ladakh kernel: USB Video Class driver (SVN r260)
-------------- next part --------------
Feb 25 20:45:49 tsokar kernel: [  143.594970] Linux video capture interface: v2.00
Feb 25 20:45:49 tsokar kernel: [  143.738333] ALSA /build/buildd/linux-ubuntu-modules-2.6.24-2.6.24/debian/build/build-generic/sound/alsa-driver/usb/usbaudio.c:1296:2:3:1: cannot get freq at ep 0x84
Feb 25 20:45:49 tsokar kernel: [  143.747963] usbcore: registered new interface driver snd-usb-audio
Feb 25 20:45:49 tsokar kernel: [  143.748106] uvcvideo: Found UVC 1.00 device Hercules Dualpix Infinite (06f8:300a)
Feb 25 20:45:50 tsokar kernel: [  143.761680] usbcore: registered new interface driver uvcvideo
Feb 25 20:45:50 tsokar kernel: [  143.761689] USB Video Class driver (v0.1.0)

From laurent.pinchart at skynet.be  Tue Mar  3 00:13:10 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 3 Mar 2009 00:13:10 +0100
Subject: [Linux-uvc-devel] Minoru stereo webcam
In-Reply-To: <200903012226.25390.yann@lecun.org>
References: <200901311727.33749.yann@lecun.org>
	<200903020001.04667.laurent.pinchart@skynet.be>
	<200903012226.25390.yann@lecun.org>
Message-ID: <200903030013.10988.laurent.pinchart@skynet.be>

Hi Yann,

On Monday 02 March 2009 04:26:25 Yann LeCun wrote:
> I don't think people really need to the slower framerates,
> so leaving things as they are for the time being is fine.
>
> Still, people should probably be aware of the problem.

I've added a note on the linux-uvc website.

Best regards,

Laurent Pinchart



From laurent.pinchart at skynet.be  Tue Mar  3 00:25:43 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 3 Mar 2009 00:25:43 +0100
Subject: [Linux-uvc-devel] getting vid:pid
In-Reply-To: <49ABAD06.3030604@gmail.com>
References: <59cf47a80902261253r26a835e4s6740d3b6ea89e5b9@mail.gmail.com>
	<200903020118.20096.laurent.pinchart@skynet.be>
	<49ABAD06.3030604@gmail.com>
Message-ID: <200903030025.43470.laurent.pinchart@skynet.be>

Hi Paulo,

On Monday 02 March 2009 10:55:18 Paulo Assis wrote:
> Laurent,
>
> Laurent Pinchart escreveu:
> > Hi Paulo,
> >
> > On Thursday 26 February 2009 21:53:58 Paulo Assis wrote:
> >> Hi,
> >> In order to proper add dynamic controls to the uvc driver, I need at
> >> least the vid string for the selected device.
> >> I tried libwebcam approach  by using /sys/class/video4linux, but this
> >> proved highly distribution dependent and has caused a lot of trouble,
> >
> > Really ? The /sys tree shouldn't be distribution dependent. What kind of
> > problems have you run into ?
>
> Here is a little example for video0:
>
> In Ubuntu I can get the values from:
>      /sys/class/video4linux/video0/device/input/   <-(here I list the
> contents and there is always only one dir with some index lets say input6)
> so vid I can get from input6/id/vendor and pid from input6/id/product
>
> In Mandriva 2009 vid:pid is set in:
>     /sys/class/video4linux/video0/device/input/event6
>
> libwebcam (not sure what distro was used for development) gets this
> values from:
>     /sys/class/video4linux/video0/device/idVendor and
>     /sys/class/video4linux/video0/device/idProduct

Those methods are definitely not portable. Here is what you should do.

1. Read the /sys/class/video4linux/video0 link and store its target.
2. In the link target read from 1, read the device link and store its target.
3. If the video device is a USB device, the parent directory of the link 
target read from 2 will contain two files called idVendor and idProduct that 
store the device vendor and product IDs.

> >> so no I'm parsing the values passed in the device card field of
> >> v4l2_capability struct. UVC sets this to "UVC Camera (vid:pid)" and
> >> since I only need these fields for the uvc driver there shouldn't be a
> >> problem, right?
> >> Or are there any plans to change this field in the future ?
> >
> > There are no plans, but the card field isn't meant to convey that
> > information. The format might change in the future without notice.
>
> This may prove to be a problem, but for now it seems my best option.
> I've set the code so that in case parsing these values fails, dynamic
> controls are added anyway, since you need to run the process with root user
> so that it can succeed, only logitech owners will bother doing with it
> (although it produces a really ugly output :-) ).

Please try the above method, it should work properly across distributions.

> The best solution for users is setting a udev script so that these
> controls are added upon device connection, but this seems to be a bit
> difficult for a lot of people, so they rather start guvcview with root
> privileges once.

The udev script should really be packaged by distributors (probably part of a 
libwebcam or uvcdynctrl package).

Best regards,

Laurent Pinchart



From fargiolas at gnome.org  Fri Mar  6 10:00:09 2009
From: fargiolas at gnome.org (Filippo Argiolas)
Date: Fri, 6 Mar 2009 10:00:09 +0100
Subject: [Linux-uvc-devel] Wrong key mapped for the input device?
Message-ID: <8ceb98f20903060100h63d474fjf4c0eabf32fc01bc@mail.gmail.com>

Hi Laurent,
I was looking at Cheese bugs and found this one about handling the
webcam buttons to take photos
http://bugzilla.gnome.org/show_bug.cgi?id=521551

It seems the proper way for us would be to listen for XF86WebCam
events but as far as I can tell uvcvideo is mapping the webcam button
to the BTN_0 key.
Why don't you use KEY_CAMERA? it seems more suited for this purpose, isn't it?
Bastien opened a bug at
https://developer.berlios.de/bugs/?func=detailbug&bug_id=13723&group_id=5681
but it seems it went unnoticed.

I'm wondering if there is a particular reason for using BTN_0 since it
seems a pretty common practice in webcam drivers (pwc,
quickcam_messenger, konica, uvcvideo, all use that event).

Anyway I've opened a bug at kernel bugzilla with a proposed patch.
http://bugzilla.kernel.org/show_bug.cgi?id=12825

Best Regards,

Filippo Argiolas


From lkreddy at ti.com  Fri Mar  6 12:20:03 2009
From: lkreddy at ti.com (P, Lakshmi Kanth Reddy)
Date: Fri, 6 Mar 2009 16:50:03 +0530
Subject: [Linux-uvc-devel] UVC gadget/client side driver
Message-ID: <E0D41E29EB0DAC4E9F3FF173962E9E94024397E4F1@dbde02.ent.ti.com>

Hi,

Please let me know if any open source client/gadget side USB video class driver is available for Linux. I found all host side UVC drivers and did not get any client side driver. This driver sits in USB end device like webcams and responds to video streaming requests from Linux host PC.

Regards,
L K Reddy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090306/13670de9/attachment.html>

From shaohuang at gmail.com  Fri Mar  6 18:26:35 2009
From: shaohuang at gmail.com (Brian Pin)
Date: Fri, 6 Mar 2009 09:26:35 -0800
Subject: [Linux-uvc-devel] UVC gadget/client side driver
In-Reply-To: <E0D41E29EB0DAC4E9F3FF173962E9E94024397E4F1@dbde02.ent.ti.com>
References: <E0D41E29EB0DAC4E9F3FF173962E9E94024397E4F1@dbde02.ent.ti.com>
Message-ID: <a81f87bb0903060926i13e630c1jd034a8ef8a767658@mail.gmail.com>

Hi,

Right now, no such firmware is available on Linux kernel yet...



On Fri, Mar 6, 2009 at 3:20 AM, P, Lakshmi Kanth Reddy <lkreddy at ti.com>wrote:

>  Hi,
>
>
>
> Please let me know if any open source client/gadget side USB video class
> driver is available for Linux. I found all host side UVC drivers and did not
> get any client side driver. This driver sits in USB end device like webcams
> and responds to video streaming requests from Linux host PC.
>
>
>
> Regards,
>
> L K Reddy
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>


-- 
Best Regards
Brian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090306/1b5809fb/attachment.html>

From smash0190spam at gmail.com  Fri Mar  6 20:00:31 2009
From: smash0190spam at gmail.com (Sebastian Scherer)
Date: Fri, 6 Mar 2009 14:00:31 -0500
Subject: [Linux-uvc-devel] Problem with DFM 21AUC03-ML
Message-ID: <336f6bae0903061100i4ba18937w22dae0043844b7e9@mail.gmail.com>

Hi,
I have a problem with this camera.
http://www.theimagingsource.com/en_US/products/oem-cameras/usb-cmos-color/dfm21auc03ml/
It shows a picture but I cannot set the frame size and resolution of
the camera. The camera supports
60 frames per second and a resolution of 744x480 YUV2. However I
always get 372x480 and the colors are wrong.

This is what dmesg reports:

[179400.340015] usb 6-1: new high speed USB device using ehci_hcd and address 3
[179400.777492] usb 6-1: configuration #1 chosen from 1 choice
[179400.777790] uvcvideo: Found UVC 1.00 device DFx 21AUC03 (199e:8202)
[179401.306390] input: DFx 21AUC03 as
/devices/pci0000:00/0000:00:1a.7/usb6/6-1/6-1:1.0/input/input7

This is whalt lsusb reports:
Bus 006 Device 003: ID 199e:8202 The Imaging Source Europe GmbH
Device Descriptor:
 bLength                18
 bDescriptorType         1
 bcdUSB               2.00
 bDeviceClass          239 Miscellaneous Device
 bDeviceSubClass         2 ?
 bDeviceProtocol         1 Interface Association
 bMaxPacketSize0        64
 idVendor           0x199e The Imaging Source Europe GmbH
 idProduct          0x8202
 bcdDevice            8.13
 iManufacturer           2 The Imaging Source Europe GmbH
 iProduct                1 DFx 21AUC03
 iSerial                 3 38800104
 bNumConfigurations      1
 Configuration Descriptor:
   bLength                 9
   bDescriptorType         2
   wTotalLength          349
   bNumInterfaces          2
   bConfigurationValue     1
   iConfiguration          0
   bmAttributes         0x80
     (Bus Powered)
   MaxPower              500mA
   Interface Association:
     bLength                 8
     bDescriptorType        11
     bFirstInterface         0
     bInterfaceCount         2
     bFunctionClass         14 Video
     bFunctionSubClass       3 Video Interface Collection
     bFunctionProtocol       0
     iFunction               0
   Interface Descriptor:
     bLength                 9
     bDescriptorType         4
     bInterfaceNumber        0
     bAlternateSetting       0
     bNumEndpoints           1
     bInterfaceClass        14 Video
     bInterfaceSubClass      1 Video Control
     bInterfaceProtocol      0
     iInterface              0
     VideoControl Interface Descriptor:
       bLength                13
       bDescriptorType        36
       bDescriptorSubtype      1 (HEADER)
       bcdUVC               1.00
       wTotalLength           78
       dwClockFrequency        6.000000MHz
       bInCollection           1
       baInterfaceNr( 0)       1
     VideoControl Interface Descriptor:
       bLength                18
       bDescriptorType        36
       bDescriptorSubtype      2 (INPUT_TERMINAL)
       bTerminalID             1
       wTerminalType      0x0201 Camera Sensor
       bAssocTerminal          0
       iTerminal               0
       wObjectiveFocalLengthMin      0
       wObjectiveFocalLengthMax      0
       wOcularFocalLength            0
       bControlSize                  3
       bmControls           0x0000001a
         Auto-Exposure Mode
         Exposure Time (Absolute)
         Exposure Time (Relative)
     VideoControl Interface Descriptor:
       bLength                12
       bDescriptorType        36
       bDescriptorSubtype      5 (PROCESSING_UNIT)
     Warning: Descriptor too short
       bUnitID                 3
       bSourceID               1
       wMaxMultiplier          0
       bControlSize            3
       bmControls     0x00000200
         Gain
       iProcessing             0
       bmVideoStandards     0x1a
         NTSC - 525/60
         SECAM - 625/50
         NTSC - 625/50
     VideoControl Interface Descriptor:
       bLength                26
       bDescriptorType        36
       bDescriptorSubtype      6 (EXTENSION_UNIT)
       bUnitID                 4
       guidExtensionCode         {2652215a-8932-5641-894a-5c557cdf9664}
       bNumControl             4
       bNrPins                 1
       baSourceID( 0)          3
       bControlSize            1
       bmControls( 0)       0x1f
       iExtension              0
     VideoControl Interface Descriptor:
       bLength                 9
       bDescriptorType        36
       bDescriptorSubtype      3 (OUTPUT_TERMINAL)
       bTerminalID             2
       wTerminalType      0x0101 USB Streaming
       bAssocTerminal          0
       bSourceID               4
       iTerminal               0
     Endpoint Descriptor:
       bLength                 7
       bDescriptorType         5
       bEndpointAddress     0x81  EP 1 IN
       bmAttributes            3
         Transfer Type            Interrupt
         Synch Type               None
         Usage Type               Data
       wMaxPacketSize     0x0008  1x 8 bytes
       bInterval               9
   Interface Descriptor:
     bLength                 9
     bDescriptorType         4
     bInterfaceNumber        1
     bAlternateSetting       0
     bNumEndpoints           1
     bInterfaceClass        14 Video
     bInterfaceSubClass      2 Video Streaming
     bInterfaceProtocol      0
     iInterface              0
     VideoStreaming Interface Descriptor:
       bLength                            15
       bDescriptorType                    36
       bDescriptorSubtype                  1 (INPUT_HEADER)
       bNumFormats                        2
       wTotalLength                      217
       bEndPointAddress                  130
       bmInfo                              0
       bTerminalLink                       2
       bStillCaptureMethod                 2
       bTriggerSupport                     1
       bTriggerUsage                       0
       bControlSize                        1
       bmaControls( 0)                    27
       bmaControls( 1)                    27
     VideoStreaming Interface Descriptor:
       bLength                            27
       bDescriptorType                    36
       bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
       bFormatIndex                        1
       bNumFrameDescriptors                2
       guidFormat
{59555932-0000-1000-8000-00aa00389b71}
       bBitsPerPixel                      16
       bDefaultFrameIndex                  1
       bAspectRatioX                       0
       bAspectRatioY                       0
       bmInterlaceFlags                 0x00
         Interlaced stream or variable: No
         Fields per frame: 1 fields
         Field 1 first: No
         Field pattern: Field 1 only
         bCopyProtect                      0
     VideoStreaming Interface Descriptor:
       bLength                            30
       bDescriptorType                    36
       bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
       bFrameIndex                         1
       bmCapabilities                   0x00
         Still image unsupported
       wWidth                            372
       wHeight                           480
       dwMinBitRate                838992000
       dwMaxBitRate                838992000
       dwMaxVideoFrameBufferSize      786432
       dwDefaultFrameInterval         333333
       bFrameIntervalType                  1
       dwFrameInterval( 0)            333333
     VideoStreaming Interface Descriptor:
       bLength                            30
       bDescriptorType                    36
       bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
       bFrameIndex                         2
       bmCapabilities                   0x00
         Still image unsupported
       wWidth                            320
       wHeight                           480
       dwMinBitRate                838992000
       dwMaxBitRate                838992000
       dwMaxVideoFrameBufferSize      786432
       dwDefaultFrameInterval         333333
       bFrameIntervalType                  1
       dwFrameInterval( 0)            333333
     VideoStreaming Interface Descriptor:
       bLength                            11
       bDescriptorType                    36
       bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
       bEndpointAddress                    0
       bNumImageSizePatterns               1
       wWidth( 0)                        744
       wHeight( 0)                       480
       bNumCompressionPatterns             1
       bCompression( 0)                    0
     VideoStreaming Interface Descriptor:
       bLength                            27
       bDescriptorType                    36
       bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
       bFormatIndex                        2
       bNumFrameDescriptors                2
       guidFormat
{55595659-0000-1000-8000-00aa00389b71}
       bBitsPerPixel                      16
       bDefaultFrameIndex                  1
       bAspectRatioX                       0
       bAspectRatioY                       0
       bmInterlaceFlags                 0x00
         Interlaced stream or variable: No
         Fields per frame: 1 fields
         Field 1 first: No
         Field pattern: Field 1 only
         bCopyProtect                      0
     VideoStreaming Interface Descriptor:
       bLength                            30
       bDescriptorType                    36
       bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
       bFrameIndex                         1
       bmCapabilities                   0x00
         Still image unsupported
       wWidth                            372
       wHeight                           480
       dwMinBitRate                838992000
       dwMaxBitRate                838992000
       dwMaxVideoFrameBufferSize      786432
       dwDefaultFrameInterval         333333
       bFrameIntervalType                  1
       dwFrameInterval( 0)            333333
     VideoStreaming Interface Descriptor:
       bLength                            30
       bDescriptorType                    36
       bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
       bFrameIndex                         2
       bmCapabilities                   0x00
         Still image unsupported
       wWidth                            320
       wHeight                           480
       dwMinBitRate                838992000
       dwMaxBitRate                838992000
       dwMaxVideoFrameBufferSize      786432
       dwDefaultFrameInterval         333333
       bFrameIntervalType                  1
       dwFrameInterval( 0)            333333
     VideoStreaming Interface Descriptor:
       bLength                            11
       bDescriptorType                    36
       bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
       bEndpointAddress                    0
       bNumImageSizePatterns               1
       wWidth( 0)                        744
       wHeight( 0)                       480
       bNumCompressionPatterns             1
       bCompression( 0)                    0
     VideoStreaming Interface Descriptor:
       bLength                             6
       bDescriptorType                    36
       bDescriptorSubtype                 13 (COLORFORMAT)
       bColorPrimaries                     0 (Unspecified)
       bTransferCharacteristics            0 (Unspecified)
       bMatrixCoefficients                 0 (Unspecified)
     Endpoint Descriptor:
       bLength                 7
       bDescriptorType         5
       bEndpointAddress     0x82  EP 2 IN
       bmAttributes            2
         Transfer Type            Bulk
         Synch Type               None
         Usage Type               Data
       wMaxPacketSize     0x0200  1x 512 bytes
       bInterval               1
Device Qualifier (for other device speed):
 bLength                10
 bDescriptorType         6
 bcdUSB               2.00
 bDeviceClass          239 Miscellaneous Device
 bDeviceSubClass         2 ?
 bDeviceProtocol         1 Interface Association
 bMaxPacketSize0        64
 bNumConfigurations      1
Device Status:     0x0000
 (Bus Powered)

This is what I get with lucview:

luvcview 0.2.4

SDL information:
 Video driver: x11
 A window manager is available
Device information:
 Device path:  /dev/video0
Stream settings:
 Frame format: UYVY
 Frame size:   372x480 (requested size 744x480 is not supported by device)
 Frame rate:   30/1 fps (requested frame rate 60 fps is not supported by device)



Thank you!


From laurent.pinchart at skynet.be  Sun Mar  8 22:40:50 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 8 Mar 2009 22:40:50 +0100
Subject: [Linux-uvc-devel] Strange issue with Hercules Dualpix Infinite
In-Reply-To: <200903022158.38436.legrain@crans.org>
References: <200903022158.38436.legrain@crans.org>
Message-ID: <200903082240.51331.laurent.pinchart@skynet.be>

Hi Gregory,

On Monday 02 March 2009 21:58:38 Gr?gory LEGRAIN wrote:
> Hi, and first of all, thank you for the great work you do for uvcvideo.

Thanks. Sorry for the late reply, this week was pretty busy.

> I am experiencing some troubles with my Hercules Dualpix Infinite,
> depending on the computer I use :
> I have two computers :
> 1/ one under ubuntu hardy (kernel 2.6.24.23)
> 2/ one under opensuse 11.1 (kernel 2.6.27.19-3.2)
>
> The webcam works well under ubuntu (which quite old), and does not work
> under suse: only one third of the image is visible under kopete and skype.
>
> What is strange is that it works with cheese (as reported in a previous
> threat [1]).
>
> You can find attached with the mail the output of the kernel
> (/var/log/messages) and from lsusb for both computer.
>
> Any insight on this problem ?

Could you test the same driver version (out of the linuxtv.org mercurial 
repository) on both distributions ? It would help finding out whether the 
problem comes from the distribution (Linux kernel and userspace applications) 
or the uvcvideo driver/v4l2 subsystem.

Best regards,

Laurent Pinchart



From laurent.pinchart at skynet.be  Sun Mar  8 23:20:54 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 8 Mar 2009 23:20:54 +0100
Subject: [Linux-uvc-devel] Wrong key mapped for the input device?
In-Reply-To: <8ceb98f20903060100h63d474fjf4c0eabf32fc01bc@mail.gmail.com>
References: <8ceb98f20903060100h63d474fjf4c0eabf32fc01bc@mail.gmail.com>
Message-ID: <200903082320.54636.laurent.pinchart@skynet.be>

Hi Filippo,

On Friday 06 March 2009 10:00:09 Filippo Argiolas wrote:
> Hi Laurent,
> I was looking at Cheese bugs and found this one about handling the
> webcam buttons to take photos
> http://bugzilla.gnome.org/show_bug.cgi?id=521551
>
> It seems the proper way for us would be to listen for XF86WebCam
> events but as far as I can tell uvcvideo is mapping the webcam button
> to the BTN_0 key.
> Why don't you use KEY_CAMERA? it seems more suited for this purpose, isn't
> it?

Because I had overlooked KEY_CAMERA when I implemented input events support. 
Shame on me :-/

> Bastien opened a bug at
> https://developer.berlios.de/bugs/?func=detailbug&bug_id=13723&group_id=568
>1 but it seems it went unnoticed.

I always forget to monitor the Berlios bug tracker. The preferred way of 
interaction is the linux-uvc-devel mailing list. I've now closed the bug 
tracker to make sure reports won't go unnoticed.

> I'm wondering if there is a particular reason for using BTN_0 since it
> seems a pretty common practice in webcam drivers (pwc,
> quickcam_messenger, konica, uvcvideo, all use that event).
>
> Anyway I've opened a bug at kernel bugzilla with a proposed patch.
> http://bugzilla.kernel.org/show_bug.cgi?id=12825

The original patch seems to have been written by Bastien (at least for the UVC 
video driver) and I'd like to give him credit for that. Bastien can you resend 
the patch by e-mail with your Signed-off-by ?

Best regards,

Laurent Pinchart



From fargiolas at gnome.org  Sun Mar  8 23:50:49 2009
From: fargiolas at gnome.org (Filippo Argiolas)
Date: Sun, 8 Mar 2009 23:50:49 +0100
Subject: [Linux-uvc-devel] Wrong key mapped for the input device?
In-Reply-To: <200903082320.54636.laurent.pinchart@skynet.be>
References: <8ceb98f20903060100h63d474fjf4c0eabf32fc01bc@mail.gmail.com>
	<200903082320.54636.laurent.pinchart@skynet.be>
Message-ID: <8ceb98f20903081550s30e12b3bx1bec2929d19e9cd1@mail.gmail.com>

On Sun, Mar 8, 2009 at 11:20 PM, Laurent Pinchart
<laurent.pinchart at skynet.be> wrote:
> The original patch seems to have been written by Bastien (at least for the UVC
> video driver) and I'd like to give him credit for that. Bastien can you resend
> the patch by e-mail with your Signed-off-by ?

Sure, the original patch should be from Bastien, I just extended the
same fix to the other webcam drivers ;-)

Best Regards,

Filippo


From smash0190spam at gmail.com  Mon Mar  9 15:47:27 2009
From: smash0190spam at gmail.com (Sebastian Scherer)
Date: Mon, 9 Mar 2009 10:47:27 -0400
Subject: [Linux-uvc-devel] Problem with DFM 21AUC03-ML
Message-ID: <336f6bae0903090747h460a966eld314570202dd1eb7@mail.gmail.com>

Hi,
After looking a little more carefully it might be that the resolution
problem is related to de-bayering.
I uploaded a sample image captured from the video:
http://www.frc.ri.cmu.edu/~basti/01-20090306125232-17.jpg

Does anybody have any insight what the problem could be?

I downloaded the latest drivers and used them on Ubuntu 8.10 but the
problem persists.
Thank you

Sebastian

> Hi,
> I have a problem with this camera.
> http://www.theimagingsource.com/en_US/products/oem-cameras/usb-cmos-color/dfm21auc03ml/
> It shows a picture but I cannot set the frame size and resolution of
> the camera. The camera supports
> 60 frames per second and a resolution of 744x480 YUV2. However I
> always get 372x480 and the colors are wrong.
>
> This is what dmesg reports:

> [179400.340015] usb 6-1: new high speed USB device using ehci_hcd and address 3
> [179400.777492] usb 6-1: configuration #1 chosen from 1 choice
> [179400.777790] uvcvideo: Found UVC 1.00 device DFx 21AUC03 (199e:8202)
> [179401.306390] input: DFx 21AUC03 as
> /devices/pci0000:00/0000:00:1a.7/usb6/6-1/6-1:1.0/input/input7
>
> This is whalt lsusb reports:
> Bus 006 Device 003: ID 199e:8202 The Imaging Source Europe GmbH
> Device Descriptor:
>  bLength                18
>  bDescriptorType         1
>  bcdUSB               2.00
>  bDeviceClass          239 Miscellaneous Device
>  bDeviceSubClass         2 ?
>  bDeviceProtocol         1 Interface Association
>  bMaxPacketSize0        64
>  idVendor           0x199e The Imaging Source Europe GmbH
>  idProduct          0x8202
>  bcdDevice            8.13
>  iManufacturer           2 The Imaging Source Europe GmbH
>  iProduct                1 DFx 21AUC03
>  iSerial                 3 38800104
>  bNumConfigurations      1
>  Configuration Descriptor:
>    bLength                 9
>    bDescriptorType         2
>    wTotalLength          349
>    bNumInterfaces          2
>    bConfigurationValue     1
>    iConfiguration          0
>    bmAttributes         0x80
>      (Bus Powered)
>    MaxPower              500mA
>    Interface Association:
>      bLength                 8
>      bDescriptorType        11
     bFirstInterface         0
     bInterfaceCount         2
     bFunctionClass         14 Video
     bFunctionSubClass       3 Video Interface Collection
     bFunctionProtocol       0
     iFunction               0
   Interface Descriptor:
     bLength                 9
     bDescriptorType         4
     bInterfaceNumber        0
     bAlternateSetting       0
     bNumEndpoints           1
     bInterfaceClass        14 Video
     bInterfaceSubClass      1 Video Control
     bInterfaceProtocol      0
     iInterface              0
     VideoControl Interface Descriptor:
       bLength                13
       bDescriptorType        36
       bDescriptorSubtype      1 (HEADER)
       bcdUVC               1.00
       wTotalLength           78
       dwClockFrequency        6.000000MHz
       bInCollection           1
       baInterfaceNr( 0)       1
     VideoControl Interface Descriptor:
       bLength                18
       bDescriptorType        36
       bDescriptorSubtype      2 (INPUT_TERMINAL)
       bTerminalID             1
       wTerminalType      0x0201 Camera Sensor
       bAssocTerminal          0
       iTerminal               0
       wObjectiveFocalLengthMin      0
       wObjectiveFocalLengthMax      0
       wOcularFocalLength            0
       bControlSize                  3
       bmControls           0x0000001a
         Auto-Exposure Mode
         Exposure Time (Absolute)
         Exposure Time (Relative)
     VideoControl Interface Descriptor:
       bLength                12
       bDescriptorType        36
       bDescriptorSubtype      5 (PROCESSING_UNIT)
     Warning: Descriptor too short
       bUnitID                 3
       bSourceID               1
       wMaxMultiplier          0
       bControlSize            3
       bmControls     0x00000200
         Gain
       iProcessing             0
       bmVideoStandards     0x1a
         NTSC - 525/60
         SECAM - 625/50
         NTSC - 625/50
     VideoControl Interface Descriptor:
       bLength                26
       bDescriptorType        36
       bDescriptorSubtype      6 (EXTENSION_UNIT)
       bUnitID                 4
       guidExtensionCode         {2652215a-8932-5641-894a-5c557cdf9664}
       bNumControl             4
       bNrPins                 1
       baSourceID( 0)          3
       bControlSize            1
       bmControls( 0)       0x1f
       iExtension              0
     VideoControl Interface Descriptor:
       bLength                 9
       bDescriptorType        36
       bDescriptorSubtype      3 (OUTPUT_TERMINAL)
       bTerminalID             2
       wTerminalType      0x0101 USB Streaming
       bAssocTerminal          0
       bSourceID               4
       iTerminal               0
     Endpoint Descriptor:
       bLength                 7
       bDescriptorType         5
       bEndpointAddress     0x81  EP 1 IN
       bmAttributes            3
         Transfer Type            Interrupt
         Synch Type               None
         Usage Type               Data
       wMaxPacketSize     0x0008  1x 8 bytes
       bInterval               9
   Interface Descriptor:
     bLength                 9
     bDescriptorType         4
     bInterfaceNumber        1
     bAlternateSetting       0
     bNumEndpoints           1
     bInterfaceClass        14 Video
     bInterfaceSubClass      2 Video Streaming
     bInterfaceProtocol      0
     iInterface              0
     VideoStreaming Interface Descriptor:
       bLength                            15
       bDescriptorType                    36
       bDescriptorSubtype                  1 (INPUT_HEADER)
       bNumFormats                        2
       wTotalLength                      217
       bEndPointAddress                  130
       bmInfo                              0
       bTerminalLink                       2
       bStillCaptureMethod                 2
       bTriggerSupport                     1
       bTriggerUsage                       0
       bControlSize                        1
       bmaControls( 0)                    27
       bmaControls( 1)                    27
     VideoStreaming Interface Descriptor:
       bLength                            27
       bDescriptorType                    36
       bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
       bFormatIndex                        1
       bNumFrameDescriptors                2
       guidFormat
{59555932-0000-1000-8000-00aa00389b71}
       bBitsPerPixel                      16
       bDefaultFrameIndex                  1
       bAspectRatioX                       0
       bAspectRatioY                       0
       bmInterlaceFlags                 0x00
         Interlaced stream or variable: No
         Fields per frame: 1 fields
         Field 1 first: No
         Field pattern: Field 1 only
         bCopyProtect                      0
     VideoStreaming Interface Descriptor:
       bLength                            30
       bDescriptorType                    36
       bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
       bFrameIndex                         1
       bmCapabilities                   0x00
         Still image unsupported
       wWidth                            372
       wHeight                           480
       dwMinBitRate                838992000
       dwMaxBitRate                838992000
       dwMaxVideoFrameBufferSize      786432
       dwDefaultFrameInterval         333333
       bFrameIntervalType                  1
       dwFrameInterval( 0)            333333
     VideoStreaming Interface Descriptor:
       bLength                            30
       bDescriptorType                    36
       bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
       bFrameIndex                         2
       bmCapabilities                   0x00
         Still image unsupported
       wWidth                            320
       wHeight                           480
       dwMinBitRate                838992000
       dwMaxBitRate                838992000
       dwMaxVideoFrameBufferSize      786432
       dwDefaultFrameInterval         333333
       bFrameIntervalType                  1
       dwFrameInterval( 0)            333333
     VideoStreaming Interface Descriptor:
       bLength                            11
       bDescriptorType                    36
       bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
       bEndpointAddress                    0
       bNumImageSizePatterns               1
       wWidth( 0)                        744
       wHeight( 0)                       480
       bNumCompressionPatterns             1
       bCompression( 0)                    0
     VideoStreaming Interface Descriptor:
       bLength                            27
       bDescriptorType                    36
       bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
       bFormatIndex                        2
       bNumFrameDescriptors                2
       guidFormat
{55595659-0000-1000-8000-00aa00389b71}
       bBitsPerPixel                      16
       bDefaultFrameIndex                  1
       bAspectRatioX                       0
       bAspectRatioY                       0
       bmInterlaceFlags                 0x00
         Interlaced stream or variable: No
         Fields per frame: 1 fields
         Field 1 first: No
         Field pattern: Field 1 only
         bCopyProtect                      0
     VideoStreaming Interface Descriptor:
       bLength                            30
       bDescriptorType                    36
       bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
       bFrameIndex                         1
       bmCapabilities                   0x00
         Still image unsupported
       wWidth                            372
       wHeight                           480
       dwMinBitRate                838992000
       dwMaxBitRate                838992000
       dwMaxVideoFrameBufferSize      786432
       dwDefaultFrameInterval         333333
       bFrameIntervalType                  1
       dwFrameInterval( 0)            333333
     VideoStreaming Interface Descriptor:
       bLength                            30
       bDescriptorType                    36
       bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
       bFrameIndex                         2
       bmCapabilities                   0x00
         Still image unsupported
       wWidth                            320
       wHeight                           480
       dwMinBitRate                838992000
       dwMaxBitRate                838992000
       dwMaxVideoFrameBufferSize      786432
       dwDefaultFrameInterval         333333
       bFrameIntervalType                  1
       dwFrameInterval( 0)            333333
     VideoStreaming Interface Descriptor:
       bLength                            11
       bDescriptorType                    36
       bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
       bEndpointAddress                    0
       bNumImageSizePatterns               1
       wWidth( 0)                        744
       wHeight( 0)                       480
       bNumCompressionPatterns             1
       bCompression( 0)                    0
     VideoStreaming Interface Descriptor:
       bLength                             6
       bDescriptorType                    36
       bDescriptorSubtype                 13 (COLORFORMAT)
       bColorPrimaries                     0 (Unspecified)
       bTransferCharacteristics            0 (Unspecified)
       bMatrixCoefficients                 0 (Unspecified)
     Endpoint Descriptor:
       bLength                 7
       bDescriptorType         5
       bEndpointAddress     0x82  EP 2 IN
       bmAttributes            2
         Transfer Type            Bulk
         Synch Type               None
         Usage Type               Data
       wMaxPacketSize     0x0200  1x 512 bytes
       bInterval               1
Device Qualifier (for other device speed):
 bLength                10
 bDescriptorType         6
 bcdUSB               2.00
 bDeviceClass          239 Miscellaneous Device
 bDeviceSubClass         2 ?
 bDeviceProtocol         1 Interface Association
 bMaxPacketSize0        64
 bNumConfigurations      1
Device Status:     0x0000
 (Bus Powered)

This is what I get with lucview:

luvcview 0.2.4

SDL information:
 Video driver: x11
 A window manager is available
Device information:
 Device path:  /dev/video0
Stream settings:
 Frame format: UYVY
 Frame size:   372x480 (requested size 744x480 is not supported by device)
 Frame rate:   30/1 fps (requested frame rate 60 fps is not supported by device)



Thank you!


From pj.assis at gmail.com  Mon Mar  9 16:35:55 2009
From: pj.assis at gmail.com (Paulo Assis)
Date: Mon, 09 Mar 2009 15:35:55 +0000
Subject: [Linux-uvc-devel] Problem with DFM 21AUC03-ML
In-Reply-To: <336f6bae0903090747h460a966eld314570202dd1eb7@mail.gmail.com>
References: <336f6bae0903090747h460a966eld314570202dd1eb7@mail.gmail.com>
Message-ID: <49B5375B.7010009@gmail.com>

Sebastian Hi,

From pj.assis at gmail.com  Mon Mar  9 16:41:19 2009
From: pj.assis at gmail.com (Paulo Assis)
Date: Mon, 09 Mar 2009 15:41:19 +0000
Subject: [Linux-uvc-devel] Problem with DFM 21AUC03-ML
In-Reply-To: <336f6bae0903090747h460a966eld314570202dd1eb7@mail.gmail.com>
References: <336f6bae0903090747h460a966eld314570202dd1eb7@mail.gmail.com>
Message-ID: <49B5389F.6020204@gmail.com>

Sebastien, I've taken another look at luvcview output and it reports
UYVY not YUYV, luvcview doesn't support this format I believe,
you should try the latest version from guvcview (1.0.2), and see if
outputs the frame correctly.

Best regards,
Paulo

Sebastian Scherer escreveu:
> Hi,
> After looking a little more carefully it might be that the resolution
> problem is related to de-bayering.
> I uploaded a sample image captured from the video:
> http://www.frc.ri.cmu.edu/~basti/01-20090306125232-17.jpg
>
> Does anybody have any insight what the problem could be?
>
> I downloaded the latest drivers and used them on Ubuntu 8.10 but the
> problem persists.
> Thank you
>
> Sebastian
>
>   
>> Hi,
>> I have a problem with this camera.
>> http://www.theimagingsource.com/en_US/products/oem-cameras/usb-cmos-color/dfm21auc03ml/
>> It shows a picture but I cannot set the frame size and resolution of
>> the camera. The camera supports
>> 60 frames per second and a resolution of 744x480 YUV2. However I
>> always get 372x480 and the colors are wrong.
>>
>> This is what dmesg reports:
>>     
>
>   
>> [179400.340015] usb 6-1: new high speed USB device using ehci_hcd and address 3
>> [179400.777492] usb 6-1: configuration #1 chosen from 1 choice
>> [179400.777790] uvcvideo: Found UVC 1.00 device DFx 21AUC03 (199e:8202)
>> [179401.306390] input: DFx 21AUC03 as
>> /devices/pci0000:00/0000:00:1a.7/usb6/6-1/6-1:1.0/input/input7
>>
>> This is whalt lsusb reports:
>> Bus 006 Device 003: ID 199e:8202 The Imaging Source Europe GmbH
>> Device Descriptor:
>>  bLength                18
>>  bDescriptorType         1
>>  bcdUSB               2.00
>>  bDeviceClass          239 Miscellaneous Device
>>  bDeviceSubClass         2 ?
>>  bDeviceProtocol         1 Interface Association
>>  bMaxPacketSize0        64
>>  idVendor           0x199e The Imaging Source Europe GmbH
>>  idProduct          0x8202
>>  bcdDevice            8.13
>>  iManufacturer           2 The Imaging Source Europe GmbH
>>  iProduct                1 DFx 21AUC03
>>  iSerial                 3 38800104
>>  bNumConfigurations      1
>>  Configuration Descriptor:
>>    bLength                 9
>>    bDescriptorType         2
>>    wTotalLength          349
>>    bNumInterfaces          2
>>    bConfigurationValue     1
>>    iConfiguration          0
>>    bmAttributes         0x80
>>      (Bus Powered)
>>    MaxPower              500mA
>>    Interface Association:
>>      bLength                 8
>>      bDescriptorType        11
>>     
>      bFirstInterface         0
>      bInterfaceCount         2
>      bFunctionClass         14 Video
>      bFunctionSubClass       3 Video Interface Collection
>      bFunctionProtocol       0
>      iFunction               0
>    Interface Descriptor:
>      bLength                 9
>      bDescriptorType         4
>      bInterfaceNumber        0
>      bAlternateSetting       0
>      bNumEndpoints           1
>      bInterfaceClass        14 Video
>      bInterfaceSubClass      1 Video Control
>      bInterfaceProtocol      0
>      iInterface              0
>      VideoControl Interface Descriptor:
>        bLength                13
>        bDescriptorType        36
>        bDescriptorSubtype      1 (HEADER)
>        bcdUVC               1.00
>        wTotalLength           78
>        dwClockFrequency        6.000000MHz
>        bInCollection           1
>        baInterfaceNr( 0)       1
>      VideoControl Interface Descriptor:
>        bLength                18
>        bDescriptorType        36
>        bDescriptorSubtype      2 (INPUT_TERMINAL)
>        bTerminalID             1
>        wTerminalType      0x0201 Camera Sensor
>        bAssocTerminal          0
>        iTerminal               0
>        wObjectiveFocalLengthMin      0
>        wObjectiveFocalLengthMax      0
>        wOcularFocalLength            0
>        bControlSize                  3
>        bmControls           0x0000001a
>          Auto-Exposure Mode
>          Exposure Time (Absolute)
>          Exposure Time (Relative)
>      VideoControl Interface Descriptor:
>        bLength                12
>        bDescriptorType        36
>        bDescriptorSubtype      5 (PROCESSING_UNIT)
>      Warning: Descriptor too short
>        bUnitID                 3
>        bSourceID               1
>        wMaxMultiplier          0
>        bControlSize            3
>        bmControls     0x00000200
>          Gain
>        iProcessing             0
>        bmVideoStandards     0x1a
>          NTSC - 525/60
>          SECAM - 625/50
>          NTSC - 625/50
>      VideoControl Interface Descriptor:
>        bLength                26
>        bDescriptorType        36
>        bDescriptorSubtype      6 (EXTENSION_UNIT)
>        bUnitID                 4
>        guidExtensionCode         {2652215a-8932-5641-894a-5c557cdf9664}
>        bNumControl             4
>        bNrPins                 1
>        baSourceID( 0)          3
>        bControlSize            1
>        bmControls( 0)       0x1f
>        iExtension              0
>      VideoControl Interface Descriptor:
>        bLength                 9
>        bDescriptorType        36
>        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
>        bTerminalID             2
>        wTerminalType      0x0101 USB Streaming
>        bAssocTerminal          0
>        bSourceID               4
>        iTerminal               0
>      Endpoint Descriptor:
>        bLength                 7
>        bDescriptorType         5
>        bEndpointAddress     0x81  EP 1 IN
>        bmAttributes            3
>          Transfer Type            Interrupt
>          Synch Type               None
>          Usage Type               Data
>        wMaxPacketSize     0x0008  1x 8 bytes
>        bInterval               9
>    Interface Descriptor:
>      bLength                 9
>      bDescriptorType         4
>      bInterfaceNumber        1
>      bAlternateSetting       0
>      bNumEndpoints           1
>      bInterfaceClass        14 Video
>      bInterfaceSubClass      2 Video Streaming
>      bInterfaceProtocol      0
>      iInterface              0
>      VideoStreaming Interface Descriptor:
>        bLength                            15
>        bDescriptorType                    36
>        bDescriptorSubtype                  1 (INPUT_HEADER)
>        bNumFormats                        2
>        wTotalLength                      217
>        bEndPointAddress                  130
>        bmInfo                              0
>        bTerminalLink                       2
>        bStillCaptureMethod                 2
>        bTriggerSupport                     1
>        bTriggerUsage                       0
>        bControlSize                        1
>        bmaControls( 0)                    27
>        bmaControls( 1)                    27
>      VideoStreaming Interface Descriptor:
>        bLength                            27
>        bDescriptorType                    36
>        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
>        bFormatIndex                        1
>        bNumFrameDescriptors                2
>        guidFormat
> {59555932-0000-1000-8000-00aa00389b71}
>        bBitsPerPixel                      16
>        bDefaultFrameIndex                  1
>        bAspectRatioX                       0
>        bAspectRatioY                       0
>        bmInterlaceFlags                 0x00
>          Interlaced stream or variable: No
>          Fields per frame: 1 fields
>          Field 1 first: No
>          Field pattern: Field 1 only
>          bCopyProtect                      0
>      VideoStreaming Interface Descriptor:
>        bLength                            30
>        bDescriptorType                    36
>        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>        bFrameIndex                         1
>        bmCapabilities                   0x00
>          Still image unsupported
>        wWidth                            372
>        wHeight                           480
>        dwMinBitRate                838992000
>        dwMaxBitRate                838992000
>        dwMaxVideoFrameBufferSize      786432
>        dwDefaultFrameInterval         333333
>        bFrameIntervalType                  1
>        dwFrameInterval( 0)            333333
>      VideoStreaming Interface Descriptor:
>        bLength                            30
>        bDescriptorType                    36
>        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>        bFrameIndex                         2
>        bmCapabilities                   0x00
>          Still image unsupported
>        wWidth                            320
>        wHeight                           480
>        dwMinBitRate                838992000
>        dwMaxBitRate                838992000
>        dwMaxVideoFrameBufferSize      786432
>        dwDefaultFrameInterval         333333
>        bFrameIntervalType                  1
>        dwFrameInterval( 0)            333333
>      VideoStreaming Interface Descriptor:
>        bLength                            11
>        bDescriptorType                    36
>        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
>        bEndpointAddress                    0
>        bNumImageSizePatterns               1
>        wWidth( 0)                        744
>        wHeight( 0)                       480
>        bNumCompressionPatterns             1
>        bCompression( 0)                    0
>      VideoStreaming Interface Descriptor:
>        bLength                            27
>        bDescriptorType                    36
>        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
>        bFormatIndex                        2
>        bNumFrameDescriptors                2
>        guidFormat
> {55595659-0000-1000-8000-00aa00389b71}
>        bBitsPerPixel                      16
>        bDefaultFrameIndex                  1
>        bAspectRatioX                       0
>        bAspectRatioY                       0
>        bmInterlaceFlags                 0x00
>          Interlaced stream or variable: No
>          Fields per frame: 1 fields
>          Field 1 first: No
>          Field pattern: Field 1 only
>          bCopyProtect                      0
>      VideoStreaming Interface Descriptor:
>        bLength                            30
>        bDescriptorType                    36
>        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>        bFrameIndex                         1
>        bmCapabilities                   0x00
>          Still image unsupported
>        wWidth                            372
>        wHeight                           480
>        dwMinBitRate                838992000
>        dwMaxBitRate                838992000
>        dwMaxVideoFrameBufferSize      786432
>        dwDefaultFrameInterval         333333
>        bFrameIntervalType                  1
>        dwFrameInterval( 0)            333333
>      VideoStreaming Interface Descriptor:
>        bLength                            30
>        bDescriptorType                    36
>        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>        bFrameIndex                         2
>        bmCapabilities                   0x00
>          Still image unsupported
>        wWidth                            320
>        wHeight                           480
>        dwMinBitRate                838992000
>        dwMaxBitRate                838992000
>        dwMaxVideoFrameBufferSize      786432
>        dwDefaultFrameInterval         333333
>        bFrameIntervalType                  1
>        dwFrameInterval( 0)            333333
>      VideoStreaming Interface Descriptor:
>        bLength                            11
>        bDescriptorType                    36
>        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
>        bEndpointAddress                    0
>        bNumImageSizePatterns               1
>        wWidth( 0)                        744
>        wHeight( 0)                       480
>        bNumCompressionPatterns             1
>        bCompression( 0)                    0
>      VideoStreaming Interface Descriptor:
>        bLength                             6
>        bDescriptorType                    36
>        bDescriptorSubtype                 13 (COLORFORMAT)
>        bColorPrimaries                     0 (Unspecified)
>        bTransferCharacteristics            0 (Unspecified)
>        bMatrixCoefficients                 0 (Unspecified)
>      Endpoint Descriptor:
>        bLength                 7
>        bDescriptorType         5
>        bEndpointAddress     0x82  EP 2 IN
>        bmAttributes            2
>          Transfer Type            Bulk
>          Synch Type               None
>          Usage Type               Data
>        wMaxPacketSize     0x0200  1x 512 bytes
>        bInterval               1
> Device Qualifier (for other device speed):
>  bLength                10
>  bDescriptorType         6
>  bcdUSB               2.00
>  bDeviceClass          239 Miscellaneous Device
>  bDeviceSubClass         2 ?
>  bDeviceProtocol         1 Interface Association
>  bMaxPacketSize0        64
>  bNumConfigurations      1
> Device Status:     0x0000
>  (Bus Powered)
>
> This is what I get with lucview:
>
> luvcview 0.2.4
>
> SDL information:
>  Video driver: x11
>  A window manager is available
> Device information:
>  Device path:  /dev/video0
> Stream settings:
>  Frame format: UYVY
>  Frame size:   372x480 (requested size 744x480 is not supported by device)
>  Frame rate:   30/1 fps (requested frame rate 60 fps is not supported by device)
>
>
>
> Thank you!
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>   



From smash0190spam at gmail.com  Mon Mar  9 16:52:47 2009
From: smash0190spam at gmail.com (Sebastian Scherer)
Date: Mon, 9 Mar 2009 11:52:47 -0400
Subject: [Linux-uvc-devel] Problem with DFM 21AUC03-ML
In-Reply-To: <49B5389F.6020204@gmail.com>
References: <336f6bae0903090747h460a966eld314570202dd1eb7@mail.gmail.com>
	<49B5389F.6020204@gmail.com>
Message-ID: <336f6bae0903090852v7db3598fh98b27ae6ca5472c8@mail.gmail.com>

Hi,
Thank you for your replies. I tried guvcview with both formats but the
output seems to be the same. It would be fine with me to manually
correct the output.

However I would really like to capture the full resolution images.
How can I use capture still images?

Also the 372 does not really make sense because this should not be a
frame size that is supported by the camera. Maybe halving the size
messes up the encoding?
Thank you


Sebastian


2009/3/9 Paulo Assis <pj.assis at gmail.com>:
> Sebastien, I've taken another look at luvcview output and it reports
> UYVY not YUYV, luvcview doesn't support this format I believe,
> you should try the latest version from guvcview (1.0.2), and see if
> outputs the frame correctly.
>
> Best regards,
> Paulo
>
> Sebastian Scherer escreveu:
>> Hi,
>> After looking a little more carefully it might be that the resolution
>> problem is related to de-bayering.
>> I uploaded a sample image captured from the video:
>> http://www.frc.ri.cmu.edu/~basti/01-20090306125232-17.jpg
>>
>> Does anybody have any insight what the problem could be?
>>
>> I downloaded the latest drivers and used them on Ubuntu 8.10 but the
>> problem persists.
>> Thank you
>>
>> Sebastian
>>
>>
>>> Hi,
>>> I have a problem with this camera.
>>> http://www.theimagingsource.com/en_US/products/oem-cameras/usb-cmos-color/dfm21auc03ml/
>>> It shows a picture but I cannot set the frame size and resolution of
>>> the camera. The camera supports
>>> 60 frames per second and a resolution of 744x480 YUV2. However I
>>> always get 372x480 and the colors are wrong.
>>>
>>> This is what dmesg reports:
>>>
>>
>>
>>> [179400.340015] usb 6-1: new high speed USB device using ehci_hcd and address 3
>>> [179400.777492] usb 6-1: configuration #1 chosen from 1 choice
>>> [179400.777790] uvcvideo: Found UVC 1.00 device DFx 21AUC03 (199e:8202)
>>> [179401.306390] input: DFx 21AUC03 as
>>> /devices/pci0000:00/0000:00:1a.7/usb6/6-1/6-1:1.0/input/input7
>>>
>>> This is whalt lsusb reports:
>>> Bus 006 Device 003: ID 199e:8202 The Imaging Source Europe GmbH
>>> Device Descriptor:
>>> ?bLength ? ? ? ? ? ? ? ?18
>>> ?bDescriptorType ? ? ? ? 1
>>> ?bcdUSB ? ? ? ? ? ? ? 2.00
>>> ?bDeviceClass ? ? ? ? ?239 Miscellaneous Device
>>> ?bDeviceSubClass ? ? ? ? 2 ?
>>> ?bDeviceProtocol ? ? ? ? 1 Interface Association
>>> ?bMaxPacketSize0 ? ? ? ?64
>>> ?idVendor ? ? ? ? ? 0x199e The Imaging Source Europe GmbH
>>> ?idProduct ? ? ? ? ?0x8202
>>> ?bcdDevice ? ? ? ? ? ?8.13
>>> ?iManufacturer ? ? ? ? ? 2 The Imaging Source Europe GmbH
>>> ?iProduct ? ? ? ? ? ? ? ?1 DFx 21AUC03
>>> ?iSerial ? ? ? ? ? ? ? ? 3 38800104
>>> ?bNumConfigurations ? ? ?1
>>> ?Configuration Descriptor:
>>> ? ?bLength ? ? ? ? ? ? ? ? 9
>>> ? ?bDescriptorType ? ? ? ? 2
>>> ? ?wTotalLength ? ? ? ? ?349
>>> ? ?bNumInterfaces ? ? ? ? ?2
>>> ? ?bConfigurationValue ? ? 1
>>> ? ?iConfiguration ? ? ? ? ?0
>>> ? ?bmAttributes ? ? ? ? 0x80
>>> ? ? ?(Bus Powered)
>>> ? ?MaxPower ? ? ? ? ? ? ?500mA
>>> ? ?Interface Association:
>>> ? ? ?bLength ? ? ? ? ? ? ? ? 8
>>> ? ? ?bDescriptorType ? ? ? ?11
>>>
>> ? ? ?bFirstInterface ? ? ? ? 0
>> ? ? ?bInterfaceCount ? ? ? ? 2
>> ? ? ?bFunctionClass ? ? ? ? 14 Video
>> ? ? ?bFunctionSubClass ? ? ? 3 Video Interface Collection
>> ? ? ?bFunctionProtocol ? ? ? 0
>> ? ? ?iFunction ? ? ? ? ? ? ? 0
>> ? ?Interface Descriptor:
>> ? ? ?bLength ? ? ? ? ? ? ? ? 9
>> ? ? ?bDescriptorType ? ? ? ? 4
>> ? ? ?bInterfaceNumber ? ? ? ?0
>> ? ? ?bAlternateSetting ? ? ? 0
>> ? ? ?bNumEndpoints ? ? ? ? ? 1
>> ? ? ?bInterfaceClass ? ? ? ?14 Video
>> ? ? ?bInterfaceSubClass ? ? ?1 Video Control
>> ? ? ?bInterfaceProtocol ? ? ?0
>> ? ? ?iInterface ? ? ? ? ? ? ?0
>> ? ? ?VideoControl Interface Descriptor:
>> ? ? ? ?bLength ? ? ? ? ? ? ? ?13
>> ? ? ? ?bDescriptorType ? ? ? ?36
>> ? ? ? ?bDescriptorSubtype ? ? ?1 (HEADER)
>> ? ? ? ?bcdUVC ? ? ? ? ? ? ? 1.00
>> ? ? ? ?wTotalLength ? ? ? ? ? 78
>> ? ? ? ?dwClockFrequency ? ? ? ?6.000000MHz
>> ? ? ? ?bInCollection ? ? ? ? ? 1
>> ? ? ? ?baInterfaceNr( 0) ? ? ? 1
>> ? ? ?VideoControl Interface Descriptor:
>> ? ? ? ?bLength ? ? ? ? ? ? ? ?18
>> ? ? ? ?bDescriptorType ? ? ? ?36
>> ? ? ? ?bDescriptorSubtype ? ? ?2 (INPUT_TERMINAL)
>> ? ? ? ?bTerminalID ? ? ? ? ? ? 1
>> ? ? ? ?wTerminalType ? ? ?0x0201 Camera Sensor
>> ? ? ? ?bAssocTerminal ? ? ? ? ?0
>> ? ? ? ?iTerminal ? ? ? ? ? ? ? 0
>> ? ? ? ?wObjectiveFocalLengthMin ? ? ?0
>> ? ? ? ?wObjectiveFocalLengthMax ? ? ?0
>> ? ? ? ?wOcularFocalLength ? ? ? ? ? ?0
>> ? ? ? ?bControlSize ? ? ? ? ? ? ? ? ?3
>> ? ? ? ?bmControls ? ? ? ? ? 0x0000001a
>> ? ? ? ? ?Auto-Exposure Mode
>> ? ? ? ? ?Exposure Time (Absolute)
>> ? ? ? ? ?Exposure Time (Relative)
>> ? ? ?VideoControl Interface Descriptor:
>> ? ? ? ?bLength ? ? ? ? ? ? ? ?12
>> ? ? ? ?bDescriptorType ? ? ? ?36
>> ? ? ? ?bDescriptorSubtype ? ? ?5 (PROCESSING_UNIT)
>> ? ? ?Warning: Descriptor too short
>> ? ? ? ?bUnitID ? ? ? ? ? ? ? ? 3
>> ? ? ? ?bSourceID ? ? ? ? ? ? ? 1
>> ? ? ? ?wMaxMultiplier ? ? ? ? ?0
>> ? ? ? ?bControlSize ? ? ? ? ? ?3
>> ? ? ? ?bmControls ? ? 0x00000200
>> ? ? ? ? ?Gain
>> ? ? ? ?iProcessing ? ? ? ? ? ? 0
>> ? ? ? ?bmVideoStandards ? ? 0x1a
>> ? ? ? ? ?NTSC - 525/60
>> ? ? ? ? ?SECAM - 625/50
>> ? ? ? ? ?NTSC - 625/50
>> ? ? ?VideoControl Interface Descriptor:
>> ? ? ? ?bLength ? ? ? ? ? ? ? ?26
>> ? ? ? ?bDescriptorType ? ? ? ?36
>> ? ? ? ?bDescriptorSubtype ? ? ?6 (EXTENSION_UNIT)
>> ? ? ? ?bUnitID ? ? ? ? ? ? ? ? 4
>> ? ? ? ?guidExtensionCode ? ? ? ? {2652215a-8932-5641-894a-5c557cdf9664}
>> ? ? ? ?bNumControl ? ? ? ? ? ? 4
>> ? ? ? ?bNrPins ? ? ? ? ? ? ? ? 1
>> ? ? ? ?baSourceID( 0) ? ? ? ? ?3
>> ? ? ? ?bControlSize ? ? ? ? ? ?1
>> ? ? ? ?bmControls( 0) ? ? ? 0x1f
>> ? ? ? ?iExtension ? ? ? ? ? ? ?0
>> ? ? ?VideoControl Interface Descriptor:
>> ? ? ? ?bLength ? ? ? ? ? ? ? ? 9
>> ? ? ? ?bDescriptorType ? ? ? ?36
>> ? ? ? ?bDescriptorSubtype ? ? ?3 (OUTPUT_TERMINAL)
>> ? ? ? ?bTerminalID ? ? ? ? ? ? 2
>> ? ? ? ?wTerminalType ? ? ?0x0101 USB Streaming
>> ? ? ? ?bAssocTerminal ? ? ? ? ?0
>> ? ? ? ?bSourceID ? ? ? ? ? ? ? 4
>> ? ? ? ?iTerminal ? ? ? ? ? ? ? 0
>> ? ? ?Endpoint Descriptor:
>> ? ? ? ?bLength ? ? ? ? ? ? ? ? 7
>> ? ? ? ?bDescriptorType ? ? ? ? 5
>> ? ? ? ?bEndpointAddress ? ? 0x81 ?EP 1 IN
>> ? ? ? ?bmAttributes ? ? ? ? ? ?3
>> ? ? ? ? ?Transfer Type ? ? ? ? ? ?Interrupt
>> ? ? ? ? ?Synch Type ? ? ? ? ? ? ? None
>> ? ? ? ? ?Usage Type ? ? ? ? ? ? ? Data
>> ? ? ? ?wMaxPacketSize ? ? 0x0008 ?1x 8 bytes
>> ? ? ? ?bInterval ? ? ? ? ? ? ? 9
>> ? ?Interface Descriptor:
>> ? ? ?bLength ? ? ? ? ? ? ? ? 9
>> ? ? ?bDescriptorType ? ? ? ? 4
>> ? ? ?bInterfaceNumber ? ? ? ?1
>> ? ? ?bAlternateSetting ? ? ? 0
>> ? ? ?bNumEndpoints ? ? ? ? ? 1
>> ? ? ?bInterfaceClass ? ? ? ?14 Video
>> ? ? ?bInterfaceSubClass ? ? ?2 Video Streaming
>> ? ? ?bInterfaceProtocol ? ? ?0
>> ? ? ?iInterface ? ? ? ? ? ? ?0
>> ? ? ?VideoStreaming Interface Descriptor:
>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?15
>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?1 (INPUT_HEADER)
>> ? ? ? ?bNumFormats ? ? ? ? ? ? ? ? ? ? ? ?2
>> ? ? ? ?wTotalLength ? ? ? ? ? ? ? ? ? ? ?217
>> ? ? ? ?bEndPointAddress ? ? ? ? ? ? ? ? ?130
>> ? ? ? ?bmInfo ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?0
>> ? ? ? ?bTerminalLink ? ? ? ? ? ? ? ? ? ? ? 2
>> ? ? ? ?bStillCaptureMethod ? ? ? ? ? ? ? ? 2
>> ? ? ? ?bTriggerSupport ? ? ? ? ? ? ? ? ? ? 1
>> ? ? ? ?bTriggerUsage ? ? ? ? ? ? ? ? ? ? ? 0
>> ? ? ? ?bControlSize ? ? ? ? ? ? ? ? ? ? ? ?1
>> ? ? ? ?bmaControls( 0) ? ? ? ? ? ? ? ? ? ?27
>> ? ? ? ?bmaControls( 1) ? ? ? ? ? ? ? ? ? ?27
>> ? ? ?VideoStreaming Interface Descriptor:
>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?27
>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?4 (FORMAT_UNCOMPRESSED)
>> ? ? ? ?bFormatIndex ? ? ? ? ? ? ? ? ? ? ? ?1
>> ? ? ? ?bNumFrameDescriptors ? ? ? ? ? ? ? ?2
>> ? ? ? ?guidFormat
>> {59555932-0000-1000-8000-00aa00389b71}
>> ? ? ? ?bBitsPerPixel ? ? ? ? ? ? ? ? ? ? ?16
>> ? ? ? ?bDefaultFrameIndex ? ? ? ? ? ? ? ? ?1
>> ? ? ? ?bAspectRatioX ? ? ? ? ? ? ? ? ? ? ? 0
>> ? ? ? ?bAspectRatioY ? ? ? ? ? ? ? ? ? ? ? 0
>> ? ? ? ?bmInterlaceFlags ? ? ? ? ? ? ? ? 0x00
>> ? ? ? ? ?Interlaced stream or variable: No
>> ? ? ? ? ?Fields per frame: 1 fields
>> ? ? ? ? ?Field 1 first: No
>> ? ? ? ? ?Field pattern: Field 1 only
>> ? ? ? ? ?bCopyProtect ? ? ? ? ? ? ? ? ? ? ?0
>> ? ? ?VideoStreaming Interface Descriptor:
>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?30
>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?5 (FRAME_UNCOMPRESSED)
>> ? ? ? ?bFrameIndex ? ? ? ? ? ? ? ? ? ? ? ? 1
>> ? ? ? ?bmCapabilities ? ? ? ? ? ? ? ? ? 0x00
>> ? ? ? ? ?Still image unsupported
>> ? ? ? ?wWidth ? ? ? ? ? ? ? ? ? ? ? ? ? ?372
>> ? ? ? ?wHeight ? ? ? ? ? ? ? ? ? ? ? ? ? 480
>> ? ? ? ?dwMinBitRate ? ? ? ? ? ? ? ?838992000
>> ? ? ? ?dwMaxBitRate ? ? ? ? ? ? ? ?838992000
>> ? ? ? ?dwMaxVideoFrameBufferSize ? ? ?786432
>> ? ? ? ?dwDefaultFrameInterval ? ? ? ? 333333
>> ? ? ? ?bFrameIntervalType ? ? ? ? ? ? ? ? ?1
>> ? ? ? ?dwFrameInterval( 0) ? ? ? ? ? ?333333
>> ? ? ?VideoStreaming Interface Descriptor:
>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?30
>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?5 (FRAME_UNCOMPRESSED)
>> ? ? ? ?bFrameIndex ? ? ? ? ? ? ? ? ? ? ? ? 2
>> ? ? ? ?bmCapabilities ? ? ? ? ? ? ? ? ? 0x00
>> ? ? ? ? ?Still image unsupported
>> ? ? ? ?wWidth ? ? ? ? ? ? ? ? ? ? ? ? ? ?320
>> ? ? ? ?wHeight ? ? ? ? ? ? ? ? ? ? ? ? ? 480
>> ? ? ? ?dwMinBitRate ? ? ? ? ? ? ? ?838992000
>> ? ? ? ?dwMaxBitRate ? ? ? ? ? ? ? ?838992000
>> ? ? ? ?dwMaxVideoFrameBufferSize ? ? ?786432
>> ? ? ? ?dwDefaultFrameInterval ? ? ? ? 333333
>> ? ? ? ?bFrameIntervalType ? ? ? ? ? ? ? ? ?1
>> ? ? ? ?dwFrameInterval( 0) ? ? ? ? ? ?333333
>> ? ? ?VideoStreaming Interface Descriptor:
>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?11
>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?3 (STILL_IMAGE_FRAME)
>> ? ? ? ?bEndpointAddress ? ? ? ? ? ? ? ? ? ?0
>> ? ? ? ?bNumImageSizePatterns ? ? ? ? ? ? ? 1
>> ? ? ? ?wWidth( 0) ? ? ? ? ? ? ? ? ? ? ? ?744
>> ? ? ? ?wHeight( 0) ? ? ? ? ? ? ? ? ? ? ? 480
>> ? ? ? ?bNumCompressionPatterns ? ? ? ? ? ? 1
>> ? ? ? ?bCompression( 0) ? ? ? ? ? ? ? ? ? ?0
>> ? ? ?VideoStreaming Interface Descriptor:
>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?27
>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?4 (FORMAT_UNCOMPRESSED)
>> ? ? ? ?bFormatIndex ? ? ? ? ? ? ? ? ? ? ? ?2
>> ? ? ? ?bNumFrameDescriptors ? ? ? ? ? ? ? ?2
>> ? ? ? ?guidFormat
>> {55595659-0000-1000-8000-00aa00389b71}
>> ? ? ? ?bBitsPerPixel ? ? ? ? ? ? ? ? ? ? ?16
>> ? ? ? ?bDefaultFrameIndex ? ? ? ? ? ? ? ? ?1
>> ? ? ? ?bAspectRatioX ? ? ? ? ? ? ? ? ? ? ? 0
>> ? ? ? ?bAspectRatioY ? ? ? ? ? ? ? ? ? ? ? 0
>> ? ? ? ?bmInterlaceFlags ? ? ? ? ? ? ? ? 0x00
>> ? ? ? ? ?Interlaced stream or variable: No
>> ? ? ? ? ?Fields per frame: 1 fields
>> ? ? ? ? ?Field 1 first: No
>> ? ? ? ? ?Field pattern: Field 1 only
>> ? ? ? ? ?bCopyProtect ? ? ? ? ? ? ? ? ? ? ?0
>> ? ? ?VideoStreaming Interface Descriptor:
>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?30
>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?5 (FRAME_UNCOMPRESSED)
>> ? ? ? ?bFrameIndex ? ? ? ? ? ? ? ? ? ? ? ? 1
>> ? ? ? ?bmCapabilities ? ? ? ? ? ? ? ? ? 0x00
>> ? ? ? ? ?Still image unsupported
>> ? ? ? ?wWidth ? ? ? ? ? ? ? ? ? ? ? ? ? ?372
>> ? ? ? ?wHeight ? ? ? ? ? ? ? ? ? ? ? ? ? 480
>> ? ? ? ?dwMinBitRate ? ? ? ? ? ? ? ?838992000
>> ? ? ? ?dwMaxBitRate ? ? ? ? ? ? ? ?838992000
>> ? ? ? ?dwMaxVideoFrameBufferSize ? ? ?786432
>> ? ? ? ?dwDefaultFrameInterval ? ? ? ? 333333
>> ? ? ? ?bFrameIntervalType ? ? ? ? ? ? ? ? ?1
>> ? ? ? ?dwFrameInterval( 0) ? ? ? ? ? ?333333
>> ? ? ?VideoStreaming Interface Descriptor:
>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?30
>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?5 (FRAME_UNCOMPRESSED)
>> ? ? ? ?bFrameIndex ? ? ? ? ? ? ? ? ? ? ? ? 2
>> ? ? ? ?bmCapabilities ? ? ? ? ? ? ? ? ? 0x00
>> ? ? ? ? ?Still image unsupported
>> ? ? ? ?wWidth ? ? ? ? ? ? ? ? ? ? ? ? ? ?320
>> ? ? ? ?wHeight ? ? ? ? ? ? ? ? ? ? ? ? ? 480
>> ? ? ? ?dwMinBitRate ? ? ? ? ? ? ? ?838992000
>> ? ? ? ?dwMaxBitRate ? ? ? ? ? ? ? ?838992000
>> ? ? ? ?dwMaxVideoFrameBufferSize ? ? ?786432
>> ? ? ? ?dwDefaultFrameInterval ? ? ? ? 333333
>> ? ? ? ?bFrameIntervalType ? ? ? ? ? ? ? ? ?1
>> ? ? ? ?dwFrameInterval( 0) ? ? ? ? ? ?333333
>> ? ? ?VideoStreaming Interface Descriptor:
>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?11
>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?3 (STILL_IMAGE_FRAME)
>> ? ? ? ?bEndpointAddress ? ? ? ? ? ? ? ? ? ?0
>> ? ? ? ?bNumImageSizePatterns ? ? ? ? ? ? ? 1
>> ? ? ? ?wWidth( 0) ? ? ? ? ? ? ? ? ? ? ? ?744
>> ? ? ? ?wHeight( 0) ? ? ? ? ? ? ? ? ? ? ? 480
>> ? ? ? ?bNumCompressionPatterns ? ? ? ? ? ? 1
>> ? ? ? ?bCompression( 0) ? ? ? ? ? ? ? ? ? ?0
>> ? ? ?VideoStreaming Interface Descriptor:
>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ? 6
>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? 13 (COLORFORMAT)
>> ? ? ? ?bColorPrimaries ? ? ? ? ? ? ? ? ? ? 0 (Unspecified)
>> ? ? ? ?bTransferCharacteristics ? ? ? ? ? ?0 (Unspecified)
>> ? ? ? ?bMatrixCoefficients ? ? ? ? ? ? ? ? 0 (Unspecified)
>> ? ? ?Endpoint Descriptor:
>> ? ? ? ?bLength ? ? ? ? ? ? ? ? 7
>> ? ? ? ?bDescriptorType ? ? ? ? 5
>> ? ? ? ?bEndpointAddress ? ? 0x82 ?EP 2 IN
>> ? ? ? ?bmAttributes ? ? ? ? ? ?2
>> ? ? ? ? ?Transfer Type ? ? ? ? ? ?Bulk
>> ? ? ? ? ?Synch Type ? ? ? ? ? ? ? None
>> ? ? ? ? ?Usage Type ? ? ? ? ? ? ? Data
>> ? ? ? ?wMaxPacketSize ? ? 0x0200 ?1x 512 bytes
>> ? ? ? ?bInterval ? ? ? ? ? ? ? 1
>> Device Qualifier (for other device speed):
>> ?bLength ? ? ? ? ? ? ? ?10
>> ?bDescriptorType ? ? ? ? 6
>> ?bcdUSB ? ? ? ? ? ? ? 2.00
>> ?bDeviceClass ? ? ? ? ?239 Miscellaneous Device
>> ?bDeviceSubClass ? ? ? ? 2 ?
>> ?bDeviceProtocol ? ? ? ? 1 Interface Association
>> ?bMaxPacketSize0 ? ? ? ?64
>> ?bNumConfigurations ? ? ?1
>> Device Status: ? ? 0x0000
>> ?(Bus Powered)
>>
>> This is what I get with lucview:
>>
>> luvcview 0.2.4
>>
>> SDL information:
>> ?Video driver: x11
>> ?A window manager is available
>> Device information:
>> ?Device path: ?/dev/video0
>> Stream settings:
>> ?Frame format: UYVY
>> ?Frame size: ? 372x480 (requested size 744x480 is not supported by device)
>> ?Frame rate: ? 30/1 fps (requested frame rate 60 fps is not supported by device)
>>
>>
>>
>> Thank you!
>> _______________________________________________
>> Linux-uvc-devel mailing list
>> Linux-uvc-devel at lists.berlios.de
>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>
>>
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From sdukan at googlemail.com  Mon Mar  9 17:12:40 2009
From: sdukan at googlemail.com (Sinisa Dukanovic)
Date: Mon, 9 Mar 2009 17:12:40 +0100
Subject: [Linux-uvc-devel] Video/Audio recording issues with a Philips
	SPC1300NC
In-Reply-To: <200903020121.06588.laurent.pinchart@skynet.be>
References: <560f0caf0902261638p689dc64dhde406c0b580c45e7@mail.gmail.com>
	<200903020121.06588.laurent.pinchart@skynet.be>
Message-ID: <560f0caf0903090912x1482a152o88ec5200d462b24a@mail.gmail.com>

2009/3/2 Laurent Pinchart <laurent.pinchart at skynet.be>

> Hi,
>
> On Friday 27 February 2009 01:38:20 Sinisa Dukanovic wrote:
> > Hi everyone,
> > i own a Philips SPC1300NC which runs fine with uvc. Recording video never
> > was an issue, and since a weeks i can even record audio using the
> internal
> > mix of the camera. But i was never able to record audio and video at the
> > same time; not in skype, nor in any other application. When trying to
> > videophone with skype my communication partner receives perfect video but
> > only distorted audio. I some how realized the the audio distortion starts
> > when i start video. Running a few tests outside of skype (with arecord
> and
> > luvcview) i now have a deterinistc behaviour:
> > 1) When audio recording is started prior to video recording, audio
> > recording goes only well until video recording is started.
> > 2) When video recording is started prior to audio recording, both work
> > perfectly
> > For my test i used
> > skype(video test in options) + skype(audio-only phone call)
> > skype(video test in options) + arecord
> > luvcview + skype(audio-only phone call)
> > arecord + luvcview
> >
> > In all cases 1) and 2) hold.
> >
> > Does anybody know why this happens? Whether this is a uvc-bug or an
> > alsa-bug? Any hints on how to debug this?
>
> I'm afraid I have no idea. It might even be a big in the camera itself.
>
> Best regards,
>
> Laurent Pinchart
>
>
Well, it works well on windows. So i thought it is propably either uvc- or
alsa-related...
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090309/8655e139/attachment.html>

From pj.assis at gmail.com  Mon Mar  9 17:15:58 2009
From: pj.assis at gmail.com (Paulo Assis)
Date: Mon, 09 Mar 2009 16:15:58 +0000
Subject: [Linux-uvc-devel] [Fwd: Re:  Problem with DFM 21AUC03-ML]
Message-ID: <49B540BE.6080109@gmail.com>

For the list (I keep pressing the reply button, and forget to change the
address)
-------------- next part --------------
An embedded message was scrubbed...
From: Paulo Assis <pj.assis at gmail.com>
Subject: Re: [Linux-uvc-devel] Problem with DFM 21AUC03-ML
Date: Mon, 09 Mar 2009 16:12:50 +0000
Size: 16720
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090309/95069016/attachment.eml>

From smash0190spam at gmail.com  Mon Mar  9 17:44:41 2009
From: smash0190spam at gmail.com (Sebastian Scherer)
Date: Mon, 9 Mar 2009 12:44:41 -0400
Subject: [Linux-uvc-devel] [Fwd: Re: Problem with DFM 21AUC03-ML]
In-Reply-To: <49B540BE.6080109@gmail.com>
References: <49B540BE.6080109@gmail.com>
Message-ID: <336f6bae0903090944n1c56ef6dw4356ff031c6337b7@mail.gmail.com>

Hi,
Thank you so much for your help!

How do I capture raw frames?

What would it take to get the single frame capture implemented?

Another strange thing is that the camera also supports 60 frames per
second and it does not show up as a format. Could this be related to
the 372 size?

This is the output from guvcview --verbose:
guvcview 1.0.2
video_device: /dev/video0
vid_sleep: 0
resolution: 372 x 480
windowsize: 480 x 700
vert pane: 578
spin behavior: 0
mode: uyvy
fps: 1/30
Display Fps: 0
bpp: 0
hwaccel: 1
grabmethod: 1
avi_format: 2
sound: 0
sound Device: 2
sound samp rate: 0
sound Channels: 0
Sound Block Size: 1 seconds
Sound Format: 80
Sound bit Rate: 160 Kbps
Pan Step: 2 degrees
Tilt Step: 2 degrees
Video Filter Flags: 0
image inc: 0
profile(default):/home/ulb/default.gpfl
language catalog=> dir:/usr/share/locale type??r?@?gtk20
lang:en_US.UTF-8 cat:guvcview.mo
uyvy: setting format to 1498831189
video device: /dev/video0
/dev/video0 - device 1
Init. DFx 21AUC03 (location: usb-0000:00:1a.7-2)
{ pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
{ discrete: width = 372, height = 480 }
	Time interval between frame: 1/30,
{ discrete: width = 320, height = 480 }
	Time interval between frame: 1/30,
{ pixelformat = 'UYVY', description = 'YUV 4:2:2 (UYVY)' }
{ discrete: width = 372, height = 480 }
	Time interval between frame: 1/30,
{ discrete: width = 320, height = 480 }
	Time interval between frame: 1/30,
checking format: 1498831189
vid:199e
pid:8202
driver:uvcvideo
Controls:
control[0]: 0x980913  Gain, 16:1:64, default 16
control[1]: 0x9a0901  Exposure, Auto, 0:1:3, default 6
control[2]: 0x9a0902  Exposure (Absolute), 1:1:2550, default 127
resolutions of 2? format=2
frame rates of 1? resolution=1
Def. Res: 0  numb. fps:1
--------------------------------------- device #0
[ Default Input, Default Output ]
Name                     = /dev/dsp
Host API                 = OSS
Max inputs = 16, Max outputs = 16
Def. low input latency   =    0.012
Def. low output latency  =    0.012
Def. high input latency  =    0.046
Def. high output latency =    0.046
Def. sample rate         = 44100.00
--------------------------------------- device #1
Name                     = HDA Intel: ALC260 Analog (hw:0,0)
Host API                 = ALSA
Max inputs = 2, Max outputs = 2
Def. low input latency   =    0.012
Def. low output latency  =    0.012
Def. high input latency  =    0.046
Def. high output latency =    0.046
Def. sample rate         = 44100.00
--------------------------------------- device #2
Name                     = HDA Intel: ALC260 Digital (hw:0,1)
Host API                 = ALSA
Max inputs = 0, Max outputs = 2
Def. low input latency   =   -1.000
Def. low output latency  =    0.012
Def. high input latency  =   -1.000
Def. high output latency =    0.046
Def. sample rate         = 44100.00
--------------------------------------- device #3
Name                     = front
Host API                 = ALSA
Max inputs = 0, Max outputs = 2
Def. low input latency   =   -1.000
Def. low output latency  =    0.012
Def. high input latency  =   -1.000
Def. high output latency =    0.046
Def. sample rate         = 44100.00
--------------------------------------- device #4
Name                     = surround40
Host API                 = ALSA
Max inputs = 0, Max outputs = 2
Def. low input latency   =   -1.000
Def. low output latency  =    0.012
Def. high input latency  =   -1.000
Def. high output latency =    0.046
Def. sample rate         = 44100.00
--------------------------------------- device #5
Name                     = surround51
Host API                 = ALSA
Max inputs = 0, Max outputs = 2
Def. low input latency   =   -1.000
Def. low output latency  =    0.012
Def. high input latency  =   -1.000
Def. high output latency =    0.046
Def. sample rate         = 44100.00
--------------------------------------- device #6
Name                     = surround71
Host API                 = ALSA
Max inputs = 0, Max outputs = 2
Def. low input latency   =   -1.000
Def. low output latency  =    0.012
Def. high input latency  =   -1.000
Def. high output latency =    0.046
Def. sample rate         = 44100.00
--------------------------------------- device #7
Name                     = iec958
Host API                 = ALSA
Max inputs = 0, Max outputs = 2
Def. low input latency   =   -1.000
Def. low output latency  =    0.012
Def. high input latency  =   -1.000
Def. high output latency =    0.046
Def. sample rate         = 44100.00
--------------------------------------- device #8
Name                     = spdif
Host API                 = ALSA
Max inputs = 0, Max outputs = 2
Def. low input latency   =   -1.000
Def. low output latency  =    0.012
Def. high input latency  =   -1.000
Def. high output latency =    0.046
Def. sample rate         = 44100.00
--------------------------------------- device #9
[ Default ALSA Input, Default ALSA Output ]
Name                     = default
Host API                 = ALSA
Max inputs = 128, Max outputs = 128
Def. low input latency   =    0.043
Def. low output latency  =    0.043
Def. high input latency  =    0.046
Def. high output latency =    0.046
Def. sample rate         = 44100.00
--------------------------------------- device #10
Name                     = dmix
Host API                 = ALSA
Max inputs = 0, Max outputs = 2
Def. low input latency   =   -1.000
Def. low output latency  =    0.043
Def. high input latency  =   -1.000
Def. high output latency =    0.043
Def. sample rate         = 48000.00
----------------------------------------------
SampleRate:0 Channels:0
Video driver: x11
A window manager is available



2009/3/9 Paulo Assis <pj.assis at gmail.com>:
> For the list (I keep pressing the reply button, and forget to change the
> address)
>
> Sebastian,
>
> Sebastian Scherer escreveu:
>> Hi,
>> Thank you for your replies. I tried guvcview with both formats but the
>> output seems to be the same. It would be fine with me to manually
>> correct the output.
>>
>>
> What is the console output from guvcview --verbose ?
> Setting an unsupported device format would only make guvcview drop back
> to the first supported device format.
>
>> However I would really like to capture the full resolution images.
>> How can I use capture still images?
>>
>>
> I don't think that's implemented in linux uvc.
>
>
>> Also the 372 does not really make sense because this should not be a
>> frame size that is supported by the camera. Maybe halving the size
>> messes up the encoding?
>> Thank you
>>
>>
> Your best bet is to grab a RAW frame and try to analyse it.
> I would say that the 372 pix line needs to be converted to 744, UYVY has
> 2 bytes per pixel, although you need 4 bytes to render 2 pixels, in this
> case it seems you are getting a format with 1 byte per pixel.
>> Sebastian
>>
>>
>> 2009/3/9 Paulo Assis <pj.assis at gmail.com>:
>>
>>> Sebastien, I've taken another look at luvcview output and it reports
>>> UYVY not YUYV, luvcview doesn't support this format I believe,
>>> you should try the latest version from guvcview (1.0.2), and see if
>>> outputs the frame correctly.
>>>
>>> Best regards,
>>> Paulo
>>>
>>> Sebastian Scherer escreveu:
>>>
>>>> Hi,
>>>> After looking a little more carefully it might be that the resolution
>>>> problem is related to de-bayering.
>>>> I uploaded a sample image captured from the video:
>>>> http://www.frc.ri.cmu.edu/~basti/01-20090306125232-17.jpg
>>>>
>>>> Does anybody have any insight what the problem could be?
>>>>
>>>> I downloaded the latest drivers and used them on Ubuntu 8.10 but the
>>>> problem persists.
>>>> Thank you
>>>>
>>>> Sebastian
>>>>
>>>>
>>>>
>>>>> Hi,
>>>>> I have a problem with this camera.
>>>>> http://www.theimagingsource.com/en_US/products/oem-cameras/usb-cmos-color/dfm21auc03ml/
>>>>> It shows a picture but I cannot set the frame size and resolution of
>>>>> the camera. The camera supports
>>>>> 60 frames per second and a resolution of 744x480 YUV2. However I
>>>>> always get 372x480 and the colors are wrong.
>>>>>
>>>>> This is what dmesg reports:
>>>>>
>>>>>
>>>>
>>>>> [179400.340015] usb 6-1: new high speed USB device using ehci_hcd and address 3
>>>>> [179400.777492] usb 6-1: configuration #1 chosen from 1 choice
>>>>> [179400.777790] uvcvideo: Found UVC 1.00 device DFx 21AUC03 (199e:8202)
>>>>> [179401.306390] input: DFx 21AUC03 as
>>>>> /devices/pci0000:00/0000:00:1a.7/usb6/6-1/6-1:1.0/input/input7
>>>>>
>>>>> This is whalt lsusb reports:
>>>>> Bus 006 Device 003: ID 199e:8202 The Imaging Source Europe GmbH
>>>>> Device Descriptor:
>>>>> ?bLength ? ? ? ? ? ? ? ?18
>>>>> ?bDescriptorType ? ? ? ? 1
>>>>> ?bcdUSB ? ? ? ? ? ? ? 2.00
>>>>> ?bDeviceClass ? ? ? ? ?239 Miscellaneous Device
>>>>> ?bDeviceSubClass ? ? ? ? 2 ?
>>>>> ?bDeviceProtocol ? ? ? ? 1 Interface Association
>>>>> ?bMaxPacketSize0 ? ? ? ?64
>>>>> ?idVendor ? ? ? ? ? 0x199e The Imaging Source Europe GmbH
>>>>> ?idProduct ? ? ? ? ?0x8202
>>>>> ?bcdDevice ? ? ? ? ? ?8.13
>>>>> ?iManufacturer ? ? ? ? ? 2 The Imaging Source Europe GmbH
>>>>> ?iProduct ? ? ? ? ? ? ? ?1 DFx 21AUC03
>>>>> ?iSerial ? ? ? ? ? ? ? ? 3 38800104
>>>>> ?bNumConfigurations ? ? ?1
>>>>> ?Configuration Descriptor:
>>>>> ? ?bLength ? ? ? ? ? ? ? ? 9
>>>>> ? ?bDescriptorType ? ? ? ? 2
>>>>> ? ?wTotalLength ? ? ? ? ?349
>>>>> ? ?bNumInterfaces ? ? ? ? ?2
>>>>> ? ?bConfigurationValue ? ? 1
>>>>> ? ?iConfiguration ? ? ? ? ?0
>>>>> ? ?bmAttributes ? ? ? ? 0x80
>>>>> ? ? ?(Bus Powered)
>>>>> ? ?MaxPower ? ? ? ? ? ? ?500mA
>>>>> ? ?Interface Association:
>>>>> ? ? ?bLength ? ? ? ? ? ? ? ? 8
>>>>> ? ? ?bDescriptorType ? ? ? ?11
>>>>>
>>>>>
>>>> ? ? ?bFirstInterface ? ? ? ? 0
>>>> ? ? ?bInterfaceCount ? ? ? ? 2
>>>> ? ? ?bFunctionClass ? ? ? ? 14 Video
>>>> ? ? ?bFunctionSubClass ? ? ? 3 Video Interface Collection
>>>> ? ? ?bFunctionProtocol ? ? ? 0
>>>> ? ? ?iFunction ? ? ? ? ? ? ? 0
>>>> ? ?Interface Descriptor:
>>>> ? ? ?bLength ? ? ? ? ? ? ? ? 9
>>>> ? ? ?bDescriptorType ? ? ? ? 4
>>>> ? ? ?bInterfaceNumber ? ? ? ?0
>>>> ? ? ?bAlternateSetting ? ? ? 0
>>>> ? ? ?bNumEndpoints ? ? ? ? ? 1
>>>> ? ? ?bInterfaceClass ? ? ? ?14 Video
>>>> ? ? ?bInterfaceSubClass ? ? ?1 Video Control
>>>> ? ? ?bInterfaceProtocol ? ? ?0
>>>> ? ? ?iInterface ? ? ? ? ? ? ?0
>>>> ? ? ?VideoControl Interface Descriptor:
>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ?13
>>>> ? ? ? ?bDescriptorType ? ? ? ?36
>>>> ? ? ? ?bDescriptorSubtype ? ? ?1 (HEADER)
>>>> ? ? ? ?bcdUVC ? ? ? ? ? ? ? 1.00
>>>> ? ? ? ?wTotalLength ? ? ? ? ? 78
>>>> ? ? ? ?dwClockFrequency ? ? ? ?6.000000MHz
>>>> ? ? ? ?bInCollection ? ? ? ? ? 1
>>>> ? ? ? ?baInterfaceNr( 0) ? ? ? 1
>>>> ? ? ?VideoControl Interface Descriptor:
>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ?18
>>>> ? ? ? ?bDescriptorType ? ? ? ?36
>>>> ? ? ? ?bDescriptorSubtype ? ? ?2 (INPUT_TERMINAL)
>>>> ? ? ? ?bTerminalID ? ? ? ? ? ? 1
>>>> ? ? ? ?wTerminalType ? ? ?0x0201 Camera Sensor
>>>> ? ? ? ?bAssocTerminal ? ? ? ? ?0
>>>> ? ? ? ?iTerminal ? ? ? ? ? ? ? 0
>>>> ? ? ? ?wObjectiveFocalLengthMin ? ? ?0
>>>> ? ? ? ?wObjectiveFocalLengthMax ? ? ?0
>>>> ? ? ? ?wOcularFocalLength ? ? ? ? ? ?0
>>>> ? ? ? ?bControlSize ? ? ? ? ? ? ? ? ?3
>>>> ? ? ? ?bmControls ? ? ? ? ? 0x0000001a
>>>> ? ? ? ? ?Auto-Exposure Mode
>>>> ? ? ? ? ?Exposure Time (Absolute)
>>>> ? ? ? ? ?Exposure Time (Relative)
>>>> ? ? ?VideoControl Interface Descriptor:
>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ?12
>>>> ? ? ? ?bDescriptorType ? ? ? ?36
>>>> ? ? ? ?bDescriptorSubtype ? ? ?5 (PROCESSING_UNIT)
>>>> ? ? ?Warning: Descriptor too short
>>>> ? ? ? ?bUnitID ? ? ? ? ? ? ? ? 3
>>>> ? ? ? ?bSourceID ? ? ? ? ? ? ? 1
>>>> ? ? ? ?wMaxMultiplier ? ? ? ? ?0
>>>> ? ? ? ?bControlSize ? ? ? ? ? ?3
>>>> ? ? ? ?bmControls ? ? 0x00000200
>>>> ? ? ? ? ?Gain
>>>> ? ? ? ?iProcessing ? ? ? ? ? ? 0
>>>> ? ? ? ?bmVideoStandards ? ? 0x1a
>>>> ? ? ? ? ?NTSC - 525/60
>>>> ? ? ? ? ?SECAM - 625/50
>>>> ? ? ? ? ?NTSC - 625/50
>>>> ? ? ?VideoControl Interface Descriptor:
>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ?26
>>>> ? ? ? ?bDescriptorType ? ? ? ?36
>>>> ? ? ? ?bDescriptorSubtype ? ? ?6 (EXTENSION_UNIT)
>>>> ? ? ? ?bUnitID ? ? ? ? ? ? ? ? 4
>>>> ? ? ? ?guidExtensionCode ? ? ? ? {2652215a-8932-5641-894a-5c557cdf9664}
>>>> ? ? ? ?bNumControl ? ? ? ? ? ? 4
>>>> ? ? ? ?bNrPins ? ? ? ? ? ? ? ? 1
>>>> ? ? ? ?baSourceID( 0) ? ? ? ? ?3
>>>> ? ? ? ?bControlSize ? ? ? ? ? ?1
>>>> ? ? ? ?bmControls( 0) ? ? ? 0x1f
>>>> ? ? ? ?iExtension ? ? ? ? ? ? ?0
>>>> ? ? ?VideoControl Interface Descriptor:
>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? 9
>>>> ? ? ? ?bDescriptorType ? ? ? ?36
>>>> ? ? ? ?bDescriptorSubtype ? ? ?3 (OUTPUT_TERMINAL)
>>>> ? ? ? ?bTerminalID ? ? ? ? ? ? 2
>>>> ? ? ? ?wTerminalType ? ? ?0x0101 USB Streaming
>>>> ? ? ? ?bAssocTerminal ? ? ? ? ?0
>>>> ? ? ? ?bSourceID ? ? ? ? ? ? ? 4
>>>> ? ? ? ?iTerminal ? ? ? ? ? ? ? 0
>>>> ? ? ?Endpoint Descriptor:
>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? 7
>>>> ? ? ? ?bDescriptorType ? ? ? ? 5
>>>> ? ? ? ?bEndpointAddress ? ? 0x81 ?EP 1 IN
>>>> ? ? ? ?bmAttributes ? ? ? ? ? ?3
>>>> ? ? ? ? ?Transfer Type ? ? ? ? ? ?Interrupt
>>>> ? ? ? ? ?Synch Type ? ? ? ? ? ? ? None
>>>> ? ? ? ? ?Usage Type ? ? ? ? ? ? ? Data
>>>> ? ? ? ?wMaxPacketSize ? ? 0x0008 ?1x 8 bytes
>>>> ? ? ? ?bInterval ? ? ? ? ? ? ? 9
>>>> ? ?Interface Descriptor:
>>>> ? ? ?bLength ? ? ? ? ? ? ? ? 9
>>>> ? ? ?bDescriptorType ? ? ? ? 4
>>>> ? ? ?bInterfaceNumber ? ? ? ?1
>>>> ? ? ?bAlternateSetting ? ? ? 0
>>>> ? ? ?bNumEndpoints ? ? ? ? ? 1
>>>> ? ? ?bInterfaceClass ? ? ? ?14 Video
>>>> ? ? ?bInterfaceSubClass ? ? ?2 Video Streaming
>>>> ? ? ?bInterfaceProtocol ? ? ?0
>>>> ? ? ?iInterface ? ? ? ? ? ? ?0
>>>> ? ? ?VideoStreaming Interface Descriptor:
>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?15
>>>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>>>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?1 (INPUT_HEADER)
>>>> ? ? ? ?bNumFormats ? ? ? ? ? ? ? ? ? ? ? ?2
>>>> ? ? ? ?wTotalLength ? ? ? ? ? ? ? ? ? ? ?217
>>>> ? ? ? ?bEndPointAddress ? ? ? ? ? ? ? ? ?130
>>>> ? ? ? ?bmInfo ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?0
>>>> ? ? ? ?bTerminalLink ? ? ? ? ? ? ? ? ? ? ? 2
>>>> ? ? ? ?bStillCaptureMethod ? ? ? ? ? ? ? ? 2
>>>> ? ? ? ?bTriggerSupport ? ? ? ? ? ? ? ? ? ? 1
>>>> ? ? ? ?bTriggerUsage ? ? ? ? ? ? ? ? ? ? ? 0
>>>> ? ? ? ?bControlSize ? ? ? ? ? ? ? ? ? ? ? ?1
>>>> ? ? ? ?bmaControls( 0) ? ? ? ? ? ? ? ? ? ?27
>>>> ? ? ? ?bmaControls( 1) ? ? ? ? ? ? ? ? ? ?27
>>>> ? ? ?VideoStreaming Interface Descriptor:
>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?27
>>>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>>>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?4 (FORMAT_UNCOMPRESSED)
>>>> ? ? ? ?bFormatIndex ? ? ? ? ? ? ? ? ? ? ? ?1
>>>> ? ? ? ?bNumFrameDescriptors ? ? ? ? ? ? ? ?2
>>>> ? ? ? ?guidFormat
>>>> {59555932-0000-1000-8000-00aa00389b71}
>>>> ? ? ? ?bBitsPerPixel ? ? ? ? ? ? ? ? ? ? ?16
>>>> ? ? ? ?bDefaultFrameIndex ? ? ? ? ? ? ? ? ?1
>>>> ? ? ? ?bAspectRatioX ? ? ? ? ? ? ? ? ? ? ? 0
>>>> ? ? ? ?bAspectRatioY ? ? ? ? ? ? ? ? ? ? ? 0
>>>> ? ? ? ?bmInterlaceFlags ? ? ? ? ? ? ? ? 0x00
>>>> ? ? ? ? ?Interlaced stream or variable: No
>>>> ? ? ? ? ?Fields per frame: 1 fields
>>>> ? ? ? ? ?Field 1 first: No
>>>> ? ? ? ? ?Field pattern: Field 1 only
>>>> ? ? ? ? ?bCopyProtect ? ? ? ? ? ? ? ? ? ? ?0
>>>> ? ? ?VideoStreaming Interface Descriptor:
>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?30
>>>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>>>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?5 (FRAME_UNCOMPRESSED)
>>>> ? ? ? ?bFrameIndex ? ? ? ? ? ? ? ? ? ? ? ? 1
>>>> ? ? ? ?bmCapabilities ? ? ? ? ? ? ? ? ? 0x00
>>>> ? ? ? ? ?Still image unsupported
>>>> ? ? ? ?wWidth ? ? ? ? ? ? ? ? ? ? ? ? ? ?372
>>>> ? ? ? ?wHeight ? ? ? ? ? ? ? ? ? ? ? ? ? 480
>>>> ? ? ? ?dwMinBitRate ? ? ? ? ? ? ? ?838992000
>>>> ? ? ? ?dwMaxBitRate ? ? ? ? ? ? ? ?838992000
>>>> ? ? ? ?dwMaxVideoFrameBufferSize ? ? ?786432
>>>> ? ? ? ?dwDefaultFrameInterval ? ? ? ? 333333
>>>> ? ? ? ?bFrameIntervalType ? ? ? ? ? ? ? ? ?1
>>>> ? ? ? ?dwFrameInterval( 0) ? ? ? ? ? ?333333
>>>> ? ? ?VideoStreaming Interface Descriptor:
>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?30
>>>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>>>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?5 (FRAME_UNCOMPRESSED)
>>>> ? ? ? ?bFrameIndex ? ? ? ? ? ? ? ? ? ? ? ? 2
>>>> ? ? ? ?bmCapabilities ? ? ? ? ? ? ? ? ? 0x00
>>>> ? ? ? ? ?Still image unsupported
>>>> ? ? ? ?wWidth ? ? ? ? ? ? ? ? ? ? ? ? ? ?320
>>>> ? ? ? ?wHeight ? ? ? ? ? ? ? ? ? ? ? ? ? 480
>>>> ? ? ? ?dwMinBitRate ? ? ? ? ? ? ? ?838992000
>>>> ? ? ? ?dwMaxBitRate ? ? ? ? ? ? ? ?838992000
>>>> ? ? ? ?dwMaxVideoFrameBufferSize ? ? ?786432
>>>> ? ? ? ?dwDefaultFrameInterval ? ? ? ? 333333
>>>> ? ? ? ?bFrameIntervalType ? ? ? ? ? ? ? ? ?1
>>>> ? ? ? ?dwFrameInterval( 0) ? ? ? ? ? ?333333
>>>> ? ? ?VideoStreaming Interface Descriptor:
>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?11
>>>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>>>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?3 (STILL_IMAGE_FRAME)
>>>> ? ? ? ?bEndpointAddress ? ? ? ? ? ? ? ? ? ?0
>>>> ? ? ? ?bNumImageSizePatterns ? ? ? ? ? ? ? 1
>>>> ? ? ? ?wWidth( 0) ? ? ? ? ? ? ? ? ? ? ? ?744
>>>> ? ? ? ?wHeight( 0) ? ? ? ? ? ? ? ? ? ? ? 480
>>>> ? ? ? ?bNumCompressionPatterns ? ? ? ? ? ? 1
>>>> ? ? ? ?bCompression( 0) ? ? ? ? ? ? ? ? ? ?0
>>>> ? ? ?VideoStreaming Interface Descriptor:
>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?27
>>>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>>>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?4 (FORMAT_UNCOMPRESSED)
>>>> ? ? ? ?bFormatIndex ? ? ? ? ? ? ? ? ? ? ? ?2
>>>> ? ? ? ?bNumFrameDescriptors ? ? ? ? ? ? ? ?2
>>>> ? ? ? ?guidFormat
>>>> {55595659-0000-1000-8000-00aa00389b71}
>>>> ? ? ? ?bBitsPerPixel ? ? ? ? ? ? ? ? ? ? ?16
>>>> ? ? ? ?bDefaultFrameIndex ? ? ? ? ? ? ? ? ?1
>>>> ? ? ? ?bAspectRatioX ? ? ? ? ? ? ? ? ? ? ? 0
>>>> ? ? ? ?bAspectRatioY ? ? ? ? ? ? ? ? ? ? ? 0
>>>> ? ? ? ?bmInterlaceFlags ? ? ? ? ? ? ? ? 0x00
>>>> ? ? ? ? ?Interlaced stream or variable: No
>>>> ? ? ? ? ?Fields per frame: 1 fields
>>>> ? ? ? ? ?Field 1 first: No
>>>> ? ? ? ? ?Field pattern: Field 1 only
>>>> ? ? ? ? ?bCopyProtect ? ? ? ? ? ? ? ? ? ? ?0
>>>> ? ? ?VideoStreaming Interface Descriptor:
>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?30
>>>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>>>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?5 (FRAME_UNCOMPRESSED)
>>>> ? ? ? ?bFrameIndex ? ? ? ? ? ? ? ? ? ? ? ? 1
>>>> ? ? ? ?bmCapabilities ? ? ? ? ? ? ? ? ? 0x00
>>>> ? ? ? ? ?Still image unsupported
>>>> ? ? ? ?wWidth ? ? ? ? ? ? ? ? ? ? ? ? ? ?372
>>>> ? ? ? ?wHeight ? ? ? ? ? ? ? ? ? ? ? ? ? 480
>>>> ? ? ? ?dwMinBitRate ? ? ? ? ? ? ? ?838992000
>>>> ? ? ? ?dwMaxBitRate ? ? ? ? ? ? ? ?838992000
>>>> ? ? ? ?dwMaxVideoFrameBufferSize ? ? ?786432
>>>> ? ? ? ?dwDefaultFrameInterval ? ? ? ? 333333
>>>> ? ? ? ?bFrameIntervalType ? ? ? ? ? ? ? ? ?1
>>>> ? ? ? ?dwFrameInterval( 0) ? ? ? ? ? ?333333
>>>> ? ? ?VideoStreaming Interface Descriptor:
>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?30
>>>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>>>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?5 (FRAME_UNCOMPRESSED)
>>>> ? ? ? ?bFrameIndex ? ? ? ? ? ? ? ? ? ? ? ? 2
>>>> ? ? ? ?bmCapabilities ? ? ? ? ? ? ? ? ? 0x00
>>>> ? ? ? ? ?Still image unsupported
>>>> ? ? ? ?wWidth ? ? ? ? ? ? ? ? ? ? ? ? ? ?320
>>>> ? ? ? ?wHeight ? ? ? ? ? ? ? ? ? ? ? ? ? 480
>>>> ? ? ? ?dwMinBitRate ? ? ? ? ? ? ? ?838992000
>>>> ? ? ? ?dwMaxBitRate ? ? ? ? ? ? ? ?838992000
>>>> ? ? ? ?dwMaxVideoFrameBufferSize ? ? ?786432
>>>> ? ? ? ?dwDefaultFrameInterval ? ? ? ? 333333
>>>> ? ? ? ?bFrameIntervalType ? ? ? ? ? ? ? ? ?1
>>>> ? ? ? ?dwFrameInterval( 0) ? ? ? ? ? ?333333
>>>> ? ? ?VideoStreaming Interface Descriptor:
>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?11
>>>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>>>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?3 (STILL_IMAGE_FRAME)
>>>> ? ? ? ?bEndpointAddress ? ? ? ? ? ? ? ? ? ?0
>>>> ? ? ? ?bNumImageSizePatterns ? ? ? ? ? ? ? 1
>>>> ? ? ? ?wWidth( 0) ? ? ? ? ? ? ? ? ? ? ? ?744
>>>> ? ? ? ?wHeight( 0) ? ? ? ? ? ? ? ? ? ? ? 480
>>>> ? ? ? ?bNumCompressionPatterns ? ? ? ? ? ? 1
>>>> ? ? ? ?bCompression( 0) ? ? ? ? ? ? ? ? ? ?0
>>>> ? ? ?VideoStreaming Interface Descriptor:
>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ? 6
>>>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>>>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? 13 (COLORFORMAT)
>>>> ? ? ? ?bColorPrimaries ? ? ? ? ? ? ? ? ? ? 0 (Unspecified)
>>>> ? ? ? ?bTransferCharacteristics ? ? ? ? ? ?0 (Unspecified)
>>>> ? ? ? ?bMatrixCoefficients ? ? ? ? ? ? ? ? 0 (Unspecified)
>>>> ? ? ?Endpoint Descriptor:
>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? 7
>>>> ? ? ? ?bDescriptorType ? ? ? ? 5
>>>> ? ? ? ?bEndpointAddress ? ? 0x82 ?EP 2 IN
>>>> ? ? ? ?bmAttributes ? ? ? ? ? ?2
>>>> ? ? ? ? ?Transfer Type ? ? ? ? ? ?Bulk
>>>> ? ? ? ? ?Synch Type ? ? ? ? ? ? ? None
>>>> ? ? ? ? ?Usage Type ? ? ? ? ? ? ? Data
>>>> ? ? ? ?wMaxPacketSize ? ? 0x0200 ?1x 512 bytes
>>>> ? ? ? ?bInterval ? ? ? ? ? ? ? 1
>>>> Device Qualifier (for other device speed):
>>>> ?bLength ? ? ? ? ? ? ? ?10
>>>> ?bDescriptorType ? ? ? ? 6
>>>> ?bcdUSB ? ? ? ? ? ? ? 2.00
>>>> ?bDeviceClass ? ? ? ? ?239 Miscellaneous Device
>>>> ?bDeviceSubClass ? ? ? ? 2 ?
>>>> ?bDeviceProtocol ? ? ? ? 1 Interface Association
>>>> ?bMaxPacketSize0 ? ? ? ?64
>>>> ?bNumConfigurations ? ? ?1
>>>> Device Status: ? ? 0x0000
>>>> ?(Bus Powered)
>>>>
>>>> This is what I get with lucview:
>>>>
>>>> luvcview 0.2.4
>>>>
>>>> SDL information:
>>>> ?Video driver: x11
>>>> ?A window manager is available
>>>> Device information:
>>>> ?Device path: ?/dev/video0
>>>> Stream settings:
>>>> ?Frame format: UYVY
>>>> ?Frame size: ? 372x480 (requested size 744x480 is not supported by device)
>>>> ?Frame rate: ? 30/1 fps (requested frame rate 60 fps is not supported by device)
>>>>
>>>>
>>>>
>>>> Thank you!
>>>> _______________________________________________
>>>> Linux-uvc-devel mailing list
>>>> Linux-uvc-devel at lists.berlios.de
>>>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>>>
>>>>
>>>>
>>> _______________________________________________
>>> Linux-uvc-devel mailing list
>>> Linux-uvc-devel at lists.berlios.de
>>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>>
>>>
>>
>>
> Best regards,
> Paulo
>
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>

From smash0190spam at gmail.com  Mon Mar  9 18:06:39 2009
From: smash0190spam at gmail.com (Sebastian Scherer)
Date: Mon, 9 Mar 2009 13:06:39 -0400
Subject: [Linux-uvc-devel] [Fwd: Re: Problem with DFM 21AUC03-ML]
In-Reply-To: <336f6bae0903090944n1c56ef6dw4356ff031c6337b7@mail.gmail.com>
References: <49B540BE.6080109@gmail.com>
	<336f6bae0903090944n1c56ef6dw4356ff031c6337b7@mail.gmail.com>
Message-ID: <336f6bae0903091006i49315ec5ob56941b15444f541@mail.gmail.com>

Hi,
I tried a raw dump with luvcview -c. The resulting file is 744x480
big. With the following commands I can decode the image properly in
matlab:
fid = fopen('frame000.raw');
A=fread(fid,357120,'uchar');
Ares = reshape(A,744,480);
imshow(demosaic(uint8(Ares),'grbg'))

Is there a way I could hack the driver to produce the same result?
This would be much more convient (and efficient) to use the data in
some vision code I am writing. I tried changing
	.name		= "YUV 4:2:2 (YUYV)",
		.guid		= UVC_GUID_FORMAT_YUY2,
		.fcc		= V4L2_PIX_FMT_YUYV,
	
the fcc to
 V4L2_PIX_FMT_SBGGR8 but that caused a segfault with luvcview. Is
there a way I could force it to use bayer?
Thank you


Sebastian


2009/3/9 Sebastian Scherer <smash0190spam at gmail.com>:
> Hi,
> Thank you so much for your help!
>
> How do I capture raw frames?
>
> What would it take to get the single frame capture implemented?
>
> Another strange thing is that the camera also supports 60 frames per
> second and it does not show up as a format. Could this be related to
> the 372 size?
>
> This is the output from guvcview --verbose:
> guvcview 1.0.2
> video_device: /dev/video0
> vid_sleep: 0
> resolution: 372 x 480
> windowsize: 480 x 700
> vert pane: 578
> spin behavior: 0
> mode: uyvy
> fps: 1/30
> Display Fps: 0
> bpp: 0
> hwaccel: 1
> grabmethod: 1
> avi_format: 2
> sound: 0
> sound Device: 2
> sound samp rate: 0
> sound Channels: 0
> Sound Block Size: 1 seconds
> Sound Format: 80
> Sound bit Rate: 160 Kbps
> Pan Step: 2 degrees
> Tilt Step: 2 degrees
> Video Filter Flags: 0
> image inc: 0
> profile(default):/home/ulb/default.gpfl
> language catalog=> dir:/usr/share/locale type??r?@?gtk20
> lang:en_US.UTF-8 cat:guvcview.mo
> uyvy: setting format to 1498831189
> video device: /dev/video0
> /dev/video0 - device 1
> Init. DFx 21AUC03 (location: usb-0000:00:1a.7-2)
> { pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
> { discrete: width = 372, height = 480 }
> ? ? ? ?Time interval between frame: 1/30,
> { discrete: width = 320, height = 480 }
> ? ? ? ?Time interval between frame: 1/30,
> { pixelformat = 'UYVY', description = 'YUV 4:2:2 (UYVY)' }
> { discrete: width = 372, height = 480 }
> ? ? ? ?Time interval between frame: 1/30,
> { discrete: width = 320, height = 480 }
> ? ? ? ?Time interval between frame: 1/30,
> checking format: 1498831189
> vid:199e
> pid:8202
> driver:uvcvideo
> Controls:
> control[0]: 0x980913 ?Gain, 16:1:64, default 16
> control[1]: 0x9a0901 ?Exposure, Auto, 0:1:3, default 6
> control[2]: 0x9a0902 ?Exposure (Absolute), 1:1:2550, default 127
> resolutions of 2? format=2
> frame rates of 1? resolution=1
> Def. Res: 0 ?numb. fps:1
> --------------------------------------- device #0
> [ Default Input, Default Output ]
> Name ? ? ? ? ? ? ? ? ? ? = /dev/dsp
> Host API ? ? ? ? ? ? ? ? = OSS
> Max inputs = 16, Max outputs = 16
> Def. low input latency ? = ? ?0.012
> Def. low output latency ?= ? ?0.012
> Def. high input latency ?= ? ?0.046
> Def. high output latency = ? ?0.046
> Def. sample rate ? ? ? ? = 44100.00
> --------------------------------------- device #1
> Name ? ? ? ? ? ? ? ? ? ? = HDA Intel: ALC260 Analog (hw:0,0)
> Host API ? ? ? ? ? ? ? ? = ALSA
> Max inputs = 2, Max outputs = 2
> Def. low input latency ? = ? ?0.012
> Def. low output latency ?= ? ?0.012
> Def. high input latency ?= ? ?0.046
> Def. high output latency = ? ?0.046
> Def. sample rate ? ? ? ? = 44100.00
> --------------------------------------- device #2
> Name ? ? ? ? ? ? ? ? ? ? = HDA Intel: ALC260 Digital (hw:0,1)
> Host API ? ? ? ? ? ? ? ? = ALSA
> Max inputs = 0, Max outputs = 2
> Def. low input latency ? = ? -1.000
> Def. low output latency ?= ? ?0.012
> Def. high input latency ?= ? -1.000
> Def. high output latency = ? ?0.046
> Def. sample rate ? ? ? ? = 44100.00
> --------------------------------------- device #3
> Name ? ? ? ? ? ? ? ? ? ? = front
> Host API ? ? ? ? ? ? ? ? = ALSA
> Max inputs = 0, Max outputs = 2
> Def. low input latency ? = ? -1.000
> Def. low output latency ?= ? ?0.012
> Def. high input latency ?= ? -1.000
> Def. high output latency = ? ?0.046
> Def. sample rate ? ? ? ? = 44100.00
> --------------------------------------- device #4
> Name ? ? ? ? ? ? ? ? ? ? = surround40
> Host API ? ? ? ? ? ? ? ? = ALSA
> Max inputs = 0, Max outputs = 2
> Def. low input latency ? = ? -1.000
> Def. low output latency ?= ? ?0.012
> Def. high input latency ?= ? -1.000
> Def. high output latency = ? ?0.046
> Def. sample rate ? ? ? ? = 44100.00
> --------------------------------------- device #5
> Name ? ? ? ? ? ? ? ? ? ? = surround51
> Host API ? ? ? ? ? ? ? ? = ALSA
> Max inputs = 0, Max outputs = 2
> Def. low input latency ? = ? -1.000
> Def. low output latency ?= ? ?0.012
> Def. high input latency ?= ? -1.000
> Def. high output latency = ? ?0.046
> Def. sample rate ? ? ? ? = 44100.00
> --------------------------------------- device #6
> Name ? ? ? ? ? ? ? ? ? ? = surround71
> Host API ? ? ? ? ? ? ? ? = ALSA
> Max inputs = 0, Max outputs = 2
> Def. low input latency ? = ? -1.000
> Def. low output latency ?= ? ?0.012
> Def. high input latency ?= ? -1.000
> Def. high output latency = ? ?0.046
> Def. sample rate ? ? ? ? = 44100.00
> --------------------------------------- device #7
> Name ? ? ? ? ? ? ? ? ? ? = iec958
> Host API ? ? ? ? ? ? ? ? = ALSA
> Max inputs = 0, Max outputs = 2
> Def. low input latency ? = ? -1.000
> Def. low output latency ?= ? ?0.012
> Def. high input latency ?= ? -1.000
> Def. high output latency = ? ?0.046
> Def. sample rate ? ? ? ? = 44100.00
> --------------------------------------- device #8
> Name ? ? ? ? ? ? ? ? ? ? = spdif
> Host API ? ? ? ? ? ? ? ? = ALSA
> Max inputs = 0, Max outputs = 2
> Def. low input latency ? = ? -1.000
> Def. low output latency ?= ? ?0.012
> Def. high input latency ?= ? -1.000
> Def. high output latency = ? ?0.046
> Def. sample rate ? ? ? ? = 44100.00
> --------------------------------------- device #9
> [ Default ALSA Input, Default ALSA Output ]
> Name ? ? ? ? ? ? ? ? ? ? = default
> Host API ? ? ? ? ? ? ? ? = ALSA
> Max inputs = 128, Max outputs = 128
> Def. low input latency ? = ? ?0.043
> Def. low output latency ?= ? ?0.043
> Def. high input latency ?= ? ?0.046
> Def. high output latency = ? ?0.046
> Def. sample rate ? ? ? ? = 44100.00
> --------------------------------------- device #10
> Name ? ? ? ? ? ? ? ? ? ? = dmix
> Host API ? ? ? ? ? ? ? ? = ALSA
> Max inputs = 0, Max outputs = 2
> Def. low input latency ? = ? -1.000
> Def. low output latency ?= ? ?0.043
> Def. high input latency ?= ? -1.000
> Def. high output latency = ? ?0.043
> Def. sample rate ? ? ? ? = 48000.00
> ----------------------------------------------
> SampleRate:0 Channels:0
> Video driver: x11
> A window manager is available
>
>
>
> 2009/3/9 Paulo Assis <pj.assis at gmail.com>:
>> For the list (I keep pressing the reply button, and forget to change the
>> address)
>>
>> Sebastian,
>>
>> Sebastian Scherer escreveu:
>>> Hi,
>>> Thank you for your replies. I tried guvcview with both formats but the
>>> output seems to be the same. It would be fine with me to manually
>>> correct the output.
>>>
>>>
>> What is the console output from guvcview --verbose ?
>> Setting an unsupported device format would only make guvcview drop back
>> to the first supported device format.
>>
>>> However I would really like to capture the full resolution images.
>>> How can I use capture still images?
>>>
>>>
>> I don't think that's implemented in linux uvc.
>>
>>
>>> Also the 372 does not really make sense because this should not be a
>>> frame size that is supported by the camera. Maybe halving the size
>>> messes up the encoding?
>>> Thank you
>>>
>>>
>> Your best bet is to grab a RAW frame and try to analyse it.
>> I would say that the 372 pix line needs to be converted to 744, UYVY has
>> 2 bytes per pixel, although you need 4 bytes to render 2 pixels, in this
>> case it seems you are getting a format with 1 byte per pixel.
>>> Sebastian
>>>
>>>
>>> 2009/3/9 Paulo Assis <pj.assis at gmail.com>:
>>>
>>>> Sebastien, I've taken another look at luvcview output and it reports
>>>> UYVY not YUYV, luvcview doesn't support this format I believe,
>>>> you should try the latest version from guvcview (1.0.2), and see if
>>>> outputs the frame correctly.
>>>>
>>>> Best regards,
>>>> Paulo
>>>>
>>>> Sebastian Scherer escreveu:
>>>>
>>>>> Hi,
>>>>> After looking a little more carefully it might be that the resolution
>>>>> problem is related to de-bayering.
>>>>> I uploaded a sample image captured from the video:
>>>>> http://www.frc.ri.cmu.edu/~basti/01-20090306125232-17.jpg
>>>>>
>>>>> Does anybody have any insight what the problem could be?
>>>>>
>>>>> I downloaded the latest drivers and used them on Ubuntu 8.10 but the
>>>>> problem persists.
>>>>> Thank you
>>>>>
>>>>> Sebastian
>>>>>
>>>>>
>>>>>
>>>>>> Hi,
>>>>>> I have a problem with this camera.
>>>>>> http://www.theimagingsource.com/en_US/products/oem-cameras/usb-cmos-color/dfm21auc03ml/
>>>>>> It shows a picture but I cannot set the frame size and resolution of
>>>>>> the camera. The camera supports
>>>>>> 60 frames per second and a resolution of 744x480 YUV2. However I
>>>>>> always get 372x480 and the colors are wrong.
>>>>>>
>>>>>> This is what dmesg reports:
>>>>>>
>>>>>>
>>>>>
>>>>>> [179400.340015] usb 6-1: new high speed USB device using ehci_hcd and address 3
>>>>>> [179400.777492] usb 6-1: configuration #1 chosen from 1 choice
>>>>>> [179400.777790] uvcvideo: Found UVC 1.00 device DFx 21AUC03 (199e:8202)
>>>>>> [179401.306390] input: DFx 21AUC03 as
>>>>>> /devices/pci0000:00/0000:00:1a.7/usb6/6-1/6-1:1.0/input/input7
>>>>>>
>>>>>> This is whalt lsusb reports:
>>>>>> Bus 006 Device 003: ID 199e:8202 The Imaging Source Europe GmbH
>>>>>> Device Descriptor:
>>>>>> ?bLength ? ? ? ? ? ? ? ?18
>>>>>> ?bDescriptorType ? ? ? ? 1
>>>>>> ?bcdUSB ? ? ? ? ? ? ? 2.00
>>>>>> ?bDeviceClass ? ? ? ? ?239 Miscellaneous Device
>>>>>> ?bDeviceSubClass ? ? ? ? 2 ?
>>>>>> ?bDeviceProtocol ? ? ? ? 1 Interface Association
>>>>>> ?bMaxPacketSize0 ? ? ? ?64
>>>>>> ?idVendor ? ? ? ? ? 0x199e The Imaging Source Europe GmbH
>>>>>> ?idProduct ? ? ? ? ?0x8202
>>>>>> ?bcdDevice ? ? ? ? ? ?8.13
>>>>>> ?iManufacturer ? ? ? ? ? 2 The Imaging Source Europe GmbH
>>>>>> ?iProduct ? ? ? ? ? ? ? ?1 DFx 21AUC03
>>>>>> ?iSerial ? ? ? ? ? ? ? ? 3 38800104
>>>>>> ?bNumConfigurations ? ? ?1
>>>>>> ?Configuration Descriptor:
>>>>>> ? ?bLength ? ? ? ? ? ? ? ? 9
>>>>>> ? ?bDescriptorType ? ? ? ? 2
>>>>>> ? ?wTotalLength ? ? ? ? ?349
>>>>>> ? ?bNumInterfaces ? ? ? ? ?2
>>>>>> ? ?bConfigurationValue ? ? 1
>>>>>> ? ?iConfiguration ? ? ? ? ?0
>>>>>> ? ?bmAttributes ? ? ? ? 0x80
>>>>>> ? ? ?(Bus Powered)
>>>>>> ? ?MaxPower ? ? ? ? ? ? ?500mA
>>>>>> ? ?Interface Association:
>>>>>> ? ? ?bLength ? ? ? ? ? ? ? ? 8
>>>>>> ? ? ?bDescriptorType ? ? ? ?11
>>>>>>
>>>>>>
>>>>> ? ? ?bFirstInterface ? ? ? ? 0
>>>>> ? ? ?bInterfaceCount ? ? ? ? 2
>>>>> ? ? ?bFunctionClass ? ? ? ? 14 Video
>>>>> ? ? ?bFunctionSubClass ? ? ? 3 Video Interface Collection
>>>>> ? ? ?bFunctionProtocol ? ? ? 0
>>>>> ? ? ?iFunction ? ? ? ? ? ? ? 0
>>>>> ? ?Interface Descriptor:
>>>>> ? ? ?bLength ? ? ? ? ? ? ? ? 9
>>>>> ? ? ?bDescriptorType ? ? ? ? 4
>>>>> ? ? ?bInterfaceNumber ? ? ? ?0
>>>>> ? ? ?bAlternateSetting ? ? ? 0
>>>>> ? ? ?bNumEndpoints ? ? ? ? ? 1
>>>>> ? ? ?bInterfaceClass ? ? ? ?14 Video
>>>>> ? ? ?bInterfaceSubClass ? ? ?1 Video Control
>>>>> ? ? ?bInterfaceProtocol ? ? ?0
>>>>> ? ? ?iInterface ? ? ? ? ? ? ?0
>>>>> ? ? ?VideoControl Interface Descriptor:
>>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ?13
>>>>> ? ? ? ?bDescriptorType ? ? ? ?36
>>>>> ? ? ? ?bDescriptorSubtype ? ? ?1 (HEADER)
>>>>> ? ? ? ?bcdUVC ? ? ? ? ? ? ? 1.00
>>>>> ? ? ? ?wTotalLength ? ? ? ? ? 78
>>>>> ? ? ? ?dwClockFrequency ? ? ? ?6.000000MHz
>>>>> ? ? ? ?bInCollection ? ? ? ? ? 1
>>>>> ? ? ? ?baInterfaceNr( 0) ? ? ? 1
>>>>> ? ? ?VideoControl Interface Descriptor:
>>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ?18
>>>>> ? ? ? ?bDescriptorType ? ? ? ?36
>>>>> ? ? ? ?bDescriptorSubtype ? ? ?2 (INPUT_TERMINAL)
>>>>> ? ? ? ?bTerminalID ? ? ? ? ? ? 1
>>>>> ? ? ? ?wTerminalType ? ? ?0x0201 Camera Sensor
>>>>> ? ? ? ?bAssocTerminal ? ? ? ? ?0
>>>>> ? ? ? ?iTerminal ? ? ? ? ? ? ? 0
>>>>> ? ? ? ?wObjectiveFocalLengthMin ? ? ?0
>>>>> ? ? ? ?wObjectiveFocalLengthMax ? ? ?0
>>>>> ? ? ? ?wOcularFocalLength ? ? ? ? ? ?0
>>>>> ? ? ? ?bControlSize ? ? ? ? ? ? ? ? ?3
>>>>> ? ? ? ?bmControls ? ? ? ? ? 0x0000001a
>>>>> ? ? ? ? ?Auto-Exposure Mode
>>>>> ? ? ? ? ?Exposure Time (Absolute)
>>>>> ? ? ? ? ?Exposure Time (Relative)
>>>>> ? ? ?VideoControl Interface Descriptor:
>>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ?12
>>>>> ? ? ? ?bDescriptorType ? ? ? ?36
>>>>> ? ? ? ?bDescriptorSubtype ? ? ?5 (PROCESSING_UNIT)
>>>>> ? ? ?Warning: Descriptor too short
>>>>> ? ? ? ?bUnitID ? ? ? ? ? ? ? ? 3
>>>>> ? ? ? ?bSourceID ? ? ? ? ? ? ? 1
>>>>> ? ? ? ?wMaxMultiplier ? ? ? ? ?0
>>>>> ? ? ? ?bControlSize ? ? ? ? ? ?3
>>>>> ? ? ? ?bmControls ? ? 0x00000200
>>>>> ? ? ? ? ?Gain
>>>>> ? ? ? ?iProcessing ? ? ? ? ? ? 0
>>>>> ? ? ? ?bmVideoStandards ? ? 0x1a
>>>>> ? ? ? ? ?NTSC - 525/60
>>>>> ? ? ? ? ?SECAM - 625/50
>>>>> ? ? ? ? ?NTSC - 625/50
>>>>> ? ? ?VideoControl Interface Descriptor:
>>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ?26
>>>>> ? ? ? ?bDescriptorType ? ? ? ?36
>>>>> ? ? ? ?bDescriptorSubtype ? ? ?6 (EXTENSION_UNIT)
>>>>> ? ? ? ?bUnitID ? ? ? ? ? ? ? ? 4
>>>>> ? ? ? ?guidExtensionCode ? ? ? ? {2652215a-8932-5641-894a-5c557cdf9664}
>>>>> ? ? ? ?bNumControl ? ? ? ? ? ? 4
>>>>> ? ? ? ?bNrPins ? ? ? ? ? ? ? ? 1
>>>>> ? ? ? ?baSourceID( 0) ? ? ? ? ?3
>>>>> ? ? ? ?bControlSize ? ? ? ? ? ?1
>>>>> ? ? ? ?bmControls( 0) ? ? ? 0x1f
>>>>> ? ? ? ?iExtension ? ? ? ? ? ? ?0
>>>>> ? ? ?VideoControl Interface Descriptor:
>>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? 9
>>>>> ? ? ? ?bDescriptorType ? ? ? ?36
>>>>> ? ? ? ?bDescriptorSubtype ? ? ?3 (OUTPUT_TERMINAL)
>>>>> ? ? ? ?bTerminalID ? ? ? ? ? ? 2
>>>>> ? ? ? ?wTerminalType ? ? ?0x0101 USB Streaming
>>>>> ? ? ? ?bAssocTerminal ? ? ? ? ?0
>>>>> ? ? ? ?bSourceID ? ? ? ? ? ? ? 4
>>>>> ? ? ? ?iTerminal ? ? ? ? ? ? ? 0
>>>>> ? ? ?Endpoint Descriptor:
>>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? 7
>>>>> ? ? ? ?bDescriptorType ? ? ? ? 5
>>>>> ? ? ? ?bEndpointAddress ? ? 0x81 ?EP 1 IN
>>>>> ? ? ? ?bmAttributes ? ? ? ? ? ?3
>>>>> ? ? ? ? ?Transfer Type ? ? ? ? ? ?Interrupt
>>>>> ? ? ? ? ?Synch Type ? ? ? ? ? ? ? None
>>>>> ? ? ? ? ?Usage Type ? ? ? ? ? ? ? Data
>>>>> ? ? ? ?wMaxPacketSize ? ? 0x0008 ?1x 8 bytes
>>>>> ? ? ? ?bInterval ? ? ? ? ? ? ? 9
>>>>> ? ?Interface Descriptor:
>>>>> ? ? ?bLength ? ? ? ? ? ? ? ? 9
>>>>> ? ? ?bDescriptorType ? ? ? ? 4
>>>>> ? ? ?bInterfaceNumber ? ? ? ?1
>>>>> ? ? ?bAlternateSetting ? ? ? 0
>>>>> ? ? ?bNumEndpoints ? ? ? ? ? 1
>>>>> ? ? ?bInterfaceClass ? ? ? ?14 Video
>>>>> ? ? ?bInterfaceSubClass ? ? ?2 Video Streaming
>>>>> ? ? ?bInterfaceProtocol ? ? ?0
>>>>> ? ? ?iInterface ? ? ? ? ? ? ?0
>>>>> ? ? ?VideoStreaming Interface Descriptor:
>>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?15
>>>>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>>>>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?1 (INPUT_HEADER)
>>>>> ? ? ? ?bNumFormats ? ? ? ? ? ? ? ? ? ? ? ?2
>>>>> ? ? ? ?wTotalLength ? ? ? ? ? ? ? ? ? ? ?217
>>>>> ? ? ? ?bEndPointAddress ? ? ? ? ? ? ? ? ?130
>>>>> ? ? ? ?bmInfo ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?0
>>>>> ? ? ? ?bTerminalLink ? ? ? ? ? ? ? ? ? ? ? 2
>>>>> ? ? ? ?bStillCaptureMethod ? ? ? ? ? ? ? ? 2
>>>>> ? ? ? ?bTriggerSupport ? ? ? ? ? ? ? ? ? ? 1
>>>>> ? ? ? ?bTriggerUsage ? ? ? ? ? ? ? ? ? ? ? 0
>>>>> ? ? ? ?bControlSize ? ? ? ? ? ? ? ? ? ? ? ?1
>>>>> ? ? ? ?bmaControls( 0) ? ? ? ? ? ? ? ? ? ?27
>>>>> ? ? ? ?bmaControls( 1) ? ? ? ? ? ? ? ? ? ?27
>>>>> ? ? ?VideoStreaming Interface Descriptor:
>>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?27
>>>>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>>>>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?4 (FORMAT_UNCOMPRESSED)
>>>>> ? ? ? ?bFormatIndex ? ? ? ? ? ? ? ? ? ? ? ?1
>>>>> ? ? ? ?bNumFrameDescriptors ? ? ? ? ? ? ? ?2
>>>>> ? ? ? ?guidFormat
>>>>> {59555932-0000-1000-8000-00aa00389b71}
>>>>> ? ? ? ?bBitsPerPixel ? ? ? ? ? ? ? ? ? ? ?16
>>>>> ? ? ? ?bDefaultFrameIndex ? ? ? ? ? ? ? ? ?1
>>>>> ? ? ? ?bAspectRatioX ? ? ? ? ? ? ? ? ? ? ? 0
>>>>> ? ? ? ?bAspectRatioY ? ? ? ? ? ? ? ? ? ? ? 0
>>>>> ? ? ? ?bmInterlaceFlags ? ? ? ? ? ? ? ? 0x00
>>>>> ? ? ? ? ?Interlaced stream or variable: No
>>>>> ? ? ? ? ?Fields per frame: 1 fields
>>>>> ? ? ? ? ?Field 1 first: No
>>>>> ? ? ? ? ?Field pattern: Field 1 only
>>>>> ? ? ? ? ?bCopyProtect ? ? ? ? ? ? ? ? ? ? ?0
>>>>> ? ? ?VideoStreaming Interface Descriptor:
>>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?30
>>>>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>>>>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?5 (FRAME_UNCOMPRESSED)
>>>>> ? ? ? ?bFrameIndex ? ? ? ? ? ? ? ? ? ? ? ? 1
>>>>> ? ? ? ?bmCapabilities ? ? ? ? ? ? ? ? ? 0x00
>>>>> ? ? ? ? ?Still image unsupported
>>>>> ? ? ? ?wWidth ? ? ? ? ? ? ? ? ? ? ? ? ? ?372
>>>>> ? ? ? ?wHeight ? ? ? ? ? ? ? ? ? ? ? ? ? 480
>>>>> ? ? ? ?dwMinBitRate ? ? ? ? ? ? ? ?838992000
>>>>> ? ? ? ?dwMaxBitRate ? ? ? ? ? ? ? ?838992000
>>>>> ? ? ? ?dwMaxVideoFrameBufferSize ? ? ?786432
>>>>> ? ? ? ?dwDefaultFrameInterval ? ? ? ? 333333
>>>>> ? ? ? ?bFrameIntervalType ? ? ? ? ? ? ? ? ?1
>>>>> ? ? ? ?dwFrameInterval( 0) ? ? ? ? ? ?333333
>>>>> ? ? ?VideoStreaming Interface Descriptor:
>>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?30
>>>>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>>>>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?5 (FRAME_UNCOMPRESSED)
>>>>> ? ? ? ?bFrameIndex ? ? ? ? ? ? ? ? ? ? ? ? 2
>>>>> ? ? ? ?bmCapabilities ? ? ? ? ? ? ? ? ? 0x00
>>>>> ? ? ? ? ?Still image unsupported
>>>>> ? ? ? ?wWidth ? ? ? ? ? ? ? ? ? ? ? ? ? ?320
>>>>> ? ? ? ?wHeight ? ? ? ? ? ? ? ? ? ? ? ? ? 480
>>>>> ? ? ? ?dwMinBitRate ? ? ? ? ? ? ? ?838992000
>>>>> ? ? ? ?dwMaxBitRate ? ? ? ? ? ? ? ?838992000
>>>>> ? ? ? ?dwMaxVideoFrameBufferSize ? ? ?786432
>>>>> ? ? ? ?dwDefaultFrameInterval ? ? ? ? 333333
>>>>> ? ? ? ?bFrameIntervalType ? ? ? ? ? ? ? ? ?1
>>>>> ? ? ? ?dwFrameInterval( 0) ? ? ? ? ? ?333333
>>>>> ? ? ?VideoStreaming Interface Descriptor:
>>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?11
>>>>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>>>>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?3 (STILL_IMAGE_FRAME)
>>>>> ? ? ? ?bEndpointAddress ? ? ? ? ? ? ? ? ? ?0
>>>>> ? ? ? ?bNumImageSizePatterns ? ? ? ? ? ? ? 1
>>>>> ? ? ? ?wWidth( 0) ? ? ? ? ? ? ? ? ? ? ? ?744
>>>>> ? ? ? ?wHeight( 0) ? ? ? ? ? ? ? ? ? ? ? 480
>>>>> ? ? ? ?bNumCompressionPatterns ? ? ? ? ? ? 1
>>>>> ? ? ? ?bCompression( 0) ? ? ? ? ? ? ? ? ? ?0
>>>>> ? ? ?VideoStreaming Interface Descriptor:
>>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?27
>>>>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>>>>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?4 (FORMAT_UNCOMPRESSED)
>>>>> ? ? ? ?bFormatIndex ? ? ? ? ? ? ? ? ? ? ? ?2
>>>>> ? ? ? ?bNumFrameDescriptors ? ? ? ? ? ? ? ?2
>>>>> ? ? ? ?guidFormat
>>>>> {55595659-0000-1000-8000-00aa00389b71}
>>>>> ? ? ? ?bBitsPerPixel ? ? ? ? ? ? ? ? ? ? ?16
>>>>> ? ? ? ?bDefaultFrameIndex ? ? ? ? ? ? ? ? ?1
>>>>> ? ? ? ?bAspectRatioX ? ? ? ? ? ? ? ? ? ? ? 0
>>>>> ? ? ? ?bAspectRatioY ? ? ? ? ? ? ? ? ? ? ? 0
>>>>> ? ? ? ?bmInterlaceFlags ? ? ? ? ? ? ? ? 0x00
>>>>> ? ? ? ? ?Interlaced stream or variable: No
>>>>> ? ? ? ? ?Fields per frame: 1 fields
>>>>> ? ? ? ? ?Field 1 first: No
>>>>> ? ? ? ? ?Field pattern: Field 1 only
>>>>> ? ? ? ? ?bCopyProtect ? ? ? ? ? ? ? ? ? ? ?0
>>>>> ? ? ?VideoStreaming Interface Descriptor:
>>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?30
>>>>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>>>>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?5 (FRAME_UNCOMPRESSED)
>>>>> ? ? ? ?bFrameIndex ? ? ? ? ? ? ? ? ? ? ? ? 1
>>>>> ? ? ? ?bmCapabilities ? ? ? ? ? ? ? ? ? 0x00
>>>>> ? ? ? ? ?Still image unsupported
>>>>> ? ? ? ?wWidth ? ? ? ? ? ? ? ? ? ? ? ? ? ?372
>>>>> ? ? ? ?wHeight ? ? ? ? ? ? ? ? ? ? ? ? ? 480
>>>>> ? ? ? ?dwMinBitRate ? ? ? ? ? ? ? ?838992000
>>>>> ? ? ? ?dwMaxBitRate ? ? ? ? ? ? ? ?838992000
>>>>> ? ? ? ?dwMaxVideoFrameBufferSize ? ? ?786432
>>>>> ? ? ? ?dwDefaultFrameInterval ? ? ? ? 333333
>>>>> ? ? ? ?bFrameIntervalType ? ? ? ? ? ? ? ? ?1
>>>>> ? ? ? ?dwFrameInterval( 0) ? ? ? ? ? ?333333
>>>>> ? ? ?VideoStreaming Interface Descriptor:
>>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?30
>>>>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>>>>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?5 (FRAME_UNCOMPRESSED)
>>>>> ? ? ? ?bFrameIndex ? ? ? ? ? ? ? ? ? ? ? ? 2
>>>>> ? ? ? ?bmCapabilities ? ? ? ? ? ? ? ? ? 0x00
>>>>> ? ? ? ? ?Still image unsupported
>>>>> ? ? ? ?wWidth ? ? ? ? ? ? ? ? ? ? ? ? ? ?320
>>>>> ? ? ? ?wHeight ? ? ? ? ? ? ? ? ? ? ? ? ? 480
>>>>> ? ? ? ?dwMinBitRate ? ? ? ? ? ? ? ?838992000
>>>>> ? ? ? ?dwMaxBitRate ? ? ? ? ? ? ? ?838992000
>>>>> ? ? ? ?dwMaxVideoFrameBufferSize ? ? ?786432
>>>>> ? ? ? ?dwDefaultFrameInterval ? ? ? ? 333333
>>>>> ? ? ? ?bFrameIntervalType ? ? ? ? ? ? ? ? ?1
>>>>> ? ? ? ?dwFrameInterval( 0) ? ? ? ? ? ?333333
>>>>> ? ? ?VideoStreaming Interface Descriptor:
>>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?11
>>>>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>>>>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? ?3 (STILL_IMAGE_FRAME)
>>>>> ? ? ? ?bEndpointAddress ? ? ? ? ? ? ? ? ? ?0
>>>>> ? ? ? ?bNumImageSizePatterns ? ? ? ? ? ? ? 1
>>>>> ? ? ? ?wWidth( 0) ? ? ? ? ? ? ? ? ? ? ? ?744
>>>>> ? ? ? ?wHeight( 0) ? ? ? ? ? ? ? ? ? ? ? 480
>>>>> ? ? ? ?bNumCompressionPatterns ? ? ? ? ? ? 1
>>>>> ? ? ? ?bCompression( 0) ? ? ? ? ? ? ? ? ? ?0
>>>>> ? ? ?VideoStreaming Interface Descriptor:
>>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ? 6
>>>>> ? ? ? ?bDescriptorType ? ? ? ? ? ? ? ? ? ?36
>>>>> ? ? ? ?bDescriptorSubtype ? ? ? ? ? ? ? ? 13 (COLORFORMAT)
>>>>> ? ? ? ?bColorPrimaries ? ? ? ? ? ? ? ? ? ? 0 (Unspecified)
>>>>> ? ? ? ?bTransferCharacteristics ? ? ? ? ? ?0 (Unspecified)
>>>>> ? ? ? ?bMatrixCoefficients ? ? ? ? ? ? ? ? 0 (Unspecified)
>>>>> ? ? ?Endpoint Descriptor:
>>>>> ? ? ? ?bLength ? ? ? ? ? ? ? ? 7
>>>>> ? ? ? ?bDescriptorType ? ? ? ? 5
>>>>> ? ? ? ?bEndpointAddress ? ? 0x82 ?EP 2 IN
>>>>> ? ? ? ?bmAttributes ? ? ? ? ? ?2
>>>>> ? ? ? ? ?Transfer Type ? ? ? ? ? ?Bulk
>>>>> ? ? ? ? ?Synch Type ? ? ? ? ? ? ? None
>>>>> ? ? ? ? ?Usage Type ? ? ? ? ? ? ? Data
>>>>> ? ? ? ?wMaxPacketSize ? ? 0x0200 ?1x 512 bytes
>>>>> ? ? ? ?bInterval ? ? ? ? ? ? ? 1
>>>>> Device Qualifier (for other device speed):
>>>>> ?bLength ? ? ? ? ? ? ? ?10
>>>>> ?bDescriptorType ? ? ? ? 6
>>>>> ?bcdUSB ? ? ? ? ? ? ? 2.00
>>>>> ?bDeviceClass ? ? ? ? ?239 Miscellaneous Device
>>>>> ?bDeviceSubClass ? ? ? ? 2 ?
>>>>> ?bDeviceProtocol ? ? ? ? 1 Interface Association
>>>>> ?bMaxPacketSize0 ? ? ? ?64
>>>>> ?bNumConfigurations ? ? ?1
>>>>> Device Status: ? ? 0x0000
>>>>> ?(Bus Powered)
>>>>>
>>>>> This is what I get with lucview:
>>>>>
>>>>> luvcview 0.2.4
>>>>>
>>>>> SDL information:
>>>>> ?Video driver: x11
>>>>> ?A window manager is available
>>>>> Device information:
>>>>> ?Device path: ?/dev/video0
>>>>> Stream settings:
>>>>> ?Frame format: UYVY
>>>>> ?Frame size: ? 372x480 (requested size 744x480 is not supported by device)
>>>>> ?Frame rate: ? 30/1 fps (requested frame rate 60 fps is not supported by device)
>>>>>
>>>>>
>>>>>
>>>>> Thank you!
>>>>> _______________________________________________
>>>>> Linux-uvc-devel mailing list
>>>>> Linux-uvc-devel at lists.berlios.de
>>>>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>>>>
>>>>>
>>>>>
>>>> _______________________________________________
>>>> Linux-uvc-devel mailing list
>>>> Linux-uvc-devel at lists.berlios.de
>>>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>>>
>>>>
>>>
>>>
>> Best regards,
>> Paulo
>>
>>
>> _______________________________________________
>> Linux-uvc-devel mailing list
>> Linux-uvc-devel at lists.berlios.de
>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>
>>
>

From pj.assis at gmail.com  Tue Mar 10 10:17:10 2009
From: pj.assis at gmail.com (Paulo Assis)
Date: Tue, 10 Mar 2009 09:17:10 +0000
Subject: [Linux-uvc-devel] [Fwd: Re: Problem with DFM 21AUC03-ML]
In-Reply-To: <336f6bae0903091006i49315ec5ob56941b15444f541@mail.gmail.com>
References: <49B540BE.6080109@gmail.com>	
	<336f6bae0903090944n1c56ef6dw4356ff031c6337b7@mail.gmail.com>
	<336f6bae0903091006i49315ec5ob56941b15444f541@mail.gmail.com>
Message-ID: <49B63016.5060907@gmail.com>

If the data is in bayer mode you could have a look at guvcview code
(colorspaces.c) there you will find conversion functions for bayer to
yuv, just apply the appropriate function for decoding in uvcGrab
function at v4l2uvc.c.

Best regards,
Paulo


Sebastian Scherer escreveu:
> Hi,
> I tried a raw dump with luvcview -c. The resulting file is 744x480
> big. With the following commands I can decode the image properly in
> matlab:
> fid = fopen('frame000.raw');
> A=fread(fid,357120,'uchar');
> Ares = reshape(A,744,480);
> imshow(demosaic(uint8(Ares),'grbg'))
>
> Is there a way I could hack the driver to produce the same result?
> This would be much more convient (and efficient) to use the data in
> some vision code I am writing. I tried changing
> 	.name		= "YUV 4:2:2 (YUYV)",
> 		.guid		= UVC_GUID_FORMAT_YUY2,
> 		.fcc		= V4L2_PIX_FMT_YUYV,
> 	
> the fcc to
>  V4L2_PIX_FMT_SBGGR8 but that caused a segfault with luvcview. Is
> there a way I could force it to use bayer?
> Thank you
>
>
> Sebastian
>
>
> 2009/3/9 Sebastian Scherer <smash0190spam at gmail.com>:
>   
>> Hi,
>> Thank you so much for your help!
>>
>> How do I capture raw frames?
>>
>> What would it take to get the single frame capture implemented?
>>
>> Another strange thing is that the camera also supports 60 frames per
>> second and it does not show up as a format. Could this be related to
>> the 372 size?
>>
>> This is the output from guvcview --verbose:
>> guvcview 1.0.2
>> video_device: /dev/video0
>> vid_sleep: 0
>> resolution: 372 x 480
>> windowsize: 480 x 700
>> vert pane: 578
>> spin behavior: 0
>> mode: uyvy
>> fps: 1/30
>> Display Fps: 0
>> bpp: 0
>> hwaccel: 1
>> grabmethod: 1
>> avi_format: 2
>> sound: 0
>> sound Device: 2
>> sound samp rate: 0
>> sound Channels: 0
>> Sound Block Size: 1 seconds
>> Sound Format: 80
>> Sound bit Rate: 160 Kbps
>> Pan Step: 2 degrees
>> Tilt Step: 2 degrees
>> Video Filter Flags: 0
>> image inc: 0
>> profile(default):/home/ulb/default.gpfl
>> language catalog=> dir:/usr/share/locale type?????r???@???gtk20
>> lang:en_US.UTF-8 cat:guvcview.mo
>> uyvy: setting format to 1498831189
>> video device: /dev/video0
>> /dev/video0 - device 1
>> Init. DFx 21AUC03 (location: usb-0000:00:1a.7-2)
>> { pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
>> { discrete: width = 372, height = 480 }
>> ?  ?  ?  ? Time interval between frame: 1/30,
>> { discrete: width = 320, height = 480 }
>> ?  ?  ?  ? Time interval between frame: 1/30,
>> { pixelformat = 'UYVY', description = 'YUV 4:2:2 (UYVY)' }
>> { discrete: width = 372, height = 480 }
>> ?  ?  ?  ? Time interval between frame: 1/30,
>> { discrete: width = 320, height = 480 }
>> ?  ?  ?  ? Time interval between frame: 1/30,
>> checking format: 1498831189
>> vid:199e
>> pid:8202
>> driver:uvcvideo
>> Controls:
>> control[0]: 0x980913 ? Gain, 16:1:64, default 16
>> control[1]: 0x9a0901 ? Exposure, Auto, 0:1:3, default 6
>> control[2]: 0x9a0902 ? Exposure (Absolute), 1:1:2550, default 127
>> resolutions of 2?? format=2
>> frame rates of 1?? resolution=1
>> Def. Res: 0 ? numb. fps:1
>> --------------------------------------- device #0
>> [ Default Input, Default Output ]
>> Name ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  = /dev/dsp
>> Host API ?  ?  ?  ?  ?  ?  ?  ?  = OSS
>> Max inputs = 16, Max outputs = 16
>> Def. low input latency ?  = ?  ? 0.012
>> Def. low output latency ? = ?  ? 0.012
>> Def. high input latency ? = ?  ? 0.046
>> Def. high output latency = ?  ? 0.046
>> Def. sample rate ?  ?  ?  ?  = 44100.00
>> --------------------------------------- device #1
>> Name ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  = HDA Intel: ALC260 Analog (hw:0,0)
>> Host API ?  ?  ?  ?  ?  ?  ?  ?  = ALSA
>> Max inputs = 2, Max outputs = 2
>> Def. low input latency ?  = ?  ? 0.012
>> Def. low output latency ? = ?  ? 0.012
>> Def. high input latency ? = ?  ? 0.046
>> Def. high output latency = ?  ? 0.046
>> Def. sample rate ?  ?  ?  ?  = 44100.00
>> --------------------------------------- device #2
>> Name ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  = HDA Intel: ALC260 Digital (hw:0,1)
>> Host API ?  ?  ?  ?  ?  ?  ?  ?  = ALSA
>> Max inputs = 0, Max outputs = 2
>> Def. low input latency ?  = ?  -1.000
>> Def. low output latency ? = ?  ? 0.012
>> Def. high input latency ? = ?  -1.000
>> Def. high output latency = ?  ? 0.046
>> Def. sample rate ?  ?  ?  ?  = 44100.00
>> --------------------------------------- device #3
>> Name ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  = front
>> Host API ?  ?  ?  ?  ?  ?  ?  ?  = ALSA
>> Max inputs = 0, Max outputs = 2
>> Def. low input latency ?  = ?  -1.000
>> Def. low output latency ? = ?  ? 0.012
>> Def. high input latency ? = ?  -1.000
>> Def. high output latency = ?  ? 0.046
>> Def. sample rate ?  ?  ?  ?  = 44100.00
>> --------------------------------------- device #4
>> Name ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  = surround40
>> Host API ?  ?  ?  ?  ?  ?  ?  ?  = ALSA
>> Max inputs = 0, Max outputs = 2
>> Def. low input latency ?  = ?  -1.000
>> Def. low output latency ? = ?  ? 0.012
>> Def. high input latency ? = ?  -1.000
>> Def. high output latency = ?  ? 0.046
>> Def. sample rate ?  ?  ?  ?  = 44100.00
>> --------------------------------------- device #5
>> Name ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  = surround51
>> Host API ?  ?  ?  ?  ?  ?  ?  ?  = ALSA
>> Max inputs = 0, Max outputs = 2
>> Def. low input latency ?  = ?  -1.000
>> Def. low output latency ? = ?  ? 0.012
>> Def. high input latency ? = ?  -1.000
>> Def. high output latency = ?  ? 0.046
>> Def. sample rate ?  ?  ?  ?  = 44100.00
>> --------------------------------------- device #6
>> Name ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  = surround71
>> Host API ?  ?  ?  ?  ?  ?  ?  ?  = ALSA
>> Max inputs = 0, Max outputs = 2
>> Def. low input latency ?  = ?  -1.000
>> Def. low output latency ? = ?  ? 0.012
>> Def. high input latency ? = ?  -1.000
>> Def. high output latency = ?  ? 0.046
>> Def. sample rate ?  ?  ?  ?  = 44100.00
>> --------------------------------------- device #7
>> Name ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  = iec958
>> Host API ?  ?  ?  ?  ?  ?  ?  ?  = ALSA
>> Max inputs = 0, Max outputs = 2
>> Def. low input latency ?  = ?  -1.000
>> Def. low output latency ? = ?  ? 0.012
>> Def. high input latency ? = ?  -1.000
>> Def. high output latency = ?  ? 0.046
>> Def. sample rate ?  ?  ?  ?  = 44100.00
>> --------------------------------------- device #8
>> Name ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  = spdif
>> Host API ?  ?  ?  ?  ?  ?  ?  ?  = ALSA
>> Max inputs = 0, Max outputs = 2
>> Def. low input latency ?  = ?  -1.000
>> Def. low output latency ? = ?  ? 0.012
>> Def. high input latency ? = ?  -1.000
>> Def. high output latency = ?  ? 0.046
>> Def. sample rate ?  ?  ?  ?  = 44100.00
>> --------------------------------------- device #9
>> [ Default ALSA Input, Default ALSA Output ]
>> Name ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  = default
>> Host API ?  ?  ?  ?  ?  ?  ?  ?  = ALSA
>> Max inputs = 128, Max outputs = 128
>> Def. low input latency ?  = ?  ? 0.043
>> Def. low output latency ? = ?  ? 0.043
>> Def. high input latency ? = ?  ? 0.046
>> Def. high output latency = ?  ? 0.046
>> Def. sample rate ?  ?  ?  ?  = 44100.00
>> --------------------------------------- device #10
>> Name ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  = dmix
>> Host API ?  ?  ?  ?  ?  ?  ?  ?  = ALSA
>> Max inputs = 0, Max outputs = 2
>> Def. low input latency ?  = ?  -1.000
>> Def. low output latency ? = ?  ? 0.043
>> Def. high input latency ? = ?  -1.000
>> Def. high output latency = ?  ? 0.043
>> Def. sample rate ?  ?  ?  ?  = 48000.00
>> ----------------------------------------------
>> SampleRate:0 Channels:0
>> Video driver: x11
>> A window manager is available
>>
>>
>>
>> 2009/3/9 Paulo Assis <pj.assis at gmail.com>:
>>     
>>> For the list (I keep pressing the reply button, and forget to change the
>>> address)
>>>
>>> Sebastian,
>>>
>>> Sebastian Scherer escreveu:
>>>       
>>>> Hi,
>>>> Thank you for your replies. I tried guvcview with both formats but the
>>>> output seems to be the same. It would be fine with me to manually
>>>> correct the output.
>>>>
>>>>
>>>>         
>>> What is the console output from guvcview --verbose ?
>>> Setting an unsupported device format would only make guvcview drop back
>>> to the first supported device format.
>>>
>>>       
>>>> However I would really like to capture the full resolution images.
>>>> How can I use capture still images?
>>>>
>>>>
>>>>         
>>> I don't think that's implemented in linux uvc.
>>>
>>>
>>>       
>>>> Also the 372 does not really make sense because this should not be a
>>>> frame size that is supported by the camera. Maybe halving the size
>>>> messes up the encoding?
>>>> Thank you
>>>>
>>>>
>>>>         
>>> Your best bet is to grab a RAW frame and try to analyse it.
>>> I would say that the 372 pix line needs to be converted to 744, UYVY has
>>> 2 bytes per pixel, although you need 4 bytes to render 2 pixels, in this
>>> case it seems you are getting a format with 1 byte per pixel.
>>>       
>>>> Sebastian
>>>>
>>>>
>>>> 2009/3/9 Paulo Assis <pj.assis at gmail.com>:
>>>>
>>>>         
>>>>> Sebastien, I've taken another look at luvcview output and it reports
>>>>> UYVY not YUYV, luvcview doesn't support this format I believe,
>>>>> you should try the latest version from guvcview (1.0.2), and see if
>>>>> outputs the frame correctly.
>>>>>
>>>>> Best regards,
>>>>> Paulo
>>>>>
>>>>> Sebastian Scherer escreveu:
>>>>>
>>>>>           
>>>>>> Hi,
>>>>>> After looking a little more carefully it might be that the resolution
>>>>>> problem is related to de-bayering.
>>>>>> I uploaded a sample image captured from the video:
>>>>>> http://www.frc.ri.cmu.edu/~basti/01-20090306125232-17.jpg
>>>>>>
>>>>>> Does anybody have any insight what the problem could be?
>>>>>>
>>>>>> I downloaded the latest drivers and used them on Ubuntu 8.10 but the
>>>>>> problem persists.
>>>>>> Thank you
>>>>>>
>>>>>> Sebastian
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>>>> Hi,
>>>>>>> I have a problem with this camera.
>>>>>>> http://www.theimagingsource.com/en_US/products/oem-cameras/usb-cmos-color/dfm21auc03ml/
>>>>>>> It shows a picture but I cannot set the frame size and resolution of
>>>>>>> the camera. The camera supports
>>>>>>> 60 frames per second and a resolution of 744x480 YUV2. However I
>>>>>>> always get 372x480 and the colors are wrong.
>>>>>>>
>>>>>>> This is what dmesg reports:
>>>>>>>
>>>>>>>
>>>>>>>               
>>>>>>> [179400.340015] usb 6-1: new high speed USB device using ehci_hcd and address 3
>>>>>>> [179400.777492] usb 6-1: configuration #1 chosen from 1 choice
>>>>>>> [179400.777790] uvcvideo: Found UVC 1.00 device DFx 21AUC03 (199e:8202)
>>>>>>> [179401.306390] input: DFx 21AUC03 as
>>>>>>> /devices/pci0000:00/0000:00:1a.7/usb6/6-1/6-1:1.0/input/input7
>>>>>>>
>>>>>>> This is whalt lsusb reports:
>>>>>>> Bus 006 Device 003: ID 199e:8202 The Imaging Source Europe GmbH
>>>>>>> Device Descriptor:
>>>>>>> ? bLength ?  ?  ?  ?  ?  ?  ?  ? 18
>>>>>>> ? bDescriptorType ?  ?  ?  ?  1
>>>>>>> ? bcdUSB ?  ?  ?  ?  ?  ?  ?  2.00
>>>>>>> ? bDeviceClass ?  ?  ?  ?  ? 239 Miscellaneous Device
>>>>>>> ? bDeviceSubClass ?  ?  ?  ?  2 ?
>>>>>>> ? bDeviceProtocol ?  ?  ?  ?  1 Interface Association
>>>>>>> ? bMaxPacketSize0 ?  ?  ?  ? 64
>>>>>>> ? idVendor ?  ?  ?  ?  ?  0x199e The Imaging Source Europe GmbH
>>>>>>> ? idProduct ?  ?  ?  ?  ? 0x8202
>>>>>>> ? bcdDevice ?  ?  ?  ?  ?  ? 8.13
>>>>>>> ? iManufacturer ?  ?  ?  ?  ?  2 The Imaging Source Europe GmbH
>>>>>>> ? iProduct ?  ?  ?  ?  ?  ?  ?  ? 1 DFx 21AUC03
>>>>>>> ? iSerial ?  ?  ?  ?  ?  ?  ?  ?  3 38800104
>>>>>>> ? bNumConfigurations ?  ?  ? 1
>>>>>>> ? Configuration Descriptor:
>>>>>>> ?  ? bLength ?  ?  ?  ?  ?  ?  ?  ?  9
>>>>>>> ?  ? bDescriptorType ?  ?  ?  ?  2
>>>>>>> ?  ? wTotalLength ?  ?  ?  ?  ? 349
>>>>>>> ?  ? bNumInterfaces ?  ?  ?  ?  ? 2
>>>>>>> ?  ? bConfigurationValue ?  ?  1
>>>>>>> ?  ? iConfiguration ?  ?  ?  ?  ? 0
>>>>>>> ?  ? bmAttributes ?  ?  ?  ?  0x80
>>>>>>> ?  ?  ? (Bus Powered)
>>>>>>> ?  ? MaxPower ?  ?  ?  ?  ?  ?  ? 500mA
>>>>>>> ?  ? Interface Association:
>>>>>>> ?  ?  ? bLength ?  ?  ?  ?  ?  ?  ?  ?  8
>>>>>>> ?  ?  ? bDescriptorType ?  ?  ?  ? 11
>>>>>>>
>>>>>>>
>>>>>>>               
>>>>>> ?  ?  ? bFirstInterface ?  ?  ?  ?  0
>>>>>> ?  ?  ? bInterfaceCount ?  ?  ?  ?  2
>>>>>> ?  ?  ? bFunctionClass ?  ?  ?  ?  14 Video
>>>>>> ?  ?  ? bFunctionSubClass ?  ?  ?  3 Video Interface Collection
>>>>>> ?  ?  ? bFunctionProtocol ?  ?  ?  0
>>>>>> ?  ?  ? iFunction ?  ?  ?  ?  ?  ?  ?  0
>>>>>> ?  ? Interface Descriptor:
>>>>>> ?  ?  ? bLength ?  ?  ?  ?  ?  ?  ?  ?  9
>>>>>> ?  ?  ? bDescriptorType ?  ?  ?  ?  4
>>>>>> ?  ?  ? bInterfaceNumber ?  ?  ?  ? 0
>>>>>> ?  ?  ? bAlternateSetting ?  ?  ?  0
>>>>>> ?  ?  ? bNumEndpoints ?  ?  ?  ?  ?  1
>>>>>> ?  ?  ? bInterfaceClass ?  ?  ?  ? 14 Video
>>>>>> ?  ?  ? bInterfaceSubClass ?  ?  ? 1 Video Control
>>>>>> ?  ?  ? bInterfaceProtocol ?  ?  ? 0
>>>>>> ?  ?  ? iInterface ?  ?  ?  ?  ?  ?  ? 0
>>>>>> ?  ?  ? VideoControl Interface Descriptor:
>>>>>> ?  ?  ?  ? bLength ?  ?  ?  ?  ?  ?  ?  ? 13
>>>>>> ?  ?  ?  ? bDescriptorType ?  ?  ?  ? 36
>>>>>> ?  ?  ?  ? bDescriptorSubtype ?  ?  ? 1 (HEADER)
>>>>>> ?  ?  ?  ? bcdUVC ?  ?  ?  ?  ?  ?  ?  1.00
>>>>>> ?  ?  ?  ? wTotalLength ?  ?  ?  ?  ?  78
>>>>>> ?  ?  ?  ? dwClockFrequency ?  ?  ?  ? 6.000000MHz
>>>>>> ?  ?  ?  ? bInCollection ?  ?  ?  ?  ?  1
>>>>>> ?  ?  ?  ? baInterfaceNr( 0) ?  ?  ?  1
>>>>>> ?  ?  ? VideoControl Interface Descriptor:
>>>>>> ?  ?  ?  ? bLength ?  ?  ?  ?  ?  ?  ?  ? 18
>>>>>> ?  ?  ?  ? bDescriptorType ?  ?  ?  ? 36
>>>>>> ?  ?  ?  ? bDescriptorSubtype ?  ?  ? 2 (INPUT_TERMINAL)
>>>>>> ?  ?  ?  ? bTerminalID ?  ?  ?  ?  ?  ?  1
>>>>>> ?  ?  ?  ? wTerminalType ?  ?  ? 0x0201 Camera Sensor
>>>>>> ?  ?  ?  ? bAssocTerminal ?  ?  ?  ?  ? 0
>>>>>> ?  ?  ?  ? iTerminal ?  ?  ?  ?  ?  ?  ?  0
>>>>>> ?  ?  ?  ? wObjectiveFocalLengthMin ?  ?  ? 0
>>>>>> ?  ?  ?  ? wObjectiveFocalLengthMax ?  ?  ? 0
>>>>>> ?  ?  ?  ? wOcularFocalLength ?  ?  ?  ?  ?  ? 0
>>>>>> ?  ?  ?  ? bControlSize ?  ?  ?  ?  ?  ?  ?  ?  ? 3
>>>>>> ?  ?  ?  ? bmControls ?  ?  ?  ?  ?  0x0000001a
>>>>>> ?  ?  ?  ?  ? Auto-Exposure Mode
>>>>>> ?  ?  ?  ?  ? Exposure Time (Absolute)
>>>>>> ?  ?  ?  ?  ? Exposure Time (Relative)
>>>>>> ?  ?  ? VideoControl Interface Descriptor:
>>>>>> ?  ?  ?  ? bLength ?  ?  ?  ?  ?  ?  ?  ? 12
>>>>>> ?  ?  ?  ? bDescriptorType ?  ?  ?  ? 36
>>>>>> ?  ?  ?  ? bDescriptorSubtype ?  ?  ? 5 (PROCESSING_UNIT)
>>>>>> ?  ?  ? Warning: Descriptor too short
>>>>>> ?  ?  ?  ? bUnitID ?  ?  ?  ?  ?  ?  ?  ?  3
>>>>>> ?  ?  ?  ? bSourceID ?  ?  ?  ?  ?  ?  ?  1
>>>>>> ?  ?  ?  ? wMaxMultiplier ?  ?  ?  ?  ? 0
>>>>>> ?  ?  ?  ? bControlSize ?  ?  ?  ?  ?  ? 3
>>>>>> ?  ?  ?  ? bmControls ?  ?  0x00000200
>>>>>> ?  ?  ?  ?  ? Gain
>>>>>> ?  ?  ?  ? iProcessing ?  ?  ?  ?  ?  ?  0
>>>>>> ?  ?  ?  ? bmVideoStandards ?  ?  0x1a
>>>>>> ?  ?  ?  ?  ? NTSC - 525/60
>>>>>> ?  ?  ?  ?  ? SECAM - 625/50
>>>>>> ?  ?  ?  ?  ? NTSC - 625/50
>>>>>> ?  ?  ? VideoControl Interface Descriptor:
>>>>>> ?  ?  ?  ? bLength ?  ?  ?  ?  ?  ?  ?  ? 26
>>>>>> ?  ?  ?  ? bDescriptorType ?  ?  ?  ? 36
>>>>>> ?  ?  ?  ? bDescriptorSubtype ?  ?  ? 6 (EXTENSION_UNIT)
>>>>>> ?  ?  ?  ? bUnitID ?  ?  ?  ?  ?  ?  ?  ?  4
>>>>>> ?  ?  ?  ? guidExtensionCode ?  ?  ?  ?  {2652215a-8932-5641-894a-5c557cdf9664}
>>>>>> ?  ?  ?  ? bNumControl ?  ?  ?  ?  ?  ?  4
>>>>>> ?  ?  ?  ? bNrPins ?  ?  ?  ?  ?  ?  ?  ?  1
>>>>>> ?  ?  ?  ? baSourceID( 0) ?  ?  ?  ?  ? 3
>>>>>> ?  ?  ?  ? bControlSize ?  ?  ?  ?  ?  ? 1
>>>>>> ?  ?  ?  ? bmControls( 0) ?  ?  ?  0x1f
>>>>>> ?  ?  ?  ? iExtension ?  ?  ?  ?  ?  ?  ? 0
>>>>>> ?  ?  ? VideoControl Interface Descriptor:
>>>>>> ?  ?  ?  ? bLength ?  ?  ?  ?  ?  ?  ?  ?  9
>>>>>> ?  ?  ?  ? bDescriptorType ?  ?  ?  ? 36
>>>>>> ?  ?  ?  ? bDescriptorSubtype ?  ?  ? 3 (OUTPUT_TERMINAL)
>>>>>> ?  ?  ?  ? bTerminalID ?  ?  ?  ?  ?  ?  2
>>>>>> ?  ?  ?  ? wTerminalType ?  ?  ? 0x0101 USB Streaming
>>>>>> ?  ?  ?  ? bAssocTerminal ?  ?  ?  ?  ? 0
>>>>>> ?  ?  ?  ? bSourceID ?  ?  ?  ?  ?  ?  ?  4
>>>>>> ?  ?  ?  ? iTerminal ?  ?  ?  ?  ?  ?  ?  0
>>>>>> ?  ?  ? Endpoint Descriptor:
>>>>>> ?  ?  ?  ? bLength ?  ?  ?  ?  ?  ?  ?  ?  7
>>>>>> ?  ?  ?  ? bDescriptorType ?  ?  ?  ?  5
>>>>>> ?  ?  ?  ? bEndpointAddress ?  ?  0x81 ? EP 1 IN
>>>>>> ?  ?  ?  ? bmAttributes ?  ?  ?  ?  ?  ? 3
>>>>>> ?  ?  ?  ?  ? Transfer Type ?  ?  ?  ?  ?  ? Interrupt
>>>>>> ?  ?  ?  ?  ? Synch Type ?  ?  ?  ?  ?  ?  ?  None
>>>>>> ?  ?  ?  ?  ? Usage Type ?  ?  ?  ?  ?  ?  ?  Data
>>>>>> ?  ?  ?  ? wMaxPacketSize ?  ?  0x0008 ? 1x 8 bytes
>>>>>> ?  ?  ?  ? bInterval ?  ?  ?  ?  ?  ?  ?  9
>>>>>> ?  ? Interface Descriptor:
>>>>>> ?  ?  ? bLength ?  ?  ?  ?  ?  ?  ?  ?  9
>>>>>> ?  ?  ? bDescriptorType ?  ?  ?  ?  4
>>>>>> ?  ?  ? bInterfaceNumber ?  ?  ?  ? 1
>>>>>> ?  ?  ? bAlternateSetting ?  ?  ?  0
>>>>>> ?  ?  ? bNumEndpoints ?  ?  ?  ?  ?  1
>>>>>> ?  ?  ? bInterfaceClass ?  ?  ?  ? 14 Video
>>>>>> ?  ?  ? bInterfaceSubClass ?  ?  ? 2 Video Streaming
>>>>>> ?  ?  ? bInterfaceProtocol ?  ?  ? 0
>>>>>> ?  ?  ? iInterface ?  ?  ?  ?  ?  ?  ? 0
>>>>>> ?  ?  ? VideoStreaming Interface Descriptor:
>>>>>> ?  ?  ?  ? bLength ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 15
>>>>>> ?  ?  ?  ? bDescriptorType ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 36
>>>>>> ?  ?  ?  ? bDescriptorSubtype ?  ?  ?  ?  ?  ?  ?  ?  ? 1 (INPUT_HEADER)
>>>>>> ?  ?  ?  ? bNumFormats ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 2
>>>>>> ?  ?  ?  ? wTotalLength ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 217
>>>>>> ?  ?  ?  ? bEndPointAddress ?  ?  ?  ?  ?  ?  ?  ?  ? 130
>>>>>> ?  ?  ?  ? bmInfo ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 0
>>>>>> ?  ?  ?  ? bTerminalLink ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  2
>>>>>> ?  ?  ?  ? bStillCaptureMethod ?  ?  ?  ?  ?  ?  ?  ?  2
>>>>>> ?  ?  ?  ? bTriggerSupport ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  1
>>>>>> ?  ?  ?  ? bTriggerUsage ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  0
>>>>>> ?  ?  ?  ? bControlSize ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 1
>>>>>> ?  ?  ?  ? bmaControls( 0) ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 27
>>>>>> ?  ?  ?  ? bmaControls( 1) ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 27
>>>>>> ?  ?  ? VideoStreaming Interface Descriptor:
>>>>>> ?  ?  ?  ? bLength ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 27
>>>>>> ?  ?  ?  ? bDescriptorType ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 36
>>>>>> ?  ?  ?  ? bDescriptorSubtype ?  ?  ?  ?  ?  ?  ?  ?  ? 4 (FORMAT_UNCOMPRESSED)
>>>>>> ?  ?  ?  ? bFormatIndex ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 1
>>>>>> ?  ?  ?  ? bNumFrameDescriptors ?  ?  ?  ?  ?  ?  ?  ? 2
>>>>>> ?  ?  ?  ? guidFormat
>>>>>> {59555932-0000-1000-8000-00aa00389b71}
>>>>>> ?  ?  ?  ? bBitsPerPixel ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 16
>>>>>> ?  ?  ?  ? bDefaultFrameIndex ?  ?  ?  ?  ?  ?  ?  ?  ? 1
>>>>>> ?  ?  ?  ? bAspectRatioX ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  0
>>>>>> ?  ?  ?  ? bAspectRatioY ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  0
>>>>>> ?  ?  ?  ? bmInterlaceFlags ?  ?  ?  ?  ?  ?  ?  ?  0x00
>>>>>> ?  ?  ?  ?  ? Interlaced stream or variable: No
>>>>>> ?  ?  ?  ?  ? Fields per frame: 1 fields
>>>>>> ?  ?  ?  ?  ? Field 1 first: No
>>>>>> ?  ?  ?  ?  ? Field pattern: Field 1 only
>>>>>> ?  ?  ?  ?  ? bCopyProtect ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 0
>>>>>> ?  ?  ? VideoStreaming Interface Descriptor:
>>>>>> ?  ?  ?  ? bLength ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 30
>>>>>> ?  ?  ?  ? bDescriptorType ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 36
>>>>>> ?  ?  ?  ? bDescriptorSubtype ?  ?  ?  ?  ?  ?  ?  ?  ? 5 (FRAME_UNCOMPRESSED)
>>>>>> ?  ?  ?  ? bFrameIndex ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  1
>>>>>> ?  ?  ?  ? bmCapabilities ?  ?  ?  ?  ?  ?  ?  ?  ?  0x00
>>>>>> ?  ?  ?  ?  ? Still image unsupported
>>>>>> ?  ?  ?  ? wWidth ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 372
>>>>>> ?  ?  ?  ? wHeight ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  480
>>>>>> ?  ?  ?  ? dwMinBitRate ?  ?  ?  ?  ?  ?  ?  ? 838992000
>>>>>> ?  ?  ?  ? dwMaxBitRate ?  ?  ?  ?  ?  ?  ?  ? 838992000
>>>>>> ?  ?  ?  ? dwMaxVideoFrameBufferSize ?  ?  ? 786432
>>>>>> ?  ?  ?  ? dwDefaultFrameInterval ?  ?  ?  ?  333333
>>>>>> ?  ?  ?  ? bFrameIntervalType ?  ?  ?  ?  ?  ?  ?  ?  ? 1
>>>>>> ?  ?  ?  ? dwFrameInterval( 0) ?  ?  ?  ?  ?  ? 333333
>>>>>> ?  ?  ? VideoStreaming Interface Descriptor:
>>>>>> ?  ?  ?  ? bLength ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 30
>>>>>> ?  ?  ?  ? bDescriptorType ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 36
>>>>>> ?  ?  ?  ? bDescriptorSubtype ?  ?  ?  ?  ?  ?  ?  ?  ? 5 (FRAME_UNCOMPRESSED)
>>>>>> ?  ?  ?  ? bFrameIndex ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  2
>>>>>> ?  ?  ?  ? bmCapabilities ?  ?  ?  ?  ?  ?  ?  ?  ?  0x00
>>>>>> ?  ?  ?  ?  ? Still image unsupported
>>>>>> ?  ?  ?  ? wWidth ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 320
>>>>>> ?  ?  ?  ? wHeight ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  480
>>>>>> ?  ?  ?  ? dwMinBitRate ?  ?  ?  ?  ?  ?  ?  ? 838992000
>>>>>> ?  ?  ?  ? dwMaxBitRate ?  ?  ?  ?  ?  ?  ?  ? 838992000
>>>>>> ?  ?  ?  ? dwMaxVideoFrameBufferSize ?  ?  ? 786432
>>>>>> ?  ?  ?  ? dwDefaultFrameInterval ?  ?  ?  ?  333333
>>>>>> ?  ?  ?  ? bFrameIntervalType ?  ?  ?  ?  ?  ?  ?  ?  ? 1
>>>>>> ?  ?  ?  ? dwFrameInterval( 0) ?  ?  ?  ?  ?  ? 333333
>>>>>> ?  ?  ? VideoStreaming Interface Descriptor:
>>>>>> ?  ?  ?  ? bLength ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 11
>>>>>> ?  ?  ?  ? bDescriptorType ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 36
>>>>>> ?  ?  ?  ? bDescriptorSubtype ?  ?  ?  ?  ?  ?  ?  ?  ? 3 (STILL_IMAGE_FRAME)
>>>>>> ?  ?  ?  ? bEndpointAddress ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 0
>>>>>> ?  ?  ?  ? bNumImageSizePatterns ?  ?  ?  ?  ?  ?  ?  1
>>>>>> ?  ?  ?  ? wWidth( 0) ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 744
>>>>>> ?  ?  ?  ? wHeight( 0) ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  480
>>>>>> ?  ?  ?  ? bNumCompressionPatterns ?  ?  ?  ?  ?  ?  1
>>>>>> ?  ?  ?  ? bCompression( 0) ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 0
>>>>>> ?  ?  ? VideoStreaming Interface Descriptor:
>>>>>> ?  ?  ?  ? bLength ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 27
>>>>>> ?  ?  ?  ? bDescriptorType ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 36
>>>>>> ?  ?  ?  ? bDescriptorSubtype ?  ?  ?  ?  ?  ?  ?  ?  ? 4 (FORMAT_UNCOMPRESSED)
>>>>>> ?  ?  ?  ? bFormatIndex ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 2
>>>>>> ?  ?  ?  ? bNumFrameDescriptors ?  ?  ?  ?  ?  ?  ?  ? 2
>>>>>> ?  ?  ?  ? guidFormat
>>>>>> {55595659-0000-1000-8000-00aa00389b71}
>>>>>> ?  ?  ?  ? bBitsPerPixel ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 16
>>>>>> ?  ?  ?  ? bDefaultFrameIndex ?  ?  ?  ?  ?  ?  ?  ?  ? 1
>>>>>> ?  ?  ?  ? bAspectRatioX ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  0
>>>>>> ?  ?  ?  ? bAspectRatioY ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  0
>>>>>> ?  ?  ?  ? bmInterlaceFlags ?  ?  ?  ?  ?  ?  ?  ?  0x00
>>>>>> ?  ?  ?  ?  ? Interlaced stream or variable: No
>>>>>> ?  ?  ?  ?  ? Fields per frame: 1 fields
>>>>>> ?  ?  ?  ?  ? Field 1 first: No
>>>>>> ?  ?  ?  ?  ? Field pattern: Field 1 only
>>>>>> ?  ?  ?  ?  ? bCopyProtect ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 0
>>>>>> ?  ?  ? VideoStreaming Interface Descriptor:
>>>>>> ?  ?  ?  ? bLength ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 30
>>>>>> ?  ?  ?  ? bDescriptorType ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 36
>>>>>> ?  ?  ?  ? bDescriptorSubtype ?  ?  ?  ?  ?  ?  ?  ?  ? 5 (FRAME_UNCOMPRESSED)
>>>>>> ?  ?  ?  ? bFrameIndex ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  1
>>>>>> ?  ?  ?  ? bmCapabilities ?  ?  ?  ?  ?  ?  ?  ?  ?  0x00
>>>>>> ?  ?  ?  ?  ? Still image unsupported
>>>>>> ?  ?  ?  ? wWidth ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 372
>>>>>> ?  ?  ?  ? wHeight ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  480
>>>>>> ?  ?  ?  ? dwMinBitRate ?  ?  ?  ?  ?  ?  ?  ? 838992000
>>>>>> ?  ?  ?  ? dwMaxBitRate ?  ?  ?  ?  ?  ?  ?  ? 838992000
>>>>>> ?  ?  ?  ? dwMaxVideoFrameBufferSize ?  ?  ? 786432
>>>>>> ?  ?  ?  ? dwDefaultFrameInterval ?  ?  ?  ?  333333
>>>>>> ?  ?  ?  ? bFrameIntervalType ?  ?  ?  ?  ?  ?  ?  ?  ? 1
>>>>>> ?  ?  ?  ? dwFrameInterval( 0) ?  ?  ?  ?  ?  ? 333333
>>>>>> ?  ?  ? VideoStreaming Interface Descriptor:
>>>>>> ?  ?  ?  ? bLength ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 30
>>>>>> ?  ?  ?  ? bDescriptorType ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 36
>>>>>> ?  ?  ?  ? bDescriptorSubtype ?  ?  ?  ?  ?  ?  ?  ?  ? 5 (FRAME_UNCOMPRESSED)
>>>>>> ?  ?  ?  ? bFrameIndex ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  2
>>>>>> ?  ?  ?  ? bmCapabilities ?  ?  ?  ?  ?  ?  ?  ?  ?  0x00
>>>>>> ?  ?  ?  ?  ? Still image unsupported
>>>>>> ?  ?  ?  ? wWidth ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 320
>>>>>> ?  ?  ?  ? wHeight ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  480
>>>>>> ?  ?  ?  ? dwMinBitRate ?  ?  ?  ?  ?  ?  ?  ? 838992000
>>>>>> ?  ?  ?  ? dwMaxBitRate ?  ?  ?  ?  ?  ?  ?  ? 838992000
>>>>>> ?  ?  ?  ? dwMaxVideoFrameBufferSize ?  ?  ? 786432
>>>>>> ?  ?  ?  ? dwDefaultFrameInterval ?  ?  ?  ?  333333
>>>>>> ?  ?  ?  ? bFrameIntervalType ?  ?  ?  ?  ?  ?  ?  ?  ? 1
>>>>>> ?  ?  ?  ? dwFrameInterval( 0) ?  ?  ?  ?  ?  ? 333333
>>>>>> ?  ?  ? VideoStreaming Interface Descriptor:
>>>>>> ?  ?  ?  ? bLength ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 11
>>>>>> ?  ?  ?  ? bDescriptorType ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 36
>>>>>> ?  ?  ?  ? bDescriptorSubtype ?  ?  ?  ?  ?  ?  ?  ?  ? 3 (STILL_IMAGE_FRAME)
>>>>>> ?  ?  ?  ? bEndpointAddress ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 0
>>>>>> ?  ?  ?  ? bNumImageSizePatterns ?  ?  ?  ?  ?  ?  ?  1
>>>>>> ?  ?  ?  ? wWidth( 0) ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 744
>>>>>> ?  ?  ?  ? wHeight( 0) ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  480
>>>>>> ?  ?  ?  ? bNumCompressionPatterns ?  ?  ?  ?  ?  ?  1
>>>>>> ?  ?  ?  ? bCompression( 0) ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 0
>>>>>> ?  ?  ? VideoStreaming Interface Descriptor:
>>>>>> ?  ?  ?  ? bLength ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  6
>>>>>> ?  ?  ?  ? bDescriptorType ?  ?  ?  ?  ?  ?  ?  ?  ?  ? 36
>>>>>> ?  ?  ?  ? bDescriptorSubtype ?  ?  ?  ?  ?  ?  ?  ?  13 (COLORFORMAT)
>>>>>> ?  ?  ?  ? bColorPrimaries ?  ?  ?  ?  ?  ?  ?  ?  ?  ?  0 (Unspecified)
>>>>>> ?  ?  ?  ? bTransferCharacteristics ?  ?  ?  ?  ?  ? 0 (Unspecified)
>>>>>> ?  ?  ?  ? bMatrixCoefficients ?  ?  ?  ?  ?  ?  ?  ?  0 (Unspecified)
>>>>>> ?  ?  ? Endpoint Descriptor:
>>>>>> ?  ?  ?  ? bLength ?  ?  ?  ?  ?  ?  ?  ?  7
>>>>>> ?  ?  ?  ? bDescriptorType ?  ?  ?  ?  5
>>>>>> ?  ?  ?  ? bEndpointAddress ?  ?  0x82 ? EP 2 IN
>>>>>> ?  ?  ?  ? bmAttributes ?  ?  ?  ?  ?  ? 2
>>>>>> ?  ?  ?  ?  ? Transfer Type ?  ?  ?  ?  ?  ? Bulk
>>>>>> ?  ?  ?  ?  ? Synch Type ?  ?  ?  ?  ?  ?  ?  None
>>>>>> ?  ?  ?  ?  ? Usage Type ?  ?  ?  ?  ?  ?  ?  Data
>>>>>> ?  ?  ?  ? wMaxPacketSize ?  ?  0x0200 ? 1x 512 bytes
>>>>>> ?  ?  ?  ? bInterval ?  ?  ?  ?  ?  ?  ?  1
>>>>>> Device Qualifier (for other device speed):
>>>>>> ? bLength ?  ?  ?  ?  ?  ?  ?  ? 10
>>>>>> ? bDescriptorType ?  ?  ?  ?  6
>>>>>> ? bcdUSB ?  ?  ?  ?  ?  ?  ?  2.00
>>>>>> ? bDeviceClass ?  ?  ?  ?  ? 239 Miscellaneous Device
>>>>>> ? bDeviceSubClass ?  ?  ?  ?  2 ?
>>>>>> ? bDeviceProtocol ?  ?  ?  ?  1 Interface Association
>>>>>> ? bMaxPacketSize0 ?  ?  ?  ? 64
>>>>>> ? bNumConfigurations ?  ?  ? 1
>>>>>> Device Status: ?  ?  0x0000
>>>>>> ? (Bus Powered)
>>>>>>
>>>>>> This is what I get with lucview:
>>>>>>
>>>>>> luvcview 0.2.4
>>>>>>
>>>>>> SDL information:
>>>>>> ? Video driver: x11
>>>>>> ? A window manager is available
>>>>>> Device information:
>>>>>> ? Device path: ? /dev/video0
>>>>>> Stream settings:
>>>>>> ? Frame format: UYVY
>>>>>> ? Frame size: ?  372x480 (requested size 744x480 is not supported by device)
>>>>>> ? Frame rate: ?  30/1 fps (requested frame rate 60 fps is not supported by device)
>>>>>>
>>>>>>
>>>>>>
>>>>>> Thank you!
>>>>>> _______________________________________________
>>>>>> Linux-uvc-devel mailing list
>>>>>> Linux-uvc-devel at lists.berlios.de
>>>>>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>> _______________________________________________
>>>>> Linux-uvc-devel mailing list
>>>>> Linux-uvc-devel at lists.berlios.de
>>>>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>>>>
>>>>>
>>>>>           
>>>>         
>>> Best regards,
>>> Paulo
>>>
>>>
>>> _______________________________________________
>>> Linux-uvc-devel mailing list
>>> Linux-uvc-devel at lists.berlios.de
>>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>>
>>>
>>>       



From smash0190spam at gmail.com  Tue Mar 10 18:08:12 2009
From: smash0190spam at gmail.com (Sebastian Scherer)
Date: Tue, 10 Mar 2009 13:08:12 -0400
Subject: [Linux-uvc-devel] [Fwd: Re: Problem with DFM 21AUC03-ML]
In-Reply-To: <49B63016.5060907@gmail.com>
References: <49B540BE.6080109@gmail.com>
	<336f6bae0903090944n1c56ef6dw4356ff031c6337b7@mail.gmail.com>
	<336f6bae0903091006i49315ec5ob56941b15444f541@mail.gmail.com>
	<49B63016.5060907@gmail.com>
Message-ID: <336f6bae0903101008n704eac4eiacf5bd3dde7f1fcc@mail.gmail.com>

Thank you. I also found this site where there is a patched uvcvideo
driver for the camera I have. However it seems to be based on an older
version of uvcvideo and so I get some error when I try to insert the
uvcvideo module with the latest version of uvcvideo:

[441559.508487] uvcvideo: disagrees about version of symbol
v4l_compat_translate_ioctl
[441559.508497] uvcvideo: Unknown symbol v4l_compat_translate_ioctl
[441559.509189] uvcvideo: disagrees about version of symbol video_devdata
[441559.509192] uvcvideo: Unknown symbol video_devdata
[441559.510182] uvcvideo: disagrees about version of symbol
video_unregister_device
[441559.510186] uvcvideo: Unknown symbol video_unregister_device
[441559.510516] uvcvideo: disagrees about version of symbol video_device_alloc
[441559.510519] uvcvideo: Unknown symbol video_device_alloc
[441559.510744] uvcvideo: disagrees about version of symbol
video_register_device
[441559.510747] uvcvideo: Unknown symbol video_register_device
[441559.511368] uvcvideo: disagrees about version of symbol video_usercopy
[441559.511371] uvcvideo: Unknown symbol video_usercopy
[441559.511468] uvcvideo: disagrees about version of symbol video_device_release
[441559.511471] uvcvideo: Unknown symbol video_device_release

I will look in to it on a different computer that has no uvcvideo yet.
http://unicap-imaging.org/blog/index.php?/archives/22-Software-updates-for-The-Imaging-Source-CMOS-cameras.html

Thank you


Basti



2009/3/10 Paulo Assis <pj.assis at gmail.com>:
> If the data is in bayer mode you could have a look at guvcview code
> (colorspaces.c) there you will find conversion functions for bayer to
> yuv, just apply the appropriate function for decoding in uvcGrab
> function at v4l2uvc.c.
>
> Best regards,
> Paulo
>
>
> Sebastian Scherer escreveu:
>> Hi,
>> I tried a raw dump with luvcview -c. The resulting file is 744x480
>> big. With the following commands I can decode the image properly in
>> matlab:
>> fid = fopen('frame000.raw');
>> A=fread(fid,357120,'uchar');
>> Ares = reshape(A,744,480);
>> imshow(demosaic(uint8(Ares),'grbg'))
>>
>> Is there a way I could hack the driver to produce the same result?
>> This would be much more convient (and efficient) to use the data in
>> some vision code I am writing. I tried changing
>> ? ? ? .name ? ? ? ? ? = "YUV 4:2:2 (YUYV)",
>> ? ? ? ? ? ? ? .guid ? ? ? ? ? = UVC_GUID_FORMAT_YUY2,
>> ? ? ? ? ? ? ? .fcc ? ? ? ? ? ?= V4L2_PIX_FMT_YUYV,
>>
>> the fcc to
>> ?V4L2_PIX_FMT_SBGGR8 but that caused a segfault with luvcview. Is
>> there a way I could force it to use bayer?
>> Thank you
>>
>>
>> Sebastian
>>
>>
>> 2009/3/9 Sebastian Scherer <smash0190spam at gmail.com>:
>>
>>> Hi,
>>> Thank you so much for your help!
>>>
>>> How do I capture raw frames?
>>>
>>> What would it take to get the single frame capture implemented?
>>>
>>> Another strange thing is that the camera also supports 60 frames per
>>> second and it does not show up as a format. Could this be related to
>>> the 372 size?
>>>
>>> This is the output from guvcview --verbose:
>>> guvcview 1.0.2
>>> video_device: /dev/video0
>>> vid_sleep: 0
>>> resolution: 372 x 480
>>> windowsize: 480 x 700
>>> vert pane: 578
>>> spin behavior: 0
>>> mode: uyvy
>>> fps: 1/30
>>> Display Fps: 0
>>> bpp: 0
>>> hwaccel: 1
>>> grabmethod: 1
>>> avi_format: 2
>>> sound: 0
>>> sound Device: 2
>>> sound samp rate: 0
>>> sound Channels: 0
>>> Sound Block Size: 1 seconds
>>> Sound Format: 80
>>> Sound bit Rate: 160 Kbps
>>> Pan Step: 2 degrees
>>> Tilt Step: 2 degrees
>>> Video Filter Flags: 0
>>> image inc: 0
>>> profile(default):/home/ulb/default.gpfl
>>> language catalog=> dir:/usr/share/locale type?????r???@???gtk20
>>> lang:en_US.UTF-8 cat:guvcview.mo
>>> uyvy: setting format to 1498831189
>>> video device: /dev/video0
>>> /dev/video0 - device 1
>>> Init. DFx 21AUC03 (location: usb-0000:00:1a.7-2)
>>> { pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
>>> { discrete: width = 372, height = 480 }
>>> ? ?? ?? ?? Time interval between frame: 1/30,
>>> { discrete: width = 320, height = 480 }
>>> ? ?? ?? ?? Time interval between frame: 1/30,
>>> { pixelformat = 'UYVY', description = 'YUV 4:2:2 (UYVY)' }
>>> { discrete: width = 372, height = 480 }
>>> ? ?? ?? ?? Time interval between frame: 1/30,
>>> { discrete: width = 320, height = 480 }
>>> ? ?? ?? ?? Time interval between frame: 1/30,
>>> checking format: 1498831189
>>> vid:199e
>>> pid:8202
>>> driver:uvcvideo
>>> Controls:
>>> control[0]: 0x980913 ? Gain, 16:1:64, default 16
>>> control[1]: 0x9a0901 ? Exposure, Auto, 0:1:3, default 6
>>> control[2]: 0x9a0902 ? Exposure (Absolute), 1:1:2550, default 127
>>> resolutions of 2?? format=2
>>> frame rates of 1?? resolution=1
>>> Def. Res: 0 ? numb. fps:1
>>> --------------------------------------- device #0
>>> [ Default Input, Default Output ]
>>> Name ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?= /dev/dsp
>>> Host API ? ?? ?? ?? ?? ?? ?? ?? ?= OSS
>>> Max inputs = 16, Max outputs = 16
>>> Def. low input latency ? ?= ? ?? 0.012
>>> Def. low output latency ? = ? ?? 0.012
>>> Def. high input latency ? = ? ?? 0.046
>>> Def. high output latency = ? ?? 0.046
>>> Def. sample rate ? ?? ?? ?? ?= 44100.00
>>> --------------------------------------- device #1
>>> Name ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?= HDA Intel: ALC260 Analog (hw:0,0)
>>> Host API ? ?? ?? ?? ?? ?? ?? ?? ?= ALSA
>>> Max inputs = 2, Max outputs = 2
>>> Def. low input latency ? ?= ? ?? 0.012
>>> Def. low output latency ? = ? ?? 0.012
>>> Def. high input latency ? = ? ?? 0.046
>>> Def. high output latency = ? ?? 0.046
>>> Def. sample rate ? ?? ?? ?? ?= 44100.00
>>> --------------------------------------- device #2
>>> Name ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?= HDA Intel: ALC260 Digital (hw:0,1)
>>> Host API ? ?? ?? ?? ?? ?? ?? ?? ?= ALSA
>>> Max inputs = 0, Max outputs = 2
>>> Def. low input latency ? ?= ? ?-1.000
>>> Def. low output latency ? = ? ?? 0.012
>>> Def. high input latency ? = ? ?-1.000
>>> Def. high output latency = ? ?? 0.046
>>> Def. sample rate ? ?? ?? ?? ?= 44100.00
>>> --------------------------------------- device #3
>>> Name ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?= front
>>> Host API ? ?? ?? ?? ?? ?? ?? ?? ?= ALSA
>>> Max inputs = 0, Max outputs = 2
>>> Def. low input latency ? ?= ? ?-1.000
>>> Def. low output latency ? = ? ?? 0.012
>>> Def. high input latency ? = ? ?-1.000
>>> Def. high output latency = ? ?? 0.046
>>> Def. sample rate ? ?? ?? ?? ?= 44100.00
>>> --------------------------------------- device #4
>>> Name ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?= surround40
>>> Host API ? ?? ?? ?? ?? ?? ?? ?? ?= ALSA
>>> Max inputs = 0, Max outputs = 2
>>> Def. low input latency ? ?= ? ?-1.000
>>> Def. low output latency ? = ? ?? 0.012
>>> Def. high input latency ? = ? ?-1.000
>>> Def. high output latency = ? ?? 0.046
>>> Def. sample rate ? ?? ?? ?? ?= 44100.00
>>> --------------------------------------- device #5
>>> Name ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?= surround51
>>> Host API ? ?? ?? ?? ?? ?? ?? ?? ?= ALSA
>>> Max inputs = 0, Max outputs = 2
>>> Def. low input latency ? ?= ? ?-1.000
>>> Def. low output latency ? = ? ?? 0.012
>>> Def. high input latency ? = ? ?-1.000
>>> Def. high output latency = ? ?? 0.046
>>> Def. sample rate ? ?? ?? ?? ?= 44100.00
>>> --------------------------------------- device #6
>>> Name ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?= surround71
>>> Host API ? ?? ?? ?? ?? ?? ?? ?? ?= ALSA
>>> Max inputs = 0, Max outputs = 2
>>> Def. low input latency ? ?= ? ?-1.000
>>> Def. low output latency ? = ? ?? 0.012
>>> Def. high input latency ? = ? ?-1.000
>>> Def. high output latency = ? ?? 0.046
>>> Def. sample rate ? ?? ?? ?? ?= 44100.00
>>> --------------------------------------- device #7
>>> Name ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?= iec958
>>> Host API ? ?? ?? ?? ?? ?? ?? ?? ?= ALSA
>>> Max inputs = 0, Max outputs = 2
>>> Def. low input latency ? ?= ? ?-1.000
>>> Def. low output latency ? = ? ?? 0.012
>>> Def. high input latency ? = ? ?-1.000
>>> Def. high output latency = ? ?? 0.046
>>> Def. sample rate ? ?? ?? ?? ?= 44100.00
>>> --------------------------------------- device #8
>>> Name ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?= spdif
>>> Host API ? ?? ?? ?? ?? ?? ?? ?? ?= ALSA
>>> Max inputs = 0, Max outputs = 2
>>> Def. low input latency ? ?= ? ?-1.000
>>> Def. low output latency ? = ? ?? 0.012
>>> Def. high input latency ? = ? ?-1.000
>>> Def. high output latency = ? ?? 0.046
>>> Def. sample rate ? ?? ?? ?? ?= 44100.00
>>> --------------------------------------- device #9
>>> [ Default ALSA Input, Default ALSA Output ]
>>> Name ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?= default
>>> Host API ? ?? ?? ?? ?? ?? ?? ?? ?= ALSA
>>> Max inputs = 128, Max outputs = 128
>>> Def. low input latency ? ?= ? ?? 0.043
>>> Def. low output latency ? = ? ?? 0.043
>>> Def. high input latency ? = ? ?? 0.046
>>> Def. high output latency = ? ?? 0.046
>>> Def. sample rate ? ?? ?? ?? ?= 44100.00
>>> --------------------------------------- device #10
>>> Name ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?= dmix
>>> Host API ? ?? ?? ?? ?? ?? ?? ?? ?= ALSA
>>> Max inputs = 0, Max outputs = 2
>>> Def. low input latency ? ?= ? ?-1.000
>>> Def. low output latency ? = ? ?? 0.043
>>> Def. high input latency ? = ? ?-1.000
>>> Def. high output latency = ? ?? 0.043
>>> Def. sample rate ? ?? ?? ?? ?= 48000.00
>>> ----------------------------------------------
>>> SampleRate:0 Channels:0
>>> Video driver: x11
>>> A window manager is available
>>>
>>>
>>>
>>> 2009/3/9 Paulo Assis <pj.assis at gmail.com>:
>>>
>>>> For the list (I keep pressing the reply button, and forget to change the
>>>> address)
>>>>
>>>> Sebastian,
>>>>
>>>> Sebastian Scherer escreveu:
>>>>
>>>>> Hi,
>>>>> Thank you for your replies. I tried guvcview with both formats but the
>>>>> output seems to be the same. It would be fine with me to manually
>>>>> correct the output.
>>>>>
>>>>>
>>>>>
>>>> What is the console output from guvcview --verbose ?
>>>> Setting an unsupported device format would only make guvcview drop back
>>>> to the first supported device format.
>>>>
>>>>
>>>>> However I would really like to capture the full resolution images.
>>>>> How can I use capture still images?
>>>>>
>>>>>
>>>>>
>>>> I don't think that's implemented in linux uvc.
>>>>
>>>>
>>>>
>>>>> Also the 372 does not really make sense because this should not be a
>>>>> frame size that is supported by the camera. Maybe halving the size
>>>>> messes up the encoding?
>>>>> Thank you
>>>>>
>>>>>
>>>>>
>>>> Your best bet is to grab a RAW frame and try to analyse it.
>>>> I would say that the 372 pix line needs to be converted to 744, UYVY has
>>>> 2 bytes per pixel, although you need 4 bytes to render 2 pixels, in this
>>>> case it seems you are getting a format with 1 byte per pixel.
>>>>
>>>>> Sebastian
>>>>>
>>>>>
>>>>> 2009/3/9 Paulo Assis <pj.assis at gmail.com>:
>>>>>
>>>>>
>>>>>> Sebastien, I've taken another look at luvcview output and it reports
>>>>>> UYVY not YUYV, luvcview doesn't support this format I believe,
>>>>>> you should try the latest version from guvcview (1.0.2), and see if
>>>>>> outputs the frame correctly.
>>>>>>
>>>>>> Best regards,
>>>>>> Paulo
>>>>>>
>>>>>> Sebastian Scherer escreveu:
>>>>>>
>>>>>>
>>>>>>> Hi,
>>>>>>> After looking a little more carefully it might be that the resolution
>>>>>>> problem is related to de-bayering.
>>>>>>> I uploaded a sample image captured from the video:
>>>>>>> http://www.frc.ri.cmu.edu/~basti/01-20090306125232-17.jpg
>>>>>>>
>>>>>>> Does anybody have any insight what the problem could be?
>>>>>>>
>>>>>>> I downloaded the latest drivers and used them on Ubuntu 8.10 but the
>>>>>>> problem persists.
>>>>>>> Thank you
>>>>>>>
>>>>>>> Sebastian
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> Hi,
>>>>>>>> I have a problem with this camera.
>>>>>>>> http://www.theimagingsource.com/en_US/products/oem-cameras/usb-cmos-color/dfm21auc03ml/
>>>>>>>> It shows a picture but I cannot set the frame size and resolution of
>>>>>>>> the camera. The camera supports
>>>>>>>> 60 frames per second and a resolution of 744x480 YUV2. However I
>>>>>>>> always get 372x480 and the colors are wrong.
>>>>>>>>
>>>>>>>> This is what dmesg reports:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> [179400.340015] usb 6-1: new high speed USB device using ehci_hcd and address 3
>>>>>>>> [179400.777492] usb 6-1: configuration #1 chosen from 1 choice
>>>>>>>> [179400.777790] uvcvideo: Found UVC 1.00 device DFx 21AUC03 (199e:8202)
>>>>>>>> [179401.306390] input: DFx 21AUC03 as
>>>>>>>> /devices/pci0000:00/0000:00:1a.7/usb6/6-1/6-1:1.0/input/input7
>>>>>>>>
>>>>>>>> This is whalt lsusb reports:
>>>>>>>> Bus 006 Device 003: ID 199e:8202 The Imaging Source Europe GmbH
>>>>>>>> Device Descriptor:
>>>>>>>> ? bLength ? ?? ?? ?? ?? ?? ?? ?? 18
>>>>>>>> ? bDescriptorType ? ?? ?? ?? ?1
>>>>>>>> ? bcdUSB ? ?? ?? ?? ?? ?? ?? ?2.00
>>>>>>>> ? bDeviceClass ? ?? ?? ?? ?? 239 Miscellaneous Device
>>>>>>>> ? bDeviceSubClass ? ?? ?? ?? ?2 ?
>>>>>>>> ? bDeviceProtocol ? ?? ?? ?? ?1 Interface Association
>>>>>>>> ? bMaxPacketSize0 ? ?? ?? ?? 64
>>>>>>>> ? idVendor ? ?? ?? ?? ?? ?0x199e The Imaging Source Europe GmbH
>>>>>>>> ? idProduct ? ?? ?? ?? ?? 0x8202
>>>>>>>> ? bcdDevice ? ?? ?? ?? ?? ?? 8.13
>>>>>>>> ? iManufacturer ? ?? ?? ?? ?? ?2 The Imaging Source Europe GmbH
>>>>>>>> ? iProduct ? ?? ?? ?? ?? ?? ?? ?? 1 DFx 21AUC03
>>>>>>>> ? iSerial ? ?? ?? ?? ?? ?? ?? ?? ?3 38800104
>>>>>>>> ? bNumConfigurations ? ?? ?? 1
>>>>>>>> ? Configuration Descriptor:
>>>>>>>> ? ?? bLength ? ?? ?? ?? ?? ?? ?? ?? ?9
>>>>>>>> ? ?? bDescriptorType ? ?? ?? ?? ?2
>>>>>>>> ? ?? wTotalLength ? ?? ?? ?? ?? 349
>>>>>>>> ? ?? bNumInterfaces ? ?? ?? ?? ?? 2
>>>>>>>> ? ?? bConfigurationValue ? ?? ?1
>>>>>>>> ? ?? iConfiguration ? ?? ?? ?? ?? 0
>>>>>>>> ? ?? bmAttributes ? ?? ?? ?? ?0x80
>>>>>>>> ? ?? ?? (Bus Powered)
>>>>>>>> ? ?? MaxPower ? ?? ?? ?? ?? ?? ?? 500mA
>>>>>>>> ? ?? Interface Association:
>>>>>>>> ? ?? ?? bLength ? ?? ?? ?? ?? ?? ?? ?? ?8
>>>>>>>> ? ?? ?? bDescriptorType ? ?? ?? ?? 11
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>> ? ?? ?? bFirstInterface ? ?? ?? ?? ?0
>>>>>>> ? ?? ?? bInterfaceCount ? ?? ?? ?? ?2
>>>>>>> ? ?? ?? bFunctionClass ? ?? ?? ?? ?14 Video
>>>>>>> ? ?? ?? bFunctionSubClass ? ?? ?? ?3 Video Interface Collection
>>>>>>> ? ?? ?? bFunctionProtocol ? ?? ?? ?0
>>>>>>> ? ?? ?? iFunction ? ?? ?? ?? ?? ?? ?? ?0
>>>>>>> ? ?? Interface Descriptor:
>>>>>>> ? ?? ?? bLength ? ?? ?? ?? ?? ?? ?? ?? ?9
>>>>>>> ? ?? ?? bDescriptorType ? ?? ?? ?? ?4
>>>>>>> ? ?? ?? bInterfaceNumber ? ?? ?? ?? 0
>>>>>>> ? ?? ?? bAlternateSetting ? ?? ?? ?0
>>>>>>> ? ?? ?? bNumEndpoints ? ?? ?? ?? ?? ?1
>>>>>>> ? ?? ?? bInterfaceClass ? ?? ?? ?? 14 Video
>>>>>>> ? ?? ?? bInterfaceSubClass ? ?? ?? 1 Video Control
>>>>>>> ? ?? ?? bInterfaceProtocol ? ?? ?? 0
>>>>>>> ? ?? ?? iInterface ? ?? ?? ?? ?? ?? ?? 0
>>>>>>> ? ?? ?? VideoControl Interface Descriptor:
>>>>>>> ? ?? ?? ?? bLength ? ?? ?? ?? ?? ?? ?? ?? 13
>>>>>>> ? ?? ?? ?? bDescriptorType ? ?? ?? ?? 36
>>>>>>> ? ?? ?? ?? bDescriptorSubtype ? ?? ?? 1 (HEADER)
>>>>>>> ? ?? ?? ?? bcdUVC ? ?? ?? ?? ?? ?? ?? ?1.00
>>>>>>> ? ?? ?? ?? wTotalLength ? ?? ?? ?? ?? ?78
>>>>>>> ? ?? ?? ?? dwClockFrequency ? ?? ?? ?? 6.000000MHz
>>>>>>> ? ?? ?? ?? bInCollection ? ?? ?? ?? ?? ?1
>>>>>>> ? ?? ?? ?? baInterfaceNr( 0) ? ?? ?? ?1
>>>>>>> ? ?? ?? VideoControl Interface Descriptor:
>>>>>>> ? ?? ?? ?? bLength ? ?? ?? ?? ?? ?? ?? ?? 18
>>>>>>> ? ?? ?? ?? bDescriptorType ? ?? ?? ?? 36
>>>>>>> ? ?? ?? ?? bDescriptorSubtype ? ?? ?? 2 (INPUT_TERMINAL)
>>>>>>> ? ?? ?? ?? bTerminalID ? ?? ?? ?? ?? ?? ?1
>>>>>>> ? ?? ?? ?? wTerminalType ? ?? ?? 0x0201 Camera Sensor
>>>>>>> ? ?? ?? ?? bAssocTerminal ? ?? ?? ?? ?? 0
>>>>>>> ? ?? ?? ?? iTerminal ? ?? ?? ?? ?? ?? ?? ?0
>>>>>>> ? ?? ?? ?? wObjectiveFocalLengthMin ? ?? ?? 0
>>>>>>> ? ?? ?? ?? wObjectiveFocalLengthMax ? ?? ?? 0
>>>>>>> ? ?? ?? ?? wOcularFocalLength ? ?? ?? ?? ?? ?? 0
>>>>>>> ? ?? ?? ?? bControlSize ? ?? ?? ?? ?? ?? ?? ?? ?? 3
>>>>>>> ? ?? ?? ?? bmControls ? ?? ?? ?? ?? ?0x0000001a
>>>>>>> ? ?? ?? ?? ?? Auto-Exposure Mode
>>>>>>> ? ?? ?? ?? ?? Exposure Time (Absolute)
>>>>>>> ? ?? ?? ?? ?? Exposure Time (Relative)
>>>>>>> ? ?? ?? VideoControl Interface Descriptor:
>>>>>>> ? ?? ?? ?? bLength ? ?? ?? ?? ?? ?? ?? ?? 12
>>>>>>> ? ?? ?? ?? bDescriptorType ? ?? ?? ?? 36
>>>>>>> ? ?? ?? ?? bDescriptorSubtype ? ?? ?? 5 (PROCESSING_UNIT)
>>>>>>> ? ?? ?? Warning: Descriptor too short
>>>>>>> ? ?? ?? ?? bUnitID ? ?? ?? ?? ?? ?? ?? ?? ?3
>>>>>>> ? ?? ?? ?? bSourceID ? ?? ?? ?? ?? ?? ?? ?1
>>>>>>> ? ?? ?? ?? wMaxMultiplier ? ?? ?? ?? ?? 0
>>>>>>> ? ?? ?? ?? bControlSize ? ?? ?? ?? ?? ?? 3
>>>>>>> ? ?? ?? ?? bmControls ? ?? ?0x00000200
>>>>>>> ? ?? ?? ?? ?? Gain
>>>>>>> ? ?? ?? ?? iProcessing ? ?? ?? ?? ?? ?? ?0
>>>>>>> ? ?? ?? ?? bmVideoStandards ? ?? ?0x1a
>>>>>>> ? ?? ?? ?? ?? NTSC - 525/60
>>>>>>> ? ?? ?? ?? ?? SECAM - 625/50
>>>>>>> ? ?? ?? ?? ?? NTSC - 625/50
>>>>>>> ? ?? ?? VideoControl Interface Descriptor:
>>>>>>> ? ?? ?? ?? bLength ? ?? ?? ?? ?? ?? ?? ?? 26
>>>>>>> ? ?? ?? ?? bDescriptorType ? ?? ?? ?? 36
>>>>>>> ? ?? ?? ?? bDescriptorSubtype ? ?? ?? 6 (EXTENSION_UNIT)
>>>>>>> ? ?? ?? ?? bUnitID ? ?? ?? ?? ?? ?? ?? ?? ?4
>>>>>>> ? ?? ?? ?? guidExtensionCode ? ?? ?? ?? ?{2652215a-8932-5641-894a-5c557cdf9664}
>>>>>>> ? ?? ?? ?? bNumControl ? ?? ?? ?? ?? ?? ?4
>>>>>>> ? ?? ?? ?? bNrPins ? ?? ?? ?? ?? ?? ?? ?? ?1
>>>>>>> ? ?? ?? ?? baSourceID( 0) ? ?? ?? ?? ?? 3
>>>>>>> ? ?? ?? ?? bControlSize ? ?? ?? ?? ?? ?? 1
>>>>>>> ? ?? ?? ?? bmControls( 0) ? ?? ?? ?0x1f
>>>>>>> ? ?? ?? ?? iExtension ? ?? ?? ?? ?? ?? ?? 0
>>>>>>> ? ?? ?? VideoControl Interface Descriptor:
>>>>>>> ? ?? ?? ?? bLength ? ?? ?? ?? ?? ?? ?? ?? ?9
>>>>>>> ? ?? ?? ?? bDescriptorType ? ?? ?? ?? 36
>>>>>>> ? ?? ?? ?? bDescriptorSubtype ? ?? ?? 3 (OUTPUT_TERMINAL)
>>>>>>> ? ?? ?? ?? bTerminalID ? ?? ?? ?? ?? ?? ?2
>>>>>>> ? ?? ?? ?? wTerminalType ? ?? ?? 0x0101 USB Streaming
>>>>>>> ? ?? ?? ?? bAssocTerminal ? ?? ?? ?? ?? 0
>>>>>>> ? ?? ?? ?? bSourceID ? ?? ?? ?? ?? ?? ?? ?4
>>>>>>> ? ?? ?? ?? iTerminal ? ?? ?? ?? ?? ?? ?? ?0
>>>>>>> ? ?? ?? Endpoint Descriptor:
>>>>>>> ? ?? ?? ?? bLength ? ?? ?? ?? ?? ?? ?? ?? ?7
>>>>>>> ? ?? ?? ?? bDescriptorType ? ?? ?? ?? ?5
>>>>>>> ? ?? ?? ?? bEndpointAddress ? ?? ?0x81 ? EP 1 IN
>>>>>>> ? ?? ?? ?? bmAttributes ? ?? ?? ?? ?? ?? 3
>>>>>>> ? ?? ?? ?? ?? Transfer Type ? ?? ?? ?? ?? ?? Interrupt
>>>>>>> ? ?? ?? ?? ?? Synch Type ? ?? ?? ?? ?? ?? ?? ?None
>>>>>>> ? ?? ?? ?? ?? Usage Type ? ?? ?? ?? ?? ?? ?? ?Data
>>>>>>> ? ?? ?? ?? wMaxPacketSize ? ?? ?0x0008 ? 1x 8 bytes
>>>>>>> ? ?? ?? ?? bInterval ? ?? ?? ?? ?? ?? ?? ?9
>>>>>>> ? ?? Interface Descriptor:
>>>>>>> ? ?? ?? bLength ? ?? ?? ?? ?? ?? ?? ?? ?9
>>>>>>> ? ?? ?? bDescriptorType ? ?? ?? ?? ?4
>>>>>>> ? ?? ?? bInterfaceNumber ? ?? ?? ?? 1
>>>>>>> ? ?? ?? bAlternateSetting ? ?? ?? ?0
>>>>>>> ? ?? ?? bNumEndpoints ? ?? ?? ?? ?? ?1
>>>>>>> ? ?? ?? bInterfaceClass ? ?? ?? ?? 14 Video
>>>>>>> ? ?? ?? bInterfaceSubClass ? ?? ?? 2 Video Streaming
>>>>>>> ? ?? ?? bInterfaceProtocol ? ?? ?? 0
>>>>>>> ? ?? ?? iInterface ? ?? ?? ?? ?? ?? ?? 0
>>>>>>> ? ?? ?? VideoStreaming Interface Descriptor:
>>>>>>> ? ?? ?? ?? bLength ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 15
>>>>>>> ? ?? ?? ?? bDescriptorType ? ?? ?? ?? ?? ?? ?? ?? ?? ?? 36
>>>>>>> ? ?? ?? ?? bDescriptorSubtype ? ?? ?? ?? ?? ?? ?? ?? ?? 1 (INPUT_HEADER)
>>>>>>> ? ?? ?? ?? bNumFormats ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 2
>>>>>>> ? ?? ?? ?? wTotalLength ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 217
>>>>>>> ? ?? ?? ?? bEndPointAddress ? ?? ?? ?? ?? ?? ?? ?? ?? 130
>>>>>>> ? ?? ?? ?? bmInfo ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 0
>>>>>>> ? ?? ?? ?? bTerminalLink ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?2
>>>>>>> ? ?? ?? ?? bStillCaptureMethod ? ?? ?? ?? ?? ?? ?? ?? ?2
>>>>>>> ? ?? ?? ?? bTriggerSupport ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?1
>>>>>>> ? ?? ?? ?? bTriggerUsage ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?0
>>>>>>> ? ?? ?? ?? bControlSize ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 1
>>>>>>> ? ?? ?? ?? bmaControls( 0) ? ?? ?? ?? ?? ?? ?? ?? ?? ?? 27
>>>>>>> ? ?? ?? ?? bmaControls( 1) ? ?? ?? ?? ?? ?? ?? ?? ?? ?? 27
>>>>>>> ? ?? ?? VideoStreaming Interface Descriptor:
>>>>>>> ? ?? ?? ?? bLength ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 27
>>>>>>> ? ?? ?? ?? bDescriptorType ? ?? ?? ?? ?? ?? ?? ?? ?? ?? 36
>>>>>>> ? ?? ?? ?? bDescriptorSubtype ? ?? ?? ?? ?? ?? ?? ?? ?? 4 (FORMAT_UNCOMPRESSED)
>>>>>>> ? ?? ?? ?? bFormatIndex ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 1
>>>>>>> ? ?? ?? ?? bNumFrameDescriptors ? ?? ?? ?? ?? ?? ?? ?? 2
>>>>>>> ? ?? ?? ?? guidFormat
>>>>>>> {59555932-0000-1000-8000-00aa00389b71}
>>>>>>> ? ?? ?? ?? bBitsPerPixel ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 16
>>>>>>> ? ?? ?? ?? bDefaultFrameIndex ? ?? ?? ?? ?? ?? ?? ?? ?? 1
>>>>>>> ? ?? ?? ?? bAspectRatioX ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?0
>>>>>>> ? ?? ?? ?? bAspectRatioY ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?0
>>>>>>> ? ?? ?? ?? bmInterlaceFlags ? ?? ?? ?? ?? ?? ?? ?? ?0x00
>>>>>>> ? ?? ?? ?? ?? Interlaced stream or variable: No
>>>>>>> ? ?? ?? ?? ?? Fields per frame: 1 fields
>>>>>>> ? ?? ?? ?? ?? Field 1 first: No
>>>>>>> ? ?? ?? ?? ?? Field pattern: Field 1 only
>>>>>>> ? ?? ?? ?? ?? bCopyProtect ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 0
>>>>>>> ? ?? ?? VideoStreaming Interface Descriptor:
>>>>>>> ? ?? ?? ?? bLength ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 30
>>>>>>> ? ?? ?? ?? bDescriptorType ? ?? ?? ?? ?? ?? ?? ?? ?? ?? 36
>>>>>>> ? ?? ?? ?? bDescriptorSubtype ? ?? ?? ?? ?? ?? ?? ?? ?? 5 (FRAME_UNCOMPRESSED)
>>>>>>> ? ?? ?? ?? bFrameIndex ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?1
>>>>>>> ? ?? ?? ?? bmCapabilities ? ?? ?? ?? ?? ?? ?? ?? ?? ?0x00
>>>>>>> ? ?? ?? ?? ?? Still image unsupported
>>>>>>> ? ?? ?? ?? wWidth ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 372
>>>>>>> ? ?? ?? ?? wHeight ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?480
>>>>>>> ? ?? ?? ?? dwMinBitRate ? ?? ?? ?? ?? ?? ?? ?? 838992000
>>>>>>> ? ?? ?? ?? dwMaxBitRate ? ?? ?? ?? ?? ?? ?? ?? 838992000
>>>>>>> ? ?? ?? ?? dwMaxVideoFrameBufferSize ? ?? ?? 786432
>>>>>>> ? ?? ?? ?? dwDefaultFrameInterval ? ?? ?? ?? ?333333
>>>>>>> ? ?? ?? ?? bFrameIntervalType ? ?? ?? ?? ?? ?? ?? ?? ?? 1
>>>>>>> ? ?? ?? ?? dwFrameInterval( 0) ? ?? ?? ?? ?? ?? 333333
>>>>>>> ? ?? ?? VideoStreaming Interface Descriptor:
>>>>>>> ? ?? ?? ?? bLength ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 30
>>>>>>> ? ?? ?? ?? bDescriptorType ? ?? ?? ?? ?? ?? ?? ?? ?? ?? 36
>>>>>>> ? ?? ?? ?? bDescriptorSubtype ? ?? ?? ?? ?? ?? ?? ?? ?? 5 (FRAME_UNCOMPRESSED)
>>>>>>> ? ?? ?? ?? bFrameIndex ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?2
>>>>>>> ? ?? ?? ?? bmCapabilities ? ?? ?? ?? ?? ?? ?? ?? ?? ?0x00
>>>>>>> ? ?? ?? ?? ?? Still image unsupported
>>>>>>> ? ?? ?? ?? wWidth ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 320
>>>>>>> ? ?? ?? ?? wHeight ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?480
>>>>>>> ? ?? ?? ?? dwMinBitRate ? ?? ?? ?? ?? ?? ?? ?? 838992000
>>>>>>> ? ?? ?? ?? dwMaxBitRate ? ?? ?? ?? ?? ?? ?? ?? 838992000
>>>>>>> ? ?? ?? ?? dwMaxVideoFrameBufferSize ? ?? ?? 786432
>>>>>>> ? ?? ?? ?? dwDefaultFrameInterval ? ?? ?? ?? ?333333
>>>>>>> ? ?? ?? ?? bFrameIntervalType ? ?? ?? ?? ?? ?? ?? ?? ?? 1
>>>>>>> ? ?? ?? ?? dwFrameInterval( 0) ? ?? ?? ?? ?? ?? 333333
>>>>>>> ? ?? ?? VideoStreaming Interface Descriptor:
>>>>>>> ? ?? ?? ?? bLength ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 11
>>>>>>> ? ?? ?? ?? bDescriptorType ? ?? ?? ?? ?? ?? ?? ?? ?? ?? 36
>>>>>>> ? ?? ?? ?? bDescriptorSubtype ? ?? ?? ?? ?? ?? ?? ?? ?? 3 (STILL_IMAGE_FRAME)
>>>>>>> ? ?? ?? ?? bEndpointAddress ? ?? ?? ?? ?? ?? ?? ?? ?? ?? 0
>>>>>>> ? ?? ?? ?? bNumImageSizePatterns ? ?? ?? ?? ?? ?? ?? ?1
>>>>>>> ? ?? ?? ?? wWidth( 0) ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 744
>>>>>>> ? ?? ?? ?? wHeight( 0) ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?480
>>>>>>> ? ?? ?? ?? bNumCompressionPatterns ? ?? ?? ?? ?? ?? ?1
>>>>>>> ? ?? ?? ?? bCompression( 0) ? ?? ?? ?? ?? ?? ?? ?? ?? ?? 0
>>>>>>> ? ?? ?? VideoStreaming Interface Descriptor:
>>>>>>> ? ?? ?? ?? bLength ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 27
>>>>>>> ? ?? ?? ?? bDescriptorType ? ?? ?? ?? ?? ?? ?? ?? ?? ?? 36
>>>>>>> ? ?? ?? ?? bDescriptorSubtype ? ?? ?? ?? ?? ?? ?? ?? ?? 4 (FORMAT_UNCOMPRESSED)
>>>>>>> ? ?? ?? ?? bFormatIndex ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 2
>>>>>>> ? ?? ?? ?? bNumFrameDescriptors ? ?? ?? ?? ?? ?? ?? ?? 2
>>>>>>> ? ?? ?? ?? guidFormat
>>>>>>> {55595659-0000-1000-8000-00aa00389b71}
>>>>>>> ? ?? ?? ?? bBitsPerPixel ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 16
>>>>>>> ? ?? ?? ?? bDefaultFrameIndex ? ?? ?? ?? ?? ?? ?? ?? ?? 1
>>>>>>> ? ?? ?? ?? bAspectRatioX ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?0
>>>>>>> ? ?? ?? ?? bAspectRatioY ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?0
>>>>>>> ? ?? ?? ?? bmInterlaceFlags ? ?? ?? ?? ?? ?? ?? ?? ?0x00
>>>>>>> ? ?? ?? ?? ?? Interlaced stream or variable: No
>>>>>>> ? ?? ?? ?? ?? Fields per frame: 1 fields
>>>>>>> ? ?? ?? ?? ?? Field 1 first: No
>>>>>>> ? ?? ?? ?? ?? Field pattern: Field 1 only
>>>>>>> ? ?? ?? ?? ?? bCopyProtect ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 0
>>>>>>> ? ?? ?? VideoStreaming Interface Descriptor:
>>>>>>> ? ?? ?? ?? bLength ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 30
>>>>>>> ? ?? ?? ?? bDescriptorType ? ?? ?? ?? ?? ?? ?? ?? ?? ?? 36
>>>>>>> ? ?? ?? ?? bDescriptorSubtype ? ?? ?? ?? ?? ?? ?? ?? ?? 5 (FRAME_UNCOMPRESSED)
>>>>>>> ? ?? ?? ?? bFrameIndex ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?1
>>>>>>> ? ?? ?? ?? bmCapabilities ? ?? ?? ?? ?? ?? ?? ?? ?? ?0x00
>>>>>>> ? ?? ?? ?? ?? Still image unsupported
>>>>>>> ? ?? ?? ?? wWidth ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 372
>>>>>>> ? ?? ?? ?? wHeight ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?480
>>>>>>> ? ?? ?? ?? dwMinBitRate ? ?? ?? ?? ?? ?? ?? ?? 838992000
>>>>>>> ? ?? ?? ?? dwMaxBitRate ? ?? ?? ?? ?? ?? ?? ?? 838992000
>>>>>>> ? ?? ?? ?? dwMaxVideoFrameBufferSize ? ?? ?? 786432
>>>>>>> ? ?? ?? ?? dwDefaultFrameInterval ? ?? ?? ?? ?333333
>>>>>>> ? ?? ?? ?? bFrameIntervalType ? ?? ?? ?? ?? ?? ?? ?? ?? 1
>>>>>>> ? ?? ?? ?? dwFrameInterval( 0) ? ?? ?? ?? ?? ?? 333333
>>>>>>> ? ?? ?? VideoStreaming Interface Descriptor:
>>>>>>> ? ?? ?? ?? bLength ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 30
>>>>>>> ? ?? ?? ?? bDescriptorType ? ?? ?? ?? ?? ?? ?? ?? ?? ?? 36
>>>>>>> ? ?? ?? ?? bDescriptorSubtype ? ?? ?? ?? ?? ?? ?? ?? ?? 5 (FRAME_UNCOMPRESSED)
>>>>>>> ? ?? ?? ?? bFrameIndex ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?2
>>>>>>> ? ?? ?? ?? bmCapabilities ? ?? ?? ?? ?? ?? ?? ?? ?? ?0x00
>>>>>>> ? ?? ?? ?? ?? Still image unsupported
>>>>>>> ? ?? ?? ?? wWidth ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 320
>>>>>>> ? ?? ?? ?? wHeight ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?480
>>>>>>> ? ?? ?? ?? dwMinBitRate ? ?? ?? ?? ?? ?? ?? ?? 838992000
>>>>>>> ? ?? ?? ?? dwMaxBitRate ? ?? ?? ?? ?? ?? ?? ?? 838992000
>>>>>>> ? ?? ?? ?? dwMaxVideoFrameBufferSize ? ?? ?? 786432
>>>>>>> ? ?? ?? ?? dwDefaultFrameInterval ? ?? ?? ?? ?333333
>>>>>>> ? ?? ?? ?? bFrameIntervalType ? ?? ?? ?? ?? ?? ?? ?? ?? 1
>>>>>>> ? ?? ?? ?? dwFrameInterval( 0) ? ?? ?? ?? ?? ?? 333333
>>>>>>> ? ?? ?? VideoStreaming Interface Descriptor:
>>>>>>> ? ?? ?? ?? bLength ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 11
>>>>>>> ? ?? ?? ?? bDescriptorType ? ?? ?? ?? ?? ?? ?? ?? ?? ?? 36
>>>>>>> ? ?? ?? ?? bDescriptorSubtype ? ?? ?? ?? ?? ?? ?? ?? ?? 3 (STILL_IMAGE_FRAME)
>>>>>>> ? ?? ?? ?? bEndpointAddress ? ?? ?? ?? ?? ?? ?? ?? ?? ?? 0
>>>>>>> ? ?? ?? ?? bNumImageSizePatterns ? ?? ?? ?? ?? ?? ?? ?1
>>>>>>> ? ?? ?? ?? wWidth( 0) ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? 744
>>>>>>> ? ?? ?? ?? wHeight( 0) ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?480
>>>>>>> ? ?? ?? ?? bNumCompressionPatterns ? ?? ?? ?? ?? ?? ?1
>>>>>>> ? ?? ?? ?? bCompression( 0) ? ?? ?? ?? ?? ?? ?? ?? ?? ?? 0
>>>>>>> ? ?? ?? VideoStreaming Interface Descriptor:
>>>>>>> ? ?? ?? ?? bLength ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?6
>>>>>>> ? ?? ?? ?? bDescriptorType ? ?? ?? ?? ?? ?? ?? ?? ?? ?? 36
>>>>>>> ? ?? ?? ?? bDescriptorSubtype ? ?? ?? ?? ?? ?? ?? ?? ?13 (COLORFORMAT)
>>>>>>> ? ?? ?? ?? bColorPrimaries ? ?? ?? ?? ?? ?? ?? ?? ?? ?? ?0 (Unspecified)
>>>>>>> ? ?? ?? ?? bTransferCharacteristics ? ?? ?? ?? ?? ?? 0 (Unspecified)
>>>>>>> ? ?? ?? ?? bMatrixCoefficients ? ?? ?? ?? ?? ?? ?? ?? ?0 (Unspecified)
>>>>>>> ? ?? ?? Endpoint Descriptor:
>>>>>>> ? ?? ?? ?? bLength ? ?? ?? ?? ?? ?? ?? ?? ?7
>>>>>>> ? ?? ?? ?? bDescriptorType ? ?? ?? ?? ?5
>>>>>>> ? ?? ?? ?? bEndpointAddress ? ?? ?0x82 ? EP 2 IN
>>>>>>> ? ?? ?? ?? bmAttributes ? ?? ?? ?? ?? ?? 2
>>>>>>> ? ?? ?? ?? ?? Transfer Type ? ?? ?? ?? ?? ?? Bulk
>>>>>>> ? ?? ?? ?? ?? Synch Type ? ?? ?? ?? ?? ?? ?? ?None
>>>>>>> ? ?? ?? ?? ?? Usage Type ? ?? ?? ?? ?? ?? ?? ?Data
>>>>>>> ? ?? ?? ?? wMaxPacketSize ? ?? ?0x0200 ? 1x 512 bytes
>>>>>>> ? ?? ?? ?? bInterval ? ?? ?? ?? ?? ?? ?? ?1
>>>>>>> Device Qualifier (for other device speed):
>>>>>>> ? bLength ? ?? ?? ?? ?? ?? ?? ?? 10
>>>>>>> ? bDescriptorType ? ?? ?? ?? ?6
>>>>>>> ? bcdUSB ? ?? ?? ?? ?? ?? ?? ?2.00
>>>>>>> ? bDeviceClass ? ?? ?? ?? ?? 239 Miscellaneous Device
>>>>>>> ? bDeviceSubClass ? ?? ?? ?? ?2 ?
>>>>>>> ? bDeviceProtocol ? ?? ?? ?? ?1 Interface Association
>>>>>>> ? bMaxPacketSize0 ? ?? ?? ?? 64
>>>>>>> ? bNumConfigurations ? ?? ?? 1
>>>>>>> Device Status: ? ?? ?0x0000
>>>>>>> ? (Bus Powered)
>>>>>>>
>>>>>>> This is what I get with lucview:
>>>>>>>
>>>>>>> luvcview 0.2.4
>>>>>>>
>>>>>>> SDL information:
>>>>>>> ? Video driver: x11
>>>>>>> ? A window manager is available
>>>>>>> Device information:
>>>>>>> ? Device path: ? /dev/video0
>>>>>>> Stream settings:
>>>>>>> ? Frame format: UYVY
>>>>>>> ? Frame size: ? ?372x480 (requested size 744x480 is not supported by device)
>>>>>>> ? Frame rate: ? ?30/1 fps (requested frame rate 60 fps is not supported by device)
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Thank you!
>>>>>>> _______________________________________________
>>>>>>> Linux-uvc-devel mailing list
>>>>>>> Linux-uvc-devel at lists.berlios.de
>>>>>>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>> _______________________________________________
>>>>>> Linux-uvc-devel mailing list
>>>>>> Linux-uvc-devel at lists.berlios.de
>>>>>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>> Best regards,
>>>> Paulo
>>>>
>>>>
>>>> _______________________________________________
>>>> Linux-uvc-devel mailing list
>>>> Linux-uvc-devel at lists.berlios.de
>>>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>>>
>>>>
>>>>
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>

From jelledejong at powercraft.nl  Thu Mar 12 22:09:04 2009
From: jelledejong at powercraft.nl (Jelle de Jong)
Date: Thu, 12 Mar 2009 22:09:04 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 9000,
 unable to get more then 5 fps when live recording, whats going on?
Message-ID: <49B979F0.1010308@powercraft.nl>

Hello everybody,

I bought a Logitech QuickCam Pro 9000[1] (80euro) to make a budget
free/libre open source live video recording systems from a laptop. But I
am unable to get more then 5 frames per seconds (fps) out of the webcam
under any resolution. The last 4 days I have been trying to get this
system to work both with webcam and a digital video camera on combisite1
of a usb video grabber.

The webcam only delivers 5 fps tops most time its lower is this normal
and what to do about is, should I buy an other webcam and witch one?

Please see the attachments for all good reports about fps and mencoder
and mplayer commands.

Thanks in advance for any help,

Best regards,

Jelle de Jong

$ lsusb
Bus 005 Device 011: ID 046d:0990 Logitech, Inc. QuickCam Pro 9000

$ sudo lsusb -d 046d:0990 -v | grep bcdDevice
bcdDevice            0.08

$ uname -a
Linux debian-eeepc 2.6.26-1-686 #1 SMP Sat Jan 10 18:29:31 UTC 2009 i686
GNU/Linux

[1]
http://www.logitech.com/index.cfm/webcam_communications/webcams/devices/3056&cl=us,en
[1]
http://www.quickcamteam.net/documentation/faq/how-many-versions-of-the-quickcam-pro-9000-are-there

-------------- next part --------------
A non-text attachment was scrubbed...
Name: reports.tar.gz
Type: application/gzip
Size: 6816 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090312/193f586e/attachment.bin>

From jelledejong at powercraft.nl  Thu Mar 12 22:59:12 2009
From: jelledejong at powercraft.nl (Jelle de Jong)
Date: Thu, 12 Mar 2009 22:59:12 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 9000,
 unable to get more then 5 fps when live recording, whats going on?
In-Reply-To: <49B98256.6040800@kolmann.at>
References: <49B979F0.1010308@powercraft.nl> <49B98256.6040800@kolmann.at>
Message-ID: <49B985B0.6010708@powercraft.nl>

Philipp Kolmann wrote:
> Jelle de Jong wrote:
>> Hello everybody,
>>
>> I bought a Logitech QuickCam Pro 9000[1] (80euro) to make a budget
>> free/libre open source live video recording systems from a laptop. But I
>> am unable to get more then 5 frames per seconds (fps) out of the webcam
>> under any resolution. The last 4 days I have been trying to get this
>> system to work both with webcam and a digital video camera on combisite1
>> of a usb video grabber.
>>
>> The webcam only delivers 5 fps tops most time its lower is this normal
>> and what to do about is, should I buy an other webcam and witch one?
>>
>> Please see the attachments for all good reports about fps and mencoder
>> and mplayer commands.
>>
>>   
> It seems you use eeepc. Did you test the cam with another PC? Is your 
> USB Port 1.1 or 2.0 (check with usbview).
> 
> I have several 9000 here and I don't have issues with debian and this cam.
> You might want to get latest uvcvideo kernel module, but this cam is 
> supported for a long time already.
> 
> hth,
> Philipp

Hi Philipp,

Thanks for responding, what version of the webcam do you have? I seem to
have a got a 0.08

My ports are usb 2.0 I did not test it with an other pc I only have
eeepc's around me.

Is there a debian package for the latest uvcvideo kernel module?

Could you test this command for me and show me the output: (especially fps)

mencoder tv:// -tv driver=v4l2:device=/dev/video0:fps=5 -ovc lavc
-lavcopts vcodec=mpeg4:vbitrate=2240:threads=2 -of rawvideo -o webcam4.mp4

Thanks in advance,

Jelle de Jong



From pj.assis at gmail.com  Fri Mar 13 10:10:14 2009
From: pj.assis at gmail.com (Paulo Assis)
Date: Fri, 13 Mar 2009 09:10:14 +0000
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 9000,
 unable to get more then 5 fps when live recording, whats going on?
In-Reply-To: <49B985B0.6010708@powercraft.nl>
References: <49B979F0.1010308@powercraft.nl> <49B98256.6040800@kolmann.at>
	<49B985B0.6010708@powercraft.nl>
Message-ID: <49BA22F6.6020302@gmail.com>

Jelle,
You must tick off the "Exposure, Auto Priority" control this is enable
by default and increases the exposure time (reducing fps) in order to
get a brighter picture.

Just use libwebcam or guvcview.

Best regards,
Paulo

Jelle de Jong escreveu:
> Philipp Kolmann wrote:
>   
>> Jelle de Jong wrote:
>>     
>>> Hello everybody,
>>>
>>> I bought a Logitech QuickCam Pro 9000[1] (80euro) to make a budget
>>> free/libre open source live video recording systems from a laptop. But I
>>> am unable to get more then 5 frames per seconds (fps) out of the webcam
>>> under any resolution. The last 4 days I have been trying to get this
>>> system to work both with webcam and a digital video camera on combisite1
>>> of a usb video grabber.
>>>
>>> The webcam only delivers 5 fps tops most time its lower is this normal
>>> and what to do about is, should I buy an other webcam and witch one?
>>>
>>> Please see the attachments for all good reports about fps and mencoder
>>> and mplayer commands.
>>>
>>>   
>>>       
>> It seems you use eeepc. Did you test the cam with another PC? Is your 
>> USB Port 1.1 or 2.0 (check with usbview).
>>
>> I have several 9000 here and I don't have issues with debian and this cam.
>> You might want to get latest uvcvideo kernel module, but this cam is 
>> supported for a long time already.
>>
>> hth,
>> Philipp
>>     
>
> Hi Philipp,
>
> Thanks for responding, what version of the webcam do you have? I seem to
> have a got a 0.08
>
> My ports are usb 2.0 I did not test it with an other pc I only have
> eeepc's around me.
>
> Is there a debian package for the latest uvcvideo kernel module?
>
> Could you test this command for me and show me the output: (especially fps)
>
> mencoder tv:// -tv driver=v4l2:device=/dev/video0:fps=5 -ovc lavc
> -lavcopts vcodec=mpeg4:vbitrate=2240:threads=2 -of rawvideo -o webcam4.mp4
>
> Thanks in advance,
>
> Jelle de Jong
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>   



From jelledejong at powercraft.nl  Fri Mar 13 13:40:59 2009
From: jelledejong at powercraft.nl (Jelle de Jong)
Date: Fri, 13 Mar 2009 13:40:59 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 9000,
 unable to get more then 5 fps when live recording, whats going on?
In-Reply-To: <49BA22F6.6020302@gmail.com>
References: <49B979F0.1010308@powercraft.nl>
	<49B98256.6040800@kolmann.at>	<49B985B0.6010708@powercraft.nl>
	<49BA22F6.6020302@gmail.com>
Message-ID: <49BA545B.5040305@powercraft.nl>

Paulo Assis wrote:
> Jelle,
> You must tick off the "Exposure, Auto Priority" control this is enable
> by default and increases the exposure time (reducing fps) in order to
> get a brighter picture.
> 
> Just use libwebcam or guvcview.
> 
> Best regards,
> Paulo
> 
> Jelle de Jong escreveu:
>> Philipp Kolmann wrote:
>>   
>>> Jelle de Jong wrote:
>>>     
>>>> Hello everybody,
>>>>
>>>> I bought a Logitech QuickCam Pro 9000[1] (80euro) to make a budget
>>>> free/libre open source live video recording systems from a laptop. But I
>>>> am unable to get more then 5 frames per seconds (fps) out of the webcam
>>>> under any resolution. The last 4 days I have been trying to get this
>>>> system to work both with webcam and a digital video camera on combisite1
>>>> of a usb video grabber.
>>>>
>>>> The webcam only delivers 5 fps tops most time its lower is this normal
>>>> and what to do about is, should I buy an other webcam and witch one?
>>>>
>>>> Please see the attachments for all good reports about fps and mencoder
>>>> and mplayer commands.
>>>>
>>>>   
>>>>       
>>> It seems you use eeepc. Did you test the cam with another PC? Is your 
>>> USB Port 1.1 or 2.0 (check with usbview).
>>>
>>> I have several 9000 here and I don't have issues with debian and this cam.
>>> You might want to get latest uvcvideo kernel module, but this cam is 
>>> supported for a long time already.
>>>
>>> hth,
>>> Philipp
>>>     
>> Hi Philipp,
>>
>> Thanks for responding, what version of the webcam do you have? I seem to
>> have a got a 0.08
>>
>> My ports are usb 2.0 I did not test it with an other pc I only have
>> eeepc's around me.
>>
>> Is there a debian package for the latest uvcvideo kernel module?
>>
>> Could you test this command for me and show me the output: (especially fps)
>>
>> mencoder tv:// -tv driver=v4l2:device=/dev/video0:fps=5 -ovc lavc
>> -lavcopts vcodec=mpeg4:vbitrate=2240:threads=2 -of rawvideo -o webcam4.mp4
>>
>> Thanks in advance,
>>
>> Jelle de Jong
>>

Hello Paulo,

Thank you for your response.

I now see whats happening, the fps drops to around 5fps when the
environment is dark and goes to around 30fps when the environment is bright.

I changed Exposure, Auto Priority to 0 and now I seem to have an higher
stable fps.

It also seems that when recording to disk the fps also drop form say
30fps to 10fps but the cpu load and mem use is very low, is this normal?

I have installed guvcview and played a bit with the many controls. The
commandline shows a lot of errors, and the webcam responses very weird,
when trying to change the settings most things fail. I have attached the
guvcview.log.

How can I control the webcam with standardized v4l2 controls?

I want to use a webcam to record live images that move and have different
light environments, so the webcam has to adjust automatically to output
the best possible images. Is this a very hard thing to ask? I am willing
to buy a new device the only demands are usb interface and full v4l2
support. I have no idea of what is a good usb camera and what is not is
the QuickCam Pro 9000 the best one available? (200euro budget)

Is there a some anti shakiness feature like photo and video cameras have.
I kind of have shocking hands when video recording?

Is there also some feature to say well do auto exposure but make sure it
does not go below 20 fps?

So now I use the following command to record with the webcam:
mencoder tv:// -tv
driver=v4l2:device=/dev/video0:adevice=/dev/dsp1:immediatemode=0:forceaudio:width=800:height=600:fps=25
-oac lavc -lavcopts acodec=libmp3lame:abitrate=128 -ovc lavc -lavcopts
vcodec=mpeg4:vbitrate=2240:threads=2 -of lavf -lavfopts format=avi -o
webcam5.avi

but the output is 640x480 with 15 fps not the resolution and fps I
supplied with the mencoder command why is this and how to fix this using
mencoder to record? Please also see the attached webcam5.log.

Any help is welcome.

Thanks in advance,

Jelle de Jong
-------------- next part --------------
A non-text attachment was scrubbed...
Name: reports1.tar.gz
Type: application/gzip
Size: 8377 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090313/47fdd92e/attachment.bin>

From pj.assis at gmail.com  Fri Mar 13 14:45:05 2009
From: pj.assis at gmail.com (Paulo Assis)
Date: Fri, 13 Mar 2009 13:45:05 +0000
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 9000,
 unable to get more then 5 fps when live recording, whats going on?
In-Reply-To: <49BA545B.5040305@powercraft.nl>
References: <49B979F0.1010308@powercraft.nl>
	<49B98256.6040800@kolmann.at>	<49B985B0.6010708@powercraft.nl>
	<49BA22F6.6020302@gmail.com> <49BA545B.5040305@powercraft.nl>
Message-ID: <49BA6361.3050107@gmail.com>

Jelle,

Jelle de Jong escreveu:
> Paulo Assis wrote:
>   
>> Jelle,
>> You must tick off the "Exposure, Auto Priority" control this is enable
>> by default and increases the exposure time (reducing fps) in order to
>> get a brighter picture.
>>
>> Just use libwebcam or guvcview.
>>
>> Best regards,
>> Paulo
>>
>> Jelle de Jong escreveu:
>>     
>>> Philipp Kolmann wrote:
>>>   
>>>       
>>>> Jelle de Jong wrote:
>>>>     
>>>>         
>>>>> Hello everybody,
>>>>>
>>>>> I bought a Logitech QuickCam Pro 9000[1] (80euro) to make a budget
>>>>> free/libre open source live video recording systems from a laptop. But I
>>>>> am unable to get more then 5 frames per seconds (fps) out of the webcam
>>>>> under any resolution. The last 4 days I have been trying to get this
>>>>> system to work both with webcam and a digital video camera on combisite1
>>>>> of a usb video grabber.
>>>>>
>>>>> The webcam only delivers 5 fps tops most time its lower is this normal
>>>>> and what to do about is, should I buy an other webcam and witch one?
>>>>>
>>>>> Please see the attachments for all good reports about fps and mencoder
>>>>> and mplayer commands.
>>>>>
>>>>>   
>>>>>       
>>>>>           
>>>> It seems you use eeepc. Did you test the cam with another PC? Is your 
>>>> USB Port 1.1 or 2.0 (check with usbview).
>>>>
>>>> I have several 9000 here and I don't have issues with debian and this cam.
>>>> You might want to get latest uvcvideo kernel module, but this cam is 
>>>> supported for a long time already.
>>>>
>>>> hth,
>>>> Philipp
>>>>     
>>>>         
>>> Hi Philipp,
>>>
>>> Thanks for responding, what version of the webcam do you have? I seem to
>>> have a got a 0.08
>>>
>>> My ports are usb 2.0 I did not test it with an other pc I only have
>>> eeepc's around me.
>>>
>>> Is there a debian package for the latest uvcvideo kernel module?
>>>
>>> Could you test this command for me and show me the output: (especially fps)
>>>
>>> mencoder tv:// -tv driver=v4l2:device=/dev/video0:fps=5 -ovc lavc
>>> -lavcopts vcodec=mpeg4:vbitrate=2240:threads=2 -of rawvideo -o webcam4.mp4
>>>
>>> Thanks in advance,
>>>
>>> Jelle de Jong
>>>
>>>       
>
> Hello Paulo,
>
> Thank you for your response.
>
> I now see whats happening, the fps drops to around 5fps when the
> environment is dark and goes to around 30fps when the environment is bright.
>
> I changed Exposure, Auto Priority to 0 and now I seem to have an higher
> stable fps.
>
> It also seems that when recording to disk the fps also drop form say
> 30fps to 10fps but the cpu load and mem use is very low, is this normal?
>
> I have installed guvcview and played a bit with the many controls. The
> commandline shows a lot of errors, and the webcam responses very weird,
> when trying to change the settings most things fail. I have attached the
> guvcview.log.
>
>   
The warnings you see under guvcview  are related to dynamic controls
(focus, LED control, ...) if you want these controls enabled you must
run guvcview as the root user at least once per session.

If you try to change let's say gain and you have auto gain set then this
will fail, the same for exposure and white balance.
 
Has for a fixed frame rate your best option with that model is using
manual exposure. Just choose an appropriate exposure setting and stick
with that.

> How can I control the webcam with standardized v4l2 controls?
>
>   
guvcview uses a standard v4l2 interface.
if you just want to use the controls, and capture video with some other
app. run:
guvcview --controls_only

> I want to use a webcam to record live images that move and have different
> light environments, so the webcam has to adjust automatically to output
> the best possible images. Is this a very hard thing to ask? I am willing
> to buy a new device the only demands are usb interface and full v4l2
> support. I have no idea of what is a good usb camera and what is not is
> the QuickCam Pro 9000 the best one available? (200euro budget)
>
>   
In my case I own a sphere AF and a pro5000 (2007 model) and at least
with guvcview  I never noticed any significant frame drop  when
recording video, but then guvcview doesn't use any expensive video
compression  (just  MJPG in case of yuv data).
With mencoder you are compressing to mpeg4, this is very CPU expensive.

> Is there a some anti shakiness feature like photo and video cameras have.
> I kind of have shocking hands when video recording?
>   
In a webcam ???
Never heard of any such feature.

> Is there also some feature to say well do auto exposure but make sure it
> does not go below 20 fps?
>
>   
I always use auto-exposure with both my cameras and I can easily record
avi's with 30 fps, be it a dark or bright environment.
 

> So now I use the following command to record with the webcam:
> mencoder tv:// -tv
> driver=v4l2:device=/dev/video0:adevice=/dev/dsp1:immediatemode=0:forceaudio:width=800:height=600:fps=25
> -oac lavc -lavcopts acodec=libmp3lame:abitrate=128 -ovc lavc -lavcopts
> vcodec=mpeg4:vbitrate=2240:threads=2 -of lavf -lavfopts format=avi -o
> webcam5.avi
>
> but the output is 640x480 with 15 fps not the resolution and fps I
> supplied with the mencoder command why is this and how to fix this using
> mencoder to record? Please also see the attached webcam5.log.
>   

I'm not really a mencoder guru, have you tried recording on guvcview or
cheese ?
Maybe you should try some other lighter compression method when
recording, and convert the resulting file to mpg4 ( I recommend avidemux
for editing and compressing the captured file).
> Any help is welcome.
>
> Thanks in advance,
>
> Jelle de Jong
>   
Best regards,

Paulo


From jelledejong at powercraft.nl  Fri Mar 13 22:38:57 2009
From: jelledejong at powercraft.nl (Jelle de Jong)
Date: Fri, 13 Mar 2009 22:38:57 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 9000,
 unable to get more then 5 fps when live recording, whats going on?
In-Reply-To: <49BA6361.3050107@gmail.com>
References: <49B979F0.1010308@powercraft.nl>	<49B98256.6040800@kolmann.at>	<49B985B0.6010708@powercraft.nl>	<49BA22F6.6020302@gmail.com>
	<49BA545B.5040305@powercraft.nl> <49BA6361.3050107@gmail.com>
Message-ID: <49BAD271.7050402@powercraft.nl>

Paulo Assis wrote:
> Jelle,
> 
> Jelle de Jong escreveu:
>> Paulo Assis wrote:
>>   
>>> Jelle,
>>> You must tick off the "Exposure, Auto Priority" control this is enable
>>> by default and increases the exposure time (reducing fps) in order to
>>> get a brighter picture.
>>>
>>> Just use libwebcam or guvcview.
>>>
>>> Best regards,
>>> Paulo
>>>
>>> Jelle de Jong escreveu:
>>>     
>>>> Philipp Kolmann wrote:
>>>>   
>>>>       
>>>>> Jelle de Jong wrote:
>>>>>     
>>>>>         
>>>>>> Hello everybody,
>>>>>>
>>>>>> I bought a Logitech QuickCam Pro 9000[1] (80euro) to make a budget
>>>>>> free/libre open source live video recording systems from a laptop. But I
>>>>>> am unable to get more then 5 frames per seconds (fps) out of the webcam
>>>>>> under any resolution. The last 4 days I have been trying to get this
>>>>>> system to work both with webcam and a digital video camera on combisite1
>>>>>> of a usb video grabber.
>>>>>>
>>>>>> The webcam only delivers 5 fps tops most time its lower is this normal
>>>>>> and what to do about is, should I buy an other webcam and witch one?
>>>>>>
>>>>>> Please see the attachments for all good reports about fps and mencoder
>>>>>> and mplayer commands.
>>>>>>
>>>>>>   
>>>>>>       
>>>>>>           
>>>>> It seems you use eeepc. Did you test the cam with another PC? Is your 
>>>>> USB Port 1.1 or 2.0 (check with usbview).
>>>>>
>>>>> I have several 9000 here and I don't have issues with debian and this cam.
>>>>> You might want to get latest uvcvideo kernel module, but this cam is 
>>>>> supported for a long time already.
>>>>>
>>>>> hth,
>>>>> Philipp
>>>>>     
>>>>>         
>>>> Hi Philipp,
>>>>
>>>> Thanks for responding, what version of the webcam do you have? I seem to
>>>> have a got a 0.08
>>>>
>>>> My ports are usb 2.0 I did not test it with an other pc I only have
>>>> eeepc's around me.
>>>>
>>>> Is there a debian package for the latest uvcvideo kernel module?
>>>>
>>>> Could you test this command for me and show me the output: (especially fps)
>>>>
>>>> mencoder tv:// -tv driver=v4l2:device=/dev/video0:fps=5 -ovc lavc
>>>> -lavcopts vcodec=mpeg4:vbitrate=2240:threads=2 -of rawvideo -o webcam4.mp4
>>>>
>>>> Thanks in advance,
>>>>
>>>> Jelle de Jong
>>>>
>>>>       
>> Hello Paulo,
>>
>> Thank you for your response.
>>
>> I now see whats happening, the fps drops to around 5fps when the
>> environment is dark and goes to around 30fps when the environment is bright.
>>
>> I changed Exposure, Auto Priority to 0 and now I seem to have an higher
>> stable fps.
>>
>> It also seems that when recording to disk the fps also drop form say
>> 30fps to 10fps but the cpu load and mem use is very low, is this normal?
>>
>> I have installed guvcview and played a bit with the many controls. The
>> commandline shows a lot of errors, and the webcam responses very weird,
>> when trying to change the settings most things fail. I have attached the
>> guvcview.log.
>>
>>   
> The warnings you see under guvcview  are related to dynamic controls
> (focus, LED control, ...) if you want these controls enabled you must
> run guvcview as the root user at least once per session.
> 
> If you try to change let's say gain and you have auto gain set then this
> will fail, the same for exposure and white balance.
>  
> Has for a fixed frame rate your best option with that model is using
> manual exposure. Just choose an appropriate exposure setting and stick
> with that.
> 
>> How can I control the webcam with standardized v4l2 controls?
>>
>>   
> guvcview uses a standard v4l2 interface.
> if you just want to use the controls, and capture video with some other
> app. run:
> guvcview --controls_only
> 
>> I want to use a webcam to record live images that move and have different
>> light environments, so the webcam has to adjust automatically to output
>> the best possible images. Is this a very hard thing to ask? I am willing
>> to buy a new device the only demands are usb interface and full v4l2
>> support. I have no idea of what is a good usb camera and what is not is
>> the QuickCam Pro 9000 the best one available? (200euro budget)
>>
>>   
> In my case I own a sphere AF and a pro5000 (2007 model) and at least
> with guvcview  I never noticed any significant frame drop  when
> recording video, but then guvcview doesn't use any expensive video
> compression  (just  MJPG in case of yuv data).
> With mencoder you are compressing to mpeg4, this is very CPU expensive.
> 
>> Is there a some anti shakiness feature like photo and video cameras have.
>> I kind of have shocking hands when video recording?
>>   
> In a webcam ???
> Never heard of any such feature.
> 
>> Is there also some feature to say well do auto exposure but make sure it
>> does not go below 20 fps?
>>
>>   
> I always use auto-exposure with both my cameras and I can easily record
> avi's with 30 fps, be it a dark or bright environment.
>  
> 
>> So now I use the following command to record with the webcam:
>> mencoder tv:// -tv
>> driver=v4l2:device=/dev/video0:adevice=/dev/dsp1:immediatemode=0:forceaudio:width=800:height=600:fps=25
>> -oac lavc -lavcopts acodec=libmp3lame:abitrate=128 -ovc lavc -lavcopts
>> vcodec=mpeg4:vbitrate=2240:threads=2 -of lavf -lavfopts format=avi -o
>> webcam5.avi
>>
>> but the output is 640x480 with 15 fps not the resolution and fps I
>> supplied with the mencoder command why is this and how to fix this using
>> mencoder to record? Please also see the attached webcam5.log.
>>   
> 
> I'm not really a mencoder guru, have you tried recording on guvcview or
> cheese ?
> Maybe you should try some other lighter compression method when
> recording, and convert the resulting file to mpg4 ( I recommend avidemux
> for editing and compressing the captured file).
>> Any help is welcome.
>>
>> Thanks in advance,
>>
>> Jelle de Jong
>>   
> Best regards,
> 
> Paulo

I did a lot more testing today (this is full day 5 already) and I found
some very disturbing discoveries!

I can watch the webcam at width=320:height=240:fps=30 and have the
correct result. However when going over this resolution I will get only
15 fps and i can max go to 640x480 resolution.

Any idea why a tool as guvcviewer seems to output 800x600 and even
1600x1200 but mplayer does not want go higher as 640x480 (it does go lower)

I upgraded to guvcview 1.0.2 and tested some more there is still the
issue that i get lower fps when recording. Could somebody test recording
800x600 with 25fps and sound, if its really 25fps the sound will be in sync.

Also i tested the v4l2 fields of the webcam and there are a lot of errors
and non working fields. Is the device really v4l2 compatible? Could
somebody check this out further?

I also want to use the device on headless machines so no X. How can I
configure the device then so it does not use auto exposure...?

I attacked all test reports I made that lead to my conclusions please
look at them.

I can be contacted on chat.freenode.org as /msg tuxcrafter

Does somebody know a usb device that can be used for recording with v4l2
capable tools at at-leased 25pfs and 800x600 some auto balancing and
focusing would be nice to.

Again please checkout the attachment.

Thanks in advance for help.

Jelle de Jong
-------------- next part --------------
A non-text attachment was scrubbed...
Name: reports2.tar.gz
Type: application/gzip
Size: 21318 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090313/38bf1f3a/attachment.bin>

From pj.assis at gmail.com  Sat Mar 14 00:01:06 2009
From: pj.assis at gmail.com (Paulo Assis)
Date: Fri, 13 Mar 2009 23:01:06 +0000
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 9000,
	unable to get more 	then 5 fps when live recording, whats going on?
In-Reply-To: <49BAD271.7050402@powercraft.nl>
References: <49B979F0.1010308@powercraft.nl> <49B98256.6040800@kolmann.at>
	<49B985B0.6010708@powercraft.nl> <49BA22F6.6020302@gmail.com>
	<49BA545B.5040305@powercraft.nl> <49BA6361.3050107@gmail.com>
	<49BAD271.7050402@powercraft.nl>
Message-ID: <59cf47a80903131601n463d9060pa295281326ba57e0@mail.gmail.com>

>
> I did a lot more testing today (this is full day 5 already) and I found
> some very disturbing discoveries!
>
> I can watch the webcam at width=320:height=240:fps=30 and have the
> correct result. However when going over this resolution I will get only
> 15 fps and i can max go to 640x480 resolution.
>
> Any idea why a tool as guvcviewer seems to output 800x600 and even
> 1600x1200 but mplayer does not want go higher as 640x480 (it does go lower)
>

I believe mplayer checks your hardware and sets resolution accordingly (not
sure about this though).


>
> I upgraded to guvcview 1.0.2 and tested some more there is still the
> issue that i get lower fps when recording. Could somebody test recording
> 800x600 with 25fps and sound, if its really 25fps the sound will be in
> sync.


In the case of guvcview you should check the resulting fps in the avi
header, use avidemux to check the avi properties.
Sound can become out of sync due to a bad microphone or if fps varies a lot
during capture, guvcview will write the average fps (total number of frames
/ total time of capture) to the avi header.
The quality of video capture is very dependent on your hardware since video
processing requires a lot from ones system (processor, memory, disk, ...),
in your case and although the eeepc is a damn good machine for it's size and
price, I wouldn't consider it a prime candidate for this type of usage.


>
> Also i tested the v4l2 fields of the webcam and there are a lot of errors
> and non working fields. Is the device really v4l2 compatible? Could
> somebody check this out further?
>

Maybe you had some bad luck and bought the 2008 model, this camera has some
serious firmware issues causing all sorts of problems in linux, the 2009
models according to logitech have these problems fixed:

http://forums.quickcamteam.net/showthread.php?tid=551



>
> I also want to use the device on headless machines so no X. How can I
> configure the device then so it does not use auto exposure...?
>

If you need a command line control application, you should consider
libwebcam:

http://www.quickcamteam.net/software/libwebcam



>
> I attacked all test reports I made that lead to my conclusions please
> look at them.
>
> I can be contacted on chat.freenode.org as /msg tuxcrafter
>
> Does somebody know a usb device that can be used for recording with v4l2
> capable tools at at-leased 25pfs and 800x600 some auto balancing and
> focusing would be nice to.
>

If you need hardware autofocus, the best one I can remember is the *QuickCam
* Vision Pro, but there is also the creative cam optia AF.
They are both UVC cameras so should do fine in linux.


>
> Again please checkout the attachment.
>
> Thanks in advance for help.
>
> Jelle de Jong
>

Best regards,
Paulo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090313/c806df0b/attachment.html>

From yvesparedes at lavabit.com  Sat Mar 14 11:36:34 2009
From: yvesparedes at lavabit.com (yvesparedes at lavabit.com)
Date: Sat, 14 Mar 2009 18:36:34 +0800 (PHT)
Subject: [Linux-uvc-devel] Lenovo Thinkpad SL400 webcam also needs
	"quirks=16"
Message-ID: <35182.210.213.156.89.1237026994.squirrel@lavabit.com>

Like the webcam in the Thinkpad SL500, it needs to be loaded with "quirks=16"

lsusb shows the following line:

Bus 008 Device 002: ID 17ef:480b Lenovo





From jelledejong at powercraft.nl  Sat Mar 14 23:03:08 2009
From: jelledejong at powercraft.nl (Jelle de Jong)
Date: Sat, 14 Mar 2009 23:03:08 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 9000,
 unable to get more then 5 fps when live recording, whats going on?
In-Reply-To: <59cf47a80903131601n463d9060pa295281326ba57e0@mail.gmail.com>
References: <49B979F0.1010308@powercraft.nl>
	<49B98256.6040800@kolmann.at>	<49B985B0.6010708@powercraft.nl>
	<49BA22F6.6020302@gmail.com>	<49BA545B.5040305@powercraft.nl>
	<49BA6361.3050107@gmail.com>	<49BAD271.7050402@powercraft.nl>
	<59cf47a80903131601n463d9060pa295281326ba57e0@mail.gmail.com>
Message-ID: <49BC299C.70203@powercraft.nl>

I bought an other webcam today this time a QuickCam Orbit/Sphere AF but
it has the exact same issues and also seem to be a bcdDevice 0.08 device
/me cries (continuing saga day 6 ...)

Paulo Assis schreef:
> 
> 
>     I did a lot more testing today (this is full day 5 already) and I found
>     some very disturbing discoveries!
> 
>     I can watch the webcam at width=320:height=240:fps=30 and have the
>     correct result. However when going over this resolution I will get only
>     15 fps and i can max go to 640x480 resolution.
> 
>     Any idea why a tool as guvcviewer seems to output 800x600 and even
>     1600x1200 but mplayer does not want go higher as 640x480 (it does go
>     lower)
> 
> 
> I believe mplayer checks your hardware and sets resolution accordingly
> (not sure about this though).

I believe it checks the v4l fields see the (attached) v4l-info2.log
could somebody run these commands on there good working >2MP webcam and
sent the test to the mailinglist?

> ?
> 
> 
>     I upgraded to guvcview 1.0.2 and tested some more there is still the
>     issue that i get lower fps when recording. Could somebody test recording
>     800x600 with 25fps and sound, if its really 25fps the sound will be
>     in sync.
> 
> 
> In the case of guvcview you should check the resulting fps in the avi
> header, use avidemux to check the avi properties.
> Sound can become out of sync due to a bad microphone or if fps varies a
> lot during capture, guvcview will write the average fps (total number of
> frames / total time of capture) to the avi header.
> The quality of video capture is very dependent on your hardware since
> video processing requires a lot from ones system (processor, memory,
> disk, ...), in your case and although the eeepc is a damn good machine
> for it's size and price, I wouldn't consider it a prime candidate for
> this type of usage. ?
> 

I did some testing with guvcview and my expectations where correct I
tried to record a 800x600 stream with 25 fps. Result is complete out of
sync audio and the fps was going up and down during recording (auto
exposure was off) (result was a average of 13.833 fps)

BTW its kind of cool to see that guvcview is using a direct interface to
do the avi muxing (ID_CLIP_INFO_VALUE1)

Please see the attached capture-10.log for all the info on the recording.
Could somebody please do some testing with there device and see what the
highest possible resolution is with 25fps on there system. I would really
appreciate this. Please also test this with the mplayer command as I did.

I have an atom 1,6 GHZ 1GB DDR ram eeepc that would be fast enough for
there kinds of recording, and during recoding htop show the cpu load is
very low around 20%. And bwm-ng also tells me the hard-disk throughput is
about 14 MB/s so the hardware should not be a bottleneck here. But maybe
can test this on there system and check there throughput values.

Maybe an idea to also use mpeg4 for encoding, I tried to get named pipes
to work with guvciewer to make ffmpeg take it as input but I could not
get it to work.

> 
>     Also i tested the v4l2 fields of the webcam and there are a lot of
>     errors
>     and non working fields. Is the device really v4l2 compatible? Could
>     somebody check this out further?
> 
> 
> Maybe you had some bad luck and bought the 2008 model, this camera has
> some serious firmware issues causing all sorts of problems in linux, the
> 2009 models according to logitech have these problems fixed:

Yes i bought a 2008 model and today again a 2008 model from a store that
usually have very very high resales and should have hat the latest
version. What is the best 2MP+ webcam that works, are there any digital
foto camaras or video camares that work with uvc, I don't and can't have
any firewire interfaces (only usb) so IEEE 1394 is not an option.

> http://forums.quickcamteam.net/showthread.php?tid=551
> 
> ?
> 
> 
>     I also want to use the device on headless machines so no X. How can I
>     configure the device then so it does not use auto exposure...?
> 
> 
> If you need a command line control application, you should consider
> libwebcam:
> 
> http://www.quickcamteam.net/software/libwebcam

hmm this software is not in the debian repository (somebody feels like
packaging it), but why cant i use standard v4l2 command line tools and
mencoder and mplayer to get the job done in an universal way.

> 
> ?
> 
> 
>     I attacked all test reports I made that lead to my conclusions please
>     look at them.
> 
>     I can be contacted on chat.freenode.org <http://chat.freenode.org>
>     as /msg tuxcrafter
> 
>     Does somebody know a usb device that can be used for recording with v4l2
>     capable tools at at-leased 25pfs and 800x600 some auto balancing and
>     focusing would be nice to.
> 
> 
> If you need hardware autofocus, the best one I can remember is the
> /QuickCam/ Vision Pro, but there is also the creative cam optia AF.
> They are both UVC cameras so should do fine in linux.

Isn't the QuickCam Vision Pro exactly the same device as the Pro 9000
except branded as special MACOS version? If i can find the creative cam
optia AF i think i will buy it, any ideas for better webcams or digital
camaras with usb interfaces?

> ?
> 
> 
>     Again please checkout the attachment.
> 
>     Thanks in advance for help.
> 
>     Jelle de Jong
> 
> 
> Best regards,
> Paulo

Thanks,

Best regards,

Jelle de Jong
-------------- next part --------------
A non-text attachment was scrubbed...
Name: v4l-info2.log
Type: text/x-log
Size: 5575 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090314/d0fff7c1/attachment.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: capture-10.log
Type: text/x-log
Size: 9696 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090314/d0fff7c1/attachment-0001.bin>

From laurent.pinchart at skynet.be  Sun Mar 15 11:35:36 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 15 Mar 2009 11:35:36 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 9000,
	unable to get more then 5 fps when live recording, whats going on?
In-Reply-To: <49BAD271.7050402@powercraft.nl>
References: <49B979F0.1010308@powercraft.nl> <49BA6361.3050107@gmail.com>
	<49BAD271.7050402@powercraft.nl>
Message-ID: <200903151135.36527.laurent.pinchart@skynet.be>

Hi Jelle,

On Friday 13 March 2009 22:38:57 Jelle de Jong wrote:
>
> I did a lot more testing today (this is full day 5 already) and I found
> some very disturbing discoveries!
>
> I can watch the webcam at width=320:height=240:fps=30 and have the
> correct result. However when going over this resolution I will get only
> 15 fps and i can max go to 640x480 resolution.
>
> Any idea why a tool as guvcviewer seems to output 800x600 and even
> 1600x1200 but mplayer does not want go higher as 640x480 (it does go lower)

Available resolutions depend on the image format. Your camera supports 
uncompressed YUYV up to 1600x1200 and MJPEG up to 960x720. This doesn't 
explain why MPlayer won't go any higher than 640x480 though, but you should be 
aware that the selected image format affects the available resolutions.

> I upgraded to guvcview 1.0.2 and tested some more there is still the
> issue that i get lower fps when recording. Could somebody test recording
> 800x600 with 25fps and sound, if its really 25fps the sound will be in
> sync.
>
> Also i tested the v4l2 fields of the webcam and there are a lot of errors
> and non working fields. Is the device really v4l2 compatible? Could
> somebody check this out further?

What do you mean by v4l2 fields ? What kind of errors do you get ? Are they 
pure userspace, or does the driver print error messages to the kernel log as 
well ?

> I also want to use the device on headless machines so no X. How can I
> configure the device then so it does not use auto exposure...?

Use a command line tool such as v4l2-ctl or uvcdynctrl (part of the libwebcam 
package, make sure you use the SVN version) to change controls.

> I attacked all test reports I made that lead to my conclusions please
> look at them.
>
> I can be contacted on chat.freenode.org as /msg tuxcrafter
>
> Does somebody know a usb device that can be used for recording with v4l2
> capable tools at at-leased 25pfs and 800x600 some auto balancing and
> focusing would be nice to.
>
> Again please checkout the attachment.
>
> Thanks in advance for help.

Best regards,

Laurent Pinchart



From laurent.pinchart at skynet.be  Sun Mar 15 11:58:45 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 15 Mar 2009 11:58:45 +0100
Subject: [Linux-uvc-devel] Lenovo Thinkpad SL400 webcam also needs
	"quirks=16"
In-Reply-To: <35182.210.213.156.89.1237026994.squirrel@lavabit.com>
References: <35182.210.213.156.89.1237026994.squirrel@lavabit.com>
Message-ID: <200903151158.45269.laurent.pinchart@skynet.be>

Hi Yves,

On Saturday 14 March 2009 11:36:34 yvesparedes at lavabit.com wrote:
> Like the webcam in the Thinkpad SL500, it needs to be loaded with
> "quirks=16"
>
> lsusb shows the following line:
>
> Bus 008 Device 002: ID 17ef:480b Lenovo

Thanks for the report. A fix is already available in 2.6.29-rc1, the 2.6.29 
kernel will support your camera out of the box.

Best regards,

Laurent Pinchart



From jelledejong at powercraft.nl  Sun Mar 15 12:17:10 2009
From: jelledejong at powercraft.nl (Jelle de Jong)
Date: Sun, 15 Mar 2009 12:17:10 +0100
Subject: [Linux-uvc-devel] how to get mencoder en mplayer working with
 uvc v4l2 webcams
In-Reply-To: <59cf47a80903141633x16f354c4n3930f78eaf0f4d74@mail.gmail.com>
References: <49B979F0.1010308@powercraft.nl> <49B98256.6040800@kolmann.at>	
	<49B985B0.6010708@powercraft.nl> <49BA22F6.6020302@gmail.com>	
	<49BA545B.5040305@powercraft.nl> <49BA6361.3050107@gmail.com>	
	<49BAD271.7050402@powercraft.nl>	
	<59cf47a80903131601n463d9060pa295281326ba57e0@mail.gmail.com>	
	<49BC299C.70203@powercraft.nl>
	<59cf47a80903141633x16f354c4n3930f78eaf0f4d74@mail.gmail.com>
Message-ID: <49BCE3B6.3000605@powercraft.nl>

I changed the topic, to make the discussion more transparent. To bad
google has no text only feature, it makes using gmail and mailinglist
conventions a bit hard.

Paulo Assis wrote:
> I've tried mencoder on my sphere AF but wasn't able to capture from the
> camera:
> 
> v4l2: ioctl set format failed: Invalid argument
> v4l2: ioctl set format failed: Invalid argument
> v4l2: ioctl set format failed: Invalid argument
> tv.c: norm_from_string(pal): Bogus norm parameter, setting default.
> v4l2: ioctl enum norm failed: Invalid argument
> Error: Cannot set norm!
> Selected input hasn't got a tuner!
> Excep??o de v?rgula flutuante (Floating point exception) 

Paulo could you first try to go back to the basics, and check if you can
display an image out of your webcam with mplayer, also please make
reports or the output of the commands, else i can never know what goes
wrong. Setting LANG=en_GB would also help before executions of the
commands :-D And thank you so much for helping.

# first command
$ mplayer -identify -benchmark -v tv:// -tv
driver=v4l2:device=/dev/video0:adevice=/dev/dsp1:immediatemode=0:forceaudio

# second command
mplayer -identify -benchmark -v tv:// -tv
driver=v4l2:device=/dev/video1:adevice=/dev/dsp2:immediatemode=0:forceaudio:width=800:height=600

# third command
$ mencoder tv:// -tv
driver=v4l2:device=/dev/video0:adevice=/dev/dsp1:immediatemode=0:forceaudio:width=800:height=600:fps=25
-oac lavc -ovc lavc -lavcopts
acodec=libmp3lame:abitrate=128:vcodec=mpeg4:vbitrate=2240:threads=4 -of
lavf -lavfopts format=avi -o output7.avi

Make sure auto exposure and all other fps decreasing features are off.
Thanks in advance of the reports, I really need to get mplayer and
mencoder working on higher resolutions and frame rates.

> 
> This is could mean two things auto exposure is set and fps changes with
> ambient light conditions or a CPU with low horsepower.

auto exposure was not on, if cpu horsepower is an issue this would be
extreme bad, I also tried to use mencoder and mplayer on a fast headless
server but since i cant get higher resolution or fps i cant test it
correctly.

> 
> The problem is not the load, CPU time is scheduled by the system, in the
> case of single core CPUs they really need to be fast enought to process
> video frames and audio and still run all other system processes, for
> multicore CPUs these tasks can be easily scheduled between different
> cores, so you don't need a fast CPU as much.
> A fast transfer disk also helps.
>  
> I made some experiments with mpeg encoding in guvcview some time ago and
> I was able to make it work, but I never released the code, since it had
> some heavy requirements for hardware. It's just easy to capture with a
> lightweight encoder ( or even better without any encoding) and compress
> the resulting file later, since this doesn't cause any frame drop.

I would really like if I can just connect mencoder, mplayer and ffmpeg to
the the guvcview tool, but since guvciew is a GUI tool I cant really use
it. I can only use it for some testing on the client desktops

> Any v4l2 tool should work ! but only libwebcam will enable extension
> controls.

What are the extension controls, why are those not v4l2? I will try to
make libwebcam work. Does the Creative Cam Optia AF also work with these
tools?

> No, QuickCam Vision Pro has hardware autofocus, in the Pro 9000
> autofucus is done in software, just like the sphere AF, so unless you
> are using guvcview only the Vision will enable autofocus.

Ok sounds I will buy the  Creative Cam Optia AF or QuickCam Vision Pro
since both seem to be the only 2MP+ webcams with hardware autofocus correct?

Thanks in advance for the test reports,

Jelle de Jong



From jelledejong at powercraft.nl  Sun Mar 15 12:34:07 2009
From: jelledejong at powercraft.nl (Jelle de Jong)
Date: Sun, 15 Mar 2009 12:34:07 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 9000,
 unable to get more then 5 fps when live recording, whats going on?
In-Reply-To: <200903151135.36527.laurent.pinchart@skynet.be>
References: <49B979F0.1010308@powercraft.nl> <49BA6361.3050107@gmail.com>
	<49BAD271.7050402@powercraft.nl>
	<200903151135.36527.laurent.pinchart@skynet.be>
Message-ID: <49BCE7AF.40504@powercraft.nl>

Hi laurent, thanks for your mail.

Laurent Pinchart wrote:
> Hi Jelle,
> 
> On Friday 13 March 2009 22:38:57 Jelle de Jong wrote:
>> I did a lot more testing today (this is full day 5 already) and I found
>> some very disturbing discoveries!
>>
>> I can watch the webcam at width=320:height=240:fps=30 and have the
>> correct result. However when going over this resolution I will get only
>> 15 fps and i can max go to 640x480 resolution.
>>
>> Any idea why a tool as guvcviewer seems to output 800x600 and even
>> 1600x1200 but mplayer does not want go higher as 640x480 (it does go lower)
> 
> Available resolutions depend on the image format. Your camera supports 
> uncompressed YUYV up to 1600x1200 and MJPEG up to 960x720. This doesn't 
> explain why MPlayer won't go any higher than 640x480 though, but you should be 
> aware that the selected image format affects the available resolutions.

Yes I am aware of the dependencies between video codec and fps and the
resolutions. In my reports2.tar.gz in my previous mails. you can see I
tried both video capture modes of the webcam the video modes are in the
mplayer outputs logs. But to be sure the problem does is not my fault or
my webcams, I would like to have some other test reporst form other users
when they try to use mplayer and mencoder. I sent some basics commands in
my previous mail to the mailinglist, would you be willing to test them?

> 
>> I upgraded to guvcview 1.0.2 and tested some more there is still the
>> issue that i get lower fps when recording. Could somebody test recording
>> 800x600 with 25fps and sound, if its really 25fps the sound will be in
>> sync.
>>
>> Also i tested the v4l2 fields of the webcam and there are a lot of errors
>> and non working fields. Is the device really v4l2 compatible? Could
>> somebody check this out further?
> 
> What do you mean by v4l2 fields ? What kind of errors do you get ? Are they 
> pure userspace, or does the driver print error messages to the kernel log as 
> well ?

See the v4l-info2.log attachment in my previous messages to the list,
there i used some commands to get the v4l2 capabilities but the output is
full with errors, I would really appreciated it if somebody could run
these commands o there working webcams.

> 
>> I also want to use the device on headless machines so no X. How can I
>> configure the device then so it does not use auto exposure...?
> 
> Use a command line tool such as v4l2-ctl or uvcdynctrl (part of the libwebcam 
> package, make sure you use the SVN version) to change controls.

I cant find the v4l2-ctl tools! I will look at the libwebcam and hope it
will be worth the investment in time.

> 
>> I attacked all test reports I made that lead to my conclusions please
>> look at them.
>>
>> I can be contacted on chat.freenode.org as /msg tuxcrafter
>>
>> Does somebody know a usb device that can be used for recording with v4l2
>> capable tools at at-leased 25pfs and 800x600 some auto balancing and
>> focusing would be nice to.
>>
>> Again please checkout the attachment.
>>
>> Thanks in advance for help.
> 
> Best regards,
> 
> Laurent Pinchart

Best regards,

Jelle de Jong



From pj.assis at gmail.com  Sun Mar 15 14:27:14 2009
From: pj.assis at gmail.com (Paulo Assis)
Date: Sun, 15 Mar 2009 13:27:14 +0000
Subject: [Linux-uvc-devel] how to get mencoder en mplayer working with
	uvc v4l2 webcams
In-Reply-To: <49BCE3B6.3000605@powercraft.nl>
References: <49B979F0.1010308@powercraft.nl> <49B985B0.6010708@powercraft.nl>
	<49BA22F6.6020302@gmail.com> <49BA545B.5040305@powercraft.nl>
	<49BA6361.3050107@gmail.com> <49BAD271.7050402@powercraft.nl>
	<59cf47a80903131601n463d9060pa295281326ba57e0@mail.gmail.com>
	<49BC299C.70203@powercraft.nl>
	<59cf47a80903141633x16f354c4n3930f78eaf0f4d74@mail.gmail.com>
	<49BCE3B6.3000605@powercraft.nl>
Message-ID: <59cf47a80903150627xcb9373cv6ab177306da0d77d@mail.gmail.com>

Jelle,

2009/3/15 Jelle de Jong <jelledejong at powercraft.nl>

> I changed the topic, to make the discussion more transparent. To bad
> google has no text only feature, it makes using gmail and mailinglist
> conventions a bit hard.
>
> Paulo Assis wrote:
> > I've tried mencoder on my sphere AF but wasn't able to capture from the
> > camera:
> >
> > v4l2: ioctl set format failed: Invalid argument
> > v4l2: ioctl set format failed: Invalid argument
> > v4l2: ioctl set format failed: Invalid argument
> > tv.c: norm_from_string(pal): Bogus norm parameter, setting default.
> > v4l2: ioctl enum norm failed: Invalid argument
> > Error: Cannot set norm!
> > Selected input hasn't got a tuner!
> > Excep??o de v?rgula flutuante (Floating point exception)
>
> Paulo could you first try to go back to the basics, and check if you can
> display an image out of your webcam with mplayer, also please make
> reports or the output of the commands, else i can never know what goes
> wrong. Setting LANG=en_GB would also help before executions of the
> commands :-D And thank you so much for helping.
>

Mplayer works fine with the following command:
 mplayer tv:// -tv
driver=v4l2:device=/dev/video0:width=800:height=600:fps=25

see mplayer.log

but fails for the ones below.


>
> # first command
> $ mplayer -identify -benchmark -v tv:// -tv
> driver=v4l2:device=/dev/video0:adevice=/dev/dsp1:immediatemode=0:forceaudio
>

see mplayer_1.log

>
> # second command
> mplayer -identify -benchmark -v tv:// -tv
>
> driver=v4l2:device=/dev/video1:adevice=/dev/dsp2:immediatemode=0:forceaudio:width=800:height=600
>

see mplayer_2.log



>
> # third command
> $ mencoder tv:// -tv
>
> driver=v4l2:device=/dev/video0:adevice=/dev/dsp1:immediatemode=0:forceaudio:width=800:height=600:fps=25
> -oac lavc -ovc lavc -lavcopts
> acodec=libmp3lame:abitrate=128:vcodec=mpeg4:vbitrate=2240:threads=4 -of
> lavf -lavfopts format=avi -o output7.avi
>


see mencoder.log



>
> Make sure auto exposure and all other fps decreasing features are off.
> Thanks in advance of the reports, I really need to get mplayer and
> mencoder working on higher resolutions and frame rates.
>
> >
> > This is could mean two things auto exposure is set and fps changes with
> > ambient light conditions or a CPU with low horsepower.
>
> auto exposure was not on, if cpu horsepower is an issue this would be
> extreme bad, I also tried to use mencoder and mplayer on a fast headless
> server but since i cant get higher resolution or fps i cant test it
> correctly.
>

I could only get 640x480, this limit seems to be hardcoded in mplayer.


>
> >
> > The problem is not the load, CPU time is scheduled by the system, in the
> > case of single core CPUs they really need to be fast enought to process
> > video frames and audio and still run all other system processes, for
> > multicore CPUs these tasks can be easily scheduled between different
> > cores, so you don't need a fast CPU as much.
> > A fast transfer disk also helps.
> >
> > I made some experiments with mpeg encoding in guvcview some time ago and
> > I was able to make it work, but I never released the code, since it had
> > some heavy requirements for hardware. It's just easy to capture with a
> > lightweight encoder ( or even better without any encoding) and compress
> > the resulting file later, since this doesn't cause any frame drop.
>
> I would really like if I can just connect mencoder, mplayer and ffmpeg to
> the the guvcview tool, but since guvciew is a GUI tool I cant really use
> it. I can only use it for some testing on the client desktops
>


Like I said live video mpeg encoding requires a lot of cpu power, you wont
find many apps out there that can deliver this, with the quality you want.


>
> > Any v4l2 tool should work ! but only libwebcam will enable extension
> > controls.
>
> What are the extension controls, why are those not v4l2? I will try to
> make libwebcam work. Does the Creative Cam Optia AF also work with these
> tools?
>

these are vendor specif controls, they are defined in the uvc spec and the
linux-uvc driver has support for them.
Since they are vendor specific, they cannot be defined in the v4l2 API, so
they need to be mapped into a valid control, but applications must be aware
of them.


> > No, QuickCam Vision Pro has hardware autofocus, in the Pro 9000
> > autofucus is done in software, just like the sphere AF, so unless you
> > are using guvcview only the Vision will enable autofocus.
>
> Ok sounds I will buy the  Creative Cam Optia AF or QuickCam Vision Pro
> since both seem to be the only 2MP+ webcams with hardware autofocus
> correct?
>

They are the ones I know.


>
> Thanks in advance for the test reports,
>
> Jelle de Jong
>
>
Best regards,
Paulo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090315/43406b62/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mplayer_1.log
Type: text/x-log
Size: 4906 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090315/43406b62/attachment.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mplayer_2.log
Type: text/x-log
Size: 3296 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090315/43406b62/attachment-0001.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mencoder.log
Type: text/x-log
Size: 1010 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090315/43406b62/attachment-0002.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mplayer.log
Type: text/x-log
Size: 1819 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090315/43406b62/attachment-0003.bin>

From jelledejong at powercraft.nl  Sun Mar 15 16:11:59 2009
From: jelledejong at powercraft.nl (Jelle de Jong)
Date: Sun, 15 Mar 2009 16:11:59 +0100
Subject: [Linux-uvc-devel] how to get mencoder en mplayer working with
 uvc v4l2 webcams
In-Reply-To: <59cf47a80903150627xcb9373cv6ab177306da0d77d@mail.gmail.com>
References: <49B979F0.1010308@powercraft.nl>
	<49B985B0.6010708@powercraft.nl>	<49BA22F6.6020302@gmail.com>
	<49BA545B.5040305@powercraft.nl>	<49BA6361.3050107@gmail.com>
	<49BAD271.7050402@powercraft.nl>	<59cf47a80903131601n463d9060pa295281326ba57e0@mail.gmail.com>	<49BC299C.70203@powercraft.nl>	<59cf47a80903141633x16f354c4n3930f78eaf0f4d74@mail.gmail.com>	<49BCE3B6.3000605@powercraft.nl>
	<59cf47a80903150627xcb9373cv6ab177306da0d77d@mail.gmail.com>
Message-ID: <49BD1ABF.5090009@powercraft.nl>

Hi Paulo and thank you for the help,

Paulo Assis wrote:
> Mplayer works fine with the following command:
> ?mplayer tv:// -tv
> driver=v4l2:device=/dev/video0:width=800:height=600:fps=25
> 
> see mplayer.log

It seems mplayer does not! work fine, see the resolution, it is unable to
render 800x600 it keep sticking at 640x480.

Could you or somebody else try this command and show the full report:
mplayer -identify -benchmark -v tv:// -tv
driver=v4l2:device=/dev/video0:width=800:height=600:fps=25

> but fails for the ones below.
> see mplayer_1.log
> 

Thank you, it seems mplayer dies on your system when trying to access the
sound of the webcam I will report this back to mplayer developers

> see mplayer_2.log
The command was not correctly formatted since you use /dev/video0 and not
/dev/video1. Could you or somebody else try the bellow command and show
the full report:

mplayer -identify -benchmark -v tv:// -tv
driver=v4l2:device=/dev/video0:adevice=/dev/dsp1:immediatemode=0:forceaudio:width=800:height=600

> see mencoder.log

could you please test ;-) and show the full report

mencoder tv:// -tv
driver=v4l2:device=/dev/video0:width=800:height=600:fps=25 -of rawvideo
-nosound -ovc lavc -lavcopts vcodec=mpeg4:threads=4 -of lavf -lavfopts
format=avi -o output0.avi

> I could only get 640x480, this limit seems to be hardcoded in mplayer.

The mplayer developer tell me it is not hardcoded and is looking up v4l2
stuff. I don't know what is exactly going on here ...

> Like I said live video mpeg encoding requires a lot of cpu power, you
> wont find many apps out there that can deliver this, with the quality
> you want.

My system is powerful enough to do live recordings with mpeg4 with only
20% cpu load with mencoder on the 640x480 15fps stream... thats why I
need mencoder and mplayer to be able to view the 800x600 at 25 fps
streams so I can record them with mencoder and have a more then powerful
engough system. mjpeg does not use treading and is very heavy for a dual
threaded designed/optimized atom cpu.

> these are vendor specif controls, they are defined in the uvc spec and
> the linux-uvc driver has support for them.
> Since they are vendor specific, they cannot be defined in the v4l2 API,
> so they need to be mapped into a valid control, but applications must be
> aware of them.
> 
> They are the ones I know.

Thanks for the info!

Best regards,

Jelle de Jong


From legrain at crans.org  Sun Mar 15 21:26:32 2009
From: legrain at crans.org (=?iso-8859-15?q?Gr=E9gory_LEGRAIN?=)
Date: Sun, 15 Mar 2009 21:26:32 +0100
Subject: [Linux-uvc-devel] Strange issue with Hercules Dualpix Infinite
In-Reply-To: <200903082240.51331.laurent.pinchart@skynet.be>
References: <200903022158.38436.legrain@crans.org>
	<200903082240.51331.laurent.pinchart@skynet.be>
Message-ID: <200903152126.33155.legrain@crans.org>

Hi, 
I have compiled uvc from the mercurial repository (althought the wiki does not 
exist anymore), and I have now a "nice" (humpf !)  "No valid video chain 
found" on both machines...

Any hints about this problem ?
Perhaps I missed something while installing the drivers !

Gregory

Kernel log (from opensuse) :
Mar 15 18:47:31 ladakh kernel: usb 1-3: New USB device found, idVendor=06f8, 
idProduct=300a
Mar 15 18:47:31 ladakh kernel: usb 1-3: New USB device strings: Mfr=2, 
Product=1, SerialNumber=0
Mar 15 18:47:31 ladakh kernel: usb 1-3: Product: Hercules Dualpix Infinite
Mar 15 18:47:31 ladakh kernel: usb 1-3: Manufacturer: Guillemot Corporation
Mar 15 18:47:31 ladakh kernel: Linux video capture interface: v2.00
Mar 15 18:47:31 ladakh kernel: uvcvideo: Found UVC 1.00 device Hercules 
DualpixInfinite (06f8:300a)
Mar 15 18:47:31 ladakh kernel: uvcvideo: No valid video chain found.
Mar 15 18:47:31 ladakh kernel: usbcore: registered new interface driver 
uvcvideo
Mar 15 18:47:31 ladakh kernel: USB Video Class driver (v0.1.0)
Mar 15 18:47:31 ladakh kernel: ALSA sound/usb/usbaudio.c:1298: 5:3:1: cannot 
get freq at ep 0x84
Mar 15 18:47:31 ladakh kernel: usbcore: registered new interface driver snd-
usb-audio



On dimanche 08 mars 2009 22:40:50 you wrote:
> Hi Gregory,
>
> On Monday 02 March 2009 21:58:38 Gr?gory LEGRAIN wrote:
> > Hi, and first of all, thank you for the great work you do for uvcvideo.
>
> Thanks. Sorry for the late reply, this week was pretty busy.
>
> > I am experiencing some troubles with my Hercules Dualpix Infinite,
> > depending on the computer I use :
> > I have two computers :
> > 1/ one under ubuntu hardy (kernel 2.6.24.23)
> > 2/ one under opensuse 11.1 (kernel 2.6.27.19-3.2)
> >
> > The webcam works well under ubuntu (which quite old), and does not work
> > under suse: only one third of the image is visible under kopete and
> > skype.
> >
> > What is strange is that it works with cheese (as reported in a previous
> > threat [1]).
> >
> > You can find attached with the mail the output of the kernel
> > (/var/log/messages) and from lsusb for both computer.
> >
> > Any insight on this problem ?
>
> Could you test the same driver version (out of the linuxtv.org mercurial
> repository) on both distributions ? It would help finding out whether the
> problem comes from the distribution (Linux kernel and userspace
> applications) or the uvcvideo driver/v4l2 subsystem.
>
> Best regards,
>
> Laurent Pinchart



-------------- next part --------------
Bus 001 Device 005: ID 06f8:300a Guillemot Corp. 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x06f8 Guillemot Corp.
  idProduct          0x300a 
  bcdDevice            1.00
  iManufacturer           2 Guillemot Corporation
  iProduct                1 Hercules Dualpix Infinite
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          766
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              168mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0 
      iFunction               5 Hercules Dualpix Infinite
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0 
      iInterface              5 Hercules Dualpix Infinite
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength          103
        dwClockFrequency       15.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               5
        iTerminal               0 
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {7033f028-1163-2e4a-ba2c-6890eb334016}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          3
        bControlSize            1
        bmControls( 0)       0x7f
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 5
        guidExtensionCode         {3fae1228-d7bc-114e-a357-6f1edef7d61d}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          4
        bControlSize            1
        bmControls( 0)       0x00
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0 
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000a0e
          Auto-Exposure Mode
          Auto-Exposure Priority
          Exposure Time (Absolute)
          Zoom (Absolute)
          PanTilt (Absolute)
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000177f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Gain
          Power Line Frequency
          White Balance Temperature, Auto
        iProcessing             0 
        bmVideoStandards     0x 0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                        1
        wTotalLength                      407
        bEndPointAddress                  129
        bmInfo                              0
        bTerminalLink                       2
        bStillCaptureMethod                 2
        bTriggerSupport                     0
        bTriggerUsage                       0
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                7
        guidFormat                            {59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   768000
        dwMaxBitRate                  4608000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   192000
        dwMaxBitRate                  1152000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                   253440
        dwMaxBitRate                  1520640
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                  1013760
        dwMaxBitRate                  6082560
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                  3072000
        dwMaxBitRate                 18432000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            42
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            800
        wHeight                           600
        dwMinBitRate                  4800000
        dwMaxBitRate                 19200000
        dwMaxVideoFrameBufferSize      960000
        dwDefaultFrameInterval         500000
        bFrameIntervalType                  4
        dwFrameInterval( 0)            500000
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
        dwFrameInterval( 3)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         8
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1600
        wHeight                          1200
        dwMinBitRate                 19200000
        dwMaxBitRate                 19200000
        dwMaxVideoFrameBufferSize     3840000
        dwDefaultFrameInterval        2000000
        bFrameIntervalType                  1
        dwFrameInterval( 0)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               8
        wWidth( 0)                        320
        wHeight( 0)                       240
        wWidth( 1)                       1600
        wHeight( 1)                      1200
        wWidth( 2)                       1280
        wHeight( 2)                       960
        wWidth( 3)                        800
        wHeight( 3)                       600
        wWidth( 4)                        640
        wHeight( 4)                       480
        wWidth( 5)                        352
        wHeight( 5)                       288
        wWidth( 6)                        176
        wHeight( 6)                       144
        wWidth( 7)                        160
        wHeight( 7)                       120
        bNumCompressionPatterns             8
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b20  2x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1320  3x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 1024 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       0 
      bFunctionProtocol       0 
      iFunction               4 Hercules Dualpix Infinite Mic
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0 
      iInterface              4 Hercules Dualpix Infinite Mic
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           41
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0 
        iTerminal               0 
      AudioControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 2
        bSourceID               1
        bControlSize            2
        bmaControls( 0)      0x01
        bmaControls( 0)      0x00
          Mute
        bmaControls( 1)      0x02
        bmaControls( 1)      0x00
          Volume
        iFeature                0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               2
        iTerminal               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                14
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            2 Discrete
        tSamFreq[ 0]         8000
        tSamFreq[ 1]        16000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x84  EP 4 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0190  1x 400 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0002
  (Bus Powered)
  Remote Wakeup Enabled

From pj.assis at gmail.com  Sun Mar 15 23:42:55 2009
From: pj.assis at gmail.com (Paulo Assis)
Date: Sun, 15 Mar 2009 22:42:55 +0000
Subject: [Linux-uvc-devel] how to get mencoder en mplayer working with
	uvc v4l2 webcams
In-Reply-To: <49BD1ABF.5090009@powercraft.nl>
References: <49B979F0.1010308@powercraft.nl> <49BA545B.5040305@powercraft.nl>
	<49BA6361.3050107@gmail.com> <49BAD271.7050402@powercraft.nl>
	<59cf47a80903131601n463d9060pa295281326ba57e0@mail.gmail.com>
	<49BC299C.70203@powercraft.nl>
	<59cf47a80903141633x16f354c4n3930f78eaf0f4d74@mail.gmail.com>
	<49BCE3B6.3000605@powercraft.nl>
	<59cf47a80903150627xcb9373cv6ab177306da0d77d@mail.gmail.com>
	<49BD1ABF.5090009@powercraft.nl>
Message-ID: <59cf47a80903151542q706791bs5e7d99ac61e89a9f@mail.gmail.com>

Jelle,

2009/3/15 Jelle de Jong <jelledejong at powercraft.nl>

> Hi Paulo and thank you for the help,
>
> Paulo Assis wrote:
> > Mplayer works fine with the following command:
> > ?mplayer tv:// -tv
> > driver=v4l2:device=/dev/video0:width=800:height=600:fps=25
> >
> > see mplayer.log
>
> It seems mplayer does not! work fine, see the resolution, it is unable to
> render 800x600 it keep sticking at 640x480.
>

Yes I notice that :-)


>
> Could you or somebody else try this command and show the full report:
> mplayer -identify -benchmark -v tv:// -tv
> driver=v4l2:device=/dev/video0:width=800:height=600:fps=25
>

see mplayer_1.log


>
> > but fails for the ones below.
> > see mplayer_1.log
> >
>
> Thank you, it seems mplayer dies on your system when trying to access the
> sound of the webcam I will report this back to mplayer developers
>

/dev/dsp1 is the audio card (OSS) for ALSA the same card is  hw:0,0
for what I know usb audio is not very well supported under OSS.


>
> > see mplayer_2.log
> The command was not correctly formatted since you use /dev/video0 and not
> /dev/video1. Could you or somebody else try the bellow command and show
> the full report:
>

I had only one cam connected so no /dev/video1


>
> mplayer -identify -benchmark -v tv:// -tv
>
> driver=v4l2:device=/dev/video0:adevice=/dev/dsp1:immediatemode=0:forceaudio:width=800:height=600
>


No go, see mplayer_2.log


>
> > see mencoder.log
>
> could you please test ;-) and show the full report
>
> mencoder tv:// -tv
> driver=v4l2:device=/dev/video0:width=800:height=600:fps=25 -of rawvideo
> -nosound -ovc lavc -lavcopts vcodec=mpeg4:threads=4 -of lavf -lavfopts
> format=avi -o output0.avi



See mencoder.log

>
>
> > I could only get 640x480, this limit seems to be hardcoded in mplayer.
>
> The mplayer developer tell me it is not hardcoded and is looking up v4l2
> stuff. I don't know what is exactly going on here ...
>

In that case it can only mean that mplayer has a bug when looking up
frame-rate and resolution.
The uvc driver enumerates all resolutions and frame rates just as defined by
v4l2.



> > Like I said live video mpeg encoding requires a lot of cpu power, you
> > wont find many apps out there that can deliver this, with the quality
> > you want.
>
> My system is powerful enough to do live recordings with mpeg4 with only
> 20% cpu load with mencoder on the 640x480 15fps stream... thats why I
> need mencoder and mplayer to be able to view the 800x600 at 25 fps
> streams so I can record them with mencoder and have a more then powerful
> engough system. mjpeg does not use treading and is very heavy for a dual
> threaded designed/optimized atom cpu.


I'm confused mjpeg is heavy but not mpeg4 ?
mjpeg is, in a very simplistic way, a I frame only mpeg4, if you set your
camera to stream mjpeg instead of yuyv, you won't even need to compress,
just have to store the frames to disk.

Here's a good test:
in guvcview disable sound and set the camera stream to MJPG instead of YUYV,
then capture some video, if you notice a fps drop when recording this is
only due to Disk IO, not CPU since there is no extra processing.



>
>
> > these are vendor specif controls, they are defined in the uvc spec and
> > the linux-uvc driver has support for them.
> > Since they are vendor specific, they cannot be defined in the v4l2 API,
> > so they need to be mapped into a valid control, but applications must be
> > aware of them.
> >
> > They are the ones I know.
>
> Thanks for the info!
>
> Best regards,
>
> Jelle de Jong


Best regards,
Paulo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090315/28513128/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mplayer_1.log
Type: text/x-log
Size: 6019 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090315/28513128/attachment.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mplayer_2.log
Type: text/x-log
Size: 4970 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090315/28513128/attachment-0001.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mencoder.log
Type: text/x-log
Size: 9025 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090315/28513128/attachment-0002.bin>

From laurent.pinchart at skynet.be  Mon Mar 16 12:13:33 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 16 Mar 2009 12:13:33 +0100
Subject: [Linux-uvc-devel] Strange issue with Hercules Dualpix Infinite
In-Reply-To: <200903152126.33155.legrain@crans.org>
References: <200903022158.38436.legrain@crans.org>
	<200903082240.51331.laurent.pinchart@skynet.be>
	<200903152126.33155.legrain@crans.org>
Message-ID: <200903161213.33714.laurent.pinchart@skynet.be>

Hi Gr?gory,

On Sunday 15 March 2009 21:26:32 Gr?gory LEGRAIN wrote:
> Hi,
> I have compiled uvc from the mercurial repository (althought the wiki does
> not exist anymore), and I have now a "nice" (humpf !)  "No valid video
> chain found" on both machines...
>
> Any hints about this problem ?
> Perhaps I missed something while installing the drivers !

To reuse your words, humpf... :-)

Make sure you loaded the videodev.ko and associated modules that come from the 
mercurial repository. On most distributions the uvcvideo.ko module won't load 
with the stock videodev modules, but depending on your kernel configuration 
options you might still be able to load it, which would result in all kind of 
weird issues (and possible system crashes).

Best regards,

Laurent Pinchart



From jelledejong at powercraft.nl  Mon Mar 16 14:29:17 2009
From: jelledejong at powercraft.nl (Jelle de Jong)
Date: Mon, 16 Mar 2009 14:29:17 +0100
Subject: [Linux-uvc-devel] how to get mencoder en mplayer working with
 uvc v4l2 webcams
In-Reply-To: <59cf47a80903151542q706791bs5e7d99ac61e89a9f@mail.gmail.com>
References: <49B979F0.1010308@powercraft.nl>
	<49BA545B.5040305@powercraft.nl>	<49BA6361.3050107@gmail.com>
	<49BAD271.7050402@powercraft.nl>	<59cf47a80903131601n463d9060pa295281326ba57e0@mail.gmail.com>	<49BC299C.70203@powercraft.nl>	<59cf47a80903141633x16f354c4n3930f78eaf0f4d74@mail.gmail.com>	<49BCE3B6.3000605@powercraft.nl>	<59cf47a80903150627xcb9373cv6ab177306da0d77d@mail.gmail.com>	<49BD1ABF.5090009@powercraft.nl>
	<59cf47a80903151542q706791bs5e7d99ac61e89a9f@mail.gmail.com>
Message-ID: <49BE542D.2030706@powercraft.nl>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi Paulo, thank you for the reports,

Why can't gmail sent plain test to mailinglist? ;-)

Paulo Assis wrote:
> Jelle,
> 
> 2009/3/15 Jelle de Jong <jelledejong at powercraft.nl
> <mailto:jelledejong at powercraft.nl>>
> 
>     Hi Paulo and thank you for the help,
> 
>     Paulo Assis wrote:
>     > Mplayer works fine with the following command:
>     > ?mplayer tv:// -tv
>     > driver=v4l2:device=/dev/video0:width=800:height=600:fps=25
>     >
>     > see mplayer.log
> 
>     It seems mplayer does not! work fine, see the resolution, it is
>     unable to
>     render 800x600 it keep sticking at 640x480.
> 
> 
> Yes I notice that :-)

yes it is not working.

>     Could you or somebody else try this command and show the full report:
>     mplayer -identify -benchmark -v tv:// -tv
>     driver=v4l2:device=/dev/video0:width=800:height=600:fps=25
> 
> see mplayer_1.log

thanks, again only 640x480 max, the strange thing is that is does
response to fps and resolution settings below this resolution.

>     > but fails for the ones below.
>     > see mplayer_1.log
>     >
> 
>     Thank you, it seems mplayer dies on your system when trying to
>     access the
>     sound of the webcam I will report this back to mplayer developers
> 
> 
> /dev/dsp1 is the audio card (OSS) for ALSA the same card is  hw:0,0
> for what I know usb audio is not very well supported under OSS.
>  

It can happen, you also use alsa devices for recording, but audio in
linux is a big mess in general.

<snip>

>     could you please test ;-) and show the full report
> 
>     mencoder tv:// -tv
>     driver=v4l2:device=/dev/video0:width=800:height=600:fps=25 -of rawvideo
>     -nosound -ovc lavc -lavcopts vcodec=mpeg4:threads=4 -of lavf -lavfopts
>     format=avi -o output0.avi
> 
> See mencoder.log 
> 

Thanks this has real info, as you can see the fps is only going to be
15fps and it has a strange long startup swing making it impossible to
record in sync audio and video with a fixed fps. This situation is really
bad and need fixing.

> 
>     > I could only get 640x480, this limit seems to be hardcoded in mplayer.
> 
>     The mplayer developer tell me it is not hardcoded and is looking up v4l2
>     stuff. I don't know what is exactly going on here ...
> 
> 
> In that case it can only mean that mplayer has a bug when looking up
> frame-rate and resolution.
> The uvc driver enumerates all resolutions and frame rates just as
> defined by v4l2.
> 

$ sudo v4l-info /dev/video0

this command shows me a lot of errors about the provided v4l fields, it
would not suppris me that because of all these errors mplayer fails. But
somebody need to test mplayer with a device that is fully supported and
has correct v4l flags.

And yes gstreamer, vlc and guvciewer are able to show higher resolutions
but I am unable to record them at the correct fps with synchronized video
and audio.

>     > Like I said live video mpeg encoding requires a lot of cpu power, you
>     > wont find many apps out there that can deliver this, with the quality
>     > you want.
> 
>     My system is powerful enough to do live recordings with mpeg4 with only
>     20% cpu load with mencoder on the 640x480 15fps stream... thats why I
>     need mencoder and mplayer to be able to view the 800x600 at 25 fps
>     streams so I can record them with mencoder and have a more then powerful
>     engough system. mjpeg does not use treading and is very heavy for a dual
>     threaded designed/optimized atom cpu.
> 
> 
> I'm confused mjpeg is heavy but not mpeg4 ?
> mjpeg is, in a very simplistic way, a I frame only mpeg4, if you set
> your camera to stream mjpeg instead of yuyv, you won't even need to
> compress, just have to store the frames to disk.
> 
> Here's a good test:
> in guvcview disable sound and set the camera stream to MJPG instead of
> YUYV, then capture some video, if you notice a fps drop when recording
> this is only due to Disk IO, not CPU since there is no extra processing.

MJPG uses a singe thread non cpu optimized process that seems to heavy
for real time processing, the mpeg4 uses threading and has some cpu
optimization making it run at 20% load. So if possible please optimize
the MJPG. The storage throughput is a issue, even since my end systems
are going to write video to SDHC storage with a absolute max of 15MB/s.


Are these test done with a full supported bcdDevice 0.09 device, so
latest hardware and software version?

Are there Logitech engineers on this list that can response to the issue
and what the future can bring for usb video devices?

And is there a real hardware difference between all these 2MP+ webcam in
the market or are they all from the same ASIC but with different packages
and marketing? And how can one tell a webcam has hardware auto focus or
software autofocus.

Well after 7 days of experimenting I have to come to the conclusion its
currently impossible to use a Linux system for real time minimal 800x600
25fps video recording with standard Debian experimental multimedia
software packages on a headless 1GB DDR2 1.6GHz Atom N270.

If somebody want to create a usb video camera out of a small laptop or
embedded system please feel free to contact me.

I just soled all my 2MP+ webcams, but if somebody can show me they got it
working I will buy some new webcams for testing.

Best regards,

Jelle de Jong
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)

iJwEAQECAAYFAkm+VCsACgkQ1WclBW9j5HnvNwP+MmOCXnt8Ezgn4zz5CvnHnSLA
olVZTB+W6movSnd9KvPrO4Vq9OY75eo/sMdI1GgBG+QCMrD5LPRa46ixitXwJ74a
RjcHOX4zVKvMnL96ZRmKoCGQGjsf8ASoEISYYjnR5CCVT3abFIGvzyoEqBYQV2eE
a0FvG+Obqn9g/xHjDRc=
=TDmO
-----END PGP SIGNATURE-----


From lescopc at esiee.fr  Mon Mar 16 14:43:35 2009
From: lescopc at esiee.fr (lescopc at esiee.fr)
Date: Mon, 16 Mar 2009 14:43:35 +0100 (CET)
Subject: [Linux-uvc-devel] Logitech Quickcam Notebook Pro for Business
Message-ID: <60402.194.3.40.246.1237211015.squirrel@mail2.esiee.fr>

Hello everyone,


I'm using this webcam to do some streaming and image analysis.
When using Logitech's driver under MS Window, it works fine. I've access
to all resolutions with the RGB24 format.

The problem is when running under Linux. I'm using uvcvideo driver via
V4L2 but I can't make it work properly.
The resolution gets stuck to 176x144
and the format is YUYV.

Normally, the webcam is supposed to support a 1600x1200 resolution, how
can I set it up correctly?

Thank you in advance,


xioctl (fd, VIDIOC_ENUM_FMT, &fdq)

returns me 2 formats only: MJPEG and YUYV. YUYV is fine for me but I can't
reach 1600x1200, or 800x600 or even not 320x240!!!!



From lists at mrnaz.com  Mon Mar 16 16:41:24 2009
From: lists at mrnaz.com (Naz)
Date: Tue, 17 Mar 2009 02:41:24 +1100
Subject: [Linux-uvc-devel] UVC with Panasonic camcorder: "Cannot find a
	proper format."
Message-ID: <49BE7324.6000708@mrnaz.com>

Hi there,
    I am trying to get video from my Panasonic NV-GS11 to ffmpeg. I am 
certain that the device is supported, as the UVC web site explicitly 
lists it, and the device ID matches that in the UVC web site's 
compatible devices list.

    I have output the error that ffmpeg outputs, which I think is being 
caused in the UVC layer. I have included the output of lsmod, lsusb and 
lsusb -v for that device, just to confirm that, as far as I can tell, 
the device is connected properly.

    I would be extremely grateful if anyone can tell me what is causing 
the problem.
Thanks in advance!


cic at cic-webcam:~$ ffmpeg -f video4linux2 -s 320x240 -i /dev/video0 ouput.mpg
FFmpeg version 0.5, Copyright (c) 2000-2009 Fabrice Bellard, et al.
  configuration: --enable-libmp3lame --enable-libtheora --enable-libx264 
--enable-libgsm --enable-postproc --enable-libxvid --enable-libfaac 
--enable-pthreads --enable-libvorbis --enable-libfaad --enable-gpl 
--enable-x11grab --enable-libamr-nb --enable-libamr-wb --enable-nonfree 
--enable-gpl
  libavutil     49.15. 0 / 49.15. 0
  libavcodec    52.20. 0 / 52.20. 0
  libavformat   52.31. 0 / 52.31. 0
  libavdevice   52. 1. 0 / 52. 1. 0
  libpostproc   51. 2. 0 / 51. 2. 0
  built on Mar  6 2009 23:31:07, gcc: 4.3.2
[video4linux2 @ 0x95e3290][3]Capabilities: 4000001
[video4linux2 @ 0x95e3290]Cannot find a proper format.
/dev/video0: I/O error occurred
Usually that means that input file is truncated and/or corrupted.
cic at cic-webcam:~$


cic at cic-webcam:~$ lsmod | grep uvc
uvcvideo               63624  0
compat_ioctl32          9344  1 uvcvideo
videodev               41344  1 uvcvideo
v4l1_compat            22404  2 uvcvideo,videodev
usbcore               149360  8 
usb_storage,libusual,uvcvideo,snd_usb_audio,snd_usb_lib,ehci_hcd,uhci_hcd
cic at cic-webcam:~$


cic at cic-webcam:~$ lsusb
Bus 004 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 003 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 002 Device 005: ID 04da:2318 Panasonic (Matsushita)
Bus 002 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 001 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
cic at cic-webcam:~$


cic at cic-webcam:~$ lsusb -d 04da:2318 -v
Bus 002 Device 005: ID 04da:2318 Panasonic (Matsushita)
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x04da Panasonic (Matsushita)
  idProduct          0x2318
  bcdDevice            1.00
  iManufacturer           1
  iProduct                2
  iSerial                 3
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          258
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0xc0
      Self Powered
    MaxPower                2mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               4
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              5
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           39
        dwClockFrequency       13.500000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                17
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          2
        iTerminal               6
        wObjectiveFocalLengthMin    100
        wObjectiveFocalLengthMax   1000
        wOcularFocalLength          100
        bControlSize                  2
        bmControls           0x00000200
          Zoom (Absolute)
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          1
        bSourceID               1
        iTerminal               7
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              8
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                        1
        wTotalLength                       69
        bEndPointAddress                  135
        bmInfo                              0
        bTerminalLink                       2
        bStillCaptureMethod                 0
        bTriggerSupport                     0
        bTriggerUsage                       0
        bControlSize                        1
        bmaControls( 0)                    11
      VideoStreaming Interface Descriptor:
        bLength                            11
        bDescriptorType                    36
        bDescriptorSubtype                  6 (FORMAT_MJPEG)
        bFormatIndex                        1
        bNumFrameDescriptors                1
        bFlags                              0
          Fixed-size samples: No
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x02
          Interlaced stream or variable: No
          Fields per frame: 2 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   786432
        dwMaxBitRate                  3932160
        dwMaxVideoFrameBufferSize       32768
        dwDefaultFrameInterval         666667
        bFrameIntervalType                  0
        dwMinFrameInterval             666667
        dwMaxFrameInterval             666667
        dwFrameIntervalStep                 0
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     0 (Unspecified)
        bTransferCharacteristics            0 (Unspecified)
        bMatrixCoefficients                 0 (Unspecified)
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              8
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x87  EP 7 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       1 Control Device
      bFunctionProtocol       0
      iFunction               4
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0
      iInterface              0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           30
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             2
        wChannelConfig     0x0003
          Left Front (L)
          Right Front (R)
        iChannelNames           0
        iTerminal               0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               1
        iTerminal               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           2
        bDelay                  2 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             2
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            1 Discrete
        tSamFreq[ 0]        16000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               1
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x00
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
can't get device qualifier: Operation not permitted
can't get debug descriptor: Operation not permitted
cannot read device status, Operation not permitted (1)
cic at cic-webcam:~$ lsusb -d 04da:2318 -v






-- 
?????? ?????

Web:  www.mrnaz.com
Ph:   +61 400 460 662



From riccardo.magliocchetti at gmail.com  Mon Mar 16 21:43:41 2009
From: riccardo.magliocchetti at gmail.com (Riccardo Magliocchetti)
Date: Mon, 16 Mar 2009 21:43:41 +0100
Subject: [Linux-uvc-devel] issues with syntek usb webcam
In-Reply-To: <e26aa8c30903161334k2439b01bi6888eb13d5688bb4@mail.gmail.com>
References: <e26aa8c30903161334k2439b01bi6888eb13d5688bb4@mail.gmail.com>
Message-ID: <e26aa8c30903161343t7d2866f9mddd3a6c23cc984ea@mail.gmail.com>

hi,

my syntek webcam (174f:5931) does not work with ekiga and cheese but
it works fine with luvcview.

The kernel is latest linus git tree v2.6.29-rc8-124-g5bee17f , libv4l is 0.5.9.

I've attached lsusb -v output and this is cheese output:

Cheese 2.24.3
Probing devices with HAL...
Found device 174f:5931, getting capabilities...
Detected v4l2 device: USB2.0 UVC PC Camera
Driver: uvcvideo, version: 256
Capabilities: 0x04000001

Probing supported video formats...
Device: USB2.0 UVC PC Camera (/dev/video0)
video/x-raw-yuv 1280 x 1024 num_framerates 1
7/1 video/x-raw-yuv 1280 x 960 num_framerates 1
7/1 video/x-raw-yuv 1280 x 800 num_framerates 1
7/1 video/x-raw-yuv 1024 x 768 num_framerates 1
7/1 video/x-raw-yuv 800 x 600 num_framerates 1
7/1 video/x-raw-yuv 640 x 480 num_framerates 1
20/1 video/x-raw-yuv 352 x 288 num_framerates 1
24/1 video/x-raw-yuv 320 x 240 num_framerates 1
24/1 video/x-raw-yuv 176 x 144 num_framerates 1
24/1 video/x-raw-yuv 160 x 120 num_framerates 1
24/1 video/x-raw-yuv 1280 x 1024 num_framerates 1
[snip]

v4l2src name=video_source device=/dev/video0 ! capsfilter
name=capsfilter
caps=video/x-raw-rgb,width=800,height=600,framerate=7/1;video/x-raw-yuv,width=800,height=600,framerate=7/1
! identity
libv4l2: error setting pixformat: Device or resource busy
libv4l2: error requesting 4 buffers: Device or resource busy


thanks
--
Riccardo Magliocchetti
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lsusb
Type: application/octet-stream
Size: 16453 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090316/df33ced3/attachment.obj>

From deloptes at yahoo.com  Tue Mar 17 01:02:44 2009
From: deloptes at yahoo.com (Emanoil Kotsev)
Date: Mon, 16 Mar 2009 17:02:44 -0700 (PDT)
Subject: [Linux-uvc-devel] how to get mencoder en mplayer working
	with	uvc v4l2
In-Reply-To: <mailman.5646.1237156978.20436.linux-uvc-devel@lists.berlios.de>
Message-ID: <980240.30571.qm@web53208.mail.re2.yahoo.com>



> 
> >
> >
> > > these are vendor specif controls, they are
> defined in the uvc spec and
> > > the linux-uvc driver has support for them.
> > > Since they are vendor specific, they cannot be
> defined in the v4l2 API,
> > > so they need to be mapped into a valid control,
> but applications must be
> > > aware of them.
> > >
> > > They are the ones I know.
> >
> > Thanks for the info!
> >
> > Best regards,
> >
> > Jelle de Jong
> 
> 

Very interesting topic.

I noticed that width=:hight = do not work and tried the one below which uses software scale.
mplayer -ontop -framedrop -cache 8192 -stop-xscreensaver -vf scale -tv  driver=v4l2:outfmt=yv12:device=/dev/video1:fps=25  -xy 1.2 tv://

regards


      


From jelledejong at powercraft.nl  Tue Mar 17 10:59:18 2009
From: jelledejong at powercraft.nl (Jelle de Jong)
Date: Tue, 17 Mar 2009 10:59:18 +0100
Subject: [Linux-uvc-devel] how to get mencoder en mplayer working	with
 uvc v4l2
In-Reply-To: <980240.30571.qm@web53208.mail.re2.yahoo.com>
References: <980240.30571.qm@web53208.mail.re2.yahoo.com>
Message-ID: <49BF7476.7090103@powercraft.nl>

Emanoil Kotsev wrote:
> 
>>>
>>>> these are vendor specif controls, they are
>> defined in the uvc spec and
>>>> the linux-uvc driver has support for them.
>>>> Since they are vendor specific, they cannot be
>> defined in the v4l2 API,
>>>> so they need to be mapped into a valid control,
>> but applications must be
>>>> aware of them.
>>>>
>>>> They are the ones I know.
>>> Thanks for the info!
>>>
>>> Best regards,
>>>
>>> Jelle de Jong
>>
> 
> Very interesting topic.
> 
> I noticed that width=:hight = do not work and tried the one below which uses software scale.
> mplayer -ontop -framedrop -cache 8192 -stop-xscreensaver -vf scale -tv  driver=v4l2:outfmt=yv12:device=/dev/video1:fps=25  -xy 1.2 tv://
> 
> regards
> 

Did you experiment with width=320:height=240 because everything works
below the 640x480 resolution also the fps=30 or fps=5 options, everything
stops working at correctly after the 640x480 the software scaling is just
a trick like a zoom its not the real resolution :-)

Best regards,

Jelle


From deloptes at yahoo.com  Wed Mar 18 01:20:52 2009
From: deloptes at yahoo.com (Emanoil Kotsev)
Date: Tue, 17 Mar 2009 17:20:52 -0700 (PDT)
Subject: [Linux-uvc-devel] how to get mencoder en mplayer working with
	uvc v4l2
In-Reply-To: <mailman.97.1237287753.7405.linux-uvc-devel@lists.berlios.de>
Message-ID: <568292.73123.qm@web53206.mail.re2.yahoo.com>







--- On Tue, 3/17/09, linux-uvc-devel-request at lists.berlios.de <linux-uvc-devel-request at lists.berlios.de> wrote:


> 
> Did you experiment with width=320:height=240 because
> everything works
> below the 640x480 resolution also the fps=30 or fps=5
> options, everything
> stops working at correctly after the 640x480 the software

The usual question is it a bug or is it a feature?! I never read about yv12 and uvc exactly. As I said the topic is very interesting.

> scaling is just
> a trick like a zoom its not the real resolution :-)

yes, tricky zoom :-)

The problem is by applying the width/height options at the wrong place

I read the relevant places in the doc and found few notes on using the -vf scale option depending on if the card has a hardware scaling support or sw should be used

now try this

  mplayer -ontop -framedrop -cache 8192 -stop-xscreensaver \
                -tv driver=v4l2:device=/dev/video0:fps=25:outfmt=yv12 \
                -vf scale=800:600  -sws 4 -vo xv tv://

-sws is just to play with - I didn't notice any significant difference

I'm not using gl but you can try changing the -vo to gl2 and apply the widht/height params to the -tv option and tell me if it works, I just got curious.
I think also to have read something about different width/hight combinations supported  1280/1024/5fps or 640/480/30fps but don't remember where or related to what exactly.
I really don't expect that much from the cheep hardware built in the board of this notebook here.

best regards

PS: the output

Opening video filter: [pp]
Opening video filter: [scale w=800 h=600]
==========================================================================
Trying to force video codec driver family ffmpeg...
Opening video decoder: [ffmpeg] FFmpeg's libavcodec codec family
Selected video codec: [ffmjpeg] vfm: ffmpeg (FFmpeg MJPEG decoder)
==========================================================================
Audio: no sound
Starting playback...
v4l2: select timeout
VDec: vo config request - 640 x 480 (preferred colorspace: Planar 422P)
[PP] Using external postprocessing filter, max q = 6.
VDec: using Planar 422P as output csp (no 1)
Movie-Aspect is undefined - no prescaling applied.
SwScaler: reducing / aligning filtersize 1 -> 4
SwScaler: reducing / aligning filtersize 1 -> 4
SwScaler: reducing / aligning filtersize 1 -> 1
SwScaler: reducing / aligning filtersize 1 -> 1
[swscaler @ 0x89dc4c0]Nearest Neighbor / POINT scaler, from yuv422p to yuv420p using MMX2
[swscaler @ 0x89dc4c0]using 4-tap MMX scaler for horizontal luminance scaling
[swscaler @ 0x89dc4c0]using 4-tap MMX scaler for horizontal chrominance scaling
[swscaler @ 0x89dc4c0]using 1-tap MMX "scaler" for vertical scaling (YV12 like)
[swscaler @ 0x89dc4c0]640x480 -> 800x600
VO: [xv] 800x600 => 800x600 Planar YV12



      


From laurent.pinchart at skynet.be  Wed Mar 18 13:52:30 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 18 Mar 2009 13:52:30 +0100
Subject: [Linux-uvc-devel] Logitech Quickcam Notebook Pro for Business
In-Reply-To: <60402.194.3.40.246.1237211015.squirrel@mail2.esiee.fr>
References: <60402.194.3.40.246.1237211015.squirrel@mail2.esiee.fr>
Message-ID: <200903181352.30555.laurent.pinchart@skynet.be>

Hi,

On Monday 16 March 2009 14:43:35 lescopc at esiee.fr wrote:
> Hello everyone,
>
> I'm using this webcam to do some streaming and image analysis.
> When using Logitech's driver under MS Window, it works fine. I've access
> to all resolutions with the RGB24 format.

The camera doesn't support the RGB24 format natively. Transcoding has to be 
done in software. libv4l2 can help you there.

> The problem is when running under Linux. I'm using uvcvideo driver via
> V4L2 but I can't make it work properly.
> The resolution gets stuck to 176x144
> and the format is YUYV.
>
> Normally, the webcam is supposed to support a 1600x1200 resolution, how
> can I set it up correctly?

You should be able to use higher resolutions. Can you describe your problem in 
details, including the steps performed and the error messages being printed ?

> Thank you in advance,
>
> xioctl (fd, VIDIOC_ENUM_FMT, &fdq)
>
> returns me 2 formats only: MJPEG and YUYV. YUYV is fine for me but I can't
> reach 1600x1200, or 800x600 or even not 320x240!!!!

Best regards,

Laurent Pinchart



From laurent.pinchart at skynet.be  Wed Mar 18 13:59:37 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 18 Mar 2009 13:59:37 +0100
Subject: [Linux-uvc-devel] UVC with Panasonic camcorder: "Cannot find a
	proper format."
In-Reply-To: <49BE7324.6000708@mrnaz.com>
References: <49BE7324.6000708@mrnaz.com>
Message-ID: <200903181359.37476.laurent.pinchart@skynet.be>

Hi,

On Monday 16 March 2009 16:41:24 Naz wrote:
> Hi there,
>     I am trying to get video from my Panasonic NV-GS11 to ffmpeg. I am
> certain that the device is supported, as the UVC web site explicitly
> lists it, and the device ID matches that in the UVC web site's
> compatible devices list.
>
>     I have output the error that ffmpeg outputs, which I think is being
> caused in the UVC layer. I have included the output of lsmod, lsusb and
> lsusb -v for that device, just to confirm that, as far as I can tell,
> the device is connected properly.
>
>     I would be extremely grateful if anyone can tell me what is causing
> the problem.
> Thanks in advance!
>
>
> cic at cic-webcam:~$ ffmpeg -f video4linux2 -s 320x240 -i /dev/video0
> ouput.mpg FFmpeg version 0.5, Copyright (c) 2000-2009 Fabrice Bellard, et
> al. configuration: --enable-libmp3lame --enable-libtheora --enable-libx264
> --enable-libgsm --enable-postproc --enable-libxvid --enable-libfaac
> --enable-pthreads --enable-libvorbis --enable-libfaad --enable-gpl
> --enable-x11grab --enable-libamr-nb --enable-libamr-wb --enable-nonfree
> --enable-gpl
>   libavutil     49.15. 0 / 49.15. 0
>   libavcodec    52.20. 0 / 52.20. 0
>   libavformat   52.31. 0 / 52.31. 0
>   libavdevice   52. 1. 0 / 52. 1. 0
>   libpostproc   51. 2. 0 / 51. 2. 0
>   built on Mar  6 2009 23:31:07, gcc: 4.3.2
> [video4linux2 @ 0x95e3290][3]Capabilities: 4000001
> [video4linux2 @ 0x95e3290]Cannot find a proper format.

Your device supports MJPEG only. Can ffmpeg accept MJPEG input data (with the 
Huffman tables stripped) ?

> /dev/video0: I/O error occurred
> Usually that means that input file is truncated and/or corrupted.
> cic at cic-webcam:~$

Can you check the kernel log (using dmesg) for messages printed by the 
uvcvideo driver ?

Best regards,

Laurent Pinchart



From laurent.pinchart at skynet.be  Wed Mar 18 14:05:10 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 18 Mar 2009 14:05:10 +0100
Subject: [Linux-uvc-devel] issues with syntek usb webcam
In-Reply-To: <e26aa8c30903161343t7d2866f9mddd3a6c23cc984ea@mail.gmail.com>
References: <e26aa8c30903161334k2439b01bi6888eb13d5688bb4@mail.gmail.com>
	<e26aa8c30903161343t7d2866f9mddd3a6c23cc984ea@mail.gmail.com>
Message-ID: <200903181405.10533.laurent.pinchart@skynet.be>

On Monday 16 March 2009 21:43:41 Riccardo Magliocchetti wrote:
> hi,
>
> my syntek webcam (174f:5931) does not work with ekiga and cheese but
> it works fine with luvcview.
>
> The kernel is latest linus git tree v2.6.29-rc8-124-g5bee17f , libv4l is
> 0.5.9.
>
> I've attached lsusb -v output and this is cheese output:
>
> Cheese 2.24.3
> Probing devices with HAL...
> Found device 174f:5931, getting capabilities...
> Detected v4l2 device: USB2.0 UVC PC Camera
> Driver: uvcvideo, version: 256
> Capabilities: 0x04000001
>
> Probing supported video formats...
> Device: USB2.0 UVC PC Camera (/dev/video0)
> video/x-raw-yuv 1280 x 1024 num_framerates 1
> 7/1 video/x-raw-yuv 1280 x 960 num_framerates 1
> 7/1 video/x-raw-yuv 1280 x 800 num_framerates 1
> 7/1 video/x-raw-yuv 1024 x 768 num_framerates 1
> 7/1 video/x-raw-yuv 800 x 600 num_framerates 1
> 7/1 video/x-raw-yuv 640 x 480 num_framerates 1
> 20/1 video/x-raw-yuv 352 x 288 num_framerates 1
> 24/1 video/x-raw-yuv 320 x 240 num_framerates 1
> 24/1 video/x-raw-yuv 176 x 144 num_framerates 1
> 24/1 video/x-raw-yuv 160 x 120 num_framerates 1
> 24/1 video/x-raw-yuv 1280 x 1024 num_framerates 1
> [snip]
>
> v4l2src name=video_source device=/dev/video0 ! capsfilter
> name=capsfilter
> caps=video/x-raw-rgb,width=800,height=600,framerate=7/1;video/x-raw-yuv,wid
>th=800,height=600,framerate=7/1 ! identity
> libv4l2: error setting pixformat: Device or resource busy
> libv4l2: error requesting 4 buffers: Device or resource busy

The device seems to be already open. Use fuser to find out if an application 
is using the video device.

Best regards,

Laurent Pinchart



From riccardo.magliocchetti at gmail.com  Wed Mar 18 20:35:28 2009
From: riccardo.magliocchetti at gmail.com (Riccardo Magliocchetti)
Date: Wed, 18 Mar 2009 20:35:28 +0100
Subject: [Linux-uvc-devel] issues with syntek usb webcam
In-Reply-To: <200903181405.10533.laurent.pinchart@skynet.be>
References: <e26aa8c30903161334k2439b01bi6888eb13d5688bb4@mail.gmail.com>
	<e26aa8c30903161343t7d2866f9mddd3a6c23cc984ea@mail.gmail.com>
	<200903181405.10533.laurent.pinchart@skynet.be>
Message-ID: <49C14D00.7020309@gmail.com>

Laurent Pinchart ha scritto:
> On Monday 16 March 2009 21:43:41 Riccardo Magliocchetti wrote:
>> hi,
>>
>> my syntek webcam (174f:5931) does not work with ekiga and cheese but
>> it works fine with luvcview.
>>
>> The kernel is latest linus git tree v2.6.29-rc8-124-g5bee17f , libv4l is
>> 0.5.9.
>>
>> I've attached lsusb -v output and this is cheese output:
>> [snip]
>> v4l2src name=video_source device=/dev/video0 ! capsfilter
>> name=capsfilter
>> caps=video/x-raw-rgb,width=800,height=600,framerate=7/1;video/x-raw-yuv,wid
>> th=800,height=600,framerate=7/1 ! identity
>> libv4l2: error setting pixformat: Device or resource busy
>> libv4l2: error requesting 4 buffers: Device or resource busy
> 
> The device seems to be already open. Use fuser to find out if an application 
> is using the video device.

Unfortunately fuser reports the device opened only by cheese.

thanks,
Riccardo




From lescopc at esiee.fr  Thu Mar 19 09:27:07 2009
From: lescopc at esiee.fr (lescopc at esiee.fr)
Date: Thu, 19 Mar 2009 09:27:07 +0100 (CET)
Subject: [Linux-uvc-devel] Logitech Quickcam Notebook Pro for Business
In-Reply-To: <200903181352.30555.laurent.pinchart@skynet.be>
References: <60402.194.3.40.246.1237211015.squirrel@mail2.esiee.fr>
	<200903181352.30555.laurent.pinchart@skynet.be>
Message-ID: <34834.194.3.40.246.1237451227.squirrel@mail2.esiee.fr>

Hi,

This is my problem, I don't have any errors. V4L2 API says that when you
ask for a Width and Heigth, the driver will give you the max ones below
the values you asked for. Meaning if you ask for 817x616, it will set
800x600 without returning any errors.


My DMESG (no pb, I have got my "/dev/video0"):

usb 1-2: new full speed USB device using ohci_hcd and address 3
usb 1-2: configuration #1 chosen from 1 choice
uvcvideo: Found UVC 1.00 device <unnamed> (046d:0991)
input: UVC Camera (046d:0991) as
/devices/pci0000:00/0000:00:02.2/usb1/1-2/1-2:1.0/input/input9


An extract of my code, taken from the web (Capture.c):

CLEAR (fmt);

fmt.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
if (-1 == xioctl (fd, VIDIOC_G_FMT, &fmt))
        errno_exit ("VIDIOC_G_FMT");

fmt.fmt.pix.width       = WB_FRAME_WIDTH;   // 800
fmt.fmt.pix.height      = WB_FRAME_HEIGHT;  // 600
fmt.fmt.pix.pixelformat = WB_COLOR_FORMAT;  // YUYV which is perfect for me
fmt.fmt.pix.field       = V4L2_FIELD_INTERLACED;

// Note VIDIOC_S_FMT may change width and height
// So I check the *new* values

fprintf (stderr,
        "width: %d\n"
        "height: %d\n",
        fmt.fmt.pix.width,
        fmt.fmt.pix.height);


It prints 176 by 144! What am I doing wrong?
(later, I check the buffer size allocated via MMAP: 50688 => 176 x 144 x 2)

Any ideas? Where could be the problem?

Regards,


C?dric Lescop



On Wed, March 18, 2009 13:52, Laurent Pinchart wrote:
> Hi,
>
>
> On Monday 16 March 2009 14:43:35 lescopc at esiee.fr wrote:
>
>> Hello everyone,
>>
>>
>> I'm using this webcam to do some streaming and image analysis.
>> When using Logitech's driver under MS Window, it works fine. I've access
>>  to all resolutions with the RGB24 format.
>
> The camera doesn't support the RGB24 format natively. Transcoding has to
> be done in software. libv4l2 can help you there.
>
>> The problem is when running under Linux. I'm using uvcvideo driver via
>> V4L2 but I can't make it work properly.
>> The resolution gets stuck to 176x144
>> and the format is YUYV.
>>
>> Normally, the webcam is supposed to support a 1600x1200 resolution, how
>>  can I set it up correctly?
>
> You should be able to use higher resolutions. Can you describe your
> problem in details, including the steps performed and the error messages
> being printed ?
>
>> Thank you in advance,
>>
>>
>> xioctl (fd, VIDIOC_ENUM_FMT, &fdq)
>>
>> returns me 2 formats only: MJPEG and YUYV. YUYV is fine for me but I
>> can't reach 1600x1200, or 800x600 or even not 320x240!!!!
>
> Best regards,
>
>
> Laurent Pinchart
>
>
>




From pj.assis at gmail.com  Thu Mar 19 10:25:51 2009
From: pj.assis at gmail.com (Paulo Assis)
Date: Thu, 19 Mar 2009 09:25:51 +0000
Subject: [Linux-uvc-devel] Logitech Quickcam Notebook Pro for Business
In-Reply-To: <34834.194.3.40.246.1237451227.squirrel@mail2.esiee.fr>
References: <60402.194.3.40.246.1237211015.squirrel@mail2.esiee.fr>	<200903181352.30555.laurent.pinchart@skynet.be>
	<34834.194.3.40.246.1237451227.squirrel@mail2.esiee.fr>
Message-ID: <49C20F9F.20509@gmail.com>

C?dric Hi,
Could you pleaser try the following function, you will have to make the
necessary adaptations to your code.


int set_format(int fd, int formatIn, int width, int height, int fps)
{
    struct v4l2_format fmt;
    struct v4l2_streamparm streamparm;
    int ret=0;
   
    // set format
    fmt.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
    fmt.fmt.pix.width = width;
    fmt.fmt.pix.height = height;
    fmt.fmt.pix.pixelformat = formatIn;
    fmt.fmt.pix.field = V4L2_FIELD_ANY;
   
    ret = ioctl(fd, VIDIOC_S_FMT, &fmt);
    if (ret < 0)
    {
        fprintf(stderr, "VIDIOC_S_FORMAT - Unable to set format\n");
        return (-1);
    }
    if ((fmt.fmt.pix.width != width) ||
        (fmt.fmt.pix.height != height))
    {
        fprintf(stderr, "Requested Format unavailable: get width %d
height %d \n",
            fmt.fmt.pix.width, fmt.fmt.pix.height);
        return(-2);
    }
   
    streamparm.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
    streamparm.parm.capture.timeperframe.numerator = 1;
    streamparm.parm.capture.timeperframe.denominator = fps;
    ret = ioctl(fd,VIDIOC_S_PARM, &streamparm);
    if (ret < 0)
    {
        fprintf(stderr, "VIDIOC_S_PARM error\n");
        return (-3);
    }
    return (0);
}

Best regards,
Paulo

lescopc at esiee.fr escreveu:
> Hi,
>
> This is my problem, I don't have any errors. V4L2 API says that when you
> ask for a Width and Heigth, the driver will give you the max ones below
> the values you asked for. Meaning if you ask for 817x616, it will set
> 800x600 without returning any errors.
>
>
> My DMESG (no pb, I have got my "/dev/video0"):
>
> usb 1-2: new full speed USB device using ohci_hcd and address 3
> usb 1-2: configuration #1 chosen from 1 choice
> uvcvideo: Found UVC 1.00 device <unnamed> (046d:0991)
> input: UVC Camera (046d:0991) as
> /devices/pci0000:00/0000:00:02.2/usb1/1-2/1-2:1.0/input/input9
>
>
> An extract of my code, taken from the web (Capture.c):
>
> CLEAR (fmt);
>
> fmt.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
> if (-1 == xioctl (fd, VIDIOC_G_FMT, &fmt))
>         errno_exit ("VIDIOC_G_FMT");
>
> fmt.fmt.pix.width       = WB_FRAME_WIDTH;   // 800
> fmt.fmt.pix.height      = WB_FRAME_HEIGHT;  // 600
> fmt.fmt.pix.pixelformat = WB_COLOR_FORMAT;  // YUYV which is perfect for me
> fmt.fmt.pix.field       = V4L2_FIELD_INTERLACED;
>
> // Note VIDIOC_S_FMT may change width and height
> // So I check the *new* values
>
> fprintf (stderr,
>         "width: %d\n"
>         "height: %d\n",
>         fmt.fmt.pix.width,
>         fmt.fmt.pix.height);
>
>
> It prints 176 by 144! What am I doing wrong?
> (later, I check the buffer size allocated via MMAP: 50688 => 176 x 144 x 2)
>
> Any ideas? Where could be the problem?
>
> Regards,
>
>
> C?dric Lescop
>
>
>
> On Wed, March 18, 2009 13:52, Laurent Pinchart wrote:
>   
>> Hi,
>>
>>
>> On Monday 16 March 2009 14:43:35 lescopc at esiee.fr wrote:
>>
>>     
>>> Hello everyone,
>>>
>>>
>>> I'm using this webcam to do some streaming and image analysis.
>>> When using Logitech's driver under MS Window, it works fine. I've access
>>>  to all resolutions with the RGB24 format.
>>>       
>> The camera doesn't support the RGB24 format natively. Transcoding has to
>> be done in software. libv4l2 can help you there.
>>
>>     
>>> The problem is when running under Linux. I'm using uvcvideo driver via
>>> V4L2 but I can't make it work properly.
>>> The resolution gets stuck to 176x144
>>> and the format is YUYV.
>>>
>>> Normally, the webcam is supposed to support a 1600x1200 resolution, how
>>>  can I set it up correctly?
>>>       
>> You should be able to use higher resolutions. Can you describe your
>> problem in details, including the steps performed and the error messages
>> being printed ?
>>
>>     
>>> Thank you in advance,
>>>
>>>
>>> xioctl (fd, VIDIOC_ENUM_FMT, &fdq)
>>>
>>> returns me 2 formats only: MJPEG and YUYV. YUYV is fine for me but I
>>> can't reach 1600x1200, or 800x600 or even not 320x240!!!!
>>>       
>> Best regards,
>>
>>
>> Laurent Pinchart
>>
>>
>>
>>     
>
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>   



From jelledejong at powercraft.nl  Thu Mar 19 12:19:12 2009
From: jelledejong at powercraft.nl (Jelle de Jong)
Date: Thu, 19 Mar 2009 12:19:12 +0100
Subject: [Linux-uvc-devel] how to get mencoder en mplayer working with
 uvc v4l2
In-Reply-To: <568292.73123.qm@web53206.mail.re2.yahoo.com>
References: <568292.73123.qm@web53206.mail.re2.yahoo.com>
Message-ID: <49C22A30.4050001@powercraft.nl>

Emanoil Kotsev wrote:
> 
> 
> 
> 
> 
> --- On Tue, 3/17/09, linux-uvc-devel-request at lists.berlios.de <linux-uvc-devel-request at lists.berlios.de> wrote:
> 
> 
>> Did you experiment with width=320:height=240 because
>> everything works
>> below the 640x480 resolution also the fps=30 or fps=5
>> options, everything
>> stops working at correctly after the 640x480 the software
> 
> The usual question is it a bug or is it a feature?! I never read about yv12 and uvc exactly. As I said the topic is very interesting.
> 
>> scaling is just
>> a trick like a zoom its not the real resolution :-)
> 
> yes, tricky zoom :-)
> 
> The problem is by applying the width/height options at the wrong place
> 
> I read the relevant places in the doc and found few notes on using the -vf scale option depending on if the card has a hardware scaling support or sw should be used
> 
> now try this
> 
>   mplayer -ontop -framedrop -cache 8192 -stop-xscreensaver \
>                 -tv driver=v4l2:device=/dev/video0:fps=25:outfmt=yv12 \
>                 -vf scale=800:600  -sws 4 -vo xv tv://
> 
> -sws is just to play with - I didn't notice any significant difference
> 
> I'm not using gl but you can try changing the -vo to gl2 and apply the widht/height params to the -tv option and tell me if it works, I just got curious.
> I think also to have read something about different width/hight combinations supported  1280/1024/5fps or 640/480/30fps but don't remember where or related to what exactly.
> I really don't expect that much from the cheep hardware built in the board of this notebook here.

Well, it seems to be a real bug:

http://lists.mplayerhq.hu/pipermail/mplayer-cvslog/2009-March/036823.html

I did some mailing last week om the mencoder and mplayer mailinglist and
irc channels and the above patch seem to be the result, so over a few
more days I can do some more testing.

But the scale think does work and show a fake higher resolution but this
is not the real hardware resolution.

Just to let you all know after more then 10 days i finally compiled a
command that works to get in sync audio and video with an other v4l2
devices (usb composite1 grabber).

The winning command is:
$ mencoder tv:// -tv
driver=v4l2:device=/dev/video0:input=1:norm=PAL-BG:adevice=/dev/dsp1:immediatemode=0:audiorate=48000:amode=1:width=720:height=576
-oac pcm -ovc lavc -lavcopts vcodec=dvvideo:threads=4 -mc 0 -noskip -of
lavf -lavfopts format=dv -o output2.dv

Best regards,

Jelle de Jong


From laurent.pinchart at skynet.be  Thu Mar 19 14:30:31 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 19 Mar 2009 14:30:31 +0100
Subject: [Linux-uvc-devel] Logitech Quickcam Notebook Pro for Business
In-Reply-To: <34834.194.3.40.246.1237451227.squirrel@mail2.esiee.fr>
References: <60402.194.3.40.246.1237211015.squirrel@mail2.esiee.fr>
	<200903181352.30555.laurent.pinchart@skynet.be>
	<34834.194.3.40.246.1237451227.squirrel@mail2.esiee.fr>
Message-ID: <200903191430.32112.laurent.pinchart@skynet.be>

Hi C?dric,

On Thursday 19 March 2009 09:27:07 lescopc at esiee.fr wrote:
> Hi,
>
> This is my problem, I don't have any errors. V4L2 API says that when you
> ask for a Width and Heigth, the driver will give you the max ones below
> the values you asked for. Meaning if you ask for 817x616, it will set
> 800x600 without returning any errors.
>
> My DMESG (no pb, I have got my "/dev/video0"):
>
> usb 1-2: new full speed USB device using ohci_hcd and address 3
> usb 1-2: configuration #1 chosen from 1 choice
> uvcvideo: Found UVC 1.00 device <unnamed> (046d:0991)
> input: UVC Camera (046d:0991) as
> /devices/pci0000:00/0000:00:02.2/usb1/1-2/1-2:1.0/input/input9
>
>
> An extract of my code, taken from the web (Capture.c):
>
> CLEAR (fmt);
>
> fmt.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
> if (-1 == xioctl (fd, VIDIOC_G_FMT, &fmt))
>         errno_exit ("VIDIOC_G_FMT");
>
> fmt.fmt.pix.width       = WB_FRAME_WIDTH;   // 800
> fmt.fmt.pix.height      = WB_FRAME_HEIGHT;  // 600
> fmt.fmt.pix.pixelformat = WB_COLOR_FORMAT;  // YUYV which is perfect for me
> fmt.fmt.pix.field       = V4L2_FIELD_INTERLACED;
>
> // Note VIDIOC_S_FMT may change width and height
> // So I check the *new* values
>
> fprintf (stderr,
>         "width: %d\n"
>         "height: %d\n",
>         fmt.fmt.pix.width,
>         fmt.fmt.pix.height);
>
> It prints 176 by 144! What am I doing wrong?
> (later, I check the buffer size allocated via MMAP: 50688 => 176 x 144 x 2)
>
> Any ideas? Where could be the problem?

Try to set the trace parameter to UVC_TRACE_FORMAT (8). The driver will print 
debug messages to the kernel log with the format requested by the application.

echo 8 > /sys/modules/uvcvideo/parameters/trace

Best regards,

Laurent Pinchart



From laurent.pinchart at skynet.be  Thu Mar 19 14:38:23 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 19 Mar 2009 14:38:23 +0100
Subject: [Linux-uvc-devel] issues with syntek usb webcam
In-Reply-To: <49C14D00.7020309@gmail.com>
References: <e26aa8c30903161334k2439b01bi6888eb13d5688bb4@mail.gmail.com>
	<200903181405.10533.laurent.pinchart@skynet.be>
	<49C14D00.7020309@gmail.com>
Message-ID: <200903191438.23457.laurent.pinchart@skynet.be>

On Wednesday 18 March 2009 20:35:28 Riccardo Magliocchetti wrote:
> Laurent Pinchart ha scritto:
> > On Monday 16 March 2009 21:43:41 Riccardo Magliocchetti wrote:
> >> hi,
> >>
> >> my syntek webcam (174f:5931) does not work with ekiga and cheese but
> >> it works fine with luvcview.
> >>
> >> The kernel is latest linus git tree v2.6.29-rc8-124-g5bee17f , libv4l is
> >> 0.5.9.
> >>
> >> I've attached lsusb -v output and this is cheese output:
> >> [snip]
> >> v4l2src name=video_source device=/dev/video0 ! capsfilter
> >> name=capsfilter
> >> caps=video/x-raw-rgb,width=800,height=600,framerate=7/1;video/x-raw-yuv,
> >>wid th=800,height=600,framerate=7/1 ! identity
> >> libv4l2: error setting pixformat: Device or resource busy
> >> libv4l2: error requesting 4 buffers: Device or resource busy
> >
> > The device seems to be already open. Use fuser to find out if an
> > application is using the video device.
>
> Unfortunately fuser reports the device opened only by cheese.

The driver returns -EBUSY either when the device is already opened or if the 
camera is streaming.

Try to set the trace parameter to 255 (echo 255 > 
/sys/modules/uvcvideo/parameters/trace). The driver will then print debug 
messages to the kernel log, including a trace of the functions called by the 
userspace application. You should then be able to check if the device is 
opened twice, or if streaming has been started prior to the failed set format 
call.

Best regards,

Laurent Pinchart



From lescopc at esiee.fr  Thu Mar 19 15:34:34 2009
From: lescopc at esiee.fr (lescopc at esiee.fr)
Date: Thu, 19 Mar 2009 15:34:34 +0100 (CET)
Subject: [Linux-uvc-devel] Logitech Quickcam Notebook Pro for Business
In-Reply-To: <49C20F9F.20509@gmail.com>
References: <60402.194.3.40.246.1237211015.squirrel@mail2.esiee.fr>	<200903181352.30555.laurent.pinchart@skynet.be>
	<34834.194.3.40.246.1237451227.squirrel@mail2.esiee.fr>
	<49C20F9F.20509@gmail.com>
Message-ID: <47941.194.3.40.246.1237473274.squirrel@mail2.esiee.fr>

Hi Paulo,


I inserted you code into mine. I set:
formatIn = V4L2_PIX_FMT_YUYV
width = 640
height = 480
fps = 30

The result is:
"Requested Format unavailable: get width 176 height 144"

Like I usually got :(
Thank you for trying to help me anyway,


C?dric Lescop



On Thu, March 19, 2009 10:25, Paulo Assis wrote:
> C?dric Hi,
> Could you pleaser try the following function, you will have to make the
> necessary adaptations to your code.
>
>
> int set_format(int fd, int formatIn, int width, int height, int fps) {
> struct v4l2_format fmt; struct v4l2_streamparm streamparm; int ret=0;
>
> // set format
> fmt.type = V4L2_BUF_TYPE_VIDEO_CAPTURE; fmt.fmt.pix.width = width;
> fmt.fmt.pix.height = height; fmt.fmt.pix.pixelformat = formatIn;
> fmt.fmt.pix.field = V4L2_FIELD_ANY;
>
> ret = ioctl(fd, VIDIOC_S_FMT, &fmt); if (ret < 0) {
> fprintf(stderr, "VIDIOC_S_FORMAT - Unable to set format\n"); return (-1); }
> if ((fmt.fmt.pix.width != width) || (fmt.fmt.pix.height != height))
> {
> fprintf(stderr, "Requested Format unavailable: get width %d height %d \n",
> fmt.fmt.pix.width, fmt.fmt.pix.height); return(-2); }
>
>
> streamparm.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
> streamparm.parm.capture.timeperframe.numerator = 1;
> streamparm.parm.capture.timeperframe.denominator = fps; ret =
> ioctl(fd,VIDIOC_S_PARM, &streamparm); if (ret < 0) {
> fprintf(stderr, "VIDIOC_S_PARM error\n"); return (-3); }
> return (0); }
>
>
> Best regards,
> Paulo
>
>
> lescopc at esiee.fr escreveu:
>> Hi,
>>
>>
>> This is my problem, I don't have any errors. V4L2 API says that when
>> you ask for a Width and Heigth, the driver will give you the max ones
>> below the values you asked for. Meaning if you ask for 817x616, it will
>> set 800x600 without returning any errors.
>>
>>
>>
>> My DMESG (no pb, I have got my "/dev/video0"):
>>
>>
>> usb 1-2: new full speed USB device using ohci_hcd and address 3 usb 1-2:
>> configuration #1 chosen from 1 choice uvcvideo: Found UVC 1.00 device
>> <unnamed> (046d:0991)
>> input: UVC Camera (046d:0991) as
>> /devices/pci0000:00/0000:00:02.2/usb1/1-2/1-2:1.0/input/input9
>>
>>
>>
>> An extract of my code, taken from the web (Capture.c):
>>
>>
>> CLEAR (fmt);
>>
>>
>> fmt.type = V4L2_BUF_TYPE_VIDEO_CAPTURE; if (-1 == xioctl (fd,
>> VIDIOC_G_FMT, &fmt))
>> errno_exit ("VIDIOC_G_FMT");
>>
>> fmt.fmt.pix.width       = WB_FRAME_WIDTH;   // 800 fmt.fmt.pix.height
>> = WB_FRAME_HEIGHT;  // 600
>> fmt.fmt.pix.pixelformat = WB_COLOR_FORMAT;  // YUYV which is perfect for
>> me fmt.fmt.pix.field       = V4L2_FIELD_INTERLACED;
>>
>> // Note VIDIOC_S_FMT may change width and height
>> // So I check the *new* values
>>
>>
>> fprintf (stderr, "width: %d\n"
>> "height: %d\n",
>> fmt.fmt.pix.width, fmt.fmt.pix.height);
>>
>>
>> It prints 176 by 144! What am I doing wrong?
>> (later, I check the buffer size allocated via MMAP: 50688 => 176 x 144 x
>> 2)
>>
>>
>> Any ideas? Where could be the problem?
>>
>>
>> Regards,
>>
>>
>>
>> C?dric Lescop
>>
>>
>>
>>
>> On Wed, March 18, 2009 13:52, Laurent Pinchart wrote:
>>
>>
>>> Hi,
>>>
>>>
>>>
>>> On Monday 16 March 2009 14:43:35 lescopc at esiee.fr wrote:
>>>
>>>
>>>
>>>> Hello everyone,
>>>>
>>>>
>>>>
>>>> I'm using this webcam to do some streaming and image analysis.
>>>> When using Logitech's driver under MS Window, it works fine. I've
>>>> access to all resolutions with the RGB24 format.
>>>>
>>> The camera doesn't support the RGB24 format natively. Transcoding has
>>> to be done in software. libv4l2 can help you there.
>>>
>>>
>>>> The problem is when running under Linux. I'm using uvcvideo driver
>>>> via V4L2 but I can't make it work properly.
>>>> The resolution gets stuck to 176x144
>>>> and the format is YUYV.
>>>>
>>>> Normally, the webcam is supposed to support a 1600x1200 resolution,
>>>> how can I set it up correctly?
>>>>
>>> You should be able to use higher resolutions. Can you describe your
>>> problem in details, including the steps performed and the error
>>> messages being printed ?
>>>
>>>
>>>> Thank you in advance,
>>>>
>>>>
>>>>
>>>> xioctl (fd, VIDIOC_ENUM_FMT, &fdq)
>>>>
>>>> returns me 2 formats only: MJPEG and YUYV. YUYV is fine for me but
>>>> I
>>>> can't reach 1600x1200, or 800x600 or even not 320x240!!!!
>>>>
>>> Best regards,
>>>
>>>
>>>
>>> Laurent Pinchart
>>>
>>>
>>>
>>>
>>>
>>
>>
>> _______________________________________________
>> Linux-uvc-devel mailing list
>> Linux-uvc-devel at lists.berlios.de
>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>
>>
>>
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>




From riccardo.magliocchetti at gmail.com  Thu Mar 19 15:37:10 2009
From: riccardo.magliocchetti at gmail.com (Riccardo Magliocchetti)
Date: Thu, 19 Mar 2009 15:37:10 +0100
Subject: [Linux-uvc-devel] issues with syntek usb webcam
In-Reply-To: <200903191438.23457.laurent.pinchart@skynet.be>
References: <e26aa8c30903161334k2439b01bi6888eb13d5688bb4@mail.gmail.com>
	<200903181405.10533.laurent.pinchart@skynet.be>
	<49C14D00.7020309@gmail.com>
	<200903191438.23457.laurent.pinchart@skynet.be>
Message-ID: <e26aa8c30903190737j2244d1b1r7420a459e444fce5@mail.gmail.com>

On Thu, Mar 19, 2009 at 2:38 PM, Laurent Pinchart
<laurent.pinchart at skynet.be> wrote:
> On Wednesday 18 March 2009 20:35:28 Riccardo Magliocchetti wrote:
>> Laurent Pinchart ha scritto:
>> > On Monday 16 March 2009 21:43:41 Riccardo Magliocchetti wrote:
>> >> hi,
>> >>
>> >> my syntek webcam (174f:5931) does not work with ekiga and cheese but
>> >> it works fine with luvcview.
>> >>
>> >> The kernel is latest linus git tree v2.6.29-rc8-124-g5bee17f , libv4l is
>> >> 0.5.9.
>> >>
>> >> I've attached lsusb -v output and this is cheese output:
>> >> [snip]
>> >> v4l2src name=video_source device=/dev/video0 ! capsfilter
>> >> name=capsfilter
>> >> caps=video/x-raw-rgb,width=800,height=600,framerate=7/1;video/x-raw-yuv,
>> >>wid th=800,height=600,framerate=7/1 ! identity
>> >> libv4l2: error setting pixformat: Device or resource busy
>> >> libv4l2: error requesting 4 buffers: Device or resource busy
>> >
>> > The device seems to be already open. Use fuser to find out if an
>> > application is using the video device.
>>
>> Unfortunately fuser reports the device opened only by cheese.
>
> The driver returns -EBUSY either when the device is already opened or if the
> camera is streaming.
>
> Try to set the trace parameter to 255 (echo 255 >
> /sys/modules/uvcvideo/parameters/trace). The driver will then print debug
> messages to the kernel log, including a trace of the functions called by the
> userspace application. You should then be able to check if the device is
> opened twice, or if streaming has been started prior to the failed set format
> call.

Yes, i see the device opened twice but i cannot see more :)

One thing i've missed to report is that i have this on boot:

Mar 19 14:59:13 montag kernel: [    5.639794] uvcvideo: UVC non
compliance - GET_DEF(PROBE) not supported. Enabling workaround.

thanks a lot for your patience

-- 
Riccardo Magliocchetti
-------------- next part --------------
A non-text attachment was scrubbed...
Name: uvctrace.log
Type: application/octet-stream
Size: 39324 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090319/3b69b652/attachment.obj>

From laurent.pinchart at skynet.be  Thu Mar 19 15:50:35 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 19 Mar 2009 15:50:35 +0100
Subject: [Linux-uvc-devel] issues with syntek usb webcam
In-Reply-To: <e26aa8c30903190737j2244d1b1r7420a459e444fce5@mail.gmail.com>
References: <e26aa8c30903161334k2439b01bi6888eb13d5688bb4@mail.gmail.com>
	<200903191438.23457.laurent.pinchart@skynet.be>
	<e26aa8c30903190737j2244d1b1r7420a459e444fce5@mail.gmail.com>
Message-ID: <200903191550.35299.laurent.pinchart@skynet.be>

Hi Riccardo,

On Thursday 19 March 2009 15:37:10 Riccardo Magliocchetti wrote:
> On Thu, Mar 19, 2009 at 2:38 PM, Laurent Pinchart
>
> <laurent.pinchart at skynet.be> wrote:
> > On Wednesday 18 March 2009 20:35:28 Riccardo Magliocchetti wrote:
> >> Laurent Pinchart ha scritto:
> >> > On Monday 16 March 2009 21:43:41 Riccardo Magliocchetti wrote:
> >> >> hi,
> >> >>
> >> >> my syntek webcam (174f:5931) does not work with ekiga and cheese but
> >> >> it works fine with luvcview.
> >> >>
> >> >> The kernel is latest linus git tree v2.6.29-rc8-124-g5bee17f , libv4l
> >> >> is 0.5.9.
> >> >>
> >> >> I've attached lsusb -v output and this is cheese output:
> >> >> [snip]
> >> >> v4l2src name=video_source device=/dev/video0 ! capsfilter
> >> >> name=capsfilter
> >> >> caps=video/x-raw-rgb,width=800,height=600,framerate=7/1;video/x-raw-y
> >> >>uv, wid th=800,height=600,framerate=7/1 ! identity
> >> >> libv4l2: error setting pixformat: Device or resource busy
> >> >> libv4l2: error requesting 4 buffers: Device or resource busy
> >> >
> >> > The device seems to be already open. Use fuser to find out if an
> >> > application is using the video device.
> >>
> >> Unfortunately fuser reports the device opened only by cheese.
> >
> > The driver returns -EBUSY either when the device is already opened or if
> > the camera is streaming.
> >
> > Try to set the trace parameter to 255 (echo 255 >
> > /sys/modules/uvcvideo/parameters/trace). The driver will then print debug
> > messages to the kernel log, including a trace of the functions called by
> > the userspace application. You should then be able to check if the device
> > is opened twice, or if streaming has been started prior to the failed set
> > format call.
>
> Yes, i see the device opened twice but i cannot see more :)

That's definitely the problem. After calling VIDIOC_STREAMOFF to stop 
streaming, cheese doesn't close the device and opens another instance. This is 
likely a bug in cheese or libv4l2.

> One thing i've missed to report is that i have this on boot:
>
> Mar 19 14:59:13 montag kernel: [    5.639794] uvcvideo: UVC non
> compliance - GET_DEF(PROBE) not supported. Enabling workaround.

No need to worry about that. Your device isn't 100% UVC compliant, but the 
driver enables a workaround to fix the issue.

Best regards,

Laurent Pinchart



From lescopc at esiee.fr  Thu Mar 19 16:56:49 2009
From: lescopc at esiee.fr (lescopc at esiee.fr)
Date: Thu, 19 Mar 2009 16:56:49 +0100 (CET)
Subject: [Linux-uvc-devel] Logitech Quickcam Notebook Pro for Business
In-Reply-To: <200903191430.32112.laurent.pinchart@skynet.be>
References: <60402.194.3.40.246.1237211015.squirrel@mail2.esiee.fr>
	<200903181352.30555.laurent.pinchart@skynet.be>
	<34834.194.3.40.246.1237451227.squirrel@mail2.esiee.fr>
	<200903191430.32112.laurent.pinchart@skynet.be>
Message-ID: <49893.194.3.40.246.1237478209.squirrel@mail2.esiee.fr>

On Thu, March 19, 2009 14:30, Laurent Pinchart wrote:
> Hi C?dric,
>
>
> On Thursday 19 March 2009 09:27:07 lescopc at esiee.fr wrote:
>
>> Hi,
>>
>>
>> This is my problem, I don't have any errors. V4L2 API says that when
>> you ask for a Width and Heigth, the driver will give you the max ones
>> below the values you asked for. Meaning if you ask for 817x616, it will
>> set 800x600 without returning any errors.
>>
>>
>> My DMESG (no pb, I have got my "/dev/video0"):
>>
>>
>> usb 1-2: new full speed USB device using ohci_hcd and address 3 usb 1-2:
>> configuration #1 chosen from 1 choice uvcvideo: Found UVC 1.00 device
>> <unnamed> (046d:0991)
>> input: UVC Camera (046d:0991) as
>> /devices/pci0000:00/0000:00:02.2/usb1/1-2/1-2:1.0/input/input9
>>
>>
>>
>> An extract of my code, taken from the web (Capture.c):
>>
>>
>> CLEAR (fmt);
>>
>>
>> fmt.type = V4L2_BUF_TYPE_VIDEO_CAPTURE; if (-1 == xioctl (fd,
>> VIDIOC_G_FMT, &fmt))
>> errno_exit ("VIDIOC_G_FMT");
>>
>> fmt.fmt.pix.width       = WB_FRAME_WIDTH;   // 800 fmt.fmt.pix.height
>> = WB_FRAME_HEIGHT;  // 600
>> fmt.fmt.pix.pixelformat = WB_COLOR_FORMAT;  // YUYV which is perfect for
>> me fmt.fmt.pix.field       = V4L2_FIELD_INTERLACED;
>>
>> // Note VIDIOC_S_FMT may change width and height
>> // So I check the *new* values
>>
>>
>> fprintf (stderr, "width: %d\n"
>> "height: %d\n",
>> fmt.fmt.pix.width, fmt.fmt.pix.height);
>>
>> It prints 176 by 144! What am I doing wrong?
>> (later, I check the buffer size allocated via MMAP: 50688 => 176 x 144 x
>> 2)
>>
>>
>> Any ideas? Where could be the problem?
>>
>
> Try to set the trace parameter to UVC_TRACE_FORMAT (8). The driver will
> print debug messages to the kernel log with the format requested by the
> application.
>
> echo 8 > /sys/modules/uvcvideo/parameters/trace
>
> Best regards,
>
>
> Laurent Pinchart


I set the trace parameters  like you said.
First, I had a request for 176x144 format.
Then, I commented out those 2 lines:

(-1 == xioctl (fd,VIDIOC_G_FMT, &fmt))
   errno_exit ("VIDIOC_G_FMT");

And I got:

uvcvideo: Trying format 0x56595559 (YUYV): 640x480.
uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
uvcvideo: Setting frame interval to 1/30 (333333).


Now, I have got the good request but it still does not work. The buffers'
size is still 506888, meaning the format is still 176x144 :(

Should I check anything else? I will try luvcview and give some more
feedback.

Best regards,


C?dric Lescop




From pj.assis at gmail.com  Thu Mar 19 17:51:40 2009
From: pj.assis at gmail.com (Paulo Assis)
Date: Thu, 19 Mar 2009 16:51:40 +0000
Subject: [Linux-uvc-devel] Logitech Quickcam Notebook Pro for Business
In-Reply-To: <57189.194.3.40.246.1237478541.squirrel@mail2.esiee.fr>
References: <60402.194.3.40.246.1237211015.squirrel@mail2.esiee.fr>	<200903181352.30555.laurent.pinchart@skynet.be>
	<34834.194.3.40.246.1237451227.squirrel@mail2.esiee.fr>
	<49C20F9F.20509@gmail.com>
	<47941.194.3.40.246.1237473274.squirrel@mail2.esiee.fr>
	<49C25ED4.7010307@gmail.com>
	<57189.194.3.40.246.1237478541.squirrel@mail2.esiee.fr>
Message-ID: <49C2781C.8040402@gmail.com>

C?dric,

According to logitech:
http://www.quickcamteam.net/devices/logitech_uvc_frame_format_matrix.xls

your camera should support up to 1600x1200 at 5fps in yuv mode.
However it's only reporting up to 176x144, this is very strange.

I've seen some posts(
http://www.hbrobotics.org/wiki/index.php5/Beagle_Board#1.29_TUTORIAL:_What_to_buy
)
that seem to indicate there are two different versions of this webcam,
not sure about the differences.

Maybe you should report this to logitech:  http://forums.quickcamteam.net/

Best regards,
Paulo

lescopc at esiee.fr escreveu:
> Paulo,
>
>
> Here what I have from "luvcview -L":
>
> luvcview version 0.2.1
> Video driver: x11
> A window manager is available
> video /dev/video0
> /dev/video0 does not support read i/o
> { pixelformat = 'MJPG', description = 'MJPEG' }
> { discrete: width = 160, height = 120 }
> 	Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
> { discrete: width = 176, height = 144 }
> 	Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
> { discrete: width = 320, height = 240 }
> 	Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
> { discrete: width = 352, height = 288 }
> 	Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
> { discrete: width = 640, height = 480 }
> 	Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
> { discrete: width = 800, height = 600 }
> 	Time interval between frame: 1/15, 1/10, 1/5,
> { pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
> { discrete: width = 160, height = 120 }
> 	Time interval between frame: 1/15, 1/10, 1/5,
> { discrete: width = 176, height = 144 }
> 	Time interval between frame: 1/15, 1/10, 1/5,
>
>
> Does it mean I can't make it work under Linux? I know the webcam can go
> till 1600x1200 under MS Window with Logitech owner's drivers...
> Is there anything I could modify or configure to work it out?
>
>
> Regards,
>
>
> C?dric Lescop
>
>
>
>
> On Thu, March 19, 2009 16:03, Paulo Assis wrote:
>   
>> C?dric,
>> Have you tried listing the device formats:
>> use "luvcview -L" or "guvcview --verbose" any of these commands should
>> print a list of available formats for your device
>>
>> Best regards,
>> Paulo
>>
>>
>> lescopc at esiee.fr escreveu:
>>     
>>> Hi Paulo,
>>>
>>>
>>>
>>> I inserted you code into mine. I set:
>>> formatIn = V4L2_PIX_FMT_YUYV width = 640 height = 480 fps = 30
>>>
>>> The result is:
>>> "Requested Format unavailable: get width 176 height 144"
>>>
>>>
>>> Like I usually got :(
>>> Thank you for trying to help me anyway,
>>>
>>>
>>>
>>> C?dric Lescop
>>>
>>>
>>>
>>>
>>> On Thu, March 19, 2009 10:25, Paulo Assis wrote:
>>>
>>>
>>>       
>>>> C?dric Hi,
>>>> Could you pleaser try the following function, you will have to make
>>>> the necessary adaptations to your code.
>>>>
>>>>
>>>> int set_format(int fd, int formatIn, int width, int height, int fps)
>>>> {
>>>> struct v4l2_format fmt; struct v4l2_streamparm streamparm; int ret=0;
>>>>
>>>> // set format
>>>> fmt.type = V4L2_BUF_TYPE_VIDEO_CAPTURE; fmt.fmt.pix.width = width;
>>>> fmt.fmt.pix.height = height; fmt.fmt.pix.pixelformat = formatIn;
>>>> fmt.fmt.pix.field = V4L2_FIELD_ANY;
>>>>
>>>> ret = ioctl(fd, VIDIOC_S_FMT, &fmt); if (ret < 0) { fprintf(stderr,
>>>> "VIDIOC_S_FORMAT - Unable to set format\n"); return (-1); }
>>>> if ((fmt.fmt.pix.width != width) || (fmt.fmt.pix.height != height)) {
>>>> fprintf(stderr, "Requested Format unavailable: get width %d height %d
>>>> \n",
>>>> fmt.fmt.pix.width, fmt.fmt.pix.height); return(-2); }
>>>>
>>>>
>>>> streamparm.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
>>>> streamparm.parm.capture.timeperframe.numerator = 1;
>>>> streamparm.parm.capture.timeperframe.denominator = fps; ret =
>>>> ioctl(fd,VIDIOC_S_PARM, &streamparm); if (ret < 0) { fprintf(stderr,
>>>> "VIDIOC_S_PARM error\n"); return (-3); }
>>>> return (0); }
>>>>
>>>>
>>>> Best regards,
>>>> Paulo
>>>>
>>>>
>>>>
>>>> lescopc at esiee.fr escreveu:
>>>>
>>>>         
>>>>> Hi,
>>>>>
>>>>>
>>>>>
>>>>> This is my problem, I don't have any errors. V4L2 API says that
>>>>> when you ask for a Width and Heigth, the driver will give you the
>>>>> max ones below the values you asked for. Meaning if you ask for
>>>>> 817x616, it will
>>>>> set 800x600 without returning any errors.
>>>>>
>>>>>
>>>>>
>>>>> My DMESG (no pb, I have got my "/dev/video0"):
>>>>>
>>>>>
>>>>>
>>>>> usb 1-2: new full speed USB device using ohci_hcd and address 3 usb
>>>>> 1-2:
>>>>> configuration #1 chosen from 1 choice uvcvideo: Found UVC 1.00
>>>>> device <unnamed> (046d:0991)
>>>>> input: UVC Camera (046d:0991) as
>>>>> /devices/pci0000:00/0000:00:02.2/usb1/1-2/1-2:1.0/input/input9
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> An extract of my code, taken from the web (Capture.c):
>>>>>
>>>>>
>>>>>
>>>>> CLEAR (fmt);
>>>>>
>>>>>
>>>>>
>>>>> fmt.type = V4L2_BUF_TYPE_VIDEO_CAPTURE; if (-1 == xioctl (fd,
>>>>> VIDIOC_G_FMT, &fmt))
>>>>> errno_exit ("VIDIOC_G_FMT");
>>>>>
>>>>> fmt.fmt.pix.width       = WB_FRAME_WIDTH;   // 800
>>>>> fmt.fmt.pix.height = WB_FRAME_HEIGHT;  // 600
>>>>> fmt.fmt.pix.pixelformat = WB_COLOR_FORMAT;  // YUYV which is perfect
>>>>> for me fmt.fmt.pix.field       = V4L2_FIELD_INTERLACED;
>>>>>
>>>>> // Note VIDIOC_S_FMT may change width and height
>>>>> // So I check the *new* values
>>>>>
>>>>>
>>>>>
>>>>> fprintf (stderr, "width: %d\n" "height: %d\n",
>>>>> fmt.fmt.pix.width, fmt.fmt.pix.height);
>>>>>
>>>>>
>>>>> It prints 176 by 144! What am I doing wrong?
>>>>> (later, I check the buffer size allocated via MMAP: 50688 => 176 x
>>>>> 144 x
>>>>> 2)
>>>>>
>>>>>
>>>>>
>>>>> Any ideas? Where could be the problem?
>>>>>
>>>>>
>>>>>
>>>>> Regards,
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> C?dric Lescop
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> On Wed, March 18, 2009 13:52, Laurent Pinchart wrote:
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>           
>>>>>> Hi,
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> On Monday 16 March 2009 14:43:35 lescopc at esiee.fr wrote:
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>>>> Hello everyone,
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> I'm using this webcam to do some streaming and image analysis.
>>>>>>> When using Logitech's driver under MS Window, it works fine.
>>>>>>> I've
>>>>>>> access to all resolutions with the RGB24 format.
>>>>>>>
>>>>>>>
>>>>>>>               
>>>>>> The camera doesn't support the RGB24 format natively. Transcoding
>>>>>> has to be done in software. libv4l2 can help you there.
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>>>> The problem is when running under Linux. I'm using uvcvideo
>>>>>>> driver via V4L2 but I can't make it work properly. The resolution
>>>>>>> gets stuck to 176x144 and the format is YUYV.
>>>>>>>
>>>>>>> Normally, the webcam is supposed to support a 1600x1200
>>>>>>> resolution, how can I set it up correctly?
>>>>>>>
>>>>>>>
>>>>>>>               
>>>>>> You should be able to use higher resolutions. Can you describe
>>>>>> your problem in details, including the steps performed and the
>>>>>> error messages being printed ?
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>>>> Thank you in advance,
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> xioctl (fd, VIDIOC_ENUM_FMT, &fdq)
>>>>>>>
>>>>>>> returns me 2 formats only: MJPEG and YUYV. YUYV is fine for me
>>>>>>> but I
>>>>>>> can't reach 1600x1200, or 800x600 or even not 320x240!!!!
>>>>>>>
>>>>>>>
>>>>>>>               
>>>>>> Best regards,
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> Laurent Pinchart
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>> _______________________________________________
>>>>> Linux-uvc-devel mailing list
>>>>> Linux-uvc-devel at lists.berlios.de
>>>>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>           
>>>> _______________________________________________
>>>> Linux-uvc-devel mailing list
>>>> Linux-uvc-devel at lists.berlios.de
>>>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>>>
>>>>
>>>>
>>>>
>>>>         
>>>
>>>
>>>       
>>     
>
>
>
>   



From jquelen at gmail.com  Thu Mar 19 18:31:00 2009
From: jquelen at gmail.com (julien quelen)
Date: Thu, 19 Mar 2009 18:31:00 +0100
Subject: [Linux-uvc-devel] Minoru stereo webcam: Auto Control deactivation
Message-ID: <8159710f0903191031g6f946e8er90506c761550fa22@mail.gmail.com>

Hi all,

I am using the new Minoru stereo webcam under Linux with the last
version of uvcvideo driver.
I get simultaneously the two 640x480 videos at 15fps. Thank you very
much for the patch Laurent.

However, i  don't manage to deactivate the auto gain and auto exposure
on the two cameras.(I get an error with V4L2_CID_AUTOGAIN and
V4L2_CID_EXPOSURE_AUTO )
I also don't manage to tune exposure, or white balance..

Is it possible to do that?

Thanks in advance!

Regards

Julien Quelen


From pj.assis at gmail.com  Thu Mar 19 21:33:43 2009
From: pj.assis at gmail.com (Paulo Assis)
Date: Thu, 19 Mar 2009 20:33:43 +0000
Subject: [Linux-uvc-devel] Logitech Quickcam Notebook Pro for Business
In-Reply-To: <57189.194.3.40.246.1237478541.squirrel@mail2.esiee.fr>
References: <60402.194.3.40.246.1237211015.squirrel@mail2.esiee.fr>
	<200903181352.30555.laurent.pinchart@skynet.be>
	<34834.194.3.40.246.1237451227.squirrel@mail2.esiee.fr>
	<49C20F9F.20509@gmail.com>
	<47941.194.3.40.246.1237473274.squirrel@mail2.esiee.fr>
	<49C25ED4.7010307@gmail.com>
	<57189.194.3.40.246.1237478541.squirrel@mail2.esiee.fr>
Message-ID: <59cf47a80903191333i7825e8e2u7ea2e065763ba56f@mail.gmail.com>

C?dric,
I think I failed to see the obvious.

Make sure your camera is connected to a USB2 hub.
Logitech cameras (and maybe all uvc devices) cut down available resolutions
when pluged  to a slower USB1 pipe.


Best regards,
Paulo

2009/3/19 <lescopc at esiee.fr>

> Paulo,
>
>
> Here what I have from "luvcview -L":
>
> luvcview version 0.2.1
> Video driver: x11
> A window manager is available
> video /dev/video0
> /dev/video0 does not support read i/o
> { pixelformat = 'MJPG', description = 'MJPEG' }
> { discrete: width = 160, height = 120 }
>        Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
> { discrete: width = 176, height = 144 }
>        Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
> { discrete: width = 320, height = 240 }
>        Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
> { discrete: width = 352, height = 288 }
>        Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
> { discrete: width = 640, height = 480 }
>        Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
> { discrete: width = 800, height = 600 }
>        Time interval between frame: 1/15, 1/10, 1/5,
> { pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
> { discrete: width = 160, height = 120 }
>        Time interval between frame: 1/15, 1/10, 1/5,
> { discrete: width = 176, height = 144 }
>        Time interval between frame: 1/15, 1/10, 1/5,
>
>
> Does it mean I can't make it work under Linux? I know the webcam can go
> till 1600x1200 under MS Window with Logitech owner's drivers...
> Is there anything I could modify or configure to work it out?
>
>
> Regards,
>
>
> C?dric Lescop
>
>
>
>
> On Thu, March 19, 2009 16:03, Paulo Assis wrote:
> > C?dric,
> > Have you tried listing the device formats:
> > use "luvcview -L" or "guvcview --verbose" any of these commands should
> > print a list of available formats for your device
> >
> > Best regards,
> > Paulo
> >
> >
> > lescopc at esiee.fr escreveu:
> >> Hi Paulo,
> >>
> >>
> >>
> >> I inserted you code into mine. I set:
> >> formatIn = V4L2_PIX_FMT_YUYV width = 640 height = 480 fps = 30
> >>
> >> The result is:
> >> "Requested Format unavailable: get width 176 height 144"
> >>
> >>
> >> Like I usually got :(
> >> Thank you for trying to help me anyway,
> >>
> >>
> >>
> >> C?dric Lescop
> >>
> >>
> >>
> >>
> >> On Thu, March 19, 2009 10:25, Paulo Assis wrote:
> >>
> >>
> >>> C?dric Hi,
> >>> Could you pleaser try the following function, you will have to make
> >>> the necessary adaptations to your code.
> >>>
> >>>
> >>> int set_format(int fd, int formatIn, int width, int height, int fps)
> >>> {
> >>> struct v4l2_format fmt; struct v4l2_streamparm streamparm; int ret=0;
> >>>
> >>> // set format
> >>> fmt.type = V4L2_BUF_TYPE_VIDEO_CAPTURE; fmt.fmt.pix.width = width;
> >>> fmt.fmt.pix.height = height; fmt.fmt.pix.pixelformat = formatIn;
> >>> fmt.fmt.pix.field = V4L2_FIELD_ANY;
> >>>
> >>> ret = ioctl(fd, VIDIOC_S_FMT, &fmt); if (ret < 0) { fprintf(stderr,
> >>> "VIDIOC_S_FORMAT - Unable to set format\n"); return (-1); }
> >>> if ((fmt.fmt.pix.width != width) || (fmt.fmt.pix.height != height)) {
> >>> fprintf(stderr, "Requested Format unavailable: get width %d height %d
> >>> \n",
> >>> fmt.fmt.pix.width, fmt.fmt.pix.height); return(-2); }
> >>>
> >>>
> >>> streamparm.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
> >>> streamparm.parm.capture.timeperframe.numerator = 1;
> >>> streamparm.parm.capture.timeperframe.denominator = fps; ret =
> >>> ioctl(fd,VIDIOC_S_PARM, &streamparm); if (ret < 0) { fprintf(stderr,
> >>> "VIDIOC_S_PARM error\n"); return (-3); }
> >>> return (0); }
> >>>
> >>>
> >>> Best regards,
> >>> Paulo
> >>>
> >>>
> >>>
> >>> lescopc at esiee.fr escreveu:
> >>>
> >>>> Hi,
> >>>>
> >>>>
> >>>>
> >>>> This is my problem, I don't have any errors. V4L2 API says that
> >>>> when you ask for a Width and Heigth, the driver will give you the
> >>>> max ones below the values you asked for. Meaning if you ask for
> >>>> 817x616, it will
> >>>> set 800x600 without returning any errors.
> >>>>
> >>>>
> >>>>
> >>>> My DMESG (no pb, I have got my "/dev/video0"):
> >>>>
> >>>>
> >>>>
> >>>> usb 1-2: new full speed USB device using ohci_hcd and address 3 usb
> >>>> 1-2:
> >>>> configuration #1 chosen from 1 choice uvcvideo: Found UVC 1.00
> >>>> device <unnamed> (046d:0991)
> >>>> input: UVC Camera (046d:0991) as
> >>>> /devices/pci0000:00/0000:00:02.2/usb1/1-2/1-2:1.0/input/input9
> >>>>
> >>>>
> >>>>
> >>>>
> >>>> An extract of my code, taken from the web (Capture.c):
> >>>>
> >>>>
> >>>>
> >>>> CLEAR (fmt);
> >>>>
> >>>>
> >>>>
> >>>> fmt.type = V4L2_BUF_TYPE_VIDEO_CAPTURE; if (-1 == xioctl (fd,
> >>>> VIDIOC_G_FMT, &fmt))
> >>>> errno_exit ("VIDIOC_G_FMT");
> >>>>
> >>>> fmt.fmt.pix.width       = WB_FRAME_WIDTH;   // 800
> >>>> fmt.fmt.pix.height = WB_FRAME_HEIGHT;  // 600
> >>>> fmt.fmt.pix.pixelformat = WB_COLOR_FORMAT;  // YUYV which is perfect
> >>>> for me fmt.fmt.pix.field       = V4L2_FIELD_INTERLACED;
> >>>>
> >>>> // Note VIDIOC_S_FMT may change width and height
> >>>> // So I check the *new* values
> >>>>
> >>>>
> >>>>
> >>>> fprintf (stderr, "width: %d\n" "height: %d\n",
> >>>> fmt.fmt.pix.width, fmt.fmt.pix.height);
> >>>>
> >>>>
> >>>> It prints 176 by 144! What am I doing wrong?
> >>>> (later, I check the buffer size allocated via MMAP: 50688 => 176 x
> >>>> 144 x
> >>>> 2)
> >>>>
> >>>>
> >>>>
> >>>> Any ideas? Where could be the problem?
> >>>>
> >>>>
> >>>>
> >>>> Regards,
> >>>>
> >>>>
> >>>>
> >>>>
> >>>> C?dric Lescop
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>>> On Wed, March 18, 2009 13:52, Laurent Pinchart wrote:
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>> Hi,
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>> On Monday 16 March 2009 14:43:35 lescopc at esiee.fr wrote:
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>> Hello everyone,
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>> I'm using this webcam to do some streaming and image analysis.
> >>>>>> When using Logitech's driver under MS Window, it works fine.
> >>>>>> I've
> >>>>>> access to all resolutions with the RGB24 format.
> >>>>>>
> >>>>>>
> >>>>> The camera doesn't support the RGB24 format natively. Transcoding
> >>>>> has to be done in software. libv4l2 can help you there.
> >>>>>
> >>>>>
> >>>>>
> >>>>>> The problem is when running under Linux. I'm using uvcvideo
> >>>>>> driver via V4L2 but I can't make it work properly. The resolution
> >>>>>> gets stuck to 176x144 and the format is YUYV.
> >>>>>>
> >>>>>> Normally, the webcam is supposed to support a 1600x1200
> >>>>>> resolution, how can I set it up correctly?
> >>>>>>
> >>>>>>
> >>>>> You should be able to use higher resolutions. Can you describe
> >>>>> your problem in details, including the steps performed and the
> >>>>> error messages being printed ?
> >>>>>
> >>>>>
> >>>>>
> >>>>>> Thank you in advance,
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>> xioctl (fd, VIDIOC_ENUM_FMT, &fdq)
> >>>>>>
> >>>>>> returns me 2 formats only: MJPEG and YUYV. YUYV is fine for me
> >>>>>> but I
> >>>>>> can't reach 1600x1200, or 800x600 or even not 320x240!!!!
> >>>>>>
> >>>>>>
> >>>>> Best regards,
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>> Laurent Pinchart
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>> _______________________________________________
> >>>> Linux-uvc-devel mailing list
> >>>> Linux-uvc-devel at lists.berlios.de
> >>>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>> _______________________________________________
> >>> Linux-uvc-devel mailing list
> >>> Linux-uvc-devel at lists.berlios.de
> >>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> >>>
> >>>
> >>>
> >>>
> >>
> >>
> >>
> >>
> >
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090319/ffee840f/attachment.html>

From lescopc at esiee.fr  Fri Mar 20 13:17:16 2009
From: lescopc at esiee.fr (lescopc at esiee.fr)
Date: Fri, 20 Mar 2009 13:17:16 +0100 (CET)
Subject: [Linux-uvc-devel] Logitech Quickcam Notebook Pro for Business
In-Reply-To: <59cf47a80903191333i7825e8e2u7ea2e065763ba56f@mail.gmail.com>
References: <60402.194.3.40.246.1237211015.squirrel@mail2.esiee.fr>
	<200903181352.30555.laurent.pinchart@skynet.be>
	<34834.194.3.40.246.1237451227.squirrel@mail2.esiee.fr>
	<49C20F9F.20509@gmail.com>
	<47941.194.3.40.246.1237473274.squirrel@mail2.esiee.fr>
	<49C25ED4.7010307@gmail.com>
	<57189.194.3.40.246.1237478541.squirrel@mail2.esiee.fr>
	<59cf47a80903191333i7825e8e2u7ea2e065763ba56f@mail.gmail.com>
Message-ID: <33825.194.3.40.246.1237551436.squirrel@mail2.esiee.fr>

Paulo,

For the moment, you are right ;)
My webcam is connected to an USB 1.1 port. My computer is an old fashion
one, only has USB 1.1 ports. Right now, I am configuring another one which
has USB 2.0 ports. I will give you some feedback as soon as I can.
Hope you are totally right and that it is the solution to all of my problems!

Best regards,


C?dric Lescop



On Thu, March 19, 2009 21:33, Paulo Assis wrote:
> C?dric,
> I think I failed to see the obvious.
>
>
> Make sure your camera is connected to a USB2 hub.
> Logitech cameras (and maybe all uvc devices) cut down available
> resolutions when pluged  to a slower USB1 pipe.
>
>
> Best regards,
> Paulo
>
>
> 2009/3/19 <lescopc at esiee.fr>
>
>
>> Paulo,
>>
>>
>>
>> Here what I have from "luvcview -L":
>>
>>
>> luvcview version 0.2.1 Video driver: x11
>> A window manager is available
>> video /dev/video0 /dev/video0 does not support read i/o
>> { pixelformat = 'MJPG', description = 'MJPEG' }
>> { discrete: width = 160, height = 120 }
>> Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
>> { discrete: width = 176, height = 144 }
>> Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
>> { discrete: width = 320, height = 240 }
>> Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
>> { discrete: width = 352, height = 288 }
>> Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
>> { discrete: width = 640, height = 480 }
>> Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
>> { discrete: width = 800, height = 600 }
>> Time interval between frame: 1/15, 1/10, 1/5,
>> { pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
>> { discrete: width = 160, height = 120 }
>> Time interval between frame: 1/15, 1/10, 1/5,
>> { discrete: width = 176, height = 144 }
>> Time interval between frame: 1/15, 1/10, 1/5,
>>
>>
>>
>> Does it mean I can't make it work under Linux? I know the webcam can go
>>  till 1600x1200 under MS Window with Logitech owner's drivers... Is
>> there anything I could modify or configure to work it out?
>>
>>
>> Regards,
>>
>>
>>
>> C?dric Lescop
>>
>>
>>
>>
>>
>> On Thu, March 19, 2009 16:03, Paulo Assis wrote:
>>
>>> C?dric,
>>> Have you tried listing the device formats:
>>> use "luvcview -L" or "guvcview --verbose" any of these commands should
>>>  print a list of available formats for your device
>>>
>>> Best regards,
>>> Paulo
>>>
>>>
>>>
>>> lescopc at esiee.fr escreveu:
>>>> Hi Paulo,
>>>>
>>>>
>>>>
>>>>
>>>> I inserted you code into mine. I set:
>>>> formatIn = V4L2_PIX_FMT_YUYV width = 640 height = 480 fps = 30
>>>>
>>>> The result is:
>>>> "Requested Format unavailable: get width 176 height 144"
>>>>
>>>>
>>>>
>>>> Like I usually got :(
>>>> Thank you for trying to help me anyway,
>>>>
>>>>
>>>>
>>>>
>>>> C?dric Lescop
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> On Thu, March 19, 2009 10:25, Paulo Assis wrote:
>>>>
>>>>
>>>>
>>>>> C?dric Hi,
>>>>> Could you pleaser try the following function, you will have to
>>>>> make the necessary adaptations to your code.
>>>>>
>>>>>
>>>>> int set_format(int fd, int formatIn, int width, int height, int
>>>>> fps) {
>>>>> struct v4l2_format fmt; struct v4l2_streamparm streamparm; int
>>>>> ret=0;
>>>>>
>>>>> // set format
>>>>> fmt.type = V4L2_BUF_TYPE_VIDEO_CAPTURE; fmt.fmt.pix.width = width;
>>>>>  fmt.fmt.pix.height = height; fmt.fmt.pix.pixelformat = formatIn;
>>>>>  fmt.fmt.pix.field = V4L2_FIELD_ANY;
>>>>>
>>>>> ret = ioctl(fd, VIDIOC_S_FMT, &fmt); if (ret < 0) {
>>>>> fprintf(stderr, "VIDIOC_S_FORMAT - Unable to set format\n");
>>>>> return (-1); } if ((fmt.fmt.pix.width != width) ||
>>>>> (fmt.fmt.pix.height != height)) {
>>>>> fprintf(stderr, "Requested Format unavailable: get width %d height
>>>>> %d
>>>>> \n",
>>>>> fmt.fmt.pix.width, fmt.fmt.pix.height); return(-2); }
>>>>>
>>>>>
>>>>> streamparm.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
>>>>> streamparm.parm.capture.timeperframe.numerator = 1;
>>>>> streamparm.parm.capture.timeperframe.denominator = fps; ret =
>>>>> ioctl(fd,VIDIOC_S_PARM, &streamparm); if (ret < 0) {
>>>>> fprintf(stderr, "VIDIOC_S_PARM error\n"); return (-3); }
>>>>> return (0); }
>>>>>
>>>>>
>>>>> Best regards,
>>>>> Paulo
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> lescopc at esiee.fr escreveu:
>>>>>
>>>>>> Hi,
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> This is my problem, I don't have any errors. V4L2 API says that
>>>>>>  when you ask for a Width and Heigth, the driver will give you
>>>>>> the max ones below the values you asked for. Meaning if you ask
>>>>>> for 817x616, it will
>>>>>> set 800x600 without returning any errors.
>>>>>>
>>>>>>
>>>>>>
>>>>>> My DMESG (no pb, I have got my "/dev/video0"):
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> usb 1-2: new full speed USB device using ohci_hcd and address 3
>>>>>> usb 1-2:
>>>>>> configuration #1 chosen from 1 choice uvcvideo: Found UVC 1.00
>>>>>> device <unnamed> (046d:0991) input: UVC Camera (046d:0991) as
>>>>>> /devices/pci0000:00/0000:00:02.2/usb1/1-2/1-2:1.0/input/input9
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> An extract of my code, taken from the web (Capture.c):
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> CLEAR (fmt);
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> fmt.type = V4L2_BUF_TYPE_VIDEO_CAPTURE; if (-1 == xioctl (fd,
>>>>>> VIDIOC_G_FMT, &fmt))
>>>>>> errno_exit ("VIDIOC_G_FMT");
>>>>>>
>>>>>> fmt.fmt.pix.width       = WB_FRAME_WIDTH;   // 800
>>>>>> fmt.fmt.pix.height = WB_FRAME_HEIGHT;  // 600
>>>>>> fmt.fmt.pix.pixelformat = WB_COLOR_FORMAT;  // YUYV which is
>>>>>> perfect for me fmt.fmt.pix.field       = V4L2_FIELD_INTERLACED;
>>>>>>
>>>>>> // Note VIDIOC_S_FMT may change width and height
>>>>>> // So I check the *new* values
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> fprintf (stderr, "width: %d\n" "height: %d\n",
>>>>>> fmt.fmt.pix.width, fmt.fmt.pix.height);
>>>>>>
>>>>>>
>>>>>> It prints 176 by 144! What am I doing wrong?
>>>>>> (later, I check the buffer size allocated via MMAP: 50688 => 176
>>>>>> x 144 x
>>>>>> 2)
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> Any ideas? Where could be the problem?
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> Regards,
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> C?dric Lescop
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> On Wed, March 18, 2009 13:52, Laurent Pinchart wrote:
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>> Hi,
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> On Monday 16 March 2009 14:43:35 lescopc at esiee.fr wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> Hello everyone,
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> I'm using this webcam to do some streaming and image
>>>>>>>> analysis. When using Logitech's driver under MS Window, it
>>>>>>>> works fine. I've
>>>>>>>> access to all resolutions with the RGB24 format.
>>>>>>>>
>>>>>>>>
>>>>>>> The camera doesn't support the RGB24 format natively.
>>>>>>> Transcoding
>>>>>>> has to be done in software. libv4l2 can help you there.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> The problem is when running under Linux. I'm using uvcvideo
>>>>>>>>  driver via V4L2 but I can't make it work properly. The
>>>>>>>> resolution gets stuck to 176x144 and the format is YUYV.
>>>>>>>>
>>>>>>>> Normally, the webcam is supposed to support a 1600x1200
>>>>>>>> resolution, how can I set it up correctly?
>>>>>>>>
>>>>>>>>
>>>>>>> You should be able to use higher resolutions. Can you
>>>>>>> describe your problem in details, including the steps
>>>>>>> performed and the error messages being printed ?
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> Thank you in advance,
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> xioctl (fd, VIDIOC_ENUM_FMT, &fdq)
>>>>>>>>
>>>>>>>> returns me 2 formats only: MJPEG and YUYV. YUYV is fine for
>>>>>>>> me but I can't reach 1600x1200, or 800x600 or even not
>>>>>>>> 320x240!!!!
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>> Best regards,
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Laurent Pinchart
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>> _______________________________________________
>>>>>> Linux-uvc-devel mailing list
>>>>>> Linux-uvc-devel at lists.berlios.de
>>>>>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> _______________________________________________
>>>>> Linux-uvc-devel mailing list
>>>>> Linux-uvc-devel at lists.berlios.de
>>>>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>>
>>>
>>>
>>
>>
>>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>




From deloptes at yahoo.com  Fri Mar 20 13:22:41 2009
From: deloptes at yahoo.com (Emanoil Kotsev)
Date: Fri, 20 Mar 2009 05:22:41 -0700 (PDT)
Subject: [Linux-uvc-devel] how to get mencoder en mplayer working with
	uvc v4l2
In-Reply-To: <mailman.6123.1237474060.20436.linux-uvc-devel@lists.berlios.de>
Message-ID: <555489.82164.qm@web53206.mail.re2.yahoo.com>



--- On Thu, 3/19/09, linux-uvc-devel-request at lists.berlios.de <linux-uvc-devel-request at lists.berlios.de> wrote:

> The winning command is:
> $ mencoder tv:// -tv driver=v4l2:device=/dev/video0:input=1:norm=PAL-BG:adevice=/dev/dsp1:immediatemode=0:audiorate=48000:amode=1:width=720:height=576
-oac pcm -ovc lavc -lavcopts vcodec=dvvideo:threads=4 -mc 0 -noskip -of
lavf -lavfopts format=dv -o output2.dv

Best regards,

Jelle de Jong

Not that I'm a master but I think the output filter is actually doing the resize (cause DV is 720x576) by requesting this output you get the output format.

correct me if I'm wrong or try without width:height - I bet it would be working - can't wait to try it myself when @home.

regards



      


From jelledejong at powercraft.nl  Fri Mar 20 17:02:11 2009
From: jelledejong at powercraft.nl (Jelle de Jong)
Date: Fri, 20 Mar 2009 17:02:11 +0100
Subject: [Linux-uvc-devel] how to get mencoder en mplayer working with
 uvc v4l2
In-Reply-To: <555489.82164.qm@web53206.mail.re2.yahoo.com>
References: <555489.82164.qm@web53206.mail.re2.yahoo.com>
Message-ID: <49C3BE03.9060909@powercraft.nl>

Emanoil Kotsev wrote:
> 
> --- On Thu, 3/19/09, linux-uvc-devel-request at lists.berlios.de <linux-uvc-devel-request at lists.berlios.de> wrote:
> 
>> The winning command is:
>> $ mencoder tv:// -tv driver=v4l2:device=/dev/video0:input=1:norm=PAL-BG:adevice=/dev/dsp1:immediatemode=0:audiorate=48000:amode=1:width=720:height=576
> -oac pcm -ovc lavc -lavcopts vcodec=dvvideo:threads=4 -mc 0 -noskip -of
> lavf -lavfopts format=dv -o output2.dv
> 
> Best regards,
> 
> Jelle de Jong
> 
> Not that I'm a master but I think the output filter is actually doing the resize (cause DV is 720x576) by requesting this output you get the output format.
> 
> correct me if I'm wrong or try without width:height - I bet it would be working - can't wait to try it myself when @home.
> 
> regards

(use correct quoting please, when possible)

Well I used the above command on a non uvc device but on a v4l2 usb
device that has in the v4l-info command output 720x576 as maximum mode.

The uvc webcam has 960x720 as maximum mode and should be able to use
this, but I am waiting until the new mplayer goes into the devel
repository and i will test a few things.

### video4linux device info [/dev/video0] ###
general info
    VIDIOCGCAP
    name                    : "Hauppauge WinTV HVR (B2C0)"
    type                    : 0x7 [CAPTURE,TUNER,TELETEXT]
    channels                : 3
    audios                  : 0
    maxwidth                : 720
    maxheight               : 576
    minwidth                : 48
    minheight               : 32

### video4linux device info [/dev/video1] ###
general info
    VIDIOCGCAP
    name                    : "UVC Camera (046d:0990)"
    type                    : 0x1 [CAPTURE]
    channels                : 1
    audios                  : 0
    maxwidth                : 960
    maxheight               : 720
    minwidth                : 48
    minheight               : 32


From danieljzhang at hotmail.com  Fri Mar 20 20:16:55 2009
From: danieljzhang at hotmail.com (ZhangDaniel)
Date: Fri, 20 Mar 2009 19:16:55 +0000
Subject: [Linux-uvc-devel] access extension unit
Message-ID: <SNT103-W13255E06E9E2D34C56CE10D4970@phx.gbl>


Hi, 
May I get some updates about how to access extension unit using latest UVC driver. Do we still need to change driver or there is a dynamic way already (by changing xml files?)

I grabbed tar ball from linux tv but I can not access two extension units in the camera. Please help.

Daniel Zhang

_________________________________________________________________
MSN ???????????????
http://im.live.cn/emoticons/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090320/61c31609/attachment.html>

From peoro.noob at gmail.com  Sun Mar 22 22:48:16 2009
From: peoro.noob at gmail.com (peoro)
Date: Sun, 22 Mar 2009 22:48:16 +0100
Subject: [Linux-uvc-devel] can't get exposure parameters for 093a:2700
Message-ID: <1c7ed23c0903221448g45b51f78hd564e13de777f69d@mail.gmail.com>

Hello,

the webcam embedded in my eee pc 900a ( 093a:2700 ) has auto-exposure
enabled by default. I would often prefer a darker image for a higher
fps rate, but it looks like exposure parameters aren't supported
(`uvcdynctrl -c` doesn't say anything about it).

I'd like to know if this is because hardware handles exposure stuff by
itself hiding it from software, or if I could tweak it by patching the
module.

Thanks,
Paolo.


From pj.assis at gmail.com  Mon Mar 23 00:40:06 2009
From: pj.assis at gmail.com (Paulo Assis)
Date: Sun, 22 Mar 2009 23:40:06 +0000
Subject: [Linux-uvc-devel] Fwd: can't get exposure parameters for 093a:2700
In-Reply-To: <59cf47a80903221638p32a70bfaw53d56bf5206c174c@mail.gmail.com>
References: <1c7ed23c0903221448g45b51f78hd564e13de777f69d@mail.gmail.com>
	<59cf47a80903221638p32a70bfaw53d56bf5206c174c@mail.gmail.com>
Message-ID: <59cf47a80903221640s2609ee15q16a8098e950fbe47@mail.gmail.com>

For the list,

Hi,
A lot of embeded webcams only support auto-exposure, this is the case of all
ASUS laptops I know, never tried the really expensive ones, the lamborghini
series,.. :-)
This webcams are only useful for amsn or skype, if you want to record any
decent video you should get an external camera.
Since you can't change this behaviour fps will change a lot with any minor
light variation making it impossible to sync video and audio.

Best regards,
Paulo

2009/3/22 peoro <peoro.noob at gmail.com>

Hello,
>
> the webcam embedded in my eee pc 900a ( 093a:2700 ) has auto-exposure
> enabled by default. I would often prefer a darker image for a higher
> fps rate, but it looks like exposure parameters aren't supported
> (`uvcdynctrl -c` doesn't say anything about it).
>
> I'd like to know if this is because hardware handles exposure stuff by
> itself hiding it from software, or if I could tweak it by patching the
> module.
>
> Thanks,
> Paolo.
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090322/396c5047/attachment.html>

From barsnick at gmx.net  Mon Mar 23 18:00:06 2009
From: barsnick at gmx.net (Moritz Barsnick)
Date: Mon, 23 Mar 2009 18:00:06 +0100
Subject: [Linux-uvc-devel] how to get mencoder en mplayer working
	with	uvc v4l2
In-Reply-To: <49C3BE03.9060909@powercraft.nl>
References: <555489.82164.qm@web53206.mail.re2.yahoo.com>
	<49C3BE03.9060909@powercraft.nl>
Message-ID: <20090323170006.GB20122@sunshine.barsnick.net>

On Fri, Mar 20, 2009 at 17:02:11 +0100, Jelle de Jong wrote:
> Well I used the above command on a non uvc device but on a v4l2 usb
> device that has in the v4l-info command output 720x576 as maximum mode.

I want to pitch in and confirm. Unlike with a UVC device, a V4L2 TV
device is told to scale/sample its video to 720x576.  That is _not_
mencoder's SW scaler, mencoder actually gets 720x576 from the TV
device.

BTW, as you have noticed: mplayer and mencoder are picky about UVC
resolutions. It's best if you give them a resolution which you are sure
can be returned, otherwise the result is a bit unpredictable.

List your supported resolutions with "luvcview -L".

Moritz.


From danieljzhang at hotmail.com  Mon Mar 23 23:20:54 2009
From: danieljzhang at hotmail.com (ZhangDaniel)
Date: Mon, 23 Mar 2009 22:20:54 +0000
Subject: [Linux-uvc-devel] Access extension unit controls
Message-ID: <SNT103-W6816EEB9DB52D7B5B0F2B9D4920@phx.gbl>



        Hi,
I tried to access controls on the second extension unit by UVCIOC_CTRL_ADD, but they all failed with error code 1

For example, for the fist control: 

    // These settings are common to all XU Controls...
    memcpy(ci.entity, EXT_UNIT_GUID, GUID_SIZE);
    ci.size = 2;
    ci.flags = UVC_CONTROL_SET_CUR | UVC_CONTROL_GET_CUR;

    ci.index = 1;  
    ci.selector =1;

    if (xioctl(hCamera, UVCIOC_CTRL_ADD, &ci) == -1)
    {
        if (errno != 17)
        {
            CLogStream::LogErrorMessage("MapExtUnitControls Failed!.", errno);
        }
        //return -1;
    }

Getting or setting this first control is ok. But failed on other controls.

By dmesg, it shows:
[28045.674782] uvcvideo: uvc_v4l2_ioctl(unknown ioctl 'U', dir=rw, #3 (0xc0085503))
[28045.675530] uvcvideo: uvc_v4l2_ioctl(unknown ioctl 'U', dir=rw, #3 (0xc0085503))
[28045.675540] uvcvideo: Control 2812ae3f-bcd7-4e11-a357-6f1edef7d61d/2 not found.
[28045.675987] uvcvideo: uvc_v4l2_ioctl(unknown ioctl 'U', dir=rw, #3 (0xc0085503))
[28045.675999] uvcvideo: Control 2812ae3f-bcd7-4e11-a357-6f1edef7d61d/5 not found.
[28045.676348] uvcvideo: uvc_v4l2_ioctl(unknown ioctl 'U', dir=rw, #3 (0xc0085503))
[28045.676359] uvcvideo: Control 2812ae3f-bcd7-4e11-a357-6f1edef7d61d/3 not found.

May I know why? Is there any flag I need turn on? Please help!

Daniel Zhang

_________________________________________________________________
?Windows Live ?????????? MSN?
http://im.live.cn/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090323/7b2a3ade/attachment.html>

From dmitriy.geels at gmail.com  Tue Mar 24 08:23:16 2009
From: dmitriy.geels at gmail.com (Dmitriy Geels)
Date: Tue, 24 Mar 2009 10:23:16 +0300
Subject: [Linux-uvc-devel] rotate image quirk
Message-ID: <78f5d6bf0903240023j7b2a35a7w2144543b3c7ed4d7@mail.gmail.com>

Hello all!

I feel that I'm not first person, who asks about this. But there is a
solid reason for implementing this quirk: already several laptop
models from different vendors have upside-down mounted webcam (and I
was lucky to get second one with same flaw). The only way to fix that
now: patch driver manually.
Don't tell, that driver shouldn't make any image processing -- this
case is little bit different. And even original vendor driver does
this.

P.S. I may post patch for adding quirk if noone did it already


From lescopc at esiee.fr  Tue Mar 24 09:26:17 2009
From: lescopc at esiee.fr (lescopc at esiee.fr)
Date: Tue, 24 Mar 2009 09:26:17 +0100 (CET)
Subject: [Linux-uvc-devel] Logitech Quickcam Notebook Pro for Business
In-Reply-To: <59cf47a80903191333i7825e8e2u7ea2e065763ba56f@mail.gmail.com>
References: <60402.194.3.40.246.1237211015.squirrel@mail2.esiee.fr>
	<200903181352.30555.laurent.pinchart@skynet.be>
	<34834.194.3.40.246.1237451227.squirrel@mail2.esiee.fr>
	<49C20F9F.20509@gmail.com>
	<47941.194.3.40.246.1237473274.squirrel@mail2.esiee.fr>
	<49C25ED4.7010307@gmail.com>
	<57189.194.3.40.246.1237478541.squirrel@mail2.esiee.fr>
	<59cf47a80903191333i7825e8e2u7ea2e065763ba56f@mail.gmail.com>
Message-ID: <37828.194.3.40.246.1237883177.squirrel@mail2.esiee.fr>

[SOLVED]

Paulo,

You were damn right!!!! It was a question of USB port. I tried again on an
USB 2.0 port, here is my new results:


{ pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
{ discrete: width = 160, height = 120 }
	Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
{ discrete: width = 176, height = 144 }
	Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
{ discrete: width = 320, height = 240 }
	Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
{ discrete: width = 352, height = 288 }
	Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
{ discrete: width = 640, height = 480 }
	Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
{ discrete: width = 800, height = 600 }
	Time interval between frame: 1/25, 1/20, 1/15, 1/10, 1/5,
{ discrete: width = 960, height = 720 }
	Time interval between frame: 1/10, 1/5,
{ discrete: width = 1600, height = 1200 }
	Time interval between frame: 1/5,


Exactly what I needed :)
I might post a new message, to know if it is possible to configure or to
hack the driver to get high resolution with high FPS or if it is a
hardware problem?!

Thank you very much again,
Best Regards,


C?dric Lescop




On Thu, March 19, 2009 21:33, Paulo Assis wrote:
> C?dric,
> I think I failed to see the obvious.
>
>
> Make sure your camera is connected to a USB2 hub.
> Logitech cameras (and maybe all uvc devices) cut down available
> resolutions when pluged  to a slower USB1 pipe.
>
>
> Best regards,
> Paulo
>
>
> 2009/3/19 <lescopc at esiee.fr>
>
>
>> Paulo,
>>
>>
>>
>> Here what I have from "luvcview -L":
>>
>>
>> luvcview version 0.2.1 Video driver: x11
>> A window manager is available
>> video /dev/video0 /dev/video0 does not support read i/o
>> { pixelformat = 'MJPG', description = 'MJPEG' }
>> { discrete: width = 160, height = 120 }
>> Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
>> { discrete: width = 176, height = 144 }
>> Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
>> { discrete: width = 320, height = 240 }
>> Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
>> { discrete: width = 352, height = 288 }
>> Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
>> { discrete: width = 640, height = 480 }
>> Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
>> { discrete: width = 800, height = 600 }
>> Time interval between frame: 1/15, 1/10, 1/5,
>> { pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
>> { discrete: width = 160, height = 120 }
>> Time interval between frame: 1/15, 1/10, 1/5,
>> { discrete: width = 176, height = 144 }
>> Time interval between frame: 1/15, 1/10, 1/5,
>>
>>
>>
>> Does it mean I can't make it work under Linux? I know the webcam can go
>>  till 1600x1200 under MS Window with Logitech owner's drivers... Is
>> there anything I could modify or configure to work it out?
>>
>>
>> Regards,
>>
>>
>>
>> C?dric Lescop
>>
>>
>>
>>
>>
>> On Thu, March 19, 2009 16:03, Paulo Assis wrote:
>>
>>> C?dric,
>>> Have you tried listing the device formats:
>>> use "luvcview -L" or "guvcview --verbose" any of these commands should
>>>  print a list of available formats for your device
>>>
>>> Best regards,
>>> Paulo
>>>
>>>
>>>
>>> lescopc at esiee.fr escreveu:
>>>> Hi Paulo,
>>>>
>>>>
>>>>
>>>>
>>>> I inserted you code into mine. I set:
>>>> formatIn = V4L2_PIX_FMT_YUYV width = 640 height = 480 fps = 30
>>>>
>>>> The result is:
>>>> "Requested Format unavailable: get width 176 height 144"
>>>>
>>>>
>>>>
>>>> Like I usually got :(
>>>> Thank you for trying to help me anyway,
>>>>
>>>>
>>>>
>>>>
>>>> C?dric Lescop
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> On Thu, March 19, 2009 10:25, Paulo Assis wrote:
>>>>
>>>>
>>>>
>>>>> C?dric Hi,
>>>>> Could you pleaser try the following function, you will have to
>>>>> make the necessary adaptations to your code.
>>>>>
>>>>>
>>>>> int set_format(int fd, int formatIn, int width, int height, int
>>>>> fps) {
>>>>> struct v4l2_format fmt; struct v4l2_streamparm streamparm; int
>>>>> ret=0;
>>>>>
>>>>> // set format
>>>>> fmt.type = V4L2_BUF_TYPE_VIDEO_CAPTURE; fmt.fmt.pix.width = width;
>>>>>  fmt.fmt.pix.height = height; fmt.fmt.pix.pixelformat = formatIn;
>>>>>  fmt.fmt.pix.field = V4L2_FIELD_ANY;
>>>>>
>>>>> ret = ioctl(fd, VIDIOC_S_FMT, &fmt); if (ret < 0) {
>>>>> fprintf(stderr, "VIDIOC_S_FORMAT - Unable to set format\n");
>>>>> return (-1); } if ((fmt.fmt.pix.width != width) ||
>>>>> (fmt.fmt.pix.height != height)) {
>>>>> fprintf(stderr, "Requested Format unavailable: get width %d height
>>>>> %d
>>>>> \n",
>>>>> fmt.fmt.pix.width, fmt.fmt.pix.height); return(-2); }
>>>>>
>>>>>
>>>>> streamparm.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
>>>>> streamparm.parm.capture.timeperframe.numerator = 1;
>>>>> streamparm.parm.capture.timeperframe.denominator = fps; ret =
>>>>> ioctl(fd,VIDIOC_S_PARM, &streamparm); if (ret < 0) {
>>>>> fprintf(stderr, "VIDIOC_S_PARM error\n"); return (-3); }
>>>>> return (0); }
>>>>>
>>>>>
>>>>> Best regards,
>>>>> Paulo
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> lescopc at esiee.fr escreveu:
>>>>>
>>>>>> Hi,
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> This is my problem, I don't have any errors. V4L2 API says that
>>>>>>  when you ask for a Width and Heigth, the driver will give you
>>>>>> the max ones below the values you asked for. Meaning if you ask
>>>>>> for 817x616, it will
>>>>>> set 800x600 without returning any errors.
>>>>>>
>>>>>>
>>>>>>
>>>>>> My DMESG (no pb, I have got my "/dev/video0"):
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> usb 1-2: new full speed USB device using ohci_hcd and address 3
>>>>>> usb 1-2:
>>>>>> configuration #1 chosen from 1 choice uvcvideo: Found UVC 1.00
>>>>>> device <unnamed> (046d:0991) input: UVC Camera (046d:0991) as
>>>>>> /devices/pci0000:00/0000:00:02.2/usb1/1-2/1-2:1.0/input/input9
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> An extract of my code, taken from the web (Capture.c):
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> CLEAR (fmt);
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> fmt.type = V4L2_BUF_TYPE_VIDEO_CAPTURE; if (-1 == xioctl (fd,
>>>>>> VIDIOC_G_FMT, &fmt))
>>>>>> errno_exit ("VIDIOC_G_FMT");
>>>>>>
>>>>>> fmt.fmt.pix.width       = WB_FRAME_WIDTH;   // 800
>>>>>> fmt.fmt.pix.height = WB_FRAME_HEIGHT;  // 600
>>>>>> fmt.fmt.pix.pixelformat = WB_COLOR_FORMAT;  // YUYV which is
>>>>>> perfect for me fmt.fmt.pix.field       = V4L2_FIELD_INTERLACED;
>>>>>>
>>>>>> // Note VIDIOC_S_FMT may change width and height
>>>>>> // So I check the *new* values
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> fprintf (stderr, "width: %d\n" "height: %d\n",
>>>>>> fmt.fmt.pix.width, fmt.fmt.pix.height);
>>>>>>
>>>>>>
>>>>>> It prints 176 by 144! What am I doing wrong?
>>>>>> (later, I check the buffer size allocated via MMAP: 50688 => 176
>>>>>> x 144 x
>>>>>> 2)
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> Any ideas? Where could be the problem?
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> Regards,
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> C?dric Lescop
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> On Wed, March 18, 2009 13:52, Laurent Pinchart wrote:
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>> Hi,
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> On Monday 16 March 2009 14:43:35 lescopc at esiee.fr wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> Hello everyone,
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> I'm using this webcam to do some streaming and image
>>>>>>>> analysis. When using Logitech's driver under MS Window, it
>>>>>>>> works fine. I've
>>>>>>>> access to all resolutions with the RGB24 format.
>>>>>>>>
>>>>>>>>
>>>>>>> The camera doesn't support the RGB24 format natively.
>>>>>>> Transcoding
>>>>>>> has to be done in software. libv4l2 can help you there.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> The problem is when running under Linux. I'm using uvcvideo
>>>>>>>>  driver via V4L2 but I can't make it work properly. The
>>>>>>>> resolution gets stuck to 176x144 and the format is YUYV.
>>>>>>>>
>>>>>>>> Normally, the webcam is supposed to support a 1600x1200
>>>>>>>> resolution, how can I set it up correctly?
>>>>>>>>
>>>>>>>>
>>>>>>> You should be able to use higher resolutions. Can you
>>>>>>> describe your problem in details, including the steps
>>>>>>> performed and the error messages being printed ?
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> Thank you in advance,
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> xioctl (fd, VIDIOC_ENUM_FMT, &fdq)
>>>>>>>>
>>>>>>>> returns me 2 formats only: MJPEG and YUYV. YUYV is fine for
>>>>>>>> me but I can't reach 1600x1200, or 800x600 or even not
>>>>>>>> 320x240!!!!
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>> Best regards,
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Laurent Pinchart
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>> _______________________________________________
>>>>>> Linux-uvc-devel mailing list
>>>>>> Linux-uvc-devel at lists.berlios.de
>>>>>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> _______________________________________________
>>>>> Linux-uvc-devel mailing list
>>>>> Linux-uvc-devel at lists.berlios.de
>>>>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>>
>>>
>>>
>>
>>
>>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>




From dmitriy.geels at gmail.com  Tue Mar 24 09:31:18 2009
From: dmitriy.geels at gmail.com (Dmitriy Geels)
Date: Tue, 24 Mar 2009 11:31:18 +0300
Subject: [Linux-uvc-devel] rotate image quirk
In-Reply-To: <78f5d6bf0903240023j7b2a35a7w2144543b3c7ed4d7@mail.gmail.com>
References: <78f5d6bf0903240023j7b2a35a7w2144543b3c7ed4d7@mail.gmail.com>
Message-ID: <78f5d6bf0903240131h252a6776le4e62ab150cfd570@mail.gmail.com>

2009/3/24 Dmitriy Geels <dmitriy.geels at gmail.com>:
> P.S. I may post patch for adding quirk if noone did it already

Few questions before posting patch:
1) Existing patch have one limitation: it works only with YUV2 format.
Question is: how to determine currently used format properly (to be
sure that data in other formats won't be corrupted)?
2) Existing patch replaces uvc_video_decode_data() completely, I made
it's clone uvc_video_decode_data_with_rotate(), which called instead
if rotate quirk is enabled. Question: is this a good implementation?
If not, what is better way?

BTW I see, that driver lasts at version 0.1.0 for a long time already
-- may be it's time to increase version, as there were changes, at
least quirks added?


From stewartd at damienstewart.net  Tue Mar 24 12:48:38 2009
From: stewartd at damienstewart.net (Damien Stewart)
Date: Tue, 24 Mar 2009 11:48:38 +0000 (UTC)
Subject: [Linux-uvc-devel] Build uvcvideo from Mercurial - wiki address?
Message-ID: <loom.20090324T114212-772@post.gmane.org>

Hi there,

Reading the instructions here: http://linux-uvc.berlios.de/ it says:
"Instructions to build and install drivers from the linuxtv.org trees are
available on linuxtv.org.", with the link point to:
http://www.linuxtv.org/wiki/index.php/How_to_build_from_Mercurial.

However, that page doesn't exist! :(

I am looking for instructions to upgrade the default uvcvideo driver that comes
with Ubuntu 8.10 (kernel 2.6.27-11-generic). I found some other instructions
here: http://rafanto.net/tag/ubuntu/page/2/ which list the following commands:

"make uvcvideo &&
sudo install uvcvideo.ko -v -m644 /lib/modules/$(uname
-r)/kernel/drivers/media/video/uvc/uvcvideo.ko &&
sudo make install &&
sudo cp -av /lib/modules/$(uname -r)/kernel/drivers/media/video/uvc/uvcvideo.ko
/lib/modules &&
sudo depmod -ae $(uname -r)"

But that was against a SVN snapshot, but I assume this will work with the latest
Mercurial snapshot too?

How can I verify that the driver has indeed been updated? I tried previously,
only to see modinfo return a change in the srcversion hash - is that enough?

Thanks in advance for any help.

Regards,

Damien. 



From laurent.pinchart at skynet.be  Tue Mar 24 14:02:04 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 24 Mar 2009 14:02:04 +0100
Subject: [Linux-uvc-devel] Minoru stereo webcam: Auto Control
	deactivation
In-Reply-To: <8159710f0903191031g6f946e8er90506c761550fa22@mail.gmail.com>
References: <8159710f0903191031g6f946e8er90506c761550fa22@mail.gmail.com>
Message-ID: <200903241402.04594.laurent.pinchart@skynet.be>

Hi Julien,

On Thursday 19 March 2009 18:31:00 julien quelen wrote:
> Hi all,
>
> I am using the new Minoru stereo webcam under Linux with the last
> version of uvcvideo driver.
> I get simultaneously the two 640x480 videos at 15fps. Thank you very
> much for the patch Laurent.
>
> However, i  don't manage to deactivate the auto gain and auto exposure
> on the two cameras.(I get an error with V4L2_CID_AUTOGAIN and
> V4L2_CID_EXPOSURE_AUTO )
> I also don't manage to tune exposure, or white balance..
>
> Is it possible to do that?

V4L2_CID_EXPOSURE_AUTO should be supported. Please describe the error you 
receive in more details (including application and kernel log messages).

Regards,

Laurent Pinchart



From laurent.pinchart at skynet.be  Tue Mar 24 14:05:43 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 24 Mar 2009 14:05:43 +0100
Subject: [Linux-uvc-devel] rotate image quirk
In-Reply-To: <78f5d6bf0903240023j7b2a35a7w2144543b3c7ed4d7@mail.gmail.com>
References: <78f5d6bf0903240023j7b2a35a7w2144543b3c7ed4d7@mail.gmail.com>
Message-ID: <200903241405.43310.laurent.pinchart@skynet.be>

On Tuesday 24 March 2009 08:23:16 Dmitriy Geels wrote:
> Hello all!
>
> I feel that I'm not first person, who asks about this. But there is a
> solid reason for implementing this quirk: already several laptop
> models from different vendors have upside-down mounted webcam (and I
> was lucky to get second one with same flaw). The only way to fix that
> now: patch driver manually.
> Don't tell, that driver shouldn't make any image processing -- this
> case is little bit different. And even original vendor driver does
> this.

This case isn't different at all. Software rotation belongs to userspace, 
period. Luckily, the libv4l(2) userspace library implements image rotation so 
you should be able to get an upside-up image without modifying the driver.

Best regards,

Laurent Pinchart



From laurent.pinchart at skynet.be  Tue Mar 24 14:09:10 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 24 Mar 2009 14:09:10 +0100
Subject: [Linux-uvc-devel] Logitech Quickcam Notebook Pro for Business
In-Reply-To: <37828.194.3.40.246.1237883177.squirrel@mail2.esiee.fr>
References: <60402.194.3.40.246.1237211015.squirrel@mail2.esiee.fr>
	<59cf47a80903191333i7825e8e2u7ea2e065763ba56f@mail.gmail.com>
	<37828.194.3.40.246.1237883177.squirrel@mail2.esiee.fr>
Message-ID: <200903241409.10997.laurent.pinchart@skynet.be>

On Tuesday 24 March 2009 09:26:17 lescopc at esiee.fr wrote:
> [SOLVED]
>
> Paulo,
>
> You were damn right!!!! It was a question of USB port. I tried again on an
> USB 2.0 port, here is my new results:
>
>
> { pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
> { discrete: width = 160, height = 120 }
> 	Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
> { discrete: width = 176, height = 144 }
> 	Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
> { discrete: width = 320, height = 240 }
> 	Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
> { discrete: width = 352, height = 288 }
> 	Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
> { discrete: width = 640, height = 480 }
> 	Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
> { discrete: width = 800, height = 600 }
> 	Time interval between frame: 1/25, 1/20, 1/15, 1/10, 1/5,
> { discrete: width = 960, height = 720 }
> 	Time interval between frame: 1/10, 1/5,
> { discrete: width = 1600, height = 1200 }
> 	Time interval between frame: 1/5,
>
>
> Exactly what I needed :)

Glad to see your problem is solved. As usual, the answer was easy once the 
problem has been properly diagnosed. I'd like to thank Paulo for his help.

> I might post a new message, to know if it is possible to configure or to
> hack the driver to get high resolution with high FPS or if it is a
> hardware problem?!

The resolutions reported by the driver are the resolutions advertised as 
supported by the device. I'm afraid you won't be able to get more than 5fps at 
1600x1200 with your camera (this is actually a USB bandwidth issue, you would 
need MJPEG compression to get higher frame rates at that resolution).

Best regards,

Laurent Pinchart



From laurent.pinchart at skynet.be  Tue Mar 24 14:13:30 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 24 Mar 2009 14:13:30 +0100
Subject: [Linux-uvc-devel] Build uvcvideo from Mercurial - wiki address?
In-Reply-To: <loom.20090324T114212-772@post.gmane.org>
References: <loom.20090324T114212-772@post.gmane.org>
Message-ID: <200903241413.30284.laurent.pinchart@skynet.be>

Hi Damien,

On Tuesday 24 March 2009 12:48:38 Damien Stewart wrote:
> Hi there,
>
> Reading the instructions here: http://linux-uvc.berlios.de/ it says:
> "Instructions to build and install drivers from the linuxtv.org trees are
> available on linuxtv.org.", with the link point to:
> http://www.linuxtv.org/wiki/index.php/How_to_build_from_Mercurial.
>
> However, that page doesn't exist! :(

The page has moved to 
http://www.linuxtv.org/wiki/index.php/How_to_Obtain,_Build_and_Install_V4L-
DVB_Device_Drivers.

Thanks for spotting the issue, I've updated the linux-uvc.berlios.de website.

> I am looking for instructions to upgrade the default uvcvideo driver that
> comes with Ubuntu 8.10 (kernel 2.6.27-11-generic). I found some other
> instructions here: http://rafanto.net/tag/ubuntu/page/2/ which list the
> following commands:
>
> "make uvcvideo &&
> sudo install uvcvideo.ko -v -m644 /lib/modules/$(uname
> -r)/kernel/drivers/media/video/uvc/uvcvideo.ko &&
> sudo make install &&
> sudo cp -av /lib/modules/$(uname
> -r)/kernel/drivers/media/video/uvc/uvcvideo.ko /lib/modules &&
> sudo depmod -ae $(uname -r)"
>
> But that was against a SVN snapshot, but I assume this will work with the
> latest Mercurial snapshot too?
>
> How can I verify that the driver has indeed been updated? I tried
> previously, only to see modinfo return a change in the srcversion hash - is
> that enough?

Check the new wiki page for instructions :-)

Best regards,

Laurent Pinchart



From laurent.pinchart at skynet.be  Tue Mar 24 14:19:58 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 24 Mar 2009 14:19:58 +0100
Subject: [Linux-uvc-devel] Access extension unit controls
In-Reply-To: <SNT103-W6816EEB9DB52D7B5B0F2B9D4920@phx.gbl>
References: <SNT103-W6816EEB9DB52D7B5B0F2B9D4920@phx.gbl>
Message-ID: <200903241419.58296.laurent.pinchart@skynet.be>

Hi Daniel,

On Monday 23 March 2009 23:20:54 ZhangDaniel wrote:
>         Hi,
> I tried to access controls on the second extension unit by UVCIOC_CTRL_ADD,
> but they all failed with error code 1

1 is EPERM. You need to be root to add extension unit definitions and 
mappings. Accessing the extension units (either directly with 
UVCIOC_CTRL_GET/UVCIOC_CTRL_SET or through mappings with 
VIDIOC_G_CTRL/VIDIOC_S_CTRL) can be done as a non-privileged user.

Have you tried to add your extension unit definitions with uvcdynctrl instead 
of rolling out your own code ? uvcdynctrl takes a (rather simple) XML input 
file and configures the driver accordingly.

Best regards,

Laurent Pinchart



From dmitriy.geels at gmail.com  Tue Mar 24 14:54:23 2009
From: dmitriy.geels at gmail.com (Dmitriy Geels)
Date: Tue, 24 Mar 2009 16:54:23 +0300
Subject: [Linux-uvc-devel] rotate image quirk
In-Reply-To: <200903241405.43310.laurent.pinchart@skynet.be>
References: <78f5d6bf0903240023j7b2a35a7w2144543b3c7ed4d7@mail.gmail.com>
	<200903241405.43310.laurent.pinchart@skynet.be>
Message-ID: <78f5d6bf0903240654m7b5a61d3i581fef610c8f485a@mail.gmail.com>

2009/3/24 Laurent Pinchart <laurent.pinchart at skynet.be>:
> This case isn't different at all. Software rotation belongs to userspace,
> period. Luckily, the libv4l(2) userspace library implements image rotation so
> you should be able to get an upside-up image without modifying the driver.

Is there any way to rotate image globally for whole system from userspace?

I will try to make some reverse engineering on original drivers, may
be there is something, that control hardware flipping.


From laurent.pinchart at skynet.be  Tue Mar 24 15:09:02 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 24 Mar 2009 15:09:02 +0100
Subject: [Linux-uvc-devel] rotate image quirk
In-Reply-To: <78f5d6bf0903240654m7b5a61d3i581fef610c8f485a@mail.gmail.com>
References: <78f5d6bf0903240023j7b2a35a7w2144543b3c7ed4d7@mail.gmail.com>
	<200903241405.43310.laurent.pinchart@skynet.be>
	<78f5d6bf0903240654m7b5a61d3i581fef610c8f485a@mail.gmail.com>
Message-ID: <200903241509.02579.laurent.pinchart@skynet.be>

On Tuesday 24 March 2009 14:54:23 Dmitriy Geels wrote:
> 2009/3/24 Laurent Pinchart <laurent.pinchart at skynet.be>:
> > This case isn't different at all. Software rotation belongs to userspace,
> > period. Luckily, the libv4l(2) userspace library implements image
> > rotation so you should be able to get an upside-up image without
> > modifying the driver.
>
> Is there any way to rotate image globally for whole system from userspace?

The goal was, if I remember well, to have rotation implemented in a completely 
transparent way for userspace applications. The applications will, of course, 
have to use libv4l(2).

libv4l(2) should detect that the device requires rotation (based on the USB 
VID:PID) and rotate the image in software if hardware rotation isn't 
supported.

> I will try to make some reverse engineering on original drivers, may
> be there is something, that control hardware flipping.

What camera are you using ? Please post the USB descriptors (retrieved with 
'lsusb -v' using usbutils 0.72 or newer - 0.73+ preferred).

Best regards,

Laurent Pinchart



From yvesparedes at lavabit.com  Tue Mar 24 16:59:46 2009
From: yvesparedes at lavabit.com (Yves Paredes)
Date: Tue, 24 Mar 2009 23:59:46 +0800
Subject: [Linux-uvc-devel] Lenovo Thinkpad SL400 webcam also needs
	"quirks=16"
In-Reply-To: <200903151158.45269.laurent.pinchart@skynet.be>
References: <35182.210.213.156.89.1237026994.squirrel@lavabit.com>
	<200903151158.45269.laurent.pinchart@skynet.be>
Message-ID: <200903242359.46551.yvesparedes@lavabit.com>

On Sunday 15 March 2009 6:58:45 pm you wrote:
> Hi Yves,
>
> On Saturday 14 March 2009 11:36:34 yvesparedes at lavabit.com wrote:
> > Like the webcam in the Thinkpad SL500, it needs to be loaded with
> > "quirks=16"
> >
> > lsusb shows the following line:
> >
> > Bus 008 Device 002: ID 17ef:480b Lenovo
>
> Thanks for the report. A fix is already available in 2.6.29-rc1, the 2.6.29
> kernel will support your camera out of the box.
>
> Best regards,
>
> Laurent Pinchart

I've just upgraded to kernel 2.6.29 and I can confirm that it now works 
without the "quirks=16" paameter.

Thanks.


Yves Paredes



From dmitriy.geels at gmail.com  Tue Mar 24 23:13:01 2009
From: dmitriy.geels at gmail.com (Dmitriy Geels)
Date: Wed, 25 Mar 2009 01:13:01 +0300
Subject: [Linux-uvc-devel] rotate image quirk
In-Reply-To: <200903241509.02579.laurent.pinchart@skynet.be>
References: <78f5d6bf0903240023j7b2a35a7w2144543b3c7ed4d7@mail.gmail.com>
	<200903241405.43310.laurent.pinchart@skynet.be>
	<78f5d6bf0903240654m7b5a61d3i581fef610c8f485a@mail.gmail.com>
	<200903241509.02579.laurent.pinchart@skynet.be>
Message-ID: <78f5d6bf0903241513t661656d7md81bda4932b67b18@mail.gmail.com>

2009/3/24 Laurent Pinchart <laurent.pinchart at skynet.be>:
> The goal was, if I remember well, to have rotation implemented in a completely
> transparent way for userspace applications. The applications will, of course,
> have to use libv4l(2).
Mmm... sounds confusing. Does all applications use libv4l?

> libv4l(2) should detect that the device requires rotation (based on the USB
> VID:PID) and rotate the image in software if hardware rotation isn't
> supported.
>
>> I will try to make some reverse engineering on original drivers, may
>> be there is something, that control hardware flipping.
>
> What camera are you using ? Please post the USB descriptors (retrieved with
> 'lsusb -v' using usbutils 0.72 or newer - 0.73+ preferred).

Well known one:
Bus 002 Device 003: ID 04f2:b012 Chicony Electronics Co., Ltd 1.3
MPixel UVC webcam

On packard bell easynote bg46 laptop (seems to be designed and
manufactured by asus).

lsusb output: http://paste.org.ru/index.pl?ht6viv


From deloptes at yahoo.com  Wed Mar 25 02:19:41 2009
From: deloptes at yahoo.com (Emanoil Kotsev)
Date: Tue, 24 Mar 2009 18:19:41 -0700 (PDT)
Subject: [Linux-uvc-devel] how to get mencoder en mplayer working	with
	uvc v4l2
In-Reply-To: <mailman.97.1237892516.22625.linux-uvc-devel@lists.berlios.de>
Message-ID: <174198.85532.qm@web53211.mail.re2.yahoo.com>



> Message: 1
> Date: Mon, 23 Mar 2009 18:00:06 +0100
> From: Moritz Barsnick <barsnick at gmx.net>
> Subject: Re: [Linux-uvc-devel] how to get mencoder en
> mplayer working
> 	with	uvc v4l2
> To: linux-uvc development discussions
> 	<linux-uvc-devel at lists.berlios.de>
> Message-ID:
> <20090323170006.GB20122 at sunshine.barsnick.net>
> Content-Type: text/plain; charset=us-ascii
> 
> On Fri, Mar 20, 2009 at 17:02:11 +0100, Jelle de Jong
> wrote:
> > Well I used the above command on a non uvc device but
> on a v4l2 usb
> > device that has in the v4l-info command output 720x576
> as maximum mode.
> 
> I want to pitch in and confirm. Unlike with a UVC device, a
> V4L2 TV
> device is told to scale/sample its video to 720x576.  That
> is _not_
> mencoder's SW scaler, mencoder actually gets 720x576
> from the TV
> device.
> 
> BTW, as you have noticed: mplayer and mencoder are picky
> about UVC
> resolutions. It's best if you give them a resolution
> which you are sure
> can be returned, otherwise the result is a bit
> unpredictable.
> 
> List your supported resolutions with "luvcview
> -L".
> 
> Moritz.
> 

Yeah, great! This command shows the supported stuff by the camera and I remembere that I read the specs when I bought my camera and it said, it's supporting 640x480 at up to 30fps and 1280x1024 at up to 15fps.
I remembered also that I tested it when I compiled the drivers and the test program the first time :-D I knew there was something about it

regards


      


From laurent.pinchart at skynet.be  Wed Mar 25 14:11:54 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 25 Mar 2009 14:11:54 +0100
Subject: [Linux-uvc-devel] rotate image quirk
In-Reply-To: <78f5d6bf0903241513t661656d7md81bda4932b67b18@mail.gmail.com>
References: <78f5d6bf0903240023j7b2a35a7w2144543b3c7ed4d7@mail.gmail.com>
	<200903241509.02579.laurent.pinchart@skynet.be>
	<78f5d6bf0903241513t661656d7md81bda4932b67b18@mail.gmail.com>
Message-ID: <200903251411.54987.laurent.pinchart@skynet.be>

Hi Dmitriy,

On Tuesday 24 March 2009 23:13:01 Dmitriy Geels wrote:
> 2009/3/24 Laurent Pinchart <laurent.pinchart at skynet.be>:
> > The goal was, if I remember well, to have rotation implemented in a
> > completely transparent way for userspace applications. The applications
> > will, of course, have to use libv4l(2).
>
> Mmm... sounds confusing. Does all applications use libv4l?

Not yet, but most are either ported or are getting ported.

> > libv4l(2) should detect that the device requires rotation (based on the
> > USB VID:PID) and rotate the image in software if hardware rotation isn't
> > supported.
> >
> >> I will try to make some reverse engineering on original drivers, may
> >> be there is something, that control hardware flipping.
> >
> > What camera are you using ? Please post the USB descriptors (retrieved
> > with 'lsusb -v' using usbutils 0.72 or newer - 0.73+ preferred).
>
> Well known one:
> Bus 002 Device 003: ID 04f2:b012 Chicony Electronics Co., Ltd 1.3
> MPixel UVC webcam
>
> On packard bell easynote bg46 laptop (seems to be designed and
> manufactured by asus).
>
> lsusb output: http://paste.org.ru/index.pl?ht6viv

While your camera probably supports image rotation in hardware (most sensor 
can be read out upside down) the function is not exported to the host :-S

Best regards,

Laurent Pinchart



From P at draigBrady.com  Thu Mar 26 15:06:17 2009
From: P at draigBrady.com (=?UTF-8?B?UMOhZHJhaWcgQnJhZHk=?=)
Date: Thu, 26 Mar 2009 14:06:17 +0000
Subject: [Linux-uvc-devel] syntek + UVC_QUIRK_STREAM_NO_FID
Message-ID: <49CB8BD9.2030301@draigBrady.com>

Can we set UVC_QUIRK_STREAM_NO_FID for all Syntek (174f) webcams,
rather than specifying each individually?
I've another one here (174f:8a34) that requires this tweak.

cheers,
P?draig.




From laurent.pinchart at skynet.be  Fri Mar 27 12:04:54 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 27 Mar 2009 12:04:54 +0100
Subject: [Linux-uvc-devel] syntek + UVC_QUIRK_STREAM_NO_FID
In-Reply-To: <49CB8BD9.2030301@draigBrady.com>
References: <49CB8BD9.2030301@draigBrady.com>
Message-ID: <200903271204.54320.laurent.pinchart@skynet.be>

Hi P?draig,

On Thursday 26 March 2009 15:06:17 P?draig Brady wrote:
> Can we set UVC_QUIRK_STREAM_NO_FID for all Syntek (174f) webcams,
> rather than specifying each individually?
> I've another one here (174f:8a34) that requires this tweak.

Not all Syntek cameras require the quirk, so I can't set it globally.

Could you please send me the USB descriptors (lsusb -v -d 174f:8a34) of your 
camera ? I will then update the driver and the list of supported devices on 
the website.

Best regards,

Laurent Pinchart



From P at draigBrady.com  Fri Mar 27 12:07:02 2009
From: P at draigBrady.com (=?UTF-8?B?UMOhZHJhaWcgQnJhZHk=?=)
Date: Fri, 27 Mar 2009 11:07:02 +0000
Subject: [Linux-uvc-devel] syntek + UVC_QUIRK_STREAM_NO_FID
In-Reply-To: <200903271204.54320.laurent.pinchart@skynet.be>
References: <49CB8BD9.2030301@draigBrady.com>
	<200903271204.54320.laurent.pinchart@skynet.be>
Message-ID: <49CCB356.1040701@draigBrady.com>

Laurent Pinchart wrote:
> Hi P?draig,
> 
> On Thursday 26 March 2009 15:06:17 P?draig Brady wrote:
>> Can we set UVC_QUIRK_STREAM_NO_FID for all Syntek (174f) webcams,
>> rather than specifying each individually?
>> I've another one here (174f:8a34) that requires this tweak.
> 
> Not all Syntek cameras require the quirk, so I can't set it globally.
> 
> Could you please send me the USB descriptors (lsusb -v -d 174f:8a34) of your 
> camera ? I will then update the driver and the list of supported devices on 
> the website.

cheers,

# lsusb -v -d 174f:8a34

Bus 002 Device 003: ID 174f:8a34
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x174f
  idProduct          0x8a34
  bcdDevice            1.02
  iManufacturer           2 Syntek
  iProduct                3 USB2.0 UVC PC Camera
  iSerial                 4 0001
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          519
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
    MaxPower              500mA
    UNRECOGNIZED:  08 0b 00 02 0e 03 00 00
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0004  1x 4 bytes
        bInterval               6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0400  1x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0c00  2x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1


From laurent.pinchart at skynet.be  Fri Mar 27 12:12:41 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 27 Mar 2009 12:12:41 +0100
Subject: [Linux-uvc-devel] syntek + UVC_QUIRK_STREAM_NO_FID
In-Reply-To: <49CCB356.1040701@draigBrady.com>
References: <49CB8BD9.2030301@draigBrady.com>
	<200903271204.54320.laurent.pinchart@skynet.be>
	<49CCB356.1040701@draigBrady.com>
Message-ID: <200903271212.41954.laurent.pinchart@skynet.be>

Hi P?draig,

On Friday 27 March 2009 12:07:02 P?draig Brady wrote:
> Laurent Pinchart wrote:
> > Hi P?draig,
> >
> > On Thursday 26 March 2009 15:06:17 P?draig Brady wrote:
> >> Can we set UVC_QUIRK_STREAM_NO_FID for all Syntek (174f) webcams,
> >> rather than specifying each individually?
> >> I've another one here (174f:8a34) that requires this tweak.
> >
> > Not all Syntek cameras require the quirk, so I can't set it globally.
> >
> > Could you please send me the USB descriptors (lsusb -v -d 174f:8a34) of
> > your camera ? I will then update the driver and the list of supported
> > devices on the website.
>
> cheers,
>
> # lsusb -v -d 174f:8a34

[snip]

You seem to use an old version of usbutils that doesn't support UVC devices 
yet, making the output quite useless. Could you please try usbutils 0.72 or 
newer (0.73+ preferred) ?

Thanks.

Best regards,

Laurent Pinchart



From P at draigBrady.com  Fri Mar 27 12:33:49 2009
From: P at draigBrady.com (=?UTF-8?B?UMOhZHJhaWcgQnJhZHk=?=)
Date: Fri, 27 Mar 2009 11:33:49 +0000
Subject: [Linux-uvc-devel] syntek + UVC_QUIRK_STREAM_NO_FID
In-Reply-To: <200903271212.41954.laurent.pinchart@skynet.be>
References: <49CB8BD9.2030301@draigBrady.com>
	<200903271204.54320.laurent.pinchart@skynet.be>
	<49CCB356.1040701@draigBrady.com>
	<200903271212.41954.laurent.pinchart@skynet.be>
Message-ID: <49CCB99D.3030709@draigBrady.com>

Laurent Pinchart wrote:
> Hi P?draig,
> 
> On Friday 27 March 2009 12:07:02 P?draig Brady wrote:
>> Laurent Pinchart wrote:
>>> Hi P?draig,
>>>
>>> On Thursday 26 March 2009 15:06:17 P?draig Brady wrote:
>>>> Can we set UVC_QUIRK_STREAM_NO_FID for all Syntek (174f) webcams,
>>>> rather than specifying each individually?
>>>> I've another one here (174f:8a34) that requires this tweak.
>>> Not all Syntek cameras require the quirk, so I can't set it globally.
>>>
>>> Could you please send me the USB descriptors (lsusb -v -d 174f:8a34) of
>>> your camera ? I will then update the driver and the list of supported
>>> devices on the website.
>> cheers,
>>
>> # lsusb -v -d 174f:8a34
> 
> [snip]
> 
> You seem to use an old version of usbutils that doesn't support UVC devices 
> yet, making the output quite useless. Could you please try usbutils 0.72 or 
> newer (0.73+ preferred) ?

# lsusb -v -d 174f:8a34

Bus 002 Device 003: ID 174f:8a34
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x174f
  idProduct          0x8a34
  bcdDevice            1.02
  iManufacturer           2 Syntek
  iProduct                3 USB2.0 UVC PC Camera
  iSerial                 4 0001
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          519
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              0
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           51
        dwClockFrequency        6.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             4
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               3
        iTerminal               0
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000000
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x00000000
        iProcessing             0
        bmVideoStandards     0x 0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0004  1x 4 bytes
        bInterval               6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                        1
        wTotalLength                      341
        bEndPointAddress                  129
        bmInfo                              0
        bTerminalLink                       4
        bStillCaptureMethod                 2
        bTriggerSupport                     1
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors               10
        guidFormat                            {59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                 18432000
        dwMaxBitRate                 18432000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         500000
        bFrameIntervalType                  1
        dwFrameInterval( 0)            500000
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                  1152000
        dwMaxBitRate                  1152000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         416666
        bFrameIntervalType                  1
        dwFrameInterval( 0)            416666
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                  1520640
        dwMaxBitRate                  1520640
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         416666
        bFrameIntervalType                  1
        dwFrameInterval( 0)            416666
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                  4608000
        dwMaxBitRate                  4608000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         416666
        bFrameIntervalType                  1
        dwFrameInterval( 0)            416666
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                  6082560
        dwMaxBitRate                  6082560
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         416666
        bFrameIntervalType                  1
        dwFrameInterval( 0)            416666
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            800
        wHeight                           600
        dwMinBitRate                  8640000
        dwMaxBitRate                  8640000
        dwMaxVideoFrameBufferSize      960000
        dwDefaultFrameInterval        1428571
        bFrameIntervalType                  1
        dwFrameInterval( 0)           1428571
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         7
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1024
        wHeight                           768
        dwMinBitRate                 14155776
        dwMaxBitRate                 14155776
        dwMaxVideoFrameBufferSize     1572864
        dwDefaultFrameInterval        1428571
        bFrameIntervalType                  1
        dwFrameInterval( 0)           1428571
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         8
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                           800
        dwMinBitRate                 18432000
        dwMaxBitRate                 18432000
        dwMaxVideoFrameBufferSize     2048000
        dwDefaultFrameInterval        1428571
        bFrameIntervalType                  1
        dwFrameInterval( 0)           1428571
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         9
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                           960
        dwMinBitRate                 22118400
        dwMaxBitRate                 22118400
        dwMaxVideoFrameBufferSize     2457600
        dwDefaultFrameInterval        1428571
        bFrameIntervalType                  1
        dwFrameInterval( 0)           1428571
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                        10
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                 23592960
        dwMaxBitRate                 23592960
        dwMaxVideoFrameBufferSize     2621440
        dwDefaultFrameInterval        1428571
        bFrameIntervalType                  1
        dwFrameInterval( 0)           1428571
      VideoStreaming Interface Descriptor:
        bLength                            10
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               1
        wWidth( 0)                       1280
        wHeight( 0)                      1024
        bNumCompressionPatterns             1
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     0 (Unspecified)
        bTransferCharacteristics            0 (Unspecified)
        bMatrixCoefficients                 0 (Unspecified)
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 1024 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0400  1x 1024 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0c00  2x 1024 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)



From legrain at crans.org  Fri Mar 27 22:53:42 2009
From: legrain at crans.org (=?iso-8859-15?q?Gr=E9gory_LEGRAIN?=)
Date: Fri, 27 Mar 2009 22:53:42 +0100
Subject: [Linux-uvc-devel] Strange issue with Hercules Dualpix Infinite
In-Reply-To: <200903161213.33714.laurent.pinchart@skynet.be>
References: <200903022158.38436.legrain@crans.org>
	<200903152126.33155.legrain@crans.org>
	<200903161213.33714.laurent.pinchart@skynet.be>
Message-ID: <200903272253.42142.legrain@crans.org>

Hi Laurent,
I have checked, and the right videodev.ko is loaded (I checked if 
/lib/modules/["kernel version"]/kernel/drivers/media/video/videodev.ko has the 
right creation date).

But, I still get "No valid video chain found"  when loading uvcvideo. Is it 
possible to get more output from the kernel when loading the modules ?

Best regards,
Gr?gory


On lundi 16 mars 2009 12:13:33 you wrote:
>
> To reuse your words, humpf... :-)
>
> Make sure you loaded the videodev.ko and associated modules that come from
> the mercurial repository. On most distributions the uvcvideo.ko module
> won't load with the stock videodev modules, but depending on your kernel
> configuration options you might still be able to load it, which would
> result in all kind of weird issues (and possible system crashes).
>
> Best regards,
>
> Laurent Pinchart



From adonis827 at yahoo.com  Mon Mar 30 09:30:44 2009
From: adonis827 at yahoo.com (Gwapo Ako)
Date: Mon, 30 Mar 2009 00:30:44 -0700 (PDT)
Subject: [Linux-uvc-devel] SiGma Micro webcam and skype
Message-ID: <784432.59425.qm@web111507.mail.gq1.yahoo.com>


Hi! I hope this is the right avenue to ask about my problems with this particular webcam. 

Previously, cheese wasn't working in a default ubuntu 8.10- ekiga though works. 

I got the latest source of uvcvideo in here and compiled then install it.

http://linuxtv.org/hg/~pinchartl/uvcvideo/archive/tip.tar.gz

Afterwards cheese was already ok, ekiga works as before. But i do hope to be able to use it with skype though.

Any thoughts?






      What can we do to improve Metro Manila traffic? Find the answers on Yahoo Answers! http://ph.answers.yahoo.com/


From jakob at ndersen.org  Mon Mar 30 14:54:10 2009
From: jakob at ndersen.org (Jakob Andersen)
Date: Mon, 30 Mar 2009 14:54:10 +0200
Subject: [Linux-uvc-devel] Adding a simple video input device?
Message-ID: <80826F435B3A4D95B92255FFAE4C768B@aarhus.gametrusteurope.com>

Hi all

 

I have a simple Swann USB 2 DVR. It is basically consisting only of the well
know CX25843 and the USB i/o chip.

 

I would love to see support for this device in your fantastic driver so I
can use it for Zoneminder.

 

The device has 4 video inputs and 2 audio inputs. The audio inputs are
basically useless se those could be disregarded.

 

I am not a developer but I am prepared to assist in any way I can to help
get this support added!

 

I look very much forward to your reply;-)

 

Thanks!

 

 

 

 

Best Regards

 

Jakob Andersen

M: +45 20 46 04 88

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20090330/e6c0c392/attachment.html>

From Eugen.Dedu at pu-pm.univ-fcomte.fr  Mon Mar 30 17:26:49 2009
From: Eugen.Dedu at pu-pm.univ-fcomte.fr (Eugen Dedu)
Date: Mon, 30 Mar 2009 17:26:49 +0200
Subject: [Linux-uvc-devel] Camera name - what encoding?
Message-ID: <49D0E4B9.3040005@pu-pm.univ-fcomte.fr>

Hi,

(This e-mail is because we have a bug about a camera name which seems 
not to be in utf-8, 
https://bugs.launchpad.net/ubuntu/+source/ekiga/+bug/345192?comments=all)

For example, I see at
http://www.mail-archive.com/linux-uvc-devel at lists.berlios.de/msg01225.html:

> uvcvideo: Found UVC 1.00 device Microsoft? LifeCam NX-6000 (045e:00f8)

The character ? is in fact trademark/registered.

My questions: Is this string (camera name) found in the camera or is it
created by uvcvideo?  Is it in utf-8 or another encoding?

Thanks,
-- 
Eugen


From laurent.pinchart at skynet.be  Mon Mar 30 23:05:36 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 30 Mar 2009 23:05:36 +0200
Subject: [Linux-uvc-devel] Adding a simple video input device?
In-Reply-To: <80826F435B3A4D95B92255FFAE4C768B@aarhus.gametrusteurope.com>
References: <80826F435B3A4D95B92255FFAE4C768B@aarhus.gametrusteurope.com>
Message-ID: <200903302305.36729.laurent.pinchart@skynet.be>

Hi Jakob,

On Monday 30 March 2009 14:54:10 Jakob Andersen wrote:
> Hi all
>
> I have a simple Swann USB 2 DVR. It is basically consisting only of the
> well know CX25843 and the USB i/o chip.
>
> I would love to see support for this device in your fantastic driver so I
> can use it for Zoneminder.

Thanks for the compliment :-)

The uvcvideo driver supports UVC devices only. I very much doubt that your 
device is UVC compatible (but please check http://linux-uvc.berlios.de/faq to 
make sure). Have you checked the drivers available in the 2.6.29 kernel ?

> The device has 4 video inputs and 2 audio inputs. The audio inputs are
> basically useless se those could be disregarded.
>
> I am not a developer but I am prepared to assist in any way I can to help
> get this support added!

The Linux kernel includes drivers for many Connexant-based DVR/PVR devices. 
You should try them and, if they fail, contact the linux-media list for help.

Best regards,

Laurent Pinchart



From laurent.pinchart at skynet.be  Mon Mar 30 23:11:36 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 30 Mar 2009 23:11:36 +0200
Subject: [Linux-uvc-devel] Camera name - what encoding?
In-Reply-To: <49D0E4B9.3040005@pu-pm.univ-fcomte.fr>
References: <49D0E4B9.3040005@pu-pm.univ-fcomte.fr>
Message-ID: <200903302311.36239.laurent.pinchart@skynet.be>

Hi Eugen,

On Monday 30 March 2009 17:26:49 Eugen Dedu wrote:
> Hi,
>
> (This e-mail is because we have a bug about a camera name which seems
> not to be in utf-8,
> https://bugs.launchpad.net/ubuntu/+source/ekiga/+bug/345192?comments=all)
>
> For example, I see at
>
> http://www.mail-archive.com/linux-uvc-devel at lists.berlios.de/msg01225.html:
> > uvcvideo: Found UVC 1.00 device Microsoft? LifeCam NX-6000 (045e:00f8)
>
> The character ? is in fact trademark/registered.
>
> My questions: Is this string (camera name) found in the camera or is it
> created by uvcvideo?  Is it in utf-8 or another encoding?

The string comes directly from the camera where it is encoded in UTF-16. The 
kernel USB subsystem transcodes it to ISO-8859-1, hence the '?'.

Best regards,

Laurent Pinchart



From laurent.pinchart at skynet.be  Mon Mar 30 23:13:27 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 30 Mar 2009 23:13:27 +0200
Subject: [Linux-uvc-devel] SiGma Micro webcam and skype
In-Reply-To: <784432.59425.qm@web111507.mail.gq1.yahoo.com>
References: <784432.59425.qm@web111507.mail.gq1.yahoo.com>
Message-ID: <200903302313.27896.laurent.pinchart@skynet.be>

Hi,

On Monday 30 March 2009 09:30:44 Gwapo Ako wrote:
> Hi! I hope this is the right avenue to ask about my problems with this
> particular webcam.
>
> Previously, cheese wasn't working in a default ubuntu 8.10- ekiga though
> works.
>
> I got the latest source of uvcvideo in here and compiled then install it.
>
> http://linuxtv.org/hg/~pinchartl/uvcvideo/archive/tip.tar.gz
>
> Afterwards cheese was already ok, ekiga works as before.

So this is an improvement :-)

> But i do hope to be able to use it with skype though.

Skype is a closed-source software. As such it can't be properly supported by 
open-source software developers. You should contact Skype's technical support 
for help. You might also want to search through the mailing list archive, I 
know that several people had issues with Skype and were able to solve them.

Best regards,

Laurent Pinchart



From laurent.pinchart at skynet.be  Mon Mar 30 23:14:55 2009
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 30 Mar 2009 23:14:55 +0200
Subject: [Linux-uvc-devel] Strange issue with Hercules Dualpix Infinite
In-Reply-To: <200903272253.42142.legrain@crans.org>
References: <200903022158.38436.legrain@crans.org>
	<200903161213.33714.laurent.pinchart@skynet.be>
	<200903272253.42142.legrain@crans.org>
Message-ID: <200903302314.56166.laurent.pinchart@skynet.be>

Hi Gr?gory,

On Friday 27 March 2009 22:53:42 Gr?gory LEGRAIN wrote:
> Hi Laurent,
> I have checked, and the right videodev.ko is loaded (I checked if
> /lib/modules/["kernel version"]/kernel/drivers/media/video/videodev.ko has
> the right creation date).
>
> But, I still get "No valid video chain found"  when loading uvcvideo. Is it
> possible to get more output from the kernel when loading the modules ?

Please try to set the trace parameter to 255 when loading the driver. It 
should print more messages to the kernel log, possibly helping us to diagnose 
the problem.

Best regards,

Laurent Pinchart



From Eugen.Dedu at pu-pm.univ-fcomte.fr  Mon Mar 30 23:24:15 2009
From: Eugen.Dedu at pu-pm.univ-fcomte.fr (Eugen Dedu)
Date: Mon, 30 Mar 2009 23:24:15 +0200
Subject: [Linux-uvc-devel] Camera name - what encoding?
In-Reply-To: <200903302311.36239.laurent.pinchart@skynet.be>
References: <49D0E4B9.3040005@pu-pm.univ-fcomte.fr>
	<200903302311.36239.laurent.pinchart@skynet.be>
Message-ID: <49D1387F.4040000@pu-pm.univ-fcomte.fr>

Laurent Pinchart wrote:
> Hi Eugen,
> 
> On Monday 30 March 2009 17:26:49 Eugen Dedu wrote:
>> Hi,
>>
>> (This e-mail is because we have a bug about a camera name which seems
>> not to be in utf-8,
>> https://bugs.launchpad.net/ubuntu/+source/ekiga/+bug/345192?comments=all)
>>
>> For example, I see at
>>
>> http://www.mail-archive.com/linux-uvc-devel at lists.berlios.de/msg01225.html:
>>> uvcvideo: Found UVC 1.00 device Microsoft? LifeCam NX-6000 (045e:00f8)
>> The character ? is in fact trademark/registered.
>>
>> My questions: Is this string (camera name) found in the camera or is it
>> created by uvcvideo?  Is it in utf-8 or another encoding?
> 
> The string comes directly from the camera where it is encoded in UTF-16. The 
> kernel USB subsystem transcodes it to ISO-8859-1, hence the '?'.

Thanks, Laurent, for the fast reply.

- Is it true that the name for all the camera come from the camera itself?
- Is it true that all the camera store their name in utf-16?
- Why the kernel usb subsystem transcode them to latin-1 and not to utf-8?
- Do the linux kernel transcodes to latin-1 or it depends on how it was 
configured?  Is it the same for linux, windows and macos?  It's because 
I want to retranscode it to utf-8, and I need to know its current encoding.

Thanks!
-- 
Eugen


From legrain at crans.org  Tue Mar 31 21:36:47 2009
From: legrain at crans.org (=?iso-8859-15?q?Gr=E9gory_LEGRAIN?=)
Date: Tue, 31 Mar 2009 21:36:47 +0200
Subject: [Linux-uvc-devel] Strange issue with Hercules Dualpix Infinite
In-Reply-To: <200903302314.56166.laurent.pinchart@skynet.be>
References: <200903022158.38436.legrain@crans.org>
	<200903272253.42142.legrain@crans.org>
	<200903302314.56166.laurent.pinchart@skynet.be>
Message-ID: <200903312136.47702.legrain@crans.org>

Hi Laurent,

On lundi 30 mars 2009 23:14:55 Laurent Pinchart wrote:
> Please try to set the trace parameter to 255 when loading the driver. It
> should print more messages to the kernel log, possibly helping us to
> diagnose the problem.

I made the test, and the kernel output is attached with the mail.

Best regards,
Gr?gory


-------------- next part --------------
uvcvideo: Adding mapping Brightness to control 00000000-0000-0000-0000-000000000101/2.                                                                          
uvcvideo: Adding mapping Contrast to control 00000000-0000-0000-0000-000000000101/3.                                                                            
uvcvideo: Adding mapping Hue to control 00000000-0000-0000-0000-000000000101/6. 
uvcvideo: Adding mapping Saturation to control 00000000-0000-0000-0000-000000000101/7.                                                                          
uvcvideo: Adding mapping Sharpness to control 00000000-0000-0000-0000-000000000101/8.                                                                           
uvcvideo: Adding mapping Gamma to control 00000000-0000-0000-0000-000000000101/9.                                                                               
uvcvideo: Adding mapping Backlight Compensation to control 00000000-0000-0000-0000-000000000101/1.                                                              
uvcvideo: Adding mapping Gain to control 00000000-0000-0000-0000-000000000101/4.
uvcvideo: Adding mapping Power Line Frequency to control 00000000-0000-0000-0000-000000000101/5.                                                                
uvcvideo: Adding mapping Hue, Auto to control 00000000-0000-0000-0000-000000000101/16.                                                                          
uvcvideo: Adding mapping Exposure, Auto to control 00000000-0000-0000-0000-000000000001/2.                                                                      
uvcvideo: Adding mapping Exposure, Auto Priority to control 00000000-0000-0000-0000-000000000001/3.                                                             
uvcvideo: Adding mapping Exposure (Absolute) to control 00000000-0000-0000-0000-000000000001/4.                                                                 
uvcvideo: Adding mapping White Balance Temperature, Auto to control 00000000-0000-0000-0000-000000000101/11.                                                    
uvcvideo: Adding mapping White Balance Temperature to control 00000000-0000-0000-0000-000000000101/10.                                                          
uvcvideo: Adding mapping White Balance Component, Auto to control 00000000-0000-0000-0000-000000000101/13.                                                      
uvcvideo: Adding mapping White Balance Blue Component to control 00000000-0000-0000-0000-000000000101/12.                                                       
uvcvideo: Adding mapping White Balance Red Component to control 00000000-0000-0000-0000-000000000101/12.                                                        
uvcvideo: Adding mapping Focus (absolute) to control 00000000-0000-0000-0000-000000000001/6.                                                                    
uvcvideo: Adding mapping Focus, Auto to control 00000000-0000-0000-0000-000000000001/8.                                                                         
uvcvideo: Adding mapping Zoom, Absolute to control 00000000-0000-0000-0000-000000000001/11.                                                                     
uvcvideo: Adding mapping Zoom, Continuous to control 00000000-0000-0000-0000-000000000001/12.                                                                   
uvcvideo: Adding mapping Privacy to control 00000000-0000-0000-0000-000000000001/17.                                                                            
usbcore: registered new interface driver uvcvideo                               
USB Video Class driver (v0.1.0)                                                 
usb 2-5: new high speed USB device using ehci_hcd and address 3                 
usb 2-5: configuration #1 chosen from 1 choice                                  
uvcvideo: Probing generic UVC device 5                                          
uvcvideo: Found format YUV 4:2:2 (YUYV).                                        
uvcvideo: - 320x240 (30.0 fps)                                                  
uvcvideo: - 160x120 (30.0 fps)                                                  
uvcvideo: - 176x144 (30.0 fps)                                                  
uvcvideo: - 352x288 (30.0 fps)                                                  
uvcvideo: - 640x480 (30.0 fps)                                                  
uvcvideo: - 800x600 (20.0 fps)                                                  
uvcvideo: device 3 videostreaminginterface 1 frame index 8 out of range         
uvcvideo: Found a Status endpoint (addr 83).                                    
uvcvideo: Found UVC 1.00 device Hercules Dualpix Infinite (06f8:300a)           
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/2 to device 5 entity 3                                                                             
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/3 to device 5 entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/6 to device 5 entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/7 to device 5 entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/8 to device 5 entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/9 to device 5 entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/10 to device 5 entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/1 to device 5 entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/4 to device 5 entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/5 to device 5 entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/11 to device 5 entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/2 to device 5 entity 1
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/3 to device 5 entity 1
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/4 to device 5 entity 1
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/11 to device 5 entity 1
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/13 to device 5 entity 1
uvcvideo: Scanning UVC chain: OT 2 <- XU 5 <- XU 4 <- PU 3 <- IT 1
uvcvideo: No valid video chain found.
ALSA sound/usb/usbaudio.c:1298: 3:3:1: cannot get freq at ep 0x84
usb 2-5: New USB device found, idVendor=06f8, idProduct=300a
usb 2-5: New USB device strings: Mfr=2, Product=1, SerialNumber=0
usb 2-5: Product: Hercules Dualpix Infinite
usb 2-5: Manufacturer: Guillemot Corporation
ALSA sound/usb/usbaudio.c:1298: 3:3:1: cannot get freq at ep 0x84

