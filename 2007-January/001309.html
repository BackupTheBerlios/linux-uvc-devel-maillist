<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] Window resize crash report,	with luvcveiw-20070107 and QC Fusion	(046d:08c1)
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2007-January/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Window%20resize%20crash%20report%2C%0A%09with%20luvcveiw-20070107%20and%20QC%20Fusion%09%28046d%3A08c1%29&In-Reply-To=%3C1169967574.3040.16.camel%40linux23dragon.example.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001308.html">
   <LINK REL="Next"  HREF="001310.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] Window resize crash report,	with luvcveiw-20070107 and QC Fusion	(046d:08c1)</H1>
    <B>linux23dragon</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Window%20resize%20crash%20report%2C%0A%09with%20luvcveiw-20070107%20and%20QC%20Fusion%09%28046d%3A08c1%29&In-Reply-To=%3C1169967574.3040.16.camel%40linux23dragon.example.org%3E"
       TITLE="[Linux-uvc-devel] Window resize crash report,	with luvcveiw-20070107 and QC Fusion	(046d:08c1)">linux23dragon at iprimus.com.au
       </A><BR>
    <I>Sun Jan 28 07:59:34 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="001308.html">[Linux-uvc-devel] v4l-dvb and uvcvideo
</A></li>
        <LI>Next message: <A HREF="001310.html">[Linux-uvc-devel] Jumbled images from Logitech Quickcam 5000
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1309">[ date ]</a>
              <a href="thread.html#1309">[ thread ]</a>
              <a href="subject.html#1309">[ subject ]</a>
              <a href="author.html#1309">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>________________________________________________________________________
This is just a &#8220;end user feedback&#8221; report, on using both the UVC driver
and luvcveiw program.

This post describes only one crash issues (window re size crash). 

!!!Warning!!!

Beware, the details of this report is a bit &#8220;over the top&#8221; and could
cause one to go crazy. I wrote this report to be useful, and to show
that I'm grateful for this web cam driver support.

Some Log information may not be relevant to the bug report.
________________________________________________________________________

Hi

I thought It might be useful to share some information on the
intermittent crashing issues I've been having with luvcveiw.

This is the following content: 


     1. System used
        
     2. Web cam and driver information
        
     3. Running the luvcveiw application
        
     1. Luvcveiw crash
        
     2. Restarting luvcveiw after crash
        
     3. 2nd luvcveiw crash
        
-----------------------------------------------------------------------


1 System used:


AMD Athlon(tm) 64 processor 3200+ (Running a 32bit Linux system)
Linux version 2.6.16.38 #2 PREEMPT
gcc version 3.4.6
GNU ld version 2.16.1
GNU C Library stable release version 2.3.6


2 Web cam and driver information:

This is the kernel driver (SVN: committed-rev=&quot;78&quot;, revision=&quot;79&quot;) log
output (Jan 28 12:05:52) when I first plug in the QC Fusion Web cam (My
Edit - without the time stamp or host name):


kernel: usb 1-6: new high speed USB device using ehci_hcd and address 4
kernel: usb 1-6: configuration #1 chosen from 1 choice
kernel: uvcvideo: Found UVC 1.00 device &lt;unnamed&gt; (046d:08c1)
kernel: usbcore: registered new driver uvcvideo
kernel: USB Video Class driver (v0.1.0)
kernel: 4:3:1: cannot set freq 0 to ep 0x86
kernel: 4:3:2: cannot set freq 0 to ep 0x86
kernel: 4:3:3: cannot get freq at ep 0x86
kernel: usbcore: registered new driver snd-usb-audio



3 Running the luvcveiw application:

This is the console output when I start luvcveiw-20070107:

<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">david at localhost</A>:~$ luvcview
luvcview version 0.2.0
Video driver: x11
A window manager is available
video /dev/video0


luvcview is a very cool testing tool.

The video motion performance is fast and the image quality is very good.
I can also see the light correction working. The default brightness
settings from luvcveiw is a little dark, but can be adjusted. I just
left luvcveiw going with the default window size and video settings at
this time.

After leaving uvcview running for around 45 minutes, I had the following
kernel log messages (My Edit - with the time stamp, without the host
name):

Jan 28 12:34:53 kernel: EOF in empty packet.
Jan 28 12:37:31 kernel: EOF in empty packet.
Jan 28 12:40:04 kernel: EOF in empty packet.
Jan 28 12:42:11 kernel: EOF in empty packet.


        I don't know if the kernel log output is to do with the driver,
        but I have been doing nothing else but typing with Open Office
        and running Gnome terminal, luvcveiw and Gnome system log viewer
        in the background. My system is not connected to the net or
        network at this time (I do have a firewall, but it shouldn't be
        running AFAIK).
        



4 Crashing luvcveiw application:


After viewing the log output about &#8220;EOF in empty packet&#8221;, I moved the
luvcview window around the desktop, all was good. I then tried to
maximise the window, but the program then just caused a Segmentation
fault.

However, It looked as though it was trying to unmaximize (or resize)
just before it crashed.
I did not have any system or kernel logging reports. And a output in the
gnome-terminal saying &#8220;Segmentation fault&#8221;.

Luvcview did appear to exit out cleanly, without leaving any related
process running in the background (according to the system monitor
program &#8220;top&#8221;). I'm not sure about memory buffers or anything like that
at this time.



5 Restarting luvcveiw after crash:

I restarted luvcveiw again without any issues and was able to maximise
unmaximise and minimise the window. I even played around with the
brightness settings. (I won't go into details about the brightness
control settings).
Again, the video motion performance was fast and the image quality was
very good. The the light correction was working. 


This was the kernel log while I was adjusting just the brightness
levels:


Jan 28 15:13:20 kernel: uvcvideo: Failed to query (130) UVC control 1
(unit 0) : -32 (exp. 26).
Jan 28 15:14:21 kernel: uvcvideo: Failed to query (135) UVC control 2
(unit 2) : -32 (exp. 2).
Jan 28 15:14:21 kernel: uvcvideo: Failed to query (130) UVC control 2
(unit 2) : -32 (exp. 2).
Jan 28 15:14:21 kernel: uvcvideo: Failed to query (131) UVC control 2
(unit 2) : -32 (exp. 2).
Jan 28 15:14:22 kernel: uvcvideo: Failed to query (130) UVC control 2
(unit 2) : -32 (exp. 2).
Jan 28 15:14:23 kernel: EOF in empty packet.
Jan 28 15:14:27 kernel: uvcvideo: Failed to query (132) UVC control 2
(unit 2) : -32 (exp. 2).
Jan 28 15:14:27 kernel: uvcvideo: Failed to query (1) UVC control 2
(unit 2) : -32 (exp. 2).
Jan 28 15:14:27 kernel: EOF in empty packet.
Jan 28 15:14:45 kernel: uvcvideo: Failed to query (130) UVC control 2
(unit 2) : -32 (exp. 2).
Jan 28 15:15:05 last message repeated 2 times
Jan 28 15:15:05 kernel: EOF in empty packet.
Jan 28 15:15:07 kernel: EOF in empty packet.
Jan 28 15:15:08 kernel: uvcvideo: Failed to query (135) UVC control 2
(unit 2) : -32 (exp. 2).
Jan 28 15:15:10 kernel: uvcvideo: Failed to query (135) UVC control 2
(unit 2) : -32 (exp. 2).
------------------------//sniped//-----------------------------------

As you can see, the &#8220;EOF in empty packet&#8221; (issue?), has come back. I
don't think that has to do with the brightness settings (?). But I did
not need to wait 30-40 minutes to get that message.


This was some of the terminal output while I was adjusting brightness
levels:


-----------// sniped //-------------------------

max 255, min 0, step 1, default 127 ,current 17

Control name:Brightness set to value:17

max 255, min 0, step 1, default 127 ,current 18

Control name:Brightness set to value:18

ioctl querycontrol error 5

max 255, min 0, step 1, default 127 ,current 0

Control name:Brightness set to value:0

---------//sniped//---------------------------

Control name:Brightness set to value:60

max 255, min 0, step 1, default 127 ,current 61

Control name:Brightness set to value:61

ioctl querycontrol error 22

reset Hue error

ioctl querycontrol error 5

reset Gain error

control disabled

reset pantilt error

max 255, min 0, step 1, default 127 ,current 128

Control name:Brightness set to value:128

---------------//sniped//----------------------



6 2nd luvcveiw crash:


After I had adjusted the brightness control and finding the same &#8220;EOF in
empty packet&#8221; in the kernel log, I tried to resize luvcveiw. And yes, it
crashed again. 

So I had the same pattern:

1 &#8220;EOF in empty packet&#8221; log message (From 5: - Restarting luvcveiw after
crash) 

2 luvcveiw looked as though it was trying to unmaximise, just before it
crashed.


This is the terminal log output that I was left with:

X Error of failed request: BadAtom (invalid Atom parameter)
Major opcode of failed request: 19 (X_DeleteProperty)
Atom id in failed request: 0x3200003
Serial number of failed request: 25627
Current serial number in output stream: 25632



This ends my (rather large) report.


Hope this helps :)



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001308.html">[Linux-uvc-devel] v4l-dvb and uvcvideo
</A></li>
	<LI>Next message: <A HREF="001310.html">[Linux-uvc-devel] Jumbled images from Logitech Quickcam 5000
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1309">[ date ]</a>
              <a href="thread.html#1309">[ thread ]</a>
              <a href="subject.html#1309">[ subject ]</a>
              <a href="author.html#1309">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
