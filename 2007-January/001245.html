<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] fuji finepix support?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2007-January/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20fuji%20finepix%20support%3F&In-Reply-To=%3C45AE2D36.2050300%40sms.ed.ac.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001243.html">
   <LINK REL="Next"  HREF="001247.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] fuji finepix support?</H1>
    <B>Ioannis Nousias</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20fuji%20finepix%20support%3F&In-Reply-To=%3C45AE2D36.2050300%40sms.ed.ac.uk%3E"
       TITLE="[Linux-uvc-devel] fuji finepix support?">s0238762 at sms.ed.ac.uk
       </A><BR>
    <I>Wed Jan 17 15:05:42 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="001243.html">[Linux-uvc-devel] fuji finepix support?
</A></li>
        <LI>Next message: <A HREF="001247.html">[Linux-uvc-devel] fuji finepix support?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1245">[ date ]</a>
              <a href="thread.html#1245">[ thread ]</a>
              <a href="subject.html#1245">[ subject ]</a>
              <a href="author.html#1245">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Laurent Pinchart wrote:
&gt;<i> Hi Ioannis,
</I>&gt;<i>
</I>&gt;<i>   
</I>&gt;&gt;<i>  I have a fuji finepix e550 which is &quot;recognised&quot; by the uvc driver. When I
</I>&gt;&gt;<i> plug in the camera I see this messages in dmesg:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  usb 2-1: new full speed USB device using uhci_hcd and address 5
</I>&gt;&gt;<i>  usb 2-1: configuration #1 chosen from 1 choice
</I>&gt;&gt;<i>  uvcvideo: Found UVC 1.00 device USB Web Camera (04cb:0172)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  and a device node is created:
</I>&gt;&gt;<i>  /dev/video0
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  (and a symlink /dev/video to it)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  unfortunately it does work. It fails with the following error message:
</I>&gt;&gt;<i>     
</I>&gt;<i> [snip]
</I>&gt;<i>
</I>&gt;<i> This is definitely a bug in the UVC driver. It should not crash.
</I>&gt;<i>
</I>&gt;<i> Could you please set the trace parameter to 127 ?
</I>&gt;<i>
</I>&gt;<i> echo 127 &gt; /sys/modules/uvcvideo/parameters/trace
</I>&gt;<i>
</I>&gt;<i> Then try to plug your camera and let the kernel crash :-) I'll need the dmesg 
</I>&gt;<i> output (you can leave out the syslog output) with all the uvcvideo messages 
</I>&gt;<i> and the crash dump.
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i>
</I>&gt;<i> Laurent Pinchart
</I>&gt;<i>   
</I>gladly :)

here you go:

uvcvideo: Probing generic UVC device 1
uvcvideo: Found format MJPEG.
uvcvideo: - 352x288 (10.0 fps)
uvcvideo: Found UVC 1.00 device USB Web Camera (04cb:0172)
uvcvideo: Scanning UVC chain: OT 3 &lt;- Unit 2 &lt;- IT 1
uvcvideo: Found a valid video chain (1 -&gt; 3).
uvcvideo: UVC device initialized.
uvcvideo: uvc_v4l2_open
uvcvideo: uvc_v4l2_ioctl
v4l1 ioctl VIDIOCGCAP, dir=r- (0x803c7601)
v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
v4l2 ioctl VIDIOC_ENUM_FMT, dir=rw (0xc0405602)
v4l2 ioctl VIDIOC_TRY_FMT, dir=rw (0xc0cc5640)
uvcvideo: Trying format 0x47504a4d (MJPG): 10000x10000.
uvcvideo: Using default frame interval 100000.0 us (10.0 fps).
uvcvideo: uvc_v4l2_ioctl
v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
uvcvideo: Control 0x00980900 not found.
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
uvcvideo: Control 0x00980903 not found.
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
uvcvideo: Control 0x00980901 not found.
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
uvcvideo: Control 0x00980902 not found.
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
uvcvideo: Control 0x00980910 not found.
v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
BUG: unable to handle kernel paging request at virtual address ffffffe2
 printing eip:
f8f13af7
*pde = 00004067
Oops: 0000 [#1]
SMP
last sysfs file: /devices/system/cpu/cpu0/cpufreq/scaling_cur_freq
Modules linked in: uvcvideo(U) videodev v4l1_compat v4l2_common autofs4 
hidp rfcomm l2cap vmnet(U) vmmon(U) sunrpc i8k ip_conntrack_netbios_ns 
ipt_REJECT iptable_filter ip_tables xt_state ip_conntrack nfnetlink 
xt_tcpudp ip6table_filter ip6_tables x_tables cpufreq_ondemand video sbs 
i2c_ec dock button battery asus_acpi ac ipv6 parport_pc lp parport 
snd_intel8x0m snd_intel8x0 snd_ac97_codec snd_ac97_bus snd_seq_dummy 
snd_seq_oss snd_seq_midi_event snd_seq nvidia(U) snd_seq_device 
snd_pcm_oss ide_cd snd_mixer_oss snd_pcm hci_usb joydev snd_timer 
ohci1394 tg3 cdrom ieee1394 pcspkr i2c_core snd ndiswrapper(U) bluetooth 
soundcore serio_raw snd_page_alloc dm_snapshot dm_zero dm_mirror dm_mod 
ext3 jbd ehci_hcd ohci_hcd uhci_hcd
CPU:    0
EIP:    0060:[&lt;f8f13af7&gt;]    Tainted: P      VLI
EFLAGS: 00210282   (2.6.18-1.2869.fc6 #1)
EIP is at uvc_v4l2_do_ioctl+0x5c0/0xadf [uvcvideo]
eax: 00000000   ebx: d0e1fec0   ecx: e220520c   edx: ffffffe0
esi: c0cc5604   edi: 00000008   ebp: d82c2030   esp: c8799848
ds: 007b   es: 007b   ss: 0068
Process camE (pid: 9269, ti=c8799000 task=cc662030 task.ti=c8799000)
Stack: 00000000 00000000 c0612dda 00000000 c64d0a40 000006cd d3db7e00 
d400dd1c
       f723d730 f723d730 c65c4c80 000006cd 000f4240 00000000 cc662140 
c180a4e0
       000f4240 00000000 00000000 00000032 00008000 00008000 000b71b0 
000000d0
Call Trace:
 [&lt;f8e74d13&gt;] v4l_compat_translate_ioctl+0xb7b/0x1b48 [v4l1_compat]
 [&lt;f8f13f88&gt;] uvc_v4l2_do_ioctl+0xa51/0xadf [uvcvideo]
 [&lt;f8e7cbc8&gt;] video_usercopy+0x172/0x237 [videodev]
 [&lt;f8f1311f&gt;] uvc_v4l2_ioctl+0x3b/0x41 [uvcvideo]
 [&lt;c047f204&gt;] do_ioctl+0x4c/0x62
 [&lt;c047f464&gt;] vfs_ioctl+0x24a/0x25c
 [&lt;c047f4c2&gt;] sys_ioctl+0x4c/0x66
 [&lt;c0404013&gt;] syscall_call+0x7/0xb
DWARF2 unwinder stuck at syscall_call+0x7/0xb
Leftover inexact backtrace:
 =======================
Code: 00 83 3b 01 8b 48 4c 8b 50 50 0f 85 d0 04 00 00 85 c9 0f 84 c8 04 
00 00 85 d2 0f 84 c0 04 00 00 8b 41 04 bf 08 00 00 00 89 43 0c &lt;0f&gt; b7 
42 02 89 43 04 0f b7 42 04 c7 43 10 01 00 00 00 89 43 08
EIP: [&lt;f8f13af7&gt;] uvc_v4l2_do_ioctl+0x5c0/0xadf [uvcvideo] SS:ESP 
0068:c8799848
 &lt;3&gt;BUG: sleeping function called from invalid context at kernel/rwsem.c:20
in_atomic():0, irqs_disabled():1
 [&lt;c04051db&gt;] dump_trace+0x69/0x1af
 [&lt;c0405339&gt;] show_trace_log_lvl+0x18/0x2c
 [&lt;c04058ed&gt;] show_trace+0xf/0x11
 [&lt;c04059ea&gt;] dump_stack+0x15/0x17
 [&lt;c0439482&gt;] down_read+0x12/0x20
 [&lt;c04315e1&gt;] blocking_notifier_call_chain+0xe/0x29
 [&lt;c0427638&gt;] do_exit+0x1b/0x776
 [&lt;c040588e&gt;] die+0x29d/0x2c2
 [&lt;c0615835&gt;] do_page_fault+0x408/0x4db
 [&lt;c0404b85&gt;] error_code+0x39/0x40
DWARF2 unwinder stuck at error_code+0x39/0x40
Leftover inexact backtrace:
 [&lt;f8e6007b&gt;] rfcomm_run+0x414/0x10d2 [rfcomm]
 [&lt;f8f13af7&gt;] uvc_v4l2_do_ioctl+0x5c0/0xadf [uvcvideo]
 [&lt;c0612dda&gt;] schedule+0x9b6/0x9dd
 [&lt;f8f13537&gt;] uvc_v4l2_do_ioctl+0x0/0xadf [uvcvideo]
 [&lt;c0420768&gt;] __cond_resched+0x25/0x3c
 [&lt;c0612e2b&gt;] cond_resched+0x2a/0x31
 [&lt;f8f13537&gt;] uvc_v4l2_do_ioctl+0x0/0xadf [uvcvideo]
 [&lt;f8e74d13&gt;] v4l_compat_translate_ioctl+0xb7b/0x1b48 [v4l1_compat]
 [&lt;c0614640&gt;] _spin_lock_irqsave+0x9/0xd
 [&lt;c042e24e&gt;] lock_timer_base+0x15/0x2f
 [&lt;c042e364&gt;] __mod_timer+0x9e/0xa8
 [&lt;c04562af&gt;] mempool_alloc+0x37/0xd8
 [&lt;c04e2d6a&gt;] cfq_set_request+0x221/0x345
 [&lt;c04e21d3&gt;] cfq_add_crq_rb+0xba/0xc3
 [&lt;c061461d&gt;] _read_unlock_irq+0x5/0x7
 [&lt;c0471073&gt;] __find_get_block_slow+0x11f/0x129
 [&lt;c047139d&gt;] __find_get_block+0x15c/0x166
 [&lt;c04713e2&gt;] __getblk+0x3b/0x2a3
 [&lt;f8850000&gt;] __journal_remove_journal_head+0xce/0x192 [jbd]
 [&lt;f8887e34&gt;] ext3_get_blocks_handle+0xc0/0x93d [ext3]
 [&lt;c0472b82&gt;] __bread+0x10/0xa9
 [&lt;f8887c31&gt;] ext3_get_branch+0x79/0xcb [ext3]
 [&lt;c061461d&gt;] _read_unlock_irq+0x5/0x7
 [&lt;c0471073&gt;] __find_get_block_slow+0x11f/0x129
 [&lt;f8887e34&gt;] ext3_get_blocks_handle+0xc0/0x93d [ext3]
 [&lt;c047139d&gt;] __find_get_block+0x15c/0x166
 [&lt;f8891606&gt;] ext3fs_dirhash+0xf9/0x1c7 [ext3]
 [&lt;f888bbbf&gt;] dx_probe+0x95/0x2d8 [ext3]
 [&lt;c04068d1&gt;] do_IRQ+0xb0/0xbc
 [&lt;c04e7ffd&gt;] vsnprintf+0x459/0x495
 [&lt;c053e819&gt;] vt_console_print+0x0/0x224
 [&lt;c042516a&gt;] release_console_sem+0x183/0x1c2
 [&lt;c0436aa9&gt;] autoremove_wake_function+0x15/0x35
 [&lt;c041d78c&gt;] __wake_up_common+0x2f/0x53
 [&lt;c041e760&gt;] enqueue_task+0x29/0x39
 [&lt;c04257f5&gt;] printk+0x1f/0x95
 [&lt;f8e6cae2&gt;] v4l_printk_ioctl+0xa5/0xf4 [v4l2_common]
 [&lt;f8f13f88&gt;] uvc_v4l2_do_ioctl+0xa51/0xadf [uvcvideo]
 [&lt;f8f13537&gt;] uvc_v4l2_do_ioctl+0x0/0xadf [uvcvideo]
 [&lt;c06146f2&gt;] __reacquire_kernel_lock+0x35/0x46
 [&lt;c0436aa9&gt;] autoremove_wake_function+0x15/0x35
 [&lt;c041d78c&gt;] __wake_up_common+0x2f/0x53
 [&lt;c041e580&gt;] __wake_up+0x2a/0x3d
 [&lt;f8e7cbc8&gt;] video_usercopy+0x172/0x237 [videodev]
 [&lt;c04c16f7&gt;] inode_has_perm+0x5b/0x63
 [&lt;c045f0d0&gt;] __handle_mm_fault+0x7e7/0x860
 [&lt;c04257f5&gt;] printk+0x1f/0x95
 [&lt;f8f1311f&gt;] uvc_v4l2_ioctl+0x3b/0x41 [uvcvideo]
 [&lt;f8f13537&gt;] uvc_v4l2_do_ioctl+0x0/0xadf [uvcvideo]
 [&lt;c047f204&gt;] do_ioctl+0x4c/0x62
 [&lt;c047f464&gt;] vfs_ioctl+0x24a/0x25c
 [&lt;c047f4c2&gt;] sys_ioctl+0x4c/0x66
 [&lt;c0404013&gt;] syscall_call+0x7/0xb
 =======================
uvcvideo: uvc_v4l2_release




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001243.html">[Linux-uvc-devel] fuji finepix support?
</A></li>
	<LI>Next message: <A HREF="001247.html">[Linux-uvc-devel] fuji finepix support?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1245">[ date ]</a>
              <a href="thread.html#1245">[ thread ]</a>
              <a href="subject.html#1245">[ subject ]</a>
              <a href="author.html#1245">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
