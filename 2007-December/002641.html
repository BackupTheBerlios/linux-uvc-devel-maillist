<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] Divide error with MS vx-7000
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2007-December/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Divide%20error%20with%20MS%20vx-7000&In-Reply-To=%3C3b2d6e400712210042t18d5ae74qb4d00f81ecf372df%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002661.html">
   <LINK REL="Next"  HREF="002643.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] Divide error with MS vx-7000</H1>
    <B>Timo H</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Divide%20error%20with%20MS%20vx-7000&In-Reply-To=%3C3b2d6e400712210042t18d5ae74qb4d00f81ecf372df%40mail.gmail.com%3E"
       TITLE="[Linux-uvc-devel] Divide error with MS vx-7000">timoph at gmail.com
       </A><BR>
    <I>Fri Dec 21 09:42:44 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002661.html">[Linux-uvc-devel] patche on a quickcam fusion
</A></li>
        <LI>Next message: <A HREF="002643.html">[Linux-uvc-devel] Divide error with MS vx-7000
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2641">[ date ]</a>
              <a href="thread.html#2641">[ thread ]</a>
              <a href="subject.html#2641">[ subject ]</a>
              <a href="author.html#2641">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I got a Microsoft VX-7000 camera as a gift and tried to get it working. It
works fine with luvcview, but not with any other v4l2 sw. I even managed
to change the luvcview-code so that it feeds vloopback and I get it
working with v4l software (thats ugly but at least makes the camera
usable to some extent).

The biggest problem is that the kopete crashes when the uvcvideo module
is loaded and the camera is plugged. That is really annoying because the
camera can't be plugged on when booting. Is there anything to do or is
there some non-standard things in the camera? (That might be possible
because it is MS after all). I could debug this more if you could give
some hints what to do next?

I added some debugging code from older threads and here is the dmesg output:

[10750.400000] uvcvideo: Found UVC 1.00 device Microsoft&#65533; LifeCam
VX-7000 (045e:0723)
[10750.400000] uvcvideo: Failed to query (135) UVC control 1 (unit 0) :
-32 (exp. 26).
[10750.400000] uvcvideo: GET_CUR(probe)
[10750.400000] bmHint: 0x0001
[10750.400000] bFormatIndex: 1
[10750.400000] bFrameIndex: 2
[10750.400000] dwFrameInterval: 1333333
[10750.400000] wKeyFrameRate: 0
[10750.400000] wPFrameRate: 0
[10750.400000] wCompQuality: 0
[10750.400000] wCompWindowSize: 0
[10750.400000] wDelay: 0
[10750.400000] dwMaxVideoFrameSize: 3840000
[10750.400000] dwMaxPayloadTransferSize: 1020
[10750.400000] dwClockFrequency: 0
[10750.400000] bmFramingInfo: 0x00
[10750.400000] bPreferedVersion: 0
[10750.400000] bMinVersion: 0
[10750.400000] bMaxVersion: 0
[10750.408000] usbcore: registered new interface driver uvcvideo
[10750.408000] USB Video Class driver (v0.1.0)
[10757.844000] uvcvideo: GET_MIN(probe)
[10757.844000] bmHint: 0x0001
[10757.844000] bFormatIndex: 1
[10757.844000] bFrameIndex: 2
[10757.844000] dwFrameInterval: 1333333
[10757.844000] wKeyFrameRate: 0
[10757.844000] wPFrameRate: 0
[10757.844000] wCompQuality: 0
[10757.844000] wCompWindowSize: 0
[10757.844000] wDelay: 0
[10757.844000] dwMaxVideoFrameSize: 3840000
[10757.844000] dwMaxPayloadTransferSize: 1020
[10757.844000] dwClockFrequency: 538546
[10757.844000] bmFramingInfo: 0x01
[10757.844000] bPreferedVersion: 0
[10757.844000] bMinVersion: 0
[10757.844000] bMaxVersion: 0
[10757.844000] uvcvideo: GET_MAX(probe)
[10757.844000] bmHint: 0x0001
[10757.844000] bFormatIndex: 1
[10757.844000] bFrameIndex: 2
[10757.844000] dwFrameInterval: 1333333
[10757.844000] wKeyFrameRate: 0
[10757.844000] wPFrameRate: 0
[10757.844000] wCompQuality: 0
[10757.844000] wCompWindowSize: 0
[10757.844000] wDelay: 0
[10757.844000] dwMaxVideoFrameSize: 3840000
[10757.844000] dwMaxPayloadTransferSize: 1020
[10757.844000] dwClockFrequency: 0
[10757.844000] bmFramingInfo: 0xfc
[10757.844000] bPreferedVersion: 53
[10757.844000] bMinVersion: 198
[10757.844000] bMaxVersion: 193
[10757.848000] uvcvideo: GET_CUR(probe)
[10757.848000] bmHint: 0x0001
[10757.848000] bFormatIndex: 1
[10757.848000] bFrameIndex: 2
[10757.848000] dwFrameInterval: 1333333
[10757.848000] wKeyFrameRate: 0
[10757.848000] wPFrameRate: 0
[10757.848000] wCompQuality: 0
[10757.848000] wCompWindowSize: 0
[10757.848000] wDelay: 0
[10757.848000] dwMaxVideoFrameSize: 3840000
[10757.848000] dwMaxPayloadTransferSize: 1020
[10757.848000] dwClockFrequency: 0
[10757.848000] bmFramingInfo: 0x00
[10757.848000] bPreferedVersion: 0
[10757.848000] bMinVersion: 0
[10757.848000] bMaxVersion: 0
[10758.896000] divide error: 0000 [#10]
[10758.896000] Modules linked in: uvcvideo usbvideo compat_ioctl32
binfmt_misc rfcomm l2cap vboxdrv xt_limit xt_tcpudp iptable_mangle
ipt_LOG ipt_MASQUERADE nf_nat ipt_TOS ipt_REJECT nf_conntrack_irc
nf_conntrack_ftp nf_conntrack_ipv4 xt_state nf_conntrack nfnetlink
iptable_filter ip_tables x_tables ppdev cpufreq_powersave cpufreq_stats
cpufreq_userspace cpufreq_ondemand cpufreq_conservative freq_table
tc1100_wmi pcc_acpi sony_acpi dev_acpi video battery container sbs
button i2c_ec dock ac asus_acpi backlight nls_iso8859_1 nls_cp437 vfat
fat ext3 jbd mbcache ipv6 fuse nvram lp snd_cmipci snd_opl3_lib
snd_usb_audio snd_usb_lib snd_via82xx videodev v4l1_compat snd_seq_dummy
snd_seq_oss snd_hwdep gameport snd_ac97_codec v4l2_common hci_usb
bluetooth ac97_bus snd_seq_midi snd_seq_midi_event parport_pc parport
rtc snd_pcm_oss snd_mixer_oss psmouse pcspkr snd_seq ves1820 snd_pcm
snd_timer snd_page_alloc snd_mpu401_uart snd_rawmidi snd_seq_device
via_agp agpgart i2c_viapro budget budget_core saa7146 ttpci_eeprom snd
dvb_core via_ircc irda serio_raw crc_ccitt i2c_core soundcore shpchp
pci_hotplug af_packet tsdev evdev reiserfs ide_cd cdrom ide_disk generic
usb_storage libusual via82cxxx sg sd_mod ata_generic via_rhine mii
ehci_hcd uhci_hcd usbcore sata_via libata scsi_mod raid10 raid456 xor
raid1 raid0 multipath linear md_mod thermal processor fan dm_mod fbcon
tileblit font bitblit softcursor vesafb capability commoncap
[10758.896000] CPU: 0
[10758.896000] EIP: 0060:[&lt;e0d6b204&gt;] Not tainted VLI
[10758.896000] EFLAGS: 00010256 (2.6.20-16-386 #2)
[10758.896000] EIP is at get_v4l_control+0xa4/0xf0 [v4l1_compat]
[10758.896000] eax: 00000000 ebx: 800e7606 ecx: 00000000 edx: 00000000
[10758.896000] esi: ddebe720 edi: ccf43ec8 ebp: d7078000 esp: ccf43974
[10758.896000] ds: 007b es: 007b ss: 0068
[10758.896000] Process kopete (pid: 29569, ti=ccf42000 task=d4cb3590
task.ti=ccf42000)
[10758.896000] Stack: e0d6bbb9 e1156b00 e1156b00 10000000 ccf43bd8
ddebe720 cc9769f0 d38a3580
[10758.896000] 00000000 00000001 00000640 000004b0 47504a4d 00000001
00000000 003a9800
[10758.896000] 00000008 00000000 00000000 00000000 00000000 00000000
00000000 00000000
[10758.896000] Call Trace:
[10758.896000] [&lt;e0d6bbb9&gt;] v4l_compat_translate_ioctl+0x969/0x2184
[v4l1_compat]
[10758.896000] [&lt;e1156b00&gt;] uvc_v4l2_do_ioctl+0x0/0xfe0 [uvcvideo]
[10758.896000] [&lt;e1156b00&gt;] uvc_v4l2_do_ioctl+0x0/0xfe0 [uvcvideo]
[10758.896000] [&lt;e0a03fe5&gt;] search_for_position_by_key+0x145/0x370
[reiserfs]
[10758.896000] [&lt;c01818a3&gt;] __find_get_block_slow+0xa3/0x120
[10758.896000] [&lt;c0246204&gt;] ide_map_sg+0x34/0x90
[10758.896000] [&lt;c024e6e2&gt;] ide_build_sglist+0x22/0xd0
[10758.896000] [&lt;e0892839&gt;] uhci_giveback_urb+0x79/0x180 [uhci_hcd]
[10758.896000] [&lt;e09edd18&gt;] make_cpu_key+0x48/0x60 [reiserfs]
[10758.896000] [&lt;e0a02a60&gt;] pathrelse+0x20/0x30 [reiserfs]
[10758.896000] [&lt;e09ee683&gt;] _get_block_create_0+0x603/0x680 [reiserfs]
[10758.896000] [&lt;c0246204&gt;] ide_map_sg+0x34/0x90
[10758.896000] [&lt;c024e6e2&gt;] ide_build_sglist+0x22/0xd0
[10758.896000] [&lt;c01c81ad&gt;] elv_dispatch_sort+0x2d/0x100
[10758.896000] [&lt;c024e7c2&gt;] ide_build_dmatable+0x32/0x170
[10758.896000] [&lt;c01d93d8&gt;] delay_tsc+0x18/0x30
[10758.896000] [&lt;c01d9436&gt;] __delay+0x6/0x10
[10758.896000] [&lt;c0246a02&gt;] ide_do_request+0x532/0x9d0
[10758.896000] [&lt;c01d2626&gt;] cfq_insert_request+0x3b6/0x500
[10758.896000] [&lt;c01c720c&gt;] elv_set_request+0x1c/0x40
[10758.896000] [&lt;c01c9b27&gt;] generic_make_request+0xc7/0x240
[10758.896000] [&lt;c0174a78&gt;] d_splice_alias+0x38/0xf0
[10758.896000] [&lt;c01cc220&gt;] submit_bio+0x40/0xc0
[10758.896000] [&lt;c0173878&gt;] __d_lookup+0x98/0xe0
[10758.896000] [&lt;c0173e65&gt;] dput+0xb5/0x120
[10758.896000] [&lt;c0169d85&gt;] do_lookup+0x65/0x190
[10758.896000] [&lt;c0173e65&gt;] dput+0xb5/0x120
[10758.896000] [&lt;c016bdea&gt;] __link_path_walk+0x8ea/0xcc0
[10758.896000] [&lt;e1156fb2&gt;] uvc_v4l2_do_ioctl+0x4b2/0xfe0 [uvcvideo]
[10758.896000] [&lt;e1156b00&gt;] uvc_v4l2_do_ioctl+0x0/0xfe0 [uvcvideo]
[10758.896000] [&lt;c01186f6&gt;] __cond_resched+0x16/0x40
[10758.896000] [&lt;c02da83a&gt;] cond_resched+0x2a/0x40
[10758.896000] [&lt;e0d9fb71&gt;] video_usercopy+0xc1/0x210 [videodev]
[10758.896000] [&lt;c015245a&gt;] __handle_mm_fault+0x23a/0x990
[10758.896000] [&lt;c01616f0&gt;] do_filp_open+0x50/0x60
[10758.896000] [&lt;e11564e4&gt;] uvc_v4l2_ioctl+0x44/0x60 [uvcvideo]
[10758.896000] [&lt;e1156b00&gt;] uvc_v4l2_do_ioctl+0x0/0xfe0 [uvcvideo]
[10758.896000] [&lt;e11564a0&gt;] uvc_v4l2_ioctl+0x0/0x60 [uvcvideo]
[10758.896000] [&lt;c016e399&gt;] do_ioctl+0x69/0x70
[10758.896000] [&lt;c016e3fc&gt;] vfs_ioctl+0x5c/0x270
[10758.896000] [&lt;c016e682&gt;] sys_ioctl+0x72/0x90
[10758.896000] [&lt;c0102fc0&gt;] sysenter_past_esp+0x69/0xa9
[10758.896000] =======================
[10758.896000] Code: 34 8b 5c 24 54 8b 74 24 58 29 d0 8b 7c 24 5c 83 c4
60 29 d1 89 c2 c1 e2 10 29 c2 89 c8 c1 e8 1f 01 c8 d1 f8 01 c2 89 d0 c1
fa 1f &lt;f7&gt; f9 c3 8b 35 00 e8 d6 e0 85 f6 74 88 89 44 24 04 c7 04 24 a4
[10758.896000] EIP: [&lt;e0d6b204&gt;] get_v4l_control+0xa4/0xf0 [v4l1_compat]
SS:ESP 0068:ccf43974
[10758.896000]

Timo H.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071221/4cdb0c5b/attachment.html">https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071221/4cdb0c5b/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002661.html">[Linux-uvc-devel] patche on a quickcam fusion
</A></li>
	<LI>Next message: <A HREF="002643.html">[Linux-uvc-devel] Divide error with MS vx-7000
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2641">[ date ]</a>
              <a href="thread.html#2641">[ thread ]</a>
              <a href="subject.html#2641">[ subject ]</a>
              <a href="author.html#2641">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
