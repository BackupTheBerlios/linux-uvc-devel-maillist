From marcel at datkan.net  Fri Aug  1 00:17:36 2008
From: marcel at datkan.net (Marcel van Beurden)
Date: Fri, 01 Aug 2008 00:17:36 +0200
Subject: [Linux-uvc-devel] Logitech Quickcam S5500 problems
In-Reply-To: <200807312352.40185.laurent.pinchart@skynet.be>
References: <488F897C.5030305@datkan.net>
	<200807302235.26875.laurent.pinchart@skynet.be>
	<48923242.1090200@datkan.net>
	<200807312352.40185.laurent.pinchart@skynet.be>
Message-ID: <48923A00.4080703@datkan.net>

Laurent Pinchart wrote:
> Nooooooooo :-) I haven't written a single line of luvcview's code (at least 
> that I'm aware of). I don't know why Michel Xhaard added my name to the 
> copyright statement.

Aaah, Michel is a funny guy ;-)
Since your name was in the title bar I assumed you wrote it. Sorry about that.

> I have no knowledge of luvcview's code, sorry.

That's understandable then.

I was just trying to repeatly start/stop luvcview and the aMSN cam window. 
Could it be that an applications like these do anything so that the driver 
is not properly initialized or not properly closed? I'm a bit clueless on 
who (app/driver/usb/firmware) is responsible for what and how the 
interaction is...

Regards,
Marcel






From laurent.pinchart at skynet.be  Fri Aug  1 00:18:37 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 1 Aug 2008 00:18:37 +0200
Subject: [Linux-uvc-devel] Fujifilm FinePix S5500 supported
In-Reply-To: <1b51b6f80807311422n13f40f5dh9275104ff5d2e785@mail.gmail.com>
References: <1b51b6f80807311422n13f40f5dh9275104ff5d2e785@mail.gmail.com>
Message-ID: <200808010018.38073.laurent.pinchart@skynet.be>

Hi Niels,

On Thursday 31 July 2008, Niels de Vos wrote:
> Hello UVC-People ;)
>
> just a short report to tell you that the Fujifilm FinePix S5500 works
> out-of-the-box with r235 (only version tested).

Thanks for the report. I've updated the supported devices list on the website.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Aug  1 00:25:44 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 1 Aug 2008 00:25:44 +0200
Subject: [Linux-uvc-devel] Fujifilm FinePix S5500 supported
In-Reply-To: <1b51b6f80807311422n13f40f5dh9275104ff5d2e785@mail.gmail.com>
References: <1b51b6f80807311422n13f40f5dh9275104ff5d2e785@mail.gmail.com>
Message-ID: <200808010025.44526.laurent.pinchart@skynet.be>

Hi Niels,

On Thursday 31 July 2008, Niels de Vos wrote:
> Hello UVC-People ;)
>
> just a short report to tell you that the Fujifilm FinePix S5500 works
> out-of-the-box with r235 (only version tested).
>
> Thanks for all your work,
> Niels
>
>
> PS: Here is the output of lsusb (running CentOS-5, no newer version of
> lsusb available):
>
> # lsusb --version
> lsusb (usbutils) 0.71

Could you please upgrade to 0.72 or newer (0.73+ preferred) and repost the 
descriptors ?

Thanks.

Best regards,

Laurent Pinchart


From jasny at vidsoft.de  Fri Aug  1 00:37:21 2008
From: jasny at vidsoft.de (Gregor Jasny)
Date: Fri, 1 Aug 2008 00:37:21 +0200
Subject: [Linux-uvc-devel] Logitech Quickcam S5500 problems
In-Reply-To: <48923242.1090200@datkan.net>
References: <488F897C.5030305@datkan.net>
	<200807302235.26875.laurent.pinchart@skynet.be>
	<48923242.1090200@datkan.net>
Message-ID: <20080731223721.GE21280@vidsoft.de>

Hi,

On Thu, Jul 31, 2008 at 11:44:34PM +0200, Marcel van Beurden wrote:
> Since you also wrote luvcview, do you know what is going on there? When I
> start it I gert a black screen, and I see no controls, but I can use them.
> When I close luvcview, the console shows "Stop asked". Then it hangs.
> Ctrl-C does not work. Only killing the process or unlugging the cam works.
> When I unplug it, it says:
> 
> Unable to dequeue buffer (5).
> Error grabbing
>   Clean Up done Quit
> 
> Does that give any hits?

Sounds familiar. My Microsoft cam does exactly the same (hanging at
dequeue) when accessed from two threads. Maybe it's just bad timing?
Only replugging helps to bring it back into life.

Hopefully I find some time during weekend to debug/trace the issue as Laurent
suggested.

Cheers,
Gregor


From comp.ogz at gmail.com  Fri Aug  1 10:33:45 2008
From: comp.ogz at gmail.com (Oguz Yarimtepe)
Date: Fri, 1 Aug 2008 11:33:45 +0300
Subject: [Linux-uvc-devel] support request for 5986:0240 Bison webcam
Message-ID: <20831c740808010133o565efd70w8ee86b559050b129@mail.gmail.com>

Hi,

I am trying to run my webcam under Ubuntu Hardy.

# lsusb
Bus 007 Device 006: ID 5986:0240 Bison

I checked the ID but it is not defined yet. Though i tried the driver
and installed it. Didn't get any output from xawtv. luvcview gave
errors:

$ luvcview

luvcview version 0.2.0
Video driver: x11
A window manager is available
video /dev/video0
Unable to set format: 22.
Init v4L2 failed !! exit fatal

I have another webcam at my laptop also.

So i want to ask whether my webcam is supported with the current
version, if not can you add this support.
If there is an error about my test will be happy if you give some help.

Thanx.

-- 
O?uz Yar?mtepe
www.loopbacking.info

From laurent.pinchart at skynet.be  Fri Aug  1 10:36:30 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 1 Aug 2008 10:36:30 +0200
Subject: [Linux-uvc-devel] support request for 5986:0240 Bison webcam
In-Reply-To: <20831c740808010133o565efd70w8ee86b559050b129@mail.gmail.com>
References: <20831c740808010133o565efd70w8ee86b559050b129@mail.gmail.com>
Message-ID: <200808011036.31158.laurent.pinchart@skynet.be>

Hi,

On Friday 01 August 2008, Oguz Yarimtepe wrote:
> Hi,
> 
> I am trying to run my webcam under Ubuntu Hardy.
> 
> # lsusb
> Bus 007 Device 006: ID 5986:0240 Bison
> 
> I checked the ID but it is not defined yet. Though i tried the driver
> and installed it. Didn't get any output from xawtv. luvcview gave
> errors:
> 
> $ luvcview
> 
> luvcview version 0.2.0
> Video driver: x11
> A window manager is available
> video /dev/video0
> Unable to set format: 22.
> Init v4L2 failed !! exit fatal

Please try

luvcview -f yuv

> I have another webcam at my laptop also.
> 
> So i want to ask whether my webcam is supported with the current
> version, if not can you add this support.
> If there is an error about my test will be happy if you give some help.

Could you please post the output of

lsusb -v -d 5986:0240

using usbutils 0.72 or newer (0.73+ preferred) ?

Thanks.

Best regards,

Laurent Pinchart


From comp.ogz at gmail.com  Fri Aug  1 11:53:52 2008
From: comp.ogz at gmail.com (Oguz Yarimtepe)
Date: Fri, 1 Aug 2008 12:53:52 +0300
Subject: [Linux-uvc-devel] support request for 5986:0240 Bison webcam
In-Reply-To: <200808011036.31158.laurent.pinchart@skynet.be>
References: <20831c740808010133o565efd70w8ee86b559050b129@mail.gmail.com>
	<200808011036.31158.laurent.pinchart@skynet.be>
Message-ID: <20831c740808010253q30e85540x706fcbb3c1084f01@mail.gmail.com>

On Fri, Aug 1, 2008 at 11:36 AM, Laurent Pinchart
<laurent.pinchart at skynet.be> wrote:
> Hi,
>
> On Friday 01 August 2008, Oguz Yarimtepe wrote:
>> Hi,
>>
>> I am trying to run my webcam under Ubuntu Hardy.
>>
>> # lsusb
>> Bus 007 Device 006: ID 5986:0240 Bison
>>
>> I checked the ID but it is not defined yet. Though i tried the driver
>> and installed it. Didn't get any output from xawtv. luvcview gave
>> errors:
>>
>> $ luvcview
>>
>> luvcview version 0.2.0
>> Video driver: x11
>> A window manager is available
>> video /dev/video0
>> Unable to set format: 22.
>> Init v4L2 failed !! exit fatal
>
> Please try
>
> luvcview -f yuv

It opeened the window. But no video.


>
>> I have another webcam at my laptop also.
>>
>> So i want to ask whether my webcam is supported with the current
>> version, if not can you add this support.
>> If there is an error about my test will be happy if you give some help.
>
> Could you please post the output of
>
> lsusb -v -d 5986:0240
>
> using usbutils 0.72 or newer (0.73+ preferred) ?


# apt-show-versions -a | grep usbutils
usbutils        0.73-5ubuntu2   install ok installed
usbutils        0.73-5ubuntu2   hardy



Bus 007 Device 010: ID 5986:0240 Bison
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x5986 Bison
  idProduct          0x0240
  bcdDevice            0.01
  iManufacturer           3 Bison Electronics Inc.
  iProduct                1 BisonCam, NB Pro
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          477
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               1 BisonCam, NB Pro
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              1 BisonCam, NB Pro
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           85
        dwClockFrequency       30.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000000
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               6
        iTerminal               0
      VideoControl Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      4 (SELECTOR_UNIT)
        bUnitID                 4
        bNrInPins               1
        baSource( 0)            1
        iSelector               0
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 5
        bSourceID               4
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000043f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          Power Line Frequency
        iProcessing             0
        bmVideoStandards     0x1b
          None
          NTSC - 525/60
          SECAM - 625/50
          NTSC - 625/50
      VideoControl Interface Descriptor:
        bLength                27
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 6
        guidExtensionCode         {564c97a7-7ea7-904b-8cbf-1c71ec303000}
        bNumControl            16
        bNrPins                 1
        baSourceID( 0)          5
        bControlSize            2
        bmControls( 0)       0xff
        bmControls( 1)       0xff
        iExtension              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              15
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                        1
        wTotalLength                      291
        bEndPointAddress                  129
        bmInfo                              0
        bTerminalLink                       3
        bStillCaptureMethod                 2
        bTriggerSupport                     1
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                6
        guidFormat
{59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x01
          Still image supported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                 18432000
        dwMaxBitRate                 18432000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x01
          Still image supported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                  4608000
        dwMaxBitRate                  4608000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x01
          Still image supported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                  1152000
        dwMaxBitRate                  1152000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x01
          Still image supported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                  6082560
        dwMaxBitRate                  6082560
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x01
          Still image supported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                  1520640
        dwMaxBitRate                  1520640
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x01
          Still image supported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                 23592960
        dwMaxBitRate                 23592960
        dwMaxVideoFrameBufferSize     2621440
        dwDefaultFrameInterval        1428571
        bFrameIntervalType                  1
        dwFrameInterval( 0)           1428571
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               6
        wWidth( 0)                        640
        wHeight( 0)                       480
        wWidth( 1)                        320
        wHeight( 1)                       240
        wWidth( 2)                        160
        wHeight( 2)                       120
        wWidth( 3)                        352
        wHeight( 3)                       288
        wWidth( 4)                        176
        wHeight( 4)                       144
        wWidth( 5)                       1280
        wHeight( 5)                      1024
        bNumCompressionPatterns             6
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     0 (Unspecified)
        bTransferCharacteristics            0 (Unspecified)
        bMatrixCoefficients                 0 (Unspecified)
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 1024 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 1024 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 1024 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)

lsmod

Module                  Size  Used by
cdc_acm                17056  0
uvcvideo               58116  0
gspca                 643920  0
m560x                  80800  0
compat_ioctl32          2304  1 uvcvideo
af_packet              23812  4
i915                   32512  3
drm                    82452  4 i915
binfmt_misc            12808  1
rfcomm                 41744  2
l2cap                  25728  13 rfcomm
bluetooth              61156  4 rfcomm,l2cap
ipv6                  267780  16
ppdev                  10372  0
container               5632  0
sbs                    15112  0
sbshc                   7680  1 sbs
dock                   11280  0
iptable_filter          3840  0
ip_tables              14820  1 iptable_filter
x_tables               16132  1 ip_tables
cpufreq_userspace       5284  0
cpufreq_stats           7104  0
cpufreq_powersave       2688  1
cpufreq_ondemand        9740  0
cpufreq_conservative     8712  0
acpi_cpufreq           10796  1
freq_table              5536  3 cpufreq_stats,cpufreq_ondemand,acpi_cpufreq
uinput                 10240  0
sbp2                   24072  0
parport_pc             36260  0
lp                     12324  0
parport                37832  3 ppdev,parport_pc,lp
ide_generic             2176  0 [permanent]
ide_disk               17536  0
ide_cd                 32544  0
ide_core              113996  3 ide_generic,ide_disk,ide_cd
joydev                 13120  0
arc4                    2944  2
ecb                     4480  2
blkcipher               8324  1 ecb
stk11xx               104324  0
snd_hda_intel         344728  5
videodev               29440  4 uvcvideo,gspca,m560x,stk11xx
v4l2_common            18304  2 uvcvideo,videodev
v4l1_compat            15492  2 uvcvideo,videodev
iwl4965               108916  0
iwlwifi_mac80211      219108  1 iwl4965
snd_pcm_oss            42144  0
snd_mixer_oss          17920  1 snd_pcm_oss
serio_raw               7940  0
evdev                  13056  8
psmouse                40336  0
snd_pcm                78596  3 snd_hda_intel,snd_pcm_oss
sr_mod                 17956  0
cdrom                  37408  2 ide_cd,sr_mod
cfg80211               15112  1 iwlwifi_mac80211
snd_page_alloc         11400  2 snd_hda_intel,snd_pcm
snd_hwdep              10500  1 snd_hda_intel
led_class               6020  1 iwl4965
snd_seq_dummy           4868  0
snd_seq_oss            35584  0
snd_seq_midi            9376  0
snd_rawmidi            25760  1 snd_seq_midi
snd_seq_midi_event      8320  2 snd_seq_oss,snd_seq_midi
sdhci                  19076  0
mmc_core               51460  1 sdhci
snd_seq                54224  6
snd_seq_dummy,snd_seq_oss,snd_seq_midi,snd_seq_midi_event
snd_timer              24836  2 snd_pcm,snd_seq
snd_seq_device          9612  5
snd_seq_dummy,snd_seq_oss,snd_seq_midi,snd_rawmidi,snd_seq
snd                    56996  20
snd_hda_intel,snd_pcm_oss,snd_mixer_oss,snd_pcm,snd_hwdep,snd_seq_dummy,snd_seq_oss,snd_rawmidi,snd_seq,snd_timer,snd_seq_device
ata_generic             8324  0
video                  19856  0
output                  4736  1 video
intel_agp              25492  1
pcspkr                  4224  0
soundcore               8800  1 snd
iTCO_wdt               13092  0
iTCO_vendor_support     4868  1 iTCO_wdt
battery                14212  0
agpgart                34760  3 drm,intel_agp
ac                      6916  0
shpchp                 34452  0
pci_hotplug            30880  1 shpchp
button                  9232  0
ext3                  136712  1
jbd                    48404  1 ext3
mbcache                 9600  1 ext3
sg                     36880  0
sd_mod                 30720  3
usbhid                 31872  0
hid                    38784  1 usbhid
ata_piix               19588  0
pata_acpi               8320  0
ahci                   28420  2
libata                159344  4 ata_generic,ata_piix,pata_acpi,ahci
scsi_mod              151436  5 sbp2,sr_mod,sg,sd_mod,libata
ohci1394               33584  0
ieee1394               93752  2 sbp2,ohci1394
ehci_hcd               37900  0
uhci_hcd               27024  0
usbcore               146028  9
cdc_acm,uvcvideo,gspca,m560x,stk11xx,usbhid,ehci_hcd,uhci_hcd
thermal                16796  3
processor              36872  4 acpi_cpufreq,thermal
fan                     5636  0
fbcon                  42912  0
tileblit                3456  1 fbcon
font                    9472  1 fbcon
bitblit                 6784  1 fbcon
softcursor              3072  1 bitblit
fuse                   50708  3


>
> Thanks.
>
> Best regards,
>
> Laurent Pinchart
>


Thanx for quick reply.

-- 
O?uz Yar?mtepe
www.loopbacking.info

From carmelo.iannello at gmail.com  Fri Aug  1 19:52:49 2008
From: carmelo.iannello at gmail.com (Carmelo Iannello)
Date: Fri, 01 Aug 2008 19:52:49 +0200
Subject: [Linux-uvc-devel] Problems with Hercules  Dualpix
Message-ID: <48934D71.1010306@gmail.com>

Hi all,

I recently bought a "Hercules Dualpix Chat and Show" webcam, after
seeing it in the HCL of uvcvideo module.
I hoped for it to work without any tweaking, but no luck.
So I tried googling and trying to apply the suggested fixes but
it didn't help.
On Debian I installed the module with: module-assistant a-i linux-uvc
revision 238, but I also tried with rv 239 from svn.

At first, it complained giving this output in dmesg:

  Linux video capture interface: v2.00
  usbcore: registered new interface driver uvcvideo
  USB Video Class driver (v0.1.0)
  usb 4-5: new high speed USB device using ehci_hcd and address 5
  usb 4-5: configuration #1 chosen from 1 choice
  uvcvideo: Found UVC 1.00 device Hercules Dualpix Chat and Show Webcam
(06f8:3007)
  uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -32 (exp. 26).
  uvcvideo: Failed to query (129) UVC control 1 (unit 0) : -32 (exp. 26).
  uvcvideo: Failed to initialize the device (-5).
  5:3:1: cannot get freq at ep 0x84
  usb 4-5: New USB device found, idVendor=06f8, idProduct=3007
  usb 4-5: New USB device strings: Mfr=1, Product=2, SerialNumber=0
  usb 4-5: Product: Hercules Dualpix Chat and Show Webcam
  usb 4-5: Manufacturer: Guillemot Corporation

Then I put in /etc/modprobe.d/uvcvideo:
install uvcvideo /sbin/modprobe snd_usb_audio; /sbin/modprobe
--ignore-install uvcvideo

to postpone uvcvideo's loading to the usb audio's one,
and also tried do to the same thing by hand, using insmod.

The result is that the error msg about query 129 disappeared,
the one about query 135 is still there, the module creates the
/dev/video0 device, but the webcam doesn't work.
Strangely, the webcam is not listed in lsusb's output.

Any suggestion?
Thanks,
Carmelo

PS
Current dmesg output when I unplug and plug the camera:

  usb 4-5: USB disconnect, address 6
  usb 4-5: new high speed USB device using ehci_hcd and address 8
  usb 4-5: configuration #1 chosen from 1 choice
  uvcvideo: Found UVC 1.00 device Hercules Dualpix Chat and Show Webcam
(06f8:3007)
  uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -32 (exp. 26).
  input: Hercules Dualpix Chat and Show W as /class/input/input12
  8:3:1: cannot get freq at ep 0x84
  usb 4-5: New USB device found, idVendor=06f8, idProduct=3007
  usb 4-5: New USB device strings: Mfr=1, Product=2, SerialNumber=0
  usb 4-5: Product: Hercules Dualpix Chat and Show Webcam
  usb 4-5: Manufacturer: Guillemot Corporation







From nixpanic at users.sourceforge.net  Fri Aug  1 21:59:08 2008
From: nixpanic at users.sourceforge.net (Niels de Vos)
Date: Fri, 1 Aug 2008 21:59:08 +0200
Subject: [Linux-uvc-devel] Fujifilm FinePix S5500 supported
In-Reply-To: <200808010025.44526.laurent.pinchart@skynet.be>
References: <1b51b6f80807311422n13f40f5dh9275104ff5d2e785@mail.gmail.com>
	<200808010025.44526.laurent.pinchart@skynet.be>
Message-ID: <1b51b6f80808011259v25d8aec5l272dce4b66509c70@mail.gmail.com>

On Fri, Aug 1, 2008 at 12:25 AM, Laurent Pinchart
<laurent.pinchart at skynet.be> wrote:
> Hi Niels,
>
> On Thursday 31 July 2008, Niels de Vos wrote:
>> Hello UVC-People ;)
>>
>> just a short report to tell you that the Fujifilm FinePix S5500 works
>> out-of-the-box with r235 (only version tested).
>>
>> Thanks for all your work,
>> Niels
>>
>>
>> PS: Here is the output of lsusb (running CentOS-5, no newer version of
>> lsusb available):
>>
>> # lsusb --version
>> lsusb (usbutils) 0.71
>
> Could you please upgrade to 0.72 or newer (0.73+ preferred) and repost the
> descriptors ?

Yes, no problem, attached. Got myself a copy of the LiveCD of Fedora
9. F9 contains lsusb 0.73.

Cheers,
Niels
-------------- next part --------------
A non-text attachment was scrubbed...
Name: finepix-s5500.log
Type: text/x-log
Size: 6562 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080801/cd218c45/attachment.bin>

From laurent.pinchart at skynet.be  Fri Aug  1 22:01:37 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 1 Aug 2008 22:01:37 +0200
Subject: [Linux-uvc-devel] support request for 5986:0240 Bison webcam
In-Reply-To: <20831c740808010253q30e85540x706fcbb3c1084f01@mail.gmail.com>
References: <20831c740808010133o565efd70w8ee86b559050b129@mail.gmail.com>
	<200808011036.31158.laurent.pinchart@skynet.be>
	<20831c740808010253q30e85540x706fcbb3c1084f01@mail.gmail.com>
Message-ID: <200808012201.37961.laurent.pinchart@skynet.be>

Hi,

On Friday 01 August 2008, Oguz Yarimtepe wrote:
> On Fri, Aug 1, 2008 at 11:36 AM, Laurent Pinchart
>
> <laurent.pinchart at skynet.be> wrote:
> > Hi,
> >
> > On Friday 01 August 2008, Oguz Yarimtepe wrote:
> >> Hi,
> >>
> >> I am trying to run my webcam under Ubuntu Hardy.
> >>
> >> # lsusb
> >> Bus 007 Device 006: ID 5986:0240 Bison
> >>
> >> I checked the ID but it is not defined yet. Though i tried the driver
> >> and installed it. Didn't get any output from xawtv. luvcview gave
> >> errors:
> >>
> >> $ luvcview
> >>
> >> luvcview version 0.2.0
> >> Video driver: x11
> >> A window manager is available
> >> video /dev/video0
> >> Unable to set format: 22.
> >> Init v4L2 failed !! exit fatal
> >
> > Please try
> >
> > luvcview -f yuv
>
> It opeened the window. But no video.

Please set the quirks parameter to 2 when loading the driver

modprobe uvcvideo quirks=2

If the driver is loaded automatically by your system, unload and reload it 
manually.

Try luvcview -f yuv again and report any message printed by the uvcvideo 
driver in the kernel log (dmesg) if it still fails.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Aug  1 22:24:40 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 1 Aug 2008 22:24:40 +0200
Subject: [Linux-uvc-devel] Problems with Hercules  Dualpix
In-Reply-To: <48934D71.1010306@gmail.com>
References: <48934D71.1010306@gmail.com>
Message-ID: <200808012224.40871.laurent.pinchart@skynet.be>

Hi Carmelo,

On Friday 01 August 2008, Carmelo Iannello wrote:
> Hi all,
>
> I recently bought a "Hercules Dualpix Chat and Show" webcam, after
> seeing it in the HCL of uvcvideo module.
> I hoped for it to work without any tweaking, but no luck.
> So I tried googling and trying to apply the suggested fixes but
> it didn't help.
> On Debian I installed the module with: module-assistant a-i linux-uvc
> revision 238, but I also tried with rv 239 from svn.
>
> At first, it complained giving this output in dmesg:
>
>   Linux video capture interface: v2.00
>   usbcore: registered new interface driver uvcvideo
>   USB Video Class driver (v0.1.0)
>   usb 4-5: new high speed USB device using ehci_hcd and address 5
>   usb 4-5: configuration #1 chosen from 1 choice
>   uvcvideo: Found UVC 1.00 device Hercules Dualpix Chat and Show Webcam
> (06f8:3007)
>   uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -32 (exp. 26).
>   uvcvideo: Failed to query (129) UVC control 1 (unit 0) : -32 (exp. 26).
>   uvcvideo: Failed to initialize the device (-5).
>   5:3:1: cannot get freq at ep 0x84
>   usb 4-5: New USB device found, idVendor=06f8, idProduct=3007
>   usb 4-5: New USB device strings: Mfr=1, Product=2, SerialNumber=0
>   usb 4-5: Product: Hercules Dualpix Chat and Show Webcam
>   usb 4-5: Manufacturer: Guillemot Corporation
>
> Then I put in /etc/modprobe.d/uvcvideo:
> install uvcvideo /sbin/modprobe snd_usb_audio; /sbin/modprobe
> --ignore-install uvcvideo
>
> to postpone uvcvideo's loading to the usb audio's one,
> and also tried do to the same thing by hand, using insmod.
>
> The result is that the error msg about query 129 disappeared,
> the one about query 135 is still there, the module creates the
> /dev/video0 device, but the webcam doesn't work.
> Strangely, the webcam is not listed in lsusb's output.
>
> Any suggestion?
>
> Thanks,
> Carmelo
>
> PS
> Current dmesg output when I unplug and plug the camera:
>
>   usb 4-5: USB disconnect, address 6
>   usb 4-5: new high speed USB device using ehci_hcd and address 8
>   usb 4-5: configuration #1 chosen from 1 choice
>   uvcvideo: Found UVC 1.00 device Hercules Dualpix Chat and Show Webcam
> (06f8:3007)
>   uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -32 (exp. 26).
>   input: Hercules Dualpix Chat and Show W as /class/input/input12
>   8:3:1: cannot get freq at ep 0x84
>   usb 4-5: New USB device found, idVendor=06f8, idProduct=3007
>   usb 4-5: New USB device strings: Mfr=1, Product=2, SerialNumber=0
>   usb 4-5: Product: Hercules Dualpix Chat and Show Webcam
>   usb 4-5: Manufacturer: Guillemot Corporation

I'm not sure what goes wrong. Like many webcams, the Hercules Dualpix doesn't 
implement the mandatory GET_DEF request on the video probe control, which 
results in the 'Failed to query' error message. This should not be fatal as 
the driver works around it, but it might confuse the webcam. Edit uvc_video.c 
and replace the following code

        if ((ret = uvc_get_video_ctrl(video, probe, 1, GET_DEF)) < 0 &&
            (ret = uvc_get_video_ctrl(video, probe, 1, GET_CUR)) < 0)
                return ret;

by

        if ((ret = uvc_get_video_ctrl(video, probe, 1, GET_CUR) < 0)
               return ret;

If this doesn't help, I'm not sure what else I can do. The 'cannot get freq' 
message is printed by the usbaudio driver, so the problem seems to come from 
the webcam. lsusb failing to list the camera is another hint that something 
goes wrong at a low level. It could be a timing issue caused by subtle USB 
timing differences between the platform the product is tested with (Windows) 
and the platform you it them with. Nasty timing related bugs can surface when 
the webcam is plugged into a Linux box even if it runs flawlessly under 
Windows. Worse, your camera could work perfectly well on another Linux 
computer. Those kind of issues tend to come quite often with UVC webcams. 
Maybe the Hercules Dualpix uses a faulty USB chip (I would be interested in 
knowing the chip brand and model if you can manage to open the case without 
breaking anything).

You could also try not to load the usbaudio driver at all. Timing-related 
issues that lead to a camera crash can be caused by many things, and 
audio-related requests could crash a perfectly working video device.

Best regards,

Laurent Pinchart


From carmelo.iannello at gmail.com  Sat Aug  2 15:30:58 2008
From: carmelo.iannello at gmail.com (Carmelo Iannello)
Date: Sat, 02 Aug 2008 15:30:58 +0200
Subject: [Linux-uvc-devel] Problems with Hercules  Dualpix
In-Reply-To: <200808012224.40871.laurent.pinchart@skynet.be>
References: <48934D71.1010306@gmail.com>
	<200808012224.40871.laurent.pinchart@skynet.be>
Message-ID: <48946192.1070603@gmail.com>

Hi Laurent

Laurent Pinchart ha scritto:
>
> I'm not sure what goes wrong. Like many webcams, the Hercules Dualpix doesn't 
> implement the mandatory GET_DEF request on the video probe control, which 
> results in the 'Failed to query' error message. This should not be fatal as 
> the driver works around it, but it might confuse the webcam. 
>   

You're right: I can get the webcam working with luvcview with or without 
sending the
GET_DEF request, so the driver works around it, the only visible 
difference is the error
msg.
It also seems to work with 'motion', but no luck with other programs, 
like camorama, cheese,
camstream or skype.
skype doesn't even print any error msg, it crashes and that's it.
It keeps crashing until I unload uvcvideo, very annoying.

> You could also try not to load the usbaudio driver at all. Timing-related 
> issues that lead to a camera crash can be caused by many things, and 
> audio-related requests could crash a perfectly working video device.

No good news from this front.

> Maybe the Hercules Dualpix uses a faulty USB chip (I would be interested in 
> knowing the chip brand and model if you can manage to open the case without 
> breaking anything).
>   

I don't have such a tiny screwdriver now, but in the case I'll let you know.

Thank you for helping.
Bye Carmelo





From artem at makhutov.org  Sat Aug  2 21:13:08 2008
From: artem at makhutov.org (Artem Makhutov)
Date: Sat, 2 Aug 2008 21:13:08 +0200
Subject: [Linux-uvc-devel] Record audio with Philips SPC520NC webcam
Message-ID: <20080802191308.GD19605@moelleritberatung.de>

Hello List,

I have a Philips SPC520NC webcam, which works fine with UVC.
(Please add it to the supported devices list.)

The only problem I have is to record audio using the build in
microphone. (Under windows the microphone works well.)

I am using kernel 2.6.26 and the build in snd_usb_audio and uvcvideo modules.

After arround 5 seconds I am getting an "read error: I/O Error" message, and I
am getting an empty wav file (only the wav header is in there).

I have attached an lsusb -v output.

Any suggestion?

Thanks, Artem

artem at gandalf ~/wav $ arecord -D hw:1,0 -c 1 -f S16_LE -v test.wav
Recording WAVE 'test.wav' : Signed 16 bit Little Endian, Rate 8000 Hz, Mono
Hardware PCM card 1 'USB Video Camera' device 0 subdevice 0
Its setup is:
  stream       : CAPTURE
  access       : RW_INTERLEAVED
  format       : S16_LE
  subformat    : STD
  channels     : 1
  rate         : 8000
  exact rate   : 8000 (8000/1)
  msbits       : 16
  buffer_size  : 4000
  period_size  : 1000
  period_time  : 125000
  tstamp_mode  : NONE
  period_step  : 1
  avail_min    : 1000
  start_threshold  : 1
  stop_threshold   : 4000
  silence_threshold: 0
  silence_size : 0
  boundary     : 9007199254740992000
arecord: pcm_read:1348: read error: Eingabe-/Ausgabefehler

(arecord: pcm_read:1348: read error: I/O Error)
-------------- next part --------------
Bus 001 Device 005: ID 0471:0334 Philips 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x0471 Philips
  idProduct          0x0334 
  bcdDevice            0.00
  iManufacturer           0 
  iProduct                1 USB Video Camera
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          422
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower               98mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0 
      iFunction               1 USB Video Camera
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0 
      iInterface              1 USB Video Camera
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           77
        dwClockFrequency       48.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0 
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000000
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000157b
          Brightness
          Contrast
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Power Line Frequency
          White Balance Temperature, Auto
        iProcessing            64 
        bmVideoStandards     0x1a
          NTSC - 525/60
          SECAM - 625/50
          NTSC - 625/50
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 6
        guidExtensionCode         {d2090058-6fe7-2446-8512-76cdd8dda14e}
        bNumControl             2
        bNrPins                 1
        baSourceID( 0)          3
        bControlSize            1
        bmControls( 0)       0x03
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               6
        iTerminal               0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              16
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                        1
        wTotalLength                      157
        bEndPointAddress                  131
        bmInfo                              0
        bTerminalLink                       2
        bStillCaptureMethod                 1
        bTriggerSupport                     1
        bTriggerUsage                       0
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                2
        guidFormat                            {59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            54
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x01
          Still image supported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                1179648000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  7
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            499998
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)            999996
        dwFrameInterval( 5)           1333332
        dwFrameInterval( 6)           1999992
      VideoStreaming Interface Descriptor:
        bLength                            62
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x01
          Still image supported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                1179648000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         166666
        bFrameIntervalType                  9
        dwFrameInterval( 0)            166666
        dwFrameInterval( 1)            200000
        dwFrameInterval( 2)            333333
        dwFrameInterval( 3)            400000
        dwFrameInterval( 4)            499998
        dwFrameInterval( 5)            666666
        dwFrameInterval( 6)            999996
        dwFrameInterval( 7)           1333332
        dwFrameInterval( 8)           1999992
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 1024 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       2 Streaming
      bFunctionProtocol       0 
      iFunction               1 USB Video Camera
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0 
      iInterface              1 USB Video Camera
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           38
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0 
        iTerminal               0 
      AudioControl Interface Descriptor:
        bLength                 8
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 5
        bSourceID               3
        bControlSize            1
        bmaControls( 0)      0x43
          Mute
          Volume
          Automatic Gain
        iFeature                0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             4
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               5
        iTerminal               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           4
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                29
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            7 Discrete
        tSamFreq[ 0]         8000
        tSamFreq[ 1]        11025
        tSamFreq[ 2]        16000
        tSamFreq[ 3]        22050
        tSamFreq[ 4]        32000
        tSamFreq[ 5]        44100
        tSamFreq[ 6]        48000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x00
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)

From comp.ogz at gmail.com  Mon Aug  4 09:07:27 2008
From: comp.ogz at gmail.com (Oguz Yarimtepe)
Date: Mon, 4 Aug 2008 10:07:27 +0300
Subject: [Linux-uvc-devel] support request for 5986:0240 Bison webcam
In-Reply-To: <200808012201.37961.laurent.pinchart@skynet.be>
References: <20831c740808010133o565efd70w8ee86b559050b129@mail.gmail.com>
	<200808011036.31158.laurent.pinchart@skynet.be>
	<20831c740808010253q30e85540x706fcbb3c1084f01@mail.gmail.com>
	<200808012201.37961.laurent.pinchart@skynet.be>
Message-ID: <20831c740808040007u37ac00a5g3f1a973f1a558285@mail.gmail.com>

Hi,


> Please set the quirks parameter to 2 when loading the driver
>
> modprobe uvcvideo quirks=2
>
> If the driver is loaded automatically by your system, unload and reload it
> manually.
>
> Try luvcview -f yuv again and report any message printed by the uvcvideo
> driver in the kernel log (dmesg) if it still fails.

Did it. The first time i ran the luvcview i got a view but not clear
like a thermal view and then it frezed. Then tried again, this time i
dint get any view just a blank screen.

I didn't see any errors related at the dmesg. But some maybe
meaningful messages at syslog. I am attaching both of them. I tried
running couple of times.

I am not sure but maybe there may be a problem about using two webcams
at my system. One of them works with stk11xx module and a builtin on.
I am trying the bison one from usb. Maybe it is required the
video4linux module loaded also for this (if1) one also. Not sure. I
haven't dealed with video modules before.

>
> Best regards,
>

Thanx.
Best wishes.

> Laurent Pinchart
>



-- 
O?uz Yar?mtepe
www.loopbacking.info
-------------- next part --------------
A non-text attachment was scrubbed...
Name: messages
Type: application/octet-stream
Size: 62 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080804/6e1b9a96/attachment.obj>

From wsun013 at gmail.com  Mon Aug  4 13:09:56 2008
From: wsun013 at gmail.com (Wei-Tsun Sun)
Date: Mon, 4 Aug 2008 23:09:56 +1200
Subject: [Linux-uvc-devel] A little patch to make the driver work in the
	kernel 2.6.27-rc1
Message-ID: <20080804230956.6f1b8661@KNIGHT>

Hi all,

I just created a little patch for anyone who is running 2.6.27-rc1+ and having uvc device.

Best regards,


==================================================
Wei-Tsun Sun
Department of Electrical and Computer Engineering
University of Auckland, New Zealand
Private Bag 92019
38 Princess Street
Science Centre (Building 301, level 3, room 235)
Auckland
New Zealand
Phone: +64 9 3737599 ext. 87060
http://www.ece.auckland.ac.nz/~wsun013/
==================================================
-------------- next part --------------
A non-text attachment was scrubbed...
Name: uvc_patch-2.6.27-rc1.patch
Type: text/x-patch
Size: 992 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080804/28805f5e/attachment.bin>

From wsun013 at gmail.com  Mon Aug  4 13:11:18 2008
From: wsun013 at gmail.com (Wei-Tsun Sun)
Date: Mon, 4 Aug 2008 23:11:18 +1200
Subject: [Linux-uvc-devel] A little patch to make the driver work in the
 kernel 2.6.27-rc1 continued
Message-ID: <20080804231118.470ef242@KNIGHT>

Better to put them in text form:


diff -Naur trunk/uvc_driver.c trunk.new/uvc_driver.c
--- trunk/uvc_driver.c	2008-08-04 10:50:30.000000000 +0000
+++ trunk.new/uvc_driver.c	2008-08-04 11:02:57.000000000 +0000
@@ -1466,8 +1466,8 @@
 #else
 	vdev->parent = &dev->intf->dev;
 #endif
-	vdev->type = 0;
-	vdev->type2 = 0;
+//	vdev->type = 0;
+//	vdev->type2 = 0;
 	vdev->minor = -1;
 	vdev->fops = &uvc_fops;
 	vdev->release = video_device_release;
diff -Naur trunk/uvc_queue.c trunk.new/uvc_queue.c
--- trunk/uvc_queue.c	2008-08-04 10:50:30.000000000 +0000
+++ trunk.new/uvc_queue.c	2008-08-04 11:02:57.000000000 +0000
@@ -20,7 +20,7 @@
 #include <linux/vmalloc.h>
 #include <linux/wait.h>
 #include <asm/atomic.h>
-
+#include <linux/mm.h>
 #include "uvcvideo.h"
 
 /* ------------------------------------------------------------------------
@@ -98,6 +98,7 @@
 		unsigned int buflength)
 {
 	unsigned int bufsize = PAGE_ALIGN(buflength);
+//      unsigned int bufsize = buflength;
 	unsigned int i;
 	void *mem = NULL;
 	int ret;



==================================================
Wei-Tsun Sun
Department of Electrical and Computer Engineering
University of Auckland, New Zealand
Private Bag 92019
38 Princess Street
Science Centre (Building 301, level 3, room 235)
Auckland
New Zealand
Phone: +64 9 3737599 ext. 87060
http://www.ece.auckland.ac.nz/~wsun013/
==================================================


From comp.ogz at gmail.com  Mon Aug  4 15:09:58 2008
From: comp.ogz at gmail.com (Oguz Yarimtepe)
Date: Mon, 4 Aug 2008 16:09:58 +0300
Subject: [Linux-uvc-devel] support request for 5986:0240 Bison webcam
In-Reply-To: <200808012201.37961.laurent.pinchart@skynet.be>
References: <20831c740808010133o565efd70w8ee86b559050b129@mail.gmail.com>
	<200808011036.31158.laurent.pinchart@skynet.be>
	<20831c740808010253q30e85540x706fcbb3c1084f01@mail.gmail.com>
	<200808012201.37961.laurent.pinchart@skynet.be>
Message-ID: <20831c740808040609m77d116f3hf15668350f71346d@mail.gmail.com>

I have tested the driver with the same webcam but with another one and
it worked without quirks option. I removed the uvcvideo and reloaded
it. I got the error when i tried with the quirks option:

FATAL: Error inserting uvcvideo
(/lib/modules/2.6.24-19-generic/ubuntu/media/usbvideo/uvcvideo.ko):
Unknown symbol in module, or unknown parameter (see dmesg)

Then i removed the quirks part and it worked.

Seems my webcam chip had some problems.

Thank for help.

>
> Please set the quirks parameter to 2 when loading the driver
>
> modprobe uvcvideo quirks=2
>
> If the driver is loaded automatically by your system, unload and reload it
> manually.
>
> Try luvcview -f yuv again and report any message printed by the uvcvideo
> driver in the kernel log (dmesg) if it still fails.
>
> Best regards,
>
> Laurent Pinchart
>



-- 
O?uz Yar?mtepe
www.loopbacking.info

From laurent.pinchart at skynet.be  Mon Aug  4 21:08:18 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 4 Aug 2008 21:08:18 +0200
Subject: [Linux-uvc-devel] A little patch to make the driver work in the
	kernel 2.6.27-rc1 continued
In-Reply-To: <20080804231118.470ef242@KNIGHT>
References: <20080804231118.470ef242@KNIGHT>
Message-ID: <200808042108.18839.laurent.pinchart@skynet.be>

Hi,

On Monday 04 August 2008, Wei-Tsun Sun wrote:
> Better to put them in text form:
>
>
> diff -Naur trunk/uvc_driver.c trunk.new/uvc_driver.c
> --- trunk/uvc_driver.c	2008-08-04 10:50:30.000000000 +0000
> +++ trunk.new/uvc_driver.c	2008-08-04 11:02:57.000000000 +0000
> @@ -1466,8 +1466,8 @@
>  #else
>  	vdev->parent = &dev->intf->dev;
>  #endif
> -	vdev->type = 0;
> -	vdev->type2 = 0;
> +//	vdev->type = 0;
> +//	vdev->type2 = 0;
>  	vdev->minor = -1;
>  	vdev->fops = &uvc_fops;
>  	vdev->release = video_device_release;
> diff -Naur trunk/uvc_queue.c trunk.new/uvc_queue.c
> --- trunk/uvc_queue.c	2008-08-04 10:50:30.000000000 +0000
> +++ trunk.new/uvc_queue.c	2008-08-04 11:02:57.000000000 +0000
> @@ -20,7 +20,7 @@
>  #include <linux/vmalloc.h>
>  #include <linux/wait.h>
>  #include <asm/atomic.h>
> -
> +#include <linux/mm.h>
>  #include "uvcvideo.h"
>
>  /*
> ------------------------------------------------------------------------ @@
> -98,6 +98,7 @@
>  		unsigned int buflength)
>  {
>  	unsigned int bufsize = PAGE_ALIGN(buflength);
> +//      unsigned int bufsize = buflength;
>  	unsigned int i;
>  	void *mem = NULL;
>  	int ret;

Thanks for the patch. I've applied it to SVN in a slightly modified form to 
compile on older kernels too. Could you please test it ?

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Aug  4 22:03:55 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 4 Aug 2008 22:03:55 +0200
Subject: [Linux-uvc-devel] Problems with Hercules  Dualpix
In-Reply-To: <48946192.1070603@gmail.com>
References: <48934D71.1010306@gmail.com>
	<200808012224.40871.laurent.pinchart@skynet.be>
	<48946192.1070603@gmail.com>
Message-ID: <200808042203.56014.laurent.pinchart@skynet.be>

Hi Carmelo,

On Saturday 02 August 2008, Carmelo Iannello wrote:
> Laurent Pinchart ha scritto:
> > I'm not sure what goes wrong. Like many webcams, the Hercules Dualpix
> > doesn't implement the mandatory GET_DEF request on the video probe
> > control, which results in the 'Failed to query' error message. This
> > should not be fatal as the driver works around it, but it might confuse
> > the webcam.
>
> You're right: I can get the webcam working with luvcview with or without
> sending the GET_DEF request, so the driver works around it, the only visible
> difference is the error msg.

I didn't know it was working in luvcview. That's an important piece of 
information.

> It also seems to work with 'motion', but no luck with other programs,
> like camorama, cheese, camstream or skype.

camorama and camstream don't support v4l2 so they won't work with the uvcvideo 
driver.

cheese uses gstreamer, which in theory should work. Make sure you use a recent 
version, as various bugs which made gstreamer not compatible with uvcvideo 
should have been fixed.

As for skype, I really can't help. The software is proprietary and many people 
have encountered various issues when trying to use it, so I don't know which 
of skype or the driver/camera is to blame.

> skype doesn't even print any error msg, it crashes and that's it.
> It keeps crashing until I unload uvcvideo, very annoying.

Does uvcvideo print any error message in the kernel log when skype crashes ? 
Either the driver crashes, in which case you will get a lengthy oops report 
in the kernel log, and the skype crash is then understandable, or skype has a 
bug that makes it crash.

> > You could also try not to load the usbaudio driver at all. Timing-related
> > issues that lead to a camera crash can be caused by many things, and
> > audio-related requests could crash a perfectly working video device.
>
> No good news from this front.
>
> > Maybe the Hercules Dualpix uses a faulty USB chip (I would be interested
> > in knowing the chip brand and model if you can manage to open the case
> > without breaking anything).
>
> I don't have such a tiny screwdriver now, but in the case I'll let you
> know.

Ok.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Aug  4 22:16:48 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 4 Aug 2008 22:16:48 +0200
Subject: [Linux-uvc-devel] Record audio with Philips SPC520NC webcam
In-Reply-To: <20080802191308.GD19605@moelleritberatung.de>
References: <20080802191308.GD19605@moelleritberatung.de>
Message-ID: <200808042216.48300.laurent.pinchart@skynet.be>

Hi,

On Saturday 02 August 2008, Artem Makhutov wrote:
> Hello List,
>
> I have a Philips SPC520NC webcam, which works fine with UVC.
> (Please add it to the supported devices list.)

Done. Thanks for the report. The SPC520NC and SPC525NC seem to be identical.

> The only problem I have is to record audio using the build in
> microphone. (Under windows the microphone works well.)
>
> I am using kernel 2.6.26 and the build in snd_usb_audio and uvcvideo
> modules.
>
> After arround 5 seconds I am getting an "read error: I/O Error" message,
> and I am getting an empty wav file (only the wav header is in there).
>
> I have attached an lsusb -v output.
>
> Any suggestion?
>
> Thanks, Artem
>
> artem at gandalf ~/wav $ arecord -D hw:1,0 -c 1 -f S16_LE -v test.wav
> Recording WAVE 'test.wav' : Signed 16 bit Little Endian, Rate 8000 Hz, Mono
> Hardware PCM card 1 'USB Video Camera' device 0 subdevice 0
> Its setup is:
>   stream       : CAPTURE
>   access       : RW_INTERLEAVED
>   format       : S16_LE
>   subformat    : STD
>   channels     : 1
>   rate         : 8000
>   exact rate   : 8000 (8000/1)
>   msbits       : 16
>   buffer_size  : 4000
>   period_size  : 1000
>   period_time  : 125000
>   tstamp_mode  : NONE
>   period_step  : 1
>   avail_min    : 1000
>   start_threshold  : 1
>   stop_threshold   : 4000
>   silence_threshold: 0
>   silence_size : 0
>   boundary     : 9007199254740992000
> arecord: pcm_read:1348: read error: Eingabe-/Ausgabefehler
>
> (arecord: pcm_read:1348: read error: I/O Error)

Please check the kernel log for any uvcvideo error message. If there is none, 
as the uvcvideo driver handles video only, you should contact the usbaudio 
mailing list (if there is one, otherwise the alsa or linux-usb mailing list).

Best regards,

Laurent Pinchart


From carmelo.iannello at gmail.com  Tue Aug  5 15:19:29 2008
From: carmelo.iannello at gmail.com (Carmelo Iannello)
Date: Tue, 05 Aug 2008 15:19:29 +0200
Subject: [Linux-uvc-devel] Problems with Hercules  Dualpix
In-Reply-To: <200808042203.56014.laurent.pinchart@skynet.be>
References: <48934D71.1010306@gmail.com>
	<200808012224.40871.laurent.pinchart@skynet.be>
	<48946192.1070603@gmail.com>
	<200808042203.56014.laurent.pinchart@skynet.be>
Message-ID: <48985361.1060808@gmail.com>

Laurent Pinchart ha scritto:

>> You're right: I can get the webcam working with luvcview with or without
>> sending the GET_DEF request, so the driver works around it, the only visible
>> difference is the error msg.
> 
> I didn't know it was working in luvcview. That's an important piece of 
> information.

I didn't know it either, my fault.
I thought it wasn't going to work until I get rid of the error msg or,
better, until I fix its cause, so I did not test with every program
at every single attempt.

> cheese uses gstreamer, which in theory should work. Make sure you use a recent 
> version, as various bugs which made gstreamer not compatible with uvcvideo 
> should have been fixed.

I'm using the last version in debian unstable, which is 0.10.20, but the
only thing i get is a nice '70s-like test card with a white noise rectangle.

> Does uvcvideo print any error message in the kernel log when skype crashes ? 
> Either the driver crashes, in which case you will get a lengthy oops report 
> in the kernel log, and the skype crash is then understandable, or skype has a 
> bug that makes it crash.

There's no trace in kernel log, and other apps keep working after a
skype crash, so it's probably its fault.

>>> Maybe the Hercules Dualpix uses a faulty USB chip (I would be interested
>>> in knowing the chip brand and model if you can manage to open the case
>>> without breaking anything).

Actually I've read someone suggesting in a forum that it could be a ov534.
Today I opened it and I can confirm: the chip is labeled as
OV0534-LB10, just like this:

http://www.hardware.info/en-UK/articles/amdnZGpuZGKa/Hercules_Dualpix_HD_webcam/4

Thanks,
bye.

Carmelo.




From alan-jenkins at tuffmail.co.uk  Wed Aug  6 17:31:27 2008
From: alan-jenkins at tuffmail.co.uk (Alan Jenkins)
Date: Wed, 06 Aug 2008 16:31:27 +0100
Subject: [Linux-uvc-devel] 2.6.27-rc2: uvcvideo breaks after suspend to ram
Message-ID: <4899C3CF.1010104@tuffmail.co.uk>

I don't use the webcam on my EeePC; I just happened to try it while
testing 2.6.27-rc2.  I don't know about any other version so this isn't
neccessarily a regression.

I think I tested it using Kopete, then later I got this warning on
resume.  I definitely didn't have Kopete open when I suspended though.

Thanks
Alan

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: dmesg-uvc-WARNING.txt
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080806/a97aa8cb/attachment.txt>

From oliver at neukum.org  Thu Aug  7 10:28:20 2008
From: oliver at neukum.org (Oliver Neukum)
Date: Thu, 7 Aug 2008 10:28:20 +0200
Subject: [Linux-uvc-devel] 2.6.27-rc2: uvcvideo breaks after suspend to
	ram
In-Reply-To: <4899C1FF.2090404@student.cs.york.ac.uk>
References: <4899C1FF.2090404@student.cs.york.ac.uk>
Message-ID: <200808071028.21321.oliver@neukum.org>

Am Mittwoch 06 August 2008 17:23:43 schrieb Alan Jenkins:
> [ ?290.127788] uvcvideo 1-8:1.0: no reset_resume for driver uvcvideo?

[..]

> [ ?290.128909] ?[<c023465e>] usb_rebind_intf+0x27/0x4e
> [ ?290.128916] ?[<c02346eb>] do_unbind_rebind+0x4d/0x5a
> [ ?290.128924] ?[<c0234738>] usb_external_resume_device+0x40/0x51
> [ ?290.128933] ?[<c020cd87>] device_resume+0x8a/0x2d2
> [ ?290.128941] ?[<c01334e2>] suspend_devices_and_enter+0x10f/0x138
> [ ?290.128954] ?[<c013363a>] enter_state+0x10b/0x164
> [ ?290.128963] ?[<c0133721>] state_store+0x8e/0xa4
> [ ?290.128972] ?[<c0133693>] state_store+0x0/0xa4
> [ ?290.128981] ?[<c01a3087>] kobj_attr_store+0x18/0x1c
> [ ?290.128991] ?[<c018bedc>] sysfs_write_file+0xaf/0xdc
> [ ?290.129000] ?[<c018be2d>] sysfs_write_file+0x0/0xdc
> [ ?290.129007] ?[<c015ec41>] vfs_write+0x83/0xf6
> [ ?290.129016] ?[<c015efd2>] sys_write+0x3c/0x63
> [ ?290.129024] ?[<c01035c1>] sysenter_do_call+0x12/0x21
> [ ?290.129035] ?[<c02b0000>] wait_for_common+0xe0/0xe3

	if (reset_resume) {
		if (driver->reset_resume) {
			status = driver->reset_resume(intf);
			if (status)
				dev_err(&intf->dev, "%s error %d\n",
						"reset_resume", status);
		} else {
			intf->needs_binding = 1;

It doesn't have reset_resume, so it is marked for rebinding. That in turn
triggers the warning because the parent is still asleep. That shouldn't
happen if we walk the device tree properly. Can you add a printk
to device_pm_add() to print out the parent? We need to rule out that the
device tree is bad.

	Regards
		Oliver


From alan-jenkins at tuffmail.co.uk  Thu Aug  7 13:49:37 2008
From: alan-jenkins at tuffmail.co.uk (Alan Jenkins)
Date: Thu, 07 Aug 2008 12:49:37 +0100
Subject: [Linux-uvc-devel] 2.6.27-rc2: uvcvideo breaks after suspend to
	ram
In-Reply-To: <200808071028.21321.oliver@neukum.org>
References: <4899C1FF.2090404@student.cs.york.ac.uk>
	<200808071028.21321.oliver@neukum.org>
Message-ID: <489AE151.3020602@tuffmail.co.uk>

Oliver Neukum wrote:
> Am Mittwoch 06 August 2008 17:23:43 schrieb Alan Jenkins:
>   
>> [  290.127788] uvcvideo 1-8:1.0: no reset_resume for driver uvcvideo?
>>     
>
> [..]
>
>   
>> [  290.128909]  [<c023465e>] usb_rebind_intf+0x27/0x4e
>> [  290.128916]  [<c02346eb>] do_unbind_rebind+0x4d/0x5a
>> [  290.128924]  [<c0234738>] usb_external_resume_device+0x40/0x51
>> [  290.128933]  [<c020cd87>] device_resume+0x8a/0x2d2
>> [  290.128941]  [<c01334e2>] suspend_devices_and_enter+0x10f/0x138
>> [  290.128954]  [<c013363a>] enter_state+0x10b/0x164
>> [  290.128963]  [<c0133721>] state_store+0x8e/0xa4
>> [  290.128972]  [<c0133693>] state_store+0x0/0xa4
>> [  290.128981]  [<c01a3087>] kobj_attr_store+0x18/0x1c
>> [  290.128991]  [<c018bedc>] sysfs_write_file+0xaf/0xdc
>> [  290.129000]  [<c018be2d>] sysfs_write_file+0x0/0xdc
>> [  290.129007]  [<c015ec41>] vfs_write+0x83/0xf6
>> [  290.129016]  [<c015efd2>] sys_write+0x3c/0x63
>> [  290.129024]  [<c01035c1>] sysenter_do_call+0x12/0x21
>> [  290.129035]  [<c02b0000>] wait_for_common+0xe0/0xe3
>>     
>
> 	if (reset_resume) {
> 		if (driver->reset_resume) {
> 			status = driver->reset_resume(intf);
> 			if (status)
> 				dev_err(&intf->dev, "%s error %d\n",
> 						"reset_resume", status);
> 		} else {
> 			intf->needs_binding = 1;
>
> It doesn't have reset_resume, so it is marked for rebinding. That in turn
> triggers the warning because the parent is still asleep. That shouldn't
> happen if we walk the device tree properly. Can you add a printk
> to device_pm_add() to print out the parent? We need to rule out that the
> device tree is bad.
>
> 	Regards
> 		Oliver
>   
Done.  (For the record, I've posted the results at
<http://bugzilla.kernel.org/show_bug.cgi?id=11263>).


From lists at brachttal.net  Thu Aug  7 21:01:12 2008
From: lists at brachttal.net (Andreas Volz)
Date: Thu, 7 Aug 2008 21:01:12 +0200
Subject: [Linux-uvc-devel] Logitech Quickcam E3500
Message-ID: <20080807210112.2fc3f6c4@frodo.mittelerde>

Hello,

I got a Logitech Quickcam E3500 instead of my old not supported camera.
This one works really great.

luvcview: OK
guvcview: OK
ekiga: OK
Skype: OK
video quality: OK

But now I noticed that if one of these applications start the video
then my USB mouse goes crazy. Some basic functions work, but sometimes
mouse clicks are emitted when they shouldn't. Also the cursor jumps
sometimes about some pixels. It's not really possible to work with the
mouse if the camera is active.

Any ideas what's the problem or how to go deeper into it?

regards
Andreas


From stefan.matting at gmx.de  Sat Aug  9 13:38:33 2008
From: stefan.matting at gmx.de (Stefan Matting)
Date: Sat, 09 Aug 2008 13:38:33 +0200
Subject: [Linux-uvc-devel] built-in iSight not shown in lsusb and no
	/dev/video0
Message-ID: <489D81B9.8080209@gmx.de>

Hi,

I have a built-in iSight I can't get to work. Compiled the most recent
version (revision 242) of linux-uvc and extracted the firmware with
ift-extract.

When uvcvideo is loaded the messages are:
[ 1151.736833] Linux video capture interface: v2.00
[ 1151.744654] usbcore: registered new interface driver uvcvideo
[ 1151.744664] USB Video Class driver (SVN r242)

However there is no /dev/video0 created.

The output of lsusb shows no iSight I think (is th

Bus 005 Device 003: ID 05ac:8300 Apple Computer, Inc.
Bus 005 Device 001: ID 0000:0000
Bus 004 Device 004: ID 05ac:8206 Apple Computer, Inc. Bluetooth USB Host
Controller
Bus 004 Device 003: ID 05ac:8240 Apple Computer, Inc. IR Receiver [build-in]
Bus 004 Device 001: ID 0000:0000
Bus 003 Device 002: ID 046d:c00e Logitech, Inc. M-BJ69 Optical Wheel Mouse
Bus 003 Device 001: ID 0000:0000
Bus 002 Device 001: ID 0000:0000
Bus 001 Device 003: ID 046a:0001 Cherry GmbH My3000 Keyboard
Bus 001 Device 001: ID 0000:0000

I'm running 2.6.24-19-generic on ubuntu 8.04.

Can you please help me?

Cheers,
Stefan



From bwpearre at gmail.com  Sat Aug 16 15:45:59 2008
From: bwpearre at gmail.com (Ben Pearre)
Date: Sat, 16 Aug 2008 10:45:59 -0300
Subject: [Linux-uvc-devel] Autofocus on Logitech QuickCam Pro for Notebooks
	046d:0991?
Message-ID: <921fe29f0808160645x311dfb82rcde30f3c828caf32@mail.gmail.com>

Hi!

I was excited to discover that the Logitech 0991 claims autofocus, so I
cleverly went out and bought one.

http://linux-uvc.berlios.de/ claims that the device works, but I don't think
that the camera is autofocusing.  Does that mean I have a faulty camera?  Or
is this feature not, in fact, supported?  I can't find any reference to
autofocus in the lists, but my google-fu may be rusty.

Many thanks!
-Ben
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080816/5ac7f96a/attachment.html>

From philipp at kolmann.at  Sun Aug 17 18:56:07 2008
From: philipp at kolmann.at (Philipp Kolmann)
Date: Sun, 17 Aug 2008 18:56:07 +0200
Subject: [Linux-uvc-devel] Autofocus on Logitech QuickCam Pro for
 Notebooks 046d:0991?
In-Reply-To: <921fe29f0808160645x311dfb82rcde30f3c828caf32@mail.gmail.com>
References: <921fe29f0808160645x311dfb82rcde30f3c828caf32@mail.gmail.com>
Message-ID: <48A85827.8020205@kolmann.at>

Ben Pearre wrote:
> Hi!
>
> I was excited to discover that the Logitech 0991 claims autofocus, so 
> I cleverly went out and bought one.
>
> http://linux-uvc.berlios.de/ claims that the device works, but I don't 
> think that the camera is autofocusing.  Does that mean I have a faulty 
> camera?  Or is this feature not, in fact, supported?  I can't find any 
> reference to autofocus in the lists, but my google-fu may be rusty.
Alex Seewald has done some programming with autofocus:

http://alex.seewald.at/


hth
Philipp


From laurent.pinchart at skynet.be  Sun Aug 17 22:20:20 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 17 Aug 2008 22:20:20 +0200
Subject: [Linux-uvc-devel] Logitech Quickcam E3500
In-Reply-To: <20080807210112.2fc3f6c4@frodo.mittelerde>
References: <20080807210112.2fc3f6c4@frodo.mittelerde>
Message-ID: <200808172220.20581.laurent.pinchart@skynet.be>

Hi Andreas,

On Thursday 07 August 2008, Andreas Volz wrote:
> Hello,
>
> I got a Logitech Quickcam E3500 instead of my old not supported camera.
> This one works really great.
>
> luvcview: OK
> guvcview: OK
> ekiga: OK
> Skype: OK
> video quality: OK
>
> But now I noticed that if one of these applications start the video
> then my USB mouse goes crazy. Some basic functions work, but sometimes
> mouse clicks are emitted when they shouldn't. Also the cursor jumps
> sometimes about some pixels. It's not really possible to work with the
> mouse if the camera is active.
>
> Any ideas what's the problem or how to go deeper into it?

I really got no idea. Does it happen with all applications ? If so you should 
probably contact the linux-usb mailing list, this seems to be a more generic 
issue. It would also be interesting to test a non-USB mouse if you can 
connect one to the computer.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Aug 17 22:28:36 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 17 Aug 2008 22:28:36 +0200
Subject: [Linux-uvc-devel] built-in iSight not shown in lsusb and no
	/dev/video0
In-Reply-To: <489D81B9.8080209@gmx.de>
References: <489D81B9.8080209@gmx.de>
Message-ID: <200808172228.36932.laurent.pinchart@skynet.be>

Hi Stefan,

On Saturday 09 August 2008, Stefan Matting wrote:
> Hi,
>
> I have a built-in iSight I can't get to work. Compiled the most recent
> version (revision 242) of linux-uvc and extracted the firmware with
> ift-extract.
>
> When uvcvideo is loaded the messages are:
> [ 1151.736833] Linux video capture interface: v2.00
> [ 1151.744654] usbcore: registered new interface driver uvcvideo
> [ 1151.744664] USB Video Class driver (SVN r242)
>
> However there is no /dev/video0 created.
>
> The output of lsusb shows no iSight I think (is th
>
> Bus 005 Device 003: ID 05ac:8300 Apple Computer, Inc.

This is the iSight with no firmare loaded. Without the firmware the UVC driver 
won't be able to drive the webcam. Use either the fxload userspace tool or 
the recent in-kernel iSight firmware loader driver.

> Bus 005 Device 001: ID 0000:0000
> Bus 004 Device 004: ID 05ac:8206 Apple Computer, Inc. Bluetooth USB Host
> Controller
> Bus 004 Device 003: ID 05ac:8240 Apple Computer, Inc. IR Receiver
> [build-in] Bus 004 Device 001: ID 0000:0000
> Bus 003 Device 002: ID 046d:c00e Logitech, Inc. M-BJ69 Optical Wheel Mouse
> Bus 003 Device 001: ID 0000:0000
> Bus 002 Device 001: ID 0000:0000
> Bus 001 Device 003: ID 046a:0001 Cherry GmbH My3000 Keyboard
> Bus 001 Device 001: ID 0000:0000
>
> I'm running 2.6.24-19-generic on ubuntu 8.04.
>
> Can you please help me?

Best regards,

Laurent Pinchart


From mbracho at ing.uc3m.es  Mon Aug 18 12:59:33 2008
From: mbracho at ing.uc3m.es (MARITZA BRACHO DE RODRIGUEZ)
Date: Mon, 18 Aug 2008 12:59:33 +0200
Subject: [Linux-uvc-devel] Howto access from differents applications
Message-ID: <20080818125933.9vcqnruiow0kkw08@webcartero01.uc3m.es>


I want to know, how to access the video captured from a logitech camera 
5000 pro from two differents applications at the same time,  if I am 
using the uvc driver.

For example, if right now I execute luvcview, it will give the image 
captured in a window with the next messages:
Video driver: x11
A window manager is available
video /dev/video0

If I executed a second luvcview program, while the first one is still 
executing,  it gives the next messages wiht no image:
Video driver: x11
A window manager is available
video /dev/video0
Unable to set format: 16.
Init v4L2 failed !! exit fatal
[2]+  Exit 1

Thanks
Maritza





From homoludens1000 at gmail.com  Mon Aug 18 15:37:35 2008
From: homoludens1000 at gmail.com (homoludens)
Date: Mon, 18 Aug 2008 22:37:35 +0900
Subject: [Linux-uvc-devel] Difference between gspcav and uvc webcam drivers?
Message-ID: <200808182237.36080.homoludens1000@gmail.com>

Sorry for a newbie question.

I'm thinking of purchasing a Linux-compatible webcam, 
and while looking for models that work under OpenSUSE 
11, which I am using, I noticed that there seem to be 
two general solutions for webcam support, gspcav and 
uvc.

Could someone quickly brief me in on the major 
differences between the two? Do they constitute equal 
alternatives for webcam support, or are there certain 
advantages / disadvantages to them? Which one should I 
be concerned with when looking for a Linux webcam?

Cheers,

homoludens


From laurent.pinchart at skynet.be  Mon Aug 18 20:28:45 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 18 Aug 2008 20:28:45 +0200
Subject: [Linux-uvc-devel] Howto access from differents applications
In-Reply-To: <20080818125933.9vcqnruiow0kkw08@webcartero01.uc3m.es>
References: <20080818125933.9vcqnruiow0kkw08@webcartero01.uc3m.es>
Message-ID: <200808182028.45959.laurent.pinchart@skynet.be>

Hi Maritza,

On Monday 18 August 2008, MARITZA BRACHO DE RODRIGUEZ wrote:
> I want to know, how to access the video captured from a logitech camera
> 5000 pro from two differents applications at the same time,  if I am
> using the uvc driver.
>
> For example, if right now I execute luvcview, it will give the image
> captured in a window with the next messages:
> Video driver: x11
> A window manager is available
> video /dev/video0
>
> If I executed a second luvcview program, while the first one is still
> executing,  it gives the next messages wiht no image:
> Video driver: x11
> A window manager is available
> video /dev/video0
> Unable to set format: 16.
> Init v4L2 failed !! exit fatal
> [2]+  Exit 1

That's simply not possible. V4L doesn't handle sharing a single video stream 
source between different consumers.

You will need a userspace framework, such as GStreamer, for such advanced 
functions. Your applications will of course have to be written specifically 
for the framework you chose.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Aug 18 22:21:46 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 18 Aug 2008 22:21:46 +0200
Subject: [Linux-uvc-devel] Difference between gspcav and uvc webcam
	drivers?
In-Reply-To: <200808182237.36080.homoludens1000@gmail.com>
References: <200808182237.36080.homoludens1000@gmail.com>
Message-ID: <200808182221.46273.laurent.pinchart@skynet.be>

Hi,

On Monday 18 August 2008, homoludens wrote:
> Sorry for a newbie question.
>
> I'm thinking of purchasing a Linux-compatible webcam,
> and while looking for models that work under OpenSUSE
> 11, which I am using, I noticed that there seem to be
> two general solutions for webcam support, gspcav and
> uvc.
>
> Could someone quickly brief me in on the major
> differences between the two? Do they constitute equal
> alternatives for webcam support, or are there certain
> advantages / disadvantages to them? Which one should I
> be concerned with when looking for a Linux webcam?

The two drivers just support different class of webcams. When you buy an 
AMD/ATI graphic card you need the ATI graphic driver. When you buy an NVidia 
graphic card you need the NVidia graphic driver. The same holds for webcams, 
you need a driver that supports your device.

The gspca driver is newer, so it might be less tested than the UVC driver. I 
would of course advice getting a UVC webcam as I'm the UVC driver author :-)

Best regards,

Laurent Pinchart


From barsnick at gmx.net  Mon Aug 18 23:18:30 2008
From: barsnick at gmx.net (Moritz Barsnick)
Date: Mon, 18 Aug 2008 23:18:30 +0200
Subject: [Linux-uvc-devel] Autofocus on Logitech QuickCam Pro
	for	Notebooks 046d:0991?
In-Reply-To: <921fe29f0808160645x311dfb82rcde30f3c828caf32@mail.gmail.com>
References: <921fe29f0808160645x311dfb82rcde30f3c828caf32@mail.gmail.com>
Message-ID: <20080818211830.GB14294@sunshine.barsnick.net>

Hi Ben,

On Sat, Aug 16, 2008 at 10:45:59 -0300, Ben Pearre wrote:

> http://linux-uvc.berlios.de/ claims that the device works, but I
> don't think that the camera is autofocusing.  Does that mean I have a
> faulty camera?  Or is this feature not, in fact, supported?  I can't
> find any reference to autofocus in the lists, but my google-fu may be
> rusty.

It seems that guvcview has software support for autofocus since SVN
revision 194:

barsnick at sunshine:.../UVC/guvcview > svn log -r194 guvcview-trunk-r197
------------------------------------------------------------------------
r194 | assisp | 2008-08-14 17:29:32 +0200 (Thu, 14 Aug 2008) | 4 lines

 * added software autofocus to quickam cameras (Pro 9000 , Sphere /Orbit AF)
 * fixed DOC install path

------------------------------------------------------------------------

guvcview can be found here:
http://developer.berlios.de/projects/guvcview/
(but said edit will be in 0.9.3, which hasn't been released as a
package yet).

Development SVN is here:
http://svn.berlios.de/svnroot/repos/guvcview

HTH,
Moritz


From robert at watkin5.net  Wed Aug 20 00:41:16 2008
From: robert at watkin5.net (Robert Watkins)
Date: Tue, 19 Aug 2008 23:41:16 +0100
Subject: [Linux-uvc-devel] USB microphone breaks Logitech QuickCam Pro 9000
Message-ID: <1219185676.11541.43.camel@watkins-desktop>

Hi,

I think I may have the same problem as detailed in
https://lists.berlios.de/pipermail/linux-uvc-devel/2008-July/003765.html
but I haven't got the space to fit an extra pci card. I'm hoping there is another answer.

The webcam appears to work excellently...

	watkins at watkins-desktop:~$ luvcview -d /dev/video1 	
	luvcview version 0.2.1 
	Video driver: x11
	A window manager is available
	video /dev/video1

until any application uses a USB microphone, i.e.

	watkins at watkins-desktop:~$ cat /dev/dsp4

then the picture breaks up, freezes and luvcview dies a few seconds later.

	watkins at watkins-desktop:~$ luvcview -d /dev/video1 
	luvcview version 0.2.1 
	Video driver: x11
	A window manager is available
	video /dev/video1 
	Ignoring empty buffer ...
	Ignoring empty buffer ...
	Ignoring empty buffer ...
	Ignoring empty buffer ...
	Unable to dequeue buffer (22).
	Error grabbing 
	 Clean Up done Quit 
	watkins at watkins-desktop:~$

I tried using a different USB microphone, i.e. cat /dev/dsp3, but it dies just the same.
I tried with and without USB hubs, but it dies just the same.

I tried the webcam in my old Toshiba Satellite laptop, and it doesn't appear to have the problem.
(Unfortunately 400MHz and 198M of ram is not going to work well with Skype.) 

Any help would be greatly appreciated.
Will any USB webcam work for me and my box of ATI chips?

Regards and Best Wishes,
Rob W

uvcvideo is version: SVN r242
USB Chipset: info.product = 'IXP SB400 USB2 Host Controller'
Webcam: Bus 003 Device 023: ID 046d:0990 Logitech, Inc.
Alternative USB microphone: Bus 003 Device 020: ID 0556:0001 Asahi Kasei Microsystems Co., Ltd AK5370 I/F A/D Converter



From darren.longhorn at redembedded.com  Wed Aug 20 12:51:12 2008
From: darren.longhorn at redembedded.com (Darren Longhorn)
Date: Wed, 20 Aug 2008 11:51:12 +0100
Subject: [Linux-uvc-devel] UVC-compliant USB video capture card
Message-ID: <48ABF720.3010608@redembedded.com>

Does anyone know of such a device?


From laurent.pinchart at skynet.be  Wed Aug 20 22:04:09 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 20 Aug 2008 22:04:09 +0200
Subject: [Linux-uvc-devel] 2.6.27-rc2: uvcvideo breaks after suspend to
	ram
In-Reply-To: <489AE151.3020602@tuffmail.co.uk>
References: <4899C1FF.2090404@student.cs.york.ac.uk>
	<200808071028.21321.oliver@neukum.org>
	<489AE151.3020602@tuffmail.co.uk>
Message-ID: <200808202204.10556.laurent.pinchart@skynet.be>

Hi Alan,

On Thursday 07 August 2008, Alan Jenkins wrote:
> Oliver Neukum wrote:
> > Am Mittwoch 06 August 2008 17:23:43 schrieb Alan Jenkins:
> >> [  290.127788] uvcvideo 1-8:1.0: no reset_resume for driver uvcvideo?
> >
> > [..]
> >
> >> [  290.128909]  [<c023465e>] usb_rebind_intf+0x27/0x4e
> >> [  290.128916]  [<c02346eb>] do_unbind_rebind+0x4d/0x5a
> >> [  290.128924]  [<c0234738>] usb_external_resume_device+0x40/0x51
> >> [  290.128933]  [<c020cd87>] device_resume+0x8a/0x2d2
> >> [  290.128941]  [<c01334e2>] suspend_devices_and_enter+0x10f/0x138
> >> [  290.128954]  [<c013363a>] enter_state+0x10b/0x164
> >> [  290.128963]  [<c0133721>] state_store+0x8e/0xa4
> >> [  290.128972]  [<c0133693>] state_store+0x0/0xa4
> >> [  290.128981]  [<c01a3087>] kobj_attr_store+0x18/0x1c
> >> [  290.128991]  [<c018bedc>] sysfs_write_file+0xaf/0xdc
> >> [  290.129000]  [<c018be2d>] sysfs_write_file+0x0/0xdc
> >> [  290.129007]  [<c015ec41>] vfs_write+0x83/0xf6
> >> [  290.129016]  [<c015efd2>] sys_write+0x3c/0x63
> >> [  290.129024]  [<c01035c1>] sysenter_do_call+0x12/0x21
> >> [  290.129035]  [<c02b0000>] wait_for_common+0xe0/0xe3
> >
> > 	if (reset_resume) {
> > 		if (driver->reset_resume) {
> > 			status = driver->reset_resume(intf);
> > 			if (status)
> > 				dev_err(&intf->dev, "%s error %d\n",
> > 						"reset_resume", status);
> > 		} else {
> > 			intf->needs_binding = 1;
> >
> > It doesn't have reset_resume, so it is marked for rebinding. That in turn
> > triggers the warning because the parent is still asleep. That shouldn't
> > happen if we walk the device tree properly. Can you add a printk
> > to device_pm_add() to print out the parent? We need to rule out that the
> > device tree is bad.
> >
> > 	Regards
> > 		Oliver
>
> Done.  (For the record, I've posted the results at
> <http://bugzilla.kernel.org/show_bug.cgi?id=11263>).

I've added a reset_resume method to the UVC driver. Could you please test the 
latest SVN revision and tell me if it helps ?

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Aug 20 22:04:09 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 20 Aug 2008 22:04:09 +0200
Subject: [Linux-uvc-devel] 2.6.27-rc2: uvcvideo breaks after suspend to
	ram
In-Reply-To: <489AE151.3020602@tuffmail.co.uk>
References: <4899C1FF.2090404@student.cs.york.ac.uk>
	<200808071028.21321.oliver@neukum.org>
	<489AE151.3020602@tuffmail.co.uk>
Message-ID: <200808202204.10556.laurent.pinchart@skynet.be>

Hi Alan,

On Thursday 07 August 2008, Alan Jenkins wrote:
> Oliver Neukum wrote:
> > Am Mittwoch 06 August 2008 17:23:43 schrieb Alan Jenkins:
> >> [  290.127788] uvcvideo 1-8:1.0: no reset_resume for driver uvcvideo?
> >
> > [..]
> >
> >> [  290.128909]  [<c023465e>] usb_rebind_intf+0x27/0x4e
> >> [  290.128916]  [<c02346eb>] do_unbind_rebind+0x4d/0x5a
> >> [  290.128924]  [<c0234738>] usb_external_resume_device+0x40/0x51
> >> [  290.128933]  [<c020cd87>] device_resume+0x8a/0x2d2
> >> [  290.128941]  [<c01334e2>] suspend_devices_and_enter+0x10f/0x138
> >> [  290.128954]  [<c013363a>] enter_state+0x10b/0x164
> >> [  290.128963]  [<c0133721>] state_store+0x8e/0xa4
> >> [  290.128972]  [<c0133693>] state_store+0x0/0xa4
> >> [  290.128981]  [<c01a3087>] kobj_attr_store+0x18/0x1c
> >> [  290.128991]  [<c018bedc>] sysfs_write_file+0xaf/0xdc
> >> [  290.129000]  [<c018be2d>] sysfs_write_file+0x0/0xdc
> >> [  290.129007]  [<c015ec41>] vfs_write+0x83/0xf6
> >> [  290.129016]  [<c015efd2>] sys_write+0x3c/0x63
> >> [  290.129024]  [<c01035c1>] sysenter_do_call+0x12/0x21
> >> [  290.129035]  [<c02b0000>] wait_for_common+0xe0/0xe3
> >
> > 	if (reset_resume) {
> > 		if (driver->reset_resume) {
> > 			status = driver->reset_resume(intf);
> > 			if (status)
> > 				dev_err(&intf->dev, "%s error %d\n",
> > 						"reset_resume", status);
> > 		} else {
> > 			intf->needs_binding = 1;
> >
> > It doesn't have reset_resume, so it is marked for rebinding. That in turn
> > triggers the warning because the parent is still asleep. That shouldn't
> > happen if we walk the device tree properly. Can you add a printk
> > to device_pm_add() to print out the parent? We need to rule out that the
> > device tree is bad.
> >
> > 	Regards
> > 		Oliver
>
> Done.  (For the record, I've posted the results at
> <http://bugzilla.kernel.org/show_bug.cgi?id=11263>).

I've added a reset_resume method to the UVC driver. Could you please test the 
latest SVN revision and tell me if it helps ?

Best regards,

Laurent Pinchart


From alan-jenkins at tuffmail.co.uk  Wed Aug 20 22:34:09 2008
From: alan-jenkins at tuffmail.co.uk (Alan Jenkins)
Date: Wed, 20 Aug 2008 21:34:09 +0100
Subject: [Linux-uvc-devel] 2.6.27-rc2: uvcvideo breaks after suspend to
 ram
In-Reply-To: <200808202204.10556.laurent.pinchart@skynet.be>
References: <4899C1FF.2090404@student.cs.york.ac.uk>
	<200808071028.21321.oliver@neukum.org>
	<489AE151.3020602@tuffmail.co.uk>
	<200808202204.10556.laurent.pinchart@skynet.be>
Message-ID: <48AC7FC1.6040902@tuffmail.co.uk>

Laurent Pinchart wrote:
> Hi Alan,
>
> On Thursday 07 August 2008, Alan Jenkins wrote:
>   
>> Oliver Neukum wrote:
>>     
>>> Am Mittwoch 06 August 2008 17:23:43 schrieb Alan Jenkins:
>>>       
>>>> [  290.127788] uvcvideo 1-8:1.0: no reset_resume for driver uvcvideo?
>>>>         
>>> [..]
>>>
>>>       
>>>> [  290.128909]  [<c023465e>] usb_rebind_intf+0x27/0x4e
>>>> [  290.128916]  [<c02346eb>] do_unbind_rebind+0x4d/0x5a
>>>> [  290.128924]  [<c0234738>] usb_external_resume_device+0x40/0x51
>>>> [  290.128933]  [<c020cd87>] device_resume+0x8a/0x2d2
>>>> [  290.128941]  [<c01334e2>] suspend_devices_and_enter+0x10f/0x138
>>>> [  290.128954]  [<c013363a>] enter_state+0x10b/0x164
>>>> [  290.128963]  [<c0133721>] state_store+0x8e/0xa4
>>>> [  290.128972]  [<c0133693>] state_store+0x0/0xa4
>>>> [  290.128981]  [<c01a3087>] kobj_attr_store+0x18/0x1c
>>>> [  290.128991]  [<c018bedc>] sysfs_write_file+0xaf/0xdc
>>>> [  290.129000]  [<c018be2d>] sysfs_write_file+0x0/0xdc
>>>> [  290.129007]  [<c015ec41>] vfs_write+0x83/0xf6
>>>> [  290.129016]  [<c015efd2>] sys_write+0x3c/0x63
>>>> [  290.129024]  [<c01035c1>] sysenter_do_call+0x12/0x21
>>>> [  290.129035]  [<c02b0000>] wait_for_common+0xe0/0xe3
>>>>         
>>> 	if (reset_resume) {
>>> 		if (driver->reset_resume) {
>>> 			status = driver->reset_resume(intf);
>>> 			if (status)
>>> 				dev_err(&intf->dev, "%s error %d\n",
>>> 						"reset_resume", status);
>>> 		} else {
>>> 			intf->needs_binding = 1;
>>>
>>> It doesn't have reset_resume, so it is marked for rebinding. That in turn
>>> triggers the warning because the parent is still asleep. That shouldn't
>>> happen if we walk the device tree properly. Can you add a printk
>>> to device_pm_add() to print out the parent? We need to rule out that the
>>> device tree is bad.
>>>
>>> 	Regards
>>> 		Oliver
>>>       
>> Done.  (For the record, I've posted the results at
>> <http://bugzilla.kernel.org/show_bug.cgi?id=11263>).
>>     
>
> I've added a reset_resume method to the UVC driver. Could you please test the 
> latest SVN revision and tell me if it helps ?
>   
Alan Stern said the problem was that USB needed to move to the new PM
ops.  He posted a patch for this which fixed my problem (the scary
WARNING with call-trace).

So I'll try to test SVN but it's not very interesting :-).

Ta
Alan


From alan-jenkins at tuffmail.co.uk  Wed Aug 20 22:34:09 2008
From: alan-jenkins at tuffmail.co.uk (Alan Jenkins)
Date: Wed, 20 Aug 2008 21:34:09 +0100
Subject: [Linux-uvc-devel] 2.6.27-rc2: uvcvideo breaks after suspend to
 ram
In-Reply-To: <200808202204.10556.laurent.pinchart@skynet.be>
References: <4899C1FF.2090404@student.cs.york.ac.uk>
	<200808071028.21321.oliver@neukum.org>
	<489AE151.3020602@tuffmail.co.uk>
	<200808202204.10556.laurent.pinchart@skynet.be>
Message-ID: <48AC7FC1.6040902@tuffmail.co.uk>

Laurent Pinchart wrote:
> Hi Alan,
>
> On Thursday 07 August 2008, Alan Jenkins wrote:
>   
>> Oliver Neukum wrote:
>>     
>>> Am Mittwoch 06 August 2008 17:23:43 schrieb Alan Jenkins:
>>>       
>>>> [  290.127788] uvcvideo 1-8:1.0: no reset_resume for driver uvcvideo?
>>>>         
>>> [..]
>>>
>>>       
>>>> [  290.128909]  [<c023465e>] usb_rebind_intf+0x27/0x4e
>>>> [  290.128916]  [<c02346eb>] do_unbind_rebind+0x4d/0x5a
>>>> [  290.128924]  [<c0234738>] usb_external_resume_device+0x40/0x51
>>>> [  290.128933]  [<c020cd87>] device_resume+0x8a/0x2d2
>>>> [  290.128941]  [<c01334e2>] suspend_devices_and_enter+0x10f/0x138
>>>> [  290.128954]  [<c013363a>] enter_state+0x10b/0x164
>>>> [  290.128963]  [<c0133721>] state_store+0x8e/0xa4
>>>> [  290.128972]  [<c0133693>] state_store+0x0/0xa4
>>>> [  290.128981]  [<c01a3087>] kobj_attr_store+0x18/0x1c
>>>> [  290.128991]  [<c018bedc>] sysfs_write_file+0xaf/0xdc
>>>> [  290.129000]  [<c018be2d>] sysfs_write_file+0x0/0xdc
>>>> [  290.129007]  [<c015ec41>] vfs_write+0x83/0xf6
>>>> [  290.129016]  [<c015efd2>] sys_write+0x3c/0x63
>>>> [  290.129024]  [<c01035c1>] sysenter_do_call+0x12/0x21
>>>> [  290.129035]  [<c02b0000>] wait_for_common+0xe0/0xe3
>>>>         
>>> 	if (reset_resume) {
>>> 		if (driver->reset_resume) {
>>> 			status = driver->reset_resume(intf);
>>> 			if (status)
>>> 				dev_err(&intf->dev, "%s error %d\n",
>>> 						"reset_resume", status);
>>> 		} else {
>>> 			intf->needs_binding = 1;
>>>
>>> It doesn't have reset_resume, so it is marked for rebinding. That in turn
>>> triggers the warning because the parent is still asleep. That shouldn't
>>> happen if we walk the device tree properly. Can you add a printk
>>> to device_pm_add() to print out the parent? We need to rule out that the
>>> device tree is bad.
>>>
>>> 	Regards
>>> 		Oliver
>>>       
>> Done.  (For the record, I've posted the results at
>> <http://bugzilla.kernel.org/show_bug.cgi?id=11263>).
>>     
>
> I've added a reset_resume method to the UVC driver. Could you please test the 
> latest SVN revision and tell me if it helps ?
>   
Alan Stern said the problem was that USB needed to move to the new PM
ops.  He posted a patch for this which fixed my problem (the scary
WARNING with call-trace).

So I'll try to test SVN but it's not very interesting :-).

Ta
Alan


From laurent.pinchart at skynet.be  Wed Aug 20 22:54:24 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 20 Aug 2008 22:54:24 +0200
Subject: [Linux-uvc-devel] 2.6.27-rc2: uvcvideo breaks after suspend to
	ram
In-Reply-To: <48AC7FC1.6040902@tuffmail.co.uk>
References: <4899C1FF.2090404@student.cs.york.ac.uk>
	<200808202204.10556.laurent.pinchart@skynet.be>
	<48AC7FC1.6040902@tuffmail.co.uk>
Message-ID: <200808202254.24927.laurent.pinchart@skynet.be>

On Wednesday 20 August 2008, Alan Jenkins wrote:
> Laurent Pinchart wrote:
> > Hi Alan,
> >
> > On Thursday 07 August 2008, Alan Jenkins wrote:
> >> Oliver Neukum wrote:
> >>> Am Mittwoch 06 August 2008 17:23:43 schrieb Alan Jenkins:
> >>>> [  290.127788] uvcvideo 1-8:1.0: no reset_resume for driver uvcvideo?
> >>>
> >>> [..]
> >>>
> >>>> [  290.128909]  [<c023465e>] usb_rebind_intf+0x27/0x4e
> >>>> [  290.128916]  [<c02346eb>] do_unbind_rebind+0x4d/0x5a
> >>>> [  290.128924]  [<c0234738>] usb_external_resume_device+0x40/0x51
> >>>> [  290.128933]  [<c020cd87>] device_resume+0x8a/0x2d2
> >>>> [  290.128941]  [<c01334e2>] suspend_devices_and_enter+0x10f/0x138
> >>>> [  290.128954]  [<c013363a>] enter_state+0x10b/0x164
> >>>> [  290.128963]  [<c0133721>] state_store+0x8e/0xa4
> >>>> [  290.128972]  [<c0133693>] state_store+0x0/0xa4
> >>>> [  290.128981]  [<c01a3087>] kobj_attr_store+0x18/0x1c
> >>>> [  290.128991]  [<c018bedc>] sysfs_write_file+0xaf/0xdc
> >>>> [  290.129000]  [<c018be2d>] sysfs_write_file+0x0/0xdc
> >>>> [  290.129007]  [<c015ec41>] vfs_write+0x83/0xf6
> >>>> [  290.129016]  [<c015efd2>] sys_write+0x3c/0x63
> >>>> [  290.129024]  [<c01035c1>] sysenter_do_call+0x12/0x21
> >>>> [  290.129035]  [<c02b0000>] wait_for_common+0xe0/0xe3
> >>>
> >>> 	if (reset_resume) {
> >>> 		if (driver->reset_resume) {
> >>> 			status = driver->reset_resume(intf);
> >>> 			if (status)
> >>> 				dev_err(&intf->dev, "%s error %d\n",
> >>> 						"reset_resume", status);
> >>> 		} else {
> >>> 			intf->needs_binding = 1;
> >>>
> >>> It doesn't have reset_resume, so it is marked for rebinding. That in
> >>> turn triggers the warning because the parent is still asleep. That
> >>> shouldn't happen if we walk the device tree properly. Can you add a
> >>> printk to device_pm_add() to print out the parent? We need to rule out
> >>> that the device tree is bad.
> >>>
> >>> 	Regards
> >>> 		Oliver
> >>
> >> Done.  (For the record, I've posted the results at
> >> <http://bugzilla.kernel.org/show_bug.cgi?id=11263>).
> >
> > I've added a reset_resume method to the UVC driver. Could you please test
> > the latest SVN revision and tell me if it helps ?
>
> Alan Stern said the problem was that USB needed to move to the new PM
> ops.  He posted a patch for this which fixed my problem (the scary
> WARNING with call-trace).
>
> So I'll try to test SVN but it's not very interesting :-).

The warning message in the kernel log came from the USB subsystem core, but 
the driver was also kinda faulty as it didn't implement all power management 
callbacks (even though the missing one isn't mandatory). The two patches 
address different issues, they are complementary.

Best regards,

Laurent Pinchart


From alan-jenkins at tuffmail.co.uk  Thu Aug 21 12:52:18 2008
From: alan-jenkins at tuffmail.co.uk (Alan Jenkins)
Date: Thu, 21 Aug 2008 11:52:18 +0100
Subject: [Linux-uvc-devel] 2.6.27-rc2: uvcvideo breaks after suspend to
 ram
In-Reply-To: <Pine.LNX.4.44L0.0808201707550.14505-100000@iolanthe.rowland.org>
References: <Pine.LNX.4.44L0.0808201707550.14505-100000@iolanthe.rowland.org>
Message-ID: <48AD48E2.4000302@tuffmail.co.uk>

Laurent Pinchart wrote:
> On Wednesday 20 August 2008, Alan Jenkins wrote:
>   
>> Laurent Pinchart wrote:
>>     
>>> Hi Alan,
>>>       
>>> I've added a reset_resume method to the UVC driver. Could you please test
>>> the latest SVN revision and tell me if it helps ?
>>>       
>> Alan Stern said the problem was that USB needed to move to the new PM
>> ops.  He posted a patch for this which fixed my problem (the scary
>> WARNING with call-trace).
>>
>> So I'll try to test SVN but it's not very interesting :-).
>>     
>
> The warning message in the kernel log came from the USB subsystem core, but 
> the driver was also kinda faulty as it didn't implement all power management 
> callbacks (even though the missing one isn't mandatory). The two patches 
> address different issues, they are complementary.
>   
Ok, thanks for both of your explanations.

I tested SVN uvcvideo on a kernel without Alans patch, and it's fine.  I
can suspend and resume without any errors.  I also checked it works
using the Kopete settings dialogue, which includes a webcam demo.

Regards
Alan


From alan-jenkins at tuffmail.co.uk  Thu Aug 21 12:52:18 2008
From: alan-jenkins at tuffmail.co.uk (Alan Jenkins)
Date: Thu, 21 Aug 2008 11:52:18 +0100
Subject: [Linux-uvc-devel] 2.6.27-rc2: uvcvideo breaks after suspend to
 ram
In-Reply-To: <Pine.LNX.4.44L0.0808201707550.14505-100000@iolanthe.rowland.org>
References: <Pine.LNX.4.44L0.0808201707550.14505-100000@iolanthe.rowland.org>
Message-ID: <48AD48E2.4000302@tuffmail.co.uk>

Laurent Pinchart wrote:
> On Wednesday 20 August 2008, Alan Jenkins wrote:
>   
>> Laurent Pinchart wrote:
>>     
>>> Hi Alan,
>>>       
>>> I've added a reset_resume method to the UVC driver. Could you please test
>>> the latest SVN revision and tell me if it helps ?
>>>       
>> Alan Stern said the problem was that USB needed to move to the new PM
>> ops.  He posted a patch for this which fixed my problem (the scary
>> WARNING with call-trace).
>>
>> So I'll try to test SVN but it's not very interesting :-).
>>     
>
> The warning message in the kernel log came from the USB subsystem core, but 
> the driver was also kinda faulty as it didn't implement all power management 
> callbacks (even though the missing one isn't mandatory). The two patches 
> address different issues, they are complementary.
>   
Ok, thanks for both of your explanations.

I tested SVN uvcvideo on a kernel without Alans patch, and it's fine.  I
can suspend and resume without any errors.  I also checked it works
using the Kopete settings dialogue, which includes a webcam demo.

Regards
Alan


From g.longo3 at gmail.com  Fri Aug 22 14:29:11 2008
From: g.longo3 at gmail.com (Giuseppe Longo)
Date: Fri, 22 Aug 2008 14:29:11 +0200
Subject: [Linux-uvc-devel] New device tested
In-Reply-To: <71b5c9b80808220514p2f20bf49sc5f3805d0f0b004f@mail.gmail.com>
References: <71b5c9b80808220514p2f20bf49sc5f3805d0f0b004f@mail.gmail.com>
Message-ID: <71b5c9b80808220529t1c3c7ec2wbeb0dce0fddd40b1@mail.gmail.com>

Hi all,
Thanks for your hard work.

I tried my old camera (Webcam mode) and it worked flawlessly with Ekiga, but
not with Skype.
It's a Fujifilm FinePix A340 with 04cb : 014c as USB ids.

My distro is Ubuntu Hardy Heron and I tested it with kernel
2.6.24-19-generic.

Regards,
Giuseppe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080822/8e782e31/attachment.html>

From artem at makhutov.org  Tue Aug 26 17:56:44 2008
From: artem at makhutov.org (Artem Makhutov)
Date: Tue, 26 Aug 2008 17:56:44 +0200
Subject: [Linux-uvc-devel] Control Tilt/Pan of Logitech Sphere MP
Message-ID: <20080826155644.GF7830@moelleritberatung.de>

Hi,

I would like to control the tilt/pan of my Logitech Sphere MP.

According to
http://www.quickcamteam.net/documentation/faq/i-have-a-logitech-quickcam-orbit-sphere-mp-why-dont-the-pan-tilt-buttons-in-luvcview-work
the API was changed and thats why the controls in luvcview are not
working.

Has somebody a patch for luvcview?

An other nice feature would be if the control could be accessed via
procfs so it would be possible to do a

echo PosX,PosY > /proc/driver/uvcvideo/card0/rotor

to make the camera rotate or

echo off > /proc/driver/uvcvideo/card0/statusled

to disable the led.

Is it possible to implement such a feature?

Thanks, Artem


From artem at makhutov.org  Tue Aug 26 17:58:46 2008
From: artem at makhutov.org (Artem Makhutov)
Date: Tue, 26 Aug 2008 17:58:46 +0200
Subject: [Linux-uvc-devel] Turn off status LED on Logitech Sphere MP
Message-ID: <20080826155845.GG7830@moelleritberatung.de>

Hi,

is it possible to turn off the status LED of a Logitech Sphere MP?

How can this be done?

Thanks, Artem


From pj.assis at gmail.com  Tue Aug 26 18:10:36 2008
From: pj.assis at gmail.com (Paulo Assis)
Date: Tue, 26 Aug 2008 17:10:36 +0100
Subject: [Linux-uvc-devel] Turn off status LED on Logitech Sphere MP
In-Reply-To: <20080826155845.GG7830@moelleritberatung.de>
References: <20080826155845.GG7830@moelleritberatung.de>
Message-ID: <48B42AFC.3090808@gmail.com>

Hi,

Maybe you want to try libwebcam (command line):
http://www.quickcamteam.net/software/libwebcam

or guvcview  http://developer.berlios.de/projects/guvcview/

Both of them provide Pan/Tilt functionality.

LED control is only available in more recent cameras, I'm not sure about
Sphere MP but in Sphere AF it works well.
Since it is available as a dynamic control, in the latest driver
revisions you will need admin privileges  in order to add  it to the driver,
just start libwebcam or guvcview as root (sudo for Debian/Ubuntu) at
least once, then you can just use a regular user and these controls will
be available.
Libwebcam also installs a udev script that  should take care of dynamic
controls without the need for the admin user app start.

Bets regards,
Paulo



Artem Makhutov escreveu:
> Hi,
>
> is it possible to turn off the status LED of a Logitech Sphere MP?
>
> How can this be done?
>
> Thanks, Artem
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>   



From artem at makhutov.org  Wed Aug 27 19:19:32 2008
From: artem at makhutov.org (Artem Makhutov)
Date: Wed, 27 Aug 2008 19:19:32 +0200
Subject: [Linux-uvc-devel] Turn off status LED on Logitech Sphere MP
In-Reply-To: <48B42AFC.3090808@gmail.com>
References: <20080826155845.GG7830@moelleritberatung.de>
	<48B42AFC.3090808@gmail.com>
Message-ID: <20080827171931.GH7830@moelleritberatung.de>

Hi,

On Tue, Aug 26, 2008 at 05:10:36PM +0100, Paulo Assis wrote:
> Hi,
> 
> Maybe you want to try libwebcam (command line):
> http://www.quickcamteam.net/software/libwebcam
> 
> or guvcview  http://developer.berlios.de/projects/guvcview/
> 
> Both of them provide Pan/Tilt functionality.
> 
> LED control is only available in more recent cameras, I'm not sure about
> Sphere MP but in Sphere AF it works well.
> Since it is available as a dynamic control, in the latest driver
> revisions you will need admin privileges  in order to add  it to the driver,
> just start libwebcam or guvcview as root (sudo for Debian/Ubuntu) at
> least once, then you can just use a regular user and these controls will
> be available.
> Libwebcam also installs a udev script that  should take care of dynamic
> controls without the need for the admin user app start.

Thank you for the info. I have compiled libwebcam-svn and can control
the pan/tilt with uvcdynctrl. The LED-control also works well.

To compile guvcview I had to remove some lines in v4l2uvc.h.
Now guvcview works too, but I don't see the Tilt/Pan controles there.
I have only a "Pan/Tilt (reset)" button.

Any idea, how to get the controls working in guvcview?

Thank you, Artem


From pj.assis at gmail.com  Thu Aug 28 00:09:03 2008
From: pj.assis at gmail.com (Paulo Assis)
Date: Wed, 27 Aug 2008 23:09:03 +0100
Subject: [Linux-uvc-devel] Turn off status LED on Logitech Sphere MP
In-Reply-To: <20080827171931.GH7830@moelleritberatung.de>
References: <20080826155845.GG7830@moelleritberatung.de>
	<48B42AFC.3090808@gmail.com>
	<20080827171931.GH7830@moelleritberatung.de>
Message-ID: <59cf47a80808271509o3d407fa4s19e106287321ca7@mail.gmail.com>

Hi Artem,
Like I said in my previous post, Pan/Tilt are dynamic controls, and in
more recent linux-uvc revisions they need admin privileges in order to
be added to the driver controls.
I don't know what system you are running but if you start guvcview as
root at least once per session ( sudo for debian/Ubuntu ) all the
controls should be available, unless those lines you removed are the
ones related to the controls definition  ( it would be nice if you
could post me the compile errors with the original v4l2uvc.h so that I
could fix it for future versions ;-) )
guvcview uses the exact same control id as libwebcam so if it works
with libwebcam it should also work with guvcview.
When you get the Pan Tilt controls working you can also use the cursor
keys in the video window to control Pan Tilt instead of the buttons in
the control window.

Best regards,
Paulo

2008/8/27 Artem Makhutov <artem at makhutov.org>:
> Hi,
>
> On Tue, Aug 26, 2008 at 05:10:36PM +0100, Paulo Assis wrote:
>> Hi,
>>
>> Maybe you want to try libwebcam (command line):
>> http://www.quickcamteam.net/software/libwebcam
>>
>> or guvcview  http://developer.berlios.de/projects/guvcview/
>>
>> Both of them provide Pan/Tilt functionality.
>>
>> LED control is only available in more recent cameras, I'm not sure about
>> Sphere MP but in Sphere AF it works well.
>> Since it is available as a dynamic control, in the latest driver
>> revisions you will need admin privileges  in order to add  it to the driver,
>> just start libwebcam or guvcview as root (sudo for Debian/Ubuntu) at
>> least once, then you can just use a regular user and these controls will
>> be available.
>> Libwebcam also installs a udev script that  should take care of dynamic
>> controls without the need for the admin user app start.
>
> Thank you for the info. I have compiled libwebcam-svn and can control
> the pan/tilt with uvcdynctrl. The LED-control also works well.
>
> To compile guvcview I had to remove some lines in v4l2uvc.h.
> Now guvcview works too, but I don't see the Tilt/Pan controles there.
> I have only a "Pan/Tilt (reset)" button.
>
> Any idea, how to get the controls working in guvcview?
>
> Thank you, Artem
>


From artem at makhutov.org  Thu Aug 28 00:25:10 2008
From: artem at makhutov.org (Artem Makhutov)
Date: Thu, 28 Aug 2008 00:25:10 +0200
Subject: [Linux-uvc-devel] Turn off status LED on Logitech Sphere MP
In-Reply-To: <59cf47a80808271509o3d407fa4s19e106287321ca7@mail.gmail.com>
References: <20080826155845.GG7830@moelleritberatung.de>
	<48B42AFC.3090808@gmail.com>
	<20080827171931.GH7830@moelleritberatung.de>
	<59cf47a80808271509o3d407fa4s19e106287321ca7@mail.gmail.com>
Message-ID: <20080827222510.GJ7830@moelleritberatung.de>

Hi Paulo,

On Wed, Aug 27, 2008 at 11:09:03PM +0100, Paulo Assis wrote:
> Hi Artem,
> Like I said in my previous post, Pan/Tilt are dynamic controls, and in
> more recent linux-uvc revisions they need admin privileges in order to
> be added to the driver controls.
> I don't know what system you are running but if you start guvcview as
> root at least once per session ( sudo for debian/Ubuntu )

Yes, I have tried starting it as root, the tilt/pan controls are just
not there. Only the reset button is there.

I am using Gentoo linux :)

> all the controls should be available, unless those lines you removed are the
> ones related to the controls definition  ( it would be nice if you
> could post me the compile errors with the original v4l2uvc.h so that I
> could fix it for future versions ;-) )

Yes, maybe I have removed something to much ;)
I have attached the compilation errors.

> guvcview uses the exact same control id as libwebcam so if it works
> with libwebcam it should also work with guvcview.
> When you get the Pan Tilt controls working you can also use the cursor
> keys in the video window to control Pan Tilt instead of the buttons in
> the control window.

The cursor keys are not working for me too :(
It would be great if you could fix it.

Regards, Artem
-------------- next part --------------
A non-text attachment was scrubbed...
Name: error.txt.gz
Type: application/octet-stream
Size: 1220 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080828/755c318a/attachment.obj>

From pj.assis at gmail.com  Thu Aug 28 10:58:17 2008
From: pj.assis at gmail.com (Paulo Assis)
Date: Thu, 28 Aug 2008 09:58:17 +0100
Subject: [Linux-uvc-devel] Turn off status LED on Logitech Sphere MP
In-Reply-To: <20080827222510.GJ7830@moelleritberatung.de>
References: <20080826155845.GG7830@moelleritberatung.de>
	<48B42AFC.3090808@gmail.com>
	<20080827171931.GH7830@moelleritberatung.de>
	<59cf47a80808271509o3d407fa4s19e106287321ca7@mail.gmail.com>
	<20080827222510.GJ7830@moelleritberatung.de>
Message-ID: <48B668A9.8000901@gmail.com>

Artem,
Can you please try the last svn revision (svn checkout
http://svn.berlios.de/svnroot/repos/guvcview/trunk)
The problem is related to the kernell version, there were some changes
in the v4l2 api that were causing the redefinition errors, I just
renamed the ones that were causing problems, so it should be OK now(
it's not a  pretty solution but until there is a stable v4l2 api, it's
the easiest one).
PS: I can only test the changes later today, so it's possible that some
errors may persist, or maybe some new ones, so if you have the chance to
test it before I do , please post me the make output.

Many thanks,
Paulo

Artem Makhutov escreveu:
> Hi Paulo,
>
> On Wed, Aug 27, 2008 at 11:09:03PM +0100, Paulo Assis wrote:
>   
>> Hi Artem,
>> Like I said in my previous post, Pan/Tilt are dynamic controls, and in
>> more recent linux-uvc revisions they need admin privileges in order to
>> be added to the driver controls.
>> I don't know what system you are running but if you start guvcview as
>> root at least once per session ( sudo for debian/Ubuntu )
>>     
>
> Yes, I have tried starting it as root, the tilt/pan controls are just
> not there. Only the reset button is there.
>
> I am using Gentoo linux :)
>
>   
>> all the controls should be available, unless those lines you removed are the
>> ones related to the controls definition  ( it would be nice if you
>> could post me the compile errors with the original v4l2uvc.h so that I
>> could fix it for future versions ;-) )
>>     
>
> Yes, maybe I have removed something to much ;)
> I have attached the compilation errors.
>
>   
>> guvcview uses the exact same control id as libwebcam so if it works
>> with libwebcam it should also work with guvcview.
>> When you get the Pan Tilt controls working you can also use the cursor
>> keys in the video window to control Pan Tilt instead of the buttons in
>> the control window.
>>     
>
> The cursor keys are not working for me too :(
> It would be great if you could fix it.
>
> Regards, Artem
>   



From artem at makhutov.org  Thu Aug 28 15:14:00 2008
From: artem at makhutov.org (Artem Makhutov)
Date: Thu, 28 Aug 2008 15:14:00 +0200
Subject: [Linux-uvc-devel] Turn off status LED on Logitech Sphere MP
In-Reply-To: <48B668A9.8000901@gmail.com>
References: <20080826155845.GG7830@moelleritberatung.de>
	<48B42AFC.3090808@gmail.com>
	<20080827171931.GH7830@moelleritberatung.de>
	<59cf47a80808271509o3d407fa4s19e106287321ca7@mail.gmail.com>
	<20080827222510.GJ7830@moelleritberatung.de>
	<48B668A9.8000901@gmail.com>
Message-ID: <20080828131400.GK7830@moelleritberatung.de>

Hi,

On Thu, Aug 28, 2008 at 09:58:17AM +0100, Paulo Assis wrote:
> Artem,
> Can you please try the last svn revision (svn checkout
> http://svn.berlios.de/svnroot/repos/guvcview/trunk)
> The problem is related to the kernell version, there were some changes
> in the v4l2 api that were causing the redefinition errors, I just
> renamed the ones that were causing problems, so it should be OK now(
> it's not a  pretty solution but until there is a stable v4l2 api, it's
> the easiest one).
> PS: I can only test the changes later today, so it's possible that some
> errors may persist, or maybe some new ones, so if you have the chance to
> test it before I do , please post me the make output.

I have attached the compile output. It does not compile, but there are
less error messages than in 0.92.

I am using kernel 2.6.26.2.

Regards, Artem
-------------- next part --------------
A non-text attachment was scrubbed...
Name: compile.txt.gz
Type: application/octet-stream
Size: 857 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080828/e886a8e9/attachment.obj>

From pj.assis at gmail.com  Thu Aug 28 15:32:08 2008
From: pj.assis at gmail.com (Paulo Assis)
Date: Thu, 28 Aug 2008 14:32:08 +0100
Subject: [Linux-uvc-devel] Turn off status LED on Logitech Sphere MP
In-Reply-To: <20080828131400.GK7830@moelleritberatung.de>
References: <20080826155845.GG7830@moelleritberatung.de>
	<48B42AFC.3090808@gmail.com>
	<20080827171931.GH7830@moelleritberatung.de>
	<59cf47a80808271509o3d407fa4s19e106287321ca7@mail.gmail.com>
	<20080827222510.GJ7830@moelleritberatung.de>
	<48B668A9.8000901@gmail.com>
	<20080828131400.GK7830@moelleritberatung.de>
Message-ID: <48B6A8D8.10009@gmail.com>

Sorry,
Can you try again.
I'm editing the code in my office computer (windows XP ;-( ), so besides
not being able to test it, once in a while, some strange characters are
added into the files and I need to open them in a hexeditor to remove it.

Thanks,
Paulo

Artem Makhutov escreveu:
> Hi,
>
> On Thu, Aug 28, 2008 at 09:58:17AM +0100, Paulo Assis wrote:
>   
>> Artem,
>> Can you please try the last svn revision (svn checkout
>> http://svn.berlios.de/svnroot/repos/guvcview/trunk)
>> The problem is related to the kernell version, there were some changes
>> in the v4l2 api that were causing the redefinition errors, I just
>> renamed the ones that were causing problems, so it should be OK now(
>> it's not a  pretty solution but until there is a stable v4l2 api, it's
>> the easiest one).
>> PS: I can only test the changes later today, so it's possible that some
>> errors may persist, or maybe some new ones, so if you have the chance to
>> test it before I do , please post me the make output.
>>     
>
> I have attached the compile output. It does not compile, but there are
> less error messages than in 0.92.
>
> I am using kernel 2.6.26.2.
>
> Regards, Artem
>   



From lhecking at users.sourceforge.net  Thu Aug 28 16:04:56 2008
From: lhecking at users.sourceforge.net (lhecking at users.sourceforge.net)
Date: Thu, 28 Aug 2008 15:04:56 +0100 (IST)
Subject: [Linux-uvc-devel] Camera stopped working
Message-ID: <20080828140456.9E5BC4E362@cork.irdesign.cypress.com>


 Hi all,

 My laptop camera stopped working recently, I presume when I upgraded to
 kernel version 2.6.25. I then tried 2.6.26 with the integrated uvc driver,
 but with the same result; the camera LED flashes twice during boot (udev
 and hald), yet it doesn't work in e.g. skype. Tested the current version
 in gentoo stable (233?) and svn.

 dmesg:
...
Linux video capture interface: v2.00
usbcore: registered new interface driver uvcvideo
USB Video Class driver (v0.1.0)
...
uvcvideo: Found UVC 1.00 device Laptop Integrated Webcam (05a9:2640)
uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -32 (exp. 26).
input: Laptop Integrated Webcam as /class/input/input5

 Running mplayer (yes, I read the comments about mplayer in the archives :)
 gives ioctl related errors:

| $ mplayer tv:// -tv driver=v4l2:device=/dev/video0:mjpeg:fps=30
| MPlayer dev-SVN-r26753-4.1.2 (C) 2000-2008 MPlayer Team
| CPU: Intel(R) Core(TM)2 Duo CPU     T7300  @ 2.00GHz (Family: 6, Model: 15, Stepping: 10)
| CPUflags:  MMX: 1 MMX2: 1 3DNow: 0 3DNow2: 0 SSE: 1 SSE2: 1
| Compiled for x86 CPU with extensions: MMX MMX2 SSE SSE2
| 
| Playing tv://.
| TV file format detected.
| Selected driver: v4l2
|  name: Video 4 Linux 2 input
|  author: Martin Olschewski <olschewski at zpr.uni-koeln.de>
|  comment: first try, more to come ;-)
| v4l2: ioctl get standard failed: Invalid argument
| Selected device: Laptop Integrated Webcam
|  Capabilites:  video capture  streaming
|  supported norms:
|  inputs: 0 = Camera 1;
|  Current input: 0
|  Current format: MJPEG
| v4l2: ioctl set format failed: Invalid argument
| v4l2: ioctl set format failed: Invalid argument
| v4l2: ioctl set format failed: Invalid argument
| v4l2: ioctl set format failed: Invalid argument
| v4l2: ioctl set format failed: Invalid argument
| v4l2: ioctl set format failed: Invalid argument
| v4l2: ioctl set format failed: Invalid argument
| v4l2: ioctl set format failed: Invalid argument
| tv.c: norm_from_string(pal): Bogus norm parameter, setting default.
| v4l2: ioctl enum norm failed: Invalid argument
| Error: Cannot set norm!
|   MJP: width 352 height 288
| Selected input hasn't got a tuner!
| v4l2: ioctl set mute failed: Invalid argument
| ==========================================================================
| Opening video decoder: [ffmpeg] FFmpeg's libavcodec codec family
| Selected video codec: [ffmjpeg] vfm: ffmpeg (FFmpeg MJPEG decoder)
| ==========================================================================
| Audio: no sound
| Starting playback...
| VDec: vo config request - 160 x 120 (preferred colorspace: Planar 422P)
| Could not find matching colorspace - retrying with -vf scale...
| Opening video filter: [scale]
| VDec: using Planar 422P as output csp (no 1)
| Movie-Aspect is nan:1 - prescaling to correct movie aspect.
| SwScaler: reducing / aligning filtersize 1 -> 4
| SwScaler: reducing / aligning filtersize 1 -> 4
| SwScaler: reducing / aligning filtersize 1 -> 1
| SwScaler: reducing / aligning filtersize 9 -> 8
| [swscaler @ 0x8762018]BICUBIC scaler, from yuv422p to yuv420p using MMX2
| [swscaler @ 0x8762018]using 4-tap MMX scaler for horizontal luminance scaling
| [swscaler @ 0x8762018]using 4-tap MMX scaler for horizontal chrominance scaling
| [swscaler @ 0x8762018]using 1-tap MMX "scaler" for vertical scaling (YV12 like)
| [swscaler @ 0x8762018]160x120 -> 160x120
| VO: invalid dimensions!
| FATAL: Cannot initialize video driver.
| VDec: vo config request - 160 x 120 (preferred colorspace: Planar 422P)
| VDec: using Planar 422P as output csp (no 1)
| Movie-Aspect is nan:1 - prescaling to correct movie aspect.
| VO: invalid dimensions!
| FATAL: Cannot initialize video driver.
| 
| FATAL: Could not initialize video filters (-vf) or video output (-vo).
| 
| 
| 
| MPlayer interrupted by signal 8 in module: free_demuxer
| - MPlayer crashed by bad usage of CPU/FPU/RAM.
|   Recompile MPlayer with --enable-debug and make a 'gdb' backtrace and
|   disassembly. Details in DOCS/HTML/en/bugreports_what.html#bugreports_crash.
| - MPlayer crashed. This shouldn't happen.
|   It can be a bug in the MPlayer code _or_ in your drivers _or_ in your
|   gcc version. If you think it's MPlayer's fault, please read
|   DOCS/HTML/en/bugreports.html and follow the instructions there. We can't and
|   won't help unless you provide this information when reporting a possible bug.

 Any ideas?




From pj.assis at gmail.com  Thu Aug 28 16:16:50 2008
From: pj.assis at gmail.com (Paulo Assis)
Date: Thu, 28 Aug 2008 15:16:50 +0100
Subject: [Linux-uvc-devel] Turn off status LED on Logitech Sphere MP
In-Reply-To: <20080828135745.GL7830@moelleritberatung.de>
References: <20080826155845.GG7830@moelleritberatung.de>
	<48B42AFC.3090808@gmail.com>
	<20080827171931.GH7830@moelleritberatung.de>
	<59cf47a80808271509o3d407fa4s19e106287321ca7@mail.gmail.com>
	<20080827222510.GJ7830@moelleritberatung.de>
	<48B668A9.8000901@gmail.com>
	<20080828131400.GK7830@moelleritberatung.de>
	<48B6A8D8.10009@gmail.com>
	<20080828135745.GL7830@moelleritberatung.de>
Message-ID: <48B6B352.3020103@gmail.com>

Artem Makhutov escreveu:
> Hi,
>
> On Thu, Aug 28, 2008 at 02:32:08PM +0100, Paulo Assis wrote:
>   
>> Sorry,
>> Can you try again.
>>     
>
> No problem ;)
>
>   
>> I'm editing the code in my office computer (windows XP ;-( ), so besides
>> not being able to test it, once in a while, some strange characters are
>> added into the files and I need to open them in a hexeditor to remove it.
>>     
>
> Don't you have a ssh connection to a linux box?
>   
I wish !  I'm a state employee and my office looks like the pentagon,
except  for http and ftp connections everything else is locked.
> What editor are you using in WinXP?
>
> Try out notepad++:
> http://notepad-plus.sourceforge.net
>
>   
Yes, I'm using notepad++ (the latest version) but like I said sometimes
I got those strange characters ('\357' ,'\273' , '\277') that break
compilation.
> It is pretty nice and can encode unix,mac and windows file formats.
>
> I have attached a new compile log.
>
> Regards, Artem
>
>   

I hope it's OK now :-), if you don't mind  testing it again.

Thanks,
Paulo


From artem at makhutov.org  Thu Aug 28 17:15:15 2008
From: artem at makhutov.org (Artem Makhutov)
Date: Thu, 28 Aug 2008 17:15:15 +0200
Subject: [Linux-uvc-devel] Turn off status LED on Logitech Sphere MP
In-Reply-To: <48B6B352.3020103@gmail.com>
References: <20080826155845.GG7830@moelleritberatung.de>
	<48B42AFC.3090808@gmail.com>
	<20080827171931.GH7830@moelleritberatung.de>
	<59cf47a80808271509o3d407fa4s19e106287321ca7@mail.gmail.com>
	<20080827222510.GJ7830@moelleritberatung.de>
	<48B668A9.8000901@gmail.com>
	<20080828131400.GK7830@moelleritberatung.de>
	<48B6A8D8.10009@gmail.com>
	<20080828135745.GL7830@moelleritberatung.de>
	<48B6B352.3020103@gmail.com>
Message-ID: <20080828151514.GM7830@moelleritberatung.de>

Hi,

On Thu, Aug 28, 2008 at 03:16:50PM +0100, Paulo Assis wrote:
> Artem Makhutov escreveu:
> > Hi,
> >
> > On Thu, Aug 28, 2008 at 02:32:08PM +0100, Paulo Assis wrote:
> > Don't you have a ssh connection to a linux box?
> >   
> I wish !  I'm a state employee and my office looks like the pentagon,
> except  for http and ftp connections everything else is locked.

Heh, ok :(

> I hope it's OK now :-), if you don't mind  testing it again.

It compiles ok now. I will try it out when I am home.

Regards, Artem


From artem at makhutov.org  Thu Aug 28 18:05:45 2008
From: artem at makhutov.org (Artem Makhutov)
Date: Thu, 28 Aug 2008 18:05:45 +0200
Subject: [Linux-uvc-devel] Turn off status LED on Logitech Sphere MP
In-Reply-To: <20080828151514.GM7830@moelleritberatung.de>
References: <48B42AFC.3090808@gmail.com>
	<20080827171931.GH7830@moelleritberatung.de>
	<59cf47a80808271509o3d407fa4s19e106287321ca7@mail.gmail.com>
	<20080827222510.GJ7830@moelleritberatung.de>
	<48B668A9.8000901@gmail.com>
	<20080828131400.GK7830@moelleritberatung.de>
	<48B6A8D8.10009@gmail.com>
	<20080828135745.GL7830@moelleritberatung.de>
	<48B6B352.3020103@gmail.com>
	<20080828151514.GM7830@moelleritberatung.de>
Message-ID: <20080828160544.GN7830@moelleritberatung.de>

Hi,

On Thu, Aug 28, 2008 at 05:15:15PM +0200, Artem Makhutov wrote:
> Hi,
> 
> On Thu, Aug 28, 2008 at 03:16:50PM +0100, Paulo Assis wrote:
> > Artem Makhutov escreveu:
> > > Hi,
> > >
> > > On Thu, Aug 28, 2008 at 02:32:08PM +0100, Paulo Assis wrote:
> > > Don't you have a ssh connection to a linux box?
> > >   
> > I wish !  I'm a state employee and my office looks like the pentagon,
> > except  for http and ftp connections everything else is locked.
> 
> Heh, ok :(
> 
> > I hope it's OK now :-), if you don't mind  testing it again.
> 
> It compiles ok now. I will try it out when I am home.

Great, it works well now. All controlls are where they should be.

One last issue:

When I quit guvcview it always segfaults. Both version 0.9.2 and
svn-trunk are segfaulting.

I have attached two log files:

guvcview-Fehlerbericht.txt.gz: is a gnome error log - guvcview was started as usual user
segfault.txt.gz: is a console log - guvcview was started as root

Do you need more debug?

Thanks, Artem
-------------- next part --------------
A non-text attachment was scrubbed...
Name: guvcview-Fehlerbericht.txt.gz
Type: application/octet-stream
Size: 1268 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080828/c756cf4c/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: segfault.txt.gz
Type: application/octet-stream
Size: 518 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080828/c756cf4c/attachment-0001.obj>

From pj.assis at gmail.com  Thu Aug 28 18:09:35 2008
From: pj.assis at gmail.com (Paulo Assis)
Date: Thu, 28 Aug 2008 17:09:35 +0100
Subject: [Linux-uvc-devel] Turn off status LED on Logitech Sphere MP
In-Reply-To: <20080828160544.GN7830@moelleritberatung.de>
References: <48B42AFC.3090808@gmail.com>
	<20080827171931.GH7830@moelleritberatung.de>
	<59cf47a80808271509o3d407fa4s19e106287321ca7@mail.gmail.com>
	<20080827222510.GJ7830@moelleritberatung.de>
	<48B668A9.8000901@gmail.com>
	<20080828131400.GK7830@moelleritberatung.de>
	<48B6A8D8.10009@gmail.com>
	<20080828135745.GL7830@moelleritberatung.de>
	<48B6B352.3020103@gmail.com>
	<20080828151514.GM7830@moelleritberatung.de>
	<20080828160544.GN7830@moelleritberatung.de>
Message-ID: <48B6CDBF.4060609@gmail.com>

Artem,
If you could run guvcview with the verbose option (guvcview --verbose)
and post me the console output it would be great.

Thanks
Paulo

Artem Makhutov escreveu:
> Hi,
>
> On Thu, Aug 28, 2008 at 05:15:15PM +0200, Artem Makhutov wrote:
>   
>> Hi,
>>
>> On Thu, Aug 28, 2008 at 03:16:50PM +0100, Paulo Assis wrote:
>>     
>>> Artem Makhutov escreveu:
>>>       
>>>> Hi,
>>>>
>>>> On Thu, Aug 28, 2008 at 02:32:08PM +0100, Paulo Assis wrote:
>>>> Don't you have a ssh connection to a linux box?
>>>>   
>>>>         
>>> I wish !  I'm a state employee and my office looks like the pentagon,
>>> except  for http and ftp connections everything else is locked.
>>>       
>> Heh, ok :(
>>
>>     
>>> I hope it's OK now :-), if you don't mind  testing it again.
>>>       
>> It compiles ok now. I will try it out when I am home.
>>     
>
> Great, it works well now. All controlls are where they should be.
>
> One last issue:
>
> When I quit guvcview it always segfaults. Both version 0.9.2 and
> svn-trunk are segfaulting.
>
> I have attached two log files:
>
> guvcview-Fehlerbericht.txt.gz: is a gnome error log - guvcview was started as usual user
> segfault.txt.gz: is a console log - guvcview was started as root
>
> Do you need more debug?
>
> Thanks, Artem
>   



From artem at makhutov.org  Thu Aug 28 18:28:24 2008
From: artem at makhutov.org (Artem Makhutov)
Date: Thu, 28 Aug 2008 18:28:24 +0200
Subject: [Linux-uvc-devel] Turn off status LED on Logitech Sphere MP
In-Reply-To: <48B6CDBF.4060609@gmail.com>
References: <59cf47a80808271509o3d407fa4s19e106287321ca7@mail.gmail.com>
	<20080827222510.GJ7830@moelleritberatung.de>
	<48B668A9.8000901@gmail.com>
	<20080828131400.GK7830@moelleritberatung.de>
	<48B6A8D8.10009@gmail.com>
	<20080828135745.GL7830@moelleritberatung.de>
	<48B6B352.3020103@gmail.com>
	<20080828151514.GM7830@moelleritberatung.de>
	<20080828160544.GN7830@moelleritberatung.de>
	<48B6CDBF.4060609@gmail.com>
Message-ID: <20080828162824.GO7830@moelleritberatung.de>

Hi,

On Thu, Aug 28, 2008 at 05:09:35PM +0100, Paulo Assis wrote:
> > [...]
> Artem,
> If you could run guvcview with the verbose option (guvcview --verbose)
> and post me the console output it would be great.

I have attached the logfile.

Regards, Artem
-------------- next part --------------
A non-text attachment was scrubbed...
Name: segfault.txt.gz
Type: application/octet-stream
Size: 1592 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080828/4f18a23e/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: segfault-root.txt.gz
Type: application/octet-stream
Size: 1578 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080828/4f18a23e/attachment-0001.obj>

From laurent.pinchart at skynet.be  Fri Aug 29 23:02:52 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 29 Aug 2008 23:02:52 +0200
Subject: [Linux-uvc-devel] Control Tilt/Pan of Logitech Sphere MP
In-Reply-To: <20080826155644.GF7830@moelleritberatung.de>
References: <20080826155644.GF7830@moelleritberatung.de>
Message-ID: <200808292302.52600.laurent.pinchart@skynet.be>

Hi Artem,

On Tuesday 26 August 2008, Artem Makhutov wrote:
> Hi,
>
> I would like to control the tilt/pan of my Logitech Sphere MP.
>
> According to
> http://www.quickcamteam.net/documentation/faq/i-have-a-logitech-quickcam-or
>bit-sphere-mp-why-dont-the-pan-tilt-buttons-in-luvcview-work the API was
> changed and thats why the controls in luvcview are not working.
>
> Has somebody a patch for luvcview?

Not that I know of, by feel free to submit a patch :-)

> An other nice feature would be if the control could be accessed via
> procfs so it would be possible to do a
>
> echo PosX,PosY > /proc/driver/uvcvideo/card0/rotor
>
> to make the camera rotate or
>
> echo off > /proc/driver/uvcvideo/card0/statusled
>
> to disable the led.
>
> Is it possible to implement such a feature?

This should be implemented through sysfs instead of procfs. The idea has been 
floating around for some time. Instead of exposing individual controls 
through sysfs at the driver level, this is the kind of function that should 
be handled by the videodev layer.

There are a few command-line tools that can get/set individual controls by 
name. Have a look at uvcdynctrl or v4l2-ctl.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Aug 29 23:10:00 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 29 Aug 2008 23:10:00 +0200
Subject: [Linux-uvc-devel] New device tested
In-Reply-To: <71b5c9b80808220529t1c3c7ec2wbeb0dce0fddd40b1@mail.gmail.com>
References: <71b5c9b80808220514p2f20bf49sc5f3805d0f0b004f@mail.gmail.com>
	<71b5c9b80808220529t1c3c7ec2wbeb0dce0fddd40b1@mail.gmail.com>
Message-ID: <200808292310.01025.laurent.pinchart@skynet.be>

Hi Giuseppe,

On Friday 22 August 2008, Giuseppe Longo wrote:
> Hi all,
> Thanks for your hard work.
>
> I tried my old camera (Webcam mode) and it worked flawlessly with Ekiga,
> but not with Skype.
> It's a Fujifilm FinePix A340 with 04cb : 014c as USB ids.
>
> My distro is Ubuntu Hardy Heron and I tested it with kernel
> 2.6.24-19-generic.

Could you please send me the ouput of

lsusb -v -d 04cb:014c

with usbutils 0.72 or newer (0.73+ preferred) ?

Thanks.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Aug 29 23:13:37 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 29 Aug 2008 23:13:37 +0200
Subject: [Linux-uvc-devel] UVC-compliant USB video capture card
In-Reply-To: <48ABF720.3010608@redembedded.com>
References: <48ABF720.3010608@redembedded.com>
Message-ID: <200808292313.37726.laurent.pinchart@skynet.be>

On Wednesday 20 August 2008, Darren Longhorn wrote:
> Does anyone know of such a device?

I suppose you mean a UVC-compatible USB-based video capture device with a 
composite and/or component video input ? I've never run across such a device. 
If you find one, please report it to the list.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Aug 29 23:33:52 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 29 Aug 2008 23:33:52 +0200
Subject: [Linux-uvc-devel] USB microphone breaks Logitech QuickCam Pro
	9000
In-Reply-To: <1219185676.11541.43.camel@watkins-desktop>
References: <1219185676.11541.43.camel@watkins-desktop>
Message-ID: <200808292333.53108.laurent.pinchart@skynet.be>

Hi Robert,

On Wednesday 20 August 2008, Robert Watkins wrote:
> Hi,
>
> I think I may have the same problem as detailed in
> https://lists.berlios.de/pipermail/linux-uvc-devel/2008-July/003765.html
> but I haven't got the space to fit an extra pci card. I'm hoping there is
> another answer.
>
> The webcam appears to work excellently...
>
> 	watkins at watkins-desktop:~$ luvcview -d /dev/video1
> 	luvcview version 0.2.1
> 	Video driver: x11
> 	A window manager is available
> 	video /dev/video1
>
> until any application uses a USB microphone, i.e.
>
> 	watkins at watkins-desktop:~$ cat /dev/dsp4
>
> then the picture breaks up, freezes and luvcview dies a few seconds later.
>
> 	watkins at watkins-desktop:~$ luvcview -d /dev/video1
> 	luvcview version 0.2.1
> 	Video driver: x11
> 	A window manager is available
> 	video /dev/video1
> 	Ignoring empty buffer ...
> 	Ignoring empty buffer ...
> 	Ignoring empty buffer ...
> 	Ignoring empty buffer ...
> 	Unable to dequeue buffer (22).
> 	Error grabbing
> 	 Clean Up done Quit
> 	watkins at watkins-desktop:~$
>
> I tried using a different USB microphone, i.e. cat /dev/dsp3, but it dies
> just the same. I tried with and without USB hubs, but it dies just the
> same.
>
> I tried the webcam in my old Toshiba Satellite laptop, and it doesn't
> appear to have the problem. (Unfortunately 400MHz and 198M of ram is not
> going to work well with Skype.)
>
> Any help would be greatly appreciated.
> Will any USB webcam work for me and my box of ATI chips?

The short answer is: probably.

Most webcam vendors test their products with Windows only (fortunately the 
situation is slowly evolving with Linux getting more vendor awareness - the 
Logitech webcam team getting is very Linux friendly). This leads to subtle 
timing-related bugs in the webcams to stay undetected when the cameras are 
used with Windows, but to crash the device when plugged into a Linux box. As 
the bugs are timing-related, the crashes frequency depends on the hardware 
configuration.

Some Logitech webcams are known to suffer from such firmware bugs. There is 
unfortunately no fix.

Best regards,

Laurent Pinchart


From lists at brachttal.net  Sat Aug 30 10:09:25 2008
From: lists at brachttal.net (Andreas Volz)
Date: Sat, 30 Aug 2008 10:09:25 +0200
Subject: [Linux-uvc-devel] Logitech Quickcam E3500
In-Reply-To: <200808172220.20581.laurent.pinchart@skynet.be>
References: <20080807210112.2fc3f6c4@frodo.mittelerde>
	<200808172220.20581.laurent.pinchart@skynet.be>
Message-ID: <20080830100925.461f036a@frodo.mittelerde>

Am Sun, 17 Aug 2008 22:20:20 +0200 schrieb Laurent Pinchart:

> Hi Andreas,
> 
> On Thursday 07 August 2008, Andreas Volz wrote:
> > Hello,
> >
> > I got a Logitech Quickcam E3500 instead of my old not supported
> > camera. This one works really great.
> >
> > luvcview: OK
> > guvcview: OK
> > ekiga: OK
> > Skype: OK
> > video quality: OK
> >
> > But now I noticed that if one of these applications start the video
> > then my USB mouse goes crazy. Some basic functions work, but
> > sometimes mouse clicks are emitted when they shouldn't. Also the
> > cursor jumps sometimes about some pixels. It's not really possible
> > to work with the mouse if the camera is active.
> >
> > Any ideas what's the problem or how to go deeper into it?
> 
> I really got no idea. Does it happen with all applications ? If so

Yeds.

> you should probably contact the linux-usb mailing list, this seems to
> be a more generic issue. It would also be interesting to test a
> non-USB mouse if you can connect one to the computer.

I plugged another USB PCI card into my computer and connected the
webcam to one of this ports. Now it works without influence to the
USB mouse. Seems to be a more generic USB problem. However, it
works now! :-)

regards
Andreas


From hixon.alexander at mediati.org  Sun Aug 31 13:40:43 2008
From: hixon.alexander at mediati.org (Alex Hixon)
Date: Sun, 31 Aug 2008 12:40:43 +0100
Subject: [Linux-uvc-devel] linux-uvc and r5u870
Message-ID: <ff0f76ee7f443f172755662fa0aaad7d@localhost>


Hi Laurent,

Way back in April last year, Sam Revitch sent an email to
linux-uvc-devel[1] announcing the work he had been doing on r5u870, which
provided a working webcam to those users with cameras using the Ricoh
chipset. In January this year, I took up the task of maintaining the driver
(since Sam had seemingly gone MIA). Maintaining an out-of-kernel driver and
having very little time to tend to it (we now support 15 different camera
models, up from 3 ;) has become very difficult as of late, and bug reports
regarding conflicts between the r5u870 and uvcvideo modules seem to
becoming more and more frequent. uvcvideo also seems to do a better job at
the UVC stuff than the other driver on most devices, anyway.

I've done a bit of hacking in an effort to retrofit uvcvideo with the
firmware-loading functionality of the original r5u870 driver. It appears to
work reasonably well. However, before I go and work on something worth
committing, I was just curious as to whether I should be attempting to
implement it in the kernel module (less work for me :) or as a userspace
application.

One thing that might be an issue that I'm not sure was ever resolved in the
communication between yourself and Chris was that regarding the UVC
controls. As you might remember, the microcode that gets uploaded to the
camera doesn't report all the controls it supports. Would it be possible to
use some of the quirk modes provided by uvcvideo to get around that?

Cheers,
Alex Hixon

[1]
http://lists.berlios.de/pipermail/linux-uvc-devel/2007-April/001563.html



From laurent.pinchart at skynet.be  Sun Aug 31 23:15:54 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 31 Aug 2008 23:15:54 +0200
Subject: [Linux-uvc-devel] linux-uvc and r5u870
In-Reply-To: <ff0f76ee7f443f172755662fa0aaad7d@localhost>
References: <ff0f76ee7f443f172755662fa0aaad7d@localhost>
Message-ID: <200808312315.55764.laurent.pinchart@skynet.be>

Hi Alex,

On Sunday 31 August 2008, Alex Hixon wrote:
> Hi Laurent,
>
> Way back in April last year, Sam Revitch sent an email to
> linux-uvc-devel[1] announcing the work he had been doing on r5u870, which
> provided a working webcam to those users with cameras using the Ricoh
> chipset. In January this year, I took up the task of maintaining the driver
> (since Sam had seemingly gone MIA). Maintaining an out-of-kernel driver and
> having very little time to tend to it (we now support 15 different camera
> models, up from 3 ;) has become very difficult as of late, and bug reports
> regarding conflicts between the r5u870 and uvcvideo modules seem to
> becoming more and more frequent. uvcvideo also seems to do a better job at
> the UVC stuff than the other driver on most devices, anyway.
>
> I've done a bit of hacking in an effort to retrofit uvcvideo with the
> firmware-loading functionality of the original r5u870 driver. It appears to
> work reasonably well. However, before I go and work on something worth
> committing, I was just curious as to whether I should be attempting to
> implement it in the kernel module (less work for me :) or as a userspace
> application.

I've discussed firmware loading issues previously with iSight developers, and 
I wasn't very keen on adding firmware loading support to the UVC driver, 
especially with a userspace utility already available (the iSight is based on 
a Cypress chip). How do Ricoh webcams enumerate when the firmware is not 
loaded ? Is the firmware loading protocol specific to Ricoh devices ?

> One thing that might be an issue that I'm not sure was ever resolved in the
> communication between yourself and Chris was that regarding the UVC
> controls. As you might remember, the microcode that gets uploaded to the
> camera doesn't report all the controls it supports. Would it be possible to
> use some of the quirk modes provided by uvcvideo to get around that?

Could you list the Ricoh "features" that are not UVC-compliant ? Are the 
non-reported controls addressed with standard UVC requests or with a 
proprietary protocol ?

Best regards,

Laurent Pinchart


