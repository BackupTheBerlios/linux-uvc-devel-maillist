From t.st1 at gmx.net  Sun Jul  1 11:14:34 2007
From: t.st1 at gmx.net (Tom St)
Date: Sun, 01 Jul 2007 11:14:34 +0200
Subject: [Linux-uvc-devel] uvc streamer
Message-ID: <4687707A.3010409@gmx.net>

Hello,
I have written an application for Linux-UVC that provides a M-JPEG
stream. Now i am looking for the right place to publish the sources and
documentation. Before opening a new project i would like to ask for if
the Linux-UVC wiki is the right place for the documentation and if i
should check-in the application in a subfolder of your repository.

Kind regards,
Tom


From t.st1 at gmx.net  Sun Jul  1 11:17:56 2007
From: t.st1 at gmx.net (Tom St)
Date: Sun, 01 Jul 2007 11:17:56 +0200
Subject: [Linux-uvc-devel] Wiki
Message-ID: <46877144.2050107@gmx.net>

Hello,
Who is able to set a link in the subsection "documentation" to the
english wiki [1]?

If it is not linked, no one will find nor use it.

Regards,
Tom

[1] http://openfacts.berlios.de/index-en.phtml?title=Linux+UVC


From freqmod at gmail.com  Sun Jul  1 23:54:03 2007
From: freqmod at gmail.com (Frederik M.J. Vestre)
Date: Sun, 1 Jul 2007 23:54:03 +0200
Subject: [Linux-uvc-devel] DV-capture program for NV-GS 37
In-Reply-To: <20070628223205.13d0f347@frodo.mittelerde>
References: <200706211144.19658.freqmod@gmail.com>
	<20070628223205.13d0f347@frodo.mittelerde>
Message-ID: <200707012354.03627.freqmod@gmail.com>

Sorry, I was on holyday so my server was down (powered off because of thunder 
reasons). It should be up at least 1/2 week from now. If it is not you can 
use: http://pastebin.com/940159 (should last forever)

Frederik


From ernih at gmx.de  Mon Jul  2 00:17:08 2007
From: ernih at gmx.de (ernih at gmx.de)
Date: Mon, 2 Jul 2007 00:17:08 +0200
Subject: [Linux-uvc-devel] driver 5986:0100 linux" and "0x45:6270 linux
Message-ID: <200707020017.08510.ernih@gmx.de>

hi i need drivers for:

5986:0100 linux" and "0x45:6270 linux

when will it be finished?

thx
erhan


From sven.burmeister at gmx.net  Mon Jul  2 01:01:19 2007
From: sven.burmeister at gmx.net (Sven Burmeister)
Date: Mon, 2 Jul 2007 01:01:19 +0200
Subject: [Linux-uvc-devel] driver 5986:0100 linux" and "0x45:6270 linux
In-Reply-To: <200707020017.08510.ernih@gmx.de>
References: <200707020017.08510.ernih@gmx.de>
Message-ID: <200707020101.19579.sven.burmeister@gmx.net>

Hi!

On Montag, 2. Juli 2007, ernih at gmx.de wrote:
> hi i need drivers for:
>
> 5986:0100 linux" and "0x45:6270 linux
>
> when will it be finished?

I guess that depends on the bounty you are willing to pay. Or alternatively: 
it's done when it's done.

Sven


From ernih at gmx.de  Mon Jul  2 02:01:20 2007
From: ernih at gmx.de (ernih at gmx.de)
Date: Mon, 2 Jul 2007 02:01:20 +0200
Subject: [Linux-uvc-devel] driver 5986:0100 linux" and "0x45:6270 linux
In-Reply-To: <200707020101.19579.sven.burmeister@gmx.net>
References: <200707020017.08510.ernih@gmx.de>
	<200707020101.19579.sven.burmeister@gmx.net>
Message-ID: <200707020201.20713.ernih@gmx.de>

On Monday 02 July 2007 01:01:19 Sven Burmeister wrote:
> Hi!
>
> On Montag, 2. Juli 2007, ernih at gmx.de wrote:
> > hi i need drivers for:
> >
> > 5986:0100 linux" and "0x45:6270 linux
> >
> > when will it be finished?
>
> I guess that depends on the bounty you are willing to pay. Or
> alternatively: it's done when it's done.
>
> Sven
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel

what does it will cost?
when it will be ca. finished?


From smari at yaxic.org  Tue Jul  3 10:53:34 2007
From: smari at yaxic.org (=?ISO-8859-1?Q?Sm=E1ri_McCarthy?=)
Date: Tue, 03 Jul 2007 08:53:34 +0000
Subject: [Linux-uvc-devel] Logitech quickcam pro 5000 and AMD64
Message-ID: <468A0E8E.1070108@yaxic.org>

Hi there,

   I've been browsing around the list archives and couldn't see that 
anybody has had this little problem before.

   Running the most recent UVC driver from SVN (and multiple older 
versions) I can get the video working just fine under ekiga, but if I 
try to access the microphone three things happen in sequence: 1) The 
webcam image goes fuzzy, then green. 2) Ekiga crashes but does not die 
3) The microphone input starts to loop until Ekiga is killed manually.

   I think 3 is more or less a logical result of 2, but why do 1 and 2 
occur and more importantly how do I fix it?

   Some details:

	Debian unstable/testing, amd64 version
	CPU: AMD Turion(tm) 64 X2 Mobile Technology TL-50
	Ekiga version 2.0.3
	Cam: Logitech QuickCam Pro 5000

	Cam not available through camorama (fails with "Could not connect to 
video device (/dev/video0). Please check connection")

	- Don't know what else to try

---- UVC module output with verbose mode on ;) ----
usb 1-2: configuration #1 chosen from 1 choice
uvcvideo: Probing generic UVC device 2
uvcvideo: Found format MJPEG.
uvcvideo: - 160x120 (30.0 fps)
uvcvideo: - 176x144 (30.0 fps)
uvcvideo: - 320x240 (15.0 fps)
uvcvideo: - 352x288 (15.0 fps)
uvcvideo: - 640x480 (15.0 fps)
uvcvideo: Found format Uncompressed.
uvcvideo: - 160x120 (30.0 fps)
uvcvideo: - 176x144 (30.0 fps)
uvcvideo: - 320x240 (15.0 fps)
uvcvideo: - 352x288 (15.0 fps)
uvcvideo: - 640x480 (15.0 fps)
uvcvideo: Found a Status endpoint (addr 87).
uvcvideo: Found UVC 1.00 device <unnamed> (046d:08ce)
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/2 to device 
2 entity 2 

uvcvideo: Added control 00000000-0000-0000-0000-000000000101/3 to device 
2 entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/7 to device 
2 entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/8 to device 
2 entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/1 to device 
2 entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/4 to device 
2 entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/5 to device 
2 entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/2 to device 
2 entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/4 to device 
2 entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/11 to 
device 2 entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/10 to 
device 2 entity 2
uvcvideo: Scanning UVC chain: OT 5 <- XU 4 (-> XU 12 8 10 11) <- XU 3 
(-> XU 13) <- PU 2 <- IT 1
uvcvideo: Found a valid video chain (1 -> 5).
uvcvideo: UVC device initialized.



Thanks in advance and sorry for posting to the devel mailing list with 
bloody userland troubles. (Perhaps I can make it up to you in terms of 
code?)

	- Sm?ri


From jasny at vidsoft.de  Tue Jul  3 16:00:20 2007
From: jasny at vidsoft.de (Gregor Jasny)
Date: Tue, 03 Jul 2007 16:00:20 +0200
Subject: [Linux-uvc-devel] Logitech quickcam pro 5000 and AMD64
In-Reply-To: <468A0E8E.1070108@yaxic.org>
References: <468A0E8E.1070108@yaxic.org>
Message-ID: <468A5674.1050804@vidsoft.de>

Hi Sm?ri,

Sm?ri McCarthy schrieb:
>    Running the most recent UVC driver from SVN (and multiple older 
> versions) I can get the video working just fine under ekiga, but if I 
> try to access the microphone three things happen in sequence: 1) The 
> webcam image goes fuzzy, then green. 2) Ekiga crashes but does not die 
> 3) The microphone input starts to loop until Ekiga is killed manually.

The sound is handled by the snd-usb-audio ALSA module. Maybe you should 
try their latest version.

If you record sound from your camera using arecord, and start the 
capturing with i.e. luvcview afterwards, does it also explode?

> Thanks in advance and sorry for posting to the devel mailing list with 
> bloody userland troubles. (Perhaps I can make it up to you in terms of 
> code?)

If your camera is connected to an USB hub, please try also connecting 
directly.

Cheers,
Gregor


From pauljurczak at yahoo.com  Thu Jul  5 04:52:15 2007
From: pauljurczak at yahoo.com (Paul Jurczak)
Date: Wed, 4 Jul 2007 19:52:15 -0700 (PDT)
Subject: [Linux-uvc-devel] Creative Optia AF uncompressed format
Message-ID: <521899.32266.qm@web60515.mail.yahoo.com>

Hi Damian,

it's great to hear that another camera works with Linux UVC driver. Could you find out, if uncompressed format is raw Bayer data (1 byte per pixel)? Creative Labs press release about Optia AF suggests so.

Regards,
Paul.


       
____________________________________________________________________________________
Got a little couch potato? 
Check out fun summer activities for kids.
http://search.yahoo.com/search?fr=oni_on_mail&p=summer+activities+for+kids&cs=bz 


From laurent.pinchart at skynet.be  Thu Jul  5 20:29:52 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 5 Jul 2007 20:29:52 +0200
Subject: [Linux-uvc-devel] [Webcam & DVB] UVC & EM28XX modules: can I
	make them both work?
In-Reply-To: <467EB94C.5090005@giopas.eu>
References: <46746383.1070102@giopas.eu> <46783EB4.8000307@giopas.eu>
	<467EB94C.5090005@giopas.eu>
Message-ID: <200707052029.52431.laurent.pinchart@skynet.be>

Hi Giopas,

> giopas wrote:
> > Laurent Pinchart wrote:
> >>> What do you suggest to do?
> >>
> >> Contact the em28xx maintainer ? ;-)
> >
> > Thanks Laurent, I just did it!
> >
> > enjoy, ;)
> > giopas
>
> Hi Laurent, I did not received any suggest/answer by dvb module's
> mantainer, I've found instead this email:
> http://osdir.com/ml/linux.drivers.uvc.devel/2007-01/msg00181.html
>
> Could you please have a look at it, because it looks exactelly like my
> problem.

It seems you are indeed hitting the same issue. I can't really help you there 
though, as I never tried to use uvcvideo along with the em28xx module.

Sorry.

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Jul  5 20:43:41 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 5 Jul 2007 20:43:41 +0200
Subject: [Linux-uvc-devel] Support for frame-based payloads
In-Reply-To: <857056.17051.qm@web63915.mail.re1.yahoo.com>
References: <857056.17051.qm@web63915.mail.re1.yahoo.com>
Message-ID: <200707052043.41570.laurent.pinchart@skynet.be>

Hi Harri,

On Monday 25 June 2007, Harri Klapuri wrote:
> Hi Laurent,
>
> >> I know. Actually the problem is the same for stream-based because
> >> the GUID is needed there, too.
> >
> > You're right, but MPEG should still not be a frame-based format :-)
>
> Usually MPEG formats are transmitted as streams but encoders
> and decoders often work on full frames. Forcing the frames
> into a byte-oriented stream seems like a loss of information.

Isn't that information embedded in the MPEG stream anyway ?

> Isn't V4L2 inherently frame-oriented or is there a way to
> pass streams/packets, too? A stream contains frame indicators
> of course, so the driver could be looking for them but that
> means more work for the driver.

V4L2 is buffer oriented. If I'm not mistaken, a buffer is not required to be 
filled with a complete video frame. The driver will return MPEG video data to 
userspace without bothering to check frame boundaries.

> > Has MS defined GUIDs for the different MPEG payloads ?
>
> I am not aware of anything useful in this area.

:-(

> >> It is not out yet (available for sale). Besides the typical MJPEG
> >> and Uncompressed, it supports frame-based payloads.
> >
> > Will it support MPEG as well ?
>
> It is possible. In any case I anticipate the number of
> MPEG4 devices is going to increase pretty soon.

I agree with you there. However, I'd rather wait for the first devices to hit 
the market before adding frame-based MPEG support. As stated before, MPEG 
should be stream-based, so I hope no devices will return MPEG data in a 
frame-based format.

I committed frame-based formats support but removed MPEG support for now. 
Let's discuss the MPEG issue when real-life examples will be available.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Jul  5 21:07:31 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 5 Jul 2007 21:07:31 +0200
Subject: [Linux-uvc-devel] uvc streamer
In-Reply-To: <4687707A.3010409@gmx.net>
References: <4687707A.3010409@gmx.net>
Message-ID: <200707052107.32018.laurent.pinchart@skynet.be>

Hi Tom,

On Sunday 01 July 2007, Tom St wrote:
> Hello,
> I have written an application for Linux-UVC that provides a M-JPEG
> stream. Now i am looking for the right place to publish the sources and
> documentation. Before opening a new project i would like to ask for if
> the Linux-UVC wiki is the right place for the documentation and if i
> should check-in the application in a subfolder of your repository.

Nice to see your interest in the Linux UVC driver. Is your application 
specific to the UVC driver, or is it generic enough to be useful with other 
video input devices as well ?

You are welcome to mention your application in the Linux UVC wiki, but I'd 
rather not host third-party applications in the SVN repository, especially if 
they are not specific to the UVC driver. It would be easier to open a new 
account on Berlios, or to host the sources on your personal web page.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Jul  5 21:13:00 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 5 Jul 2007 21:13:00 +0200
Subject: [Linux-uvc-devel] Wiki
In-Reply-To: <46877144.2050107@gmx.net>
References: <46877144.2050107@gmx.net>
Message-ID: <200707052113.01974.laurent.pinchart@skynet.be>

Hi Tom,

On Sunday 01 July 2007, Tom St wrote:
> Hello,
> Who is able to set a link in the subsection "documentation" to the
> english wiki [1]?
>
> If it is not linked, no one will find nor use it.
>
> Regards,
> Tom
>
> [1] http://openfacts.berlios.de/index-en.phtml?title=Linux+UVC

I had completely forgotten about the wiki :-) I added a link in the 
documentation section.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Jul  5 21:21:53 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 5 Jul 2007 21:21:53 +0200
Subject: [Linux-uvc-devel] driver 5986:0100 linux" and "0x45:6270 linux
In-Reply-To: <200707020017.08510.ernih@gmx.de>
References: <200707020017.08510.ernih@gmx.de>
Message-ID: <200707052121.53492.laurent.pinchart@skynet.be>

Hi,

On Monday 02 July 2007, ernih at gmx.de wrote:
> hi i need drivers for:
>
> 5986:0100 linux" and "0x45:6270 linux

For the 5986:0100, please try the latest release from SVN and report any issue 
you run into.

For the 0x45:6270, I assume you mean 0c45:6270. That device is not UVC 
compliant, and will never be supported by the Linux UVC driver. You should 
check the spca5xx driver, or the newer related gspca driver.

> when will it be finished?

As a side note, asking for other people to work for you without saying please 
is considered as quite crude, to say the least.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Jul  5 21:24:17 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 5 Jul 2007 21:24:17 +0200
Subject: [Linux-uvc-devel] Creative Optia AF uncompressed format
In-Reply-To: <521899.32266.qm@web60515.mail.yahoo.com>
References: <521899.32266.qm@web60515.mail.yahoo.com>
Message-ID: <200707052124.17803.laurent.pinchart@skynet.be>

Hi Paul,

On Thursday 05 July 2007, Paul Jurczak wrote:
> Hi Damian,
>
> it's great to hear that another camera works with Linux UVC driver. Could
> you find out, if uncompressed format is raw Bayer data (1 byte per pixel)?
> Creative Labs press release about Optia AF suggests so.

No, the uncompressed format is standard YUV. Raw Bayer mode might be 
accessible through the vendor-specific extension unit, but I have no 
documentation regarding that.

Regards,

Laurent Pinchart


From mrechberger at gmail.com  Fri Jul  6 12:14:39 2007
From: mrechberger at gmail.com (Markus Rechberger)
Date: Fri, 6 Jul 2007 12:14:39 +0200
Subject: [Linux-uvc-devel] Linux-uvc-devel Digest, Vol 13, Issue 6
In-Reply-To: <mailman.95.1183716148.28596.linux-uvc-devel@lists.berlios.de>
References: <mailman.95.1183716148.28596.linux-uvc-devel@lists.berlios.de>
Message-ID: <d9def9db0707060314o133fcdcdn6f91b6f83073c6e@mail.gmail.com>

On 7/6/07, linux-uvc-devel-request at lists.berlios.de
<linux-uvc-devel-request at lists.berlios.de> wrote:
> Send Linux-uvc-devel mailing list submissions to
>         linux-uvc-devel at lists.berlios.de
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> or, via email, send a message with subject or body 'help' to
>         linux-uvc-devel-request at lists.berlios.de
>
> You can reach the person managing the list at
>         linux-uvc-devel-owner at lists.berlios.de
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of Linux-uvc-devel digest..."
>
>
> Today's Topics:
>
>    1. Re: [Webcam & DVB] UVC & EM28XX modules: can I    make them both
>       work? (Laurent Pinchart)
>    2. Re: Support for frame-based payloads (Laurent Pinchart)
>    3. Re: uvc streamer (Laurent Pinchart)
>    4. Re: Wiki (Laurent Pinchart)
>    5. Re: driver 5986:0100 linux" and "0x45:6270 linux
>       (Laurent Pinchart)
>    6. Re: Creative Optia AF uncompressed format (Laurent Pinchart)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Thu, 5 Jul 2007 20:29:52 +0200
> From: Laurent Pinchart <laurent.pinchart at skynet.be>
> Subject: Re: [Linux-uvc-devel] [Webcam & DVB] UVC & EM28XX modules:
>         can I   make them both work?
> To: linux-uvc-devel at lists.berlios.de
> Message-ID: <200707052029.52431.laurent.pinchart at skynet.be>
> Content-Type: text/plain;  charset="iso-8859-1"
>
> Hi Giopas,
>
> > giopas wrote:
> > > Laurent Pinchart wrote:
> > >>> What do you suggest to do?
> > >>
> > >> Contact the em28xx maintainer ? ;-)
> > >
> > > Thanks Laurent, I just did it!
> > >
> > > enjoy, ;)
> > > giopas
> >
> > Hi Laurent, I did not received any suggest/answer by dvb module's
> > mantainer, I've found instead this email:
> > http://osdir.com/ml/linux.drivers.uvc.devel/2007-01/msg00181.html
> >
> > Could you please have a look at it, because it looks exactelly like my
> > problem.
>
> It seems you are indeed hitting the same issue. I can't really help you there
> though, as I never tried to use uvcvideo along with the em28xx module.
>
> Sorry.

run make kernel-links in the v4l-dvb directory of the em28xx driver,
afterwards recompile the uvc driver.

However I'll push the latest em28xx driver officially online next
week, currently it's only available to selected developers who're
interested.

Markus


From t.st1 at gmx.net  Fri Jul  6 14:19:35 2007
From: t.st1 at gmx.net (Tom St)
Date: Fri, 06 Jul 2007 14:19:35 +0200
Subject: [Linux-uvc-devel] uvc streamer
In-Reply-To: <200707052107.32018.laurent.pinchart@skynet.be>
References: <4687707A.3010409@gmx.net>
	<200707052107.32018.laurent.pinchart@skynet.be>
Message-ID: <468E3357.1090605@gmx.net>

Hello,
> Nice to see your interest in the Linux UVC driver. Is your application 
> specific to the UVC driver, or is it generic enough to be useful with other 
> video input devices as well ?
>  


It is based on luvcview. I added a multithreaded M-JPEG server on top of
it and removed all SDL related stuff to make it compile for embedded
platforms like OpenWRT as well.

> You are welcome to mention your application in the Linux UVC wiki, but I'd 
> rather not host third-party applications in the SVN repository, especially if 
> they are not specific to the UVC driver. It would be easier to open a new 
> account on Berlios, or to host the sources on your personal web page.
>   

Ok, thanks for the response. I will look for another place then and add
a subpage to your wiki as soon as i have found the right place for the
software. In addition i plan to write a HowTo for the OpenWrt wiki.

Greetings,
Tom





From sonix at exocosm.net  Fri Jul  6 17:20:43 2007
From: sonix at exocosm.net (Blaine Horrocks)
Date: Fri, 6 Jul 2007 11:20:43 -0400
Subject: [Linux-uvc-devel] Fails to use V-Gear Talkcam MX6 AF for 2.6.19.1
	or above
Message-ID: <3EEFAFCA-D6D3-4C18-AE67-92C2FEB7D545@exocosm.net>

I just bought the same cam and it looks like later kernels / driver  
revs fix your problem.

At least my install looks a bit cleaner.

svn rev 113 driver
ubuntu feisty kernel 2.6.20-16-generic #2 SMP Thu Jun 7 19:00:28 UTC  
2007 x86_64 GNU/Linux


[169505.978166] uvcvideo: Found UVC 1.00 device USB 2.0 Camera  
(0c45:62c0)
[169505.976029] usbcore: registered new interface driver uvcvideo
[169505.976154] USB Video Class driver (v0.1.0)


There are some minor differences on the driver output from lsusb -v  :

You have

        bmVideoStandards     0x74
           PAL - 625/50
           NTSC - 625/50
           PAL - 525/60

While I'm getting

        bmVideoStandards     0x0


Using  ./luvcview -f yuv    gets video output.


Blaine



From compressor at gmail.com  Fri Jul  6 23:59:18 2007
From: compressor at gmail.com (Suneel Suresh)
Date: Fri, 6 Jul 2007 16:59:18 -0500
Subject: [Linux-uvc-devel] openCV cvRetrieveFrame segmentation fault with
	uvc on 046d:08c1
Message-ID: <9bfce4760707061459x24a98804s5c666c149b6ee178@mail.gmail.com>

hi there
            after 2 days i was able to finally get my logitech
quickcam fusion (046d:08c1) to work in ekiga. But the real reason i
want to use this is for a project using intel's openCV API. I get a
segmentation fault when making one of the API calls. And no the
segmentation fault is not due to an error in my program. Below are a
few lines of code
/*********************************************************/
_captureVideo = cvCaptureFromCAM(0); // specify a capture device
if(_captureVideo==NULL) // check if camera is registered in system
{
	cout<<"Camera was not detected in the system"<<endl;	
	exit(-1);
}	

IplImage* img = NULL;
char *imgData = NULL;
char *pixData = NULL;

if(cvGrabFrame(_captureVideo)) // capture a frame . API returns 1
here, so its ok
{
	cout<<"["<<endl;
        cout<<"{"<<_captureVideo<<"}"<<endl;  // mem address is not null
	img = cvRetrieveFrame(_captureVideo);    // retrieve the captured frame			
        // the above api call cvRetrieveFrame causes segmentation fault !!			
	cout<<"]"<<endl;
}
/*********************************************************/
Output of program
[
{0x52bee0}
Segmentation fault

please developers of uvc help!

regards
suneel


From mw-nb at niafc.de  Sat Jul  7 15:10:44 2007
From: mw-nb at niafc.de (Matthias)
Date: Sat, 7 Jul 2007 15:10:44 +0200
Subject: [Linux-uvc-devel] Vega USB 2.0 working
Message-ID: <20070707131044.GA7418@niafc.de>

Hi list members,

I re-send this mail since it bounced yesterday sending without being
subscribed to this list. Hope it will make it way this time.

I am the proud owner of a shiny new Samsung Q45 laptop, which has an
integrated UVC-compatible camera. The vendor and product IDs are:

Bus 001 Device 002: ID 0ac8:c302 Z-Star Microelectronics Corp.

Please see attached the output of 'lsusb -v' for the device. As the
pre-installed Windows driver seemed to point to an UVC-capable device, I
went ahead and just added vendor and product ID to uvc_driver.c - and it
just worked (tm).

So please find attached the output of 'lsusb -v' for the camera device
and a small patch done via 'LC_ALL=C svndiff' against revision 111.

Keep up the great work,

Matthias
-------------- next part --------------
A non-text attachment was scrubbed...
Name: vega_usb20.diff
Type: text/x-diff
Size: 720 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070707/aacd977b/attachment.diff>
-------------- next part --------------

Bus 001 Device 002: ID 0ac8:c302 Z-Star Microelectronics Corp. 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x0ac8 Z-Star Microelectronics Corp.
  idProduct          0xc302 
  bcdDevice            1.00
  iManufacturer           1 Vimicro Corp.
  iProduct                2 Vega USB 2.0 Camera.
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          619
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0 
      iFunction               2 Vega USB 2.0 Camera.
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0 
      iInterface              2 Vega USB 2.0 Camera.
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           79
        dwClockFrequency       24.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0 
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x0004000a
          Auto-Exposure Mode
          Exposure Time (Absolute)
          Privacy
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 2
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000177f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Gain
          Power Line Frequency
          White Balance Temperature, Auto
        iProcessing             0 
        bmVideoStandards     0x 9
          None
          SECAM - 625/50
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               2
        iTerminal               0 
      VideoControl Interface Descriptor:
        bLength                28
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {a917c75d-4119-11da-ae0e-000d56ac7b4c}
        bNumControl            13
        bNrPins                 1
        baSourceID( 0)          1
        bControlSize            3
        bmControls( 0)       0xf9
        bmControls( 1)       0x1f
        bmControls( 2)       0x18
        iExtension              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x000a  1x 10 bytes
        bInterval               5
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormarts                        1
        wTotalLength                    33281
        bEndPointAddress                    0
        bmInfo                              3
        bTerminalLink                       2
        bStillCaptureMethod                 1
        bTriggerSupport                     1
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                6
        guidFormat                            {32595559-0000-0010-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            54
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                 24576000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  7
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666667
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           1333333
        dwFrameInterval( 6)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            54
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                 24576000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  7
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666667
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           1333333
        dwFrameInterval( 6)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            54
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                 24576000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  7
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666667
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           1333333
        dwFrameInterval( 6)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            54
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                 24576000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  7
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666667
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           1333333
        dwFrameInterval( 6)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            54
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                 24576000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  7
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666667
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           1333333
        dwFrameInterval( 6)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                104857600
        dwMaxBitRate                209715200
        dwMaxVideoFrameBufferSize     2621440
        dwDefaultFrameInterval        2000000
        bFrameIntervalType                  2
        dwFrameInterval( 0)           1333333
        dwFrameInterval( 1)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               6
        wWidth( 0)                        640
        wHeight( 0)                       480
        wWidth( 1)                        352
        wHeight( 1)                       288
        wWidth( 2)                        320
        wHeight( 2)                       240
        wWidth( 3)                        176
        wHeight( 3)                       144
        wWidth( 4)                        160
        wHeight( 4)                       120
        wWidth( 5)                       1280
        wHeight( 5)                      1024
        bNumCompressionPatterns             6
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     0 (Unspecified)
        bTransferCharacteristics            0 (Unspecified)
        bMatrixCoefficients                 0 (Unspecified)
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0400  1x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b00  2x 768 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0c00  2x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1380  3x 896 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       7
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 0 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)

From xbenlau at gmail.com  Sun Jul  8 14:06:02 2007
From: xbenlau at gmail.com (Ben Lau)
Date: Sun, 8 Jul 2007 20:06:02 +0800
Subject: [Linux-uvc-devel] Fails to use V-Gear Talkcam MX6 AF for
	2.6.19.1 or above
In-Reply-To: <7BD729AF-1CB6-4122-8233-BCFCECA3EE4E@exocosm.net>
References: <7BD729AF-1CB6-4122-8233-BCFCECA3EE4E@exocosm.net>
Message-ID: <f9a7555e0707080506g7a487467s4035cbf5903a439@mail.gmail.com>

Hi Blaine,

    Thank you for your reply. However, getting a later kernel and
driver rev do not fix my problem. It has been tested with 2.6.21.3 +
rev 113 , 2.6.20.6 + rev 113. The only solution I found is to set the
value of UVC_CTRL_TIMEOUT in the source from 300 to some higher value
like 1000. Then the camera works.

Index: uvcvideo.h
===================================================================
--- uvcvideo.h  (revision 113)
+++ uvcvideo.h  (working copy)
@@ -241,7 +241,7 @@
 /* Maximum number of video buffers. */
 #define UVC_MAX_VIDEO_BUFFERS  32

-#define UVC_CTRL_TIMEOUT       300
+#define UVC_CTRL_TIMEOUT       1000

 /* Devices quirks */
 #define UVC_QUIRK_STATUS_INTERVAL      0x00000001


On 7/6/07, Blaine Horrocks <blaine at exocosm.net> wrote:
> Ben,
>
> I just bought the same cam and I'm not getting video either.  However
> it looks like later kernels / driver revs fix your problem.
>
> At least my install looks a bit cleaner.
>
> svn rev 113 driver
> ubuntu feisty kernel 2.6.20-16-generic #2 SMP Thu Jun 7 19:00:28 UTC
> 2007 x86_64 GNU/Linux
>
>
> [169505.978166] uvcvideo: Found UVC 1.00 device USB 2.0 Camera
> (0c45:62c0)
> [169505.976029] usbcore: registered new interface driver uvcvideo
> [169505.976154] USB Video Class driver (v0.1.0)
>
>
> There are some minor differences on the driver output from lsusb -v  :
>
> You have
>
>         bmVideoStandards     0x74
>            PAL - 625/50
>            NTSC - 625/50
>            PAL - 525/60
>
> While I'm getting
>
>         bmVideoStandards     0x0
>
>
> I'm not getting video yet tho:
>
> ###  luvcview -l
> luvcview version 0.2.1
> Video driver: x11
> A window manager is available
> video /dev/video0
> Unable to set format: 22.
> Init v4L2 failed !! exit fatal
>
> Any ideas anyone?
>
>
> Blaine
>
>
>


From t.st1 at gmx.net  Mon Jul  9 22:45:55 2007
From: t.st1 at gmx.net (Tom St)
Date: Mon, 09 Jul 2007 22:45:55 +0200
Subject: [Linux-uvc-devel] uvc streamer
In-Reply-To: <200707052107.32018.laurent.pinchart@skynet.be>
References: <4687707A.3010409@gmx.net>
	<200707052107.32018.laurent.pinchart@skynet.be>
Message-ID: <46929E83.7010602@gmx.net>

Hello *,
> You are welcome to mention your application in the Linux UVC wiki, but I'd 
> rather not host third-party applications in the SVN repository, especially if 
> they are not specific to the UVC driver. It would be easier to open a new 
> account on Berlios, or to host the sources on your personal web page.
>   
You can find the sourcecode at my personal website:
http://naaa.de/uvc_streamer.htm

Kind regards,
Tom




From mattfinn at gmail.com  Tue Jul 10 03:42:12 2007
From: mattfinn at gmail.com (Matt Finnicum)
Date: Mon, 9 Jul 2007 18:42:12 -0700
Subject: [Linux-uvc-devel] Support for Microsoft Lifecam NX-6000
Message-ID: <3eba0080707091842j6f2693bav1961f0aeb605789e@mail.gmail.com>

Hey,
I just got this camera recently. It works under linux-uvc, but it
doesn't work well at all (terrible resolution, bad lighting, etc). Is
there something I can do to make the driver recognize it's
capabilities better?

dmesg from when I inserted it:
usb 2-1: new high speed USB device using ehci_hcd and address 3
usb 2-1: configuration #1 chosen from 1 choice
Linux video capture interface: v2.00
uvcvideo: Found UVC 1.00 device Microsoft? LifeCam NX-6000 (045e:00f8)
uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -32 (exp. 26).
uvcvideo: Failed to query (129) UVC control 1 (unit 0) : -32 (exp. 26).
uvcvideo: Failed to initialize the device (-5).
usbcore: registered new interface driver uvcvideo
USB Video Class driver (v0.1.0)
3:3:1 : sample bitwidth 24 in over sample bytes 2
3:3:1: cannot get freq at ep 0x84
usbcore: registered new interface driver snd-usb-audio

lsusb -v:
Bus 002 Device 003: ID 045e:00f8 Microsoft Corp.
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x045e Microsoft Corp.
  idProduct          0x00f8
  bcdDevice            1.00
  iManufacturer           1 Microsoft
  iProduct                2 Microsoft(r) LifeCam NX-6000
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          555
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
    MaxPower              500mA
    UNRECOGNIZED:  08 0b 00 02 0e 03 00 02
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              2 Microsoft(r) LifeCam NX-6000
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              16
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x13fc  3x 1020 bytes
        bInterval               1
        UNRECOGNIZED:  08 0b 02 02 01 01 00 00
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0
      iInterface              0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
     wTotalLength           41
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0
        iTerminal               0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               3
        iTerminal               0
      AudioControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 3
        bSourceID               1
        bControlSize            2
        bmaControls( 0)      0x00
        bmaControls( 0)      0x00
        bmaControls( 1)      0x43
        bmaControls( 1)      0x00
          Mute
          Volume
          Automatic Gain
        iFeature                0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           2
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                35
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         24
        bSamFreqType            9 Discrete
        tSamFreq[ 0]        48000
        tSamFreq[ 1]        44100
        tSamFreq[ 2]        32000
        tSamFreq[ 3]        24000
        tSamFreq[ 4]        22050
        tSamFreq[ 5]        16000
        tSamFreq[ 6]        12000
        tSamFreq[ 7]        11025
        tSamFreq[ 8]         8000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x84  EP 4 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0         8
  bNumConfigurations      1

Thanks,
--Murph


From t.st1 at gmx.net  Tue Jul 10 09:50:00 2007
From: t.st1 at gmx.net (Tom St)
Date: Tue, 10 Jul 2007 09:50:00 +0200
Subject: [Linux-uvc-devel] uvc streamer
In-Reply-To: <469309F3.5020601@astronomicalresearchaustralia.org>
References: <4687707A.3010409@gmx.net>	<200707052107.32018.laurent.pinchart@skynet.be>
	<46929E83.7010602@gmx.net>
	<469309F3.5020601@astronomicalresearchaustralia.org>
Message-ID: <46933A28.4020200@gmx.net>

Hello Brian,
> Decided to try and test this for you.
>   
Thank you!
> I have a quickcam Fusion which is working with luvcview and ekiga.
>
> I unpacked the target at did a make and got
>
> /Documents/SOURCE/UVCStreamer # make
> gcc -O2 -DLINUX   -c -o uvc_stream.o uvc_stream.c
> gcc -O2 -DLINUX   -c -o color.o color.c
> gcc -O2 -DLINUX   -c -o utils.o utils.c
> gcc -O2 -DLINUX   -c -o v4l2uvc.o v4l2uvc.c
> gcc -O2 -DLINUX -lpthread uvc_stream.o color.o utils.o v4l2uvc.o -o
> uvc_stream
> chmod 755 uvc_stream
>
> I did the make as root.
>   
Working as "root" should not be necessary, but should also not silently
fail.
> All the .c files got created but the uvc_stream did not.
>   
The .o files are created, not the .c files :-)

Looks very good. Are you absolutly sure that the file "uvc_stream" was
not created? I am asking because if you call "chmod" with a not
exisiting file, it will report an error message.

What does the command below show to you?
$ ls -la /Documents/SOURCE/UVCStreamer/
> I am running SUSE 10.1 with
>
> gcc --version
> gcc (GCC) 4.1.0 (SUSE Linux)
> Copyright (C) 2006 Free Software Foundation, Inc.
>   
Should work well.
> I have compiled a few things but I am just a beginner at this.
>
> Do I need to do something else?
>   
Nothing else, as far as i know.

Kind regards,
Tom





From sven.burmeister at gmx.net  Tue Jul 10 10:04:34 2007
From: sven.burmeister at gmx.net (Sven Burmeister)
Date: Tue, 10 Jul 2007 10:04:34 +0200
Subject: [Linux-uvc-devel] uvc streamer
In-Reply-To: <46933A28.4020200@gmx.net>
References: <4687707A.3010409@gmx.net>
	<469309F3.5020601@astronomicalresearchaustralia.org>
	<46933A28.4020200@gmx.net>
Message-ID: <200707101004.35062.sven.burmeister@gmx.net>

Hi!

On Dienstag, 10. Juli 2007, Tom St wrote:
> > All the .c files got created but the uvc_stream did not.

Works for me on SuSE 10.2, yet I did not try root, I "made" as user. :)

Silly question, but what do I have to enter in e.g. firefox to see the stream? 
I did not find any hint in the README or on the website.

Sven


From sven.burmeister at gmx.net  Tue Jul 10 10:17:08 2007
From: sven.burmeister at gmx.net (Sven Burmeister)
Date: Tue, 10 Jul 2007 10:17:08 +0200
Subject: [Linux-uvc-devel] uvc streamer
In-Reply-To: <200707101004.35062.sven.burmeister@gmx.net>
References: <4687707A.3010409@gmx.net> <46933A28.4020200@gmx.net>
	<200707101004.35062.sven.burmeister@gmx.net>
Message-ID: <200707101017.08395.sven.burmeister@gmx.net>

On Dienstag, 10. Juli 2007, Sven Burmeister wrote:
> Silly question, but what do I have to enter in e.g. firefox to see the
> stream? I did not find any hint in the README or on the website.

Found it. I did not think that I would be able to read/understand the 
source-code. :)

If I open localhost:8080 in firefox I get a 640x480 picture with I would say 1 
frame per second. Yet it makes firefox use 60% CPU and Xorg 20%, is that 
intended? How can I change the frame-rate and/or size?

I am using it on a 1.4GHz Athlon with 1.5 GB RAM and a Geforce 4 with nvidia's 
binary driver.

Sven

PS: Could this issue have the same reason as ekiga using 70% CPU when 
video-chatting with h261?


From t.st1 at gmx.net  Tue Jul 10 10:43:47 2007
From: t.st1 at gmx.net (Tom St)
Date: Tue, 10 Jul 2007 10:43:47 +0200
Subject: [Linux-uvc-devel] uvc streamer
In-Reply-To: <200707101017.08395.sven.burmeister@gmx.net>
References: <4687707A.3010409@gmx.net>
	<46933A28.4020200@gmx.net>	<200707101004.35062.sven.burmeister@gmx.net>
	<200707101017.08395.sven.burmeister@gmx.net>
Message-ID: <469346C3.6030909@gmx.net>

Hello,
> Found it. I did not think that I would be able to read/understand the 
> source-code. :)
>
> If I open localhost:8080 in firefox I get a 640x480 picture with I would say 1 
> frame per second. Yet it makes firefox use 60% CPU and Xorg 20%, is that 
> intended? How can I change the frame-rate and/or size?
>   
Yes, Firefox is quite slow in displaying M-JPEG streams. You may use VLC
instead, that requires not much ressources. I assume they have a better
way to display and decode the stream than Firefox.

Concerning the setting of framerate etc:
I will add command line switches, that's a promise!

Regards,
Tom




From bnc at astronomicalresearchaustralia.org  Tue Jul 10 17:55:05 2007
From: bnc at astronomicalresearchaustralia.org (Brian)
Date: Wed, 11 Jul 2007 01:55:05 +1000
Subject: [Linux-uvc-devel] uvc streamer
In-Reply-To: <200707101017.08395.sven.burmeister@gmx.net>
References: <4687707A.3010409@gmx.net>
	<46933A28.4020200@gmx.net>	<200707101004.35062.sven.burmeister@gmx.net>
	<200707101017.08395.sven.burmeister@gmx.net>
Message-ID: <4693ABD9.7040007@astronomicalresearchaustralia.org>

Sven,
> Found it. I did not think that I would be able to read/understand the 
> source-code. :)
> 
Thanks for this comment, it got me on the right track.

My problem was that my camera is on /dev/video1.
I went into the source (uvc_stream.c) changed it to video1 and it worked.

> If I open localhost:8080 in firefox I get a 640x480 picture with I would say 1 
> frame per second. Yet it makes firefox use 60% CPU and Xorg 20%, is that 
> intended? How can I change the frame-rate and/or size?
> 
In the source on line 178 you have this

  if (init_videoIn(videoIn, "/dev/video1", 640, 480, 5,
V4L2_PIX_FMT_MJPEG, 1) < 0) {

hardcoded. Again I am not sure if this can be overridden

Also I am using Konqueror as the browser


> I am using it on a 1.4GHz Athlon with 1.5 GB RAM and a Geforce 4 with nvidia's 
> binary driver.
> 
I have about the same system using suse 10.1 and it does not appear to
be using much cpu itself, but konqueror is using about 60%. I only have
an old Matrox card.

> PS: Could this issue have the same reason as ekiga using 70% CPU when 
> video-chatting with h261?
Don't know but if you get an answer can you post to this list.

Brian


From bnc at astronomicalresearchaustralia.org  Tue Jul 10 18:20:30 2007
From: bnc at astronomicalresearchaustralia.org (Brian)
Date: Wed, 11 Jul 2007 02:20:30 +1000
Subject: [Linux-uvc-devel] uvc streamer
In-Reply-To: <469346C3.6030909@gmx.net>
References: <4687707A.3010409@gmx.net>	<46933A28.4020200@gmx.net>	<200707101004.35062.sven.burmeister@gmx.net>	<200707101017.08395.sven.burmeister@gmx.net>
	<469346C3.6030909@gmx.net>
Message-ID: <4693B1CE.40904@astronomicalresearchaustralia.org>

Tom St wrote:

> Yes, Firefox is quite slow in displaying M-JPEG streams. You may use VLC
> instead, that requires not much ressources. I assume they have a better
> way to display and decode the stream than Firefox.
> 
Yes, just done a test on that.
Firefox displayed the first image and said it was still working but
never displayed any more images. Just sat there using all the cpu.
running 2.04.

Tried VLC that work perfectly and uses approx. 10-15% of cpu.


> Concerning the setting of framerate etc:
> I will add command line switches, that's a promise!
> 

Tom, that would be nice, for now we are stuck with changing line 178:)

Brian


From t.st1 at gmx.net  Tue Jul 10 19:32:34 2007
From: t.st1 at gmx.net (Tom St)
Date: Tue, 10 Jul 2007 19:32:34 +0200
Subject: [Linux-uvc-devel] uvc streamer
In-Reply-To: <4693B1CE.40904@astronomicalresearchaustralia.org>
References: <4687707A.3010409@gmx.net>	<46933A28.4020200@gmx.net>	<200707101004.35062.sven.burmeister@gmx.net>	<200707101017.08395.sven.burmeister@gmx.net>
	<469346C3.6030909@gmx.net>
	<4693B1CE.40904@astronomicalresearchaustralia.org>
Message-ID: <4693C2B2.90907@gmx.net>

Hello,
> Yes, just done a test on that.
> Firefox displayed the first image and said it was still working but
> never displayed any more images. Just sat there using all the cpu.
> running 2.04.
>   
I have the same issues with Firefox. But it also happens if i view a
M-JPEG stream originating of an Axis camera with Firefox. So i believe
it is an issue with Firefox and not with my application. If i reload the
page after the first time, the stream is fine.
> Tried VLC that work perfectly and uses approx. 10-15% of cpu.
>   
Yes, perhaps you want to use cambozola later. That is a java applet, so
the stream will also work with Internet Explorer etc.

Have a look at the processes and how much which one consumes. It is not
uvc_stream that eats up the ressources.

> Tom, that would be nice, for now we are stuck with changing line 178:)
>   
Let's see when it will change...

Greetings,
Tom



From t.st1 at gmx.net  Tue Jul 10 21:14:10 2007
From: t.st1 at gmx.net (Tom St)
Date: Tue, 10 Jul 2007 21:14:10 +0200
Subject: [Linux-uvc-devel] uvc streamer
In-Reply-To: <4693C2B2.90907@gmx.net>
References: <4687707A.3010409@gmx.net>	<46933A28.4020200@gmx.net>	<200707101004.35062.sven.burmeister@gmx.net>	<200707101017.08395.sven.burmeister@gmx.net>	<469346C3.6030909@gmx.net>	<4693B1CE.40904@astronomicalresearchaustralia.org>
	<4693C2B2.90907@gmx.net>
Message-ID: <4693DA82.10609@gmx.net>

Hello again,
>> Tom, that would be nice, for now we are stuck with changing line 178:)
>>     
I added command line arguments now (see: http://naaa.de/uvc_streamer.htm).

You can adjust:

    * Frames per second (not very accurate, uses usleep)
    * Resolution
    * Devicename
    * TCP port to listen on

Have fun and with kind regards,
Tom


From t.st1 at gmx.net  Tue Jul 10 21:40:39 2007
From: t.st1 at gmx.net (Tom St)
Date: Tue, 10 Jul 2007 21:40:39 +0200
Subject: [Linux-uvc-devel] uvc streamer
In-Reply-To: <4693A81D.6020509@astronomicalresearchaustralia.org>
References: <4687707A.3010409@gmx.net>	<200707052107.32018.laurent.pinchart@skynet.be>
	<46929E83.7010602@gmx.net>
	<469309F3.5020601@astronomicalresearchaustralia.org>
	<46933A07.8070009@gmx.net>
	<4693A81D.6020509@astronomicalresearchaustralia.org>
Message-ID: <4693E0B7.9060704@gmx.net>

Hello,
> So if you can shed any light on how to get the video AND sound out of my
> camera that would be good:)
>   
Video and Audio are two different things. In general sound should be
possible once your kernel says (dmesg):
usbcore: registered new driver snd-usb-audio

HTH,
Tom


From bnc at astronomicalresearchaustralia.org  Wed Jul 11 06:00:32 2007
From: bnc at astronomicalresearchaustralia.org (Brian)
Date: Wed, 11 Jul 2007 14:00:32 +1000
Subject: [Linux-uvc-devel] uvc streamer
In-Reply-To: <4693DA82.10609@gmx.net>
References: <4687707A.3010409@gmx.net>	<46933A28.4020200@gmx.net>	<200707101004.35062.sven.burmeister@gmx.net>	<200707101017.08395.sven.burmeister@gmx.net>	<469346C3.6030909@gmx.net>	<4693B1CE.40904@astronomicalresearchaustralia.org>	<4693C2B2.90907@gmx.net>
	<4693DA82.10609@gmx.net>
Message-ID: <469455E0.60507@astronomicalresearchaustralia.org>

Tom,
> Hello again,
>>> Tom, that would be nice, for now we are stuck with changing line 178:)
>>>     
> I added command line arguments now (see: http://naaa.de/uvc_streamer.htm).
> 
> You can adjust:
> 
>     * Frames per second (not very accurate, uses usleep)
>     * Resolution
>     * Devicename
>     * TCP port to listen on
> 

Ok, I tested all the options including different frame rates.
Everything appears to work well.
Again using VLC, my cpu for
160x120 was stuff all
320x240 was a little bit
640x480 was just a bit more
(note I like using technical terms:))
Seriously, even at 640x480 my total cpu usage is only about 10-15%,
that is for everything not the streamer.
VLC is using about 1.3% and the streamer a lot less.

I noticed that it does not matter which resolution I run at the delay in
the video response is always the same 1-2 secs.
It seemed a lot longer with Konqueror because that was continually
writing and reading to/from the disk.

VLC is not using the disk at all just reading the stream directly out of
the tcp port, which is probably why it uses so much less resources.

As per another suggestion I have just used Motion to pipe the camera
into VLC i.e. not using uvc_streamer at all, and my cpu is at 100%.
uvc_streamer is way more efficient for a local lan.



Thanks,
Brian
PS. a clean exit option would be good.


From laurent.pinchart at skynet.be  Wed Jul 11 17:40:21 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 11 Jul 2007 17:40:21 +0200
Subject: [Linux-uvc-devel] Fails to use V-Gear Talkcam MX6 AF for
	2.6.19.1 or above
In-Reply-To: <f9a7555e0707080506g7a487467s4035cbf5903a439@mail.gmail.com>
References: <7BD729AF-1CB6-4122-8233-BCFCECA3EE4E@exocosm.net>
	<f9a7555e0707080506g7a487467s4035cbf5903a439@mail.gmail.com>
Message-ID: <200707111740.21692.laurent.pinchart@skynet.be>

Hi Ben,

On Sunday 08 July 2007, Ben Lau wrote:
> Hi Blaine,
>
>     Thank you for your reply. However, getting a later kernel and
> driver rev do not fix my problem. It has been tested with 2.6.21.3 +
> rev 113 , 2.6.20.6 + rev 113. The only solution I found is to set the
> value of UVC_CTRL_TIMEOUT in the source from 300 to some higher value
> like 1000. Then the camera works.
>
> Index: uvcvideo.h
> ===================================================================
> --- uvcvideo.h  (revision 113)
> +++ uvcvideo.h  (working copy)
> @@ -241,7 +241,7 @@
>  /* Maximum number of video buffers. */
>  #define UVC_MAX_VIDEO_BUFFERS  32
>
> -#define UVC_CTRL_TIMEOUT       300
> +#define UVC_CTRL_TIMEOUT       1000
>
>  /* Devices quirks */
>  #define UVC_QUIRK_STATUS_INTERVAL      0x00000001

The timeout is specified in milliseconds. 300ms should have been more than 
enough. The V-Gear Talkcam MX6 AF might be a bit slow to answer though, and 
upgrading your kernel might have introduced latencies in URB submission, or 
removed latencies in the timeout handling code.

I'd like to avoid setting the default timeout too high. Could you please test 
with intermediate values ?

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Jul 11 17:42:10 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 11 Jul 2007 17:42:10 +0200
Subject: [Linux-uvc-devel] openCV cvRetrieveFrame segmentation fault
	with uvc on 046d:08c1
In-Reply-To: <9bfce4760707061459x24a98804s5c666c149b6ee178@mail.gmail.com>
References: <9bfce4760707061459x24a98804s5c666c149b6ee178@mail.gmail.com>
Message-ID: <200707111742.10379.laurent.pinchart@skynet.be>

Hi Suneel,

On Friday 06 July 2007, Suneel Suresh wrote:
> hi there
>             after 2 days i was able to finally get my logitech
> quickcam fusion (046d:08c1) to work in ekiga. But the real reason i
> want to use this is for a project using intel's openCV API. I get a
> segmentation fault when making one of the API calls. And no the
> segmentation fault is not due to an error in my program. Below are a
> few lines of code
> /*********************************************************/
> _captureVideo = cvCaptureFromCAM(0); // specify a capture device
> if(_captureVideo==NULL) // check if camera is registered in system
> {
> 	cout<<"Camera was not detected in the system"<<endl;
> 	exit(-1);
> }
>
> IplImage* img = NULL;
> char *imgData = NULL;
> char *pixData = NULL;
>
> if(cvGrabFrame(_captureVideo)) // capture a frame . API returns 1
> here, so its ok
> {
> 	cout<<"["<<endl;
>         cout<<"{"<<_captureVideo<<"}"<<endl;  // mem address is not null
> 	img = cvRetrieveFrame(_captureVideo);    // retrieve the captured frame
>         // the above api call cvRetrieveFrame causes segmentation fault !!
> 	cout<<"]"<<endl;
> }
> /*********************************************************/
> Output of program
> [
> {0x52bee0}
> Segmentation fault
>
> please developers of uvc help!

First of all, look at the kernel log (using the dmesg command) after the 
segmentation fault. If you get a kernel crash report, the driver is at fault. 
If you don't, the crash comes from the application, either in your code or in 
the OpenCV code. I suggest rebuilding OpenCV in debug mode and getting a gdb 
backtrace.

Regards,

Laurent Pinchart


From juanjoserodriguez5 at gmail.com  Mon Jul  9 17:45:06 2007
From: juanjoserodriguez5 at gmail.com (=?ISO-8859-1?Q?Juan_Jos=E9_Rodr=EDguez_Molina?=)
Date: Mon, 9 Jul 2007 17:45:06 +0200
Subject: [Linux-uvc-devel] Linux uvcvideo driver in a Bison Cam 5986:0200
Message-ID: <923b97740707090845r4693676eka90771f31d2c9738@mail.gmail.com>

Hello all!

Sorry: my english is very bad!

First, thank'us to the developers of the linux uvc driver.

I've a Acer Aspire 5613 AWLMi laptop, with webcam integrated. This webcam is
a Bison cam and the command lsusb gives a ID 5986:0200.

More details wit lsusb -v :

<quote>
Bus 005 Device 002: ID 5986:0200
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x5986
  idProduct          0x0200
  bcdDevice            1.00
  iManufacturer           0
  iProduct                1 Acer OrbiCam
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          704
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               1 Acer OrbiCam
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              1 Acer OrbiCam
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           84
        dwClockFrequency       30.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                17
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  2
        bmControls           0x00000000
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               6
        iTerminal               0
      VideoControl Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      4 (SELECTOR_UNIT)
        bUnitID                 4
        bNrInPins               1
        baSource( 0)            1
        iSelector               0
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 5
        bSourceID               4
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000053f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          Backlight Compensation
          Power Line Frequency
        iProcessing             0
        bmVideoStandards     0x1b
          None
          NTSC - 525/60
          SECAM - 625/50
          NTSC - 625/50
      VideoControl Interface Descriptor:
        bLength                27
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 6
        guidExtensionCode         {a7974c56-a77e-4b90-8cbf-1c71ec303000}
        bNumControl            16
        bNrPins                 1
        baSourceID( 0)          5
        bControlSize            2
        bmControls( 0)       0xff
        bmControls( 1)       0xff
        iExtension              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              15
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            15
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormarts                        2
        wTotalLength                    33026
        bEndPointAddress                    0
        bmInfo                              3
        bTerminalLink                       2
        bStillCaptureMethod                 1
        bTriggerSupport                     1
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    11
        bmaControls( 1)                    11
      VideoStreaming Interface Descriptor:
        bLength                            11
        bDescriptorType                    36
        bDescriptorSubtype                  6 (FORMAT_MJPEG)
        bFormatIndex                        1
        bNumFrameDescriptors                6
        bFlags                              1
          Fixed-size samples: Yes
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         1
        bmCapabilities                   0x01
          Still image supported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      921600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         2
        bmCapabilities                   0x01
          Still image supported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      230400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         3
        bmCapabilities                   0x01
          Still image supported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize       57600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         4
        bmCapabilities                   0x01
          Still image supported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      304128
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         5
        bmCapabilities                   0x01
          Still image supported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize       76032
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         6
        bmCapabilities                   0x01
          Still image supported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize     3932160
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  2
        dwFrameInterval( 0)            666666
        dwFrameInterval( 1)           1428571
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               6
        wWidth( 0)                        640
        wHeight( 0)                       480
        wWidth( 1)                        320
        wHeight( 1)                       240
        wWidth( 2)                        160
        wHeight( 2)                       120
        wWidth( 3)                        352
        wHeight( 3)                       288
        wWidth( 4)                        176
        wHeight( 4)                       144
        wWidth( 5)                       1280
        wHeight( 5)                      1024
        bNumCompressionPatterns             6
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        2
        bNumFrameDescriptors                6
        guidFormat
{32595559-0000-0010-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x01
          Still image supported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x01
          Still image supported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      230400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x01
          Still image supported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize       57600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x01
          Still image supported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      304128
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x01
          Still image supported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize       76032
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x01
          Still image supported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize     3932160
        dwDefaultFrameInterval        1428571
        bFrameIntervalType                  1
        dwFrameInterval( 0)           1428571
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               6
        wWidth( 0)                        640
        wHeight( 0)                       480
        wWidth( 1)                        320
        wHeight( 1)                       240
        wWidth( 2)                        160
        wHeight( 2)                       120
        wWidth( 3)                        352
        wHeight( 3)                       288
        wWidth( 4)                        176
        wHeight( 4)                       144
        wWidth( 5)                       1280
        wHeight( 5)                      1024
        bNumCompressionPatterns             6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 0 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)

</quote>

I got that the cam works with a very simple modification in the code of the
uvc_driver.c, adding the following lines:

<quote>
    /* Acer OEM Webcam - Unknown vendor */
    { .match_flags        = USB_DEVICE_ID_MATCH_DEVICE
                | USB_DEVICE_ID_MATCH_INT_INFO,
      .idVendor        = 0x5986,
      .idProduct        = 0x0200,
      .bInterfaceClass    = USB_CLASS_VIDEO,
      .bInterfaceSubClass    = 1,
      .bInterfaceProtocol    = 0,
      .driver_info        = UVC_QUIRK_PROBE_MINMAX
    },
</quote>

They are the same lines what for 5986x0100 cam, I only copy and paste and
change 0100 for 0200 !

With luvcview the image quality is good, but worse that the quality get with
the Windows driver.

Is possible obtain better quality with changes in the code of the
uvc_driver.c ?

Thank'us, again.

Greetings.

Juan Jose Rodriguez.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070709/fb2dfc89/attachment.html>

From laurent.pinchart at skynet.be  Wed Jul 11 17:46:28 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 11 Jul 2007 17:46:28 +0200
Subject: [Linux-uvc-devel] Vega USB 2.0 working
In-Reply-To: <20070707131044.GA7418@niafc.de>
References: <20070707131044.GA7418@niafc.de>
Message-ID: <200707111746.28787.laurent.pinchart@skynet.be>

Hi Matthias,

On Saturday 07 July 2007, Matthias wrote:
> Hi list members,
>
> I re-send this mail since it bounced yesterday sending without being
> subscribed to this list. Hope it will make it way this time.
>
> I am the proud owner of a shiny new Samsung Q45 laptop, which has an
> integrated UVC-compatible camera. The vendor and product IDs are:
>
> Bus 001 Device 002: ID 0ac8:c302 Z-Star Microelectronics Corp.
>
> Please see attached the output of 'lsusb -v' for the device. As the
> pre-installed Windows driver seemed to point to an UVC-capable device, I
> went ahead and just added vendor and product ID to uvc_driver.c - and it
> just worked (tm).
>
> So please find attached the output of 'lsusb -v' for the camera device
> and a small patch done via 'LC_ALL=C svndiff' against revision 111.

Just to make sure, have you tried the driver without applying the patch 
first ?

> Keep up the great work,

I'll try :-)

Regards,

Laurent Pinchart



From laurent.pinchart at skynet.be  Wed Jul 11 17:49:45 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 11 Jul 2007 17:49:45 +0200
Subject: [Linux-uvc-devel] Acer Orbicam - 046d:09b0 Logitech
In-Reply-To: <4692037F.5020809@gmail.com>
References: <4692037F.5020809@gmail.com>
Message-ID: <200707111749.45743.laurent.pinchart@skynet.be>

Hi Max,

On Monday 09 July 2007, Max Samadov wrote:
> Hi Laurent,

Please send help requests to the linux-uvc list, and keep it cc'ed in replies.

> I downloaded driver trunk as shown here:
> https://lists.berlios.de/pipermail/linux-uvc-devel/2007-May/001692.html
>
> However, when I'm trying to start # luvcview -f yuv  , I get:
>
> luvcview version 0.2.0
> Video driver: x11
> A window manager is available
> video /dev/video0
> Unable to start capture: 71.
> Error grabbing
>  Clean Up done Quit
>
> ditto ekiga 2.0.3
>
> I've got Acer Aspire 5630 laptop w/Ubuntu 7.04 installed.
>
> Can you help me, please?

Could you please push the trace level to 255 with

echo 255 > /sys/modules/uvcvideo/parameters/trace

and send me the dmesg log after running luvcview ?

Thanks.

Laurent Pinchart


From sonix at exocosm.net  Wed Jul 11 17:52:46 2007
From: sonix at exocosm.net (Blaine Horrocks)
Date: Wed, 11 Jul 2007 11:52:46 -0400
Subject: [Linux-uvc-devel] Fails to use V-Gear Talkcam MX6 AF for
	2.6.19.1 or above
In-Reply-To: <200707111740.21692.laurent.pinchart@skynet.be>
References: <7BD729AF-1CB6-4122-8233-BCFCECA3EE4E@exocosm.net>
	<f9a7555e0707080506g7a487467s4035cbf5903a439@mail.gmail.com>
	<200707111740.21692.laurent.pinchart@skynet.be>
Message-ID: <B502F0CA-4AF7-4207-9238-511B6E72900C@exocosm.net>

Laurent, Ben,

fwiw, the 300 ms value works fine on my system which runs at 3600  
bogomips  (Opteron dual core 260).   2.6.20-16 kernel from ubuntu  
feisty.

On 11-Jul-07, at 11:40 , Laurent Pinchart wrote:

> Hi Ben,
>
> On Sunday 08 July 2007, Ben Lau wrote:
>> Hi Blaine,
>>
>>     Thank you for your reply. However, getting a later kernel and
>> driver rev do not fix my problem. It has been tested with 2.6.21.3 +
>> rev 113 , 2.6.20.6 + rev 113. The only solution I found is to set the
>> value of UVC_CTRL_TIMEOUT in the source from 300 to some higher value
>> like 1000. Then the camera works.
>>
>> Index: uvcvideo.h
>> ===================================================================
>> --- uvcvideo.h  (revision 113)
>> +++ uvcvideo.h  (working copy)
>> @@ -241,7 +241,7 @@
>>  /* Maximum number of video buffers. */
>>  #define UVC_MAX_VIDEO_BUFFERS  32
>>
>> -#define UVC_CTRL_TIMEOUT       300
>> +#define UVC_CTRL_TIMEOUT       1000
>>
>>  /* Devices quirks */
>>  #define UVC_QUIRK_STATUS_INTERVAL      0x00000001
>
> The timeout is specified in milliseconds. 300ms should have been  
> more than
> enough. The V-Gear Talkcam MX6 AF might be a bit slow to answer  
> though, and
> upgrading your kernel might have introduced latencies in URB  
> submission, or
> removed latencies in the timeout handling code.
>
> I'd like to avoid setting the default timeout too high. Could you  
> please test
> with intermediate values ?
>
> Cheers,
>
> Laurent Pinchart
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel



From laurent.pinchart at skynet.be  Wed Jul 11 18:00:58 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 11 Jul 2007 18:00:58 +0200
Subject: [Linux-uvc-devel] Support for Microsoft Lifecam NX-6000
In-Reply-To: <3eba0080707091842j6f2693bav1961f0aeb605789e@mail.gmail.com>
References: <3eba0080707091842j6f2693bav1961f0aeb605789e@mail.gmail.com>
Message-ID: <200707111800.58300.laurent.pinchart@skynet.be>

On Tuesday 10 July 2007, Matt Finnicum wrote:
> Hey,
> I just got this camera recently. It works under linux-uvc, but it
> doesn't work well at all (terrible resolution, bad lighting, etc). Is
> there something I can do to make the driver recognize it's
> capabilities better?

The only thing you can do about the picture quality is adjust the image 
controls (brightness, ...) and exposure time. Microsoft might use a software 
image enhancement algorithm which is outside the scope of the driver.

> dmesg from when I inserted it:
> usb 2-1: new high speed USB device using ehci_hcd and address 3
> usb 2-1: configuration #1 chosen from 1 choice
> Linux video capture interface: v2.00
> uvcvideo: Found UVC 1.00 device Microsoft? LifeCam NX-6000 (045e:00f8)
> uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -32 (exp. 26).
> uvcvideo: Failed to query (129) UVC control 1 (unit 0) : -32 (exp. 26).
> uvcvideo: Failed to initialize the device (-5).
> usbcore: registered new interface driver uvcvideo
> USB Video Class driver (v0.1.0)
> 3:3:1 : sample bitwidth 24 in over sample bytes 2
> 3:3:1: cannot get freq at ep 0x84
> usbcore: registered new interface driver snd-usb-audio
>
[snip]

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Jul 11 18:11:00 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 11 Jul 2007 18:11:00 +0200
Subject: [Linux-uvc-devel] Linux uvcvideo driver in a Bison Cam 5986:0200
In-Reply-To: <923b97740707090845r4693676eka90771f31d2c9738@mail.gmail.com>
References: <923b97740707090845r4693676eka90771f31d2c9738@mail.gmail.com>
Message-ID: <200707111811.00905.laurent.pinchart@skynet.be>

Hi Juan,

On Monday 09 July 2007, Juan Jos? Rodr?guez Molina wrote:
> Hello all!
>
> Sorry: my english is very bad!
>
> First, thank'us to the developers of the linux uvc driver.

You're welcome.

> I've a Acer Aspire 5613 AWLMi laptop, with webcam integrated. This webcam
> is a Bison cam and the command lsusb gives a ID 5986:0200.
>
> More details wit lsusb -v :
>
> <quote>
> Bus 005 Device 002: ID 5986:0200
> Device Descriptor:
>   bLength                18
>   bDescriptorType         1
>   bcdUSB               2.00
>   bDeviceClass          239 Miscellaneous Device
>   bDeviceSubClass         2 Common Class
>   bDeviceProtocol         1 Interface Association
>   bMaxPacketSize0        64
>   idVendor           0x5986
>   idProduct          0x0200
>   bcdDevice            1.00
>   iManufacturer           0
>   iProduct                1 Acer OrbiCam
>   iSerial                 0
>   bNumConfigurations      1
>   Configuration Descriptor:
>     bLength                 9
>     bDescriptorType         2
>     wTotalLength          704
>     bNumInterfaces          2
>     bConfigurationValue     1
>     iConfiguration          0
>     bmAttributes         0x80
>       (Bus Powered)
>     MaxPower              500mA
>     Interface Association:
>       bLength                 8
>       bDescriptorType        11
>       bFirstInterface         0
>       bInterfaceCount         2
>       bFunctionClass         14 Video
>       bFunctionSubClass       3 Video Interface Collection
>       bFunctionProtocol       0
>       iFunction               1 Acer OrbiCam
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       0
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      1 Video Control
>       bInterfaceProtocol      0
>       iInterface              1 Acer OrbiCam
>       VideoControl Interface Descriptor:
>         bLength                13
>         bDescriptorType        36
>         bDescriptorSubtype      1 (HEADER)
>         bcdUVC               1.00
>         wTotalLength           84
>         dwClockFrequency       30.000000MHz
>         bInCollection           1
>         baInterfaceNr( 0)       1
>       VideoControl Interface Descriptor:
>         bLength                17
>         bDescriptorType        36
>         bDescriptorSubtype      2 (INPUT_TERMINAL)
>         bTerminalID             1
>         wTerminalType      0x0201 Camera Sensor
>         bAssocTerminal          0
>         iTerminal               0
>         wObjectiveFocalLengthMin      0
>         wObjectiveFocalLengthMax      0
>         wOcularFocalLength            0
>         bControlSize                  2
>         bmControls           0x00000000
>       VideoControl Interface Descriptor:
>         bLength                 9
>         bDescriptorType        36
>         bDescriptorSubtype      3 (OUTPUT_TERMINAL)
>         bTerminalID             3
>         wTerminalType      0x0101 USB Streaming
>         bAssocTerminal          0
>         bSourceID               6
>         iTerminal               0
>       VideoControl Interface Descriptor:
>         bLength                 7
>         bDescriptorType        36
>         bDescriptorSubtype      4 (SELECTOR_UNIT)
>         bUnitID                 4
>         bNrInPins               1
>         baSource( 0)            1
>         iSelector               0
>       VideoControl Interface Descriptor:
>         bLength                11
>         bDescriptorType        36
>         bDescriptorSubtype      5 (PROCESSING_UNIT)
>       Warning: Descriptor too short
>         bUnitID                 5
>         bSourceID               4
>         wMaxMultiplier          0
>         bControlSize            2
>         bmControls     0x0000053f
>           Brightness
>           Contrast
>           Hue
>           Saturation
>           Sharpness
>           Gamma
>           Backlight Compensation
>           Power Line Frequency
>         iProcessing             0
>         bmVideoStandards     0x1b
>           None
>           NTSC - 525/60
>           SECAM - 625/50
>           NTSC - 625/50
>       VideoControl Interface Descriptor:
>         bLength                27
>         bDescriptorType        36
>         bDescriptorSubtype      6 (EXTENSION_UNIT)
>         bUnitID                 6
>         guidExtensionCode         {a7974c56-a77e-4b90-8cbf-1c71ec303000}
>         bNumControl            16
>         bNrPins                 1
>         baSourceID( 0)          5
>         bControlSize            2
>         bmControls( 0)       0xff
>         bmControls( 1)       0xff
>         iExtension              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x82  EP 2 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0008  1x 8 bytes
>         bInterval              15
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       0
>       bNumEndpoints           0
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       VideoStreaming Interface Descriptor:
>         bLength                            15
>         bDescriptorType                    36
>         bDescriptorSubtype                  1 (INPUT_HEADER)
>         bNumFormarts                        2
>         wTotalLength                    33026
>         bEndPointAddress                    0
>         bmInfo                              3
>         bTerminalLink                       2
>         bStillCaptureMethod                 1
>         bTriggerSupport                     1
>         bTriggerUsage                       1
>         bControlSize                        1
>         bmaControls( 0)                    11
>         bmaControls( 1)                    11
>       VideoStreaming Interface Descriptor:
>         bLength                            11
>         bDescriptorType                    36
>         bDescriptorSubtype                  6 (FORMAT_MJPEG)
>         bFormatIndex                        1
>         bNumFrameDescriptors                6
>         bFlags                              1
>           Fixed-size samples: Yes
>         bDefaultFrameIndex                  1
>         bAspectRatioX                       0
>         bAspectRatioY                       0
>         bmInterlaceFlags                 0x00
>           Interlaced stream or variable: No
>           Fields per frame: 1 fields
>           Field 1 first: No
>           Field pattern: Field 1 only
>           bCopyProtect                      0
>       VideoStreaming Interface Descriptor:
>         bLength                            38
>         bDescriptorType                    36
>         bDescriptorSubtype                  7 (FRAME_MJPEG)
>         bFrameIndex                         1
>         bmCapabilities                   0x01
>           Still image supported
>         wWidth                            640
>         wHeight                           480
>         dwMinBitRate                   912384
>         dwMaxBitRate                   912384
>         dwMaxVideoFrameBufferSize      921600
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  3
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            666666
>         dwFrameInterval( 2)           1000000
>       VideoStreaming Interface Descriptor:
>         bLength                            38
>         bDescriptorType                    36
>         bDescriptorSubtype                  7 (FRAME_MJPEG)
>         bFrameIndex                         2
>         bmCapabilities                   0x01
>           Still image supported
>         wWidth                            320
>         wHeight                           240
>         dwMinBitRate                   912384
>         dwMaxBitRate                   912384
>         dwMaxVideoFrameBufferSize      230400
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  3
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            666666
>         dwFrameInterval( 2)           1000000
>       VideoStreaming Interface Descriptor:
>         bLength                            38
>         bDescriptorType                    36
>         bDescriptorSubtype                  7 (FRAME_MJPEG)
>         bFrameIndex                         3
>         bmCapabilities                   0x01
>           Still image supported
>         wWidth                            160
>         wHeight                           120
>         dwMinBitRate                   912384
>         dwMaxBitRate                   912384
>         dwMaxVideoFrameBufferSize       57600
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  3
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            666666
>         dwFrameInterval( 2)           1000000
>       VideoStreaming Interface Descriptor:
>         bLength                            38
>         bDescriptorType                    36
>         bDescriptorSubtype                  7 (FRAME_MJPEG)
>         bFrameIndex                         4
>         bmCapabilities                   0x01
>           Still image supported
>         wWidth                            352
>         wHeight                           288
>         dwMinBitRate                   912384
>         dwMaxBitRate                   912384
>         dwMaxVideoFrameBufferSize      304128
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  3
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            666666
>         dwFrameInterval( 2)           1000000
>       VideoStreaming Interface Descriptor:
>         bLength                            38
>         bDescriptorType                    36
>         bDescriptorSubtype                  7 (FRAME_MJPEG)
>         bFrameIndex                         5
>         bmCapabilities                   0x01
>           Still image supported
>         wWidth                            176
>         wHeight                           144
>         dwMinBitRate                   912384
>         dwMaxBitRate                   912384
>         dwMaxVideoFrameBufferSize       76032
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  3
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            666666
>         dwFrameInterval( 2)           1000000
>       VideoStreaming Interface Descriptor:
>         bLength                            34
>         bDescriptorType                    36
>         bDescriptorSubtype                  7 (FRAME_MJPEG)
>         bFrameIndex                         6
>         bmCapabilities                   0x01
>           Still image supported
>         wWidth                           1280
>         wHeight                          1024
>         dwMinBitRate                   912384
>         dwMaxBitRate                   912384
>         dwMaxVideoFrameBufferSize     3932160
>         dwDefaultFrameInterval         666666
>         bFrameIntervalType                  2
>         dwFrameInterval( 0)            666666
>         dwFrameInterval( 1)           1428571
>       VideoStreaming Interface Descriptor:
>         bLength                            30
>         bDescriptorType                    36
>         bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
>         bEndpointAddress                    0
>         bNumImageSizePatterns               6
>         wWidth( 0)                        640
>         wHeight( 0)                       480
>         wWidth( 1)                        320
>         wHeight( 1)                       240
>         wWidth( 2)                        160
>         wHeight( 2)                       120
>         wWidth( 3)                        352
>         wHeight( 3)                       288
>         wWidth( 4)                        176
>         wHeight( 4)                       144
>         wWidth( 5)                       1280
>         wHeight( 5)                      1024
>         bNumCompressionPatterns             6
>       VideoStreaming Interface Descriptor:
>         bLength                            27
>         bDescriptorType                    36
>         bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
>         bFormatIndex                        2
>         bNumFrameDescriptors                6
>         guidFormat
> {32595559-0000-0010-8000-00aa00389b71}
>         bBitsPerPixel                      16
>         bDefaultFrameIndex                  1
>         bAspectRatioX                       0
>         bAspectRatioY                       0
>         bmInterlaceFlags                 0x00
>           Interlaced stream or variable: No
>           Fields per frame: 1 fields
>           Field 1 first: No
>           Field pattern: Field 1 only
>           bCopyProtect                      0
>       VideoStreaming Interface Descriptor:
>         bLength                            38
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         1
>         bmCapabilities                   0x01
>           Still image supported
>         wWidth                            640
>         wHeight                           480
>         dwMinBitRate                   912384
>         dwMaxBitRate                   912384
>         dwMaxVideoFrameBufferSize      614400
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  3
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            666666
>         dwFrameInterval( 2)           1000000
>       VideoStreaming Interface Descriptor:
>         bLength                            38
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         2
>         bmCapabilities                   0x01
>           Still image supported
>         wWidth                            320
>         wHeight                           240
>         dwMinBitRate                   912384
>         dwMaxBitRate                   912384
>         dwMaxVideoFrameBufferSize      230400
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  3
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            666666
>         dwFrameInterval( 2)           1000000
>       VideoStreaming Interface Descriptor:
>         bLength                            38
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         3
>         bmCapabilities                   0x01
>           Still image supported
>         wWidth                            160
>         wHeight                           120
>         dwMinBitRate                   912384
>         dwMaxBitRate                   912384
>         dwMaxVideoFrameBufferSize       57600
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  3
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            666666
>         dwFrameInterval( 2)           1000000
>       VideoStreaming Interface Descriptor:
>         bLength                            38
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         4
>         bmCapabilities                   0x01
>           Still image supported
>         wWidth                            352
>         wHeight                           288
>         dwMinBitRate                   912384
>         dwMaxBitRate                   912384
>         dwMaxVideoFrameBufferSize      304128
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  3
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            666666
>         dwFrameInterval( 2)           1000000
>       VideoStreaming Interface Descriptor:
>         bLength                            38
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         5
>         bmCapabilities                   0x01
>           Still image supported
>         wWidth                            176
>         wHeight                           144
>         dwMinBitRate                   912384
>         dwMaxBitRate                   912384
>         dwMaxVideoFrameBufferSize       76032
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  3
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            666666
>         dwFrameInterval( 2)           1000000
>       VideoStreaming Interface Descriptor:
>         bLength                            30
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         6
>         bmCapabilities                   0x01
>           Still image supported
>         wWidth                           1280
>         wHeight                          1024
>         dwMinBitRate                   912384
>         dwMaxBitRate                   912384
>         dwMaxVideoFrameBufferSize     3932160
>         dwDefaultFrameInterval        1428571
>         bFrameIntervalType                  1
>         dwFrameInterval( 0)           1428571
>       VideoStreaming Interface Descriptor:
>         bLength                            30
>         bDescriptorType                    36
>         bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
>         bEndpointAddress                    0
>         bNumImageSizePatterns               6
>         wWidth( 0)                        640
>         wHeight( 0)                       480
>         wWidth( 1)                        320
>         wHeight( 1)                       240
>         wWidth( 2)                        160
>         wHeight( 2)                       120
>         wWidth( 3)                        352
>         wHeight( 3)                       288
>         wWidth( 4)                        176
>         wHeight( 4)                       144
>         wWidth( 5)                       1280
>         wHeight( 5)                      1024
>         bNumCompressionPatterns             6
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       1
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x1400  3x 0 bytes
>         bInterval               1
> Device Qualifier (for other device speed):
>   bLength                10
>   bDescriptorType         6
>   bcdUSB               2.00
>   bDeviceClass            0 (Defined at Interface level)
>   bDeviceSubClass         0
>   bDeviceProtocol         0
>   bMaxPacketSize0        64
>   bNumConfigurations      1
> Device Status:     0x0000
>   (Bus Powered)
>
> </quote>
>
> I got that the cam works with a very simple modification in the code of the
> uvc_driver.c, adding the following lines:
>
> <quote>
>     /* Acer OEM Webcam - Unknown vendor */
>     { .match_flags        = USB_DEVICE_ID_MATCH_DEVICE
>
>                 | USB_DEVICE_ID_MATCH_INT_INFO,
>
>       .idVendor        = 0x5986,
>       .idProduct        = 0x0200,
>       .bInterfaceClass    = USB_CLASS_VIDEO,
>       .bInterfaceSubClass    = 1,
>       .bInterfaceProtocol    = 0,
>       .driver_info        = UVC_QUIRK_PROBE_MINMAX
>     },
> </quote>

Thanks for the report.

> They are the same lines what for 5986x0100 cam, I only copy and paste and
> change 0100 for 0200 !

Just to make sure, have you checked that the webcam didn't work without the 
modifications ? If it didn't I'll apply your patch.

> With luvcview the image quality is good, but worse that the quality get
> with the Windows driver.
>
> Is possible obtain better quality with changes in the code of the
> uvc_driver.c ?

Not in the driver code I'm afraid. Picture quality is usually controlled 
through the camera settings such as brightness and exposure time. As your 
webcam doesn't support the exposure time control, I don't think you could 
solve your problem using the standard available controls.

Windows might include a software picture quality enhancer. There might be 
similar projects for Linux, but they are out of scope of the driver.

Your webcam has an extension unit with 8 controls. I suspect those to be 
mainly used for testing/firmware update, but they could also influence 
picture quality. This is of course hard to tell without documentation from 
the vendor, but you could try to snoop the USB bus in Windows to check if 
those controls are accessed. I can give you more information about that if 
you're interested.

Regards,

Laurent Pinchart


From xbenlau at gmail.com  Wed Jul 11 18:47:41 2007
From: xbenlau at gmail.com (Ben Lau)
Date: Thu, 12 Jul 2007 00:47:41 +0800
Subject: [Linux-uvc-devel] Fails to use V-Gear Talkcam MX6 AF for
	2.6.19.1 or above
In-Reply-To: <200707111740.21692.laurent.pinchart@skynet.be>
References: <7BD729AF-1CB6-4122-8233-BCFCECA3EE4E@exocosm.net>
	<f9a7555e0707080506g7a487467s4035cbf5903a439@mail.gmail.com>
	<200707111740.21692.laurent.pinchart@skynet.be>
Message-ID: <f9a7555e0707110947v78c69bb9g81eff89ddf6d351a@mail.gmail.com>

Hi Laurent,

On 7/11/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> The timeout is specified in milliseconds. 300ms should have been more than
> enough. The V-Gear Talkcam MX6 AF might be a bit slow to answer though, and
> upgrading your kernel might have introduced latencies in URB submission, or
> removed latencies in the timeout handling code.

yes, the usb_start_wait_urb() was reimplemented in 2.6.19 to use
completion timeout instead of timer. I think it is probably the source
of my problem.

>
> I'd like to avoid setting the default timeout too high. Could you please test
> with intermediate values ?
>

No problem. The lowest stable timeout I could use is 350ms. Below the
value is quite unstable. I will continue the test for few more days.


From mw-nb at niafc.de  Wed Jul 11 20:18:11 2007
From: mw-nb at niafc.de (Matthias)
Date: Wed, 11 Jul 2007 20:18:11 +0200
Subject: [Linux-uvc-devel] Vega USB 2.0 working
In-Reply-To: <200707111746.28787.laurent.pinchart@skynet.be>
References: <20070707131044.GA7418@niafc.de>
	<200707111746.28787.laurent.pinchart@skynet.be>
Message-ID: <20070711181811.GA6344@niafc.de>

Hi Laurent,

thank you for your reply.
To be honest, I never tried loading the driver before modifying it.
I think that is what people call "geek spirit" ;).

I just assured myself that the unmodified driver recognizes the camera as well.
So never mind the patch I sent - nevertheless you can add the camera to the list of
supported devices.

Thanks again,

Matthias


On Mi, 11.07 17:46, Laurent Pinchart wrote:
> Hi Matthias,
> 
> On Saturday 07 July 2007, Matthias wrote:
> > Hi list members,
> >
> > I re-send this mail since it bounced yesterday sending without being
> > subscribed to this list. Hope it will make it way this time.
> >
> > I am the proud owner of a shiny new Samsung Q45 laptop, which has an
> > integrated UVC-compatible camera. The vendor and product IDs are:
> >
> > Bus 001 Device 002: ID 0ac8:c302 Z-Star Microelectronics Corp.
> >
> > Please see attached the output of 'lsusb -v' for the device. As the
> > pre-installed Windows driver seemed to point to an UVC-capable device, I
> > went ahead and just added vendor and product ID to uvc_driver.c - and it
> > just worked (tm).
> >
> > So please find attached the output of 'lsusb -v' for the camera device
> > and a small patch done via 'LC_ALL=C svndiff' against revision 111.
> 
> Just to make sure, have you tried the driver without applying the patch 
> first ?
> 
> > Keep up the great work,
> 
> I'll try :-)
> 
> Regards,
> 
> Laurent Pinchart
> 
> 


From laurent.pinchart at skynet.be  Wed Jul 11 23:14:39 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 11 Jul 2007 23:14:39 +0200
Subject: [Linux-uvc-devel] Vega USB 2.0 working
In-Reply-To: <20070711181811.GA6344@niafc.de>
References: <20070707131044.GA7418@niafc.de>
	<200707111746.28787.laurent.pinchart@skynet.be>
	<20070711181811.GA6344@niafc.de>
Message-ID: <200707112314.39464.laurent.pinchart@skynet.be>

Hi Matthias,

On Wednesday 11 July 2007, Matthias wrote:
> Hi Laurent,
>
> thank you for your reply.
> To be honest, I never tried loading the driver before modifying it.
> I think that is what people call "geek spirit" ;).
>
> I just assured myself that the unmodified driver recognizes the camera as
> well. So never mind the patch I sent - nevertheless you can add the camera
> to the list of supported devices.

Done. Thanks for the report.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Jul 11 23:26:46 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 11 Jul 2007 23:26:46 +0200
Subject: [Linux-uvc-devel] Fails to use V-Gear Talkcam MX6 AF for
	2.6.19.1 or above
In-Reply-To: <f9a7555e0707110947v78c69bb9g81eff89ddf6d351a@mail.gmail.com>
References: <7BD729AF-1CB6-4122-8233-BCFCECA3EE4E@exocosm.net>
	<200707111740.21692.laurent.pinchart@skynet.be>
	<f9a7555e0707110947v78c69bb9g81eff89ddf6d351a@mail.gmail.com>
Message-ID: <200707112326.47074.laurent.pinchart@skynet.be>

Hi Ben,

On Wednesday 11 July 2007, Ben Lau wrote:
> Hi Laurent,
>
> On 7/11/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > The timeout is specified in milliseconds. 300ms should have been more
> > than enough. The V-Gear Talkcam MX6 AF might be a bit slow to answer
> > though, and upgrading your kernel might have introduced latencies in URB
> > submission, or removed latencies in the timeout handling code.
>
> yes, the usb_start_wait_urb() was reimplemented in 2.6.19 to use
> completion timeout instead of timer. I think it is probably the source
> of my problem.

I had a look at the git log. You're right, that's probably the reason. I 
suspect the V-Gear webcam to have borderline timings, and the 
usb_start_wait_urb() reimplementation made it fall over the edge.

> > I'd like to avoid setting the default timeout too high. Could you please
> > test with intermediate values ?
>
> No problem. The lowest stable timeout I could use is 350ms. Below the
> value is quite unstable. I will continue the test for few more days.

I'll raise the default value in the driver, or come up with a way to set 
dynamic timeouts. Please let me know the outcome of your tests.

Regards,

Laurent Pinchart


From chris.horler at clara.co.uk  Fri Jul 13 18:48:48 2007
From: chris.horler at clara.co.uk (Christopher HORLER)
Date: Fri, 13 Jul 2007 17:48:48 +0100
Subject: [Linux-uvc-devel] Patch: Read support
Message-ID: <200707131748.48675.chris.horler@clara.co.uk>

Hi,

Here's a first attempt at supporting read - I'm sure there's bits to iron out, 
but it works for me.

Chris
-------------- next part --------------
A non-text attachment was scrubbed...
Name: svnuvcdiff
Type: text/x-diff
Size: 12441 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070713/07dd1f73/attachment.diff>

From richkemp at alumni.pitt.edu  Mon Jul 16 19:28:45 2007
From: richkemp at alumni.pitt.edu (Rich Kemp)
Date: Mon, 16 Jul 2007 13:28:45 -0400
Subject: [Linux-uvc-devel] Pan and Tilt of Quickcam Orbit MP
Message-ID: <7bda0a0707161028y59be3040q1ffec8a6815d1fc1@mail.gmail.com>

Hi, I'm using uvc with a logitech quickcam orbit mp, and I was wondering if
there are any utilities similar to the setpwc utility that allows you to
change the pan or tilt of an old orbit webcam from the command line. I've
played with luvcview and can pan and tilt the camera from that application's
gui controls, but I wondered if anything exists similar to setpwc. I know I
read a post from Laurent last September that mentioned updates to IOCTL for
panning and tilting.

Thanks!
Rich
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070716/1fa9beeb/attachment.html>

From Privat_one at gmx.de  Mon Jul 16 18:39:22 2007
From: Privat_one at gmx.de (Dirk Wesenberg)
Date: Mon, 16 Jul 2007 20:39:22 +0400
Subject: [Linux-uvc-devel] Pan and Tilt of Quickcam Orbit MP
In-Reply-To: <7bda0a0707161028y59be3040q1ffec8a6815d1fc1@mail.gmail.com>
References: <7bda0a0707161028y59be3040q1ffec8a6815d1fc1@mail.gmail.com>
Message-ID: <200707162039.22305.Privat_one@gmx.de>

Motion does supported the pan and Tilt funktion
Regards
Dirk
Am Montag, 16. Juli 2007 21:28 schrieb Rich Kemp:
> Hi, I'm using uvc with a logitech quickcam orbit mp, and I was wondering if
> there are any utilities similar to the setpwc utility that allows you to
> change the pan or tilt of an old orbit webcam from the command line. I've
> played with luvcview and can pan and tilt the camera from that
> application's gui controls, but I wondered if anything exists similar to
> setpwc. I know I read a post from Laurent last September that mentioned
> updates to IOCTL for panning and tilting.
>
> Thanks!
> Rich


From greyfade at greyfade.org  Mon Jul 16 20:44:23 2007
From: greyfade at greyfade.org (Charles Banas)
Date: Mon, 16 Jul 2007 11:44:23 -0700
Subject: [Linux-uvc-devel] Pan and Tilt of Quickcam Orbit MP
In-Reply-To: <200707162039.22305.Privat_one@gmx.de>
References: <7bda0a0707161028y59be3040q1ffec8a6815d1fc1@mail.gmail.com>
	<200707162039.22305.Privat_one@gmx.de>
Message-ID: <200707161144.31769.greyfade@greyfade.org>

On Monday 16 July 2007, Dirk Wesenberg wrote:
> Motion does supported the pan and Tilt funktion
> Regards
> Dirk
>

Motion complains that read() support is deprecated and that mmap is 
unsupported.  How do you get Motion to work with it?

> Am Montag, 16. Juli 2007 21:28 schrieb Rich Kemp:
> > Hi, I'm using uvc with a logitech quickcam orbit mp, and I was wondering
> > if there are any utilities similar to the setpwc utility that allows you
> > to change the pan or tilt of an old orbit webcam from the command line.
> > I've played with luvcview and can pan and tilt the camera from that
> > application's gui controls, but I wondered if anything exists similar to
> > setpwc. I know I read a post from Laurent last September that mentioned
> > updates to IOCTL for panning and tilting.
> >
> > Thanks!
> > Rich
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part.
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070716/dc2ca7f1/attachment.pgp>

From laurent.pinchart at skynet.be  Mon Jul 16 23:31:33 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 16 Jul 2007 23:31:33 +0200
Subject: [Linux-uvc-devel] Patch: Read support
In-Reply-To: <200707131748.48675.chris.horler@clara.co.uk>
References: <200707131748.48675.chris.horler@clara.co.uk>
Message-ID: <200707162331.33265.laurent.pinchart@skynet.be>

Hi Chris,

On Friday 13 July 2007, Christopher HORLER wrote:
> Hi,
>
> Here's a first attempt at supporting read - I'm sure there's bits to iron
> out, but it works for me.

Thanks a lot for the patch. I haven't had time to look at it yet, but I'll try 
to review it before the end of the week.

Cheers,

Laurent Pinchart


From ernih at gmx.de  Mon Jul 16 23:34:02 2007
From: ernih at gmx.de (ernih at gmx.de)
Date: Mon, 16 Jul 2007 23:34:02 +0200
Subject: [Linux-uvc-devel] driver 5986:0100 linux" and "0x45:6270 linux
In-Reply-To: <200707052121.53492.laurent.pinchart@skynet.be>
References: <200707020017.08510.ernih@gmx.de>
	<200707052121.53492.laurent.pinchart@skynet.be>
Message-ID: <200707162334.02117.ernih@gmx.de>

On Thursday 05 July 2007 21:21:53 you wrote:
> Hi,
>
> On Monday 02 July 2007, ernih at gmx.de wrote:
> > hi i need drivers for:
> >
> > 5986:0100 linux" and "0x45:6270 linux
>
> For the 5986:0100, please try the latest release from SVN and report any
> issue you run into.
>
> For the 0x45:6270, I assume you mean 0c45:6270. That device is not UVC
> compliant, and will never be supported by the Linux UVC driver. You should
> check the spca5xx driver, or the newer related gspca driver.
>
> > when will it be finished?
>
> As a side note, asking for other people to work for you without saying
> please is considered as quite crude, to say the least.
>
> Best regards,
>
> Laurent Pinchart

hi i would like to do this, but i am a newbee. i use kubuntu since 10 weeks. i 
do not know what i have to do.

can somebody help me in this case?

best regards
erhan from germany


From laurent.pinchart at skynet.be  Tue Jul 17 00:06:56 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 17 Jul 2007 00:06:56 +0200
Subject: [Linux-uvc-devel] Pan and Tilt of Quickcam Orbit MP
In-Reply-To: <7bda0a0707161028y59be3040q1ffec8a6815d1fc1@mail.gmail.com>
References: <7bda0a0707161028y59be3040q1ffec8a6815d1fc1@mail.gmail.com>
Message-ID: <200707170006.56342.laurent.pinchart@skynet.be>

Hi Rich,

On Monday 16 July 2007, Rich Kemp wrote:
> Hi, I'm using uvc with a logitech quickcam orbit mp, and I was wondering if
> there are any utilities similar to the setpwc utility that allows you to
> change the pan or tilt of an old orbit webcam from the command line. I've
> played with luvcview and can pan and tilt the camera from that
> application's gui controls, but I wondered if anything exists similar to
> setpwc. I know I read a post from Laurent last September that mentioned
> updates to IOCTL for panning and tilting.

I'm not aware of any command line tool that controls device pan/tilt motion 
(although there might be one I'm not aware of).

Here is a code sample from a very simple test program I use when hacking the 
driver. Its arguments are:

- dev: the device file descriptor
- pan: pan angle in 1/64th of degree
- tilt: tilt angle in 1/64th of degree
- reset: set to 1 to reset pan/tilt to the device origin, set to 0 otherwise

#include "uvcvideo.h"

void pantilt(int dev, int pan, int tilt, int reset)
{
        struct v4l2_ext_control xctrls[2];
        struct v4l2_ext_controls ctrls;

        if (reset) {
                xctrls[0].id = V4L2_CID_PANTILT_RESET;
                xctrls[0].value = 3;

                ctrls.count = 1;
                ctrls.controls = xctrls;
        } else {
                xctrls[0].id = V4L2_CID_PAN_RELATIVE;
                xctrls[0].value = pan;
                xctrls[1].id = V4L2_CID_TILT_RELATIVE;
                xctrls[1].value = tilt;

                ctrls.count = 2;
                ctrls.controls = xctrls;
        }

        ioctl(dev, VIDIOC_S_EXT_CTRLS, &ctrls);
}

Regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Jul 17 00:13:56 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 17 Jul 2007 00:13:56 +0200
Subject: [Linux-uvc-devel] driver 5986:0100 linux" and "0x45:6270 linux
In-Reply-To: <200707162334.02117.ernih@gmx.de>
References: <200707020017.08510.ernih@gmx.de>
	<200707052121.53492.laurent.pinchart@skynet.be>
	<200707162334.02117.ernih@gmx.de>
Message-ID: <200707170013.57043.laurent.pinchart@skynet.be>

On Monday 16 July 2007, ernih at gmx.de wrote:
> On Thursday 05 July 2007 21:21:53 you wrote:
> > Hi,
> >
> > On Monday 02 July 2007, ernih at gmx.de wrote:
> > > hi i need drivers for:
> > >
> > > 5986:0100 linux" and "0x45:6270 linux
> >
> > For the 5986:0100, please try the latest release from SVN and report any
> > issue you run into.
> >
> > For the 0x45:6270, I assume you mean 0c45:6270. That device is not UVC
> > compliant, and will never be supported by the Linux UVC driver. You
> > should check the spca5xx driver, or the newer related gspca driver.
> >
> > > when will it be finished?
> >
> > As a side note, asking for other people to work for you without saying
> > please is considered as quite crude, to say the least.
> >
> > Best regards,
> >
> > Laurent Pinchart
>
> hi i would like to do this, but i am a newbee. i use kubuntu since 10
> weeks. i do not know what i have to do.
>
> can somebody help me in this case?

In a nutshell, you will need a compiler (gcc), the kernel sources and a 
subversion client. Install those using the Ubuntu package manager (I don't 
know the exact package names, sorry).

You should then get the Linux UVC sources from SVN as explained on 
http://linux-uvc.berlios.de. To compile them, just type make in the source 
directory. Then, as root, execute make install to install the module.

There might be some tweaks required here and there, you should search the list 
archive to check for Ubuntu-related issues.

Regards,

Laurent Pinchart


From t.st1 at gmx.net  Tue Jul 17 08:57:36 2007
From: t.st1 at gmx.net (Tom St)
Date: Tue, 17 Jul 2007 08:57:36 +0200
Subject: [Linux-uvc-devel] driver 5986:0100 linux" and "0x45:6270 linux
In-Reply-To: <200707170013.57043.laurent.pinchart@skynet.be>
References: <200707020017.08510.ernih@gmx.de>	<200707052121.53492.laurent.pinchart@skynet.be>	<200707162334.02117.ernih@gmx.de>
	<200707170013.57043.laurent.pinchart@skynet.be>
Message-ID: <469C6860.2070506@gmx.net>

Hello,
> In a nutshell, you will need a compiler (gcc), the kernel sources and a 
> subversion client. Install those using the Ubuntu package manager (I don't 
> know the exact package names, sorry).
>
> You should then get the Linux UVC sources from SVN as explained on 
> http://linux-uvc.berlios.de. To compile them, just type make in the source 
> directory. Then, as root, execute make install to install the module.
>
> There might be some tweaks required here and there, you should search the list 
> archive to check for Ubuntu-related issues.
>   
And if you made it compile, i would be happy if you share your
documentation and hints via the UVC wiki
(http://openfacts.berlios.de/index-en.phtml?title=Linux+UVC). There are
already hints on how to compile for Ubuntu 6.06 LTS (similar to Debian).

Kind regards,
Tom



From David.C.Trotz at jpl.nasa.gov  Tue Jul 17 17:54:46 2007
From: David.C.Trotz at jpl.nasa.gov (David C Trotz Jr)
Date: Tue, 17 Jul 2007 08:54:46 -0700
Subject: [Linux-uvc-devel] unsubscribe
Message-ID: <A8443273-D094-494D-8EE2-B8462F9FD12B@jpl.nasa.gov>

I have processed an unsubscribe request already, yet I am getting  
these emails still. Please remove me from this list.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070717/294cd5d3/attachment.html>

From laurent.pinchart at skynet.be  Wed Jul 18 09:57:00 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 18 Jul 2007 09:57:00 +0200
Subject: [Linux-uvc-devel] unsubscribe
In-Reply-To: <A8443273-D094-494D-8EE2-B8462F9FD12B@jpl.nasa.gov>
References: <A8443273-D094-494D-8EE2-B8462F9FD12B@jpl.nasa.gov>
Message-ID: <200707180957.00127.laurent.pinchart@skynet.be>

On Tuesday 17 July 2007 17:54, David C Trotz Jr wrote:
> I have processed an unsubscribe request already, yet I am getting
> these emails still. Please remove me from this list.

Done.

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Jul 18 21:52:39 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 18 Jul 2007 21:52:39 +0200
Subject: [Linux-uvc-devel] Patch: Read support
In-Reply-To: <200707131748.48675.chris.horler@clara.co.uk>
References: <200707131748.48675.chris.horler@clara.co.uk>
Message-ID: <200707182152.39298.laurent.pinchart@skynet.be>

Hi Chris,

On Friday 13 July 2007, Christopher HORLER wrote:
> Hi,
>
> Here's a first attempt at supporting read - I'm sure there's bits to iron
> out, but it works for me.

I already applied whitespace cleanup and other cosmetic changes. I'll comment 
on the rest.

> Index: uvc_queue.c
> ===================================================================
> --- uvc_queue.c	(revision 111)
> +++ uvc_queue.c	(working copy)
> @@ -63,6 +63,8 @@
>   *    At that point, any process waiting on the buffer will be woken up.
> If a *    process tries to dequeue a buffer after it has been marked ready,
> the *    dequeing will succeed immediately.
> +
> + *    Note: During the read operation the user / client is the driver
> itself. *
>   * 2. Buffers are queued, user is waiting on a buffer and the device gets
>   *    disconnected.
> @@ -91,11 +93,11 @@
>   *
>   * Pages are reserved to make sure they will not be swaped, as they will
> be * filled in URB completion handler.
> - *
> + *
>   * Buffers will be individually mapped, so they must all be page aligned.
>   */
>  int uvc_alloc_buffers(struct uvc_video_queue *queue, unsigned int
> nbuffers, -		unsigned int buflength)
> +		      unsigned int buflength, int memtype)
>  {
>  	unsigned int bufsize = PAGE_ALIGN(buflength);
>  	unsigned int i;
> @@ -108,7 +110,7 @@
>  	mutex_lock(&queue->mutex);
>
>  	if ((ret = uvc_free_buffers(queue)) < 0)
> -		goto done;
> +	  goto done;
>
>  	/* Decrement the number of buffers until allocation succeeds. */
>  	for (; nbuffers > 0; --nbuffers) {
> @@ -131,7 +133,8 @@
>  		queue->buffer[i].buf.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
>  		queue->buffer[i].buf.sequence = 0;
>  		queue->buffer[i].buf.field = V4L2_FIELD_NONE;
> -		queue->buffer[i].buf.memory = V4L2_MEMORY_MMAP;
> +		if (memtype == V4L2_MEMORY_MMAP)
> +		  queue->buffer[i].buf.memory = memtype;
>  		queue->buffer[i].buf.flags = 0;
>  		init_waitqueue_head(&queue->buffer[i].wait);
>  	}
> @@ -154,6 +157,8 @@
>  {
>  	unsigned int i;
>
> +	uvc_trace(UVC_TRACE_CAPTURE, "Freeing buffers\n");
> +
>  	for (i = 0; i < queue->count; ++i) {
>  		if (queue->buffer[i].vma_use_count != 0)
>  			return -EBUSY;
> @@ -171,19 +176,20 @@
>  #endif
>  		vfree(queue->mem);
>  		queue->count = 0;
> +		queue->mem = NULL;

This is not required, as queue alloc/free operations use queue->count to track 
the free/allocated state.

>  	}
>
>  	return 0;
>  }
>
>  void uvc_query_buffer(struct uvc_buffer *buf,
> -		struct v4l2_buffer *v4l2_buf)
> +		      struct v4l2_buffer *v4l2_buf)
>  {
>  	memcpy(v4l2_buf, &buf->buf, sizeof *v4l2_buf);
>
>  	if(buf->vma_use_count)
>  		v4l2_buf->flags |= V4L2_BUF_FLAG_MAPPED;
> -
> +
>  	switch (buf->state) {
>  	case UVC_BUF_STATE_ERROR:
>  	case UVC_BUF_STATE_DONE:
> @@ -199,6 +205,7 @@
>  	}
>  }
>
> +
>  /*
>   * Queue a video buffer. Attempting to queue a buffer that has already
> been * queued will return -EINVAL.
> @@ -211,11 +218,9 @@
>
>  	uvc_trace(UVC_TRACE_CAPTURE, "Queuing buffer %u.\n", v4l2_buf->index);
>
> -	if (v4l2_buf->type != V4L2_BUF_TYPE_VIDEO_CAPTURE ||
> -	    v4l2_buf->memory != V4L2_MEMORY_MMAP) {
> -		uvc_trace(UVC_TRACE_CAPTURE, "[E] Invalid buffer type (%u) "
> -			"and/or memory (%u).\n", v4l2_buf->type,
> -			v4l2_buf->memory);
> +	if (v4l2_buf->type != V4L2_BUF_TYPE_VIDEO_CAPTURE ) {
> +		uvc_trace(UVC_TRACE_CAPTURE, "[E] Invalid buffer type (%u) ",
> +			  v4l2_buf->type);
>  		return -EINVAL;
>  	}
>
> @@ -254,9 +259,12 @@
>  			? 0 : -EAGAIN;
>  	}
>
> -	return wait_event_interruptible(buf->wait,
> -		buf->state != UVC_BUF_STATE_QUEUED &&
> -		buf->state != UVC_BUF_STATE_ACTIVE);
> +	if (wait_event_interruptible(buf->wait,
> +				     buf->state != UVC_BUF_STATE_QUEUED &&
> +				     buf->state != UVC_BUF_STATE_ACTIVE))
> +	  return -ERESTARTSYS;
> +
> +	return 0;

wait_event_interruptible returns -ERESTARTSYS directly, there's no need for an 
additional check.

>  }
>
>  /*
> @@ -269,11 +277,9 @@
>  	struct uvc_buffer *buf;
>  	int ret = 0;
>
> -	if (v4l2_buf->type != V4L2_BUF_TYPE_VIDEO_CAPTURE ||
> -	    v4l2_buf->memory != V4L2_MEMORY_MMAP) {
> -		uvc_trace(UVC_TRACE_CAPTURE, "[E] Invalid buffer type (%u) "
> -			"and/or memory (%u).\n", v4l2_buf->type,
> -			v4l2_buf->memory);
> +	if (v4l2_buf->type != V4L2_BUF_TYPE_VIDEO_CAPTURE ) {
> +		uvc_trace(UVC_TRACE_CAPTURE, "[E] Invalid buffer type (%u) ",
> +			  v4l2_buf->type);
>  		return -EINVAL;
>  	}
>
> @@ -286,7 +292,7 @@
>
>  	buf = list_entry(queue->mainqueue.next, struct uvc_buffer, stream);
>  	uvc_trace(UVC_TRACE_CAPTURE, "Dequeuing buffer %u.\n", buf->buf.index);
> -	if ((ret = uvc_queue_waiton(buf, nonblocking)) < 0)
> +	if ((ret = uvc_queue_waiton(buf, nonblocking)))

This is not needed.

>  		goto done;
>
>  	switch (buf->state) {
> Index: uvc_v4l2.c
> ===================================================================
> --- uvc_v4l2.c	(revision 111)
> +++ uvc_v4l2.c	(working copy)
> @@ -241,6 +241,7 @@
>
>  static int uvc_v4l2_set_format(struct uvc_video_device *video, struct
> v4l2_format *fmt) {
> +
>  	struct uvc_streaming_control probe;
>  	struct uvc_format *format;
>  	struct uvc_frame *frame;
> @@ -401,7 +402,10 @@
>  	struct video_device *vdev;
>  	struct uvc_video_device *video;
>  	struct uvc_fh *handle;
> +	struct v4l2_requestbuffers req;
> +	unsigned int bufsize;
>  	int ret = 0;
> +	int i;
>
>  	uvc_trace(UVC_TRACE_CALLS, "uvc_v4l2_open\n");
>  	mutex_lock(&uvc_driver.open_mutex);
> @@ -426,8 +430,43 @@
>
>  	kref_get(&video->dev->kref);
>
> -done:
>  	mutex_unlock(&uvc_driver.open_mutex);
> +
> +	if ((ret = uvc_acquire_privileges(handle)) < 0) {
> +		return ret;
> +	}
> +
> +	bufsize = video->streaming->ctrl.dwMaxVideoFrameSize;
> +	memset(&req, 0, sizeof req);
> +        req.count = 4;
> +        req.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
> +
> +	if ((ret = uvc_alloc_buffers(&video->queue, req.count, bufsize,
> req.memory)) < 0) { +		uvc_trace(UVC_TRACE_CALLS, "failed to allocate
> buffers\n");
> +		return ret;
> +	}
> +
> +	/* check stream is on */
> +	if (!video->stream) {
> +		uvc_trace(UVC_TRACE_CALLS, "enabling stream\n");
> +		if ((ret = uvc_video_enable(video, 1)) < 0)
> +			return ret;
> +		video->stream = UVC_STREAM_ON;
> +	}
> +
> +	uvc_trace(UVC_TRACE_CALLS, "queueing buffers\n");
> +	for (i = 0; i < video->queue.count; ++i) {
> +		struct v4l2_buffer v4l2_buf;
> +		memset(&v4l2_buf, 0, sizeof v4l2_buf);
> +		v4l2_buf.type        = V4L2_BUF_TYPE_VIDEO_CAPTURE;
> +		v4l2_buf.index       = i;
> +		uvc_queue_buffer(&video->queue, &v4l2_buf);
> +	}
> +
> +
> +	return 0;
> + done:
> +	mutex_unlock(&uvc_driver.open_mutex);

Start streaming the first time read() is called, not when the device is 
opened. The queue should be allocated at the first read() call as well. Don't 
hardcode the buffer count to 4, use the value set by VIDIOC_S_PARM (with 
sensible limits).

>  	return ret;
>  }
>
> @@ -442,6 +481,7 @@
>  	/* Only free resources if this is a privileged handle. */
>  	if (uvc_has_privileges(handle)) {
>  		uvc_video_enable(video, 0);
> +		video->stream = UVC_STREAM_OFF;
>
>  		mutex_lock(&video->queue.mutex);
>  		if (uvc_free_buffers(&video->queue) < 0)

video->stream was a leftover of some old idea I can't really remember. I 
committed a change to remove it.

> @@ -483,7 +523,7 @@
>  			sizeof cap->bus_info);
>  		cap->version = DRIVER_VERSION_NUMBER;
>  		cap->capabilities = V4L2_CAP_VIDEO_CAPTURE
> -				  | V4L2_CAP_STREAMING;
> +			| V4L2_CAP_STREAMING | V4L2_CAP_READWRITE;
>  	}
>  		break;
>
> @@ -591,7 +631,7 @@
>  			if (index != 0)
>  				return -EINVAL;
>  			iterm = list_entry(video->iterms.next,
> -					struct uvc_entity, chain);
> +					   struct uvc_entity, chain);
>  			pin = iterm->id;
>  		} else if (pin < selector->selector.bNrInPins) {
>  			pin = selector->selector.baSourceID[index];
> @@ -815,6 +855,11 @@
>  		struct v4l2_requestbuffers *rb = arg;
>  		unsigned int bufsize = video->streaming->ctrl.dwMaxVideoFrameSize;
>
> +		/* overcome the open function allocation */
> +		uvc_queue_cancel(&video->queue);
> +		INIT_LIST_HEAD(&video->queue.mainqueue);
> +
> +		/* TODO: User pointer */
>  		if (rb->type != V4L2_BUF_TYPE_VIDEO_CAPTURE ||
>  		    rb->memory != V4L2_MEMORY_MMAP)
>  			return -EINVAL;
> @@ -822,10 +867,13 @@
>  		if ((ret = uvc_acquire_privileges(handle)) < 0)
>  			return ret;
>
> -		if ((ret = uvc_alloc_buffers(&video->queue, rb->count, bufsize)) < 0)
> +		if ((ret = uvc_alloc_buffers(&video->queue, rb->count, bufsize,
> rb->memory)) < 0) return ret;
>
>  		rb->count = ret;
> +
> +
> +
>  	}
>  		break;
>
> @@ -887,13 +935,23 @@
>  		if (!uvc_has_privileges(handle))
>  			return -EBUSY;
>
> -		return uvc_video_enable(video, 0);
> +		if ((ret = uvc_video_enable(video, 0)) < 0)
> +		  return ret;
> +
> +		video->stream = UVC_STREAM_OFF;

Old leftover, can be removed.

> +		return ret;
>  	}
>
>  	/* Analog video standards make no sense for digital cameras. */
> +	case VIDIOC_G_STD:
> +	{
> +		v4l2_std_id *sidp = arg;
> +		*sidp = V4L2_STD_UNKNOWN;
> +	}
> +		break;
> +
>  	case VIDIOC_ENUMSTD:
>  	case VIDIOC_QUERYSTD:
> -	case VIDIOC_G_STD:

This has nothing to do with read() support. VIDIOC_G_STD has been discussed a 
lot in the v4l mailing list in the past, and I still believe it makes no 
sense for webcams.

>  	case VIDIOC_S_STD:
>
>  	case VIDIOC_OVERLAY:
> @@ -922,11 +980,109 @@
>  	return video_usercopy(inode, file, cmd, arg, uvc_v4l2_do_ioctl);
>  }
>
> +
>  static ssize_t uvc_v4l2_read(struct file *file, char __user *data,
> -		    size_t count, loff_t *ppos)
> +			     size_t count, loff_t *ppos)
>  {
> -	uvc_trace(UVC_TRACE_CALLS, "uvc_v4l2_read: not implemented.\n");
> -	return -ENODEV;
> +
> +	static struct uvc_buffer *buf = NULL;
> +	struct video_device *vdev = video_devdata(file);
> +	struct uvc_video_device *video = video_get_drvdata(vdev);
> +	struct uvc_fh *handle = (struct uvc_fh *)file->private_data;
> +	int nonblock = file->f_flags & O_NONBLOCK;
> +	ssize_t ret = 0;
> +	struct v4l2_buffer v4l2_b;
> +	ssize_t len;
> +	void *mem;
> +
> +	memset(&v4l2_b, 0, sizeof v4l2_b);
> +	v4l2_b.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
> +
> +	uvc_trace(UVC_TRACE_READ, "uvc_v4l2_read\n");
> +	uvc_trace(UVC_TRACE_READ, "size requested: %u\n", count);
> +
> +
> +	if (!uvc_has_privileges(handle)) {
> +		uvc_trace(UVC_TRACE_READ, "no privileges returning EBUSY\n");
> +		return -EBUSY;
> +	}

As stated above, streaming shouldn't be started in uvc_v4l2_open(). You should 
acquire privileges here instead of testing for them.

> +
> +	if (!data) {
> +		return -EINVAL;
> +	}

Checking for NULL doesn't make sense. Issues will be caught by copy_to_user.

> +
> +	if (!video->stream) {
> +		int i;
> +		uvc_trace(UVC_TRACE_READ, "enabling stream\n");
> +		if ((ret = uvc_video_enable(video, 1)) < 0)
> +			return ret;
> +		video->stream = UVC_STREAM_ON;
> +		uvc_trace(UVC_TRACE_READ, "stream on\n");
> +		uvc_trace(UVC_TRACE_READ, "queueing buffers\n");
> +		for (i = 0; i < video->queue.count; ++i) {
> +			struct v4l2_buffer v4l2_buf;
> +			memset(&v4l2_buf, 0, sizeof v4l2_buf);
> +			v4l2_buf.type	   = V4L2_BUF_TYPE_VIDEO_CAPTURE;
> +			v4l2_buf.index	   = i;
> +			uvc_queue_buffer(&video->queue, &v4l2_buf);
> +		}
> +	}
> +
> +	/* it's all mine, nobody else can have it:-) */
> +	if(mutex_lock_interruptible(&video->queue.mutex)) {
> +		return -ERESTARTSYS;
> +	}
> +
> +	/* valid queue? */
> +	if (list_empty(&video->queue.mainqueue)) {
> +		uvc_trace(UVC_TRACE_READ, "internal driver error, queue is empty -
> aborting\n"); +		ret = -ERESTARTSYS;
> +		goto done;
> +	}

Why would the queue be empty ?

> +
> +	buf = list_entry(video->queue.mainqueue.next, struct uvc_buffer, stream);

Don't access the queue directly. Use the information returned by 
uvc_dequeue_buffer().

> +
> +	mutex_unlock(&video->queue.mutex);
> +	if ((ret = uvc_dequeue_buffer(&video->queue, &v4l2_b, nonblock)) < 0) {
> +		return ret;
> +	}
> +
> +	len = v4l2_b.bytesused;
> +	if (len > count || len == 0) {
> +		uvc_trace(UVC_TRACE_READ, "invalid length - aborting\n"
> +			  "\tlen: %u\n\tbufsize: %u\n\tcount: %u\n",
> +			  len, buf->buf.length, count);
> +		ret = -EINVAL;
> +		goto done;
> +	}
> +
> +	if (mutex_lock_interruptible(&video->queue.mutex)) {
> +		uvc_trace(UVC_TRACE_READ, "failed to keep mutex - interrupted,
> requeueing buffer\n"); +		uvc_queue_buffer(&video->queue, &v4l2_b);
> +		return -ERESTARTSYS;
> +	}

No need to lock the queue here.

> +
> +	/* copy the frame */
> +	mem = video->queue.mem + buf->buf.m.offset;
> +	if (copy_to_user(data, mem, len)) {
> +		uvc_trace(UVC_TRACE_READ, "copy_to_user error\n");
> +		mutex_unlock(&video->queue.mutex);
> +		uvc_queue_buffer(&video->queue, &v4l2_b);
> +		return -EFAULT;
> +	}

This won't work. read() can be called with data buffers smaller than a video 
frame. You should not assume that a read() call will read a whole buffer at 
once.

> +
> +	mutex_unlock(&video->queue.mutex);

And no need to unlock it here.

> +	if (uvc_queue_buffer(&video->queue, &v4l2_b) < 0) {
> +		uvc_trace(UVC_TRACE_READ, "problem queueing?\n");
> +	}
> +
> +	uvc_trace(UVC_TRACE_READ, "success: %u\n", len);
> +	return len;
> +
> + done:
> +	uvc_trace(UVC_TRACE_READ, "probable error condition, or interrupted\n");
> +	mutex_unlock(&video->queue.mutex);
> +	return ret;
>  }
>
>  /*
> Index: uvcvideo.h
> ===================================================================
> --- uvcvideo.h	(revision 111)
> +++ uvcvideo.h	(working copy)
> @@ -235,7 +235,7 @@
>  /* Maximum number of video buffers. */
>  #define UVC_MAX_VIDEO_BUFFERS	32
>
> -#define UVC_CTRL_TIMEOUT	300
> +#define UVC_CTRL_TIMEOUT	600

This is part of another fix. I'll work on it.

>
>  /* Devices quirks */
>  #define UVC_QUIRK_STATUS_INTERVAL	0x00000001
> @@ -581,11 +581,11 @@
>  };
>
>  struct uvc_driver {
> -        struct usb_driver driver;
> +	struct usb_driver driver;
>
>  	struct mutex open_mutex;	/* protects from open/disconnect race */
>
> -        struct list_head devices;	/* struct uvc_device list */
> +	struct list_head devices;	/* struct uvc_device list */
>  	struct list_head controls;	/* struct uvc_control_info list */
>  	struct mutex ctrl_mutex;	/* protects controls and devices lists */
>  };
> @@ -602,6 +602,7 @@
>  #define UVC_TRACE_CALLS		(1 << 5)
>  #define UVC_TRACE_IOCTL		(1 << 6)
>  #define UVC_TRACE_FRAME		(1 << 7)
> +#define UVC_TRACE_READ  	(1 << 8)
>
>  extern unsigned int uvc_trace_param;
>
> @@ -634,7 +635,7 @@
>  /* Video buffers queue management. */
>  extern void uvc_queue_init(struct uvc_video_queue *queue);
>  extern int uvc_alloc_buffers(struct uvc_video_queue *queue,
> -		unsigned int nbuffers, unsigned int buflength);
> +			     unsigned int nbuffers, unsigned int buflength, int memtype);
>  extern int uvc_free_buffers(struct uvc_video_queue *queue);
>  extern void uvc_query_buffer(struct uvc_buffer *buf,
>  		struct v4l2_buffer *v4l2_buf);

I might have forgotten a few comments, so feel free to ask if anything seems 
unclear, or if you need help.

Cheers, and thanks for the work.

Laurent Pinchart


From luca.risolia at studio.unibo.it  Thu Jul 19 00:02:55 2007
From: luca.risolia at studio.unibo.it (Luca Risolia)
Date: Thu, 19 Jul 2007 00:02:55 +0200
Subject: [Linux-uvc-devel] Patch: Read support
In-Reply-To: <200707182152.39298.laurent.pinchart@skynet.be>
References: <200707131748.48675.chris.horler@clara.co.uk>
	<200707182152.39298.laurent.pinchart@skynet.be>
Message-ID: <200707190002.55679.luca.risolia@studio.unibo.it>

On Wednesday 18 July 2007 21:52:39 Laurent Pinchart wrote:
> > +	/* copy the frame */
> > +	mem = video->queue.mem + buf->buf.m.offset;
> > +	if (copy_to_user(data, mem, len)) {
> > +		uvc_trace(UVC_TRACE_READ, "copy_to_user error\n");
> > +		mutex_unlock(&video->queue.mutex);
> > +		uvc_queue_buffer(&video->queue, &v4l2_b);
> > +		return -EFAULT;
> > +	}
>
> This won't work. read() can be called with data buffers smaller than a
> video frame.

> You should not assume that a read() call will read a whole 
> buffer at once.

This is not correct. One read() should provide one frame exactly, In facts, 
the V4L2 API states:

"read() attempts to read up to count bytes from file descriptor fd into the 
buffer starting at buf. [...] Regardless of the count value each read() call 
will provide at most one frame (two fields) worth of data.
[...]
read() never returns a "snapshot" of a buffer being filled. Using a single 
buffer the driver will stop capturing when the application starts reading the 
buffer until the read is finished. [...]"

Best regards
Luca Risolia



From MOMOR at tdc.dk  Thu Jul 19 01:49:44 2007
From: MOMOR at tdc.dk (Morten Mortensen)
Date: Thu, 19 Jul 2007 01:49:44 +0200
Subject: [Linux-uvc-devel] List of supported devices missing "Creative Live!
	Cam Optia AF" ?
Message-ID: <5D16E2E89E828C43A1BA621338322455928244@VESTMB401A.tdk.dk>

 
- I have been looking at your list of supported devices and have just tried three newer webcams of mine. The two first are just really good Logitech cameras (Fusion and Ultra Vision) while the third one is the Creative Live! Cam Optia *AF* - not the Optia vith a 1.3 Mpx sensor, but the AF version with the 2 Mpx sensor - and it appears to be operational with the current UVC driver!!
 
I says this, because I notice, that you have the Optia camera on the list of supported devices, but not the Optia AF. It is a somewhat important camera, because the 2 Mpx-lens webcams are nearly non-existent; up until now, I know of only this single model.
 
So far, I have testet only with luvcview - and I had to force using the YUV encoding; the default setting just gave green flickering before failing. But it looks good - really good.
 
Regards,
Morten Sabroe Mortensen
 


From phil at sanslogic.co.uk  Thu Jul 19 09:44:14 2007
From: phil at sanslogic.co.uk (Philip Heron)
Date: Thu, 19 Jul 2007 08:44:14 +0100
Subject: [Linux-uvc-devel] Patch: Read support
In-Reply-To: <200707190002.55679.luca.risolia@studio.unibo.it>
References: <200707131748.48675.chris.horler@clara.co.uk>	<200707182152.39298.laurent.pinchart@skynet.be>
	<200707190002.55679.luca.risolia@studio.unibo.it>
Message-ID: <469F164E.9050909@sanslogic.co.uk>

Hi Luca,

Luca Risolia wrote:
>> You should not assume that a read() call will read a whole 
>> buffer at once.
> 
> This is not correct. One read() should provide one frame exactly, In facts, 
> the V4L2 API states:
> 
> "read() attempts to read up to count bytes from file descriptor fd into the 
> buffer starting at buf. [...] Regardless of the count value each read() call 
> will provide at most one frame (two fields) worth of data.

What I think this means is that the driver should return either count 
bytes or a full frames worth - whichever is smaller. Any value smaller 
again should also be valid.

> [...]
> read() never returns a "snapshot" of a buffer being filled. Using a single 
> buffer the driver will stop capturing when the application starts reading the 
> buffer until the read is finished. [...]"

This means that a frame is guaranteed not to be overwritten by another 
frame as it's being read, so an application can take as long as it needs 
reading it.

-Phil



From laurent.pinchart at skynet.be  Thu Jul 19 12:00:23 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 19 Jul 2007 12:00:23 +0200
Subject: [Linux-uvc-devel] Patch: Read support
In-Reply-To: <469F164E.9050909@sanslogic.co.uk>
References: <200707131748.48675.chris.horler@clara.co.uk>
	<200707190002.55679.luca.risolia@studio.unibo.it>
	<469F164E.9050909@sanslogic.co.uk>
Message-ID: <200707191200.24323.laurent.pinchart@skynet.be>

Hi,

On Thursday 19 July 2007 09:44, Philip Heron wrote:
> Hi Luca,
>
> Luca Risolia wrote:
> >> You should not assume that a read() call will read a whole
> >> buffer at once.
> >
> > This is not correct. One read() should provide one frame exactly, In
> > facts, the V4L2 API states:
> >
> > "read() attempts to read up to count bytes from file descriptor fd into
> > the buffer starting at buf. [...] Regardless of the count value each
> > read() call will provide at most one frame (two fields) worth of data.
>
> What I think this means is that the driver should return either count
> bytes or a full frames worth - whichever is smaller. Any value smaller
> again should also be valid.
>
> > [...]
> > read() never returns a "snapshot" of a buffer being filled. Using a
> > single buffer the driver will stop capturing when the application starts
> > reading the buffer until the read is finished. [...]"
>
> This means that a frame is guaranteed not to be overwritten by another
> frame as it's being read, so an application can take as long as it needs
> reading it.

Thanks Phil, that's what I was about to say :-) The V4L2 API doesn't force 
applications to read() a while buffer at once.

Regards,

Laurent Pinchart


From ozgurdel at yahoo.com  Thu Jul 19 14:53:58 2007
From: ozgurdel at yahoo.com (Ozgur Delice)
Date: Thu, 19 Jul 2007 05:53:58 -0700 (PDT)
Subject: [Linux-uvc-devel] driver 5986:0100 linux works
Message-ID: <302016.89301.qm@web50608.mail.re2.yahoo.com>

hi,
i have an acer 5102 wlmi laptop with  orbicam webcam. i have (kx)ubuntu 7.02.
I had wondered if this webcam works on linux. 
it has lsusb output as follows:
lsusb
Bus 003 Device 002: ID 5986:0100
Bus 003 Device 001: ID 0000:0000
Bus 002 Device 001: ID 0000:0000
Bus 001 Device 001: ID 0000:0000

after reading some posts on this mail group and some sites that some messages refer, i got linux uvc sources from svn  as explained in the messages and also lucviev-20070512.tar.gz. 

after compiling  and installing  uvc and also lucview as explained in the wiki page, 
i gave the comand ./lucview but it crushed. however i rebooted and tried again, 
it just worked :)
which shows that linux uvc driver is supporting this webcam (Acer orbicam coming with 5102wlmi laptops)..

now i have to find out how to make it working this webcam  with other programs....

thanks ..

 
       
---------------------------------
Pinpoint customers who are looking for what you sell. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070719/70319266/attachment.html>

From laurent.pinchart at skynet.be  Thu Jul 19 20:30:46 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 19 Jul 2007 20:30:46 +0200
Subject: [Linux-uvc-devel] Patch: Read support
In-Reply-To: <200707182218.29293.chris.horler@clara.co.uk>
References: <200707131748.48675.chris.horler@clara.co.uk>
	<200707182152.39298.laurent.pinchart@skynet.be>
	<200707182218.29293.chris.horler@clara.co.uk>
Message-ID: <200707192030.46531.laurent.pinchart@skynet.be>

Hi Chris,

please keep the list CC'ed.

On Wednesday 18 July 2007, Christopher HORLER wrote:
> Hi Laurent,
>
> I've cut a lot of it out because I only had three things to say, as I
> mostly agree.  I was learning as a did it... and it was a first attempt, so
> I actually expected quite a few issues.

No worries. My first tries aren't perfect either (I doubt any of my code could 
be considered perfect).

> Sorry about the spaces - my xemacs was set up without c-basic-offset=8 to
> begin with. I'm now setting this when editing.

I don't mind whitespace cleanup patches, but please try to split them from the 
rest.

> Quick question on overlays - I assume these aren't planned as I don't see
> the copy providing a performance benefit.  I've done some reading and
> searching and I'm assuming it would be CPU driven for a USB device?  Are
> you able to confirm this, or tell me I'm wrong?

If by overlay you mean writing to the graphic memory, you're right, this isn't 
planned. There is no way a USB device could write to the GPU, so this doesn't 
make sense.

> The Flash Player is a particularly awkward application in this regard -
> I've started to look at providing a kind of software driven overlay at the
> kernel level setup via the X V4L extension because flash seems to rely on
> the overlay for aspects of it's operation.

Really ? Should flash be added to the list of "broken by design" 
software ? :-)

> Although now I'm beginning to 
> think a more logical approach might be to try and patch the flash support
> library to work with the UVC driver and no overlay (but I'm not certain
> that this is supported - even though there's example code available).

I'm not familiar with flash. Do they provide an open-source user library to 
access video devices ?

> The 
> other advantage to this is that the xv_id comparisons in the v4l module for
> xorg appear to get confused when they start by matching a YUYV against a
> YUY2 but then compare the id's to find their not equal (my understanding is
> that although not equal they are compatible?)

I don't think it makes sense to implement a "software overlay" in the kernel. 
It should definitely not be at the UVC driver level.

> On Wednesday 18 July 2007 20:52, you wrote:
> > Start streaming the first time read() is called, not when the device is
> > opened. The queue should be allocated at the first read() call as well.
> > Don't hardcode the buffer count to 4, use the value set by VIDIOC_S_PARM
> > (with sensible limits).
>
> As long as poll returns the correct results in this case it seems
> reasonable. I was hoping you'd offer a better way to set the buffer count -
> as I was struggling to know what to do.

The V4L2 specification isn't very clear about the number of buffers that 
should be allocated. Drivers are free to do as they want, VIDIOC_S_PARM is 
just a hint. You can either pre-allocate the number of buffers requested by 
VIDIOC_S_PARM, or allocate a single buffer when read() is called.

> > This has nothing to do with read() support. VIDIOC_G_STD has been
> > discussed a lot in the v4l mailing list in the past, and I still believe
> > it makes no sense for webcams.
>
> I didn't do this for read() - it was triggering what I couldn't decide if
> was an application bug or a driver bug.  The V4L compat layer seems to rely
> on this call returning a value other than -EINVAL.  Kopete (v4l app, but
> v4l2 support looks like it's being added) was relying on the V4L compat
> layer.  I didn't think it did any harm so I added it.

Again, I'd appreciate if you could split different features into separate 
patches :-)

The V4L2 specification doesn't make VIDIOC_G_STD mandatory, so I personally 
think the V4L compat layer, as well as applications, should be fixed to 
handle a lack of VIDIOC_G_STD.

> > This won't work. read() can be called with data buffers smaller than a
> > video frame. You should not assume that a read() call will read a whole
> > buffer at once.
>
> A few of the other drivers do this, and I had made the assumption it was
> correct from a statement made in the V4L spec.  Generally I agree with you
> though - it should be possible to read parts of the buffer, and not the
> whole buffer (and the V4L2 spec is not the V4L spec!)

Then I think those drivers are buggy. If I'm not mistaken, video-buf handles 
read() calls with buffer sizes smaller than the frame size. What made you 
assume that read() calls has to read a complete frame ?

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Jul 19 21:06:03 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 19 Jul 2007 21:06:03 +0200
Subject: [Linux-uvc-devel] List of supported devices missing "Creative
	Live! Cam Optia AF" ?
In-Reply-To: <5D16E2E89E828C43A1BA621338322455928244@VESTMB401A.tdk.dk>
References: <5D16E2E89E828C43A1BA621338322455928244@VESTMB401A.tdk.dk>
Message-ID: <200707192106.03847.laurent.pinchart@skynet.be>

Hi Morten,

On Thursday 19 July 2007, Morten Mortensen wrote:
> - I have been looking at your list of supported devices and have just tried
> three newer webcams of mine. The two first are just really good Logitech
> cameras (Fusion and Ultra Vision) while the third one is the Creative Live!
> Cam Optia *AF* - not the Optia vith a 1.3 Mpx sensor, but the AF version
> with the 2 Mpx sensor - and it appears to be operational with the current
> UVC driver!!

Thanks for the report.

> I says this, because I notice, that you have the Optia camera on the list
> of supported devices, but not the Optia AF. It is a somewhat important
> camera, because the 2 Mpx-lens webcams are nearly non-existent; up until
> now, I know of only this single model.
>
> So far, I have testet only with luvcview - and I had to force using the YUV
> encoding; the default setting just gave green flickering before failing.
> But it looks good - really good.

I added the camera to the list of supported devices.

Regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Jul 19 21:08:56 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 19 Jul 2007 21:08:56 +0200
Subject: [Linux-uvc-devel] driver 5986:0100 linux works
In-Reply-To: <302016.89301.qm@web50608.mail.re2.yahoo.com>
References: <302016.89301.qm@web50608.mail.re2.yahoo.com>
Message-ID: <200707192108.57053.laurent.pinchart@skynet.be>

Hi,

On Thursday 19 July 2007, Ozgur Delice wrote:
> hi,
> i have an acer 5102 wlmi laptop with  orbicam webcam. i have (kx)ubuntu
> 7.02. I had wondered if this webcam works on linux.
> it has lsusb output as follows:
> lsusb
> Bus 003 Device 002: ID 5986:0100
> Bus 003 Device 001: ID 0000:0000
> Bus 002 Device 001: ID 0000:0000
> Bus 001 Device 001: ID 0000:0000
>
> after reading some posts on this mail group and some sites that some
> messages refer, i got linux uvc sources from svn  as explained in the
> messages and also lucviev-20070512.tar.gz.
>
> after compiling  and installing  uvc and also lucview as explained in the
> wiki page, i gave the comand ./lucview but it crushed. however i rebooted
> and tried again, it just worked :)
> which shows that linux uvc driver is supporting this webcam (Acer orbicam
> coming with 5102wlmi laptops)..
>
> now i have to find out how to make it working this webcam  with other
> programs....

The camera was missing from the supported devices list on the webpage. I've 
just added it, as well as the 5985:0200.

Regards,

Laurent Pinchart


From victor.guardiola at gmail.com  Thu Jul 19 23:26:19 2007
From: victor.guardiola at gmail.com (Victor Guardiola)
Date: Thu, 19 Jul 2007 23:26:19 +0200
Subject: [Linux-uvc-devel] Microdia 0c45:624f
Message-ID: <d916260a0707191426g70d43ac9y183f56ce4a56f00f@mail.gmail.com>

Is this driver correct for this web cam, if you need more info tell me what
can I do?

Thanks

-- 
--------------------------------------------
Victor Guardiola Latorre
http://victor.masquesoft.net
victor at masquesoft.net
v_guardiola at yahoo.com
victor.guardiola at gmail.com
Linux user #288624
TLF:667367484
----
http://www.masquesoft.net
http://www.masquejuegos.net
http://www.masquelinux.net
http://www.masquewireless.net
http://www.rubiwireless.net
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070719/e671e1f9/attachment.html>

From laurent.pinchart at skynet.be  Thu Jul 19 23:38:14 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 19 Jul 2007 23:38:14 +0200
Subject: [Linux-uvc-devel] Microdia 0c45:624f
In-Reply-To: <d916260a0707191426g70d43ac9y183f56ce4a56f00f@mail.gmail.com>
References: <d916260a0707191426g70d43ac9y183f56ce4a56f00f@mail.gmail.com>
Message-ID: <200707192338.14736.laurent.pinchart@skynet.be>

Hi Victor,

On Thursday 19 July 2007, Victor Guardiola wrote:
> Is this driver correct for this web cam, if you need more info tell me what
> can I do?

Please post the output of

lsusb -v -d 0c45:624f

Regards,

Laurent Pinchart


From MOMOR at tdc.dk  Fri Jul 20 23:26:02 2007
From: MOMOR at tdc.dk (Morten Mortensen)
Date: Fri, 20 Jul 2007 23:26:02 +0200
Subject: [Linux-uvc-devel] Microsoft NX-6000 operational or not?
Message-ID: <5D16E2E89E828C43A1BA621338322455928248@VESTMB401A.tdk.dk>

 
- I have made a quick skimming through the source code (as found within your subversion repository circa two days ago), because I was hunting something looking like module options, but I found none. I did find something else - some registration of the Microsoft LifeCam NX-6000.
 
The Microsoft NX-6000 is one of the 2 Mpx cameras, which to me are interesting cameras. Does the NX-6000 camera work or does the source code lines, which I found, just represent some ad hoc experimentation? 
 
Since the NX-6000 camera is not on the list of supported devices, it is not operational?
 
By the way, what about the Microsoft VX-6000 (other model, sensor is "only" a 1.3 Mpx)? Does it have any UVC compliance? I happen to own a VX-6000 - stored away somewhere in the basement, because I could not find a Linux driver for the camera - and know, that the VX-6000 and the NX-6000 came to the market at just about the same time so I would not be surprised, if the two models share the internal electronics.
 
     ?
 
Regards
Morten Sabroe Mortensen
 


From MOMOR at tdc.dk  Fri Jul 20 23:54:20 2007
From: MOMOR at tdc.dk (Morten Mortensen)
Date: Fri, 20 Jul 2007 23:54:20 +0200
Subject: [Linux-uvc-devel] "luvcview" + UVC - crash or not?
Message-ID: <5D16E2E89E828C43A1BA621338322455928249@VESTMB401A.tdk.dk>

 
Hi Michel X.
 
I would like to ask you a question. I have been playing around with the latest UVC driver for the last couple of days using both "luvcview" and FMJ. My intended goal is to use FMJ - which has just gotten initial V4L2 support - with UVC.
 
However, when I run luvcview with three different webcams, namely a "Logitech QuickCam Fusion", a "Logitech QuickCam Ultra Vision" and a "Creative Live! Cam Optia AF" the luvcview instances running against the Logitech cameras shows a stream but dies pretty quickly (within something like 0 to 3 minuttes), while the instance running aginst the Creative camera never complains and apparently can run for hours without any problems.
 
I see something like this -
 
[root at localhost camera]# luvcview -d /dev/video2 -i 5 &
[3] 3469
luvcview version 0.2.1
interval: 5 fps
[root at localhost camera]# Video driver: x11
A window manager is available
video /dev/video2
Ignoring empty buffer ...
Ignoring empty buffer ...
Ignoring empty buffer ...
Ignoring empty buffer ...
Ignoring empty buffer ...
Ignoring empty buffer ...
Unable to dequeue buffer (22).
Error grabbing
Clean Up done Quit

[3]+  Done                    luvcview -d /dev/video2 -i 5
 
- and now I am wondering, what "Ignoring empty buffer", "Unable to dequeue buffer" and "Error grabbing" means. These messages must come from somewhere within luvcview, I believe.
 
What does the messages mean? What is the actual cause; is it an error within the cameras themselves, some handling missing in the UVC driver or something which luvcview can not handle?
 

From chris.horler at clara.co.uk  Sat Jul 21 16:58:03 2007
From: chris.horler at clara.co.uk (Christopher HORLER)
Date: Sat, 21 Jul 2007 15:58:03 +0100
Subject: [Linux-uvc-devel] Patch: Read support
In-Reply-To: <200707192030.46531.laurent.pinchart@skynet.be>
References: <200707131748.48675.chris.horler@clara.co.uk>
	<200707182218.29293.chris.horler@clara.co.uk>
	<200707192030.46531.laurent.pinchart@skynet.be>
Message-ID: <200707211558.03979.chris.horler@clara.co.uk>

Hi Laurent,

I've made adjustments, but I still think there maybe some problems.

1. I included the G_STD ioctl (but I've #if 0 it out - I was testing against 
an application that uses it, feel free to remove it).

2. Detecting if the stream is on - not sure I'm doing this right (see the read 
function).

3.  I've several static variables - perhaps this isn't the best solution.  See 
the beginning of the function read definition.

4.  I've rearranged some of the queue and dequeue buffer memory checks into 
the ioctls so they won't affect the read function.  I hope this is OK - it 
seemed better than removing the check altogether.

5.  I've added a variable into uvc_streaming to store the S_PARM setting of 
readbuffers.  I'm not sure it's in the 'right' place - but at the time I 
needed it to ensure that if REQBUFS is called, the value is correct 
(otherwise I would have directly used queue.count).

I tried to take into account everyones comments, but it's possible I've missed 
things - hopefully it's better than the first attempt.

Chris



On Thursday 19 July 2007 19:30, Laurent Pinchart wrote:
> Hi Chris,
>
> please keep the list CC'ed.
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: svndiff21Jul2007
Type: text/x-diff
Size: 7673 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070721/f094fdb4/attachment.diff>

From chris.horler at clara.co.uk  Sat Jul 21 17:15:46 2007
From: chris.horler at clara.co.uk (Christopher HORLER)
Date: Sat, 21 Jul 2007 16:15:46 +0100
Subject: [Linux-uvc-devel] Patch: Read support - Update
In-Reply-To: <200707192030.46531.laurent.pinchart@skynet.be>
References: <200707131748.48675.chris.horler@clara.co.uk>
	<200707182218.29293.chris.horler@clara.co.uk>
	<200707192030.46531.laurent.pinchart@skynet.be>
Message-ID: <200707211615.46284.chris.horler@clara.co.uk>

Hi Laurent,

I realised I left in the TIMEOUT change as well - so I removed that and G_STD 
(see previous email)

I've made adjustments, but I still think there maybe some problems.

1. Detecting if the stream is on - not sure I'm doing this right (see the read 
function).

2.  I've several static variables - perhaps this isn't the best solution.  See 
the beginning of the function read definition.

3.  I've rearranged some of the queue and dequeue buffer memory checks into 
the ioctls so they won't affect the read function.  I hope this is OK - it 
seemed better than removing the check altogether.

4.  I've added a variable into uvc_streaming to store the S_PARM setting of 
readbuffers.  I'm not sure it's in the 'right' place - but at the time I 
needed it to ensure that if REQBUFS is called, the value is correct 
(otherwise I would have directly used queue.count).

I tried to take into account everyones comments, but it's possible I've missed 
things - hopefully it's better than the first attempt.

Chris



On Thursday 19 July 2007 19:30, Laurent Pinchart wrote:
> Hi Chris,
>
> please keep the list CC'ed.
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: svndiff21Jul2007v2
Type: text/x-diff
Size: 7540 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070721/4be95abc/attachment.diff>

From chris.horler at clara.co.uk  Sat Jul 21 18:34:13 2007
From: chris.horler at clara.co.uk (Christopher HORLER)
Date: Sat, 21 Jul 2007 17:34:13 +0100
Subject: [Linux-uvc-devel] Updated Patch
Message-ID: <200707211734.13907.chris.horler@clara.co.uk>

Laurent,

I sent an updated patch to the list, but it doesn't appear to have arrived 
yet.

Chris


From chris.horler at clara.co.uk  Sat Jul 21 22:46:12 2007
From: chris.horler at clara.co.uk (Christopher HORLER)
Date: Sat, 21 Jul 2007 21:46:12 +0100
Subject: [Linux-uvc-devel] Flash Plugin - was Patch: Read support
In-Reply-To: <200707192030.46531.laurent.pinchart@skynet.be>
References: <200707131748.48675.chris.horler@clara.co.uk>
	<200707182218.29293.chris.horler@clara.co.uk>
	<200707192030.46531.laurent.pinchart@skynet.be>
Message-ID: <200707212146.13408.chris.horler@clara.co.uk>

See below for an update on this - so no one spends too much time duplicating 
work.

On Thursday 19 July 2007 19:30, Laurent Pinchart wrote:
> > Quick question on overlays - I assume these aren't planned as I don't see
> > the copy providing a performance benefit.  I've done some reading and
> > searching and I'm assuming it would be CPU driven for a USB device?  Are
> > you able to confirm this, or tell me I'm wrong?
>
> If by overlay you mean writing to the graphic memory, you're right, this
> isn't planned. There is no way a USB device could write to the GPU, so this
> doesn't make sense.
>
> > The Flash Player is a particularly awkward application in this regard -
> > I've started to look at providing a kind of software driven overlay at
> > the kernel level setup via the X V4L extension because flash seems to
> > rely on the overlay for aspects of it's operation.
>
> Really ? Should flash be added to the list of "broken by design"
> software ? :-)
>
> > Although now I'm beginning to
> > think a more logical approach might be to try and patch the flash support
> > library to work with the UVC driver and no overlay (but I'm not certain
> > that this is supported - even though there's example code available).
>
> I'm not familiar with flash. Do they provide an open-source user library to
> access video devices ?
http://www.kaourantin.net/flashplayer/flashsupport.c

For Flash:
1.  Overlays may or may not be relevant - it's unclear from the information at 
my disposal.  The ioctl is called, but that may be the default behaviour (as 
querycap is also called before that - which should make clear the device has 
no overlay).

2.  I patched libflashsupport.c (the library provided by Adobe) to support our 
cameras (in particular the YUYV image format).  Watching the process - the 
library dynamically loaded and the init routine is called (FPX_Init).  The 
function pointers for the camera are set - but no calls are made.  To be fair 
though - the web page says this will be the case.
http://labs.adobe.com/wiki/index.php/Flash_Player:Additional_Interface_Support_for_Linux

I'm guessing the code included in the library probably isn't the code actually 
in flash plugin library for V4L.  Although if it was, adding support for a 
planar format may help.

I think the best thing I can do at this stage is find out where to log what I 
think is a flash plugin bug.  If anyone spots anything below, let me know.

Chris


For those interested - here's some output from dmesg (I can't see it setting 
the format).

uvcvideo: uvc_v4l2_open
uvcvideo: uvc_v4l2_ioctl
v4l1 ioctl VIDIOCGCAP, dir=r- (0x803c7601)
v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
v4l2 ioctl VIDIOC_ENUM_FMT, dir=rw (0xc0405602)
v4l2 ioctl VIDIOC_TRY_FMT, dir=rw (0xc0cc5640)
uvcvideo: Trying format 0x47504a4d (MJPG): 10000x10000.
uvcvideo: Using default frame interval 33333.3 us (30.0 fps).
uvcvideo: uvc_v4l2_ioctl
v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
uvcvideo: uvc_v4l2_ioctl
v4l1 ioctl VIDIOCGWIN, dir=r- (0x80207609)
v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
uvcvideo: uvc_v4l2_release
uvcvideo: uvc_v4l2_open
uvcvideo: uvc_v4l2_ioctl
v4l1 ioctl VIDIOCGCAP, dir=r- (0x803c7601)
v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
v4l2 ioctl VIDIOC_ENUM_FMT, dir=rw (0xc0405602)
v4l2 ioctl VIDIOC_TRY_FMT, dir=rw (0xc0cc5640)
uvcvideo: Trying format 0x47504a4d (MJPG): 10000x10000.
uvcvideo: Using default frame interval 33333.3 us (30.0 fps).
uvcvideo: uvc_v4l2_ioctl
v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
uvcvideo: uvc_v4l2_ioctl
v4l1 ioctl VIDIOCGWIN, dir=r- (0x80207609)
v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
uvcvideo: uvc_v4l2_ioctl
v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
uvcvideo: uvc_v4l2_ioctl
v4l1 ioctl VIDIOCCAPTURE, dir=-w (0x40047608)
v4l2 ioctl VIDIOC_OVERLAY, dir=-w (0x4004560e)
uvcvideo: Unsupported ioctl 0x4004560e
uvcvideo: uvc_v4l2_read
uvcvideo: uvc_v4l2_read: allocating buffers
uvcvideo: uvc_v4l2_read: turning on stream
uvcvideo: uvc_v4l2_read: queueing buffers
uvcvideo: Queuing buffer 0.
uvcvideo: Queuing buffer 1.
uvcvideo: Dequeuing buffer 0.
uvcvideo: Frame complete (EOF found).
uvcvideo: EOF in empty payload.
uvcvideo: uvc_v4l2_read:
	queue.mem: f8e18000
	m.offset: 0
	length: 2621440
	bytesused: 76370
	count: 1228800
uvcvideo: uvc_v4l2_read: count: 76370
uvcvideo: uvc_v4l2_read: requeueing buffer
uvcvideo: Queuing buffer 0.
uvcvideo: uvc_v4l2_read
uvcvideo: Dequeuing buffer 1.
uvcvideo: Frame complete (EOF found).
uvcvideo: EOF in empty payload.


From mail at cynapses.org  Fri Jul 27 20:29:09 2007
From: mail at cynapses.org (Andreas Schneider)
Date: Fri, 27 Jul 2007 20:29:09 +0200
Subject: [Linux-uvc-devel] WengoPhone works with uvcvideo
Message-ID: <46AA3975.5020200@cynapses.org>

Hi,

just for your interest, I've committed V4L2 support to the
wengophone-2.2 branch. It works just fine with uvcvideo. So if you're
looking for a SIP application with video support:

http://www.openwengo.org/


	-- andreas

-- 
http://www.cynapses.org/ - cybernetic synapses


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: OpenPGP digital signature
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070727/e471267a/attachment.pgp>

From torreeger at yahoo.com  Sat Jul 28 09:39:57 2007
From: torreeger at yahoo.com (Xaver Gerster)
Date: Sat, 28 Jul 2007 00:39:57 -0700 (PDT)
Subject: [Linux-uvc-devel] Black screen with QC Pro 5000 and UVC
Message-ID: <227504.46372.qm@web59208.mail.re1.yahoo.com>

Hi,

I tried to get a Logitech QC Pro 5000 working on my
SuSE 10.0 box with kernel 2.6.13-15.16-default using
the UVC driver.

But the video screen of any application I tried just
remains black.

Below I've attached some info on what I did.
Any help would be most appreciated.

Thanks
Wolfram

1)
===============================================================
I did:
$ svn checkout
svn://svn.berlios.de/linux-uvc/linux-uvc/trunk
$ make -C /home/thisuser/MyKernel/ M=$(pwd) modules
$ su -c 'make -C /home/thisuser/MyKernel/ M=$(pwd)
modules_install'
$ su -c 'depmod -ae'

There where no apparent errors during compile and
install.
Ater install I have one new module, i.e. 'uvcvideo.ko'
in /lib/modules/2.6.13-15.16-default/extra

Pluging in the cam I get:

$ lsusb
Bus 004 Device 003: ID 046d:08ce Logitech, Inc.

$ lsmod | grep uvc
uvcvideo               46724  0 
v4l1_compat            13060  1 uvcvideo
videodev                9088  1 uvcvideo
v4l2_common             5760  1 uvcvideo
usbcore               112512  7
snd_usb_audio,snd_usb_lib,uvcvideo,usb_storage,uhci_hcd,ehci_hcd

$ tail -f /var/log/messages
kernel: usb 4-1: new high speed USB device using
ehci_hcd and address 3
kernel: Linux video capture interface: v1.00
kernel: uvcvideo: module not supported by Novell,
setting U taint flag.
kernel: uvcvideo: Found UVC 1.00 device <unnamed>
(046d:08ce)
kernel: usbcore: registered new driver uvcvideo
kernel: USB Video Class driver (v0.1.0)
kernel: usbcore: registered new driver snd-usb-audio

All this looked fine to me but then I tried:

2)
===============================================================
GnomeMeeting. It does not work: black screen

Error while opening video device UVC Camera
(046d:08ce)
Your video driver doesn't support the requested video
format.

3)
===============================================================
xawtv. It does not work: black screen

$ xawtv
This is xawtv-3.94, running on Linux/i686
(2.6.13-15.16-default)
/dev/video0 [v4l2]: no overlay support
v4l-conf had some trouble, trying to continue anyway
ioctl: VIDIOC_G_STD(std=0xbff404f4
[PAL_G,PAL_I,PAL_D,PAL_D1,PAL_K,PAL_Nc,SECAM_G,SECAM_K,SECAM_K1,SECAM_L,?ATSC_8_VSB,ATSC_16_VSB,(null),(null),(null),(null),(null),(null)]):
Invalid argument
ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument
ioctl:
VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0
[];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.seconds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0;memory=unknown):
Invalid argument

with

$ tail -f /var/log/messages
kernel: uvcvideo: Failed to query (131) UVC control 1
(unit 0) : -32 (exp. 26).

if I play arround with the xawtv controls I get lots
of messages from
xawtv of the type:
ioctl: VIDIOC_S_CTRL(id=9963777;value=100):
Input/output error
ioctl:
VIDIOC_S_FMT(type=VIDEO_CAPTURE;fmt.pix.width=352;fmt.pix.height=288;fmt.pix.pixelformat=0x56595559
[YUYV];fmt.pix.field=ANY;fmt.pix.bytesperline=0;fmt.pix.sizeimage=202752;fmt.pix.colorspace=SRGB;fmt.pix.priv=0):
Input/output error
scroll by 101   length 150      shown 0.000000  top
0.392157 => 0.526824
ioctl:
VIDIOC_S_FMT(type=VIDEO_CAPTURE;fmt.pix.width=384;fmt.pix.height=288;fmt.pix.pixelformat=0x56595559
[YUYV];fmt.pix.field=ANY;fmt.pix.bytesperline=0;fmt.pix.sizeimage=202752;fmt.pix.colorspace=SRGB;fmt.pix.priv=0):
Input/output error
no way to get: 384x288 32 bit TrueColor (LE: bgr-)
ioctl: VIDIOC_S_CTRL(id=9963777;value=134):
Input/output error

in the latter case I also see messages in
/var/log/message of the type
$ tail -f /var/log/messages
kernel: uvcvideo: Failed to query (1) UVC control 2
(unit 0) : -32 (exp. 26).
kernel: uvcvideo: Failed to query (1) UVC control 4
(unit 2) : -32 (exp. 2).
kernel: uvcvideo: Failed to query (1) UVC control 1
(unit 0) : -110 (exp. 26).
kernel: uvcvideo: Failed to query (1) UVC control 1
(unit 0) : -110 (exp. 26).
kernel: uvcvideo: Failed to query (1) UVC control 3
(unit 2) : -110 (exp. 2).
kernel: uvcvideo: Failed to query (1) UVC control 1
(unit 0) : -110 (exp. 26).
kernel: uvcvideo: Failed to query (1) UVC control 1
(unit 0) : -110 (exp. 26).
kernel: uvcvideo: Failed to query (1) UVC control 3
(unit 2) : -110 (exp. 2).
kernel: uvcvideo: Failed to query (1) UVC control 1
(unit 0) : -110 (exp. 26).
kernel: uvcvideo: Failed to query (1) UVC control 1
(unit 0) : -110 (exp. 26).
kernel: uvcvideo: Failed to query (1) UVC control 3
(unit 2) : -110 (exp. 2).


Hope all the preceeding helps.




       
____________________________________________________________________________________
Need a vacation? Get great deals
to amazing places on Yahoo! Travel.
http://travel.yahoo.com/


From t.st1 at gmx.net  Mon Jul 30 09:19:48 2007
From: t.st1 at gmx.net (Tom St)
Date: Mon, 30 Jul 2007 09:19:48 +0200
Subject: [Linux-uvc-devel] Black screen with QC Pro 5000 and UVC
In-Reply-To: <227504.46372.qm@web59208.mail.re1.yahoo.com>
References: <227504.46372.qm@web59208.mail.re1.yahoo.com>
Message-ID: <46AD9114.5030805@gmx.net>

Hello Xaver,
> ===============================================================
> GnomeMeeting. It does not work: black screen
>   
...
> ===============================================================
> xawtv. It does not work: black screen

Please try applications that are known to work. A list can be found in
the (unofficial) wiki:
http://openfacts.berlios.de/index-en.phtml?title=Linux+UVC.

Kind regards,
Tom



From baeckham at gmx.net  Mon Jul 30 20:41:48 2007
From: baeckham at gmx.net (Baeckham)
Date: Mon, 30 Jul 2007 20:41:48 +0200
Subject: [Linux-uvc-devel] 0c45:624f Microdia web cam
Message-ID: <200707302041.48277.baeckham@gmx.net>

I have a laptop (MSI) with a built-in webcam.

Is there any linux driver available for this device?

lsub shows this:
Bus 001 Device 028: ID 0c45:624f Microdia

# lsusb -v -d 0c45:624f

Bus 001 Device 030: ID 0c45:624f Microdia
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0        64
  idVendor           0x0c45 Microdia
  idProduct          0x624f
  bcdDevice            1.00
  iManufacturer           0
  iProduct                1 USB20 Camera
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          279
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
    MaxPower              500mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       1
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       2
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       3
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0180  1x 384 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       4
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       5
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x02a8  1x 680 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       6
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       7
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0b84  2x 900 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       8
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 0 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval              10
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0        64
  bNumConfigurations      1

thanks for any hints
Steffen


From laurent.pinchart at skynet.be  Mon Jul 30 23:37:15 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 30 Jul 2007 23:37:15 +0200
Subject: [Linux-uvc-devel] 0c45:624f Microdia web cam
In-Reply-To: <200707302041.48277.baeckham@gmx.net>
References: <200707302041.48277.baeckham@gmx.net>
Message-ID: <200707302337.15530.laurent.pinchart@skynet.be>

Hi,

On Monday 30 July 2007, Baeckham wrote:
> I have a laptop (MSI) with a built-in webcam.
>
> Is there any linux driver available for this device?
>
> lsub shows this:
> Bus 001 Device 028: ID 0c45:624f Microdia

That's not a UVC webcam, so the UVC driver won't help. Your best bet is the 
spca5xx driver, but I don't know if it supports that particular model.

Regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Jul 30 23:46:53 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 30 Jul 2007 23:46:53 +0200
Subject: [Linux-uvc-devel] WengoPhone works with uvcvideo
In-Reply-To: <46AA3975.5020200@cynapses.org>
References: <46AA3975.5020200@cynapses.org>
Message-ID: <200707302346.53857.laurent.pinchart@skynet.be>

Hi Andreas,

On Friday 27 July 2007, Andreas Schneider wrote:
> Hi,
>
> just for your interest, I've committed V4L2 support to the
> wengophone-2.2 branch. It works just fine with uvcvideo. So if you're
> looking for a SIP application with video support:
>
> http://www.openwengo.org/

Thanks for your work. I'll test the 2.2 release when it comes out :-)

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Jul 30 23:52:14 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 30 Jul 2007 23:52:14 +0200
Subject: [Linux-uvc-devel] "luvcview" + UVC - crash or not?
In-Reply-To: <5D16E2E89E828C43A1BA621338322455928249@VESTMB401A.tdk.dk>
References: <5D16E2E89E828C43A1BA621338322455928249@VESTMB401A.tdk.dk>
Message-ID: <200707302352.14846.laurent.pinchart@skynet.be>

Hi,

On Friday 20 July 2007, Morten Mortensen wrote:
> Hi Michel X.
>
> I would like to ask you a question. I have been playing around with the
> latest UVC driver for the last couple of days using both "luvcview" and
> FMJ. My intended goal is to use FMJ - which has just gotten initial V4L2
> support - with UVC.
>
> However, when I run luvcview with three different webcams, namely a
> "Logitech QuickCam Fusion", a "Logitech QuickCam Ultra Vision" and a
> "Creative Live! Cam Optia AF" the luvcview instances running against the
> Logitech cameras shows a stream but dies pretty quickly (within something
> like 0 to 3 minuttes), while the instance running aginst the Creative
> camera never complains and apparently can run for hours without any
> problems.
>
> I see something like this -
>
> [root at localhost camera]# luvcview -d /dev/video2 -i 5 &
> [3] 3469
> luvcview version 0.2.1
> interval: 5 fps
> [root at localhost camera]# Video driver: x11
> A window manager is available
> video /dev/video2
> Ignoring empty buffer ...
> Ignoring empty buffer ...
> Ignoring empty buffer ...
> Ignoring empty buffer ...
> Ignoring empty buffer ...
> Ignoring empty buffer ...
> Unable to dequeue buffer (22).
> Error grabbing
> Clean Up done Quit
>
> [3]+  Done                    luvcview -d /dev/video2 -i 5
>
> - and now I am wondering, what "Ignoring empty buffer", "Unable to dequeue
> buffer" and "Error grabbing" means. These messages must come from somewhere
> within luvcview, I believe.
>
> What does the messages mean? What is the actual cause; is it an error
> within the cameras themselves, some handling missing in the UVC driver or
> something which luvcview can not handle?

Probably an error within the webcam itself. First generation Logitech UVC 
webcams suffer from a known hardware/firmware issue which impact some users 
more than others.

Do you get any useful message in the kernel log ?

> From my perspective, it makes no difference if I run luvcview against a
> single camera at a time or against all three at once. As far as I can tell,
> it also makes no difference whatsoever if I connect one or all cameras
> through a hub or directly to my computer. I have mostly been using the
> apparently default size of... I think it is 320x240, so the resolution is
> only moderate.
>
> ( - by the way - I am performing these experiments upon a very new and
> up-to-dage Fedora 7 installation; 2.6.21-1.3228.fc7 -)
>
> Can you explain the messages output from luvcview, please?

Please have a look at the kernel log, it might be more instructive.

Regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Jul 30 23:54:29 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 30 Jul 2007 23:54:29 +0200
Subject: [Linux-uvc-devel] Microsoft NX-6000 operational or not?
In-Reply-To: <5D16E2E89E828C43A1BA621338322455928248@VESTMB401A.tdk.dk>
References: <5D16E2E89E828C43A1BA621338322455928248@VESTMB401A.tdk.dk>
Message-ID: <200707302354.29864.laurent.pinchart@skynet.be>

Hi Morten,

On Friday 20 July 2007, Morten Mortensen wrote:
> - I have made a quick skimming through the source code (as found within
> your subversion repository circa two days ago), because I was hunting
> something looking like module options, but I found none. I did find
> something else - some registration of the Microsoft LifeCam NX-6000.
>
> The Microsoft NX-6000 is one of the 2 Mpx cameras, which to me are
> interesting cameras. Does the NX-6000 camera work or does the source code
> lines, which I found, just represent some ad hoc experimentation?

I don't own any Microsoft webcam so I haven't been able to test them myself. 
From what I remember, there were still issues.

> Since the NX-6000 camera is not on the list of supported devices, it is not
> operational?
>
> By the way, what about the Microsoft VX-6000 (other model, sensor is "only"
> a 1.3 Mpx)? Does it have any UVC compliance? I happen to own a VX-6000 -
> stored away somewhere in the basement, because I could not find a Linux
> driver for the camera - and know, that the VX-6000 and the NX-6000 came to
> the market at just about the same time so I would not be surprised, if the
> two models share the internal electronics.

You could easily check if the VX-6000 is UVC compliant. Have a look at 
http://linux-uvc.berlios.de/faq/

Regards,

Laurent Pinchart


From mattfinn at gmail.com  Tue Jul 31 00:13:43 2007
From: mattfinn at gmail.com (Murph Finnicum)
Date: Mon, 30 Jul 2007 15:13:43 -0700
Subject: [Linux-uvc-devel] Microsoft NX-6000 operational or not?
In-Reply-To: <200707302354.29864.laurent.pinchart@skynet.be>
References: <5D16E2E89E828C43A1BA621338322455928248@VESTMB401A.tdk.dk>
	<200707302354.29864.laurent.pinchart@skynet.be>
Message-ID: <3eba0080707301513o132fb423pad35f37bfe452506@mail.gmail.com>

The NX It worked alright for me with luvcview, but it didn't seem to
work too well with anything else. I could test some more stuff on it,
if you've got any requests.
--Murph

On 7/30/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> Hi Morten,
>
> On Friday 20 July 2007, Morten Mortensen wrote:
> > - I have made a quick skimming through the source code (as found within
> > your subversion repository circa two days ago), because I was hunting
> > something looking like module options, but I found none. I did find
> > something else - some registration of the Microsoft LifeCam NX-6000.
> >
> > The Microsoft NX-6000 is one of the 2 Mpx cameras, which to me are
> > interesting cameras. Does the NX-6000 camera work or does the source code
> > lines, which I found, just represent some ad hoc experimentation?
>
> I don't own any Microsoft webcam so I haven't been able to test them myself.
> From what I remember, there were still issues.
>
> > Since the NX-6000 camera is not on the list of supported devices, it is not
> > operational?
> >
> > By the way, what about the Microsoft VX-6000 (other model, sensor is "only"
> > a 1.3 Mpx)? Does it have any UVC compliance? I happen to own a VX-6000 -
> > stored away somewhere in the basement, because I could not find a Linux
> > driver for the camera - and know, that the VX-6000 and the NX-6000 came to
> > the market at just about the same time so I would not be surprised, if the
> > two models share the internal electronics.
>
> You could easily check if the VX-6000 is UVC compliant. Have a look at
> http://linux-uvc.berlios.de/faq/
>
> Regards,
>
> Laurent Pinchart
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From bnc at astronomicalresearchaustralia.org  Tue Jul 31 04:15:32 2007
From: bnc at astronomicalresearchaustralia.org (Brian)
Date: Tue, 31 Jul 2007 12:15:32 +1000
Subject: [Linux-uvc-devel] WengoPhone works with uvcvideo
In-Reply-To: <200707302346.53857.laurent.pinchart@skynet.be>
References: <46AA3975.5020200@cynapses.org>
	<200707302346.53857.laurent.pinchart@skynet.be>
Message-ID: <46AE9B44.7050906@astronomicalresearchaustralia.org>

Laurent Pinchart wrote:
> Hi Andreas,
> 
> On Friday 27 July 2007, Andreas Schneider wrote:
>> Hi,
>>
>> just for your interest, I've committed V4L2 support to the
>> wengophone-2.2 branch. It works just fine with uvcvideo. So if you're
>> looking for a SIP application with video support:
>>
>> http://www.openwengo.org/
> 
> Thanks for your work. I'll test the 2.2 release when it comes out :-)
> 
> Laurent Pinchart

Yes, Andreas I went looking for it too to test.
If you could let us know when/where it is available I will have a go.

Brian


From titanium2475 at hotmail.com  Tue Jul 31 17:44:19 2007
From: titanium2475 at hotmail.com (helico unitemoyenne)
Date: Tue, 31 Jul 2007 15:44:19 +0000
Subject: [Linux-uvc-devel] invalid module format uvc
Message-ID: <BAY110-W998EFEDF193EA6B84D33EDCEF0@phx.gbl>


hello everyone,
i try to use uvcvideo with logitech sphere MP.
So i  did :
1) make
**********************************************************
2)make install
---- uvcvideo.ko was created in  : /lib/modules/2.6.17-10mdvcustom/usb/media 
**********************************************************
3)i put this file in /lib/modules/2.6.17-10mdv/kernel/drivers/usb/media (because when i do modprobe i have FATAL: Module uvcvideo not found. and the the solution is to to move uvcvideo.ko in  /lib/modules/2.6.17-10mdv/kernel/drivers/usb/media)
**********************************************************
4) so when i do modprobe uvcvideo: i have the same error :  FATAL: Module uvcvideo not found
**********************************************************
5)  depmod
**********************************************************
6)modprobe uvcvideo ---> error "FATAL: Error inserting uvcvideo (/lib/modules/2.6.17-10mdv/kernel/drivers/usb/media/uvcvideo.ko): Invalid module format "
**********************************************************
7) dmesg |grep uvc ===>uvcvideo: version magic '2.6.17-10mdvcustom SMP mod_unload 686 gcc-4.1' should be '2.6.17-10mdv SMP mod_unload 686 gcc-4.1'
uvcvideo: version magic '2.6.17-10mdvcustom SMP mod_unload 686 gcc-4.1' should be '2.6.17-10mdv SMP mod_unload 686 gcc-4.1'
uvcvideo: version magic '2.6.17-10mdvcustom SMP mod_unload 686 gcc-4.1' should be '2.6.17-10mdv SMP mod_unload 686 gcc-4.1'
uvcvideo: version magic '2.6.17-10mdvcustom SMP mod_unload 686 gcc-4.1' should be '2.6.17-10mdv SMP mod_unload 686 gcc-4.1'
uvcvideo: version magic '2.6.17-10mdvcustom SMP mod_unload 686 gcc-4.1' should be '2.6.17-10mdv SMP mod_unload 686 gcc-4.1'
uvcvideo: version magic '2.6.17-10mdvcustom SMP mod_unload 686 gcc-4.1' should be '2.6.17-10mdv SMP mod_unload 686 gcc-4.1'
uvcvideo: version magic '2.6.17-10mdvcustom SMP mod_unload 686 gcc-4.1' should be '2.6.17-10mdv SMP mod_unload 686 gcc-4.1'
uvcvideo: version magic '2.6.17-10mdvcustom SMP mod_unload 686 gcc-4.1' should be '2.6.17-10mdv SMP mod_unload 686 gcc-4.1'
***********************************************************
So i don't know what is the problem. 
problem  with gcc version : i don't know how to fix it 

can you help me please.
***********************************
information :  
uname-r  : 2.6.17-10mdv
gcc -v : 
Using built-in specs.
Target: i586-mandriva-linux-gnu
Configured with: ../configure --prefix=/usr --libexecdir=/usr/lib --with-slibdir=/lib --mandir=/usr/share/man --infodir=/usr/share/info --enable-shared --enable-threads=posix --enable-checking=release --enable-languages=c,c++,ada,fortran,objc,obj-c++,java --host=i586-mandriva-linux-gnu --with-cpu=generic --with-system-zlib --enable-long-long --enable-__cxa_atexit --enable-clocale=gnu --disable-libunwind-exceptions --enable-java-awt=gtk --with-java-home=/usr/lib/jvm/java-1.4.2-gcj-1.4.2.0/jre --enable-gtk-cairo --enable-ssp --disable-libssp
Thread model: posix
gcc version 4.1.1 20060724 (prerelease) (4.1.1-3mdk)


thanks to all





----------------------------------------
> Subject: Welcome to the "Linux-uvc-devel" mailing list
> From: linux-uvc-devel-request at lists.berlios.de
> To: titanium2475 at hotmail.com
> Date: Tue, 31 Jul 2007 17:17:33 +0200
> 
> Welcome to the Linux-uvc-devel at lists.berlios.de mailing list!
> 
> To post to this list, send your email to:
> 
>   linux-uvc-devel at lists.berlios.de
> 
> General information about the mailing list is at:
> 
>   https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 
> If you ever want to unsubscribe or change your options (eg, switch to
> or from digest mode, change your password, etc.), visit your
> subscription page at:
> 
>   https://lists.berlios.de/mailman/options/linux-uvc-devel/titanium2475%40hotmail.com
> 
> 
> You can also make such adjustments via email by sending a message to:
> 
>   Linux-uvc-devel-request at lists.berlios.de
> 
> with the word `help' in the subject or body (don't include the
> quotes), and you will get back a message with instructions.
> 
> You must know your password to change your options (including changing
> the password, itself) or to unsubscribe.  It is:
> 
>   mRmiPxov
> 
> Normally, Mailman will remind you of your lists.berlios.de mailing
> list passwords once every month, although you can disable this if you
> prefer.  This reminder will also include instructions on how to
> unsubscribe or change your account options.  There is also a button on
> your options page that will email your current password to you.

_________________________________________________________________
Le blog Messenger de Michel, candidat de la Nouvelle Star : analyse, news, coulisses? A d?couvrir !
http://michel-nouvelle-star2007.spaces.live.com/

From david.maillists at gmail.com  Tue Jul 31 19:23:33 2007
From: david.maillists at gmail.com (David)
Date: Tue, 31 Jul 2007 18:23:33 +0100
Subject: [Linux-uvc-devel] How to know if a webcam is UVC?
Message-ID: <1fde22350707311023u6912940eu5340a8ac93e2576@mail.gmail.com>

Hello,

Sorry, but I did not manage to know it yet.

In the output of lsusb -v , where is the key to know whether the webcam is
UVC, gspca, or other?

Thank you.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070731/56f847a2/attachment.html>

From laurent.pinchart at skynet.be  Tue Jul 31 20:35:18 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 31 Jul 2007 20:35:18 +0200
Subject: [Linux-uvc-devel] How to know if a webcam is UVC?
In-Reply-To: <1fde22350707311023u6912940eu5340a8ac93e2576@mail.gmail.com>
References: <1fde22350707311023u6912940eu5340a8ac93e2576@mail.gmail.com>
Message-ID: <200707312035.18817.laurent.pinchart@skynet.be>

On Tuesday 31 July 2007, David wrote:
> Hello,
>
> Sorry, but I did not manage to know it yet.
>
> In the output of lsusb -v , where is the key to know whether the webcam is
> UVC, gspca, or other?
>
> Thank you.

Have a look at http://linux-uvc.berlios.de/faq/

USB devices report a class identifier in their descriptors. If the class ID is 
equal to 255 (Vendor Class), the device has a non-standard interface and 
implements a vendor-specific protocol. If the class ID is equal to one of the 
values defined by the USB Implementers Forum, the device implements a 
standard, documented protocol.

The UVC class ID is 14. If your webcam reports another class ID, it might 
still implement the UVC interface (early Logitech UVC webcams did so) but 
that's very unlikely. There is no way to tell which driver to use when the 
class ID is 255. Your best bet would then be to Google for the device 
VID/PID.

Regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Jul 31 20:45:31 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 31 Jul 2007 20:45:31 +0200
Subject: [Linux-uvc-devel] invalid module format uvc
In-Reply-To: <BAY110-W998EFEDF193EA6B84D33EDCEF0@phx.gbl>
References: <BAY110-W998EFEDF193EA6B84D33EDCEF0@phx.gbl>
Message-ID: <200707312045.31188.laurent.pinchart@skynet.be>

Hi,

On Tuesday 31 July 2007, helico unitemoyenne wrote:
> hello everyone,
> i try to use uvcvideo with logitech sphere MP.
> So i  did :
> 1) make
> **********************************************************
> 2)make install
> ---- uvcvideo.ko was created in  :
> /lib/modules/2.6.17-10mdvcustom/usb/media

This means the module has been compiled against "2.6.17-10mdvcustom".

> **********************************************************
> 3)i put this file in /lib/modules/2.6.17-10mdv/kernel/drivers/usb/media
> (because when i do modprobe i have FATAL: Module uvcvideo not found. and
> the the solution is to to move uvcvideo.ko in 
> /lib/modules/2.6.17-10mdv/kernel/drivers/usb/media)

This means you're running "2.6.17-10mdv".

> **********************************************************
> 4) so when i do modprobe uvcvideo: i have the same error :  FATAL: Module
> uvcvideo not found
> **********************************************************
> 5)  depmod
> **********************************************************
> 6)modprobe uvcvideo ---> error "FATAL: Error inserting uvcvideo
> (/lib/modules/2.6.17-10mdv/kernel/drivers/usb/media/uvcvideo.ko): Invalid
> module format " **********************************************************
> 7) dmesg |grep uvc ===>uvcvideo: version magic '2.6.17-10mdvcustom SMP
> mod_unload 686 gcc-4.1' should be '2.6.17-10mdv SMP mod_unload 686 gcc-4.1'
> uvcvideo: version magic '2.6.17-10mdvcustom SMP mod_unload 686 gcc-4.1'
> should be '2.6.17-10mdv SMP mod_unload 686 gcc-4.1' uvcvideo: version magic
> '2.6.17-10mdvcustom SMP mod_unload 686 gcc-4.1' should be '2.6.17-10mdv SMP
> mod_unload 686 gcc-4.1' uvcvideo: version magic '2.6.17-10mdvcustom SMP
> mod_unload 686 gcc-4.1' should be '2.6.17-10mdv SMP mod_unload 686 gcc-4.1'
> uvcvideo: version magic '2.6.17-10mdvcustom SMP mod_unload 686 gcc-4.1'
> should be '2.6.17-10mdv SMP mod_unload 686 gcc-4.1' uvcvideo: version magic
> '2.6.17-10mdvcustom SMP mod_unload 686 gcc-4.1' should be '2.6.17-10mdv SMP
> mod_unload 686 gcc-4.1' uvcvideo: version magic '2.6.17-10mdvcustom SMP
> mod_unload 686 gcc-4.1' should be '2.6.17-10mdv SMP mod_unload 686 gcc-4.1'
> uvcvideo: version magic '2.6.17-10mdvcustom SMP mod_unload 686 gcc-4.1'
> should be '2.6.17-10mdv SMP mod_unload 686 gcc-4.1'
> ***********************************************************
> So i don't know what is the problem.
> problem  with gcc version : i don't know how to fix it

It's not a gcc issue. You have to find out why the module has been compiled 
against a kernel version different from the running one. It might be 
Mandriva-specific.

Regards,

Laurent Pinchart


From rrs at researchut.com  Tue Jul 31 21:35:57 2007
From: rrs at researchut.com (Ritesh Raj Sarraf)
Date: Wed, 01 Aug 2007 01:05:57 +0530
Subject: [Linux-uvc-devel] Merge Plans
Message-ID: <thf4o4-ggc.ln1@learner.hq.netapp.com>

Hi Laurent,

Now that 2.6.23 merge window is over are there any tentative dates about
when you'd like to push the uvc driver for mainline inclusion ?
2.6.24 ?

Ritesh
-- 
If possible, Please CC me when replying. I'm not subscribed to the list.



