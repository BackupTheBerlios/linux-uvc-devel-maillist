From christophe.gisquet at free.fr  Thu Mar  1 18:08:41 2007
From: christophe.gisquet at free.fr (christophe.gisquet at free.fr)
Date: Thu, 01 Mar 2007 18:08:41 +0100
Subject: [Linux-uvc-devel] Divide by 0 in uvcvideo module with 2 webcams
	plugged
In-Reply-To: <200702231406.08783.laurent.pinchart@skynet.be>
References: <1172154855.45dda9e781e3c@imp.free.fr>
	<200702231406.08783.laurent.pinchart@skynet.be>
Message-ID: <1172768921.45e7089937887@imp.free.fr>

Selon Laurent Pinchart <laurent.pinchart at skynet.be>:
Selon Laurent Pinchart <laurent.pinchart at skynet.be>:
> SVN. Could you please try it with your setup ? Thanks.

The module no longer causes that error, whether I set correctly the framerate or
not. However, with the same setup (running 2 instances of this software), the
second VIDIOC_STREAMON fails. Without trace, syslog reports:

uvcvideo: Failed to submit isoc URB 0 (-28).

I have put online a longer extract of syslog once I modprobed uvcvideo with
trace=65535 at:
http://christophe.gisquet.free.fr/syslog

It may be the application doing again something silly. But it is strange that
the situation is exactly symmetrical: it is the order (the 2nd calls always
fails) and not the device that causes the problem.

If you would like to hunt this bug and need more info, please ask. I'm
registered to the mailing list, so no need to Cc: me (and please leave the
Reply-To if it was present).

Best regards,
Christophe Gisquet


From gadicath at pnambic.org  Thu Mar  1 23:08:33 2007
From: gadicath at pnambic.org (David Clarke)
Date: Fri, 02 Mar 2007 09:08:33 +1100
Subject: [Linux-uvc-devel] sn9c201
Message-ID: <877iu0pqfy.fsf@pnambic.org>

Hi,

I've found myself in possession of a sn9c201 and I saw that there was
some development going on for this in linux uvc.  What's the status of
the development and is there any info I could provide on my camera that
would be of use?

Thanks,

David


From pauljurczak at yahoo.com  Fri Mar  2 02:09:15 2007
From: pauljurczak at yahoo.com (Paul Jurczak)
Date: Thu, 1 Mar 2007 17:09:15 -0800 (PST)
Subject: [Linux-uvc-devel] sn9c201
Message-ID: <482934.37690.qm@web60517.mail.yahoo.com>

Hi David,

  are you sure sn9c201 is USB Video Class compliant? Product info page doesn't mention it. BTW, what is the brand and model of the camera you have?
 
Regards,
Paul.

----- Original Message ----
From: David Clarke <gadicath at pnambic.org>
To: linux-uvc-devel at lists.berlios.de
Sent: Thursday, March 1, 2007 4:08:33 PM
Subject: [Linux-uvc-devel] sn9c201

Hi,

I've found myself in possession of a sn9c201 and I saw that there was
some development going on for this in linux uvc.  What's the status of
the development and is there any info I could provide on my camera that
would be of use?

Thanks,

David
_______________________________________________
Linux-uvc-devel mailing list
Linux-uvc-devel at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/linux-uvc-devel





 
____________________________________________________________________________________
Get your own web address.  
Have a HUGE year through Yahoo! Small Business.
http://smallbusiness.yahoo.com/domains/?p=BESTDEAL


From gadicath at pnambic.org  Fri Mar  2 03:23:35 2007
From: gadicath at pnambic.org (David Clarke)
Date: Fri, 02 Mar 2007 13:23:35 +1100
Subject: [Linux-uvc-devel] sn9c201
References: <482934.37690.qm@web60517.mail.yahoo.com>
Message-ID: <87mz2wo02g.fsf@pnambic.org>

Paul Jurczak <pauljurczak at yahoo.com> writes:

> Hi David,
>
>   are you sure sn9c201 is USB Video Class compliant? Product info page doesn't mention it. BTW, what is the brand and model of the camera you have?


No, I'm not certain it is compliant :)  I just came across some notes in
the archive ( at least I hope it was the one for here ).

It shows up as 0c45:6270 Microdia on lsusb.  It's badged as a 'Speed
6800'.


Thanks,

David


From mxhaard at magic.fr  Fri Mar  2 09:00:27 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Fri, 2 Mar 2007 09:00:27 +0100
Subject: [Linux-uvc-devel] sn9c201
In-Reply-To: <87mz2wo02g.fsf@pnambic.org>
References: <482934.37690.qm@web60517.mail.yahoo.com>
	<87mz2wo02g.fsf@pnambic.org>
Message-ID: <200703020900.27803.mxhaard@magic.fr>

Le Vendredi 2 Mars 2007 03:23, David Clarke a ?crit?:
> Paul Jurczak <pauljurczak at yahoo.com> writes:
> > Hi David,
> >
> >   are you sure sn9c201 is USB Video Class compliant? Product info page
> > doesn't mention it. BTW, what is the brand and model of the camera you
> > have?
It is not, the sn9c20x is a Vendor Class
>
> No, I'm not certain it is compliant :)  I just came across some notes in
> the archive ( at least I hope it was the one for here ).
>
> It shows up as 0c45:6270 Microdia on lsusb.  It's badged as a 'Speed
> 6800'.

>
>
> Thanks,
>
> David
I have start to work on it in the gspca driver, not yet finish, follow the 
spca50x-devel mailing list on sf
regards
-- 
Michel Xhaard
http://mxhaard.free.fr


From laurent.pinchart at skynet.be  Fri Mar  2 10:16:29 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 2 Mar 2007 10:16:29 +0100
Subject: [Linux-uvc-devel] Divide by 0 in uvcvideo module with 2 webcams
	plugged
In-Reply-To: <1172768921.45e7089937887@imp.free.fr>
References: <1172154855.45dda9e781e3c@imp.free.fr>
	<200702231406.08783.laurent.pinchart@skynet.be>
	<1172768921.45e7089937887@imp.free.fr>
Message-ID: <200703021016.29522.laurent.pinchart@skynet.be>

Hi Christophe,

> > SVN. Could you please try it with your setup ? Thanks.
>
> The module no longer causes that error, whether I set correctly the
> framerate or not. However, with the same setup (running 2 instances of this
> software), the second VIDIOC_STREAMON fails. Without trace, syslog reports:
>
> uvcvideo: Failed to submit isoc URB 0 (-28).

-28 is -ENOSPC, which means the driver can't allocate USB bandwidth.

> I have put online a longer extract of syslog once I modprobed uvcvideo with
> trace=65535 at:
> http://christophe.gisquet.free.fr/syslog
>
> It may be the application doing again something silly. But it is strange
> that the situation is exactly symmetrical: it is the order (the 2nd calls
> always fails) and not the device that causes the problem.
>
> If you would like to hunt this bug and need more info, please ask. I'm
> registered to the mailing list, so no need to Cc: me (and please leave the
> Reply-To if it was present).

There's not much I can do here. Two webcams at high resolutions in 
uncompressed mode exceed the USB bandwidth. Could you try using the MJPEG 
format ?

Best regards,

Laurent Pinchart


From whytheheckareyou at hotmail.com  Mon Mar  5 00:17:43 2007
From: whytheheckareyou at hotmail.com (Sameer Tewar)
Date: Sun, 04 Mar 2007 18:17:43 -0500
Subject: [Linux-uvc-devel] Getting started
Message-ID: <BAY132-F139D6225375AF6988A8339C0850@phx.gbl>

Hello all,

         I am new to UVC and was trying to understand how to use it. I can't 
find anything concrete so I had to ask all you guys.
         I have a logitech ultra vision and I just downloaded the sources 
for the uvc driver. What do I do next.  I mean how do I start using it?
         sorry for being so general but I just don't know how to use the 
software.

thanks for reading my question and please reply,

Sameer.

_________________________________________________________________
Don?t waste time standing in line?try shopping online. Visit Sympatico / MSN 
Shopping today! http://shopping.sympatico.msn.ca



From ian.latter at midnightcode.org  Mon Mar  5 01:38:30 2007
From: ian.latter at midnightcode.org (Ian Latter)
Date: Mon, 05 Mar 2007 10:38:30 +1000
Subject: [Linux-uvc-devel] UVC Non-module patch
Message-ID: <200703042338.l24NcUwo019845@singularity.tronunltd.com>

Hello,


  I wanted to send this through yesterday, but a storm
here last night prevented me.

  I compile my kernels without module support, and I
wanted to get the UVC code in there too.  The attached
patch is just change set 89 with a custom Makefile and
a modified kernel USB Makefile.  It doesn't check to see
if V4L has been enabled (it will crash out a kernel
compile during linking if it hasn't been).  It's keyed off
the CONFIG_USB option, and its stored under
drivers/usb/video/


  It would be really good if you guys would release versioned
tar balls of your code, and a "controller" tool that didn't
require X libs (like luvcview does).  I have the Shere MP
2006 (Orbit MP 2), and would like to drive its pan and
tilt, directly (ioctl's probably), and let another utility
stream the content from /dev/video0 via the network -
possibly even just netcat - not certain yet.
  Mine's an embedded system, so I don't have all of these
libs.  I'll be adding them to do some testing (with luvcview)
but will hopefully be able to pull them out again when I
can get my own control app in place.  An example C
control app would be really useful.


Thanks for the project,



--
Ian Latter
Late night coder ..
http://midnightcode.org/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: uvc.zip
Type: application/zip
Size: 36250 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070305/ffd298da/attachment.zip>

From laurent.pinchart at skynet.be  Mon Mar  5 10:28:18 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 5 Mar 2007 10:28:18 +0100
Subject: [Linux-uvc-devel] The source clock
In-Reply-To: <951650.70686.qm@web60513.mail.yahoo.com>
References: <951650.70686.qm@web60513.mail.yahoo.com>
Message-ID: <200703051028.18843.laurent.pinchart@skynet.be>

Hi Paul,

> I see two fields in v4l2_buffer, which are used for time stamps: timecode
> and timestamp. The timecode field lacks sufficient resolution for our
> purpose, because it was designed with analog video standards in mind.
> Besides, it seems that something similar to timecode is already being
> embedded in MPEG stream by the camera. The timestamp field looks almost
> perfect for our purpose - resolution could be better, but a microsecond is
> good enough.

Agreed. Let's use the timestamp field.

> The most comprehensive solution, following the spirit of V4L2 
> specs, would involve camera and PC clock synchronization. In practical
> terms, it would mean finding the system time (Tn) of creation of SOF packet
> number n and using SOF counter value (m) and System Time Clock (Tm) from
> scrSourceClock and dwPresentationTime (Tp) to calculate frame creation time
> (t) in PC system time:
>
> t = Tn + (m-n)*125us + ((Tm-Tp)%dwClockFrequency)/dwClockFrequency 
> (sketchy)
>
> Before I go any further, it would help to find out the following:
>
> 1) Are we getting both dwPresentationTime and scrSourceClock in the Payload
> Header (controlled by bits 2 and 3 of bmHeaderInfo)? It seems that cameras
> without microphone may not provide them (page 34 of USB Class Definition
> for Video Devices).

I tested various webcams. One of them didn't include the PTS and SCR fields in 
any packet. All others did.

> 2) More importantly, is the camera SOF counter the same as host SOF
> counter? Possibility of different counting is mentioned on page 33 of USB
> Class Definition for Video Devices. If counters are different, finding the
> offset may be very difficult.

The specification doesn't call for a single counter, so we unfortunately can't 
rely on that.

As the device SOF counter and the host SOF counter have different values, the 
above formula will be very difficult to use. The PTS and SCR fields have been 
designed to synchronise multiple video and audio streams from a single 
device. Synchronising video streams from separate devices seem to be outside 
the scope of the UVC specification :-/

On the other hand, some webcams might synchronise their SOF counter with the 
host SOF counter. For those devices, the driver might be able to synchronise 
multiple webcams. I had a look at the USB stack source code, and found no way 
to get the host time at which a SOF packet is issued. That could be a 
problem.

Chapter 5.12 in the USB 2.0 specification discuss clock synchronisation 
issues, you might find some help there.

Best regards,

Laurent Pinchart


From bmhtdev at yahoo.co.uk  Mon Mar  5 10:58:46 2007
From: bmhtdev at yahoo.co.uk (Mark Halliday)
Date: Mon, 5 Mar 2007 09:58:46 +0000 (GMT)
Subject: [Linux-uvc-devel] Logitech Orbit apply patch Howto
Message-ID: <20070305095846.3534.qmail@web27710.mail.ukl.yahoo.com>

Dear List,

I am trying to attach a Logitech Quickcam Orbit MP (2006 model) to a
dell dimension 2300 running Fedora Core 6.  I have downloaded revision
87 uvcvideo driver.

The camera is recognised in the list of usb devices as: 046d:08cc

It is assigned to /dev/video0

The firest time I tried it ran under kdetv.  But now produces nothing.

Looking at the logs they are full of uvcvideo: -110 and uvcvideo: -32
errors.

Having read the archives it seems I have the USB reset problem and
should apply the patch discussed here:
(https://lists.berlios.de/pipermail/linux-uvc-devel/2006-February/000210.html)

This is where i run up against the limit of my ability.  It is a bit
like a cookbook which says now 'blanch the vegetables'.

The patch appears to refer to a file called uvcvideo.c, but I cannot
find such a file on my system.

So how do I apply this patch?  I have searched for patching, but
everything refers to making a fundamental change to the kernel. I
thought it better to ask the stupid question before I torch my OS
through ignorance.

So can anyone let me have a command by command guide for FC6 to apply
the patch (if it is still the appropriate action).

Thanks in advance

M







		
___________________________________________________________ 
To help you stay safe and secure online, we've developed the all new Yahoo! Security Centre. http://uk.security.yahoo.com


From richard at rsk.demon.co.uk  Mon Mar  5 13:37:57 2007
From: richard at rsk.demon.co.uk (richard)
Date: Mon, 05 Mar 2007 12:37:57 +0000
Subject: [Linux-uvc-devel] control query fails
Message-ID: <1173098277.3483.26.camel@localhost.localdomain>

Hi,
I've got a logitech pro 5000 working with ekiga on fedora fc6 64 on an
AMD 64X2.

This driver loads ok :-

> uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c5)

and will work ok for a while but if I close a call or stop then
(quickly) restart displaying the video it fails with usb errors

>uvcvideo: Failed to query (129) UVC control 1 (unit 0) : -32 (exp. 26).
>uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32 (exp. 26).
>uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32 (exp. 26).
>uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -75 (exp. 26).
>uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110 (exp. 26).

and then it gets stuck in this state, even reloading the uvcvideo module
does not clear this error, I have to unplug the camera.

I think that there is race between uvc_v4l2_open & uvc_v4l2_release, so
I've patched release to take the same mutex as open. 
It seems to be working as I've not seen any problems since adding in
this extra locking.

I'm not sure if this is really a ekiga problem rather than a driver
problem, but the patch is pretty simple and isn't going to be called
very often so won't affect performance.

Should uvc_v4l2_do_ioctl also take the lock to stop close removing the
structures while an ioctl is in progress ? 

HTH
cheers
richard


Index: uvc_v4l2.c
===================================================================
--- uvc_v4l2.c  (revision 89)
+++ uvc_v4l2.c  (working copy)
@@ -418,11 +418,15 @@
 
 static int uvc_v4l2_release(struct inode *inode, struct file *file)
 {
-       struct video_device *vdev = video_devdata(file);
-       struct uvc_video_device *video = video_get_drvdata(vdev);
-       struct uvc_fh *handle = (struct uvc_fh *)file->private_data;
+       struct video_device *vdev;
+       struct uvc_video_device *video;
+       struct uvc_fh *handle;
 
        uvc_trace(UVC_TRACE_CALLS, "uvc_v4l2_release\n");
+       mutex_lock(&uvc_driver.open_mutex);
+       vdev = video_devdata(file);
+       video = video_get_drvdata(vdev);
+       handle = (struct uvc_fh *)file->private_data;
 
        /* Only free resources if this is a privileged handle. */
        if (uvc_has_privileges(handle)) {
@@ -439,6 +443,7 @@
        uvc_dismiss_privileges(handle);
        kfree(handle);
        file->private_data = NULL;
+       mutex_unlock(&uvc_driver.open_mutex);
 
        kref_put(&video->dev->kref, uvc_delete);
        return 0;
 
 




From pmarques at grupopie.com  Mon Mar  5 13:19:27 2007
From: pmarques at grupopie.com (Paulo Marques)
Date: Mon, 05 Mar 2007 12:19:27 +0000
Subject: [Linux-uvc-devel] The source clock
In-Reply-To: <200703051028.18843.laurent.pinchart@skynet.be>
References: <951650.70686.qm@web60513.mail.yahoo.com>
	<200703051028.18843.laurent.pinchart@skynet.be>
Message-ID: <45EC0ACF.1090206@grupopie.com>

Laurent Pinchart wrote:
> [...]
> I tested various webcams. One of them didn't include the PTS and SCR fields in 
> any packet. All others did.

Since we're on the subject of frame clocks, I tested a Quickcam Ultra 
Vision and used gettimeofday to stamp each frame as it arrived.

It seems that the frames are always sent with a 40ms granularity no 
matter what the frame rate is, except at 30Hz where each frame is 33ms 
apart.

For instance, if I request 10Hz, instead of having each frame 100ms 
apart, I get 80ms -> 120ms -> 80ms -> 120ms....

So, the only "constant period" modes are 25Hz and 30Hz.

I thought this might be related to powerline filtering, but I tested 
with every setting (starting with no filter at all) and still saw the 
same behavior.

Is this a limitation of the camera?

-- 
Paulo Marques
Software Development Department - Grupo PIE, S.A.
Phone: +351 252 290600, Fax: +351 252 290601
Web: www.grupopie.com

"Very funny Scotty. Now beam up my clothes."


From laurent.pinchart at skynet.be  Mon Mar  5 15:28:33 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 5 Mar 2007 15:28:33 +0100
Subject: [Linux-uvc-devel] control query fails
In-Reply-To: <1173098277.3483.26.camel@localhost.localdomain>
References: <1173098277.3483.26.camel@localhost.localdomain>
Message-ID: <200703051528.34351.laurent.pinchart@skynet.be>

Hi Richard,

> I've got a logitech pro 5000 working with ekiga on fedora fc6 64 on an
> AMD 64X2.
>
> This driver loads ok :-
>
> > uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c5)
>
> and will work ok for a while but if I close a call or stop then
> (quickly) restart displaying the video it fails with usb errors
>
> >uvcvideo: Failed to query (129) UVC control 1 (unit 0) : -32 (exp. 26).
> >uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32 (exp. 26).
> >uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32 (exp. 26).
> >uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -75 (exp. 26).
> >uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110 (exp. 26).
>
> and then it gets stuck in this state, even reloading the uvcvideo module
> does not clear this error, I have to unplug the camera.

You are experiencing the dreadful Logitech hardware bug.

> I think that there is race between uvc_v4l2_open & uvc_v4l2_release, so
> I've patched release to take the same mutex as open.
> It seems to be working as I've not seen any problems since adding in
> this extra locking.

Could you please test the changes a bit more ? It really shouldn't matter. 
AFAIK, Ekiga doesn't open and close the webcam in different threads, so any 
close() call will return before the next open() call is issued.

> I'm not sure if this is really a ekiga problem rather than a driver
> problem, but the patch is pretty simple and isn't going to be called
> very often so won't affect performance.
>
> Should uvc_v4l2_do_ioctl also take the lock to stop close removing the
> structures while an ioctl is in progress ?

If I'm not mistaken, the kernel guarantees that an ioctl() call completes 
before any close() call is performed.

Best regards,

Laurent Pinchart


From richard at rsk.demon.co.uk  Mon Mar  5 16:07:07 2007
From: richard at rsk.demon.co.uk (richard)
Date: Mon, 05 Mar 2007 15:07:07 +0000
Subject: [Linux-uvc-devel] control query fails
In-Reply-To: <200703051528.34351.laurent.pinchart@skynet.be>
References: <1173098277.3483.26.camel@localhost.localdomain>
	<200703051528.34351.laurent.pinchart@skynet.be>
Message-ID: <1173107227.3483.36.camel@localhost.localdomain>

On Mon, 2007-03-05 at 15:28 +0100, Laurent Pinchart wrote:
> Hi Richard,
> 
> > I've got a logitech pro 5000 working with ekiga on fedora fc6 64 on an
> > AMD 64X2.
> >
> > This driver loads ok :-
> >
> > > uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c5)
> >
> > and will work ok for a while but if I close a call or stop then
> > (quickly) restart displaying the video it fails with usb errors
> >
> > >uvcvideo: Failed to query (129) UVC control 1 (unit 0) : -32 (exp. 26).
> > >uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32 (exp. 26).
> > >uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32 (exp. 26).
> > >uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -75 (exp. 26).
> > >uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110 (exp. 26).
> >
> > and then it gets stuck in this state, even reloading the uvcvideo module
> > does not clear this error, I have to unplug the camera.
> 
> You are experiencing the dreadful Logitech hardware bug.
> 
> > I think that there is race between uvc_v4l2_open & uvc_v4l2_release, so
> > I've patched release to take the same mutex as open.
> > It seems to be working as I've not seen any problems since adding in
> > this extra locking.
> 
> Could you please test the changes a bit more ? It really shouldn't matter. 
> AFAIK, Ekiga doesn't open and close the webcam in different threads, so any 
> close() call will return before the next open() call is issued.
> 
> > I'm not sure if this is really a ekiga problem rather than a driver
> > problem, but the patch is pretty simple and isn't going to be called
> > very often so won't affect performance.
> >
> > Should uvc_v4l2_do_ioctl also take the lock to stop close removing the
> > structures while an ioctl is in progress ?
> 
> If I'm not mistaken, the kernel guarantees that an ioctl() call completes 
> before any close() call is performed.
> 
> Best regards,
> 
> Laurent Pinchart
Hi Laurent,

thanks for the info and sorry for the noise.
Hiding/showing images from the camera sometimes triggers the bug so I
was just guessing and it seemed to help :)

cheers
Richard




From laurent.pinchart at skynet.be  Mon Mar  5 17:39:57 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 5 Mar 2007 17:39:57 +0100
Subject: [Linux-uvc-devel] control query fails
In-Reply-To: <1173107227.3483.36.camel@localhost.localdomain>
References: <1173098277.3483.26.camel@localhost.localdomain>
	<200703051528.34351.laurent.pinchart@skynet.be>
	<1173107227.3483.36.camel@localhost.localdomain>
Message-ID: <200703051739.57938.laurent.pinchart@skynet.be>

Hi Richard,

> > > I've got a logitech pro 5000 working with ekiga on fedora fc6 64 on an
> > > AMD 64X2.
> > >
> > > This driver loads ok :-
> > >
> > > > uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c5)
> > >
> > > and will work ok for a while but if I close a call or stop then
> > > (quickly) restart displaying the video it fails with usb errors
> > >
> > > >uvcvideo: Failed to query (129) UVC control 1 (unit 0) : -32 (exp.
> > > > 26). uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32 (exp.
> > > > 26). uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32 (exp.
> > > > 26). uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -75 (exp.
> > > > 26). uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110
> > > > (exp. 26).
> > >
> > > and then it gets stuck in this state, even reloading the uvcvideo
> > > module does not clear this error, I have to unplug the camera.
> >
> > You are experiencing the dreadful Logitech hardware bug.
> >
> > > I think that there is race between uvc_v4l2_open & uvc_v4l2_release, so
> > > I've patched release to take the same mutex as open.
> > > It seems to be working as I've not seen any problems since adding in
> > > this extra locking.
> >
> > Could you please test the changes a bit more ? It really shouldn't
> > matter. AFAIK, Ekiga doesn't open and close the webcam in different
> > threads, so any close() call will return before the next open() call is
> > issued.
> >
> > > I'm not sure if this is really a ekiga problem rather than a driver
> > > problem, but the patch is pretty simple and isn't going to be called
> > > very often so won't affect performance.
> > >
> > > Should uvc_v4l2_do_ioctl also take the lock to stop close removing the
> > > structures while an ioctl is in progress ?
> >
> > If I'm not mistaken, the kernel guarantees that an ioctl() call completes
> > before any close() call is performed.
> >
> > Best regards,
> >
> > Laurent Pinchart
>
> Hi Laurent,
>
> thanks for the info and sorry for the noise.

No need to apologize. If an added mutex could help with Logitech webcam 
issues, I'd be glad to investigate. I just would like to make sure it really 
help, and that you didn't jump to happy conclusions too fast.

> Hiding/showing images from the camera sometimes triggers the bug so I
> was just guessing and it seemed to help :)

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Mar  5 17:44:41 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 5 Mar 2007 17:44:41 +0100
Subject: [Linux-uvc-devel] The source clock
In-Reply-To: <45EC0ACF.1090206@grupopie.com>
References: <951650.70686.qm@web60513.mail.yahoo.com>
	<200703051028.18843.laurent.pinchart@skynet.be>
	<45EC0ACF.1090206@grupopie.com>
Message-ID: <200703051744.41961.laurent.pinchart@skynet.be>

Hi Paulo,

> > [...]
> > I tested various webcams. One of them didn't include the PTS and SCR
> > fields in any packet. All others did.
>
> Since we're on the subject of frame clocks, I tested a Quickcam Ultra
> Vision and used gettimeofday to stamp each frame as it arrived.
>
> It seems that the frames are always sent with a 40ms granularity no
> matter what the frame rate is, except at 30Hz where each frame is 33ms
> apart.
>
> For instance, if I request 10Hz, instead of having each frame 100ms
> apart, I get 80ms -> 120ms -> 80ms -> 120ms....
>
> So, the only "constant period" modes are 25Hz and 30Hz.
>
> I thought this might be related to powerline filtering, but I tested
> with every setting (starting with no filter at all) and still saw the
> same behavior.
>
> Is this a limitation of the camera?

I can't answer, as I have no knowledge of the webcam internals. Martin Rubli 
might be able to give more information.

Laurent Pinchart


From pauljurczak at yahoo.com  Mon Mar  5 18:34:28 2007
From: pauljurczak at yahoo.com (Paul Jurczak)
Date: Mon, 5 Mar 2007 09:34:28 -0800 (PST)
Subject: [Linux-uvc-devel] The source clock
Message-ID: <430541.19874.qm@web60515.mail.yahoo.com>

Hi Laurent,

 as much as I would like to see cheap USB webcam based stereo vision, I have to agree with you that adherence to standard is crucial. In general case we have to assume different values in device and host SOF counters. Do you have means (bus analyzer) to test some UVC cameras to find out if these counters have the same values? Maybe all of them or most of them do. In such a case, it would be worthwhile to pursue it further. UVC driver could use time stamps only for these devices. I can provide you with at least one new UVC camera, which is not on official list yet (V-Gear TalkCam MX6) for testing. 

 There seems to be a way to get host system time at SOF Token generation. Chapter 6.3 of Open Host Controller Interface Specification for USB describes StartOfFrame interrupt event, which could be used for this purpose.
 
Best Regards,
Paul Jurczak.

----- Original Message ----
From: Laurent Pinchart <laurent.pinchart at skynet.be>
To: Paul Jurczak <pauljurczak at yahoo.com>
Cc: linux-uvc-devel at lists.berlios.de
Sent: Monday, March 5, 2007 3:28:18 AM
Subject: Re: [Linux-uvc-devel] The source clock

Hi Paul,

> I see two fields in v4l2_buffer, which are used for time stamps: timecode
> and timestamp. The timecode field lacks sufficient resolution for our
> purpose, because it was designed with analog video standards in mind.
> Besides, it seems that something similar to timecode is already being
> embedded in MPEG stream by the camera. The timestamp field looks almost
> perfect for our purpose - resolution could be better, but a microsecond is
> good enough.

Agreed. Let's use the timestamp field.

> The most comprehensive solution, following the spirit of V4L2 
> specs, would involve camera and PC clock synchronization. In practical
> terms, it would mean finding the system time (Tn) of creation of SOF packet
> number n and using SOF counter value (m) and System Time Clock (Tm) from
> scrSourceClock and dwPresentationTime (Tp) to calculate frame creation time
> (t) in PC system time:
>
> t = Tn + (m-n)*125us + ((Tm-Tp)%dwClockFrequency)/dwClockFrequency 
> (sketchy)
>
> Before I go any further, it would help to find out the following:
>
> 1) Are we getting both dwPresentationTime and scrSourceClock in the Payload
> Header (controlled by bits 2 and 3 of bmHeaderInfo)? It seems that cameras
> without microphone may not provide them (page 34 of USB Class Definition
> for Video Devices).

I tested various webcams. One of them didn't include the PTS and SCR fields in 
any packet. All others did.

> 2) More importantly, is the camera SOF counter the same as host SOF
> counter? Possibility of different counting is mentioned on page 33 of USB
> Class Definition for Video Devices. If counters are different, finding the
> offset may be very difficult.

The specification doesn't call for a single counter, so we unfortunately can't 
rely on that.

As the device SOF counter and the host SOF counter have different values, the 
above formula will be very difficult to use. The PTS and SCR fields have been 
designed to synchronise multiple video and audio streams from a single 
device. Synchronising video streams from separate devices seem to be outside 
the scope of the UVC specification :-/

On the other hand, some webcams might synchronise their SOF counter with the 
host SOF counter. For those devices, the driver might be able to synchronise 
multiple webcams. I had a look at the USB stack source code, and found no way 
to get the host time at which a SOF packet is issued. That could be a 
problem.

Chapter 5.12 in the USB 2.0 specification discuss clock synchronisation 
issues, you might find some help there.

Best regards,

Laurent Pinchart





 
____________________________________________________________________________________
Bored stiff? Loosen up... 
Download and play hundreds of games for free on Yahoo! Games.
http://games.yahoo.com/games/front





 
____________________________________________________________________________________
Bored stiff? Loosen up... 
Download and play hundreds of games for free on Yahoo! Games.
http://games.yahoo.com/games/front


From whytheheckareyou at hotmail.com  Tue Mar  6 02:55:03 2007
From: whytheheckareyou at hotmail.com (Sameer Tewar)
Date: Mon, 05 Mar 2007 20:55:03 -0500
Subject: [Linux-uvc-devel] Getting started
In-Reply-To: <Pine.LNX.4.61.0703042011040.24478@shiva.physics.mcgill.ca>
Message-ID: <BAY132-F24F53C5B9568DB13B71A74C07B0@phx.gbl>

Hi,

   I did the the make,make install and modprobe uvcvideo. Unfortunately I 
keep getting midule not found error.

I did a dmesg and there is no mention of uvc. I have Fedore core 6 
[2.6.18-1.2868.fc6]

any ideas?

thanks,
Sameer

>From: Jim Cline <jcline at hep.physics.mcgill.ca>
>Reply-To: jcline at physics.mcgill.ca
>To: Sameer Tewar <whytheheckareyou at hotmail.com>
>Subject: Re: [Linux-uvc-devel] Getting started
>Date: Sun, 04 Mar 2007 20:17:03 -0500 (EST)
>MIME-Version: 1.0
>Received: from relais.videotron.ca ([24.201.245.36]) by 
>bay0-mc1-f4.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2444); Sun, 4 
>Mar 2007 17:17:04 -0800
>Received: from shiva.physics.mcgill.ca ([74.56.89.52]) by 
>VL-MO-MR002.ip.videotron.ca (Sun Java System Messaging Server 6.2-2.05 
>(built Apr 28 2005)) with ESMTP id 
><0JEE00HNWOWB9OA0 at VL-MO-MR002.ip.videotron.ca> for 
>whytheheckareyou at hotmail.com; Sun, 04 Mar 2007 20:17:04 -0500 (EST)
>Received: from shiva.physics.mcgill.ca (jcline at localhost [127.0.0.1])by 
>shiva.physics.mcgill.ca (8.13.4/8.13.1/Debian-15) with ESMTP id 
>l251H3Fm003144	for <whytheheckareyou at hotmail.com>; Sun, 04 Mar 2007 
>20:17:03 -0500
>Received: from localhost (jcline at localhost)	by shiva.physics.mcgill.ca 
>(8.13.4/8.13.4/Submit) with ESMTP id l251H3KJ003141	for 
><whytheheckareyou at hotmail.com>; Sun, 04 Mar 2007 20:17:03 -0500
>X-Message-Info: 5ZHoJh3ZkQ2beHhjtR/Lqw+jGgHyYqvlcOX901YQIts9LGp2DPKzBw==
>X-X-Sender: jcline at shiva.physics.mcgill.ca
>References: <BAY132-F139D6225375AF6988A8339C0850 at phx.gbl>
>X-Authentication-warning: shiva.physics.mcgill.ca: jcline owned process 
>doing -bs
>Return-Path: jcline at hep.physics.mcgill.ca
>X-OriginalArrivalTime: 05 Mar 2007 01:17:04.0877 (UTC) 
>FILETIME=[FC5A79D0:01C75EC3]
>
>you need to type "make" to compile the drivers.  then as root, make 
>install.  Finally, modprobe uvcvideo to insert the module into the kernel.
>
>On Sun, 4 Mar 2007, Sameer Tewar wrote:
>
>>Hello all,
>>
>>        I am new to UVC and was trying to understand how to use it. I 
>>can't find anything concrete so I had to ask all you guys.
>>        I have a logitech ultra vision and I just downloaded the sources 
>>for the uvc driver. What do I do next.  I mean how do I start using it?
>>        sorry for being so general but I just don't know how to use the 
>>software.
>>
>>thanks for reading my question and please reply,
>>
>>Sameer.
>>
>>_________________________________________________________________
>>Don?t waste time standing in line?try shopping online. Visit Sympatico / 
>>MSN Shopping today! http://shopping.sympatico.msn.ca
>>
>>

_________________________________________________________________
Win a trip for four to a concert anywhere in the world! 
http://www.mobilelivetour.ca/



From laurent.pinchart at skynet.be  Tue Mar  6 15:22:05 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 6 Mar 2007 15:22:05 +0100
Subject: [Linux-uvc-devel] UVC Non-module patch
In-Reply-To: <200703042338.l24NcUwo019845@singularity.tronunltd.com>
References: <200703042338.l24NcUwo019845@singularity.tronunltd.com>
Message-ID: <200703061522.05599.laurent.pinchart@skynet.be>

H Ian,

>   I wanted to send this through yesterday, but a storm
> here last night prevented me.
>
>   I compile my kernels without module support, and I
> wanted to get the UVC code in there too.  The attached
> patch is just change set 89 with a custom Makefile and
> a modified kernel USB Makefile.  It doesn't check to see
> if V4L has been enabled (it will crash out a kernel
> compile during linking if it hasn't been).  It's keyed off
> the CONFIG_USB option, and its stored under
> drivers/usb/video/
>
>
>   It would be really good if you guys would release versioned
> tar balls of your code,

We will do much better than that. The plan is to get the Linux UVC driver 
integrated in the mainline kernel. This isn't a straightforward process, as I 
need to have a few V4L2 controls standardised first.

> and a "controller" tool that didn't 
> require X libs (like luvcview does).  I have the Shere MP
> 2006 (Orbit MP 2), and would like to drive its pan and
> tilt, directly (ioctl's probably), and let another utility
> stream the content from /dev/video0 via the network -
> possibly even just netcat - not certain yet.
>   Mine's an embedded system, so I don't have all of these
> libs.  I'll be adding them to do some testing (with luvcview)
> but will hopefully be able to pull them out again when I
> can get my own control app in place.  An example C
> control app would be really useful.

The Linux UVC driver is really a V4L2 driver. It currently has a few private 
controls (for pan/tilt support for instance), but apart from that there is 
really nothing UVC-specific. V4L2 applications should work with the driver 
out of the box, provided they use the mmap() streaming method.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Mar  6 16:10:17 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 6 Mar 2007 16:10:17 +0100
Subject: [Linux-uvc-devel] The source clock
In-Reply-To: <430541.19874.qm@web60515.mail.yahoo.com>
References: <430541.19874.qm@web60515.mail.yahoo.com>
Message-ID: <200703061610.17902.laurent.pinchart@skynet.be>

Hi Paul,

> as much as I would like to see cheap USB webcam based stereo vision, I
> have to agree with you that adherence to standard is crucial. In general
> case we have to assume different values in device and host SOF counters. Do
> you have means (bus analyzer) to test some UVC cameras to find out if these
> counters have the same values?

There's an easier way. I just plugged two Logitech webcams. Their SOF counters 
seem to be synchronised.

> Maybe all of them or most of them do. In such a case, it would be worthwhile
> to pursue it further.

Agreed, that would be interesting. Webcams with synchronised SOF counters 
could be marked as such in the driver.

> UVC driver could use time stamps only for these devices.

The driver should support timestamps for all UVC webcams. Devices which have a 
non-synchronised SOF counter would use the PTS/SCR values to handle clock 
drift. Other devices could be synchronised to the host clock.

> I can provide you with at least one new UVC camera, which is not on official
> list yet (V-Gear TalkCam MX6) for testing.

Have you tested it ? Does it work ? If so, I can add it to the list on the 
website. Please provide me with the device USB descriptors.

> There seems to be a way to get host system time at SOF Token generation.
> Chapter 6.3 of Open Host Controller Interface Specification for USB
> describes StartOfFrame interrupt event, which could be used for this
> purpose.

That won't work for EHCI controllers (not sure about UHCI). We need to find 
something else.

Best regards,

Laurent Pinchart


From pauljurczak at yahoo.com  Tue Mar  6 17:51:12 2007
From: pauljurczak at yahoo.com (Paul Jurczak)
Date: Tue, 6 Mar 2007 08:51:12 -0800 (PST)
Subject: [Linux-uvc-devel] The source clock
Message-ID: <737374.22414.qm@web60513.mail.yahoo.com>

Hi Laurent,

  This is a great news - it means that stereo system should be easy to do. Most likely cause for synchronized (I assume you mean the same values) device SOF counters in two Logitech cameras is them being synchronized with host SOF counter. Can you compare values in device SOF counter with host SOF counter? Could provide experimental version of the driver placing SRC into timestamp structure, so I can read it? I can buy another Logitech camera and do some testing on two of them with controlled light source to find out if there is any "cheating" about synchronized exposure.
 
  I'm going to order V-Gear TalkCam MX6 and let you know about USB descriptors.

  If StartOfFrame interrupt event can't be used, what about reading HcFmNumber register repeatedly, storing system time of several hundred value change events and doing some statistical processing on that data to find out offset between USB frame counter and system time. Again, this is relevant only if device and host SOF counters are using the same values.

Best regards,
Paul Jurczak.











 
____________________________________________________________________________________
Sucker-punch spam with award-winning protection. 
Try the free Yahoo! Mail Beta.
http://advision.webevents.yahoo.com/mailbeta/features_spam.html


From monnier at iro.umontreal.ca  Tue Mar  6 20:33:36 2007
From: monnier at iro.umontreal.ca (Stefan Monnier)
Date: Tue, 06 Mar 2007 14:33:36 -0500
Subject: [Linux-uvc-devel] Logitech Orbit apply patch Howto
References: <20070305095846.3534.qmail@web27710.mail.ukl.yahoo.com>
Message-ID: <jwvfy8i6uhr.fsf-monnier+gmane.linux.drivers.uvc.devel@gnu.org>

> The patch appears to refer to a file called uvcvideo.c, but I cannot
> find such a file on my system.

The source code has been shuffled in the mean time, so it's indeed a bit
less straightforward.  I currently use the patch below.  Note that I have no
idea what I'm doing: I'm proficient in C but haven't spent any time trying
to understand the code of linux-uvc.

To apply the patch, just do 'patch <thisemail' in the source directory of
linux-uvc.

I make no guarantee about this patch at all.  It does seem to improve the
behavior of my Orbit MP camera, tho.


        Stefan


Index: uvc_video.c
===================================================================
--- uvc_video.c	(revision 89)
+++ uvc_video.c	(working copy)
@@ -27,6 +27,29 @@
  * UVC Controls
  */
 
+int uvc_usb_reset(struct uvc_device *dev)
+{
+	int l, ret;
+
+	l = usb_lock_device_for_reset(dev->udev, dev->intf);
+
+	if (l >= 0) {
+		ret = usb_reset_device(dev->udev);
+		if (l)
+			usb_unlock_device(dev->udev);
+	}
+	else
+		ret = -EBUSY;
+
+	if (ret)
+		uvc_printk(KERN_DEBUG, "uvc_usb_reset: Unable to reset usb device"
+			   "(%d).\n", ret);
+	else
+		dev->state &= ~UVC_DEV_IOERROR;
+
+	return ret;
+}
+
 int uvc_query_ctrl(struct uvc_device *dev, __u8 query, __u8 unit,
 			__u8 intfnum, __u8 cs, void *data, __u16 size)
 {
@@ -45,6 +68,7 @@
 		uvc_printk(KERN_ERR, "Failed to query (%u) UVC control %u "
 			"(unit %u) : %d (exp. %u).\n", query, cs, unit, ret,
 			size);
+		dev->state |= UVC_DEV_IOERROR;
 		return -EIO;
 	}
 
@@ -656,6 +680,25 @@
  * Video device
  */
 
+/* 
+ * Reset and Re-Initialize video device
+ */
+int uvc_video_reinit(struct uvc_video_device *video)
+{
+	int ret;
+
+	if ((ret = uvc_usb_reset(video->dev)) < 0)
+		return ret;
+
+	if ((ret = uvc_set_video_ctrl(video, &video->streaming->ctrl, 0)) < 0) {
+		uvc_printk(KERN_DEBUG, "uvc_video_reinit: Unable to commit format "
+			   "(%d).\n", ret);
+		return ret;
+	}
+
+	return 0;
+}
+
 /*
  * Initialize the UVC video device.
  *
Index: uvc_v4l2.c
===================================================================
--- uvc_v4l2.c	(revision 89)
+++ uvc_v4l2.c	(working copy)
@@ -435,6 +435,10 @@
 		mutex_unlock(&video->queue.mutex);
 	}
 
+	/* leave usb device in a clean state */
+	if (video->dev->state & UVC_DEV_IOERROR)
+		uvc_video_reinit(video);
+
 	/* Release the file handle. */
 	uvc_dismiss_privileges(handle);
 	kfree(handle);
Index: uvc_driver.c
===================================================================
--- uvc_driver.c	(revision 89)
+++ uvc_driver.c	(working copy)
@@ -1159,9 +1159,18 @@
 	 * parameters.
 	 */
 	if ((ret = uvc_video_init(&dev->video)) < 0) {
-		uvc_printk(KERN_ERR, "Failed to initialize the device "
-			"(%d).\n", ret);
-		return ret;
+
+		uvc_printk(KERN_ERR, "Failed to initialize the device, "
+			   "(%d). trying to reset ...\n", ret);
+
+		if ((ret = uvc_usb_reset(dev)))
+			return ret;
+
+		if ((ret = uvc_video_init(&dev->video)) < 0) {
+			uvc_printk(KERN_ERR, "Failed to initialize the device "
+				   "(%d).\n", ret);
+			return ret;
+		}
 	}
 
 	/* Register the device with V4L. */
Index: uvcvideo.h
===================================================================
--- uvcvideo.h	(revision 89)
+++ uvcvideo.h	(working copy)
@@ -515,6 +515,7 @@
 
 enum uvc_device_state {
 	UVC_DEV_DISCONNECTED = 1,
+	UVC_DEV_IOERROR = 2,
 };
 
 struct uvc_device {
@@ -625,6 +626,8 @@
 extern struct file_operations uvc_fops;
 
 /* Video */
+extern int uvc_usb_reset(struct uvc_device *dev);
+extern int uvc_video_reinit(struct uvc_video_device *video);
 extern int uvc_video_init(struct uvc_video_device *video);
 extern int uvc_video_enable(struct uvc_video_device *video, int enable);
 extern int uvc_probe_video(struct uvc_video_device *video,



From ian.latter at midnightcode.org  Wed Mar  7 03:59:52 2007
From: ian.latter at midnightcode.org (Ian Latter)
Date: Wed, 07 Mar 2007 12:59:52 +1000
Subject: [Linux-uvc-devel] UVC Non-module patch
Message-ID: <200703070159.l271xqgN028235@singularity.tronunltd.com>


> >   It would be really good if you guys would release versioned
> > tar balls of your code,
> 
> We will do much better than that. The plan is to get the Linux UVC driver 
> integrated in the mainline kernel. This isn't a straightforward process, as I 
> need to have a few V4L2 controls standardised first.

Thanks Laurent -- in the mean time tho .. Gnu style tarballs
(uvc-version.tar.gz) would be handy.
 

> >   Mine's an embedded system, so I don't have all of these
> > libs.  I'll be adding them to do some testing (with luvcview)
> > but will hopefully be able to pull them out again when I
> > can get my own control app in place.  An example C
> > control app would be really useful.
> 
> The Linux UVC driver is really a V4L2 driver. It currently has a few private 
> controls (for pan/tilt support for instance), but apart from that there is 
> really nothing UVC-specific. V4L2 applications should work with the driver 
> out of the box, provided they use the mmap() streaming method.

Thanks, now that I've been through the workings of the luvcview
code, I'm feeling pretty confident.  Last night I produced a basic
library based on the luvcview v4l2 code .. it looks promising.  If I get
my camera running, I'll give you the USB id's, because it shows up as
unknown.





--
Ian Latter
Late night coder ..
http://midnightcode.org/


From jj_burford at yahoo.com  Wed Mar  7 05:03:47 2007
From: jj_burford at yahoo.com (Jon Burford)
Date: Tue, 6 Mar 2007 20:03:47 -0800 (PST)
Subject: [Linux-uvc-devel] HP Pavillion dv6000t Ricoh webcam
Message-ID: <369287.202.qm@web31610.mail.mud.yahoo.com>

I have a dv6000t with the Ricoh cam (id 05ca:1810).  I
was wondering if anyone had any success with a
firmware upgrade option:

http://www.mail-archive.com/linux-uvc-devel at lists.berlios.de/msg00447.html

or a driver:

http://www.mail-archive.com/linux-uvc-devel at lists.berlios.de/msg00445.html

Thanks in advance!


From linux at rubli.info  Wed Mar  7 07:22:29 2007
From: linux at rubli.info (Martin Rubli)
Date: Tue, 06 Mar 2007 22:22:29 -0800
Subject: [Linux-uvc-devel] UVC Non-module patch
In-Reply-To: <200703070159.l271xqgN028235@singularity.tronunltd.com>
References: <200703070159.l271xqgN028235@singularity.tronunltd.com>
Message-ID: <op.tos2nrcm42iof8@nb-mrublixp.am.logitech.com>

On Tue, 06 Mar 2007 18:59:52 -0800, Ian Latter  
<ian.latter at midnightcode.org> wrote:

>> We will do much better than that. The plan is to get the Linux UVC  
>> driver
>> integrated in the mainline kernel. This isn't a straightforward  
>> process, as I
>> need to have a few V4L2 controls standardised first.
>
> Thanks Laurent -- in the mean time tho .. Gnu style tarballs
> (uvc-version.tar.gz) would be handy.

I agree, with all the people who keep having problems to download the  
driver it couldn't hurt. :-)

> Thanks, now that I've been through the workings of the luvcview
> code, I'm feeling pretty confident.  Last night I produced a basic
> library based on the luvcview v4l2 code .. it looks promising.  If I get
> my camera running, I'll give you the USB id's, because it shows up as
> unknown.

The device showing up as "unknown" is not a problem, it just means that  
you have a generic UVC device that doesn't need any special treatment  
(unlike the few Logitech ones that are hardcoded). Unfortunately the  
driver usually has no way of reading a descriptive name from the device.

Cheers,
Martin


From ian.latter at midnightcode.org  Wed Mar  7 09:16:42 2007
From: ian.latter at midnightcode.org (Ian Latter)
Date: Wed, 07 Mar 2007 18:16:42 +1000
Subject: [Linux-uvc-devel] UVC Non-module patch
Message-ID: <200703070716.l277Gge5028889@singularity.tronunltd.com>


> > library based on the luvcview v4l2 code .. it looks
promising.  If I get
> > my camera running, I'll give you the USB id's, because
it shows up as
> > unknown.
> 
> The device showing up as "unknown" is not a problem, it
just means that  
> you have a generic UVC device that doesn't need any
special treatment  
> (unlike the few Logitech ones that are hardcoded).
Unfortunately the  
> driver usually has no way of reading a descriptive name
from the device.

Okay, I assumed that all (known) supported devices would be
listed, but by the sounds of it, you're only listing exceptions?
(as in, the special cases)




--
Ian Latter
Late night coder ..
http://midnightcode.org/


From avilella at gmail.com  Wed Mar  7 08:37:09 2007
From: avilella at gmail.com (Albert Vilella)
Date: Wed, 7 Mar 2007 07:37:09 +0000
Subject: [Linux-uvc-devel] HP Pavillion dv6000t Ricoh webcam
In-Reply-To: <369287.202.qm@web31610.mail.mud.yahoo.com>
References: <369287.202.qm@web31610.mail.mud.yahoo.com>
Message-ID: <358f4d650703062337m6b8f02e2h3b66a6c2c454282d@mail.gmail.com>

you probably will be able to use your webcam with this driver:

http://lsb.blogdns.net/ry5u870/

Cheers,

    Albert.

On 3/7/07, Jon Burford <jj_burford at yahoo.com> wrote:
> I have a dv6000t with the Ricoh cam (id 05ca:1810).  I
> was wondering if anyone had any success with a
> firmware upgrade option:
>
> http://www.mail-archive.com/linux-uvc-devel at lists.berlios.de/msg00447.html
>
> or a driver:
>
> http://www.mail-archive.com/linux-uvc-devel at lists.berlios.de/msg00445.html
>
> Thanks in advance!
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From laurent.pinchart at skynet.be  Wed Mar  7 15:40:58 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 7 Mar 2007 15:40:58 +0100
Subject: [Linux-uvc-devel] The source clock
In-Reply-To: <737374.22414.qm@web60513.mail.yahoo.com>
References: <737374.22414.qm@web60513.mail.yahoo.com>
Message-ID: <200703071540.58357.laurent.pinchart@skynet.be>

Hi Paul,

>   This is a great news - it means that stereo system should be easy to do.
> Most likely cause for synchronized (I assume you mean the same values)
> device SOF counters in two Logitech cameras is them being synchronized with
> host SOF counter.

That's what I assumed, yes. I doubt the devices add an offset to the host SOF 
counter.

> Can you compare values in device SOF counter with host SOF counter?

I'll try that.

> Could provide experimental version of the driver placing SRC into timestamp
> structure, so I can read it? I can buy another Logitech camera and do some
> testing on two of them with controlled light source to find out if there is
> any "cheating" about synchronized exposure.

The SCR value increases with each incoming isochronous packet, so it's not 
constant across a video frame.

>   I'm going to order V-Gear TalkCam MX6 and let you know about USB
> descriptors.
>
>   If StartOfFrame interrupt event can't be used, what about reading
> HcFmNumber register repeatedly, storing system time of several hundred
> value change events and doing some statistical processing on that data to
> find out offset between USB frame counter and system time. Again, this is
> relevant only if device and host SOF counters are using the same values.

The falls out of the scope of the Linux UVC driver, as it involves 
modifications in the Linux USB stack. Could you read the USB 2.0 
specification, section 5.12, and tell me if you can think of a way to handle 
PTS jitter/drift (for non-synchronised webcams) and/or to synchronise PTS to 
the host clock (for synchronised webcams) ?

Thanks.

Cheers,

Laurent Pinchart


From monnier at iro.umontreal.ca  Wed Mar  7 17:51:11 2007
From: monnier at iro.umontreal.ca (Stefan Monnier)
Date: Wed, 07 Mar 2007 11:51:11 -0500
Subject: [Linux-uvc-devel] Logitech Orbit apply patch Howto
References: <20070305095846.3534.qmail@web27710.mail.ukl.yahoo.com>
	<jwvfy8i6uhr.fsf-monnier+gmane.linux.drivers.uvc.devel@gnu.org>
Message-ID: <jwvwt1t0znd.fsf-monnier+gmane.linux.drivers.uvc.devel@gnu.org>

>> The patch appears to refer to a file called uvcvideo.c, but I cannot
>> find such a file on my system.

> The source code has been shuffled in the mean time, so it's indeed a bit
> less straightforward.  I currently use the patch below.  Note that I have no
> idea what I'm doing: I'm proficient in C but haven't spent any time trying
> to understand the code of linux-uvc.

> To apply the patch, just do 'patch <thisemail' in the source directory of
> linux-uvc.

> I make no guarantee about this patch at all.  It does seem to improve the
> behavior of my Orbit MP camera, tho.

BTW, is there any hope of seeing something like this patch included in
linux-uvc?  I understand it's a hack, but my webcam is not really usable
without it (and it's a sufficiently common model to warrant special
consideration w.r.t to pan/tilt controls, so why not workarounds).
I guess it could be activated by a module parameter "try_reset_hack".


        Stefan



From pauljurczak at yahoo.com  Thu Mar  8 00:11:04 2007
From: pauljurczak at yahoo.com (Paul Jurczak)
Date: Wed, 7 Mar 2007 15:11:04 -0800 (PST)
Subject: [Linux-uvc-devel] The source clock
Message-ID: <53617.85841.qm@web60522.mail.yahoo.com>

Hi Laurent,

> The SCR value increases with each incoming isochronous packet, so it's not 
> constant across a video frame.

You are right, but this is the only field having device SOF counter value. It is needed to establish correspondence between device internal clock (STC) and device SOF counter. It is not needed every video frame, in fact, single value should be sufficient assuming we know details about STC and SOF counter period/overflow/reload. Value of PTS is probably not a good alternative for synchronizing two devices, because it would be really surprising to see their internal clocks synchronized. All above concerns only experimental driver, it doesn't have to be a part of final driver.

I went through section 5.12 twice and I don't see anything helpful there, in fact it is discouraging. UVC stipulates that compliant devices use Isochronous Asynchronous mode, which means that device internal clock (STC) is free running and doesn't synchronize with USB bus. It is perfectly reasonable, since most users don't care about camera pixel clock being synchronized with USB clock. They care about frame rate being stable and possibly synchronized with audio. It seems that what I described in previous paragraph is the only way to synchronize the device and USB clocks.

Cheers,
Paul




 
____________________________________________________________________________________
TV dinner still cooling? 
Check out "Tonight's Picks" on Yahoo! TV.
http://tv.yahoo.com/


From monnier at iro.umontreal.ca  Fri Mar  9 20:50:00 2007
From: monnier at iro.umontreal.ca (Stefan Monnier)
Date: Fri, 09 Mar 2007 14:50:00 -0500
Subject: [Linux-uvc-devel] i386 luvcview/ekiga with amd64 kernel?
Message-ID: <jwvbqj2kxq9.fsf-monnier+gmane.linux.drivers.uvc.devel@gnu.org>

I recently switched my kernel to use amd64 (while I kept all my user-space
world in plain x86) and now the video in ekiga doesn't work any more.
luvcview fails as well with:

   % ../luvcview-20060920/luvcview 
   uvcview version 0.1.7 
   Video driver: x11
   A window manager is available
   video /dev/video0 
   Error opening device /dev/video0: unable to query device.
    Init v4L2 failed !! exit fatal 
   % 

My /var/log/messages has some more information (see below), but it doesn't
speak to me.  Is that a known problem?  Any hope to see it fixed?


        Stefan


Mar  9 14:43:03 pastel kernel: Linux video capture interface: v2.00
Mar  9 14:43:03 pastel kernel: uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c2)
Mar  9 14:43:03 pastel kernel: usbcore: registered new driver uvcvideo
Mar  9 14:43:03 pastel kernel: USB Video Class driver (v0.1.0)
Mar  9 14:43:11 pastel kernel: ioctl32(ekiga:11869): Unknown cmd fd(22) cmd(80685600){00} arg(fff30898) on /dev/video0
Mar  9 14:43:11 pastel kernel: ioctl32(ekiga:11869): Unknown cmd fd(22) cmd(80685600){00} arg(fff3066c) on /dev/video0
Mar  9 14:43:11 pastel kernel: ioctl32(ekiga:11869): Unknown cmd fd(21) cmd(803c7601){00} arg(fff306c8) on /dev/video0
Mar  9 14:43:11 pastel kernel: ioctl32(ekiga:11869): Unknown cmd fd(26) cmd(80685600){00} arg(fff30918) on /dev/video0
Mar  9 14:43:11 pastel kernel: ioctl32(ekiga:11869): Unknown cmd fd(26) cmd(80685600){00} arg(fff306ec) on /dev/video0
Mar  9 14:43:12 pastel kernel: ioctl32(ekiga:11869): Unknown cmd fd(39) cmd(80685600){00} arg(fff30718) on /dev/video0
Mar  9 14:43:12 pastel kernel: ioctl32(ekiga:11869): Unknown cmd fd(39) cmd(80685600){00} arg(fff304ec) on /dev/video0
Mar  9 14:43:12 pastel kernel: ioctl32(ekiga:11869): Unknown cmd fd(38) cmd(80685600){00} arg(083c07b0) on /dev/video0
Mar  9 14:43:12 pastel kernel: ioctl32(ekiga:11869): Unknown cmd fd(39) cmd(80685600){00} arg(fff30888) on /dev/video0
Mar  9 14:43:12 pastel kernel: ioctl32(ekiga:11869): Unknown cmd fd(39) cmd(80685600){00} arg(fff3065c) on /dev/video0
Mar  9 14:43:36 pastel kernel: ioctl32(luvcview:11896): Unknown cmd fd(5) cmd(80685600){00} arg(0807fa28) on /dev/video0



From nick at customdesigns.ca  Sat Mar 10 09:30:58 2007
From: nick at customdesigns.ca (Nick Wiltshire)
Date: Sat, 10 Mar 2007 01:30:58 -0700
Subject: [Linux-uvc-devel] Kopete status
Message-ID: <200703100130.58766.nick@customdesigns.ca>

Hi all,

I tried to follow kopete-devel but it was a bit too chaotic.

Is there any hope of kopete working with uvc yet? amsn detects the camera but 
also won't let me configure it...I'm still flipping to windows for my webcam 
chatting and I hate it. Help! :)

thanks,
Nick


From contact at alexandredenis.net  Sat Mar 10 11:08:28 2007
From: contact at alexandredenis.net (Alexandre DENIS)
Date: Sat, 10 Mar 2007 11:08:28 +0100
Subject: [Linux-uvc-devel] Kopete status
In-Reply-To: <200703100130.58766.nick@customdesigns.ca>
References: <200703100130.58766.nick@customdesigns.ca>
Message-ID: <200703101108.28925.contact@alexandredenis.net>

Le Sat 10 March 2007, Nick Wiltshire a ?crit :
> Hi all,
>
> I tried to follow kopete-devel but it was a bit too chaotic.
>
> Is there any hope of kopete working with uvc yet?

You can try my patch from 
<http://www.alexandredenis.net/software/kopete-uvc/>. It is supposed to apply 
against Kopete SVN trunk. I get better results with SVN trunk from december 
2006 than with later versions. The bugs are random; actually, Kopete AV 
device support is full of buffer overflows.

A new branch has been started in Kopete SVN with a redesigned AV device 
support, but it is not working yet. You can checkout this branch at 
<svn://anonsvn.kde.org/home/kde/branches/work/kopete/avdevice_overhaul>. My 
patch for UVC support is already integrated in this branch.

-a.



From thoralf_schulze at yahoo.de  Sun Mar 11 19:26:19 2007
From: thoralf_schulze at yahoo.de (Thoralf Schulze)
Date: Sun, 11 Mar 2007 18:26:19 +0000 (GMT)
Subject: [Linux-uvc-devel] colour spaces etc.
Message-ID: <20070311182619.56817.qmail@web27212.mail.ukl.yahoo.com>

hi there,

first of all, thank you very much for the effort you
put into uvc ... it's definitely a good thing to have
a driver that supports modern webcams.

on the other hand, i am having problems to get gem
(see http://gem.iem.at, it is an opengl-plugin for
pure data) to work with linux-uvc. gem does have a
v4l2-interface, and it seems to be capable to
communicate with a logitech quickcam pro 5000 via uvc,
according to its status messages:

video driver 0: video4linux2
video driver 1: video4linux
video driver 2: ieee1394 for linux
startTransfer: 0
start transfer
device: /dev/video0
wanted 6408, got 'RGB4' 
error: should exit!
error: unknown format 'MJPG'
changed size from 64x64 to 160x120
buf.index==0
buf.index==1
buf.index==2
buf.index==3
format: MJPG -> 6408
colorconvert=1
waiting for thread to come up
GEM: pix_video: Opened video connection 0x6

but that's about it, i cannot get the stream to show
up.
gem operates in a rgb colour space by default (rgb24,
iirc) and is also capable of handle yuv. according to
the messages above, uvc sends mpjeg-data instead of
yuv - so my question is: is there any way of changing
the default behaviour of uvc to send yuv-data instead?

while investigating this issue, i came across a post
in the uvc forums
(http://developer.berlios.de/forum/message.php?msg_id=35853)
about a patch that appearently adds support of the
rgb24 colour space to uvc. is there any chance of
getting this integrated into uvc?

thank you very much,
thoralf.


	
	
		
___________________________________________________________ 
New Yahoo! Mail is the ultimate force in competitive emailing. Find out more at the Yahoo! Mail Championships. Plus: play games and win prizes. 
http://uk.rd.yahoo.com/evt=44106/*http://mail.yahoo.net/uk 


From Privat_one at gmx.de  Sun Mar 11 19:38:53 2007
From: Privat_one at gmx.de (Dirk Wesenberg)
Date: Sun, 11 Mar 2007 19:38:53 +0100
Subject: [Linux-uvc-devel] Logitech Sphere MP 0x08cc does not create
	/dev/video
Message-ID: <200703111938.54700.Privat_one@gmx.de>

Hello,
I have read some information in the mail-list, but I have not found any 
solution.
I have download all files from the daily trunk and here are the information 
about the system. If I connect a Philips.-Cam; PWC is loaded and 
a /dev/video0 is avail  linked to /dev/video ... 
If I connect the Logitech, all looks like ok, but no /dev/video is avail - pls 
see into the information ... Maybe its a peoblem ,that the manufactor is not 
set ?

Does someone have any infos/help  for me? THX a lot !

The Webcam Logitech Sphere MP ( 0x08cc ) is connected direkt at an USB-Port. 
The printer ans scanner are connected via USB-HUB

Platform : PPC ( Buffalo Linkstation with freelink ( Debian 2.6.20.2 )

LinkStation:~# uname -a
Linux LinkStation 2.6.20.2-kuroboxHG #11 Sat Mar 10 16:14:13 CET 2007 ppc 
GNU/Linux
LinkStation:~#         


<Disconnect WebCam>

LinkStation:~# dmesg -c
...
...

LinkStation:~# modprobe -r uvcvideo
LinkStation:~#
LinkStation:~#
LinkStation:~#
LinkStation:~#
LinkStation:~# modprobe uvcvideo trace=15
LinkStation:~# dmesg
usbcore: deregistering interface driver uvcvideo
Linux video capture interface: v2.00
uvcvideo: Adding mapping Brightness to control 
00000000-0000-0000-0000-000000000
101/2.
uvcvideo: Adding mapping Contrast to control 
00000000-0000-0000-0000-00000000010
1/3.
uvcvideo: Adding mapping Hue to control 
00000000-0000-0000-0000-000000000101/6.
uvcvideo: Adding mapping Saturation to control 
00000000-0000-0000-0000-000000000
101/7.
uvcvideo: Adding mapping Sharpness to control 
00000000-0000-0000-0000-0000000001
01/8.
uvcvideo: Adding mapping Gamma to control 
00000000-0000-0000-0000-000000000101/9                                                                             .
uvcvideo: Adding mapping Backlight Compensation to control 
00000000-0000-0000-00                                                                             
00-000000000101/1.
uvcvideo: Adding mapping Gain to control 
00000000-0000-0000-0000-000000000101/4.
uvcvideo: Adding mapping Power Line Frequency to control 
00000000-0000-0000-0000                                                                             -000000000101/5.
uvcvideo: Adding mapping Hue, Auto to control 
00000000-0000-0000-0000-0000000001                                                                             
01/16.
uvcvideo: Adding mapping Pan (relative) to control 
63610682-5070-49ab-b8cc-b3855                                                                             
e8d2256/1.
uvcvideo: Adding mapping Tilt (relative) to control 
63610682-5070-49ab-b8cc-b385                                                                             
5e8d2256/1.
uvcvideo: Adding mapping Pan/Tilt (reset) to control 
63610682-5070-49ab-b8cc-b38                                                                             
55e8d2256/2.
uvcvideo: Adding mapping Exposure, Auto to control 
00000000-0000-0000-0000-00000                                                                             
0000001/2.
uvcvideo: Adding mapping Exposure (Absolute) to control 
00000000-0000-0000-0000-                                                                             
000000000001/4.
uvcvideo: Adding mapping White Balance Temperature, Auto to control 
00000000-000                                                                             
0-0000-0000-000000000101/11.
uvcvideo: Adding mapping White Balance Temperature to control 
00000000-0000-0000                                                                             -0000-000000000101/10.
usbcore: registered new interface driver uvcvideo
USB Video Class driver (v0.1.0)
LinkStation:~#
...
...
...
LinkStation:~# dmesg -c
...
...
<Conneting now the camera >

LinkStation:~# dmesg
usb 1-1: new high speed USB device using ehci_hcd and address 8
usb 1-1: configuration #1 chosen from 1 choice
uvcvideo: Probing generic UVC device 1
uvcvideo: Found format MJPEG.
uvcvideo: - 160x120 (30.0 fps)
uvcvideo: - 176x144 (30.0 fps)
uvcvideo: - 320x240 (15.0 fps)
uvcvideo: - 352x288 (15.0 fps)
uvcvideo: - 640x480 (15.0 fps)
uvcvideo: - 960x720 (15.0 fps)
uvcvideo: Found format Uncompressed.
uvcvideo: - 160x120 (30.0 fps)
uvcvideo: - 176x144 (30.0 fps)
uvcvideo: - 320x240 (15.0 fps)
uvcvideo: - 352x288 (15.0 fps)
uvcvideo: - 640x480 (15.0 fps)
uvcvideo: - 960x720 (10.0 fps)
uvcvideo: - 1280x960 (7.5 fps)
uvcvideo: Found a Status endpoint (addr 87).
uvcvideo: Found UVC 1.00 device <unnamed> (046d:08cc)
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/2 to device 1 
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/3 to device 1 
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/7 to device 1 
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/8 to device 1 
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/1 to device 1 
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/4 to device 1 
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/5 to device 1 
entity 2
uvcvideo: Added control 63610682-5070-49ab-b8cc-b3855e8d2256/1 to device 1 
entity 9
uvcvideo: Added control 63610682-5070-49ab-b8cc-b3855e8d2256/2 to device 1 
entity 9
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/2 to device 1 
entity 1
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/4 to device 1 
entity 1
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/11 to device 1 
entity 2
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/10 to device 1 
entity 2
uvcvideo: Scanning UVC chain: OT 5 (-> 12 8 10 11 9) <- Unit 4 (-> 13) <- Unit 
3 <- Unit 2 <- IT 1
uvcvideo: Found a valid video chain (1 -> 5).
uvcvideo: UVC device initialized.
LinkStation:~#                                                                         
...
...
...
LinkStation:~# lsusb
Bus 003 Device 001: ID 0000:0000
Bus 002 Device 001: ID 0000:0000
Bus 001 Device 008: ID 046d:08cc Logitech, Inc.
Bus 001 Device 007: ID 04a9:220e Canon, Inc. CanoScan N1240U/LiDE 30
Bus 001 Device 005: ID 04a9:105b Canon, Inc. S600 Printer
Bus 001 Device 003: ID 0409:0058 NEC Corp. HighSpeed Hub
Bus 001 Device 001: ID 0000:0000
LinkStation:~#
...
...
...
LinkStation:~# cat /proc/bus/usb/devices

T:  Bus=03 Lev=00 Prnt=00 Port=00 Cnt=00 Dev#=  1 Spd=12  MxCh= 2
B:  Alloc=  0/900 us ( 0%), #Int=  0, #Iso=  0
D:  Ver= 1.10 Cls=09(hub  ) Sub=00 Prot=00 MxPS=64 #Cfgs=  1
P:  Vendor=0000 ProdID=0000 Rev= 2.06
S:  Manufacturer=Linux 2.6.20.2-kuroboxHG ohci_hcd
S:  Product=OHCI Host Controller
S:  SerialNumber=0000:00:0e.1
C:* #Ifs= 1 Cfg#= 1 Atr=e0 MxPwr=  0mA
I:  If#= 0 Alt= 0 #EPs= 1 Cls=09(hub  ) Sub=00 Prot=00 Driver=hub
E:  Ad=81(I) Atr=03(Int.) MxPS=   2 Ivl=255ms

T:  Bus=02 Lev=00 Prnt=00 Port=00 Cnt=00 Dev#=  1 Spd=12  MxCh= 3
B:  Alloc=  0/900 us ( 0%), #Int=  0, #Iso=  0
D:  Ver= 1.10 Cls=09(hub  ) Sub=00 Prot=00 MxPS=64 #Cfgs=  1
P:  Vendor=0000 ProdID=0000 Rev= 2.06
S:  Manufacturer=Linux 2.6.20.2-kuroboxHG ohci_hcd
S:  Product=OHCI Host Controller
S:  SerialNumber=0000:00:0e.0
C:* #Ifs= 1 Cfg#= 1 Atr=e0 MxPwr=  0mA
I:  If#= 0 Alt= 0 #EPs= 1 Cls=09(hub  ) Sub=00 Prot=00 Driver=hub
E:  Ad=81(I) Atr=03(Int.) MxPS=   2 Ivl=255ms

T:  Bus=01 Lev=00 Prnt=00 Port=00 Cnt=00 Dev#=  1 Spd=480 MxCh= 5
B:  Alloc=  0/800 us ( 0%), #Int=  2, #Iso=  0
D:  Ver= 2.00 Cls=09(hub  ) Sub=00 Prot=01 MxPS=64 #Cfgs=  1
P:  Vendor=0000 ProdID=0000 Rev= 2.06
S:  Manufacturer=Linux 2.6.20.2-kuroboxHG ehci_hcd
S:  Product=EHCI Host Controller
S:  SerialNumber=0000:00:0e.2
C:* #Ifs= 1 Cfg#= 1 Atr=e0 MxPwr=  0mA
I:  If#= 0 Alt= 0 #EPs= 1 Cls=09(hub  ) Sub=00 Prot=00 Driver=hub
E:  Ad=81(I) Atr=03(Int.) MxPS=   4 Ivl=256ms

T:  Bus=01 Lev=01 Prnt=01 Port=00 Cnt=01 Dev#=  8 Spd=480 MxCh= 0
D:  Ver= 2.00 Cls=ef(unk. ) Sub=02 Prot=01 MxPS=64 #Cfgs=  1
P:  Vendor=046d ProdID=08cc Rev= 0.05
S:  SerialNumber=6386D8A5
C:* #Ifs= 4 Cfg#= 1 Atr=80 MxPwr=500mA
I:  If#= 0 Alt= 0 #EPs= 1 Cls=0e(unk. ) Sub=01 Prot=00 Driver=uvcvideo
E:  Ad=87(I) Atr=03(Int.) MxPS=  16 Ivl=16ms
I:  If#= 1 Alt= 0 #EPs= 0 Cls=0e(unk. ) Sub=02 Prot=00 Driver=uvcvideo
I:  If#= 1 Alt= 1 #EPs= 1 Cls=0e(unk. ) Sub=02 Prot=00 Driver=uvcvideo
E:  Ad=81(I) Atr=05(Isoc) MxPS= 192 Ivl=125us
I:  If#= 1 Alt= 2 #EPs= 1 Cls=0e(unk. ) Sub=02 Prot=00 Driver=uvcvideo
E:  Ad=81(I) Atr=05(Isoc) MxPS= 384 Ivl=125us
I:  If#= 1 Alt= 3 #EPs= 1 Cls=0e(unk. ) Sub=02 Prot=00 Driver=uvcvideo
E:  Ad=81(I) Atr=05(Isoc) MxPS= 512 Ivl=125us
I:  If#= 1 Alt= 4 #EPs= 1 Cls=0e(unk. ) Sub=02 Prot=00 Driver=uvcvideo
E:  Ad=81(I) Atr=05(Isoc) MxPS= 640 Ivl=125us
I:  If#= 1 Alt= 5 #EPs= 1 Cls=0e(unk. ) Sub=02 Prot=00 Driver=uvcvideo
E:  Ad=81(I) Atr=05(Isoc) MxPS= 800 Ivl=125us
I:  If#= 1 Alt= 6 #EPs= 1 Cls=0e(unk. ) Sub=02 Prot=00 Driver=uvcvideo
E:  Ad=81(I) Atr=05(Isoc) MxPS= 944 Ivl=125us
I:  If#= 1 Alt= 7 #EPs= 1 Cls=0e(unk. ) Sub=02 Prot=00 Driver=uvcvideo
E:  Ad=81(I) Atr=05(Isoc) MxPS=1280 Ivl=125us
I:  If#= 1 Alt= 8 #EPs= 1 Cls=0e(unk. ) Sub=02 Prot=00 Driver=uvcvideo
E:  Ad=81(I) Atr=05(Isoc) MxPS=1600 Ivl=125us
I:  If#= 1 Alt= 9 #EPs= 1 Cls=0e(unk. ) Sub=02 Prot=00 Driver=uvcvideo
E:  Ad=81(I) Atr=05(Isoc) MxPS=1984 Ivl=125us
I:  If#= 1 Alt=10 #EPs= 1 Cls=0e(unk. ) Sub=02 Prot=00 Driver=uvcvideo
E:  Ad=81(I) Atr=05(Isoc) MxPS=2688 Ivl=125us
I:  If#= 1 Alt=11 #EPs= 1 Cls=0e(unk. ) Sub=02 Prot=00 Driver=uvcvideo
E:  Ad=81(I) Atr=05(Isoc) MxPS=3060 Ivl=125us
I:  If#= 2 Alt= 0 #EPs= 0 Cls=01(audio) Sub=01 Prot=00 Driver=snd-usb-audio
I:  If#= 3 Alt= 0 #EPs= 0 Cls=01(audio) Sub=02 Prot=00 Driver=snd-usb-audio
I:  If#= 3 Alt= 1 #EPs= 1 Cls=01(audio) Sub=02 Prot=00 Driver=snd-usb-audio
E:  Ad=86(I) Atr=05(Isoc) MxPS=   0 Ivl=1ms
I:  If#= 3 Alt= 2 #EPs= 1 Cls=01(audio) Sub=02 Prot=00 Driver=snd-usb-audio
E:  Ad=86(I) Atr=05(Isoc) MxPS=   0 Ivl=1ms
I:  If#= 3 Alt= 3 #EPs= 1 Cls=01(audio) Sub=02 Prot=00 Driver=snd-usb-audio
E:  Ad=86(I) Atr=05(Isoc) MxPS=  48 Ivl=1ms

T:  Bus=01 Lev=01 Prnt=01 Port=01 Cnt=02 Dev#=  3 Spd=480 MxCh= 4
D:  Ver= 2.00 Cls=09(hub  ) Sub=00 Prot=01 MxPS=64 #Cfgs=  1
P:  Vendor=0409 ProdID=0058 Rev= 1.00
S:  Manufacturer=NEC Corporation
S:  Product=USB2.0 Hub Controller
C:* #Ifs= 1 Cfg#= 1 Atr=e0 MxPwr=100mA
I:  If#= 0 Alt= 0 #EPs= 1 Cls=09(hub  ) Sub=00 Prot=00 Driver=hub
E:  Ad=81(I) Atr=03(Int.) MxPS=   1 Ivl=256ms

T:  Bus=01 Lev=02 Prnt=03 Port=01 Cnt=01 Dev#=  7 Spd=12  MxCh= 0
D:  Ver= 1.10 Cls=ff(vend.) Sub=00 Prot=ff MxPS= 8 #Cfgs=  1
P:  Vendor=04a9 ProdID=220e Rev= 1.00
S:  Manufacturer=Canon
S:  Product=CanoScan
C:* #Ifs= 1 Cfg#= 1 Atr=a0 MxPwr=500mA
I:  If#= 0 Alt= 0 #EPs= 3 Cls=ff(vend.) Sub=00 Prot=ff Driver=(none)
E:  Ad=81(I) Atr=03(Int.) MxPS=   1 Ivl=16ms
E:  Ad=82(I) Atr=02(Bulk) MxPS=  64 Ivl=0ms
E:  Ad=03(O) Atr=02(Bulk) MxPS=  64 Ivl=0ms

T:  Bus=01 Lev=02 Prnt=03 Port=03 Cnt=02 Dev#=  5 Spd=12  MxCh= 0
D:  Ver= 1.10 Cls=00(>ifc ) Sub=00 Prot=00 MxPS= 8 #Cfgs=  1
P:  Vendor=04a9 ProdID=105b Rev= 2.20
S:  Manufacturer=Canon
S:  Product=S600
S:  SerialNumber=566Avg
C:* #Ifs= 1 Cfg#= 1 Atr=c0 MxPwr=  2mA
I:  If#= 0 Alt= 0 #EPs= 2 Cls=07(print) Sub=01 Prot=02 Driver=usblp
E:  Ad=01(O) Atr=02(Bulk) MxPS=  64 Ivl=0ms
E:  Ad=82(I) Atr=02(Bulk) MxPS=  64 Ivl=0ms
LinkStation:~#           
...
...
LinkStation:~# cat /dev/video[0-9]
cat: /dev/video0: No such device
cat: /dev/video1: No such device
cat: /dev/video2: No such device
cat: /dev/video3: No such device
cat: /dev/video4: No such device
cat: /dev/video5: No such device
cat: /dev/video6: No such device
cat: /dev/video7: No such device
cat: /dev/video8: No such device
cat: /dev/video9: No such device
LinkStation:~# cat /dev/video
cat: /dev/video: No such device
LinkStation:~#
...
...
...    
Syslog :
Mar 11 19:14:51 LinkStation kernel: usb 1-1: USB disconnect, address 6
Mar 11 19:15:22 LinkStation kernel: usbcore: deregistering interface driver 
uvcvideo
Mar 11 19:15:35 LinkStation kernel: Linux video capture interface: v2.00
Mar 11 19:15:35 LinkStation kernel: uvcvideo: Adding mapping Brightness to 
control 00000000-0000-0000-0000-000000000101/2.
Mar 11 19:15:35 LinkStation kernel: uvcvideo: Adding mapping Contrast to 
control 00000000-0000-0000-0000-000000000101/3.
Mar 11 19:15:35 LinkStation kernel: uvcvideo: Adding mapping Hue to control 
00000000-0000-0000-0000-000000000101/6.
Mar 11 19:15:35 LinkStation kernel: uvcvideo: Adding mapping Saturation to 
control 00000000-0000-0000-0000-000000000101/7.
Mar 11 19:15:35 LinkStation kernel: uvcvideo: Adding mapping Sharpness to 
control 00000000-0000-0000-0000-000000000101/8.
Mar 11 19:15:35 LinkStation kernel: uvcvideo: Adding mapping Gamma to control 
00000000-0000-0000-0000-000000000101/9.
Mar 11 19:15:35 LinkStation kernel: uvcvideo: Adding mapping Backlight 
Compensation to control 00000000-0000-0000-0000-000000000101/1.
Mar 11 19:15:35 LinkStation kernel: uvcvideo: Adding mapping Gain to control 
00000000-0000-0000-0000-000000000101/4.
Mar 11 19:15:35 LinkStation kernel: uvcvideo: Adding mapping Power Line 
Frequency to control 00000000-0000-0000-0000-000000000101/5.
Mar 11 19:15:35 LinkStation kernel: uvcvideo: Adding mapping Hue, Auto to 
control 00000000-0000-0000-0000-000000000101/16.
Mar 11 19:15:35 LinkStation kernel: uvcvideo: Adding mapping Pan (relative) to 
control 63610682-5070-49ab-b8cc-b3855e8d2256/1.
Mar 11 19:15:35 LinkStation kernel: uvcvideo: Adding mapping Tilt (relative) 
to control 63610682-5070-49ab-b8cc-b3855e8d2256/1.
Mar 11 19:15:35 LinkStation kernel: uvcvideo: Adding mapping Pan/Tilt (reset) 
to control 63610682-5070-49ab-b8cc-b3855e8d2256/2.
Mar 11 19:15:35 LinkStation kernel: uvcvideo: Adding mapping Exposure, Auto to 
control 00000000-0000-0000-0000-000000000001/2.
Mar 11 19:15:35 LinkStation kernel: uvcvideo: Adding mapping Exposure 
(Absolute) to control 00000000-0000-0000-0000-000000000001/4.
Mar 11 19:15:35 LinkStation kernel: uvcvideo: Adding mapping White Balance 
Temperature, Auto to control 00000000-0000-0000-0000-000000000101/11.
Mar 11 19:15:35 LinkStation kernel: uvcvideo: Adding mapping White Balance 
Temperature to control 00000000-0000-0000-0000-000000000101/10.
Mar 11 19:15:35 LinkStation kernel: usbcore: registered new interface driver 
uvcvideo
Mar 11 19:15:35 LinkStation kernel: USB Video Class driver (v0.1.0)
Mar 11 19:17:02 LinkStation /USR/SBIN/CRON[3936]: (root) CMD 
(   /etc/init.d/ntpdate restart)
Mar 11 19:17:02 LinkStation /USR/SBIN/CRON[3937]: (root) CMD (   
run-parts --report /etc/cron.hourly)
Mar 11 19:16:35 LinkStation ntpdate[3939]: step time server 82.165.184.7 
offset -27.248373 sec
Mar 11 19:18:57 LinkStation kernel: usb 1-1: new high speed USB device using 
ehci_hcd and address 8
Mar 11 19:18:58 LinkStation kernel: usb 1-1: configuration #1 chosen from 1 
choice
Mar 11 19:18:58 LinkStation kernel: uvcvideo: Probing generic UVC device 1
Mar 11 19:18:59 LinkStation kernel: uvcvideo: Found format MJPEG.
Mar 11 19:18:59 LinkStation kernel: uvcvideo: - 160x120 (30.0 fps)
Mar 11 19:18:59 LinkStation kernel: uvcvideo: - 176x144 (30.0 fps)
Mar 11 19:18:59 LinkStation kernel: uvcvideo: - 320x240 (15.0 fps)
Mar 11 19:18:59 LinkStation kernel: uvcvideo: - 352x288 (15.0 fps)
Mar 11 19:18:59 LinkStation kernel: uvcvideo: - 640x480 (15.0 fps)
Mar 11 19:18:59 LinkStation kernel: uvcvideo: - 960x720 (15.0 fps)
Mar 11 19:18:59 LinkStation kernel: uvcvideo: Found format Uncompressed.
Mar 11 19:18:59 LinkStation kernel: uvcvideo: - 160x120 (30.0 fps)
Mar 11 19:18:59 LinkStation kernel: uvcvideo: - 176x144 (30.0 fps)
Mar 11 19:18:59 LinkStation kernel: uvcvideo: - 320x240 (15.0 fps)
Mar 11 19:18:59 LinkStation kernel: uvcvideo: - 352x288 (15.0 fps)
Mar 11 19:18:59 LinkStation kernel: uvcvideo: - 640x480 (15.0 fps)
Mar 11 19:18:59 LinkStation kernel: uvcvideo: - 960x720 (10.0 fps)
Mar 11 19:18:59 LinkStation kernel: uvcvideo: - 1280x960 (7.5 fps)
Mar 11 19:18:59 LinkStation kernel: uvcvideo: Found a Status endpoint (addr 
87).
Mar 11 19:18:59 LinkStation kernel: uvcvideo: Found UVC 1.00 device <unnamed> 
(046d:08cc)
Mar 11 19:18:59 LinkStation kernel: uvcvideo: Added control 
00000000-0000-0000-0000-000000000101/2 to device 1 entity 2
Mar 11 19:18:59 LinkStation kernel: uvcvideo: Added control 
00000000-0000-0000-0000-000000000101/3 to device 1 entity 2
Mar 11 19:18:59 LinkStation kernel: uvcvideo: Added control 
00000000-0000-0000-0000-000000000101/7 to device 1 entity 2
Mar 11 19:18:59 LinkStation kernel: uvcvideo: Added control 
00000000-0000-0000-0000-000000000101/8 to device 1 entity 2
Mar 11 19:18:59 LinkStation kernel: uvcvideo: Added control 
00000000-0000-0000-0000-000000000101/1 to device 1 entity 2
Mar 11 19:18:59 LinkStation kernel: uvcvideo: Added control 
00000000-0000-0000-0000-000000000101/4 to device 1 entity 2
Mar 11 19:18:59 LinkStation kernel: uvcvideo: Added control 
00000000-0000-0000-0000-000000000101/5 to device 1 entity 2
Mar 11 19:18:59 LinkStation kernel: uvcvideo: Added control 
63610682-5070-49ab-b8cc-b3855e8d2256/1 to device 1 entity 9
Mar 11 19:18:59 LinkStation kernel: uvcvideo: Added control 
63610682-5070-49ab-b8cc-b3855e8d2256/2 to device 1 entity 9
Mar 11 19:18:59 LinkStation kernel: uvcvideo: Added control 
00000000-0000-0000-0000-000000000001/2 to device 1 entity 1
Mar 11 19:18:59 LinkStation kernel: uvcvideo: Added control 
00000000-0000-0000-0000-000000000001/4 to device 1 entity 1
Mar 11 19:18:59 LinkStation kernel: uvcvideo: Added control 
00000000-0000-0000-0000-000000000101/11 to device 1 entity 2
Mar 11 19:18:59 LinkStation kernel: uvcvideo: Added control 
00000000-0000-0000-0000-000000000101/10 to device 1 entity 2
Mar 11 19:18:59 LinkStation kernel: uvcvideo: Scanning UVC chain: OT 5 (-> 12 
8 10 11 9) <- Unit 4 (-> 13) <- Unit 3 <- Unit 2 <- IT 1
Mar 11 19:18:59 LinkStation kernel: uvcvideo: Found a valid video chain (1 -> 
5).
Mar 11 19:18:59 LinkStation kernel: uvcvideo: UVC device initialized.
Mar 11 19:19:33 LinkStation usb.agent[4020]:      uvcvideo: already loaded
Mar 11 19:19:41 LinkStation usb.agent[4092]:      snd-usb-audio: already 
loaded
LinkStation:/var/log#                                                               










From Privat_one at gmx.de  Sun Mar 11 23:02:22 2007
From: Privat_one at gmx.de (Dirk Wesenberg)
Date: Sun, 11 Mar 2007 23:02:22 +0100
Subject: [Linux-uvc-devel] Compiler Warning with undefined!
Message-ID: <200703112302.22674.Privat_one@gmx.de>

  
Whats going wrong ?
During new compile I get following error(warning) messages:
THX for your help !

LinkStation:/usr/local/src/logi# export ARCH=ppc
LinkStation:/usr/local/src/logi# make
Building USB Video Class driver...
make[1]: Entering directory `/mnt/usr/src/linux-2.6.20-2'
  CC [M]  /mnt/usr/local/src/logi/uvc_driver.o
  CC [M]  /mnt/usr/local/src/logi/uvc_queue.o
  CC [M]  /mnt/usr/local/src/logi/uvc_v4l2.o
  CC [M]  /mnt/usr/local/src/logi/uvc_video.o
/mnt/usr/local/src/logi/uvc_video.c: In function `uvc_video_enable':
/mnt/usr/local/src/logi/uvc_video.c:713: warning: `ep' might be used 
uninitialized in this function
  CC [M]  /mnt/usr/local/src/logi/uvc_ctrl.o
  LD [M]  /mnt/usr/local/src/logi/uvcvideo.o
  Building modules, stage 2.
  MODPOST 1 modules
WARNING: "video_device_release" [/mnt/usr/local/src/logi/uvcvideo.ko] 
undefined!
WARNING: "video_usercopy" [/mnt/usr/local/src/logi/uvcvideo.ko] undefined!
WARNING: "video_register_device" [/mnt/usr/local/src/logi/uvcvideo.ko] 
undefined!
WARNING: "video_device_alloc" [/mnt/usr/local/src/logi/uvcvideo.ko] undefined!
WARNING: "video_unregister_device" [/mnt/usr/local/src/logi/uvcvideo.ko] 
undefined!
WARNING: "v4l_printk_ioctl" [/mnt/usr/local/src/logi/uvcvideo.ko] undefined!
WARNING: "video_devdata" [/mnt/usr/local/src/logi/uvcvideo.ko] undefined!
WARNING: "v4l_compat_translate_ioctl" [/mnt/usr/local/src/logi/uvcvideo.ko] 
undefined!
  CC      /mnt/usr/local/src/logi/uvcvideo.mod.o
  LD [M]  /mnt/usr/local/src/logi/uvcvideo.ko
make[1]: Leaving directory `/mnt/usr/src/linux-2.6.20-2'
LinkStation:/usr/local/src/logi#                           


From ian.latter at midnightcode.org  Mon Mar 12 03:05:14 2007
From: ian.latter at midnightcode.org (Ian Latter)
Date: Mon, 12 Mar 2007 12:05:14 +1000
Subject: [Linux-uvc-devel] UVC Non-module patch
Message-ID: <200703120105.l2C15EVI014533@singularity.tronunltd.com>


Hello,


  Following up on a mix of comments that I made on and off list last 
week, and recent understandings;

  1) I've integrated what user-space support I need into 
      libMidnightCode.  Thus, for future reference and other than
      luvcview, see libmidnightcode-1.3 via midnightcode-camera.c
      for basic V4L(v2) UVC Camera control, and see application
      set libmidnightcode-apps-1.3 via camera.c for a basic grab
      program using that library code (GNU/ANSI C);
        http://midnightcode.org/projects/libmidnightcode/

  2) The Logitec Sphere 2006 USB ID is 046d:08cc, per the console
      output;
         uvcvideo: Found UVC 1.00 device <unnamed> (046d:08cc)

  3) The MJPG (Motion JPEG) output that comes natively from the
      camera (that I'm using) can be played back using mplayer *IF*
      the file has the "mjpg" or "mjpeg" extension.

  4) Also using libavcodec, mencoder can convert the MJPG format
      into more appropriate formats - here is a DIVX / XVID example;
        mencoder camera.mjpeg  -ovc lavc -lavcopts vcodec=xvid 
        -oac copy -o output.divx


  Note to other implementors;

  I was doing experiments to see if I could avoid implementing a 
native/internal transcode function, and was rather hoping to use 
libavcodec, hence the experiments above.  This looks like it will work,
however as it turns out, my embedded platform will not have the 
processing power required to do on-board transcoding, so mencoder
on another platform will probably suit me in the long run.

  The new library was posted up last night - it is released under
GPLv2.


  I have successfully captured video (and no audio) at 320x240x15,
320x240x30, 640x480x15 and 640x480x30, on this setup 
(hardware and software mentioned above), and converted those
MJPEG streams to DIVX (at about 1/3 the original size).





----- Original Message -----
>From: "Ian Latter" <ian.latter at midnightcode.org>
>To: "Martin Rubli" <linux at rubli.info>
>Subject:  Re: [Linux-uvc-devel] UVC Non-module patch
>Date: Thu, 08 Mar 2007 01:16:42 +1000
>
> 
> > > library based on the luvcview v4l2 code .. it looks
> promising.  If I get
> > > my camera running, I'll give you the USB id's, because
> it shows up as
> > > unknown.
> > 
> > The device showing up as "unknown" is not a problem, it
> just means that  
> > you have a generic UVC device that doesn't need any
> special treatment  
> > (unlike the few Logitech ones that are hardcoded).
> Unfortunately the  
> > driver usually has no way of reading a descriptive name
> from the device.
> 
> Okay, I assumed that all (known) supported devices would be
> listed, but by the sounds of it, you're only listing exceptions?
> (as in, the special cases)
> 
> 
> 
> 
> --
> Ian Latter
> Late night coder ..
> http://midnightcode.org/
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 


--
Ian Latter
Late night coder ..
http://midnightcode.org/


From laurent.pinchart at skynet.be  Mon Mar 12 12:20:24 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 12 Mar 2007 12:20:24 +0100
Subject: [Linux-uvc-devel] Compiler Warning with undefined!
In-Reply-To: <200703112302.22674.Privat_one@gmx.de>
References: <200703112302.22674.Privat_one@gmx.de>
Message-ID: <200703121220.24268.laurent.pinchart@skynet.be>

> Whats going wrong ?
> During new compile I get following error(warning) messages:
> THX for your help !

You probably haven't enabled V4L support in your kernel.

Laurent Pinchart

> LinkStation:/usr/local/src/logi# export ARCH=ppc
> LinkStation:/usr/local/src/logi# make
> Building USB Video Class driver...
> make[1]: Entering directory `/mnt/usr/src/linux-2.6.20-2'
>   CC [M]  /mnt/usr/local/src/logi/uvc_driver.o
>   CC [M]  /mnt/usr/local/src/logi/uvc_queue.o
>   CC [M]  /mnt/usr/local/src/logi/uvc_v4l2.o
>   CC [M]  /mnt/usr/local/src/logi/uvc_video.o
> /mnt/usr/local/src/logi/uvc_video.c: In function `uvc_video_enable':
> /mnt/usr/local/src/logi/uvc_video.c:713: warning: `ep' might be used
> uninitialized in this function
>   CC [M]  /mnt/usr/local/src/logi/uvc_ctrl.o
>   LD [M]  /mnt/usr/local/src/logi/uvcvideo.o
>   Building modules, stage 2.
>   MODPOST 1 modules
> WARNING: "video_device_release" [/mnt/usr/local/src/logi/uvcvideo.ko]
> undefined!
> WARNING: "video_usercopy" [/mnt/usr/local/src/logi/uvcvideo.ko] undefined!
> WARNING: "video_register_device" [/mnt/usr/local/src/logi/uvcvideo.ko]
> undefined!
> WARNING: "video_device_alloc" [/mnt/usr/local/src/logi/uvcvideo.ko]
> undefined! WARNING: "video_unregister_device"
> [/mnt/usr/local/src/logi/uvcvideo.ko] undefined!
> WARNING: "v4l_printk_ioctl" [/mnt/usr/local/src/logi/uvcvideo.ko]
> undefined! WARNING: "video_devdata" [/mnt/usr/local/src/logi/uvcvideo.ko]
> undefined! WARNING: "v4l_compat_translate_ioctl"
> [/mnt/usr/local/src/logi/uvcvideo.ko] undefined!
>   CC      /mnt/usr/local/src/logi/uvcvideo.mod.o
>   LD [M]  /mnt/usr/local/src/logi/uvcvideo.ko
> make[1]: Leaving directory `/mnt/usr/src/linux-2.6.20-2'
> LinkStation:/usr/local/src/logi#
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel


From whytheheckareyou at hotmail.com  Thu Mar 15 01:30:48 2007
From: whytheheckareyou at hotmail.com (Sameer Tewar)
Date: Wed, 14 Mar 2007 19:30:48 -0500
Subject: [Linux-uvc-devel] installation error
Message-ID: <BAY132-F16B8CFD5CE3C618A4B7E09C0720@phx.gbl>

Hello,

When I try to do insert the uvc module it gives me the following error

[root at localhost trunk]# modprobe uvcvideo
FATAL: Error inserting uvcvideo 
(/lib/modules/2.6.18-1.2868.fc6/trunk/uvcvideo.ko): Invalid module format
[root at localhost trunk]#


when I do dmesg it says the following

uvcvideo: version magic '2.6.18-1.2798.fc6 SMP mod_unload 586 REGPARM 
4KSTACKS gcc-4.1' should be '2.6.18-1.2868.fc6 SMP mod_unload 686 REGPARM 
4KSTACKS gcc-4.1'
[root at localhost trunk]#

which file generates the uvcvideo.ko and writes the kernel info etc in it? 
Any idea on how to fix this error?

Sameer.

_________________________________________________________________
Your Space. Your Friends. Your Stories. Share your world with Windows Live 
Spaces. http://spaces.live.com/?mkt=en-ca



From jasny at vidsoft.de  Thu Mar 15 09:27:20 2007
From: jasny at vidsoft.de (Gregor Jasny)
Date: Thu, 15 Mar 2007 09:27:20 +0100
Subject: [Linux-uvc-devel] installation error
In-Reply-To: <BAY132-F16B8CFD5CE3C618A4B7E09C0720@phx.gbl>
References: <BAY132-F16B8CFD5CE3C618A4B7E09C0720@phx.gbl>
Message-ID: <45F90368.2090805@vidsoft.de>

Hi,

Sameer Tewar schrieb:
 > when I do dmesg it says the following
 >
 > uvcvideo: version magic '2.6.18-1.2798.fc6 SMP mod_unload 586 REGPARM
 > 4KSTACKS gcc-4.1' should be '2.6.18-1.2868.fc6 SMP mod_unload 686 REGPARM
 > 4KSTACKS gcc-4.1'

Your running kernel and the kernel headers differ in their version (2798 
-> 2868). Also the configuration has changed (586->686).
Make sure you're using the kernel headers of the running kernel with its 
config.

Cheers,
Gregor


From dieter.rogiest at telenet.be  Fri Mar 16 00:03:57 2007
From: dieter.rogiest at telenet.be (Dieter Rogiest)
Date: Fri, 16 Mar 2007 00:03:57 +0100
Subject: [Linux-uvc-devel] How to reset Quickcam Fusion if it locks up (USB
	timing bug in hardware)?
Message-ID: <200703160003.57518.dieter.rogiest@telenet.be>

Sometimes Ekiga 2.0.7 can no longer show video output of my webcam Quickcam 
Fusion.
When I then run luvcview I get this error message:
Unable to set format: 5.
 Init v4L2 failed !! exit fatal

Only way I could my webcam working again was to reboot the whole computer.
Luckily I found in this mailing-list that unplugging the USB cord of the 
webcam for a second resets the webcam.
I also read that one can "call usb_reset_device()", but I can't find info on 
that. What command can I use in linux to reset my webcam (it would be faster 
than getting up and reaching behind my desk to unplug the usb cord)?

Thank you,

Dieter


From ian.latter at midnightcode.org  Fri Mar 16 01:41:22 2007
From: ian.latter at midnightcode.org (Ian Latter)
Date: Fri, 16 Mar 2007 10:41:22 +1000
Subject: [Linux-uvc-devel] How to reset Quickcam Fusion if it locks up
	(USB timing bug in hardware)?
Message-ID: <200703152341.l2FNfMMP000863@singularity.tronunltd.com>

Hello,

  According to Stefan;
    https://lists.berlios.de/pipermail/linux-uvc-devel/2007-March/001476.html

  .. the reset functionality is a part of a patch that is applied against
the UVC Module that get compiled and included in the kernel.  From
my reading of the code, it automatically resets the USB device (without
user intervention).  Thus no command is required.

  But, to my understanding, this patch is not included by default in UVC.


----- Original Message -----
>From: "Dieter Rogiest" <dieter.rogiest at telenet.be>
>To: <linux-uvc-devel at lists.berlios.de>
>Subject:  [Linux-uvc-devel] How to reset Quickcam Fusion if it locks up (USB	timing bug in 
hardware)?
>Date: Fri, 16 Mar 2007 07:03:57 +0100
>
> Sometimes Ekiga 2.0.7 can no longer show video output of my webcam Quickcam 
> Fusion.
> When I then run luvcview I get this error message:
> Unable to set format: 5.
>  Init v4L2 failed !! exit fatal
> 
> Only way I could my webcam working again was to reboot the whole computer.
> Luckily I found in this mailing-list that unplugging the USB cord of the 
> webcam for a second resets the webcam.
> I also read that one can "call usb_reset_device()", but I can't find info on 
> that. What command can I use in linux to reset my webcam (it would be faster 
> than getting up and reaching behind my desk to unplug the usb cord)?
> 
> Thank you,
> 
> Dieter
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 


--
Ian Latter
Late night coder ..
http://midnightcode.org/


From pauljurczak at yahoo.com  Sat Mar 17 03:22:56 2007
From: pauljurczak at yahoo.com (Paul Jurczak)
Date: Fri, 16 Mar 2007 19:22:56 -0700 (PDT)
Subject: [Linux-uvc-devel] V-Gear TalkCam MX6 AF
Message-ID: <505257.85850.qm@web60517.mail.yahoo.com>


I just received V-Gear TalkCam MX6 AF camera  <http://vgear.com/products/list.asp?ProdID=AMVG1-010-076-G>. I tested it with luvcview and preview works fine with YUYV format and 320x240, 640x480, 1024x768 and 1280x1024 resolutions (the sensor resolution is 1280x1024). Driver accepts requests to change brightness, contrast, saturation etc., but the image is not affected - camera seems to be stuck on automatic mode. Here is the dump from UVCView (I've omitted the audio part):

          ---===>Device Information<===---
English product name: "USB 2.0 Camera"

ConnectionStatus:                  
Current Config Value:              0x01  -> Device Bus Speed: High
Device Address:                    0x02
Open Pipes:                           1

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x83  -> Direction: IN - EndpointID: 3
bmAttributes:                      0x03  -> Interrupt Transfer Type
wMaxPacketSize:                  0x0010 = 1 transactions per microframe, 0x10 max bytes
bInterval:                         0x06

          ===>Device Descriptor<===
bLength:                           0x12
bDescriptorType:                   0x01
bcdUSB:                          0x0200
bDeviceClass:                      0xEF  -> This is a Multi-interface Function Code Device
bDeviceSubClass:                   0x02  -> This is the Common Class Sub Class
bDeviceProtocol:                   0x01  -> This is the Interface Association Descriptor protocol
bMaxPacketSize0:                   0x40 = (64) Bytes
idVendor:                        0x0C45 = Sonix Technology Co., Ltd.
idProduct:                       0x62C0
bcdDevice:                       0x0100
iManufacturer:                     0x02
     English (United States)  "Sonix Technology Co., Ltd."
iProduct:                          0x01
     English (United States)  "USB 2.0 Camera"
iSerialNumber:                     0x03
     English (United States)  "SN0001"
bNumConfigurations:                0x01

          ===>Configuration Descriptor<===
bLength:                           0x09
bDescriptorType:                   0x02
wTotalLength:                    0x02F1  -> Validated
bNumInterfaces:                    0x04
bConfigurationValue:               0x01
iConfiguration:                    0x00
bmAttributes:                      0x80  -> Bus Powered
MaxPower:                          0xFA = 500 mA

          ===>IAD Descriptor<===
bLength:                           0x08
bDescriptorType:                   0x0B
bFirstInterface:                   0x00
bInterfaceCount:                   0x02
bFunctionClass:                    0x0E  -> Video Interface Class
bFunctionSubClass:                 0x03  -> Video Interface Collection
bFunctionProtocol:                 0x00  -> PC_PROTOCOL_UNDEFINED protocol
iFunction:                         0x01
     English (United States)  "USB 2.0 Camera"

          ===>Interface Descriptor<===
bLength:                           0x09
bDescriptorType:                   0x04
bInterfaceNumber:                  0x00
bAlternateSetting:                 0x00
bNumEndpoints:                     0x01
bInterfaceClass:                   0x0E  -> Video Interface Class
bInterfaceSubClass:                0x01  -> Video Control Interface SubClass
bInterfaceProtocol:                0x00
iInterface:                        0x01
     English (United States)  "USB 2.0 Camera"

          ===>Class-Specific Video Control Interface Header Descriptor<===
bLength:                           0x0D
bDescriptorType:                   0x24
bDescriptorSubtype:                0x01
bcdVDC:                          0x0100
wTotalLength:                    0x004D  -> Validated
dwClockFrequency:            0x005B8D80 = (6000000) Hz
bInCollection:                     0x01
baInterfaceNr[1]:                  0x01

          ===>Video Control Output Terminal Descriptor<===
bLength:                           0x09
bDescriptorType:                   0x24
bDescriptorSubtype:                0x03
bTerminalID:                       0x02
wTerminalType:                   0x0101 = (TT_STREAMING)
bAssocTerminal:                    0x00
bSourceID:                         0x04
iTerminal:                         0x00

          ===>Video Control Extension Unit Descriptor<===
bLength:                           0x1A
bDescriptorType:                   0x24
bDescriptorSubtype:                0x06
bUnitID:                           0x04
guidExtensionCode:                 {28F03370-6311-4A2E-BA2C-6890EB334016}
bNumControls:                      0x01
bNrInPins:                         0x01
===>List of Connected Units and Terminal ID's
baSourceID[1]:                     0x03
bControlSize:                      0x01
bmControls : 0x01 
     D00 = 1  yes -  Vendor-Specific (Optional)
     D01 = 0   no -  Vendor-Specific (Optional)
     D02 = 0   no -  Vendor-Specific (Optional)
     D03 = 0   no -  Vendor-Specific (Optional)
     D04 = 0   no -  Vendor-Specific (Optional)
     D05 = 0   no -  Vendor-Specific (Optional)
     D06 = 0   no -  Vendor-Specific (Optional)
     D07 = 0   no -  Vendor-Specific (Optional)
iExtension:                        0x00

          ===>Video Control Input Terminal Descriptor<===
bLength:                           0x12
bDescriptorType:                   0x24
bDescriptorSubtype:                0x02
bTerminalID:                       0x01
wTerminalType:                   0x0201 = (ITT_CAMERA)
bAssocTerminal:                    0x00
iTerminal:                         0x00
===>Camera Input Terminal Data
wObjectiveFocalLengthMin:        0x0000
wObjectiveFocalLengthMax:        0x0000
wOcularFocalLength:              0x0000
bControlSize:                      0x03
bmControls : 0x00 0x00 0x00 
     D00 = 0   no -  Scanning Mode
     D01 = 0   no -  Auto-Exposure Mode
     D02 = 0   no -  Auto-Exposure Priority
     D03 = 0   no -  Exposure Time (Absolute)
     D04 = 0   no -  Exposure Time (Relative)
     D05 = 0   no -  Focus (Absolute)
     D06 = 0   no -  Focus (Relative)
     D07 = 0   no -  Iris (Absolute)
     D08 = 0   no -  Iris (Relative)
     D09 = 0   no -  Zoom (Absolute)
     D10 = 0   no -  Zoom (Relative)
     D11 = 0   no -  Pan (Absolute)
     D12 = 0   no -  Pan (Relative)
     D13 = 0   no -  Roll (Absolute)
     D14 = 0   no -  Roll (Relative)
     D15 = 0   no -  Tilt (Absolute)
     D16 = 0   no -  Tilt (Relative)
     D17 = 0   no -  Focus Auto
     D18 = 0   no -  Reserved
     D19 = 0   no -  Reserved
     D20 = 0   no -  Reserved
     D21 = 0   no -  Reserved
     D22 = 0   no -  Reserved
     D23 = 0   no -  Reserved

          ===>Video Control Processing Unit Descriptor<===
bLength:                           0x0B
bDescriptorType:                   0x24
bDescriptorSubtype:                0x05
bUnitID:                           0x03
bSourceID:                         0x01
wMaxMultiplier:                  0x0000
bControlSize:                      0x02
bmControls : 0x3F 0x05 
     D00 = 1  yes -  Brightness
     D01 = 1  yes -  Contrast
     D02 = 1  yes -  Hue
     D03 = 1  yes -  Saturation
     D04 = 1  yes -  Sharpness
     D05 = 1  yes -  Gamma
     D06 = 0   no -  White Balance Temperature
     D07 = 0   no -  White Balance Component
     D08 = 1  yes -  Backlight Compensation
     D09 = 0   no -  Gain
     D10 = 1  yes -  Power Line Frequency
     D11 = 0   no -  Hue, Auto
     D12 = 0   no -  White Balance Temperature, Auto
     D13 = 0   no -  White Balance Component, Auto
     D14 = 0   no -  Digital Multiplier
     D15 = 0   no -  Digital Multiplier Limit
iProcessing:                       0x00

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x83  -> Direction: IN - EndpointID: 3
bmAttributes:                      0x03  -> Interrupt Transfer Type
wMaxPacketSize:                  0x0010 = 1 transactions per microframe, 0x10 max bytes
bInterval:                         0x06

          ===>Class-specific VC Interrupt Endpoint Descriptor<===
bLength:                           0x05 
bDescriptorType:                   0x25
bDescriptorSubType:                0x03
wMaxTransferSize:                0x0010 = (16) Bytes

          ===>Interface Descriptor<===
bLength:                           0x09
bDescriptorType:                   0x04
bInterfaceNumber:                  0x01
bAlternateSetting:                 0x00
bNumEndpoints:                     0x00
bInterfaceClass:                   0x0E  -> Video Interface Class
bInterfaceSubClass:                0x02  -> Video Streaming Interface SubClass
bInterfaceProtocol:                0x00
iInterface:                        0x00

          ===>Video Class-Specific VS Video Input Header Descriptor<===
bLength:                           0x0E
bDescriptorType:                   0x24
bDescriptorSubtype:                0x01
bNumFormats:                       0x01
wTotalLength:                    0x0197  -> Validated
bEndpointAddress:                  0x81  -> Direction: IN - EndpointID: 1
bmInfo:                            0x00  -> Dynamic Format Change not Supported
bTerminalLink:                     0x02
bStillCaptureMethod:               0x02  -> Still Capture Method 2
bTriggerSupport:                   0x01  -> Hardware Triggering Support
bTriggerUsage:                     0x00  -> Host will initiate still image capture
bControlSize:                      0x01
Video Payload Format 1             0x00 
     D00 = 0   no -  Key Frame Rate
     D01 = 0   no -  P Frame Rate
     D02 = 0   no -  Compression Quality
     D03 = 0   no -  Compression Window Size
     D04 = 0   no -  Generate Key Frame
     D05 = 0   no -  Update Frame Segment
     D06 = 0   no -  Reserved
     D07 = 0   no -  Reserved

          ===>Video Streaming Uncompressed Format Type Descriptor<===
bLength:                           0x1B
bDescriptorType:                   0x24
bDescriptorSubtype:                0x04
bFormatIndex:                      0x01
bNumFrameDescriptors:              0x07
guidFormat:                        {32595559-0000-0010-8000-00AA00389B71} = YUY2 Format
bBitsPerPixel:                     0x10
bDefaultFrameIndex:                0x00
bAspectRatioX:                     0x00
bAspectRatioY:                     0x00
bmInterlaceFlags:                  0x00
     D0    = 0x00 Interlaced stream or variable: No
     D1    = 0x00 Fields per frame: 2 fields
     D2    = 0x00 Field 1 first: No
     D3    = 0x00 Reserved
     D4..5 = 0x00 Field patterns  -> Field 1 only
     D6..7 = 0x00 Display Mode  -> Bob only
bCopyProtect:                      0x00  -> Duplication Unrestricted

          ===>Video Streaming Uncompressed Frame Type Descriptor<===
bLength:                           0x32
bDescriptorType:                   0x24
bDescriptorSubtype:                0x05
bFrameIndex:                       0x01
bmCapabilities:                    0x00
wWidth:                          0x0280
wHeight:                         0x01E0
dwMinBitRate:                0x00096000
dwMaxBitRate:                0x01194000
dwMaxVideoFrameBufferSize:   0x00096000
dwDefaultFrameInterval:      0x00051615
bFrameIntervalType:                0x06
===>Additional Discrete Frame Type Data
dwFrameInterval[1]:          0x00051615
dwFrameInterval[2]:          0x0007A120
dwFrameInterval[3]:          0x000A2C2A
dwFrameInterval[4]:          0x000F4240
dwFrameInterval[5]:          0x001E8480
dwFrameInterval[6]:          0x00989680

          ===>Video Streaming Uncompressed Frame Type Descriptor<===
bLength:                           0x32
bDescriptorType:                   0x24
bDescriptorSubtype:                0x05
bFrameIndex:                       0x02
bmCapabilities:                    0x00
wWidth:                          0x0160
wHeight:                         0x0120
dwMinBitRate:                0x00031800
dwMaxBitRate:                0x005CD000
dwMaxVideoFrameBufferSize:   0x00031800
dwDefaultFrameInterval:      0x00051615
bFrameIntervalType:                0x06
===>Additional Discrete Frame Type Data
dwFrameInterval[1]:          0x00051615
dwFrameInterval[2]:          0x0007A120
dwFrameInterval[3]:          0x000A2C2A
dwFrameInterval[4]:          0x000F4240
dwFrameInterval[5]:          0x001E8480
dwFrameInterval[6]:          0x00989680

          ===>Video Streaming Uncompressed Frame Type Descriptor<===
bLength:                           0x32
bDescriptorType:                   0x24
bDescriptorSubtype:                0x05
bFrameIndex:                       0x03
bmCapabilities:                    0x00
wWidth:                          0x0140
wHeight:                         0x00F0
dwMinBitRate:                0x00025800
dwMaxBitRate:                0x00465000
dwMaxVideoFrameBufferSize:   0x00025800
dwDefaultFrameInterval:      0x00051615
bFrameIntervalType:                0x06
===>Additional Discrete Frame Type Data
dwFrameInterval[1]:          0x00051615
dwFrameInterval[2]:          0x0007A120
dwFrameInterval[3]:          0x000A2C2A
dwFrameInterval[4]:          0x000F4240
dwFrameInterval[5]:          0x001E8480
dwFrameInterval[6]:          0x00989680

          ===>Video Streaming Uncompressed Frame Type Descriptor<===
bLength:                           0x32
bDescriptorType:                   0x24
bDescriptorSubtype:                0x05
bFrameIndex:                       0x04
bmCapabilities:                    0x00
wWidth:                          0x00B0
wHeight:                         0x0090
dwMinBitRate:                0x0000C600
dwMaxBitRate:                0x00173400
dwMaxVideoFrameBufferSize:   0x0000C600
dwDefaultFrameInterval:      0x00051615
bFrameIntervalType:                0x06
===>Additional Discrete Frame Type Data
dwFrameInterval[1]:          0x00051615
dwFrameInterval[2]:          0x0007A120
dwFrameInterval[3]:          0x000A2C2A
dwFrameInterval[4]:          0x000F4240
dwFrameInterval[5]:          0x001E8480
dwFrameInterval[6]:          0x00989680

          ===>Video Streaming Uncompressed Frame Type Descriptor<===
bLength:                           0x32
bDescriptorType:                   0x24
bDescriptorSubtype:                0x05
bFrameIndex:                       0x05
bmCapabilities:                    0x00
wWidth:                          0x00A0
wHeight:                         0x0078
dwMinBitRate:                0x00009600
dwMaxBitRate:                0x00119400
dwMaxVideoFrameBufferSize:   0x00009600
dwDefaultFrameInterval:      0x00051615
bFrameIntervalType:                0x06
===>Additional Discrete Frame Type Data
dwFrameInterval[1]:          0x00051615
dwFrameInterval[2]:          0x0007A120
dwFrameInterval[3]:          0x000A2C2A
dwFrameInterval[4]:          0x000F4240
dwFrameInterval[5]:          0x001E8480
dwFrameInterval[6]:          0x00989680

          ===>Video Streaming Uncompressed Frame Type Descriptor<===
bLength:                           0x26
bDescriptorType:                   0x24
bDescriptorSubtype:                0x05
bFrameIndex:                       0x06
bmCapabilities:                    0x00
wWidth:                          0x0500
wHeight:                         0x03C0
dwMinBitRate:                0x00258000
dwMaxBitRate:                0x01518000
dwMaxVideoFrameBufferSize:   0x00258000
dwDefaultFrameInterval:      0x0010F447
bFrameIntervalType:                0x03
===>Additional Discrete Frame Type Data
dwFrameInterval[1]:          0x0010F447
dwFrameInterval[2]:          0x001E8480
dwFrameInterval[3]:          0x00989680

          ===>Video Streaming Uncompressed Frame Type Descriptor<===
bLength:                           0x26
bDescriptorType:                   0x24
bDescriptorSubtype:                0x05
bFrameIndex:                       0x07
bmCapabilities:                    0x00
wWidth:                          0x0500
wHeight:                         0x0400
dwMinBitRate:                0x00280000
dwMaxBitRate:                0x01680000
dwMaxVideoFrameBufferSize:   0x00280000
dwDefaultFrameInterval:      0x0010F447
bFrameIntervalType:                0x03
===>Additional Discrete Frame Type Data
dwFrameInterval[1]:          0x0010F447
dwFrameInterval[2]:          0x001E8480
dwFrameInterval[3]:          0x00989680

          ===>Still Image Frame Type Descriptor<===
bLength:                           0x22
bDescriptorType:                   0x24
bDescriptorSubtype:                0x03
bEndpointAddress:                  0x00
bNumImageSizePatterns:             0x07
wWidth[1]:                       0x0500
wHeight[1]:                      0x0400
wWidth[2]:                       0x0500
wHeight[2]:                      0x03C0
wWidth[3]:                       0x0280
wHeight[3]:                      0x01E0
wWidth[4]:                       0x0160
wHeight[4]:                      0x0120
wWidth[5]:                       0x0140
wHeight[5]:                      0x00F0
wWidth[6]:                       0x00B0
wHeight[6]:                      0x0090
wWidth[7]:                       0x00A0
wHeight[7]:                      0x0078
bNumCompressionPattern:            0x00


          ===>Color Matching Descriptor<===
bLength:                           0x06
bDescriptorType:                   0x24
bDescriptorSubtype:                0x0D
bColorPrimaries:                   0x01
bTransferCharacteristics:          0x01
bMatrixCoefficients:               0x04

          ===>Interface Descriptor<===
bLength:                           0x09
bDescriptorType:                   0x04
bInterfaceNumber:                  0x01
bAlternateSetting:                 0x01
bNumEndpoints:                     0x01
bInterfaceClass:                   0x0E  -> Video Interface Class
bInterfaceSubClass:                0x02  -> Video Streaming Interface SubClass
bInterfaceProtocol:                0x00
iInterface:                        0x00

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x81  -> Direction: IN - EndpointID: 1
bmAttributes:                      0x05  -> Isochronous Transfer Type
                   Synchronization Type = Asynchronous
Bulk Transfer Type
wMaxPacketSize:                  0x0080 = 1 transactions per microframe, 0x80 max bytes
bInterval:                         0x01

          ===>Interface Descriptor<===
bLength:                           0x09
bDescriptorType:                   0x04
bInterfaceNumber:                  0x01
bAlternateSetting:                 0x02
bNumEndpoints:                     0x01
bInterfaceClass:                   0x0E  -> Video Interface Class
bInterfaceSubClass:                0x02  -> Video Streaming Interface SubClass
bInterfaceProtocol:                0x00
iInterface:                        0x00

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x81  -> Direction: IN - EndpointID: 1
bmAttributes:                      0x05  -> Isochronous Transfer Type
                   Synchronization Type = Asynchronous
Bulk Transfer Type
wMaxPacketSize:                  0x0100 = 1 transactions per microframe, 0x100 max bytes
bInterval:                         0x01

          ===>Interface Descriptor<===
bLength:                           0x09
bDescriptorType:                   0x04
bInterfaceNumber:                  0x01
bAlternateSetting:                 0x03
bNumEndpoints:                     0x01
bInterfaceClass:                   0x0E  -> Video Interface Class
bInterfaceSubClass:                0x02  -> Video Streaming Interface SubClass
bInterfaceProtocol:                0x00
iInterface:                        0x00

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x81  -> Direction: IN - EndpointID: 1
bmAttributes:                      0x05  -> Isochronous Transfer Type
                   Synchronization Type = Asynchronous
Bulk Transfer Type
wMaxPacketSize:                  0x0320 = 1 transactions per microframe, 0x320 max bytes
bInterval:                         0x01

          ===>Interface Descriptor<===
bLength:                           0x09
bDescriptorType:                   0x04
bInterfaceNumber:                  0x01
bAlternateSetting:                 0x04
bNumEndpoints:                     0x01
bInterfaceClass:                   0x0E  -> Video Interface Class
bInterfaceSubClass:                0x02  -> Video Streaming Interface SubClass
bInterfaceProtocol:                0x00
iInterface:                        0x00

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x81  -> Direction: IN - EndpointID: 1
bmAttributes:                      0x05  -> Isochronous Transfer Type
                   Synchronization Type = Asynchronous
Bulk Transfer Type
wMaxPacketSize:                  0x0B20 = 2 transactions per microframe, 0x320 max bytes
bInterval:                         0x01

          ===>Interface Descriptor<===
bLength:                           0x09
bDescriptorType:                   0x04
bInterfaceNumber:                  0x01
bAlternateSetting:                 0x05
bNumEndpoints:                     0x01
bInterfaceClass:                   0x0E  -> Video Interface Class
bInterfaceSubClass:                0x02  -> Video Streaming Interface SubClass
bInterfaceProtocol:                0x00
iInterface:                        0x00

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x81  -> Direction: IN - EndpointID: 1
bmAttributes:                      0x05  -> Isochronous Transfer Type
                   Synchronization Type = Asynchronous
Bulk Transfer Type
wMaxPacketSize:                  0x1320 = 3 transactions per microframe, 0x320 max bytes
bInterval:                         0x01

          ===>Interface Descriptor<===
bLength:                           0x09
bDescriptorType:                   0x04
bInterfaceNumber:                  0x01
bAlternateSetting:                 0x06
bNumEndpoints:                     0x01
bInterfaceClass:                   0x0E  -> Video Interface Class
bInterfaceSubClass:                0x02  -> Video Streaming Interface SubClass
bInterfaceProtocol:                0x00
iInterface:                        0x00

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x81  -> Direction: IN - EndpointID: 1
bmAttributes:                      0x05  -> Isochronous Transfer Type
                   Synchronization Type = Asynchronous
Bulk Transfer Type
wMaxPacketSize:                  0x13E8 = 3 transactions per microframe, 0x3E8 max bytes
bInterval:                         0x01




 
____________________________________________________________________________________
Expecting? Get great news right away with email Auto-Check. 
Try the Yahoo! Mail Beta.
http://advision.webevents.yahoo.com/mailbeta/newmail_tools.html 


From michel.brabants at euphonynet.be  Mon Mar 19 21:54:30 2007
From: michel.brabants at euphonynet.be (Michel Brabants)
Date: Mon, 19 Mar 2007 21:54:30 +0100
Subject: [Linux-uvc-devel] r89 - colours nog good anymore
Message-ID: <200703192154.36364.michel.brabants@euphonynet.be>

Hello,

I have a logitech Ultravision, am running kernel 2.6.20.3 (64 bit - Amd X2). 
However, since r89 in the subversion-repository my colours aren't right 
anymore. It seems like I'm looking at an infrared-image or so.

Greetings,

Michel
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070319/6d1948fc/attachment.pgp>

From Privat_one at gmx.de  Tue Mar 20 09:22:56 2007
From: Privat_one at gmx.de (Dirk Wesenberg)
Date: Tue, 20 Mar 2007 09:22:56 +0100
Subject: [Linux-uvc-devel] Uvcvideo => tool for check control Logitech
	Sphere MP?
Message-ID: <200703200922.56263.Privat_one@gmx.de>

Hello,
I have a little question: I use the uvcvideo module in the kernel 2.6.20 in 
combination with Motion.
My problem, and not only my is:
The controll for the webcam Pan and Tilt are not working well. Pan is just 
working a little. I have also contact with the developer from motion, but its 
look likes difficult to set the right value to the Webcam to controll the Pan 
and Tilt.
My question is :

1) How must the commt to the uvcvideo look likes to use the Pan and Tilt from 
another Programm ( like Motion)?

2) Is there a small tool available to check, if the Pan and Tilt unction 
working well ? Because it makes no sense, that thedeveloper from Motion are 
sarching a solution and maybe there is problem in the uvcvideo.

The Pan and TIlt was working nice before the API was change from uvcvideo ( I 
hear this one from other user) .

Thanks a lot for your assistant!
Dirk 


From ian.latter at midnightcode.org  Tue Mar 20 11:20:54 2007
From: ian.latter at midnightcode.org (Ian Latter)
Date: Tue, 20 Mar 2007 20:20:54 +1000
Subject: [Linux-uvc-devel] Uvcvideo => tool for check control Logitech
	Sphere MP?
Message-ID: <200703200920.l2K9Ks5G017920@singularity.tronunltd.com>


Hello Dirk,


  The controls that you are looking for a V4L2 (Video
for Linux version 2), and not UVC specific.

  There are two places that you can get programming
examples from.  You can try luvcview;
  http://mxhaard.free.fr/spca50x/Investigation/uvc/

  Or you can try my camera code from libmidnightcode,
which is based on the luvcview code above;
  http://midnightcode.org/projects/libmidnightcode/



  What you need to do is perform an "ioctl" on the
file descriptor (fd) of the camera device (eg: /dev/video0)

  enum midnightcode_camera_cid_t
  {
    MIDNIGHTCODE_CAMERA_CID_BACKLIGHT_COMPENSATION =
V4L2_CID_PRIVATE_BASE,
    MIDNIGHTCODE_CAMERA_CID_POWER_LINE_FREQUENCY,
    MIDNIGHTCODE_CAMERA_CID_SHARPNESS,
    MIDNIGHTCODE_CAMERA_CID_HUE_AUTO,
    MIDNIGHTCODE_CAMERA_CID_FOCUS_AUTO,
    MIDNIGHTCODE_CAMERA_CID_FOCUS_ABSOLUTE,
    MIDNIGHTCODE_CAMERA_CID_FOCUS_RELATIVE,
    MIDNIGHTCODE_CAMERA_CID_PAN_RELATIVE,
    MIDNIGHTCODE_CAMERA_CID_TILT_RELATIVE,
    MIDNIGHTCODE_CAMERA_CID_PANTILT_RESET,
    MIDNIGHTCODE_CAMERA_CID_EXPOSURE_AUTO,
    MIDNIGHTCODE_CAMERA_CID_EXPOSURE_ABSOLUTE,
    MIDNIGHTCODE_CAMERA_CID_WHITE_BALANCE_TEMPERATURE_AUTO,
    MIDNIGHTCODE_CAMERA_CID_WHITE_BALANCE_TEMPERATURE
  };

  struct v4l2_control v4l_control;
  int value;

  [...]

  v4l_control.id = MIDNIGHTCODE_CAMERA_CID_PAN_RELATIVE;
  v4l_control.value = (unsigned char)value;
  if(ioctl(fd, VIDIOC_S_CTRL, &v4l_control) < 0)
    // error
  // success


  The code is all GPL, so feel free to borrow heavily
from it.

  For your reference, my Sphere 2006 returns the
following "value" range for Pan and Tilt;
  Pan (relative)  min:-4480 max:4480
  Tilt (relative)  min:-1920 max:1920



----- Original Message -----
>From: "Dirk Wesenberg" <Privat_one at gmx.de>
>To: <Linux-uvc-devel at lists.berlios.de>
>Subject:  [Linux-uvc-devel] Uvcvideo => tool for check
control Logitech	Sphere MP?
>Date: Tue, 20 Mar 2007 16:22:56 +0100
>
> Hello,
> I have a little question: I use the uvcvideo module in the
kernel 2.6.20 in 
> combination with Motion.
> My problem, and not only my is:
> The controll for the webcam Pan and Tilt are not working
well. Pan is just 
> working a little. I have also contact with the developer
from motion, but its 
> look likes difficult to set the right value to the Webcam
to controll the Pan 
> and Tilt.
> My question is :
> 
> 1) How must the commt to the uvcvideo look likes to use
the Pan and Tilt from 
> another Programm ( like Motion)?
> 
> 2) Is there a small tool available to check, if the Pan
and Tilt unction 
> working well ? Because it makes no sense, that
thedeveloper from Motion are 
> sarching a solution and maybe there is problem in the
uvcvideo.
> 
> The Pan and TIlt was working nice before the API was
change from uvcvideo ( I 
> hear this one from other user) .
> 
> Thanks a lot for your assistant!
> Dirk 
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 


--
Ian Latter
Late night coder ..
http://midnightcode.org/


From emil at nishra.com  Wed Mar 21 04:00:55 2007
From: emil at nishra.com (Emil Soleyman)
Date: Tue, 20 Mar 2007 20:00:55 -0700
Subject: [Linux-uvc-devel] Logitech Quick Cam Ultra Vision: USB Analyzer Log
Message-ID: <1174446055.12635.7.camel@localhost>

Hello All,

I have used SnoopyPro 0.22 to capture USB traffic on a Windows XP
laptop. 

I started capturing the data from the time the Logitech Quick Cam
software opened the camera until that it was closed. I was able to
capture roughly 810 packets during this transmission.

I have converted the binary log file into text using the usblogdump
software found at stillhq.com. However, I was only able to convert some
of that binary log file...

You can find the necessary files at:

http://www.nishra.com/files/Logitech_QuickCam_Ultra_Vision.txt
http://www.nishra.com/files/Logitech_QuickCam_Ultra_Vision.usblog

If you find these files helpful and need me to capture more data, please
feel free to ask. I'd like to help in getting the Logitech firmware bug
squashed in the UVC driver.

Thanks,
Emil Soleyman



From Henrik.Frisk at mhm.lu.se  Wed Mar 21 23:05:52 2007
From: Henrik.Frisk at mhm.lu.se (Henrik Frisk)
Date: Wed, 21 Mar 2007 23:05:52 +0100
Subject: [Linux-uvc-devel] UVC and Logitech QuickCam Laptop pro
Message-ID: <24eeda224f531a.24f531a24eeda2@net.lu.se>

Hi all, 

I'm new to the list *and* to webcams so excuse me if this has been 
up 
before. I downloaded and compiled the uvcvideo module and i've 
managed 
to load it. However, I can still not access the device. /dev/video0 
does 
not exist. I've tried to run MAKEDEV with different settings without 
success. When I run dmesg I get the following error  

uvcvideo: disagrees about version of symbol struct_module 

This makes me suspect that I haven't compiled the module against 
the 
right headers(?). uname -r gives: 

2.6.19-1.2288.fc5smp 

and the kernel source is: 

2.6.19-1.2288.2.4.fc5-i586 

I'm on FC5 and a Dell 640m.  

Thanks for any hints 

/Henrik 



From Privat_one at gmx.de  Thu Mar 22 08:42:07 2007
From: Privat_one at gmx.de (Dirk Wesenberg)
Date: Thu, 22 Mar 2007 08:42:07 +0100
Subject: [Linux-uvc-devel] UVC and Logitech QuickCam Laptop pro
In-Reply-To: <24eeda224f531a.24f531a24eeda2@net.lu.se>
References: <24eeda224f531a.24f531a24eeda2@net.lu.se>
Message-ID: <200703220842.07568.Privat_one@gmx.de>

Hi,
after load the uvcvido driver, I could also not see anything via 
cat /dev/video or video0. But if you try e.g. luvcview, you will see thats 
work ;) . 
Also if you connect the Cam and the uvcvideo is still load ( modprobe 
uvcvideo ) you can controll via "dmesg" that the driver catch the cam.
Regards
Dirk 


Am Mittwoch, 21. M?rz 2007 23:05 schrieb Henrik Frisk:
> Hi all,
>
> I'm new to the list *and* to webcams so excuse me if this has been
> up
> before. I downloaded and compiled the uvcvideo module and i've
> managed
> to load it. However, I can still not access the device. /dev/video0
> does
> not exist. I've tried to run MAKEDEV with different settings without
> success. When I run dmesg I get the following error
>
> uvcvideo: disagrees about version of symbol struct_module
>
> This makes me suspect that I haven't compiled the module against
> the
> right headers(?). uname -r gives:
>
> 2.6.19-1.2288.fc5smp
>
> and the kernel source is:
>
> 2.6.19-1.2288.2.4.fc5-i586
>
> I'm on FC5 and a Dell 640m.
>
> Thanks for any hints
>
> /Henrik
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel


From martijn at uncinc.nl  Thu Mar 22 14:13:49 2007
From: martijn at uncinc.nl (Martijn Houtman)
Date: Thu, 22 Mar 2007 14:13:49 +0100
Subject: [Linux-uvc-devel] LQC Pro 5000 picture quality settings
Message-ID: <1D69091D-2460-48D4-9D34-62554AFD3D5C@uncinc.nl>

Hello list,

I have a Logitch Quickcam Pro 5000 which runs fine with linux-uvc  
drivers, but I was wondering on how to set the JPEG quality it gives.  
What I'd like is to have uncompressed output, and compress it myself,  
but according to luvcview, the YUYV output has size limitations. Is  
there any other way to grab a good quality, full-size image? The  
bandwidth must be a bottleneck, but the framerate can be low, as I am  
only interested in still images.

$ ./luvcview -L
luvcview version 0.2.0
Video driver: x11
A window manager is available
video /dev/video0
/dev/video0 does not support read i/o
{ pixelformat = 'MJPG', description = 'MJPEG' }
{ discrete: width = 160, height = 120 }
         Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
{ discrete: width = 176, height = 144 }
         Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
{ discrete: width = 320, height = 240 }
         Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
{ discrete: width = 352, height = 288 }
         Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
{ discrete: width = 640, height = 480 }
         Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
{ pixelformat = 'YUYV', description = 'Uncompressed' }
{ discrete: width = 160, height = 120 }
         Time interval between frame: 1/15, 1/10, 1/5,
{ discrete: width = 176, height = 144 }
         Time interval between frame: 1/15, 1/10, 1/5,

With kind regards,
-- 
Martijn Houtman.


From martijn at uncinc.nl  Thu Mar 22 15:36:45 2007
From: martijn at uncinc.nl (Martijn Houtman)
Date: Thu, 22 Mar 2007 15:36:45 +0100
Subject: [Linux-uvc-devel] LQC Pro 5000 picture quality settings
In-Reply-To: <1D69091D-2460-48D4-9D34-62554AFD3D5C@uncinc.nl>
References: <1D69091D-2460-48D4-9D34-62554AFD3D5C@uncinc.nl>
Message-ID: <7FD73C96-9DA3-4C66-B2A5-CDFC1D32041C@uncinc.nl>


On Mar 22, 2007, at 2:13 PM, Martijn Houtman wrote:

> I have a Logitch Quickcam Pro 5000 which runs fine with linux-uvc
> drivers, but I was wondering on how to set the JPEG quality it gives.
> What I'd like is to have uncompressed output, and compress it myself,
> but according to luvcview, the YUYV output has size limitations. Is
> there any other way to grab a good quality, full-size image? The
> bandwidth must be a bottleneck, but the framerate can be low, as I am
> only interested in still images.

Hate to reply to my own post, but after some googling I found that  
v4l2 has an ioctl called VIDIOC_[GS]_JPEGCOMP to get/set the JPEG  
compression level. However, this is not implemented in the linux-uvc  
driver. I tried reading the UVC documentation, but this information  
is a bit too complicated for me. I am willing to test and implement  
this ioctl, but I need help/directions on how to implement this.  
Anyone knows?

With kind regards,
-- 
Martijn Houtman.



From szo at szo.hu  Thu Mar 22 15:17:33 2007
From: szo at szo.hu (SZOKOVACS Robert)
Date: Thu, 22 Mar 2007 15:17:33 +0100
Subject: [Linux-uvc-devel] v4l1 driver?
Message-ID: <200703221517.33319.szo@szo.hu>

Hi,

I've missed a few months discussion, what is the current position about 
providing a v4l1 interface to the UVC cameras?

br

Szo


From laurent.pinchart at skynet.be  Sat Mar 24 11:38:21 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 24 Mar 2007 11:38:21 +0100
Subject: [Linux-uvc-devel] V-Gear TalkCam MX6 AF
In-Reply-To: <505257.85850.qm@web60517.mail.yahoo.com>
References: <505257.85850.qm@web60517.mail.yahoo.com>
Message-ID: <200703241138.21298.laurent.pinchart@skynet.be>

Hi Paul,

> I just received V-Gear TalkCam MX6 AF camera 
> <http://vgear.com/products/list.asp?ProdID=AMVG1-010-076-G>. I tested it
> with luvcview and preview works fine with YUYV format and 320x240, 640x480,
> 1024x768 and 1280x1024 resolutions (the sensor resolution is 1280x1024).

Cool. I'll add the device to the website (after solving your problem of 
course :-)).

> Driver accepts requests to change brightness, contrast, saturation etc.,
> but the image is not affected - camera seems to be stuck on automatic mode.
> Here is the dump from UVCView (I've omitted the audio part):

Brightness seems to be supported by the device. There is no automatic 
brightness mode in UVC. Make sure the value you are trying to set are within 
the supported range. You can retrieve the minimum, maximum and step values 
using VIDIOC_QUERYCTRL.

If the values are not out of bounds, please enable control debugging (with the 
trace module parameter) and have a look at the kernel log for possible clues.

Cheers,

Laurent Pinchart


From michel.brabants at euphonynet.be  Sat Mar 24 15:22:30 2007
From: michel.brabants at euphonynet.be (Michel Brabants)
Date: Sat, 24 Mar 2007 15:22:30 +0100
Subject: [Linux-uvc-devel] r89 - colours nog good anymore
In-Reply-To: <200703241134.07752.laurent.pinchart@skynet.be>
References: <200703192154.36364.michel.brabants@euphonynet.be>
	<200703241134.07752.laurent.pinchart@skynet.be>
Message-ID: <200703241522.37031.michel.brabants@euphonynet.be>

Hello,

I indeed needed to update luvcview. I updated it to the latest version (I was 
using the version from september 2006) and now it looks ok again.

Thank you and greetings,

Michel


Op zaterdag 24 maart 2007, schreef Laurent Pinchart:
> Hi Michel,
>
> > I have a logitech Ultravision, am running kernel 2.6.20.3 (64 bit - Amd
> > X2). However, since r89 in the subversion-repository my colours aren't
> > right anymore. It seems like I'm looking at an infrared-image or so.
>
> I've never heard about that before. r89 works fine here. Have you upgraded
> your kernel and/or V4L2 user space applications in between r88 and r89 ?
> Does r88 work ?
>
> Best regards,
>
> Laurent Pinchart




-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070324/f134b3b1/attachment.pgp>

From laurent.pinchart at skynet.be  Sat Mar 24 11:40:44 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 24 Mar 2007 11:40:44 +0100
Subject: [Linux-uvc-devel] How to reset Quickcam Fusion if it locks up
	(USB timing bug in hardware)?
In-Reply-To: <200703152341.l2FNfMMP000863@singularity.tronunltd.com>
References: <200703152341.l2FNfMMP000863@singularity.tronunltd.com>
Message-ID: <200703241140.45096.laurent.pinchart@skynet.be>

Hi,

>   According to Stefan;
>    
> https://lists.berlios.de/pipermail/linux-uvc-devel/2007-March/001476.html
>
>   .. the reset functionality is a part of a patch that is applied against
> the UVC Module that get compiled and included in the kernel.  From
> my reading of the code, it automatically resets the USB device (without
> user intervention).  Thus no command is required.
>
>   But, to my understanding, this patch is not included by default in UVC.

That's right. The patch helped a few people, but failed to fix the bug for 
others. As this is a pretty intrusive workaround, I'm not really keen on 
including it by default if it can't fix the problem for most users.

Cheers,

Laurent Pinchart

> ----- Original Message -----
>
> >From: "Dieter Rogiest" <dieter.rogiest at telenet.be>
> >To: <linux-uvc-devel at lists.berlios.de>
> >Subject:  [Linux-uvc-devel] How to reset Quickcam Fusion if it locks up
> > (USB	timing bug in
>
> hardware)?
>
> >Date: Fri, 16 Mar 2007 07:03:57 +0100
> >
> > Sometimes Ekiga 2.0.7 can no longer show video output of my webcam
> > Quickcam Fusion.
> > When I then run luvcview I get this error message:
> > Unable to set format: 5.
> >  Init v4L2 failed !! exit fatal
> >
> > Only way I could my webcam working again was to reboot the whole
> > computer. Luckily I found in this mailing-list that unplugging the USB
> > cord of the webcam for a second resets the webcam.
> > I also read that one can "call usb_reset_device()", but I can't find info
> > on that. What command can I use in linux to reset my webcam (it would be
> > faster than getting up and reaching behind my desk to unplug the usb
> > cord)?
> >
> > Thank you,
> >
> > Dieter
> > _______________________________________________
> > Linux-uvc-devel mailing list
> > Linux-uvc-devel at lists.berlios.de
> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
> --
> Ian Latter
> Late night coder ..
> http://midnightcode.org/
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel




From laurent.pinchart at skynet.be  Sat Mar 24 10:44:23 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 24 Mar 2007 10:44:23 +0100
Subject: [Linux-uvc-devel] v4l1 driver?
In-Reply-To: <200703221517.33319.szo@szo.hu>
References: <200703221517.33319.szo@szo.hu>
Message-ID: <200703241044.23907.laurent.pinchart@skynet.be>

Hi,

> I've missed a few months discussion, what is the current position about
> providing a v4l1 interface to the UVC cameras?

The V4L1 interface is officially deprecated. I don't plan to support it at all 
in the Linux UVC driver.

Best regards,

Laurent Pinchart


From linux at rubli.info  Sat Mar 24 22:02:58 2007
From: linux at rubli.info (Martin Rubli)
Date: Sat, 24 Mar 2007 14:02:58 -0700
Subject: [Linux-uvc-devel] LQC Pro 5000 picture quality settings
In-Reply-To: <1D69091D-2460-48D4-9D34-62554AFD3D5C@uncinc.nl>
References: <1D69091D-2460-48D4-9D34-62554AFD3D5C@uncinc.nl>
Message-ID: <op.tppoq8lq42iof8@nb-mrublixp.am.logitech.com>

Are you sure you're running your camera on a High-speed USB 2.0 port and  
not in Full-speed mode?

Cheers,
Martin


On Thu, 22 Mar 2007 06:13:49 -0700, Martijn Houtman <martijn at uncinc.nl>  
wrote:

> Hello list,
>
> I have a Logitch Quickcam Pro 5000 which runs fine with linux-uvc
> drivers, but I was wondering on how to set the JPEG quality it gives.
> What I'd like is to have uncompressed output, and compress it myself,
> but according to luvcview, the YUYV output has size limitations. Is
> there any other way to grab a good quality, full-size image? The
> bandwidth must be a bottleneck, but the framerate can be low, as I am
> only interested in still images.
>
> $ ./luvcview -L
> luvcview version 0.2.0
> Video driver: x11
> A window manager is available
> video /dev/video0
> /dev/video0 does not support read i/o
> { pixelformat = 'MJPG', description = 'MJPEG' }
> { discrete: width = 160, height = 120 }
>          Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
> { discrete: width = 176, height = 144 }
>          Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
> { discrete: width = 320, height = 240 }
>          Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
> { discrete: width = 352, height = 288 }
>          Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
> { discrete: width = 640, height = 480 }
>          Time interval between frame: 1/30, 1/25, 1/20, 1/15, 1/10, 1/5,
> { pixelformat = 'YUYV', description = 'Uncompressed' }
> { discrete: width = 160, height = 120 }
>          Time interval between frame: 1/15, 1/10, 1/5,
> { discrete: width = 176, height = 144 }
>          Time interval between frame: 1/15, 1/10, 1/5,
>
> With kind regards,




From laurent.pinchart at skynet.be  Sat Mar 24 11:34:07 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 24 Mar 2007 11:34:07 +0100
Subject: [Linux-uvc-devel] r89 - colours nog good anymore
In-Reply-To: <200703192154.36364.michel.brabants@euphonynet.be>
References: <200703192154.36364.michel.brabants@euphonynet.be>
Message-ID: <200703241134.07752.laurent.pinchart@skynet.be>

Hi Michel,

> I have a logitech Ultravision, am running kernel 2.6.20.3 (64 bit - Amd
> X2). However, since r89 in the subversion-repository my colours aren't
> right anymore. It seems like I'm looking at an infrared-image or so.

I've never heard about that before. r89 works fine here. Have you upgraded 
your kernel and/or V4L2 user space applications in between r88 and r89 ? Does 
r88 work ?

Best regards,

Laurent Pinchart


From szo at szo.hu  Sat Mar 24 16:18:28 2007
From: szo at szo.hu (SZOKOVACS Robert)
Date: Sat, 24 Mar 2007 16:18:28 +0100
Subject: [Linux-uvc-devel] v4l1 driver?
In-Reply-To: <200703241044.23907.laurent.pinchart@skynet.be>
References: <200703221517.33319.szo@szo.hu>
	<200703241044.23907.laurent.pinchart@skynet.be>
Message-ID: <200703241618.28464.szo@szo.hu>

On Saturday 24 March 2007 10:44, Laurent Pinchart wrote:
> Hi,
>
> > I've missed a few months discussion, what is the current position about
> > providing a v4l1 interface to the UVC cameras?
>
> The V4L1 interface is officially deprecated. I don't plan to support it
> at all in the Linux UVC driver.

Unfortunately, there are some software that doesn't support v2 :(
So I'm considering to do it myself, but I hardly know how to begin...
Is it possible to have v1 and v2 simultaneously in the same driver?

br

Szo


From ian.latter at midnightcode.org  Thu Mar 22 23:34:52 2007
From: ian.latter at midnightcode.org (Ian Latter)
Date: Fri, 23 Mar 2007 08:34:52 +1000
Subject: [Linux-uvc-devel] LQC Pro 5000 picture quality settings
Message-ID: <200703222134.l2MLYr68029222@singularity.tronunltd.com>


Hello,

  I don't know how to help you, but, if you do require help with
this then let me know.  I'm interested in the highest res highest
quality stills I can take too (mine's an Orbit/Sphere MP 2006).




----- Original Message -----
>From: "Martijn Houtman" <martijn at uncinc.nl>
>To: <Linux-uvc-devel at lists.berlios.de>
>Subject:  Re: [Linux-uvc-devel] LQC Pro 5000 picture quality settings
>Date: Thu, 22 Mar 2007 22:36:45 +0100
>
> 
> On Mar 22, 2007, at 2:13 PM, Martijn Houtman wrote:
> 
> > I have a Logitch Quickcam Pro 5000 which runs fine with linux-uvc
> > drivers, but I was wondering on how to set the JPEG quality it gives.
> > What I'd like is to have uncompressed output, and compress it myself,
> > but according to luvcview, the YUYV output has size limitations. Is
> > there any other way to grab a good quality, full-size image? The
> > bandwidth must be a bottleneck, but the framerate can be low, as I am
> > only interested in still images.
> 
> Hate to reply to my own post, but after some googling I found that  
> v4l2 has an ioctl called VIDIOC_[GS]_JPEGCOMP to get/set the JPEG  
> compression level. However, this is not implemented in the linux-uvc  
> driver. I tried reading the UVC documentation, but this information  
> is a bit too complicated for me. I am willing to test and implement  
> this ioctl, but I need help/directions on how to implement this.  
> Anyone knows?
> 
> With kind regards,
> -- 
> Martijn Houtman.
> 
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 


--
Ian Latter
Late night coder ..
http://midnightcode.org/


From laurent.pinchart at skynet.be  Sat Mar 24 12:10:50 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 24 Mar 2007 12:10:50 +0100
Subject: [Linux-uvc-devel] colour spaces etc.
In-Reply-To: <20070311182619.56817.qmail@web27212.mail.ukl.yahoo.com>
References: <20070311182619.56817.qmail@web27212.mail.ukl.yahoo.com>
Message-ID: <200703241210.50563.laurent.pinchart@skynet.be>

Hi Thoralf,

sorry for the late reply, I've been quite busy lately :-(

> first of all, thank you very much for the effort you
> put into uvc ... it's definitely a good thing to have
> a driver that supports modern webcams.

Thanks. Happy users are a good reward for the effort I put in the Linux UVC 
driver :-)

> on the other hand, i am having problems to get gem
> (see http://gem.iem.at, it is an opengl-plugin for
> pure data) to work with linux-uvc. gem does have a
> v4l2-interface, and it seems to be capable to
> communicate with a logitech quickcam pro 5000 via uvc,
> according to its status messages:
>
> video driver 0: video4linux2
> video driver 1: video4linux
> video driver 2: ieee1394 for linux
> startTransfer: 0
> start transfer
> device: /dev/video0
> wanted 6408, got 'RGB4'
> error: should exit!
> error: unknown format 'MJPG'
> changed size from 64x64 to 160x120
> buf.index==0
> buf.index==1
> buf.index==2
> buf.index==3
> format: MJPG -> 6408
> colorconvert=1
> waiting for thread to come up
> GEM: pix_video: Opened video connection 0x6
>
> but that's about it, i cannot get the stream to show
> up.
> gem operates in a rgb colour space by default (rgb24,
> iirc) and is also capable of handle yuv. according to
> the messages above, uvc sends mpjeg-data instead of
> yuv - so my question is: is there any way of changing
> the default behaviour of uvc to send yuv-data instead?

The driver will send data in the format you asked for. Is there an API in GEM 
to set the preferred format to YUYV ? If so the driver will happily send YUV 
data.

> while investigating this issue, i came across a post
> in the uvc forums
> (http://developer.berlios.de/forum/message.php?msg_id=35853)
> about a patch that appearently adds support of the
> rgb24 colour space to uvc. is there any chance of
> getting this integrated into uvc?

I'll have to check the forums more often. The mailing list is the preferred 
communication tool, and I didn't know people posted messages there :-)

Anyway, the patch will not be applied. The Linux kernel developers made it 
clear, video format convertion doesn't belong to the kernel.

Best regards,

Laurent Pinchart


From pauljurczak at yahoo.com  Sat Mar 24 18:01:00 2007
From: pauljurczak at yahoo.com (Paul Jurczak)
Date: Sat, 24 Mar 2007 10:01:00 -0700 (PDT)
Subject: [Linux-uvc-devel] V-Gear TalkCam MX6 AF
Message-ID: <928818.80166.qm@web60515.mail.yahoo.com>

Hi Laurent,

I'm running luvcview with text output - brightness and other parameters are within bounds and acknowledged to be set correctly by the driver, but preview image doesn't change.
 
Regards,
Paul Jurczak

----- Original Message ----
From: Laurent Pinchart <laurent.pinchart at skynet.be>
To: linux-uvc-devel at lists.berlios.de
Cc: Paul Jurczak <pauljurczak at yahoo.com>
Sent: Saturday, March 24, 2007 4:38:21 AM
Subject: Re: [Linux-uvc-devel] V-Gear TalkCam MX6 AF

Hi Paul,

> I just received V-Gear TalkCam MX6 AF camera 
> <http://vgear.com/products/list.asp?ProdID=AMVG1-010-076-G>. I tested it
> with luvcview and preview works fine with YUYV format and 320x240, 640x480,
> 1024x768 and 1280x1024 resolutions (the sensor resolution is 1280x1024).

Cool. I'll add the device to the website (after solving your problem of 
course :-)).

> Driver accepts requests to change brightness, contrast, saturation etc.,
> but the image is not affected - camera seems to be stuck on automatic mode.
> Here is the dump from UVCView (I've omitted the audio part):

Brightness seems to be supported by the device. There is no automatic 
brightness mode in UVC. Make sure the value you are trying to set are within 
the supported range. You can retrieve the minimum, maximum and step values 
using VIDIOC_QUERYCTRL.

If the values are not out of bounds, please enable control debugging (with the 
trace module parameter) and have a look at the kernel log for possible clues.

Cheers,

Laurent Pinchart





 
____________________________________________________________________________________
We won't tell. Get more on shows you hate to love 
(and love to hate): Yahoo! TV's Guilty Pleasures list.
http://tv.yahoo.com/collections/265 


From laurent.pinchart at skynet.be  Sat Mar 24 11:23:06 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 24 Mar 2007 11:23:06 +0100
Subject: [Linux-uvc-devel] LQC Pro 5000 picture quality settings
In-Reply-To: <7FD73C96-9DA3-4C66-B2A5-CDFC1D32041C@uncinc.nl>
References: <1D69091D-2460-48D4-9D34-62554AFD3D5C@uncinc.nl>
	<7FD73C96-9DA3-4C66-B2A5-CDFC1D32041C@uncinc.nl>
Message-ID: <200703241123.06744.laurent.pinchart@skynet.be>

Hi Martijn,

> > I have a Logitch Quickcam Pro 5000 which runs fine with linux-uvc
> > drivers, but I was wondering on how to set the JPEG quality it gives.
> > What I'd like is to have uncompressed output, and compress it myself,
> > but according to luvcview, the YUYV output has size limitations. Is
> > there any other way to grab a good quality, full-size image? The
> > bandwidth must be a bottleneck, but the framerate can be low, as I am
> > only interested in still images.
>
> Hate to reply to my own post, but after some googling I found that
> v4l2 has an ioctl called VIDIOC_[GS]_JPEGCOMP to get/set the JPEG
> compression level. However, this is not implemented in the linux-uvc
> driver. I tried reading the UVC documentation, but this information
> is a bit too complicated for me. I am willing to test and implement
> this ioctl, but I need help/directions on how to implement this.
> Anyone knows?

You're right, the driver doesn't implement VIDIOC_[GS]_JPEGCOMP yet. Luckily 
for you, it shouldn't be difficult to support those ioctls :-)

The relevant part of the spec is section 4.3.1.1 (UVC 1.1). The compression 
quality is stored in the wCompQuality field, ranging from 0 to 10000. The 
resolution (step) is reported by the device but is currently not retrieved by 
the driver.

The driver negotiates video streaming parameters in uvc_probe_video() 
(uvc_video.c). Have a look at uvc_v4l2_set_streamparm() (uvc_v4l2.c) to see 
how the function is used to set the frame rate. It should be quite easy to 
copy the function and modify it to set the compression quality. You should of 
course add some sanity checks: setting the JPEG compression quality doesn't 
make sense for YUYV.

On a side note, the driver currently sets the quality to the highest value 
supported by the device. If your quality issues come from the JPEG 
compression, you will have to use YUYV. The first generation Logitech webcams 
only supported YUYV streaming at high resolutions. The new ones (2006 and 
later) suport YUYV at all resolutions.

Feel free to ask for more information if you run into any problem. Looking 
forward for your patch :-)

Cheers,

Laurent Pinchart


From mct at toren.net  Fri Mar 23 18:26:28 2007
From: mct at toren.net (Michael C. Toren)
Date: Fri, 23 Mar 2007 13:26:28 -0400
Subject: [Linux-uvc-devel] Logitech QuickCam Orbit MP: "No such device" when
	reading from /dev/video0
Message-ID: <20070323172627.GH12271@netisland.net>

Hi,

I'm having some problems reading from /dev/video0 when using my Logitech
QuickCam Orbit MP camera.  I'm using an ubuntu 2.6.15-28-386 kernel.

At module insertion time, with trace set to 15, I see the following in
dmesg:

    [17179739.156000] Linux video capture interface: v1.00
    [17179739.172000] uvcvideo: Adding mapping Brightness to control 00000000-0000-0000-0000-000000000101/2.
    [17179739.172000] uvcvideo: Adding mapping Contrast to control 00000000-0000-0000-0000-000000000101/3.
    [17179739.172000] uvcvideo: Adding mapping Hue to control 00000000-0000-0000-0000-000000000101/6.
    [17179739.172000] uvcvideo: Adding mapping Saturation to control 00000000-0000-0000-0000-000000000101/7.
    [17179739.172000] uvcvideo: Adding mapping Sharpness to control 00000000-0000-0000-0000-000000000101/8.
    [17179739.172000] uvcvideo: Adding mapping Gamma to control 00000000-0000-0000-0000-000000000101/9.
    [17179739.172000] uvcvideo: Adding mapping Backlight Compensation to control 00000000-0000-0000-0000-000000000101/1.
    [17179739.172000] uvcvideo: Adding mapping Gain to control 00000000-0000-0000-0000-000000000101/4.
    [17179739.172000] uvcvideo: Adding mapping Power Line Frequency to control 00000000-0000-0000-0000-000000000101/5.
    [17179739.172000] uvcvideo: Adding mapping Hue, Auto to control 00000000-0000-0000-0000-000000000101/16.
    [17179739.172000] uvcvideo: Adding mapping Pan (relative) to control 63610682-5070-49ab-b8cc-b3855e8d2256/1.
    [17179739.172000] uvcvideo: Adding mapping Tilt (relative) to control 63610682-5070-49ab-b8cc-b3855e8d2256/1.
    [17179739.172000] uvcvideo: Adding mapping Pan/Tilt (reset) to control 63610682-5070-49ab-b8cc-b3855e8d2256/2.
    [17179739.172000] uvcvideo: Adding mapping Exposure, Auto to control 00000000-0000-0000-0000-000000000001/2.
    [17179739.172000] uvcvideo: Adding mapping Exposure (Absolute) to control 00000000-0000-0000-0000-000000000001/4.
    [17179739.172000] uvcvideo: Adding mapping White Balance Temperature, Auto to control 00000000-0000-0000-0000-000000000101/11.
    [17179739.172000] uvcvideo: Adding mapping White Balance Temperature to control 00000000-0000-0000-0000-000000000101/10.
    [17179739.172000] usbcore: registered new driver uvcvideo
    [17179739.172000] USB Video Class driver (v0.1.0)

And when I plug in the USB cable, I see:

    [17179760.888000] usb 5-7: new high speed USB device using ehci_hcd and address 4
    [17179761.196000] uvcvideo: Probing known UVC device 7 (046d:08c2)
    [17179761.200000] uvcvideo: Found format MJPEG.
    [17179761.200000] uvcvideo: - 160x120 (30.0 fps)
    [17179761.200000] uvcvideo: - 176x144 (30.0 fps)
    [17179761.200000] uvcvideo: - 320x240 (15.0 fps)
    [17179761.200000] uvcvideo: - 352x288 (30.0 fps)
    [17179761.200000] uvcvideo: - 432x240 (30.0 fps)
    [17179761.200000] uvcvideo: - 480x360 (30.0 fps)
    [17179761.200000] uvcvideo: - 512x288 (30.0 fps)
    [17179761.200000] uvcvideo: - 640x360 (30.0 fps)
    [17179761.200000] uvcvideo: - 640x480 (15.0 fps)
    [17179761.200000] uvcvideo: - 704x576 (15.0 fps)
    [17179761.200000] uvcvideo: - 864x480 (15.0 fps)
    [17179761.200000] uvcvideo: - 960x720 (15.0 fps)
    [17179761.200000] uvcvideo: Found format Uncompressed.
    [17179761.200000] uvcvideo: - 1024x576 (10.0 fps)
    [17179761.200000] uvcvideo: - 1280x960 (7.5 fps)
    [17179761.200000] uvcvideo: Found a Status endpoint (addr 87).
    [17179761.200000] uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c2)
    [17179761.200000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/2 to device 7 entity 2
    [17179761.200000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/3 to device 7 entity 2
    [17179761.200000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/7 to device 7 entity 2
    [17179761.200000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/8 to device 7 entity 2
    [17179761.200000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/9 to device 7 entity 2
    [17179761.200000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/1 to device 7 entity 2
    [17179761.200000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/4 to device 7 entity 2
    [17179761.200000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/5 to device 7 entity 2
    [17179761.200000] uvcvideo: Added control 63610682-5070-49ab-b8cc-b3855e8d2256/1 to device 7 entity 9
    [17179761.200000] uvcvideo: Added control 63610682-5070-49ab-b8cc-b3855e8d2256/2 to device 7 entity 9
    [17179761.200000] uvcvideo: Added control 00000000-0000-0000-0000-000000000001/2 to device 7 entity 1
    [17179761.200000] uvcvideo: Added control 00000000-0000-0000-0000-000000000001/4 to device 7 entity 1
    [17179761.200000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/11 to device 7 entity 2
    [17179761.200000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/10 to device 7 entity 2
    [17179761.200000] uvcvideo: Scanning UVC chain: OT 5 (-> 8 10 9) <- Unit 4 <- Unit 3 <- Unit 2 <- IT 1
    [17179761.200000] uvcvideo: Found a valid video chain (1 -> 5).
    [17179761.212000] uvcvideo: UVC device initialized.
    [17179762.384000] 4:3:1: cannot set freq 0 to ep 0x86
    [17179763.384000] 4:3:2: cannot set freq 0 to ep 0x86
    [17179764.388000] 4:3:3: cannot get freq at ep 0x86
    [17179764.468000] usbcore: registered new driver snd-usb-audio

As far as I can tell the above looks correct, and once plugged in the
/dev/video0 device is created by udev.  However, when I go to read from
the /dev/video0 device, it fails:

    [mct at dragonfly ~]$ ls -l /dev/video0 
    crw-rw---- 1 root video 81, 0 Mar 23 13:23 /dev/video0

    [mct at dragonfly ~]$ cat /dev/video0 > /tmp/foo.mpg
    cat: /dev/video0: No such device

No additional lines appear in dmesg after attempting to read from
/dev/video0.

Does anyone know what the problem might be?  I have two cameras of
the same make and model, but ran into the same problem with both.

Thanks,
-mct


From laurent.pinchart at skynet.be  Sat Mar 24 11:25:30 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 24 Mar 2007 11:25:30 +0100
Subject: [Linux-uvc-devel] UVC and Logitech QuickCam Laptop pro
In-Reply-To: <24eeda224f531a.24f531a24eeda2@net.lu.se>
References: <24eeda224f531a.24f531a24eeda2@net.lu.se>
Message-ID: <200703241125.30476.laurent.pinchart@skynet.be>

Hi Henrik.

> I'm new to the list *and* to webcams so excuse me if this has been
> up before. I downloaded and compiled the uvcvideo module and i've
> managed to load it. However, I can still not access the device. /dev/video0
> does not exist. I've tried to run MAKEDEV with different settings without
> success. When I run dmesg I get the following error
>
> uvcvideo: disagrees about version of symbol struct_module
>
> This makes me suspect that I haven't compiled the module against
> the right headers(?). uname -r gives:
>
> 2.6.19-1.2288.fc5smp
>
> and the kernel source is:
>
> 2.6.19-1.2288.2.4.fc5-i586
>
> I'm on FC5 and a Dell 640m.

You're probably right. The module seems to have been compiled against another 
set of headers. You must make sure the kernel source tree matches your 
running kernel. I have no experience with Fedora, so the only advice I can 
give you is to try to compile a custom kernel and see if the module will 
load.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Mar 24 11:30:34 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 24 Mar 2007 11:30:34 +0100
Subject: [Linux-uvc-devel] Logitech Quick Cam Ultra Vision: USB Analyzer
	Log
In-Reply-To: <1174446055.12635.7.camel@localhost>
References: <1174446055.12635.7.camel@localhost>
Message-ID: <200703241130.34335.laurent.pinchart@skynet.be>

Hi Emil,

> I have used SnoopyPro 0.22 to capture USB traffic on a Windows XP
> laptop.
>
> I started capturing the data from the time the Logitech Quick Cam
> software opened the camera until that it was closed. I was able to
> capture roughly 810 packets during this transmission.
>
> I have converted the binary log file into text using the usblogdump
> software found at stillhq.com. However, I was only able to convert some
> of that binary log file...
>
> You can find the necessary files at:
>
> http://www.nishra.com/files/Logitech_QuickCam_Ultra_Vision.txt
> http://www.nishra.com/files/Logitech_QuickCam_Ultra_Vision.usblog
>
> If you find these files helpful and need me to capture more data, please
> feel free to ask. I'd like to help in getting the Logitech firmware bug
> squashed in the UVC driver.

First of all, thanks for your help. Unfortunately, this isn't going to be very 
helpful. The hardware bug (it's really a hardware bug, not a firmware one) is 
pretty well known, but no proper solution has been found yet. Windows and 
Linux have different USB stack implementations, which leads to very different 
USB timings between he two platforms. We pretty much known where the problem 
is, but we don't know how to fix it. I believe the most effective solution 
would be to hack the Linux USB stack, but that's definitely not an easy task. 
I'm not sure if this could ever really be fixed.

When discussing the issue with Logitech, the idea of a firmware workaround for 
the hardware bug came up. Unfortunately, that won't help for the webcams that 
have been released already, as the firmware can't be upgraded.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Mar 25 20:06:01 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 25 Mar 2007 20:06:01 +0200
Subject: [Linux-uvc-devel] v4l1 driver?
In-Reply-To: <200703241618.28464.szo@szo.hu>
References: <200703221517.33319.szo@szo.hu>
	<200703241044.23907.laurent.pinchart@skynet.be>
	<200703241618.28464.szo@szo.hu>
Message-ID: <200703252006.02065.laurent.pinchart@skynet.be>

Hi,

> > > I've missed a few months discussion, what is the current position about
> > > providing a v4l1 interface to the UVC cameras?
> >
> > The V4L1 interface is officially deprecated. I don't plan to support it
> > at all in the Linux UVC driver.
>
> Unfortunately, there are some software that doesn't support v2 :(
> So I'm considering to do it myself, but I hardly know how to begin...
> Is it possible to have v1 and v2 simultaneously in the same driver?

Yes it's possible, but it won't be included in the mainline driver.

Another interesting approach would be to write a shared library to intercept 
V4L1 ioctls and turn them into V4L2 ioctls using LD_PRELOAD. Olivier Bestmann 
wrote a YUYV to RGB24 filter using this technique, you can find the sources 
at http://theoneandonlyfoo.th.funpic.de/uvc-support.tar.gz.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Mar 25 20:09:19 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 25 Mar 2007 20:09:19 +0200
Subject: [Linux-uvc-devel] Logitech QuickCam Orbit MP: "No such device"
	when reading from /dev/video0
In-Reply-To: <20070323172627.GH12271@netisland.net>
References: <20070323172627.GH12271@netisland.net>
Message-ID: <200703252009.19534.laurent.pinchart@skynet.be>

Hi Michael,

> I'm having some problems reading from /dev/video0 when using my Logitech
> QuickCam Orbit MP camera.  I'm using an ubuntu 2.6.15-28-386 kernel.
>
> At module insertion time, with trace set to 15, I see the following in
> dmesg:
>
>     [17179739.156000] Linux video capture interface: v1.00
>     [17179739.172000] uvcvideo: Adding mapping Brightness to control
> 00000000-0000-0000-0000-000000000101/2. [17179739.172000] uvcvideo: Adding
> mapping Contrast to control 00000000-0000-0000-0000-000000000101/3.
> [17179739.172000] uvcvideo: Adding mapping Hue to control
> 00000000-0000-0000-0000-000000000101/6. [17179739.172000] uvcvideo: Adding
> mapping Saturation to control 00000000-0000-0000-0000-000000000101/7.
> [17179739.172000] uvcvideo: Adding mapping Sharpness to control
> 00000000-0000-0000-0000-000000000101/8. [17179739.172000] uvcvideo: Adding
> mapping Gamma to control 00000000-0000-0000-0000-000000000101/9.
> [17179739.172000] uvcvideo: Adding mapping Backlight Compensation to
> control 00000000-0000-0000-0000-000000000101/1. [17179739.172000] uvcvideo:
> Adding mapping Gain to control 00000000-0000-0000-0000-000000000101/4.
> [17179739.172000] uvcvideo: Adding mapping Power Line Frequency to control
> 00000000-0000-0000-0000-000000000101/5. [17179739.172000] uvcvideo: Adding
> mapping Hue, Auto to control 00000000-0000-0000-0000-000000000101/16.
> [17179739.172000] uvcvideo: Adding mapping Pan (relative) to control
> 63610682-5070-49ab-b8cc-b3855e8d2256/1. [17179739.172000] uvcvideo: Adding
> mapping Tilt (relative) to control 63610682-5070-49ab-b8cc-b3855e8d2256/1.
> [17179739.172000] uvcvideo: Adding mapping Pan/Tilt (reset) to control
> 63610682-5070-49ab-b8cc-b3855e8d2256/2. [17179739.172000] uvcvideo: Adding
> mapping Exposure, Auto to control 00000000-0000-0000-0000-000000000001/2.
> [17179739.172000] uvcvideo: Adding mapping Exposure (Absolute) to control
> 00000000-0000-0000-0000-000000000001/4. [17179739.172000] uvcvideo: Adding
> mapping White Balance Temperature, Auto to control
> 00000000-0000-0000-0000-000000000101/11. [17179739.172000] uvcvideo: Adding
> mapping White Balance Temperature to control
> 00000000-0000-0000-0000-000000000101/10. [17179739.172000] usbcore:
> registered new driver uvcvideo
>     [17179739.172000] USB Video Class driver (v0.1.0)
>
> And when I plug in the USB cable, I see:
>
>     [17179760.888000] usb 5-7: new high speed USB device using ehci_hcd and
> address 4 [17179761.196000] uvcvideo: Probing known UVC device 7
> (046d:08c2) [17179761.200000] uvcvideo: Found format MJPEG.
>     [17179761.200000] uvcvideo: - 160x120 (30.0 fps)
>     [17179761.200000] uvcvideo: - 176x144 (30.0 fps)
>     [17179761.200000] uvcvideo: - 320x240 (15.0 fps)
>     [17179761.200000] uvcvideo: - 352x288 (30.0 fps)
>     [17179761.200000] uvcvideo: - 432x240 (30.0 fps)
>     [17179761.200000] uvcvideo: - 480x360 (30.0 fps)
>     [17179761.200000] uvcvideo: - 512x288 (30.0 fps)
>     [17179761.200000] uvcvideo: - 640x360 (30.0 fps)
>     [17179761.200000] uvcvideo: - 640x480 (15.0 fps)
>     [17179761.200000] uvcvideo: - 704x576 (15.0 fps)
>     [17179761.200000] uvcvideo: - 864x480 (15.0 fps)
>     [17179761.200000] uvcvideo: - 960x720 (15.0 fps)
>     [17179761.200000] uvcvideo: Found format Uncompressed.
>     [17179761.200000] uvcvideo: - 1024x576 (10.0 fps)
>     [17179761.200000] uvcvideo: - 1280x960 (7.5 fps)
>     [17179761.200000] uvcvideo: Found a Status endpoint (addr 87).
>     [17179761.200000] uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c2)
>     [17179761.200000] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000101/2 to device 7 entity 2
> [17179761.200000] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000101/3 to device 7 entity 2
> [17179761.200000] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000101/7 to device 7 entity 2
> [17179761.200000] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000101/8 to device 7 entity 2
> [17179761.200000] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000101/9 to device 7 entity 2
> [17179761.200000] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000101/1 to device 7 entity 2
> [17179761.200000] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000101/4 to device 7 entity 2
> [17179761.200000] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000101/5 to device 7 entity 2
> [17179761.200000] uvcvideo: Added control
> 63610682-5070-49ab-b8cc-b3855e8d2256/1 to device 7 entity 9
> [17179761.200000] uvcvideo: Added control
> 63610682-5070-49ab-b8cc-b3855e8d2256/2 to device 7 entity 9
> [17179761.200000] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000001/2 to device 7 entity 1
> [17179761.200000] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000001/4 to device 7 entity 1
> [17179761.200000] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000101/11 to device 7 entity 2
> [17179761.200000] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000101/10 to device 7 entity 2
> [17179761.200000] uvcvideo: Scanning UVC chain: OT 5 (-> 8 10 9) <- Unit 4
> <- Unit 3 <- Unit 2 <- IT 1 [17179761.200000] uvcvideo: Found a valid video
> chain (1 -> 5). [17179761.212000] uvcvideo: UVC device initialized.
>     [17179762.384000] 4:3:1: cannot set freq 0 to ep 0x86
>     [17179763.384000] 4:3:2: cannot set freq 0 to ep 0x86
>     [17179764.388000] 4:3:3: cannot get freq at ep 0x86
>     [17179764.468000] usbcore: registered new driver snd-usb-audio
>
> As far as I can tell the above looks correct, and once plugged in the
> /dev/video0 device is created by udev.  However, when I go to read from
> the /dev/video0 device, it fails:
>
>     [mct at dragonfly ~]$ ls -l /dev/video0
>     crw-rw---- 1 root video 81, 0 Mar 23 13:23 /dev/video0
>
>     [mct at dragonfly ~]$ cat /dev/video0 > /tmp/foo.mpg
>     cat: /dev/video0: No such device
>
> No additional lines appear in dmesg after attempting to read from
> /dev/video0.
>
> Does anyone know what the problem might be?  I have two cameras of
> the same make and model, but ran into the same problem with both.

The Linux UVC driver doesn't support reading directly from the device (yet). 
Only the streaming I/O method (using mmap) is supported. You can test your 
webcam with luvcview.

Cheers,

Laurent Pinchart


From mct at toren.net  Sun Mar 25 21:09:29 2007
From: mct at toren.net (Michael C. Toren)
Date: Sun, 25 Mar 2007 15:09:29 -0400
Subject: [Linux-uvc-devel] Logitech QuickCam Orbit MP: "No such device"
	when reading from /dev/video0
In-Reply-To: <200703252009.19534.laurent.pinchart@skynet.be>
References: <20070323172627.GH12271@netisland.net>
	<200703252009.19534.laurent.pinchart@skynet.be>
Message-ID: <20070325190929.GO12271@netisland.net>

On Sun, Mar 25, 2007 at 08:09:19PM +0200, Laurent Pinchart wrote:
> The Linux UVC driver doesn't support reading directly from the device
> (yet).  Only the streaming I/O method (using mmap) is supported. You can
> test your webcam with luvcview.

Hi Laurent,

Thanks for the feedback.  I had tried a few other utilities to read from
/dev/vide0, but they were giving me errors as well.  I thought that cat(1)
would be the simplest way to demonstrate the problem, but I guess not :-)

When I try using the luvcview utility, the error messages I'm seeing are:

	[mct at dragonfly ~/luvcview-20060920]$ ./luvcview
	uvcview version 0.1.7 
	Video driver: x11
	A window manager is available
	video /dev/video0 
	Unable to set format: 5.
	 Init v4L2 failed !! exit fatal 

And in dmesg, I see:

	[17357520.848000] uvcvideo: Trying format 0x47504a4d (MJPG): 320x240.
	[17357520.848000] uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
	[17357521.148000] uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110 (exp. 26).

Looking at the luvcview-20060920/v4l2uvc.c file, the codepath that
generates the "Unable to set format" error is:

	/* set format in */
	memset(&vd->fmt, 0, sizeof(struct v4l2_format));
	vd->fmt.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
	vd->fmt.fmt.pix.width = vd->width;
	vd->fmt.fmt.pix.height = vd->height;
	vd->fmt.fmt.pix.pixelformat = vd->formatIn;
	vd->fmt.fmt.pix.field = V4L2_FIELD_ANY;
	ret = ioctl(vd->fd, VIDIOC_S_FMT, &vd->fmt);
	if (ret < 0) {
	    printf("Unable to set format: %d.\n", errno);
	    goto fatal;
	}

Which I thought that may be an indication that I needed to use the "-f"
or "-s" command line arguments to change the requested format or size to
something that may be better supported by my camera, so I tried a number
of different permutations with:

	for f in yuv jpg; do
	for s in 1024x576 1280x960 160x120 176x144 320x240 352x288 432x240 \
		 480x360 512x288 640x360 640x480 704x576 864x480 960x720; do
			./luvcview -f $f -s $s -o ~/foo
	done
	done

However, none of them appeared to be successful.

Searching around for the "Failed to query" error message that appeared in
dmesg seems to suggest that I may be hitting a Logitech hardware bug :-(
Bleh.

-mct


From henrik.frisk at mhm.lu.se  Sun Mar 25 21:49:57 2007
From: henrik.frisk at mhm.lu.se (Henrik Frisk)
Date: Sun, 25 Mar 2007 21:49:57 +0200
Subject: [Linux-uvc-devel] UVC and Logitech QuickCam Laptop pro
In-Reply-To: <200703241125.30476.laurent.pinchart@skynet.be> 
References: <24eeda224f531a.24f531a24eeda2@net.lu.se>
	<200703241125.30476.laurent.pinchart@skynet.be>
Message-ID: <6386.1174852197@henrikfrisk.com>

Hi Laurent and Dirk,

> Hi Henrik.
> 
> > I'm new to the list *and* to webcams so excuse me if this has been
> > up before. I downloaded and compiled the uvcvideo module and i've
> > managed to load it. However, I can still not access the device. /dev/video0
> > does not exist. I've tried to run MAKEDEV with different settings without
> > success. When I run dmesg I get the following error
> >
> > uvcvideo: disagrees about version of symbol struct_module
> >
> > This makes me suspect that I haven't compiled the module against
> > the right headers(?). uname -r gives:
> >
> > 2.6.19-1.2288.fc5smp
> >
> > and the kernel source is:
> >
> > 2.6.19-1.2288.2.4.fc5-i586
> >
> > I'm on FC5 and a Dell 640m.
> 
> You're probably right. The module seems to have been compiled against another 
> set of headers. You must make sure the kernel source tree matches your 
> running kernel. I have no experience with Fedora, so the only advice I can 
> give you is to try to compile a custom kernel and see if the module will 
> load.
> 
Thanks for your help. The whole thing was probably due to faulty
symlinks. I removed all sources and cleared out the /usr/src/kernel/
directory and reinstalled the kernel source. After that the uvc compiled
and loaded beautifully. Thanks for the great work with uvc!

Cheers,

Henrik Frisk



From monnier at iro.umontreal.ca  Mon Mar 26 19:49:06 2007
From: monnier at iro.umontreal.ca (Stefan Monnier)
Date: Mon, 26 Mar 2007 13:49:06 -0400
Subject: [Linux-uvc-devel] How to reset Quickcam Fusion if it locks up
	(USB timing bug in hardware)?
References: <200703152341.l2FNfMMP000863@singularity.tronunltd.com>
	<200703241140.45096.laurent.pinchart@skynet.be>
Message-ID: <jwv648naokz.fsf-monnier+gmane.linux.drivers.uvc.devel@gnu.org>

>> https://lists.berlios.de/pipermail/linux-uvc-devel/2007-March/001476.html
>> 
>> .. the reset functionality is a part of a patch that is applied against
>> the UVC Module that get compiled and included in the kernel.  From
>> my reading of the code, it automatically resets the USB device (without
>> user intervention).  Thus no command is required.
>> 
>> But, to my understanding, this patch is not included by default in UVC.

> That's right.  The patch helped a few people, but failed to fix the bug for 
> others.  As this is a pretty intrusive workaround, I'm not really keen on 
> including it by default if it can't fix the problem for most users.

Hmm... I'm not sure what you mean by "intrusive" here (I don't understand
the UVC code, really, but when I applied the patch by hand, it seemed
reasonably conceptually clean and unintrusive in that it just hooks into
a few places that are not performance sensitive;  Its behavior is obviously
an ugly hack).

I wouldn't want to have the patch included as-is, and especially the hack
shouldn't be enabled by default, but I'm wondering: what changes would you
want to see before such a patch could be considered as acceptable.
I'd obviously start with adding a module argument named something like
"use_reset_hack", but what else?
Would you want the whole hack to be carefully wrapped in #ifdefs?


        Stefan



From David.C.Trotz at jpl.nasa.gov  Tue Mar 27 02:02:56 2007
From: David.C.Trotz at jpl.nasa.gov (David C Trotz Jr)
Date: Mon, 26 Mar 2007 17:02:56 -0700
Subject: [Linux-uvc-devel] Timeout?
Message-ID: <B778545B-18F8-44B8-B8CF-7E51404BFB78@jpl.nasa.gov>

Hi all,
Its been a while since I last posted but here is a quick update. I  
last asked about why my UVC device is coming up as not being a UVC  
device and a couple of you correctly pointed out that my cameras,  
Thermoteknix Miricle IR cameras must use EZ USB. I got a hold of the  
hex file and I can now hot plug the cameras and udev does the rest.  
So this is good news, thanks for the advice.

Now I am having a problem with the hardware. It seems the cameras  
like to do a calibration sequence from time to time to make sure that  
the warmer areas are distinct from the cooler areas. But when it does  
this the video stream dies and I have to restart the program in some  
cases and in others completely reload the uvc kernel driver. I am  
thinking that the uvc driver times out while the cameras do their  
calibration because the driver thinks the camera is down when in fact  
it is on hold. Is there somewhere specifically in the code where I  
can look in the uvc driver for any timeouts for video streaming, or  
do any of you have any other ideas for what might cause this behavior?
Thanks!
--
David Trotz
Associate Member of Technical Staff, Computer Vision Group
Jet Propulsion Laboratory
Mail Stop 198-235
4800 Oak Grove Drive
Pasadena, CA 91109
Office 818-354-1897, Fax 818-393-5007


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070326/2a53915a/attachment.html>

From ian.latter at midnightcode.org  Tue Mar 27 12:43:40 2007
From: ian.latter at midnightcode.org (Ian Latter)
Date: Tue, 27 Mar 2007 20:43:40 +1000
Subject: [Linux-uvc-devel] LQC Pro 5000 picture quality settings
Message-ID: <200703271043.l2RAheeU018370@singularity.tronunltd.com>


Hello Laurent,

  I'm a little less interested in looking at this patch
given your comments (that the highest quality is already
being set), but I will take a look at it.

  RE the 2006 cameras, according to luvcview, I don't
have YUYV support for high resolutions - are you sure
about this?  I'd love to get a higher quality high res
image.  Output is;

luvcview version 0.2.0
video /dev/video0
/dev/video0 does not support read i/o
{ pixelformat = 'MJPG', description = 'MJPEG' }
{ discrete: width = 160, height = 120 }
        Time interval between frame: 1/30, 1/25, 1/20, 1/15,
1/10, 1/5,
{ discrete: width = 176, height = 144 }
        Time interval between frame: 1/30, 1/25, 1/20, 1/15,
1/10, 1/5,
{ discrete: width = 320, height = 240 }
        Time interval between frame: 1/30, 1/25, 1/20, 1/15,
1/10, 1/5,
{ discrete: width = 352, height = 288 }
        Time interval between frame: 1/30, 1/25, 1/20, 1/15,
1/10, 1/5,
{ discrete: width = 640, height = 480 }
        Time interval between frame: 1/30, 1/25, 1/20, 1/15,
1/10, 1/5,
{ pixelformat = 'YUYV', description = 'Uncompressed' }
{ discrete: width = 160, height = 120 }
        Time interval between frame: 1/15, 1/10, 1/5,
{ discrete: width = 176, height = 144 }
        Time interval between frame: 1/15, 1/10, 1/5,




----- Original Message -----
>From: "Laurent Pinchart" <laurent.pinchart at skynet.be>
>To: <linux-uvc-devel at lists.berlios.de>
>Subject:  Re: [Linux-uvc-devel] LQC Pro 5000 picture
quality settings
>Date: Sat, 24 Mar 2007 18:23:06 +0100
>
> Hi Martijn,
> 
> > > I have a Logitch Quickcam Pro 5000 which runs fine
with linux-uvc
> > > drivers, but I was wondering on how to set the JPEG
quality it gives.
> > > What I'd like is to have uncompressed output, and
compress it myself,
> > > but according to luvcview, the YUYV output has size
limitations. Is
> > > there any other way to grab a good quality, full-size
image? The
> > > bandwidth must be a bottleneck, but the framerate can
be low, as I am
> > > only interested in still images.
> >
> > Hate to reply to my own post, but after some googling I
found that
> > v4l2 has an ioctl called VIDIOC_[GS]_JPEGCOMP to get/set
the JPEG
> > compression level. However, this is not implemented in
the linux-uvc
> > driver. I tried reading the UVC documentation, but this
information
> > is a bit too complicated for me. I am willing to test
and implement
> > this ioctl, but I need help/directions on how to
implement this.
> > Anyone knows?
> 
> You're right, the driver doesn't implement
VIDIOC_[GS]_JPEGCOMP yet. Luckily 
> for you, it shouldn't be difficult to support those ioctls :-)
> 
> The relevant part of the spec is section 4.3.1.1 (UVC
1.1). The compression 
> quality is stored in the wCompQuality field, ranging from
0 to 10000. The 
> resolution (step) is reported by the device but is
currently not retrieved by 
> the driver.
> 
> The driver negotiates video streaming parameters in
uvc_probe_video() 
> (uvc_video.c). Have a look at uvc_v4l2_set_streamparm()
(uvc_v4l2.c) to see 
> how the function is used to set the frame rate. It should
be quite easy to 
> copy the function and modify it to set the compression
quality. You should of 
> course add some sanity checks: setting the JPEG
compression quality doesn't 
> make sense for YUYV.
> 
> On a side note, the driver currently sets the quality to
the highest value 
> supported by the device. If your quality issues come from
the JPEG 
> compression, you will have to use YUYV. The first
generation Logitech webcams 
> only supported YUYV streaming at high resolutions. The new
ones (2006 and 
> later) suport YUYV at all resolutions.
> 
> Feel free to ask for more information if you run into any
problem. Looking 
> forward for your patch :-)
> 
> Cheers,
> 
> Laurent Pinchart
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 


--
Ian Latter
Late night coder ..
http://midnightcode.org/


From martijn at uncinc.nl  Tue Mar 27 13:05:58 2007
From: martijn at uncinc.nl (Martijn Houtman)
Date: Tue, 27 Mar 2007 12:05:58 +0100
Subject: [Linux-uvc-devel] LQC Pro 5000 picture quality settings
In-Reply-To: <200703271043.l2RAheeU018370@singularity.tronunltd.com>
References: <200703271043.l2RAheeU018370@singularity.tronunltd.com>
Message-ID: <200703271305.59104.martijn@uncinc.nl>

On Tuesday 27 March 2007 12:43, Ian Latter wrote:
>   I'm a little less interested in looking at this patch
> given your comments (that the highest quality is already
> being set), but I will take a look at it.

Yeah, so am I, but still it would be a nice feature to have. I am however more 
interested in how to set this Bayer mode.

>   RE the 2006 cameras, according to luvcview, I don't
> have YUYV support for high resolutions - are you sure
> about this?  I'd love to get a higher quality high res
> image.  

*snip*

It is the same was what I get on an USB 1.1 port, but on a USB 2.0 port I can 
grab YUYV at 640x480 at 30, according to the output. I have yet to test it.

What I need is a good quality picture with as little compression artifacts as 
possible and good colors (preferably no chroma subsampling like JPEG does). I 
hope Bayer mode helps?

With kind regards,
-- 
Martijn Houtman.


From ian.latter at midnightcode.org  Tue Mar 27 13:13:07 2007
From: ian.latter at midnightcode.org (Ian Latter)
Date: Tue, 27 Mar 2007 21:13:07 +1000
Subject: [Linux-uvc-devel] Timeout?
Message-ID: <200703271113.l2RBD734018469@singularity.tronunltd.com>


Hello David,


  There's a patch that has been discussed to do with 
resetting "hung" Logitec cameras;
 
https://lists.berlios.de/pipermail/linux-uvc-devel/2007-March/001476.html

  It does a check to see if the device is unhappy;

+	/* leave usb device in a clean state */
+	if (video->dev->state & UVC_DEV_IOERROR)
+		uvc_video_reinit(video);

.. and then re-initialises it on demand.  Depending on
what you know about the device when it enters and/or
leaves this calibration period, you could either put a 
timer in there, or leave it event driven based on the
device state (if you knew what that state was when the
calibration was complete -vs- when it was performing
calibration).

  It wouldn't fix all of your problems tho - that code will
re-initialise the device, cutting off your user-space stream
(I believe).


  Following up on your earlier thread;

http://www.mail-archive.com/linux-uvc-devel at lists.berlios.de/msg00708.html

.. along with the info below.  What "hex file" did you
end up using?  I'm interested for two reasons;

  Initially because I'm about to buy either a heap of EZ USB
or a heap of CP2101 devices to use as USB-Serial/TTL 
bridges .. and I wasn't expecting to have to work with the
the local logic (from Linux) in order to use it as a pass-thru
device.

  Also, because I'm interested in doing thermal/IR imaging.  
I looked at the Thermoteknix gear, but couldn't see 
anything that was both small and would integrate into 
Linux -- if there's a camera that works, then I'd be keen to
try it out.


----- Original Message -----
>From: "David C Trotz Jr" <David.C.Trotz at jpl.nasa.gov>
>To: <linux-uvc-devel at lists.berlios.de>
>Subject:  [Linux-uvc-devel] Timeout?
>Date: Mon, 26 Mar 2007 23:02:56 -0700
>
> Hi all,
> Its been a while since I last posted but here is a quick
update. I  
> last asked about why my UVC device is coming up as not
being a UVC  
> device and a couple of you correctly pointed out that my
cameras,  
> Thermoteknix Miricle IR cameras must use EZ USB. I got a
hold of the  
> hex file and I can now hot plug the cameras and udev does
the rest.  
> So this is good news, thanks for the advice.
> 
> Now I am having a problem with the hardware. It seems the
cameras  
> like to do a calibration sequence from time to time to
make sure that  
> the warmer areas are distinct from the cooler areas. But
when it does  
> this the video stream dies and I have to restart the
program in some  
> cases and in others completely reload the uvc kernel
driver. I am  
> thinking that the uvc driver times out while the cameras
do their  
> calibration because the driver thinks the camera is down
when in fact  
> it is on hold. Is there somewhere specifically in the code
where I  
> can look in the uvc driver for any timeouts for video
streaming, or  
> do any of you have any other ideas for what might cause
this behavior?
> Thanks!
> --
> David Trotz
> Associate Member of Technical Staff, Computer Vision Group
> Jet Propulsion Laboratory
> Mail Stop 198-235
> 4800 Oak Grove Drive
> Pasadena, CA 91109
> Office 818-354-1897, Fax 818-393-5007
> 
> 
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 


--
Ian Latter
Late night coder ..
http://midnightcode.org/


From ian.latter at midnightcode.org  Tue Mar 27 13:13:35 2007
From: ian.latter at midnightcode.org (Ian Latter)
Date: Tue, 27 Mar 2007 21:13:35 +1000
Subject: [Linux-uvc-devel] Timeout?
Message-ID: <200703271113.l2RBDZoo018480@singularity.tronunltd.com>


Hello David,


  There's a patch that has been discussed to do with 
resetting "hung" Logitec cameras;
 
https://lists.berlios.de/pipermail/linux-uvc-devel/2007-March/001476.html

  It does a check to see if the device is unhappy;

+	/* leave usb device in a clean state */
+	if (video->dev->state & UVC_DEV_IOERROR)
+		uvc_video_reinit(video);

.. and then re-initialises it on demand.  Depending on
what you know about the device when it enters and/or
leaves this calibration period, you could either put a 
timer in there, or leave it event driven based on the
device state (if you knew what that state was when the
calibration was complete -vs- when it was performing
calibration).

  It wouldn't fix all of your problems tho - that code will
re-initialise the device, cutting off your user-space stream
(I believe).


  Following up on your earlier thread;

http://www.mail-archive.com/linux-uvc-devel at lists.berlios.de/msg00708.html

.. along with the info below.  What "hex file" did you
end up using?  I'm interested for two reasons;

  Initially because I'm about to buy either a heap of EZ USB
or a heap of CP2101 devices to use as USB-Serial/TTL 
bridges .. and I wasn't expecting to have to work with the
the local logic (from Linux) in order to use it as a pass-thru
device.

  Also, because I'm interested in doing thermal/IR imaging.  
I looked at the Thermoteknix gear, but couldn't see 
anything that was both small and would integrate into 
Linux -- if there's a camera that works, then I'd be keen to
try it out.


----- Original Message -----
>From: "David C Trotz Jr" <David.C.Trotz at jpl.nasa.gov>
>To: <linux-uvc-devel at lists.berlios.de>
>Subject:  [Linux-uvc-devel] Timeout?
>Date: Mon, 26 Mar 2007 23:02:56 -0700
>
> Hi all,
> Its been a while since I last posted but here is a quick
update. I  
> last asked about why my UVC device is coming up as not
being a UVC  
> device and a couple of you correctly pointed out that my
cameras,  
> Thermoteknix Miricle IR cameras must use EZ USB. I got a
hold of the  
> hex file and I can now hot plug the cameras and udev does
the rest.  
> So this is good news, thanks for the advice.
> 
> Now I am having a problem with the hardware. It seems the
cameras  
> like to do a calibration sequence from time to time to
make sure that  
> the warmer areas are distinct from the cooler areas. But
when it does  
> this the video stream dies and I have to restart the
program in some  
> cases and in others completely reload the uvc kernel
driver. I am  
> thinking that the uvc driver times out while the cameras
do their  
> calibration because the driver thinks the camera is down
when in fact  
> it is on hold. Is there somewhere specifically in the code
where I  
> can look in the uvc driver for any timeouts for video
streaming, or  
> do any of you have any other ideas for what might cause
this behavior?
> Thanks!
> --
> David Trotz
> Associate Member of Technical Staff, Computer Vision Group
> Jet Propulsion Laboratory
> Mail Stop 198-235
> 4800 Oak Grove Drive
> Pasadena, CA 91109
> Office 818-354-1897, Fax 818-393-5007
> 
> 
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 


--
Ian Latter
Late night coder ..
http://midnightcode.org/


From ian.latter at midnightcode.org  Tue Mar 27 13:14:35 2007
From: ian.latter at midnightcode.org (Ian Latter)
Date: Tue, 27 Mar 2007 21:14:35 +1000
Subject: [Linux-uvc-devel] Timeout?
Message-ID: <200703271114.l2RBEZhw018484@singularity.tronunltd.com>


Hello David,


  There's a patch that has been discussed to do with 
resetting "hung" Logitec cameras;
 
https://lists.berlios.de/pipermail/linux-uvc-devel/2007-March/001476.html

  It does a check to see if the device is unhappy;

+	/* leave usb device in a clean state */
+	if (video->dev->state & UVC_DEV_IOERROR)
+		uvc_video_reinit(video);

.. and then re-initialises it on demand.  Depending on
what you know about the device when it enters and/or
leaves this calibration period, you could either put a 
timer in there, or leave it event driven based on the
device state (if you knew what that state was when the
calibration was complete -vs- when it was performing
calibration).

  It wouldn't fix all of your problems tho - that code will
re-initialise the device, cutting off your user-space stream
(I believe).


  Following up on your earlier thread;

http://www.mail-archive.com/linux-uvc-devel at lists.berlios.de/msg00708.html

.. along with the info below.  What "hex file" did you
end up using?  I'm interested for two reasons;

  Initially because I'm about to buy either a heap of EZ USB
or a heap of CP2101 devices to use as USB-Serial/TTL 
bridges .. and I wasn't expecting to have to work with the
the local logic (from Linux) in order to use it as a pass-thru
device.

  Also, because I'm interested in doing thermal/IR imaging.  
I looked at the Thermoteknix gear, but couldn't see 
anything that was both small and would integrate into 
Linux -- if there's a camera that works, then I'd be keen to
try it out.


----- Original Message -----
>From: "David C Trotz Jr" <David.C.Trotz at jpl.nasa.gov>
>To: <linux-uvc-devel at lists.berlios.de>
>Subject:  [Linux-uvc-devel] Timeout?
>Date: Mon, 26 Mar 2007 23:02:56 -0700
>
> Hi all,
> Its been a while since I last posted but here is a quick
update. I  
> last asked about why my UVC device is coming up as not
being a UVC  
> device and a couple of you correctly pointed out that my
cameras,  
> Thermoteknix Miricle IR cameras must use EZ USB. I got a
hold of the  
> hex file and I can now hot plug the cameras and udev does
the rest.  
> So this is good news, thanks for the advice.
> 
> Now I am having a problem with the hardware. It seems the
cameras  
> like to do a calibration sequence from time to time to
make sure that  
> the warmer areas are distinct from the cooler areas. But
when it does  
> this the video stream dies and I have to restart the
program in some  
> cases and in others completely reload the uvc kernel
driver. I am  
> thinking that the uvc driver times out while the cameras
do their  
> calibration because the driver thinks the camera is down
when in fact  
> it is on hold. Is there somewhere specifically in the code
where I  
> can look in the uvc driver for any timeouts for video
streaming, or  
> do any of you have any other ideas for what might cause
this behavior?
> Thanks!
> --
> David Trotz
> Associate Member of Technical Staff, Computer Vision Group
> Jet Propulsion Laboratory
> Mail Stop 198-235
> 4800 Oak Grove Drive
> Pasadena, CA 91109
> Office 818-354-1897, Fax 818-393-5007
> 
> 
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 


--
Ian Latter
Late night coder ..
http://midnightcode.org/


From ian.latter at midnightcode.org  Tue Mar 27 13:52:56 2007
From: ian.latter at midnightcode.org (Ian Latter)
Date: Tue, 27 Mar 2007 21:52:56 +1000
Subject: [Linux-uvc-devel] Timeout?
Message-ID: <200703271152.l2RBqu6h019178@singularity.tronunltd.com>


Hello David,


  There's a patch that has been discussed to do with 
resetting "hung" Logitec cameras;
 
https://lists.berlios.de/pipermail/linux-uvc-devel/2007-March/001476.html

  It does a check to see if the device is unhappy;

+	/* leave usb device in a clean state */
+	if (video->dev->state & UVC_DEV_IOERROR)
+		uvc_video_reinit(video);

.. and then re-initialises it on demand.  Depending on
what you know about the device when it enters and/or
leaves this calibration period, you could either put a 
timer in there, or leave it event driven based on the
device state (if you knew what that state was when the
calibration was complete -vs- when it was performing
calibration).

  It wouldn't fix all of your problems tho - that code will
re-initialise the device, cutting off your user-space stream
(I believe).


  Following up on your earlier thread;

http://www.mail-archive.com/linux-uvc-devel at lists.berlios.de/msg00708.html

.. along with the info below.  What "hex file" did you
end up using?  I'm interested for two reasons;

  Initially because I'm about to buy either a heap of EZ USB
or a heap of CP2101 devices to use as USB-Serial/TTL 
bridges .. and I wasn't expecting to have to work with the
the local logic (from Linux) in order to use it as a pass-thru
device.

  Also, because I'm interested in doing thermal/IR imaging.  
I looked at the Thermoteknix gear, but couldn't see 
anything that was both small and would integrate into 
Linux -- if there's a camera that works, then I'd be keen to
try it out.


----- Original Message -----
>From: "David C Trotz Jr" <David.C.Trotz at jpl.nasa.gov>
>To: <linux-uvc-devel at lists.berlios.de>
>Subject:  [Linux-uvc-devel] Timeout?
>Date: Mon, 26 Mar 2007 23:02:56 -0700
>
> Hi all,
> Its been a while since I last posted but here is a quick
update. I  
> last asked about why my UVC device is coming up as not
being a UVC  
> device and a couple of you correctly pointed out that my
cameras,  
> Thermoteknix Miricle IR cameras must use EZ USB. I got a
hold of the  
> hex file and I can now hot plug the cameras and udev does
the rest.  
> So this is good news, thanks for the advice.
> 
> Now I am having a problem with the hardware. It seems the
cameras  
> like to do a calibration sequence from time to time to
make sure that  
> the warmer areas are distinct from the cooler areas. But
when it does  
> this the video stream dies and I have to restart the
program in some  
> cases and in others completely reload the uvc kernel
driver. I am  
> thinking that the uvc driver times out while the cameras
do their  
> calibration because the driver thinks the camera is down
when in fact  
> it is on hold. Is there somewhere specifically in the code
where I  
> can look in the uvc driver for any timeouts for video
streaming, or  
> do any of you have any other ideas for what might cause
this behavior?
> Thanks!
> --
> David Trotz
> Associate Member of Technical Staff, Computer Vision Group
> Jet Propulsion Laboratory
> Mail Stop 198-235
> 4800 Oak Grove Drive
> Pasadena, CA 91109
> Office 818-354-1897, Fax 818-393-5007
> 
> 
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 


--
Ian Latter
Late night coder ..
http://midnightcode.org/


From ian.latter at midnightcode.org  Tue Mar 27 14:07:41 2007
From: ian.latter at midnightcode.org (Ian Latter)
Date: Tue, 27 Mar 2007 22:07:41 +1000
Subject: [Linux-uvc-devel] D'oh - was Re:  Timeout?
Message-ID: <200703271207.l2RC7fvL019284@singularity.tronunltd.com>


Sorry if I posted this a few times .. I was having trouble
with the router here.


----- Original Message -----
>From: "Ian Latter" <ian.latter at midnightcode.org>
>To: <linux-uvc-devel at lists.berlios.de>
>Subject:  Re: [Linux-uvc-devel] Timeout?
>Date: Wed, 28 Mar 2007 03:52:56 +1000
>
> 
> Hello David,
> 
> 
>   There's a patch that has been discussed to do with 
> resetting "hung" Logitec cameras;
>  
>
https://lists.berlios.de/pipermail/linux-uvc-devel/2007-March/001476.html
> 
>   It does a check to see if the device is unhappy;
> 
> +	/* leave usb device in a clean state */
> +	if (video->dev->state & UVC_DEV_IOERROR)
> +		uvc_video_reinit(video);
> 
> .. and then re-initialises it on demand.  Depending on
> what you know about the device when it enters and/or
> leaves this calibration period, you could either put a 
> timer in there, or leave it event driven based on the
> device state (if you knew what that state was when the
> calibration was complete -vs- when it was performing
> calibration).
> 
>   It wouldn't fix all of your problems tho - that code will
> re-initialise the device, cutting off your user-space stream
> (I believe).
> 
> 
>   Following up on your earlier thread;
> 
>
http://www.mail-archive.com/linux-uvc-devel at lists.berlios.de/msg00708.html
> 
> .. along with the info below.  What "hex file" did you
> end up using?  I'm interested for two reasons;
> 
>   Initially because I'm about to buy either a heap of EZ USB
> or a heap of CP2101 devices to use as USB-Serial/TTL 
> bridges .. and I wasn't expecting to have to work with the
> the local logic (from Linux) in order to use it as a pass-thru
> device.
> 
>   Also, because I'm interested in doing thermal/IR imaging.  
> I looked at the Thermoteknix gear, but couldn't see 
> anything that was both small and would integrate into 
> Linux -- if there's a camera that works, then I'd be keen to
> try it out.
> 
> 
> ----- Original Message -----
> >From: "David C Trotz Jr" <David.C.Trotz at jpl.nasa.gov>
> >To: <linux-uvc-devel at lists.berlios.de>
> >Subject:  [Linux-uvc-devel] Timeout?
> >Date: Mon, 26 Mar 2007 23:02:56 -0700
> >
> > Hi all,
> > Its been a while since I last posted but here is a quick
> update. I  
> > last asked about why my UVC device is coming up as not
> being a UVC  
> > device and a couple of you correctly pointed out that my
> cameras,  
> > Thermoteknix Miricle IR cameras must use EZ USB. I got a
> hold of the  
> > hex file and I can now hot plug the cameras and udev does
> the rest.  
> > So this is good news, thanks for the advice.
> > 
> > Now I am having a problem with the hardware. It seems the
> cameras  
> > like to do a calibration sequence from time to time to
> make sure that  
> > the warmer areas are distinct from the cooler areas. But
> when it does  
> > this the video stream dies and I have to restart the
> program in some  
> > cases and in others completely reload the uvc kernel
> driver. I am  
> > thinking that the uvc driver times out while the cameras
> do their  
> > calibration because the driver thinks the camera is down
> when in fact  
> > it is on hold. Is there somewhere specifically in the code
> where I  
> > can look in the uvc driver for any timeouts for video
> streaming, or  
> > do any of you have any other ideas for what might cause
> this behavior?
> > Thanks!
> > --
> > David Trotz
> > Associate Member of Technical Staff, Computer Vision Group
> > Jet Propulsion Laboratory
> > Mail Stop 198-235
> > 4800 Oak Grove Drive
> > Pasadena, CA 91109
> > Office 818-354-1897, Fax 818-393-5007
> > 
> > 
> > _______________________________________________
> > Linux-uvc-devel mailing list
> > Linux-uvc-devel at lists.berlios.de
> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> > 
> 
> 
> --
> Ian Latter
> Late night coder ..
> http://midnightcode.org/
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 


--
Ian Latter
Late night coder ..
http://midnightcode.org/


From ian.latter at midnightcode.org  Tue Mar 27 14:31:36 2007
From: ian.latter at midnightcode.org (Ian Latter)
Date: Tue, 27 Mar 2007 22:31:36 +1000
Subject: [Linux-uvc-devel] LQC Pro 5000 picture quality settings
Message-ID: <200703271231.l2RCVas2019388@singularity.tronunltd.com>



  I hadn't heard of "Bayer" mode before.  Seems the PWC
project has support for Bayer decoding in pwc-dec23.c;
 
http://iphitus.loudas.com/beyond/2.6.17/2.6.17-beyond3/patches/pwc-2.6.18-backport-fixed.patch


.. and makes mention of this special case;
 	/* special case: VGA @ 5 fps and snapshot is raw bayer mode */

  I take it this is the single image capture mode that
UVC doesn't support yet?


  Thanks for the heads up on that USB port .. seems my
embedded system spec does clearly state 3 x USB 1.1 ports.
;-)



----- Original Message -----
>From: "Martijn Houtman" <martijn at uncinc.nl>
>To: <linux-uvc-devel at lists.berlios.de>
>Subject:  Re: [Linux-uvc-devel] LQC Pro 5000 picture
quality settings
>Date: Tue, 27 Mar 2007 18:05:58 +0100
>
> On Tuesday 27 March 2007 12:43, Ian Latter wrote:
> >   I'm a little less interested in looking at this patch
> > given your comments (that the highest quality is already
> > being set), but I will take a look at it.
> 
> Yeah, so am I, but still it would be a nice feature to
have. I am however more 
> interested in how to set this Bayer mode.
> 
> >   RE the 2006 cameras, according to luvcview, I don't
> > have YUYV support for high resolutions - are you sure
> > about this?  I'd love to get a higher quality high res
> > image.  
> 
> *snip*
> 
> It is the same was what I get on an USB 1.1 port, but on a
USB 2.0 port I can 
> grab YUYV at 640x480 at 30, according to the output. I have
yet to test it.
> 
> What I need is a good quality picture with as little
compression artifacts as 
> possible and good colors (preferably no chroma subsampling
like JPEG does). I 
> hope Bayer mode helps?
> 
> With kind regards,
> -- 
> Martijn Houtman.
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 


--
Ian Latter
Late night coder ..
http://midnightcode.org/


From ldiduch at nist.gov  Tue Mar 27 17:09:37 2007
From: ldiduch at nist.gov (ldiduch at nist.gov)
Date: Tue, 27 Mar 2007 11:09:37 -0400
Subject: [Linux-uvc-devel] (no subject)
Message-ID: <1175008177.460933b1494bc@webmail.nist.gov>

Hello,

the uvc driver works great from the scratch for my logitech quickcam 5000 pro.
Gratulations on this nice job done !

There are some issues while capturing (using opencv) like:
Corrupt JPEG data: premature end of data segment
Corrupt JPEG data: 403 extraneous bytes before marker 0xd9
.
which actually mess up the image, but don't occur too often so the
stream is nearly ok. I'm sure you're already aware of that.

I have one question regarding the driver:

is it possible to set some capture properties with modprobe while
loading the driver ? Capture image size and framerate would be
interesting for webcams. (quickcam pro 5k is able to capture at about 1200x900
which is not allways desired, especially in the field of real time object
recognition) The capturing takes about 41% of cpu power on an athlon 64 bit
3700+ processor which is quite a bit.

regarding to the old pwcx phillips driver the quickcam 4000 takes about 15%-25%
of CPU power for 640x480 pix. the capture image size can be set by a parameter
like 'modprobe pwcx size=sif fps=15' which is very convenient.

Thank you in advance
Lukas (Dipl. Ing. ET/IT)


From protasnb at gmail.com  Wed Mar 28 05:38:25 2007
From: protasnb at gmail.com (Natalie Protasevich)
Date: Tue, 27 Mar 2007 20:38:25 -0700
Subject: [Linux-uvc-devel] uvcvideo driver for x86_64
Message-ID: <32209efe0703272038k10a6f281v6cf0121e2442aefb@mail.gmail.com>

Hello,
I am trying to use Logitech Pro 5000 web cam under Linux x86_64. I don't
seem to have any problems with the webcam under Linux i386. But when I am
trying to run it under x86_64, the application doesn't work. I heard some
opinions about no support for video4linux L2 in the uvcvideo driver, but
both the application and the driver seem to use l2 calls and have full L2
support. However, the driver doesn't work which makes me think that this
might be  the compat_ioctl32 layer in the linux kernel. The kernel level is
2.6.18.5, and I am also planning to test with the newest kernel, either -rc
or even -mm tree.
I've collected some traces to check if something is missing still in
the UVCapplication/driver/kernel chain, or this is just some bugs in
the compat
layers.
I was using Marratech application, uvccapture, and luvcview with similar
results.
Here some sample traces (with my debug):

Marratech conferencing application:

natalie at 4300-test:~/Desktop/uvccapture-0.4$ /usr/local/marratech/Marratech6
.1/bin/Marratech
Virtual screensize: java.awt.Rectangle[x=0,y=0,width=1600,height=1024]
ALSA lib control.c:817:(snd_ctl_open_noupdate) Invalid CTL
ioctl VIDIOCGCHAN: Invalid argument
V4l: failed to find a supported format.
ioctl VIDIOCGCHAN: Invalid argument
ioctl VIDIOCGMBUF: Invalid argument
mmap: Invalid argument
V4l: device has no mmap support
ioctl VIDIOCSWIN: Input/output error
ioctl VIDIOCGWIN: Invalid argument
ioctl VIDIOCGCHAN: Invalid argument
ioctl VIDIOCGWIN: Invalid argument
yuvgrab, read failed!
yuvgrab, read failed!
yuvgrab, read failed!

uvccapture and luvcview:

nataliep at 4300-test:/tmp$ ./uvccapture
sending ioctl VIDIOC_QUERYCAP
sending ioctl VIDIOC_S_FMT
Unable to set format: 22.
 Init v4L2 failed !! exit fatal

I also have a kernel trace with my debug, this is a part of it that shows
that the driver calls into the l1 compat layer, which seems odd to me since
everything from application to kernel is all l2:

Mar 27 19:07:36 4300-test kernel: [  587.416082] NBP: in compat translate
ioctl
Mar 27 19:07:36 4300-test kernel: [  587.416086] Call Trace:
Mar 27 19:07:36 4300-test kernel: [  587.416113]  [<ffffffff888a21e2>]
:v4l1_compat:v4l_compat_translate_ioctl+0x40/0x1a6e
Mar 27 19:07:36 4300-test kernel: [  587.416122]  [<ffffffff888cd4c2>]
:uvcvideo:uvc_v4l2_do_ioctl+0x0/0xd2d

... (omitting loooong trace here)

Mar 27 19:07:36 4300-test kernel: [  587.416981]  [<ffffffff888b0867>]
:compat_ioctl32:v4l_compat_ioctl32+0x5c2/0x61f
Mar 27 19:07:36 4300-test kernel: [  587.416987]  [<ffffffff888b02a5>]
:compat_ioctl32:v4l_compat_ioctl32+0x0/0x61f
Mar 27 19:07:36 4300-test kernel: [  587.417002]  [<ffffffff802ca2b2>]
compat_sys_ioctl+0xd1/0x2c5
Mar 27 19:07:36 4300-test kernel: [  587.417033]  [<ffffffff8025a0e3>]
sysenter_do_call+0x1b/0x67


Mar 27 19:07:36 4300-test kernel: [  587.417071] uvcvideo: Unknown ioctl
0xc0cc5605
Mar 27 19:07:36 4300-test kernel: [  587.417075] NBP: compat_ioctl32:ret
ffffffea -

and the compat_ioctl32 fails, which makes me think this is a culprit.
I will sure appreciate some help with all this...
Thanks,
--Natalie
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070327/af1a0fe2/attachment.html>

From jennytharayil at gmail.com  Wed Mar 28 20:06:26 2007
From: jennytharayil at gmail.com (jenny tc)
Date: Wed, 28 Mar 2007 23:36:26 +0530
Subject: [Linux-uvc-devel] Sony DCR-HC40(E) camcoer live video streaming
	from usb port
Message-ID: <47b5508f0703281106l5996f00erf6a3c235203fcc7a@mail.gmail.com>

I  acquired a Camcorder Sony DCR-HC40(E). I am using fedora 5 with
 kernel 2.6.18. On my pc  I only have a USB port and  and   I can  catch the
 pictures saved  in the memory stick  . I  would like also to catch the
'live video stream' from its USB port.. Under Windows it is feasible  .And I
would like to make it work on my linux os.I will be very thankful if you can
provide details regarding this

thanks and regards
jenny tc
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070328/3ad12f6e/attachment.html>

From protasnb at gmail.com  Sat Mar 31 19:47:42 2007
From: protasnb at gmail.com (Natalie Protasevich)
Date: Sat, 31 Mar 2007 10:47:42 -0700
Subject: [Linux-uvc-devel] uvcvideo driver for x86_64
In-Reply-To: <32209efe0703272038k10a6f281v6cf0121e2442aefb@mail.gmail.com>
References: <32209efe0703272038k10a6f281v6cf0121e2442aefb@mail.gmail.com>
Message-ID: <32209efe0703311047i44c3348cy47a8ed8f8b210d87@mail.gmail.com>

On 3/27/07, Natalie Protasevich <protasnb at gmail.com> wrote:
>
> Hello,
> I am trying to use Logitech Pro 5000 web cam under Linux x86_64. I don't
> seem to have any problems with the webcam under Linux i386. But when I am
> trying to run it under x86_64, the application doesn't work. I heard some
> opinions about no support for video4linux L2 in the uvcvideo driver, but
> both the application and the driver seem to use l2 calls and have full L2
> support. However, the driver doesn't work which makes me think that this
> might be  the compat_ioctl32 layer in the linux kernel. The kernel level is
> 2.6.18.5, and I am also planning to test with the newest kernel, either
> -rc or even -mm tree.


I searched through this list and found it more than helpful! Just loading
latest Ubuntu Feisty brought in some patches that actually allowed my camera
to work, though I still get some error messages about unsynced buffers. It
does recover then, and I see a good image. Thanks to everyone who's
discussed this on the list and helped others like myself - and especially to
those to fixed the bugs in the latest kernel :)
Regards,
--Natalie
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070331/fb9aa93a/attachment.html>

