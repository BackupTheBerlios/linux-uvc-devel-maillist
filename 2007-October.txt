From hirofumi at momose.com  Mon Oct  1 03:57:10 2007
From: hirofumi at momose.com (Hirofumi Momose)
Date: Mon, 01 Oct 2007 10:57:10 +0900
Subject: [Linux-uvc-devel] webcam re-worked
Message-ID: <20071001105207.07C5.HIROFUMI@momose.com>

Hello, 

ML server down ?

Rev 130 contains uninitizalized pointer issue as follows.

--- uvc_v4l2.c  (revision 130)
+++ uvc_v4l2.c  (working copy)
@@ -44,7 +44,7 @@
 static int uvc_v4l2_query_menu(struct uvc_video_device *video, struct v4l2_querymenu *query_menu)
 {
        struct uvc_menu_info *menu_info;
-       struct uvc_control_mapping *mapping;
+       struct uvc_control_mapping *mapping = NULL;
        struct uvc_control *ctrl;
        __u32 i;

webcam re-works.
Best regards,
-- 
Hirofumi Momose <hirofumi at momose.com>



From carles at pina.cat  Tue Oct  2 20:08:46 2007
From: carles at pina.cat (Carles Pina i Estany)
Date: Tue, 2 Oct 2007 20:08:46 +0200
Subject: [Linux-uvc-devel] uvcvideo: Failed to query (135)...
In-Reply-To: <200709282250.23456.laurent.pinchart@skynet.be>
References: <20070921201909.GA5543@pinux.info>
	<200709262249.37683.laurent.pinchart@skynet.be>
	<20070926205417.GA11404@pinux.info>
	<200709282250.23456.laurent.pinchart@skynet.be>
Message-ID: <20071002180846.GA19581@pinux.info>


Hello again :-)

On Sep/28/2007, Laurent Pinchart wrote:
> On Wednesday 26 September 2007, Carles Pina i Estany wrote:
> > Hello again,
> >
> > On Sep/26/2007, Laurent Pinchart wrote:
> > > > > > I have a Logitech Quickcam Pro for Notebooks, that seems that is
> > > > > > well supported.
> > > > > >
> > > > > > But is not working. I'm using a Kernel 2.6.22, compiled myself,
> > > > > > with Video4Linux enabled. In dmesg I can see:
> > > > > >
> > > > > > ------------------
> > > > > > Linux video capture interface: v2.00
> > > > > > uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c3)
> > > > > > uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -110 (exp.
> > > > > > 26). uvcvideo: Failed to query (129) UVC control 1 (unit 0) : -110
> > > > > > (exp. 26). uvcvideo: Failed to initialize the device (-5).
> > > > > > usbcore: registered new interface driver uvcvideo
> > > > > > USB Video Class driver (v0.1.0)
> > > > > > ----------------
> > > > > > /dev/video0 is not created
> > > > > >
> > > > > > What can I do? I've read something about firmware bug, etc. but
> > > > > > last year this camera worked :-) just I have not used and now...
> > > > > > not working.
> > > >
> > > > If I load in usual way (modprobe, etc.) I guess that loads some other
> > > > modules and I don't have the "Unkown symbol" error. If I unload and
> > > > then I load again, I get the same error in dmesg (Failed to query (135)
> > > > UVC control)
> > >
> > > You have to make sure the system won't load the module automatically when
> > > you plug your webcam in, otherwise uvcvideo.ko will be associated with
> > > the camera before usbaudio.ko, and initialisation will fail.
> >
> > I'm 100% sure that has not been loaded before, this time.
> > And even when is not working, usbaudio.ko is not loaded:
> > pinux:/lib/modules/2.6.22# find . -iname "*usbadio*"
> > pinux:/lib/modules/2.6.22#
> >
> > > > carles at pinux:~$ lsmod|grep -i video
> > > > uvcvideo               44804  0
> > > > compat_ioctl32          1408  1 uvcvideo
> > > > videodev               26112  1 uvcvideo
> > > > v4l2_common            14464  2 uvcvideo,videodev
> > > > usbcore               117896  5 uvcvideo,usb_storage,usbhid,uhci_hcd
> > > > carles at pinux:~$
> > >
> > > Try to load videodev and compat_ioctl32 (using modprobe) before you
> > > insmod ./uvcvideo.ko. uvcvideo.ko depends on videodev and compat_ioctl32,
> > > but insmod doesn't load dependencies automatically.
> >
> > I loaded it, then I plugged the camera, then I insmoded uvcvideo.ko
> > (which one is in other directory, not in /lib/modules/...). But not
> > worked :-(
> >
> > What else I can do? I think that should be some software problem, one
> > year ago worked :-)
> 
> Just to make sure module-init-tools didn't play tricks on you:
> 
> 1. plug your webcam

Ok, done!

> 2. run lsmod to check that usbaudio is loaded and that uvcvideo is *not* 
> loaded

usbaudio is not loaded. But, as I said, I'm using my customized
kernel... I think that I have not compiled this option. Do you want that
I enable it? Or worst, maybe is inside kernel

pinux:~# lsmod|grep -i audio
pinux:~#

Attached the output of lsmod

> 3. load uvcvideo

done!
pinux:~# insmod ./uvcvideo.ko 
pinux:~# 

> 4. if it still fails, show me the dmesg output

usb 5-2: new high speed USB device using ehci_hcd and address 5
PM: Adding info for usb:5-2
PM: Adding info for No Bus:usbdev5.5_ep00
usb 5-2: configuration #1 chosen from 1 choice
PM: Adding info for usb:5-2:1.0
PM: Adding info for No Bus:usbdev5.5_ep87
PM: Adding info for usb:5-2:1.1
PM: Adding info for usb:5-2:1.2
PM: Adding info for usb:5-2:1.3
PM: Adding info for No Bus:usbdev5.5
Linux video capture interface: v2.00
uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c3)
uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -110 (exp. 26).
uvcvideo: Failed to query (129) UVC control 1 (unit 0) : -110 (exp. 26).
uvcvideo: Failed to initialize the device (-5).
usbcore: registered new interface driver uvcvideo
USB Video Class driver (v0.1.0)
pinux:~# 

from lsusub:
Bus 005 Device 005: ID 046d:08c3 Logitech, Inc. 

If you need (I guess so) any other test: don't hesitate to tell me, it's
not a problem to help on this :)

And I think that I will be able to answer more often than last week :-)
(this looks like snail mail and not email :-D)

Regards,

-- 
Carles Pina i Estany		GPG id: 0x8CBDAE64
	http://pinux.info	Manresa - Barcelona
-------------- next part --------------
Module                  Size  Used by
compat_ioctl32          1408  0 
videodev               26112  0 
v4l2_common            14464  1 videodev
vmnet                  32436  3 
parport_pc             36324  0 
parport                33608  1 parport_pc
vmmon                1817964  0 
rfcomm                 33688  0 
l2cap                  20352  5 rfcomm
bluetooth              47076  4 rfcomm,l2cap
thermal                11016  0 
fan                     3844  0 
ac                      3972  0 
xfs                   489884  0 
ircomm_tty             20616  0 
ircomm                 10756  1 ircomm_tty
fglrx                 533764  11 
agpgart                27596  1 fglrx
hdaps                   7496  0 
processor              24892  1 thermal
button                  6288  0 
battery                 8452  0 
usbhid                 24032  0 
usb_storage            34052  0 
pcmcia                 32664  0 
joydev                  8512  0 
snd_hda_intel         245912  0 
snd_pcm_oss            39200  0 
snd_mixer_oss          14464  1 snd_pcm_oss
yenta_socket           23564  1 
rsrc_nonstatic          9600  1 yenta_socket
pcmcia_core            33304  3 pcmcia,yenta_socket,rsrc_nonstatic
snd_pcm                69252  2 snd_hda_intel,snd_pcm_oss
irtty_sir               5376  0 
sir_dev                11268  1 irtty_sir
irda                  114488  3 ircomm_tty,ircomm,sir_dev
snd_timer              19204  1 snd_pcm
e1000                 118592  0 
ehci_hcd               28940  0 
i2c_i801                7952  0 
crc_ccitt               2176  1 irda
uhci_hcd               22412  0 
usbcore               117896  5 usbhid,usb_storage,ehci_hcd,uhci_hcd
snd                    43876  5 snd_hda_intel,snd_pcm_oss,snd_mixer_oss,snd_pcm,snd_timer
snd_page_alloc          7816  2 snd_hda_intel,snd_pcm
psmouse                36368  0 
evdev                   8064  3 

From linux at rubli.info  Wed Oct  3 05:56:33 2007
From: linux at rubli.info (Martin Rubli)
Date: Wed, 03 Oct 2007 11:56:33 +0800
Subject: [Linux-uvc-devel] Which cameras really work with linux-uvc?
In-Reply-To: <200709280949.35821.mxhaard@magic.fr>
References: <a7e90f9d0709190609h7983ea1cxf02ea529a18dcf67@mail.gmail.com>
	<200709242226.29077.laurent.pinchart@skynet.be>
	<op.tzcf3ewm42iof8@mrubli-nb.am.logitech.com>
	<200709280949.35821.mxhaard@magic.fr>
Message-ID: <op.tzlrwjat42iof8@mrubli-nb.am.logitech.com>

On Fri, 28 Sep 2007 15:49:35 +0800, Michel Xhaard <mxhaard at magic.fr> wrote:

> Martin,
> Can you change spca5xx on quickcamteam.net by gspca. spca5xx is now  
> deprecated and did not work for a lot of Logitech webcams
> Bests regards

Sure, I'll update it. But can you clarify a few things for me? On your  
compatibility list (http://mxhaard.free.fr/spca5xx.html) there are a few  
cameras that have "spca5xx", others have "gspcav1" or "gspca v4l1/v4l2".

1. What's the difference between  "gspcav1" and "gspca v4l1/v4l2"?

2. What is the status of the spca5xx driver? Is it obsolete and 100%  
replaced by gspca? Or are there certain devices for which people have to  
keep using spca5xx because gspca doesn't support them yet?

I'd like to explain those things on quickcamteam.net when I do the update.

Thanks!
Martin


From xbenlau at gmail.com  Wed Oct  3 10:20:03 2007
From: xbenlau at gmail.com (Ben Lau)
Date: Wed, 3 Oct 2007 16:20:03 +0800
Subject: [Linux-uvc-devel] Frame rate drops in low light environment
Message-ID: <f9a7555e0710030120q70251e7euefb04ad2e578093d@mail.gmail.com>

Hi,

   I have VGear Talkcam MX6 EZ and Talkcam MX6 AF. In low light
environment, both of the webcam drop frame rate from 25fps to 12fps
(or even lower) automatically. Can I forbid the camera to drop frame
through the UVC driver?

p.s Do the Creative Live! Optia has the same problem?

The available control of the camera:

$ luvcview -f yuv -l
luvcview version 0.2.1
Video driver: x11
A window manager is available
video /dev/video0
Available controls of device 'Camera 1' (Type 1=Integer 2=Boolean
3=Menu 4=Button)
V4L2_CID_BASE         (predefined controls):
 index:9963776    name:Brightness                       type:1
min:-128  max:127   step:1     def:0     now:0
 index:9963777    name:Contrast                         type:1 min:0
  max:100   step:1     def:0     now:0
 index:9963778    name:Saturation                       type:1 min:0
  max:100   step:1     def:0     now:0
 index:9963779    name:Hue                              type:1 min:-40
  max:40    step:1     def:0     now:0
 index:9963792    name:Gamma                            type:1 min:1
  max:100   step:1     def:1     now:1
V4L2_CID_PRIVATE_BASE (driver specific controls):
 index:134217728  name:Backlight Compensation           type:1 min:0
  max:1    step:1     def:0     now:0
 index:134217729  name:Power Line Frequency             type:3 min:0
  max:2    step:1     def:1     now:1
  Menu items:
  index:0 name:Disabled
  index:1 name:50 Hz
  index:2 name:60 Hz
 index:134217730  name:Sharpness                        type:1 min:0
  max:100   step:1     def:0     now:0

Thanks.


From funtasyspace at yahoo.com  Wed Oct  3 11:05:16 2007
From: funtasyspace at yahoo.com (=?iso-8859-1?Q?J=F6rg_Hermsdorf?=)
Date: Wed, 3 Oct 2007 02:05:16 -0700 (PDT)
Subject: [Linux-uvc-devel] cracking/cliping noise
Message-ID: <886912.5565.qm@web50007.mail.re2.yahoo.com>

Is there a problem with email attachments on this list? I sent this email 3 days ago, but it's not 
shown in the archive so I guess it wasn't delivered to the members in this list, too!? I try it again, 
this time without the attachment.

Hi all,

well, this is not directly an uvcvideo issue, but maybe somebody here
 can help or at least confirm this.

If I grab/record from the built-in microphone of my Logitech QuickCam
 Sphere, I experience a strange 
clicking/cracking/snapping noise every few seconds in the recorded
 file. 

I attached a sample of what this sounds like, to this email (as mp3
 file). Edit: Download the sample from 
http://forums.quickcamteam.net/attachment.php?aid=1

So far, I've no idea what could be the reason for this noise, but did
 several tests to narrow down the problem:
I used different applications to record, ffmpeg (via oss device
 /dev/dsp2) and arecord (via alsa device hw:0,2),
it makes no difference.
I tried different usb ports. Did not help.
I tried different machines with different kernel versions:
 - 2.6.18.8 (i586)
 - 2.6.22.5 (x86_64)
But it happens on both machines.

I tested this on Windows XP and there the noise does not occur, so I
 guess it's no hardware error,
at least none that is triggered on Windows XP.
Next I tested with a different usb microphone. I used the Logitech
 QuickCam Communicate STX (046d:087d).
With this device there is no noise. So the question is:
a) Is this a hardware problem with only my cam which happens only on
 Linux?
b) Are all QuickCam Sphere MP devices affected?
c) Are several Logitech models affected?

So can anybody confirm this with their cam, please? 
The command I used to record from the cam microphone is:

# ffmpeg -f audio_device -i /dev/dsp2 -f mp3 test.mp3


Best regards,
J?rg



      Jetzt Mails schnell in einem Vorschaufenster ?berfliegen. Dies und viel mehr bietet das neue Yahoo! Mail - www.yahoo.de/mail


From carles at pina.cat  Wed Oct  3 20:58:27 2007
From: carles at pina.cat (Carles Pina i Estany)
Date: Wed, 3 Oct 2007 20:58:27 +0200
Subject: [Linux-uvc-devel] uvcvideo: Failed to query (135)...
In-Reply-To: <1191145113.22070.2.camel@cass-wks>
References: <20070921201909.GA5543@pinux.info>
	<200709220029.15705.laurent.pinchart@skynet.be>
	<1191145113.22070.2.camel@cass-wks>
Message-ID: <20071003185827.GA7591@pinux.info>


Hi! (specially to Laurent)

Sorry to not answer my last email, I don't have it here :-)

On Sep/30/2007, Guillaume Desmottes wrote:
> 
> Le samedi 22 septembre 2007 ? 00:29 +0200, Laurent Pinchart a ?crit :
> > The webcam audio interface must be initialised before the video interface. 
> > Linux will by default initialise the video interface first, so you need to 
> > remove the uvcvideo.ko module from the /lib/modules subdirectory where it 
> > gets loaded automatically, and load it manually after plugging the webcam.

Laurent: it already works!
Now I updated from Kernel 2.6.22 to 2.6.22.9, I followed the same steps
than before and now I have camera, buf!! 

I have one problem now: I cannot use it in Kopete. But I will check some
things and maybe open a new thread.

I think that the only think that I changed is version kernel, and I
enalbed usbaudio module :-D (you was talking so much about it that I
missed it :-) )

Thanks very much,

-- 
Carles Pina i Estany		GPG id: 0x8CBDAE64
	http://pinux.info	Manresa - Barcelona


From carles at pina.cat  Wed Oct  3 21:04:16 2007
From: carles at pina.cat (Carles Pina i Estany)
Date: Wed, 3 Oct 2007 21:04:16 +0200
Subject: [Linux-uvc-devel] kopete
Message-ID: <20071003190416.GA8179@pinux.info>


Hi again,

In my last mail, I said that my camera is not working in kopete. I can
see here:
https://lists.berlios.de/pipermail/linux-uvc-devel/2007-August/002049.html
that I need last kopete svn version :-) so now everything matches :-)

What do you use to have videocalls with uvcvideo? beside ekiga, maybe
amsn? 

Thanks!

-- 
Carles Pina i Estany		GPG id: 0x8CBDAE64
	http://pinux.info	Manresa - Barcelona


From pierre.gronlier at gmail.com  Wed Oct  3 21:33:40 2007
From: pierre.gronlier at gmail.com (pierre gronlier)
Date: Wed, 3 Oct 2007 21:33:40 +0200
Subject: [Linux-uvc-devel] shared access from several applications
	simulataneously?
In-Reply-To: <420457.76677.qm@web50012.mail.re2.yahoo.com>
References: <420457.76677.qm@web50012.mail.re2.yahoo.com>
Message-ID: <ecc945da0710031233n4928f82cp925ad228792bfdc5@mail.gmail.com>

On 30/09/2007, J?rg Hermsdorf <funtasyspace at yahoo.com> wrote:
> Hi everybody,
>
> I wonder if it would be possible to access my webcam with several applications simultaneously?
> I would like to stream my cam 24/7 via VLC, but want to be able to use it with wengophone at the
> same time, without killing the VLC server.
> I know that v4l2 applications bind to the video device exclusively, but wouldn't it be possible to setup
> kind of a shadow video device which is just a copy of the original v4l2 device? This shadow device doesn't
> need to implement any controls, just stream a copy of all frames that are sent from the cam to the primary
> video device (/dev/video0), so other, secondary applications can just "listen" to the stream.
>
> Best regards,
> J?rg
>
>
>
>
>       ________
> Yahoo! Clever: Stellen Sie Fragen und finden Sie Antworten. Teilen Sie Ihr Wissen. www.yahoo.de/clever
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


You may try
http://www.lavrsen.dk/twiki/bin/view/Motion/VideoFourLinuxLoopbackDevice

-- 
Pierre Gronlier

From laurent.pinchart at skynet.be  Thu Oct  4 00:18:44 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 4 Oct 2007 00:18:44 +0200
Subject: [Linux-uvc-devel] uvcvideo: Failed to query (135)...
In-Reply-To: <1191145113.22070.2.camel@cass-wks>
References: <20070921201909.GA5543@pinux.info>
	<200709220029.15705.laurent.pinchart@skynet.be>
	<1191145113.22070.2.camel@cass-wks>
Message-ID: <200710040018.45523.laurent.pinchart@skynet.be>

Hi Guillaume,

On Sunday 30 September 2007, Guillaume Desmottes wrote:
> Le samedi 22 septembre 2007 ? 00:29 +0200, Laurent Pinchart a ?crit :
> > The webcam audio interface must be initialised before the video
> > interface. Linux will by default initialise the video interface first, so
> > you need to remove the uvcvideo.ko module from the /lib/modules
> > subdirectory where it gets loaded automatically, and load it manually
> > after plugging the webcam.
>
> Just wondering. Is that ok if I manually unload the uvcvideo driver
> after booting, re-plug the device and the re-load the uvcvideo driver?
> Or am I fucked as soon the uvcvideo driver was loaded before the
> usbaudio during the boot?

It's ok. The only requirement is that the audio driver initialises the camera 
before the video driver. As the video interface is before the audio 
interface, the kernel would call the video driver first. That's why you have 
to make sure the video driver is not loaded (and can't be loaded) when you 
plug the webcam.

> Do you know if we have any chance to see a real fix in the next kernel
> releases?

I don't know. This is a webcam bug, and it affects the USB subsystem in some 
weird ways. As all of this is timing-related, I doubt we will see a real fix 
anytime soon.

The patch that has been added to 2.6.22 could be reverted, but it fixes 
problems for other usbaudio devices, so it should probably stay in.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Oct  4 00:41:57 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 4 Oct 2007 00:41:57 +0200
Subject: [Linux-uvc-devel] uvcvideo: Failed to query (135)...
In-Reply-To: <20071003185827.GA7591@pinux.info>
References: <20070921201909.GA5543@pinux.info>
	<1191145113.22070.2.camel@cass-wks>
	<20071003185827.GA7591@pinux.info>
Message-ID: <200710040041.57729.laurent.pinchart@skynet.be>

On Wednesday 03 October 2007, Carles Pina i Estany wrote:
> Hi! (specially to Laurent)
>
> Sorry to not answer my last email, I don't have it here :-)
>
> On Sep/30/2007, Guillaume Desmottes wrote:
> > Le samedi 22 septembre 2007 ? 00:29 +0200, Laurent Pinchart a ?crit :
> > > The webcam audio interface must be initialised before the video
> > > interface. Linux will by default initialise the video interface first,
> > > so you need to remove the uvcvideo.ko module from the /lib/modules
> > > subdirectory where it gets loaded automatically, and load it manually
> > > after plugging the webcam.
>
> Laurent: it already works!
> Now I updated from Kernel 2.6.22 to 2.6.22.9, I followed the same steps
> than before and now I have camera, buf!!

That's good news (even though I don't understand why :-/).

> I have one problem now: I cannot use it in Kopete. But I will check some
> things and maybe open a new thread.
>
> I think that the only think that I changed is version kernel, and I
> enalbed usbaudio module :-D (you was talking so much about it that I
> missed it :-) )

There are really nasty bugs in those webcams, it's hard to tell what triggers 
them exactly, and even harder to work around them. The usbaudio module 
probably influences the overall USB timings, which make the webcam happy. I 
hope the next kernels won't break anything there. Fingers crossed.

> Thanks very much,

You're welcome. I didn't do much this time :-)

Best regards,

Laurent Pinchart


From geoff at gweb.org  Thu Oct  4 00:53:23 2007
From: geoff at gweb.org (Geoffrey Plitt)
Date: Wed, 3 Oct 2007 15:53:23 -0700
Subject: [Linux-uvc-devel] sample code? "hello world" for linux video?
Message-ID: <21f71af10710031553m1b4d422ao6e54592aff141a25@mail.gmail.com>

hi! is there any sample code i can start with to learn the UVC linux video
usage?

i'm thinking a "hello world" app for UVC would access the camera and just
save frames as raw images to a folder or something.

-geoff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071003/fee404b7/attachment.html>

From laurent.pinchart at skynet.be  Thu Oct  4 00:59:24 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 4 Oct 2007 00:59:24 +0200
Subject: [Linux-uvc-devel] webcam re-worked
In-Reply-To: <20071001105207.07C5.HIROFUMI@momose.com>
References: <20071001105207.07C5.HIROFUMI@momose.com>
Message-ID: <200710040059.25214.laurent.pinchart@skynet.be>

Hi,

On Monday 01 October 2007, Hirofumi Momose wrote:
> Hello,
>
> ML server down ?

I think it was. I received a bunch of Linux UVC e-mails today.

> Rev 130 contains uninitizalized pointer issue as follows.
>
> --- uvc_v4l2.c  (revision 130)
> +++ uvc_v4l2.c  (working copy)
> @@ -44,7 +44,7 @@
>  static int uvc_v4l2_query_menu(struct uvc_video_device *video, struct
> v4l2_querymenu *query_menu) {
>         struct uvc_menu_info *menu_info;
> -       struct uvc_control_mapping *mapping;
> +       struct uvc_control_mapping *mapping = NULL;
>         struct uvc_control *ctrl;
>         __u32 i;
>
> webcam re-works.
> Best regards,

Thanks a lot for the patch (and the oops report in your previous mail).

There were a few more identical uninitialised pointers issues so I committed a 
slightly different fix. Could you please test the latest SVN revision ?

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Oct  4 01:07:13 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 4 Oct 2007 01:07:13 +0200
Subject: [Linux-uvc-devel] Frame rate drops in low light environment
In-Reply-To: <f9a7555e0710030120q70251e7euefb04ad2e578093d@mail.gmail.com>
References: <f9a7555e0710030120q70251e7euefb04ad2e578093d@mail.gmail.com>
Message-ID: <200710040107.14280.laurent.pinchart@skynet.be>

Hi Ben,

On Wednesday 03 October 2007, Ben Lau wrote:
> Hi,
>
>    I have VGear Talkcam MX6 EZ and Talkcam MX6 AF. In low light
> environment, both of the webcam drop frame rate from 25fps to 12fps
> (or even lower) automatically. Can I forbid the camera to drop frame
> through the UVC driver?

I'm afraid not. Your webcams default to automatic exposure mode, which is 
allowed to lower the frame rate in low light conditions. You would need to 
switch to manual exposure mode, but that doesn't seem to be possible with the 
VGear Talkcam MX6.

To confirm this (or to prove me wrong :-)), have a look at the USB descriptors 
with lsusb -v (usbutils 0.72 or newer). If the Input Terminal 
has "Auto-Exposure Mode" and "Exposure Time (Absolute)" controls, then you 
will be able to switch to manual exposure. Otherwise, you're stuck with lower 
frame rates.

> p.s Do the Creative Live! Optia has the same problem?

I'm not sure if the webcam will lower the frame rate, but it supports manual 
exposure so you should be safe.

> The available control of the camera:
>
> $ luvcview -f yuv -l
> luvcview version 0.2.1
> Video driver: x11
> A window manager is available
> video /dev/video0
> Available controls of device 'Camera 1' (Type 1=Integer 2=Boolean
> 3=Menu 4=Button)
> V4L2_CID_BASE         (predefined controls):
>  index:9963776    name:Brightness                       type:1
> min:-128  max:127   step:1     def:0     now:0
>  index:9963777    name:Contrast                         type:1 min:0
>   max:100   step:1     def:0     now:0
>  index:9963778    name:Saturation                       type:1 min:0
>   max:100   step:1     def:0     now:0
>  index:9963779    name:Hue                              type:1 min:-40
>   max:40    step:1     def:0     now:0
>  index:9963792    name:Gamma                            type:1 min:1
>   max:100   step:1     def:1     now:1
> V4L2_CID_PRIVATE_BASE (driver specific controls):
>  index:134217728  name:Backlight Compensation           type:1 min:0
>   max:1    step:1     def:0     now:0
>  index:134217729  name:Power Line Frequency             type:3 min:0
>   max:2    step:1     def:1     now:1
>   Menu items:
>   index:0 name:Disabled
>   index:1 name:50 Hz
>   index:2 name:60 Hz
>  index:134217730  name:Sharpness                        type:1 min:0
>   max:100   step:1     def:0     now:0

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Oct  4 01:11:10 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 4 Oct 2007 01:11:10 +0200
Subject: [Linux-uvc-devel] cracking/cliping noise
In-Reply-To: <886912.5565.qm@web50007.mail.re2.yahoo.com>
References: <886912.5565.qm@web50007.mail.re2.yahoo.com>
Message-ID: <200710040111.11113.laurent.pinchart@skynet.be>

Hi J?rg,

On Wednesday 03 October 2007, J?rg Hermsdorf wrote:
> Is there a problem with email attachments on this list? I sent this email 3
> days ago, but it's not shown in the archive so I guess it wasn't delivered
> to the members in this list, too!? I try it again, this time without the
> attachment.

E-mails larger than a few tens of kilobytes are delayed until administrator 
approval. As the mailing list server seemed to be down, I only got the 
approval request today. Sorry.

I'll try to test your noise problem to see if I can reproduce it, but that 
probably won't be before this weekend.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Oct  4 01:14:44 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 4 Oct 2007 01:14:44 +0200
Subject: [Linux-uvc-devel] uvcvideo: Found UVC 1.00 device SANYO Digital
	Camera (0474:0238)
In-Reply-To: <20070929113129.fbfe2e1d.lars.taeuber@gmx.net>
References: <20070924232655.9f0182fb.lars.taeuber@gmx.net>
	<200709290002.09660.laurent.pinchart@skynet.be>
	<20070929113129.fbfe2e1d.lars.taeuber@gmx.net>
Message-ID: <200710040114.44751.laurent.pinchart@skynet.be>

On Saturday 29 September 2007, Lars T?uber wrote:
> Hi Laurent,
>
> On Sat, 29 Sep 2007 00:02:09 +0200 Laurent Pinchart 
<laurent.pinchart at skynet.be> wrote:
> > That's a new one. I havent seen that webcam before. It might be based on
> > a new chipset.
>
> actually it's not a pure webcam but a mixture of digicam and camcorder with
> a webcam feature. This model is some years old you can't buy it anymore.
> You can find some more info here:
> http://www.sanyo-dsc.com/english/products/vpc_hd1/spec/index.html
>
> > I'm afraid there's not much I can do. The camera doesn't define any
> > control, so we can't test them to see if the camera is still somehow
> > alive after the first luvcview run.
> >
> > I suspect either a timing issue, or more probably some kind of firmware
> > bug not triggered by Windows. The Windows driver might send an optional
> > command to the webcam when stopping the stream, and failing to send that
> > command might trigger a bug.
> >
> > Would you be able to get a USB trace when the webcam is plugged in a
> > Windows box ?
>
> I don't have a windows box but I could ask a friend of mine. How can I get
> such a trace?

That's a very good question :-) USB Snoopy/SnoopyPro might help you. Have a 
look at http://mxhaard.free.fr/spca50x/Download/snoopy.pdf (google might help 
if you have issues with the software).

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Oct  4 01:15:58 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 4 Oct 2007 01:15:58 +0200
Subject: [Linux-uvc-devel] kopete
In-Reply-To: <20071003190416.GA8179@pinux.info>
References: <20071003190416.GA8179@pinux.info>
Message-ID: <200710040115.59938.laurent.pinchart@skynet.be>

Hi,

On Wednesday 03 October 2007, Carles Pina i Estany wrote:
> Hi again,
>
> In my last mail, I said that my camera is not working in kopete. I can
> see here:
> https://lists.berlios.de/pipermail/linux-uvc-devel/2007-August/002049.html
> that I need last kopete svn version :-) so now everything matches :-)
>
> What do you use to have videocalls with uvcvideo? beside ekiga, maybe
> amsn?

I heard that aMsn (you might need the SVN version again) works too.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Oct  4 01:20:15 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 4 Oct 2007 01:20:15 +0200
Subject: [Linux-uvc-devel] sample code? "hello world" for linux video?
In-Reply-To: <21f71af10710031553m1b4d422ao6e54592aff141a25@mail.gmail.com>
References: <21f71af10710031553m1b4d422ao6e54592aff141a25@mail.gmail.com>
Message-ID: <200710040120.16424.laurent.pinchart@skynet.be>

Hi Geoffrey,

On Thursday 04 October 2007, Geoffrey Plitt wrote:
> hi! is there any sample code i can start with to learn the UVC linux video
> usage?
>
> i'm thinking a "hello world" app for UVC would access the camera and just
> save frames as raw images to a folder or something.

The Linux UVC driver implements the V4L2 API. There is a V4L2 driver 
development guide, but no such document for the application side as far as I 
know. The V4L mailing list (video4linux-list at redhat.com) might be more 
helpful.

Best regards,

Laurent Pinchart


From ernih at gmx.de  Thu Oct  4 01:38:15 2007
From: ernih at gmx.de (ernih at gmx.de)
Date: Thu, 4 Oct 2007 01:38:15 +0200
Subject: [Linux-uvc-devel] Fwd: Re:  kopete
Message-ID: <200710040138.16054.ernih@gmx.de>

do u have an link for me? where i can see what i have to do?
----------  Forwarded Message  ----------

Subject: Re: [Linux-uvc-devel] kopete
Date: Donnerstag 04 Oktober 2007
From: Laurent Pinchart <laurent.pinchart at skynet.be>
To: linux-uvc-devel at lists.berlios.de

Hi,

On Wednesday 03 October 2007, Carles Pina i Estany wrote:
> Hi again,
>
> In my last mail, I said that my camera is not working in kopete. I can
> see here:
> https://lists.berlios.de/pipermail/linux-uvc-devel/2007-August/002049.html
> that I need last kopete svn version :-) so now everything matches :-)
>
> What do you use to have videocalls with uvcvideo? beside ekiga, maybe
> amsn?

I heard that aMsn (you might need the SVN version again) works too.

Best regards,

Laurent Pinchart
_______________________________________________
Linux-uvc-devel mailing list
Linux-uvc-devel at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/linux-uvc-devel

-------------------------------------------------------


From dmnewman at pobox.com  Thu Oct  4 04:16:33 2007
From: dmnewman at pobox.com (Daniel M. Newman)
Date: Thu, 04 Oct 2007 12:16:33 +1000
Subject: [Linux-uvc-devel] uvc revision 132 and iSight
Message-ID: <47044D01.7000007@pobox.com>

I've been looking for an up-to-date patch for the Macbook Pro built-in
iSight camera, and the most recent I can find is against uvcvideo
version 117.  It seems fairly incompatible with the current uvcvideo
svn.  Can anyone point me to a patch for revision 132?

Thanks in advance,
Dan



From xbenlau at gmail.com  Thu Oct  4 06:22:29 2007
From: xbenlau at gmail.com (Ben Lau)
Date: Thu, 4 Oct 2007 12:22:29 +0800
Subject: [Linux-uvc-devel] Frame rate drops in low light environment
In-Reply-To: <200710040107.14280.laurent.pinchart@skynet.be>
References: <f9a7555e0710030120q70251e7euefb04ad2e578093d@mail.gmail.com>
	<200710040107.14280.laurent.pinchart@skynet.be>
Message-ID: <f9a7555e0710032122n2ac4207co216b60d67d67fedf@mail.gmail.com>

Hi Laurent,

On 10/4/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> Hi Ben,
>
> On Wednesday 03 October 2007, Ben Lau wrote:
> > Hi,
> >
> >    I have VGear Talkcam MX6 EZ and Talkcam MX6 AF. In low light
> > environment, both of the webcam drop frame rate from 25fps to 12fps
> > (or even lower) automatically. Can I forbid the camera to drop frame
> > through the UVC driver?
>
> I'm afraid not. Your webcams default to automatic exposure mode, which is
> allowed to lower the frame rate in low light conditions. You would need to
> switch to manual exposure mode, but that doesn't seem to be possible with the
> VGear Talkcam MX6.
>
> To confirm this (or to prove me wrong :-)), have a look at the USB descriptors
> with lsusb -v (usbutils 0.72 or newer). If the Input Terminal
> has "Auto-Exposure Mode" and "Exposure Time (Absolute)" controls, then you
> will be able to switch to manual exposure. Otherwise, you're stuck with lower
> frame rates.

I can't prove you are wrong... the result of lsusb show  none of
control related to auto-exposure and exposure time.

Thanks for reply.

>
> > p.s Do the Creative Live! Optia has the same problem?
>
> I'm not sure if the webcam will lower the frame rate, but it supports manual
> exposure so you should be safe.
>
> > The available control of the camera:
> >
> > $ luvcview -f yuv -l
> > luvcview version 0.2.1
> > Video driver: x11
> > A window manager is available
> > video /dev/video0
> > Available controls of device 'Camera 1' (Type 1=Integer 2=Boolean
> > 3=Menu 4=Button)
> > V4L2_CID_BASE         (predefined controls):
> >  index:9963776    name:Brightness                       type:1
> > min:-128  max:127   step:1     def:0     now:0
> >  index:9963777    name:Contrast                         type:1 min:0
> >   max:100   step:1     def:0     now:0
> >  index:9963778    name:Saturation                       type:1 min:0
> >   max:100   step:1     def:0     now:0
> >  index:9963779    name:Hue                              type:1 min:-40
> >   max:40    step:1     def:0     now:0
> >  index:9963792    name:Gamma                            type:1 min:1
> >   max:100   step:1     def:1     now:1
> > V4L2_CID_PRIVATE_BASE (driver specific controls):
> >  index:134217728  name:Backlight Compensation           type:1 min:0
> >   max:1    step:1     def:0     now:0
> >  index:134217729  name:Power Line Frequency             type:3 min:0
> >   max:2    step:1     def:1     now:1
> >   Menu items:
> >   index:0 name:Disabled
> >   index:1 name:50 Hz
> >   index:2 name:60 Hz
> >  index:134217730  name:Sharpness                        type:1 min:0
> >   max:100   step:1     def:0     now:0
>
> Best regards,
>
> Laurent Pinchart
>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: VGear-Talkcam-MX6-EZ-0c42-62c0.txt
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071004/e58ea5ba/attachment.txt>

From rlharris at oplink.net  Thu Oct  4 10:29:55 2007
From: rlharris at oplink.net (Russell L. Harris)
Date: Thu, 4 Oct 2007 03:29:55 -0500
Subject: [Linux-uvc-devel] driver installation in Debian
Message-ID: <20071004082955.GA4379@oplink.net>

I am confused.  I am running Debian testing ("Lenny"), and, if
possible, I would like to install the linux-uvc drivers in accordance
with Debian protocol.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

I used aptitude to install the Debian package linux-uvc-source.  The
installation provided the file /usr/src/linux-uvc.tar.bz2 , which is
expanded with bunzip2 and tar, providing the following files:

    /usr/src/modules/linux-uvc/debian/rules
    /usr/src/modules/linux-uvc/debian/control.modules.in
    /usr/src/modules/linux-uvc/debian/control
    /usr/src/modules/linux-uvc/debian/compat

    /usr/src/modules/linux-uvc/debian/copyright
    /usr/src/modules/linux-uvc/debian/changelog
    /usr/src/modules/linux-uvc/debian/README.Debian

    /usr/src/modules/linux-uvc/Makefile

    /usr/src/modules/linux-uvc/uvcvideo.h

    /usr/src/modules/linux-uvc/uvc_video.c
    /usr/src/modules/linux-uvc/uvc_driver.c
    /usr/src/modules/linux-uvc/uvc_queue.c
    /usr/src/modules/linux-uvc/uvc_ctrl.c
    /usr/src/modules/linux-uvc/uvc_v4l2.c
    /usr/src/modules/linux-uvc/uvc_compat.h

    /usr/src/modules/linux-uvc/extract.c
    /usr/src/modules/linux-uvc/.uvcvideo.o.d

    /usr/src/modules/linux-uvc/macbook-insight-firmware-loader.8

It appears to me that, once I discover the proper Debian approach to
installation of linux-uvc, I can update the drivers simply by copying
into /usr/src/modules/linux-uvc/ the latest source files obtained via:

    # svn checkout svn://svn.berlios.de/linux-uvc/linux-uvc/trunk linux-uvc

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


From richard at 2007.atterer.net  Thu Oct  4 10:59:00 2007
From: richard at 2007.atterer.net (Richard Atterer)
Date: Thu, 4 Oct 2007 10:59:00 +0200
Subject: [Linux-uvc-devel] sample code? "hello world" for linux video?
In-Reply-To: <21f71af10710031553m1b4d422ao6e54592aff141a25@mail.gmail.com>
References: <21f71af10710031553m1b4d422ao6e54592aff141a25@mail.gmail.com>
Message-ID: <20071004085900.GA4112@fluff.lan>

Hi all,

On Wed, Oct 03, 2007 at 03:53:23PM -0700, Geoffrey Plitt wrote:
> hi! is there any sample code i can start with to learn the UVC linux video
> usage?

A little searching on the web also turned up this, which looks quite 
promising: http://v4l2spec.bytesex.org/spec/

Cheers,

  Richard

-- 
  __   _
  |_) /|  Richard Atterer     |  GnuPG key: 888354F7
  | \/?|  http://atterer.net  |  08A9 7B7D 3D13 3EF2 3D25  D157 79E6 F6DC 8883 54F7
  ? '` ?


From xbenlau at gmail.com  Thu Oct  4 11:14:37 2007
From: xbenlau at gmail.com (Ben Lau)
Date: Thu, 4 Oct 2007 17:14:37 +0800
Subject: [Linux-uvc-devel] driver installation in Debian
In-Reply-To: <20071004082955.GA4379@oplink.net>
References: <20071004082955.GA4379@oplink.net>
Message-ID: <f9a7555e0710040214v7234c9d9p2ed5c45aec8a2e70@mail.gmail.com>

On 10/4/07, Russell L. Harris <rlharris at oplink.net> wrote:
> I am confused.  I am running Debian testing ("Lenny"), and, if
> possible, I would like to install the linux-uvc drivers in accordance
> with Debian protocol.
>
> %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
>
> I used aptitude to install the Debian package linux-uvc-source.  The
> installation provided the file /usr/src/linux-uvc.tar.bz2 , which is
> expanded with bunzip2 and tar, providing the following files:
>
>     /usr/src/modules/linux-uvc/debian/rules
>     /usr/src/modules/linux-uvc/debian/control.modules.in
>     /usr/src/modules/linux-uvc/debian/control
>     /usr/src/modules/linux-uvc/debian/compat
>
>     /usr/src/modules/linux-uvc/debian/copyright
>     /usr/src/modules/linux-uvc/debian/changelog
>     /usr/src/modules/linux-uvc/debian/README.Debian
>
>     /usr/src/modules/linux-uvc/Makefile
>
>     /usr/src/modules/linux-uvc/uvcvideo.h
>
>     /usr/src/modules/linux-uvc/uvc_video.c
>     /usr/src/modules/linux-uvc/uvc_driver.c
>     /usr/src/modules/linux-uvc/uvc_queue.c
>     /usr/src/modules/linux-uvc/uvc_ctrl.c
>     /usr/src/modules/linux-uvc/uvc_v4l2.c
>     /usr/src/modules/linux-uvc/uvc_compat.h
>
>     /usr/src/modules/linux-uvc/extract.c
>     /usr/src/modules/linux-uvc/.uvcvideo.o.d
>
>     /usr/src/modules/linux-uvc/macbook-insight-firmware-loader.8
>
> It appears to me that, once I discover the proper Debian approach to
> installation of linux-uvc, I can update the drivers simply by copying
> into /usr/src/modules/linux-uvc/ the latest source files obtained via:
>
>     # svn checkout svn://svn.berlios.de/linux-uvc/linux-uvc/trunk linux-uvc
>
> %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
>
> From the OpenFacts documents "Linux UVC" and "HowTo compile for Ubuntu
> 6.06 LTS", it appears that the first thing to do is to compile the
> modules:
>
>     # make
>
>     # make install
>
> -----------------------------------
>
> Second, the module uvcvideo.ko is to be removed from /lib/modules/ ,
> so that the module is not loaded automatically.  (This may be a
> problem with Debian, because /lib/modules/ has several subdirectories,
> and the structure of /lib/modules/ is not immediately apparent to me.)
>
> -----------------------------------
>
> Third, /etc/modprobe.conf.local is to be edited to add the line:
>
>     install uvcvideo /sbin/modprobe snd_usb_audio;
>     /sbin/modprobe --ignore-install uvcvideo
>
> However, I find in Debian no file /etc/modprobe.conf.local .
>
> -----------------------------------
>
> Fourth, the commands:
>
>     # modprobe -r uvcvideo
>
>     # modprobe -r snd_usb_audio
>
> are to be used after unplugging the camera, in the event that the
> camera needs to be restarted.
>
> -----------------------------------
>
> Adding to my confusion is the instruction given in the file
> /usr/src/modules/linux-uvc/debian/README.Debian , which states that
> the module-assistant tool should be used to install linux-uvc, using
> the commands:
>
>     # module-assistant prepare
>
>     # module-assistant auto-install linux-uvc
>
> -----------------------------------
>
> Would someone on the list who is knowledgeable concerning Debian
> kindly help me sort out this matter?
>

module-assistant is the tool to help to compile module-source package
into binary kernel module , and then pack into a Debian package. So
that you could install/uninstall through the package management
system(dpkg).

The generated package is placed in /usr/src . If you build with the
argument "auto-install" , it will be installed automatically. It is
recommended  (and the most simplest) way to install kernel module in
Debian system. Moreover, the generated package works with a specific
kernel version only. That means the package should be rebuild after
kernel upgrade.

However , Debian may not be able to provide the most updated module
source. Just take UVC as an example, the most updated revision no. is
132 at this moment , but the module source package in SID could only
offer rev 120. If you need the features provided by the most updated
revision , then you need to install by source through the svn command
, and then build by the command 'make` & `make install`.


From richard at 2007.atterer.net  Thu Oct  4 11:15:27 2007
From: richard at 2007.atterer.net (Richard Atterer)
Date: Thu, 4 Oct 2007 11:15:27 +0200
Subject: [Linux-uvc-devel] driver installation in Debian
In-Reply-To: <20071004082955.GA4379@oplink.net>
References: <20071004082955.GA4379@oplink.net>
Message-ID: <20071004091527.GB4112@fluff.lan>

Hello,

On Thu, Oct 04, 2007 at 03:29:55AM -0500, Russell L. Harris wrote:
> I am confused.  I am running Debian testing ("Lenny"), and, if
> possible, I would like to install the linux-uvc drivers in accordance
> with Debian protocol.
> 
> %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
> 
> I used aptitude to install the Debian package linux-uvc-source.  The
> installation provided the file /usr/src/linux-uvc.tar.bz2 , which is
> expanded with bunzip2 and tar, providing the following files:
> 
>     /usr/src/modules/linux-uvc/debian/rules
>     /usr/src/modules/linux-uvc/Makefile
>     /usr/src/modules/linux-uvc/uvcvideo.h
[...]

> It appears to me that, once I discover the proper Debian approach to
> installation of linux-uvc, I can update the drivers simply by copying
> into /usr/src/modules/linux-uvc/ the latest source files obtained via:
> 
>     # svn checkout svn://svn.berlios.de/linux-uvc/linux-uvc/trunk linux-uvc

Hm, this might indeed work, but it's not really supported, so if upstream 
makes fundamental changes, things could break. First try to get things 
working with the Debian-supplied source - at the moment, the one in 
testing/unstable is based on SVN revision 120, which is pretty recent.

Basically, there are two ways of having the driver compiled and turned into 
a .deb for installation. Myself, I hardly ever use module-assistant, as I 
compile my own kernels. I create the driver packages together with the 
kernel package:

$ cd /usr/src/linux-2.6.22
$ make-kpkg --revision foobar.071004 kernel_image modules_image
(you may need to add an --initrd switch if you want an initrd kernel.)

The second way is module-assistant. It is important to note that in neither 
case, a manual "make"/"make install" is needed by you, the tools do this 
themselves.

> Second, the module uvcvideo.ko is to be removed from /lib/modules/ , so 
> that the module is not loaded automatically.  (This may be a problem with 
> Debian, because /lib/modules/ has several subdirectories, and the 
> structure of /lib/modules/ is not immediately apparent to me.)

If you choose to go with Debian packages, never do anything manually in 
those directories (same goes for /etc/modprobe.conf)! When it is installed, 
the package will take care of setting everything up, so that the driver is 
loaded automatically when you plug in the camera.

> Adding to my confusion is the instruction given in the file
> /usr/src/modules/linux-uvc/debian/README.Debian , which states that
> the module-assistant tool should be used to install linux-uvc, using
> the commands:
> 
>     # module-assistant prepare
> 
>     # module-assistant auto-install linux-uvc

The idea with module-assistant is: You have installed a Debian kernel 
package, but a particular driver is not available in pre-compiled form. 
AFAIK, the two module-assistant commands above take care of *all* steps to 
get this driver compiled and installed: Downloading and installing the 
source code (in the form of the linux-uvc-source package), unpacking, 
configuring, compiling, creating a .deb, installing that .deb.

Cheers,

  Richard

-- 
  __   _
  |_) /|  Richard Atterer     |  GnuPG key: 888354F7
  | \/?|  http://atterer.net  |  08A9 7B7D 3D13 3EF2 3D25  D157 79E6 F6DC 8883 54F7
  ? '` ?


From genstef at gentoo.org  Thu Oct  4 16:33:56 2007
From: genstef at gentoo.org (Stefan Schweizer)
Date: Thu, 04 Oct 2007 16:33:56 +0200
Subject: [Linux-uvc-devel] uvc revision 132 and iSight
References: <47044D01.7000007@pobox.com>
Message-ID: <fe2tkm$uk4$1@sea.gmane.org>

Daniel M. Newman wrote:
> I've been looking for an up-to-date patch for the Macbook Pro built-in
> iSight camera, and the most recent I can find is against uvcvideo
> version 117.  It seems fairly incompatible with the current uvcvideo
> svn.  Can anyone point me to a patch for revision 132?

for revision 126:

http://thread.gmane.org/gmane.linux.drivers.uvc.devel/1507/focus=1508

I wonder why this patch does not get added to linux-uvc svn - I do not think
it is possible to compile it separate from linux-uvc.

IMO a lot of unnecessary work to always forward-port this to newer
revisions.

Best regards,
Stefan



From laurent.pinchart at skynet.be  Thu Oct  4 16:53:11 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 4 Oct 2007 16:53:11 +0200
Subject: [Linux-uvc-devel] uvc revision 132 and iSight
In-Reply-To: <fe2tkm$uk4$1@sea.gmane.org>
References: <47044D01.7000007@pobox.com> <fe2tkm$uk4$1@sea.gmane.org>
Message-ID: <200710041653.11942.laurent.pinchart@skynet.be>

On Thursday 04 October 2007 16:33, Stefan Schweizer wrote:
> Daniel M. Newman wrote:
> > I've been looking for an up-to-date patch for the Macbook Pro built-in
> > iSight camera, and the most recent I can find is against uvcvideo
> > version 117.  It seems fairly incompatible with the current uvcvideo
> > svn.  Can anyone point me to a patch for revision 132?
>
> for revision 126:
>
> http://thread.gmane.org/gmane.linux.drivers.uvc.devel/1507/focus=1508
>
> I wonder why this patch does not get added to linux-uvc svn - I do not
> think it is possible to compile it separate from linux-uvc.

Because iSight cameras are not UVC devices. They implement part of the UVC 
spec but use a different streaming format. There are also some differences in 
the USB descriptors.

> IMO a lot of unnecessary work to always forward-port this to newer
> revisions.

I can't apply the patch as-is. It must be ported to the SVN head first, and 
some hardcoded assumptions must be removed. If someone wants to do the job, 
and if we can find a way to integrate the patch without disturbing too much 
the driver (other UVC devices must still work :-) ), I could apply it.

Best regards,

Laurent Pinchart


From chris.horler at clara.co.uk  Thu Oct  4 17:44:16 2007
From: chris.horler at clara.co.uk (Christopher HORLER)
Date: Thu, 4 Oct 2007 16:44:16 +0100
Subject: [Linux-uvc-devel] sample code? "hello world" for linux video?
In-Reply-To: <20071004085900.GA4112@fluff.lan>
References: <21f71af10710031553m1b4d422ao6e54592aff141a25@mail.gmail.com>
	<20071004085900.GA4112@fluff.lan>
Message-ID: <200710041644.16898.chris.horler@clara.co.uk>

http://v4l2spec.bytesex.org/v4l2spec/capture.c

On Thursday 04 October 2007 09:59, Richard Atterer wrote:
> Hi all,
>
> On Wed, Oct 03, 2007 at 03:53:23PM -0700, Geoffrey Plitt wrote:
> > hi! is there any sample code i can start with to learn the UVC linux
> > video usage?
>
> A little searching on the web also turned up this, which looks quite
> promising: http://v4l2spec.bytesex.org/spec/
>
> Cheers,
>
>   Richard


From rlharris at oplink.net  Thu Oct  4 23:31:14 2007
From: rlharris at oplink.net (Russell L. Harris)
Date: Thu, 4 Oct 2007 16:31:14 -0500
Subject: [Linux-uvc-devel] driver installation in Debian
In-Reply-To: <f9a7555e0710040214v7234c9d9p2ed5c45aec8a2e70@mail.gmail.com>
References: <20071004082955.GA4379@oplink.net>
	<f9a7555e0710040214v7234c9d9p2ed5c45aec8a2e70@mail.gmail.com>
Message-ID: <20071004213114.GE4379@oplink.net>

* Ben Lau <xbenlau at gmail.com> [071004 04:21]:
> On 10/4/07, Russell L. Harris <rlharris at oplink.net> wrote:
>> I am confused.  I am running Debian testing ("Lenny"), and, if
>> possible, I would like to install the linux-uvc drivers in accordance
>> with Debian protocol.
>>
>> %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
>>
>> I used aptitude to install the Debian package linux-uvc-source.  The
>> installation provided the file /usr/src/linux-uvc.tar.bz2 , which is
>> expanded with bunzip2 and tar, providing the following files:
>>
>>     /usr/src/modules/linux-uvc/debian/rules
>>     /usr/src/modules/linux-uvc/debian/control.modules.in
>>     /usr/src/modules/linux-uvc/debian/control
>>     /usr/src/modules/linux-uvc/debian/compat
>>
>>     /usr/src/modules/linux-uvc/debian/copyright
>>     /usr/src/modules/linux-uvc/debian/changelog
>>     /usr/src/modules/linux-uvc/debian/README.Debian
>>
>>     /usr/src/modules/linux-uvc/Makefile
>>
>>     /usr/src/modules/linux-uvc/uvcvideo.h
>>
>>     /usr/src/modules/linux-uvc/uvc_video.c
>>     /usr/src/modules/linux-uvc/uvc_driver.c
>>     /usr/src/modules/linux-uvc/uvc_queue.c
>>     /usr/src/modules/linux-uvc/uvc_ctrl.c
>>     /usr/src/modules/linux-uvc/uvc_v4l2.c
>>     /usr/src/modules/linux-uvc/uvc_compat.h
>>
>>     /usr/src/modules/linux-uvc/extract.c
>>     /usr/src/modules/linux-uvc/.uvcvideo.o.d
>>
>>     /usr/src/modules/linux-uvc/macbook-insight-firmware-loader.8
>>
>> It appears to me that, once I discover the proper Debian approach to
>> installation of linux-uvc, I can update the drivers simply by copying
>> into /usr/src/modules/linux-uvc/ the latest source files obtained via:
>>
>>     # svn checkout svn://svn.berlios.de/linux-uvc/linux-uvc/trunk linux-uvc
>>
>> %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
>>
>> From the OpenFacts documents "Linux UVC" and "HowTo compile for Ubuntu
>> 6.06 LTS", it appears that the first thing to do is to compile the
>> modules:
>>
>>     # make
>>
>>     # make install
>>
>> -----------------------------------
>>
>> Second, the module uvcvideo.ko is to be removed from /lib/modules/ ,
>> so that the module is not loaded automatically.  (This may be a
>> problem with Debian, because /lib/modules/ has several subdirectories,
>> and the structure of /lib/modules/ is not immediately apparent to me.)
>>
>> -----------------------------------
>>
>> Third, /etc/modprobe.conf.local is to be edited to add the line:
>>
>>     install uvcvideo /sbin/modprobe snd_usb_audio;
>>     /sbin/modprobe --ignore-install uvcvideo
>>
>> However, I find in Debian no file /etc/modprobe.conf.local .
>>
>> -----------------------------------
>>
>> Fourth, the commands:
>>
>>     # modprobe -r uvcvideo
>>
>>     # modprobe -r snd_usb_audio
>>
>> are to be used after unplugging the camera, in the event that the
>> camera needs to be restarted.
>>
>> -----------------------------------
>>
>> Adding to my confusion is the instruction given in the file
>> /usr/src/modules/linux-uvc/debian/README.Debian , which states that
>> the module-assistant tool should be used to install linux-uvc, using
>> the commands:
>>
>>     # module-assistant prepare
>>
>>     # module-assistant auto-install linux-uvc
>>
>> -----------------------------------
>>
>> Would someone on the list who is knowledgeable concerning Debian
>> kindly help me sort out this matter?
>>
> 
> module-assistant is the tool to help to compile module-source package
> into binary kernel module , and then pack into a Debian package. So
> that you could install/uninstall through the package management
> system(dpkg).
> 
> The generated package is placed in /usr/src . If you build with the
> argument "auto-install" , it will be installed automatically. It is
> recommended  (and the most simplest) way to install kernel module in
> Debian system. Moreover, the generated package works with a specific
> kernel version only. That means the package should be rebuild after
> kernel upgrade.
> 
> However , Debian may not be able to provide the most updated module
> source. Just take UVC as an example, the most updated revision
> no. is 132 at this moment , but the module source package in SID
> could only offer rev 120. If you need the features provided by the
> most updated revision , then you need to install by source through
> the svn command, and then build by the command 'make` & `make
> install`.

Thanks for the explanation, Ben.

I have been running Debian for about five years now, and I have been
reading man pages, including the man page for module-assistant.  But I
am still struggling with the concepts involved in this.  I intend to
write a mini-HOWTO once I understand the concepts.

I would like to ask you two or three more questions, please.

-----------------------------------

(1) Is the file:

    /usr/src/modules/linux-uvc/debian/rules

executed automatically by module-assistant? 

Or is the file to be executed from the command line as a script:

    # ./rules

or as a makefile:

    # make rules

-----------------------------------

(2) Can I enjoy benefit of both the Debian approach and the
most-recent driver revisions, by copying the source files obtained
from the svn.berlios.de svn repository into:

    /usr/src/modules/linux-uvc/

and thus overwriting the "linux-uvc-source" files obtained from the Debian
repository?  

-----------------------------------

(3) To which directory must I "cd" before executing:

    # module-assistant prepare

    # module-assistant auto-install linux-uvc

-----------------------------------

RLH


From ernih at gmx.de  Fri Oct  5 00:33:44 2007
From: ernih at gmx.de (ernih at gmx.de)
Date: Fri, 5 Oct 2007 00:33:44 +0200
Subject: [Linux-uvc-devel] Fwd: Re:  kopete
Message-ID: <200710050033.44529.ernih@gmx.de>

hi have also install aMsn SVN Version. But it doesnt work.
what could be the reason?
what can do now?

----------  Forwarded Message  ----------

Subject: Re: [Linux-uvc-devel] kopete
Date: Donnerstag 04 Oktober 2007
From: Laurent Pinchart <laurent.pinchart at skynet.be>
To: linux-uvc-devel at lists.berlios.de

Hi,

On Wednesday 03 October 2007, Carles Pina i Estany wrote:
> Hi again,
>
> In my last mail, I said that my camera is not working in kopete. I can
> see here:
> https://lists.berlios.de/pipermail/linux-uvc-devel/2007-August/002049.html
> that I need last kopete svn version :-) so now everything matches :-)
>
> What do you use to have videocalls with uvcvideo? beside ekiga, maybe
> amsn?

I heard that aMsn (you might need the SVN version again) works too.

Best regards,

Laurent Pinchart
_______________________________________________
Linux-uvc-devel mailing list
Linux-uvc-devel at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/linux-uvc-devel

-------------------------------------------------------


From hirofumi at momose.com  Fri Oct  5 03:16:46 2007
From: hirofumi at momose.com (Hirofumi Momose)
Date: Fri, 05 Oct 2007 10:16:46 +0900
Subject: [Linux-uvc-devel] webcam re-worked
In-Reply-To: <200710040059.25214.laurent.pinchart@skynet.be>
References: <20071001105207.07C5.HIROFUMI@momose.com>
	<200710040059.25214.laurent.pinchart@skynet.be>
Message-ID: <20071005101504.A3A9.HIROFUMI@momose.com>

Hi,

Thanks Laurent.
It works.

Regards,
-- 
Hirofumi Momose <hirofumi at momose.com>



From geoff at gweb.org  Fri Oct  5 05:17:44 2007
From: geoff at gweb.org (Geoffrey Plitt)
Date: Thu, 4 Oct 2007 20:17:44 -0700
Subject: [Linux-uvc-devel] sample code? "hello world" for linux video?
In-Reply-To: <200710041644.16898.chris.horler@clara.co.uk>
References: <21f71af10710031553m1b4d422ao6e54592aff141a25@mail.gmail.com>
	<20071004085900.GA4112@fluff.lan>
	<200710041644.16898.chris.horler@clara.co.uk>
Message-ID: <21f71af10710042017w2b0b5a18j6144b1f6506670ce@mail.gmail.com>

hey christopher. this file looks promising, but it doesn't do anything with
the frames. i compiled/ran and it just prints dots, you have to take as
faith that it's capturing - it doesn't output or save the frames. in fact, i
can't tell exactly where in the code it actually grabs a frame and has
access to the frame's pixel buffer. any clues?
-geoff

On 10/4/07, Christopher HORLER <chris.horler at clara.co.uk> wrote:
>
> http://v4l2spec.bytesex.org/v4l2spec/capture.c
>
> On Thursday 04 October 2007 09:59, Richard Atterer wrote:
> > Hi all,
> >
> > On Wed, Oct 03, 2007 at 03:53:23PM -0700, Geoffrey Plitt wrote:
> > > hi! is there any sample code i can start with to learn the UVC linux
> > > video usage?
> >
> > A little searching on the web also turned up this, which looks quite
> > promising: http://v4l2spec.bytesex.org/spec/
> >
> > Cheers,
> >
> >   Richard
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071004/6d70d888/attachment.html>

From xbenlau at gmail.com  Fri Oct  5 07:41:48 2007
From: xbenlau at gmail.com (Ben Lau)
Date: Fri, 5 Oct 2007 13:41:48 +0800
Subject: [Linux-uvc-devel] driver installation in Debian
In-Reply-To: <20071004213114.GE4379@oplink.net>
References: <20071004082955.GA4379@oplink.net>
	<f9a7555e0710040214v7234c9d9p2ed5c45aec8a2e70@mail.gmail.com>
	<20071004213114.GE4379@oplink.net>
Message-ID: <f9a7555e0710042241h686aef70g4c0ed07ec5f25108@mail.gmail.com>

On 10/5/07, Russell L. Harris <rlharris at oplink.net> wrote:
> * Ben Lau <xbenlau at gmail.com> [071004 04:21]:
> > On 10/4/07, Russell L. Harris <rlharris at oplink.net> wrote:
> >> I am confused.  I am running Debian testing ("Lenny"), and, if
> >> possible, I would like to install the linux-uvc drivers in accordance
> >> with Debian protocol.
> >>
> >> %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
> >>
> >> I used aptitude to install the Debian package linux-uvc-source.  The
> >> installation provided the file /usr/src/linux-uvc.tar.bz2 , which is
> >> expanded with bunzip2 and tar, providing the following files:
> >>
> >>     /usr/src/modules/linux-uvc/debian/rules
> >>     /usr/src/modules/linux-uvc/debian/control.modules.in
> >>     /usr/src/modules/linux-uvc/debian/control
> >>     /usr/src/modules/linux-uvc/debian/compat
> >>
> >>     /usr/src/modules/linux-uvc/debian/copyright
> >>     /usr/src/modules/linux-uvc/debian/changelog
> >>     /usr/src/modules/linux-uvc/debian/README.Debian
> >>
> >>     /usr/src/modules/linux-uvc/Makefile
> >>
> >>     /usr/src/modules/linux-uvc/uvcvideo.h
> >>
> >>     /usr/src/modules/linux-uvc/uvc_video.c
> >>     /usr/src/modules/linux-uvc/uvc_driver.c
> >>     /usr/src/modules/linux-uvc/uvc_queue.c
> >>     /usr/src/modules/linux-uvc/uvc_ctrl.c
> >>     /usr/src/modules/linux-uvc/uvc_v4l2.c
> >>     /usr/src/modules/linux-uvc/uvc_compat.h
> >>
> >>     /usr/src/modules/linux-uvc/extract.c
> >>     /usr/src/modules/linux-uvc/.uvcvideo.o.d
> >>
> >>     /usr/src/modules/linux-uvc/macbook-insight-firmware-loader.8
> >>
> >> It appears to me that, once I discover the proper Debian approach to
> >> installation of linux-uvc, I can update the drivers simply by copying
> >> into /usr/src/modules/linux-uvc/ the latest source files obtained via:
> >>
> >>     # svn checkout svn://svn.berlios.de/linux-uvc/linux-uvc/trunk linux-uvc
> >>
> >> %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
> >>
> >> From the OpenFacts documents "Linux UVC" and "HowTo compile for Ubuntu
> >> 6.06 LTS", it appears that the first thing to do is to compile the
> >> modules:
> >>
> >>     # make
> >>
> >>     # make install
> >>
> >> -----------------------------------
> >>
> >> Second, the module uvcvideo.ko is to be removed from /lib/modules/ ,
> >> so that the module is not loaded automatically.  (This may be a
> >> problem with Debian, because /lib/modules/ has several subdirectories,
> >> and the structure of /lib/modules/ is not immediately apparent to me.)
> >>
> >> -----------------------------------
> >>
> >> Third, /etc/modprobe.conf.local is to be edited to add the line:
> >>
> >>     install uvcvideo /sbin/modprobe snd_usb_audio;
> >>     /sbin/modprobe --ignore-install uvcvideo
> >>
> >> However, I find in Debian no file /etc/modprobe.conf.local .
> >>
> >> -----------------------------------
> >>
> >> Fourth, the commands:
> >>
> >>     # modprobe -r uvcvideo
> >>
> >>     # modprobe -r snd_usb_audio
> >>
> >> are to be used after unplugging the camera, in the event that the
> >> camera needs to be restarted.
> >>
> >> -----------------------------------
> >>
> >> Adding to my confusion is the instruction given in the file
> >> /usr/src/modules/linux-uvc/debian/README.Debian , which states that
> >> the module-assistant tool should be used to install linux-uvc, using
> >> the commands:
> >>
> >>     # module-assistant prepare
> >>
> >>     # module-assistant auto-install linux-uvc
> >>
> >> -----------------------------------
> >>
> >> Would someone on the list who is knowledgeable concerning Debian
> >> kindly help me sort out this matter?
> >>
> >
> > module-assistant is the tool to help to compile module-source package
> > into binary kernel module , and then pack into a Debian package. So
> > that you could install/uninstall through the package management
> > system(dpkg).
> >
> > The generated package is placed in /usr/src . If you build with the
> > argument "auto-install" , it will be installed automatically. It is
> > recommended  (and the most simplest) way to install kernel module in
> > Debian system. Moreover, the generated package works with a specific
> > kernel version only. That means the package should be rebuild after
> > kernel upgrade.
> >
> > However , Debian may not be able to provide the most updated module
> > source. Just take UVC as an example, the most updated revision
> > no. is 132 at this moment , but the module source package in SID
> > could only offer rev 120. If you need the features provided by the
> > most updated revision , then you need to install by source through
> > the svn command, and then build by the command 'make` & `make
> > install`.
>
> Thanks for the explanation, Ben.
>
> I have been running Debian for about five years now, and I have been
> reading man pages, including the man page for module-assistant.  But I
> am still struggling with the concepts involved in this.  I intend to
> write a mini-HOWTO once I understand the concepts.
>
> I would like to ask you two or three more questions, please.
>
> -----------------------------------
>
> (1) Is the file:
>
>     /usr/src/modules/linux-uvc/debian/rules
>
> executed automatically by module-assistant?
>
> Or is the file to be executed from the command line as a script:
>
>     # ./rules
>
> or as a makefile:
>
>     # make rules

debian/rules is a Makefile to describe the process to compile the
source & install the binary to specific location. You could involve it
by the command "make -f debian/rules". However, it can't create
package directly. The command to pack the repository should be
"dpkg-buildpackage".

Example:

dpkg-buildpackage -rfakeroot -us -uc

However, I am not sure how module-assistant works. It is possible that
module-assistant by-pass dpkg-buildpackage and involve debian/rules
directly. If you just want to test whether can the build process
success, you may just run :

m-a build linux-uvc

> -----------------------------------
>
> (2) Can I enjoy benefit of both the Debian approach and the
> most-recent driver revisions, by copying the source files obtained
> from the svn.berlios.de svn repository into:
>
>     /usr/src/modules/linux-uvc/
>
> and thus overwriting the "linux-uvc-source" files obtained from the Debian
> repository?

I think it is possible, but you need to also update the rev no. for
the generated package. Usually the version no. is controlled by the
file changlog, but seems that module package use another approach.

Within the debian/rules, you could find this line:

        dh_gencontrol -- -v$(VERSION)

Instead of getting the version no. from changelog, the version is
directly passed by the argument.

> -----------------------------------
>
> (3) To which directory must I "cd" before executing:
>
>     # module-assistant prepare
>
>     # module-assistant auto-install linux-uvc
>
> -----------------------------------

anywhere you like

>
> RLH
>


From t.st1 at gmx.net  Fri Oct  5 09:24:31 2007
From: t.st1 at gmx.net (Tom St)
Date: Fri, 05 Oct 2007 09:24:31 +0200
Subject: [Linux-uvc-devel] sample code? "hello world" for linux video?
In-Reply-To: <21f71af10710031553m1b4d422ao6e54592aff141a25@mail.gmail.com>
References: <21f71af10710031553m1b4d422ao6e54592aff141a25@mail.gmail.com>
Message-ID: <4705E6AF.2080901@gmx.net>

Hello Geoffrey,
The first versions of UVC-streamer are simple enough to get called
"readable":

    * http://naaa.de/uvc_streamer.htm
    * http://naaa.de/programme/uvc_streamer/uvc_streamer_2007_07_09_22.20.32.tgz
    * For the current development look at:
      http://mjpg-streamer.svn.sourceforge.net/viewvc/mjpg-streamer/
    * To check out the sourcecode of the current development, issue the
      command:
      svn co
      https://mjpg-streamer.svn.sourceforge.net/svnroot/mjpg-streamer
      mjpg-streamer
    * Or try to look at luvcview
      (http://mxhaard.free.fr/spca50x/Investigation/uvc/luvcview-20070512.tar.gz),
      this is where I started.

Kind regards,
Tom

Geoffrey Plitt schrieb:
> hi! is there any sample code i can start with to learn the UVC linux
> video usage?
>
> i'm thinking a "hello world" app for UVC would access the camera and
> just save frames as raw images to a folder or something.
>
> -geoff
> ------------------------------------------------------------------------
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>   



From NathanaelGalpin at smarttech.com  Fri Oct  5 17:50:43 2007
From: NathanaelGalpin at smarttech.com (Nathanael Galpin)
Date: Fri, 5 Oct 2007 09:50:43 -0600
Subject: [Linux-uvc-devel] sample code? "hello world" for linux video?
In-Reply-To: <21f71af10710042017w2b0b5a18j6144b1f6506670ce@mail.gmail.com>
References: <21f71af10710031553m1b4d422ao6e54592aff141a25@mail.gmail.com><20071004085900.GA4112@fluff.lan><200710041644.16898.chris.horler@clara.co.uk>
	<21f71af10710042017w2b0b5a18j6144b1f6506670ce@mail.gmail.com>
Message-ID: <AACE2A3DD3559A4CBA163CB5D70C9ABE0ACF7029@calmail1.smarttech.inc>

Hey Geoff,

 

This is a great file to start with. In fact it's what I used first.
Couple things make it a bit tricky. One is that he's using switch
statements to separate different ways to read from the cameras, so
you'll want to note which method you're using, (should be MMAP).

 

The line where he actually captures a frame is in the read_frame
function. 

 

(-1 == xioctl (fd, VIDIOC_DQBUF, &buf))

 

This blocks until it's able to deque a frame from the camera (unless you
specify non-blocking when you open the cam file, in which case it
returns -1 when it can't immediately deque a frame). You can get at the
raw frame data through the buf struct.

 

A little farther down, he re-enques the buffer after he's finished with
with this line:

 

(-1 == xioctl (fd, VIDIOC_QBUF, &buf))

 

You can read through the V4L2 spec a bit at bytesex.org to check out the
parameters of the buf struct.

 

If you want to display this data, a quick way to do it would be to pull
the Y values from the buffer and use these to write a grayscale image to
the screen. I used a Qt picture object when I first started doing this,
and that actually worked quite well.

 

Hope that helps, and good luck!

 

 

  -- Nathanael

 

________________________________

From: linux-uvc-devel-bounces at lists.berlios.de
[mailto:linux-uvc-devel-bounces at lists.berlios.de] On Behalf Of Geoffrey
Plitt
Sent: Thursday, October 04, 2007 9:18 PM



hey christopher. this file looks promising, but it doesn't do anything
with the frames. i compiled/ran and it just prints dots, you have to
take as faith that it's capturing - it doesn't output or save the
frames. in fact, i can't tell exactly where in the code it actually
grabs a frame and has access to the frame's pixel buffer. any clues? 
-geoff

On 10/4/07, Christopher HORLER <chris.horler at clara.co.uk> wrote:

http://v4l2spec.bytesex.org/v4l2spec/capture.c




 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071005/95900970/attachment.html>

From richard at 2007.atterer.net  Fri Oct  5 18:49:05 2007
From: richard at 2007.atterer.net (Richard Atterer)
Date: Fri, 5 Oct 2007 18:49:05 +0200
Subject: [Linux-uvc-devel] Thoughts on software autofocus
Message-ID: <20071005164904.GA9717@vilya>

Hello,

I bought a Logitech Quickcam Pro 9000 a couple of days ago and have been 
playing around with it. It works beautifully - many thanks indeed for your 
great work on the driver!! :-) I have had it running with motion for many 
hours without any major problems.

[BTW, is support planned for its "software zoom" capability? Under Windows, 
it looks like the camera is able to e.g. run at 960x720, but then only to 
transmit a 320x240-sized chunk of the image data to the computer. This 
could also be implemented entirely in the Windows driver, I don't know.]

One thing I've been wondering about is its software-controlled focus 
feature. From the message 
<https://lists.berlios.de/pipermail/linux-uvc-devel/2007-August/002074.html> 
I gather that software-controlled focus should be possible, but looking at 
the driver and the output of "luvcview -l", there is no trace of any focus 
controls - am I getting something wrong? I tried hacking luvcview and 
replacing the gamma control's V4L2_CID_GAMMA with V4L2_CID_FOCUS_ABSOLUTE, 
as described in the message after the one mentioned above, but only got an 
error when trying to change the setting.

I have been wondering how software autofocus could be implemented. A clean 
implementation would require the following:

1) An autofocus userspace program would need to access the image data 
alongside any program(s) which make use of the camera, in order to analyse 
it. But ATM, it seems that only one program can open the device at a time! 
:-/

2) The autofocus program needs to be notified whenever any application 
accesses the camera. Otherwise, it would have to somehow poll for programs 
which actively use the camera (bad style nowadays), or even continuously 
perform autofocus all the time (even worse!).
Hmm, with the Quickcam 9000's type of focus, setting the focus to infinity 
whenever the camera is unused would also save power AIUI! The camera is 
rated for a full 500mA, it would be interesting to find out how much of 
this can be due to the autofocus.

Are there any easy answers to these two problems?

BTW, at the moment I doubt I can find the time to actually implement 
autofocus (as much fun as it'd be...)

Cheers,

  Richard

-- 
  __   _
  |_) /|  Richard Atterer     |  GnuPG key: 888354F7
  | \/?|  http://atterer.net  |  08A9 7B7D 3D13 3EF2 3D25  D157 79E6 F6DC 8883 54F7
  ? '` ?


From geoff at gweb.org  Fri Oct  5 19:44:38 2007
From: geoff at gweb.org (Geoffrey Plitt)
Date: Fri, 5 Oct 2007 10:44:38 -0700
Subject: [Linux-uvc-devel] sample code? "hello world" for linux video?
In-Reply-To: <4705E6AF.2080901@gmx.net>
References: <21f71af10710031553m1b4d422ao6e54592aff141a25@mail.gmail.com>
	<4705E6AF.2080901@gmx.net>
Message-ID: <21f71af10710051044ud429bc1q5dde2acbd1000af@mail.gmail.com>

Thanks for the great reply, Tom! I'll let you guys know if this helps or if
I have more questions!
-Geoff

On 10/5/07, Tom St <t.st1 at gmx.net> wrote:
>
> Hello Geoffrey,
> The first versions of UVC-streamer are simple enough to get called
> "readable":
>
>     * http://naaa.de/uvc_streamer.htm
>     *
> http://naaa.de/programme/uvc_streamer/uvc_streamer_2007_07_09_22.20.32.tgz
>     * For the current development look at:
>       http://mjpg-streamer.svn.sourceforge.net/viewvc/mjpg-streamer/
>     * To check out the sourcecode of the current development, issue the
>       command:
>       svn co
>       https://mjpg-streamer.svn.sourceforge.net/svnroot/mjpg-streamer
>       mjpg-streamer
>     * Or try to look at luvcview
>       (
> http://mxhaard.free.fr/spca50x/Investigation/uvc/luvcview-20070512.tar.gz
> ),
>       this is where I started.
>
> Kind regards,
> Tom
>
> Geoffrey Plitt schrieb:
> > hi! is there any sample code i can start with to learn the UVC linux
> > video usage?
> >
> > i'm thinking a "hello world" app for UVC would access the camera and
> > just save frames as raw images to a folder or something.
> >
> > -geoff
> > ------------------------------------------------------------------------
> >
> > _______________________________________________
> > Linux-uvc-devel mailing list
> > Linux-uvc-devel at lists.berlios.de
> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> >
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071005/20c1f218/attachment.html>

From geoff at gweb.org  Fri Oct  5 19:46:15 2007
From: geoff at gweb.org (Geoffrey Plitt)
Date: Fri, 5 Oct 2007 10:46:15 -0700
Subject: [Linux-uvc-devel] sample code? "hello world" for linux video?
In-Reply-To: <AACE2A3DD3559A4CBA163CB5D70C9ABE0ACF7029@calmail1.smarttech.inc>
References: <21f71af10710031553m1b4d422ao6e54592aff141a25@mail.gmail.com>
	<20071004085900.GA4112@fluff.lan>
	<200710041644.16898.chris.horler@clara.co.uk>
	<21f71af10710042017w2b0b5a18j6144b1f6506670ce@mail.gmail.com>
	<AACE2A3DD3559A4CBA163CB5D70C9ABE0ACF7029@calmail1.smarttech.inc>
Message-ID: <21f71af10710051046n7e7da022t351ce33e4dca27f1@mail.gmail.com>

Thanks Nate! likewise, I will see if this helps and let you guys know!
-Geoff

On 10/5/07, Nathanael Galpin <NathanaelGalpin at smarttech.com> wrote:
>
>  Hey Geoff,
>
>
>
> This is a great file to start with. In fact it's what I used first. Couple
> things make it a bit tricky. One is that he's using switch statements to
> separate different ways to read from the cameras, so you'll want to note
> which method you're using, (should be MMAP).
>
>
>
> The line where he actually captures a frame is in the read_frame function.
>
>
>
>
> (-1 == xioctl (fd, VIDIOC_DQBUF, &buf))
>
>
>
> This blocks until it's able to deque a frame from the camera (unless you
> specify non-blocking when you open the cam file, in which case it returns -1
> when it can't immediately deque a frame). You can get at the raw frame data
> through the buf struct.
>
>
>
> A little farther down, he re-enques the buffer after he's finished with
> with this line:
>
>
>
> (-1 == xioctl (fd, VIDIOC_QBUF, &buf))
>
>
>
> You can read through the V4L2 spec a bit at bytesex.org to check out the
> parameters of the buf struct.
>
>
>
> If you want to display this data, a quick way to do it would be to pull
> the Y values from the buffer and use these to write a grayscale image to the
> screen. I used a Qt picture object when I first started doing this, and that
> actually worked quite well.
>
>
>
> Hope that helps, and good luck!
>
>
>
>
>
>   -- Nathanael
>
>
>  ------------------------------
>
> *From:* linux-uvc-devel-bounces at lists.berlios.de [mailto:
> linux-uvc-devel-bounces at lists.berlios.de] *On Behalf Of *Geoffrey Plitt
> *Sent:* Thursday, October 04, 2007 9:18 PM
>
>  hey christopher. this file looks promising, but it doesn't do anything
> with the frames. i compiled/ran and it just prints dots, you have to take as
> faith that it's capturing - it doesn't output or save the frames. in fact, i
> can't tell exactly where in the code it actually grabs a frame and has
> access to the frame's pixel buffer. any clues?
> -geoff
>
> On 10/4/07, *Christopher HORLER* <chris.horler at clara.co.uk> wrote:
>
> http://v4l2spec.bytesex.org/v4l2spec/capture.c
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071005/29cf9e1e/attachment.html>

From geoff at gweb.org  Sat Oct  6 01:38:18 2007
From: geoff at gweb.org (Geoffrey Plitt)
Date: Fri, 5 Oct 2007 16:38:18 -0700
Subject: [Linux-uvc-devel] sample code? "hello world" for linux video?
In-Reply-To: <4705E6AF.2080901@gmx.net>
References: <21f71af10710031553m1b4d422ao6e54592aff141a25@mail.gmail.com>
	<4705E6AF.2080901@gmx.net>
Message-ID: <21f71af10710051638l65250564pdfe8abbe605e64ed@mail.gmail.com>

Tom,

This code is great. Much more readable than then 6+ other "camera capture"
utilities I found on the internet for UVC/V4L2 environments. I am using a
Logitech Quickcam Fusion on Ubuntu, and I know the camera is setup fine
because other apps can use it. But I get a segfault:

./uvc_stream
Using V4L2 device.....: /dev/video0
Resolution............: 640 x 480
frames per second.....: 5
TCP port..............: 8080
motor control TCP port: 8081
Segmentation fault


Any ideas?

-Geoff

On 10/5/07, Tom St <t.st1 at gmx.net> wrote:
>
> Hello Geoffrey,
> The first versions of UVC-streamer are simple enough to get called
> "readable":
>
>     * http://naaa.de/uvc_streamer.htm
>     * http://naaa.de/programme/uvc_streamer/uvc_streamer_2007_07
> _09_22.20.32.tgz
>     * For the current development look at:
>       http://mjpg-streamer.svn.sourceforge.net/viewvc/mjpg-streamer/
>     * To check out the sourcecode of the current development, issue the
>       command:
>       svn co
>       https://mjpg-streamer.svn.sourceforge.net/svnroot/mjpg-streamer
>       mjpg-streamer
>     * Or try to look at luvcview
>       (http://mxhaard.free.fr/spca50x/Investigation/uvc/luvcview-
> 20070512.tar.gz),
>       this is where I started.
>
> Kind regards,
> Tom
>
> Geoffrey Plitt schrieb:
>
> > hi! is there any sample code i can start with to learn the UVC linux
> > video usage?
> >
> > i'm thinking a "hello world" app for UVC would access the camera and
> > just save frames as raw images to a folder or something.
> >
> > -geoff
> > ------------------------------------------------------------------------
>
> >
> > _______________________________________________
> > Linux-uvc-devel mailing list
> > Linux-uvc-devel at lists.berlios.de
> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> >
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071005/90f439e7/attachment.html>

From geoff at gweb.org  Sat Oct  6 01:39:55 2007
From: geoff at gweb.org (Geoffrey Plitt)
Date: Fri, 5 Oct 2007 16:39:55 -0700
Subject: [Linux-uvc-devel] sample code? "hello world" for linux video?
In-Reply-To: <AACE2A3DD3559A4CBA163CB5D70C9ABE0ACF7029@calmail1.smarttech.inc>
References: <21f71af10710031553m1b4d422ao6e54592aff141a25@mail.gmail.com>
	<20071004085900.GA4112@fluff.lan>
	<200710041644.16898.chris.horler@clara.co.uk>
	<21f71af10710042017w2b0b5a18j6144b1f6506670ce@mail.gmail.com>
	<AACE2A3DD3559A4CBA163CB5D70C9ABE0ACF7029@calmail1.smarttech.inc>
Message-ID: <21f71af10710051639y6277520j703d2620cee5b5e2@mail.gmail.com>

Nate,

Thanks again for your help. I've got some progress. I modified the
process_image function to write out a PGM file:

static void
process_image                   (const void *           p)
{
  FILE *out = fopen(" out.pgm", "w");
  fprintf(out,"P2\n");
  fprintf(out,"#CREATOR: ggp\n");
  fprintf(out,"640 480\n");
  fprintf(out,"255\n");

  int x;
  int y;
  unsigned char * pixel = p+1;
  for(x=0; x<WIDTH; x++)
  {
    for(y=0; y<HEIGHT; y++)
    {
      fprintf(out,"%u ",*pixel);
      pixel++;
    }
    fprintf(out,"\n");
  }
  fclose(out);
  exit(0);
}

but I don't think I understand the contents of the buf completely. Attached
is the resulting image - I can see the flourescent light in there, but there
are error patterns all over.

Any ideas?

-Geoff

On 10/5/07, Nathanael Galpin <NathanaelGalpin at smarttech.com> wrote:
>
>  Hey Geoff,
>
>
>
> This is a great file to start with. In fact it's what I used first. Couple
> things make it a bit tricky. One is that he's using switch statements to
> separate different ways to read from the cameras, so you'll want to note
> which method you're using, (should be MMAP).
>
>
>
> The line where he actually captures a frame is in the read_frame function.
>
>
>
>
> (-1 == xioctl (fd, VIDIOC_DQBUF, &buf))
>
>
>
> This blocks until it's able to deque a frame from the camera (unless you
> specify non-blocking when you open the cam file, in which case it returns -1
> when it can't immediately deque a frame). You can get at the raw frame data
> through the buf struct.
>
>
>
> A little farther down, he re-enques the buffer after he's finished with
> with this line:
>
>
>
> (-1 == xioctl (fd, VIDIOC_QBUF, &buf))
>
>
>
> You can read through the V4L2 spec a bit at bytesex.org to check out the
> parameters of the buf struct.
>
>
>
> If you want to display this data, a quick way to do it would be to pull
> the Y values from the buffer and use these to write a grayscale image to the
> screen. I used a Qt picture object when I first started doing this, and that
> actually worked quite well.
>
>
>
> Hope that helps, and good luck!
>
>
>
>
>
>   -- Nathanael
>
>
>  ------------------------------
>
> *From:* linux-uvc-devel-bounces at lists.berlios.de [mailto:
> linux-uvc-devel-bounces at lists <linux-uvc-devel-bounces at lists.berlios.de>
> .berlios.de <linux-uvc-devel-bounces at lists.berlios.de>] *On Behalf Of *Geoffrey
> Plitt
> *Sent:* Thursday, October 04, 2007 9:18 PM
>
>  hey christopher. this file looks promising, but it doesn't do anything
> with the frames. i compiled/ran and it just prints dots, you have to take as
> faith that it's capturing - it doesn't output or save the frames. in fact, i
> can't tell exactly where in the code it actually grabs a frame and has
> access to the frame's pixel buffer. any clues?
> -geoff
>
> On 10/4/07, *Christopher HORLER* <chris.horler at clara.co.uk> wrote:
>
> http://v4l2spec.bytesex.org/v4l2spec/capture.c
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071005/c60f4bb3/attachment.html>

From the.real.monkey.d.luffy at gmail.com  Sun Oct  7 04:58:41 2007
From: the.real.monkey.d.luffy at gmail.com (Monkey D Luffy)
Date: Sun, 7 Oct 2007 02:58:41 +0000
Subject: [Linux-uvc-devel] How to record audio and video from a webcam?
In-Reply-To: <mailman.691.1191725677.7131.linux-uvc-devel@lists.berlios.de>
References: <mailman.691.1191725677.7131.linux-uvc-devel@lists.berlios.de>
Message-ID: <344b9a2f0710061958y10bc4d28o2e759e99539e994d@mail.gmail.com>

I would like to know how can I record audio and video simultaneously
from my Logitech QuickCam Fusion (046d:08ca), while the application
displays what is being recorded.
*exhales*
I've spent too many hours on this and still don't have things working.
I've tried a lot of programs but they're not working for me.

I have my webcam working with aMSN just fine, I have audio and video working.
I can also record video using luvcview, but it doesn't support audio.

---------------------------------------
xawtv - Doesn't work!
---------------------------------------
xawtv -v -c /dev/video1 -C /dev/dsp2 -nodga

/usr/bin/xawtv: line 10: [: (opcode:: binary operator expected
This is xawtv-3.95.dfsg.1, running on Linux/x86_64 (2.6.21-2-amd64)
Warning: Cannot convert string "-c" to type Int
X Error of failed request:  XF86DGANoDirectVideoMode
  Major opcode of failed request:  136 (XFree86-DGA)
  Minor opcode of failed request:  1 (XF86DGAGetVideoLL)
  Serial number of failed request:  13
  Current serial number in output stream:  13
v4l-conf had some trouble, trying to continue anyway
v4l2: WARNING: framebuffer size mismatch
v4l2: me=1280x1024 v4l=0x0
station "/dev/video1" not found


---------------------------------------
mencoder - Doesn't work!
---------------------------------------
mencoder -v -tv
device=/dev/video1:driver=v4l2:outfmt=yuy2:adevice=/dev/dsp2:forceaudio
-vc rawyuy2 -ovc lavc -lavcopts vcodec=mpeg4:vbitrate=320 -oac mp3lame
-lameopts cbr:br=128:mode=0 -o 3.avi tv://

MEncoder dev-SVN-rUNKNOWN-4.2.1 (C) 2000-2007 MPlayer Team
CPU: Intel(R) Core(TM)2 CPU          6420  @ 2.13GHz (Family: 6,
Model: 15, Stepping: 6)
CPUflags: Type: 6 MMX: 1 MMX2: 1 3DNow: 0 3DNow2: 0 SSE: 1 SSE2: 1
Compiled for x86 CPU with extensions: MMX MMX2 SSE SSE2

Configuration: --prefix=/usr --confdir=/etc/mplayer
--datadir=/usr/share/mplayer --enable-xmga --enable-mga
--enable-joystick --enable-faad-external --disable-tremor-internal
--enable-libamr_nb --enable-libamr_wb --language=all
--enable-largefiles --enable-menu
--with-extraincdir=/usr/include/ffmpeg -I./libavformat -I./libswscale
-I./libavutil -I./libpostproc -I./libavcodec --enable-radio
--disable-libdvdcss-internal --enable-lirc --enable-radio-capture
--enable-png --enable-xvmc --with-xvmclib=XvMCW --enable-fbdev
--enable-directfb --enable-tdfxfb --enable-s3fb
init_freetype
get_path('font/font.desc') -> '/home/kaizoku/.mplayer/font/font.desc'
font: can't open file: /home/kaizoku/.mplayer/font/font.desc
font: can't open file: /usr/share/mplayer/font/font.desc
Using MMX (with tiny bit MMX2) Optimized OnScreenDisplay
STREAM: [tv] tv://
STREAM: Description: TV Input
STREAM: Author: Benjamin Zores, Albeu
STREAM: Comment:
success: format: 9  data: 0x0 - 0x0
TV file format detected.
Selected driver: v4l2
 name: Video 4 Linux 2 input
 author: Martin Olschewski <olschewski at zpr.uni-koeln.de>
 comment: first try, more to come ;-)
v4l2: ioctl get standard failed: Invalid argument
Selected device: UVC Camera (046d:08ca)
 Capabilites:  video capture  streaming
 supported norms:
 inputs: 0 = Camera 1;
 Current input: 0
 Format MJPEG  ( 0 bits, MJPEG): Unknown 0x47504a4d
 Format YUYV   (16 bits, YUV 4:2:2 (YUYV)): Packed YUY2
 Current format: YUYV
v4l2: set format: YUYV
v4l2: set input: 0
tv.c: norm_from_string(pal): Bogus norm parameter, setting default.
Selected norm : pal
v4l2: ioctl enum norm failed: Invalid argument
Error: Cannot set norm!
Selected input hasn't got a tuner!
==> Found video stream: 0
v4l2: get format: YUYV
v4l2: get fps: nan
v4l2: get width: 640
v4l2: get height: 480
ioctl dsp getfmt: 0
Supported formats: 1f9
ioctl dsp setfmt: 0
ioctl dsp stereo: 0 (req: 1)
ioctl dsp speed: 0
ioctl dsp trigger: 0
trigger: 1
ioctl dsp trigger: 0
ioctl dsp getblocksize: 0
blocksize: 16384
v4l2: set audio samplerate: 44100
v4l2: get audio format: 9
==> Found audio stream: 0
v4l2: get audio samplerate: 44100
v4l2: get audio samplesize: 2
v4l2: get audio channels: 2
  TV audio: 2 channels, 16 bits, 44100 Hz
Audio capture - buffer 256 blocks of 16384 bytes, skew average from 16 meas.
Floating point exception



---------------------------------------
vlc - Doesn't work!
---------------------------------------
[00000378] v4l demuxer error: cannot get channel infos (Invalid argument)

(.:1949): Gtk-CRITICAL **: gtk_container_remove: assertion
`GTK_IS_TOOLBAR (container) || widget->parent == GTK_WIDGET
(container)' failed
(.:1949): Gtk-CRITICAL **: gtk_container_remove: assertion
`GTK_IS_TOOLBAR (container) || widget->parent == GTK_WIDGET
(container)' failed
(.:1949): Gtk-CRITICAL **: gtk_container_remove: assertion
`GTK_IS_TOOLBAR (container) || widget->parent == GTK_WIDGET
(container)' failed
(.:1949): Gtk-CRITICAL **: gtk_container_remove: assertion
`GTK_IS_TOOLBAR (container) || widget->parent == GTK_WIDGET
(container)' failed
(.:1949): Gtk-CRITICAL **: gtk_container_remove: assertion
`GTK_IS_TOOLBAR (container) || widget->parent == GTK_WIDGET
(container)' failed
(.:1949): Gtk-CRITICAL **: gtk_container_remove: assertion
`GTK_IS_TOOLBAR (container) || widget->parent == GTK_WIDGET
(container)' failed
[00000287] main playlist: stopping playback
[00000287] main playlist error: refcount is -1, delaying again (id=287,type=-5)
[00000287] main playlist error: waited too long, cancelling
destruction (id=287,type=-5)



---------------------------------------
ffmpeg - Can't get audio and doesn't display what is being captured.
---------------------------------------
ffmpeg -v 100 -f oss -i /dev/dsp2  -f video4linux2 -s 320x240 -i
/dev/video1  -f m4v test.m4v




I've so many things that I lost track of it.
The bottom line is that I'm unable to capture audio+video from my webcam.

Any help is greatly appreciated.


From funtasyspace at yahoo.com  Sun Oct  7 11:11:59 2007
From: funtasyspace at yahoo.com (=?iso-8859-1?Q?J=F6rg_Hermsdorf?=)
Date: Sun, 7 Oct 2007 02:11:59 -0700 (PDT)
Subject: [Linux-uvc-devel] How to record audio and video from a webcam?
Message-ID: <979759.56563.qm@web50011.mail.re2.yahoo.com>

Hey Monkey,

> ---------------------------------------
> ffmpeg - Can't get audio and doesn't display what is being captured.
> ---------------------------------------
> ffmpeg -v 100 -f oss -i /dev/dsp2  -f video4linux2 -s 320x240 -i
> /dev/video1  -f m4v test.m4v

Try this command:

ffmpeg -f video4linux2 -s 320x240 -i /dev/video1 -f audio_device -ac 2 -i /dev/dsp2 -f mp4 test.mp4

Also make sure, that the built-in microphone of your webcam is really hooked to /dev/dsp2. 

Best regards




      __________________________________  
Kennt man wirklich jeden ?ber 3 Ecken? Die Antworten gibt's bei Yahoo! Clever. www.yahoo.de/clever


From the.real.monkey.d.luffy at gmail.com  Sun Oct  7 11:56:49 2007
From: the.real.monkey.d.luffy at gmail.com (Monkey D Luffy)
Date: Sun, 7 Oct 2007 09:56:49 +0000
Subject: [Linux-uvc-devel] How to record audio and video from a webcam?
In-Reply-To: <344b9a2f0710061958y10bc4d28o2e759e99539e994d@mail.gmail.com>
References: <mailman.691.1191725677.7131.linux-uvc-devel@lists.berlios.de>
	<344b9a2f0710061958y10bc4d28o2e759e99539e994d@mail.gmail.com>
Message-ID: <344b9a2f0710070256q52e2601flefd2ea90cfa6a06d@mail.gmail.com>

(please add me as CC when replying to the mailing list)

I don't have any "audio_device" in ffmpeg:
"Unknown input or output format: audio_device"

ffmpeg -formats | grep audio
 D  daud            D-Cinema audio format
 D  mp3             MPEG audio
 D  oss             audio grab and output
 D  tta             true-audio
 D  wsaud           Westwood Studios audio format
 D A    dsicinaudio
 D A    vmdaudio


Nonetheless, I was able to get it recording audio+video with:
ffmpeg -f video4linux2 -s 320x240 -i /dev/video1 -f oss -ac 2 -i
/dev/dsp2 -f mp4 test.mp4
Unfortunately I get a lot of "clicks" in the recording :-( Maybe that
can be solved with post-processing on some tool?

Still, there is the issue of not being able to see what is being
recorded... and that is not acceptable :-(
Any way to fix xawtv or mencoder problems? Or is there any other tool?
(regarding vlc it doesn't support v4l2 devices)


Thanks


> J?rg Hermsdorf wrote:
>
> Hey Monkey,
>
> > ---------------------------------------
> > ffmpeg - Can't get audio and doesn't display what is being captured.
> > ---------------------------------------
> > ffmpeg -v 100 -f oss -i /dev/dsp2  -f video4linux2 -s 320x240 -i
> > /dev/video1  -f m4v test.m4v
>
> Try this command:
>
> ffmpeg -f video4linux2 -s 320x240 -i /dev/video1 -f audio_device -ac 2 -i /dev/dsp2 -f mp4 test.mp4
>
> Also make sure, that the built-in microphone of your webcam is really hooked to /dev/dsp2.
>
> Best regards


From funtasyspace at yahoo.com  Sun Oct  7 18:59:27 2007
From: funtasyspace at yahoo.com (=?iso-8859-1?Q?J=F6rg_Hermsdorf?=)
Date: Sun, 7 Oct 2007 09:59:27 -0700 (PDT)
Subject: [Linux-uvc-devel] How to record audio and video from a webcam?
Message-ID: <380157.12616.qm@web50008.mail.re2.yahoo.com>

> Unfortunately I get a lot of "clicks" in the recording :-( Maybe that
> can be solved with post-processing on some tool?

Seems like you have the same "clicks" in you recorded audio 
like I reported some days ago!? Does your "clicks" sound similar to 
the sample I uploaded here? -> http://forums.quickcamteam.net/attachment.php?aid=1

Best Regards,
J?rg





      Die etwas anderen Infos rund um das Thema Reisen. BE A BETTER WELTENBUMMLER!  www.yahoo.de/clever


From the.real.monkey.d.luffy at gmail.com  Sun Oct  7 23:15:36 2007
From: the.real.monkey.d.luffy at gmail.com (Monkey D Luffy)
Date: Sun, 7 Oct 2007 21:15:36 +0000
Subject: [Linux-uvc-devel] How to record audio and video from a webcam?
In-Reply-To: <380157.12616.qm@web50008.mail.re2.yahoo.com>
References: <380157.12616.qm@web50008.mail.re2.yahoo.com>
Message-ID: <344b9a2f0710071415j2529bb7pb89ccb5dcda47a75@mail.gmail.com>

Yep... the same thing... :-(

Check my message
http://forums.quickcamteam.net/showthread.php?tid=6&pid=31&#pid31

Or get the file from here
http://rapidshare.com/files/60981245/logitech_quickcam_fusion_046d-08ca_silence.mp4.zip.html
(I had to register to download your file)

Is it some Logitech-UVC issue?

And I'm still missing a luvcview-with-audio-support application to
record my video+audio...
Does anyone with SDL experience want to add audio support to luvcview? :-)


On 10/7/07, J?rg Hermsdorf <funtasyspace at yahoo.com> wrote:
> > Unfortunately I get a lot of "clicks" in the recording :-( Maybe that
> > can be solved with post-processing on some tool?
>
> Seems like you have the same "clicks" in you recorded audio
> like I reported some days ago!? Does your "clicks" sound similar to
> the sample I uploaded here? -> http://forums.quickcamteam.net/attachment.php?aid=1
>
> Best Regards,
> J?rg
>
>
>
>
>
>       Die etwas anderen Infos rund um das Thema Reisen. BE A BETTER WELTENBUMMLER!  www.yahoo.de/clever
>


From felix at derklecks.de  Sun Oct  7 23:19:33 2007
From: felix at derklecks.de (=?ISO-8859-1?Q?Felix_M=F6ller?=)
Date: Sun, 07 Oct 2007 23:19:33 +0200
Subject: [Linux-uvc-devel] uvc revision 132 and iSight
In-Reply-To: <200710041653.11942.laurent.pinchart@skynet.be>
References: <47044D01.7000007@pobox.com> <fe2tkm$uk4$1@sea.gmane.org>
	<200710041653.11942.laurent.pinchart@skynet.be>
Message-ID: <47094D65.5040203@derklecks.de>

Hi,

> On Thursday 04 October 2007 16:33, Stefan Schweizer wrote:
>> Daniel M. Newman wrote:
>>> I've been looking for an up-to-date patch for the Macbook Pro built-in
>>> iSight camera, and the most recent I can find is against uvcvideo
>>> version 117.  It seems fairly incompatible with the current uvcvideo
>>> svn.  Can anyone point me to a patch for revision 132?
>> for revision 126:
>>
>> http://thread.gmane.org/gmane.linux.drivers.uvc.devel/1507/focus=1508
>>
>> I wonder why this patch does not get added to linux-uvc svn - I do not
>> think it is possible to compile it separate from linux-uvc.
Stefan I generated a patch against revision 132 you just have to apply
this patch to uvcvideo-svn and it should work.

> I can't apply the patch as-is. It must be ported to the SVN head first, and 
> some hardcoded assumptions must be removed. If someone wants to do the job, 
> and if we can find a way to integrate the patch without disturbing too much 
> the driver (other UVC devices must still work :-) ), I could apply it.
Laruent: That sounds good but unfortunately I am not a C programmer. The
attached patch certainly is nothing to apply as is.

Could you please comment on this oops. Is it a bug in the patch or in
the uvcvideo svn as "if (intf->cur_altsetting->desc.bInterfaceSubClass
!= SC_VIDEOSTREAMING)" is never hit? To fix it I commented out
"continue" around line 854.

 [14698.572000] BUG: unable to handle kernel NULL pointer dereference at
virtual address 00000004
[14698.572000]  printing eip:
[14698.572000] f8f26ee4
[14698.572000] *pde = 00000000
[14698.572000] Oops: 0002 [#1]
[14698.572000] SMP
[14698.572000] last sysfs file: /block/sdb/size
[14698.572000] Modules linked in: uvcvideo nls_iso8859_1 nls_cp437 vfat
fat usb_storage iptable_filter ip_tables ip6_tables x_tables wlan_tkip
wlan_ccmp af_packet snd_pcm_oss snd_mixer_oss snd_seq snd_seq_device
cpufreq_conservative cpufreq_userspace cpufreq_powersave acpi_cpufreq
speedstep_lib fuse dm_crypt loop dm_mod sha1 firmware_class
compat_ioctl32 videodev ohci1394 v4l1_compat joydev appletouch battery
ac button rtc_cmos rtc_core wlan_scan_sta ide_cd v4l2_common
snd_hda_intel rtc_lib ieee1394 appleir iTCO_wdt ath_rate_sample ath_pci
iTCO_vendor_support wlan intel_agp ath_hal(P) i2c_i801 i2c_core snd_pcm
snd_timer snd soundcore snd_page_alloc agpgart sky2 usbhid hid
ff_memless ehci_hcd uhci_hcd usbcore edd ext3 mbcache jbd fan ata_piix
libata piix thermal processor sr_mod cdrom ide_disk ide_core sd_mod sg
scsi_mod
[14698.572000] CPU:    0
[14698.572000] EIP:    0060:[<f8f26ee4>]    Tainted: P      N VLI
[14698.572000] EFLAGS: 00210246   (2.6.22.5-29-default #1)
[14698.572000] EIP is at uvc_ctrl_cleanup_device+0x18/0x6c [uvcvideo]
[14698.572000] eax: 00000000   ebx: f740b000   ecx: df9f8689   edx: 00000000
[14698.572000] esi: f740b000   edi: f740b028   ebp: 000000e0   esp: d4733cac
[14698.572000] ds: 007b   es: 007b   fs: 00d8  gs: 0033  ss: 0068
[14698.572000] Process modprobe (pid: 20551, ti=d4732000 task=e180d030
task.ti=d4732000)
[14698.572000] Stack: f740b014 f740b000 f740b028 f8f22871 f740b014
f8f22831 f740b000 000000e0
[14698.572000]        c01cdcb8 df9f8670 00000059 00000003 df9f8676
00000003 df9f868b f8f24272
[14698.572000]        00000040 00000001 00000000 df8bbe40 000005ac
00008501 00000000 f25454e4
[14698.572000] Call Trace:
[14698.572000]  [<f8f22871>] uvc_delete+0x40/0x96 [uvcvideo]
[14698.572000]  [<f8f22831>] uvc_delete+0x0/0x96 [uvcvideo]
[14698.572000]  [<c01cdcb8>] kref_put+0x60/0x6d
[14698.572000]  [<f8f24272>] uvc_probe+0x1978/0x19c2 [uvcvideo]
[14698.572000]  [<f90bdc29>] do_get_write_access+0x488/0x4b5 [jbd]
[14698.572000]  [<c016cb86>] cache_alloc_refill+0x76/0x4c1
[14698.572000]  [<c01a9397>] __sysfs_new_dirent+0x20/0x4a
[14698.572000]  [<c01a949c>] sysfs_make_dirent+0x29/0x35
[14698.572000]  [<c01aa277>] sysfs_create_link+0x128/0x141
[14698.572000]  [<f911f2fe>] usb_match_one_id+0x1c/0x71 [usbcore]
[14698.572000]  [<f911fe28>] usb_probe_interface+0x67/0x86 [usbcore]
[14698.572000]  [<c023ec4f>] driver_probe_device+0xc8/0x14b
[14698.572000]  [<c023edbb>] __driver_attach+0x52/0x87
[14698.572000]  [<c023e248>] bus_for_each_dev+0x30/0x51
[14698.572000]  [<c023eacc>] driver_attach+0x16/0x18
[14698.572000]  [<c023ed69>] __driver_attach+0x0/0x87
[14698.572000]  [<c023e4e8>] bus_add_driver+0x6d/0x17d
[14698.572000]  [<f911f991>] usb_register_driver+0x6d/0xd4 [usbcore]
[14698.572000]  [<f8eb106d>] uvc_init+0x6d/0x84 [uvcvideo]
[14698.572000]  [<c0140f5b>] sys_init_module+0x172c/0x1802
[14698.572000]  [<c016fbba>] do_sync_read+0x0/0x10a
[14698.572000]  [<c016fc81>] do_sync_read+0xc7/0x10a
[14698.572000]  [<c0104ea2>] syscall_call+0x7/0xb
[14698.572000]  [<c02c0000>] unix_release_sock+0x58/0x1d0
[14698.572000]  =======================
[14698.572000] Code: 83 c0 08 39 c2 75 b6 45 3b 6e 78 72 9c 58 5b 5e 5f
5d c3 57 56 53 89 c3 b8 38 d4 f2 f8 e8 dc e0 39 c7 8b 43 1c 8d 7b 28 8b
53 18 <89> 42 04 89 10 b8 38 d4 f2 f8 c7 43 18 00 01 10 00 c7 43 1c 00
[14698.572000] EIP: [<f8f26ee4>] uvc_ctrl_cleanup_device+0x18/0x6c
[uvcvideo] SS:ESP 0068:d4733cac

How should the occurrences of "if
(intf->cur_altsetting->desc.bInterfaceSubClass == SC_VIDEOSTREAMING)" be
modified?

I am willing to test everything.

Thanks Laurent and I hope you get it working Stefan
Felix M?ller
-------------- next part --------------
A non-text attachment was scrubbed...
Name: isight-patch-against-r132.patch
Type: text/x-patch
Size: 18254 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071007/615bb8cc/attachment.bin>

From richard at 2007.atterer.net  Sun Oct  7 23:36:35 2007
From: richard at 2007.atterer.net (Richard Atterer)
Date: Sun, 7 Oct 2007 23:36:35 +0200
Subject: [Linux-uvc-devel] Software autofocus via dynamic controls API
In-Reply-To: <20071005164904.GA9717@vilya>
References: <20071005164904.GA9717@vilya>
Message-ID: <20071007213635.GA13640@vilya>

On Fri, Oct 05, 2007 at 06:49:05PM +0200, Richard Atterer wrote:
> I gather that software-controlled focus should be possible, but looking at 
> the driver and the output of "luvcview -l", there is no trace of any focus 
> controls - am I getting something wrong?

Ah, I have found out about this now: With SVN revision 130, direct support 
for V4L2_CID_FOCUS_ABSOLUTE was removed from the driver, with a log message 
of "Removed Logitech focus control (use the dynamic controls API instead)". 
dynctrl.txt describes the details of the ioctl API.

So far, I've not been successful in writing a small program to set the 
focus - I don't really understand what the required values for "Extension 
unit ID" and "Control selector" are. It would help to have another ioctl 
option to enumerate the available controls. (Or use a different API 
altogether: Create sysfs attributes for extended controls. ioctls are evil! 
;-)

Cheers,

  Richard

-- 
  __   _
  |_) /|  Richard Atterer     |  GnuPG key: 888354F7
  | \/?|  http://atterer.net  |  08A9 7B7D 3D13 3EF2 3D25  D157 79E6 F6DC 8883 54F7
  ? '` ?


From richard at 2007.atterer.net  Sun Oct  7 23:43:06 2007
From: richard at 2007.atterer.net (Richard Atterer)
Date: Sun, 7 Oct 2007 23:43:06 +0200
Subject: [Linux-uvc-devel] Thoughts on software autofocus
In-Reply-To: <20071005164904.GA9717@vilya>
References: <20071005164904.GA9717@vilya>
Message-ID: <20071007214306.GB13640@vilya>

Hello,

I had an interesting private mail exchange on autofocus with Alex - thanks 
for helping me to find the reason why I couldn't get it to work, Alex!

WRT implementing autofocus, I'm reposting some ideas I had, in case anybody 
is interested:

I think very good performance is a primary requirement - at 960x720 and 
15fps, luvcview already uses all my CPU. :-/ There are probably more 
efficient JPEG decoders than luvcview's, but still...

Here are some ideas on how to get the autofocus to require little CPU. I
mostly have MJPEG rather than YUV output in mind. (With YUV, you will need
to do a DCT yourself to be able to use the same algorithms.)

* The biggest speedup would be achieved by only concentrating on the center
area of the screen, and not even decoding the rest.

* You only need to decode the Y part (luminance), the colour info is
lower-resolution anyway.

* You do not need to completely decode the JPEG pictures! I'm certain there
is a very good correlation between sharp details in the picture, and the
presence of high-frequency coefficients in the JPEG data. Basically,
frequency analysis of the picture has already been done for you for free by
the MJPEG compression!

* Most of the time while the camera is in use, there will be no need to
adjust the focus. The adjustment algorithm should only kick in when there
are significant changes (movement) in the centre of the image. A cheap
check for larger-scale changes is possible by looking at the JPEG DC
coefficients, which specify the mean brightness of each 8x8 square of the
picture. As long as there is no movement, this check need not even be done
for every frame, but maybe only every .5 sec or so.

Some ideas on heuristics of how to make the refocusing itself fast:

The JPEG coefficients may also be suitable for measuring how much out of
focus the image is: I can describe this in detail on request, as it's a bit
hard to explain, but for each frame, you can create an array which maps
from the size of visible details (1..8 pixels) to the number of occurrences
of a detail of that size in the region of interest (centre of the image).

When the image begins to go out of focus, you will notice that all
coefficients will shift toward low frequencies - details with a size of 1,
2 or more pixels will disappear altogether from the image. The amount by
which to adjust the focus should be deducable from just how large the
smallest remaining detail is.

But there is a problem: You now know that the image is out of focus and by 
what amount, but you don't know whether the subject has moved nearer to the 
webcam or further away. I think there is no way to find this out in 100% of 
the cases, but the following heuristic might help to get the initial 
direction of searching (towards macro vs. infinity) right:

Look at the overall amount of change in the whole region of interest. If
some object has moved near the camera, the differences between successive
frames will get larger and larger - so move the focus towards macro. If the
amount of change is disminishing from one frame to the next, something is
moving away - move the focus towards infinity. In the middle ground (few
changes, or same amount of change) there's no way of telling which is
better, I think.

Once you have started to adjust the focus, you will quickly find out
whether it was the right direction by watching the amount of small details,
as described above.

Well, those were just some thoughts, I don't know whether it would all
work. :)

All the best,

  Richard

-- 
  __   _
  |_) /|  Richard Atterer     |  GnuPG key: 888354F7
  | \/?|  http://atterer.net  |  08A9 7B7D 3D13 3EF2 3D25  D157 79E6 F6DC 8883 54F7
  ? '` ?


From juan.baptiste at gmail.com  Mon Oct  8 00:11:43 2007
From: juan.baptiste at gmail.com (Juan Luis Baptiste)
Date: Sun, 07 Oct 2007 17:11:43 -0500
Subject: [Linux-uvc-devel] kopete
In-Reply-To: <200710040115.59938.laurent.pinchart@skynet.be>
References: <20071003190416.GA8179@pinux.info>
	<200710040115.59938.laurent.pinchart@skynet.be>
Message-ID: <200710071711.43990.juan.baptiste@gmail.com>

Hi,

On Wednesday 03 October 2007 18:15:58 Laurent Pinchart wrote:
> >
> > What do you use to have videocalls with uvcvideo? beside ekiga, maybe
> > amsn?
>
> I heard that aMsn (you might need the SVN version again) works too.
>

I have this version on Mandriva Cooker that works Ok:

amsn-0.97-0.RC1.20070905.2mdv2008.0

You can take it as a reference when looking one for you.


Cheers,
-- 
Juan Luis Baptiste


From t.st1 at gmx.net  Mon Oct  8 08:52:19 2007
From: t.st1 at gmx.net (Tom St)
Date: Mon, 08 Oct 2007 08:52:19 +0200
Subject: [Linux-uvc-devel] Thoughts on software autofocus
In-Reply-To: <20071007214306.GB13640@vilya>
References: <20071005164904.GA9717@vilya> <20071007214306.GB13640@vilya>
Message-ID: <4709D3A3.6060606@gmx.net>

Hello,
> * You do not need to completely decode the JPEG pictures! I'm certain there
> is a very good correlation between sharp details in the picture, and the
> presence of high-frequency coefficients in the JPEG data. Basically,
> frequency analysis of the picture has already been done for you for free by
> the MJPEG compression!
>
>   
That is also what i would like to understand, decoding a picture just
"half-way". I am interested in finding a motion detection algorithm,
that does not take much ressources like CPU and RAM. What i would like
to get, is the average color of each JPG-block (should be in there) and
if to many blocks change from frame to frame, i would assume it is a
motion. Do you have any hints for that? Currently i would assume i have
to implement JPG decoding myself in order to understand the algorithm
and stop at the right decoding level.
> * Most of the time while the camera is in use, there will be no need to
> adjust the focus. The adjustment algorithm should only kick in when there
> are significant changes (movement) in the centre of the image. A cheap
> check for larger-scale changes is possible by looking at the JPEG DC
> coefficients, which specify the mean brightness of each 8x8 square of the
> picture. As long as there is no movement, this check need not even be done
> for every frame, but maybe only every .5 sec or so.
Exactly, i would assume that this algorithm allows embedded devices to
do the motion detection well enough.

Kind regards,
Tom


From richard at 2007.atterer.net  Mon Oct  8 10:26:40 2007
From: richard at 2007.atterer.net (Richard Atterer)
Date: Mon, 8 Oct 2007 10:26:40 +0200
Subject: [Linux-uvc-devel] Thoughts on software autofocus
In-Reply-To: <4709D3A3.6060606@gmx.net>
References: <20071005164904.GA9717@vilya> <20071007214306.GB13640@vilya>
	<4709D3A3.6060606@gmx.net>
Message-ID: <20071008082640.GA4288@fluff.lan>

On Mon, Oct 08, 2007 at 08:52:19AM +0200, Tom St wrote:
> What i would like to get, is the average color of each JPG-block (should 
> be in there) and if to many blocks change from frame to frame, i would 
> assume it is a motion. Do you have any hints for that?

Wikipedia has a good introduction on JPEG: http://en.wikipedia.org/wiki/Jpeg

The average brightness of each 8x8 block is the DC coefficient of that 
block. If possible, you should try to work only with the brightness - in 
that case, you do not need to decode the colour information at all.

The colour information is stored with a lower resolution - usually, the 
blocks are 16x16 pixels, but with my Logitech 9000 Pro, I suspect the 
resolution is even lower than that.

> Currently i would assume i have to implement JPG decoding myself in order 
> to understand the algorithm and stop at the right decoding level.

That's right!

Cheers,

  Richard

-- 
  __   _
  |_) /|  Richard Atterer     |  GnuPG key: 888354F7
  | \/?|  http://atterer.net  |  08A9 7B7D 3D13 3EF2 3D25  D157 79E6 F6DC 8883 54F7
  ? '` ?


From Tobias.Beck at oeaw.ac.at  Mon Oct  8 11:35:01 2007
From: Tobias.Beck at oeaw.ac.at (Tobias Beck)
Date: Mon, 08 Oct 2007 11:35:01 +0200
Subject: [Linux-uvc-devel] Unsupported webcam from Chicony
Message-ID: <4709F9C5.60803@oeaw.ac.at>

Dear UVC developers,

I've bought a new HP Pavilion from the dv6000 series with a webcam from
Chicony, the usb identifier is 04f2:b015 and it doesn't seem to work out
of the box.

What can I do to help the development process?

Tobias

-- 
Tobias Beck

RICAM, Austrian Academy of Sciences
Altenbergerstra?e 69
A-4040 Linz, Austria

Telephone: +43 (0)732 2468 5229
Fax:       +43 (0)732 2468 5212

Get my public PGP-key from 'http://gpg-keyserver.de' (keyID=0xE5F2BB35).
(Key fingerprint = C278 D2DA 61D7 9959 5E62  FA92 36F8 0F14 E5F2 BB35)


From laurent.pinchart at skynet.be  Mon Oct  8 11:38:06 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 8 Oct 2007 11:38:06 +0200
Subject: [Linux-uvc-devel] Unsupported webcam from Chicony
In-Reply-To: <4709F9C5.60803@oeaw.ac.at>
References: <4709F9C5.60803@oeaw.ac.at>
Message-ID: <200710081138.06693.laurent.pinchart@skynet.be>

On Monday 08 October 2007 11:35, Tobias Beck wrote:
> Dear UVC developers,
>
> I've bought a new HP Pavilion from the dv6000 series with a webcam from
> Chicony, the usb identifier is 04f2:b015 and it doesn't seem to work out
> of the box.
>
> What can I do to help the development process?

Please send the output of

lsusb -d 04f2:b015 -v

(with usbutils 0.72 or newer).

Best regards,

Laurent Pinchart


From alex at seewald.at  Mon Oct  8 12:31:44 2007
From: alex at seewald.at (Dr. techn. Alexander K. Seewald)
Date: Mon, 8 Oct 2007 12:31:44 +0200
Subject: [Linux-uvc-devel] Thoughts on software autofocus
Message-ID: <20071008103143.GA23630@sdg.at>

Hi Tom,

If you want to do motion detection by comparing downsampled images
(as you suggested), the correlation coefficient is probably best
suited to check for image changes. I've used it for cut recognition
in TV advertisement recognition, and an appropriate threshold gives
recall of 0.3 at precision of 1.0 (cuts are when the image totally
changes ~ maximal motion between images)

Corr. coefficient for images is described in every good digital image
processing book, e.g. Digitale Bildverarbeitung (Burger & Burge) is
my favorite. http://www.imagingbook.com/index.php?id=59 (chapter 17)
has source code in Java, search for corrCoeffMatcher. It's quite
simple to port to different languages, basically one loop over the
image sufficies to compute this (with some optimization of the code)

If there were a camera which outputs true MPEG2, I would happen to know
a very good paper describing how to use this to get optical flow
motion vectors from the compressed MPEG2 data very fast - but alas, we
are dealing with MJPEG here, which is something quite a bit different.

A good way to start for something more subtle might be
http://en.wikipedia.org/wiki/Jpeg . The luvcview code has a sample
decoder in utils.c, jpeg_decode, which might also be helpful.

Best,
  Alex
-- 
Dr. Alexander K. Seewald         +43(664)1106886
              Seewald Solutions                 
------------------------------------------------
         Information wants to be free;
Information also wants to be expensive (S.Brant)
--------------- alex.seewald.at ----------------


From funtasyspace at yahoo.com  Mon Oct  8 13:08:48 2007
From: funtasyspace at yahoo.com (=?iso-8859-1?Q?J=F6rg_Hermsdorf?=)
Date: Mon, 8 Oct 2007 04:08:48 -0700 (PDT)
Subject: [Linux-uvc-devel] Control the status LED?
Message-ID: <602613.29989.qm@web50003.mail.re2.yahoo.com>

>>> does the uvcvideo module export some controls that can be set via the  

>>> sysfs filesystem? I'm looking for a way to toggle the status LED on and  

>>> off. Or is this directly controlled my the hardware?

>>>

>>> My cam is the Logitech QuickCam Sphere MP.

>

> The LED is directly controlled by the hardware. There is no way to turn  

> it on or off from the computer.


> 
> What Laurent said is partially true, the LED is by default controlled by  

> the hardware. However, there is a way of influencing the behavior of the  

> LED. There is an extension unit control that allows to set the LED to  

> states like On, Off, Blinking, and Auto. The latter one is just the  

> default.



If I understand correctly, things like controlling the LED are vendor specific 
and should be implemented via the dynamic controls API now!? So the goal 
is that the uvcvideo module just implements the UVC standard and does not 
contain the code to control certain vendor specific extension units? So in the
end, there's no more need to patch and recompile uvcvideo if someone adds 
some vendor specific functionality (e.g. like controlling the LED)?

I'm not sure if I understand the concept of the dynctl api correctly. Is it correct, 
that the dynctl API allows 3rd parties to register additional ioctls with the 
uvcvideo module which are then available to applications?
Does the dynctl api allows this additional functionality to be exported via the 
sysfs filesystem, too? Or would this require an additional sub-module e.g.
uvcvideo-logitech.ko which exports this (and only this) additional functionality 
via sysfs?

Best regards,
J?rg




      Heute schon einen Blick in die Zukunft von E-Mails wagen? www.yahoo.de/mail


From laurent.pinchart at skynet.be  Mon Oct  8 13:19:07 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 8 Oct 2007 13:19:07 +0200
Subject: [Linux-uvc-devel] Control the status LED?
In-Reply-To: <602613.29989.qm@web50003.mail.re2.yahoo.com>
References: <602613.29989.qm@web50003.mail.re2.yahoo.com>
Message-ID: <200710081319.08032.laurent.pinchart@skynet.be>

Hi J?rg,

On Monday 08 October 2007 13:08, J?rg Hermsdorf wrote:
> > > > does the uvcvideo module export some controls that can be set via the
> > > > sysfs filesystem? I'm looking for a way to toggle the status LED on
> > > > and offf. Or is this directly controlled my the hardware?
> > > >
> > > > My cam is the Logitech QuickCam Sphere MP.
> > >
> > > The LED is directly controlled by the hardware. There is no way to turn
> > > it on or off from the computer.
> >
> >
> >
> > What Laurent said is partially true, the LED is by default controlled by
> > the hardware. However, there is a way of influencing the behavior of the
> > LED. There is an extension unit control that allows to set the LED to
> > states like On, Off, Blinking, and Auto. The latter one is just the
> > default.
>
> If I understand correctly, things like controlling the LED are vendor
> specific and should be implemented via the dynamic controls API now!?

That's right.

> So the goal is that the uvcvideo module just implements the UVC standard and
> does not contain the code to control certain vendor specific extension
> units?

Yep.

> So in the end, there's no more need to patch and recompile uvcvideo 
> if someone adds some vendor specific functionality (e.g. like controlling
> the LED)?

Exactly. Hardcoding all vendor-specific controls in the driver would soon 
become a maintenance nightmare. As most controls are quite simple, I decided 
to go for a userspace API that allows vendors to register new controls are 
runtime.

> I'm not sure if I understand the concept of the dynctl api correctly. Is it
> correct, that the dynctl API allows 3rd parties to register additional
> ioctls with the uvcvideo module which are then available to applications?

That's right. 3rd parties can register new UVC controls and optionally map 
them to V4L2 controls. The new V4L2 controls are then available to all V4L2 
applications.

The V4L2 mapping is optional. The API allows applications to access UVC 
controls directly. Mappings are used when the controls make sense at the V4L2 
level (pan/tilt for instance). There is no point in mapping a vendor-specific 
UVC firmware update control to V4L2.

> Does the dynctl api allows this additional functionality to be exported via
> the sysfs filesystem, too? Or would this require an additional sub-module
> e.g. uvcvideo-logitech.ko which exports this (and only this) additional
> functionality via sysfs?

No sysfs exports exists yet. What exactly do you want to export ? V4L2 
controls ? UVC controls ? How do you handle permissions on those ?

Best regards,

Laurent Pinchart


From funtasyspace at yahoo.com  Mon Oct  8 13:51:05 2007
From: funtasyspace at yahoo.com (=?iso-8859-1?Q?J=F6rg_Hermsdorf?=)
Date: Mon, 8 Oct 2007 04:51:05 -0700 (PDT)
Subject: [Linux-uvc-devel] Control the status LED?
Message-ID: <415322.12045.qm@web50004.mail.re2.yahoo.com>

>> Does the dynctl api allows this additional functionality to be
 exported via
>> the sysfs filesystem, too? Or would this require an additional
 sub-module
>> e.g. uvcvideo-logitech.ko which exports this (and only this)
 additional
>> functionality via sysfs?
>
> No sysfs exports exists yet. What exactly do you want to export ? V4L2 
> controls ? UVC controls ? How do you handle permissions on those ?


For instance, I would like to be able to easily control the LED one day e.g. via:

# echo "blinking" > /sys/module/uvcvideo/parameters/status_led
# echo "auto" > /sys/module/uvcvideo/parameters/status_led
# echo "on" > /sys/module/uvcvideo/parameters/status_led
# echo "off" > /sys/module/uvcvideo/parameters/status_led



Permissions should be set via udev rules, e.g. like this:

KERNEL=="uvcvideo",                GROUP="video", MODE="0664"

So every user which is in the group 'video' could write/set the LED, 
if it was exported via sysfs. And if you don't want that, you could 
change the GROUP or MODE values to your needs.

I must admit, I don't know much about ioctls (yet). But it seems like, 
if I would like to control the LED at the moment, I would need to write 
my own code, correct? There's no way to access ioctls directly from 
within a shell? So having sysfs hooks for certain settings and controls 
would be very nice.

Best regards,
J?rg



      ________ 
Yahoo! Clever: Stellen Sie Fragen und finden Sie Antworten. Teilen Sie Ihr Wissen. www.yahoo.de/clever



From xxseyxx at gmail.com  Mon Oct  8 14:25:26 2007
From: xxseyxx at gmail.com (Toyota Yukinari)
Date: Mon, 08 Oct 2007 21:25:26 +0900
Subject: [Linux-uvc-devel] Logitech(Logicool) Qcam Orbit AF operation report
Message-ID: <470A21B6.3080601@gmail.com>

Hello.
I have Qcam Orbit AF that is maybe 'Orbit' edition of Quickcam Pro 9000
and it works as well as 9000 with linux-uvc.
(For details see URL below. Now, it seems to be released in Japan only,
I can't look for English page.)
http://www.logicool.co.jp/index.cfm/webcam_communications/webcams/devices/3480&cl=jp,ja

Pan/Tilt mechanisms are working nicely.(I tested in rev 126 and rev 132,
but I don't know how to use dynctrl, so it worked only rev 126)
The Pan mechanism has +-70 degrees range and
The Tilt mechanism has +-30 degrees range.
I'm using Pan/Tilt mechanisms with uvc_streamer. It works good.

Also, I tested software focus control too, using V4L2_CID_FOCUS_RELATIVE.
But it's not working. In lsusb -v, I couldn't find Focus Control item in
bmControls.

BTW, I have Qcam Pro 9000 for Notebooks too, and it hasn't Focus Control
item in bmControls, that indicate Logitech's AF series don't support
Focus Control by linux-uvc?

Attached file is result of lsusb -v.

Best regards,

----
Toyota Yukinari

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: lsusb_orbit_af.txt
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071008/7aeeac61/attachment.txt>

From genstef at gentoo.org  Mon Oct  8 20:44:45 2007
From: genstef at gentoo.org (Stefan Schweizer)
Date: Mon, 08 Oct 2007 20:44:45 +0200
Subject: [Linux-uvc-devel] uvc revision 132 and iSight
References: <47044D01.7000007@pobox.com> <fe2tkm$uk4$1@sea.gmane.org>
	<200710041653.11942.laurent.pinchart@skynet.be>
	<47094D65.5040203@derklecks.de>
Message-ID: <fedtqt$2vj$1@sea.gmane.org>

I am as far as you on this one :( I also get the oops when porting to the
latest revision and I have problemsunderstanding some of the
non-conditional modifications without comments.

maybe the people who wrote it should bring it up for inclusion

Best regards,
-Stefan



From laurent.pinchart at skynet.be  Tue Oct  9 00:50:06 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 9 Oct 2007 00:50:06 +0200
Subject: [Linux-uvc-devel] Software autofocus via dynamic controls API
In-Reply-To: <20071007213635.GA13640@vilya>
References: <20071005164904.GA9717@vilya> <20071007213635.GA13640@vilya>
Message-ID: <200710090050.06404.laurent.pinchart@skynet.be>

Hi Richard,

On Sunday 07 October 2007, Richard Atterer wrote:
> On Fri, Oct 05, 2007 at 06:49:05PM +0200, Richard Atterer wrote:
> > I gather that software-controlled focus should be possible, but looking
> > at the driver and the output of "luvcview -l", there is no trace of any
> > focus controls - am I getting something wrong?
>
> Ah, I have found out about this now: With SVN revision 130, direct support
> for V4L2_CID_FOCUS_ABSOLUTE was removed from the driver, with a log message
> of "Removed Logitech focus control (use the dynamic controls API instead)".
> dynctrl.txt describes the details of the ioctl API.
>
> So far, I've not been successful in writing a small program to set the
> focus - I don't really understand what the required values for "Extension
> unit ID" and "Control selector" are. It would help to have another ioctl
> option to enumerate the available controls. (Or use a different API
> altogether: Create sysfs attributes for extended controls. ioctls are evil!
> ;-)

A userspace utility to add vendor-specific controls and map them to V4L2 is 
(or at least should be) underway. The idea is to integrate it with udev and 
react to hotplug events. Once done, the V4L2 controls should be magically 
back.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Oct  9 00:57:30 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 9 Oct 2007 00:57:30 +0200
Subject: [Linux-uvc-devel] Control the status LED?
In-Reply-To: <415322.12045.qm@web50004.mail.re2.yahoo.com>
References: <415322.12045.qm@web50004.mail.re2.yahoo.com>
Message-ID: <200710090057.31082.laurent.pinchart@skynet.be>

On Monday 08 October 2007, J?rg Hermsdorf wrote:
> >> Does the dynctl api allows this additional functionality to be
>
>  exported via
>
> >> the sysfs filesystem, too? Or would this require an additional
>
>  sub-module
>
> >> e.g. uvcvideo-logitech.ko which exports this (and only this)
>
>  additional
>
> >> functionality via sysfs?
> >
> > No sysfs exports exists yet. What exactly do you want to export ? V4L2
> > controls ? UVC controls ? How do you handle permissions on those ?
>
> For instance, I would like to be able to easily control the LED one day
> e.g. via:
>
> # echo "blinking" > /sys/module/uvcvideo/parameters/status_led
> # echo "auto" > /sys/module/uvcvideo/parameters/status_led
> # echo "on" > /sys/module/uvcvideo/parameters/status_led
> # echo "off" > /sys/module/uvcvideo/parameters/status_led
>
>
>
> Permissions should be set via udev rules, e.g. like this:
>
> KERNEL=="uvcvideo",                GROUP="video", MODE="0664"
>
> So every user which is in the group 'video' could write/set the LED,
> if it was exported via sysfs. And if you don't want that, you could
> change the GROUP or MODE values to your needs.

Do udev rules apply to sysfs as well ?

> I must admit, I don't know much about ioctls (yet). But it seems like,
> if I would like to control the LED at the moment, I would need to write
> my own code, correct? There's no way to access ioctls directly from
> within a shell? So having sysfs hooks for certain settings and controls
> would be very nice.

An alternative for now would be to use a userspace tool to get and set the 
controls (something similar to v4lctl). It would work for all V4L2 devices 
witgout requiring sysfs support in all drivers.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Oct  9 01:03:24 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 9 Oct 2007 01:03:24 +0200
Subject: [Linux-uvc-devel] Logitech(Logicool) Qcam Orbit AF operation
	report
In-Reply-To: <470A21B6.3080601@gmail.com>
References: <470A21B6.3080601@gmail.com>
Message-ID: <200710090103.24442.laurent.pinchart@skynet.be>

Hi Toyota,

On Monday 08 October 2007, Toyota Yukinari wrote:
> Hello.
> I have Qcam Orbit AF that is maybe 'Orbit' edition of Quickcam Pro 9000
> and it works as well as 9000 with linux-uvc.
> (For details see URL below. Now, it seems to be released in Japan only,
> I can't look for English page.)
> http://www.logicool.co.jp/index.cfm/webcam_communications/webcams/devices/3
>480&cl=jp,ja
>
> Pan/Tilt mechanisms are working nicely.(I tested in rev 126 and rev 132,
> but I don't know how to use dynctrl, so it worked only rev 126)
> The Pan mechanism has +-70 degrees range and
> The Tilt mechanism has +-30 degrees range.
> I'm using Pan/Tilt mechanisms with uvc_streamer. It works good.
>
> Also, I tested software focus control too, using V4L2_CID_FOCUS_RELATIVE.
> But it's not working. In lsusb -v, I couldn't find Focus Control item in
> bmControls.
>
> BTW, I have Qcam Pro 9000 for Notebooks too, and it hasn't Focus Control
> item in bmControls, that indicate Logitech's AF series don't support
> Focus Control by linux-uvc?

Logitech webcams implement focus through extension units. This requires 
dynctrl support in the driver and a userspace tool to add the required 
controls. Implementation is underway. I'll keep the list informed as soon as 
the first version becomes available.

> Attached file is result of lsusb -v.

Thanks.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Oct  9 01:20:30 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 9 Oct 2007 01:20:30 +0200
Subject: [Linux-uvc-devel] uvc revision 132 and iSight
In-Reply-To: <47094D65.5040203@derklecks.de>
References: <47044D01.7000007@pobox.com>
	<200710041653.11942.laurent.pinchart@skynet.be>
	<47094D65.5040203@derklecks.de>
Message-ID: <200710090120.30533.laurent.pinchart@skynet.be>

Hi Felix,

On Sunday 07 October 2007, Felix M?ller wrote:
> Hi,
>
> > On Thursday 04 October 2007 16:33, Stefan Schweizer wrote:
[snip]
> > I can't apply the patch as-is. It must be ported to the SVN head first,
> > and some hardcoded assumptions must be removed. If someone wants to do
> > the job, and if we can find a way to integrate the patch without
> > disturbing too much the driver (other UVC devices must still work :-) ),
> > I could apply it.
>
> Laruent: That sounds good but unfortunately I am not a C programmer. The
> attached patch certainly is nothing to apply as is.
>
> Could you please comment on this oops. Is it a bug in the patch or in
> the uvcvideo svn as "if (intf->cur_altsetting->desc.bInterfaceSubClass
> != SC_VIDEOSTREAMING)" is never hit? To fix it I commented out
> "continue" around line 854.

It's definitely a bug in the patch. You can't comment lines at random and 
expect everything to work :-)

[snip]

> How should the occurrences of "if
> (intf->cur_altsetting->desc.bInterfaceSubClass == SC_VIDEOSTREAMING)" be
> modified?

For a UVC device bInterfaceSubclass should be either SC_VIDEOCONTROL or 
SC_VIDEOSTREAMING. The driver uses that field to differentiate between the 
control interface and the streaming interface(s).

If I remember well, the iSight sets bInterfaceSubclass to 0xff for all 
interfaces. This makes the Linux UVC probe fail. You commented the related 
tests to stop the probe from failing, but that confuses the driver.

A proper fix would be to change the iSight descriptors :-) This could actually 
be done by locating the descriptors in the firmware and patching them. Not 
sure if that's a viable long-term solution though, as next firmware versions 
won't work out of the box. On the other hand, newer firmwares might be even 
less UVC compatible...

Best regards,

Laurent Pinchart


From geoff at gweb.org  Tue Oct  9 02:18:26 2007
From: geoff at gweb.org (Geoffrey Plitt)
Date: Mon, 8 Oct 2007 17:18:26 -0700
Subject: [Linux-uvc-devel] sample code? "hello world" for linux video?
In-Reply-To: <21f71af10710051639y6277520j703d2620cee5b5e2@mail.gmail.com>
References: <21f71af10710031553m1b4d422ao6e54592aff141a25@mail.gmail.com>
	<20071004085900.GA4112@fluff.lan>
	<200710041644.16898.chris.horler@clara.co.uk>
	<21f71af10710042017w2b0b5a18j6144b1f6506670ce@mail.gmail.com>
	<AACE2A3DD3559A4CBA163CB5D70C9ABE0ACF7029@calmail1.smarttech.inc>
	<21f71af10710051639y6277520j703d2620cee5b5e2@mail.gmail.com>
Message-ID: <21f71af10710081718o1dd884c2uaf7b806b718f824b@mail.gmail.com>

can anyone help?

i'm using the standard example of capture.c; i replaced the process_image
function, but i can't figure out the format for this buffer. i've gone
through the docs again
my code below assumes it's just greyscale values, single-pixel-255. do you
know what the format is?

On 10/5/07, Geoffrey Plitt <geoff at gweb.org> wrote:
>
> Nate,
>
> Thanks again for your help. I've got some progress. I modified the
> process_image function to write out a PGM file:
>
> static void
> process_image                   (const void *           p)
> {
>   FILE *out = fopen(" out.pgm ", "w");
>   fprintf(out,"P2\n");
>   fprintf(out,"#CREATOR: ggp\n");
>   fprintf(out,"640 480\n");
>   fprintf(out,"255\n");
>
>   int x;
>   int y;
>   unsigned char * pixel = p+1;
>   for(x=0; x<WIDTH; x++)
>   {
>     for(y=0; y<HEIGHT; y++)
>     {
>       fprintf(out,"%u ",*pixel);
>       pixel++;
>     }
>     fprintf(out,"\n");
>   }
>   fclose(out);
>   exit(0);
> }
>
> but I don't think I understand the contents of the buf completely.
> Attached is the resulting image - I can see the flourescent light in there,
> but there are error patterns all over.
>
> Any ideas?
>
> -Geoff
>
> On 10/5/07, Nathanael Galpin <NathanaelGalpin at smarttech.com> wrote:
> >
> >  Hey Geoff,
> >
> >
> >
> > This is a great file to start with. In fact it's what I used first.
> > Couple things make it a bit tricky. One is that he's using switch statements
> > to separate different ways to read from the cameras, so you'll want to note
> > which method you're using, (should be MMAP).
> >
> >
> >
> > The line where he actually captures a frame is in the read_frame
> > function.
> >
> >
> >
> > (-1 == xioctl (fd, VIDIOC_DQBUF, &buf))
> >
> >
> >
> > This blocks until it's able to deque a frame from the camera (unless you
> > specify non-blocking when you open the cam file, in which case it returns -1
> > when it can't immediately deque a frame). You can get at the raw frame data
> > through the buf struct.
> >
> >
> >
> > A little farther down, he re-enques the buffer after he's finished with
> > with this line:
> >
> >
> >
> > (-1 == xioctl (fd, VIDIOC_QBUF, &buf))
> >
> >
> >
> > You can read through the V4L2 spec a bit at bytesex.org to check out the
> > parameters of the buf struct.
> >
> >
> >
> > If you want to display this data, a quick way to do it would be to pull
> > the Y values from the buffer and use these to write a grayscale image to the
> > screen. I used a Qt picture object when I first started doing this, and that
> > actually worked quite well.
> >
> >
> >
> > Hope that helps, and good luck!
> >
> >
> >
> >
> >
> >   -- Nathanael
> >
> >
> >  ------------------------------
> >
> > *From:* linux-uvc-devel-bounces at lists.berlios.de [mailto:
> > linux-uvc-devel-bounces at lists <linux-uvc-devel-bounces at lists.berlios.de>.berlios.de<linux-uvc-devel-bounces at lists.berlios.de>]
> > *On Behalf Of *Geoffrey Plitt
> > *Sent:* Thursday, October 04, 2007 9:18 PM
> >
> >  hey christopher. this file looks promising, but it doesn't do anything
> > with the frames. i compiled/ran and it just prints dots, you have to take as
> > faith that it's capturing - it doesn't output or save the frames. in fact, i
> > can't tell exactly where in the code it actually grabs a frame and has
> > access to the frame's pixel buffer. any clues?
> > -geoff
> >
> > On 10/4/07, *Christopher HORLER* <chris.horler at clara.co.uk> wrote:
> >
> > http://v4l2spec.bytesex.org /v4l2spec/capture.c<http://v4l2spec.bytesex.org/v4l2spec/capture.c>
> >
> >
> >
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071008/69bdc877/attachment.html>

From geoff at gweb.org  Tue Oct  9 03:28:53 2007
From: geoff at gweb.org (Geoffrey Plitt)
Date: Mon, 8 Oct 2007 18:28:53 -0700
Subject: [Linux-uvc-devel] sample code? "hello world" for linux video?
In-Reply-To: <21f71af10710081718o1dd884c2uaf7b806b718f824b@mail.gmail.com>
References: <21f71af10710031553m1b4d422ao6e54592aff141a25@mail.gmail.com>
	<20071004085900.GA4112@fluff.lan>
	<200710041644.16898.chris.horler@clara.co.uk>
	<21f71af10710042017w2b0b5a18j6144b1f6506670ce@mail.gmail.com>
	<AACE2A3DD3559A4CBA163CB5D70C9ABE0ACF7029@calmail1.smarttech.inc>
	<21f71af10710051639y6277520j703d2620cee5b5e2@mail.gmail.com>
	<21f71af10710081718o1dd884c2uaf7b806b718f824b@mail.gmail.com>
Message-ID: <21f71af10710081828g5bf9fab9q1369f5866cdc6ed0@mail.gmail.com>

update: i fixed it myself with a couple of hours of trial and error; i think
you guys might be interested in the result. i would warrant this is the
simplest possible way to access the camera and save an image. it uses PGM
format, which is probably the simplest widespread image format.

// WORKS
// w/ WIDTH=960, HEIGHT=720
// or WIDTH=640, HEIGHT=480
// or WIDTH=320, HEIGHT=240

// WORKS
// w/ WIDTH=960, HEIGHT=720
// or WIDTH=640, HEIGHT=480
// or WIDTH=320, HEIGHT=240

static void
process_image                   (const void *           p)
{
  FILE *out = fopen("out.pgm", "w");
  fprintf(out,"P2\n");
  fprintf(out,"#CREATOR: ggp\n");
  fprintf(out,"%u %u\n",WIDTH,HEIGHT);
  fprintf(out,"255\n");

  int x;
  int y;
  unsigned char * pixel = p;
  for(y=0; y<HEIGHT; y++)
  {
    for(x=0; x<WIDTH; x++)
    {
      fprintf(out,"%u ",pixel[(y*WIDTH+x)*2]);
    }
    fprintf(out,"\n");
  }
  fclose(out);
  exit(0);
}

On 10/8/07, Geoffrey Plitt <geoff at gweb.org> wrote:
>
> can anyone help?
>
> i'm using the standard example of capture.c; i replaced the process_image
> function, but i can't figure out the format for this buffer. i've gone
> through the docs again
> my code below assumes it's just greyscale values, single-pixel-255. do you
> know what the format is?
>
> On 10/5/07, Geoffrey Plitt <geoff at gweb.org> wrote:
> >
> > Nate,
> >
> > Thanks again for your help. I've got some progress. I modified the
> > process_image function to write out a PGM file:
> >
> > static void
> >  process_image                   (const void *           p)
> > {
> >   FILE *out = fopen(" out.pgm ", "w");
> >   fprintf(out,"P2\n");
> >   fprintf(out,"#CREATOR: ggp\n");
> >   fprintf(out,"640 480\n");
> >   fprintf(out,"255\n");
> >
> >   int x;
> >   int y;
> >   unsigned char * pixel = p+1;
> >   for(x=0; x<WIDTH; x++)
> >   {
> >     for(y=0; y<HEIGHT; y++)
> >     {
> >       fprintf(out,"%u ",*pixel);
> >       pixel++;
> >     }
> >     fprintf(out,"\n");
> >   }
> >   fclose(out);
> >   exit(0);
> > }
> >
> > but I don't think I understand the contents of the buf completely.
> > Attached is the resulting image - I can see the flourescent light in there,
> > but there are error patterns all over.
> >
> > Any ideas?
> >
> > -Geoff
> >
> > On 10/5/07, Nathanael Galpin < NathanaelGalpin at smarttech.com> wrote:
> > >
> > >  Hey Geoff,
> > >
> > >
> > >
> > > This is a great file to start with. In fact it's what I used first.
> > > Couple things make it a bit tricky. One is that he's using switch statements
> > > to separate different ways to read from the cameras, so you'll want to note
> > > which method you're using, (should be MMAP).
> > >
> > >
> > >
> > > The line where he actually captures a frame is in the read_frame
> > > function.
> > >
> > >
> > >
> > > (-1 == xioctl (fd, VIDIOC_DQBUF, &buf))
> > >
> > >
> > >
> > > This blocks until it's able to deque a frame from the camera (unless
> > > you specify non-blocking when you open the cam file, in which case it
> > > returns -1 when it can't immediately deque a frame). You can get at the raw
> > > frame data through the buf struct.
> > >
> > >
> > >
> > > A little farther down, he re-enques the buffer after he's finished
> > > with with this line:
> > >
> > >
> > >
> > > (-1 == xioctl (fd, VIDIOC_QBUF, &buf))
> > >
> > >
> > >
> > > You can read through the V4L2 spec a bit at bytesex.org to check out
> > > the parameters of the buf struct.
> > >
> > >
> > >
> > > If you want to display this data, a quick way to do it would be to
> > > pull the Y values from the buffer and use these to write a grayscale image
> > > to the screen. I used a Qt picture object when I first started doing this,
> > > and that actually worked quite well.
> > >
> > >
> > >
> > > Hope that helps, and good luck!
> > >
> > >
> > >
> > >
> > >
> > >   -- Nathanael
> > >
> > >
> > >  ------------------------------
> > >
> > > *From:* linux-uvc-devel-bounces at lists.berlios.de [mailto:
> > > linux-uvc-devel-bounces at lists<linux-uvc-devel-bounces at lists.berlios.de>.berlios.de<linux-uvc-devel-bounces at lists.berlios.de>]
> > > *On Behalf Of *Geoffrey Plitt
> > > *Sent:* Thursday, October 04, 2007 9:18 PM
> > >
> > >  hey christopher. this file looks promising, but it doesn't do
> > > anything with the frames. i compiled/ran and it just prints dots, you have
> > > to take as faith that it's capturing - it doesn't output or save the frames.
> > > in fact, i can't tell exactly where in the code it actually grabs a frame
> > > and has access to the frame's pixel buffer. any clues?
> > > -geoff
> > >
> > > On 10/4/07, *Christopher HORLER* <chris.horler at clara.co.uk> wrote:
> > >
> > > http://v4l2spec.bytesex.org /v4l2spec/capture.c<http://v4l2spec.bytesex.org/v4l2spec/capture.c>
> > >
> > >
> > >
> > >
> >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071008/ef3603a4/attachment.html>

From NathanaelGalpin at smarttech.com  Tue Oct  9 17:21:19 2007
From: NathanaelGalpin at smarttech.com (Nathanael Galpin)
Date: Tue, 9 Oct 2007 09:21:19 -0600
Subject: [Linux-uvc-devel] sample code? "hello world" for linux video?
In-Reply-To: <21f71af10710081718o1dd884c2uaf7b806b718f824b@mail.gmail.com>
References: <21f71af10710031553m1b4d422ao6e54592aff141a25@mail.gmail.com>
	<20071004085900.GA4112@fluff.lan>
	<200710041644.16898.chris.horler@clara.co.uk>
	<21f71af10710042017w2b0b5a18j6144b1f6506670ce@mail.gmail.com>
	<AACE2A3DD3559A4CBA163CB5D70C9ABE0ACF7029@calmail1.smarttech.inc>
	<21f71af10710051639y6277520j703d2620cee5b5e2@mail.gmail.com>
	<21f71af10710081718o1dd884c2uaf7b806b718f824b@mail.gmail.com>
Message-ID: <AACE2A3DD3559A4CBA163CB5D70C9ABE0ACF702B@calmail1.smarttech.inc>

Hey Geoff,

 

The format of the buffer is YUYV. Every 4 bytes describes 2 pixels. The
format is Y1 Cr Y2 Cb. The Y values are the intensity of each pixel, the
C values are the red and blue portions of the image, and apply to both
Y1 and Y2. That is, the croma resolution is half that of the intensity
resolution.

 

So to get a grayscale image, you need to modify your code to pull out
the Y values only. It's possible your camera switches the order of some
of the elements, but this is the format I've always encountered using
UVC cams.

 

  -- Nathanael

 

________________________________

From: playergiro at gmail.com [mailto:playergiro at gmail.com] On Behalf Of
Geoffrey Plitt
Sent: Monday, October 08, 2007 6:18 PM
To: Nathanael Galpin; linux-uvc-devel at lists.berlios.de
Subject: Re: [Linux-uvc-devel] sample code? "hello world" for linux
video?

 

can anyone help?

i'm using the standard example of capture.c; i replaced the
process_image function, but i can't figure out the format for this
buffer. i've gone through the docs again 
my code below assumes it's just greyscale values, single-pixel-255. do
you know what the format is? 

On 10/5/07, Geoffrey Plitt <geoff at gweb.org> wrote:

Nate,

Thanks again for your help. I've got some progress. I modified the
process_image function to write out a PGM file:

static void
process_image                   (const void *           p)
{
  FILE *out = fopen(" out.pgm ", "w");
  fprintf(out,"P2\n");
  fprintf(out,"#CREATOR: ggp\n");  
  fprintf(out,"640 480\n");
  fprintf(out,"255\n");

  int x;
  int y;
  unsigned char * pixel = p+1; 
  for(x=0; x<WIDTH; x++)
  {
    for(y=0; y<HEIGHT; y++)
    {
      fprintf(out,"%u ",*pixel);  
      pixel++;
    }
    fprintf(out,"\n"); 
  }
  fclose(out);
  exit(0); 
}

but I don't think I understand the contents of the buf completely.
Attached is the resulting image - I can see the flourescent light in
there, but there are error patterns all over.  

Any ideas?

-Geoff

 

On 10/5/07, Nathanael Galpin < NathanaelGalpin at smarttech.com
<mailto:NathanaelGalpin at smarttech.com> > wrote: 

Hey Geoff,

 

This is a great file to start with. In fact it's what I used first.
Couple things make it a bit tricky. One is that he's using switch
statements to separate different ways to read from the cameras, so
you'll want to note which method you're using, (should be MMAP).

 

The line where he actually captures a frame is in the read_frame
function. 

 

(-1 == xioctl (fd, VIDIOC_DQBUF, &buf))

 

This blocks until it's able to deque a frame from the camera (unless you
specify non-blocking when you open the cam file, in which case it
returns -1 when it can't immediately deque a frame). You can get at the
raw frame data through the buf struct.

 

A little farther down, he re-enques the buffer after he's finished with
with this line:

 

(-1 == xioctl (fd, VIDIOC_QBUF, &buf)) 

 

You can read through the V4L2 spec a bit at bytesex.org to check out the
parameters of the buf struct.

 

If you want to display this data, a quick way to do it would be to pull
the Y values from the buffer and use these to write a grayscale image to
the screen. I used a Qt picture object when I first started doing this,
and that actually worked quite well.

 

Hope that helps, and good luck!

 

 

  -- Nathanael

 

________________________________

From: linux-uvc-devel-bounces at lists.berlios.de
[mailto:linux-uvc-devel-bounces at lists
<mailto:linux-uvc-devel-bounces at lists.berlios.de>  .berlios.de
<mailto:linux-uvc-devel-bounces at lists.berlios.de> ] On Behalf Of
Geoffrey Plitt
Sent: Thursday, October 04, 2007 9:18 PM

hey christopher. this file looks promising, but it doesn't do anything
with the frames. i compiled/ran and it just prints dots, you have to
take as faith that it's capturing - it doesn't output or save the
frames. in fact, i can't tell exactly where in the code it actually
grabs a frame and has access to the frame's pixel buffer. any clues? 
-geoff

On 10/4/07, Christopher HORLER <chris.horler at clara.co.uk> wrote:

http://v4l2spec.bytesex.org /v4l2spec/capture.c
<http://v4l2spec.bytesex.org/v4l2spec/capture.c> 



 





 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071009/850d1f10/attachment.html>

From ernih at gmx.de  Tue Oct  9 22:06:28 2007
From: ernih at gmx.de (ernih at gmx.de)
Date: Tue, 9 Oct 2007 22:06:28 +0200
Subject: [Linux-uvc-devel] Aspire 9300 webcam
Message-ID: <200710092206.28446.ernih@gmx.de>

hi,

hi i wanted to test this here:

http://ubuntuforums.org/showpost.php?p=3114742&postcount=6

her the report of my Terminal:

http://ubuntuusers.de/paste/15741/

when i type:

./luvcview

i get this report/messages:

luvcview version 0.2.1
Video driver: x11
A window manager is available
video /dev/video0
Unable to set format: 5.
Init v4L2 failed !! exit fatal

what is wrong? what can i do?

thx


From laurent.pinchart at skynet.be  Tue Oct  9 23:09:21 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 9 Oct 2007 23:09:21 +0200
Subject: [Linux-uvc-devel] Aspire 9300 webcam
In-Reply-To: <200710092206.28446.ernih@gmx.de>
References: <200710092206.28446.ernih@gmx.de>
Message-ID: <200710092309.21414.laurent.pinchart@skynet.be>

Hi,

On Tuesday 09 October 2007, ernih at gmx.de wrote:
> hi,
>
> hi i wanted to test this here:
>
> http://ubuntuforums.org/showpost.php?p=3114742&postcount=6
>
> her the report of my Terminal:
>
> http://ubuntuusers.de/paste/15741/
>
> when i type:
>
> ./luvcview
>
> i get this report/messages:
>
> luvcview version 0.2.1
> Video driver: x11
> A window manager is available
> video /dev/video0
> Unable to set format: 5.
> Init v4L2 failed !! exit fatal
>
> what is wrong? what can i do?

Please post the kernel log (dmesg) after trying to run luvcview.

Best regards,

Laurent Pinchart


From ernih at gmx.de  Tue Oct  9 23:21:25 2007
From: ernih at gmx.de (ernih at gmx.de)
Date: Tue, 9 Oct 2007 23:21:25 +0200
Subject: [Linux-uvc-devel] Fwd: Re:  Aspire 9300 webcam
Message-ID: <200710092321.25317.ernih@gmx.de>

here the log file:

http://ubuntuusers.de/paste/15903/

thanks
----------  Forwarded Message  ----------

Subject: Re: [Linux-uvc-devel] Aspire 9300 webcam
Date: Dienstag 09 Oktober 2007
From: Laurent Pinchart <laurent.pinchart at skynet.be>
To: linux-uvc-devel at lists.berlios.de

Hi,

On Tuesday 09 October 2007, ernih at gmx.de wrote:
> hi,
>
> hi i wanted to test this here:
>
> http://ubuntuforums.org/showpost.php?p=3114742&postcount=6
>
> her the report of my Terminal:
>
> http://ubuntuusers.de/paste/15741/
>
> when i type:
>
> ./luvcview
>
> i get this report/messages:
>
> luvcview version 0.2.1
> Video driver: x11
> A window manager is available
> video /dev/video0
> Unable to set format: 5.
> Init v4L2 failed !! exit fatal
>
> what is wrong? what can i do?

Please post the kernel log (dmesg) after trying to run luvcview.

Best regards,

Laurent Pinchart

-------------------------------------------------------


From laurent.pinchart at skynet.be  Tue Oct  9 23:33:50 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 9 Oct 2007 23:33:50 +0200
Subject: [Linux-uvc-devel] Fwd: Re:  Aspire 9300 webcam
In-Reply-To: <200710092321.25317.ernih@gmx.de>
References: <200710092321.25317.ernih@gmx.de>
Message-ID: <200710092333.50287.laurent.pinchart@skynet.be>

Hi,

On Tuesday 09 October 2007, ernih at gmx.de wrote:
> here the log file:
>
> http://ubuntuusers.de/paste/15903/

The log seems to indicate you're not using the driver you compiled, but 
probably an older version provided by a Ubuntu package.

Try to uninstall older revisions and try again, it should then work.

Best regards,

Laurent Pinchart


From ernih at gmx.de  Tue Oct  9 23:35:08 2007
From: ernih at gmx.de (ernih at gmx.de)
Date: Tue, 9 Oct 2007 23:35:08 +0200
Subject: [Linux-uvc-devel] Fwd: Re:  Fwd: Re:  Aspire 9300 webcam
Message-ID: <200710092335.08623.ernih@gmx.de>

hi,

which driver do u mean? sorry i am a newbee.

how can i uninstall it?

where can i get the newest driver?

thx


----------  Forwarded Message  ----------

Subject: Re: [Linux-uvc-devel] Fwd: Re:  Aspire 9300 webcam
Date: Dienstag 09 Oktober 2007
From: Laurent Pinchart <laurent.pinchart at skynet.be>
To: linux-uvc-devel at lists.berlios.de

Hi,

On Tuesday 09 October 2007, ernih at gmx.de wrote:
> here the log file:
>
> http://ubuntuusers.de/paste/15903/

The log seems to indicate you're not using the driver you compiled, but 
probably an older version provided by a Ubuntu package.

Try to uninstall older revisions and try again, it should then work.

Best regards,

Laurent Pinchart

-------------------------------------------------------


From laurent.pinchart at skynet.be  Wed Oct 10 00:53:04 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 10 Oct 2007 00:53:04 +0200
Subject: [Linux-uvc-devel] Fwd: Re:  Fwd: Re:  Aspire 9300 webcam
In-Reply-To: <200710092335.08623.ernih@gmx.de>
References: <200710092335.08623.ernih@gmx.de>
Message-ID: <200710100053.04930.laurent.pinchart@skynet.be>

Hi,

On Tuesday 09 October 2007, ernih at gmx.de wrote:
> hi,
>
> which driver do u mean? sorry i am a newbee.

The Linux UVC driver obviously (uvcvideo.ko).

You checkout and the latest version from SVN, compiled and installed it:

> salsero at salsero:~/trunk$ sudo make install
> Installing USB Video Class driver...
> make[1]: Betrete Verzeichnis '/usr/src/linux-headers-2.6.20-16-generic'
>   INSTALL /home/salsero/trunk/uvcvideo.ko
>   DEPMOD  2.6.20-16-generic
> make[1]: Verlasse Verzeichnis '/usr/src/linux-headers-2.6.20-16-generic'
> depmod -ae
> salsero at salsero:~/trunk$ sudo modprobe uvcvideo

(btw it would be nice to set the locale to C before generating such logs if 
you plan to post them)

From the kernel log you sent me, it seems the driver that is loaded in your 
system isn't the one you compiled. You probably have a Ubuntu package or an 
old version lying around.

> how can i uninstall it?

If you don't tell me how it got there in the first place I won't be able to 
help.

> where can i get the newest driver?

You already checked it out from SVN.

Best regards,

Laurent Pinchart


From hirofumi at momose.com  Wed Oct 10 04:22:56 2007
From: hirofumi at momose.com (Hirofumi Momose)
Date: Wed, 10 Oct 2007 11:22:56 +0900
Subject: [Linux-uvc-devel] Page allocation failure
Message-ID: <20071010104339.7999.HIROFUMI@momose.com>

Hello,

I am making custom webcam app.
It works good at first, but fails over time. It invoked by cron, so no
user memory leakage.
When fails, messages are :

webcam: page allocation failure. order:5, mode:0x0
[<c002a434>] (dump_stack+0x0/0x14) from [<c006ed70>] (__alloc_pages+0x2b4/0x2c8)
[<c006eabc>] (__alloc_pages+0x0/0x2c8) from [<c002bd78>] (__dma_alloc+0x188/0x3dc)
[<c002bbf0>] (__dma_alloc+0x0/0x3dc) from [<c002c01c>] (dma_alloc_coherent+0x24/0x2c)
[<c002bff8>] (dma_alloc_coherent+0x0/0x2c) from [<c0249350>] (hcd_buffer_alloc+0x8c/0x94)
[<c02492c4>] (hcd_buffer_alloc+0x0/0x94) from [<c02407b8>] (usb_buffer_alloc+0x24/0x30)
 r5:c07c2030 r4:c0aff400
[<c0240794>] (usb_buffer_alloc+0x0/0x30) from [<bf018500>] (uvc_init_video+0x15c/0x3b0 [uvcv

[<bf0183a4>] (uvc_init_video+0x0/0x3b0 [uvcvideo]) from [<bf0187bc>] (uvc_video_enable+0x68/

[<bf018754>] (uvc_video_enable+0x0/0x6c [uvcvideo]) from [<bf0181b8>] (uvc_v4l2_do_ioctl+0xc

 r6:c07c2030 r5:c4185e74 r4:40045612
[<bf017544>] (uvc_v4l2_do_ioctl+0x0/0xda4 [uvcvideo]) from [<bf00e930>] (video_usercopy+0x21

[<bf00e720>] (video_usercopy+0x0/0x33c [videodev]) from [<bf016f20>] (uvc_v4l2_ioctl+0x54/0x

[<bf016ecc>] (uvc_v4l2_ioctl+0x0/0x64 [uvcvideo]) from [<c009552c>] (do_ioctl+0x68/0x78)
 r7:00000003 r6:40045612 r5:000250a4 r4:40045612
[<c00954c4>] (do_ioctl+0x0/0x78) from [<c009579c>] (vfs_ioctl+0x260/0x288)
 r5:000250a4 r4:c279a200
[<c009553c>] (vfs_ioctl+0x0/0x288) from [<c0095804>] (sys_ioctl+0x40/0x60)
 r7:c279a200 r6:40045612 r5:000250a4 r4:00000003
[<c00957c4>] (sys_ioctl+0x0/0x60) from [<c0025fa0>] (ret_fast_syscall+0x0/0x2c)
 r7:00000036 r6:000250a4 r5:00000000 r4:00000000
Mem-info:
DMA per-cpu:
CPU    0: Hot: hi:   42, btch:   7 usd:   5   Cold: hi:   14, btch:   3 usd:  13
Active:5931 inactive:22401 dirty:158 writeback:0 unstable:0
 free:1021 slab:1351 mapped:1075 pagetables:70 bounce:0
DMA free:4084kB min:1440kB low:1800kB high:2160kB active:23724kB inactive:89604kB present:13
able

lowmem_reserve[]: 0 0
DMA: 467*4kB 85*8kB 28*16kB 8*32kB 11*64kB 1*128kB 0*256kB 0*512kB 0*1024kB 0*2048kB 0*4096k
 = 4084kB
Swap cache: add 0, delete 0, find 0/0, race 0+0

I think this might be caused by page fragmentation. 
Small number of large pages are separated into large number of small
parts as time passed. And cause allocation failure.

Does someone have any idea ?
Regards,
-- 
Hirofumi Momose <hirofumi at momose.com>



From linux at rubli.info  Thu Oct 11 10:37:37 2007
From: linux at rubli.info (Martin Rubli)
Date: Thu, 11 Oct 2007 16:37:37 +0800
Subject: [Linux-uvc-devel] New QuickCam Team website for video developers
Message-ID: <op.tz0x8zi942iof8@mrubli-nb.am.logitech.com>

Dear all,

The Logitech video team is proud to present the new QuickCam Team website,  
a resource targeted at webcam developers for all platforms as well as  
power users of Logitech video hardware on popular operating systems and  
hardware platforms.

This new website contains documentation and links related to developing  
webcam software and using Logitech webcams on platforms like Linux,  
Solaris as well as others, answers to frequently asked questions, and a  
forum platform to discuss related topics. You can find it at the following  
address:

http://www.quickcamteam.net/

Contributions and comments are welcome. If you think that a particular  
section is missing or if you have something you would like to contribute,  
please drop us a note in the forum.

Note that the QuickCam Team website is not meant to be a replacement for  
the official customer support. However, you are welcome to post developer  
or Linux questions that may be out of the scope of ordinary customer  
support. Please also take a minute to read the introduction page  
(http://www.quickcamteam.net/about/) before visiting.

Cheers,
Martin


From pauljurczak at yahoo.com  Thu Oct 11 11:38:24 2007
From: pauljurczak at yahoo.com (Paul Jurczak)
Date: Thu, 11 Oct 2007 02:38:24 -0700 (PDT)
Subject: [Linux-uvc-devel] QuickCam Communicate STX (046d:08d7)
Message-ID: <33811.29035.qm@web60513.mail.yahoo.com>

I've tried this camera too - not knowing about this thread. I've got the same results - it is not a UVC camera. So back it goes to the store. There is some confusion about this model on various websites:
<http://linux-uvc.berlios.de/> and <http://www.quickcamteam.net/hcl/linux/logitech-webcams> list this camera as device ID 046d:0992 and potentially UVC, which is incorrect. It seems that <http://mxhaard.free.fr/spca5xx.html> got it right with correct device ID and Vc0302 controller.

Now, the $1M question is: what Logitech camera HAS 046d:0992 device ID?
 
Regards,
Paul. 



       
____________________________________________________________________________________
Need a vacation? Get great deals
to amazing places on Yahoo! Travel.
http://travel.yahoo.com/


From pauljurczak at yahoo.com  Thu Oct 11 11:55:33 2007
From: pauljurczak at yahoo.com (Paul Jurczak)
Date: Thu, 11 Oct 2007 02:55:33 -0700 (PDT)
Subject: [Linux-uvc-devel] QuickCam Communicate STX (046d:08d7)
Message-ID: <792750.9813.qm@web60518.mail.yahoo.com>

Well, it seems that this thread is not over yet. My last post was about part number 631785-0403, which seems to be an older part than 961464-0403 currently shown on Logitech website. My comments about errors on these websites may be erroneous themselves. I'm planning to visit a virtual store, this time, and buy part number 961687-0403 (OEM version of 961464-0403) and test it out. 
 
Paul.


       
____________________________________________________________________________________
Yahoo! oneSearch: Finally, mobile search 
that gives answers, not web links. 
http://mobile.yahoo.com/mobileweb/onesearch?refer=1ONXIC


From laurent.pinchart at skynet.be  Fri Oct 12 01:09:07 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 12 Oct 2007 01:09:07 +0200
Subject: [Linux-uvc-devel] Page allocation failure
In-Reply-To: <20071010104339.7999.HIROFUMI@momose.com>
References: <20071010104339.7999.HIROFUMI@momose.com>
Message-ID: <200710120109.07745.laurent.pinchart@skynet.be>

Hi Hirofumi,

On Wednesday 10 October 2007, Hirofumi Momose wrote:
> Hello,
>
> I am making custom webcam app.
> It works good at first, but fails over time. It invoked by cron, so no
> user memory leakage.
> When fails, messages are :
>
> webcam: page allocation failure. order:5, mode:0x0
[snip]
> Mem-info:
> DMA per-cpu:
> CPU    0: Hot: hi:   42, btch:   7 usd:   5   Cold: hi:   14, btch:   3
> usd:  13 Active:5931 inactive:22401 dirty:158 writeback:0 unstable:0
>  free:1021 slab:1351 mapped:1075 pagetables:70 bounce:0
> DMA free:4084kB min:1440kB low:1800kB high:2160kB active:23724kB
> inactive:89604kB present:13 able
>
> lowmem_reserve[]: 0 0
> DMA: 467*4kB 85*8kB 28*16kB 8*32kB 11*64kB 1*128kB 0*256kB 0*512kB 0*1024kB
> 0*2048kB 0*4096k = 4084kB
> Swap cache: add 0, delete 0, find 0/0, race 0+0
>
> I think this might be caused by page fragmentation.

Looks like it :-/ The problems you report on this mailing list have all been 
interesting so far, but next time please try to report something trivial, 
that will be less work for me :-)

> Small number of large pages are separated into large number of small
> parts as time passed. And cause allocation failure.
>
> Does someone have any idea ?

For high-bandwidth isochronous streaming the driver allocates URB buffers that 
can grow to 120kB. If this puts too much pressure on your system memory, try 
to decrease UVC_MAX_ISO_PACKETS in uvcvideo.h.

Best regards,

Laurent Pinchart


From brandon at ifup.org  Fri Oct 12 01:31:12 2007
From: brandon at ifup.org (Brandon Philips)
Date: Thu, 11 Oct 2007 16:31:12 -0700
Subject: [Linux-uvc-devel] [PATCH] DYNCTRL: copy from xmap to map
Message-ID: <20071011233112.GC17173@ifup.org>

Reviewing the dynctrl code and this looks like an obvious fix.  :)

Signed-off-by: Brandon Philips <bphilips at suse.de>

---
 uvc_v4l2.c |   10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

Index: uvc/uvc_v4l2.c
===================================================================
--- uvc.orig/uvc_v4l2.c
+++ uvc/uvc_v4l2.c
@@ -941,11 +941,11 @@ static int uvc_v4l2_do_ioctl(struct inod
 		map->id = xmap->id;
 		memcpy(map->name, xmap->name, sizeof map->name);
 		memcpy(map->entity, xmap->entity, sizeof map->entity);
-		map->selector = map->selector;
-		map->size = map->size;
-		map->offset = map->offset;
-		map->v4l2_type = map->v4l2_type;
-		map->data_type = map->data_type;
+		map->selector = xmap->selector;
+		map->size = xmap->size;
+		map->offset = xmap->offset;
+		map->v4l2_type = xmap->v4l2_type;
+		map->data_type = xmap->data_type;
 
 		ret = uvc_ctrl_add_mapping(map);
 		if (ret < 0)


From brandon at ifup.org  Fri Oct 12 12:37:14 2007
From: brandon at ifup.org (Brandon Philips)
Date: Fri, 12 Oct 2007 03:37:14 -0700
Subject: [Linux-uvc-devel] dynctrl.txt review: flags
Message-ID: <20071012103714.GA4758@ifup.org>

Hello-

I don't know if I like the idea of needing a udev/hotplug script to map
my camera features.  However, I reviewed dynctrl.txt it seems
reasonable.  

I just had one question:  

> 	__u32	flags		See below
> 
> 	* struct uvc_xu_control_info flags field
> 
> 	UVC_CONTROL_SET_CUR	Control is writable.
> 	UVC_CONTROL_GET_CUR	Control is readable.
> 	UVC_CONTROL_GET_MIN	Control supports GET MIN queries.
> 	UVC_CONTROL_GET_MAX	Control supports GET MAX queries.
> 	UVC_CONTROL_GET_RES	Control supports GET RES queries.
> 	UVC_CONTROL_GET_DEF	Control supports GET DEF queries.
> 	UVC_CONTROL_RESTORE	Control should be restored when resuming from
> 				sleep.

Quoting the UVC spec:

"All controls supported by the Extension Unit must support the following
requests: GET_CUR, GET_MIN, GET_MAX, GET_RES, GET_INFO, GET_DEF,
GET_LEN"

And the driver can find out about SET_CUR via GET_INFO.  So, besides
RESTORE what is this flag field needed for?

Thanks,

	Brandon

P.S. Is there a Logitech XU spec sheet somewhere?  It would be nice to
have information on the controls on my device.



From simon.morlat at linphone.org  Fri Oct 12 14:50:37 2007
From: simon.morlat at linphone.org (Simon Morlat)
Date: Fri, 12 Oct 2007 14:50:37 +0200
Subject: [Linux-uvc-devel] [Linphone-developers] 064e:a101 Suyin Corp.
	Cam in Acer Notebook
In-Reply-To: <1191971820.4820.57.camel@larissa>
References: <20070923125827.10910@gmx.net>
	<200710050955.03261.simon.morlat@linphone.org>
	<1191971820.4820.57.camel@larissa>
Message-ID: <200710121450.38041.simon.morlat@linphone.org>

Hi,

I'm the maintainer of linphone (video chat tool), and I use uvcvideo driver 
without major problems every day, however I receive many complaints of users 
having "Protocol error" (EPROT) returned by the VIDEOC_STREAMON ioctl. 
The bug is probably in my code, but if you have any hints about the meaning of 
this error, you're welcome !
Thank you very much

Simon


From ernih at gmx.de  Fri Oct 12 15:57:30 2007
From: ernih at gmx.de (ernih at gmx.de)
Date: Fri, 12 Oct 2007 15:57:30 +0200
Subject: [Linux-uvc-devel] Fwd: Re:  Fwd: Re:  Aspire 9300 webcam
In-Reply-To: <200710120051.10848.laurent.pinchart@skynet.be>
References: <200710092335.08623.ernih@gmx.de> <200710100054.33669.ernih@gmx.de>
	<200710120051.10848.laurent.pinchart@skynet.be>
Message-ID: <200710121557.30165.ernih@gmx.de>

On Friday 12 October 2007 00:51:10 you wrote:
> Hi,
>
> On Wednesday 10 October 2007, ernih at gmx.de wrote:
> > sorry i dont know what i have to do now.
> > can we do it step by step please.
>
> I don't have much time right now so I'll just summarise the steps.
>
> 1. Uninstall *all* copies of the Linux UVC driver. If you installed the
> driver manually, remove the installed files manually. If you installed a
> Ubuntu package, remove the package using whatever package manager you are
> comfortable with. In the end there should be no uvcvideo.ko file anymore in
> /lib/modules/`uname -r`.
>
> 2. Make sure the kernel sources package is installed. If it isn't, install
> it. This is specific to Ubuntu, so look in Ubuntu forums if you need help.
>
> 3. Get the Linux UVC driver sources from SVN. Have a look at the driver
> website on Berlios for help.
>
> 4. Compile the driver. Just run 'make' in the sources directory.
>
> 5. Install the driver. As root, run 'make install' in the sources
> directory.
>
> 6. Load the driver. Depending on your system configuration this can be done
> automatically when you plug your webcam in. If not, you can load the driver
> manually with 'modprobe uvcvideo'.
>
> Best regards,
>
> Laurent Pinchart

hi Laurent,

i have installed manually. but with which commands can i remove the linux uvc 
driver?

what is the latest linux uvc driver version?

thx!


From hirofumi at momose.com  Sat Oct 13 03:51:01 2007
From: hirofumi at momose.com (Hirofumi Momose)
Date: Sat, 13 Oct 2007 10:51:01 +0900
Subject: [Linux-uvc-devel] Page allocation failure
In-Reply-To: <200710120109.07745.laurent.pinchart@skynet.be>
References: <20071010104339.7999.HIROFUMI@momose.com>
	<200710120109.07745.laurent.pinchart@skynet.be>
Message-ID: <20071013101437.83CF.HIROFUMI@momose.com>

Hello Laurent,

On Fri, 12 Oct 2007 01:09:07 +0200
Laurent Pinchart <laurent.pinchart at skynet.be> wrote:

> Looks like it :-/ The problems you report on this mailing list have all been 
> interesting so far, but next time please try to report something trivial, 
> that will be less work for me :-)

ok ok :p

So, I think this may be kernel/usb-driver issue. 
USB driver requests kernel to get continuous pages. and it fails.
At first, when kernel passed less uptime, most of pages are continuous
and driver works well. But these page goes smaller as time passed,
finally fails.

This usb-driver patch improves some extent, but not completely.

*** /home/momose/linux-2.6.22/drivers/usb/core/buffer.c Thu Sep 13 00:31:41 2007
--- ./buffer.c  Tue Oct  9 22:57:40 2007
***************
*** 117,123 ****
                if (size <= pool_max [i])
                        return dma_pool_alloc(hcd->pool [i], mem_flags, dma);
        }
!       return dma_alloc_coherent(hcd->self.controller, size, dma, 0);
  }

  void hcd_buffer_free(
--- 117,123 ----
                if (size <= pool_max [i])
                        return dma_pool_alloc(hcd->pool [i], mem_flags, dma);
        }
!       return dma_alloc_coherent(hcd->self.controller, size, dma, __GFP_WAIT);
  }

  void hcd_buffer_free(

> For high-bandwidth isochronous streaming the driver allocates URB buffers that 
> can grow to 120kB. If this puts too much pressure on your system memory, try 
> to decrease UVC_MAX_ISO_PACKETS in uvcvideo.h.


I will try it. What I am playing with is a small system.

Regards,
Hirofumi Momose



From laurent.pinchart at skynet.be  Sat Oct 13 12:19:34 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 13 Oct 2007 12:19:34 +0200
Subject: [Linux-uvc-devel] Page allocation failure
In-Reply-To: <20071013101437.83CF.HIROFUMI@momose.com>
References: <20071010104339.7999.HIROFUMI@momose.com>
	<200710120109.07745.laurent.pinchart@skynet.be>
	<20071013101437.83CF.HIROFUMI@momose.com>
Message-ID: <200710131219.34786.laurent.pinchart@skynet.be>

Hi Hirofumi,

On Saturday 13 October 2007, Hirofumi Momose wrote:
> Hello Laurent,
>
> On Fri, 12 Oct 2007 01:09:07 +0200
>
> Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > Looks like it :-/ The problems you report on this mailing list have all
> > been interesting so far, but next time please try to report something
> > trivial, that will be less work for me :-)
>
> ok ok :p
>
> So, I think this may be kernel/usb-driver issue.

My experience with the memory management subsystem is quite limited. I'm not 
sure which of the driver and the memory manager are at fault here (maybe 
both). Allocating 120kB of DMAable memory is probably not a good thing to do 
on memory constrained systems without an IOMMU.

> USB driver requests kernel to get continuous pages. and it fails.
> At first, when kernel passed less uptime, most of pages are continuous
> and driver works well. But these page goes smaller as time passed,
> finally fails.
>
> This usb-driver patch improves some extent, but not completely.
>
> *** /home/momose/linux-2.6.22/drivers/usb/core/buffer.c Thu Sep 13 00:31:41
> 2007 --- ./buffer.c  Tue Oct  9 22:57:40 2007
> ***************
> *** 117,123 ****
>                 if (size <= pool_max [i])
>                         return dma_pool_alloc(hcd->pool [i], mem_flags,
> dma); }
> !       return dma_alloc_coherent(hcd->self.controller, size, dma, 0);
>   }
>
>   void hcd_buffer_free(
> --- 117,123 ----
>                 if (size <= pool_max [i])
>                         return dma_pool_alloc(hcd->pool [i], mem_flags,
> dma); }
> !       return dma_alloc_coherent(hcd->self.controller, size, dma,
> __GFP_WAIT); }
>
>   void hcd_buffer_free(

hcd_buffer_alloc might be called from a non-sleepable context. You should 
replace 0 by mem_flags instead of hardcoding __GFP_WAIT. Either this is a bug 
in the USB stack, or there's something I don't completely understand. Could 
you raise the issue on the linux-usb-devel mailing list ?

> > For high-bandwidth isochronous streaming the driver allocates URB buffers
> > that can grow to 120kB. If this puts too much pressure on your system
> > memory, try to decrease UVC_MAX_ISO_PACKETS in uvcvideo.h.
>
> I will try it. What I am playing with is a small system.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Oct 13 12:21:12 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 13 Oct 2007 12:21:12 +0200
Subject: [Linux-uvc-devel] Fwd: Re:  Fwd: Re:  Aspire 9300 webcam
In-Reply-To: <200710121557.30165.ernih@gmx.de>
References: <200710092335.08623.ernih@gmx.de>
	<200710120051.10848.laurent.pinchart@skynet.be>
	<200710121557.30165.ernih@gmx.de>
Message-ID: <200710131221.12387.laurent.pinchart@skynet.be>

On Friday 12 October 2007, ernih at gmx.de wrote:
> On Friday 12 October 2007 00:51:10 you wrote:
> > Hi,
> >
> > On Wednesday 10 October 2007, ernih at gmx.de wrote:
> > > sorry i dont know what i have to do now.
> > > can we do it step by step please.
> >
> > I don't have much time right now so I'll just summarise the steps.
> >
> > 1. Uninstall *all* copies of the Linux UVC driver. If you installed the
> > driver manually, remove the installed files manually. If you installed a
> > Ubuntu package, remove the package using whatever package manager you are
> > comfortable with. In the end there should be no uvcvideo.ko file anymore
> > in /lib/modules/`uname -r`.
> >
> > 2. Make sure the kernel sources package is installed. If it isn't,
> > install it. This is specific to Ubuntu, so look in Ubuntu forums if you
> > need help.
> >
> > 3. Get the Linux UVC driver sources from SVN. Have a look at the driver
> > website on Berlios for help.
> >
> > 4. Compile the driver. Just run 'make' in the sources directory.
> >
> > 5. Install the driver. As root, run 'make install' in the sources
> > directory.
> >
> > 6. Load the driver. Depending on your system configuration this can be
> > done automatically when you plug your webcam in. If not, you can load the
> > driver manually with 'modprobe uvcvideo'.
> >
> > Best regards,
> >
> > Laurent Pinchart
>
> hi Laurent,
>
> i have installed manually. but with which commands can i remove the linux
> uvc driver?

Check with your package manager (Is it synaptic for Ubuntu ?) and remove any 
uvcvideo package you can find. Then search for uvcvideo.ko 
in /lib/modules/`uname -r` and remove any occurence manually. Then reinstall 
the driver from the source tree.

> what is the latest linux uvc driver version?

SVN revision 132.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Oct 13 12:23:57 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 13 Oct 2007 12:23:57 +0200
Subject: [Linux-uvc-devel] [Linphone-developers] 064e:a101 Suyin Corp.
	Cam in Acer Notebook
In-Reply-To: <200710121450.38041.simon.morlat@linphone.org>
References: <20070923125827.10910@gmx.net> <1191971820.4820.57.camel@larissa>
	<200710121450.38041.simon.morlat@linphone.org>
Message-ID: <200710131223.57515.laurent.pinchart@skynet.be>

Hi Simon,

On Friday 12 October 2007, Simon Morlat wrote:
> Hi,
>
> I'm the maintainer of linphone (video chat tool), and I use uvcvideo driver
> without major problems every day,

Nice to hear :-)

> however I receive many complaints of users having "Protocol error" (EPROT)
> returned by the VIDEOC_STREAMON ioctl.

Not as nice :-/

> The bug is probably in my code, but if you have any hints about the meaning
> of this error, you're welcome !

I doubt this is a bug in your code. In this context -EPROTO is a low-level USB 
error generated by the USB stack. It usually indicates faulty devices or 
cables. What webcams do your complaining users use ?

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Oct 13 12:25:35 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 13 Oct 2007 12:25:35 +0200
Subject: [Linux-uvc-devel] [PATCH] DYNCTRL: copy from xmap to map
In-Reply-To: <20071011233112.GC17173@ifup.org>
References: <20071011233112.GC17173@ifup.org>
Message-ID: <200710131225.35723.laurent.pinchart@skynet.be>

On Friday 12 October 2007, Brandon Philips wrote:
> Reviewing the dynctrl code and this looks like an obvious fix.  :)
>
> Signed-off-by: Brandon Philips <bphilips at suse.de>
>
> ---
>  uvc_v4l2.c |   10 +++++-----
>  1 file changed, 5 insertions(+), 5 deletions(-)
>
> Index: uvc/uvc_v4l2.c
> ===================================================================
> --- uvc.orig/uvc_v4l2.c
> +++ uvc/uvc_v4l2.c
> @@ -941,11 +941,11 @@ static int uvc_v4l2_do_ioctl(struct inod
>  		map->id = xmap->id;
>  		memcpy(map->name, xmap->name, sizeof map->name);
>  		memcpy(map->entity, xmap->entity, sizeof map->entity);
> -		map->selector = map->selector;
> -		map->size = map->size;
> -		map->offset = map->offset;
> -		map->v4l2_type = map->v4l2_type;
> -		map->data_type = map->data_type;
> +		map->selector = xmap->selector;
> +		map->size = xmap->size;
> +		map->offset = xmap->offset;
> +		map->v4l2_type = xmap->v4l2_type;
> +		map->data_type = xmap->data_type;
>
>  		ret = uvc_ctrl_add_mapping(map);
>  		if (ret < 0)

Thanks. Applied.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Oct 13 12:31:56 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 13 Oct 2007 12:31:56 +0200
Subject: [Linux-uvc-devel] dynctrl.txt review: flags
In-Reply-To: <20071012103714.GA4758@ifup.org>
References: <20071012103714.GA4758@ifup.org>
Message-ID: <200710131231.56269.laurent.pinchart@skynet.be>

Hi Brandon,

On Friday 12 October 2007, Brandon Philips wrote:
> Hello-
>
> I don't know if I like the idea of needing a udev/hotplug script to map
> my camera features.

Alternative ideas are welcome. I thought about ways to solve the extension 
units controls problem for a while and couldn't come with a better solution. 
Hardcoding all controls in the drivers is not a long term solution.

> However, I reviewed dynctrl.txt it seems reasonable.
>
> I just had one question:
> > 	__u32	flags		See below
> >
> > 	* struct uvc_xu_control_info flags field
> >
> > 	UVC_CONTROL_SET_CUR	Control is writable.
> > 	UVC_CONTROL_GET_CUR	Control is readable.
> > 	UVC_CONTROL_GET_MIN	Control supports GET MIN queries.
> > 	UVC_CONTROL_GET_MAX	Control supports GET MAX queries.
> > 	UVC_CONTROL_GET_RES	Control supports GET RES queries.
> > 	UVC_CONTROL_GET_DEF	Control supports GET DEF queries.
> > 	UVC_CONTROL_RESTORE	Control should be restored when resuming from
> > 				sleep.
>
> Quoting the UVC spec:
>
> "All controls supported by the Extension Unit must support the following
> requests: GET_CUR, GET_MIN, GET_MAX, GET_RES, GET_INFO, GET_DEF,
> GET_LEN"
>
> And the driver can find out about SET_CUR via GET_INFO.  So, besides
> RESTORE what is this flag field needed for?

GET_MIN, GET_MAX, GET_RES and GET_DEF are used internally. XU controls are 
handled like other controls, so the driver needs to remember which requests 
are supported for every control, including the XU controls. UVCIOC_CTRL_ADD 
sets the GET_MIN, GET_MAX, GET_RES and GET_DEF flags.

The current implementation allows applications to add control definitions 
without a corresponding device plugged in the system. This means the driver 
won't be able to query the control using GET_INFO at the time it is added, 
hence the need to set GET_CUR and SET_CUR manually. This is an internal 
implementation issue and I'll try to get rid of it.

> Thanks,
>
> 	Brandon
>
> P.S. Is there a Logitech XU spec sheet somewhere?  It would be nice to
> have information on the controls on my device.

There is no public document. I'll see if I can get them to release their 
internal spec, or at least part of them.

Best regards,

Laurent Pinchart


From l.bigonville at edpnet.be  Sat Oct 13 23:25:28 2007
From: l.bigonville at edpnet.be (Laurent Bigonville)
Date: Sat, 13 Oct 2007 23:25:28 +0200
Subject: [Linux-uvc-devel] Quickcam pro 5000 and other uvc implementation.
Message-ID: <20071013232528.be91c900.l.bigonville@edpnet.be>

Hi,

I've bought a logitech quickcam pro 5000 (model 2006, 046d:08ce) today
and experienced some issues. So a question comes to my mind.

How this webcam works with other UVC implementation? Both
MacOSX and Vista (maybe XP too) have a UVC generic driver that should
(according to logitech) works with this webcam.

Does anyone tested with these other implementations? Does this webcam
suffers the same problem that with the linux-uvc driver? If no, should
it be possible to guess a fix from what the other drivers do?

Best regards

Laurent Bigonville
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071013/3d0f37dc/attachment.pgp>

From pauljurczak at yahoo.com  Sun Oct 14 03:41:35 2007
From: pauljurczak at yahoo.com (Paul Jurczak)
Date: Sat, 13 Oct 2007 18:41:35 -0700 (PDT)
Subject: [Linux-uvc-devel] Quickcam pro 5000 and other uvc
	implementation.
Message-ID: <424274.9293.qm@web60517.mail.yahoo.com>

Hi Laurent,

I've used this camera on Windows XP without any problem. My main
 interest is to use Logitech cameras on Linux, though. New Logitech cameras
 using  SPCA527 controller (QuickCam Pro 9000, QuickCam Pro for Notebooks
 and QuickCam Communicate Deluxe) are supposedly free of this problem.
 My advice is to return QuickCam Pro and buy one of the above.
 
Regards,
Paul Jurczak

----- Original Message ----
From: Laurent Bigonville <l.bigonville at edpnet.be>
To: linux-uvc-devel at lists.berlios.de
Sent: Saturday, October 13, 2007 4:25:28 PM
Subject: [Linux-uvc-devel] Quickcam pro 5000 and other uvc implementation.

Hi,

I've bought a logitech quickcam pro 5000 (model 2006, 046d:08ce) today
and experienced some issues. So a question comes to my mind.

How this webcam works with other UVC implementation? Both
MacOSX and Vista (maybe XP too) have a UVC generic driver that should
(according to logitech) works with this webcam.

Does anyone tested with these other implementations? Does this webcam
suffers the same problem that with the linux-uvc driver? If no, should
it be possible to guess a fix from what the other drivers do?

Best regards

Laurent Bigonville





       
____________________________________________________________________________________
Moody friends. Drama queens. Your life? Nope! - their life, your story. Play Sims Stories at Yahoo! Games.
http://sims.yahoo.com/  


From laurent.pinchart at skynet.be  Sun Oct 14 09:59:25 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 14 Oct 2007 09:59:25 +0200
Subject: [Linux-uvc-devel] Quickcam pro 5000 and other uvc
	implementation.
In-Reply-To: <20071013232528.be91c900.l.bigonville@edpnet.be>
References: <20071013232528.be91c900.l.bigonville@edpnet.be>
Message-ID: <200710140959.25254.laurent.pinchart@skynet.be>

Hi Laurent,

On Saturday 13 October 2007, Laurent Bigonville wrote:
> Hi,
>
> I've bought a logitech quickcam pro 5000 (model 2006, 046d:08ce) today
> and experienced some issues. So a question comes to my mind.
>
> How this webcam works with other UVC implementation? Both
> MacOSX and Vista (maybe XP too) have a UVC generic driver that should
> (according to logitech) works with this webcam.

Logitech developed its own driver for Windows, mostly because the Microsoft 
one is so buggy it's near to unusable. As far as I know, they have no 
specific driver for MacOSX.

> Does anyone tested with these other implementations? Does this webcam
> suffers the same problem that with the linux-uvc driver? If no, should
> it be possible to guess a fix from what the other drivers do?

The webcam works fine with Windows. I worked with Logitech to locate the 
differences between the drivers, and we found out the problem wasn't 
driver-related only. The Linux and Windows USB stacks are quite different, 
which results in different timings on the USB bus. Linux is faster, and the 
webcam isn't able to cope.

With this in mind, we tried to add delays in the Linux UVC driver. This didn't 
work, as the timing issues were not only related to inter-request delays but 
to intra-request delays as well (USB control requests are made of several 
packets handled by the USB EHCI controller without any mean for a device 
driver to influence on packets processing). Fixing the problem would mean 
reworking to Linux USB stack completely and making it slower. Even if that's 
something we wanted, it wouldn't be a simple task.

Best regards,

Laurent Pinchart


From dmnewman at pobox.com  Sun Oct 14 16:16:23 2007
From: dmnewman at pobox.com (Daniel M. Newman)
Date: Mon, 15 Oct 2007 00:16:23 +1000
Subject: [Linux-uvc-devel] apple isight problem
Message-ID: <471224B7.6030700@pobox.com>

I've built the svn uvcvideo module and installed it on a macbook pro
with built-in isight, running kernel  2.6.22.7-mactel.  The firmware and
kernel module load ok, but dmesg indicates all is not well:

uvcvideo: Found UVC 1.00 device Built-in iSight (05ac:8501)
uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -32 (exp. 26).

I can unload and reload the module, but still get this "failed to query"
message.

I tried the output using mplayer:

mplayer -tv
driver=v4l2:input=1:width=640:height=480:device=/dev/video0:outfmt=uyvy:fps=30
tv://

The camera light came on, and a green screen displayed.  The following
was output to the console:

MPlayer 2:1.0~rc1-0ubuntu12 (C) 2000-2006 MPlayer Team
CPU: Genuine Intel(R) CPU           T2500  @ 2.00GHz (Family: 6, Model:
14, Stepping: 8)
CPUflags:  MMX: 1 MMX2: 1 3DNow: 0 3DNow2: 0 SSE: 1 SSE2: 1
Compiled with runtime CPU detection.
Warning unknown option stopxscreensaver at line 129
Can't open joystick device /dev/input/js0: No such file or directory
Can't init input joystick

Playing tv://.
TV file format detected.
Selected driver: v4l2
 name: Video 4 Linux 2 input
 author: Martin Olschewski <olschewski at zpr.uni-koeln.de>
 comment: first try, more to come ;-)
v4l2: ioctl get standard failed: Invalid argument
Selected device: Built-in iSight
 Capabilites:  video capture  streaming
 supported norms:
 inputs: 0 = Camera 1;
 Current input: 0
 Current format: UYVY
v4l2: ioctl enum input failed: Invalid argument
v4l2: ioctl enum norm failed: Invalid argument
Error: Cannot set norm!
Selected input hasn't got a tuner!
v4l2: ioctl set mute failed: Invalid argument
v4l2: ioctl query control failed: Invalid argument
v4l2: ioctl query control failed: Invalid argument
==========================================================================
Opening video decoder: [raw] RAW Uncompressed Video
VDec: vo config request - 640 x 480 (preferred colorspace: Packed UYVY)
Could not find matching colorspace - retrying with -vf scale...
Opening video filter: [scale]
VDec: using Packed UYVY as output csp (no 0)
Movie-Aspect is undefined - no prescaling applied.
SwScaler: reducing / aligning filtersize 1 -> 4
SwScaler: reducing / aligning filtersize 1 -> 4
SwScaler: reducing / aligning filtersize 1 -> 1
SwScaler: reducing / aligning filtersize 9 -> 8

SwScaler: BICUBIC scaler, from uyvy422 to yuv420p using MMX2
SwScaler: using 4-tap MMX scaler for horizontal luminance scaling
SwScaler: using 4-tap MMX scaler for horizontal chrominance scaling
SwScaler: using 1-tap MMX "scaler" for vertical scaling (YV12 like)
SwScaler: 640x480 -> 640x480
VO: [xv] 640x480 => 640x480 Planar YV12
Selected video codec: [rawuyvy] vfm: raw (RAW UYVY)
==========================================================================
Audio: no sound
Starting playback...
v4l2: select timeout
v4l2: select timeout ??% ??,?% 0 0
v4l2: select timeout ??% ??,?% 0 0
v4l2: select timeout ??% ??,?% 0 0
v4l2: select timeout ??% ??,?% 0 0
v4l2: select timeout ??% ??,?% 0 0
v4l2: select timeout ??% ??,?% 0 0
v4l2: select timeout ??% ??,?% 0 0
v4l2: select timeout ??% ??,?% 0 0
V:   0.0  17/ 17 ??% ??% ??,?% 0 0

MPlayer interrupted by signal 2 in module: video_read_frame

I terminated it with control-C.

Any suggestions, please ?

Dan



From felix at derklecks.de  Sun Oct 14 19:10:15 2007
From: felix at derklecks.de (=?ISO-8859-1?Q?Felix_M=F6ller?=)
Date: Sun, 14 Oct 2007 19:10:15 +0200
Subject: [Linux-uvc-devel] apple isight problem
In-Reply-To: <471224B7.6030700@pobox.com>
References: <471224B7.6030700@pobox.com>
Message-ID: <47124D77.5040209@derklecks.de>

Hi,

> I've built the svn uvcvideo module and installed it on a macbook pro
> with built-in isight, running kernel  2.6.22.7-mactel.  The firmware and
> kernel module load ok, but dmesg indicates all is not well:
> 
> uvcvideo: Found UVC 1.00 device Built-in iSight (05ac:8501)
> uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -32 (exp. 26).
This is not fatal as far as I know.

> I can unload and reload the module, but still get this "failed to query"
> message.
> 
> I tried the output using mplayer:
> 
> mplayer -tv
> driver=v4l2:input=1:width=640:height=480:device=/dev/video0:outfmt=uyvy:fps=30
> tv://
> 
> The camera light came on, and a green screen displayed.  The following
> was output to the console:
It does work for me with the following command:
mplayer -tv driver=v4l2:width=352:height=288:device=/dev/video0:fps=30 tv://

HTH
Felix M?ller

# mplayer --version
MPlayer dev-SVN-r24115-4.2.1 (C) 2000-2007 MPlayer Team


From sam.albuquerque at gmail.com  Sun Oct 14 20:32:27 2007
From: sam.albuquerque at gmail.com (Sam Albuquerque)
Date: Sun, 14 Oct 2007 19:32:27 +0100
Subject: [Linux-uvc-devel] ALI 5602 unsuported?
Message-ID: <b0027e740710141132r5a2f8bb5xc70fbc9df7bdfa2f@mail.gmail.com>

Hi,

I am using an Acer Aspire 5103WLMi Laptop which has an inbuilt webcam
detected by lsusb as ID 0402:5602 ALi Corp.

The drivers that come with this cam claim it to be a UVC device. I'm not
sure if it actually is.

I managed to compile the drivers alright. but cannot install it. Below is
the message from /var/log/messages when i attempt to install the compiled
modules. Any suggestions?

Oct 14 19:08:59 shashank-laptop kernel: [ 27943.508000] uvcvideo: Unknown
symbol v4l_compat_ioctl32
Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo: Unknown
symbol v4l_compat_ioctl32
Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo: Unknown
symbol v4l_compat_translate_ioctl
Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo: Unknown
symbol video_devdata
Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo: Unknown
symbol v4l_printk_ioctl
Oct 14 19:20:55 shashank-laptop kernel: [ 28659.980000] uvcvideo: Unknown
symbol video_unregister_device
Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo: Unknown
symbol video_device_alloc
Oct 14 19:20:55 shashank-laptop kernel: [28659.980000 ] uvcvideo: Unknown
symbol video_register_device
Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo: Unknown
symbol video_usercopy
Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo: Unknown
symbol video_device_release


Cheers.
Sam

-- 

Read my blogs at http://sam-albuquerque.blogspot.com/
Watch my Web Albums at http://picasaweb.google.com/sam.albuquerque
Verify my RHCE certificate online at
http://www.redhat.com/training/certification/verify/?rhce_cert_display:certno=803005430616715&rhce_cert_display:verify_cb=Verify
Google Mail Rocks..
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071014/9884f8ab/attachment.html>

From laurent.pinchart at skynet.be  Sun Oct 14 22:36:16 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 14 Oct 2007 22:36:16 +0200
Subject: [Linux-uvc-devel] ALI 5602 unsuported?
In-Reply-To: <b0027e740710141132r5a2f8bb5xc70fbc9df7bdfa2f@mail.gmail.com>
References: <b0027e740710141132r5a2f8bb5xc70fbc9df7bdfa2f@mail.gmail.com>
Message-ID: <200710142236.16234.laurent.pinchart@skynet.be>

Hi Sam,

On Sunday 14 October 2007, Sam Albuquerque wrote:
> Hi,
>
> I am using an Acer Aspire 5103WLMi Laptop which has an inbuilt webcam
> detected by lsusb as ID 0402:5602 ALi Corp.
>
> The drivers that come with this cam claim it to be a UVC device. I'm not
> sure if it actually is.
>
> I managed to compile the drivers alright. but cannot install it. Below is
> the message from /var/log/messages when i attempt to install the compiled
> modules. Any suggestions?
>
> Oct 14 19:08:59 shashank-laptop kernel: [ 27943.508000] uvcvideo: Unknown
> symbol v4l_compat_ioctl32
> Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo: Unknown
> symbol v4l_compat_ioctl32
> Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo: Unknown
> symbol v4l_compat_translate_ioctl
> Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo: Unknown
> symbol video_devdata
> Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo: Unknown
> symbol v4l_printk_ioctl
> Oct 14 19:20:55 shashank-laptop kernel: [ 28659.980000] uvcvideo: Unknown
> symbol video_unregister_device
> Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo: Unknown
> symbol video_device_alloc
> Oct 14 19:20:55 shashank-laptop kernel: [28659.980000 ] uvcvideo: Unknown
> symbol video_register_device
> Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo: Unknown
> symbol video_usercopy
> Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo: Unknown
> symbol video_device_release

Have you enabled V4L2 support in your kernel ?

Best regards,

Laurent Pinchart


From sam.albuquerque at gmail.com  Mon Oct 15 01:50:42 2007
From: sam.albuquerque at gmail.com (Sam Albuquerque)
Date: Mon, 15 Oct 2007 00:50:42 +0100
Subject: [Linux-uvc-devel] ALI 5602 unsuported?
In-Reply-To: <200710142236.16234.laurent.pinchart@skynet.be>
References: <b0027e740710141132r5a2f8bb5xc70fbc9df7bdfa2f@mail.gmail.com>
	<200710142236.16234.laurent.pinchart@skynet.be>
Message-ID: <b0027e740710141650x5276875at282693be9e8c95fc@mail.gmail.com>

On 14/10/2007, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> Hi Sam,
>
> On Sunday 14 October 2007, Sam Albuquerque wrote:
> > Hi,
> >
> > I am using an Acer Aspire 5103WLMi Laptop which has an inbuilt webcam
> > detected by lsusb as ID 0402:5602 ALi Corp.
> >
> > The drivers that come with this cam claim it to be a UVC device. I'm not
> > sure if it actually is.
> >
> > I managed to compile the drivers alright. but cannot install it. Below
> is
> > the message from /var/log/messages when i attempt to install the
> compiled
> > modules. Any suggestions?
> >
> > Oct 14 19:08:59 shashank-laptop kernel: [ 27943.508000] uvcvideo:
> Unknown
> > symbol v4l_compat_ioctl32
> > Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo: Unknown
> > symbol v4l_compat_ioctl32
> > Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo: Unknown
> > symbol v4l_compat_translate_ioctl
> > Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo: Unknown
> > symbol video_devdata
> > Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo: Unknown
> > symbol v4l_printk_ioctl
> > Oct 14 19:20:55 shashank-laptop kernel: [ 28659.980000] uvcvideo:
> Unknown
> > symbol video_unregister_device
> > Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo: Unknown
> > symbol video_device_alloc
> > Oct 14 19:20:55 shashank-laptop kernel: [28659.980000 ] uvcvideo:
> Unknown
> > symbol video_register_device
> > Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo: Unknown
> > symbol video_usercopy
> > Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo: Unknown
> > symbol video_device_release
>
> Have you enabled V4L2 support in your kernel ?


Not sure of that. How do i find it? I'm using Ubuntu feisty with kernel
2.6.20-16

Best regards,
>
> Laurent Pinchart
>



-- 

Read my blogs at http://sam-albuquerque.blogspot.com/
Watch my Web Albums at http://picasaweb.google.com/sam.albuquerque
Verify my RHCE certificate online at
http://www.redhat.com/training/certification/verify/?rhce_cert_display:certno=803005430616715&rhce_cert_display:verify_cb=Verify
Google Mail Rocks..
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071015/7ebb3c27/attachment.html>

From c.montemaggiore at fastautomation.it  Mon Oct 15 11:38:59 2007
From: c.montemaggiore at fastautomation.it (Claudio Montemaggiore - FAST S.p.A.)
Date: Mon, 15 Oct 2007 11:38:59 +0200
Subject: [Linux-uvc-devel] Finepix E550 Settings
Message-ID: <004d01c80f0f$36c7f7e0$b200a8c0@fastglobale.locale>

Hi,
I've cross compiled UVC driver for ARM arch, using kernel 2.6.14.
I'm using uvccapture to get snapshot by a FinePix E550 camera in webcam mode.

After the command ./uvccapture -v , the output is:

Using videodevice: /dev/video0
Saving images to: snap.jpg
Image size: 320x240
Taking snapshot every 0 seconds
Taking images using mmap
 format asked unavailable get width 352 height 288
Resetting camera settings
ioctl querycontrol error 22
ioctl querycontrol error 22
ioctl querycontrol error 22
ioctl querycontrol error 22
ioctl querycontrol error 22
Camera brightness level is -1
ioctl querycontrol error 22
Camera contrast level is -1
ioctl querycontrol error 22
Camera saturation level is -1
ioctl querycontrol error 22
Camera gain level is -1
Saving image to: snap.jpg


I get the snap, but there are these errors about the camera settings.

How can I fix it?

Thank you for any suggestion.

Best Regards,
Claudio Montemaggiore



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071015/bc7cd890/attachment.html>

From laurent.pinchart at skynet.be  Mon Oct 15 20:58:41 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 15 Oct 2007 20:58:41 +0200
Subject: [Linux-uvc-devel] ALI 5602 unsuported?
In-Reply-To: <b0027e740710141650x5276875at282693be9e8c95fc@mail.gmail.com>
References: <b0027e740710141132r5a2f8bb5xc70fbc9df7bdfa2f@mail.gmail.com>
	<200710142236.16234.laurent.pinchart@skynet.be>
	<b0027e740710141650x5276875at282693be9e8c95fc@mail.gmail.com>
Message-ID: <200710152058.41265.laurent.pinchart@skynet.be>

On Monday 15 October 2007, Sam Albuquerque wrote:
> On 14/10/2007, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > Hi Sam,
> >
> > On Sunday 14 October 2007, Sam Albuquerque wrote:
> > > Hi,
> > >
> > > I am using an Acer Aspire 5103WLMi Laptop which has an inbuilt webcam
> > > detected by lsusb as ID 0402:5602 ALi Corp.
> > >
> > > The drivers that come with this cam claim it to be a UVC device. I'm
> > > not sure if it actually is.
> > >
> > > I managed to compile the drivers alright. but cannot install it. Below
> > > is the message from /var/log/messages when i attempt to install the
> > > compiled modules. Any suggestions?
> > >
> > > Oct 14 19:08:59 shashank-laptop kernel: [ 27943.508000] uvcvideo:
> > > Unknown symbol v4l_compat_ioctl32
> > > Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo:
> > > Unknown symbol v4l_compat_ioctl32
> > > Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo:
> > > Unknown symbol v4l_compat_translate_ioctl
> > > Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo:
> > > Unknown symbol video_devdata
> > > Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo:
> > > Unknown symbol v4l_printk_ioctl
> > > Oct 14 19:20:55 shashank-laptop kernel: [ 28659.980000] uvcvideo:
> > > Unknown symbol video_unregister_device
> > > Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo:
> > > Unknown symbol video_device_alloc
> > > Oct 14 19:20:55 shashank-laptop kernel: [28659.980000 ] uvcvideo:
> > > Unknown symbol video_register_device
> > > Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo:
> > > Unknown symbol video_usercopy
> > > Oct 14 19:20:55 shashank-laptop kernel: [28659.980000] uvcvideo:
> > > Unknown symbol video_device_release
> >
> > Have you enabled V4L2 support in your kernel ?
>
> Not sure of that. How do i find it? I'm using Ubuntu feisty with kernel
> 2.6.20-16

If you compiled the kernel yourself, have a look at Device Drivers -> 
Multimedia devices -> Video For Linux.

If you installed the stock Ubuntu kernel, V4L support should be included. How 
did you try to load the driver ? insmod or modprobe ? Have you run depmod 
before ?

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Oct 15 21:00:50 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 15 Oct 2007 21:00:50 +0200
Subject: [Linux-uvc-devel] Finepix E550 Settings
In-Reply-To: <004d01c80f0f$36c7f7e0$b200a8c0@fastglobale.locale>
References: <004d01c80f0f$36c7f7e0$b200a8c0@fastglobale.locale>
Message-ID: <200710152100.50235.laurent.pinchart@skynet.be>

On Monday 15 October 2007, Claudio Montemaggiore - FAST S.p.A. wrote:
> Hi,
> I've cross compiled UVC driver for ARM arch, using kernel 2.6.14.
> I'm using uvccapture to get snapshot by a FinePix E550 camera in webcam
> mode.
>
> After the command ./uvccapture -v , the output is:
>
> Using videodevice: /dev/video0
> Saving images to: snap.jpg
> Image size: 320x240
> Taking snapshot every 0 seconds
> Taking images using mmap
>  format asked unavailable get width 352 height 288
> Resetting camera settings
> ioctl querycontrol error 22
> ioctl querycontrol error 22
> ioctl querycontrol error 22
> ioctl querycontrol error 22
> ioctl querycontrol error 22
> Camera brightness level is -1
> ioctl querycontrol error 22
> Camera contrast level is -1
> ioctl querycontrol error 22
> Camera saturation level is -1
> ioctl querycontrol error 22
> Camera gain level is -1
> Saving image to: snap.jpg
>
>
> I get the snap, but there are these errors about the camera settings.
>
> How can I fix it?

What does uvcvideo report in dmesg ?

Best regards,

Laurent Pinchart


From dmnewman at pobox.com  Tue Oct 16 04:25:44 2007
From: dmnewman at pobox.com (Daniel M. Newman)
Date: Tue, 16 Oct 2007 12:25:44 +1000
Subject: [Linux-uvc-devel] apple isight problem
In-Reply-To: <47124D77.5040209@derklecks.de>
References: <471224B7.6030700@pobox.com> <47124D77.5040209@derklecks.de>
Message-ID: <47142128.2080203@pobox.com>

Thanks for the suggestion.  I've tried your command, same problem. 

Are you using a different kernel, or maybe some different setup in the
kernel config?  Mine is 2.6.22.7 with the mactel patches applied.

Or maybe the firmware is different?  The version of AppleUSBVideoSupport
I'm using is 86712 bytes, dated 2007-05-24 and came from
System/Library/Extensions/IOUSBFamily.kext/Contents/PlugIns/AppleUSBVideoSupport.kext/Contents/MacOS/AppleUSBVideoSupport

Any other suggestions gratefully accepted?

Dan

on 15/10/07 03:10 Felix M?ller said the following:
> Hi,
>
>   
>> I've built the svn uvcvideo module and installed it on a macbook pro
>> with built-in isight, running kernel  2.6.22.7-mactel.  The firmware and
>> kernel module load ok, but dmesg indicates all is not well:
>>
>> uvcvideo: Found UVC 1.00 device Built-in iSight (05ac:8501)
>> uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -32 (exp. 26).
>>     
> This is not fatal as far as I know.
>
>   
>> I can unload and reload the module, but still get this "failed to query"
>> message.
>>
>> I tried the output using mplayer:
>>
>> mplayer -tv
>> driver=v4l2:input=1:width=640:height=480:device=/dev/video0:outfmt=uyvy:fps=30
>> tv://
>>
>> The camera light came on, and a green screen displayed.  The following
>> was output to the console:
>>     
> It does work for me with the following command:
> mplayer -tv driver=v4l2:width=352:height=288:device=/dev/video0:fps=30 tv://
>
> HTH
> Felix M?ller
>
> # mplayer --version
> MPlayer dev-SVN-r24115-4.2.1 (C) 2000-2007 MPlayer Team
>
>   



From laurent.pinchart at skynet.be  Tue Oct 16 13:06:13 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 16 Oct 2007 13:06:13 +0200
Subject: [Linux-uvc-devel] Finepix E550 Settings
In-Reply-To: <000a01c80fd7$2eaacd30$b200a8c0@fastglobale.locale>
References: <004d01c80f0f$36c7f7e0$b200a8c0@fastglobale.locale>
	<200710152100.50235.laurent.pinchart@skynet.be>
	<000a01c80fd7$2eaacd30$b200a8c0@fastglobale.locale>
Message-ID: <200710161306.14333.laurent.pinchart@skynet.be>

Hi,

On Tuesday 16 October 2007 11:30, Claudio Montemaggiore - FAST S.p.A. wrote:
> ----- Original Message -----
> From: "Laurent Pinchart" <laurent.pinchart at skynet.be>
> To: <linux-uvc-devel at lists.berlios.de>
> Cc: "Claudio Montemaggiore - FAST S.p.A."
> <c.montemaggiore at fastautomation.it>
> Sent: Monday, October 15, 2007 9:00 PM
> Subject: Re: [Linux-uvc-devel] Finepix E550 Settings
>
> > On Monday 15 October 2007, Claudio Montemaggiore - FAST S.p.A. wrote:
> > > Hi,
> > > I've cross compiled UVC driver for ARM arch, using kernel 2.6.14.
> > > I'm using uvccapture to get snapshot by a FinePix E550 camera in webcam
> > > mode.
> > >
> > > After the command ./uvccapture -v , the output is:
> > >
> > > Using videodevice: /dev/video0
> > > Saving images to: snap.jpg
> > > Image size: 320x240
> > > Taking snapshot every 0 seconds
> > > Taking images using mmap
> > >  format asked unavailable get width 352 height 288
> > > Resetting camera settings
> > > ioctl querycontrol error 22
> > > ioctl querycontrol error 22
> > > ioctl querycontrol error 22
> > > ioctl querycontrol error 22
> > > ioctl querycontrol error 22
> > > Camera brightness level is -1
> > > ioctl querycontrol error 22
> > > Camera contrast level is -1
> > > ioctl querycontrol error 22
> > > Camera saturation level is -1
> > > ioctl querycontrol error 22
> > > Camera gain level is -1
> > > Saving image to: snap.jpg
> > >
> > >
> > > I get the snap, but there are these errors about the camera settings.
> > >
> > > How can I fix it?
> >
> > What does uvcvideo report in dmesg ?
>
> dmesg report is(after inserting and removing more times the camera):
>
>
> usb 2-1: new full speed USB device using isp116x-hcd and address 6
> scsi3 : SCSI emulation for USB Mass Storage devices
> usb-storage: device found at 6
> usb-storage: waiting for device to settle before scanning
>   Vendor: FUJIFILM  Model: USB-DRIVEUNIT     Rev: 1.00
>   Type:   Direct-Access                      ANSI SCSI revision: 00
> Attached scsi removable disk sdb at scsi3, channel 0, id 0, lun 0
> Attached scsi generic sg1 at scsi3, channel 0, id 0, lun 0,  type 0
> usb-storage: device scan complete
> usb 2-1: USB disconnect, address 6
> usb 2-1: new full speed USB device using isp116x-hcd and address 7
> uvcvideo: Found UVC 1.00 device USB Web Camera (04cb:0172)
> usb 2-1: USB disconnect, address 7
[snip]

Please post the dmesg output after running uvccapture.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Oct 16 13:10:11 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 16 Oct 2007 13:10:11 +0200
Subject: [Linux-uvc-devel] ALI 5602 unsuported?
In-Reply-To: <b0027e740710160245y79528c69y994d183e7cf40326@mail.gmail.com>
References: <b0027e740710141132r5a2f8bb5xc70fbc9df7bdfa2f@mail.gmail.com>
	<200710152058.41265.laurent.pinchart@skynet.be>
	<b0027e740710160245y79528c69y994d183e7cf40326@mail.gmail.com>
Message-ID: <200710161310.12091.laurent.pinchart@skynet.be>

Hi Sam,

On Tuesday 16 October 2007 11:45, Sam Albuquerque wrote:
> i checked my lsmod and v4l2_common and v4l1_compat are in place. By which I
> assume the stock kernel does have v4l2 enabled(am i right)

That's right.

> i have tried all the three options.
> I tried both with depmod and insmod, but no use as yet.
> I have used depmod before as well. There is another driver development
> going on for this cam and i am following up with them as well to get it
> working. I did remove the other module (m5602) before trying to load the
> uvcvideo module.
>
> I'll retry after Gutsy releases 2 days from now. and let u know if i face
> any problem or success.

Make sure the following modules are loaded (load them with modprobe if 
necessary):

videodev
v4l1_compat
v4l2_common
compat_ioctl32

Then try to load the uvcvideo module and post the related kernel log and 
insmod/modprobe output message.

Best regards,

Laurent Pinchart


From marco at absence.it  Tue Oct 16 13:16:52 2007
From: marco at absence.it (Marco)
Date: Tue, 16 Oct 2007 13:16:52 +0200
Subject: [Linux-uvc-devel] Manual focus/autofocus support status for the
 Logitech Quickcam Pro series
Message-ID: <47149DA4.4030201@absence.it>

Hello,
I'd like to upgrade my webcam with a brand new Quickcam Pro for 
Notebooks (046d:0991), but I've read about the software autofocus system 
and I'm a little bit confused. Probably autofocus will never be 
implemented but is it already possible a manual focus through the uvc 
driver? Or there will be a manual focus support anytime soon?

Regards,
Marco


From michael.kromer at computergmbh.de  Tue Oct 16 15:54:33 2007
From: michael.kromer at computergmbh.de (Michael E. Kromer)
Date: Tue, 16 Oct 2007 15:54:33 +0200
Subject: [Linux-uvc-devel] uvcvideo (svn133) with Acer Crystal Eye webcam
	(Travelmate 7720G)
Message-ID: <1192542873.9391.5.camel@medozasmobile.computergmbh.de>

Hi all,
        
        I've just received a new notebook from my employer, and i was
        trying to
        get my webcam running, as i would need to use it with ekiga.
        somehow it
        simply just doesnt work - maybe its unsupported at the moment?
        
        i already tried uvcvideo svn 133, no change. OS is opensuse 10.3
        final
        i586.
        
        funny thing although is i get the following (dmesg) with
        reregistering
        uvcvideo:
        
        usbcore: deregistering interface driver uvcvideo
        uvcvideo: Found UVC 1.00 device Acer Crystal Eye webcam
        (5986:0102)
        usbcore: registered new interface driver uvcvideo
        USB Video Class driver (v0.1.0)
        
        but then, when i try to open it up with ekiga, i simply get
        (dmesg):
        
        uvcvideo: Failed to query (130) UVC control 1 (unit 0) : 2 (exp.
        26).
        
        i also tried to receive use different webcam software (gqcam,
        wxcam,
        for example) - all with same result.
        
        i even tried luvcview (manually compiled).. same .. output:
        
        uvcview verion 0.1.4 
        Video driver: x11
        A window manager is available
        video /dev/video0 
        Unable to set format: 5.
         Init v4L2 failed !! exit fatal
        
        --
        
        Any clues?
        
        Thanks in advance,
        
        Michael
        
        ----
        
        uname -a
        
        Linux medozasmobile 2.6.22.9-0.4-default #1 SMP 2007/10/05
        21:32:04 UTC
        i686 i686 i386 GNU/Linux
        
        ----
        
        hwinfo --usb (shortened)
        
        10: USB 00.0: 0000 Unclassified device
          [Created at usb.122]
        
        UDI: /org/freedesktop/Hal/devices/usb_device_5986_102_noserial_if0
          Unique ID: ZmS7.OdDu3vve13D
          Parent ID: 7eqy.mIAsvqVqLYB
          SysFS ID: /devices/pci0000:00/0000:00:1a.7/usb6/6-1/6-1:1.0
          SysFS BusID: 6-1:1.0
          Hardware Class: unknown
          Model: "Acer Crystal Eye webcam"
          Hotplug: USB
          Vendor: usb 0x5986 
          Device: usb 0x0102 "Acer Crystal Eye webcam"
          Revision: "1.00"
          Driver: "uvcvideo"
          Driver Modules: "uvcvideo"
          Speed: 480 Mbps
          Module Alias: "usb:v5986p0102d0100dcEFdsc02dp01ic0Eisc01ip00"
          Driver Info #0:
            Driver Status: uvcvideo is active
            Driver Activation Cmd: "modprobe uvcvideo"
          Config Status: cfg=new, avail=yes, need=no, active=unknown
          Attached to: #8 (Hub)
        
        ----
        
        lsusb -v -d 5986:0102
        
        Bus 006 Device 002: ID 5986:0102  
        Device Descriptor:
          bLength                18
          bDescriptorType         1
          bcdUSB               2.00
          bDeviceClass          239 Miscellaneous Device
          bDeviceSubClass         2 Common Class
          bDeviceProtocol         1 Interface Association
          bMaxPacketSize0        64
          idVendor           0x5986 
          idProduct          0x0102 
          bcdDevice            1.00
          iManufacturer           0 
          iProduct                1 Acer Crystal Eye webcam
          iSerial                 0 
          bNumConfigurations      1
          Configuration Descriptor:
            bLength                 9
            bDescriptorType         2
            wTotalLength          632
            bNumInterfaces          2
            bConfigurationValue     1
            iConfiguration          0 
            bmAttributes         0x80
              (Bus Powered)
            MaxPower              500mA
            Interface Association:
              bLength                 8
              bDescriptorType        11
              bFirstInterface         0
              bInterfaceCount         2
              bFunctionClass         14 Video
              bFunctionSubClass       3 Video Interface Collection
              bFunctionProtocol       0 
              iFunction               1 Acer Crystal Eye webcam
            Interface Descriptor:
              bLength                 9
              bDescriptorType         4
              bInterfaceNumber        0
              bAlternateSetting       0
              bNumEndpoints           1
              bInterfaceClass        14 Video
              bInterfaceSubClass      1 Video Control
              bInterfaceProtocol      0 
              iInterface              1 Acer Crystal Eye webcam
              VideoControl Interface Descriptor:
                bLength                13
                bDescriptorType        36
                bDescriptorSubtype      1 (HEADER)
                bcdUVC               1.00
                wTotalLength           84
                dwClockFrequency       30.000000MHz
                bInCollection           1
                baInterfaceNr( 0)       1
              VideoControl Interface Descriptor:
                bLength                17
                bDescriptorType        36
                bDescriptorSubtype      2 (INPUT_TERMINAL)
                bTerminalID             1
                wTerminalType      0x0201 Camera Sensor
                bAssocTerminal          0
                iTerminal               0 
                wObjectiveFocalLengthMin      0
                wObjectiveFocalLengthMax      0
                wOcularFocalLength            0
                bControlSize                  2
                bmControls           0x00000000
              VideoControl Interface Descriptor:
                bLength                 9
                bDescriptorType        36
                bDescriptorSubtype      3 (OUTPUT_TERMINAL)
                bTerminalID             3
                wTerminalType      0x0101 USB Streaming
                bAssocTerminal          0
                bSourceID               6
                iTerminal               0 
              VideoControl Interface Descriptor:
                bLength                 7
                bDescriptorType        36
                bDescriptorSubtype      4 (SELECTOR_UNIT)
                bUnitID                 4
                bNrInPins               1
                baSource( 0)            1
                iSelector               0 
              VideoControl Interface Descriptor:
                bLength                11
                bDescriptorType        36
                bDescriptorSubtype      5 (PROCESSING_UNIT)
              Warning: Descriptor too short
                bUnitID                 5
                bSourceID               4
                wMaxMultiplier          0
                bControlSize            2
                bmControls     0x0000053f
                  Brightness
                  Contrast
                  Hue
                  Saturation
                  Sharpness
                  Gamma
                  Backlight Compensation
                  Power Line Frequency
                iProcessing             0 
                bmVideoStandards     0x1b
                  None
                  NTSC - 525/60
                  SECAM - 625/50
                  NTSC - 625/50
              VideoControl Interface Descriptor:
                bLength                27
                bDescriptorType        36
                bDescriptorSubtype      6 (EXTENSION_UNIT)
                bUnitID                 6
                guidExtensionCode
        {564c97a7-7ea7-904b-8cbf-1c71ec303000}
                bNumControl            16
                bNrPins                 1
                baSourceID( 0)          5
                bControlSize            2
                bmControls( 0)       0xff
                bmControls( 1)       0xff
                iExtension              0 
              Endpoint Descriptor:
                bLength                 7
                bDescriptorType         5
                bEndpointAddress     0x82  EP 2 IN
                bmAttributes            3
                  Transfer Type            Interrupt
                  Synch Type               None
                  Usage Type               Data
                wMaxPacketSize     0x0008  1x 8 bytes
                bInterval              15
            Interface Descriptor:
              bLength                 9
              bDescriptorType         4
              bInterfaceNumber        1
              bAlternateSetting       0
              bNumEndpoints           0
              bInterfaceClass        14 Video
              bInterfaceSubClass      2 Video Streaming
              bInterfaceProtocol      0 
              iInterface              0 
              VideoStreaming Interface Descriptor:
                bLength                            15
                bDescriptorType                    36
                bDescriptorSubtype                  1 (INPUT_HEADER)
                bNumFormarts                        2
                wTotalLength                    33025
                bEndPointAddress                    0
                bmInfo                              3
                bTerminalLink                       2
                bStillCaptureMethod                 1
                bTriggerSupport                     1
                bTriggerUsage                       1
                bControlSize                        1
                bmaControls( 0)                    11
                bmaControls( 1)                    11
              VideoStreaming Interface Descriptor:
                bLength                            11
                bDescriptorType                    36
                bDescriptorSubtype                  6 (FORMAT_MJPEG)
                bFormatIndex                        1
                bNumFrameDescriptors                5
                bFlags                              1
                  Fixed-size samples: Yes
                bDefaultFrameIndex                  1
                bAspectRatioX                       0
                bAspectRatioY                       0
                bmInterlaceFlags                 0x00
                  Interlaced stream or variable: No
                  Fields per frame: 1 fields
                  Field 1 first: No
                  Field pattern: Field 1 only
                  bCopyProtect                      0
              VideoStreaming Interface Descriptor:
                bLength                            38
                bDescriptorType                    36
                bDescriptorSubtype                  7 (FRAME_MJPEG)
                bFrameIndex                         1
                bmCapabilities                   0x01
                  Still image supported
                wWidth                            640
                wHeight                           480
                dwMinBitRate                   912384
                dwMaxBitRate                   912384
                dwMaxVideoFrameBufferSize      921600
                dwDefaultFrameInterval         333333
                bFrameIntervalType                  3
                dwFrameInterval( 0)            333333
                dwFrameInterval( 1)            666666
                dwFrameInterval( 2)           1000000
              VideoStreaming Interface Descriptor:
                bLength                            38
                bDescriptorType                    36
                bDescriptorSubtype                  7 (FRAME_MJPEG)
                bFrameIndex                         2
                bmCapabilities                   0x01
                  Still image supported
                wWidth                            320
                wHeight                           240
                dwMinBitRate                   912384
                dwMaxBitRate                   912384
                dwMaxVideoFrameBufferSize      230400
                dwDefaultFrameInterval         333333
                bFrameIntervalType                  3
                dwFrameInterval( 0)            333333
                dwFrameInterval( 1)            666666
                dwFrameInterval( 2)           1000000
              VideoStreaming Interface Descriptor:
                bLength                            38
                bDescriptorType                    36
                bDescriptorSubtype                  7 (FRAME_MJPEG)
                bFrameIndex                         3
                bmCapabilities                   0x01
                  Still image supported
                wWidth                            160
                wHeight                           120
                dwMinBitRate                   912384
                dwMaxBitRate                   912384
                dwMaxVideoFrameBufferSize       57600
                dwDefaultFrameInterval         333333
                bFrameIntervalType                  3
                dwFrameInterval( 0)            333333
                dwFrameInterval( 1)            666666
                dwFrameInterval( 2)           1000000
              VideoStreaming Interface Descriptor:
                bLength                            38
                bDescriptorType                    36
                bDescriptorSubtype                  7 (FRAME_MJPEG)
                bFrameIndex                         4
                bmCapabilities                   0x01
                  Still image supported
                wWidth                            352
                wHeight                           288
                dwMinBitRate                   912384
                dwMaxBitRate                   912384
                dwMaxVideoFrameBufferSize      304128
                dwDefaultFrameInterval         333333
                bFrameIntervalType                  3
                dwFrameInterval( 0)            333333
                dwFrameInterval( 1)            666666
                dwFrameInterval( 2)           1000000
              VideoStreaming Interface Descriptor:
                bLength                            38
                bDescriptorType                    36
                bDescriptorSubtype                  7 (FRAME_MJPEG)
                bFrameIndex                         5
                bmCapabilities                   0x01
                  Still image supported
                wWidth                            176
                wHeight                           144
                dwMinBitRate                   912384
                dwMaxBitRate                   912384
                dwMaxVideoFrameBufferSize       76032
                dwDefaultFrameInterval         333333
                bFrameIntervalType                  3
                dwFrameInterval( 0)            333333
                dwFrameInterval( 1)            666666
                dwFrameInterval( 2)           1000000
              VideoStreaming Interface Descriptor:
                bLength                            26
                bDescriptorType                    36
                bDescriptorSubtype                  3
        (STILL_IMAGE_FRAME)
                bEndpointAddress                    0
                bNumImageSizePatterns               5
                wWidth( 0)                        640
                wHeight( 0)                       480
                wWidth( 1)                        320
                wHeight( 1)                       240
                wWidth( 2)                        160
                wHeight( 2)                       120
                wWidth( 3)                        352
                wHeight( 3)                       288
                wWidth( 4)                        176
                wHeight( 4)                       144
                bNumCompressionPatterns             5
              VideoStreaming Interface Descriptor:
                bLength                            27
                bDescriptorType                    36
                bDescriptorSubtype                  4
        (FORMAT_UNCOMPRESSED)
                bFormatIndex                        2
                bNumFrameDescriptors                5
                guidFormat
        {59555932-0000-1000-8000-00aa00389b71}
                bBitsPerPixel                      16
                bDefaultFrameIndex                  1
                bAspectRatioX                       0
                bAspectRatioY                       0
                bmInterlaceFlags                 0x00
                  Interlaced stream or variable: No
                  Fields per frame: 1 fields
                  Field 1 first: No
                  Field pattern: Field 1 only
                  bCopyProtect                      0
              VideoStreaming Interface Descriptor:
                bLength                            38
                bDescriptorType                    36
                bDescriptorSubtype                  5
        (FRAME_UNCOMPRESSED)
                bFrameIndex                         1
                bmCapabilities                   0x01
                  Still image supported
                wWidth                            640
                wHeight                           480
                dwMinBitRate                   912384
                dwMaxBitRate                   912384
                dwMaxVideoFrameBufferSize      614400
                dwDefaultFrameInterval         333333
                bFrameIntervalType                  3
                dwFrameInterval( 0)            333333
                dwFrameInterval( 1)            666666
                dwFrameInterval( 2)           1000000
              VideoStreaming Interface Descriptor:
                bLength                            38
                bDescriptorType                    36
                bDescriptorSubtype                  5
        (FRAME_UNCOMPRESSED)
                bFrameIndex                         2
                bmCapabilities                   0x01
                  Still image supported
                wWidth                            320
                wHeight                           240
                dwMinBitRate                   912384
                dwMaxBitRate                   912384
                dwMaxVideoFrameBufferSize      230400
                dwDefaultFrameInterval         333333
                bFrameIntervalType                  3
                dwFrameInterval( 0)            333333
                dwFrameInterval( 1)            666666
                dwFrameInterval( 2)           1000000
              VideoStreaming Interface Descriptor:
                bLength                            38
                bDescriptorType                    36
                bDescriptorSubtype                  5
        (FRAME_UNCOMPRESSED)
                bFrameIndex                         3
                bmCapabilities                   0x01
                  Still image supported
                wWidth                            160
                wHeight                           120
                dwMinBitRate                   912384
                dwMaxBitRate                   912384
                dwMaxVideoFrameBufferSize       57600
                dwDefaultFrameInterval         333333
                bFrameIntervalType                  3
                dwFrameInterval( 0)            333333
                dwFrameInterval( 1)            666666
                dwFrameInterval( 2)           1000000
              VideoStreaming Interface Descriptor:
                bLength                            38
                bDescriptorType                    36
                bDescriptorSubtype                  5
        (FRAME_UNCOMPRESSED)
                bFrameIndex                         4
                bmCapabilities                   0x01
                  Still image supported
                wWidth                            352
                wHeight                           288
                dwMinBitRate                   912384
                dwMaxBitRate                   912384
                dwMaxVideoFrameBufferSize      304128
                dwDefaultFrameInterval         333333
                bFrameIntervalType                  3
                dwFrameInterval( 0)            333333
                dwFrameInterval( 1)            666666
                dwFrameInterval( 2)           1000000
              VideoStreaming Interface Descriptor:
                bLength                            38
                bDescriptorType                    36
                bDescriptorSubtype                  5
        (FRAME_UNCOMPRESSED)
                bFrameIndex                         5
                bmCapabilities                   0x01
                  Still image supported
                wWidth                            176
                wHeight                           144
                dwMinBitRate                   912384
                dwMaxBitRate                   912384
                dwMaxVideoFrameBufferSize       76032
                dwDefaultFrameInterval         333333
                bFrameIntervalType                  3
                dwFrameInterval( 0)            333333
                dwFrameInterval( 1)            666666
                dwFrameInterval( 2)           1000000
              VideoStreaming Interface Descriptor:
                bLength                            26
                bDescriptorType                    36
                bDescriptorSubtype                  3
        (STILL_IMAGE_FRAME)
                bEndpointAddress                    0
                bNumImageSizePatterns               5
                wWidth( 0)                        640
                wHeight( 0)                       480
                wWidth( 1)                        320
                wHeight( 1)                       240
                wWidth( 2)                        160
                wHeight( 2)                       120
                wWidth( 3)                        352
                wHeight( 3)                       288
                wWidth( 4)                        176
                wHeight( 4)                       144
                bNumCompressionPatterns             5
            Interface Descriptor:
              bLength                 9
              bDescriptorType         4
              bInterfaceNumber        1
              bAlternateSetting       1
              bNumEndpoints           1
              bInterfaceClass        14 Video
              bInterfaceSubClass      2 Video Streaming
              bInterfaceProtocol      0 
              iInterface              0 
              Endpoint Descriptor:
                bLength                 7
                bDescriptorType         5
                bEndpointAddress     0x81  EP 1 IN
                bmAttributes            5
                  Transfer Type            Isochronous
                  Synch Type               Asynchronous
                  Usage Type               Data
                wMaxPacketSize     0x1400  3x 0 bytes
                bInterval               1
        Device Qualifier (for other device speed):
          bLength                10
          bDescriptorType         6
          bcdUSB               2.00
          bDeviceClass            0 (Defined at Interface level)
          bDeviceSubClass         0 
          bDeviceProtocol         0 
          bMaxPacketSize0        64
          bNumConfigurations      1
        Device Status:     0x0000
          (Bus Powered)
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: This is a digitally signed message part
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071016/9f2a751d/attachment.pgp>

From tharindunix at gmail.com  Tue Oct 16 16:19:16 2007
From: tharindunix at gmail.com (Tharindu Rukshan Bamunuarachchi)
Date: Tue, 16 Oct 2007 14:19:16 +0000
Subject: [Linux-uvc-devel] Motorola PCS in E6 Mobile Phone
Message-ID: <c49434130710160719w7ffcec7flc14d8809b4724ec1@mail.gmail.com>

Recently I bought Motorola ROKO E6 mobile phone.
Which has inbuilt Web Camera.

I have tried few drivers and your uvc driver finally detected my web camera.

Unfortunately, I got following error after connecting Web Camera.
So  I have used trace=15 feature and got more detailed info.

It says ...

"uvcvideo: No valid video chain found."

I like to continue debugging and make it work.

Can you pls help me to figure out what is the wrong with device detection.


[  938.420473] uvcvideo: Probing generic UVC device 7
[  938.420486] uvcvideo: Found format YUV 4:2:2 (YUYV).
[  938.420488] uvcvideo: - 352x288 (20.0 fps)
[  938.420489] uvcvideo: - 176x144 (20.0 fps)
[  938.420491] uvcvideo: - 640x480 (15.0 fps)
[  938.420492] uvcvideo: - 320x240 (20.0 fps)
[  938.420493] uvcvideo: - 160x120 (20.0 fps)
[  938.420499] uvcvideo: Found UVC 1.00 device Motorola USB Camera
(22b8:6006)
[  938.420503] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/2 to device 7 entity 5
[  938.420508] uvcvideo: Scanning UVC chain: OT 3 <- PU 5 <- SU 4 <- IT
1<7>uvcvideo: Selector unit 4 input 1 isn't connected to an input terminal
[  938.420513] uvcvideo: No valid video chain found.
[  938.420529] usbcore: registered new interface driver uvcvideo
[  938.420531] USB Video Class driver (v0.1.0)


Is it impossible to use this in Linux env??

Thankx
Cheers
Tharindu

-- 
Tharindu Rukshan Bamunuarachchi
i want to believe it; unless otherwise
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071016/d9c2d081/attachment.html>

From laurent.pinchart at skynet.be  Tue Oct 16 16:27:23 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 16 Oct 2007 16:27:23 +0200
Subject: [Linux-uvc-devel] Motorola PCS in E6 Mobile Phone
In-Reply-To: <c49434130710160719w7ffcec7flc14d8809b4724ec1@mail.gmail.com>
References: <c49434130710160719w7ffcec7flc14d8809b4724ec1@mail.gmail.com>
Message-ID: <200710161627.24101.laurent.pinchart@skynet.be>

Hi Tharindu,

On Tuesday 16 October 2007 16:19, Tharindu Rukshan Bamunuarachchi wrote:
> Recently I bought Motorola ROKO E6 mobile phone.
> Which has inbuilt Web Camera.
>
> I have tried few drivers and your uvc driver finally detected my web
> camera.
>
> Unfortunately, I got following error after connecting Web Camera.
> So  I have used trace=15 feature and got more detailed info.
>
> It says ...
>
> "uvcvideo: No valid video chain found."
>
> I like to continue debugging and make it work.
>
> Can you pls help me to figure out what is the wrong with device detection.
>
>
> [  938.420473] uvcvideo: Probing generic UVC device 7
> [  938.420486] uvcvideo: Found format YUV 4:2:2 (YUYV).
> [  938.420488] uvcvideo: - 352x288 (20.0 fps)
> [  938.420489] uvcvideo: - 176x144 (20.0 fps)
> [  938.420491] uvcvideo: - 640x480 (15.0 fps)
> [  938.420492] uvcvideo: - 320x240 (20.0 fps)
> [  938.420493] uvcvideo: - 160x120 (20.0 fps)
> [  938.420499] uvcvideo: Found UVC 1.00 device Motorola USB Camera
> (22b8:6006)
> [  938.420503] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000101/2 to device 7 entity 5
> [  938.420508] uvcvideo: Scanning UVC chain: OT 3 <- PU 5 <- SU 4 <- IT
> 1<7>uvcvideo: Selector unit 4 input 1 isn't connected to an input terminal
> [  938.420513] uvcvideo: No valid video chain found.
> [  938.420529] usbcore: registered new interface driver uvcvideo
> [  938.420531] USB Video Class driver (v0.1.0)
>
>
> Is it impossible to use this in Linux env??

Please post the output of 'lsusb -d 22b8:6006 -v' (with usbutils 0.72 or 
newer).

Best regards,

Laurent Pinchart


From mxhaard at magic.fr  Tue Oct 16 18:10:48 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Tue, 16 Oct 2007 18:10:48 +0200
Subject: [Linux-uvc-devel] uvcvideo (svn133) with Acer Crystal Eye
	webcam (Travelmate 7720G)
In-Reply-To: <1192542873.9391.5.camel@medozasmobile.computergmbh.de>
References: <1192542873.9391.5.camel@medozasmobile.computergmbh.de>
Message-ID: <200710161810.48311.mxhaard@magic.fr>

Le Mardi 16 Octobre 2007 15:54, Michael E. Kromer a ?crit?:
> Hi all,
>
>         I've just received a new notebook from my employer, and i was
>         trying to
>         get my webcam running, as i would need to use it with ekiga.
>         somehow it
>         simply just doesnt work - maybe its unsupported at the moment?
>
>         i already tried uvcvideo svn 133, no change. OS is opensuse 10.3
>         final
>         i586.
>
>         funny thing although is i get the following (dmesg) with
>         reregistering
>         uvcvideo:
>
>         usbcore: deregistering interface driver uvcvideo
>         uvcvideo: Found UVC 1.00 device Acer Crystal Eye webcam
>         (5986:0102)
>         usbcore: registered new interface driver uvcvideo
>         USB Video Class driver (v0.1.0)
>
>         but then, when i try to open it up with ekiga, i simply get
>         (dmesg):
>
>         uvcvideo: Failed to query (130) UVC control 1 (unit 0) : 2 (exp.
>         26).
>
>         i also tried to receive use different webcam software (gqcam,
>         wxcam,
>         for example) - all with same result.
>
>         i even tried luvcview (manually compiled).. same .. output:
>
>         uvcview verion 0.1.4
>         Video driver: x11
>         A window manager is available
>         video /dev/video0
>         Unable to set format: 5.
>          Init v4L2 failed !! exit fatal
>
>         --
>
>         Any clues?
>
>         Thanks in advance,
>
>         Michael
>
>         ----
>
>         uname -a
>
>         Linux medozasmobile 2.6.22.9-0.4-default #1 SMP 2007/10/05
>         21:32:04 UTC
>         i686 i686 i386 GNU/Linux
>
>         ----
>
>         hwinfo --usb (shortened)
>
>         10: USB 00.0: 0000 Unclassified device
>           [Created at usb.122]
>
>         UDI: /org/freedesktop/Hal/devices/usb_device_5986_102_noserial_if0
>           Unique ID: ZmS7.OdDu3vve13D
>           Parent ID: 7eqy.mIAsvqVqLYB
>           SysFS ID: /devices/pci0000:00/0000:00:1a.7/usb6/6-1/6-1:1.0
>           SysFS BusID: 6-1:1.0
>           Hardware Class: unknown
>           Model: "Acer Crystal Eye webcam"
>           Hotplug: USB
>           Vendor: usb 0x5986
>           Device: usb 0x0102 "Acer Crystal Eye webcam"
>           Revision: "1.00"
>           Driver: "uvcvideo"
>           Driver Modules: "uvcvideo"
>           Speed: 480 Mbps
>           Module Alias: "usb:v5986p0102d0100dcEFdsc02dp01ic0Eisc01ip00"
>           Driver Info #0:
>             Driver Status: uvcvideo is active
>             Driver Activation Cmd: "modprobe uvcvideo"
>           Config Status: cfg=new, avail=yes, need=no, active=unknown
>           Attached to: #8 (Hub)
>
>         ----
>
>         lsusb -v -d 5986:0102
>
>         Bus 006 Device 002: ID 5986:0102
>         Device Descriptor:
>           bLength                18
>           bDescriptorType         1
>           bcdUSB               2.00
>           bDeviceClass          239 Miscellaneous Device
>           bDeviceSubClass         2 Common Class
>           bDeviceProtocol         1 Interface Association
>           bMaxPacketSize0        64
>           idVendor           0x5986
>           idProduct          0x0102
>           bcdDevice            1.00
>           iManufacturer           0
>           iProduct                1 Acer Crystal Eye webcam
>           iSerial                 0
>           bNumConfigurations      1
>           Configuration Descriptor:
>             bLength                 9
>             bDescriptorType         2
>             wTotalLength          632
>             bNumInterfaces          2
>             bConfigurationValue     1
>             iConfiguration          0
>             bmAttributes         0x80
>               (Bus Powered)
>             MaxPower              500mA
>             Interface Association:
>               bLength                 8
>               bDescriptorType        11
>               bFirstInterface         0
>               bInterfaceCount         2
>               bFunctionClass         14 Video
>               bFunctionSubClass       3 Video Interface Collection
>               bFunctionProtocol       0
>               iFunction               1 Acer Crystal Eye webcam
>             Interface Descriptor:
>               bLength                 9
>               bDescriptorType         4
>               bInterfaceNumber        0
>               bAlternateSetting       0
>               bNumEndpoints           1
>               bInterfaceClass        14 Video
>               bInterfaceSubClass      1 Video Control
>               bInterfaceProtocol      0
>               iInterface              1 Acer Crystal Eye webcam
>               VideoControl Interface Descriptor:
>                 bLength                13
>                 bDescriptorType        36
>                 bDescriptorSubtype      1 (HEADER)
>                 bcdUVC               1.00
>                 wTotalLength           84
>                 dwClockFrequency       30.000000MHz
>                 bInCollection           1
>                 baInterfaceNr( 0)       1
>               VideoControl Interface Descriptor:
>                 bLength                17
>                 bDescriptorType        36
>                 bDescriptorSubtype      2 (INPUT_TERMINAL)
>                 bTerminalID             1
>                 wTerminalType      0x0201 Camera Sensor
>                 bAssocTerminal          0
>                 iTerminal               0
>                 wObjectiveFocalLengthMin      0
>                 wObjectiveFocalLengthMax      0
>                 wOcularFocalLength            0
>                 bControlSize                  2
>                 bmControls           0x00000000
>               VideoControl Interface Descriptor:
>                 bLength                 9
>                 bDescriptorType        36
>                 bDescriptorSubtype      3 (OUTPUT_TERMINAL)
>                 bTerminalID             3
>                 wTerminalType      0x0101 USB Streaming
>                 bAssocTerminal          0
>                 bSourceID               6
>                 iTerminal               0
>               VideoControl Interface Descriptor:
>                 bLength                 7
>                 bDescriptorType        36
>                 bDescriptorSubtype      4 (SELECTOR_UNIT)
>                 bUnitID                 4
>                 bNrInPins               1
>                 baSource( 0)            1
>                 iSelector               0
>               VideoControl Interface Descriptor:
>                 bLength                11
>                 bDescriptorType        36
>                 bDescriptorSubtype      5 (PROCESSING_UNIT)
>               Warning: Descriptor too short
>                 bUnitID                 5
>                 bSourceID               4
>                 wMaxMultiplier          0
>                 bControlSize            2
>                 bmControls     0x0000053f
>                   Brightness
>                   Contrast
>                   Hue
>                   Saturation
>                   Sharpness
>                   Gamma
>                   Backlight Compensation
>                   Power Line Frequency
>                 iProcessing             0
>                 bmVideoStandards     0x1b
>                   None
>                   NTSC - 525/60
>                   SECAM - 625/50
>                   NTSC - 625/50
>               VideoControl Interface Descriptor:
>                 bLength                27
>                 bDescriptorType        36
>                 bDescriptorSubtype      6 (EXTENSION_UNIT)
>                 bUnitID                 6
>                 guidExtensionCode
>         {564c97a7-7ea7-904b-8cbf-1c71ec303000}
>                 bNumControl            16
>                 bNrPins                 1
>                 baSourceID( 0)          5
>                 bControlSize            2
>                 bmControls( 0)       0xff
>                 bmControls( 1)       0xff
>                 iExtension              0
>               Endpoint Descriptor:
>                 bLength                 7
>                 bDescriptorType         5
>                 bEndpointAddress     0x82  EP 2 IN
>                 bmAttributes            3
>                   Transfer Type            Interrupt
>                   Synch Type               None
>                   Usage Type               Data
>                 wMaxPacketSize     0x0008  1x 8 bytes
>                 bInterval              15
>             Interface Descriptor:
>               bLength                 9
>               bDescriptorType         4
>               bInterfaceNumber        1
>               bAlternateSetting       0
>               bNumEndpoints           0
>               bInterfaceClass        14 Video
>               bInterfaceSubClass      2 Video Streaming
>               bInterfaceProtocol      0
>               iInterface              0
>               VideoStreaming Interface Descriptor:
>                 bLength                            15
>                 bDescriptorType                    36
>                 bDescriptorSubtype                  1 (INPUT_HEADER)
>                 bNumFormarts                        2
>                 wTotalLength                    33025
>                 bEndPointAddress                    0
>                 bmInfo                              3
>                 bTerminalLink                       2
>                 bStillCaptureMethod                 1
>                 bTriggerSupport                     1
>                 bTriggerUsage                       1
>                 bControlSize                        1
>                 bmaControls( 0)                    11
>                 bmaControls( 1)                    11
>               VideoStreaming Interface Descriptor:
>                 bLength                            11
>                 bDescriptorType                    36
>                 bDescriptorSubtype                  6 (FORMAT_MJPEG)
>                 bFormatIndex                        1
>                 bNumFrameDescriptors                5
>                 bFlags                              1
>                   Fixed-size samples: Yes
>                 bDefaultFrameIndex                  1
>                 bAspectRatioX                       0
>                 bAspectRatioY                       0
>                 bmInterlaceFlags                 0x00
>                   Interlaced stream or variable: No
>                   Fields per frame: 1 fields
>                   Field 1 first: No
>                   Field pattern: Field 1 only
>                   bCopyProtect                      0
>               VideoStreaming Interface Descriptor:
>                 bLength                            38
>                 bDescriptorType                    36
>                 bDescriptorSubtype                  7 (FRAME_MJPEG)
>                 bFrameIndex                         1
>                 bmCapabilities                   0x01
>                   Still image supported
>                 wWidth                            640
>                 wHeight                           480
>                 dwMinBitRate                   912384
>                 dwMaxBitRate                   912384
>                 dwMaxVideoFrameBufferSize      921600
>                 dwDefaultFrameInterval         333333
>                 bFrameIntervalType                  3
>                 dwFrameInterval( 0)            333333
>                 dwFrameInterval( 1)            666666
>                 dwFrameInterval( 2)           1000000
>               VideoStreaming Interface Descriptor:
>                 bLength                            38
>                 bDescriptorType                    36
>                 bDescriptorSubtype                  7 (FRAME_MJPEG)
>                 bFrameIndex                         2
>                 bmCapabilities                   0x01
>                   Still image supported
>                 wWidth                            320
>                 wHeight                           240
>                 dwMinBitRate                   912384
>                 dwMaxBitRate                   912384
>                 dwMaxVideoFrameBufferSize      230400
>                 dwDefaultFrameInterval         333333
>                 bFrameIntervalType                  3
>                 dwFrameInterval( 0)            333333
>                 dwFrameInterval( 1)            666666
>                 dwFrameInterval( 2)           1000000
>               VideoStreaming Interface Descriptor:
>                 bLength                            38
>                 bDescriptorType                    36
>                 bDescriptorSubtype                  7 (FRAME_MJPEG)
>                 bFrameIndex                         3
>                 bmCapabilities                   0x01
>                   Still image supported
>                 wWidth                            160
>                 wHeight                           120
>                 dwMinBitRate                   912384
>                 dwMaxBitRate                   912384
>                 dwMaxVideoFrameBufferSize       57600
>                 dwDefaultFrameInterval         333333
>                 bFrameIntervalType                  3
>                 dwFrameInterval( 0)            333333
>                 dwFrameInterval( 1)            666666
>                 dwFrameInterval( 2)           1000000
>               VideoStreaming Interface Descriptor:
>                 bLength                            38
>                 bDescriptorType                    36
>                 bDescriptorSubtype                  7 (FRAME_MJPEG)
>                 bFrameIndex                         4
>                 bmCapabilities                   0x01
>                   Still image supported
>                 wWidth                            352
>                 wHeight                           288
>                 dwMinBitRate                   912384
>                 dwMaxBitRate                   912384
>                 dwMaxVideoFrameBufferSize      304128
>                 dwDefaultFrameInterval         333333
>                 bFrameIntervalType                  3
>                 dwFrameInterval( 0)            333333
>                 dwFrameInterval( 1)            666666
>                 dwFrameInterval( 2)           1000000
>               VideoStreaming Interface Descriptor:
>                 bLength                            38
>                 bDescriptorType                    36
>                 bDescriptorSubtype                  7 (FRAME_MJPEG)
>                 bFrameIndex                         5
>                 bmCapabilities                   0x01
>                   Still image supported
>                 wWidth                            176
>                 wHeight                           144
>                 dwMinBitRate                   912384
>                 dwMaxBitRate                   912384
>                 dwMaxVideoFrameBufferSize       76032
>                 dwDefaultFrameInterval         333333
>                 bFrameIntervalType                  3
>                 dwFrameInterval( 0)            333333
>                 dwFrameInterval( 1)            666666
>                 dwFrameInterval( 2)           1000000
>               VideoStreaming Interface Descriptor:
>                 bLength                            26
>                 bDescriptorType                    36
>                 bDescriptorSubtype                  3
>         (STILL_IMAGE_FRAME)
>                 bEndpointAddress                    0
>                 bNumImageSizePatterns               5
>                 wWidth( 0)                        640
>                 wHeight( 0)                       480
>                 wWidth( 1)                        320
>                 wHeight( 1)                       240
>                 wWidth( 2)                        160
>                 wHeight( 2)                       120
>                 wWidth( 3)                        352
>                 wHeight( 3)                       288
>                 wWidth( 4)                        176
>                 wHeight( 4)                       144
>                 bNumCompressionPatterns             5
>               VideoStreaming Interface Descriptor:
>                 bLength                            27
>                 bDescriptorType                    36
>                 bDescriptorSubtype                  4
>         (FORMAT_UNCOMPRESSED)
>                 bFormatIndex                        2
>                 bNumFrameDescriptors                5
>                 guidFormat
>         {59555932-0000-1000-8000-00aa00389b71}
>                 bBitsPerPixel                      16
>                 bDefaultFrameIndex                  1
>                 bAspectRatioX                       0
>                 bAspectRatioY                       0
>                 bmInterlaceFlags                 0x00
>                   Interlaced stream or variable: No
>                   Fields per frame: 1 fields
>                   Field 1 first: No
>                   Field pattern: Field 1 only
>                   bCopyProtect                      0
>               VideoStreaming Interface Descriptor:
>                 bLength                            38
>                 bDescriptorType                    36
>                 bDescriptorSubtype                  5
>         (FRAME_UNCOMPRESSED)
>                 bFrameIndex                         1
>                 bmCapabilities                   0x01
>                   Still image supported
>                 wWidth                            640
>                 wHeight                           480
>                 dwMinBitRate                   912384
>                 dwMaxBitRate                   912384
>                 dwMaxVideoFrameBufferSize      614400
>                 dwDefaultFrameInterval         333333
>                 bFrameIntervalType                  3
>                 dwFrameInterval( 0)            333333
>                 dwFrameInterval( 1)            666666
>                 dwFrameInterval( 2)           1000000
>               VideoStreaming Interface Descriptor:
>                 bLength                            38
>                 bDescriptorType                    36
>                 bDescriptorSubtype                  5
>         (FRAME_UNCOMPRESSED)
>                 bFrameIndex                         2
>                 bmCapabilities                   0x01
>                   Still image supported
>                 wWidth                            320
>                 wHeight                           240
>                 dwMinBitRate                   912384
>                 dwMaxBitRate                   912384
>                 dwMaxVideoFrameBufferSize      230400
>                 dwDefaultFrameInterval         333333
>                 bFrameIntervalType                  3
>                 dwFrameInterval( 0)            333333
>                 dwFrameInterval( 1)            666666
>                 dwFrameInterval( 2)           1000000
>               VideoStreaming Interface Descriptor:
>                 bLength                            38
>                 bDescriptorType                    36
>                 bDescriptorSubtype                  5
>         (FRAME_UNCOMPRESSED)
>                 bFrameIndex                         3
>                 bmCapabilities                   0x01
>                   Still image supported
>                 wWidth                            160
>                 wHeight                           120
>                 dwMinBitRate                   912384
>                 dwMaxBitRate                   912384
>                 dwMaxVideoFrameBufferSize       57600
>                 dwDefaultFrameInterval         333333
>                 bFrameIntervalType                  3
>                 dwFrameInterval( 0)            333333
>                 dwFrameInterval( 1)            666666
>                 dwFrameInterval( 2)           1000000
>               VideoStreaming Interface Descriptor:
>                 bLength                            38
>                 bDescriptorType                    36
>                 bDescriptorSubtype                  5
>         (FRAME_UNCOMPRESSED)
>                 bFrameIndex                         4
>                 bmCapabilities                   0x01
>                   Still image supported
>                 wWidth                            352
>                 wHeight                           288
>                 dwMinBitRate                   912384
>                 dwMaxBitRate                   912384
>                 dwMaxVideoFrameBufferSize      304128
>                 dwDefaultFrameInterval         333333
>                 bFrameIntervalType                  3
>                 dwFrameInterval( 0)            333333
>                 dwFrameInterval( 1)            666666
>                 dwFrameInterval( 2)           1000000
>               VideoStreaming Interface Descriptor:
>                 bLength                            38
>                 bDescriptorType                    36
>                 bDescriptorSubtype                  5
>         (FRAME_UNCOMPRESSED)
>                 bFrameIndex                         5
>                 bmCapabilities                   0x01
>                   Still image supported
>                 wWidth                            176
>                 wHeight                           144
>                 dwMinBitRate                   912384
>                 dwMaxBitRate                   912384
>                 dwMaxVideoFrameBufferSize       76032
>                 dwDefaultFrameInterval         333333
>                 bFrameIntervalType                  3
>                 dwFrameInterval( 0)            333333
>                 dwFrameInterval( 1)            666666
>                 dwFrameInterval( 2)           1000000
>               VideoStreaming Interface Descriptor:
>                 bLength                            26
>                 bDescriptorType                    36
>                 bDescriptorSubtype                  3
>         (STILL_IMAGE_FRAME)
>                 bEndpointAddress                    0
>                 bNumImageSizePatterns               5
>                 wWidth( 0)                        640
>                 wHeight( 0)                       480
>                 wWidth( 1)                        320
>                 wHeight( 1)                       240
>                 wWidth( 2)                        160
>                 wHeight( 2)                       120
>                 wWidth( 3)                        352
>                 wHeight( 3)                       288
>                 wWidth( 4)                        176
>                 wHeight( 4)                       144
>                 bNumCompressionPatterns             5
>             Interface Descriptor:
>               bLength                 9
>               bDescriptorType         4
>               bInterfaceNumber        1
>               bAlternateSetting       1
>               bNumEndpoints           1
>               bInterfaceClass        14 Video
>               bInterfaceSubClass      2 Video Streaming
>               bInterfaceProtocol      0
>               iInterface              0
>               Endpoint Descriptor:
>                 bLength                 7
>                 bDescriptorType         5
>                 bEndpointAddress     0x81  EP 1 IN
>                 bmAttributes            5
>                   Transfer Type            Isochronous
>                   Synch Type               Asynchronous
>                   Usage Type               Data
>                 wMaxPacketSize     0x1400  3x 0 bytes
>                 bInterval               1
>         Device Qualifier (for other device speed):
>           bLength                10
>           bDescriptorType         6
>           bcdUSB               2.00
>           bDeviceClass            0 (Defined at Interface level)
>           bDeviceSubClass         0
>           bDeviceProtocol         0
>           bMaxPacketSize0        64
>           bNumConfigurations      1
>         Device Status:     0x0000
>           (Bus Powered)
Can you try
luvcview -d /dev/video0 -f jpg -s 640x480
you need to specify the image format with luvcview :)
luvcview -L 
list all format framerate size available
regards
-- 
Michel Xhaard
http://mxhaard.free.fr


From felix at derklecks.de  Tue Oct 16 18:21:00 2007
From: felix at derklecks.de (=?ISO-8859-1?Q?Felix_M=F6ller?=)
Date: Tue, 16 Oct 2007 18:21:00 +0200
Subject: [Linux-uvc-devel] apple isight problem
In-Reply-To: <47142128.2080203@pobox.com>
References: <471224B7.6030700@pobox.com> <47124D77.5040209@derklecks.de>
	<47142128.2080203@pobox.com>
Message-ID: <4714E4EC.80801@derklecks.de>

Hi,

> Thanks for the suggestion.  I've tried your command, same problem. 
> 
> Are you using a different kernel, or maybe some different setup in the
> kernel config?  Mine is 2.6.22.7 with the mactel patches applied.
I am running the default openSUSE 10.3 kernel (2.6.22.9-0.4-default).

> Or maybe the firmware is different?  The version of AppleUSBVideoSupport
> I'm using is 86712 bytes, dated 2007-05-24 and came from
> System/Library/Extensions/IOUSBFamily.kext/Contents/PlugIns/AppleUSBVideoSupport.kext/Contents/MacOS/AppleUSBVideoSupport
# md5sum /lib/firmware/AppleUSBVideoSupport
8b78709d02d3584f40cc041db9eecfe8  /lib/firmware/AppleUSBVideoSupport

> Any other suggestions gratefully accepted?
Maybe you should built a more recent mplayer version. Yours has a
copyright of 2006 so it is quiet old.

You should look whether .mplayer/config influences your mplayer.

HTH
Felix M?ller


From michael.kromer at computergmbh.de  Tue Oct 16 20:24:18 2007
From: michael.kromer at computergmbh.de (Michael E. Kromer)
Date: Tue, 16 Oct 2007 20:24:18 +0200
Subject: [Linux-uvc-devel] uvcvideo (svn133) with Acer Crystal
	Eye	webcam (Travelmate 7720G)
In-Reply-To: <200710161810.48311.mxhaard@magic.fr>
References: <1192542873.9391.5.camel@medozasmobile.computergmbh.de>
	<200710161810.48311.mxhaard@magic.fr>
Message-ID: <1192559058.24350.6.camel@medozasmobile.computergmbh.de>

> Can you try
> luvcview -d /dev/video0 -f jpg -s 640x480
> you need to specify the image format with luvcview :)
> luvcview -L 
> list all format framerate size available
> regards

already tried that - using luvcview-20070512

luvcview version 0.2.1 
Video driver: x11
A window manager is available
video /dev/video0 
/dev/video0 does not support read i/o
{ pixelformat = 'MJPG', description = 'MJPEG' }
{ discrete: width = 640, height = 480 }
        Time interval between frame: 1/30, 1/15, 1/10, 
{ discrete: width = 320, height = 240 }
        Time interval between frame: 1/30, 1/15, 1/10, 
{ discrete: width = 160, height = 120 }
        Time interval between frame: 1/30, 1/15, 1/10, 
{ discrete: width = 352, height = 288 }
        Time interval between frame: 1/30, 1/15, 1/10, 
{ discrete: width = 176, height = 144 }
        Time interval between frame: 1/30, 1/15, 1/10, 
{ pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
{ discrete: width = 640, height = 480 }
        Time interval between frame: 1/30, 1/15, 1/10, 
{ discrete: width = 320, height = 240 }
        Time interval between frame: 1/30, 1/15, 1/10, 
{ discrete: width = 160, height = 120 }
        Time interval between frame: 1/30, 1/15, 1/10, 
{ discrete: width = 352, height = 288 }
        Time interval between frame: 1/30, 1/15, 1/10, 
{ discrete: width = 176, height = 144 }
        Time interval between frame: 1/30, 1/15, 1/10, 

i tried 
luvcview -d /dev/video0 -f jpg -s 640x480
luvcview -d /dev/video0 -f MJPEG -s 640x480
luvcview -d /dev/video0 -f YUYV -s 640x480
and also with 320x240

always the same error:

luvcview version 0.2.1 
Video driver: x11
A window manager is available
video /dev/video0 
Unable to set format: 5.
 Init v4L2 failed !! exit fatal 

regards

mike
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: This is a digitally signed message part
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071016/8560a37a/attachment.pgp>

From laurent.pinchart at skynet.be  Tue Oct 16 20:57:22 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 16 Oct 2007 20:57:22 +0200
Subject: [Linux-uvc-devel] uvcvideo (svn133) with Acer Crystal Eye
	webcam (Travelmate 7720G)
In-Reply-To: <1192542873.9391.5.camel@medozasmobile.computergmbh.de>
References: <1192542873.9391.5.camel@medozasmobile.computergmbh.de>
Message-ID: <200710162057.22825.laurent.pinchart@skynet.be>

Hi Michael,

On Tuesday 16 October 2007, Michael E. Kromer wrote:
> Hi all,
>
>         I've just received a new notebook from my employer, and i was
>         trying to get my webcam running, as i would need to use it with
>         ekiga. somehow it simply just doesnt work - maybe its unsupported at
>         the moment? 
>
>         i already tried uvcvideo svn 133, no change. OS is opensuse 10.3
>         final i586.
>
>         funny thing although is i get the following (dmesg) with
>         reregistering uvcvideo:
>
>         usbcore: deregistering interface driver uvcvideo
>         uvcvideo: Found UVC 1.00 device Acer Crystal Eye webcam
>         (5986:0102)
>         usbcore: registered new interface driver uvcvideo
>         USB Video Class driver (v0.1.0)
>
>         but then, when i try to open it up with ekiga, i simply get (dmesg):
>
>         uvcvideo: Failed to query (130) UVC control 1 (unit 0) : 2 (exp.
>         26).
>
>         i also tried to receive use different webcam software (gqcam,
>         wxcam, for example) - all with same result.
>
>         i even tried luvcview (manually compiled).. same .. output:
>
>         uvcview verion 0.1.4
>         Video driver: x11
>         A window manager is available
>         video /dev/video0
>         Unable to set format: 5.
>          Init v4L2 failed !! exit fatal
>
>         --
>
>         Any clues?

Please try the attached patch. I'll commit it if it fixes your problem.

Thanks for the detailed report.

Best regards,

Laurent Pinchart
-------------- next part --------------
A non-text attachment was scrubbed...
Name: crystaleye.diff
Type: text/x-diff
Size: 696 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071016/847d7f03/attachment.diff>

From laurent.pinchart at skynet.be  Tue Oct 16 20:59:08 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 16 Oct 2007 20:59:08 +0200
Subject: [Linux-uvc-devel] Manual focus/autofocus support status for the
	Logitech Quickcam Pro series
In-Reply-To: <47149DA4.4030201@absence.it>
References: <47149DA4.4030201@absence.it>
Message-ID: <200710162059.08835.laurent.pinchart@skynet.be>

Hi Marco,

On Tuesday 16 October 2007, Marco wrote:
> Hello,
> I'd like to upgrade my webcam with a brand new Quickcam Pro for
> Notebooks (046d:0991), but I've read about the software autofocus system
> and I'm a little bit confused. Probably autofocus will never be
> implemented but is it already possible a manual focus through the uvc
> driver? Or there will be a manual focus support anytime soon?

Autofocus will never be implemented in the driver but it might be implemented 
in userspace. This is currently out of scope of the Linux UVC driver project 
though.

Manual focus works but currently requires a userspace utility to setup 
vendor-specific controls. The utility will be available soon.

Best regards,

Laurent Pinchart


From michael.kromer at computergmbh.de  Tue Oct 16 21:20:13 2007
From: michael.kromer at computergmbh.de (Michael E. Kromer)
Date: Tue, 16 Oct 2007 21:20:13 +0200
Subject: [Linux-uvc-devel] uvcvideo (svn133) with Acer Crystal
	Eye	webcam (Travelmate 7720G)
In-Reply-To: <200710162057.22825.laurent.pinchart@skynet.be>
References: <1192542873.9391.5.camel@medozasmobile.computergmbh.de>
	<200710162057.22825.laurent.pinchart@skynet.be>
Message-ID: <1192562413.24350.13.camel@medozasmobile.computergmbh.de>

Hi Laurent,

On Tue, 2007-10-16 at 20:57 +0200, Laurent Pinchart wrote:
> Hi Michael,
> 
> On Tuesday 16 October 2007, Michael E. Kromer wrote:
> > Hi all,
> >
> >         I've just received a new notebook from my employer, and i was
> >         trying to get my webcam running, as i would need to use it with
> >         ekiga. somehow it simply just doesnt work - maybe its unsupported at
> >         the moment? 
> >
> >         i already tried uvcvideo svn 133, no change. OS is opensuse 10.3
> >         final i586.
> >
> >         funny thing although is i get the following (dmesg) with
> >         reregistering uvcvideo:
> >
> >         usbcore: deregistering interface driver uvcvideo
> >         uvcvideo: Found UVC 1.00 device Acer Crystal Eye webcam
> >         (5986:0102)
> >         usbcore: registered new interface driver uvcvideo
> >         USB Video Class driver (v0.1.0)
> >
> >         but then, when i try to open it up with ekiga, i simply get (dmesg):
> >
> >         uvcvideo: Failed to query (130) UVC control 1 (unit 0) : 2 (exp.
> >         26).
> >
> >         i also tried to receive use different webcam software (gqcam,
> >         wxcam, for example) - all with same result.
> >
> >         i even tried luvcview (manually compiled).. same .. output:
> >
> >         uvcview verion 0.1.4
> >         Video driver: x11
> >         A window manager is available
> >         video /dev/video0
> >         Unable to set format: 5.
> >          Init v4L2 failed !! exit fatal
> >
> >         --
> >
> >         Any clues?
> 
> Please try the attached patch. I'll commit it if it fixes your problem.
> 
> Thanks for the detailed report.
> 
> Best regards,
> 
> Laurent Pinchart

perfect! runs smoothly and like a charm!
i now can see everything very nice in luvcview - however ekiga cant
handle it - tried but it remains to have no picture ... any suggestion
here?

thanks again!
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: This is a digitally signed message part
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071016/ec443ba2/attachment.pgp>

From laurent.pinchart at skynet.be  Tue Oct 16 21:39:47 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 16 Oct 2007 21:39:47 +0200
Subject: [Linux-uvc-devel]
	=?utf-8?q?uvcvideo_=28svn133=29_with_Acer_Cryst?=
	=?utf-8?q?al_Eye=09webcam_=28Travelmate_7720G=29?=
In-Reply-To: <1192562413.24350.13.camel@medozasmobile.computergmbh.de>
References: <1192542873.9391.5.camel@medozasmobile.computergmbh.de>
	<200710162057.22825.laurent.pinchart@skynet.be>
	<1192562413.24350.13.camel@medozasmobile.computergmbh.de>
Message-ID: <200710162139.48149.laurent.pinchart@skynet.be>

Hi Michael,

On Tuesday 16 October 2007, Michael E. Kromer wrote:
> On Tue, 2007-10-16 at 20:57 +0200, Laurent Pinchart wrote:
> > On Tuesday 16 October 2007, Michael E. Kromer wrote:
> > > Hi all,
> > >
> > >         I've just received a new notebook from my employer, and i was
> > >         trying to get my webcam running, as i would need to use it with
> > >         ekiga. somehow it simply just doesnt work - maybe its
> > > unsupported at the moment?
> > >
> > >         i already tried uvcvideo svn 133, no change. OS is opensuse
> > > 10.3 final i586.
> > >
> > >         funny thing although is i get the following (dmesg) with
> > >         reregistering uvcvideo:
> > >
> > >         usbcore: deregistering interface driver uvcvideo
> > >         uvcvideo: Found UVC 1.00 device Acer Crystal Eye webcam
> > >         (5986:0102)
> > >         usbcore: registered new interface driver uvcvideo
> > >         USB Video Class driver (v0.1.0)
> > >
> > >         but then, when i try to open it up with ekiga, i simply get
> > > (dmesg):
> > >
> > >         uvcvideo: Failed to query (130) UVC control 1 (unit 0) : 2
> > > (exp. 26).
> > >
> > >         i also tried to receive use different webcam software (gqcam,
> > >         wxcam, for example) - all with same result.
> > >
> > >         i even tried luvcview (manually compiled).. same .. output:
> > >
> > >         uvcview verion 0.1.4
> > >         Video driver: x11
> > >         A window manager is available
> > >         video /dev/video0
> > >         Unable to set format: 5.
> > >          Init v4L2 failed !! exit fatal
> > >
> > >         --
> > >
> > >         Any clues?
> >
> > Please try the attached patch. I'll commit it if it fixes your problem.
> >
> > Thanks for the detailed report.
> >
> > Best regards,
> >
> > Laurent Pinchart
>
> perfect! runs smoothly and like a charm!

Ok. Committed.

> i now can see everything very nice in luvcview - however ekiga cant
> handle it - tried but it remains to have no picture ... any suggestion
> here?

Make sure you're using Ekiga 2.0.3 or newer (from the top of my head). 
Upgrading to the latest version won't hurt. Check that you selected V4L2 and 
not V4L in the Ekiga configuration dialog. Does the kernel log report 
anything wrong when you run Ekiga ?

Best regards,

Laurent Pinchart


From michael.kromer at computergmbh.de  Tue Oct 16 21:54:01 2007
From: michael.kromer at computergmbh.de (Michael E. Kromer)
Date: Tue, 16 Oct 2007 21:54:01 +0200
Subject: [Linux-uvc-devel] uvcvideo (svn133) with Acer
	Crystal	Eye	webcam (Travelmate 7720G)
In-Reply-To: <200710162139.48149.laurent.pinchart@skynet.be>
References: <1192542873.9391.5.camel@medozasmobile.computergmbh.de>
	<200710162057.22825.laurent.pinchart@skynet.be>
	<1192562413.24350.13.camel@medozasmobile.computergmbh.de>
	<200710162139.48149.laurent.pinchart@skynet.be>
Message-ID: <1192564441.24350.18.camel@medozasmobile.computergmbh.de>

Hi Laurant,

On Tue, 2007-10-16 at 21:39 +0200, Laurent Pinchart wrote:
> Hi Michael,
> 
> On Tuesday 16 October 2007, Michael E. Kromer wrote:
> > On Tue, 2007-10-16 at 20:57 +0200, Laurent Pinchart wrote:
> > > On Tuesday 16 October 2007, Michael E. Kromer wrote:
> > > > Hi all,
> > > >
> > > >         I've just received a new notebook from my employer, and i was
> > > >         trying to get my webcam running, as i would need to use it with
> > > >         ekiga. somehow it simply just doesnt work - maybe its
> > > > unsupported at the moment?
> > > >
> > > >         i already tried uvcvideo svn 133, no change. OS is opensuse
> > > > 10.3 final i586.
> > > >
> > > >         funny thing although is i get the following (dmesg) with
> > > >         reregistering uvcvideo:
> > > >
> > > >         usbcore: deregistering interface driver uvcvideo
> > > >         uvcvideo: Found UVC 1.00 device Acer Crystal Eye webcam
> > > >         (5986:0102)
> > > >         usbcore: registered new interface driver uvcvideo
> > > >         USB Video Class driver (v0.1.0)
> > > >
> > > >         but then, when i try to open it up with ekiga, i simply get
> > > > (dmesg):
> > > >
> > > >         uvcvideo: Failed to query (130) UVC control 1 (unit 0) : 2
> > > > (exp. 26).
> > > >
> > > >         i also tried to receive use different webcam software (gqcam,
> > > >         wxcam, for example) - all with same result.
> > > >
> > > >         i even tried luvcview (manually compiled).. same .. output:
> > > >
> > > >         uvcview verion 0.1.4
> > > >         Video driver: x11
> > > >         A window manager is available
> > > >         video /dev/video0
> > > >         Unable to set format: 5.
> > > >          Init v4L2 failed !! exit fatal
> > > >
> > > >         --
> > > >
> > > >         Any clues?
> > >
> > > Please try the attached patch. I'll commit it if it fixes your problem.
> > >
> > > Thanks for the detailed report.
> > >
> > > Best regards,
> > >
> > > Laurent Pinchart
> >
> > perfect! runs smoothly and like a charm!
> 
> Ok. Committed.
> 
> > i now can see everything very nice in luvcview - however ekiga cant
> > handle it - tried but it remains to have no picture ... any suggestion
> > here?
> 
> Make sure you're using Ekiga 2.0.3 or newer (from the top of my head). 
> Upgrading to the latest version won't hurt. Check that you selected V4L2 and 
> not V4L in the Ekiga configuration dialog. Does the kernel log report 
> anything wrong when you run Ekiga ?
> 
> Best regards,
> 
> Laurent Pinchart

That was it! I used the packages from
http://ekiga.org/index.php?rub=5&path=opensuse/10.3_x86 (especially the
pwlib-plugins-v4l2 package was it which has given me support of v4l2 and
now my webcam is running smoothly also in ekiga!

by default opensuse does not ship v4l2 support for ekiga.

thank you very much Laurent!

Best regards,

Michael
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: This is a digitally signed message part
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071016/75eb570d/attachment.pgp>

From richard at 2007.atterer.net  Wed Oct 17 00:00:12 2007
From: richard at 2007.atterer.net (Richard Atterer)
Date: Wed, 17 Oct 2007 00:00:12 +0200
Subject: [Linux-uvc-devel] Manual focus/autofocus support status for	the
	Logitech Quickcam Pro series
In-Reply-To: <200710162059.08835.laurent.pinchart@skynet.be>
References: <47149DA4.4030201@absence.it>
	<200710162059.08835.laurent.pinchart@skynet.be>
Message-ID: <20071016220012.GA11062@vilya>

On Tue, Oct 16, 2007 at 08:59:08PM +0200, Laurent Pinchart wrote:
> Autofocus will never be implemented in the driver but it might be 
> implemented in userspace. This is currently out of scope of the Linux UVC 
> driver project though.

There are two points about implementing autofocus in userspace which I'm 
not sure about:

* An autofocus daemon/program will need to have access to the video stream 
together with the program which uses the webcam. Is this possible? My 
experiments with luvcview and mplayer have failed, the second program 
always appears to get EBUSY.

* Ideally, the autofocus should only be active when another program is 
actually using the camera, to avoid wasting CPU/power resources.

What are your thoughts on how AF could be implemented? So far, my only idea 
is some kind of LD_PRELOAD hack, but that's ugly. :-/

Cheers,

  Richard

-- 
  __   _
  |_) /|  Richard Atterer     |  GnuPG key: 888354F7
  | \/?|  http://atterer.net  |  08A9 7B7D 3D13 3EF2 3D25  D157 79E6 F6DC 8883 54F7
  ? '` ?


From brandon at ifup.org  Wed Oct 17 05:52:20 2007
From: brandon at ifup.org (Brandon Philips)
Date: Tue, 16 Oct 2007 20:52:20 -0700
Subject: [Linux-uvc-devel] Manual focus/autofocus support status for	the
	Logitech Quickcam Pro series
In-Reply-To: <20071016220012.GA11062@vilya>
References: <47149DA4.4030201@absence.it>
	<200710162059.08835.laurent.pinchart@skynet.be>
	<20071016220012.GA11062@vilya>
Message-ID: <20071017035220.GF4498@ifup.org>

On 00:00 Wed 17 Oct 2007, Richard Atterer wrote:
> On Tue, Oct 16, 2007 at 08:59:08PM +0200, Laurent Pinchart wrote:
> > Autofocus will never be implemented in the driver but it might be 
> > implemented in userspace. This is currently out of scope of the Linux UVC 
> > driver project though.
> 
> There are two points about implementing autofocus in userspace which I'm 
> not sure about:
> 
> * An autofocus daemon/program will need to have access to the video stream 
> together with the program which uses the webcam. Is this possible? My 
> experiments with luvcview and mplayer have failed, the second program 
> always appears to get EBUSY.

Yes, this is expected in the V4L2 spec.  Only one process can have the
device streaming at any given point.  Someone needs to write a daemon
for V4L2 devices to multiplex the frames.  Something like PulseAudio for
video.

	Brandon


From laurent.pinchart at skynet.be  Wed Oct 17 09:07:47 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 17 Oct 2007 09:07:47 +0200
Subject: [Linux-uvc-devel]
	=?iso-8859-1?q?Manual_focus/autofocus_support_s?=
	=?iso-8859-1?q?tatus_for=09the_Logitech_Quickcam_Pro_series?=
In-Reply-To: <20071017035220.GF4498@ifup.org>
References: <47149DA4.4030201@absence.it> <20071016220012.GA11062@vilya>
	<20071017035220.GF4498@ifup.org>
Message-ID: <200710170907.48070.laurent.pinchart@skynet.be>

On Wednesday 17 October 2007 05:52, Brandon Philips wrote:
> On 00:00 Wed 17 Oct 2007, Richard Atterer wrote:
> > On Tue, Oct 16, 2007 at 08:59:08PM +0200, Laurent Pinchart wrote:
> > > Autofocus will never be implemented in the driver but it might be
> > > implemented in userspace. This is currently out of scope of the Linux
> > > UVC driver project though.
> >
> > There are two points about implementing autofocus in userspace which I'm
> > not sure about:
> >
> > * An autofocus daemon/program will need to have access to the video
> > stream together with the program which uses the webcam. Is this possible?
> > My experiments with luvcview and mplayer have failed, the second program
> > always appears to get EBUSY.
>
> Yes, this is expected in the V4L2 spec.  Only one process can have the
> device streaming at any given point.  Someone needs to write a daemon
> for V4L2 devices to multiplex the frames.  Something like PulseAudio for
> video.

What we miss is a proper multimedia framework for Linux. There are several 
competeting projects (xine, gstreamer, nmm, ...). Any userspace module (image 
enhancement, software autofocus, ...) would currently have to be implemented 
for each framework.

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Oct 17 09:18:00 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 17 Oct 2007 09:18:00 +0200
Subject: [Linux-uvc-devel] Finepix E550 Settings
In-Reply-To: <001201c8108c$34ac44b0$b200a8c0@fastglobale.locale>
References: <004d01c80f0f$36c7f7e0$b200a8c0@fastglobale.locale>
	<200710161306.14333.laurent.pinchart@skynet.be>
	<001201c8108c$34ac44b0$b200a8c0@fastglobale.locale>
Message-ID: <200710170918.00347.laurent.pinchart@skynet.be>

Hi Claudio,

> > On Tuesday 16 October 2007, Claudio Montemaggiore - FAST S.p.A. wrote:
> > > > On Monday 15 October 2007, Claudio Montemaggiore - FAST S.p.A. wrote:
> > > > > Hi,
> > > > > I've cross compiled UVC driver for ARM arch, using kernel 2.6.14.
> > > > > I'm using uvccapture to get snapshot by a FinePix E550 camera in
> > > > > webcam mode.
> > > > >
> > > > > After the command ./uvccapture -v , the output is:
> > > > >
> > > > > Using videodevice: /dev/video0
> > > > > Saving images to: snap.jpg
> > > > > Image size: 320x240
> > > > > Taking snapshot every 0 seconds
> > > > > Taking images using mmap
> > > > >  format asked unavailable get width 352 height 288
> > > > > Resetting camera settings
> > > > > ioctl querycontrol error 22
> > > > > ioctl querycontrol error 22
> > > > > ioctl querycontrol error 22
> > > > > ioctl querycontrol error 22
> > > > > ioctl querycontrol error 22
> > > > > Camera brightness level is -1
> > > > > ioctl querycontrol error 22
> > > > > Camera contrast level is -1
> > > > > ioctl querycontrol error 22
> > > > > Camera saturation level is -1
> > > > > ioctl querycontrol error 22
> > > > > Camera gain level is -1
> > > > > Saving image to: snap.jpg
> > > > >
> > > > >
> > > > > I get the snap, but there are these errors about the camera
> > > > > settings.
> > > > > How can I fix it?
> > > >
> > > > What does uvcvideo report in dmesg ?
> > >
> > > dmesg report is(after inserting and removing more times the camera):
> > >
> > >
> > > usb 2-1: new full speed USB device using isp116x-hcd and address 6
> > > scsi3 : SCSI emulation for USB Mass Storage devices
> > > usb-storage: device found at 6
> > > usb-storage: waiting for device to settle before scanning
> > >   Vendor: FUJIFILM  Model: USB-DRIVEUNIT     Rev: 1.00
> > >   Type:   Direct-Access                      ANSI SCSI revision: 00
> > > Attached scsi removable disk sdb at scsi3, channel 0, id 0, lun 0
> > > Attached scsi generic sg1 at scsi3, channel 0, id 0, lun 0,  type 0
> > > usb-storage: device scan complete
> > > usb 2-1: USB disconnect, address 6
> > > usb 2-1: new full speed USB device using isp116x-hcd and address 7
> > > uvcvideo: Found UVC 1.00 device USB Web Camera (04cb:0172)
> > > usb 2-1: USB disconnect, address 7
> >
> > [snip]
> >
> > Please post the dmesg output after running uvccapture.
>
> After the ./uvccapture -v command, no other messagge is available in the
> dmesg output.
> I have only the information provided by the -v option in uvccapture
> command.

Then there's probably nothing to worry about. uvccapture tries to query 
controls that are not supported by the devices. This isn't a fatal error.

> Also,only one time dmesg found the Vendor and Model  information.
> So the information for dmesg I have is:
> uvcvideo: Found UVC 1.00 device USB Web Camera (04cb:0172)
> usbcore: registered new driver uvcvideo
> USB Video Class driver (v0.1.0)

Please send replies to the list (you can still CC me).

Best regards,

Laurent Pinchart


From axel.lin at gmail.com  Wed Oct 17 11:38:31 2007
From: axel.lin at gmail.com (axel lin)
Date: Wed, 17 Oct 2007 17:38:31 +0800
Subject: [Linux-uvc-devel] Does Linux-uvc support em2760?
Message-ID: <427d64720710170238m4922e387ycbb33433877ce5bf@mail.gmail.com>

hi list,
It is mentioned here (
http://mcentral.de/wiki/index.php/Em2880#Status.2FChangelog)
that the em2760 is supposed to be uvc compatible but the uvc driver doesn't
work with it yet.
The status is updated on 2007-03-28.
How is current status of em2760 support?

Best Regards,
Axel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071017/0cdddf6f/attachment.html>

From laurent.pinchart at skynet.be  Wed Oct 17 11:44:37 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 17 Oct 2007 11:44:37 +0200
Subject: [Linux-uvc-devel] Does Linux-uvc support em2760?
In-Reply-To: <427d64720710170238m4922e387ycbb33433877ce5bf@mail.gmail.com>
References: <427d64720710170238m4922e387ycbb33433877ce5bf@mail.gmail.com>
Message-ID: <200710171144.37513.laurent.pinchart@skynet.be>

On Wednesday 17 October 2007 11:38, axel lin wrote:
> hi list,
> It is mentioned here (
> http://mcentral.de/wiki/index.php/Em2880#Status.2FChangelog)
> that the em2760 is supposed to be uvc compatible but the uvc driver doesn't
> work with it yet.
> The status is updated on 2007-03-28.
> How is current status of em2760 support?

I received success reports in the meantime, so the EM2760 should work now with 
the Linux UVC driver. It might still have some suspend/resume issues though 
but I haven't been able to work on them as my requests for a device sample 
haven't been answered positively.

Best Regards,

Laurent Pinchart


From brandon at ifup.org  Wed Oct 17 11:49:15 2007
From: brandon at ifup.org (Brandon Philips)
Date: Wed, 17 Oct 2007 02:49:15 -0700
Subject: [Linux-uvc-devel] Does Linux-uvc support em2760?
In-Reply-To: <427d64720710170238m4922e387ycbb33433877ce5bf@mail.gmail.com>
References: <427d64720710170238m4922e387ycbb33433877ce5bf@mail.gmail.com>
Message-ID: <20071017094915.GP4498@ifup.org>

On 17:38 Wed 17 Oct 2007, axel lin wrote:
> It is mentioned here (
> http://mcentral.de/wiki/index.php/Em2880#Status.2FChangelog)
> that the em2760 is supposed to be uvc compatible but the uvc driver doesn't
> work with it yet.
> The status is updated on 2007-03-28.
>
> How is current status of em2760 support?

Apparently it works:
 http://mcentral.de/pipermail/em28xx/2007-June/000534.html

Do you have one of these devices?  Does it work for you using the UVC
driver?

Thanks,

	Brandon


From t.st1 at gmx.net  Wed Oct 17 12:03:53 2007
From: t.st1 at gmx.net (Tom St)
Date: Wed, 17 Oct 2007 12:03:53 +0200
Subject: [Linux-uvc-devel] Invitation for testers of mjpg-streamer
Message-ID: <4715DE09.6070408@gmx.net>

Hello,
I am looking for testers of the uvc-streamer successor, called
"mjpg-streamer" [1]. Especially someone with a pan/tilt webcam is
needed, because I tried to implement pan/tilt without having a camera to
test it. So, if you want to help me improving mjpg-streamer, please try
to compile and give me some feedback.

Kind regards and many thanks,
Tom

P.S.:

    * Please use the most current svn version of the Linux-UVC driver >=
      #132. I know, that #131 had a bug, which was triggered by sending
      to many ioctls while streaming.
    * Please check if your webcam is able to stream M-JPEG. The YUV mode
      is not supported, because it would require compressing the JPG
      data by software, which is not fast enough for embedded machines.
      You may use luvcview to check if your camera supports hardware
      compression to M-JPEG stream.

Links:
[1] http://mjpg-streamer.sf.net


From tharindunix at gmail.com  Wed Oct 17 18:07:26 2007
From: tharindunix at gmail.com (Tharindu Rukshan Bamunuarachchi)
Date: Wed, 17 Oct 2007 16:07:26 +0000
Subject: [Linux-uvc-devel] Motorola PCS in E6 Mobile Phone
In-Reply-To: <200710161627.24101.laurent.pinchart@skynet.be>
References: <c49434130710160719w7ffcec7flc14d8809b4724ec1@mail.gmail.com>
	<200710161627.24101.laurent.pinchart@skynet.be>
Message-ID: <c49434130710170907q384e15a3wc7a1e0af824f4bb1@mail.gmail.com>

Dear Laurent/All,

Thank you very much for quick reply.

Pls find attachment.

Best Regards,
Tharindu

On 10/16/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> Hi Tharindu,
>
> On Tuesday 16 October 2007 16:19, Tharindu Rukshan Bamunuarachchi wrote:
> > Recently I bought Motorola ROKO E6 mobile phone.
> > Which has inbuilt Web Camera.
> >
> > I have tried few drivers and your uvc driver finally detected my web
> > camera.
> >
> > Unfortunately, I got following error after connecting Web Camera.
> > So  I have used trace=15 feature and got more detailed info.
> >
> > It says ...
> >
> > "uvcvideo: No valid video chain found."
> >
> > I like to continue debugging and make it work.
> >
> > Can you pls help me to figure out what is the wrong with device
> detection.
> >
> >
> > [  938.420473] uvcvideo: Probing generic UVC device 7
> > [  938.420486] uvcvideo: Found format YUV 4:2:2 (YUYV).
> > [  938.420488] uvcvideo: - 352x288 (20.0 fps)
> > [  938.420489] uvcvideo: - 176x144 (20.0 fps)
> > [  938.420491] uvcvideo: - 640x480 (15.0 fps)
> > [  938.420492] uvcvideo: - 320x240 (20.0 fps)
> > [  938.420493] uvcvideo: - 160x120 (20.0 fps)
> > [  938.420499] uvcvideo: Found UVC 1.00 device Motorola USB Camera
> > (22b8:6006)
> > [  938.420503] uvcvideo: Added control
> > 00000000-0000-0000-0000-000000000101/2 to device 7 entity 5
> > [  938.420508] uvcvideo: Scanning UVC chain: OT 3 <- PU 5 <- SU 4 <- IT
> > 1<7>uvcvideo: Selector unit 4 input 1 isn't connected to an input
> terminal
> > [  938.420513] uvcvideo: No valid video chain found.
> > [  938.420529] usbcore: registered new interface driver uvcvideo
> > [  938.420531] USB Video Class driver (v0.1.0)
> >
> >
> > Is it impossible to use this in Linux env??
>
> Please post the output of 'lsusb -d 22b8:6006 -v' (with usbutils 0.72 or
> newer).
>
> Best regards,
>
> Laurent Pinchart
>



-- 
Tharindu Rukshan Bamunuarachchi
i want to believe it; unless otherwise
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071017/0c0952c0/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lsusb.output
Type: application/octet-stream
Size: 10801 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071017/0c0952c0/attachment.obj>

From laurent.pinchart at skynet.be  Wed Oct 17 22:35:10 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 17 Oct 2007 22:35:10 +0200
Subject: [Linux-uvc-devel] Motorola PCS in E6 Mobile Phone
In-Reply-To: <c49434130710170907q384e15a3wc7a1e0af824f4bb1@mail.gmail.com>
References: <c49434130710160719w7ffcec7flc14d8809b4724ec1@mail.gmail.com>
	<200710161627.24101.laurent.pinchart@skynet.be>
	<c49434130710170907q384e15a3wc7a1e0af824f4bb1@mail.gmail.com>
Message-ID: <200710172235.10189.laurent.pinchart@skynet.be>

Hi Tharindu,

On Wednesday 17 October 2007, Tharindu Rukshan Bamunuarachchi wrote:
> Dear Laurent/All,
>
> Thank you very much for quick reply.
>
> Pls find attachment.

Thanks. Please try the attached patch.

Best regards,

Laurent Pinchart
-------------- next part --------------
A non-text attachment was scrubbed...
Name: motorola.diff
Type: text/x-diff
Size: 6684 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071017/898d16e0/attachment.diff>

From tharindunix at gmail.com  Thu Oct 18 08:34:30 2007
From: tharindunix at gmail.com (Tharindu Rukshan Bamunuarachchi)
Date: Thu, 18 Oct 2007 06:34:30 +0000
Subject: [Linux-uvc-devel] Motorola PCS in E6 Mobile Phone
In-Reply-To: <200710172235.10189.laurent.pinchart@skynet.be>
References: <c49434130710160719w7ffcec7flc14d8809b4724ec1@mail.gmail.com>
	<200710161627.24101.laurent.pinchart@skynet.be>
	<c49434130710170907q384e15a3wc7a1e0af824f4bb1@mail.gmail.com>
	<200710172235.10189.laurent.pinchart@skynet.be>
Message-ID: <c49434130710172334y449092d7nc368d33bef64aff0@mail.gmail.com>

It worked for me.

It has detected device and created /dev/video0 device.

But when I tried to view camera through mplayer or camorama i got following
errors.

Am i using wrong program to view web cam. Do you recommend any user space
tool?

Are there any tool to gather device supported controls.

How can I disable any unsupported control

Seems to be I am at the edge ....

Cheers
Tharindu

[ 2819.611699] USB Video Class driver (v0.1.0)
[ 2823.130453] uvcvideo: Trying format 0x56595559 (YUYV): 640x480.
[ 2823.130461] uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
[ 2821.088800] uvcvideo: Trying format 0x32315659 (YV12): 640x480.
[ 2821.088802] uvcvideo: Unsupported format 0x32315659.
[ 2821.088820] uvcvideo: Trying format 0x32315559 (YU12): 640x480.
[ 2821.088821] uvcvideo: Unsupported format 0x32315559.
[ 2823.131346] uvcvideo: Trying format 0x59565955 (UYVY): 640x480.
[ 2823.131354] uvcvideo: Unsupported format 0x59565955.
[ 2823.131366] uvcvideo: Trying format 0x56595559 (YUYV): 640x480.
[ 2823.131368] uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
[ 2821.089815] uvcvideo: Trying format 0x56595559 (YUYV): 352x480.
[ 2821.089821] uvcvideo: Using default frame interval 50000.0 us (20.0 fps).
[ 2821.090561] uvcvideo: Trying format 0x56595559 (YUYV): 352x288.
[ 2821.090564] uvcvideo: Using default frame interval 50000.0 us (20.0 fps).
[ 2821.091519] uvcvideo: Control 0x00980909 not found.
[ 2821.092151] uvcvideo: Control 0x00980903 not found.
[ 2821.092207] uvcvideo: Control 0x00980902 not found.
[ 2821.092248] uvcvideo: Control 0x00980901 not found.


On 10/17/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> Hi Tharindu,
>
> On Wednesday 17 October 2007, Tharindu Rukshan Bamunuarachchi wrote:
> > Dear Laurent/All,
> >
> > Thank you very much for quick reply.
> >
> > Pls find attachment.
>
> Thanks. Please try the attached patch.
>
> Best regards,
>
> Laurent Pinchart
>
>


-- 
Tharindu Rukshan Bamunuarachchi
i want to believe it; unless otherwise
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071018/9baa0068/attachment.html>

From tharindunix at gmail.com  Thu Oct 18 08:35:17 2007
From: tharindunix at gmail.com (Tharindu Rukshan Bamunuarachchi)
Date: Thu, 18 Oct 2007 06:35:17 +0000
Subject: [Linux-uvc-devel] Motorola PCS in E6 Mobile Phone
In-Reply-To: <200710172235.10189.laurent.pinchart@skynet.be>
References: <c49434130710160719w7ffcec7flc14d8809b4724ec1@mail.gmail.com>
	<200710161627.24101.laurent.pinchart@skynet.be>
	<c49434130710170907q384e15a3wc7a1e0af824f4bb1@mail.gmail.com>
	<200710172235.10189.laurent.pinchart@skynet.be>
Message-ID: <c49434130710172335w57d2bbf7xb045159254ead10c@mail.gmail.com>

thank you very much for the patch.


On 10/17/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> Hi Tharindu,
>
> On Wednesday 17 October 2007, Tharindu Rukshan Bamunuarachchi wrote:
> > Dear Laurent/All,
> >
> > Thank you very much for quick reply.
> >
> > Pls find attachment.
>
> Thanks. Please try the attached patch.
>
> Best regards,
>
> Laurent Pinchart
>
>


-- 
Tharindu Rukshan Bamunuarachchi
i want to believe it; unless otherwise
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071018/b8a672c4/attachment.html>

From laurent.pinchart at skynet.be  Thu Oct 18 23:26:06 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 18 Oct 2007 23:26:06 +0200
Subject: [Linux-uvc-devel] Motorola PCS in E6 Mobile Phone
In-Reply-To: <c49434130710172334y449092d7nc368d33bef64aff0@mail.gmail.com>
References: <c49434130710160719w7ffcec7flc14d8809b4724ec1@mail.gmail.com>
	<200710172235.10189.laurent.pinchart@skynet.be>
	<c49434130710172334y449092d7nc368d33bef64aff0@mail.gmail.com>
Message-ID: <200710182326.06843.laurent.pinchart@skynet.be>

Hi Tharindu,

On Thursday 18 October 2007, Tharindu Rukshan Bamunuarachchi wrote:
> It worked for me.
>
> It has detected device and created /dev/video0 device.

Great. I committed the patch.

> But when I tried to view camera through mplayer or camorama i got following
> errors.

Camorama doesn't support V4L2. Mplayer had some trouble has well until 
recently, so upgrading to a new version might help.

> Am i using wrong program to view web cam. Do you recommend any user space
> tool?

I use luvcview and uvccapture for testing purpose.

> Are there any tool to gather device supported controls.

luvcview prints supported controls when run with -l. There might be other 
tools as well.

> How can I disable any unsupported control

How do you mean ?

> Seems to be I am at the edge ....

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Oct 19 01:13:38 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 19 Oct 2007 01:13:38 +0200
Subject: [Linux-uvc-devel] Invitation for testers of mjpg-streamer
In-Reply-To: <4715DE09.6070408@gmx.net>
References: <4715DE09.6070408@gmx.net>
Message-ID: <200710190113.38976.laurent.pinchart@skynet.be>

Hi Tom,

On Wednesday 17 October 2007, Tom St wrote:
> Hello,
> I am looking for testers of the uvc-streamer successor, called
> "mjpg-streamer" [1]. Especially someone with a pan/tilt webcam is
> needed, because I tried to implement pan/tilt without having a camera to
> test it. So, if you want to help me improving mjpg-streamer, please try
> to compile and give me some feedback.

Thanks for your work. I'll try to give it a test this weekend.

> Kind regards and many thanks,
> Tom
>
> P.S.:
>
>     * Please use the most current svn version of the Linux-UVC driver >=
>       #132. I know, that #131 had a bug, which was triggered by sending
>       to many ioctls while streaming.
>     * Please check if your webcam is able to stream M-JPEG. The YUV mode
>       is not supported, because it would require compressing the JPG
>       data by software, which is not fast enough for embedded machines.
>       You may use luvcview to check if your camera supports hardware
>       compression to M-JPEG stream.

Best regards,

Laurent Pinchart


From tharindunix at gmail.com  Fri Oct 19 10:42:44 2007
From: tharindunix at gmail.com (Tharindu Rukshan Bamunuarachchi)
Date: Fri, 19 Oct 2007 08:42:44 +0000
Subject: [Linux-uvc-devel] Motorola PCS in E6 Mobile Phone
In-Reply-To: <200710182326.06843.laurent.pinchart@skynet.be>
References: <c49434130710160719w7ffcec7flc14d8809b4724ec1@mail.gmail.com>
	<200710172235.10189.laurent.pinchart@skynet.be>
	<c49434130710172334y449092d7nc368d33bef64aff0@mail.gmail.com>
	<200710182326.06843.laurent.pinchart@skynet.be>
Message-ID: <c49434130710190142ma1337f8s6096e35337004acc@mail.gmail.com>

Dear Laurent/All,

l have tried luvcview. Unfortunately I got "divide error" in DMESG.
I am using preempt kernel in x86_64.

This is the command I have given to luvcview.
-----------------------------------------------------------
tharindu at latitude ~ $ luvcview -s 352x288 -i 15 -f yuv -w
luvcview version 0.2.1
 size width: 352 height: 288
 interval: 15 fps
Video driver: x11
A window manager is available
video /dev/video0

Stop asked
Segmentation fault
----------------------------------------------------------------------------


Any further attempt to run luvcview will generate .....
-----------------------------------------------------------------------------
tharindu at latitude ~ $ luvcview -s 352x288 -i 15 -f yuv -w
luvcview version 0.2.1
 size width: 352 height: 288
 interval: 15 fps
Video driver: x11
A window manager is available
video /dev/video0
Unable to set format: 16.
 Init v4L2 failed !! exit fatal


Any idea ??

Thankx
Tharindu




DMESG Output
=========
[  542.818247] divide error: 0000 [1] PREEMPT SMP
[  542.818251] CPU 1
[  542.818253] Modules linked in: uvcvideo compat_ioctl32 videodev
v4l1_compat v4l2_common snd_pcm_oss snd_mixer_oss snd_seq_dummy snd_seq_oss
snd_seq_midi_event snd_seq snd_seq_device rtc thermal nvidia(P) bcm43xx
firmware_class ieee80211softmac ieee80211 ieee80211_crypt battery button
processor snd_hda_intel video snd_pcm output snd_timer snd ac soundcore
snd_page_alloc sg tg3 nfs lockd sunrpc jfs reiserfs ext3 jbd ext2 mbcache
scsi_wait_scan ata_piix libata usbhid ohci_hcd uhci_hcd usb_storage ehci_hcd
usbcore
[  542.818288] Pid: 10031, comm: luvcview Tainted: P
2.6.23-rc9-64-debug #7
[  542.818290] RIP: 0010:[<ffffffff889f90cd>]  [<ffffffff889f90cd>]
:uvcvideo:uvc_init_video+0x10d/0x3e0
[  542.818300] RSP: 0018:ffff810033775c58  EFLAGS: 00010202
[  542.818301] RAX: 0000000000095fff RBX: 00000000ffffffea RCX:
0000000000096000
[  542.818304] RDX: 0000000000000000 RSI: ffff81002d7923c8 RDI:
ffffffff805947c0
[  542.818306] RBP: ffff810033775ca8 R08: 0000000000000000 R09:
ffff81003dea7d88
[  542.818308] R10: 0000000000000000 R11: ffffffff804bb4f0 R12:
0000000000000000
[  542.818310] R13: ffff810034dc1480 R14: 0000000000000028 R15:
ffff81002b568048
[  542.818312] FS:  00002b8fda327c60(0000) GS:ffff810037ff4100(0000)
knlGS:0000000000000000
[  542.818315] CS:  0010 DS: 0000 ES: 0000 CR0: 000000008005003b
[  542.818317] CR2: 00007fff9ea36f70 CR3: 000000002e383000 CR4:
00000000000006e0
[  542.818319] DR0: 0000000000000000 DR1: 0000000000000000 DR2:
0000000000000000
[  542.818321] DR3: 0000000000000000 DR6: 00000000ffff0ff0 DR7:
0000000000000400
[  542.818323] Process luvcview (pid: 10031, threadinfo ffff810033774000,
task ffff81002cc827a0)
[  542.818325] Stack:  ffff810001e15288 ffff810033907a80 0000000100000001
0000000000000000
[  542.818330]  ffff810033775ca8 ffff81002b568048 ffff8100343adb00
0000000040045612
[  542.818334]  ffff81003c786640 ffff810033775dd8 ffff810033775cc8
ffffffff889f93fa
[  542.818337] Call Trace:
[  542.818344]  [<ffffffff889f93fa>] :uvcvideo:uvc_video_enable+0x5a/0x70
[  542.818349]  [<ffffffff889f880e>]
:uvcvideo:uvc_v4l2_do_ioctl+0xb9e/0x1170
[  542.818357]  [<ffffffff80230279>] update_curr+0x119/0x130
[  542.818364]  [<ffffffff889eae7b>] :videodev:video_usercopy+0xfb/0x270
[  542.818368]  [<ffffffff889f7c70>] :uvcvideo:uvc_v4l2_do_ioctl+0x0/0x1170
[  542.818373]  [<ffffffff8023033c>] enqueue_entity+0xac/0x270
[  542.818379]  [<ffffffff80498156>] preempt_schedule+0x66/0xa0
[  542.818385]  [<ffffffff889f7596>] :uvcvideo:uvc_v4l2_ioctl+0x56/0x70
[  542.818390]  [<ffffffff8029cfaa>] do_ioctl+0x7a/0x90
[  542.818394]  [<ffffffff8029d033>] vfs_ioctl+0x73/0x2d0
[  542.818398]  [<ffffffff8029d2da>] sys_ioctl+0x4a/0x80
[  542.818402]  [<ffffffff8020c3ae>] system_call+0x7e/0x83
[  542.818406]
[  542.818407]
[  542.818407] Code: 41 f7 f4 83 f8 28 44 0f 46 f0 44 89 e0 41 0f af c6 89
c2 89
[  542.818417] RIP  [<ffffffff889f90cd>]
:uvcvideo:uvc_init_video+0x10d/0x3e0
[  542.818423]  RSP <ffff810033775c58>




On 10/18/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> Hi Tharindu,
>
> On Thursday 18 October 2007, Tharindu Rukshan Bamunuarachchi wrote:
> > It worked for me.
> >
> > It has detected device and created /dev/video0 device.
>
> Great. I committed the patch.
>
> > But when I tried to view camera through mplayer or camorama i got
> following
> > errors.
>
> Camorama doesn't support V4L2. Mplayer had some trouble has well until
> recently, so upgrading to a new version might help.
>
> > Am i using wrong program to view web cam. Do you recommend any user
> space
> > tool?
>
> I use luvcview and uvccapture for testing purpose.
>
> > Are there any tool to gather device supported controls.
>
> luvcview prints supported controls when run with -l. There might be other
> tools as well.
>
> > How can I disable any unsupported control
>
> How do you mean ?
>
> > Seems to be I am at the edge ....
>
> Best regards,
>
> Laurent Pinchart
>



-- 
Tharindu Rukshan Bamunuarachchi
i want to believe it; unless otherwise
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071019/7730ecf4/attachment.html>

From laurent.pinchart at skynet.be  Fri Oct 19 11:11:12 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 19 Oct 2007 11:11:12 +0200
Subject: [Linux-uvc-devel] Motorola PCS in E6 Mobile Phone
In-Reply-To: <c49434130710190142ma1337f8s6096e35337004acc@mail.gmail.com>
References: <c49434130710160719w7ffcec7flc14d8809b4724ec1@mail.gmail.com>
	<200710182326.06843.laurent.pinchart@skynet.be>
	<c49434130710190142ma1337f8s6096e35337004acc@mail.gmail.com>
Message-ID: <200710191111.13644.laurent.pinchart@skynet.be>

Hi Tharindu,

On Friday 19 October 2007 10:42, Tharindu Rukshan Bamunuarachchi wrote:
> Dear Laurent/All,
>
> l have tried luvcview. Unfortunately I got "divide error" in DMESG.
> I am using preempt kernel in x86_64.

Could you please apply the attached patch and try again ? The driver will 
still crash, but it should print additional information in the kernel log 
that will help me to diagnose the problem.

Best regards,

Laurent Pinchart
-------------- next part --------------
A non-text attachment was scrubbed...
Name: divide_error.patch
Type: text/x-diff
Size: 500 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071019/fea5704f/attachment.patch>

From tharindunix at gmail.com  Fri Oct 19 11:25:58 2007
From: tharindunix at gmail.com (Tharindu Rukshan Bamunuarachchi)
Date: Fri, 19 Oct 2007 09:25:58 +0000
Subject: [Linux-uvc-devel] Motorola PCS in E6 Mobile Phone
In-Reply-To: <200710191111.13644.laurent.pinchart@skynet.be>
References: <c49434130710160719w7ffcec7flc14d8809b4724ec1@mail.gmail.com>
	<200710182326.06843.laurent.pinchart@skynet.be>
	<c49434130710190142ma1337f8s6096e35337004acc@mail.gmail.com>
	<200710191111.13644.laurent.pinchart@skynet.be>
Message-ID: <c49434130710190225u18704e9cs1bc87e9e2d881e1@mail.gmail.com>

Dear Laurent,

This is what I got... Is it something wrong with my camera or how I have
compiled my kernel?
Thankx for continuously helping me.

BR
Tharindu


[   97.890630] uvcvideo: Selected altsetting 0, wMaxPacketSize is 0x0000
[   97.890651] divide error: 0000 [1] PREEMPT SMP
[   97.890655] CPU 0
[   97.890656] Modules linked in: snd_pcm_oss snd_mixer_oss snd_seq_dummy
snd_seq_oss snd_seq_midi_event snd_seq snd_seq_device rtc thermal bcm43xx
uvcvideo compat_ioctl32 videodev v4l1_compat v4l2_common processor video
output firmware_class ieee80211softmac ieee80211 ieee80211_crypt button
battery snd_hda_intel snd_pcm snd_timer nvidia(P) snd soundcore
snd_page_alloc ac sg tg3 nfs lockd sunrpc jfs reiserfs ext3 jbd ext2 mbcache
scsi_wait_scan ata_piix libata usbhid ohci_hcd uhci_hcd usb_storage ehci_hcd
usbcore
[   97.890692] Pid: 6707, comm: luvcview Tainted: P
2.6.23-rc9-64-debug #7
[   97.890694] RIP: 0010:[<ffffffff88951156>]  [<ffffffff88951156>]
:uvcvideo:uvc_init_video+0x126/0x3f0
[   97.890705] RSP: 0018:ffff810030727c58  EFLAGS: 00010202
[   97.890707] RAX: 0000000000095fff RBX: 0000000000000000 RCX:
0000000000096000
[   97.890709] RDX: 0000000000000000 RSI: 0000000000000000 RDI:
ffffffff805876a0
[   97.890711] RBP: ffff810030727ca8 R08: 00000000ffffffff R09:
0000000000000000
[   97.890712] R10: ffff810030727a08 R11: ffffffff804bb4f0 R12:
0000000000000000
[   97.890714] R13: ffff81003fbfd900 R14: 0000000000000028 R15:
ffff81003e860048
[   97.890717] FS:  00002b2a79609c60(0000) GS:ffffffff805b3000(0000)
knlGS:0000000000000000
[   97.890719] CS:  0010 DS: 0000 ES: 0000 CR0: 000000008005003b
[   97.890721] CR2: 00002b2a79272ff4 CR3: 00000000300a0000 CR4:
00000000000006e0
[   97.890723] DR0: 0000000000000000 DR1: 0000000000000000 DR2:
0000000000000000
[   97.890725] DR3: 0000000000000000 DR6: 00000000ffff0ff0 DR7:
0000000000000400
[   97.890727] Process luvcview (pid: 6707, threadinfo ffff810030726000,
task ffff810034dbf6e0)
[   97.890729] Stack:  ffff810030727c68 0000000000000001 000000018058c600
0000000000000000
[   97.890733]  ffff810030727ca8 ffff81003e860048 ffff81003341fd00
0000000040045612
[   97.890737]  ffff81003b75ae90 ffff810030727dd8 ffff810030727cc8
ffffffff8895147a
[   97.890740] Call Trace:
[   97.890748]  [<ffffffff8895147a>] :uvcvideo:uvc_video_enable+0x5a/0x70
[   97.890753]  [<ffffffff8895080e>]
:uvcvideo:uvc_v4l2_do_ioctl+0xb9e/0x1170
[   97.890761]  [<ffffffff80230279>] update_curr+0x119/0x130
[   97.890767]  [<ffffffff88942e7b>] :videodev:video_usercopy+0xfb/0x270
[   97.890772]  [<ffffffff8894fc70>] :uvcvideo:uvc_v4l2_do_ioctl+0x0/0x1170
[   97.890777]  [<ffffffff8023033c>] enqueue_entity+0xac/0x270
[   97.890783]  [<ffffffff80498156>] preempt_schedule+0x66/0xa0
[   97.890789]  [<ffffffff8894f596>] :uvcvideo:uvc_v4l2_ioctl+0x56/0x70
[   97.890794]  [<ffffffff8029cfaa>] do_ioctl+0x7a/0x90
[   97.890797]  [<ffffffff8029d033>] vfs_ioctl+0x73/0x2d0
[   97.890801]  [<ffffffff8029d2da>] sys_ioctl+0x4a/0x80
[   97.890806]  [<ffffffff8020c3ae>] system_call+0x7e/0x83
[   97.890810]
[   97.890811]
[   97.890811] Code: 41 f7 f4 83 f8 28 44 0f 46 f0 44 89 e0 41 0f af c6 89
c2 89
[   97.890821] RIP  [<ffffffff88951156>]
:uvcvideo:uvc_init_video+0x126/0x3f0
[   97.890826]  RSP <ffff810030727c58>


On 10/19/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> Hi Tharindu,
>
> On Friday 19 October 2007 10:42, Tharindu Rukshan Bamunuarachchi wrote:
> > Dear Laurent/All,
> >
> > l have tried luvcview. Unfortunately I got "divide error" in DMESG.
> > I am using preempt kernel in x86_64.
>
> Could you please apply the attached patch and try again ? The driver will
> still crash, but it should print additional information in the kernel log
> that will help me to diagnose the problem.
>
> Best regards,
>
> Laurent Pinchart
>
>


-- 
Tharindu Rukshan Bamunuarachchi
i want to believe it; unless otherwise
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071019/ac4cad1e/attachment.html>

From laurent.pinchart at skynet.be  Fri Oct 19 13:56:14 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 19 Oct 2007 13:56:14 +0200
Subject: [Linux-uvc-devel] Motorola PCS in E6 Mobile Phone
In-Reply-To: <c49434130710190225u18704e9cs1bc87e9e2d881e1@mail.gmail.com>
References: <c49434130710160719w7ffcec7flc14d8809b4724ec1@mail.gmail.com>
	<200710191111.13644.laurent.pinchart@skynet.be>
	<c49434130710190225u18704e9cs1bc87e9e2d881e1@mail.gmail.com>
Message-ID: <200710191356.14868.laurent.pinchart@skynet.be>

Hi Tharindu,

On Friday 19 October 2007 11:25, Tharindu Rukshan Bamunuarachchi wrote:
> Dear Laurent,
>
> This is what I got... Is it something wrong with my camera or how I have
> compiled my kernel?

There might be something wrong with the camera, but the driver shouldn't crash 
so there's also a bug there.

I attached an updated patch. It prevents the driver from crashing but won't 
fix the issue. Could you please try it and report the new messages printed in 
the kernel log ?

Thanks.

Best regards,

Laurent Pinchart
-------------- next part --------------
A non-text attachment was scrubbed...
Name: divide_error.patch
Type: text/x-diff
Size: 2000 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071019/8ee6e347/attachment.patch>

From tharindunix at gmail.com  Fri Oct 19 15:18:00 2007
From: tharindunix at gmail.com (Tharindu Rukshan Bamunuarachchi)
Date: Fri, 19 Oct 2007 13:18:00 +0000
Subject: [Linux-uvc-devel] Motorola PCS in E6 Mobile Phone
In-Reply-To: <200710191356.14868.laurent.pinchart@skynet.be>
References: <c49434130710160719w7ffcec7flc14d8809b4724ec1@mail.gmail.com>
	<200710191111.13644.laurent.pinchart@skynet.be>
	<c49434130710190225u18704e9cs1bc87e9e2d881e1@mail.gmail.com>
	<200710191356.14868.laurent.pinchart@skynet.be>
Message-ID: <c49434130710190618r6959ea87qd281d27f9cb1cada@mail.gmail.com>

Dear Laurent,

this is the dmesg out put when did i run ...

 luvcview -s 352x288 -i 20 -f yuv -w

is it something wrong with camera??

Thankx a lot
Tharindu







[  118.729544] uvcvideo: Found UVC 1.00 device Motorola USB Camera
(22b8:6006)
[  118.729730] uvcvideo: GET_DEF(probe)
[  118.729732] bmHint:                      0x0000
[  118.729733] bFormatIndex:                     0
[  118.729734] bFrameIndex:                      0
[  118.729736] dwFrameInterval:                  0
[  118.729737] wKeyFrameRate:                    0
[  118.729738] wPFrameRate:                      0
[  118.729740] wCompQuality:                     0
[  118.729741] wCompWindowSize:                  0
[  118.729742] wDelay:                           0
[  118.729744] dwMaxVideoFrameSize:              0
[  118.729745] dwMaxPayloadTransferSize:         0
[  118.729746] dwClockFrequency:                 0
[  118.729747] bmFramingInfo:                 0x00
[  118.729749] bPreferedVersion:                 0
[  118.729750] bMinVersion:                      0
[  118.729751] bMaxVersion:                      0
[  118.729998] CLASS: registering class device: ID = 'video0'
[  118.730008] class_uevent - name = video0
[  118.730016] bound device '1-4:1.0' to driver 'uvcvideo'
[  118.730018] usb: Bound Device 1-4:1.0 to Driver uvcvideo
[  118.730029] DEV: registering device: ID = '1-4:1.1'
[  118.730033] PM: Adding info for usb:1-4:1.1
[  118.730036] bus usb: add device 1-4:1.1
[  118.730050] bound device '1-4:1.1' to driver 'uvcvideo'
[  118.730394] DEV: registering device: ID = 'usbdev1.7_ep81'
[  118.730407] PM: Adding info for No Bus:usbdev1.7_ep81
[  118.730424] DEV: registering device: ID = 'usbdev1.7'
[  118.730435] PM: Adding info for No Bus:usbdev1.7
[  118.730447] bound device '1-4' to driver 'usb'
[  118.730449] usb: Bound Device 1-4 to Driver usb
[  130.203768] DEV: Unregistering device. ID = 'usbdev1.7_ep81'
[  130.203787] PM: Removing info for No Bus:usbdev1.7_ep81
[  130.203831] DEV: registering device: ID = 'usbdev1.7_ep81'
[  130.203851] PM: Adding info for No Bus:usbdev1.7_ep81
[  142.026669] uvcvideo: GET_MIN(probe)
[  142.026677] bmHint:                      0x4c80
[  142.026679] bFormatIndex:                    68
[  142.026680] bFrameIndex:                     63
[  142.026682] dwFrameInterval:          4294934784
[  142.026683] wKeyFrameRate:                60744
[  142.026684] wPFrameRate:                  12100
[  142.026685] wCompQuality:                 33024
[  142.026687] wCompWindowSize:              65535
[  142.026688] wDelay:                           0
[  142.026690] dwMaxVideoFrameSize:              0
[  142.026691] dwMaxPayloadTransferSize:       514
[  142.026692] dwClockFrequency:                 1
[  142.026693] bmFramingInfo:                 0x40
[  142.026695] bPreferedVersion:               205
[  142.026696] bMinVersion:                    211
[  142.026697] bMaxVersion:                    217
[  142.026796] uvcvideo: GET_MAX(probe)
[  142.026798] bmHint:                      0x7c58
[  142.026799] bFormatIndex:                   235
[  142.026801] bFrameIndex:                     46
[  142.026802] dwFrameInterval:          4294934784
[  142.026803] wKeyFrameRate:                41628
[  142.026805] wPFrameRate:                  32809
[  142.026806] wCompQuality:                 65535
[  142.026807] wCompWindowSize:              65535
[  142.026809] wDelay:                       20992
[  142.026810] dwMaxVideoFrameSize:            257
[  142.026811] dwMaxPayloadTransferSize:         1
[  142.026812] dwClockFrequency:                 0
[  142.026814] bmFramingInfo:                 0xe0
[  142.026815] bPreferedVersion:                22
[  142.026816] bMinVersion:                    226
[  142.026817] bMaxVersion:                     46
[  140.066446] uvcvideo: GET_CUR(probe)
[  140.066448] bmHint:                      0x0001
[  140.066450] bFormatIndex:                     1
[  140.066451] bFrameIndex:                      1
[  140.066453] dwFrameInterval:             500000
[  140.066454] wKeyFrameRate:                    0
[  140.066455] wPFrameRate:                      0
[  140.066457] wCompQuality:                     0
[  140.066458] wCompWindowSize:                  0
[  140.066459] wDelay:                           0
[  140.066460] dwMaxVideoFrameSize:              0
[  140.066462] dwMaxPayloadTransferSize:         0
[  140.066463] dwClockFrequency:                 0
[  140.066464] bmFramingInfo:                 0x00
[  140.066465] bPreferedVersion:                 0
[  140.066467] bMinVersion:                      0
[  140.066468] bMaxVersion:                      0
[  140.066821] uvcvideo: GET_MIN(probe)
[  140.066824] bmHint:                      0x7cc8
[  140.066826] bFormatIndex:                   235
[  140.066829] bFrameIndex:                     46
[  140.066832] dwFrameInterval:          4294934784
[  140.066834] wKeyFrameRate:                16211
[  140.066837] wPFrameRate:                  34972
[  140.066840] wCompQuality:                 65535
[  140.066842] wCompWindowSize:              65535
[  140.066845] wDelay:                          26
[  140.066847] dwMaxVideoFrameSize:      4294934784
[  140.066850] dwMaxPayloadTransferSize:      1000
[  140.066853] dwClockFrequency:          23068672
[  140.066855] bmFramingInfo:                 0x00
[  140.066858] bPreferedVersion:                 0
[  140.066860] bMinVersion:                      1
[  140.066863] bMaxVersion:                      1
[  140.067079] uvcvideo: GET_MAX(probe)
[  140.067082] bmHint:                      0x03e8
[  140.067084] bFormatIndex:                     0
[  140.067087] bFrameIndex:                      0
[  140.067089] dwFrameInterval:                  0
[  140.067092] wKeyFrameRate:                31992
[  140.067094] wPFrameRate:                  12011
[  140.067097] wCompQuality:                 33024
[  140.067099] wCompWindowSize:              65535
[  140.067102] wDelay:                       39936
[  140.067105] dwMaxVideoFrameSize:      4294934784
[  140.067107] dwMaxPayloadTransferSize: 3234878981
[  140.067110] dwClockFrequency:                 0
[  140.067112] bmFramingInfo:                 0x00
[  140.067115] bPreferedVersion:                 0
[  140.067117] bMinVersion:                      0
[  140.067120] bMaxVersion:                      0
[  140.067454] uvcvideo: GET_CUR(probe)
[  140.067455] bmHint:                      0x0000
[  140.067457] bFormatIndex:                     1
[  140.067458] bFrameIndex:                      1
[  140.067459] dwFrameInterval:             500000
[  140.067460] wKeyFrameRate:                    0
[  140.067462] wPFrameRate:                      0
[  140.067463] wCompQuality:                     0
[  140.067464] wCompWindowSize:                  0
[  140.067465] wDelay:                           0
[  140.067467] dwMaxVideoFrameSize:         614400
[  140.067468] dwMaxPayloadTransferSize:         0
[  140.067469] dwClockFrequency:          26000000
[  140.067470] bmFramingInfo:                 0x00
[  140.067472] bPreferedVersion:                 0
[  140.067473] bMinVersion:                      0
[  140.067474] bMaxVersion:                      0
[  142.123447] DEV: Unregistering device. ID = 'usbdev1.7_ep81'
[  142.123470] PM: Removing info for No Bus:usbdev1.7_ep81
[  142.123520] DEV: registering device: ID = 'usbdev1.7_ep81'
[  142.123541] PM: Adding info for No Bus:usbdev1.7_ep81


On 10/19/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> Hi Tharindu,
>
> On Friday 19 October 2007 11:25, Tharindu Rukshan Bamunuarachchi wrote:
> > Dear Laurent,
> >
> > This is what I got... Is it something wrong with my camera or how I have
> > compiled my kernel?
>
> There might be something wrong with the camera, but the driver shouldn't
> crash
> so there's also a bug there.
>
> I attached an updated patch. It prevents the driver from crashing but
> won't
> fix the issue. Could you please try it and report the new messages printed
> in
> the kernel log ?
>
> Thanks.
>
> Best regards,
>
> Laurent Pinchart
>
>


-- 
Tharindu Rukshan Bamunuarachchi
i want to believe it; unless otherwise
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071019/d34654ab/attachment.html>

From laurent.pinchart at skynet.be  Fri Oct 19 15:25:51 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 19 Oct 2007 15:25:51 +0200
Subject: [Linux-uvc-devel] Motorola PCS in E6 Mobile Phone
In-Reply-To: <c49434130710190618r6959ea87qd281d27f9cb1cada@mail.gmail.com>
References: <c49434130710160719w7ffcec7flc14d8809b4724ec1@mail.gmail.com>
	<200710191356.14868.laurent.pinchart@skynet.be>
	<c49434130710190618r6959ea87qd281d27f9cb1cada@mail.gmail.com>
Message-ID: <200710191525.51325.laurent.pinchart@skynet.be>

Hi Tharindu,

On Friday 19 October 2007 15:18, Tharindu Rukshan Bamunuarachchi wrote:
> Dear Laurent,
>
> this is the dmesg out put when did i run ...
>
>  luvcview -s 352x288 -i 20 -f yuv -w
>
> is it something wrong with camera??

Oops, my bad, I made a mistake in the patch. Could you pleas try this one ? We 
are hopefully getting closer :-)

Best regards,

Laurent Pinchart
-------------- next part --------------
A non-text attachment was scrubbed...
Name: divide_error.patch
Type: text/x-diff
Size: 1885 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071019/38b6937b/attachment.patch>

From tharindunix at gmail.com  Fri Oct 19 16:16:18 2007
From: tharindunix at gmail.com (Tharindu Rukshan Bamunuarachchi)
Date: Fri, 19 Oct 2007 14:16:18 +0000
Subject: [Linux-uvc-devel] Motorola PCS in E6 Mobile Phone
In-Reply-To: <200710191525.51325.laurent.pinchart@skynet.be>
References: <c49434130710160719w7ffcec7flc14d8809b4724ec1@mail.gmail.com>
	<200710191356.14868.laurent.pinchart@skynet.be>
	<c49434130710190618r6959ea87qd281d27f9cb1cada@mail.gmail.com>
	<200710191525.51325.laurent.pinchart@skynet.be>
Message-ID: <c49434130710190716l16e10ba4ga0cf818ba04478eb@mail.gmail.com>

Dear Laurent,

I have given following commands ...

however "uvcvideo: GET_DEF(probe)" gave some info ...

tharindu at latitude /zone/src/uvc/trunk $ luvcview -l
luvcview version 0.2.1
Video driver: x11
A window manager is available
video /dev/video0
Unable to set format: 22.
 Init v4L2 failed !! exit fatal


tharindu at latitude /zone/src/uvc/trunk $ luvcview -s 352x288 -i 20 -f yuv
luvcview version 0.2.1
 size width: 352 height: 288
 interval: 20 fps
Video driver: x11
A window manager is available
video /dev/video0
Unable to start capture: 5.
Error grabbing
 Clean Up done Quit



AM i giving correct commands to luvcview ...


Thankx a lot.
Tharindu


[  814.084889] bus usb: add driver uvcvideo
[  814.084922] usbcore: registered new interface driver uvcvideo
[  814.084926] USB Video Class driver (v0.1.0)
[  815.523221] usb 1-4: new high speed USB device using ehci_hcd and address
8
[  815.563971] DEV: registering device: ID = '1-4'
[  815.563993] PM: Adding info for usb:1-4
[  815.564001] bus usb: add device 1-4
[  815.564037] usb: Matched Device 1-4 with Driver usb
[  815.564040] usb: Probing driver usb with device 1-4
[  815.564083] DEV: registering device: ID = 'usbdev1.8_ep00'
[  815.564113] PM: Adding info for No Bus:usbdev1.8_ep00
[  815.564144] usb 1-4: configuration #1 chosen from 1 choice
[  813.603991] DEV: registering device: ID = '1-4:1.0'
[  813.604004] PM: Adding info for usb:1-4:1.0
[  813.604008] bus usb: add device 1-4:1.0
[  813.604098] usb: Matched Device 1-4:1.0 with Driver uvcvideo
[  813.604101] usb: Probing driver uvcvideo with device 1-4:1.0
[  813.604116] uvcvideo: Found UVC 1.00 device Motorola USB Camera
(22b8:6006)
[  815.564968] uvcvideo: GET_DEF(probe)
[  815.564970] bmHint:                      0x0000
[  815.564971] bFormatIndex:                     1
[  815.564973] bFrameIndex:                      1
[  815.564974] dwFrameInterval:             500000
[  815.564975] wKeyFrameRate:                    0
[  815.564977] wPFrameRate:                      0
[  815.564978] wCompQuality:                     0
[  815.564979] wCompWindowSize:                  0
[  815.564981] wDelay:                           0
[  815.564982] dwMaxVideoFrameSize:         614400
[  815.564983] dwMaxPayloadTransferSize:         0
[  815.564985] dwClockFrequency:          26000000
[  815.564986] bmFramingInfo:                 0x00
[  815.564987] bPreferedVersion:                 0
[  815.564988] bMinVersion:                      0
[  815.564990] bMaxVersion:                      0
[  815.565215] CLASS: registering class device: ID = 'video0'
[  815.565226] class_uevent - name = video0
[  815.565234] bound device '1-4:1.0' to driver 'uvcvideo'
[  815.565235] usb: Bound Device 1-4:1.0 to Driver uvcvideo
[  815.565247] DEV: registering device: ID = '1-4:1.1'
[  815.565251] PM: Adding info for usb:1-4:1.1
[  815.565254] bus usb: add device 1-4:1.1
[  815.565270] bound device '1-4:1.1' to driver 'uvcvideo'
[  815.565718] DEV: registering device: ID = 'usbdev1.8_ep81'
[  815.565732] PM: Adding info for No Bus:usbdev1.8_ep81
[  815.565749] DEV: registering device: ID = 'usbdev1.8'
[  815.565762] PM: Adding info for No Bus:usbdev1.8
[  815.565775] bound device '1-4' to driver 'usb'
[  815.565777] usb: Bound Device 1-4 to Driver usb
[  820.178879] DEV: Unregistering device. ID = 'usbdev1.8_ep81'
[  820.178935] PM: Removing info for No Bus:usbdev1.8_ep81
[  820.178983] DEV: registering device: ID = 'usbdev1.8_ep81'
[  820.179005] PM: Adding info for No Bus:usbdev1.8_ep81
[  823.305215] uvcvideo: GET_MIN(probe)
[  823.305220] bmHint:                      0x0000
[  823.305221] bFormatIndex:                     1
[  823.305223] bFrameIndex:                      5
[  823.305224] dwFrameInterval:             500000
[  823.305225] wKeyFrameRate:                    0
[  823.305227] wPFrameRate:                      0
[  823.305228] wCompQuality:                     0
[  823.305229] wCompWindowSize:                  0
[  823.305231] wDelay:                           0
[  823.305232] dwMaxVideoFrameSize:         614400
[  823.305233] dwMaxPayloadTransferSize:         0
[  823.305235] dwClockFrequency:          26000000
[  823.305236] bmFramingInfo:                 0x00
[  823.305238] bPreferedVersion:                 0
[  823.305239] bMinVersion:                      0
[  823.305240] bMaxVersion:                      0
[  821.344744] uvcvideo: GET_MAX(probe)
[  821.344746] bmHint:                      0x0000
[  821.344748] bFormatIndex:                     1
[  821.344749] bFrameIndex:                      3
[  821.344751] dwFrameInterval:             666666
[  821.344752] wKeyFrameRate:                    0
[  821.344753] wPFrameRate:                      0
[  821.344755] wCompQuality:                     0
[  821.344756] wCompWindowSize:                  0
[  821.344757] wDelay:                           0
[  821.344759] dwMaxVideoFrameSize:         614400
[  821.344760] dwMaxPayloadTransferSize:         0
[  821.344762] dwClockFrequency:          26000000
[  821.344763] bmFramingInfo:                 0x00
[  821.344764] bPreferedVersion:                 0
[  821.344766] bMinVersion:                      0
[  821.344767] bMaxVersion:                      0
[  821.344987] uvcvideo: GET_CUR(probe)
[  821.344988] bmHint:                      0x0000
[  821.344990] bFormatIndex:                     1
[  821.344991] bFrameIndex:                      1
[  821.344993] dwFrameInterval:             500000
[  821.344994] wKeyFrameRate:                    0
[  821.344995] wPFrameRate:                      0
[  821.344997] wCompQuality:                     0
[  821.344998] wCompWindowSize:                  0
[  821.344999] wDelay:                           0
[  821.345001] dwMaxVideoFrameSize:         614400
[  821.345002] dwMaxPayloadTransferSize:         0
[  821.345003] dwClockFrequency:          26000000
[  821.345005] bmFramingInfo:                 0x00
[  821.345006] bPreferedVersion:                 0
[  821.345007] bMinVersion:                      0
[  821.345009] bMaxVersion:                      0
[  821.345367] uvcvideo: GET_MIN(probe)
[  821.345368] bmHint:                      0x0000
[  821.345370] bFormatIndex:                     1
[  821.345371] bFrameIndex:                      5
[  821.345372] dwFrameInterval:             500000
[  821.345374] wKeyFrameRate:                    0
[  821.345375] wPFrameRate:                      0
[  821.345376] wCompQuality:                     0
[  821.345378] wCompWindowSize:                  0
[  821.345379] wDelay:                           0
[  821.345380] dwMaxVideoFrameSize:         614400
[  821.345382] dwMaxPayloadTransferSize:         0
[  821.345383] dwClockFrequency:          26000000
[  821.345384] bmFramingInfo:                 0x00
[  821.345386] bPreferedVersion:                 0
[  821.345387] bMinVersion:                      0
[  821.345388] bMaxVersion:                      0
[  821.345491] uvcvideo: GET_MAX(probe)
[  821.345493] bmHint:                      0x0000
[  821.345494] bFormatIndex:                     1
[  821.345496] bFrameIndex:                      3
[  821.345497] dwFrameInterval:             666666
[  821.345498] wKeyFrameRate:                    0
[  821.345500] wPFrameRate:                      0
[  821.345501] wCompQuality:                     0
[  821.345502] wCompWindowSize:                  0
[  821.345504] wDelay:                           0
[  821.345505] dwMaxVideoFrameSize:         614400
[  821.345506] dwMaxPayloadTransferSize:         0
[  821.345508] dwClockFrequency:          26000000
[  821.345509] bmFramingInfo:                 0x00
[  821.345510] bPreferedVersion:                 0
[  821.345512] bMinVersion:                      0
[  821.345513] bMaxVersion:                      0
[  821.345736] uvcvideo: GET_CUR(probe)
[  821.345737] bmHint:                      0x0000
[  821.345739] bFormatIndex:                     1
[  821.345740] bFrameIndex:                      1
[  821.345741] dwFrameInterval:             500000
[  821.345743] wKeyFrameRate:                    0
[  821.345744] wPFrameRate:                      0
[  821.345745] wCompQuality:                     0
[  821.345747] wCompWindowSize:                  0
[  821.345748] wDelay:                           0
[  821.345749] dwMaxVideoFrameSize:         614400
[  821.345751] dwMaxPayloadTransferSize:         0
[  821.345752] dwClockFrequency:          26000000
[  821.345753] bmFramingInfo:                 0x00
[  821.345755] bPreferedVersion:                 0
[  821.345756] bMinVersion:                      0
[  821.345757] bMaxVersion:                      0
[  821.422602] DEV: Unregistering device. ID = 'usbdev1.8_ep81'
[  821.422620] PM: Removing info for No Bus:usbdev1.8_ep81
[  821.422671] DEV: registering device: ID = 'usbdev1.8_ep81'
[  821.422692] PM: Adding info for No Bus:usbdev1.8_ep81

On 10/19/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> Hi Tharindu,
>
> On Friday 19 October 2007 15:18, Tharindu Rukshan Bamunuarachchi wrote:
> > Dear Laurent,
> >
> > this is the dmesg out put when did i run ...
> >
> >  luvcview -s 352x288 -i 20 -f yuv -w
> >
> > is it something wrong with camera??
>
> Oops, my bad, I made a mistake in the patch. Could you pleas try this one
> ? We
> are hopefully getting closer :-)
>
> Best regards,
>
> Laurent Pinchart
>
>


-- 
Tharindu Rukshan Bamunuarachchi
i want to believe it; unless otherwise
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071019/ddadf860/attachment.html>

From the.real.monkey.d.luffy at gmail.com  Fri Oct 19 16:34:36 2007
From: the.real.monkey.d.luffy at gmail.com (Monkey D Luffy)
Date: Fri, 19 Oct 2007 14:34:36 +0000
Subject: [Linux-uvc-devel] How to record audio and video from a webcam?
In-Reply-To: <344b9a2f0710071415j2529bb7pb89ccb5dcda47a75@mail.gmail.com>
References: <380157.12616.qm@web50008.mail.re2.yahoo.com>
	<344b9a2f0710071415j2529bb7pb89ccb5dcda47a75@mail.gmail.com>
Message-ID: <344b9a2f0710190734h2fb85377v3ace6a11c9746ab9@mail.gmail.com>

Any updates on this?
(application to record synchronized video and audio from webcam...
something like luvcview but with sound support)


On 10/7/07, Monkey D Luffy <the.real.monkey.d.luffy at gmail.com> wrote:
> Yep... the same thing... :-(
>
> Check my message
> http://forums.quickcamteam.net/showthread.php?tid=6&pid=31&#pid31
>
> Or get the file from here
> http://rapidshare.com/files/60981245/logitech_quickcam_fusion_046d-08ca_silence.mp4.zip.html
> (I had to register to download your file)
>
> Is it some Logitech-UVC issue?
>
> And I'm still missing a luvcview-with-audio-support application to
> record my video+audio...
> Does anyone with SDL experience want to add audio support to luvcview? :-)
>
>
> On 10/7/07, J?rg Hermsdorf <funtasyspace at yahoo.com> wrote:
> > > Unfortunately I get a lot of "clicks" in the recording :-( Maybe that
> > > can be solved with post-processing on some tool?
> >
> > Seems like you have the same "clicks" in you recorded audio
> > like I reported some days ago!? Does your "clicks" sound similar to
> > the sample I uploaded here? -> http://forums.quickcamteam.net/attachment.php?aid=1
> >
> > Best Regards,
> > J?rg
> >
> >
> >
> >
> >
> >       Die etwas anderen Infos rund um das Thema Reisen. BE A BETTER WELTENBUMMLER!  www.yahoo.de/clever
> >
>


From bnc at astronomicalresearchaustralia.org  Sat Oct 20 03:44:51 2007
From: bnc at astronomicalresearchaustralia.org (Brian)
Date: Sat, 20 Oct 2007 11:44:51 +1000
Subject: [Linux-uvc-devel] How to record audio and video from a webcam?
In-Reply-To: <344b9a2f0710190734h2fb85377v3ace6a11c9746ab9@mail.gmail.com>
References: <380157.12616.qm@web50008.mail.re2.yahoo.com>	<344b9a2f0710071415j2529bb7pb89ccb5dcda47a75@mail.gmail.com>
	<344b9a2f0710190734h2fb85377v3ace6a11c9746ab9@mail.gmail.com>
Message-ID: <47195D93.8080608@astronomicalresearchaustralia.org>

Hi,
> Any updates on this?
> (application to record synchronized video and audio from webcam...
> something like luvcview but with sound support)
> 
I posted a similar question some months back and posted the 'solution'
below. However, I too would like to get both working in an app.

Brian

Both luvcview and Motion do not do it as far as I can tell.
Anyway I have been playing around for a week and finally got some sound
output. Below is what I did in case you need it.

1)This gives you the number of the usb sound card in my case it was 2/0
 cat /proc/asound/cards
 0 [Live           ]: EMU10K1 - SBLive! Value [CT4832]
    SBLive! Value [CT4832] (rev.6, serial:0x80271102) at 0xc800, irq 217
 1 [V8235          ]: VIA8233 - VIA 8235
                      VIA 8235 with ALC650F at 0xe000, irq 193
 2 [U0x46d0x8c1    ]: USB-Audio - USB Device 0x46d:0x8c1
               USB Device 0x46d:0x8c1 at usb-0000:00:10.3-2, high speed

2) I assume you have alsa available and can issue alsa commands.
aplay -h will give you what formats are available and it is a matter of
finding one that works for your camera, mine worked with this

arecord -D plughw:2,0 -c 1 -f S16_LE --buffer-size=48000 -v | aplay -f
S16_LE -c 1 --buffer-size=48000 -v

The w:2,0 is the card number
The -c 1 says only one channel but I do not think this works.
The -f is my chosen format, -f cd also worked
The buffer is to prevent underruns it defaults to 24000
All this is piped into aplay and the sound comes out of my speakers.

Now all I have to figure out is how to put both this and the luvcview
output into an avi.

Hope this is of some interest and would like to know if you come across
a better way.














From the.real.monkey.d.luffy at gmail.com  Sat Oct 20 16:43:55 2007
From: the.real.monkey.d.luffy at gmail.com (Monkey D Luffy)
Date: Sat, 20 Oct 2007 14:43:55 +0000
Subject: [Linux-uvc-devel] How to record audio and video from a webcam?
	(VLC almost there)
Message-ID: <344b9a2f0710200743r5f61feb0uad480b4b77dfe349@mail.gmail.com>

Check here http://forum.videolan.org/viewtopic.php?f=13&t=41192&p=129485#p129485

ATM I'm unable to install VLC due to package dependencies... hopping
it gets solved soon or get an answer to that message.


On 10/20/07, Brian <bnc at astronomicalresearchaustralia.org> wrote:
> Hi,
> > Any updates on this?
> > (application to record synchronized video and audio from webcam...
> > something like luvcview but with sound support)
> >
> I posted a similar question some months back and posted the 'solution'
> below. However, I too would like to get both working in an app.
>
> Brian
>
> Both luvcview and Motion do not do it as far as I can tell.
> Anyway I have been playing around for a week and finally got some sound
> output. Below is what I did in case you need it.
>
> 1)This gives you the number of the usb sound card in my case it was 2/0
>  cat /proc/asound/cards
>  0 [Live           ]: EMU10K1 - SBLive! Value [CT4832]
>     SBLive! Value [CT4832] (rev.6, serial:0x80271102) at 0xc800, irq 217
>  1 [V8235          ]: VIA8233 - VIA 8235
>                       VIA 8235 with ALC650F at 0xe000, irq 193
>  2 [U0x46d0x8c1    ]: USB-Audio - USB Device 0x46d:0x8c1
>                USB Device 0x46d:0x8c1 at usb-0000:00:10.3-2, high speed
>
> 2) I assume you have alsa available and can issue alsa commands.
> aplay -h will give you what formats are available and it is a matter of
> finding one that works for your camera, mine worked with this
>
> arecord -D plughw:2,0 -c 1 -f S16_LE --buffer-size=48000 -v | aplay -f
> S16_LE -c 1 --buffer-size=48000 -v
>
> The w:2,0 is the card number
> The -c 1 says only one channel but I do not think this works.
> The -f is my chosen format, -f cd also worked
> The buffer is to prevent underruns it defaults to 24000
> All this is piped into aplay and the sound comes out of my speakers.
>
> Now all I have to figure out is how to put both this and the luvcview
> output into an avi.
>
> Hope this is of some interest and would like to know if you come across
> a better way.
>
>
>
>
>
>
>
>
>
>
>
>
>


From richard at 2007.atterer.net  Sun Oct 21 13:50:19 2007
From: richard at 2007.atterer.net (Richard Atterer)
Date: Sun, 21 Oct 2007 13:50:19 +0200
Subject: [Linux-uvc-devel] Invitation for testers of mjpg-streamer
In-Reply-To: <4715DE09.6070408@gmx.net>
References: <4715DE09.6070408@gmx.net>
Message-ID: <20071021115019.GA7715@vilya>

On Wed, Oct 17, 2007 at 12:03:53PM +0200, Tom St wrote:
> I am looking for testers of the uvc-streamer successor, called
> "mjpg-streamer" [1].

Hi! First of all, congratulations on the nice, clean code! It works well 
with my QuickCam 9000 Pro. :-)

There is a problem when I view the stream using VLC 0.8.6c: The video is 
displayed, but with wrong colours. For each JPEG, the luma part is 
displayed correctly, but the chroma parts are stretched vertically to twice 
their proper size, which results in a colour "ghost image" behind the 
actual picture. I suspect the camera uses an unusual chroma subsampling 
variant which VLC doesn't understand.

In firefox, the MJPEG stream sometimes seems to hang, IIRC you also noticed 
this.

I have written an AJAX-based web page to view the stream - IMHO, it's 
better than the Java applet. It requests snapshot images from the server as 
fast as it can. A patch is attached - the web server must return the images 
as non-cacheable, otherwise you will get a recording of the image stream 
when you visit the page a second time. This code works fine with Firefox, 
Konqueror, Opera and MSIE 6!

This is a first try, some more work is probably required to get this to 
work well. One problem: The web server sometimes seems to get into an 
infinite loop, consuming 100% CPU even though the browser no longer 
requests images. This happens more with some browsers than with others. - 
Could it be that the server will have trouble serving multiple clients at 
the same time? E.g., what happens if there is one fast client and one slow 
client who can only fetch every n-th frame?

Furthermore, it may be possible to increase performance a *lot* by 
implementing HTTP/1.1 persistent connections. However, I don't know whether 
this would work with the current JavaScript code, as the the browser might 
close the connection once one JPEG has been fetched, and open another one 
when the JavaScript requests the next one. If this is the case, some extra 
logic would be required at the server side to "force" HTTP pipelining to 
take place: The JavaScript would always need to keep _two_ image requests 
active at any time, and the server would have to delay responses and only 
deliver each webcam frame to each IP at most once. With HTTP pipelining, 
performance should be comparable to that of an MJPEG stream!

Nitpick mode: HTTP requires that the name in the "Server:" header is 
followed by a version number. Also, isn't "MJPEG" more correct than "MJPG"?

Oh, and one wishlist item: It would be cool to have an "input_http" plugin. 
That way, I could run one instance of mjpg-streamer at home, stream from 
there to another instance on a server with more bandwidth, and finally use 
that server to feed multiple clients.

Thanks for starting this nice project! :)
Cheers,

  Richard

-- 
  __   _
  |_) /|  Richard Atterer     |  GnuPG key: 888354F7
  | \/?|  http://atterer.net  |  08A9 7B7D 3D13 3EF2 3D25  D157 79E6 F6DC 8883 54F7
  ? '` ?
diff --minimal --unified -urN mjpg-streamer.orig/Makefile mjpg-streamer/Makefile
--- mjpg-streamer.orig/Makefile	2007-10-18 13:36:22.000000000 +0200
+++ mjpg-streamer/Makefile	2007-10-20 21:24:37.181712079 +0200
@@ -21,7 +21,7 @@
 clean:
 	@echo "Cleaning up directory."
 	rm -f *.a *.o $(APP_BINARY) core *~ *.so *.lo
-	rm -f plugins/*/*.a plugins/*/*.o plugins/*/core plugins/*/*~ plugins/*/*.so
+	rm -f plugins/*/*.a plugins/*/*.o plugins/*/core plugins/*/*~ plugins/*/*.so plugins/*/*.lo
 
 # Applications:
 uga_buga: $(OBJECTS) input_uvc.so output_http.so output_file.so
diff --minimal --unified -urN mjpg-streamer.orig/plugins/output_http/httpd.c mjpg-streamer/plugins/output_http/httpd.c
--- mjpg-streamer.orig/plugins/output_http/httpd.c	2007-10-13 10:42:31.000000000 +0200
+++ mjpg-streamer/plugins/output_http/httpd.c	2007-10-21 01:18:02.479828534 +0200
@@ -242,8 +242,11 @@
   /* write the response */
   sprintf(buffer, "HTTP/1.0 200 OK\r\n" \
                   "Connection: close\r\n" \
-                  "Server: MJPG-Streamer\r\n" \
+                  "Server: MJPG-Streamer/0.1\r\n" \
                   "Content-type: image/jpeg\r\n" \
+                  "Cache-Control: no-store, no-cache, must-revalidate\r\n" \
+                  "Pragma: no-cache\r\n" \
+                  "Expires: Mon, 31 Jan 2000 05:00:00 GMT\r\n" \
                   "\r\n");
 
   /* send header and image now */
Binary files mjpg-streamer.orig/plugins/output_http/httpd.lo and mjpg-streamer/plugins/output_http/httpd.lo differ
diff --minimal --unified -urN mjpg-streamer.orig/www/javascript.html mjpg-streamer/www/javascript.html
--- mjpg-streamer.orig/www/javascript.html	1970-01-01 01:00:00.000000000 +0100
+++ mjpg-streamer/www/javascript.html	2007-10-21 12:40:48.528501962 +0200
@@ -0,0 +1,51 @@
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
+    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml">
+<head>
+<title>MJPEG-Streamer</title>
+</head>
+<script type="text/javascript">
+
+/* Copyright (C) 2007 Richard Atterer, richard?atterer.net
+   This program is free software; you can redistribute it and/or modify it
+   under the terms of the GNU General Public License, version 2. See the file
+   COPYING for details. */
+
+var imageNr = 0; // Serial number of current image
+var finished = new Array(); // References to img objects which have finished downloading
+var paused = false;
+
+function createImageLayer() {
+  var img = new Image();
+  img.style.position = "absolute";
+  img.style.zIndex = -1;
+  img.onload = imageOnload;
+  img.onclick = imageOnclick;
+  img.src = "/?action=snapshot&n=" + (++imageNr);
+  var webcam = document.getElementById("webcam");
+  webcam.insertBefore(img, webcam.firstChild);
+}
+
+// Two layers are always present (except at the very beginning), to avoid flicker
+function imageOnload() {
+  this.style.zIndex = imageNr; // Image finished, bring to front!
+  while (1 < finished.length) {
+    var del = finished.shift(); // Delete old image(s) from document
+    del.parentNode.removeChild(del);
+  }
+  finished.push(this);
+  if (!paused) createImageLayer();
+}
+
+function imageOnclick() { // Clicking on the image will pause the stream
+  paused = !paused;
+  if (!paused) createImageLayer();
+}
+
+</script>
+<body onload="createImageLayer();">
+
+<div id="webcam"><noscript><img src="/?action=snapshot" /></noscript></div>
+
+</body>
+</html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071021/6c07a66e/attachment.pgp>

From dmnewman at pobox.com  Sun Oct 21 14:42:28 2007
From: dmnewman at pobox.com (Daniel M. Newman)
Date: Sun, 21 Oct 2007 22:42:28 +1000
Subject: [Linux-uvc-devel] How to record audio and video from a webcam?
In-Reply-To: <mailman.77.1192960906.5038.linux-uvc-devel@lists.berlios.de>
References: <mailman.77.1192960906.5038.linux-uvc-devel@lists.berlios.de>
Message-ID: <471B4934.2040604@pobox.com>

If you are using gstreamer, the following works for my built-in iSight
and alsa sound system (or it did, before I did my most recent kernel
upgrade :(

#!/bin/sh
#
# stream output from built-in iSight to file specified on command line
#
echo "Streaming video display and record, with audio, to file $1.ogg ..."
gst-launch-0.10 \
alsasrc \
! audiorate \
! 'audio/x-raw-int,rate=44100,channels=2' \
! audioconvert \
! vorbisenc \
! queue \
! muxout. \
\
v4l2src \
! tee name=teev \
\
teev. \
! videorate \
!
'video/x-raw-yuv,format=(fourcc)UYVY,width=640,height=480,framerate=(fraction)25/1'
\
! ffmpegcolorspace \
! clockoverlay \
! theoraenc \
! queue \
! muxout. \
\
teev. \
! ffmpegcolorspace \
! ximagesink \
\
oggmux name=muxout \
! filesink location=$1.ogg



This displays the webcam output and simultaneously records the video and
the microphone input.  It all seemed to synchronise ok.  For other
cameras, you may need to change the format, size, frame rate etc

Hope this helps,
Dan


From joel.dimbernat at gmail.com  Sun Oct 21 14:54:15 2007
From: joel.dimbernat at gmail.com (Joel Dimbernat)
Date: Sun, 21 Oct 2007 14:54:15 +0200
Subject: [Linux-uvc-devel] Unsupported Chicony webcam
Message-ID: <cedc8de90710210554g2c9ef400kf682a9b684f4626d@mail.gmail.com>

Hello here is the lsusb -v output for my Chicony webcam:

Bus 007 Device 003: ID 04f2:b008 Chicony Electronics Co., Ltd
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x04f2 Chicony Electronics Co., Ltd
  idProduct          0xb008
  bcdDevice           93.01
  iManufacturer           2 Chicony Electronics Co., Ltd.
  iProduct                1 Chicony USB 2.0 Camera
  iSerial                 3 SN0001
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          593
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
    MaxPower              500mA
    UNRECOGNIZED:  08 0b 00 02 0e 03 00 01
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              1 Chicony USB 2.0 Camera
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b20  2x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1320  3x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x13e8  3x 1000 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1


I hope this will help.

Tell me if I can do anything more.

Thanks

Joel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071021/54ae61e0/attachment.html>

From laurent.pinchart at skynet.be  Sun Oct 21 21:52:53 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 21 Oct 2007 21:52:53 +0200
Subject: [Linux-uvc-devel] Unsupported Chicony webcam
In-Reply-To: <cedc8de90710210554g2c9ef400kf682a9b684f4626d@mail.gmail.com>
References: <cedc8de90710210554g2c9ef400kf682a9b684f4626d@mail.gmail.com>
Message-ID: <200710212152.53216.laurent.pinchart@skynet.be>

Hi Joel,

On Sunday 21 October 2007, Joel Dimbernat wrote:
> Hello here is the lsusb -v output for my Chicony webcam:
>
> Bus 007 Device 003: ID 04f2:b008 Chicony Electronics Co., Ltd
[snip]
>
> I hope this will help.
>
> Tell me if I can do anything more.

Please upgrade to usbutils 0.72 or newer. Your version of lsusb doesn't report 
most of the UVC descriptors.

It would also help if you told me about the problem you experience. Have you 
tried the driver ? If it doesn't work, what happens ? Be as verbose as 
possible.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Oct 21 22:48:13 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 21 Oct 2007 22:48:13 +0200
Subject: [Linux-uvc-devel] Motorola PCS in E6 Mobile Phone
In-Reply-To: <c49434130710200823m2cb6a2e4y1c012aa1487e54f7@mail.gmail.com>
References: <c49434130710160719w7ffcec7flc14d8809b4724ec1@mail.gmail.com>
	<c49434130710190716l16e10ba4ga0cf818ba04478eb@mail.gmail.com>
	<c49434130710200823m2cb6a2e4y1c012aa1487e54f7@mail.gmail.com>
Message-ID: <200710212248.13747.laurent.pinchart@skynet.be>

Hi Tharindu,

On Saturday 20 October 2007, Tharindu Rukshan Bamunuarachchi wrote:
> Am I unlucky ?   :-(

Your device is definitely faulty. I'm a bit puzzled regarding how the device 
could work at all without a workaround. Have you tested it with Windows ? 
Does it come with its UVC driver or does it use Microsoft's supplied driver ?

Anyway, here's a patch that should fix the problem. Could you please test it ?

Best regards,

Laurent Pinchart
-------------- next part --------------
A non-text attachment was scrubbed...
Name: divide_error.diff
Type: text/x-diff
Size: 851 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071021/310e1cc6/attachment.diff>

From joel.dimbernat at gmail.com  Sun Oct 21 23:53:55 2007
From: joel.dimbernat at gmail.com (Joel Dimbernat)
Date: Sun, 21 Oct 2007 23:53:55 +0200
Subject: [Linux-uvc-devel] Unsupported Chicony webcam
In-Reply-To: <200710212152.53216.laurent.pinchart@skynet.be>
References: <cedc8de90710210554g2c9ef400kf682a9b684f4626d@mail.gmail.com>
	<200710212152.53216.laurent.pinchart@skynet.be>
Message-ID: <cedc8de90710211453u40a0c65eucfe49a63da43bbad@mail.gmail.com>

Sorry, here's everything

I installed uvc from svn, loaded the module and tried luvcview.
Here is the output:

[boke at localhost luvcview-20070512]$ ./luvcview
luvcview version 0.2.1
Video driver: x11
A window manager is available
video /dev/video0
Unable to set format: 22.
 Init v4L2 failed !! exit fatal

the dmesg output:

Linux video capture interface: v2.00
uvcvideo: Found UVC 1.00 device Chicony USB 2.0 Camera (04f2:b008)
usbcore: registered new interface driver uvcvideo
USB Video Class driver (v0.1.0)

and now the updated lsusb
[boke at localhost trunk]$ sudo lsusb -d 04f2:b008 -v
Password:

Bus 007 Device 003: ID 04f2:b008 Chicony Electronics Co., Ltd
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x04f2 Chicony Electronics Co., Ltd
  idProduct          0xb008
  bcdDevice           93.01
  iManufacturer           2 Chicony Electronics Co., Ltd.
  iProduct                1 Chicony USB 2.0 Camera
  iSerial                 3 SN0001
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          593
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               1 Chicony USB 2.0 Camera
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              1 Chicony USB 2.0 Camera
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           77
        dwClockFrequency       15.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               4
        iTerminal               0
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {28f03370-6311-4a2e-ba2c-6890eb334016}
        bNumControl             1
        bNrPins                 1
        baSourceID( 0)          3
        bControlSize            1
        bmControls( 0)       0x01
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000000
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000053f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          Backlight Compensation
          Power Line Frequency
        iProcessing             0
        bmVideoStandards     0x 0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormarts                        1
        wTotalLength                    33025
        bEndPointAddress                    0
        bmInfo                              2
        bTerminalLink                       0
        bStillCaptureMethod                 1
        bTriggerSupport                     0
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                7
        guidFormat
{32595559-0000-0010-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   614400
        dwMaxBitRate                 18432000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
        dwFrameInterval( 5)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   202752
        dwMaxBitRate                  6082560
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
        dwFrameInterval( 5)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   153600
        dwMaxBitRate                  4608000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
        dwFrameInterval( 5)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                    50688
        dwMaxBitRate                  1520640
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
        dwFrameInterval( 5)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                    38400
        dwMaxBitRate                  1152000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
        dwFrameInterval( 5)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                           800
        dwMinBitRate                  2048000
        dwMaxBitRate                 18432000
        dwMaxVideoFrameBufferSize     2048000
        dwDefaultFrameInterval        1333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)           1333333
        dwFrameInterval( 1)           2000000
        dwFrameInterval( 2)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         7
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                  2621440
        dwMaxBitRate                 23592960
        dwMaxVideoFrameBufferSize     2621440
        dwDefaultFrameInterval        1333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)           1333333
        dwFrameInterval( 1)           2000000
        dwFrameInterval( 2)          10000000
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b20  2x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1320  3x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x13e8  3x 1000 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)

Thanks for your help

Joel



2007/10/21, Laurent Pinchart <laurent.pinchart at skynet.be>:
>
> Hi Joel,
>
> On Sunday 21 October 2007, Joel Dimbernat wrote:
> > Hello here is the lsusb -v output for my Chicony webcam:
> >
> > Bus 007 Device 003: ID 04f2:b008 Chicony Electronics Co., Ltd
> [snip]
> >
> > I hope this will help.
> >
> > Tell me if I can do anything more.
>
> Please upgrade to usbutils 0.72 or newer. Your version of lsusb doesn't
> report
> most of the UVC descriptors.
>
> It would also help if you told me about the problem you experience. Have
> you
> tried the driver ? If it doesn't work, what happens ? Be as verbose as
> possible.
>
> Best regards,
>
> Laurent Pinchart
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071021/f5df55bb/attachment.html>

From laurent.pinchart at skynet.be  Mon Oct 22 00:04:50 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 22 Oct 2007 00:04:50 +0200
Subject: [Linux-uvc-devel] Unsupported Chicony webcam
In-Reply-To: <cedc8de90710211453u40a0c65eucfe49a63da43bbad@mail.gmail.com>
References: <cedc8de90710210554g2c9ef400kf682a9b684f4626d@mail.gmail.com>
	<200710212152.53216.laurent.pinchart@skynet.be>
	<cedc8de90710211453u40a0c65eucfe49a63da43bbad@mail.gmail.com>
Message-ID: <200710220004.50597.laurent.pinchart@skynet.be>

Hi Joel,

On Sunday 21 October 2007, Joel Dimbernat wrote:
> Sorry, here's everything
>
> I installed uvc from svn, loaded the module and tried luvcview.
> Here is the output:
>
> [boke at localhost luvcview-20070512]$ ./luvcview
> luvcview version 0.2.1
> Video driver: x11
> A window manager is available
> video /dev/video0
> Unable to set format: 22.
>  Init v4L2 failed !! exit fatal

Your webcam doesn't support the MJPEG format that luvcview defaults to. Try 
selecting YUV with

luvcview -f yuv

> the dmesg output:
>
> Linux video capture interface: v2.00
> uvcvideo: Found UVC 1.00 device Chicony USB 2.0 Camera (04f2:b008)
> usbcore: registered new interface driver uvcvideo
> USB Video Class driver (v0.1.0)
>
> and now the updated lsusb
[snip]

Thanks.

Best regards,

Laurent Pinchart


From joel.dimbernat at gmail.com  Mon Oct 22 00:39:55 2007
From: joel.dimbernat at gmail.com (Joel Dimbernat)
Date: Mon, 22 Oct 2007 00:39:55 +0200
Subject: [Linux-uvc-devel] Unsupported Chicony webcam
In-Reply-To: <200710220004.50597.laurent.pinchart@skynet.be>
References: <cedc8de90710210554g2c9ef400kf682a9b684f4626d@mail.gmail.com>
	<200710212152.53216.laurent.pinchart@skynet.be>
	<cedc8de90710211453u40a0c65eucfe49a63da43bbad@mail.gmail.com>
	<200710220004.50597.laurent.pinchart@skynet.be>
Message-ID: <cedc8de90710211539v466a9415t30372cdc889dd211@mail.gmail.com>

Thanks Laurent,

With luvcview -f yuv I got the video! Cool!

but It's still not working with gstreamer, when running gstreamer-properties
to select the webcam as the video in, it outputs:

gstreamer-properties-Message: Error running pipeline 'Video for Linux
(v4l)': Could not get/set settings from/on resource. [v4l_calls.c(409):
gst_v4l_set_chan_norm (): /pipeline0/v4lsrc4:
Error setting the channel/norm settings: Argument invalide]

Any idea?


2007/10/22, Laurent Pinchart <laurent.pinchart at skynet.be>:
>
> Hi Joel,
>
> On Sunday 21 October 2007, Joel Dimbernat wrote:
> > Sorry, here's everything
> >
> > I installed uvc from svn, loaded the module and tried luvcview.
> > Here is the output:
> >
> > [boke at localhost luvcview-20070512]$ ./luvcview
> > luvcview version 0.2.1
> > Video driver: x11
> > A window manager is available
> > video /dev/video0
> > Unable to set format: 22.
> >  Init v4L2 failed !! exit fatal
>
> Your webcam doesn't support the MJPEG format that luvcview defaults to.
> Try
> selecting YUV with
>
> luvcview -f yuv
>
> > the dmesg output:
> >
> > Linux video capture interface: v2.00
> > uvcvideo: Found UVC 1.00 device Chicony USB 2.0 Camera (04f2:b008)
> > usbcore: registered new interface driver uvcvideo
> > USB Video Class driver (v0.1.0)
> >
> > and now the updated lsusb
> [snip]
>
> Thanks.
>
> Best regards,
>
> Laurent Pinchart
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071022/dcef6175/attachment.html>

From tharindunix at gmail.com  Mon Oct 22 06:16:22 2007
From: tharindunix at gmail.com (Tharindu Rukshan Bamunuarachchi)
Date: Mon, 22 Oct 2007 04:16:22 +0000
Subject: [Linux-uvc-devel] Motorola PCS in E6 Mobile Phone
In-Reply-To: <200710212248.13747.laurent.pinchart@skynet.be>
References: <c49434130710160719w7ffcec7flc14d8809b4724ec1@mail.gmail.com>
	<c49434130710190716l16e10ba4ga0cf818ba04478eb@mail.gmail.com>
	<c49434130710200823m2cb6a2e4y1c012aa1487e54f7@mail.gmail.com>
	<200710212248.13747.laurent.pinchart@skynet.be>
Message-ID: <c49434130710212116w1f17ecbcnd761b975ea1203de@mail.gmail.com>

IT IS WORKING! WORKING! WORKING!

It gave following warning ...
[  931.121144] uvcvideo: device Motorola USB Camera requested null
bandwidth, defaulting to lowest.

Another UVC camera working fine with Linux.

Wat was the wrong? AFAIK, Camera is requesting low bandwidth??


Thank you very much!

Tharindu



On 10/21/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> Hi Tharindu,
>
> On Saturday 20 October 2007, Tharindu Rukshan Bamunuarachchi wrote:
> > Am I unlucky ?   :-(
>
> Your device is definitely faulty. I'm a bit puzzled regarding how the
> device
> could work at all without a workaround. Have you tested it with Windows ?
> Does it come with its UVC driver or does it use Microsoft's supplied
> driver ?
>
> Anyway, here's a patch that should fix the problem. Could you please test
> it ?
>
> Best regards,
>
> Laurent Pinchart
>
>


-- 
Tharindu Rukshan Bamunuarachchi
asmlinkage void __init start_kernel(void)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071022/457eaaaa/attachment.html>

From laurent.pinchart at skynet.be  Mon Oct 22 11:01:37 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 22 Oct 2007 11:01:37 +0200
Subject: [Linux-uvc-devel] Motorola PCS in E6 Mobile Phone
In-Reply-To: <c49434130710212116w1f17ecbcnd761b975ea1203de@mail.gmail.com>
References: <c49434130710160719w7ffcec7flc14d8809b4724ec1@mail.gmail.com>
	<200710212248.13747.laurent.pinchart@skynet.be>
	<c49434130710212116w1f17ecbcnd761b975ea1203de@mail.gmail.com>
Message-ID: <200710221101.38127.laurent.pinchart@skynet.be>

Hi Tharindu,

On Monday 22 October 2007 06:16, Tharindu Rukshan Bamunuarachchi wrote:
> IT IS WORKING! WORKING! WORKING!

Great. I'll update the supported devices list.

> It gave following warning ...
> [  931.121144] uvcvideo: device Motorola USB Camera requested null
> bandwidth, defaulting to lowest.
>
> Another UVC camera working fine with Linux.
>
> Wat was the wrong? AFAIK, Camera is requesting low bandwidth??

The camera is requesting a zero bandwidth. This is definitely a device bug 
(you obviously can't transfer images with a 0 byte/s bandwidth). The patch I 
sent works around the problem by selecting the lowest non-zero bandwidth 
instead.

> Thank you very much!

You're welcome. Could you please answer the questions I asked in my previous 
e-mail:

> > Have you tested it with Windows ? Does it come with its UVC driver or does
> > it use Microsoft's supplied driver ?

Thanks.

Best regards,

Laurent Pinchart


From tharindunix at gmail.com  Mon Oct 22 11:31:27 2007
From: tharindunix at gmail.com (Tharindu Rukshan Bamunuarachchi)
Date: Mon, 22 Oct 2007 09:31:27 +0000
Subject: [Linux-uvc-devel] Motorola PCS in E6 Mobile Phone
In-Reply-To: <200710221101.38127.laurent.pinchart@skynet.be>
References: <c49434130710160719w7ffcec7flc14d8809b4724ec1@mail.gmail.com>
	<200710212248.13747.laurent.pinchart@skynet.be>
	<c49434130710212116w1f17ecbcnd761b975ea1203de@mail.gmail.com>
	<200710221101.38127.laurent.pinchart@skynet.be>
Message-ID: <c49434130710220231t71ec8a00m9da2b18159ec4fb4@mail.gmail.com>

Dear Laurent,

On 10/22/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> Hi Tharindu,
>
> On Monday 22 October 2007 06:16, Tharindu Rukshan Bamunuarachchi wrote:
> > IT IS WORKING! WORKING! WORKING!
>
> Great. I'll update the supported devices list.


It is Motorolla  PCS Camera - In Buit to Motorokr E6 mobile phone

> It gave following warning ...
> > [  931.121144] uvcvideo: device Motorola USB Camera requested null
> > bandwidth, defaulting to lowest.
> >
> > Another UVC camera working fine with Linux.
> >
> > Wat was the wrong? AFAIK, Camera is requesting low bandwidth??
>
> The camera is requesting a zero bandwidth. This is definitely a device bug
> (you obviously can't transfer images with a 0 byte/s bandwidth). The patch
> I
> sent works around the problem by selecting the lowest non-zero bandwidth
> instead.


I like to go into kernel/driver development/hacking.

What would you recommend to start? any book/document?

> Thank you very much!
>
> You're welcome. Could you please answer the questions I asked in my
> previous
> e-mail:


It worked for Windows XP.
Default Windows driver identified device.
MS supplied driver.

Thankx a lot.

Tharindu


> > Have you tested it with Windows ? Does it come with its UVC driver or
> does
> > > it use Microsoft's supplied driver ?
>
> Thanks.
>
> Best regards,
>
> Laurent Pinchart
>



-- 
Tharindu Rukshan Bamunuarachchi
asmlinkage void __init start_kernel(void)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071022/17218553/attachment.html>

From laurent.pinchart at skynet.be  Mon Oct 22 15:58:59 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 22 Oct 2007 15:58:59 +0200
Subject: [Linux-uvc-devel] Motorola PCS in E6 Mobile Phone
In-Reply-To: <c49434130710220231t71ec8a00m9da2b18159ec4fb4@mail.gmail.com>
References: <c49434130710160719w7ffcec7flc14d8809b4724ec1@mail.gmail.com>
	<200710221101.38127.laurent.pinchart@skynet.be>
	<c49434130710220231t71ec8a00m9da2b18159ec4fb4@mail.gmail.com>
Message-ID: <200710221558.59635.laurent.pinchart@skynet.be>

Hi Tharindu,

On Monday 22 October 2007 11:31, Tharindu Rukshan Bamunuarachchi wrote:
> On 10/22/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
[snip]
> I like to go into kernel/driver development/hacking.
>
> What would you recommend to start? any book/document?

"Linux Device Drivers, Third Edition" by Jonathan Corbet, Alessandro Rubini, 
and Greg Kroah-Hartman is quite good.

You will obviously need some C programming background. I'd recommend starting 
small. Have a look at the Linux Kernel Janitor Project at 
http://janitor.kernelnewbies.org/

> It worked for Windows XP.
> Default Windows driver identified device.
> MS supplied driver.

Another problem with the MS driver (I can't say I'm surprised). It should at 
least print a warning when the device is broken.

Best regards,

Laurent Pinchart


From tharindunix at gmail.com  Mon Oct 22 16:15:12 2007
From: tharindunix at gmail.com (Tharindu Rukshan Bamunuarachchi)
Date: Mon, 22 Oct 2007 14:15:12 +0000
Subject: [Linux-uvc-devel] Motorola PCS in E6 Mobile Phone
In-Reply-To: <200710221558.59635.laurent.pinchart@skynet.be>
References: <c49434130710160719w7ffcec7flc14d8809b4724ec1@mail.gmail.com>
	<200710221101.38127.laurent.pinchart@skynet.be>
	<c49434130710220231t71ec8a00m9da2b18159ec4fb4@mail.gmail.com>
	<200710221558.59635.laurent.pinchart@skynet.be>
Message-ID: <c49434130710220715yb822b44g32e79185cb1e0f84@mail.gmail.com>

Thankx a lot Laurent ...

Thankx for continuous support.

Tharindu

On 10/22/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> Hi Tharindu,
>
> On Monday 22 October 2007 11:31, Tharindu Rukshan Bamunuarachchi wrote:
> > On 10/22/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> [snip]
> > I like to go into kernel/driver development/hacking.
> >
> > What would you recommend to start? any book/document?
>
> "Linux Device Drivers, Third Edition" by Jonathan Corbet, Alessandro
> Rubini,
> and Greg Kroah-Hartman is quite good.
>
> You will obviously need some C programming background. I'd recommend
> starting
> small. Have a look at the Linux Kernel Janitor Project at
> http://janitor.kernelnewbies.org/
>
> > It worked for Windows XP.
> > Default Windows driver identified device.
> > MS supplied driver.
>
> Another problem with the MS driver (I can't say I'm surprised). It should
> at
> least print a warning when the device is broken.
>
> Best regards,
>
> Laurent Pinchart
>



-- 
Tharindu Rukshan Bamunuarachchi
asmlinkage void __init start_kernel(void)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071022/d860b40c/attachment.html>

From conrad_videokonferenz at gmx.de  Mon Oct 22 23:50:41 2007
From: conrad_videokonferenz at gmx.de (Conrad Beckert)
Date: Mon, 22 Oct 2007 23:50:41 +0200
Subject: [Linux-uvc-devel] [Linphone-developers] 064e:a101 Suyin Corp.
	Cam	in Acer Notebook
Message-ID: <1193089841.7810.58.camel@larissa>

Hi Laurent, Hi Simon,

... I'm the poor guy who has the 064e:a101 Suyin cam troubles :-) 

> I'm the maintainer of linphone (video chat tool), and I use uvcvideo driver
> without major problems every day,
It'd be interessting which device and on what distribution you have.

>I doubt this is a bug in your code. In this context -EPROTO is a low-level USB 
>error generated by the USB stack. It usually indicates faulty devices or 
>cables. What webcams do your complaining users use ?
I have an Acer Travelmate 5720 with the camera built in. So loose USB
cables aren't an option :-) USB works fine with my scanner, my Philips
cam, sticks, whatever. It might be worth noticing that the camera is
internally connected to the USB.

Besides of that camera does work on Linux! I can grab images directly
with ffmpeg and everything is well. 

And I might swear that I've seen the cam working on Linux and Linphone
on my Notebook. But as I have had sound woes as well, I reinstalled,
upgraded... and now the images are gone (and the sound partially works)
but I can't reproduce when this happened.

I meanwhile reinstalled the Windows version of Linphone (after having
Windows Vista totally off for a while and reinstalled) - and it does not
work eiher. Linphone-wx crashes when video is on. Other Windows camera
programs do work though.

My suspicion in this case: Something does not set some initial values in
the driver correctly. ffmpeg does - linphone (or whatever it uses to
grab the images from the cam) doesn't. No idea where this happens- in
the app or in the driver...

It could well be a different video mode (did I hear somewhere that the
cam is YUV only? - whatever this means for linphone) - probably the only
one of the many modes that causes troubles.

Anyway - I hope my information does help

Thank you for your efforts in advance.

Greetings
Conrad




From funtasyspace at yahoo.com  Tue Oct 23 15:38:51 2007
From: funtasyspace at yahoo.com (=?iso-8859-1?Q?J=F6rg_Hermsdorf?=)
Date: Tue, 23 Oct 2007 06:38:51 -0700 (PDT)
Subject: [Linux-uvc-devel] Can't edit the wiki
Message-ID: <410417.17063.qm@web50004.mail.re2.yahoo.com>

Hi all,

seems like it's no longer possible to edit the wiki. I always get:
Forbidden
You don't have permission to access /index-en.phtml
on this server.


Best Regards,
J?rg




       __________________________________ Ihr erstes Fernweh? Wo gibt es den sch?nsten Strand? www.yahoo.de/clever


From funtasyspace at yahoo.com  Tue Oct 23 21:33:19 2007
From: funtasyspace at yahoo.com (=?iso-8859-1?Q?J=F6rg_Hermsdorf?=)
Date: Tue, 23 Oct 2007 12:33:19 -0700 (PDT)
Subject: [Linux-uvc-devel] multiplexing the video frames
Message-ID: <32304.62676.qm@web50012.mail.re2.yahoo.com>

Hi all, 
>> Yes, this is expected in the V4L2 spec.  Only one process can have the
>> device streaming at any given point.  Someone needs to write a daemon
>> for V4L2 devices to multiplex the frames.  Something like PulseAudio for
>> video.
>
> What we miss is a proper multimedia framework for Linux. There are several 
> competeting projects (xine, gstreamer, nmm, ...). Any userspace module (image 
> enhancement, software autofocus, ...) would currently have to be implemented 
> for each framework.I'm wondering, if this multiplexing could be
a) easily implemented by the uvcvideo module
    - so you just pass an option specifying the number of device nodes you need, when you load the 
      uvcvideo module and the module just creates /dev/video0, /dev/video1, /dev/video2 ... and multiplexes 
      the video frames to all of them

b) if it would be a good design concept, if uvcvideo would do multiplexing, or if it would be better if a
    designated daemon would do the multiplexing?



Best Regards,
J?rg






      Machen Sie Yahoo! zu Ihrer Startseite. Los geht's: 
http://de.yahoo.com/set


From funtasyspace at yahoo.com  Tue Oct 23 21:33:19 2007
From: funtasyspace at yahoo.com (=?iso-8859-1?Q?J=F6rg_Hermsdorf?=)
Date: Tue, 23 Oct 2007 12:33:19 -0700 (PDT)
Subject: [Linux-uvc-devel] multiplexing the video frames
Message-ID: <32304.62676.qm@web50012.mail.re2.yahoo.com>

Hi all, 
>> Yes, this is expected in the V4L2 spec.  Only one process can have the
>> device streaming at any given point.  Someone needs to write a daemon
>> for V4L2 devices to multiplex the frames.  Something like PulseAudio for
>> video.
>
> What we miss is a proper multimedia framework for Linux. There are several 
> competeting projects (xine, gstreamer, nmm, ...). Any userspace module (image 
> enhancement, software autofocus, ...) would currently have to be implemented 
> for each framework.I'm wondering, if this multiplexing could be
a) easily implemented by the uvcvideo module
    - so you just pass an option specifying the number of device nodes you need, when you load the 
      uvcvideo module and the module just creates /dev/video0, /dev/video1, /dev/video2 ... and multiplexes 
      the video frames to all of them

b) if it would be a good design concept, if uvcvideo would do multiplexing, or if it would be better if a
    designated daemon would do the multiplexing?



Best Regards,
J?rg






      Machen Sie Yahoo! zu Ihrer Startseite. Los geht's: 
http://de.yahoo.com/set


From birkoff at inf.ufsc.br  Wed Oct 24 14:37:15 2007
From: birkoff at inf.ufsc.br (Cristian Thiago Moecke)
Date: Wed, 24 Oct 2007 10:37:15 -0200
Subject: [Linux-uvc-devel] W7S Chicony 1.4 WebCamp Fliped!
Message-ID: <1193229435.6723.4.camel@birkoff-laptop>

I've bought a Asus W7S laptop, and I'm using Ubuntu Gutsy on it.
Everithing is working fine, except the Chicony 1.3M UVC Webcam. 

It works (in some software, like amsn and ekiga (if v4l2 is selected),
but not on camorama) but the image is fliped, upside-down! I've searched
a lot about it, and I read on linux-uvc that it shoud be working
fine... 

I've downloaded svn version of driver, compiled and installed it, but it
still works the same way, upside down. 

Can someone help me to "unflip" that image?

Thanks a lot!

Some info that may help:

# lsusb
Bus 006 Device 002: ID 04f2:b012 Chicony Electronics Co., Ltd 
Bus 006 Device 001: ID 0000:0000  
Bus 007 Device 001: ID 0000:0000  
Bus 002 Device 001: ID 0000:0000  
Bus 004 Device 001: ID 0000:0000  
Bus 003 Device 001: ID 0000:0000  
Bus 005 Device 002: ID 0b05:1712 ASUSTek Computer, Inc. 
Bus 005 Device 001: ID 0000:0000  
Bus 001 Device 001: ID 0000:0000  


# modinfo uvcvideo
filename:       /lib/modules/2.6.22-14-generic/usb/media/uvcvideo.ko
license:        GPL
description:    USB Video Class driver
author:         Laurent Pinchart <laurent.pinchart at skynet.be>
srcversion:     DCAF20F07682353C8E1BEA0
alias:          usb:v*p*d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v5986p0200d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v5986p0102d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v5986p0100d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v18CDpCAFEd*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v090CpB371d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v041Ep4057d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v19ABp1000d*dc*dsc*dp*ic0Eisc01ip00*
alias:          usb:v046Dp08C7d*dc*dsc*dp*icFFisc01ip00*
alias:          usb:v046Dp08C6d*dc*dsc*dp*icFFisc01ip00*
alias:          usb:v046Dp08C5d*dc*dsc*dp*icFFisc01ip00*
alias:          usb:v046Dp08C3d*dc*dsc*dp*icFFisc01ip00*
alias:          usb:v046Dp08C2d*dc*dsc*dp*icFFisc01ip00*
alias:          usb:v046Dp08C1d*dc*dsc*dp*icFFisc01ip00*
alias:          usb:v045Ep00F8d*dc*dsc*dp*ic0Eisc01ip00*
depends:        usbcore,videodev,v4l2-common,v4l1-compat,compat_ioctl32
vermagic:       2.6.22-14-generic SMP mod_unload 586 
parm:           trace:uint


#v4l-info
### v4l2 device info [/dev/video0] ###
general info
    VIDIOC_QUERYCAP
        driver                  : "uvcvideo"
        card                    : "USB2.0 1.3M UVC WebCam "
        bus_info                : "0000:00:1a.7"
        version                 : 0.1.0
        capabilities            : 0x4000001 [VIDEO_CAPTURE,STREAMING]

standards

inputs
    VIDIOC_ENUMINPUT(0)
        index                   : 0
        name                    : "Camera 1"
        type                    : CAMERA
        audioset                : 0
        tuner                   : 0
        std                     : 0x0 []
        status                  : 0x0 []

video capture
    VIDIOC_ENUM_FMT(0,VIDEO_CAPTURE)
        index                   : 0
        type                    : VIDEO_CAPTURE
        flags                   : 0
        description             : "YUV 4:2:2 (YUYV)"
        pixelformat             : 0x56595559 [YUYV]
    VIDIOC_G_FMT(VIDEO_CAPTURE)
        type                    : VIDEO_CAPTURE
        fmt.pix.width           : 320
        fmt.pix.height          : 240
        fmt.pix.pixelformat     : 0x56595559 [YUYV]
        fmt.pix.field           : NONE
        fmt.pix.bytesperline    : 640
        fmt.pix.sizeimage       : 153600
        fmt.pix.colorspace      : SRGB
        fmt.pix.priv            : 0

controls
    VIDIOC_QUERYCTRL(BASE+0)
        id                      : 9963776
        type                    : INTEGER
        name                    : "Brightness"
        minimum                 : -128
        maximum                 : 127
        step                    : 1
        default_value           : 0
        flags                   : 0
    VIDIOC_QUERYCTRL(BASE+1)
        id                      : 9963777
        type                    : INTEGER
        name                    : "Contrast"
        minimum                 : 0
        maximum                 : 100
        step                    : 1
        default_value           : 0
        flags                   : 0
    VIDIOC_QUERYCTRL(BASE+2)
        id                      : 9963778
        type                    : INTEGER
        name                    : "Saturation"
        minimum                 : 0
        maximum                 : 100
        step                    : 1
        default_value           : 0
        flags                   : 0
    VIDIOC_QUERYCTRL(BASE+3)
        id                      : 9963779
        type                    : INTEGER
        name                    : "Hue"
        minimum                 : -20
        maximum                 : 20
        step                    : 1
        default_value           : 0
        flags                   : 0
    VIDIOC_QUERYCTRL(PRIVATE_BASE+0)
        id                      : 134217728
        type                    : INTEGER
        name                    : "Backlight Compensation"
        minimum                 : 0
        maximum                 : 1
        step                    : 1
        default_value           : 0
        flags                   : 0
    VIDIOC_QUERYCTRL(PRIVATE_BASE+1)
        id                      : 134217729
        type                    : MENU
        name                    : "Power Line Frequency"
        minimum                 : 0
        maximum                 : 2
        step                    : 1
        default_value           : 2
        flags                   : 0
    VIDIOC_QUERYCTRL(PRIVATE_BASE+2)
        id                      : 134217730
        type                    : INTEGER
        name                    : "Sharpness"
        minimum                 : 0
        maximum                 : 6
        step                    : 1
        default_value           : 3
        flags                   : 0

### video4linux device info [/dev/video0] ###
general info
    VIDIOCGCAP
        name                    : "USB2.0 1.3M UVC WebCam "
        type                    : 0x1 [CAPTURE]
        channels                : 1
        audios                  : 0
        maxwidth                : 1280
        maxheight               : 1024
        minwidth                : 48
        minheight               : 32

channels
ioctl VIDIOCGCHAN: Invalid argument

tuner
ioctl VIDIOCGTUNER: Invalid argument

audio
ioctl VIDIOCGAUDIO: Invalid argument

picture
    VIDIOCGPICT
        brightness              : 32125
        hue                     : 32768
        colour                  : 0
        contrast                : 0
        whiteness               : 0
        depth                   : 16
        palette                 : YUYV

buffer
ioctl VIDIOCGFBUF: Invalid argument

window
    VIDIOCGWIN
        x                       : 0
        y                       : 0
        width                   : 320
        height                  : 240
        chromakey               : 0
        flags                   : 0






From funtasyspace at yahoo.com  Wed Oct 24 19:09:00 2007
From: funtasyspace at yahoo.com (=?iso-8859-1?Q?J=F6rg_Hermsdorf?=)
Date: Wed, 24 Oct 2007 10:09:00 -0700 (PDT)
Subject: [Linux-uvc-devel] cracking/cliping noise
Message-ID: <519980.92789.qm@web50006.mail.re2.yahoo.com>

I just found this bug report on the kernel bug tracker:
http://bugzilla.kernel.org/show_bug.cgi?id=6709

Seems like this bug exists for quite some time now, but it was rejected due to 
insufficient information. So anybody who wants to help tracking down this 
bug is welcome.

To summarize: up to now, it seems that at least the all Logitech Quickcam Fusion 
and Quickcam Sphere MP models are affected by this bug.

Kind Regards,
J?rg




      Machen Sie Yahoo! zu Ihrer Startseite. Los geht's: 
http://de.yahoo.com/set


From Cato_Minor at arcor.de  Thu Oct 25 00:12:08 2007
From: Cato_Minor at arcor.de (Viktor)
Date: Thu, 25 Oct 2007 00:12:08 +0200
Subject: [Linux-uvc-devel] success for Fuji FinePix A330 web cam and
	Panasonic NV-GS320	camcorder
Message-ID: <1193263928.15077.15.camel@Saturn>

Hello everyone,

sorry, I'm a bit late to report it, but I wanted to collect the lsusb
output: Two devices work perfectly with the uvc driver, already since
svn revision 120.

I already wrote about my Fuji FinePix A330 in web cam mode a bit
earlier; however, with recent versions of uvc and ekiga, everything
works.

The other device is a MiniDV camcorder, Panasonic NV-GS320, which I did
not use as a web cam, but for transferring MiniDV video data to my hard
disk, using dvgrab 3.0 and a USB cable. I was very pleased to find that
it just worked out of the box, and that I didn't need to buy an IEEE
1394 controller, to find a place for it and to configure it. Thanks a
lot to everyone who made this possible!

I attach the "lsusb -v" outputs for both devices. Tell me if I can
supply any other information.

Have a nice day,
Viktor.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lsusb-fuji-finepix-a330.txt.bz2
Type: application/x-bzip
Size: 1638 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071025/c386e2e6/attachment.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lsusb-panasonic-nv-gs320.txt.bz2
Type: application/x-bzip
Size: 1543 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071025/c386e2e6/attachment-0001.bin>

From laurent.pinchart at skynet.be  Thu Oct 25 00:37:44 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 25 Oct 2007 00:37:44 +0200
Subject: [Linux-uvc-devel] Can't edit the wiki
In-Reply-To: <410417.17063.qm@web50004.mail.re2.yahoo.com>
References: <410417.17063.qm@web50004.mail.re2.yahoo.com>
Message-ID: <200710250037.44752.laurent.pinchart@skynet.be>

Hi J?rg,

On Tuesday 23 October 2007, J?rg Hermsdorf wrote:
> Hi all,
>
> seems like it's no longer possible to edit the wiki. I always get:
> Forbidden
> You don't have permission to access /index-en.phtml
> on this server.

A bug has been filled in the Berlios bugs management tool about this issue. 
There's not much I can do about it, so let's hope they will fix it soon.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Oct 25 00:49:02 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 25 Oct 2007 00:49:02 +0200
Subject: [Linux-uvc-devel] uvc driver issues...
In-Reply-To: <200710230544.00113.polypa@runbox.com>
References: <200710230544.00113.polypa@runbox.com>
Message-ID: <200710250049.02282.laurent.pinchart@skynet.be>

Hi Patrice,

please post support request to the linux-uvc-devel list.

On Tuesday 23 October 2007, patrice poly wrote:
> Hello Laurent
>
> I am using a pavilion laptop with an integrated Ricoh webcam
> (05ca:1810 ,ricoh-webcam-r5u870), on the latest mandriva 2008.
> This webcam worked pretty good before ( think it was 2.6.17 ; on mandriva
> 2007)

With the Linux UVC driver ? I seem to remember the r5u870 wasn't completely 
UVC-compliant. Weren't you using a r5u870 specific driver ?

> I just switched to 2008, with the 2.6.22.9 kernel , and now I get :
>
> uvcvideo: Found UVC 1.00 device <unnamed> (05ca:1810)
> uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -32 (exp. 26).
> uvcvideo: Failed to initialize the device (-5).
>
> /dev/video0 is not created

The above message looks weird. With the latest driver version the second line 
("Failed to query...") should not be fatal.

> I've read the uvc-devel archives, and found a few threads about it,
> particularly one on which you explain a workaround that implies
> unplugging/plugging the camera.

The workaround applies to Logitech webcams only so it won't help here.

> I'm not sure I understood all , but, what is sure is that I can't un/plug
> it, as it is integrated :)  ( or is there a way to fake it ? )
>
> I tried to build the module from SVN, insmod it after snd_usb_audio,
> preventing uvcvideo from beeing loaded at boot time by removing it
> in /lib/modules... and many other tinkerings, but so far I couldn't get it
> to work.
> dmesg keeps complaining about Failing to query, whatever I try.

Make sure you are using the latest driver version. Delete every occurrence of 
uvcvideo.ko in /lib/modules/`uname -r` before installing the driver from 
source. This will prevent loading an older version by mistake.

Once you're sure you're using the latest version, check the kernel log. The 
third line ("Failed to initialize...") should have disappeared, or something 
else should have been inserted before.

> I'm a bit confused ...
> Think you could try to bring me the light on what the issue is ?

I'll try :-)

> Thank you anyway for all, and hope to hear from you soon

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Oct 25 00:53:36 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 25 Oct 2007 00:53:36 +0200
Subject: [Linux-uvc-devel] Unsupported Chicony webcam
In-Reply-To: <cedc8de90710211539v466a9415t30372cdc889dd211@mail.gmail.com>
References: <cedc8de90710210554g2c9ef400kf682a9b684f4626d@mail.gmail.com>
	<200710220004.50597.laurent.pinchart@skynet.be>
	<cedc8de90710211539v466a9415t30372cdc889dd211@mail.gmail.com>
Message-ID: <200710250053.36643.laurent.pinchart@skynet.be>

Hi Joel,

On Monday 22 October 2007, Joel Dimbernat wrote:
> Thanks Laurent,
>
> With luvcview -f yuv I got the video! Cool!

Great.

> but It's still not working with gstreamer, when running
> gstreamer-properties to select the webcam as the video in, it outputs:
>
> gstreamer-properties-Message: Error running pipeline 'Video for Linux
> (v4l)': Could not get/set settings from/on resource. [v4l_calls.c(409):
> gst_v4l_set_chan_norm (): /pipeline0/v4lsrc4:
> Error setting the channel/norm settings: Argument invalide]

The Linux UVC driver doesn't support the optional VIDIOC_[GS]_STD ioctls 
because they make no sense for webcams. Gstreamer shouldn't bail out. You 
should raise the issue on their mailing list/forum.

Best regard,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Oct 25 00:59:16 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 25 Oct 2007 00:59:16 +0200
Subject: [Linux-uvc-devel] multiplexing the video frames
In-Reply-To: <32304.62676.qm@web50012.mail.re2.yahoo.com>
References: <32304.62676.qm@web50012.mail.re2.yahoo.com>
Message-ID: <200710250059.16831.laurent.pinchart@skynet.be>

Hi J?rg,

On Tuesday 23 October 2007, J?rg Hermsdorf wrote:
> Hi all,
>
> >> Yes, this is expected in the V4L2 spec.  Only one process can have the
> >> device streaming at any given point.  Someone needs to write a daemon
> >> for V4L2 devices to multiplex the frames.  Something like PulseAudio for
> >> video.
> >
> > What we miss is a proper multimedia framework for Linux. There are
> > several competeting projects (xine, gstreamer, nmm, ...). Any userspace
> > module (image enhancement, software autofocus, ...) would currently have
> > to be implemented for each framework.I'm wondering, if this multiplexing
> > could be
>
> a) easily implemented by the uvcvideo module
>     - so you just pass an option specifying the number of device nodes you
> need, when you load the uvcvideo module and the module just creates
> /dev/video0, /dev/video1, /dev/video2 ... and multiplexes the video frames
> to all of them
>
> b) if it would be a good design concept, if uvcvideo would do multiplexing,
> or if it would be better if a designated daemon would do the multiplexing?

This kind of advanced functionality is best handled in userspace. That should 
be the job of a multimedia framework (which can use a daemon or any other 
suitable method).

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Oct 25 01:11:45 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 25 Oct 2007 01:11:45 +0200
Subject: [Linux-uvc-devel]
	=?iso-8859-1?q?=5BLinphone-developers=5D_064e?=
	=?iso-8859-1?q?=3Aa101_Suyin_Corp=2E_Cam=09in_Acer_Notebook?=
In-Reply-To: <1193089841.7810.58.camel@larissa>
References: <1193089841.7810.58.camel@larissa>
Message-ID: <200710250111.45861.laurent.pinchart@skynet.be>

Hi Conrad,

On Monday 22 October 2007, Conrad Beckert wrote:
> Hi Laurent, Hi Simon,
>
> ... I'm the poor guy who has the 064e:a101 Suyin cam troubles :-)
>
> > I'm the maintainer of linphone (video chat tool), and I use uvcvideo
> > driver without major problems every day,
>
> It'd be interessting which device and on what distribution you have.
>
> >I doubt this is a bug in your code. In this context -EPROTO is a low-level
> > USB error generated by the USB stack. It usually indicates faulty devices
> > or cables. What webcams do your complaining users use ?
>
> I have an Acer Travelmate 5720 with the camera built in. So loose USB
> cables aren't an option :-) USB works fine with my scanner, my Philips
> cam, sticks, whatever. It might be worth noticing that the camera is
> internally connected to the USB.

Could you please post the USB descriptors ('lsusb -v' with usbutils 0.72 or 
newer) ? Thanks.

> Besides of that camera does work on Linux! I can grab images directly
> with ffmpeg and everything is well.
>
> And I might swear that I've seen the cam working on Linux and Linphone
> on my Notebook. But as I have had sound woes as well, I reinstalled,
> upgraded... and now the images are gone (and the sound partially works)
> but I can't reproduce when this happened.
>
> I meanwhile reinstalled the Windows version of Linphone (after having
> Windows Vista totally off for a while and reinstalled) - and it does not
> work eiher. Linphone-wx crashes when video is on. Other Windows camera
> programs do work though.

Weird, but I don't know if that's related to the Linux issue you reported.

> My suspicion in this case: Something does not set some initial values in
> the driver correctly. ffmpeg does - linphone (or whatever it uses to
> grab the images from the cam) doesn't. No idea where this happens- in
> the app or in the driver...

That's possible but quite unlikely. The driver should initialise the webcam 
properly.

There might be a timing issue though. Maybe linphone submits requests so fast 
that the camera crashes at some point. Could you raise the trace level 
('modprobe uvcvideo trace=255' or 'echo 255 
> /sys/modules/uvcvideo/parameters/trace'), start linphone and post the 
related portion of the kernel log ('dmesg') ?

> It could well be a different video mode (did I hear somewhere that the
> cam is YUV only? - whatever this means for linphone) - probably the only
> one of the many modes that causes troubles.

The driver will return an error if linphone tries to select an unsupported 
format without even bothering the webcam.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Oct 25 01:29:55 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 25 Oct 2007 01:29:55 +0200
Subject: [Linux-uvc-devel]
	=?utf-8?q?success_for_Fuji_FinePix_A330_web_cam?=
	=?utf-8?q?_and_Panasonic_NV-GS320=09camcorder?=
In-Reply-To: <1193263928.15077.15.camel@Saturn>
References: <1193263928.15077.15.camel@Saturn>
Message-ID: <200710250129.55262.laurent.pinchart@skynet.be>

Hi Viktor,

On Thursday 25 October 2007, Viktor wrote:
> Hello everyone,
>
> sorry, I'm a bit late to report it, but I wanted to collect the lsusb
> output: Two devices work perfectly with the uvc driver, already since
> svn revision 120.
>
> I already wrote about my Fuji FinePix A330 in web cam mode a bit
> earlier; however, with recent versions of uvc and ekiga, everything
> works.
>
> The other device is a MiniDV camcorder, Panasonic NV-GS320, which I did
> not use as a web cam, but for transferring MiniDV video data to my hard
> disk, using dvgrab 3.0 and a USB cable. I was very pleased to find that
> it just worked out of the box, and that I didn't need to buy an IEEE
> 1394 controller, to find a place for it and to configure it. Thanks a
> lot to everyone who made this possible!
>
> I attach the "lsusb -v" outputs for both devices. Tell me if I can
> supply any other information.

Thanks a lot for the detailed report. I updated the website.

Best regards,

Laurent Pinchart


From joel.dimbernat at gmail.com  Thu Oct 25 09:54:38 2007
From: joel.dimbernat at gmail.com (Joel Dimbernat)
Date: Thu, 25 Oct 2007 09:54:38 +0200
Subject: [Linux-uvc-devel] Unsupported Chicony webcam
In-Reply-To: <200710250053.36643.laurent.pinchart@skynet.be>
References: <cedc8de90710210554g2c9ef400kf682a9b684f4626d@mail.gmail.com>
	<200710220004.50597.laurent.pinchart@skynet.be>
	<cedc8de90710211539v466a9415t30372cdc889dd211@mail.gmail.com>
	<200710250053.36643.laurent.pinchart@skynet.be>
Message-ID: <cedc8de90710250054p14af800dq460e2597b50e3ccd@mail.gmail.com>

It's a gstreamer "bug": I filed one if you're interested

http://bugzilla.gnome.org/show_bug.cgi?id=490034

Joel

On 10/25/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> Hi Joel,
>
> On Monday 22 October 2007, Joel Dimbernat wrote:
> > Thanks Laurent,
> >
> > With luvcview -f yuv I got the video! Cool!
>
> Great.
>
> > but It's still not working with gstreamer, when running
> > gstreamer-properties to select the webcam as the video in, it outputs:
> >
> > gstreamer-properties-Message: Error running pipeline 'Video for Linux
> > (v4l)': Could not get/set settings from/on resource. [v4l_calls.c(409):
> > gst_v4l_set_chan_norm (): /pipeline0/v4lsrc4:
> > Error setting the channel/norm settings: Argument invalide]
>
> The Linux UVC driver doesn't support the optional VIDIOC_[GS]_STD ioctls
> because they make no sense for webcams. Gstreamer shouldn't bail out. You
> should raise the issue on their mailing list/forum.
>
> Best regard,
>
> Laurent Pinchart
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071025/0e44af81/attachment.html>

From schillhuber at amm.mw.tum.de  Thu Oct 25 09:57:33 2007
From: schillhuber at amm.mw.tum.de (Gerhard Schillhuber)
Date: Thu, 25 Oct 2007 09:57:33 +0200
Subject: [Linux-uvc-devel] Logitech Quickcam Autofocus - manual focus
Message-ID: <47204C6D.4000205@amm.mw.tum.de>

Hi,
I'm using a Logitech Quickcam Pro for Notebooks (046d:0991) together with
OpenCV for some computer vision experiments. For camera calibration I need
several pictures of a chessboard with constant intrinsic parameters, that
means that the focus of the camera has to be constant. So I don't want
autofocus feature!

Here my questions:
- Autofocus is by default not active and only works with the Windows driver?
- For Linux there is no hidden automatic change of the focus, isn't it?
- If I use the webcam without any focus adjustment, is the focus always
the same (set to infinity)?
- If I want to change the focus manually, than I have to do it by my own
in a userspace program, as mentioned in some previous posts. Is the a code
snippet available?

Regards,
  Gerhard




From laurent.pinchart at skynet.be  Thu Oct 25 10:23:11 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 25 Oct 2007 10:23:11 +0200
Subject: [Linux-uvc-devel] Logitech Quickcam Autofocus - manual focus
In-Reply-To: <47204C6D.4000205@amm.mw.tum.de>
References: <47204C6D.4000205@amm.mw.tum.de>
Message-ID: <200710251023.11161.laurent.pinchart@skynet.be>

Hi Gerhard,

On Thursday 25 October 2007 09:57, Gerhard Schillhuber wrote:
> Hi,
> I'm using a Logitech Quickcam Pro for Notebooks (046d:0991) together with
> OpenCV for some computer vision experiments. For camera calibration I need
> several pictures of a chessboard with constant intrinsic parameters, that
> means that the focus of the camera has to be constant. So I don't want
> autofocus feature!
>
> Here my questions:
> - Autofocus is by default not active and only works with the Windows
> driver?

Autofocus is implemented in software on the host for current Logitech webcams. 
There is no autofocus for Linux.

> - For Linux there is no hidden automatic change of the focus, isn't 
> it?

Right.

> - If I use the webcam without any focus adjustment, is the focus always 
> the same (set to infinity)?

Yes.

> - If I want to change the focus manually, than I have to do it by my own
> in a userspace program, as mentioned in some previous posts.

Right.

> Is the a code snippet available?

Not yet but soon :-) A userspace tool to handle vendor-specific controls is on 
the way. It will be announced on the mailing list.

Best regards,

Laurent Pinchart


From richard at 2007.atterer.net  Thu Oct 25 11:15:33 2007
From: richard at 2007.atterer.net (Richard Atterer)
Date: Thu, 25 Oct 2007 11:15:33 +0200
Subject: [Linux-uvc-devel] multiplexing the video frames
In-Reply-To: <200710250059.16831.laurent.pinchart@skynet.be>
References: <32304.62676.qm@web50012.mail.re2.yahoo.com>
	<200710250059.16831.laurent.pinchart@skynet.be>
Message-ID: <20071025091533.GB4176@fluff.lan>

On Thu, Oct 25, 2007 at 12:59:16AM +0200, Laurent Pinchart wrote:
> On Tuesday 23 October 2007, J?rg Hermsdorf wrote:
> > b) if it would be a good design concept, if uvcvideo would do 
> > multiplexing, or if it would be better if a designated daemon would do 
> > the multiplexing?
> 
> This kind of advanced functionality is best handled in userspace. That 
> should be the job of a multimedia framework (which can use a daemon or 
> any other suitable method).


From richard at 2007.atterer.net  Thu Oct 25 11:20:44 2007
From: richard at 2007.atterer.net (Richard Atterer)
Date: Thu, 25 Oct 2007 11:20:44 +0200
Subject: [Linux-uvc-devel] multiplexing the video frames
In-Reply-To: <20071025091533.GB4176@fluff.lan>
References: <32304.62676.qm@web50012.mail.re2.yahoo.com>
	<200710250059.16831.laurent.pinchart@skynet.be>
	<20071025091533.GB4176@fluff.lan>
Message-ID: <20071025092044.GA7636@fluff.lan>

On Thu, Oct 25, 2007 at 11:15:33AM +0200, Richard Atterer wrote:
> The _v4l2 kernel developers_ would also have to supply the userspace side 
> of the API to avoid this kind of fragmentation. A small "libv4l2" with a 
> simple filtering/plugin mechanism would be enough...

*cough* *must-search-web-before-posting* 
http://linuxtv.org/v4lwiki/index.php/V4L2UserspaceLibrary

  Richard

-- 
  __   _
  |_) /|  Richard Atterer
  | \/?|  http://geht.net.gibts.bei.atterer.net
  ? '` ?


From patrice_menestrel at yahoo.fr  Thu Oct 25 15:09:45 2007
From: patrice_menestrel at yahoo.fr (patrice menestrel)
Date: Thu, 25 Oct 2007 13:09:45 +0000 (GMT)
Subject: [Linux-uvc-devel] Microsoft VX-6000 webcam, an uvc device ?
Message-ID: <392083.49746.qm@web25406.mail.ukl.yahoo.com>

Hi

I discovered Ubuntu 7.10 this week and try to make my webcam work.

There is one problem : it is a Microsoft VX-6000 and this model doesn't appear in your compatibility list (but NX-6000 does).

Do you know : 
- if your driver is working with this model
- if not, how can I do ?

Thank you very much for your help

Sincerely

Patrice Menestrel (a beginner)


      _____________________________________________________________________________ 
Ne gardez plus qu'une seule adresse mail ! Copiez vos mails vers Yahoo! Mail 


From laurent.pinchart at skynet.be  Thu Oct 25 17:08:16 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 25 Oct 2007 17:08:16 +0200
Subject: [Linux-uvc-devel] Microsoft VX-6000 webcam, an uvc device ?
In-Reply-To: <392083.49746.qm@web25406.mail.ukl.yahoo.com>
References: <392083.49746.qm@web25406.mail.ukl.yahoo.com>
Message-ID: <200710251708.16773.laurent.pinchart@skynet.be>

Hi Patrice,

On Thursday 25 October 2007 15:09, patrice menestrel wrote:
> Hi
>
> I discovered Ubuntu 7.10 this week and try to make my webcam work.
>
> There is one problem : it is a Microsoft VX-6000 and this model doesn't
> appear in your compatibility list (but NX-6000 does).

Please post the device USB descriptors ('lsusb -v' with usbutils 0.72 or 
newer).

> Do you know :
> - if your driver is working with this model

I don't know.

> - if not, how can I do ?

Why don't you try the driver and see if it supports the webcam ? If it 
doesn't, send an e-mail to the list including the kernel log output (dmesg).

Best regards,

Laurent Pinchart


From jean-pierre.sacre at wanadoo.fr  Thu Oct 25 23:30:27 2007
From: jean-pierre.sacre at wanadoo.fr (jean-pierre.sacre)
Date: Thu, 25 Oct 2007 23:30:27 +0200
Subject: [Linux-uvc-devel] YBERSONYCAM YSC-1120
Message-ID: <1193347827.8920.14.camel@hector1>

Hi
I am in trouble with a movie camera YSC-1120, this camera can be use as
a webcam, the chipset is from Chicony

Bus 004 Device 016: ID 04f2:a220 Chicony Electronics Co., Ltd 

I have installed uvc , loaded the module and tried luvcview.

chmod 755 luvcview
jean-pierre at hector1:~/luvcview-20070512/luvcview-20070512$ ./luvcview 
luvcview version 0.2.1 
Video driver: x11
A window manager is available
video /dev/video0 
ERROR opening V4L interface 
: No such file or directory

jean-pierre at hector1:~$ lsmod | grep uvc
uvcvideo               42500  0 
videodev               28160  1 uvcvideo
v4l1_compat            15236  2 uvcvideo,videodev
v4l2_common            25216  2 uvcvideo,videodev
usbcore               134280  4 uvcvideo,ehci_hcd,uhci_hcd

dmesg give me this
[ 6581.173304] usb 4-6: new high speed USB device using ehci_hcd and
address 16
[ 6581.306049] usb 4-6: configuration #1 chosen from 1 choice
 
and this is the result for lsusb -d 04f2:a220 -v

Bus 004 Device 016: ID 04f2:a220 Chicony Electronics Co., Ltd 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  idVendor           0x04f2 Chicony Electronics Co., Ltd
  idProduct          0xa220 
  bcdDevice            0.00
  iManufacturer           1 
  iProduct                0 
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           39
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              100mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           3
      bInterfaceClass         0 (Defined at Interface level)
      bInterfaceSubClass      0 
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x01  EP 1 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
can't get device qualifier: Operation not permitted
can't get debug descriptor: Operation not permitted
cannot read device status, Operation not permitted (1)

Is this cam?ra able to work with Linux ?
Thankyou for your help.

Sorry for my english but this is not my native language





From dggonz at gmail.com  Fri Oct 26 00:37:42 2007
From: dggonz at gmail.com (=?ISO-8859-1?Q?Diego_Gonz=E1lez?=)
Date: Fri, 26 Oct 2007 00:37:42 +0200
Subject: [Linux-uvc-devel] Logitech Quickcam pro for Notebooks fps problems
Message-ID: <8bd748e80710251537g2f0ff957j1030e64ae730e763@mail.gmail.com>

hi,

I'm using the Logitech Quickcam pro for Notbooks to do some computer
vision related tasks using OpenCV. If have tried to configure the
camera to get around 20-40 fps but all that i get is 5fps at max.
luvcview reports that the modes and it seems that i should be able to
get 640x480 at 20,25 or 30 fps. But not even luvcview gets that many
frames.

Do you have any pointer about what could be happening? Any idea?

Best regards,
Diego


From richard at 2007.atterer.net  Fri Oct 26 01:31:29 2007
From: richard at 2007.atterer.net (Richard Atterer)
Date: Fri, 26 Oct 2007 01:31:29 +0200
Subject: [Linux-uvc-devel] Logitech Quickcam pro for Notebooks
	fps	problems
In-Reply-To: <8bd748e80710251537g2f0ff957j1030e64ae730e763@mail.gmail.com>
References: <8bd748e80710251537g2f0ff957j1030e64ae730e763@mail.gmail.com>
Message-ID: <20071025233129.GA7406@vilya>

On Fri, Oct 26, 2007 at 12:37:42AM +0200, Diego Gonz?lez wrote:
> I'm using the Logitech Quickcam pro for Notbooks to do some computer 
> vision related tasks using OpenCV. If have tried to configure the camera 
> to get around 20-40 fps but all that i get is 5fps at max. luvcview 
> reports that the modes and it seems that i should be able to get 640x480 
> at 20,25 or 30 fps. But not even luvcview gets that many frames.

You need *lots* of light to make the camera switch to higher fps values.

By default, the camera is in "auto exposure mode", which means that it will 
automatically lower the frame rate to be able expose longer to get 
satisfactory results.

Theoretically, it should be possible to switch auto exposure off and then 
lower the exposure duration to something like 1/200 second or shorter to 
get more fps. With my Quickcam 9000 Pro, I have only been able to do this 
using the "v4l2ucp" tool - luvcview's controls somehow do not work, they 
always return "ioctl set control error". However even that no longer works 
with recent versions of the driver - the exposure control no longer shows 
up in v4l2ucp. Maybe this is due to the ongoing "dynamic controls" work?

Cheers,

  Richard

-- 
  __   _
  |_) /|  Richard Atterer     |  GnuPG key: 888354F7
  | \/?|  http://atterer.net  |  08A9 7B7D 3D13 3EF2 3D25  D157 79E6 F6DC 8883 54F7
  ? '` ?


From c.montemaggiore at fastautomation.it  Fri Oct 26 12:29:32 2007
From: c.montemaggiore at fastautomation.it (Claudio Montemaggiore - FAST S.p.A.)
Date: Fri, 26 Oct 2007 12:29:32 +0200
Subject: [Linux-uvc-devel] FinePix E550 problem
Message-ID: <001d01c817bb$18d6e980$b200a8c0@fastglobale.locale>

Hi,
Some days ago I' ve tested FinePix E550 camera on an ARM based system.
As reported in previous mailing list,using uvccapture, I got snap.jpg.

 
Now, I can't get more any image. The steps made are:

1) install the driver uvcvideo.
 dmesg say:
        usbcore: registered new driver uvcvideo
        USB Video Class driver (v0.1.0)
 2) Link the cam to the system:
    dmesg say:
    usb 2-2: new full speed USB device using isp116x-hcd and address 2
scsi1 : SCSI emulation for USB Mass Storage devices
usb-storage: device found at 2
usb-storage: waiting for device to settle before scanning
  Vendor: FUJIFILM  Model: USB-DRIVEUNIT     Rev: 1.00
  Type:   Direct-Access                      ANSI SCSI revision: 00
SCSI device sdb: 32000 512-byte hdwr sectors (16 MB)
sdb: Write Protect is off
sdb: Mode Sense: 07 00 00 00
sdb: assuming drive cache: write through
SCSI device sdb: 32000 512-byte hdwr sectors (16 MB)
sdb: Write Protect is off
sdb: Mode Sense: 07 00 00 00
sdb: assuming drive cache: write through
 sdb: sdb1
Attached scsi removable disk sdb at scsi1, channel 0, id 0, lun 0
Attached scsi generic sg1 at scsi1, channel 0, id 0, lun 0,  type 0
usb-storage: device scan complete
3) Running the uvccapture :
 ./uvccapture -v 
 Using videodevice: /dev/video0
Saving images to: snap.jpg
Image size: 320x240
Taking snapshot every 0 seconds
Taking images using mmap
Chiamo Init_videoIn
ERROR opening V4L interface
: No such device


The /dev/video0 exist. So, what is the problem?


No new messase is present in dmesg output.

Thank you for any suggestions.

Best regards,

Claudio Montemaggiore

    
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071026/621070db/attachment.html>

From c.montemaggiore at fastautomation.it  Fri Oct 26 12:52:55 2007
From: c.montemaggiore at fastautomation.it (Claudio Montemaggiore - FAST S.p.A.)
Date: Fri, 26 Oct 2007 12:52:55 +0200
Subject: [Linux-uvc-devel] FinePix E550 problem Solved
Message-ID: <004901c817be$5d3b94b0$b200a8c0@fastglobale.locale>

Sorry,
The Cam has to be set in PC-CAM mode.

Bye.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071026/c0b17131/attachment.html>

From laurent.pinchart at skynet.be  Sat Oct 27 00:11:08 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 27 Oct 2007 00:11:08 +0200
Subject: [Linux-uvc-devel] YBERSONYCAM YSC-1120
In-Reply-To: <1193347827.8920.14.camel@hector1>
References: <1193347827.8920.14.camel@hector1>
Message-ID: <200710270011.08803.laurent.pinchart@skynet.be>

Hi Jean-Pierre,

On Thursday 25 October 2007, jean-pierre.sacre wrote:
> Hi
> I am in trouble with a movie camera YSC-1120, this camera can be use as
> a webcam, the chipset is from Chicony
>
> Bus 004 Device 016: ID 04f2:a220 Chicony Electronics Co., Ltd
>
> I have installed uvc , loaded the module and tried luvcview.
>
> chmod 755 luvcview
> jean-pierre at hector1:~/luvcview-20070512/luvcview-20070512$ ./luvcview
> luvcview version 0.2.1
> Video driver: x11
> A window manager is available
> video /dev/video0
> ERROR opening V4L interface
>
> : No such file or directory
>
> jean-pierre at hector1:~$ lsmod | grep uvc
> uvcvideo               42500  0
> videodev               28160  1 uvcvideo
> v4l1_compat            15236  2 uvcvideo,videodev
> v4l2_common            25216  2 uvcvideo,videodev
> usbcore               134280  4 uvcvideo,ehci_hcd,uhci_hcd
>
> dmesg give me this
> [ 6581.173304] usb 4-6: new high speed USB device using ehci_hcd and
> address 16
> [ 6581.306049] usb 4-6: configuration #1 chosen from 1 choice
>
> and this is the result for lsusb -d 04f2:a220 -v
>
> Bus 004 Device 016: ID 04f2:a220 Chicony Electronics Co., Ltd
> Device Descriptor:
>   bLength                18
>   bDescriptorType         1
>   bcdUSB               2.00
>   bDeviceClass            0 (Defined at Interface level)
>   bDeviceSubClass         0
>   bDeviceProtocol         0
>   bMaxPacketSize0        64
>   idVendor           0x04f2 Chicony Electronics Co., Ltd
>   idProduct          0xa220
>   bcdDevice            0.00
>   iManufacturer           1
>   iProduct                0
>   iSerial                 0
>   bNumConfigurations      1
>   Configuration Descriptor:
>     bLength                 9
>     bDescriptorType         2
>     wTotalLength           39
>     bNumInterfaces          1
>     bConfigurationValue     1
>     iConfiguration          0
>     bmAttributes         0x80
>       (Bus Powered)
>     MaxPower              100mA
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       0
>       bNumEndpoints           3
>       bInterfaceClass         0 (Defined at Interface level)
>       bInterfaceSubClass      0
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x01  EP 1 OUT
>         bmAttributes            2
>           Transfer Type            Bulk
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0200  1x 512 bytes
>         bInterval               0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            2
>           Transfer Type            Bulk
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0200  1x 512 bytes
>         bInterval               0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x83  EP 3 IN
>         bmAttributes            2
>           Transfer Type            Bulk
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0200  1x 512 bytes
>         bInterval               0
> can't get device qualifier: Operation not permitted
> can't get debug descriptor: Operation not permitted
> cannot read device status, Operation not permitted (1)
>
> Is this cam?ra able to work with Linux ?

Your camera isn't a UVC device so it won't work with the Linux UVC driver. You 
will have to search for another driver (or write one yourself ;-) ).

> Thankyou for your help.
>
> Sorry for my english but this is not my native language

No worries.

Best regards and good luck,

Laurent Pinchart


From eigenlambda at gmail.com  Sun Oct 28 00:20:22 2007
From: eigenlambda at gmail.com (Thomas Folz-Donahue)
Date: Sat, 27 Oct 2007 18:20:22 -0400
Subject: [Linux-uvc-devel] Chicony 04f2:b027 in a Gateway T-1616
In-Reply-To: <mailman.2310.1193522823.2213.linux-uvc-devel@lists.berlios.de>
References: <mailman.2310.1193522823.2213.linux-uvc-devel@lists.berlios.de>
Message-ID: <c459ed240710271520ra296a04ta54ecb21ffc566a8@mail.gmail.com>

Hello!

I am using Ubuntu Gutsy on a Gateway T-1616.  This model comes with an
internal USB webcam.  Drivers are loaded for this hardware, but it
doesn't actually work.  Infos:

from dmesg:
[   40.526966] uvcvideo: Found UVC 1.00 device Gateway USB 2.0 Webcam
(04f2:b027)
[   40.528700] usbcore: registered new interface driver uvcvideo
[   40.528705] USB Video Class driver (v0.1.0)

from webcam:
reading config file: /home/eigenlambda/.webcamrc
video4linux webcam v1.5 - (c) 1998-2002 Gerd Knorr
grabber config:
  size 320x240 [16 bit YUV 4:2:2 (packed, YUYV)]
  input (null), norm (null), jpeg quality 75
  rotate=0, top=0, left=0, bottom=240, right=320
ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0
[];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.seconds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0;memory=unknown):
Invalid argument
capturing image failed

the relevant portion of an 'lsusb -vvv' and the output from v4l-info
have been attached.  Let me know if there are any further diagnostics
or experimental driver code that I could try.

~thomas
--
cartwheel ^(^_^)> v(.-.)v <(^_^)^




-- 
cartwheel ^(^_^)> v(.-.)v <(^_^)^
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lsusb
Type: application/octet-stream
Size: 17107 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071027/4e1d64ea/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: v4linfo
Type: application/octet-stream
Size: 4939 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071027/4e1d64ea/attachment-0001.obj>

From ben at benmorris.org.uk  Sun Oct 28 12:52:59 2007
From: ben at benmorris.org.uk (Ben Morris)
Date: Sun, 28 Oct 2007 11:52:59 +0000
Subject: [Linux-uvc-devel] Non-working device
Message-ID: <200710281153.01400.ben@benmorris.org.uk>

I installed linux-uvc, SVN version from a Gentoo ebuild.
There was a post-install note saying to get involved here if a device doesn't 
work. I hope I am not spamming the wrong list. :-)

I have an HP dv9574 laptop with a built-in webcam. What sort of camera it 
actually is is not obvious, but I believe this lsusb entry is it:
Bus 002 Device 004: ID 064e:a101 Suyin Corp.

Here is dmesg's output on loading the uvcvideo module:
uvcvideo: Found UVC 1.00 device HP Webcam (064e:a101)
usbcore: registered new interface driver uvcvideo
USB Video Class driver (v0.1.0)

The dev entry is created but does not seem to work:
# cat /dev/video0
cat: /dev/video0: No such device

The file does exist, by the way.

Running xawtv causes the blue LED next to the camera to light briefly, but 
does not produce a picture.

I would be glad to assist in any way I can to help add support for this 
device. I can't code but I will do any tests you suggest.


Thanks,

Ben Morris


From simon.morlat at linphone.org  Tue Oct 30 11:05:47 2007
From: simon.morlat at linphone.org (Simon Morlat)
Date: Tue, 30 Oct 2007 11:05:47 +0100
Subject: [Linux-uvc-devel] [Linphone-developers] 064e:a101 Suyin Corp.
	Cam in Acer Notebook
In-Reply-To: <200710131223.57515.laurent.pinchart@skynet.be>
References: <20070923125827.10910@gmx.net>
	<200710121450.38041.simon.morlat@linphone.org>
	<200710131223.57515.laurent.pinchart@skynet.be>
Message-ID: <200710301105.47982.simon.morlat@linphone.org>

Hi,

Thank you for the advice. I wonder if the problem isn't related to threads, 
since the grabbing process is done within a dedicated thread in linphone. 
Furthermore, the init phase (open, ioctl to setup format and size) is done 
from one thread, while the mmaps, stream-on and QBUF and DQBUF are done by 
another thread.
However the instructions are serialised (the mmap/stream-on/Q/DQ) occurs AFTER 
the init phase.
But I wonder if it cannot confuse the usb stack.
The last complain was from somebody using an "Acer CrystalEye" camera.

Simon

Le Saturday 13 October 2007 12:23:57 Laurent Pinchart, vous avez ?crit?:
> Hi Simon,
>
> On Friday 12 October 2007, Simon Morlat wrote:
> > Hi,
> >
> > I'm the maintainer of linphone (video chat tool), and I use uvcvideo
> > driver without major problems every day,
>
> Nice to hear :-)
>
> > however I receive many complaints of users having "Protocol error"
> > (EPROT) returned by the VIDEOC_STREAMON ioctl.
>
> Not as nice :-/
>
> > The bug is probably in my code, but if you have any hints about the
> > meaning of this error, you're welcome !
>
> I doubt this is a bug in your code. In this context -EPROTO is a low-level
> USB error generated by the USB stack. It usually indicates faulty devices
> or cables. What webcams do your complaining users use ?
>
> Best regards,
>
> Laurent Pinchart




From laurent.pinchart at skynet.be  Tue Oct 30 23:01:58 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 30 Oct 2007 23:01:58 +0100
Subject: [Linux-uvc-devel] Non-working device
In-Reply-To: <200710281153.01400.ben@benmorris.org.uk>
References: <200710281153.01400.ben@benmorris.org.uk>
Message-ID: <200710302301.58305.laurent.pinchart@skynet.be>

Hi Ben,

On Sunday 28 October 2007, Ben Morris wrote:
> I installed linux-uvc, SVN version from a Gentoo ebuild.
> There was a post-install note saying to get involved here if a device
> doesn't work. I hope I am not spamming the wrong list. :-)

This is the right list. Let's see if your post should be considered as 
spam :-)

> I have an HP dv9574 laptop with a built-in webcam. What sort of camera it
> actually is is not obvious, but I believe this lsusb entry is it:
> Bus 002 Device 004: ID 064e:a101 Suyin Corp.
>
> Here is dmesg's output on loading the uvcvideo module:
> uvcvideo: Found UVC 1.00 device HP Webcam (064e:a101)
> usbcore: registered new interface driver uvcvideo
> USB Video Class driver (v0.1.0)

Looks great so far.

> The dev entry is created but does not seem to work:
> # cat /dev/video0
> cat: /dev/video0: No such device

That's perfectly normal. The Linux UVC driver doesn't support read() (yet). 
Only softwares using the mmap() streaming method will work.

> The file does exist, by the way.
>
> Running xawtv causes the blue LED next to the camera to light briefly, but
> does not produce a picture.

xawtv has known bugs. Could you please try luvcview ? As your camera doesn't 
support MJPEG, you should run it with

luvcview -f yuv

> I would be glad to assist in any way I can to help add support for this
> device. I can't code but I will do any tests you suggest.

If luvcview works (and it probably will), Ekiga should work as well. aMsn and 
mplayer should too if you use recent enough versions.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Oct 30 23:07:23 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 30 Oct 2007 23:07:23 +0100
Subject: [Linux-uvc-devel] Chicony 04f2:b027 in a Gateway T-1616
In-Reply-To: <c459ed240710271520ra296a04ta54ecb21ffc566a8@mail.gmail.com>
References: <mailman.2310.1193522823.2213.linux-uvc-devel@lists.berlios.de>
	<c459ed240710271520ra296a04ta54ecb21ffc566a8@mail.gmail.com>
Message-ID: <200710302307.23885.laurent.pinchart@skynet.be>

Hi Thomas,

On Sunday 28 October 2007, Thomas Folz-Donahue wrote:
> Hello!
>
> I am using Ubuntu Gutsy on a Gateway T-1616.  This model comes with an
> internal USB webcam.  Drivers are loaded for this hardware, but it
> doesn't actually work.  Infos:
>
> from dmesg:
> [   40.526966] uvcvideo: Found UVC 1.00 device Gateway USB 2.0 Webcam
> (04f2:b027)
> [   40.528700] usbcore: registered new interface driver uvcvideo
> [   40.528705] USB Video Class driver (v0.1.0)
>
> from webcam:
> reading config file: /home/eigenlambda/.webcamrc
> video4linux webcam v1.5 - (c) 1998-2002 Gerd Knorr
> grabber config:
>   size 320x240 [16 bit YUV 4:2:2 (packed, YUYV)]
>   input (null), norm (null), jpeg quality 75
>   rotate=0, top=0, left=0, bottom=240, right=320
> ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0
> [];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.s
>econds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0
>;memory=unknown): Invalid argument
> capturing image failed

Please upgrade to a more recent version. xawtv up to 3.95 has known bugs. They 
should have been fixed in the latest snapshot.

> the relevant portion of an 'lsusb -vvv' and the output from v4l-info
> have been attached.  Let me know if there are any further diagnostics
> or experimental driver code that I could try.

Thanks for the lsusb output. This looks like a pretty sane camera to me. If it 
still doesn't work with the latest xawtv snapshot, could you please try 
luvcview ? As your webcam doesn't support MJPEG please run it with

luvcview -f yuv.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Oct 30 23:12:19 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 30 Oct 2007 23:12:19 +0100
Subject: [Linux-uvc-devel] [Linphone-developers] 064e:a101 Suyin Corp.
	Cam in Acer Notebook
In-Reply-To: <200710301105.47982.simon.morlat@linphone.org>
References: <20070923125827.10910@gmx.net>
	<200710131223.57515.laurent.pinchart@skynet.be>
	<200710301105.47982.simon.morlat@linphone.org>
Message-ID: <200710302312.19279.laurent.pinchart@skynet.be>

On Tuesday 30 October 2007, Simon Morlat wrote:
> Hi,
>
> Thank you for the advice. I wonder if the problem isn't related to threads,
> since the grabbing process is done within a dedicated thread in linphone.

That's indeed a difference, but I fail to see how it would affect the driver 
(not that it can't, I just fail to see how it would :-) ).

> Furthermore, the init phase (open, ioctl to setup format and size) is done
> from one thread, while the mmaps, stream-on and QBUF and DQBUF are done by
> another thread.
> However the instructions are serialised (the mmap/stream-on/Q/DQ) occurs
> AFTER the init phase.
> But I wonder if it cannot confuse the usb stack.

The USB stack shouldn't care, or at least I think it shouldn't. Would it be 
possible to move the init phase to the streaming thread for testing purpose ?

> The last complain was from somebody using an "Acer CrystalEye" camera.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Oct 31 16:08:32 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 31 Oct 2007 16:08:32 +0100
Subject: [Linux-uvc-devel] Non-working device
In-Reply-To: <200710311451.48926.ben@benmorris.org.uk>
References: <200710281153.01400.ben@benmorris.org.uk>
	<200710302301.58305.laurent.pinchart@skynet.be>
	<200710311451.48926.ben@benmorris.org.uk>
Message-ID: <200710311608.32851.laurent.pinchart@skynet.be>

Hi Ben,

On Wednesday 31 October 2007 15:51, Ben Morris wrote:
> On Tuesday 30 October 2007 22:01:58 you wrote:
> > Hi Ben,
> >
> > On Sunday 28 October 2007, Ben Morris wrote:
> > > I installed linux-uvc, SVN version from a Gentoo ebuild.
> > > There was a post-install note saying to get involved here if a device
> > > doesn't work. I hope I am not spamming the wrong list. :-)
> >
> > This is the right list. Let's see if your post should be considered as
> > spam :-)
> >
> > > I have an HP dv9574 laptop with a built-in webcam. What sort of camera
> > > it actually is is not obvious, but I believe this lsusb entry is it:
> > > Bus 002 Device 004: ID 064e:a101 Suyin Corp.
> > >
> > > Here is dmesg's output on loading the uvcvideo module:
> > > uvcvideo: Found UVC 1.00 device HP Webcam (064e:a101)
> > > usbcore: registered new interface driver uvcvideo
> > > USB Video Class driver (v0.1.0)
> >
> > Looks great so far.
> >
> > > The dev entry is created but does not seem to work:
> > > # cat /dev/video0
> > > cat: /dev/video0: No such device
> >
> > That's perfectly normal. The Linux UVC driver doesn't support read()
> > (yet). Only softwares using the mmap() streaming method will work.
> >
> > > The file does exist, by the way.
> > >
> > > Running xawtv causes the blue LED next to the camera to light briefly,
> > > but does not produce a picture.
> >
> > xawtv has known bugs. Could you please try luvcview ? As your camera
> > doesn't support MJPEG, you should run it with
> >
> > luvcview -f yuv

^^^^^^^^^^^^^^^^^^^^^
*HINT*HINT*HINT*HINT*

> > > I would be glad to assist in any way I can to help add support for this
> > > device. I can't code but I will do any tests you suggest.
> >
> > If luvcview works (and it probably will), Ekiga should work as well. aMsn
> > and mplayer should too if you use recent enough versions.
> >
> > Best regards,
> >
> > Laurent Pinchart
>
> Thanks. I compiled luvcview using the ebuild from
> http://lists.berlios.de/pipermail/linux-uvc-devel/2006-February/000255.html
>
> $ luvcview
> luvcview version 0.2.1
> Video driver: x11
> A window manager is available
> video /dev/video0
> Unable to set format: 22.
>  Init v4L2 failed !! exit fatal

Refer to the above hint :-)

> What parameters would I use with mplayer to test the cam? I have Gentoo's
> mplayer-1.0_rc1_p20070824.

Try something like

mplayer tv:// -tv driver=v4l2:fps=25:width=640:height=480

p20070824 should be recent enough, but if you get error messages such as

v4l2: ioctl dequeue buffer failed: Invalid argument, idx = 0

you should try to upgrade to a later version.

> BTW, I know that the camera is working as I tested it before wiping out the
> Vista install this laptop came with (no refunds from HP). :-(

Best regards,

Laurent Pinchart

PS: Please reply to the list


