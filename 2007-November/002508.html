<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] Sanyo au W33SA cellphone web-cam support?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2007-November/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Sanyo%20au%20W33SA%20cellphone%20web-cam%20support%3F&In-Reply-To=%3C474EAD5F.1030103%40myrealbox.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002502.html">
   <LINK REL="Next"  HREF="002510.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] Sanyo au W33SA cellphone web-cam support?</H1>
    <B>Samir Ibradzic</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Sanyo%20au%20W33SA%20cellphone%20web-cam%20support%3F&In-Reply-To=%3C474EAD5F.1030103%40myrealbox.com%3E"
       TITLE="[Linux-uvc-devel] Sanyo au W33SA cellphone web-cam support?">samir.i at myrealbox.com
       </A><BR>
    <I>Thu Nov 29 13:15:27 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002502.html">[Linux-uvc-devel] Sanyo au W33SA cellphone web-cam support?
</A></li>
        <LI>Next message: <A HREF="002510.html">[Linux-uvc-devel] Sanyo au W33SA cellphone web-cam support?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2508">[ date ]</a>
              <a href="thread.html#2508">[ thread ]</a>
              <a href="subject.html#2508">[ subject ]</a>
              <a href="author.html#2508">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Laurent, you are just remarkable!

Camera worked, just after the patch was applied!
I tested it using lucview, though no controls are working...

here's dmesg;

[ 2910.636000] usb 2-1: new full speed USB device using uhci_hcd and 
address 5
[ 2910.812000] usb 2-1: configuration #1 chosen from 1 choice
[ 2910.816000] uvcvideo: Probing generic UVC device 1
[ 2910.816000] uvcvideo: Found format MJPEG.
[ 2910.816000] uvcvideo: - 320x240 (15.0 fps)
[ 2910.816000] uvcvideo: Found UVC 1.10 device au W33SA (0474:0722)
[ 2910.816000] uvcvideo: Scanning UVC chain: OT 3 &lt;- PU 2 &lt;- IT 1
[ 2910.816000] uvcvideo: Found a valid video chain (1 -&gt; 3).
[ 2910.820000] uvcvideo: UVC device initialized.
[ 2914.108000] uvcvideo: uvc_v4l2_open
[ 2914.108000] uvcvideo: uvc_v4l2_ioctl
[ 2914.108000] v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
[ 2914.108000] uvcvideo: uvc_v4l2_ioctl
[ 2914.108000] v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
[ 2914.108000] uvcvideo: Trying format 0x47504a4d (MJPG): 320x240.
[ 2914.108000] uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
[ 2914.124000] uvcvideo: uvc_v4l2_ioctl
[ 2914.124000] v4l2 ioctl VIDIOC_S_PARM, dir=rw (0xc0cc5616)
[ 2914.124000] uvcvideo: Setting frame interval to 1/15 (666666).
[ 2914.160000] uvcvideo: uvc_v4l2_ioctl
[ 2914.160000] v4l2 ioctl VIDIOC_REQBUFS, dir=rw (0xc0145608)
[ 2914.160000] uvcvideo: uvc_v4l2_ioctl
[ 2914.160000] v4l2 ioctl VIDIOC_QUERYBUF, dir=rw (0xc0445609)
[ 2914.160000] uvcvideo: uvc_v4l2_mmap
[ 2914.160000] uvcvideo: uvc_v4l2_ioctl
[ 2914.160000] v4l2 ioctl VIDIOC_QUERYBUF, dir=rw (0xc0445609)
[ 2914.160000] uvcvideo: uvc_v4l2_mmap
[ 2914.160000] uvcvideo: uvc_v4l2_ioctl
[ 2914.160000] v4l2 ioctl VIDIOC_QUERYBUF, dir=rw (0xc0445609)
[ 2914.160000] uvcvideo: uvc_v4l2_mmap
[ 2914.160000] uvcvideo: uvc_v4l2_ioctl
[ 2914.160000] v4l2 ioctl VIDIOC_QUERYBUF, dir=rw (0xc0445609)
[ 2914.164000] uvcvideo: uvc_v4l2_mmap
[ 2914.164000] uvcvideo: uvc_v4l2_ioctl
[ 2914.164000] v4l2 ioctl VIDIOC_QBUF, dir=rw (0xc044560f)
[ 2914.164000] uvcvideo: Queuing buffer 0.
[ 2914.164000] uvcvideo: uvc_v4l2_ioctl
[ 2914.164000] v4l2 ioctl VIDIOC_QBUF, dir=rw (0xc044560f)
[ 2914.164000] uvcvideo: Queuing buffer 1.
[ 2914.164000] uvcvideo: uvc_v4l2_ioctl
[ 2914.164000] v4l2 ioctl VIDIOC_QBUF, dir=rw (0xc044560f)
[ 2914.164000] uvcvideo: Queuing buffer 2.
[ 2914.164000] uvcvideo: uvc_v4l2_ioctl
[ 2914.164000] v4l2 ioctl VIDIOC_QBUF, dir=rw (0xc044560f)
[ 2914.164000] uvcvideo: Queuing buffer 3.
[ 2914.380000] uvcvideo: uvc_v4l2_ioctl
[ 2914.380000] v4l2 ioctl VIDIOC_STREAMON, dir=-w (0x40045612)
[ 2914.380000] uvcvideo: uvc_v4l2_ioctl
[ 2914.380000] v4l2 ioctl VIDIOC_DQBUF, dir=rw (0xc0445611)
[ 2914.380000] uvcvideo: Dequeuing buffer 0.
[ 2914.676000] uvcvideo: Frame complete (EOF found).
...

Why all these details in kernel messages? Just for the sake of the test?

How can i set it up to work in gstreamer?

I have the following error in gstreamer-properties;

gstreamer-properties-Message: Error running pipeline 'Video for Linux 2 
(v4l2)': Could not negotiate format [gstbasesrc.c(2062): 
gst_base_src_start (): /pipeline0/v4l2src3:
Check your filtered caps, if any]

Thanks again for your hard work! This means one more camera can work in 
Linux! Actually, there is a whole line of Sanyo (au) cellphones 
available here in japan, who probably use same or very similar camera 
USB interface...


Samir


Laurent Pinchart wrote:
&gt;<i> Hi Samir,
</I>&gt;<i> 
</I>&gt;<i> On Wednesday 28 November 2007, Samir Ibradzic wrote:
</I>&gt;&gt;<i> Hello Laurent,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've tried the USB capture thing... Used SnoopyPro, and because of the
</I>&gt;&gt;<i> size of the files i will attach them only to you personally... The
</I>&gt;&gt;<i> reason for the big file size is that i started capture before plugging
</I>&gt;&gt;<i> the cable, then i tested the video stream in Media Player Classics for a
</I>&gt;&gt;<i> secund or two... The reason because there are two files is that there
</I>&gt;&gt;<i> were two devices in SnoopyPro, with similar IDs, but somewhat similar
</I>&gt;&gt;<i> capture results;
</I>&gt;<i> 
</I>&gt;<i> Thanks for the logs. The binary format scared me, but I found a tool to dump 
</I>&gt;<i> the logs to text (<A HREF="http://www.stillhq.com/usblogdump/">http://www.stillhq.com/usblogdump/</A>).
</I>&gt;<i> 
</I>&gt;&gt;<i> USB\Vid_0474&amp;Pid_0722&amp;Rev_0000&amp;MI_00,USB\Vid_0474&amp;Pid_0722&amp;MI_00  -  USB
</I>&gt;&gt;<i> Video Device
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> and
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> USB\Vid_0474&amp;Pid_0722&amp;Rev_0000,USB\Vid_0474&amp;Pid_0722  -  USB Composite
</I>&gt;&gt;<i> Device
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> What is the deal with these two?
</I>&gt;<i> 
</I>&gt;<i> That's just the way Windows deals with devices that have more than one 
</I>&gt;<i> function. Sniffing the composite device will probably log all URBs regardless 
</I>&gt;<i> of the function (camera, ...), while sniffing the video device will only log 
</I>&gt;<i> video-related URBs. Don't take this for granted as I'm no Windows expert, but 
</I>&gt;<i> I expect it to work like that.
</I>&gt;<i> 
</I>&gt;&gt;<i> I also have to mention that when i plug this phone into USB, I get the
</I>&gt;&gt;<i> menu on it, where i select if it should work as USB camera, Storage
</I>&gt;&gt;<i> Device, USB Print device or Direct Comm. Transfer mode. Prior to
</I>&gt;&gt;<i> selecting USB camera mode there is no activity on USB, afaik...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks again! I just hope we will come up with something...
</I>&gt;<i> 
</I>&gt;<i> Could you please try the attached patch ? You can discard the previous ones.
</I>&gt;<i> 
</I>&gt;<i> Best regards,
</I>&gt;<i> 
</I>&gt;<i> Laurent Pinchart
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> --- AV &amp; Spam Filtering by M+Guardian - Risk Free Email (TM) ---
</I>&gt;<i> 
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002502.html">[Linux-uvc-devel] Sanyo au W33SA cellphone web-cam support?
</A></li>
	<LI>Next message: <A HREF="002510.html">[Linux-uvc-devel] Sanyo au W33SA cellphone web-cam support?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2508">[ date ]</a>
              <a href="thread.html#2508">[ thread ]</a>
              <a href="subject.html#2508">[ subject ]</a>
              <a href="author.html#2508">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
