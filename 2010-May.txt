From lameventanas at gmail.com  Mon May  3 04:39:53 2010
From: lameventanas at gmail.com (Alan)
Date: Mon, 3 May 2010 11:39:53 +0900
Subject: [Linux-uvc-devel] Framerate of Quickcam Pro 9000
In-Reply-To: <q2g59cf47a81004291115nb436eeei839e3c8c045863bd@mail.gmail.com>
References: <r2nf475b8d21004291101gc050f050yd12d2fb96f5c3911@mail.gmail.com>
	<q2g59cf47a81004291115nb436eeei839e3c8c045863bd@mail.gmail.com>
Message-ID: <o2sf475b8d21005021939me72760d5uea0f0f4c5d05099d@mail.gmail.com>

Hi Paulo,

Thanks, with guvcview I was able to make it somehow better, this
program is very well done.

But I still am nowhere near 30 fps (I get around 6 fps with low
light), and there is no single set of settings that allows me to have
decent framerates at low light and normal light conditions, so I have
to adjust it manually each time (the auto mode is not good).

Thanks anyways.

Alan


On Fri, Apr 30, 2010 at 3:15 AM, Paulo Assis <pj.assis at gmail.com> wrote:
> Alan Hi,
> Can you test with guvcview (http://guvcview.berlios.de)?
>
> Maximum frame rate also depends on the pixel format and resolution, so
> choose a format and resolution that supports a high frame-rate (e.g
> MJPG at 800x600)
>
> Regards,
> Paulo
>
> 2010/4/29 Alan <lameventanas at gmail.com>:
>> I have a problem with my camera: the framerate is too low.
>> I tested the camera using mplayer and motion with different light levels.
>>
>> So I tried to fix it by following the instructions here:
>> http://www.quickcamteam.net/documentation/how-to/how-to-maximize-the-frame-rate
>>
>> Unfortunately its still slow, and I think I messed up something
>> because every time I run uvcdynctrl I get this error:
>> [libwebcam] Unknown V4L2 private control ID encountered: 0x0A046D04
>> (V4L2_CID_PRIVATE_BASE + 33844484)
>>
>> So I think at some moment I used an invalid parameter, so I thought I
>> could rmmod and modprobe uvcvideo to fix it, but no. Reconnecting the
>> camera doesn't help either.
>>
>> So is this an invalid parameter? If so, where is it stored, in some
>> memory inside the camera?
>> And how do I fix the framerate issue?
>>
>> Thanks!
>>
>> Alan
>> _______________________________________________
>> Linux-uvc-devel mailing list
>> Linux-uvc-devel at lists.berlios.de
>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>
>


From pj.assis at gmail.com  Mon May  3 10:42:52 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Mon, 3 May 2010 09:42:52 +0100
Subject: [Linux-uvc-devel] Framerate of Quickcam Pro 9000
In-Reply-To: <o2sf475b8d21005021939me72760d5uea0f0f4c5d05099d@mail.gmail.com>
References: <r2nf475b8d21004291101gc050f050yd12d2fb96f5c3911@mail.gmail.com>
	<q2g59cf47a81004291115nb436eeei839e3c8c045863bd@mail.gmail.com>
	<o2sf475b8d21005021939me72760d5uea0f0f4c5d05099d@mail.gmail.com>
Message-ID: <y2w59cf47a81005030142ye7da96c7nab1d53a67ed63ae8@mail.gmail.com>

Alan,

2010/5/3 Alan <lameventanas at gmail.com>:
> Hi Paulo,
>
> Thanks, with guvcview I was able to make it somehow better, this
> program is very well done.
>
> But I still am nowhere near 30 fps (I get around 6 fps with low
> light), and there is no single set of settings that allows me to have
> decent framerates at low light and normal light conditions, so I have
> to adjust it manually each time (the auto mode is not good).
>

This is very strange, I own a sphere AF, this camera is very similar
to the pro9000, and by disabling "Exposure, Auto Priority" I can
easily get 30 fps, although the image gets quite dark.
I guess that to get a good balance between image quality and fps you
need to adjust exposure manually, with guvcview you can use control
profiles, this would save you time adjusting controls in similar
situations.

Best regards,
Paulo

> Thanks anyways.
>
> Alan
>
>
> On Fri, Apr 30, 2010 at 3:15 AM, Paulo Assis <pj.assis at gmail.com> wrote:
>> Alan Hi,
>> Can you test with guvcview (http://guvcview.berlios.de)?
>>
>> Maximum frame rate also depends on the pixel format and resolution, so
>> choose a format and resolution that supports a high frame-rate (e.g
>> MJPG at 800x600)
>>
>> Regards,
>> Paulo
>>
>> 2010/4/29 Alan <lameventanas at gmail.com>:
>>> I have a problem with my camera: the framerate is too low.
>>> I tested the camera using mplayer and motion with different light levels.
>>>
>>> So I tried to fix it by following the instructions here:
>>> http://www.quickcamteam.net/documentation/how-to/how-to-maximize-the-frame-rate
>>>
>>> Unfortunately its still slow, and I think I messed up something
>>> because every time I run uvcdynctrl I get this error:
>>> [libwebcam] Unknown V4L2 private control ID encountered: 0x0A046D04
>>> (V4L2_CID_PRIVATE_BASE + 33844484)
>>>
>>> So I think at some moment I used an invalid parameter, so I thought I
>>> could rmmod and modprobe uvcvideo to fix it, but no. Reconnecting the
>>> camera doesn't help either.
>>>
>>> So is this an invalid parameter? If so, where is it stored, in some
>>> memory inside the camera?
>>> And how do I fix the framerate issue?
>>>
>>> Thanks!
>>>
>>> Alan
>>> _______________________________________________
>>> Linux-uvc-devel mailing list
>>> Linux-uvc-devel at lists.berlios.de
>>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>>
>>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From lameventanas at gmail.com  Tue May  4 03:31:55 2010
From: lameventanas at gmail.com (Alan)
Date: Tue, 4 May 2010 10:31:55 +0900
Subject: [Linux-uvc-devel] Framerate of Quickcam Pro 9000
In-Reply-To: <y2w59cf47a81005030142ye7da96c7nab1d53a67ed63ae8@mail.gmail.com>
References: <r2nf475b8d21004291101gc050f050yd12d2fb96f5c3911@mail.gmail.com>
	<q2g59cf47a81004291115nb436eeei839e3c8c045863bd@mail.gmail.com>
	<o2sf475b8d21005021939me72760d5uea0f0f4c5d05099d@mail.gmail.com>
	<y2w59cf47a81005030142ye7da96c7nab1d53a67ed63ae8@mail.gmail.com>
Message-ID: <t2uf475b8d21005031831x7ddd5ba3t475f9c8268cb52ce@mail.gmail.com>

On Mon, May 3, 2010 at 5:42 PM, Paulo Assis <pj.assis at gmail.com> wrote:
> Alan,
>
> 2010/5/3 Alan <lameventanas at gmail.com>:
>> Hi Paulo,
>>
>> Thanks, with guvcview I was able to make it somehow better, this
>> program is very well done.
>>
>> But I still am nowhere near 30 fps (I get around 6 fps with low
>> light), and there is no single set of settings that allows me to have
>> decent framerates at low light and normal light conditions, so I have
>> to adjust it manually each time (the auto mode is not good).
>>
>
> This is very strange, I own a sphere AF, this camera is very similar
> to the pro9000, and by disabling "Exposure, Auto Priority" I can
> easily get 30 fps, although the image gets quite dark.
> I guess that to get a good balance between image quality and fps you
> need to adjust exposure manually, with guvcview you can use control
> profiles, this would save you time adjusting controls in similar
> situations.

Yes, the profiles are very useful. Your program in general is very
useful, I hope you make a stable release soon, some distros only ship
release versions of programs (like mine for example).

I wish the command line uvcdynctrl also supported loading/saving
profiles (just like alsactl store / alsactl restore).

What happens to the camera settings when the computer is rebooted? Are
they stored in some non-volatile memory in the camera? That would be
awesome.

Alan


From pj.assis at gmail.com  Tue May  4 10:36:19 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Tue, 4 May 2010 09:36:19 +0100
Subject: [Linux-uvc-devel] Framerate of Quickcam Pro 9000
In-Reply-To: <t2uf475b8d21005031831x7ddd5ba3t475f9c8268cb52ce@mail.gmail.com>
References: <r2nf475b8d21004291101gc050f050yd12d2fb96f5c3911@mail.gmail.com>
	<q2g59cf47a81004291115nb436eeei839e3c8c045863bd@mail.gmail.com>
	<o2sf475b8d21005021939me72760d5uea0f0f4c5d05099d@mail.gmail.com>
	<y2w59cf47a81005030142ye7da96c7nab1d53a67ed63ae8@mail.gmail.com>
	<t2uf475b8d21005031831x7ddd5ba3t475f9c8268cb52ce@mail.gmail.com>
Message-ID: <i2g59cf47a81005040136vf2916bc4kc0e81d179ea4c953@mail.gmail.com>

Alan Hi,

>
> Yes, the profiles are very useful. Your program in general is very
> useful, I hope you make a stable release soon, some distros only ship
> release versions of programs (like mine for example).
>

The latest stable release is 1.3.1 (adds camera button support),
unfortunately some distros take quite some time to pick new releases
(maybe my fault, I usually do a new release every month or so).

> I wish the command line uvcdynctrl also supported loading/saving
> profiles (just like alsactl store / alsactl restore).
>
You are free to post a patch for it ;-) I'll add it to debian and send
it upstream.
I'm afraid in the next few weeks I won't have much spare time,
otherwise I could do it myself.
If you fell you can't do it, just remember me again in a couple of weeks.

> What happens to the camera settings when the computer is rebooted? Are
> they stored in some non-volatile memory in the camera? That would be
> awesome.

If I'm not mistaken USB keeps the power on, even during a reboot, so
the camera should maintain the control settings.
You would have to unplug the camera to loose the settings.
This is not always a good think, sometimes the camera may crash,
meaning that you must physically unplug it to make it work again.

Best regards,
Paulo


From djmuhlestein at gmail.com  Tue May  4 17:37:13 2010
From: djmuhlestein at gmail.com (Dennis Muhlestein)
Date: Tue, 04 May 2010 09:37:13 -0600
Subject: [Linux-uvc-devel] Multiple camera framerate.
In-Reply-To: <4BD9D298.1040105@gmail.com>
References: <4BD5FAFB.9080201@gmail.com> <4BD9D298.1040105@gmail.com>
Message-ID: <4BE03F29.4080706@gmail.com>

On 04/29/2010 12:40 PM, Dennis Muhlestein wrote:
>
> One idea I've been toying with is to add a semaphore around submitting
> the URBs.
>
> In uvc_video.c, where the URBs are submitted, I'd acquire a semephore
> for each device currently submitting URBs. The semaphore would limit the
> number of devices to whatever number I decide can safely submit URBs
> simultaneously on the bus without throwing out of space errors.
>
> I did an initial test of this and it looks promising. I can configure
> all the cameras. As long as I don't submit the URBs for the number of
> devices beyond that which will work at the same time, the other cameras
> simply drop the data.
>
> I'm not sure the best places to control the locking and unlocking of the
> semaphore are. Right now, I lock it before submitting URBs in
> uvc_init_video. In uvc_video_complete, I unlock it and relock it if the
> buffer is complete (allowing another camera to acquire it and capture a
> frame).
>
> Anyway, it isn't working perfectly yet but I think I can debug it and at
> least get to a point where I know if it's worth pursuing. I'm curious if
> anyone can provide thoughts or alternatives.


I have two solutions that I've come up with this so far.
1) Modify the uvc_video.c to queue urbs in a list in the urb completion 
handler.  A driver level semaphore controls the number of currently 
submitting cameras.  You can adjust the initial sem_count in 
uvc_driver.c.  Ideally, that would be a module parameter but I'm just 
getting things to work.

I found capture speeds quite a bit slower than I'd like with this method 
though.  I can capture with 8 cameras at 10 FPS without overwhelming the 
ISO bus but if I change to 15 FPS I can only capture with 3 cameras at a 
time.  Adding the patch, I then can configure and capture from all 8 
cameras running at 15 FPS but only submitting URBs for 3 at a time. 
Depending on how many frames I let those cameras capture I got captured 
frame rates from around 4 to 6.

I'm attaching the patch in case anyone wants to play with this or 
suggest ways to improve it.  One thing I had a problem with is that it 
seems some of the capture images are corrupted.  This patch was against 
2.6.27.2.  A little old I know but I'm working on an embedded device.

2) I modified ehci-sched.c to not raise the ENOSPC error.  That solution 
actually lets me capture on all 8 cameras at 15 FPS.  This has other 
implications though and I'm not sure it is a very good solution.  It 
does tell me that perhaps the Linux ISO scheduler could perhaps use look 
through.  One major discrepancy is that bandwidth is allocated based on 
the max packet size I think but for my compressed images (MJPG) each 
frame is only a fraction of the max allocated bandwidth.

-Dennis

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: urb_queue.patch
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100504/4263f813/attachment.ksh>

From uvc at hk.airpost.net  Tue May  4 20:18:09 2010
From: uvc at hk.airpost.net (uvc at hk.airpost.net)
Date: Tue, 04 May 2010 20:18:09 +0200
Subject: [Linux-uvc-devel] Philips SPC530NC (0471:2034) fails
Message-ID: <1272997089.19898.1373362445@webmail.messagingengine.com>

Hello,

I have a setup where a Logitech Quickcam E 3500 (046d:09a4) works fine
when a Philips SPC530NC (0471:2034) doesn't. Though both are mark as
supported on http://www.ideasonboard.org/uvc/

I'm running: Linux OpenWrt 2.6.30.10 #24 Tue Apr 6 14:59:59 CEST 2010
mips GNU/Linux

Here is what I get with the philips:

Apr  6 01:26:45 OpenWrt user.info kernel: usb 1-1: new high speed USB
device using ehci_hcd and address 2
Apr  6 01:26:45 OpenWrt user.info kernel: usb 1-1: configuration #1
chosen from 1 choice
Apr  6 01:26:45 OpenWrt user.info kernel: uvcvideo: Found UVC 1.00
device USB Video Camera (0471:2034)
Apr  6 01:26:45 OpenWrt user.info kernel: input: USB Video Camera as
/devices/pci0000:00/0000:00:00.1/usb1/1-1/1-1:1.0/input/input0
Apr  6 01:26:49 OpenWrt user.info MJPG-streamer [1131]: starting
application
Apr  6 01:26:49 OpenWrt user.info MJPG-streamer [1131]: MJPG Streamer
Version.: 2.0
Apr  6 01:26:49 OpenWrt user.info MJPG-streamer [1131]: Using V4L2
device.: /dev/video0
Apr  6 01:26:49 OpenWrt user.info MJPG-streamer [1131]: Desired
Resolution: 640 x 480
Apr  6 01:26:49 OpenWrt user.info MJPG-streamer [1131]: Frames Per
Second.: 5
Apr  6 01:26:49 OpenWrt user.info MJPG-streamer [1131]:
Format............: MJPEG
Apr  6 01:26:49 OpenWrt user.info MJPG-streamer [1131]: init_VideoIn
failed
Apr  6 01:26:53 OpenWrt user.info MJPG-streamer [1142]: starting
application
Apr  6 01:26:53 OpenWrt user.info MJPG-streamer [1142]: MJPG Streamer
Version.: 2.0
Apr  6 01:26:53 OpenWrt user.info MJPG-streamer [1142]: Using V4L2
device.: /dev/video0
Apr  6 01:26:53 OpenWrt user.info MJPG-streamer [1142]: Desired
Resolution: 640 x 480
Apr  6 01:26:53 OpenWrt user.info MJPG-streamer [1142]: Frames Per
Second.: 5
Apr  6 01:26:53 OpenWrt user.info MJPG-streamer [1142]:
Format............: MJPEG
Apr  6 01:26:53 OpenWrt user.info MJPG-streamer [1142]: init_VideoIn
failed
Apr  6 01:26:56 OpenWrt user.info MJPG-streamer [1152]: starting
application
Apr  6 01:26:56 OpenWrt user.info MJPG-streamer [1152]: MJPG Streamer
Version.: 2.0
Apr  6 01:26:56 OpenWrt user.info MJPG-streamer [1152]: Using V4L2
device.: /dev/video0
Apr  6 01:26:56 OpenWrt user.info MJPG-streamer [1152]: Desired
Resolution: 640 x 480
Apr  6 01:26:56 OpenWrt user.info MJPG-streamer [1152]: Frames Per
Second.: 5
Apr  6 01:26:56 OpenWrt user.info MJPG-streamer [1152]:
Format............: MJPEG
Apr  6 01:26:56 OpenWrt user.info MJPG-streamer [1152]: init_VideoIn
failed

Any pointer to solve the issue would help.

Many thanks,
hka


From uvc at hk.airpost.net  Wed May  5 10:51:28 2010
From: uvc at hk.airpost.net (HKairpost)
Date: Wed, 05 May 2010 10:51:28 +0200
Subject: [Linux-uvc-devel] Philips SPC530NC (0471:2034) fails
In-Reply-To: <1272997089.19898.1373362445@webmail.messagingengine.com>
References: <1272997089.19898.1373362445@webmail.messagingengine.com>
Message-ID: <4BE13190.1050503@hk.airpost.net>

uvc at hk.airpost.net wrote:
> Hello,
>
> I have a setup where a Logitech Quickcam E 3500 (046d:09a4) works fine
> when a Philips SPC530NC (0471:2034) doesn't. Though both are mark as
> supported on http://www.ideasonboard.org/uvc/
>
> I'm running: Linux OpenWrt 2.6.30.10 #24 Tue Apr 6 14:59:59 CEST 2010
> mips GNU/Linux
>
> Here is what I get with the philips:
>
> Apr  6 01:26:45 OpenWrt user.info kernel: usb 1-1: new high speed USB
> device using ehci_hcd and address 2
> Apr  6 01:26:45 OpenWrt user.info kernel: usb 1-1: configuration #1
> chosen from 1 choice
> Apr  6 01:26:45 OpenWrt user.info kernel: uvcvideo: Found UVC 1.00
> device USB Video Camera (0471:2034)
> Apr  6 01:26:45 OpenWrt user.info kernel: input: USB Video Camera as
> /devices/pci0000:00/0000:00:00.1/usb1/1-1/1-1:1.0/input/input0
> Apr  6 01:26:49 OpenWrt user.info MJPG-streamer [1131]: starting
> application
> Apr  6 01:26:49 OpenWrt user.info MJPG-streamer [1131]: MJPG Streamer
> Version.: 2.0
> Apr  6 01:26:49 OpenWrt user.info MJPG-streamer [1131]: Using V4L2
> device.: /dev/video0
> Apr  6 01:26:49 OpenWrt user.info MJPG-streamer [1131]: Desired
> Resolution: 640 x 480
> Apr  6 01:26:49 OpenWrt user.info MJPG-streamer [1131]: Frames Per
> Second.: 5
> Apr  6 01:26:49 OpenWrt user.info MJPG-streamer [1131]:
> Format............: MJPEG
> Apr  6 01:26:49 OpenWrt user.info MJPG-streamer [1131]: init_VideoIn
> failed
> Apr  6 01:26:53 OpenWrt user.info MJPG-streamer [1142]: starting
> application
> Apr  6 01:26:53 OpenWrt user.info MJPG-streamer [1142]: MJPG Streamer
> Version.: 2.0
> Apr  6 01:26:53 OpenWrt user.info MJPG-streamer [1142]: Using V4L2
> device.: /dev/video0
> Apr  6 01:26:53 OpenWrt user.info MJPG-streamer [1142]: Desired
> Resolution: 640 x 480
> Apr  6 01:26:53 OpenWrt user.info MJPG-streamer [1142]: Frames Per
> Second.: 5
> Apr  6 01:26:53 OpenWrt user.info MJPG-streamer [1142]:
> Format............: MJPEG
> Apr  6 01:26:53 OpenWrt user.info MJPG-streamer [1142]: init_VideoIn
> failed
> Apr  6 01:26:56 OpenWrt user.info MJPG-streamer [1152]: starting
> application
> Apr  6 01:26:56 OpenWrt user.info MJPG-streamer [1152]: MJPG Streamer
> Version.: 2.0
> Apr  6 01:26:56 OpenWrt user.info MJPG-streamer [1152]: Using V4L2
> device.: /dev/video0
> Apr  6 01:26:56 OpenWrt user.info MJPG-streamer [1152]: Desired
> Resolution: 640 x 480
> Apr  6 01:26:56 OpenWrt user.info MJPG-streamer [1152]: Frames Per
> Second.: 5
> Apr  6 01:26:56 OpenWrt user.info MJPG-streamer [1152]:
> Format............: MJPEG
> Apr  6 01:26:56 OpenWrt user.info MJPG-streamer [1152]: init_VideoIn
> failed
>
> Any pointer to solve the issue would help.
>
> Many thanks,
> hka
>   

Just want to confirm that /dev/video0 is inserted and paste the 
following additional information:

IRQ 3/wifi0: IRQF_DISABLED is not guaranteed on shared IRQs
i2c /dev entries driver
Linux video capture interface: v2.00
usbcore: registered new interface driver uvcvideo
USB Video Class driver (v0.1.0)
usb 1-1: new high speed USB device using ehci_hcd and address 2
usb 1-1: configuration #1 chosen from 1 choice
hub 1-1:1.0: USB hub found
hub 1-1:1.0: 4 ports detected
usb 1-1.1: new high speed USB device using ehci_hcd and address 3
usb 1-1.1: configuration #1 chosen from 1 choice
uvcvideo: Found UVC 1.00 device USB Video Camera (0471:2034)
input: USB Video Camera as 
/devices/pci0000:00/0000:00:00.1/usb1/1-1/1-1.1/1-1.1:1.0/input/input0

# lsusb -v -d 0471:2034

Bus 001 Device 003: ID 0471:2034 Philips (or NXP) Webcam SPC530NC
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x0471 Philips (or NXP)
  idProduct          0x2034 Webcam SPC530NC
  bcdDevice            0.00
  iManufacturer           0
  iProduct                1 USB Video Camera
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength        42497
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower               98mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               1 USB Video Camera
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              1 USB Video Camera
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           77
        dwClockFrequency       48.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000000
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000157b
          Brightness
          Contrast
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Power Line Frequency
          White Balance Temperature, Auto
        iProcessing            32
        bmVideoStandards     0x1a
          NTSC - 525/60
          SECAM - 625/50
          NTSC - 625/50
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 6
        guidExtensionCode         {d2090058-6fe7-2446-8512-76cdd8dda14e}
        bNumControl             2
        bNrPins                 1
        baSourceID( 0)          3
        bControlSize            1
        bmControls( 0)       0x03
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               6
        iTerminal               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0800  2x 0 bytes
        bInterval              16
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                         1
        wTotalLength                      157
        bEndPointAddress                  131
        bmInfo                              0
        bTerminalLink                       2
        bStillCaptureMethod                 1
        bTriggerSupport                     1
        bTriggerUsage                       0
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                2
        guidFormat                            
{59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            54
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x01
          Still image supported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                1179648000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  7
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            499998
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)            999996
        dwFrameInterval( 5)           1333332
        dwFrameInterval( 6)           1999992
      VideoStreaming Interface Descriptor:
        bLength                            62
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x01
          Still image supported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                1179648000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         166666
        bFrameIntervalType                  9
        dwFrameInterval( 0)            166666
        dwFrameInterval( 1)            200000
        dwFrameInterval( 2)            333333
        dwFrameInterval( 3)            400000
        dwFrameInterval( 4)            499998
        dwFrameInterval( 5)            666666
        dwFrameInterval( 6)            999996
        dwFrameInterval( 7)           1333332
        dwFrameInterval( 8)           1999992
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0014  1x 20 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       2 Streaming
      bFunctionProtocol       0
      iFunction               1 USB Video Camera
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0
      iInterface              1 USB Video Camera
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           38
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0
        iTerminal               0
      AudioControl Interface Descriptor:
        bLength                 8
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 5
        bSourceID               3
        bControlSize            1
        bmaControls( 0)      0x43
          Mute
          Volume
          Automatic Gain
        iFeature                0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             4
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               5
        iTerminal               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           4
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                29
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            7 Discrete
        tSamFreq[ 0]         8000
        tSamFreq[ 1]        11025
        tSamFreq[ 2]        16000
        tSamFreq[ 3]        22050
        tSamFreq[ 4]        32000
        tSamFreq[ 5]        44100
        tSamFreq[ 6]        48000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x00
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)


From pj.assis at gmail.com  Wed May  5 10:59:26 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Wed, 5 May 2010 09:59:26 +0100
Subject: [Linux-uvc-devel] Philips SPC530NC (0471:2034) fails
In-Reply-To: <4BE13190.1050503@hk.airpost.net>
References: <1272997089.19898.1373362445@webmail.messagingengine.com>
	<4BE13190.1050503@hk.airpost.net>
Message-ID: <n2k59cf47a81005050159y35045fb1s1916b75f27200d9b@mail.gmail.com>

Hi,
Are you sure the camera supports MJPG ?
It seems to report only a uncompressed format (YUYV ?).
You can check the supported formats with luvcview, guvcview or
uvcdynctrl (libwebcam)

Best regards,
Paulo

2010/5/5 HKairpost <uvc at hk.airpost.net>:
> uvc at hk.airpost.net wrote:
>>
>> Hello,
>>
>> I have a setup where a Logitech Quickcam E 3500 (046d:09a4) works fine
>> when a Philips SPC530NC (0471:2034) doesn't. Though both are mark as
>> supported on http://www.ideasonboard.org/uvc/
>>
>> I'm running: Linux OpenWrt 2.6.30.10 #24 Tue Apr 6 14:59:59 CEST 2010
>> mips GNU/Linux
>>
>> Here is what I get with the philips:
>>
>> Apr ?6 01:26:45 OpenWrt user.info kernel: usb 1-1: new high speed USB
>> device using ehci_hcd and address 2
>> Apr ?6 01:26:45 OpenWrt user.info kernel: usb 1-1: configuration #1
>> chosen from 1 choice
>> Apr ?6 01:26:45 OpenWrt user.info kernel: uvcvideo: Found UVC 1.00
>> device USB Video Camera (0471:2034)
>> Apr ?6 01:26:45 OpenWrt user.info kernel: input: USB Video Camera as
>> /devices/pci0000:00/0000:00:00.1/usb1/1-1/1-1:1.0/input/input0
>> Apr ?6 01:26:49 OpenWrt user.info MJPG-streamer [1131]: starting
>> application
>> Apr ?6 01:26:49 OpenWrt user.info MJPG-streamer [1131]: MJPG Streamer
>> Version.: 2.0
>> Apr ?6 01:26:49 OpenWrt user.info MJPG-streamer [1131]: Using V4L2
>> device.: /dev/video0
>> Apr ?6 01:26:49 OpenWrt user.info MJPG-streamer [1131]: Desired
>> Resolution: 640 x 480
>> Apr ?6 01:26:49 OpenWrt user.info MJPG-streamer [1131]: Frames Per
>> Second.: 5
>> Apr ?6 01:26:49 OpenWrt user.info MJPG-streamer [1131]:
>> Format............: MJPEG
>> Apr ?6 01:26:49 OpenWrt user.info MJPG-streamer [1131]: init_VideoIn
>> failed
>> Apr ?6 01:26:53 OpenWrt user.info MJPG-streamer [1142]: starting
>> application
>> Apr ?6 01:26:53 OpenWrt user.info MJPG-streamer [1142]: MJPG Streamer
>> Version.: 2.0
>> Apr ?6 01:26:53 OpenWrt user.info MJPG-streamer [1142]: Using V4L2
>> device.: /dev/video0
>> Apr ?6 01:26:53 OpenWrt user.info MJPG-streamer [1142]: Desired
>> Resolution: 640 x 480
>> Apr ?6 01:26:53 OpenWrt user.info MJPG-streamer [1142]: Frames Per
>> Second.: 5
>> Apr ?6 01:26:53 OpenWrt user.info MJPG-streamer [1142]:
>> Format............: MJPEG
>> Apr ?6 01:26:53 OpenWrt user.info MJPG-streamer [1142]: init_VideoIn
>> failed
>> Apr ?6 01:26:56 OpenWrt user.info MJPG-streamer [1152]: starting
>> application
>> Apr ?6 01:26:56 OpenWrt user.info MJPG-streamer [1152]: MJPG Streamer
>> Version.: 2.0
>> Apr ?6 01:26:56 OpenWrt user.info MJPG-streamer [1152]: Using V4L2
>> device.: /dev/video0
>> Apr ?6 01:26:56 OpenWrt user.info MJPG-streamer [1152]: Desired
>> Resolution: 640 x 480
>> Apr ?6 01:26:56 OpenWrt user.info MJPG-streamer [1152]: Frames Per
>> Second.: 5
>> Apr ?6 01:26:56 OpenWrt user.info MJPG-streamer [1152]:
>> Format............: MJPEG
>> Apr ?6 01:26:56 OpenWrt user.info MJPG-streamer [1152]: init_VideoIn
>> failed
>>
>> Any pointer to solve the issue would help.
>>
>> Many thanks,
>> hka
>>
>
> Just want to confirm that /dev/video0 is inserted and paste the following
> additional information:
>
> IRQ 3/wifi0: IRQF_DISABLED is not guaranteed on shared IRQs
> i2c /dev entries driver
> Linux video capture interface: v2.00
> usbcore: registered new interface driver uvcvideo
> USB Video Class driver (v0.1.0)
> usb 1-1: new high speed USB device using ehci_hcd and address 2
> usb 1-1: configuration #1 chosen from 1 choice
> hub 1-1:1.0: USB hub found
> hub 1-1:1.0: 4 ports detected
> usb 1-1.1: new high speed USB device using ehci_hcd and address 3
> usb 1-1.1: configuration #1 chosen from 1 choice
> uvcvideo: Found UVC 1.00 device USB Video Camera (0471:2034)
> input: USB Video Camera as
> /devices/pci0000:00/0000:00:00.1/usb1/1-1/1-1.1/1-1.1:1.0/input/input0
>
> # lsusb -v -d 0471:2034
>
> Bus 001 Device 003: ID 0471:2034 Philips (or NXP) Webcam SPC530NC
> Device Descriptor:
> ?bLength ? ? ? ? ? ? ? ?18
> ?bDescriptorType ? ? ? ? 1
> ?bcdUSB ? ? ? ? ? ? ? 2.00
> ?bDeviceClass ? ? ? ? ?239 Miscellaneous Device
> ?bDeviceSubClass ? ? ? ? 2 ?
> ?bDeviceProtocol ? ? ? ? 1 Interface Association
> ?bMaxPacketSize0 ? ? ? ?64
> ?idVendor ? ? ? ? ? 0x0471 Philips (or NXP)
> ?idProduct ? ? ? ? ?0x2034 Webcam SPC530NC
> ?bcdDevice ? ? ? ? ? ?0.00
> ?iManufacturer ? ? ? ? ? 0
> ?iProduct ? ? ? ? ? ? ? ?1 USB Video Camera
> ?iSerial ? ? ? ? ? ? ? ? 0
> ?bNumConfigurations ? ? ?1
> ?Configuration Descriptor:
> ? bLength ? ? ? ? ? ? ? ? 9
> ? bDescriptorType ? ? ? ? 2
> ? wTotalLength ? ? ? ?42497
> ? bNumInterfaces ? ? ? ? ?4
> ? bConfigurationValue ? ? 1
> ? iConfiguration ? ? ? ? ?0
> ? bmAttributes ? ? ? ? 0x80
> ? ? (Bus Powered)
> ? MaxPower ? ? ? ? ? ? ? 98mA
> ? Interface Association:
> ? ? bLength ? ? ? ? ? ? ? ? 8
> ? ? bDescriptorType ? ? ? ?11
> ? ? bFirstInterface ? ? ? ? 0
> ? ? bInterfaceCount ? ? ? ? 2
> ? ? bFunctionClass ? ? ? ? 14 Video
> ? ? bFunctionSubClass ? ? ? 3 Video Interface Collection
> ? ? bFunctionProtocol ? ? ? 0
> ? ? iFunction ? ? ? ? ? ? ? 1 USB Video Camera
> ? Interface Descriptor:
> ? ? bLength ? ? ? ? ? ? ? ? 9
> ? ? bDescriptorType ? ? ? ? 4
> ? ? bInterfaceNumber ? ? ? ?0
> ? ? bAlternateSetting ? ? ? 0
> ? ? bNumEndpoints ? ? ? ? ? 1
> ? ? bInterfaceClass ? ? ? ?14 Video
> ? ? bInterfaceSubClass ? ? ?1 Video Control
> ? ? bInterfaceProtocol ? ? ?0
> ? ? iInterface ? ? ? ? ? ? ?1 USB Video Camera
> ? ? VideoControl Interface Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ?13
> ? ? ? bDescriptorType ? ? ? ?36
> ? ? ? bDescriptorSubtype ? ? ?1 (HEADER)
> ? ? ? bcdUVC ? ? ? ? ? ? ? 1.00
> ? ? ? wTotalLength ? ? ? ? ? 77
> ? ? ? dwClockFrequency ? ? ? 48.000000MHz
> ? ? ? bInCollection ? ? ? ? ? 1
> ? ? ? baInterfaceNr( 0) ? ? ? 1
> ? ? VideoControl Interface Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ?18
> ? ? ? bDescriptorType ? ? ? ?36
> ? ? ? bDescriptorSubtype ? ? ?2 (INPUT_TERMINAL)
> ? ? ? bTerminalID ? ? ? ? ? ? 1
> ? ? ? wTerminalType ? ? ?0x0201 Camera Sensor
> ? ? ? bAssocTerminal ? ? ? ? ?0
> ? ? ? iTerminal ? ? ? ? ? ? ? 0
> ? ? ? wObjectiveFocalLengthMin ? ? ?0
> ? ? ? wObjectiveFocalLengthMax ? ? ?0
> ? ? ? wOcularFocalLength ? ? ? ? ? ?0
> ? ? ? bControlSize ? ? ? ? ? ? ? ? ?3
> ? ? ? bmControls ? ? ? ? ? 0x00000000
> ? ? VideoControl Interface Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ?11
> ? ? ? bDescriptorType ? ? ? ?36
> ? ? ? bDescriptorSubtype ? ? ?5 (PROCESSING_UNIT)
> ? ? Warning: Descriptor too short
> ? ? ? bUnitID ? ? ? ? ? ? ? ? 3
> ? ? ? bSourceID ? ? ? ? ? ? ? 1
> ? ? ? wMaxMultiplier ? ? ? ? ?0
> ? ? ? bControlSize ? ? ? ? ? ?2
> ? ? ? bmControls ? ? 0x0000157b
> ? ? ? ? Brightness
> ? ? ? ? Contrast
> ? ? ? ? Saturation
> ? ? ? ? Sharpness
> ? ? ? ? Gamma
> ? ? ? ? White Balance Temperature
> ? ? ? ? Backlight Compensation
> ? ? ? ? Power Line Frequency
> ? ? ? ? White Balance Temperature, Auto
> ? ? ? iProcessing ? ? ? ? ? ?32
> ? ? ? bmVideoStandards ? ? 0x1a
> ? ? ? ? NTSC - 525/60
> ? ? ? ? SECAM - 625/50
> ? ? ? ? NTSC - 625/50
> ? ? VideoControl Interface Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ?26
> ? ? ? bDescriptorType ? ? ? ?36
> ? ? ? bDescriptorSubtype ? ? ?6 (EXTENSION_UNIT)
> ? ? ? bUnitID ? ? ? ? ? ? ? ? 6
> ? ? ? guidExtensionCode ? ? ? ? {d2090058-6fe7-2446-8512-76cdd8dda14e}
> ? ? ? bNumControl ? ? ? ? ? ? 2
> ? ? ? bNrPins ? ? ? ? ? ? ? ? 1
> ? ? ? baSourceID( 0) ? ? ? ? ?3
> ? ? ? bControlSize ? ? ? ? ? ?1
> ? ? ? bmControls( 0) ? ? ? 0x03
> ? ? ? iExtension ? ? ? ? ? ? ?0
> ? ? VideoControl Interface Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ? 9
> ? ? ? bDescriptorType ? ? ? ?36
> ? ? ? bDescriptorSubtype ? ? ?3 (OUTPUT_TERMINAL)
> ? ? ? bTerminalID ? ? ? ? ? ? 2
> ? ? ? wTerminalType ? ? ?0x0101 USB Streaming
> ? ? ? bAssocTerminal ? ? ? ? ?0
> ? ? ? bSourceID ? ? ? ? ? ? ? 6
> ? ? ? iTerminal ? ? ? ? ? ? ? 0
> ? ? Endpoint Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ? 7
> ? ? ? bDescriptorType ? ? ? ? 5
> ? ? ? bEndpointAddress ? ? 0x82 ?EP 2 IN
> ? ? ? bmAttributes ? ? ? ? ? ?3
> ? ? ? ? Transfer Type ? ? ? ? ? ?Interrupt
> ? ? ? ? Synch Type ? ? ? ? ? ? ? None
> ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
> ? ? ? wMaxPacketSize ? ? 0x0800 ?2x 0 bytes
> ? ? ? bInterval ? ? ? ? ? ? ?16
> ? Interface Descriptor:
> ? ? bLength ? ? ? ? ? ? ? ? 9
> ? ? bDescriptorType ? ? ? ? 4
> ? ? bInterfaceNumber ? ? ? ?1
> ? ? bAlternateSetting ? ? ? 0
> ? ? bNumEndpoints ? ? ? ? ? 0
> ? ? bInterfaceClass ? ? ? ?14 Video
> ? ? bInterfaceSubClass ? ? ?2 Video Streaming
> ? ? bInterfaceProtocol ? ? ?0
> ? ? iInterface ? ? ? ? ? ? ?0
> ? ? VideoStreaming Interface Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?14
> ? ? ? bDescriptorType ? ? ? ? ? ? ? ? ? ?36
> ? ? ? bDescriptorSubtype ? ? ? ? ? ? ? ? ?1 (INPUT_HEADER)
> ? ? ? bNumFormats ? ? ? ? ? ? ? ? ? ? ? ? 1
> ? ? ? wTotalLength ? ? ? ? ? ? ? ? ? ? ?157
> ? ? ? bEndPointAddress ? ? ? ? ? ? ? ? ?131
> ? ? ? bmInfo ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?0
> ? ? ? bTerminalLink ? ? ? ? ? ? ? ? ? ? ? 2
> ? ? ? bStillCaptureMethod ? ? ? ? ? ? ? ? 1
> ? ? ? bTriggerSupport ? ? ? ? ? ? ? ? ? ? 1
> ? ? ? bTriggerUsage ? ? ? ? ? ? ? ? ? ? ? 0
> ? ? ? bControlSize ? ? ? ? ? ? ? ? ? ? ? ?1
> ? ? ? bmaControls( 0) ? ? ? ? ? ? ? ? ? ?27
> ? ? VideoStreaming Interface Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?27
> ? ? ? bDescriptorType ? ? ? ? ? ? ? ? ? ?36
> ? ? ? bDescriptorSubtype ? ? ? ? ? ? ? ? ?4 (FORMAT_UNCOMPRESSED)
> ? ? ? bFormatIndex ? ? ? ? ? ? ? ? ? ? ? ?1
> ? ? ? bNumFrameDescriptors ? ? ? ? ? ? ? ?2
> ? ? ? guidFormat
> ?{59555932-0000-1000-8000-00aa00389b71}
> ? ? ? bBitsPerPixel ? ? ? ? ? ? ? ? ? ? ?16
> ? ? ? bDefaultFrameIndex ? ? ? ? ? ? ? ? ?1
> ? ? ? bAspectRatioX ? ? ? ? ? ? ? ? ? ? ? 0
> ? ? ? bAspectRatioY ? ? ? ? ? ? ? ? ? ? ? 0
> ? ? ? bmInterlaceFlags ? ? ? ? ? ? ? ? 0x00
> ? ? ? ? Interlaced stream or variable: No
> ? ? ? ? Fields per frame: 1 fields
> ? ? ? ? Field 1 first: No
> ? ? ? ? Field pattern: Field 1 only
> ? ? ? ? bCopyProtect ? ? ? ? ? ? ? ? ? ? ?0
> ? ? VideoStreaming Interface Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?54
> ? ? ? bDescriptorType ? ? ? ? ? ? ? ? ? ?36
> ? ? ? bDescriptorSubtype ? ? ? ? ? ? ? ? ?5 (FRAME_UNCOMPRESSED)
> ? ? ? bFrameIndex ? ? ? ? ? ? ? ? ? ? ? ? 1
> ? ? ? bmCapabilities ? ? ? ? ? ? ? ? ? 0x01
> ? ? ? ? Still image supported
> ? ? ? wWidth ? ? ? ? ? ? ? ? ? ? ? ? ? ?640
> ? ? ? wHeight ? ? ? ? ? ? ? ? ? ? ? ? ? 480
> ? ? ? dwMinBitRate ? ? ? ? ? ? ? ?1179648000
> ? ? ? dwMaxBitRate ? ? ? ? ? ? ? ?147456000
> ? ? ? dwMaxVideoFrameBufferSize ? ? ?614400
> ? ? ? dwDefaultFrameInterval ? ? ? ? 333333
> ? ? ? bFrameIntervalType ? ? ? ? ? ? ? ? ?7
> ? ? ? dwFrameInterval( 0) ? ? ? ? ? ?333333
> ? ? ? dwFrameInterval( 1) ? ? ? ? ? ?400000
> ? ? ? dwFrameInterval( 2) ? ? ? ? ? ?499998
> ? ? ? dwFrameInterval( 3) ? ? ? ? ? ?666666
> ? ? ? dwFrameInterval( 4) ? ? ? ? ? ?999996
> ? ? ? dwFrameInterval( 5) ? ? ? ? ? 1333332
> ? ? ? dwFrameInterval( 6) ? ? ? ? ? 1999992
> ? ? VideoStreaming Interface Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ? ? ? ? ? ? ?62
> ? ? ? bDescriptorType ? ? ? ? ? ? ? ? ? ?36
> ? ? ? bDescriptorSubtype ? ? ? ? ? ? ? ? ?5 (FRAME_UNCOMPRESSED)
> ? ? ? bFrameIndex ? ? ? ? ? ? ? ? ? ? ? ? 2
> ? ? ? bmCapabilities ? ? ? ? ? ? ? ? ? 0x01
> ? ? ? ? Still image supported
> ? ? ? wWidth ? ? ? ? ? ? ? ? ? ? ? ? ? ?320
> ? ? ? wHeight ? ? ? ? ? ? ? ? ? ? ? ? ? 240
> ? ? ? dwMinBitRate ? ? ? ? ? ? ? ?1179648000
> ? ? ? dwMaxBitRate ? ? ? ? ? ? ? ?147456000
> ? ? ? dwMaxVideoFrameBufferSize ? ? ?153600
> ? ? ? dwDefaultFrameInterval ? ? ? ? 166666
> ? ? ? bFrameIntervalType ? ? ? ? ? ? ? ? ?9
> ? ? ? dwFrameInterval( 0) ? ? ? ? ? ?166666
> ? ? ? dwFrameInterval( 1) ? ? ? ? ? ?200000
> ? ? ? dwFrameInterval( 2) ? ? ? ? ? ?333333
> ? ? ? dwFrameInterval( 3) ? ? ? ? ? ?400000
> ? ? ? dwFrameInterval( 4) ? ? ? ? ? ?499998
> ? ? ? dwFrameInterval( 5) ? ? ? ? ? ?666666
> ? ? ? dwFrameInterval( 6) ? ? ? ? ? ?999996
> ? ? ? dwFrameInterval( 7) ? ? ? ? ? 1333332
> ? ? ? dwFrameInterval( 8) ? ? ? ? ? 1999992
> ? Interface Descriptor:
> ? ? bLength ? ? ? ? ? ? ? ? 9
> ? ? bDescriptorType ? ? ? ? 4
> ? ? bInterfaceNumber ? ? ? ?1
> ? ? bAlternateSetting ? ? ? 1
> ? ? bNumEndpoints ? ? ? ? ? 1
> ? ? bInterfaceClass ? ? ? ?14 Video
> ? ? bInterfaceSubClass ? ? ?2 Video Streaming
> ? ? bInterfaceProtocol ? ? ?0
> ? ? iInterface ? ? ? ? ? ? ?0
> ? ? Endpoint Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ? 7
> ? ? ? bDescriptorType ? ? ? ? 5
> ? ? ? bEndpointAddress ? ? 0x83 ?EP 3 IN
> ? ? ? bmAttributes ? ? ? ? ? ?5
> ? ? ? ? Transfer Type ? ? ? ? ? ?Isochronous
> ? ? ? ? Synch Type ? ? ? ? ? ? ? Asynchronous
> ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
> ? ? ? wMaxPacketSize ? ? 0x0014 ?1x 20 bytes
> ? ? ? bInterval ? ? ? ? ? ? ? 1
> ? Interface Association:
> ? ? bLength ? ? ? ? ? ? ? ? 8
> ? ? bDescriptorType ? ? ? ?11
> ? ? bFirstInterface ? ? ? ? 2
> ? ? bInterfaceCount ? ? ? ? 2
> ? ? bFunctionClass ? ? ? ? ?1 Audio
> ? ? bFunctionSubClass ? ? ? 2 Streaming
> ? ? bFunctionProtocol ? ? ? 0
> ? ? iFunction ? ? ? ? ? ? ? 1 USB Video Camera
> ? Interface Descriptor:
> ? ? bLength ? ? ? ? ? ? ? ? 9
> ? ? bDescriptorType ? ? ? ? 4
> ? ? bInterfaceNumber ? ? ? ?2
> ? ? bAlternateSetting ? ? ? 0
> ? ? bNumEndpoints ? ? ? ? ? 0
> ? ? bInterfaceClass ? ? ? ? 1 Audio
> ? ? bInterfaceSubClass ? ? ?1 Control Device
> ? ? bInterfaceProtocol ? ? ?0
> ? ? iInterface ? ? ? ? ? ? ?1 USB Video Camera
> ? ? AudioControl Interface Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ? 9
> ? ? ? bDescriptorType ? ? ? ?36
> ? ? ? bDescriptorSubtype ? ? ?1 (HEADER)
> ? ? ? bcdADC ? ? ? ? ? ? ? 1.00
> ? ? ? wTotalLength ? ? ? ? ? 38
> ? ? ? bInCollection ? ? ? ? ? 1
> ? ? ? baInterfaceNr( 0) ? ? ? 3
> ? ? AudioControl Interface Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ?12
> ? ? ? bDescriptorType ? ? ? ?36
> ? ? ? bDescriptorSubtype ? ? ?2 (INPUT_TERMINAL)
> ? ? ? bTerminalID ? ? ? ? ? ? 3
> ? ? ? wTerminalType ? ? ?0x0201 Microphone
> ? ? ? bAssocTerminal ? ? ? ? ?0
> ? ? ? bNrChannels ? ? ? ? ? ? 1
> ? ? ? wChannelConfig ? ? 0x0000
> ? ? ? iChannelNames ? ? ? ? ? 0
> ? ? ? iTerminal ? ? ? ? ? ? ? 0
> ? ? AudioControl Interface Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ? 8
> ? ? ? bDescriptorType ? ? ? ?36
> ? ? ? bDescriptorSubtype ? ? ?6 (FEATURE_UNIT)
> ? ? ? bUnitID ? ? ? ? ? ? ? ? 5
> ? ? ? bSourceID ? ? ? ? ? ? ? 3
> ? ? ? bControlSize ? ? ? ? ? ?1
> ? ? ? bmaControls( 0) ? ? ?0x43
> ? ? ? ? Mute
> ? ? ? ? Volume
> ? ? ? ? Automatic Gain
> ? ? ? iFeature ? ? ? ? ? ? ? ?0
> ? ? AudioControl Interface Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ? 9
> ? ? ? bDescriptorType ? ? ? ?36
> ? ? ? bDescriptorSubtype ? ? ?3 (OUTPUT_TERMINAL)
> ? ? ? bTerminalID ? ? ? ? ? ? 4
> ? ? ? wTerminalType ? ? ?0x0101 USB Streaming
> ? ? ? bAssocTerminal ? ? ? ? ?0
> ? ? ? bSourceID ? ? ? ? ? ? ? 5
> ? ? ? iTerminal ? ? ? ? ? ? ? 0
> ? Interface Descriptor:
> ? ? bLength ? ? ? ? ? ? ? ? 9
> ? ? bDescriptorType ? ? ? ? 4
> ? ? bInterfaceNumber ? ? ? ?3
> ? ? bAlternateSetting ? ? ? 0
> ? ? bNumEndpoints ? ? ? ? ? 0
> ? ? bInterfaceClass ? ? ? ? 1 Audio
> ? ? bInterfaceSubClass ? ? ?2 Streaming
> ? ? bInterfaceProtocol ? ? ?0
> ? ? iInterface ? ? ? ? ? ? ?0
> ? Interface Descriptor:
> ? ? bLength ? ? ? ? ? ? ? ? 9
> ? ? bDescriptorType ? ? ? ? 4
> ? ? bInterfaceNumber ? ? ? ?3
> ? ? bAlternateSetting ? ? ? 1
> ? ? bNumEndpoints ? ? ? ? ? 1
> ? ? bInterfaceClass ? ? ? ? 1 Audio
> ? ? bInterfaceSubClass ? ? ?2 Streaming
> ? ? bInterfaceProtocol ? ? ?0
> ? ? iInterface ? ? ? ? ? ? ?0
> ? ? AudioStreaming Interface Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ? 7
> ? ? ? bDescriptorType ? ? ? ?36
> ? ? ? bDescriptorSubtype ? ? ?1 (AS_GENERAL)
> ? ? ? bTerminalLink ? ? ? ? ? 4
> ? ? ? bDelay ? ? ? ? ? ? ? ? ?1 frames
> ? ? ? wFormatTag ? ? ? ? ? ? ?1 PCM
> ? ? AudioStreaming Interface Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ?29
> ? ? ? bDescriptorType ? ? ? ?36
> ? ? ? bDescriptorSubtype ? ? ?2 (FORMAT_TYPE)
> ? ? ? bFormatType ? ? ? ? ? ? 1 (FORMAT_TYPE_I)
> ? ? ? bNrChannels ? ? ? ? ? ? 1
> ? ? ? bSubframeSize ? ? ? ? ? 2
> ? ? ? bBitResolution ? ? ? ? 16
> ? ? ? bSamFreqType ? ? ? ? ? ?7 Discrete
> ? ? ? tSamFreq[ 0] ? ? ? ? 8000
> ? ? ? tSamFreq[ 1] ? ? ? ?11025
> ? ? ? tSamFreq[ 2] ? ? ? ?16000
> ? ? ? tSamFreq[ 3] ? ? ? ?22050
> ? ? ? tSamFreq[ 4] ? ? ? ?32000
> ? ? ? tSamFreq[ 5] ? ? ? ?44100
> ? ? ? tSamFreq[ 6] ? ? ? ?48000
> ? ? Endpoint Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ? 9
> ? ? ? bDescriptorType ? ? ? ? 5
> ? ? ? bEndpointAddress ? ? 0x81 ?EP 1 IN
> ? ? ? bmAttributes ? ? ? ? ? ?1
> ? ? ? ? Transfer Type ? ? ? ? ? ?Isochronous
> ? ? ? ? Synch Type ? ? ? ? ? ? ? None
> ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
> ? ? ? wMaxPacketSize ? ? 0x0001 ?1x 1 bytes
> ? ? ? bInterval ? ? ? ? ? ? ? 4
> ? ? ? bRefresh ? ? ? ? ? ? ? ?0
> ? ? ? bSynchAddress ? ? ? ? ? 0
> ? ? ? AudioControl Endpoint Descriptor:
> ? ? ? ? bLength ? ? ? ? ? ? ? ? 7
> ? ? ? ? bDescriptorType ? ? ? ?37
> ? ? ? ? bDescriptorSubtype ? ? ?1 (EP_GENERAL)
> ? ? ? ? bmAttributes ? ? ? ? 0x00
> ? ? ? ? bLockDelayUnits ? ? ? ? 0 Undefined
> ? ? ? ? wLockDelay ? ? ? ? ? ? ?0 Undefined
> Device Qualifier (for other device speed):
> ?bLength ? ? ? ? ? ? ? ?10
> ?bDescriptorType ? ? ? ? 6
> ?bcdUSB ? ? ? ? ? ? ? 2.00
> ?bDeviceClass ? ? ? ? ?239 Miscellaneous Device
> ?bDeviceSubClass ? ? ? ? 2 ?
> ?bDeviceProtocol ? ? ? ? 1 Interface Association
> ?bMaxPacketSize0 ? ? ? ?64
> ?bNumConfigurations ? ? ?1
> Device Status: ? ? 0x0000
> ?(Bus Powered)
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From laurent.pinchart at ideasonboard.com  Fri May  7 16:35:37 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 7 May 2010 16:35:37 +0200
Subject: [Linux-uvc-devel] Philips SPC530NC (0471:2034) fails
In-Reply-To: <n2k59cf47a81005050159y35045fb1s1916b75f27200d9b@mail.gmail.com>
References: <1272997089.19898.1373362445@webmail.messagingengine.com>
	<4BE13190.1050503@hk.airpost.net>
	<n2k59cf47a81005050159y35045fb1s1916b75f27200d9b@mail.gmail.com>
Message-ID: <201005071635.37840.laurent.pinchart@ideasonboard.com>

Hi Paulo,

On Wednesday 05 May 2010 10:59:26 Paulo Assis wrote:
> Hi,
> Are you sure the camera supports MJPG ?

That's indeed the problem.

> It seems to report only a uncompressed format (YUYV ?).
> You can check the supported formats with luvcview, guvcview or
> uvcdynctrl (libwebcam)

It can also be checked from the USB descriptors:

[snip]

> >   Interface Descriptor:
> >     bLength                 9
> >     bDescriptorType         4
> >     bInterfaceNumber        1
> >     bAlternateSetting       0
> >     bNumEndpoints           0
> >     bInterfaceClass        14 Video
> >     bInterfaceSubClass      2 Video Streaming
> >     bInterfaceProtocol      0
> >     iInterface              0

in the Video Streaming interface,

> >     VideoStreaming Interface Descriptor:
> >       bLength                            27
> >       bDescriptorType                    36
> >       bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
> >       bFormatIndex                        1
> >       bNumFrameDescriptors                2
> >       guidFormat
> >  {59555932-0000-1000-8000-00aa00389b71}
> >       bBitsPerPixel                      16
> >       bDefaultFrameIndex                  1
> >       bAspectRatioX                       0
> >       bAspectRatioY                       0
> >       bmInterlaceFlags                 0x00
> >         Interlaced stream or variable: No
> >         Fields per frame: 1 fields
> >         Field 1 first: No
> >         Field pattern: Field 1 only
> >         bCopyProtect                      0

descriptors of type 36 (class-specific) report, among other information, the 
formats supported by the device. In this case there's a single format 
descriptor, of subtype 4 (FORMAT_UNCOMPRESSED). Devices supporting MJPEG have 
a subtype 6 descriptor (in addition to the FORMAT_UNCOMPRESSED descriptor if 
they support uncompressed formats).

There's no need to verify this with luvcview.

Alternatively, setting the trace level to 3 when loading the uvcvideo driver 
will print the formats supported by the device.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Fri May  7 16:38:25 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 7 May 2010 16:38:25 +0200
Subject: [Linux-uvc-devel] Framerate of Quickcam Pro 9000
In-Reply-To: <i2g59cf47a81005040136vf2916bc4kc0e81d179ea4c953@mail.gmail.com>
References: <r2nf475b8d21004291101gc050f050yd12d2fb96f5c3911@mail.gmail.com>
	<t2uf475b8d21005031831x7ddd5ba3t475f9c8268cb52ce@mail.gmail.com>
	<i2g59cf47a81005040136vf2916bc4kc0e81d179ea4c953@mail.gmail.com>
Message-ID: <201005071638.25791.laurent.pinchart@ideasonboard.com>

Hi Paulo,

On Tuesday 04 May 2010 10:36:19 Paulo Assis wrote:
> > What happens to the camera settings when the computer is rebooted? Are
> > they stored in some non-volatile memory in the camera? That would be
> > awesome.
> 
> If I'm not mistaken USB keeps the power on, even during a reboot, so
> the camera should maintain the control settings.

I'm not sure that's guaranteed by the USB standard. I believe the camera 
should be reset when the computer is restarted. Whether it will loose its 
settings might depend on the camera firmware.

In any case, there's no non-volatile memory to store the controls in any of 
the consumer webcams I know of.

> You would have to unplug the camera to loose the settings.
> This is not always a good think, sometimes the camera may crash,
> meaning that you must physically unplug it to make it work again.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Fri May  7 17:07:39 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 7 May 2010 17:07:39 +0200
Subject: [Linux-uvc-devel] Multiple camera framerate.
In-Reply-To: <4BD70E75.8060804@gmail.com>
References: <201004271131.o3RBVxCM007900@singularity.tronunltd.com>
	<i2r59cf47a81004270448mc32a01a7x6d93575f95f62f15@mail.gmail.com>
	<4BD70E75.8060804@gmail.com>
Message-ID: <201005071707.40233.laurent.pinchart@ideasonboard.com>

Hi Dennis,

On Tuesday 27 April 2010 18:19:01 Dennis Muhlestein wrote:
> On 04/27/2010 05:48 AM, Paulo Assis wrote:
> > 2010/4/27 Ian Latter<ian.latter at midnightcode.org>:
> >>> You can grab frames at whatever speed you want, but it's the camera
> >>> framerate that will make a difference in the usb bandwidth and not the
> >>> amount of frames you get with your application.
> >> 
> >> So, if you don't take a frame from the UVC driver, it will simply
> >> continue to refresh an internal buffer with new frames from the camera
> >> device?
> > 
> > Think of it like this, the necessary bandwidth is requested by the device
> > and it will depend on the compression, resolution and framerate, in fact I
> > think some ("buggy") devices will always request the maximum bandwidth
> > causing problems on initialization, for these devices I think uvcvideo
> > uses it's own algorithm to calc the necessary bandwidth.

That's right. The uvcvideo driver tries to compute an estimate of the required 
bandwidth. That only works for uncompressed formats.

> Do the number of URBs have any effect at all?  I made an initial attempt
> to check this a while back by recompiling the driver with UVC_URBS as 1
> or 2 instead of 5.

Not on the bandwidth, no. The number of URBs will influence the memory used by 
the driver, and the real-time requirements. The less URBs, the fastest the 
driver needs to process the complete URBs and resubmit them to avoid running 
out of them.

> Changed the MAX_ISO_PACKETS a lot smaller too.

The number of packets influences the URB size for isochronous transfers. URBs 
complete when the maximum of packets have been transmitted. The larger the 
number, the less frequent the driver gets interrupted to process URBs (but it 
will also have to process more packets in one go, making the processing a bit 
longer).

> I wanted to see if perhaps submitting less URBs would somehow lessen the
> bandwidth requirements.  It didn't fix the problem though.

The driver explicitly selects the bandwidth by switching to an alternate 
setting. The USB core allocates the bandwidth when the URB are submitted, so 
the alternate setting selection call might succeed and the URB submission fail 
later. Please note that, with USB 3.0, the xHCI driver will perform the 
allocation when selecting the alternate setting.

The driver choose the alternate setting with the lowest bandwidth compatible 
with the bandwidth requirements reported by the camera. The number of URBs or 
packets will have no influence there.

> I suspect that somewhere in an underlying layer, whether kernel or physical,
> something is checking that bandwidth requirement for the configured
> endpoints and then denying new URBs being submitted.  I'm not opposed to
> modifying something at a lower level but I haven't found the spot at this
> point. I guess if the error comes from the physical hub there isn't much to
> be done then.

The USB core checks the bandwidth. There's an allocation process defined by 
the USB standard, and there's pretty much no way around that. You could modify 
the EHCI host controller driver to allow more than 80% of the total bandwidth 
to be allocated to periodic transfers. Another solution, as you pointed out 
below, is not to submit the URBs. That's very similar to performing the 
STREAMON/QBUF/DQBUF/STREAMOFF sequences in userspace on all devices one after 
the other, except that you might be able to get slightly better performances 
by avoiding context switches.

> > Also the device will always try to dispatch frames at the requested
> > framerate, if you don't grab them they will simply be dropped by the
> > driver.
> 
> I wonder if there is some way to restrict URB submitting to around 10
> fps? Perhaps a semaphore on the number of cameras that can be submitting
> URBs at all.  If I go ahead and configure all the cameras to run at 15 fps
> but only submit URBs for say 3 of the cameras at a time it seems it would
> work. I'm not worried about dropping 1/3 of the frames.

That might work, but it would be quite hackish. You wouldn't be able to 
synchronize to the frame start, so you will loose half a frame on average 
every time you "start" a camera.

You would basically need to keep a list of cameras and handle them in a round-
robin way. When one of the cameras completes a frame, you will have to stop 
submitting URBs for it, wait until all URBs have completed, and submit the 
URBs for the next camera in the list.

> I don't think I can write them all out to storage fast enough anyway.
> (I can come close to keeping up with 10 fps on 8 cameras though.)

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Fri May  7 17:10:23 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 7 May 2010 17:10:23 +0200
Subject: [Linux-uvc-devel] Multiple camera framerate.
In-Reply-To: <4BE03F29.4080706@gmail.com>
References: <4BD5FAFB.9080201@gmail.com> <4BD9D298.1040105@gmail.com>
	<4BE03F29.4080706@gmail.com>
Message-ID: <201005071710.23554.laurent.pinchart@ideasonboard.com>

Hi Denis,

On Tuesday 04 May 2010 17:37:13 Dennis Muhlestein wrote:
> On 04/29/2010 12:40 PM, Dennis Muhlestein wrote:
> > One idea I've been toying with is to add a semaphore around submitting
> > the URBs.
> > 
> > In uvc_video.c, where the URBs are submitted, I'd acquire a semephore
> > for each device currently submitting URBs. The semaphore would limit the
> > number of devices to whatever number I decide can safely submit URBs
> > simultaneously on the bus without throwing out of space errors.
> > 
> > I did an initial test of this and it looks promising. I can configure
> > all the cameras. As long as I don't submit the URBs for the number of
> > devices beyond that which will work at the same time, the other cameras
> > simply drop the data.
> > 
> > I'm not sure the best places to control the locking and unlocking of the
> > semaphore are. Right now, I lock it before submitting URBs in
> > uvc_init_video. In uvc_video_complete, I unlock it and relock it if the
> > buffer is complete (allowing another camera to acquire it and capture a
> > frame).
> > 
> > Anyway, it isn't working perfectly yet but I think I can debug it and at
> > least get to a point where I know if it's worth pursuing. I'm curious if
> > anyone can provide thoughts or alternatives.
> 
> I have two solutions that I've come up with this so far.
> 1) Modify the uvc_video.c to queue urbs in a list in the urb completion
> handler.  A driver level semaphore controls the number of currently
> submitting cameras.  You can adjust the initial sem_count in
> uvc_driver.c.  Ideally, that would be a module parameter but I'm just
> getting things to work.
> 
> I found capture speeds quite a bit slower than I'd like with this method
> though.  I can capture with 8 cameras at 10 FPS without overwhelming the
> ISO bus but if I change to 15 FPS I can only capture with 3 cameras at a
> time.  Adding the patch, I then can configure and capture from all 8
> cameras running at 15 FPS but only submitting URBs for 3 at a time.
> Depending on how many frames I let those cameras capture I got captured
> frame rates from around 4 to 6.
> 
> I'm attaching the patch in case anyone wants to play with this or
> suggest ways to improve it.

Interesting approach, but definitely a hack. I'm not sure if it has a chance 
to make it to the driver.

> One thing I had a problem with is that it seems some of the capture images
> are corrupted. This patch was against 2.6.27.2. A little old I know but I'm
> working on an embedded device.
> 
> 2) I modified ehci-sched.c to not raise the ENOSPC error.  That solution
> actually lets me capture on all 8 cameras at 15 FPS.  This has other
> implications though and I'm not sure it is a very good solution.  It
> does tell me that perhaps the Linux ISO scheduler could perhaps use look
> through.  One major discrepancy is that bandwidth is allocated based on
> the max packet size I think but for my compressed images (MJPG) each
> frame is only a fraction of the max allocated bandwidth.

That might be the real culprit. Maybe the camera is simply requesting too much 
bandwidth compared to its real requirements.

Can you check whether the video streaming interface has multiple alternate 
settings ? If so, which one does the uvcvideo driver chose ? You can get the 
information from the kernel log if you set the UVC_TRACE_VIDEO flag.

If the camera request an alternate setting that isn't the smallest, you might 
try to experiment with hardcoding a lower bandwidth in uvc_video_init.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Fri May  7 18:35:26 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 7 May 2010 18:35:26 +0200
Subject: [Linux-uvc-devel] Quickcam Pro 9000 LED control
In-Reply-To: <z2lf475b8d21004291023i775ae71dl3a0d18f1f5a7c272@mail.gmail.com>
References: <l2lf475b8d21004290818wbf6b2469s75f525a2f916536d@mail.gmail.com>
	<u2q59cf47a81004290841vd55af2ewc35abeeaf53262c@mail.gmail.com>
	<z2lf475b8d21004291023i775ae71dl3a0d18f1f5a7c272@mail.gmail.com>
Message-ID: <201005071835.26909.laurent.pinchart@ideasonboard.com>

Hi Alan,

On Thursday 29 April 2010 19:23:19 Alan wrote:
> Thanks a lot, I ran udevadm and now the led control is working :)

Great. Glad to hear it now works.

> By the way, I just had a thought that it would be cool to export the
> led control of the webcam using leds-class:
> 
> http://www.mjmwired.net/kernel/Documentation/leds-class.txt

I've thought about it, but that would be difficult. The uvcvideo driver has no 
idead that the control actually controls a LED. Having access to that 
information isn't straightforward, as it's not reported by the device.

-- 
Regards,

Laurent Pinchart


From djmuhlestein at gmail.com  Fri May  7 21:01:40 2010
From: djmuhlestein at gmail.com (Dennis Muhlestein)
Date: Fri, 07 May 2010 13:01:40 -0600
Subject: [Linux-uvc-devel] Multiple camera framerate.
In-Reply-To: <201005071710.23554.laurent.pinchart@ideasonboard.com>
References: <4BD5FAFB.9080201@gmail.com>
	<4BD9D298.1040105@gmail.com>	<4BE03F29.4080706@gmail.com>
	<201005071710.23554.laurent.pinchart@ideasonboard.com>
Message-ID: <4BE46394.7020807@gmail.com>

On 05/07/2010 09:10 AM, Laurent Pinchart wrote:

>>
>> I'm attaching the patch in case anyone wants to play with this or
>> suggest ways to improve it.
>
> Interesting approach, but definitely a hack. I'm not sure if it has a chance
> to make it to the driver.

Most definitely a hack.  I just included it because someone had 
expressed interest in the solution.  If there was a way to do it faster, 
it might be a good thing to pursue but I can't think of a good way to 
synchronize the frames in such a way to not lose a lot of each frame 
(like you mentioned in your other response) after continuing urb 
submission and waste a lot of transfer bandwidth.

>
>> One thing I had a problem with is that it seems some of the capture images
>> are corrupted. This patch was against 2.6.27.2. A little old I know but I'm
>> working on an embedded device.
>>
>> 2) I modified ehci-sched.c to not raise the ENOSPC error.  That solution
>> actually lets me capture on all 8 cameras at 15 FPS.  This has other
>> implications though and I'm not sure it is a very good solution.  It
>> does tell me that perhaps the Linux ISO scheduler could perhaps use look
>> through.  One major discrepancy is that bandwidth is allocated based on
>> the max packet size I think but for my compressed images (MJPG) each
>> frame is only a fraction of the max allocated bandwidth.
>
> That might be the real culprit. Maybe the camera is simply requesting too much
> bandwidth compared to its real requirements.
>
> Can you check whether the video streaming interface has multiple alternate
> settings ? If so, which one does the uvcvideo driver chose ? You can get the
> information from the kernel log if you set the UVC_TRACE_VIDEO flag.


The camera is definitely selecting more bandwidth than it needs.  The 
size of each image does vary when I'm streaming MJPG images.  It is 
usually somewhere along the lines of 110-150K at maximum resolution 
(1280x1024 for these cameras).
Perhaps this is the problem with these cameras:
Here is the information from the Uncompressed video format descriptor 
for the 1280x1024 YUYV data:
dwMaxVideoFrameBufferSize 2621440
And here is the information returned from the MJPG descriptor for the 
same sized compressed image:
dwMaxVideoFrameBufferSize 2621440

Logitech C500 by the way.

> If the camera request an alternate setting that isn't the smallest, you might
> try to experiment with hardcoding a lower bandwidth in uvc_video_init.
>

I think I actually tried that a while back when I first started playing 
with this issue.  If I recall, selecting a lower bandwidth interface 
caused a mismatch between the information in each packets and the 
placement of the frame headers in the UVC protocol.  Result was it never 
dequeued a buffer.  I'm not sure that isn't worth investigating further 
though.  I may have done something wrong.

Thank for your analysis of this.  Helps to have more than just my eyes 
look over the issue.

In the mean time, I'm having quite good luck with my EHCI hack.  I just 
let all the ISO frames through and I get all the images from all 8 
cameras back at 15 FPS.  I may come back to this problem before I'm all 
the way finished and see if there is a way to button this up cleaner but 
temporarily the solution is working for me.

-Dennis




From pj.assis at gmail.com  Sat May  8 11:46:13 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Sat, 8 May 2010 10:46:13 +0100
Subject: [Linux-uvc-devel] Framerate of Quickcam Pro 9000
In-Reply-To: <201005071638.25791.laurent.pinchart@ideasonboard.com>
References: <r2nf475b8d21004291101gc050f050yd12d2fb96f5c3911@mail.gmail.com>
	<t2uf475b8d21005031831x7ddd5ba3t475f9c8268cb52ce@mail.gmail.com>
	<i2g59cf47a81005040136vf2916bc4kc0e81d179ea4c953@mail.gmail.com>
	<201005071638.25791.laurent.pinchart@ideasonboard.com>
Message-ID: <AANLkTilX1PQPuXMOedbshn8ipFH8nIT9q7ksO05_m1gz@mail.gmail.com>

2010/5/7 Laurent Pinchart <laurent.pinchart at ideasonboard.com>:
Laurent,
> Hi Paulo,
>
> On Tuesday 04 May 2010 10:36:19 Paulo Assis wrote:
>> > What happens to the camera settings when the computer is rebooted? Are
>> > they stored in some non-volatile memory in the camera? That would be
>> > awesome.
>>
>> If I'm not mistaken USB keeps the power on, even during a reboot, so
>> the camera should maintain the control settings.
>
> I'm not sure that's guaranteed by the USB standard. I believe the camera
> should be reset when the computer is restarted. Whether it will loose its
> settings might depend on the camera firmware.
>

In that case it may depend on the motherboard configuration.
I've tested this on my pc and the camera kept it's settings.
I've had plenty of problems with this in the past, if the camera
crashes for some reason,
a reboot won't solve it and it may also prevent a normal boot.
Just last week I notice that my pc took much longer than usual to boot
and it was also
much slower, after a little investigation I found that usb audio was the cause,
the camera had crash and couldn't be initiated.


> In any case, there's no non-volatile memory to store the controls in any of
> the consumer webcams I know of.
>

Yes this is true.

Regards,
Paulo


From uvc at hk.airpost.net  Sat May  8 20:14:59 2010
From: uvc at hk.airpost.net (HKairpost)
Date: Sat, 08 May 2010 20:14:59 +0200
Subject: [Linux-uvc-devel] Philips SPC530NC (0471:2034) fails
In-Reply-To: <201005071635.37840.laurent.pinchart@ideasonboard.com>
References: <1272997089.19898.1373362445@webmail.messagingengine.com>
	<4BE13190.1050503@hk.airpost.net>
	<n2k59cf47a81005050159y35045fb1s1916b75f27200d9b@mail.gmail.com>
	<201005071635.37840.laurent.pinchart@ideasonboard.com>
Message-ID: <4BE5AA23.20709@hk.airpost.net>

Laurent Pinchart wrote:
> Hi Paulo,
>
> On Wednesday 05 May 2010 10:59:26 Paulo Assis wrote:
>   
>> Hi,
>> Are you sure the camera supports MJPG ?
>>     
>
> That's indeed the problem.
>   

Thanks, you were both right, now that I set the input as YUYV it works.

The issue i have now is that it is only able to stream in 320x240 when 
it's suppose to be able to stream in 640x480.
I tried with both MJPG-Streamer and Motion. I paste the motion's log at 
the end of this email. As you may see motion segfault and try to restart 
endlessly.

In dmesg i have the following:
------8<----------------------------
Linux video capture interface: v2.00
uvcvideo: Found UVC 1.00 device USB Video Camera (0471:2034)
input: USB Video Camera as 
/devices/pci0000:00/0000:00:00.1/usb1/1-1/1-1:1.0/input/input0
usbcore: registered new interface driver uvcvideo
USB Video Class driver (v0.1.0)
uvcvideo: device USB Video Camera requested null bandwidth, defaulting 
to lowest.
uvcvideo: device USB Video Camera requested null bandwidth, defaulting 
to lowest.
uvcvideo: device USB Video Camera requested null bandwidth, defaulting 
to lowest.
uvcvideo: device USB Video Camera requested null bandwidth, defaulting 
to lowest.
uvcvideo: device USB Video Camera requested null bandwidth, defaulting 
to lowest.
uvcvideo: device USB Video Camera requested null bandwidth, defaulting 
to lowest.
uvcvideo: device USB Video Camera requested null bandwidth, defaulting 
to lowest.
uvcvideo: device USB Video Camera requested null bandwidth, defaulting 
to lowest.
------8<----------------------------

As far as mjpg-streamer is concern I get the following, no error but it 
streams nothing:
------8<----------------------------
root at OpenWrt:~# mjpg_streamer -i "input_uvc.so -d /dev/video0 -y -r 
640x480" -o "output_http.so -p 8080 -w /www/webcam"
MJPG Streamer Version.: 2.0
 i: Using V4L2 device.: /dev/video0
 i: Desired Resolution: 640 x 480
 i: Frames Per Second.: 5
 i: Format............: YUV
 i: JPEG Quality......: 80
 o: www-folder-path...: /www/webcam/
 o: HTTP TCP port.....: 8080
 o: username:password.: disabled
 o: commands..........: enabled
------8<----------------------------

In 320x480 both softwares stream correctly. And plugged to my ubuntu 
laptop the webcam output correctly in 640x480 with luvcview. I believe i 
have an issue with the uvc driver, but i don't know where to look. Any 
pointer would help.

Regards,
hka




Motion log
------8<----------------------------
[0] Processing thread 0 - config file /etc/motion.conf
[0] Unknown config option "ffmpeg_cap_new"
[0] Unknown config option "ffmpeg_cap_motion"
[0] Unknown config option "ffmpeg_timelapse"
[0] Unknown config option "ffmpeg_timelapse_mode"
[0] Unknown config option "ffmpeg_bps"
[0] Unknown config option "ffmpeg_variable_bitrate"
[0] Unknown config option "ffmpeg_video_codec"
[0] Unknown config option "ffmpeg_deinterlace"
[0] Unknown config option "movie_filename"
[0] Unknown config option "timelapse_filename"
[0] Unknown config option "sql_log_image"
[0] Unknown config option "sql_log_snapshot"
[0] Unknown config option "sql_log_mpeg"
[0] Unknown config option "sql_log_timelapse"
[0] Unknown config option "sql_query"
[0] Motion 3.2.11.1 Started
[0] Thread 1 is from /etc/motion.conf
[1] Thread 1 started
[0] motion-httpd/3.2.11.1 running, accepting connections
[1] cap.driver: "uvcvideo"
[1] cap.card: "USB Video Camera"
[1] cap.bus_info: "usb-0000:00:00.1-1"
[1] cap.capabilities=0x04000001
[1] - VIDEO_CAPTURE
[1] - STREAMING
[1] Supported palettes:
[1] 0: YUYV (YUV 4:2:2 (YUYV))
[1] Selected palette YUYV
[0] motion-httpd: waiting for data on port TCP 8080
[1] index_format 6 Test palette YUYV (640x480)
[1] Using palette YUYV (640x480) bytesperlines 1280 sizeimage 614400 
colorspace 00000000
[1] found control 0x00980900, "Brightness", range 0,37
[1]     "Brightness", default 24, current 24
[1] found control 0x00980901, "Contrast", range 0,200
[1]     "Contrast", default 124, current 124
[1] found control 0x00980902, "Saturation", range 0,200
[1]     "Saturation", default 121, current 121
[1] found control 0x00980910, "Gamma", range 1,31
[1]     "Gamma", default 18, current 18
[1] mmap information:
[1] frames=4
[1] 0 length=614400
[1] 1 length=614400
[1] 2 length=614400
[1] 3 length=614400
[1] Using V4L2
[1] Resizing pre_capture buffer to 1 items
[1] Started stream webcam server in port 8081
[0] Thread 1 - Watchdog timeout, trying to do a graceful restart
[0] httpd - Finishing
[0] httpd Closing
[0] httpd thread exit
[1] Thread exiting
[1] Calling vid_close() from motion_cleanup
[1] Closing video device /dev/video0
[0] Motion thread 1 restart
[1] Thread 1 started
[1] cap.driver: "uvcvideo"
[1] cap.card: "USB Video Camera"
[1] cap.bus_info: "usb-0000:00:00.1-1"
[1] cap.capabilities=0x04000001
[1] - VIDEO_CAPTURE
[1] - STREAMING
[1] Supported palettes:
[1] 0: YUYV (YUV 4:2:2 (YUYV))
[1] Selected palette YUYV
[1] index_format 6 Test palette YUYV (640x480)
[1] Using palette YUYV (640x480) bytesperlines 1280 sizeimage 614400 
colorspace 00000000
[1] found control 0x00980900, "Brightness", range 0,37
[1]     "Brightness", default 24, current 24
[1] found control 0x00980901, "Contrast", range 0,200
[1]     "Contrast", default 124, current 124
[1] found control 0x00980902, "Saturation", range 0,200
[1]     "Saturation", default 121, current 121
[1] found control 0x00980910, "Gamma", range 1,31
[1]     "Gamma", default 18, current 18
[1] mmap information:
[1] frames=4
[1] 0 length=614400
[1] 1 length=614400
[1] 2 length=614400
[1] 3 length=614400
[1] Using V4L2
[1] Resizing pre_capture buffer to 1 items
[1] Started stream webcam server in port 8081
[0] Thread 1 - Watchdog timeout, trying to do a graceful restart
[1] Thread exiting
[1] Calling vid_close() from motion_cleanup
[1] Closing video device /dev/video0
[0] Motion thread 1 restart
[1] Thread 1 started
[1] cap.driver: "uvcvideo"
[1] cap.card: "USB Video Camera"
[1] cap.bus_info: "usb-0000:00:00.1-1"
[1] cap.capabilities=0x04000001
[1] - VIDEO_CAPTURE
[1] - STREAMING
[1] Supported palettes:
[1] 0: YUYV (YUV 4:2:2 (YUYV))
[1] Selected palette YUYV
[1] index_format 6 Test palette YUYV (640x480)
[1] Using palette YUYV (640x480) bytesperlines 1280 sizeimage 614400 
colorspace 00000000
[1] found control 0x00980900, "Brightness", range 0,37
[1]     "Brightness", default 24, current 24
[1] found control 0x00980901, "Contrast", range 0,200
[1]     "Contrast", default 124, current 124
[1] found control 0x00980902, "Saturation", range 0,200
[1]     "Saturation", default 121, current 121
[1] found control 0x00980910, "Gamma", range 1,31
[1]     "Gamma", default 18, current 18
[1] mmap information:
[1] frames=4
[1] 0 length=614400
[1] 1 length=614400
[1] 2 length=614400
[1] 3 length=614400
[1] Using V4L2
[1] Resizing pre_capture buffer to 1 items
[1] Started stream webcam server in port 8081
[0] Thread 1 - Watchdog timeout, trying to do a graceful restart
[1] Thread exiting
[1] Calling vid_close() from motion_cleanup
[1] Closing video device /dev/video0
[0] Motion thread 1 restart
[1] Thread 1 started
[1] cap.driver: "uvcvideo"
[1] cap.card: "USB Video Camera"
[1] cap.bus_info: "usb-0000:00:00.1-1"
[1] cap.capabilities=0x04000001
[1] - VIDEO_CAPTURE
[1] - STREAMING
[1] Supported palettes:
[1] 0: YUYV (YUV 4:2:2 (YUYV))
[1] Selected palette YUYV
[1] index_format 6 Test palette YUYV (640x480)
[1] Using palette YUYV (640x480) bytesperlines 1280 sizeimage 614400 
colorspace 00000000
[1] found control 0x00980900, "Brightness", range 0,37
[1]     "Brightness", default 24, current 24
[1] found control 0x00980901, "Contrast", range 0,200
[1]     "Contrast", default 124, current 124
[1] found control 0x00980902, "Saturation", range 0,200
[1]     "Saturation", default 121, current 121
[1] found control 0x00980910, "Gamma", range 1,31
[1]     "Gamma", default 18, current 18
[1] mmap information:
[1] frames=4
[1] 0 length=614400
[1] 1 length=614400
[1] 2 length=614400
[1] 3 length=614400
[1] Using V4L2
[1] Resizing pre_capture buffer to 1 items
[0] Thread 1 - Watchdog timeout, trying to do a graceful restart
[1] Started stream webcam server in port 8081
[1] Thread exiting
[1] Calling vid_close() from motion_cleanup
[1] Closing video device /dev/video0
[0] Motion thread 1 restart
[1] Thread 1 started
[1] cap.driver: "uvcvideo"
[1] cap.card: "USB Video Camera"
[1] cap.bus_info: "usb-0000:00:00.1-1"
[1] cap.capabilities=0x04000001
[1] - VIDEO_CAPTURE
[1] - STREAMING
[1] Supported palettes:
[1] 0: YUYV (YUV 4:2:2 (YUYV))
[1] Selected palette YUYV
[1] index_format 6 Test palette YUYV (640x480)
[1] Using palette YUYV (640x480) bytesperlines 1280 sizeimage 614400 
colorspace 00000000
[1] found control 0x00980900, "Brightness", range 0,37
[1]     "Brightness", default 24, current 24
[1] found control 0x00980901, "Contrast", range 0,200
[1]     "Contrast", default 124, current 124
[1] found control 0x00980902, "Saturation", range 0,200
[1]     "Saturation", default 121, current 121
[1] found control 0x00980910, "Gamma", range 1,31
[1]     "Gamma", default 18, current 18
[1] mmap information:
[1] frames=4
[1] 0 length=614400
[1] 1 length=614400
[1] 2 length=614400
[1] 3 length=614400
[1] Using V4L2
[1] Resizing pre_capture buffer to 1 items
[1] Started stream webcam server in port 8081
[0] Thread 1 - Watchdog timeout, trying to do a graceful restart
[1] Thread exiting
[1] Calling vid_close() from motion_cleanup
[1] Closing video device /dev/video0
[0] Motion thread 1 restart
[1] Thread 1 started
[1] cap.driver: "uvcvideo"
[1] cap.card: "USB Video Camera"
[1] cap.bus_info: "usb-0000:00:00.1-1"
[1] cap.capabilities=0x04000001
[1] - VIDEO_CAPTURE
[1] - STREAMING
[1] Supported palettes:
[1] 0: YUYV (YUV 4:2:2 (YUYV))
[1] Selected palette YUYV
[1] index_format 6 Test palette YUYV (640x480)
[1] Using palette YUYV (640x480) bytesperlines 1280 sizeimage 614400 
colorspace 00000000
[1] found control 0x00980900, "Brightness", range 0,37
[1]     "Brightness", default 24, current 24
[1] found control 0x00980901, "Contrast", range 0,200
[1]     "Contrast", default 124, current 124
[1] found control 0x00980902, "Saturation", range 0,200
[1]     "Saturation", default 121, current 121
[1] found control 0x00980910, "Gamma", range 1,31
[1]     "Gamma", default 18, current 18
[1] mmap information:
[1] frames=4
[1] 0 length=614400
[1] 1 length=614400
[1] 2 length=614400
[1] 3 length=614400
[1] Using V4L2
[1] Resizing pre_capture buffer to 1 items
[0] Thread 1 - Watchdog timeout, trying to do a graceful restart
[1] Started stream webcam server in port 8081
[1] Thread exiting
[1] Calling vid_close() from motion_cleanup
[1] Closing video device /dev/video0
[0] Motion thread 1 restart
[1] Thread 1 started
[1] cap.driver: "uvcvideo"
[1] cap.card: "USB Video Camera"
[1] cap.bus_info: "usb-0000:00:00.1-1"
[1] cap.capabilities=0x04000001
[1] - VIDEO_CAPTURE
[1] - STREAMING
[1] Supported palettes:
[1] 0: YUYV (YUV 4:2:2 (YUYV))
[1] Selected palette YUYV
[1] index_format 6 Test palette YUYV (640x480)
[1] Using palette YUYV (640x480) bytesperlines 1280 sizeimage 614400 
colorspace 00000000
[1] found control 0x00980900, "Brightness", range 0,37
[1]     "Brightness", default 24, current 24
[1] found control 0x00980901, "Contrast", range 0,200
[1]     "Contrast", default 124, current 124
[1] found control 0x00980902, "Saturation", range 0,200
[1]     "Saturation", default 121, current 121
[1] found control 0x00980910, "Gamma", range 1,31
[1]     "Gamma", default 18, current 18
[1] mmap information:
[1] frames=4
[1] 0 length=614400
[1] 1 length=614400
[1] 2 length=614400
[1] 3 length=614400
[1] Using V4L2
[1] Resizing pre_capture buffer to 1 items
...



From palmax at gmail.com  Sun May  9 20:55:56 2010
From: palmax at gmail.com (Palmax Maverick)
Date: Sun, 9 May 2010 20:55:56 +0200
Subject: [Linux-uvc-devel] [UVC] VS Interface
Message-ID: <AANLkTim2bwphYmJitpGzu0g5QOhHCFRKv-W-c14gYmmZ@mail.gmail.com>

Dear developers of linux-uvc,


I want to list all VS Interfaces of my devices (
/sys/class/video4linux/video0, /sys/class/video4linux/video1, ...,
/sys/class/video4linux/videoN ).
I think that I should use VS_PROBE_CONTROL, but do you know a good
example for doing it?

I need it for getting each Input Header of each VS Interface.


Thanks for your help
Palmax


From mrluzeiro at ua.pt  Tue May 11 10:56:54 2010
From: mrluzeiro at ua.pt (Mario Rui Luzeiro)
Date: Tue, 11 May 2010 09:56:54 +0100
Subject: [Linux-uvc-devel] 041e:4057 Creative Live! Cam Optia - exposure
	control problem
In-Reply-To: <mailman.0.1273567882.12520.linux-uvc-devel@lists.berlios.de>
References: <mailman.0.1273567882.12520.linux-uvc-devel@lists.berlios.de>
Message-ID: <web-102922410@controller.cgpmail.ua.pt>

I've just tryed this webcam and there are some issues 
setting exposure controls with v4l2ucp.
There are some options "auto.. manual.. shutter 
priority.."
and exposure control that can slide from 20 to 5000 .. but 
it works with a strange behaviour.

any news update for this camera?
MRL


From pj.assis at gmail.com  Tue May 11 18:43:44 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Tue, 11 May 2010 17:43:44 +0100
Subject: [Linux-uvc-devel] 041e:4057 Creative Live! Cam Optia - exposure
	control problem
In-Reply-To: <web-102922410@controller.cgpmail.ua.pt>
References: <mailman.0.1273567882.12520.linux-uvc-devel@lists.berlios.de>
	<web-102922410@controller.cgpmail.ua.pt>
Message-ID: <AANLkTimGaFMiSslHDHMFL3QuIvCn1BJanWwpVV3_p_Sc@mail.gmail.com>

Mario Hi,

2010/5/11 Mario Rui Luzeiro <mrluzeiro at ua.pt>:
> I've just tryed this webcam and there are some issues setting exposure
> controls with v4l2ucp.
> There are some options "auto.. manual.. shutter priority.."
> and exposure control that can slide from 20 to 5000 .. but it works with a
> strange behaviour.
>

What do you mean by strange behavior?
For setting the exposure value you must first change exposure mode to
manual, otherwise it will fail.

Regards,
Paulo

> any news update for this camera?
> MRL
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From mrluzeiro at ua.pt  Tue May 11 21:29:03 2010
From: mrluzeiro at ua.pt (Mario Rui Luzeiro)
Date: Tue, 11 May 2010 20:29:03 +0100
Subject: [Linux-uvc-devel] 041e:4057 Creative Live! Cam Optia - exposure
 control problem
In-Reply-To: <AANLkTimGaFMiSslHDHMFL3QuIvCn1BJanWwpVV3_p_Sc@mail.gmail.com>
References: <mailman.0.1273567882.12520.linux-uvc-devel@lists.berlios.de>
	<web-102922410@controller.cgpmail.ua.pt>
	<AANLkTimGaFMiSslHDHMFL3QuIvCn1BJanWwpVV3_p_Sc@mail.gmail.com>
Message-ID: <web-100543580@controller2.cgpmail.ua.pt>

I've found this posts where:

https://lists.berlios.de/pipermail/linux-uvc-devel/2008-June/003658.html
http://lists.berlios.de/pipermail/linux-uvc-devel/2008-July/003816.html

Thats what i experienced.


> What do you mean by strange behavior?
>For setting the exposure value you must first change 
>exposure mode to
> manual, otherwise it will fail.

What I mean for strange behavior is that instead of what 
is in other posts, i found that the values:
78
39
156
312
625

really do something in exposure control and doesn't 
overexposure. but the other ones do overexposure

this only works when option is in "shutter priority mode"

in binary this numbers are:

..
100111
1001110
10011100
100111000
...

Also, the "Exposure, Auto Priority" gives and "in/out data 
error"

hope that helps in debug..

MRL

Em Tue, 11 May 2010 17:43:44 +0100
  Paulo Assis <pj.assis at gmail.com> escreveu:
> Mario Hi,
> 
> 2010/5/11 Mario Rui Luzeiro <mrluzeiro at ua.pt>:
>> I've just tryed this webcam and there are some issues 
>>setting exposure
>> controls with v4l2ucp.
>> There are some options "auto.. manual.. shutter 
>>priority.."
>> and exposure control that can slide from 20 to 5000 .. 
>>but it works with a
>> strange behaviour.
>>
> 
> What do you mean by strange behavior?
>For setting the exposure value you must first change 
>exposure mode to
> manual, otherwise it will fail.
> 
> Regards,
> Paulo
> 
>> any news update for this camera?
>> MRL
>> _______________________________________________
>> Linux-uvc-devel mailing list
>> Linux-uvc-devel at lists.berlios.de
>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>



From pj.assis at gmail.com  Wed May 12 00:16:31 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Tue, 11 May 2010 23:16:31 +0100
Subject: [Linux-uvc-devel] 041e:4057 Creative Live! Cam Optia - exposure
	control problem
In-Reply-To: <web-100543580@controller2.cgpmail.ua.pt>
References: <mailman.0.1273567882.12520.linux-uvc-devel@lists.berlios.de>
	<web-102922410@controller.cgpmail.ua.pt>
	<AANLkTimGaFMiSslHDHMFL3QuIvCn1BJanWwpVV3_p_Sc@mail.gmail.com>
	<web-100543580@controller2.cgpmail.ua.pt>
Message-ID: <AANLkTikRvtFgoeLdAzRItKDrRiWw5OJkAbCfzOw8NEaX@mail.gmail.com>

Mario,
Respondo em Ingl?s, para que seja compreendido por todos os membros da
lista :-)

2010/5/11 Mario Rui Luzeiro <mrluzeiro at ua.pt>:
> I've found this posts where:
>
> https://lists.berlios.de/pipermail/linux-uvc-devel/2008-June/003658.html
> http://lists.berlios.de/pipermail/linux-uvc-devel/2008-July/003816.html
>
> Thats what i experienced.
>
>
>> What do you mean by strange behavior?
>> For setting the exposure value you must first change exposure mode to
>> manual, otherwise it will fail.
>
> What I mean for strange behavior is that instead of what is in other posts,
> i found that the values:
> 78
> 39
> 156
> 312
> 625
>
> really do something in exposure control and doesn't overexposure. but the
> other ones do overexposure

This is exposure for "Exposure (Absolute)", correct ?


> this only works when option is in "shutter priority mode"
>

This is weird, in logitech cameras you can't manually change exposure unless
"Exposure, Auto" is set to manual. All other modes, if available can
override the
value set in "Exposure (Absolute)".

> in binary this numbers are:
>
> ..
> 100111
> 1001110
> 10011100
> 100111000
> ...
>
> Also, the "Exposure, Auto Priority" gives and "in/out data error"
>
You need to disable "Exposure, Auto Priority" or the the absolute value
can/will be overridden.
>From the links you posted I've seen some really strange values:

Exposure, Auto Priority
     ID      : 0x00000010,
     Type    : Boolean,
     Flags   : { CAN_READ, CAN_WRITE },
     Values  : [ 20 .. 5000, step size: 1 ],
     Default : 79

Boolean controls should only allow 0 or 1, can you use some other
control application: guvcview, uvcdynctrl and set this to 0, maybe the
one your using is trying to set it to the reported minimum value: 20

Best Regards,
Paulo

> hope that helps in debug..
>
> MRL
>
> Em Tue, 11 May 2010 17:43:44 +0100
> ?Paulo Assis <pj.assis at gmail.com> escreveu:
>>
>> Mario Hi,
>>
>> 2010/5/11 Mario Rui Luzeiro <mrluzeiro at ua.pt>:
>>>
>>> I've just tryed this webcam and there are some issues setting exposure
>>> controls with v4l2ucp.
>>> There are some options "auto.. manual.. shutter priority.."
>>> and exposure control that can slide from 20 to 5000 .. but it works with
>>> a
>>> strange behaviour.
>>>
>>
>> What do you mean by strange behavior?
>> For setting the exposure value you must first change exposure mode to
>> manual, otherwise it will fail.
>>
>> Regards,
>> Paulo
>>
>>> any news update for this camera?
>>> MRL
>>> _______________________________________________
>>> Linux-uvc-devel mailing list
>>> Linux-uvc-devel at lists.berlios.de
>>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>>
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From mrluzeiro at ua.pt  Wed May 12 10:49:05 2010
From: mrluzeiro at ua.pt (Mario Rui Luzeiro)
Date: Wed, 12 May 2010 09:49:05 +0100
Subject: [Linux-uvc-devel] 041e:4057 Creative Live! Cam Optia - exposure
 control problem
In-Reply-To: <AANLkTikRvtFgoeLdAzRItKDrRiWw5OJkAbCfzOw8NEaX@mail.gmail.com>
References: <mailman.0.1273567882.12520.linux-uvc-devel@lists.berlios.de>
	<web-102922410@controller.cgpmail.ua.pt>
	<AANLkTimGaFMiSslHDHMFL3QuIvCn1BJanWwpVV3_p_Sc@mail.gmail.com>
	<web-100543580@controller2.cgpmail.ua.pt>
	<AANLkTikRvtFgoeLdAzRItKDrRiWw5OJkAbCfzOw8NEaX@mail.gmail.com>
Message-ID: <web-100573477@controller2.cgpmail.ua.pt>

> This is exposure for "Exposure (Absolute)", correct ?

I mean for the one that can set the range values from 20 
to 5000.
  
>> this only works when option is in "shutter priority 
>>mode"
>>
> 
> This is weird, in logitech cameras you can't manually 
>change exposure unless
> "Exposure, Auto" is set to manual. All other modes, if 
>available can
> override the
> value set in "Exposure (Absolute)".

In "Exposure, Manual" it doesnt work.

in binary this numbers are:
100111
1001110
10011100
100111000
1001110001
10011100010
100111000100

> You need to disable "Exposure, Auto Priority" or the the 
>absolute value
> can/will be overridden.

The "Auto" are disabled.

>From the links you posted I've seen some really strange 
>values:
> 
> Exposure, Auto Priority
>     ID      : 0x00000010,
>     Type    : Boolean,
>     Flags   : { CAN_READ, CAN_WRITE },
>     Values  : [ 20 .. 5000, step size: 1 ],
>     Default : 79

I didnt test this in my system, this post dates from 2008, 
maybe this problem is updated now, but in v4l2ucp I can 
set all range values.


I've tested this camera in windows, and about the manual 
exposure values it seams to match, that is: there are only 
8 values? of manual exposure that you can set in windows 
drivers.

also, in windows drivers there are other options for 
"light filtering" like: "flurescent lamps, incandescnt 
lamps, outdoors..."

besides thats, the image quality is the same in 
linux/windows.

MRL


From vegardhaugland at gmail.com  Thu May 13 00:12:32 2010
From: vegardhaugland at gmail.com (Vegard Haugland)
Date: Thu, 13 May 2010 00:12:32 +0200
Subject: [Linux-uvc-devel] Looking for upside down uvc cams
Message-ID: <AANLkTikiPp3wzWp_87BwNu4_wYNvab2LVCJ_3EbHfu8I@mail.gmail.com>

Hello,

I encountered this issue on my laptop, an ASUS UL30A.

Attached is the output from lsusb and dmidecode.

Thanks!

Vegard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100513/9d099e3c/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: dmi.log
Type: text/x-log
Size: 11686 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100513/9d099e3c/attachment.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lsusb.log
Type: text/x-log
Size: 693 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100513/9d099e3c/attachment-0001.bin>

From Enrique at cafemarbellachicago.com  Tue May 11 19:56:06 2010
From: Enrique at cafemarbellachicago.com (Enrique A Segni)
Date: Tue, 11 May 2010 12:56:06 -0500
Subject: [Linux-uvc-devel] unsupported integrated webcam
Message-ID: <1273600566.9625.18.camel@desktop>

Hello,

I'm very new at this but from what I see in your site the integrated
webcam on my HP Touchsmart 300-1025 is not supported.

I'm enclosing lsusb, lsusb -v and dmesg for your info.

If there is any other info you need please let me know...

My sound, touchscreen and tvtuner are not either, any suggestions or
info would be welcome.

Thanks

Enrique
-------------- next part --------------
[   11.135195] EDAC amd64_edac:  Ver: 3.2.0 Apr 28 2010
[   11.143332] [Firmware Bug]: ACPI(VGA) defines _DOD but not _DOS
[   11.143396] [Firmware Bug]: ACPI: ACPI brightness control misses _BQC function
[   11.144312] acpi device:02: registered as cooling_device2
[   11.144351] input: Video Bus as /devices/LNXSYSTM:00/LNXSYBUS:00/PNP0A03:00/device:01/LNXVIDEO:00/input/input3
[   11.144389] ACPI: Video Device [VGA] (multi-head: yes  rom: no  post: no)
[   11.147677] vga16fb: initializing
[   11.147680] vga16fb: mapped to 0xffff8800000a0000
[   11.147722] fb0: VGA16 VGA frame buffer device
[   11.149250] input: CNF8050 as /devices/pci0000:00/0000:00:13.2/usb2/2-5/2-5:1.0/input/input4
[   11.149298] usbcore: registered new interface driver uvcvideo
[   11.149300] USB Video Class driver (v0.1.0)
[   11.152329] type=1505 audit(1273504450.727:2):  operation="profile_load" pid=757 name="/sbin/dhclient3"
[   11.152526] type=1505 audit(1273504450.727:3):  operation="profile_load" pid=757 name="/usr/lib/NetworkManager/nm-dhcp-client.action"
[   11.152634] type=1505 audit(1273504450.727:4):  operation="profile_load" pid=757 name="/usr/lib/connman/scripts/dhclient-script"
[   11.161278] fglrx: module license 'Proprietary. (C) 2002 - ATI Technologies, Starnberg, GERMANY' taints kernel.
[   11.161283] Disabling lock debugging due to kernel taint
[   11.198650] rt3090 0000:03:00.0: PCI INT A -> GSI 17 (level, low) -> IRQ 17
[   11.198694] rt3090 0000:03:00.0: setting latency timer to 64
[   11.198825] 
[   11.198826] 
[   11.198826] === pAd = ffffc90011566000, size = 526344 ===
[   11.198827] 
[   11.198828] <-- RTMPAllocAdapterBlock, Status=0
[   11.198829] pAd->CSRBaseAddress =0xffffc900119c0000, csr_addr=0xffffc900119c0000!
[   11.201355] usbcore: registered new interface driver hiddev
[   11.206343] generic-usb 0003:1926:0006.0001: hiddev96,hidraw0: USB HID v1.11 Device [NextWindow Touchscreen] on usb-0000:00:12.0-2/input1
[   11.210033] EDAC amd64: This node reports that Memory ECC is currently disabled, set F3x44[22] (0000:00:18.3).
[   11.210041] EDAC amd64: ECC disabled in the BIOS or no ECC capability, module will not load.
[   11.210043]  Either enable ECC checking or force module loading by setting 'ecc_enable_override'.
[   11.210044]  (Note that use of the override may cause unknown side effects.)
[   11.210046] input: HP HP Wireless Keyboard Mouse Kit as /devices/pci0000:00/0000:00:13.1/usb6/6-1/6-1:1.0/input/input5
[   11.210103] generic-usb 0003:05AF:0809.0002: input,hidraw1: USB HID v1.11 Keyboard [HP HP Wireless Keyboard Mouse Kit] on usb-0000:00:13.1-1/input0
[   11.210149] amd64_edac: probe of 0000:00:18.2 failed with error -22
[   11.213340] [fglrx] Maximum main memory to use for locked dma buffers: 3553 MBytes.
[   11.213357] [fglrx]   vendor: 1002 device: 9612 count: 1
[   11.213592] [fglrx] ioport: bar 1, base 0xd000, size: 0x100
[   11.213605] pci 0000:01:05.0: PCI INT A -> GSI 18 (level, low) -> IRQ 18
[   11.213609] pci 0000:01:05.0: setting latency timer to 64
[   11.216973] [fglrx] Kernel PAT support is enabled
[   11.216992] [fglrx] module loaded - fglrx 8.72.11 [Apr  8 2010] with 1 minors
[   11.255231] input: HP HP Wireless Keyboard Mouse Kit as /devices/pci0000:00/0000:00:13.1/usb6/6-1/6-1:1.1/input/input6
[   11.255329] generic-usb 0003:05AF:0809.0003: input,hiddev97,hidraw2: USB HID v1.11 Mouse [HP HP Wireless Keyboard Mouse Kit] on usb-0000:00:13.1-1/input1
[   11.255348] usbcore: registered new interface driver usbhid
[   11.255350] usbhid: v2.6:USB HID core driver
[   11.268246] HDA Intel 0000:00:14.2: PCI INT A -> GSI 16 (level, low) -> IRQ 16
[   11.323141] usb 4-2: reset full speed USB device using ohci_hcd and address 3
[   11.335801] Console: switching to colour frame buffer device 80x30
[   11.537836] lirc_dev: lirc_register_driver: sample_rate: 0
[   11.541842] lirc_mceusb[3]: FINTEK eHome Infrared Transceiver on usb4:3
[   11.541877] usbcore: registered new interface driver lirc_mceusb
[   11.725021] input: HDA Digital PCBeep as /devices/pci0000:00/0000:00:14.2/input/input7
[   11.782478] type=1505 audit(1273504451.357:5):  operation="profile_load" pid=998 name="/usr/share/gdm/guest-session/Xsession"
[   11.783418] type=1505 audit(1273504451.357:6):  operation="profile_replace" pid=999 name="/sbin/dhclient3"
[   11.783622] type=1505 audit(1273504451.357:7):  operation="profile_replace" pid=999 name="/usr/lib/NetworkManager/nm-dhcp-client.action"
[   11.783737] type=1505 audit(1273504451.357:8):  operation="profile_replace" pid=999 name="/usr/lib/connman/scripts/dhclient-script"
[   11.785915] type=1505 audit(1273504451.357:9):  operation="profile_load" pid=1000 name="/usr/bin/evince"
[   11.789365] type=1505 audit(1273504451.357:10):  operation="profile_load" pid=1000 name="/usr/bin/evince-previewer"
[   11.790967] RX DESC ffff8800cf826000  size = 2048
[   11.791152] type=1505 audit(1273504451.357:11):  operation="profile_load" pid=1000 name="/usr/bin/evince-thumbnailer"
[   11.791185] <-- RTMPAllocTxRxRingMemory, Status=0
[   11.793430] RtmpOSFileOpen(): Error 2 opening /etc/Wireless/RT2860STA/RT2860STA.dat
[   11.793432] Open file "/etc/Wireless/RT2860STA/RT2860STA.dat" failed!
[   11.793434] 1. Phy Mode = 0
[   11.793435] ERROR!!! NICReadRegParameters failed, Status[=0x00000001]
[   11.798506] !!! rt28xx Initialized fail !!!
[   11.799834] r8169: eth0: link up
[   11.799839] r8169: eth0: link up
[   11.815198] RX DESC ffff8800cf81e000  size = 2048
[   11.815429] <-- RTMPAllocTxRxRingMemory, Status=0
[   11.817570] RtmpOSFileOpen(): Error 2 opening /etc/Wireless/RT2860STA/RT2860STA.dat
[   11.817572] Open file "/etc/Wireless/RT2860STA/RT2860STA.dat" failed!
[   11.817574] 1. Phy Mode = 0
[   11.817575] ERROR!!! NICReadRegParameters failed, Status[=0x00000001]
[   11.822681] !!! rt28xx Initialized fail !!!
[   11.965550] Bluetooth: L2CAP ver 2.14
[   11.965552] Bluetooth: L2CAP socket layer initialized
[   11.970485] Bluetooth: BNEP (Ethernet Emulation) ver 1.3
[   11.970488] Bluetooth: BNEP filters: protocol multicast
[   11.974863] Bridge firewalling registered
[   11.978602] Bluetooth: SCO (Voice Link) ver 0.6
[   11.978605] Bluetooth: SCO socket layer initialized
[   12.002981] ppdev: user-space parallel port driver
[   12.061341] Bluetooth: RFCOMM TTY layer initialized
[   12.061344] Bluetooth: RFCOMM socket layer initialized
[   12.061346] Bluetooth: RFCOMM ver 1.11
[   12.346067] [fglrx] ATIF platform detected with notification ID: 0x81
[   12.349343] CPU0 attaching NULL sched-domain.
[   12.349348] CPU1 attaching NULL sched-domain.
[   12.384603] [fglrx] GART Table is not in FRAME_BUFFER range 
[   12.384730]   alloc irq_desc for 29 on node 0
[   12.384732]   alloc kstat_irqs on node 0
[   12.384739] fglrx_pci 0000:01:05.0: irq 29 for MSI/MSI-X
[   12.385164] [fglrx] Firegl kernel thread PID: 1286
[   12.385428] [fglrx] IRQ 29 Enabled
[   12.430091] CPU0 attaching sched-domain:
[   12.430094]  domain 0: span 0-1 level MC
[   12.430096]   groups: 0 1
[   12.430100] CPU1 attaching sched-domain:
[   12.430102]  domain 0: span 0-1 level MC
[   12.430103]   groups: 1 0
[   12.538969] [fglrx] Gart USWC size:1158 M.
[   12.538972] [fglrx] Gart cacheable size:459 M.
[   12.538976] [fglrx] Reserved FB block: Shared offset:0, size:1000000 
[   12.538978] [fglrx] Reserved FB block: Unshared offset:fffb000, size:5000 
[   15.055217] CPU0 attaching NULL sched-domain.
[   15.055222] CPU1 attaching NULL sched-domain.
[   15.110089] CPU0 attaching sched-domain:
[   15.110093]  domain 0: span 0-1 level MC
[   15.110095]   groups: 0 1
[   15.110099] CPU1 attaching sched-domain:
[   15.110100]  domain 0: span 0-1 level MC
[   15.110101]   groups: 1 0
[   22.570035] eth0: no IPv6 routers present
[  236.560695] __ratelimit: 9 callbacks suppressed
[  236.560698] type=1505 audit(1273504674.517:15):  operation="profile_replace" pid=3147 name="/usr/bin/evince"
[  236.561428] type=1505 audit(1273504674.517:16):  operation="profile_replace" pid=3147 name="/usr/bin/evince-previewer"
[  236.561937] type=1505 audit(1273504674.517:17):  operation="profile_replace" pid=3147 name="/usr/bin/evince-thumbnailer"
[ 3458.355836] CPU0 attaching NULL sched-domain.
[ 3458.355840] CPU1 attaching NULL sched-domain.
[ 3458.431496] CPU0 attaching sched-domain:
[ 3458.431506]  domain 0: span 0-1 level MC
[ 3458.431513]   groups: 0 1
[ 3458.431525] CPU1 attaching sched-domain:
[ 3458.431530]  domain 0: span 0-1 level MC
[ 3458.431535]   groups: 1 0
[ 3462.150320] PM: Marking nosave pages: 000000000009f000 - 0000000000100000
[ 3462.150324] PM: Marking nosave pages: 00000000cffa0000 - 0000000100000000
[ 3462.150819] PM: Marking nosave pages: 0000000020000000 - 0000000024000000
[ 3462.151043] PM: Basic memory bitmaps created
[ 3462.151044] PM: Syncing filesystems ... done.
[ 3462.351319] Freezing user space processes ... (elapsed 0.00 seconds) done.
[ 3462.352053] Freezing remaining freezable tasks ... (elapsed 0.00 seconds) done.
[ 3462.352132] PM: Preallocating image memory... done (allocated 831160 pages)
[ 3468.062735] PM: Allocated 3324640 kbytes in 5.71 seconds (582.24 MB/s)
[ 3468.062737] Suspending console(s) (use no_console_suspend to debug)
[ 3468.064905] lirc_mceusb[3]: suspend
[ 3468.067843] btusb_intr_complete: hci0 urb ffff8801193a9d80 failed to resubmit (1)
[ 3468.068845] btusb_bulk_complete: hci0 urb ffff8801198800c0 failed to resubmit (1)
[ 3468.069845] btusb_bulk_complete: hci0 urb ffff8801193a9840 failed to resubmit (1)
[ 3468.280061] sd 0:0:0:0: [sda] Synchronizing SCSI cache
[ 3468.320387] PM: freeze of drv:sd dev:0:0:0:0 complete after 250.508 msecs
[ 3468.320732] ACPI handle has no context!
[ 3468.320757] ACPI handle has no context!
[ 3468.320800] rt3090 0000:03:00.0: PCI INT A disabled
[ 3468.320804] ACPI handle has no context!
[ 3468.340208] [fglrx] IRQ 29 Disabled
[ 3468.340230] [fglrx] Preparing suspend fglrx in kernel.
[ 3468.366747] [fglrx] Suspending fglrx in kernel completed.
[ 3468.366751] [fglrx] Power down the ASIC .
[ 3468.480529] HDA Intel 0000:00:14.2: PCI INT A disabled
[ 3468.500061] PM: freeze of drv:HDA Intel dev:0000:00:14.2 complete after 133.260 msecs
[ 3468.620157] ahci 0000:00:11.0: PCI INT A disabled
[ 3468.620162] PM: freeze of drv:ahci dev:0000:00:11.0 complete after 120.091 msecs
[ 3468.620221] PM: freeze of devices complete after 557.240 msecs
[ 3468.620664] PM: late freeze of devices complete after 0.442 msecs
[ 3468.620734] ACPI: Preparing to enter system sleep state S4
[ 3468.621609] PM: Saving platform NVS memory
[ 3468.660056] Disabling non-boot CPUs ...
[ 3468.660075] CPU0 attaching NULL sched-domain.
[ 3468.660078] CPU1 attaching NULL sched-domain.
[ 3468.740071] CPU0 attaching NULL sched-domain.
[ 3468.741204] Broke affinity for irq 16
[ 3468.741218] Broke affinity for irq 18
[ 3468.741225] Broke affinity for irq 22
[ 3468.742249] CPU 1 is now offline
[ 3468.742250] SMP alternatives: switching to UP code
[ 3468.746593] PM: Creating hibernation image: 
[ 3468.750045] PM: Need to copy 85528 pages
[ 3468.750045] PM: Normal pages needed: 85528 + 1024, available pages: 880844
[ 3468.750045] PM: Restoring platform NVS memory
[ 3468.750045] PCI-DMA: Resuming GART IOMMU
[ 3468.750045] PCI-DMA: Restoring GART aperture settings
[ 3468.750045] Enabling non-boot CPUs ...
[ 3468.750045] SMP alternatives: switching to SMP code
[ 3468.750608] Booting processor 1 APIC 0x1 ip 0x6000
[ 3468.746264] Initializing CPU#1
[ 3468.746264] CPU: L1 I Cache: 64K (64 bytes/line), D cache 64K (64 bytes/line)
[ 3468.746264] CPU: L2 Cache: 1024K (64 bytes/line)
[ 3468.746264] CPU 1/0x1 -> Node 0
[ 3468.746264] CPU: Physical Processor ID: 0
[ 3468.746264] CPU: Processor Core ID: 1
[ 3468.910033] CPU1: AMD Athlon(tm) II X2 240e Processor stepping 02
[ 3468.910042] checking TSC synchronization [CPU#0 -> CPU#1]: passed.
[ 3468.930104] Switch to broadcast mode on CPU1
[ 3468.930139] CPU0 attaching NULL sched-domain.
[ 3468.990068] CPU0 attaching sched-domain:
[ 3468.990072]  domain 0: span 0-1 level MC
[ 3468.990073]   groups: 0 1
[ 3468.990077] CPU1 attaching sched-domain:
[ 3468.990078]  domain 0: span 0-1 level MC
[ 3468.990079]   groups: 1 0
[ 3468.990353] CPU1 is up
[ 3468.990516] ACPI: Waking up from system sleep state S4
[ 3468.991184] pci 0000:00:01.0: restoring config space at offset 0x7 (was 0x2220d1d1, writing 0x220d1d1)
[ 3468.991293] ahci 0000:00:11.0: restoring config space at offset 0x1 (was 0x2300103, writing 0x2300107)
[ 3468.991486] HDA Intel 0000:00:14.2: restoring config space at offset 0xf (was 0x10a, writing 0xa)
[ 3468.991504] HDA Intel 0000:00:14.2: restoring config space at offset 0x1 (was 0x4100006, writing 0x4100002)
[ 3468.991603] fglrx_pci 0000:01:05.0: restoring config space at offset 0x1 (was 0x40100107, writing 0x100503)
[ 3468.991811] PM: early restore of devices complete after 0.659 msecs
[ 3469.015208] ahci 0000:00:11.0: PCI INT A -> GSI 22 (level, low) -> IRQ 22
[ 3469.075330] usb usb3: root hub lost power or was reset
[ 3469.134080] usb usb4: root hub lost power or was reset
[ 3469.134095] usb usb1: root hub lost power or was reset
[ 3469.194068] usb usb5: root hub lost power or was reset
[ 3469.254081] usb usb6: root hub lost power or was reset
[ 3469.254097] usb usb2: root hub lost power or was reset
[ 3469.254145] HDA Intel 0000:00:14.2: PCI INT A -> GSI 16 (level, low) -> IRQ 16
[ 3469.360075] ata3: SATA link down (SStatus 0 SControl 300)
[ 3469.360105] ata4: SATA link down (SStatus 0 SControl 300)
[ 3469.540094] ata2: softreset failed (device not ready)
[ 3469.540097] ata2: applying SB600 PMP SRST workaround and retrying
[ 3469.540115] ata1: softreset failed (device not ready)
[ 3469.540117] ata1: applying SB600 PMP SRST workaround and retrying
[ 3469.720071] ata2: SATA link up 1.5 Gbps (SStatus 113 SControl 300)
[ 3469.720097] ata1: SATA link up 3.0 Gbps (SStatus 123 SControl 300)
[ 3469.730335] PM: restore of drv:HDA Intel dev:0000:00:14.2 complete after 476.185 msecs
[ 3469.732989] ata1.00: configured for UDMA/133
[ 3469.754192] ata2.00: configured for UDMA/100
[ 3469.794115] usb usb7: root hub lost power or was reset
[ 3469.794144] fglrx_pci 0000:01:05.0: setting latency timer to 64
[ 3469.796430] [fglrx] Power up the ASIC
[ 3469.796448] [fglrx] Preparing resume fglrx in kernel.
[ 3469.825414] [fglrx] Resuming fglrx in kernel completed.
[ 3469.825574] [fglrx] IRQ 29 Enabled
[ 3469.825588] rt3090 0000:03:00.0: PCI INT A -> GSI 17 (level, low) -> IRQ 17
[ 3470.100082] PM: restore of drv:usb dev:usb1 complete after 274.411 msecs
[ 3470.490067] PM: restore of drv:usb dev:usb2 complete after 389.976 msecs
[ 3470.820067] PM: restore of drv:usb dev:usb3 complete after 329.992 msecs
[ 3471.150067] PM: restore of drv:usb dev:usb4 complete after 329.991 msecs
[ 3471.480066] PM: restore of drv:usb dev:usb6 complete after 329.989 msecs
[ 3471.600072] usb 2-1: reset high speed USB device using ehci_hcd and address 2
[ 3471.840757] PM: restore of drv:usb dev:2-1 complete after 360.613 msecs
[ 3471.960072] usb 2-5: reset high speed USB device using ehci_hcd and address 4
[ 3472.133211] PM: restore of drv:usb dev:2-5 complete after 292.444 msecs
[ 3472.133219] sd 0:0:0:0: [sda] Starting disk
[ 3472.300059] usb 4-1: reset full speed USB device using ohci_hcd and address 2
[ 3472.489072] btusb 4-1:1.0: no reset_resume for driver btusb?
[ 3472.489075] btusb 4-1:1.1: no reset_resume for driver btusb?
[ 3472.730117] PM: restore of drv:usb dev:4-1 complete after 576.147 msecs
[ 3472.880058] usb 4-2: reset full speed USB device using ohci_hcd and address 3
[ 3473.071051] lirc_mceusb[3]: resume
[ 3473.071061] PM: restore of drv:usb dev:4-2 complete after 340.935 msecs
[ 3473.220054] usb 3-2: reset full speed USB device using ohci_hcd and address 2
[ 3473.411066] PM: restore of drv:usb dev:3-2 complete after 339.997 msecs
[ 3473.710055] usb 6-1: reset low speed USB device using ohci_hcd and address 2
[ 3474.052034] PM: restore of drv:usb dev:6-1 complete after 640.958 msecs
[ 3474.052084] PM: restore of devices complete after 5037.773 msecs
[ 3474.052966] PM: Image restored successfully.
[ 3474.052967] Restarting tasks ... done.
[ 3474.053639] PM: Basic memory bitmaps freed
[ 3496.574200] RX DESC ffff8800c091e000  size = 2048
[ 3496.574685] <-- RTMPAllocTxRxRingMemory, Status=0
[ 3496.576967] RtmpOSFileOpen(): Error 2 opening /etc/Wireless/RT2860STA/RT2860STA.dat
[ 3496.576972] Open file "/etc/Wireless/RT2860STA/RT2860STA.dat" failed!
[ 3496.576977] 1. Phy Mode = 0
[ 3496.576980] ERROR!!! NICReadRegParameters failed, Status[=0x00000001]
[ 3496.582234] !!! rt28xx Initialized fail !!!
[ 3496.583536] r8169: eth0: link up
[ 3496.583540] r8169: eth0: link up
[ 3498.108810] RX DESC ffff88007b23e000  size = 2048
[ 3498.109300] <-- RTMPAllocTxRxRingMemory, Status=0
[ 3498.111575] RtmpOSFileOpen(): Error 2 opening /etc/Wireless/RT2860STA/RT2860STA.dat
[ 3498.111581] Open file "/etc/Wireless/RT2860STA/RT2860STA.dat" failed!
[ 3498.111586] 1. Phy Mode = 0
[ 3498.111589] ERROR!!! NICReadRegParameters failed, Status[=0x00000001]
[ 3498.116761] !!! rt28xx Initialized fail !!!
[ 3506.810058] eth0: no IPv6 routers present
[ 3513.163125] CPU0 attaching NULL sched-domain.
[ 3513.163137] CPU1 attaching NULL sched-domain.
[ 3513.230219] CPU0 attaching sched-domain:
[ 3513.230227]  domain 0: span 0-1 level MC
[ 3513.230234]   groups: 0 1
[ 3513.230246] CPU1 attaching sched-domain:
[ 3513.230251]  domain 0: span 0-1 level MC
[ 3513.230256]   groups: 1 0
[ 7560.577222] CPU0 attaching NULL sched-domain.
[ 7560.577234] CPU1 attaching NULL sched-domain.
[ 7560.642332] CPU0 attaching sched-domain:
[ 7560.642338]  domain 0: span 0-1 level MC
[ 7560.642340]   groups: 0 1
[ 7560.642347] CPU1 attaching sched-domain:
[ 7560.642348]  domain 0: span 0-1 level MC
[ 7560.642349]   groups: 1 0
[ 7563.941498] PM: Syncing filesystems ... done.
[ 7564.031314] PM: Preparing system for mem sleep
[ 7564.031318] Freezing user space processes ... (elapsed 0.00 seconds) done.
[ 7564.032135] Freezing remaining freezable tasks ... (elapsed 0.00 seconds) done.
[ 7564.032197] PM: Entering mem sleep
[ 7564.032207] Suspending console(s) (use no_console_suspend to debug)
[ 7564.070057] lirc_mceusb[3]: suspend
[ 7564.090810] btusb_intr_complete: hci0 urb ffff8800c8dee540 failed to resubmit (1)
[ 7564.091806] btusb_bulk_complete: hci0 urb ffff8800c8dee240 failed to resubmit (1)
[ 7564.092806] btusb_bulk_complete: hci0 urb ffff8800c8deed80 failed to resubmit (1)
[ 7564.110070] sd 0:0:0:0: [sda] Synchronizing SCSI cache
[ 7564.110252] sd 0:0:0:0: [sda] Stopping disk
[ 7564.277440] PM: suspend of drv:sd dev:0:0:0:0 complete after 167.370 msecs
[ 7564.310718] ACPI handle has no context!
[ 7564.310745] ACPI handle has no context!
[ 7564.310789] rt3090 0000:03:00.0: PCI INT A disabled
[ 7564.310793] ACPI handle has no context!
[ 7564.330208] [fglrx] IRQ 29 Disabled
[ 7564.330233] [fglrx] Preparing suspend fglrx in kernel.
[ 7564.356366] [fglrx] Suspending fglrx in kernel completed.
[ 7564.356370] [fglrx] Power down the ASIC .
[ 7564.460373] HDA Intel 0000:00:14.2: PCI INT A disabled
[ 7564.480057] PM: suspend of drv:HDA Intel dev:0000:00:14.2 complete after 123.635 msecs
[ 7564.560171] ahci 0000:00:11.0: PCI INT A disabled
[ 7564.580114] PM: suspend of devices complete after 547.714 msecs
[ 7564.580117] PM: suspend devices took 0.550 seconds
[ 7564.580211] r8169 0000:04:00.0: PME# enabled
[ 7564.640178] PM: late suspend of devices complete after 60.056 msecs
[ 7564.640244] ACPI: Preparing to enter system sleep state S3
[ 7564.720051] Disabling non-boot CPUs ...
[ 7564.720077] CPU0 attaching NULL sched-domain.
[ 7564.720080] CPU1 attaching NULL sched-domain.
[ 7564.880067] CPU0 attaching NULL sched-domain.
[ 7564.881220] Broke affinity for irq 19
[ 7564.990045] CPU 1 is now offline
[ 7564.990048] SMP alternatives: switching to UP code
[ 7564.994384] Back to C!
[ 7564.994384] PCI-DMA: Resuming GART IOMMU
[ 7564.994384] PCI-DMA: Restoring GART aperture settings
[ 7564.994384] Enabling non-boot CPUs ...
[ 7564.994384] SMP alternatives: switching to SMP code
[ 7564.994384] Booting processor 1 APIC 0x1 ip 0x6000
[ 7564.994084] Initializing CPU#1
[ 7564.994084] CPU: L1 I Cache: 64K (64 bytes/line), D cache 64K (64 bytes/line)
[ 7564.994084] CPU: L2 Cache: 1024K (64 bytes/line)
[ 7564.994084] CPU 1/0x1 -> Node 0
[ 7564.994084] CPU: Physical Processor ID: 0
[ 7564.994084] CPU: Processor Core ID: 1
[ 7565.150104] CPU1: AMD Athlon(tm) II X2 240e Processor stepping 02
[ 7565.150114] checking TSC synchronization [CPU#0 -> CPU#1]: passed.
[ 7565.170151] CPU0 attaching NULL sched-domain.
[ 7565.170177] Switch to broadcast mode on CPU1
[ 7565.240072] CPU0 attaching sched-domain:
[ 7565.240075]  domain 0: span 0-1 level MC
[ 7565.240077]   groups: 0 1
[ 7565.240081] CPU1 attaching sched-domain:
[ 7565.240082]  domain 0: span 0-1 level MC
[ 7565.240083]   groups: 1 0
[ 7565.240374] CPU1 is up
[ 7565.240484] ACPI: Waking up from system sleep state S3
[ 7565.241227] pcieport 0000:00:04.0: restoring config space at offset 0x7 (was 0x1f1, writing 0x200001f1)
[ 7565.241231] pcieport 0000:00:04.0: restoring config space at offset 0x1 (was 0x100106, writing 0x100506)
[ 7565.241265] pcieport 0000:00:05.0: restoring config space at offset 0x7 (was 0x1f1, writing 0x200001f1)
[ 7565.241271] pcieport 0000:00:05.0: restoring config space at offset 0x1 (was 0x100106, writing 0x100506)
[ 7565.241292] pcieport 0000:00:07.0: restoring config space at offset 0x1 (was 0x100107, writing 0x100507)
[ 7565.241311] ahci 0000:00:11.0: restoring config space at offset 0xf (was 0x100, writing 0x107)
[ 7565.241356] ohci_hcd 0000:00:12.0: restoring config space at offset 0x1 (was 0x2a00102, writing 0x2a00106)
[ 7565.261349] ehci_hcd 0000:00:12.2: restoring config space at offset 0x1 (was 0x2b00000, writing 0x2b00116)
[ 7565.261383] ohci_hcd 0000:00:13.0: restoring config space at offset 0x1 (was 0x2a00102, writing 0x2a00106)
[ 7565.280094] ehci_hcd 0000:00:13.2: restoring config space at offset 0x1 (was 0x2b00000, writing 0x2b00116)
[ 7565.280143] HDA Intel 0000:00:14.2: restoring config space at offset 0xf (was 0x10a, writing 0xa)
[ 7565.280161] HDA Intel 0000:00:14.2: restoring config space at offset 0x1 (was 0x4100006, writing 0x4100002)
[ 7565.280229] ohci_hcd 0000:00:14.5: restoring config space at offset 0x1 (was 0x2a00102, writing 0x2a00106)
[ 7565.280258] fglrx_pci 0000:01:05.0: restoring config space at offset 0xf (was 0x1ff, writing 0x10e)
[ 7565.280266] fglrx_pci 0000:01:05.0: restoring config space at offset 0x3 (was 0x800000, writing 0x800010)
[ 7565.280270] fglrx_pci 0000:01:05.0: restoring config space at offset 0x1 (was 0x40100107, writing 0x40100503)
[ 7565.280305] pci 0000:02:00.0: restoring config space at offset 0xf (was 0x100, writing 0x10a)
[ 7565.280326] pci 0000:02:00.0: restoring config space at offset 0x6 (was 0x4, writing 0xfe9fd804)
[ 7565.280333] pci 0000:02:00.0: restoring config space at offset 0x4 (was 0x4, writing 0xfe9fe004)
[ 7565.280338] pci 0000:02:00.0: restoring config space at offset 0x3 (was 0x0, writing 0x10)
[ 7565.280345] pci 0000:02:00.0: restoring config space at offset 0x1 (was 0x100000, writing 0x100106)
[ 7565.280384] rt3090 0000:03:00.0: restoring config space at offset 0xf (was 0x1ff, writing 0x10b)
[ 7565.280397] rt3090 0000:03:00.0: restoring config space at offset 0x4 (was 0x0, writing 0xfeaf0000)
[ 7565.280400] rt3090 0000:03:00.0: restoring config space at offset 0x3 (was 0x0, writing 0x10)
[ 7565.280404] rt3090 0000:03:00.0: restoring config space at offset 0x1 (was 0x100000, writing 0x100107)
[ 7565.280434] r8169 0000:04:00.0: restoring config space at offset 0xf (was 0x1ff, writing 0x10f)
[ 7565.280439] r8169 0000:04:00.0: restoring config space at offset 0xc (was 0x0, writing 0xfebc0000)
[ 7565.280446] r8169 0000:04:00.0: restoring config space at offset 0x8 (was 0xc, writing 0xfdffc00c)
[ 7565.280450] r8169 0000:04:00.0: restoring config space at offset 0x6 (was 0x4, writing 0xfebff004)
[ 7565.280455] r8169 0000:04:00.0: restoring config space at offset 0x4 (was 0x1, writing 0xe801)
[ 7565.280458] r8169 0000:04:00.0: restoring config space at offset 0x3 (was 0x0, writing 0x10)
[ 7565.280463] r8169 0000:04:00.0: restoring config space at offset 0x1 (was 0x100000, writing 0x100507)
[ 7565.280528] PM: early resume of devices complete after 39.347 msecs
[ 7565.281451] ahci 0000:00:11.0: PCI INT A -> GSI 22 (level, low) -> IRQ 22
[ 7565.400275] HDA Intel 0000:00:14.2: PCI INT A -> GSI 16 (level, low) -> IRQ 16
[ 7565.630084] ata3: SATA link down (SStatus 0 SControl 300)
[ 7565.630114] ata4: SATA link down (SStatus 0 SControl 300)
[ 7565.810068] ata2: softreset failed (device not ready)
[ 7565.810072] ata2: applying SB600 PMP SRST workaround and retrying
[ 7565.880344] PM: resume of drv:HDA Intel dev:0000:00:14.2 complete after 480.075 msecs
[ 7565.910281] fglrx_pci 0000:01:05.0: setting latency timer to 64
[ 7565.913380] [fglrx] Power up the ASIC
[ 7565.913399] [fglrx] Preparing resume fglrx in kernel.
[ 7565.942175] [fglrx] Resuming fglrx in kernel completed.
[ 7565.942342] [fglrx] IRQ 29 Enabled
[ 7565.942357] rt3090 0000:03:00.0: PCI INT A -> GSI 17 (level, low) -> IRQ 17
[ 7565.942363] r8169 0000:04:00.0: PME# disabled
[ 7565.990079] ata2: SATA link up 1.5 Gbps (SStatus 113 SControl 300)
[ 7566.024214] ata2.00: configured for UDMA/100
[ 7566.047467] ata2: exception Emask 0x1 SAct 0x0 SErr 0x0 action 0x0
[ 7566.047469] ata2: irq_stat 0x40000008
[ 7566.190080] PM: resume of drv:usb dev:usb3 complete after 109.800 msecs
[ 7566.300087] PM: resume of drv:usb dev:usb4 complete after 109.997 msecs
[ 7566.410079] PM: resume of drv:usb dev:usb6 complete after 109.981 msecs
[ 7566.539053] sd 0:0:0:0: [sda] Starting disk
[ 7572.600071] ata1: softreset failed (device not ready)
[ 7572.600074] ata1: applying SB600 PMP SRST workaround and retrying
[ 7572.780081] ata1: SATA link up 3.0 Gbps (SStatus 123 SControl 300)
[ 7572.792987] ata1.00: configured for UDMA/133
[ 7572.799679] PM: resume of drv:sd dev:0:0:0:0 complete after 6260.626 msecs
[ 7572.912898] lirc_mceusb[3]: resume
[ 7573.032949] PM: resume of devices complete after 7752.394 msecs
[ 7573.033136] PM: resume devices took 7.750 seconds
[ 7573.033168] PM: Finishing wakeup.
[ 7573.033169] Restarting tasks ... done.
[ 7573.279566] RX DESC ffff880024389000  size = 2048
[ 7573.279795] <-- RTMPAllocTxRxRingMemory, Status=0
[ 7573.281974] RtmpOSFileOpen(): Error 2 opening /etc/Wireless/RT2860STA/RT2860STA.dat
[ 7573.281976] Open file "/etc/Wireless/RT2860STA/RT2860STA.dat" failed!
[ 7573.281978] 1. Phy Mode = 0
[ 7573.281979] ERROR!!! NICReadRegParameters failed, Status[=0x00000001]
[ 7573.287045] !!! rt28xx Initialized fail !!!
[ 7573.291222] RX DESC ffff880024389000  size = 2048
[ 7573.291439] <-- RTMPAllocTxRxRingMemory, Status=0
[ 7573.295024] RtmpOSFileOpen(): Error 2 opening /etc/Wireless/RT2860STA/RT2860STA.dat
[ 7573.295027] Open file "/etc/Wireless/RT2860STA/RT2860STA.dat" failed!
[ 7573.295030] 1. Phy Mode = 0
[ 7573.295031] ERROR!!! NICReadRegParameters failed, Status[=0x00000001]
[ 7573.300146] !!! rt28xx Initialized fail !!!
[ 7573.300453] r8169: eth0: link up
[ 7573.701249] CPU0 attaching NULL sched-domain.
[ 7573.701254] CPU1 attaching NULL sched-domain.
[ 7573.770085] CPU0 attaching sched-domain:
[ 7573.770089]  domain 0: span 0-1 level MC
[ 7573.770091]   groups: 0 1
[ 7573.770095] CPU1 attaching sched-domain:
[ 7573.770097]  domain 0: span 0-1 level MC
[ 7573.770098]   groups: 1 0
[ 7584.200033] eth0: no IPv6 routers present
[18706.380130] usb 2-6: new high speed USB device using ehci_hcd and address 5
[18706.531946] usb 2-6: configuration #1 chosen from 1 choice
[18706.532978] scsi5 : SCSI emulation for USB Mass Storage devices
[18706.533210] usb-storage: device found at 5
[18706.533217] usb-storage: waiting for device to settle before scanning
[18711.530844] usb-storage: device scan complete
[18711.531388] scsi 5:0:0:0: Direct-Access     CBM      Flash Disk       5.00 PQ: 0 ANSI: 2
[18711.533677] sd 5:0:0:0: Attached scsi generic sg3 type 0
[18711.538012] sd 5:0:0:0: [sdc] 2062336 512-byte logical blocks: (1.05 GB/1007 MiB)
[18711.539499] sd 5:0:0:0: [sdc] Write Protect is off
[18711.539508] sd 5:0:0:0: [sdc] Mode Sense: 0b 00 00 08
[18711.539514] sd 5:0:0:0: [sdc] Assuming drive cache: write through
[18711.545453] sd 5:0:0:0: [sdc] Assuming drive cache: write through
[18711.545466]  sdc: sdc1
[18711.551322] sd 5:0:0:0: [sdc] Assuming drive cache: write through
[18711.551335] sd 5:0:0:0: [sdc] Attached SCSI removable disk
enrique at enrique-desktop:~$ 

-------------- next part --------------
enrique at enrique-desktop:~$ lsusb
Bus 007 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 006 Device 002: ID 05af:0809 Jing-Mold Enterprise Co., Ltd 
Bus 006 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 005 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 004 Device 003: ID 1934:0702  
Bus 004 Device 002: ID 0a5c:21b1 Broadcom Corp. 
Bus 004 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 003 Device 002: ID 1926:0006  
Bus 003 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 002 Device 005: ID 0204:6025 Chipsbank Microelectronics Co., Ltd CBM2080 Flash drive controller
Bus 002 Device 004: ID 04f2:b14c Chicony Electronics Co., Ltd 
Bus 002 Device 002: ID 0bda:0118 Realtek Semiconductor Corp. Mass Storage Device
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
enrique at enrique-desktop:~$ 

-------------- next part --------------
      iInterface              5 
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength          104
        dwClockFrequency       15.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               5
        iTerminal               0 
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {7033f028-1163-2e4a-ba2c-6890eb334016}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          3
        bControlSize            1
        bmControls( 0)       0x0f
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 5
        guidExtensionCode         {3fae1228-d7bc-114e-a357-6f1edef7d61d}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          4
        bControlSize            1
        bmControls( 0)       0xff
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0 
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000000
      VideoControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            3
        bmControls     0x000025bf
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          White Balance Component
          Backlight Compensation
          Power Line Frequency
          White Balance Component, Auto
        iProcessing             0 
        bmVideoStandards     0x31
          None
          NTSC - 625/50
          PAL - 525/60
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                         1
        wTotalLength                      237
        bEndPointAddress                  129
        bmInfo                              0
        bTerminalLink                       2
        bStillCaptureMethod                 0
        bTriggerSupport                     0
        bTriggerUsage                       0
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                5
        guidFormat                            {59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                  6144000
        dwMaxBitRate                 18432000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                  2027520
        dwMaxBitRate                  6082560
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                  1536000
        dwMaxBitRate                  4608000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                   506880
        dwMaxBitRate                  1520640
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   384000
        dwMaxBitRate                  1152000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b20  2x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1320  3x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 1024 bytes
        bInterval               1
can't get device qualifier: Operation not permitted
can't get debug descriptor: Operation not permitted
cannot read device status, Operation not permitted (1)

Bus 002 Device 002: ID 0bda:0118 Realtek Semiconductor Corp. Mass Storage Device
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  idVendor           0x0bda Realtek Semiconductor Corp.
  idProduct          0x0118 Mass Storage Device
  bcdDevice           58.88
  iManufacturer           1 
  iProduct                2 
  iSerial                 3 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           32
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          4 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           2
      bInterfaceClass         8 Mass Storage
      bInterfaceSubClass      6 SCSI
      bInterfaceProtocol     80 Bulk (Zip)
      iInterface              5 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x01  EP 1 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
can't get device qualifier: Operation not permitted
can't get debug descriptor: Operation not permitted
cannot read device status, Operation not permitted (1)

Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            9 Hub
  bDeviceSubClass         0 Unused
  bDeviceProtocol         0 Full speed (or root) hub
  bMaxPacketSize0        64
  idVendor           0x1d6b Linux Foundation
  idProduct          0x0002 2.0 root hub
  bcdDevice            2.06
  iManufacturer           3 
  iProduct                2 
  iSerial                 1 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           25
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xe0
      Self Powered
      Remote Wakeup
    MaxPower                0mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         9 Hub
      bInterfaceSubClass      0 Unused
      bInterfaceProtocol      0 Full speed (or root) hub
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0004  1x 4 bytes
        bInterval              12
can't get hub descriptor: Operation not permitted
can't get device qualifier: Operation not permitted
can't get debug descriptor: Operation not permitted
cannot read device status, Operation not permitted (1)

Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            9 Hub
  bDeviceSubClass         0 Unused
  bDeviceProtocol         0 Full speed (or root) hub
  bMaxPacketSize0        64
  idVendor           0x1d6b Linux Foundation
  idProduct          0x0002 2.0 root hub
  bcdDevice            2.06
  iManufacturer           3 
  iProduct                2 
  iSerial                 1 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           25
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xe0
      Self Powered
      Remote Wakeup
    MaxPower                0mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         9 Hub
      bInterfaceSubClass      0 Unused
      bInterfaceProtocol      0 Full speed (or root) hub
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0004  1x 4 bytes
        bInterval              12
can't get hub descriptor: Operation not permitted
can't get device qualifier: Operation not permitted
can't get debug descriptor: Operation not permitted
cannot read device status, Operation not permitted (1)
enrique at enrique-desktop:~$ 


From vegardhaugland at gmail.com  Thu May 13 00:16:48 2010
From: vegardhaugland at gmail.com (Vegard Haugland)
Date: Thu, 13 May 2010 00:16:48 +0200
Subject: [Linux-uvc-devel] Looking for upside down uvc cams
In-Reply-To: <AANLkTikiPp3wzWp_87BwNu4_wYNvab2LVCJ_3EbHfu8I@mail.gmail.com>
References: <AANLkTikiPp3wzWp_87BwNu4_wYNvab2LVCJ_3EbHfu8I@mail.gmail.com>
Message-ID: <AANLkTikHzqTsgezqsAL5bwFeNF49GjifPs_nS9EF1QpH@mail.gmail.com>

Hrmm.. looks like the files weren't included for some strange reason. I'll
just paste the output here instead:

# dmidecode 2.10
SMBIOS 2.5 present.
41 structures occupying 1867 bytes.
Table at 0x000FCCE0.

Handle 0x0000, DMI type 0, 24 bytes
BIOS Information
Vendor: American Megatrends Inc.
 Version: 212
Release Date: 12/28/2009
Address: 0xF0000
 Runtime Size: 64 kB
ROM Size: 1024 kB
Characteristics:
 ISA is supported
PCI is supported
PNP is supported
 BIOS is upgradeable
BIOS shadowing is allowed
ESCD support is available
 Boot from CD is supported
Selectable boot is supported
EDD is supported
 5.25"/1.2 MB floppy services are supported (int 13h)
3.5"/720 kB floppy services are supported (int 13h)
 3.5"/2.88 MB floppy services are supported (int 13h)
Print screen service is supported (int 5h)
 8042 keyboard services are supported (int 9h)
Printer services are supported (int 17h)
 CGA/mono video services are supported (int 10h)
ACPI is supported
USB legacy is supported
 Smart battery is supported
BIOS boot specification is supported
Function key-initiated network boot is supported
 Targeted content distribution is supported
BIOS Revision: 2.12
Firmware Revision: 32.1

Handle 0x0001, DMI type 1, 27 bytes
System Information
Manufacturer: ASUSTeK Computer Inc.
Product Name: UL30A
 Version: 1.0
Serial Number: A1N0AS15861802A
UUID: 005A479C-C5FD-DE81-30B0-E0CB4E636171
 Wake-up Type: Power Switch
SKU Number:
Family:

Handle 0x0002, DMI type 2, 15 bytes
Base Board Information
Manufacturer: ASUSTeK Computer Inc.
Product Name: UL30A
 Version: 1.0
Serial Number: BSN12345678901234567
Asset Tag: ATN12345678901234567
 Features:
Board is a hosting board
Board requires at least one daughter board
 Board is replaceable
Location In Chassis: MIDDLE
Chassis Handle: 0x0003
 Type: Motherboard
Contained Object Handles: 0

Handle 0x0003, DMI type 3, 21 bytes
Chassis Information
Manufacturer: ASUSTeK Computer Inc.
Type: Notebook
 Lock: Not Present
Version: 1.0
Serial Number: CSN12345678901234567
 Asset Tag: ATN12345678901234567
Boot-up State: Safe
Power Supply State: Safe
 Thermal State: Other
Security Status: Other
OEM Information: 0x00000000
 Height: Unspecified
Number Of Power Cords: 1
Contained Elements: 0

Handle 0x0004, DMI type 4, 40 bytes
Processor Information
Socket Designation: Socket 478
Type: Central Processor
 Family: Other
Manufacturer: Intel
ID: 7A 06 01 00 FF FB EB BF
 Version: Genuine Intel(R) CPU U7300 @ 1.30GHz
Voltage: 1.0 V
 External Clock: 200 MHz
Max Speed: 1300 MHz
Current Speed: 1300 MHz
 Status: Populated, Enabled
Upgrade: Socket 478
L1 Cache Handle: 0x0005
 L2 Cache Handle: 0x0007
L3 Cache Handle: Not Provided
Serial Number: PSN12345678901234567
 Asset Tag: PATN1234567890123456
Part Number: PPN12345678901234567
Core Count: 2
 Core Enabled: 2
Thread Count: 2
Characteristics:
 64-bit capable

Handle 0x0005, DMI type 7, 19 bytes
Cache Information
Socket Designation: L1-Cache
 Configuration: Enabled, Not Socketed, Level 1
Operational Mode: Write Back
 Location: Internal
Installed Size: 64 kB
Maximum Size: 64 kB
 Supported SRAM Types:
Other
Installed SRAM Type: Other
 Speed: Unknown
Error Correction Type: Single-bit ECC
System Type: Data
 Associativity: 8-way Set-associative

Handle 0x0006, DMI type 7, 19 bytes
Cache Information
Socket Designation: L1-Cache
 Configuration: Enabled, Not Socketed, Level 1
Operational Mode: Write Back
 Location: Internal
Installed Size: 64 kB
Maximum Size: 64 kB
 Supported SRAM Types:
Other
Installed SRAM Type: Other
 Speed: Unknown
Error Correction Type: Single-bit ECC
System Type: Instruction
 Associativity: 8-way Set-associative

Handle 0x0007, DMI type 7, 19 bytes
Cache Information
Socket Designation: L2-Cache
 Configuration: Enabled, Not Socketed, Level 2
Operational Mode: Write Back
 Location: Internal
Installed Size: 3072 kB
Maximum Size: 3072 kB
 Supported SRAM Types:
Other
Installed SRAM Type: Other
 Speed: Unknown
Error Correction Type: Single-bit ECC
System Type: Unified
 Associativity: Other

Handle 0x0008, DMI type 8, 9 bytes
Port Connector Information
Internal Reference Designator: J3401
 Internal Connector Type: None
External Reference Designator: LAN
External Connector Type: RJ-45
 Port Type: Network Port

Handle 0x0009, DMI type 8, 9 bytes
Port Connector Information
Internal Reference Designator: J4501
 Internal Connector Type: None
External Reference Designator: VGA
External Connector Type: DB-15 female
 Port Type: Video Port

Handle 0x000A, DMI type 8, 9 bytes
Port Connector Information
Internal Reference Designator: J5201
 Internal Connector Type: None
External Reference Designator: USB1
External Connector Type: Access Bus (USB)
 Port Type: USB

Handle 0x000B, DMI type 8, 9 bytes
Port Connector Information
Internal Reference Designator: J5201
 Internal Connector Type: None
External Reference Designator: USB2
External Connector Type: Access Bus (USB)
 Port Type: USB

Handle 0x000C, DMI type 8, 9 bytes
Port Connector Information
Internal Reference Designator: J4800
 Internal Connector Type: None
External Reference Designator: HDMI
External Connector Type: Other
 Port Type: Other

Handle 0x000D, DMI type 8, 9 bytes
Port Connector Information
Internal Reference Designator: J5101
 Internal Connector Type: None
External Reference Designator: SATA 1
External Connector Type: SAS/SATA Plug Receptacle
 Port Type: SATA

Handle 0x000E, DMI type 8, 9 bytes
Port Connector Information
Internal Reference Designator: J4202
 Internal Connector Type: None
External Reference Designator: FlashCard
External Connector Type: Other
 Port Type: Other

Handle 0x000F, DMI type 8, 9 bytes
Port Connector Information
Internal Reference Designator: J4301
 Internal Connector Type: None
External Reference Designator: ExpressCard
External Connector Type: Other
 Port Type: Other

Handle 0x0010, DMI type 8, 9 bytes
Port Connector Information
Internal Reference Designator: J6601
 Internal Connector Type: None
External Reference Designator: eSATA
External Connector Type: SAS/SATA Plug Receptacle
 Port Type: SATA

Handle 0x0011, DMI type 8, 9 bytes
Port Connector Information
Internal Reference Designator: J3703
 Internal Connector Type: None
External Reference Designator: Audio Out
External Connector Type: Mini Jack (headphones)
 Port Type: Audio Port

Handle 0x0012, DMI type 8, 9 bytes
Port Connector Information
Internal Reference Designator: J3801
 Internal Connector Type: None
External Reference Designator: Mic In
External Connector Type: Mini Jack (headphones)
 Port Type: Audio Port

Handle 0x0013, DMI type 8, 9 bytes
Port Connector Information
Internal Reference Designator: J2502
 Internal Connector Type: None
External Reference Designator: USB3
External Connector Type: Access Bus (USB)
 Port Type: USB

Handle 0x0014, DMI type 8, 9 bytes
Port Connector Information
Internal Reference Designator: J4203
 Internal Connector Type: None
External Reference Designator: 1394
External Connector Type: IEEE 1394
 Port Type: Firewire (IEEE P1394)

Handle 0x0015, DMI type 8, 9 bytes
Port Connector Information
Internal Reference Designator: J5401
 Internal Connector Type: None
External Reference Designator: DockPort
External Connector Type: Other
 Port Type: Other

Handle 0x0016, DMI type 9, 13 bytes
System Slot Information
Designation: PCIE1
 Type: x1 PCI Express
Current Usage: In Use
Length: Short
 ID: 0
Characteristics:
3.3 V is provided
 PME signal is supported

Handle 0x0017, DMI type 9, 13 bytes
System Slot Information
Designation: PCIE2
 Type: x1 PCI Express
Current Usage: Available
Length: Short
 ID: 1
Characteristics:
3.3 V is provided
 PME signal is supported

Handle 0x0018, DMI type 9, 13 bytes
System Slot Information
Designation: PCIE3
 Type: x1 PCI Express
Current Usage: Available
Length: Short
 ID: 2
Characteristics:
3.3 V is provided
 PME signal is supported

Handle 0x0019, DMI type 9, 13 bytes
System Slot Information
Designation: PCIE4
 Type: x1 PCI Express
Current Usage: Available
Length: Short
 ID: 3
Characteristics:
3.3 V is provided
 PME signal is supported

Handle 0x001A, DMI type 10, 6 bytes
On Board Device Information
Type: Video
 Status: Enabled
Description:  UMA

Handle 0x001B, DMI type 10, 6 bytes
On Board Device Information
Type: Ethernet
Status: Enabled
Description:  NIC

Handle 0x001C, DMI type 10, 6 bytes
On Board Device Information
Type: Sound
Status: Enabled
 Description:  Audio Codec

Handle 0x001D, DMI type 10, 6 bytes
On Board Device Information
Type: SATA Controller
 Status: Enabled
Description:  SATA Controller

Handle 0x001E, DMI type 10, 6 bytes
On Board Device Information
Type: Other
Status: Enabled
Description:  1394/FlashCardReader

Handle 0x001F, DMI type 13, 22 bytes
BIOS Language Information
Installable Languages: 1
en|US|iso8859-1
 Currently Installed Language: en|US|iso8859-1

Handle 0x0020, DMI type 16, 15 bytes
Physical Memory Array
Location: System Board Or Motherboard
 Use: System Memory
Error Correction Type: None
Maximum Capacity: 8 GB
 Error Information Handle: Not Provided
Number Of Devices: 2

Handle 0x0021, DMI type 19, 15 bytes
Memory Array Mapped Address
Starting Address: 0x00000000000
Ending Address: 0x000FFFFFFFF
 Range Size: 4 GB
Physical Array Handle: 0x0020
Partition Width: 0

Handle 0x0022, DMI type 17, 27 bytes
Memory Device
Array Handle: 0x0020
Error Information Handle: Not Provided
 Total Width: 64 bits
Data Width: 64 bits
Size: 2048 MB
 Form Factor: SODIMM
Set: None
Locator: SODIMM0
 Bank Locator: BANK0
Type: Other
Type Detail: Synchronous
 Speed: 800 MHz
Manufacturer: N/A
Serial Number: N/A
 Asset Tag: N/A
Part Number: N/A

Handle 0x0023, DMI type 20, 19 bytes
Memory Device Mapped Address
Starting Address: 0x00000000000
Ending Address: 0x0007FFFFFFF
 Range Size: 2 GB
Physical Device Handle: 0x0022
Memory Array Mapped Address Handle: 0x0021
 Partition Row Position: Unknown
Interleave Position: Unknown
Interleaved Data Depth: Unknown

Handle 0x0024, DMI type 17, 27 bytes
Memory Device
Array Handle: 0x0020
Error Information Handle: Not Provided
 Total Width: 64 bits
Data Width: 64 bits
Size: 2048 MB
 Form Factor: SODIMM
Set: None
Locator: SODIMM1
 Bank Locator: BANK1
Type: Other
Type Detail: Synchronous
 Speed: 800 MHz
Manufacturer: N/A
Serial Number: N/A
 Asset Tag: N/A
Part Number: N/A

Handle 0x0025, DMI type 20, 19 bytes
Memory Device Mapped Address
Starting Address: 0x00080000000
Ending Address: 0x000FFFFFFFF
 Range Size: 2 GB
Physical Device Handle: 0x0024
Memory Array Mapped Address Handle: 0x0021
 Partition Row Position: Unknown
Interleave Position: Unknown
Interleaved Data Depth: Unknown

Handle 0x0026, DMI type 22, 26 bytes
Portable Battery
Location: In the back
Manufacturer: AS176OC2KF
 Manufacture Date: 09/11/10
Serial Number: A200
Name: UL50-56
 Chemistry: Other
Design Capacity: 5600 mWh
Design Voltage: 15000 mV
 SBDS Version: SMART Ver 0123
Maximum Error: Unknown
OEM-specific Information: 0x00000000

Handle 0x0027, DMI type 200, 27 bytes
OEM-specific Type
Header and Data:
C8 1B 27 00 01 02 03 00 00 00 00 00 00 00 00 00
 00 00 00 00 00 00 00 00 00 00 00
Strings:
ASUSTeK Computer Inc.
 Notebook
1.0

Handle 0x0028, DMI type 127, 4 bytes
End Of Table

lsusb.log
Bus 004 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 005 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 008 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 007 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 006 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 003 Device 002: ID 058f:6366 Alcor Micro Corp. Multi Flash Reader
Bus 003 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 002 Device 002: ID 0b05:1751 ASUSTek Computer, Inc.
Bus 002 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 001 Device 003: ID 04f2:b036 Chicony Electronics Co., Ltd
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub


2010/5/13 Vegard Haugland <vegardhaugland at gmail.com>

> Hello,
>
> I encountered this issue on my laptop, an ASUS UL30A.
>
> Attached is the output from lsusb and dmidecode.
>
> Thanks!
>
> Vegard
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100513/c0619110/attachment.html>

From asergiu at yahoo.co.uk  Sun May 16 13:48:02 2010
From: asergiu at yahoo.co.uk (Adrian Sergiu Darabant)
Date: Sun, 16 May 2010 11:48:02 +0000 (GMT)
Subject: [Linux-uvc-devel] Stream from multimple cameras
Message-ID: <915879.55685.qm@web27706.mail.ukl.yahoo.com>

Hello all , Laurent,
I have problem that I think was encountered by many others. 
I have 2 2MPix uvc cameras - both working individually. Their individual resolutions range from 160x120 up to 1600x1200 frame sizes (discrete increments) and using only packed YUV formats (not MJPEG).


My need is to stream from both cameras in the same time. Maybe not at the full camera advertised speed (15, 30 fps etc) but still stream from multiple cameras. 

I tried to do that and I am succeeding up to query and map buffers but then when doing VIDIOC_STREAMON - the first camera starts and the second one always gets 

kernel: uvcvideo: Failed to submit URB 0 (-28).

which seems to be linked with the usb bandwidth.

Now as I tried that at 1600x1200 YUYV(packed) at around 4-5fps - that means approx 17.5 Mbytes/sec. That multiplied by 2 would of course go beyond the USB 2.0 bandwidth limit which should be practically around 32 Mbytes/sec.

The issue is the same for 640x480 YUYV 30 fps which yields approx the same bandwidth.  On the other hand this should work for 320x240 no matter the fps (don't think that camera cand do more than 30 fps - 30 fps is the only framerate given with ENUMFRAMESIZES for all resolutions ) as in this case even at 60 fps we get approx 9 Mbytes/sec /camera

In all cases I get the same behavior - failing to submit URB !

Is there any way of making this possible ? 
What about for the cases where the bandwidth is exceeded ? 

I don't know all the details about the USB transfer protocol but my understanding is that - the driver should request a static bandwidth allocation before starting streaming. Would it be possible to force the streaming at a lower rate - maybe loosing some frames from the camera but still allow multiple camera streaming ?

For ex I could supply capture buffers slower than the camera capture speed and skip frames this way. Still even using one 
memory mapped buffer I cannot start the capture process as STREAMON fails !


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100516/449b6bb3/attachment.html>

From bruno.viaris at free.fr  Sun May 16 22:25:20 2010
From: bruno.viaris at free.fr (bruno.viaris at free.fr)
Date: Sun, 16 May 2010 22:25:20 +0200 (CEST)
Subject: [Linux-uvc-devel] Stream from multimple cameras
In-Reply-To: <925291541.1071631274041488503.JavaMail.root@spooler9-g27.priv.proxad.net>
Message-ID: <1221910811.1071671274041520047.JavaMail.root@spooler9-g27.priv.proxad.net>


----- "Adrian Sergiu Darabant" <asergiu at yahoo.co.uk> wrote :

> My need is to stream from both cameras in the same time.  
(...) 
> I tried to do that and I am succeeding up to query and map buffers but
> then when doing VIDIOC_STREAMON - the first camera starts and the
> second one always gets
> 
> kernel: uvcvideo: Failed to submit URB 0 (-28).
> 
> which seems to be linked with the usb bandwidth.

Hello Adrian, 
This problem is mentioned in the "Motion" software FAQ: when streaming from multiple USB cams, each one must be plugged to its own USB controller, not on a hub, including motherboard hubs (typically the pair of connectors on top of each other).
(cf http://www.lavrsen.dk/foswiki/bin/view/Motion/FrequentlyAskedQuestions first item)

I experienced this problem on an eeepc 701 / linux: while streaming only VGA at 1FPS the two webcams (Vesta pro + SPC900) had to be plugged one on each side of the netbook. 
But I could plug an external harddrive (recording both streams!) in the same hub as one of the cams! Go figure that...
Same thing on a Dell desktop PC with Hercules cams under windows XP.

> 
> I don't know all the details about the USB transfer protocol but my
> understanding is that - the driver should request a static bandwidth
> allocation before starting streaming. Would it be possible to force
> the streaming at a lower rate - maybe loosing some frames from the
> camera but still allow multiple camera streaming ?

Using distinct controllers is obviously just a workaround, but I have no idea if this bandwidth allocation problem can be dealt with at the driver level, I will leave this to competent people...

Best regards

-- Bruno Viaris


From pj.assis at gmail.com  Sun May 16 23:33:50 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Sun, 16 May 2010 22:33:50 +0100
Subject: [Linux-uvc-devel] Stream from multimple cameras
In-Reply-To: <1221910811.1071671274041520047.JavaMail.root@spooler9-g27.priv.proxad.net>
References: <925291541.1071631274041488503.JavaMail.root@spooler9-g27.priv.proxad.net>
	<1221910811.1071671274041520047.JavaMail.root@spooler9-g27.priv.proxad.net>
Message-ID: <AANLkTilsudRdZqpkYgZCGTB5TXcPh58wpYlsBFIFvzaK@mail.gmail.com>

Hi,

2010/5/16  <bruno.viaris at free.fr>:
>
> ----- "Adrian Sergiu Darabant" <asergiu at yahoo.co.uk> wrote :
>
>> My need is to stream from both cameras in the same time.
> (...)
>> I tried to do that and I am succeeding up to query and map buffers but
>> then when doing VIDIOC_STREAMON - the first camera starts and the
>> second one always gets
>>
>> kernel: uvcvideo: Failed to submit URB 0 (-28).
>>
>> which seems to be linked with the usb bandwidth.
>
> Hello Adrian,
> This problem is mentioned in the "Motion" software FAQ: when streaming from multiple USB cams, each one must be plugged to its own USB controller, not on a hub, including motherboard hubs (typically the pair of connectors on top of each other).
> (cf http://www.lavrsen.dk/foswiki/bin/view/Motion/FrequentlyAskedQuestions first item)
>
> I experienced this problem on an eeepc 701 / linux: while streaming only VGA at 1FPS the two webcams (Vesta pro + SPC900) had to be plugged one on each side of the netbook.
> But I could plug an external harddrive (recording both streams!) in the same hub as one of the cams! Go figure that...
> Same thing on a Dell desktop PC with Hercules cams under windows XP.
>
>>
>> I don't know all the details about the USB transfer protocol but my
>> understanding is that - the driver should request a static bandwidth
>> allocation before starting streaming. Would it be possible to force
>> the streaming at a lower rate - maybe loosing some frames from the
>> camera but still allow multiple camera streaming ?
>
> Using distinct controllers is obviously just a workaround, but I have no idea if this bandwidth allocation problem can be dealt with at the driver level, I will leave this to competent people...
>

I think the problem with some cameras is that they request more
bandwidth than they actually need, so this causes this type of issue.
I've add no problem in streaming 2 QuickCam cameras from the same
controller in MJPG, but for other models/vendors it fails with the
exactly same settings.

Best Regards,
Paulo

> Best regards
>
> -- Bruno Viaris
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From gmccullagh at gmail.com  Mon May 17 01:24:07 2010
From: gmccullagh at gmail.com (Gavin McCullagh)
Date: Mon, 17 May 2010 00:24:07 +0100
Subject: [Linux-uvc-devel] Aldi USB Microscope
Message-ID: <AANLkTiklUIegBVo9XadpuTmV-N6aXYaK7RmT3sm97Yg-@mail.gmail.com>

Hi,

I picked up one of these cheap USB microscopes and was wondering if it
might be usable with linux.? As it's made by Aveo, I thought the UVC
driver might be convinced to work with it.

http://forums.whirlpool.net.au/forum-replies-archive.cfm/1258291.html
http://www.wildyorkshire.co.uk/naturediary/docs/2009/9/20.html
http://www.wildaboutbritain.co.uk/forums/general-equipment/17714-cheap-microscope.html
http://www.google.com/search?q=USB%20microscope%20aldi

I've put up some details on here:

http://blog.gavinmc.com/?p=97

I was thinking of adding its vendor IDs to
drivers/media/video/uvc/uvc_driver.c and recompiling the driver.   Can
anyone tell if that's likely to work from the above info?  Is there
some other info I could provide?

Thanks in advance,
Gavin


From asergiu at yahoo.co.uk  Mon May 17 09:24:04 2010
From: asergiu at yahoo.co.uk (Adrian Sergiu DARABANT)
Date: Mon, 17 May 2010 10:24:04 +0300
Subject: [Linux-uvc-devel] Stream from multimple cameras
In-Reply-To: <1221910811.1071671274041520047.JavaMail.root@spooler9-g27.priv.proxad.net>
References: <925291541.1071631274041488503.JavaMail.root@spooler9-g27.priv.proxad.net>
	<1221910811.1071671274041520047.JavaMail.root@spooler9-g27.priv.proxad.net>
Message-ID: <8DFAD57C3BF24C9099A26DCFE03BBCD5@core2>

Hello all,

In my case I tested with the cameras plugged into 2 differens hubs (I have 2
pairs on two sides of my netbook) and the result is the same. I have to open
the laptop however to see if the hubs are really different as the port pairs
are on adjacent sides of the notebook and not on opposite sides (far enough
to ensure the hubs are really different). On windows I see listed one
USB2(Enhanced) controller and 4 USB Universal controllers- so I guess is
just one USB2

Using 2 hubs is not a solution for me as it doesn't work right now although
I have 4 external USB ports on one of the machines and 6 on another (plus
some internal ports on both of them)

As I am a developer, so in practice I could modify things inside the driver
or somewhere in order to try to make things work.

My question is - who does/requests the USB bandwidth allocation ? The uvc
driver or the camera itself ?  Is this happening directly in hardware or is
mediated by the uvc/ehci driver?

In the second case can we force the driver on the allocation problem if it
is in the driver ? 
I don't know yet the answer to this - and having a few pointers/explanations
from the UVC implementors might help here !

I saw the other forums and their approach - and somebody proposed there 

Thx,
Adrian





-----Original Message-----
From: bruno.viaris at free.fr [mailto:bruno.viaris at free.fr] 
Sent: Sunday, May 16, 2010 11:25 PM
To: Adrian Sergiu Darabant
Cc: linux-uvc-devel at lists.berlios.de
Subject: Re: [Linux-uvc-devel] Stream from multimple cameras


----- "Adrian Sergiu Darabant" <asergiu at yahoo.co.uk> wrote :

> My need is to stream from both cameras in the same time.  
(...) 
> I tried to do that and I am succeeding up to query and map buffers but
> then when doing VIDIOC_STREAMON - the first camera starts and the
> second one always gets
> 
> kernel: uvcvideo: Failed to submit URB 0 (-28).
> 
> which seems to be linked with the usb bandwidth.

Hello Adrian, 
This problem is mentioned in the "Motion" software FAQ: when streaming from
multiple USB cams, each one must be plugged to its own USB controller, not
on a hub, including motherboard hubs (typically the pair of connectors on
top of each other).
(cf http://www.lavrsen.dk/foswiki/bin/view/Motion/FrequentlyAskedQuestions
first item)

I experienced this problem on an eeepc 701 / linux: while streaming only
VGA at 1FPS the two webcams (Vesta pro + SPC900) had to be plugged one on each
side of the netbook. 
But I could plug an external harddrive (recording both streams!) in the same
hub as one of the cams! Go figure that...
Same thing on a Dell desktop PC with Hercules cams under windows XP.

> 
> I don't know all the details about the USB transfer protocol but my
> understanding is that - the driver should request a static bandwidth
> allocation before starting streaming. Would it be possible to force
> the streaming at a lower rate - maybe loosing some frames from the
> camera but still allow multiple camera streaming ?

Using distinct controllers is obviously just a workaround, but I have no
idea if this bandwidth allocation problem can be dealt with at the driver
level, I will leave this to competent people...

Best regards

-- Bruno Viaris



From pj.assis at gmail.com  Mon May 17 11:36:26 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Mon, 17 May 2010 10:36:26 +0100
Subject: [Linux-uvc-devel] Aldi USB Microscope
In-Reply-To: <AANLkTiklUIegBVo9XadpuTmV-N6aXYaK7RmT3sm97Yg-@mail.gmail.com>
References: <AANLkTiklUIegBVo9XadpuTmV-N6aXYaK7RmT3sm97Yg-@mail.gmail.com>
Message-ID: <AANLkTilbTZ3zHy_eLAiec561D0VNeQ6TcKRBSeB3u5Pg@mail.gmail.com>

Gavin Hi,

2010/5/17 Gavin McCullagh <gmccullagh at gmail.com>:
> Hi,
>
> I picked up one of these cheap USB microscopes and was wondering if it
> might be usable with linux.? As it's made by Aveo, I thought the UVC
> driver might be convinced to work with it.
>

You should have bought the Bresser package at Lidl, that one has a uvc
camera that works very well.
 (actually the fps is clipped to 5 due to the high exposure time, but
the image is quite good)


> http://forums.whirlpool.net.au/forum-replies-archive.cfm/1258291.html
> http://www.wildyorkshire.co.uk/naturediary/docs/2009/9/20.html
> http://www.wildaboutbritain.co.uk/forums/general-equipment/17714-cheap-microscope.html
> http://www.google.com/search?q=USB%20microscope%20aldi
>
> I've put up some details on here:
>
> http://blog.gavinmc.com/?p=97
>
> I was thinking of adding its vendor IDs to
> drivers/media/video/uvc/uvc_driver.c and recompiling the driver. ? Can
> anyone tell if that's likely to work from the above info? ?Is there
> some other info I could provide?
>

see this line of lsusb:
bInterfaceClass       255 Vendor Specific Class

for uvc this must read "Video Class",
so I'm afraid the camera is not uvc compatible.

Regards,
Paulo

> Thanks in advance,
> Gavin
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From gmccullagh at gmail.com  Mon May 17 13:51:20 2010
From: gmccullagh at gmail.com (Gavin McCullagh)
Date: Mon, 17 May 2010 12:51:20 +0100
Subject: [Linux-uvc-devel] Aldi USB Microscope
In-Reply-To: <AANLkTilbTZ3zHy_eLAiec561D0VNeQ6TcKRBSeB3u5Pg@mail.gmail.com>
References: <AANLkTiklUIegBVo9XadpuTmV-N6aXYaK7RmT3sm97Yg-@mail.gmail.com>
	<AANLkTilbTZ3zHy_eLAiec561D0VNeQ6TcKRBSeB3u5Pg@mail.gmail.com>
Message-ID: <AANLkTinEZ2rmyAWiabvUlqeG00Xu2TBIKRCkJTooanlR@mail.gmail.com>

Hi,

On 17 May 2010 10:36, Paulo Assis <pj.assis at gmail.com> wrote:

> You should have bought the Bresser package at Lidl, that one has a uvc
> camera that works very well.
> ?(actually the fps is clipped to 5 due to the high exposure time, but
> the image is quite good)

I might keep an eye out for that one, thanks.

> see this line of lsusb:
> bInterfaceClass ? ? ? 255 Vendor Specific Class
>
> for uvc this must read "Video Class",
> so I'm afraid the camera is not uvc compatible.

Oh well.  I don't suppose there's some other driver on linux which
might be likely to work?

It's not desperately important that it work in linux, but I was hoping :-)

Gavin


From pj.assis at gmail.com  Mon May 17 14:44:30 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Mon, 17 May 2010 13:44:30 +0100
Subject: [Linux-uvc-devel] Aldi USB Microscope
In-Reply-To: <AANLkTinEZ2rmyAWiabvUlqeG00Xu2TBIKRCkJTooanlR@mail.gmail.com>
References: <AANLkTiklUIegBVo9XadpuTmV-N6aXYaK7RmT3sm97Yg-@mail.gmail.com>
	<AANLkTilbTZ3zHy_eLAiec561D0VNeQ6TcKRBSeB3u5Pg@mail.gmail.com>
	<AANLkTinEZ2rmyAWiabvUlqeG00Xu2TBIKRCkJTooanlR@mail.gmail.com>
Message-ID: <AANLkTimRemfb3GEBfnPWn7pUOah5vTddsmEdv-NdJ2Fi@mail.gmail.com>

Hi,

2010/5/17 Gavin McCullagh <gmccullagh at gmail.com>:
> Hi,
>
> On 17 May 2010 10:36, Paulo Assis <pj.assis at gmail.com> wrote:
>
>> You should have bought the Bresser package at Lidl, that one has a uvc
>> camera that works very well.
>> ?(actually the fps is clipped to 5 due to the high exposure time, but
>> the image is quite good)
>
> I might keep an eye out for that one, thanks.
>
>> see this line of lsusb:
>> bInterfaceClass ? ? ? 255 Vendor Specific Class
>>
>> for uvc this must read "Video Class",
>> so I'm afraid the camera is not uvc compatible.
>
> Oh well. ?I don't suppose there's some other driver on linux which
> might be likely to work?

You may try gspca, it supports a very large camera array with vendor
specific interfaces.

>
> It's not desperately important that it work in linux, but I was hoping :-)
>
> Gavin
>

Regards,
Paulo


From phil at sanslogic.co.uk  Mon May 17 14:14:32 2010
From: phil at sanslogic.co.uk (Philip Heron)
Date: Mon, 17 May 2010 13:14:32 +0100
Subject: [Linux-uvc-devel] Aldi USB Microscope
In-Reply-To: <AANLkTinEZ2rmyAWiabvUlqeG00Xu2TBIKRCkJTooanlR@mail.gmail.com>
References: <AANLkTiklUIegBVo9XadpuTmV-N6aXYaK7RmT3sm97Yg-@mail.gmail.com>	<AANLkTilbTZ3zHy_eLAiec561D0VNeQ6TcKRBSeB3u5Pg@mail.gmail.com>
	<AANLkTinEZ2rmyAWiabvUlqeG00Xu2TBIKRCkJTooanlR@mail.gmail.com>
Message-ID: <4BF13328.4090803@sanslogic.co.uk>

On 17/05/2010 12:51, Gavin McCullagh wrote:
> Oh well.  I don't suppose there's some other driver on linux which
> might be likely to work?

It looks awfully like a USB microscope I have, which is supported by the 
cpia2 driver.

-Phil


From laurent.pinchart at ideasonboard.com  Thu May 20 00:47:33 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Thu, 20 May 2010 00:47:33 +0200
Subject: [Linux-uvc-devel] unsupported integrated webcam
In-Reply-To: <1273600566.9625.18.camel@desktop>
References: <1273600566.9625.18.camel@desktop>
Message-ID: <201005200047.34868.laurent.pinchart@ideasonboard.com>

Hi Enrique,

On Tuesday 11 May 2010 19:56:06 Enrique A Segni wrote:
> Hello,
> 
> I'm very new at this but from what I see in your site the integrated
> webcam on my HP Touchsmart 300-1025 is not supported.

Not being listed on the website doesn't mean being unsupported. In theory the 
uvcvideo driver should support UVC-compatible cameras out of the box. In 
practice bugs in camera firmwares sometimes prevents that.

> I'm enclosing lsusb, lsusb -v and dmesg for your info.

The attached lsusb -v output doesn't include the beginning of the webcam USB 
descriptors. Could you please resend the output of the following command ?

lsusb -d 04f2:b14c -v

> If there is any other info you need please let me know...

Have you tried using the webcam ? Does it work ? If it doesn't, can you 
describe the problem(s) ?

> My sound, touchscreen and tvtuner are not either, any suggestions or
> info would be welcome.

That's out of my area of expertize, sorry :-)

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Thu May 20 00:55:18 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Thu, 20 May 2010 00:55:18 +0200
Subject: [Linux-uvc-devel] [UVC] VS Interface
In-Reply-To: <AANLkTim2bwphYmJitpGzu0g5QOhHCFRKv-W-c14gYmmZ@mail.gmail.com>
References: <AANLkTim2bwphYmJitpGzu0g5QOhHCFRKv-W-c14gYmmZ@mail.gmail.com>
Message-ID: <201005200055.18873.laurent.pinchart@ideasonboard.com>

Hi,

On Sunday 09 May 2010 20:55:56 Palmax Maverick wrote:
> Dear developers of linux-uvc,
> 
> I want to list all VS Interfaces of my devices (
> /sys/class/video4linux/video0, /sys/class/video4linux/video1, ...,
> /sys/class/video4linux/videoN ).
> I think that I should use VS_PROBE_CONTROL, but do you know a good
> example for doing it?

The VS_PROBE_CONTROL is used to negotiate the video streaming parameters, not 
to list the VS interfaces.

> I need it for getting each Input Header of each VS Interface.

Do you need to do it manually or in a software ? In the first case why don't 
you just use lsusb ?

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Thu May 20 01:08:35 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Thu, 20 May 2010 01:08:35 +0200
Subject: [Linux-uvc-devel] Stream from multimple cameras
In-Reply-To: <8DFAD57C3BF24C9099A26DCFE03BBCD5@core2>
References: <925291541.1071631274041488503.JavaMail.root@spooler9-g27.priv.proxad.net>
	<1221910811.1071671274041520047.JavaMail.root@spooler9-g27.priv.proxad.net>
	<8DFAD57C3BF24C9099A26DCFE03BBCD5@core2>
Message-ID: <201005200108.36286.laurent.pinchart@ideasonboard.com>

Hi Adrian,

On Monday 17 May 2010 09:24:04 Adrian Sergiu DARABANT wrote:
> Hello all,
> 
> In my case I tested with the cameras plugged into 2 differens hubs (I have
> 2 pairs on two sides of my netbook) and the result is the same. I have to
> open the laptop however to see if the hubs are really different as the
> port pairs are on adjacent sides of the notebook and not on opposite sides
> (far enough to ensure the hubs are really different). On windows I see
> listed one USB2(Enhanced) controller and 4 USB Universal controllers- so I
> guess is just one USB2
> 
> Using 2 hubs is not a solution for me as it doesn't work right now although
> I have 4 external USB ports on one of the machines and 6 on another (plus
> some internal ports on both of them)
> 
> As I am a developer, so in practice I could modify things inside the driver
> or somewhere in order to try to make things work.
> 
> My question is - who does/requests the USB bandwidth allocation ? The uvc
> driver or the camera itself ?  Is this happening directly in hardware or is
> mediated by the uvc/ehci driver?

The uvcvideo driver requests bandwidth based on values reported by the camera.

There are two settings involved there. The first one is the alternate settings 
for the video streaming interface. The video streaming interface has an 
isochronous endpoint for video streaming, and each alternate setting has a 
different maximum packet size for the endpoint, resulting in different 
bandwidth requirements.

The second one is the dwMaxPayloadTransferSize value reported by the camera 
when querying its video streaming control. The driver selects the alternate 
setting with the lowest bandwidth that fulfills the dwMaxPayloadTransferSize 
requirements.

If your camera has a single alternate setting (this can be checked using 
lsusb) you're probably screwed, as the bandwidth is fixed. If it has multiple 
alternate settings, it might be requesting a bandwidth higher than what it 
really needs. In that case you could try to hardcode a lower bandwidth (see 
the uvc_init_video function in uvc_video.c), or let the driver compute a 
bandwidth estimation on its own by setting the UVC_QUIRK_FIX_BANDWIDTH quirk.

It's also possible to play with URB submission order to use higher bandwidths 
and alternate capture between the different webcams. Dennis Muhlestein 
investigated that and got interesting results. Search the list archives for a 
thread called "Multiple camera framerate".

> In the second case can we force the driver on the allocation problem if it
> is in the driver ?
> I don't know yet the answer to this - and having a few
> pointers/explanations from the UVC implementors might help here !
> 
> I saw the other forums and their approach - and somebody proposed there

-- 
Regards,

Laurent Pinchart


From ctarwater at gmail.com  Sun May 23 20:39:16 2010
From: ctarwater at gmail.com (C Tarwater)
Date: Sun, 23 May 2010 14:39:16 -0400
Subject: [Linux-uvc-devel] 064e:a136 Not Supported
Message-ID: <AANLkTikUXL3gn_7rQ8ouSIwFPduays6TKAC2p4mw7eSP@mail.gmail.com>

064e:a136 (Suyin) is mounted in my Asus UL50vt notebook and is mounted
upside down.
The website says to post if we have a device that is not supported, so here
I am.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100523/75f5f7f9/attachment.html>

From sansegu at hotmail.com  Tue May 25 14:41:20 2010
From: sansegu at hotmail.com (Santiago Segura)
Date: Tue, 25 May 2010 14:41:20 +0200
Subject: [Linux-uvc-devel] two webcams
Message-ID: <SNT142-w3900677F5285A31BD508A2B7E80@phx.gbl>


Hi!

 

I have a strangle problem using two cameras
at the same time.

 

My application (webcam security) works perfectly,
I suppose.

But after some hours (24 hours or more) the
system hags without any indicative log or signal. Simply it freezes showing the
last camera images before to crash.

 

I use a gspca USB 1.0 webcam (Vimicro) and
an UVC USB 2.0 webcam (I tested with many manufactures with the same result).

 

The bandwidth is not very high. From both
cameras I get frames in JPEG, with low quality (about 30Kb/frame).

 

I tried to use two different USB ports.
Same result.

 

With only one camera (either the gspca
camera or the UVC), I don?t have any problem.

 

My Cpu is an slow Pentium at 600Mhz (But
with USB 2.0 ports).

 

I tried dozens of kernels versions (the
last is 2.6.34) and configurations (Pre-emptive-No preventive, noapic, acpi=off
?, ticks a 250, ticks a 500 (custom), ticks a 1024).

Always the same.

 

Anyone has any idea about how can I fix
this problem?

 

Thanks in advance,

Sansegu

 

  		 	   		  
_________________________________________________________________
?Quieres conocer trucos de Windows 7? ?Los que ya lo usan te los cuentan!
http://www.sietesunpueblodeexpertos.com/index_windows7.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100525/fbd85295/attachment.html>

From pj.assis at gmail.com  Tue May 25 15:23:19 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Tue, 25 May 2010 14:23:19 +0100
Subject: [Linux-uvc-devel] two webcams
In-Reply-To: <SNT142-w3900677F5285A31BD508A2B7E80@phx.gbl>
References: <SNT142-w3900677F5285A31BD508A2B7E80@phx.gbl>
Message-ID: <AANLkTikWc3gNV69y-jWiA1yW0AgnroPoMHdxMyXe4QYc@mail.gmail.com>

Hi,
Do you get any messages on the system log (dmesg) ?

Regards,
Paulo

2010/5/25 Santiago Segura <sansegu at hotmail.com>:
> Hi!
>
>
>
> I have a strangle problem using two cameras at the same time.
>
>
>
> My application (webcam security) works perfectly, I suppose.
>
> But after some hours (24 hours or more) the system hags without any
> indicative log or signal. Simply it freezes showing the last camera images
> before to crash.
>
>
>
> I use a gspca USB 1.0 webcam (Vimicro) and an UVC USB 2.0 webcam (I tested
> with many manufactures with the same result).
>
>
>
> The bandwidth is not very high. From both cameras I get frames in JPEG, with
> low quality (about 30Kb/frame).
>
>
>
> I tried to use two different USB ports. Same result.
>
>
>
> With only one camera (either the gspca camera or the UVC), I don?t have any
> problem.
>
>
>
> My Cpu is an slow Pentium at 600Mhz (But with USB 2.0 ports).
>
>
>
> I tried dozens of kernels versions (the last is 2.6.34) and configurations
> (Pre-emptive-No preventive, noapic, acpi=off ?, ticks a 250, ticks a 500
> (custom), ticks a 1024).
>
> Always the same.
>
>
>
> Anyone has any idea about how can I fix this problem?
>
>
>
> Thanks in advance,
>
> Sansegu
>
>
>
>
>
> ________________________________
> ?Sabes que La Gente de Hoy tiene GUARDAESPALDAS contra el Spam?
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>


From sansegu at hotmail.com  Tue May 25 17:18:03 2010
From: sansegu at hotmail.com (Santiago Segura)
Date: Tue, 25 May 2010 17:18:03 +0200
Subject: [Linux-uvc-devel] two webcams
In-Reply-To: <AANLkTikWc3gNV69y-jWiA1yW0AgnroPoMHdxMyXe4QYc@mail.gmail.com>
References: <SNT142-w3900677F5285A31BD508A2B7E80@phx.gbl>,
	<AANLkTikWc3gNV69y-jWiA1yW0AgnroPoMHdxMyXe4QYc@mail.gmail.com>
Message-ID: <SNT142-w48E1B1F907FC7E29AF26AFB7E80@phx.gbl>



Hi Paulo,no, when the system hangs, do not leave any message related.
Regards,Santiago Segura

> Date: Tue, 25 May 2010 14:23:19 +0100
> Subject: Re: [Linux-uvc-devel] two webcams
> From: pj.assis at gmail.com
> To: sansegu at hotmail.com
> CC: linux-uvc-devel at lists.berlios.de
> 
> Hi,
> Do you get any messages on the system log (dmesg) ?
> 
> Regards,
> Paulo
> 
> 2010/5/25 Santiago Segura <sansegu at hotmail.com>:
> > Hi!
> >
> >
> >
> > I have a strangle problem using two cameras at the same time.
> >
> >
> >
> > My application (webcam security) works perfectly, I suppose.
> >
> > But after some hours (24 hours or more) the system hags without any
> > indicative log or signal. Simply it freezes showing the last camera images
> > before to crash.
> >
> >
> >
> > I use a gspca USB 1.0 webcam (Vimicro) and an UVC USB 2.0 webcam (I tested
> > with many manufactures with the same result).
> >
> >
> >
> > The bandwidth is not very high. From both cameras I get frames in JPEG, with
> > low quality (about 30Kb/frame).
> >
> >
> >
> > I tried to use two different USB ports. Same result.
> >
> >
> >
> > With only one camera (either the gspca camera or the UVC), I don?t have any
> > problem.
> >
> >
> >
> > My Cpu is an slow Pentium at 600Mhz (But with USB 2.0 ports).
> >
> >
> >
> > I tried dozens of kernels versions (the last is 2.6.34) and configurations
> > (Pre-emptive-No preventive, noapic, acpi=off ?, ticks a 250, ticks a 500
> > (custom), ticks a 1024).
> >
> > Always the same.
> >
> >
> >
> > Anyone has any idea about how can I fix this problem?
> >
> >
> >
> > Thanks in advance,
> >
> > Sansegu
> >
> >
> >
> >
> >
> > ________________________________
> > ?Sabes que La Gente de Hoy tiene GUARDAESPALDAS contra el Spam?
> > _______________________________________________
> > Linux-uvc-devel mailing list
> > Linux-uvc-devel at lists.berlios.de
> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> >
> >
 		 	   		  
_________________________________________________________________
Disfruta de Messenger y Hotmail en tu BlackBerry ?Hazlo ya!
http://serviciosmoviles.es.msn.com/messenger/blackberry.aspx
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100525/d2f99748/attachment.html>

From pj.assis at gmail.com  Tue May 25 20:27:49 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Tue, 25 May 2010 19:27:49 +0100
Subject: [Linux-uvc-devel] two webcams
In-Reply-To: <SNT142-w48E1B1F907FC7E29AF26AFB7E80@phx.gbl>
References: <SNT142-w3900677F5285A31BD508A2B7E80@phx.gbl>
	<AANLkTikWc3gNV69y-jWiA1yW0AgnroPoMHdxMyXe4QYc@mail.gmail.com>
	<SNT142-w48E1B1F907FC7E29AF26AFB7E80@phx.gbl>
Message-ID: <AANLkTilaam4vRlohGnh4gSgsWEDsjHGbhtxaRbpSunD7@mail.gmail.com>

Santiago Hi,

2010/5/25 Santiago Segura <sansegu at hotmail.com>:
>
> Hi Paulo,
> no, when the system hangs, do not leave any message related.

Is this a full system freeze or just your app ?
If it's a system freeze it may be related to a hardware problem (usb
controler, memory, ..)
if it's just your app, then the problem is probably related to it.

Regards,
Paulo

> Regards,
> Santiago Segura
>
>> Date: Tue, 25 May 2010 14:23:19 +0100
>> Subject: Re: [Linux-uvc-devel] two webcams
>> From: pj.assis at gmail.com
>> To: sansegu at hotmail.com
>> CC: linux-uvc-devel at lists.berlios.de
>>
>> Hi,
>> Do you get any messages on the system log (dmesg) ?
>>
>> Regards,
>> Paulo
>>
>> 2010/5/25 Santiago Segura <sansegu at hotmail.com>:
>> > Hi!
>> >
>> >
>> >
>> > I have a strangle problem using two cameras at the same time.
>> >
>> >
>> >
>> > My application (webcam security) works perfectly, I suppose.
>> >
>> > But after some hours (24 hours or more) the system hags without any
>> > indicative log or signal. Simply it freezes showing the last camera
>> > images
>> > before to crash.
>> >
>> >
>> >
>> > I use a gspca USB 1.0 webcam (Vimicro) and an UVC USB 2.0 webcam (I
>> > tested
>> > with many manufactures with the same result).
>> >
>> >
>> >
>> > The bandwidth is not very high. From both cameras I get frames in JPEG,
>> > with
>> > low quality (about 30Kb/frame).
>> >
>> >
>> >
>> > I tried to use two different USB ports. Same result.
>> >
>> >
>> >
>> > With only one camera (either the gspca camera or the UVC), I don?t have
>> > any
>> > problem.
>> >
>> >
>> >
>> > My Cpu is an slow Pentium at 600Mhz (But with USB 2.0 ports).
>> >
>> >
>> >
>> > I tried dozens of kernels versions (the last is 2.6.34) and
>> > configurations
>> > (Pre-emptive-No preventive, noapic, acpi=off ?, ticks a 250, ticks a 500
>> > (custom), ticks a 1024).
>> >
>> > Always the same.
>> >
>> >
>> >
>> > Anyone has any idea about how can I fix this problem?
>> >
>> >
>> >
>> > Thanks in advance,
>> >
>> > Sansegu
>> >
>> >
>> >
>> >
>> >
>> > ________________________________
>> > ?Sabes que La Gente de Hoy tiene GUARDAESPALDAS contra el Spam?
>> > _______________________________________________
>> > Linux-uvc-devel mailing list
>> > Linux-uvc-devel at lists.berlios.de
>> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>> >
>> >
>
> ________________________________
> Los cochazos de los famosos Patrick Dempsey, Tom Cruise o Michael Douglas
> presumen de autom?vil


From sansegu at hotmail.com  Wed May 26 08:28:32 2010
From: sansegu at hotmail.com (Santiago Segura)
Date: Wed, 26 May 2010 08:28:32 +0200
Subject: [Linux-uvc-devel] two webcams
In-Reply-To: <AANLkTilaam4vRlohGnh4gSgsWEDsjHGbhtxaRbpSunD7@mail.gmail.com>
References: <SNT142-w3900677F5285A31BD508A2B7E80@phx.gbl>,
	<AANLkTikWc3gNV69y-jWiA1yW0AgnroPoMHdxMyXe4QYc@mail.gmail.com>,
	<SNT142-w48E1B1F907FC7E29AF26AFB7E80@phx.gbl>,
	<AANLkTilaam4vRlohGnh4gSgsWEDsjHGbhtxaRbpSunD7@mail.gmail.com>
Message-ID: <SNT142-w121315CF03386D5CB00B3B7E90@phx.gbl>



Hi,The full system is freeze.About the hardware problem, maybe you are right, but the curious is that sometimes the same board is three days working and sometimes only 12 horus.I think that is to much time for a hardware problem.Really, this will be very hard to locate and fix ...
Thanks,Santiago.

> Date: Tue, 25 May 2010 19:27:49 +0100
> Subject: Re: [Linux-uvc-devel] two webcams
> From: pj.assis at gmail.com
> To: sansegu at hotmail.com
> CC: linux-uvc-devel at lists.berlios.de
> 
> Santiago Hi,
> 
> 2010/5/25 Santiago Segura <sansegu at hotmail.com>:
> >
> > Hi Paulo,
> > no, when the system hangs, do not leave any message related.
> 
> Is this a full system freeze or just your app ?
> If it's a system freeze it may be related to a hardware problem (usb
> controler, memory, ..)
> if it's just your app, then the problem is probably related to it.
> 
> Regards,
> Paulo
> 
> > Regards,
> > Santiago Segura
> >
> >> Date: Tue, 25 May 2010 14:23:19 +0100
> >> Subject: Re: [Linux-uvc-devel] two webcams
> >> From: pj.assis at gmail.com
> >> To: sansegu at hotmail.com
> >> CC: linux-uvc-devel at lists.berlios.de
> >>
> >> Hi,
> >> Do you get any messages on the system log (dmesg) ?
> >>
> >> Regards,
> >> Paulo
> >>
> >> 2010/5/25 Santiago Segura <sansegu at hotmail.com>:
> >> > Hi!
> >> >
> >> >
> >> >
> >> > I have a strangle problem using two cameras at the same time.
> >> >
> >> >
> >> >
> >> > My application (webcam security) works perfectly, I suppose.
> >> >
> >> > But after some hours (24 hours or more) the system hags without any
> >> > indicative log or signal. Simply it freezes showing the last camera
> >> > images
> >> > before to crash.
> >> >
> >> >
> >> >
> >> > I use a gspca USB 1.0 webcam (Vimicro) and an UVC USB 2.0 webcam (I
> >> > tested
> >> > with many manufactures with the same result).
> >> >
> >> >
> >> >
> >> > The bandwidth is not very high. From both cameras I get frames in JPEG,
> >> > with
> >> > low quality (about 30Kb/frame).
> >> >
> >> >
> >> >
> >> > I tried to use two different USB ports. Same result.
> >> >
> >> >
> >> >
> >> > With only one camera (either the gspca camera or the UVC), I don?t have
> >> > any
> >> > problem.
> >> >
> >> >
> >> >
> >> > My Cpu is an slow Pentium at 600Mhz (But with USB 2.0 ports).
> >> >
> >> >
> >> >
> >> > I tried dozens of kernels versions (the last is 2.6.34) and
> >> > configurations
> >> > (Pre-emptive-No preventive, noapic, acpi=off ?, ticks a 250, ticks a 500
> >> > (custom), ticks a 1024).
> >> >
> >> > Always the same.
> >> >
> >> >
> >> >
> >> > Anyone has any idea about how can I fix this problem?
> >> >
> >> >
> >> >
> >> > Thanks in advance,
> >> >
> >> > Sansegu
> >> >
> >> >
> >> >
> >> >
> >> >
> >> > ________________________________
> >> > ?Sabes que La Gente de Hoy tiene GUARDAESPALDAS contra el Spam?
> >> > _______________________________________________
> >> > Linux-uvc-devel mailing list
> >> > Linux-uvc-devel at lists.berlios.de
> >> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> >> >
> >> >
> >
> > ________________________________
> > Los cochazos de los famosos Patrick Dempsey, Tom Cruise o Michael Douglas
> > presumen de autom?vil
 		 	   		  
_________________________________________________________________
?Quieres conocer trucos de Windows 7? ?Los que ya lo usan te los cuentan!
http://www.sietesunpueblodeexpertos.com/index_windows7.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100526/f96d6441/attachment.html>

From pj.assis at gmail.com  Wed May 26 10:29:55 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Wed, 26 May 2010 09:29:55 +0100
Subject: [Linux-uvc-devel] two webcams
In-Reply-To: <SNT142-w121315CF03386D5CB00B3B7E90@phx.gbl>
References: <SNT142-w3900677F5285A31BD508A2B7E80@phx.gbl>
	<AANLkTikWc3gNV69y-jWiA1yW0AgnroPoMHdxMyXe4QYc@mail.gmail.com>
	<SNT142-w48E1B1F907FC7E29AF26AFB7E80@phx.gbl>
	<AANLkTilaam4vRlohGnh4gSgsWEDsjHGbhtxaRbpSunD7@mail.gmail.com>
	<SNT142-w121315CF03386D5CB00B3B7E90@phx.gbl>
Message-ID: <AANLkTim4AwTurdDnJNGnTBQzLuUaq0Cz_N7IVLwiEIh8@mail.gmail.com>

Hi,

2010/5/26 Santiago Segura <sansegu at hotmail.com>:
>
> Hi,
> The full system is freeze.
> About the hardware problem, maybe you are right, but the curious is that
> sometimes the same board is three days working and sometimes only 12 horus.
> I think that is to much time for a hardware problem.

Not really, consider a system that is not properly "refrigerated", it
just takes a hotter
day to cause problems in some components, otherwise it may work fine
for months.

Regards,
Paulo

> Really, this will be very hard to locate and fix ...
> Thanks,
> Santiago.
>
>> Date: Tue, 25 May 2010 19:27:49 +0100
>> Subject: Re: [Linux-uvc-devel] two webcams
>> From: pj.assis at gmail.com
>> To: sansegu at hotmail.com
>> CC: linux-uvc-devel at lists.berlios.de
>>
>> Santiago Hi,
>>
>> 2010/5/25 Santiago Segura <sansegu at hotmail.com>:
>> >
>> > Hi Paulo,
>> > no, when the system hangs, do not leave any message related.
>>
>> Is this a full system freeze or just your app ?
>> If it's a system freeze it may be related to a hardware problem (usb
>> controler, memory, ..)
>> if it's just your app, then the problem is probably related to it.
>>
>> Regards,
>> Paulo
>>
>> > Regards,
>> > Santiago Segura
>> >
>> >> Date: Tue, 25 May 2010 14:23:19 +0100
>> >> Subject: Re: [Linux-uvc-devel] two webcams
>> >> From: pj.assis at gmail.com
>> >> To: sansegu at hotmail.com
>> >> CC: linux-uvc-devel at lists.berlios.de
>> >>
>> >> Hi,
>> >> Do you get any messages on the system log (dmesg) ?
>> >>
>> >> Regards,
>> >> Paulo
>> >>
>> >> 2010/5/25 Santiago Segura <sansegu at hotmail.com>:
>> >> > Hi!
>> >> >
>> >> >
>> >> >
>> >> > I have a strangle problem using two cameras at the same time.
>> >> >
>> >> >
>> >> >
>> >> > My application (webcam security) works perfectly, I suppose.
>> >> >
>> >> > But after some hours (24 hours or more) the system hags without any
>> >> > indicative log or signal. Simply it freezes showing the last camera
>> >> > images
>> >> > before to crash.
>> >> >
>> >> >
>> >> >
>> >> > I use a gspca USB 1.0 webcam (Vimicro) and an UVC USB 2.0 webcam (I
>> >> > tested
>> >> > with many manufactures with the same result).
>> >> >
>> >> >
>> >> >
>> >> > The bandwidth is not very high. From both cameras I get frames in
>> >> > JPEG,
>> >> > with
>> >> > low quality (about 30Kb/frame).
>> >> >
>> >> >
>> >> >
>> >> > I tried to use two different USB ports. Same result.
>> >> >
>> >> >
>> >> >
>> >> > With only one camera (either the gspca camera or the UVC), I don?t
>> >> > have
>> >> > any
>> >> > problem.
>> >> >
>> >> >
>> >> >
>> >> > My Cpu is an slow Pentium at 600Mhz (But with USB 2.0 ports).
>> >> >
>> >> >
>> >> >
>> >> > I tried dozens of kernels versions (the last is 2.6.34) and
>> >> > configurations
>> >> > (Pre-emptive-No preventive, noapic, acpi=off ?, ticks a 250, ticks a
>> >> > 500
>> >> > (custom), ticks a 1024).
>> >> >
>> >> > Always the same.
>> >> >
>> >> >
>> >> >
>> >> > Anyone has any idea about how can I fix this problem?
>> >> >
>> >> >
>> >> >
>> >> > Thanks in advance,
>> >> >
>> >> > Sansegu
>> >> >
>> >> >
>> >> >
>> >> >
>> >> >
>> >> > ________________________________
>> >> > ?Sabes que La Gente de Hoy tiene GUARDAESPALDAS contra el Spam?
>> >> > _______________________________________________
>> >> > Linux-uvc-devel mailing list
>> >> > Linux-uvc-devel at lists.berlios.de
>> >> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>> >> >
>> >> >
>> >
>> > ________________________________
>> > Los cochazos de los famosos Patrick Dempsey, Tom Cruise o Michael
>> > Douglas
>> > presumen de autom?vil
>
> ________________________________
> ?Sabes que La Gente de Hoy tiene GUARDAESPALDAS contra el Spam?


From a.auer at zydacron.com  Fri May 28 11:08:19 2010
From: a.auer at zydacron.com (Andreas Auer)
Date: Fri, 28 May 2010 11:08:19 +0200
Subject: [Linux-uvc-devel] UVC userpointer  streaming (memory mapping)
Message-ID: <hto12i$62q$1@dough.gmane.org>

Hi,

I'm trying to get user pointer streaming with UVC webcams working. I 
already got a patch from Laurent Pinchart (thanks) which enables user 
pointer streaming. This patch works if I pass malloc()'d memory to the 
driver.
My problem is that I want to use mmap()'d memory (via /dev/mem) and this 
type of memory (flags VM_IO and VM_PFNMAP are set) is not supported to 
be used with get_user_pages to map the memory to the kernel space.

So, is there another way to map the pages into the kernel space to be 
used for user pointer streaming?? I had a look at kmap (kmap_atomic)... 
would this be possible??

Thanks,
Andreas



From asergiu at yahoo.co.uk  Fri May 28 18:28:53 2010
From: asergiu at yahoo.co.uk (Adrian Sergiu Darabant)
Date: Fri, 28 May 2010 16:28:53 +0000 (GMT)
Subject: [Linux-uvc-devel] UVC userpointer  streaming (memory mapping)
In-Reply-To: <hto12i$62q$1@dough.gmane.org>
References: <hto12i$62q$1@dough.gmane.org>
Message-ID: <376074.59500.qm@web27701.mail.ukl.yahoo.com>

Andreas,

   Would this be for using X shared memory segments with the uvcdriver ? 

Adrian


----- Original Message ----
From: Andreas Auer <a.auer at zydacron.com>
To: linux-uvc-devel at lists.berlios.deA
Sent: Fri, 28 May, 2010 12:08:19
Subject: [Linux-uvc-devel] UVC userpointer  streaming (memory mapping)

Hi,

I'm trying to get user pointer streaming with UVC webcams working. I already got a patch from Laurent Pinchart (thanks) which enables user pointer streaming. This patch works if I pass malloc()'d memory to the driver.
My problem is that I want to use mmap()'d memory (via /dev/mem) and this type of memory (flags VM_IO and VM_PFNMAP are set) is not supported to be used with get_user_pages to map the memory to the kernel space.

So, is there another way to map the pages into the kernel space to be used for user pointer streaming?? I had a look at kmap (kmap_atomic)... would this be possible??

Thanks,
Andreas

_______________________________________________
Linux-uvc-devel mailing list
Linux-uvc-devel at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/linux-uvc-devel



      


From mishtir at gmail.com  Sat May 29 09:57:43 2010
From: mishtir at gmail.com (Stefano Martin)
Date: Sat, 29 May 2010 09:57:43 +0200
Subject: [Linux-uvc-devel]  Looking for upside down uvc cams
Message-ID: <AANLkTik5FJhZN3Q7_2hutkOTrHqxm-B7ui3AOYHW6muh@mail.gmail.com>

I hope you can solve this problem of my camera.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100529/0f5c02eb/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: dmi.log
Type: text/x-log
Size: 10914 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100529/0f5c02eb/attachment.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lsusb.log
Type: text/x-log
Size: 171 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100529/0f5c02eb/attachment-0001.bin>

From a.auer at zydacron.com  Mon May 31 08:25:02 2010
From: a.auer at zydacron.com (Andreas Auer)
Date: Mon, 31 May 2010 08:25:02 +0200
Subject: [Linux-uvc-devel] UVC userpointer  streaming (memory mapping)
In-Reply-To: <376074.59500.qm@web27701.mail.ukl.yahoo.com>
References: <hto12i$62q$1@dough.gmane.org>
	<376074.59500.qm@web27701.mail.ukl.yahoo.com>
Message-ID: <htvkjs$fp0$1@dough.gmane.org>

Hi,

no, not really. I have an embedded system with an ARM9 and DSP CPU. The 
DSP encodes the video with h264. So, I have to send the frames to the 
DSP with a specific shared memory section (shared memory is outside the 
linux memory).
Currently, I have to copy each frame from the requested v4l2 buffers to 
this shared memory. But I would like to pass a pointer to the shared 
memory directly to the uvc driver (USERPTR streaming).

Cheers,
Andreas

Adrian Sergiu Darabant schrieb:
> Andreas,
> 
>    Would this be for using X shared memory segments with the uvcdriver ? 
> 
> Adrian
> 
> 
> ----- Original Message ----
> From: Andreas Auer <a.auer at zydacron.com>
> To: linux-uvc-devel at lists.berlios.deA
> Sent: Fri, 28 May, 2010 12:08:19
> Subject: [Linux-uvc-devel] UVC userpointer  streaming (memory mapping)
> 
> Hi,
> 
> I'm trying to get user pointer streaming with UVC webcams working. I already got a patch from Laurent Pinchart (thanks) which enables user pointer streaming. This patch works if I pass malloc()'d memory to the driver.
> My problem is that I want to use mmap()'d memory (via /dev/mem) and this type of memory (flags VM_IO and VM_PFNMAP are set) is not supported to be used with get_user_pages to map the memory to the kernel space.
> 
> So, is there another way to map the pages into the kernel space to be used for user pointer streaming?? I had a look at kmap (kmap_atomic)... would this be possible??
> 
> Thanks,
> Andreas
> 
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel



From laurent.pinchart at ideasonboard.com  Mon May 31 11:52:26 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Mon, 31 May 2010 11:52:26 +0200
Subject: [Linux-uvc-devel] 064e:a136 Not Supported
In-Reply-To: <AANLkTikUXL3gn_7rQ8ouSIwFPduays6TKAC2p4mw7eSP@mail.gmail.com>
References: <AANLkTikUXL3gn_7rQ8ouSIwFPduays6TKAC2p4mw7eSP@mail.gmail.com>
Message-ID: <201005311152.27344.laurent.pinchart@ideasonboard.com>

Hi,

On Sunday 23 May 2010 20:39:16 C Tarwater wrote:
> 064e:a136 (Suyin) is mounted in my Asus UL50vt notebook and is mounted
> upside down.
> The website says to post if we have a device that is not supported, so here
> I am.

Could you please post the output of 'lsusb -v -d 064e:a136' and 'dmidecode' ? 
Thanks.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Mon May 31 12:06:00 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Mon, 31 May 2010 12:06:00 +0200
Subject: [Linux-uvc-devel] UVC userpointer  streaming (memory mapping)
In-Reply-To: <hto12i$62q$1@dough.gmane.org>
References: <hto12i$62q$1@dough.gmane.org>
Message-ID: <201005311206.01156.laurent.pinchart@ideasonboard.com>

Hi Andreas,

I've just answered your private e-mail, here's a copy for the list.

On Friday 28 May 2010 11:08:19 Andreas Auer wrote:
> Hi,
> 
> I'm trying to get user pointer streaming with UVC webcams working. I
> already got a patch from Laurent Pinchart (thanks) which enables user
> pointer streaming. This patch works if I pass malloc()'d memory to the
> driver.
> My problem is that I want to use mmap()'d memory (via /dev/mem) and this
> type of memory (flags VM_IO and VM_PFNMAP are set) is not supported to
> be used with get_user_pages to map the memory to the kernel space.
> 
> So, is there another way to map the pages into the kernel space to be
> used for user pointer streaming?? I had a look at kmap (kmap_atomic)...
> would this be possible??

PFNMAP memory has no page struct associated with it, it can't be handled the 
same way as regular main memory in the uvcvideo driver.

The DSP driver probably reserves memory at system startup. That memory isn't 
managed by the Linux kernel memory manager.

The uvcvideo driver doesn't support PFNMAP memory at the moment. That 
shouldn't be too difficult to fix though, but I'm afraid I don't have time to 
work on it right now.

-- 
Regards,

Laurent Pinchart


