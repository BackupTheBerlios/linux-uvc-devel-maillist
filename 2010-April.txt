From svendaage at yours.com  Thu Apr  1 01:02:08 2010
From: svendaage at yours.com (svendaage at yours.com)
Date: Wed, 31 Mar 2010 19:02:08 -0400
Subject: [Linux-uvc-devel] Logitech Portable Webcam C905
Message-ID: <8CC9F3D531DC619-14D4-1CAB@web-mmc-d10.sysops.aol.com>

Hello with you ;-)

The Logitech Portable C905 are not listet at http://linux-uvc.berlios.de/

lsusb tells: ID 046d:080a Logitech, Inc.

Using: make all

svend at linux-s5kc:/tmp/uvcvideo-553dfd853cba> make all
make -C /tmp/uvcvideo-553dfd853cba/v4l all
make[1]: G?r til katalog '/tmp/uvcvideo-553dfd853cba/v4l'
No version yet, using 2.6.31.12-0.2-desktop
make[1]: Forlader katalog '/tmp/uvcvideo-553dfd853cba/v4l'
make[1]: G?r til katalog '/tmp/uvcvideo-553dfd853cba/v4l'
scripts/make_makefile.pl
Updating/Creating .config
Preparing to compile for kernel version 2.6.31
File not found: /lib/modules/2.6.31.12-0.2-desktop/build/.config at ./scripts/make_kconfig.pl line 32, <IN> line 4.
make[1]: Forlader katalog '/tmp/uvcvideo-553dfd853cba/v4l'
make[1]: G?r til katalog '/tmp/uvcvideo-553dfd853cba/v4l'
Updating/Creating .config
Preparing to compile for kernel version 2.6.31
File not found: /lib/modules/2.6.31.12-0.2-desktop/build/.config at ./scripts/make_kconfig.pl line 32, <IN> line 4.
make[1]: *** Ingen regel til at skabe m?l '.myconfig' som beh?ves af 'config-compat.h'. Stop.
make[1]: Forlader katalog '/tmp/uvcvideo-553dfd853cba/v4l'
make: *** [all] Fejl 2
svend at linux-s5kc:/tmp/

Linux system: openSUSE 11.2 / Kernel  2.6.31.12-0.2-desktop / i686 / Intel Core i5 CPU 650 3,20GHz / Ram DRR3 8Gb

Sorry about the Danish, but I live in Denmark ;-)

I had just run Linux  for 2 weeks so I am new into this. Printer + scanner + Webcam had I not been able to run yet. But still I have hope. Today I get the message from my online bank that it could not be run under Linux so that are a serious problem I get here.

Have a nice day.



Yours sincerely
 
Svend Aage
  
Web site: http://www.killscammers.org

If you had been Scammed or other kind of Fraud or do you know some person who had been that. Then take a look at the Web site.

Free the world for Scammers. Do NOT pay them any money at all.
 
"If at first you don't succeed, try, try, again. Then quit, no use being a damn fool about things." - Quote: W.C. Fields

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100331/cd82abb0/attachment.html>

From chris at basementcode.com  Thu Apr  1 03:00:31 2010
From: chris at basementcode.com (Christopher Harvey)
Date: Wed, 31 Mar 2010 21:00:31 -0400
Subject: [Linux-uvc-devel] problems with uvc cameras and gstreamer on
	gentoo
In-Reply-To: <201003311811.47840.laurent.pinchart@ideasonboard.com>
References: <201003100240.14189.chris@basementcode.com>
	<201003172332.09923.chris@basementcode.com>
	<201003311811.47840.laurent.pinchart@ideasonboard.com>
Message-ID: <201003312100.31136.chris@basementcode.com>

No worries with reply time.

I used modprobe uvcvideo quriks=2

the output is the same, with the addition of :
[19551.461076] uvcvideo: Found UVC 1.00 device <unnamed> (046d:08ca)            
[19551.461080] uvcvideo: Forcing device quirks 0x2 by module parameter for 
testing purpose.                                                                     
[19551.461082] uvcvideo: Please report required quirks to the linux-uvc-devel 
mailing list.

I've never messed with kernel modules before, but if you want I can 
compile/patch code from source to figure this out.

On Wednesday 31 March 2010 12:11:47 pm Laurent Pinchart wrote:
> Hi Christopher,
> 
> Sorry for the late reply.
> 
> On Thursday 18 March 2010 04:32:09 Christopher Harvey wrote:
> > Yes, there is some dmesg text....
> > This is both plugging in the camera and from running
> > gst-launch-0.10 v4l2src ! video/x-raw-yuv,width=640,height=480 !
> > xvimagesink
> >
> > [ 8064.905024] usb 1-4: new high speed USB device using ehci_hcd and
> > address 3 [ 8065.166803] usb 1-4: configuration #1 chosen from 1 choice
> > [ 8065.538788] uvcvideo: Found UVC 1.00 device <unnamed> (046d:08ca)
> > [ 8065.558724] input: UVC Camera (046d:08ca) as
> > /devices/pci0000:00/0000:00:02.1/usb1/1-4/1-4:1.0/input/input4
> > [ 8065.558790] usbcore: registered new interface driver uvcvideo
> > [ 8065.558793] USB Video Class driver (v0.1.0)
> > [ 8121.352316] uvcvideo: Failed to query (131) UVC probe control : -32
> > (exp. 26).
> 
> The camera seems to crashed at this point. Could you please try to load the
> driver with the quirks=2 option ?
> 
> > [ 8121.355309] uvcvideo: Failed to set UVC probe control : -32 (exp. 26).
> > [ 8122.355194] uvcvideo: Failed to set UVC probe control : -110 (exp.
> > 26). [ 8123.355068] uvcvideo: Failed to set UVC probe control : -110
> > (exp. 26). [ 8124.355069] uvcvideo: Failed to set UVC probe control :
> > -110 (exp. 26).
> 


From pj.assis at gmail.com  Thu Apr  1 10:39:01 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Thu, 1 Apr 2010 09:39:01 +0100
Subject: [Linux-uvc-devel] Adjust Light Frequency Filter
In-Reply-To: <s2m82687eb71003311458xbbfd17des8dea6eed91387d97@mail.gmail.com>
References: <s2m82687eb71003311458xbbfd17des8dea6eed91387d97@mail.gmail.com>
Message-ID: <r2o59cf47a81004010139v34a0fec7v903d0697f9cddb14@mail.gmail.com>

Hi,
Try guvcview with the option --control_only, this should work along
side any other v4l2 app and you will be able to change the camera
control settings.

Best regards.
Paulo

2010/3/31 Nikhil Benesch <primate101 at gmail.com>:
> I have a Chicony 2.0 USB Camera (04f2:b008) that almost?works perfectly.
> Right now, I can get it to work perfectly in both luvsview and Empathy.
> Unfortunately, the image is too dark to be useful when the light frequency
> filter is off. Using luvsview, I can easily change this value to 50 or 60Hz
> with its GUI.
> Is there a way to implement the same fix for Empathy? The chat client
> doesn't currently provide a way to change this setting, and I'm not
> experienced enough to write a piece of software that's able to, if that's
> even possible. On Windows, I had a configuration tool that could update the
> webcam settings while I was video chatting, but I don't see something
> similar for Linux.
> In short, is there a way to change the light frequency filter settings in a
> program I didn't write?
> Thanks so much!
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>


From pj.assis at gmail.com  Thu Apr  1 10:43:58 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Thu, 1 Apr 2010 09:43:58 +0100
Subject: [Linux-uvc-devel] Logitech Portable Webcam C905
In-Reply-To: <8CC9F3D531DC619-14D4-1CAB@web-mmc-d10.sysops.aol.com>
References: <8CC9F3D531DC619-14D4-1CAB@web-mmc-d10.sysops.aol.com>
Message-ID: <n2p59cf47a81004010143v84c60000g3844dda82551f7a4@mail.gmail.com>

Svend Hi,,
please follow the instructions here:
http://www.linuxtv.org/wiki/index.php/How_to_Obtain,_Build_and_Install_V4L-DVB_Device_Drivers

and make sure you install the kernel headers or you wont be able to
compile the drivers.

Best regards,
Paulo

2010/4/1  <svendaage at yours.com>:
> Hello with you ;-)
>
> The Logitech Portable C905 are not listet at http://linux-uvc.berlios.de/
>
> lsusb tells: ID 046d:080a Logitech, Inc.
>
> Using: make all
>
> svend at linux-s5kc:/tmp/uvcvideo-553dfd853cba> make all
> make -C /tmp/uvcvideo-553dfd853cba/v4l all
> make[1]: G?r til katalog '/tmp/uvcvideo-553dfd853cba/v4l'
> No version yet, using 2.6.31.12-0.2-desktop
> make[1]: Forlader katalog '/tmp/uvcvideo-553dfd853cba/v4l'
> make[1]: G?r til katalog '/tmp/uvcvideo-553dfd853cba/v4l'
> scripts/make_makefile.pl
> Updating/Creating .config
> Preparing to compile for kernel version 2.6.31
> File not found: /lib/modules/2.6.31.12-0.2-desktop/build/.config at
> ./scripts/make_kconfig.pl line 32, <IN> line 4.
> make[1]: Forlader katalog '/tmp/uvcvideo-553dfd853cba/v4l'
> make[1]: G?r til katalog '/tmp/uvcvideo-553dfd853cba/v4l'
> Updating/Creating .config
> Preparing to compile for kernel version 2.6.31
> File not found: /lib/modules/2.6.31.12-0.2-desktop/build/.config at
> ./scripts/make_kconfig.pl line 32, <IN> line 4.
> make[1]: *** Ingen regel til at skabe m?l '.myconfig' som beh?ves af
> 'config-compat.h'. Stop.
> make[1]: Forlader katalog '/tmp/uvcvideo-553dfd853cba/v4l'
> make: *** [all] Fejl 2
> svend at linux-s5kc:/tmp/
>
> Linux system: openSUSE 11.2 / Kernel? 2.6.31.12-0.2-desktop / i686 / Intel
> Core i5 CPU 650 3,20GHz / Ram DRR3 8Gb
>
> Sorry about the Danish, but I live in Denmark ;-)
>
> I had just run Linux? for 2 weeks so I am new into this. Printer + scanner +
> Webcam had I not been able to run yet. But still I have hope. Today I get
> the message from my online bank that it could not be run under Linux so that
> are a serious problem I get here.
>
> Have a nice day.
>
> Yours sincerely
>
> Svend Aage
>
> Web site: http://www.killscammers.org
> If you had been Scammed or other kind of Fraud or do you know some person
> who had been that. Then take a look at the?Web site.
>
> Free the world for Scammers. Do NOT pay them any money at all.
>
> "If at first you don't succeed, try, try, again. Then quit, no use being a
> damn fool about things." - Quote: W.C. Fields
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>


From barsnick at gmx.net  Thu Apr  1 19:10:52 2010
From: barsnick at gmx.net (Moritz Barsnick)
Date: Thu, 1 Apr 2010 19:10:52 +0200
Subject: [Linux-uvc-devel] OmniVision / I've screwed my system
In-Reply-To: <g2r59cf47a81003310309j14918d55v4b85a1985a4ed55e@mail.gmail.com>
References: <4BB1FF47.9080107@lordbah.com>
	<59cf47a81003300708s6924808ekb90e1fe220469da6@mail.gmail.com>
	<4BB22124.6030000@lordbah.com>
	<59cf47a81003301423w2d66d4fdsacb525e01e71b8fc@mail.gmail.com>
	<4BB27DA4.3090102@lordbah.com>
	<g2r59cf47a81003310309j14918d55v4b85a1985a4ed55e@mail.gmail.com>
Message-ID: <20100401171052.GB10356@sunshine.barsnick.net>

Hi,

On Wed, Mar 31, 2010 at 11:09:07 +0100, Paulo Assis wrote:
> change uvcvideo.conf in /etc/modprobe.d to
> options uvcvideo quirks=16 trace=255
> 
> sudo rmmod uvcvideo
> sudo modprobe uvcvideo

By the way, I believe you can do this during _runtime_ of the kernel
& module, without rmmod'ing:
echo 16 >/sys/module/uvcvideo/parameters/quirks
echo 255>/sys/module/uvcvideo/parameters/trace

Moritz


From lordbah at lordbah.com  Fri Apr  2 01:00:20 2010
From: lordbah at lordbah.com (Jeff Van Epps)
Date: Thu, 01 Apr 2010 19:00:20 -0400
Subject: [Linux-uvc-devel] OmniVision / I've screwed my system
In-Reply-To: <4BB32B10.9090407@lordbah.com>
References: <4BB1FF47.9080107@lordbah.com>		<59cf47a81003300708s6924808ekb90e1fe220469da6@mail.gmail.com>		<4BB22124.6030000@lordbah.com>		<59cf47a81003301423w2d66d4fdsacb525e01e71b8fc@mail.gmail.com>		<4BB27DA4.3090102@lordbah.com>	<g2r59cf47a81003310309j14918d55v4b85a1985a4ed55e@mail.gmail.com>
	<4BB32B10.9090407@lordbah.com>
Message-ID: <4BB52584.5090209@lordbah.com>

By changing some uvc_trace(UVC_TRACE_VIDEO.... to
uvc_trace(UVC_TRACE_IOCTL.... I was able to get out this message:

uvcvideo: No fast enough alt setting for requested bandwidth.

That gets printed the line before the return -EIO.

I had options trace=255 from earlier. Hunted a bit and figured I could
probably just set options trace=65535 to get UVC_TRACE_VIDEO to work
too. Yep, one of the calls whose param I didn't change came out this time:

uvcvideo: Device requested 5767680 B/frame bandwidth.

Doesn't seem to make any difference whether I leave quirks=16 in or
remove it.

What are "alt settings"?

Where can I go from here?




From pj.assis at gmail.com  Fri Apr  2 22:53:51 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Fri, 2 Apr 2010 21:53:51 +0100
Subject: [Linux-uvc-devel] OmniVision / I've screwed my system
In-Reply-To: <4BB52584.5090209@lordbah.com>
References: <4BB1FF47.9080107@lordbah.com>
	<59cf47a81003300708s6924808ekb90e1fe220469da6@mail.gmail.com>
	<4BB22124.6030000@lordbah.com>
	<59cf47a81003301423w2d66d4fdsacb525e01e71b8fc@mail.gmail.com>
	<4BB27DA4.3090102@lordbah.com>
	<g2r59cf47a81003310309j14918d55v4b85a1985a4ed55e@mail.gmail.com>
	<4BB32B10.9090407@lordbah.com> <4BB52584.5090209@lordbah.com>
Message-ID: <r2r59cf47a81004021353sbe0e5c2bt18483bb19217832b@mail.gmail.com>

Jeff Hi,

2010/4/2 Jeff Van Epps <lordbah at lordbah.com>:
> By changing some uvc_trace(UVC_TRACE_VIDEO.... to
> uvc_trace(UVC_TRACE_IOCTL.... I was able to get out this message:
>
> uvcvideo: No fast enough alt setting for requested bandwidth.

Humm, there is also a bandwidth quirk, this was added for some vimicro
cameras that set this wrong.

try quirks=128 instead of quirks=16

see if that helps,

Best regards,
Paulo




>
> That gets printed the line before the return -EIO.
>
> I had options trace=255 from earlier. Hunted a bit and figured I could
> probably just set options trace=65535 to get UVC_TRACE_VIDEO to work
> too. Yep, one of the calls whose param I didn't change came out this time:
>
> uvcvideo: Device requested 5767680 B/frame bandwidth.
>
> Doesn't seem to make any difference whether I leave quirks=16 in or
> remove it.
>
> What are "alt settings"?
>
> Where can I go from here?
>
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From lordbah at lordbah.com  Sat Apr  3 00:27:48 2010
From: lordbah at lordbah.com (Jeff Van Epps)
Date: Fri, 02 Apr 2010 18:27:48 -0400
Subject: [Linux-uvc-devel] OmniVision / I've screwed my system
In-Reply-To: <r2r59cf47a81004021353sbe0e5c2bt18483bb19217832b@mail.gmail.com>
References: <4BB1FF47.9080107@lordbah.com>	
	<59cf47a81003300708s6924808ekb90e1fe220469da6@mail.gmail.com>	
	<4BB22124.6030000@lordbah.com>	
	<59cf47a81003301423w2d66d4fdsacb525e01e71b8fc@mail.gmail.com>	
	<4BB27DA4.3090102@lordbah.com>	
	<g2r59cf47a81003310309j14918d55v4b85a1985a4ed55e@mail.gmail.com>	
	<4BB32B10.9090407@lordbah.com> <4BB52584.5090209@lordbah.com>
	<r2r59cf47a81004021353sbe0e5c2bt18483bb19217832b@mail.gmail.com>
Message-ID: <4BB66F64.8030001@lordbah.com>

I am embarrassed. There WAS an external USB hub being used. I must have
traced the wrong cable earlier. I moved the cable to a port on the back
of the computer and rebooted.

That first reboot, /dev/video0 didn't get created. After an unload,
modprobe, it did.

Now the camera works with luvcview and cheese, with many more options
for format, resolution, and frame rate than it was offering before.

Thanks for the help!




From jose.mingorance at gmail.com  Sun Apr  4 23:44:49 2010
From: jose.mingorance at gmail.com (Jose Francisco Mingorance Puga)
Date: Sun, 4 Apr 2010 23:44:49 +0200
Subject: [Linux-uvc-devel] New camera
Message-ID: <v2me57422af1004041444sd2bc9809v926c92151d1648fd@mail.gmail.com>

Hello guys,

I am an engineer trying to implement the driver for a new camera which is
not currently supported.

However, I find out that there is a lack of information about how to proceed
and which are the steps and "interfaces" to implement.

I have spent some hours reading the mailing lists, and inspecting the whole
source code, but, where to begin ? I know the protocol of the camera and how
to communicate with it, I just need some help about what to do to begin
working on it.

Thanks in advance.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100404/07aad7d1/attachment.html>

From pj.assis at gmail.com  Mon Apr  5 10:36:35 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Mon, 5 Apr 2010 09:36:35 +0100
Subject: [Linux-uvc-devel] New camera
In-Reply-To: <v2me57422af1004041444sd2bc9809v926c92151d1648fd@mail.gmail.com>
References: <v2me57422af1004041444sd2bc9809v926c92151d1648fd@mail.gmail.com>
Message-ID: <s2g59cf47a81004050136m9f574a8cxd8c8b4e029a6b3f5@mail.gmail.com>

Have you read the linuxtv v4l2 wiki ?

http://www.linuxtv.org/wiki/index.php/Main_Page
http://www.linuxtv.org/wiki/index.php/Anatomy_of_a_V4L_driver
http://www.linuxtv.org/wiki/index.php/Development:_How_to_add_support_for_a_device
http://www.linuxtv.org/wiki/index.php/Development:_How_to_develop_drivers_for_USB_based_devices

Best regards,
Paulo

2010/4/4 Jose Francisco Mingorance Puga <jose.mingorance at gmail.com>:
> Hello guys,
> I am an engineer trying to implement the driver for a new camera which is
> not currently supported.
> However, I find out that there is a lack of information about how to proceed
> and which are the steps and "interfaces" to implement.
> I have spent some hours reading the mailing lists, and inspecting the whole
> source code, but, where to begin ? I know the protocol of the camera and how
> to communicate with it, I just need some help about what to do to begin
> working on it.
> Thanks in advance.
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>


From miloody at gmail.com  Mon Apr  5 18:41:21 2010
From: miloody at gmail.com (loody)
Date: Tue, 6 Apr 2010 00:41:21 +0800
Subject: [Linux-uvc-devel] some questions about uvc
In-Reply-To: <201003180849.09038.laurent.pinchart@ideasonboard.com>
References: <3a665c761003110828r204d3218sa1998e4a6ba828de@mail.gmail.com>
	<201003180849.09038.laurent.pinchart@ideasonboard.com>
Message-ID: <v2l3a665c761004050941we709745blcc93eae6ceec30cc@mail.gmail.com>

hi Laurent:
thanks for your kind reply :)
>> Dear all:
>> I try to fix the uvc driver on my mips platform.
>> But I got the messages as I append at the end of letter, the messages
>> are triggered by capture.c the sample c code at the official website.
>> I have some questions:
>> 1. why the uvc resend the urb in uvc_video_complete?
>
> Because the USB core doesn't resubmit URBs automatically. If the driver didn't
> do it there, it would only receive a few URBs (currently hardcoded to 5 in the
> driver) and then stop.
I find the place where you mention and it seems we use a recursive
method to send urbs in UVC, right?

>
>> 2. from the log, it seems uvc keep catching when the VIDIOC_STREAMON
>> passed from v4l2 to uvc.
>
> I'm not sure to get what you mean.
>
>> 3. if the answer of 1 is yes; what will uvc does when he get
>> VIDIOC_QBUF and VIDIOC_DQBUF ?
>> ? ? ( in my opinion, uvc should starting catpureing when he receives
>> VIDIOC_QBUF and stop when the buffer is full. Then it pass the buffer
>> above when he got VIDIOC_DQBUF. But from the log below, it start
>> captureing when he got VIDIOC_STREAMON. Am i right?)
>
> THe driver instructs the device to start sending data when it receives
> VIDIOC_STREAMON. If there's no buffer queued the data will just be discarded.
>
>> 4. if my assumption above is correct, uvc start capture at
>> VIDIOC_DQBUF and stop when buffer full. it should stop capture when
>> frame complete in the log appears.
>
> It could, but just discarding the data is enough.
>
>> VIDIOC_STREAMON
>> uvcvideo: Failed to resubmit video URB (-38).
>> uvcvideo: Failed to resubmit video URB (-38).
>
> -38 is -ENOSYS, and that error is returned by very few USB host controller
> drivers. Which controller are you using on your platform ? Chances are you
> might need to fix it.
EHCI controller and I am wondering whether the error comes from my slowly cpu.
My cpu is running at 400Mhz

>
>> uvcvideo: Frame complete (overflow).
>> uvcvideo: Dropping payload (out of sync).
>> uvcvideo: Dropping payload (out of sync).
>> uvcvideo: Dropping payload (out of sync).
>> uvcvideo: Dropping payload (out of sync).
>> uvcvideo: Dropping payload (out of sync).
>
BTW, if I look at the correct place in the driver, why uvc doesn't
support r/w io and userptr?
thanks for your kind help,
miloody


From franz.trierweiler.ingenieur at gmail.com  Tue Apr  6 14:10:27 2010
From: franz.trierweiler.ingenieur at gmail.com (Franz TRIERWEILER)
Date: Tue, 6 Apr 2010 14:10:27 +0200
Subject: [Linux-uvc-devel] uvcvideo: Failed to submit URB 0 (-28) on ARM
	target.
Message-ID: <t2xab3b44701004060510y70ea0cdch8581aefe92a50ee6@mail.gmail.com>

Hello,

I am trying to make jpeg/png still encoded picture from a uvcvideo
compatible webcam with gstreamer. I do this on a Freescale iMX25 evalboard
featuring support for the uvcvideo driver.

I configured the gstreamer package and v4l2 / uvc support properly through
LTIB.

My webcam is officialy supported (0c45:62c0) by the Linux UVC driver.
indeed, here is what I get when plugging the device:

usb 1-1.5: new full speed USB device using fsl-ehci and address 5
usb 1-1.5: not running at top speed; connect to a high speed hub
usb 1-1.5: New USB device found, idVendor=0c45, idProduct=62c0
usb 1-1.5: New USB device strings: Mfr=2, Product=1, SerialNumber=0
usb 1-1.5: Product: USB 2.0 Camera
usb 1-1.5: Manufacturer: Sonix Technology Co., Ltd.
usb 1-1.5: configuration #1 chosen from 1 choice
uvcvideo: Found UVC 1.00 device USB 2.0 Camera (0c45:62c0)
input: USB 2.0 Camera as /class/input/input3



When i just try to launch the following command, then I get the following
error:

gst-launch-0.10 v4l2src

Setting pipeline to PAUSED ...
*uvcvideo: Failed to submit URB 0 (-28). *
Pipeline is live and does not need PREROLL ...
ERROR: from element /GstPipeline:pipeline0/GstV4l2Src:v4l2src0: Error
starting .
Additional debug info:
gstv4l2object.c(1886): gst_v4l2_object_start_streaming ():
/GstPipeline:pipelin:
*system error: No space left on device *
ERROR: pipeline doesn't want to preroll.
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
Setting pipeline to NULL ...
Freeing pipeline ...

The error seems to come from the device/uvcvideo layer since this error
clearly relates to the driver endpoints.

My final goal is to submit such a command (with the right jpeg/png encoder):
gst-launch-0.10 v4l2src ! pngenc ! filesink location=test.png

Were there recent fixes to the uvcdriver (which Freescale did not report)?
My driver version is *0.1.0*. I read this in the uvc_driver.c file (from
/linux/drivers/media/video/uvc) provided with my evalboard BSP.

I noticed that what I want to do works fine on Ubuntu 09.04 (the kernel
features the uvcvideo). If I type modinfo
/lib/modules/2.6.28-11-generic/kernel/drivers/media/video/uvc/uvcvideo.ko I
get the following driver version:

filename:
/lib/modules/2.6.28-11-generic/kernel/drivers/media/video/uvc/uvcvideo.ko
version:        *v0.1.0*
license:        GPL

Thus I guess that Freescale BSP uses the same driver version as Ubuntu 09.04
does.

If required I can send more information to help solve this issue.

Best Regards,
Franz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100406/f7bb0bc6/attachment.html>

From pj.assis at gmail.com  Tue Apr  6 14:44:05 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Tue, 6 Apr 2010 13:44:05 +0100
Subject: [Linux-uvc-devel] uvcvideo: Failed to submit URB 0 (-28) on ARM
	target.
In-Reply-To: <t2xab3b44701004060510y70ea0cdch8581aefe92a50ee6@mail.gmail.com>
References: <t2xab3b44701004060510y70ea0cdch8581aefe92a50ee6@mail.gmail.com>
Message-ID: <h2y59cf47a81004060544s4b90fa47v6f90f6a0452c338f@mail.gmail.com>

Franz Hi,

2010/4/6 Franz TRIERWEILER <franz.trierweiler.ingenieur at gmail.com>:
> Hello,
>
> I am trying to make jpeg/png still encoded picture from a uvcvideo
> compatible webcam with gstreamer. I do this on a Freescale iMX25 evalboard
> featuring support for the uvcvideo driver.
>
> I configured the gstreamer package and v4l2 / uvc support properly through
> LTIB.
>
> My webcam is officialy supported (0c45:62c0) by the Linux UVC driver.
> indeed, here is what I get when plugging the device:
>
> usb 1-1.5: new full speed USB device using fsl-ehci and address 5
> usb 1-1.5: not running at top speed; connect to a high speed hub
> usb 1-1.5: New USB device found, idVendor=0c45, idProduct=62c0
> usb 1-1.5: New USB device strings: Mfr=2, Product=1, SerialNumber=0
> usb 1-1.5: Product: USB 2.0 Camera
> usb 1-1.5: Manufacturer: Sonix Technology Co., Ltd.
> usb 1-1.5: configuration #1 chosen from 1 choice
> uvcvideo: Found UVC 1.00 device USB 2.0 Camera (0c45:62c0)
> input: USB 2.0 Camera as /class/input/input3
>

Everything looks good here.


>
>
> When i just try to launch the following command, then I get the following
> error:
>
> gst-launch-0.10 v4l2src
>
> Setting pipeline to PAUSED ...
> uvcvideo: Failed to submit URB 0 (-28).
> Pipeline is live and does not need PREROLL ...
> ERROR: from element /GstPipeline:pipeline0/GstV4l2Src:v4l2src0: Error
> starting .
> Additional debug info:
> gstv4l2object.c(1886): gst_v4l2_object_start_streaming ():
> /GstPipeline:pipelin:
> system error: No space left on device

This looks like a bandwidth issue, I get a similar error if I try to
open two or three devices at the same time and the request bandwidth
is too much for the usb pipe to handle.

Are you using a usb1 or usb2 port?
Most of these ARM boards use have usb1 ports, so you can't use the
full camera capabilities (resolution/fps).


> ERROR: pipeline doesn't want to preroll.
> Setting pipeline to PAUSED ...
> Setting pipeline to READY ...
> Setting pipeline to NULL ...
> Freeing pipeline ...
>
> The error seems to come from the device/uvcvideo layer since this error
> clearly relates to the driver endpoints.
>
> My final goal is to submit such a command (with the right jpeg/png encoder):
> gst-launch-0.10 v4l2src ! pngenc ! filesink location=test.png
>
> Were there recent fixes to the uvcdriver (which Freescale did not report)?
> My driver version is 0.1.0. I read this in the uvc_driver.c file (from
> /linux/drivers/media/video/uvc) provided with my evalboard BSP.
>
> I noticed that what I want to do works fine on Ubuntu 09.04 (the kernel

Maybe you are using a usb2 port here ?


> features the uvcvideo). If I type modinfo
> /lib/modules/2.6.28-11-generic/kernel/drivers/media/video/uvc/uvcvideo.ko I
> get the following driver version:
>

Don't believe the reported uvc version, use the kernel version
instead, uvc is built-in the kernel since 2.6.27


> filename:
> /lib/modules/2.6.28-11-generic/kernel/drivers/media/video/uvc/uvcvideo.ko
> version:??????? v0.1.0
> license:??????? GPL
>
> Thus I guess that Freescale BSP uses the same driver version as Ubuntu 09.04
> does.
>
> If required I can send more information to help solve this issue.
>
> Best Regards,
> Franz
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>


From pj.assis at gmail.com  Tue Apr  6 17:04:43 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Tue, 6 Apr 2010 16:04:43 +0100
Subject: [Linux-uvc-devel] uvcvideo: Failed to submit URB 0 (-28) on ARM
	target.
In-Reply-To: <z2yab3b44701004060743t217b91dbuc75762947242bc51@mail.gmail.com>
References: <t2xab3b44701004060510y70ea0cdch8581aefe92a50ee6@mail.gmail.com>
	<h2y59cf47a81004060544s4b90fa47v6f90f6a0452c338f@mail.gmail.com>
	<z2yab3b44701004060743t217b91dbuc75762947242bc51@mail.gmail.com>
Message-ID: <m2i59cf47a81004060804laa696d97m10687629a2a20e62@mail.gmail.com>

Hi,

2010/4/6 Franz TRIERWEILER <franz.trierweiler.ingenieur at gmail.com>:
> Hi Paulo,
>
> First many thanks for your answer.
>
> I have doubts about using Usb1 ou Usb2 port... I asked Freescal in order to
> make sure but according to the IMX datasheet, it is a USB 2.0 port.
>
> What annoys me is that I read: "usb 1-1: not running at top speed; connect
> to a high speed hub" and I do not know how to understand this.
>
> usb 1-1: not running at top speed; connect to a high speed hub
> usb 1-1: New USB device found, idVendor=0c45, idProduct=62c0
> usb 1-1: New USB device strings: Mfr=2, Product=1, SerialNumber=0
> usb 1-1: Product: USB 2.0 Camera
> usb 1-1: Manufacturer: Sonix Technology Co., Ltd.
> usb 1-1: configuration #1 chosen from 1 choice
> uvcvideo: Found UVC 1.00 device USB 2.0 Camera (0c45:62c0)
> input: USB 2.0 Camera as /class/input/input2
>

That's definitely a usb1.1 connection (full speed) since the camera
device is usb2 (high speed) you get that type of message.


> If it is not a USB 2.0 port, is there a way through gst-launch to reduce the
> image resolution ?
>

I don't think resolution is the only issue here.
Usually uvc devices support two types of video stream, compressed MJPG
or/and uncompressed YUYV, when connected to a slower usb port they
just drop the uncompressed format and support MJPG only and at lower
fps/resolutions.
I've actually never tried a YUYV camera only on a usb1 port so I'm not
sure how this is handled in that case, but most likely it will drop
support for higher resolutions.

GStreamer I think defaults to yuv so you should also try setting the
input format to MJPG, e.g.:

gst-launch v4l2src ! image/jpeg,width=320,framerate=15/1,rate=15

You can use guvcview or luvcview to check out available formats and
resolutions for the camera in the ARM platform.

Best regards,
Paulo


From R.E.Wolff at BitWizard.nl  Wed Apr  7 08:05:18 2010
From: R.E.Wolff at BitWizard.nl (Rogier Wolff)
Date: Wed, 7 Apr 2010 08:05:18 +0200
Subject: [Linux-uvc-devel] uvcvideo: Failed to submit URB 0 (-28) on ARM
	target.
In-Reply-To: <m2i59cf47a81004060804laa696d97m10687629a2a20e62@mail.gmail.com>
References: <t2xab3b44701004060510y70ea0cdch8581aefe92a50ee6@mail.gmail.com>
	<h2y59cf47a81004060544s4b90fa47v6f90f6a0452c338f@mail.gmail.com>
	<z2yab3b44701004060743t217b91dbuc75762947242bc51@mail.gmail.com>
	<m2i59cf47a81004060804laa696d97m10687629a2a20e62@mail.gmail.com>
Message-ID: <20100407060518.GA20243@bitwizard.nl>

On Tue, Apr 06, 2010 at 04:04:43PM +0100, Paulo Assis wrote:
> 2010/4/6 Franz TRIERWEILER <franz.trierweiler.ingenieur at gmail.com>:
> > Hi Paulo,
> >
> > First many thanks for your answer.
> >
> > I have doubts about using Usb1 ou Usb2 port... I asked Freescal in order to
> > make sure but according to the IMX datasheet, it is a USB 2.0 port.


What may be confusing to you is the following: To reduce consumer 
confusion, the USB committee made the USB-2.0 spec such that all
existing 1.1 compliant devices would be USB-2.0 compatible without
any change. So these devices can be called USB-2.0 compliant too!

So, while USB-1.1 specifies two speeds, which the device may or may
not suspport, USB-2.0 specifies three speeds, which the device may or
may not support..... Something being USB-2.0 OFFICIALLY means you
should ask the question: "But does it support USB-high-speed?", and
when you get the answer: "No, it supports USB-FULL-speed", you have to
know that FULL speed is only 12 Mbps, and nothing close to the full
speed of USB-2.0, which is 480 Mbps.....

Confused? Good! It means you've been paying attention.

	Roger. 

-- 
** R.E.Wolff at BitWizard.nl ** http://www.BitWizard.nl/ ** +31-15-2600998 **
**    Delftechpark 26 2628 XH  Delft, The Netherlands. KVK: 27239233    **
*-- BitWizard writes Linux device drivers for any device you may have! --*
Q: It doesn't work. A: Look buddy, doesn't work is an ambiguous statement. 
Does it sit on the couch all day? Is it unemployed? Please be specific! 
Define 'it' and what it isn't doing. --------- Adapted from lxrbot FAQ


From hardware at ee.ccny.cuny.edu  Thu Apr  8 15:13:43 2010
From: hardware at ee.ccny.cuny.edu (Kurt Rosenfeld)
Date: Thu, 8 Apr 2010 09:13:43 -0400
Subject: [Linux-uvc-devel] Lenovo T510 camera works
Message-ID: <20100408131343.GB21801@eesfc3.engr.ccny.cuny.edu>

Hello,

The UVC camera in the Lenovo T510 works if this small modification is
made to uvc_driver.c:
http://w140.com/kurt/lenovo_t510_linux_uvc_camera.html

-kurt


From sansegu at hotmail.com  Thu Apr  8 18:12:30 2010
From: sansegu at hotmail.com (Santiago Segura)
Date: Thu, 8 Apr 2010 18:12:30 +0200
Subject: [Linux-uvc-devel] ViMicro Webcam 0ac8:3420 bug+fix
Message-ID: <BAY112-W24692F24957FA8F3E764F1B7160@phx.gbl>


Hello,



working with the same camera (ID 0ac8:3420 Z-Star Microelectronics Corp), I'm not able to acquire images in mjpeg format.



Reading this post it seems that its possible, once the patch is applied.

I'm working with the latest release of the uvc video driver (uvcvideo-553dfd853cba).

Comparing the source code, it seems that the patch is effectively applied, but not results.

Querying the capabilities of the webcam, only YUV its available.



There is any workaroud about this?



Regards,

Sansegu.




 		 	   		  
_________________________________________________________________
Aprende los trucos de Windows 7 con la gente que ya lo han probado Windows 7.
http://www.sietesunpueblodeexpertos.com/index_windows7.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100408/2272183f/attachment.html>

From ian.latter at midnightcode.org  Fri Apr  9 12:40:41 2010
From: ian.latter at midnightcode.org (Ian Latter)
Date: Fri, 09 Apr 2010 20:40:41 +1000
Subject: [Linux-uvc-devel] 16MP or 1.3MP?
Message-ID: <201004090940.o399ef2W003932@singularity.tronunltd.com>

Hello,


  Its a been a long time since I was last working with UVC, 
but I found a camera that I couldn't resist, and you're in the
mainline kernel now .. and I'd like to do some aerial photos 
from my embedded platform ..

  You have a 093a:2700 device listed on your site as 
working (and my testing confirms this);

    http://linux-uvc.berlios.de/
    093a:2700  	
        - iSonic W002
        - A4Tech PK-635K
        - Digital Innovations 1.3MP Webcam 
        --> Pixart Imaging 	

  Confirmed in Fedora 12 (kernel 2.6.31 - dmesg output);
    usb 1-1: new high speed USB device using ehci_hcd 
    and address 27
    usb 1-1: New USB device found, idVendor=093a, 
    idProduct=2700
    usb 1-1: New USB device strings: Mfr=16, Product=96, 
    SerialNumber=0
    usb 1-1: Product: USB2.0_Camera
    usb 1-1: Manufacturer: PixArt Imaging Inc.
    usb 1-1: configuration #1 chosen from 1 choice
    Linux video capture interface: v2.00
    uvcvideo: Found UVC 1.00 device USB2.0_Camera 
    (093a:2700)
    input: USB2.0_Camera as /devices/pci0000:00/0000:
    00:02.1/usb1/1-1/1-1:1.0/input/input6
    usbcore: registered new interface driver uvcvideo
    USB Video Class driver (v0.1.0)
    ALSA sound/usb/usbaudio.c:1300: current rate 
    6292992 is different from the runtime rate 16000
    ALSA sound/usb/usbaudio.c:1300: current rate 34560 
    is different from the runtime rate 48000
    usbcore: registered new interface driver snd-usb-audio
    ALSA sound/usb/usbaudio.c:1300: current rate 33024 
    is different from the runtime rate 48000
    ALSA sound/usb/usbaudio.c:1300: current rate 33280 
    is different from the runtime rate 48000


  luvcview output looks okay (save that massive fraction);
    # ./luvcview -L
    luvcview version 0.2.1 
    Video driver: x11
    A window manager is available
    video /dev/video0 
    /dev/video0 does not support read i/o
    { pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
    { discrete: width = 640, height = 480 }
        Time interval between frame: 1/30, 1/20, 1/15, 1/10, 
        1/5, 1/1, 
    { discrete: width = 320, height = 240 }
        Time interval between frame: 1/30, 1/20, 1/15, 1/10, 
        1589/15625, 1/1, 
    { discrete: width = 160, height = 120 }
        Time interval between frame: 1/30, 1/20, 1/15, 1/10, 
        1589/15625, 1/1, 
    { discrete: width = 176, height = 144 }
        Time interval between frame: 1/30, 1/20, 1/15, 1/10, 
        1589/15625, 1/1, 
    { discrete: width = 352, height = 288 }
        Time interval between frame: 1/30, 1/20, 1/15, 1/10, 
        1589/15625, 1/1, 


And I can see my ugly mug at 640x480 via the native 
"Cheese Webcam Booth" app - no magic required.  Nice.


The issue that I have is that this camera is sold as a 16
(well, 16.0) mega-pixel camera;

    Speed 16.0Mega Pixel USB2.0 Webcam S4850v
    https://www.pcdiy.com.au/product_info.php?products_id=9757

    TECHNICAL SPECIFICATION
      - Speed 16.0Mega Pixel USB2.0 Webcam
      - Effective Static Pixels 16 Mega Pixel
      - Maximum Resolution : 4608 x 3456
      - Output Format: YUY2
      - Max Frame Rate: 30fps
      - USB 2.0 compatible
      - White balance: Auto
      - Auto Exposure ( AE ): Auto


  While I understand that I would get 16MP in a photo, 
I don't see the option to take a photo greater than 
640x480 (the 1.3MP that is reported on the linux-uvc
compatibility chart).

  Any thoughts on how to poke this device to get the 
higher resolutions?  Or is it possible that they're going 
outside of UVC (to something proprietary) to get those
resolutions?  Or are they doing something bodgy in
the win32 software by collating 16 to 32 frames of 1.3MP
shots to "assemble" a 16MP image?

  I'm confident that my reseller is above board - the 
specifications on that site match those on the back of
the product's packaging.  I obviously can't speak for
the whole-saler or upstream there-after ..  

  lsusb -v output is attached and is consistent with 
luvcview output.

  The device does not have an external power option.


Thanks for your help,





--
Ian Latter
Late night coder ..
http://midnightcode.org/
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: lsusb.txt
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100409/af1c174c/attachment.txt>

From pj.assis at gmail.com  Fri Apr  9 13:15:25 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Fri, 9 Apr 2010 12:15:25 +0100
Subject: [Linux-uvc-devel] 16MP or 1.3MP?
In-Reply-To: <201004090940.o399ef2W003932@singularity.tronunltd.com>
References: <201004090940.o399ef2W003932@singularity.tronunltd.com>
Message-ID: <j2g59cf47a81004090415pe24e5844wdea8398089fba95@mail.gmail.com>

Hi,
>From your lsusb output the camera max resolution is 640x480 (even for
still image)
If you can get an higher resolution in windows, I guess it's probably
trough some sort of interpolation technique.
I doubt however that the quality is any good.
It can also be that the camera uses some sort of "extra" proprietary
protocol, but if it does, it doesn't seem to reported .

Best Regards,
Paulo

2010/4/9 Ian Latter <ian.latter at midnightcode.org>:
> Hello,
>
>
> ?Its a been a long time since I was last working with UVC,
> but I found a camera that I couldn't resist, and you're in the
> mainline kernel now .. and I'd like to do some aerial photos
> from my embedded platform ..
>
> ?You have a 093a:2700 device listed on your site as
> working (and my testing confirms this);
>
> ? ?http://linux-uvc.berlios.de/
> ? ?093a:2700
> ? ? ? ?- iSonic W002
> ? ? ? ?- A4Tech PK-635K
> ? ? ? ?- Digital Innovations 1.3MP Webcam
> ? ? ? ?--> Pixart Imaging
>
> ?Confirmed in Fedora 12 (kernel 2.6.31 - dmesg output);
> ? ?usb 1-1: new high speed USB device using ehci_hcd
> ? ?and address 27
> ? ?usb 1-1: New USB device found, idVendor=093a,
> ? ?idProduct=2700
> ? ?usb 1-1: New USB device strings: Mfr=16, Product=96,
> ? ?SerialNumber=0
> ? ?usb 1-1: Product: USB2.0_Camera
> ? ?usb 1-1: Manufacturer: PixArt Imaging Inc.
> ? ?usb 1-1: configuration #1 chosen from 1 choice
> ? ?Linux video capture interface: v2.00
> ? ?uvcvideo: Found UVC 1.00 device USB2.0_Camera
> ? ?(093a:2700)
> ? ?input: USB2.0_Camera as /devices/pci0000:00/0000:
> ? ?00:02.1/usb1/1-1/1-1:1.0/input/input6
> ? ?usbcore: registered new interface driver uvcvideo
> ? ?USB Video Class driver (v0.1.0)
> ? ?ALSA sound/usb/usbaudio.c:1300: current rate
> ? ?6292992 is different from the runtime rate 16000
> ? ?ALSA sound/usb/usbaudio.c:1300: current rate 34560
> ? ?is different from the runtime rate 48000
> ? ?usbcore: registered new interface driver snd-usb-audio
> ? ?ALSA sound/usb/usbaudio.c:1300: current rate 33024
> ? ?is different from the runtime rate 48000
> ? ?ALSA sound/usb/usbaudio.c:1300: current rate 33280
> ? ?is different from the runtime rate 48000
>
>
> ?luvcview output looks okay (save that massive fraction);
> ? ?# ./luvcview -L
> ? ?luvcview version 0.2.1
> ? ?Video driver: x11
> ? ?A window manager is available
> ? ?video /dev/video0
> ? ?/dev/video0 does not support read i/o
> ? ?{ pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
> ? ?{ discrete: width = 640, height = 480 }
> ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
> ? ? ? ?1/5, 1/1,
> ? ?{ discrete: width = 320, height = 240 }
> ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
> ? ? ? ?1589/15625, 1/1,
> ? ?{ discrete: width = 160, height = 120 }
> ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
> ? ? ? ?1589/15625, 1/1,
> ? ?{ discrete: width = 176, height = 144 }
> ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
> ? ? ? ?1589/15625, 1/1,
> ? ?{ discrete: width = 352, height = 288 }
> ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
> ? ? ? ?1589/15625, 1/1,
>
>
> And I can see my ugly mug at 640x480 via the native
> "Cheese Webcam Booth" app - no magic required. ?Nice.
>
>
> The issue that I have is that this camera is sold as a 16
> (well, 16.0) mega-pixel camera;
>
> ? ?Speed 16.0Mega Pixel USB2.0 Webcam S4850v
> ? ?https://www.pcdiy.com.au/product_info.php?products_id=9757
>
> ? ?TECHNICAL SPECIFICATION
> ? ? ?- Speed 16.0Mega Pixel USB2.0 Webcam
> ? ? ?- Effective Static Pixels 16 Mega Pixel
> ? ? ?- Maximum Resolution : 4608 x 3456
> ? ? ?- Output Format: YUY2
> ? ? ?- Max Frame Rate: 30fps
> ? ? ?- USB 2.0 compatible
> ? ? ?- White balance: Auto
> ? ? ?- Auto Exposure ( AE ): Auto
>
>
> ?While I understand that I would get 16MP in a photo,
> I don't see the option to take a photo greater than
> 640x480 (the 1.3MP that is reported on the linux-uvc
> compatibility chart).
>
> ?Any thoughts on how to poke this device to get the
> higher resolutions? ?Or is it possible that they're going
> outside of UVC (to something proprietary) to get those
> resolutions? ?Or are they doing something bodgy in
> the win32 software by collating 16 to 32 frames of 1.3MP
> shots to "assemble" a 16MP image?
>
> ?I'm confident that my reseller is above board - the
> specifications on that site match those on the back of
> the product's packaging. ?I obviously can't speak for
> the whole-saler or upstream there-after ..
>
> ?lsusb -v output is attached and is consistent with
> luvcview output.
>
> ?The device does not have an external power option.
>
>
> Thanks for your help,
>
>
>
>
>
> --
> Ian Latter
> Late night coder ..
> http://midnightcode.org/
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>


From palmax at gmail.com  Fri Apr  9 13:25:12 2010
From: palmax at gmail.com (Palmax Maverick)
Date: Fri, 9 Apr 2010 13:25:12 +0200
Subject: [Linux-uvc-devel] Linux-uvc-devel Digest, Vol 46, Issue 9
In-Reply-To: <mailman.2579.1270809440.1291.linux-uvc-devel@lists.berlios.de>
References: <mailman.2579.1270809440.1291.linux-uvc-devel@lists.berlios.de>
Message-ID: <x2o209499a1004090425t9e0e5cccvbcebceac7039bc33@mail.gmail.com>

Hello there,

I want to speak about "Maximum Resolution : 4608 x 3456". I think that
it could get this huge resolution only as a Still Image.
You should remember that still image capture is not include in
linux-uvc (you may read it in http://linux-uvc.berlios.de/#status ).
But I'm studying Still Image for getting this feature to linux-uvc.

32$ is a too good price for a cool webcam... I don't know this manufacture.

If you buy it, you would send us its lsusb description for
understanding this device.


Good bye
Palmax

2010/4/9  <linux-uvc-devel-request at lists.berlios.de>:
> Send Linux-uvc-devel mailing list submissions to
> ? ? ? ?linux-uvc-devel at lists.berlios.de
>
> To subscribe or unsubscribe via the World Wide Web, visit
> ? ? ? ?https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> or, via email, send a message with subject or body 'help' to
> ? ? ? ?linux-uvc-devel-request at lists.berlios.de
>
> You can reach the person managing the list at
> ? ? ? ?linux-uvc-devel-owner at lists.berlios.de
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of Linux-uvc-devel digest..."
>
>
> Today's Topics:
>
> ? 1. 16MP or 1.3MP? (Ian Latter)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Fri, 09 Apr 2010 20:40:41 +1000
> From: "Ian Latter" <ian.latter at midnightcode.org>
> To: linux-uvc-devel at lists.berlios.de
> Subject: [Linux-uvc-devel] 16MP or 1.3MP?
> Message-ID: <201004090940.o399ef2W003932 at singularity.tronunltd.com>
> Content-Type: text/plain; charset="us-ascii"
>
> Hello,
>
>
> ?Its a been a long time since I was last working with UVC,
> but I found a camera that I couldn't resist, and you're in the
> mainline kernel now .. and I'd like to do some aerial photos
> from my embedded platform ..
>
> ?You have a 093a:2700 device listed on your site as
> working (and my testing confirms this);
>
> ? ?http://linux-uvc.berlios.de/
> ? ?093a:2700
> ? ? ? ?- iSonic W002
> ? ? ? ?- A4Tech PK-635K
> ? ? ? ?- Digital Innovations 1.3MP Webcam
> ? ? ? ?--> Pixart Imaging
>
> ?Confirmed in Fedora 12 (kernel 2.6.31 - dmesg output);
> ? ?usb 1-1: new high speed USB device using ehci_hcd
> ? ?and address 27
> ? ?usb 1-1: New USB device found, idVendor=093a,
> ? ?idProduct=2700
> ? ?usb 1-1: New USB device strings: Mfr=16, Product=96,
> ? ?SerialNumber=0
> ? ?usb 1-1: Product: USB2.0_Camera
> ? ?usb 1-1: Manufacturer: PixArt Imaging Inc.
> ? ?usb 1-1: configuration #1 chosen from 1 choice
> ? ?Linux video capture interface: v2.00
> ? ?uvcvideo: Found UVC 1.00 device USB2.0_Camera
> ? ?(093a:2700)
> ? ?input: USB2.0_Camera as /devices/pci0000:00/0000:
> ? ?00:02.1/usb1/1-1/1-1:1.0/input/input6
> ? ?usbcore: registered new interface driver uvcvideo
> ? ?USB Video Class driver (v0.1.0)
> ? ?ALSA sound/usb/usbaudio.c:1300: current rate
> ? ?6292992 is different from the runtime rate 16000
> ? ?ALSA sound/usb/usbaudio.c:1300: current rate 34560
> ? ?is different from the runtime rate 48000
> ? ?usbcore: registered new interface driver snd-usb-audio
> ? ?ALSA sound/usb/usbaudio.c:1300: current rate 33024
> ? ?is different from the runtime rate 48000
> ? ?ALSA sound/usb/usbaudio.c:1300: current rate 33280
> ? ?is different from the runtime rate 48000
>
>
> ?luvcview output looks okay (save that massive fraction);
> ? ?# ./luvcview -L
> ? ?luvcview version 0.2.1
> ? ?Video driver: x11
> ? ?A window manager is available
> ? ?video /dev/video0
> ? ?/dev/video0 does not support read i/o
> ? ?{ pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
> ? ?{ discrete: width = 640, height = 480 }
> ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
> ? ? ? ?1/5, 1/1,
> ? ?{ discrete: width = 320, height = 240 }
> ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
> ? ? ? ?1589/15625, 1/1,
> ? ?{ discrete: width = 160, height = 120 }
> ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
> ? ? ? ?1589/15625, 1/1,
> ? ?{ discrete: width = 176, height = 144 }
> ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
> ? ? ? ?1589/15625, 1/1,
> ? ?{ discrete: width = 352, height = 288 }
> ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
> ? ? ? ?1589/15625, 1/1,
>
>
> And I can see my ugly mug at 640x480 via the native
> "Cheese Webcam Booth" app - no magic required. ?Nice.
>
>
> The issue that I have is that this camera is sold as a 16
> (well, 16.0) mega-pixel camera;
>
> ? ?Speed 16.0Mega Pixel USB2.0 Webcam S4850v
> ? ?https://www.pcdiy.com.au/product_info.php?products_id=9757
>
> ? ?TECHNICAL SPECIFICATION
> ? ? ?- Speed 16.0Mega Pixel USB2.0 Webcam
> ? ? ?- Effective Static Pixels 16 Mega Pixel
> ? ? ?- Maximum Resolution : 4608 x 3456
> ? ? ?- Output Format: YUY2
> ? ? ?- Max Frame Rate: 30fps
> ? ? ?- USB 2.0 compatible
> ? ? ?- White balance: Auto
> ? ? ?- Auto Exposure ( AE ): Auto
>
>
> ?While I understand that I would get 16MP in a photo,
> I don't see the option to take a photo greater than
> 640x480 (the 1.3MP that is reported on the linux-uvc
> compatibility chart).
>
> ?Any thoughts on how to poke this device to get the
> higher resolutions? ?Or is it possible that they're going
> outside of UVC (to something proprietary) to get those
> resolutions? ?Or are they doing something bodgy in
> the win32 software by collating 16 to 32 frames of 1.3MP
> shots to "assemble" a 16MP image?
>
> ?I'm confident that my reseller is above board - the
> specifications on that site match those on the back of
> the product's packaging. ?I obviously can't speak for
> the whole-saler or upstream there-after ..
>
> ?lsusb -v output is attached and is consistent with
> luvcview output.
>
> ?The device does not have an external power option.
>
>
> Thanks for your help,
>
>
>
>
>
> --
> Ian Latter
> Late night coder ..
> http://midnightcode.org/
> -------------- next part --------------
> An embedded and charset-unspecified text was scrubbed...
> Name: lsusb.txt
> URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100409/af1c174c/attachment.txt>
>
> ------------------------------
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>
> End of Linux-uvc-devel Digest, Vol 46, Issue 9
> **********************************************
>


From ian.latter at midnightcode.org  Sat Apr 10 05:14:57 2010
From: ian.latter at midnightcode.org (Ian Latter)
Date: Sat, 10 Apr 2010 13:14:57 +1000
Subject: [Linux-uvc-devel] 16MP or 1.3MP?
Message-ID: <201004100214.o3A2Evl7008718@singularity.tronunltd.com>

Hello Paulo,


  Out of the 15-or-so computers that I own none of them
run Windows, so I can't actually test it in Windows here.  
I'll send it round to a mates place and see what he makes
of it - and I'll try and get a "high res" sample up on a web
server somewhere.

  This morning I did a quick search for specifications, and
which-ever sensor chip is inside it, it can't be good;
 
http://www.pixart.com.tw/productsditel.asp?ToPage=1&productclassify_id=8

  The max spec there is for a 640x480 sensor - so it 
must be Win32 application magic - which, I agree, must
make an output image that is as fuzzy as foobar ...


Thanks, 

----- Original Message -----
>From: "Paulo Assis" <pj.assis at gmail.com>
>To: "Ian Latter" <ian.latter at midnightcode.org>
>Subject:  Re: [Linux-uvc-devel] 16MP or 1.3MP?
>Date: Fri, 09 Apr 2010 12:15:25 +0100
>
> Hi,
> From your lsusb output the camera max resolution is
640x480 (even for
> still image)
> If you can get an higher resolution in windows, I guess
it's probably
> trough some sort of interpolation technique.
> I doubt however that the quality is any good.
> It can also be that the camera uses some sort of "extra"
proprietary
> protocol, but if it does, it doesn't seem to reported .
> 
> Best Regards,
> Paulo
> 
> 2010/4/9 Ian Latter <ian.latter at midnightcode.org>:
> > Hello,
> >
> >
> > ???Its a been a long time since I was last working with UVC,
> > but I found a camera that I couldn't resist, and you're
in the
> > mainline kernel now .. and I'd like to do some aerial photos
> > from my embedded platform ..
> >
> > ???You have a 093a:2700 device listed on your site as
> > working (and my testing confirms this);
> >
> > ??? ???http://linux-uvc.berlios.de/
> > ??? ???093a:2700
> > ??? ??? ??? ???- iSonic W002
> > ??? ??? ??? ???- A4Tech PK-635K
> > ??? ??? ??? ???- Digital Innovations 1.3MP Webcam
> > ??? ??? ??? ???--> Pixart Imaging
> >
> > ???Confirmed in Fedora 12 (kernel 2.6.31 - dmesg output);
> > ??? ???usb 1-1: new high speed USB device using ehci_hcd
> > ??? ???and address 27
> > ??? ???usb 1-1: New USB device found, idVendor=093a,
> > ??? ???idProduct=2700
> > ??? ???usb 1-1: New USB device strings: Mfr=16, Product=96,
> > ??? ???SerialNumber=0
> > ??? ???usb 1-1: Product: USB2.0_Camera
> > ??? ???usb 1-1: Manufacturer: PixArt Imaging Inc.
> > ??? ???usb 1-1: configuration #1 chosen from 1 choice
> > ??? ???Linux video capture interface: v2.00
> > ??? ???uvcvideo: Found UVC 1.00 device USB2.0_Camera
> > ??? ???(093a:2700)
> > ??? ???input: USB2.0_Camera as /devices/pci0000:00/0000:
> > ??? ???00:02.1/usb1/1-1/1-1:1.0/input/input6
> > ??? ???usbcore: registered new interface driver uvcvideo
> > ??? ???USB Video Class driver (v0.1.0)
> > ??? ???ALSA sound/usb/usbaudio.c:1300: current rate
> > ??? ???6292992 is different from the runtime rate 16000
> > ??? ???ALSA sound/usb/usbaudio.c:1300: current rate 34560
> > ??? ???is different from the runtime rate 48000
> > ??? ???usbcore: registered new interface driver snd-usb-audio
> > ??? ???ALSA sound/usb/usbaudio.c:1300: current rate 33024
> > ??? ???is different from the runtime rate 48000
> > ??? ???ALSA sound/usb/usbaudio.c:1300: current rate 33280
> > ??? ???is different from the runtime rate 48000
> >
> >
> > ???luvcview output looks okay (save that massive fraction);
> > ??? ???# ./luvcview -L
> > ??? ???luvcview version 0.2.1
> > ??? ???Video driver: x11
> > ??? ???A window manager is available
> > ??? ???video /dev/video0
> > ??? ???/dev/video0 does not support read i/o
> > ??? ???{ pixelformat = 'YUYV', description = 'YUV 4:2:2
(YUYV)' }
> > ??? ???{ discrete: width = 640, height = 480 }
> > ??? ??? ??? ???Time interval between frame: 1/30, 1/20, 1/15, 1/10,
> > ??? ??? ??? ???1/5, 1/1,
> > ??? ???{ discrete: width = 320, height = 240 }
> > ??? ??? ??? ???Time interval between frame: 1/30, 1/20, 1/15, 1/10,
> > ??? ??? ??? ???1589/15625, 1/1,
> > ??? ???{ discrete: width = 160, height = 120 }
> > ??? ??? ??? ???Time interval between frame: 1/30, 1/20, 1/15, 1/10,
> > ??? ??? ??? ???1589/15625, 1/1,
> > ??? ???{ discrete: width = 176, height = 144 }
> > ??? ??? ??? ???Time interval between frame: 1/30, 1/20, 1/15, 1/10,
> > ??? ??? ??? ???1589/15625, 1/1,
> > ??? ???{ discrete: width = 352, height = 288 }
> > ??? ??? ??? ???Time interval between frame: 1/30, 1/20, 1/15, 1/10,
> > ??? ??? ??? ???1589/15625, 1/1,
> >
> >
> > And I can see my ugly mug at 640x480 via the native
> > "Cheese Webcam Booth" app - no magic required. ???Nice.
> >
> >
> > The issue that I have is that this camera is sold as a 16
> > (well, 16.0) mega-pixel camera;
> >
> > ??? ???Speed 16.0Mega Pixel USB2.0 Webcam S4850v
> > ???
???https://www.pcdiy.com.au/product_info.php?products_id=9757
> >
> > ??? ???TECHNICAL SPECIFICATION
> > ??? ??? ???- Speed 16.0Mega Pixel USB2.0 Webcam
> > ??? ??? ???- Effective Static Pixels 16 Mega Pixel
> > ??? ??? ???- Maximum Resolution : 4608 x 3456
> > ??? ??? ???- Output Format: YUY2
> > ??? ??? ???- Max Frame Rate: 30fps
> > ??? ??? ???- USB 2.0 compatible
> > ??? ??? ???- White balance: Auto
> > ??? ??? ???- Auto Exposure ( AE ): Auto
> >
> >
> > ???While I understand that I would get 16MP in a photo,
> > I don't see the option to take a photo greater than
> > 640x480 (the 1.3MP that is reported on the linux-uvc
> > compatibility chart).
> >
> > ???Any thoughts on how to poke this device to get the
> > higher resolutions? ???Or is it possible that they're going
> > outside of UVC (to something proprietary) to get those
> > resolutions? ???Or are they doing something bodgy in
> > the win32 software by collating 16 to 32 frames of 1.3MP
> > shots to "assemble" a 16MP image?
> >
> > ???I'm confident that my reseller is above board - the
> > specifications on that site match those on the back of
> > the product's packaging. ???I obviously can't speak for
> > the whole-saler or upstream there-after ..
> >
> > ???lsusb -v output is attached and is consistent with
> > luvcview output.
> >
> > ???The device does not have an external power option.
> >
> >
> > Thanks for your help,
> >
> >
> >
> >
> >
> > --
> > Ian Latter
> > Late night coder ..
> > http://midnightcode.org/
> >
> > _______________________________________________
> > Linux-uvc-devel mailing list
> > Linux-uvc-devel at lists.berlios.de
> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> >
> >
> 


--
Ian Latter
Late night coder ..
http://midnightcode.org/


From alex at seewald.at  Sat Apr 10 20:31:52 2010
From: alex at seewald.at (Dr. Alexander K. Seewald)
Date: Sat, 10 Apr 2010 20:31:52 +0200
Subject: [Linux-uvc-devel] 16MP or 1.3MP?
Message-ID: <20100410183152.GA24791@sdg.at>

Hi Ian,

You won't see a true 16MP USB 2.0 camera because...
* the bandwidth in YUV mode would be far too high for USB 2.0
* cheap hardware MJPEG compression chips only do up to 640x480, so
  most UVC cameras do MJPEG only up to this. I don't think a 16MP MJPEG
  compression chips will appear in consumer USB 2.0 cameras anytime
  soon. These things are still quite expensive... not to mention the
  CCD sensors themselves.

BTW I'm very satisfied with the Logitech QC 9000 Pro which has a true 2MP
sensor and reasonable performance (5fps @ 1600x1200 with YUV due to USB 2.0
bandwidth restrictions, but 15fps @ 960x720, and 30fps @ 800x600 with
MJPEG) - this is probably as good as it gets for UVC. If you need higher
resolution, you could look into camera arrays (at most 2 per dedicated
USB controller should work) or FireWire cameras (which are more expensive
but have better quality MJPEG compression, higher resolution and more
bandwidth than USB 2.0)

I'm not associated in any way with Logitech. If you want to set up a
camera array, let me know. This would be fun.

Best,
  Alex
-- 
Dr. Alexander K. Seewald

Seewald Solutions
www.seewald.at
Tel. +43(664)1106886
Fax. +43(1)2533033/2764


From michele.castigliego at altasis.it  Sat Apr 10 21:15:21 2010
From: michele.castigliego at altasis.it (Michele Castigliego)
Date: Sat, 10 Apr 2010 21:15:21 +0200
Subject: [Linux-uvc-devel] Looking for upside down uvc cams
In-Reply-To: <4A39F219.10301@redhat.com>
References: <4A39F219.10301@redhat.com>
Message-ID: <4BC0CE49.8080206@altasis.it>

Hi,
I have a laptop with upside down webcam, as you asked at 
https://lists.berlios.de/pipermail/linux-uvc-devel/2009-June/004886.html 
I attach to this email dmidecode and lsusb outputs.

Thanks.


-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: lsusb.log
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100410/77ae8957/attachment.ksh>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: dmi.log
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100410/77ae8957/attachment-0001.ksh>

From laurent.pinchart at ideasonboard.com  Sun Apr 11 12:32:54 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Sun, 11 Apr 2010 12:32:54 +0200
Subject: [Linux-uvc-devel] ViMicro Webcam 0ac8:3420 bug+fix
In-Reply-To: <BAY112-W24692F24957FA8F3E764F1B7160@phx.gbl>
References: <BAY112-W24692F24957FA8F3E764F1B7160@phx.gbl>
Message-ID: <201004111232.54930.laurent.pinchart@ideasonboard.com>

Hi Sansegu,

On Thursday 08 April 2010 18:12:30 Santiago Segura wrote:
> Hello,
> 
> working with the same camera (ID 0ac8:3420 Z-Star Microelectronics Corp),
> I'm not able to acquire images in mjpeg format.
> 
> Reading this post it seems that its possible, once the patch is applied.
> 
> I'm working with the latest release of the uvc video driver
> (uvcvideo-553dfd853cba).
> 
> Comparing the source code, it seems that the patch is effectively applied,
> but not results.
> 
> Querying the capabilities of the webcam, only YUV its available.

If the webcam reports YUYV only, it probably means it doesn't support MJPEG. 
It's not uncommon for vendors to ship different products under the same 
VID:PID, and your model is probably restricted to YUYV.

> There is any workaroud about this?

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Sun Apr 11 12:36:26 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Sun, 11 Apr 2010 12:36:26 +0200
Subject: [Linux-uvc-devel] Lenovo T510 camera works
In-Reply-To: <20100408131343.GB21801@eesfc3.engr.ccny.cuny.edu>
References: <20100408131343.GB21801@eesfc3.engr.ccny.cuny.edu>
Message-ID: <201004111236.26550.laurent.pinchart@ideasonboard.com>

Hi Kurt,

On Thursday 08 April 2010 15:13:43 Kurt Rosenfeld wrote:
> Hello,
> 
> The UVC camera in the Lenovo T510 works if this small modification is
> made to uvc_driver.c:
> http://w140.com/kurt/lenovo_t510_linux_uvc_camera.html

Thanks for the report, but I really can't see why the patch is required. If 
the webcam works with that patch, it should work without it.

Could you retest using the same driver version, without the patch applied ? If 
you still experience problems, please describe them in details on the list 
(don't forget kernel log messages).

Please also report the output of

lsusb -v -d 17ef:480f

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Sun Apr 11 13:04:58 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Sun, 11 Apr 2010 13:04:58 +0200
Subject: [Linux-uvc-devel] some questions about uvc
In-Reply-To: <v2l3a665c761004050941we709745blcc93eae6ceec30cc@mail.gmail.com>
References: <3a665c761003110828r204d3218sa1998e4a6ba828de@mail.gmail.com>
	<201003180849.09038.laurent.pinchart@ideasonboard.com>
	<v2l3a665c761004050941we709745blcc93eae6ceec30cc@mail.gmail.com>
Message-ID: <201004111304.59639.laurent.pinchart@ideasonboard.com>

Hi,

On Monday 05 April 2010 18:41:21 loody wrote:
> >> Dear all:
> >> I try to fix the uvc driver on my mips platform.
> >> But I got the messages as I append at the end of letter, the messages
> >> are triggered by capture.c the sample c code at the official website.
> >> I have some questions:
> >> 1. why the uvc resend the urb in uvc_video_complete?
> > 
> > Because the USB core doesn't resubmit URBs automatically. If the driver
> > didn't do it there, it would only receive a few URBs (currently
> > hardcoded to 5 in the driver) and then stop.
> 
> I find the place where you mention and it seems we use a recursive
> method to send urbs in UVC, right?

It's not recursive. The uvc_video_complete function is called in response to a 
USB controller interrupt. It will resubmit the URB, and then return without 
waiting for the URB to be completed. The function will then be called again 
when the next URB completes.

> >> 2. from the log, it seems uvc keep catching when the VIDIOC_STREAMON
> >> passed from v4l2 to uvc.
> > 
> > I'm not sure to get what you mean.
> > 
> >> 3. if the answer of 1 is yes; what will uvc does when he get
> >> VIDIOC_QBUF and VIDIOC_DQBUF ?
> >>     ( in my opinion, uvc should starting catpureing when he receives
> >> VIDIOC_QBUF and stop when the buffer is full. Then it pass the buffer
> >> above when he got VIDIOC_DQBUF. But from the log below, it start
> >> captureing when he got VIDIOC_STREAMON. Am i right?)
> > 
> > THe driver instructs the device to start sending data when it receives
> > VIDIOC_STREAMON. If there's no buffer queued the data will just be
> > discarded.
> > 
> >> 4. if my assumption above is correct, uvc start capture at
> >> VIDIOC_DQBUF and stop when buffer full. it should stop capture when
> >> frame complete in the log appears.
> > 
> > It could, but just discarding the data is enough.
> > 
> >> VIDIOC_STREAMON
> >> uvcvideo: Failed to resubmit video URB (-38).
> >> uvcvideo: Failed to resubmit video URB (-38).
> > 
> > -38 is -ENOSYS, and that error is returned by very few USB host
> > controller drivers. Which controller are you using on your platform ?
> > Chances are you might need to fix it.
> 
> EHCI controller and I am wondering whether the error comes from my slowly
> cpu. My cpu is running at 400Mhz

Now that's weird. The ENOSYS error isn't documented in the USB error codes, 
and I can't find any reference to it in the EHCI driver. Are you using some 
sort of exotic platform, with a vendor-specific kernel ?

> >> uvcvideo: Frame complete (overflow).
> >> uvcvideo: Dropping payload (out of sync).
> >> uvcvideo: Dropping payload (out of sync).
> >> uvcvideo: Dropping payload (out of sync).
> >> uvcvideo: Dropping payload (out of sync).
> >> uvcvideo: Dropping payload (out of sync).
> 
> BTW, if I look at the correct place in the driver, why uvc doesn't
> support r/w io and userptr?

Because nobody bothered to implement that :-)

read/write support is slow, and I'm not sure it will be implemented. I got a 
patch for userptr support, I need to clean and submit it.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Sun Apr 11 13:13:24 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Sun, 11 Apr 2010 13:13:24 +0200
Subject: [Linux-uvc-devel] How do I set PIXELFORMAT for...
In-Reply-To: <53536DD176E21C41B47CE16CBDAC4965342E31@bali.aurensis.com>
References: <53536DD176E21C41B47CE16CBDAC4965342E31@bali.aurensis.com>
Message-ID: <201004111313.24946.laurent.pinchart@ideasonboard.com>

Hi Ricardo,

On Wednesday 31 March 2010 14:04:29 Ricardo Martinez Monje wrote:
> Hi,
> 
> I have a webcam with two pixel formats:
> 
> $ v4l2-ctl --list-formats-ext
> 
> ioctl: VIDIOC_ENUM_FMT
>         Index       : 0
>         Type        : Video Capture
>         Pixel Format: 'YUYV'
>         Name        : YUV 4:2:2 (YUYV)
>                 Size: Discrete 640x480
>                         Interval: Discrete 0.040 s (25.000 fps)
>                         Interval: Discrete 0.100 s (10.000 fps)
>                         Interval: Discrete 0.200 s (5.000 fps)
>         Index       : 1
>         Type        : Video Capture
>         Pixel Format: ''
>         Name        : 20363159-0000-0010-8000-00aa003
>                 Size: Discrete 640x480
>                         Interval: Discrete 0.040 s (25.000 fps)
>                         Interval: Discrete 0.100 s (10.000 fps)
>                         Interval: Discrete 0.200 s (5.000 fps)
> 
> The first is 8bit YUYV and the second is 14bit Y6 (FOURCC 0x20363159)
> compliant...

The Y16 format is not supported by the uvcvideo driver.

I can fix that, could you please send me the output of 'lsusb -v' for your 
webcam ?

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Sun Apr 11 13:25:16 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Sun, 11 Apr 2010 13:25:16 +0200
Subject: [Linux-uvc-devel] Support for Vimicro USB 2.0 PC Camera
	(0ac8:3420)
In-Reply-To: <4B887573.30400@ath.forthnet.gr>
References: <4B887573.30400@ath.forthnet.gr>
Message-ID: <201004111325.16923.laurent.pinchart@ideasonboard.com>

Hi,

On Saturday 27 February 2010 02:29:23 Manolis Nazlidis wrote:
> Hello everyone,
> 
> I own this webcamera: Vimicro USB 2.0 PC Camera (Venus) (0ac8:3420)
> Kernel I use is: 2.6.31-19-generic #56-Ubuntu SMP
> 
> My webcamera seems to be found ok
> when i try to test it using guvcview i get a black picture and this message
> (repeated)
> 
>    Could not grab image (select timeout): Resource temporarily unavailable
> 
> and at my syslog i get (repeated)
> 
>    uvcvideo: USB isochronous frame lost (-71).
> 
> when i change image controls values i may get a picture which seems like a
> sequence of random size blocks, arranged horizontally (if attachments of
> such files are allowed here, i can include one)
> 
> Webcamera has this behaviour also with other programs including luvcview,
> mplayer, amsn etc. I could make it work with no program.
> 
> I have tried the drivers provided by my distro for this camera.
> I have also compiled latest drivers as found at
> http://linuxtv.org/hg/~pinchartl/uvcvideo/
> I havent tried vanilla kernel drivers
> I 've experimented a bit with the quirks= module parameter
> 
> nevertheless nothing changed this behaviour.

The -71 error often indicates bad hardware, including buggy firmwares or bad 
cables. Try plugging your webcam into another port, changing the external hub 
(if any) or hub cables. It would also be interesting to test the camera with 
another computer.

-- 
Regards,

Laurent Pinchart


From palmax at gmail.com  Sun Apr 11 19:55:32 2010
From: palmax at gmail.com (Palmax Maverick)
Date: Sun, 11 Apr 2010 19:55:32 +0200
Subject: [Linux-uvc-devel] Linux-uvc-devel Digest, Vol 46, Issue 10
In-Reply-To: <mailman.29.1270893606.27372.linux-uvc-devel@lists.berlios.de>
References: <mailman.29.1270893606.27372.linux-uvc-devel@lists.berlios.de>
Message-ID: <r2u209499a1004111055ke56f85a0zb9d1e03398b285e7@mail.gmail.com>

Hello


I didn't read luvcview output, sorry hehe.
Of course, Ian is right :D


Good bye
Palmax


2010/4/10  <linux-uvc-devel-request at lists.berlios.de>:
> Send Linux-uvc-devel mailing list submissions to
> ? ? ? ?linux-uvc-devel at lists.berlios.de
>
> To subscribe or unsubscribe via the World Wide Web, visit
> ? ? ? ?https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> or, via email, send a message with subject or body 'help' to
> ? ? ? ?linux-uvc-devel-request at lists.berlios.de
>
> You can reach the person managing the list at
> ? ? ? ?linux-uvc-devel-owner at lists.berlios.de
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of Linux-uvc-devel digest..."
>
>
> Today's Topics:
>
> ? 1. Re: 16MP or 1.3MP? (Paulo Assis)
> ? 2. Re: Linux-uvc-devel Digest, Vol 46, Issue 9 (Palmax Maverick)
> ? 3. Re: 16MP or 1.3MP? (Ian Latter)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Fri, 9 Apr 2010 12:15:25 +0100
> From: Paulo Assis <pj.assis at gmail.com>
> To: Ian Latter <ian.latter at midnightcode.org>
> Cc: linux-uvc-devel at lists.berlios.de
> Subject: Re: [Linux-uvc-devel] 16MP or 1.3MP?
> Message-ID:
> ? ? ? ?<j2g59cf47a81004090415pe24e5844wdea8398089fba95 at mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
>
> Hi,
> >From your lsusb output the camera max resolution is 640x480 (even for
> still image)
> If you can get an higher resolution in windows, I guess it's probably
> trough some sort of interpolation technique.
> I doubt however that the quality is any good.
> It can also be that the camera uses some sort of "extra" proprietary
> protocol, but if it does, it doesn't seem to reported .
>
> Best Regards,
> Paulo
>
> 2010/4/9 Ian Latter <ian.latter at midnightcode.org>:
>> Hello,
>>
>>
>> ?Its a been a long time since I was last working with UVC,
>> but I found a camera that I couldn't resist, and you're in the
>> mainline kernel now .. and I'd like to do some aerial photos
>> from my embedded platform ..
>>
>> ?You have a 093a:2700 device listed on your site as
>> working (and my testing confirms this);
>>
>> ? ?http://linux-uvc.berlios.de/
>> ? ?093a:2700
>> ? ? ? ?- iSonic W002
>> ? ? ? ?- A4Tech PK-635K
>> ? ? ? ?- Digital Innovations 1.3MP Webcam
>> ? ? ? ?--> Pixart Imaging
>>
>> ?Confirmed in Fedora 12 (kernel 2.6.31 - dmesg output);
>> ? ?usb 1-1: new high speed USB device using ehci_hcd
>> ? ?and address 27
>> ? ?usb 1-1: New USB device found, idVendor=093a,
>> ? ?idProduct=2700
>> ? ?usb 1-1: New USB device strings: Mfr=16, Product=96,
>> ? ?SerialNumber=0
>> ? ?usb 1-1: Product: USB2.0_Camera
>> ? ?usb 1-1: Manufacturer: PixArt Imaging Inc.
>> ? ?usb 1-1: configuration #1 chosen from 1 choice
>> ? ?Linux video capture interface: v2.00
>> ? ?uvcvideo: Found UVC 1.00 device USB2.0_Camera
>> ? ?(093a:2700)
>> ? ?input: USB2.0_Camera as /devices/pci0000:00/0000:
>> ? ?00:02.1/usb1/1-1/1-1:1.0/input/input6
>> ? ?usbcore: registered new interface driver uvcvideo
>> ? ?USB Video Class driver (v0.1.0)
>> ? ?ALSA sound/usb/usbaudio.c:1300: current rate
>> ? ?6292992 is different from the runtime rate 16000
>> ? ?ALSA sound/usb/usbaudio.c:1300: current rate 34560
>> ? ?is different from the runtime rate 48000
>> ? ?usbcore: registered new interface driver snd-usb-audio
>> ? ?ALSA sound/usb/usbaudio.c:1300: current rate 33024
>> ? ?is different from the runtime rate 48000
>> ? ?ALSA sound/usb/usbaudio.c:1300: current rate 33280
>> ? ?is different from the runtime rate 48000
>>
>>
>> ?luvcview output looks okay (save that massive fraction);
>> ? ?# ./luvcview -L
>> ? ?luvcview version 0.2.1
>> ? ?Video driver: x11
>> ? ?A window manager is available
>> ? ?video /dev/video0
>> ? ?/dev/video0 does not support read i/o
>> ? ?{ pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
>> ? ?{ discrete: width = 640, height = 480 }
>> ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
>> ? ? ? ?1/5, 1/1,
>> ? ?{ discrete: width = 320, height = 240 }
>> ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
>> ? ? ? ?1589/15625, 1/1,
>> ? ?{ discrete: width = 160, height = 120 }
>> ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
>> ? ? ? ?1589/15625, 1/1,
>> ? ?{ discrete: width = 176, height = 144 }
>> ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
>> ? ? ? ?1589/15625, 1/1,
>> ? ?{ discrete: width = 352, height = 288 }
>> ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
>> ? ? ? ?1589/15625, 1/1,
>>
>>
>> And I can see my ugly mug at 640x480 via the native
>> "Cheese Webcam Booth" app - no magic required. ?Nice.
>>
>>
>> The issue that I have is that this camera is sold as a 16
>> (well, 16.0) mega-pixel camera;
>>
>> ? ?Speed 16.0Mega Pixel USB2.0 Webcam S4850v
>> ? ?https://www.pcdiy.com.au/product_info.php?products_id=9757
>>
>> ? ?TECHNICAL SPECIFICATION
>> ? ? ?- Speed 16.0Mega Pixel USB2.0 Webcam
>> ? ? ?- Effective Static Pixels 16 Mega Pixel
>> ? ? ?- Maximum Resolution : 4608 x 3456
>> ? ? ?- Output Format: YUY2
>> ? ? ?- Max Frame Rate: 30fps
>> ? ? ?- USB 2.0 compatible
>> ? ? ?- White balance: Auto
>> ? ? ?- Auto Exposure ( AE ): Auto
>>
>>
>> ?While I understand that I would get 16MP in a photo,
>> I don't see the option to take a photo greater than
>> 640x480 (the 1.3MP that is reported on the linux-uvc
>> compatibility chart).
>>
>> ?Any thoughts on how to poke this device to get the
>> higher resolutions? ?Or is it possible that they're going
>> outside of UVC (to something proprietary) to get those
>> resolutions? ?Or are they doing something bodgy in
>> the win32 software by collating 16 to 32 frames of 1.3MP
>> shots to "assemble" a 16MP image?
>>
>> ?I'm confident that my reseller is above board - the
>> specifications on that site match those on the back of
>> the product's packaging. ?I obviously can't speak for
>> the whole-saler or upstream there-after ..
>>
>> ?lsusb -v output is attached and is consistent with
>> luvcview output.
>>
>> ?The device does not have an external power option.
>>
>>
>> Thanks for your help,
>>
>>
>>
>>
>>
>> --
>> Ian Latter
>> Late night coder ..
>> http://midnightcode.org/
>>
>> _______________________________________________
>> Linux-uvc-devel mailing list
>> Linux-uvc-devel at lists.berlios.de
>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>
>>
>
>
> ------------------------------
>
> Message: 2
> Date: Fri, 9 Apr 2010 13:25:12 +0200
> From: Palmax Maverick <palmax at gmail.com>
> To: linux-uvc-devel at lists.berlios.de
> Subject: Re: [Linux-uvc-devel] Linux-uvc-devel Digest, Vol 46, Issue 9
> Message-ID:
> ? ? ? ?<x2o209499a1004090425t9e0e5cccvbcebceac7039bc33 at mail.gmail.com>
> Content-Type: text/plain; charset=UTF-8
>
> Hello there,
>
> I want to speak about "Maximum Resolution : 4608 x 3456". I think that
> it could get this huge resolution only as a Still Image.
> You should remember that still image capture is not include in
> linux-uvc (you may read it in http://linux-uvc.berlios.de/#status ).
> But I'm studying Still Image for getting this feature to linux-uvc.
>
> 32$ is a too good price for a cool webcam... I don't know this manufacture.
>
> If you buy it, you would send us its lsusb description for
> understanding this device.
>
>
> Good bye
> Palmax
>
> 2010/4/9 ?<linux-uvc-devel-request at lists.berlios.de>:
>> Send Linux-uvc-devel mailing list submissions to
>> ? ? ? ?linux-uvc-devel at lists.berlios.de
>>
>> To subscribe or unsubscribe via the World Wide Web, visit
>> ? ? ? ?https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>> or, via email, send a message with subject or body 'help' to
>> ? ? ? ?linux-uvc-devel-request at lists.berlios.de
>>
>> You can reach the person managing the list at
>> ? ? ? ?linux-uvc-devel-owner at lists.berlios.de
>>
>> When replying, please edit your Subject line so it is more specific
>> than "Re: Contents of Linux-uvc-devel digest..."
>>
>>
>> Today's Topics:
>>
>> ? 1. 16MP or 1.3MP? (Ian Latter)
>>
>>
>> ----------------------------------------------------------------------
>>
>> Message: 1
>> Date: Fri, 09 Apr 2010 20:40:41 +1000
>> From: "Ian Latter" <ian.latter at midnightcode.org>
>> To: linux-uvc-devel at lists.berlios.de
>> Subject: [Linux-uvc-devel] 16MP or 1.3MP?
>> Message-ID: <201004090940.o399ef2W003932 at singularity.tronunltd.com>
>> Content-Type: text/plain; charset="us-ascii"
>>
>> Hello,
>>
>>
>> ?Its a been a long time since I was last working with UVC,
>> but I found a camera that I couldn't resist, and you're in the
>> mainline kernel now .. and I'd like to do some aerial photos
>> from my embedded platform ..
>>
>> ?You have a 093a:2700 device listed on your site as
>> working (and my testing confirms this);
>>
>> ? ?http://linux-uvc.berlios.de/
>> ? ?093a:2700
>> ? ? ? ?- iSonic W002
>> ? ? ? ?- A4Tech PK-635K
>> ? ? ? ?- Digital Innovations 1.3MP Webcam
>> ? ? ? ?--> Pixart Imaging
>>
>> ?Confirmed in Fedora 12 (kernel 2.6.31 - dmesg output);
>> ? ?usb 1-1: new high speed USB device using ehci_hcd
>> ? ?and address 27
>> ? ?usb 1-1: New USB device found, idVendor=093a,
>> ? ?idProduct=2700
>> ? ?usb 1-1: New USB device strings: Mfr=16, Product=96,
>> ? ?SerialNumber=0
>> ? ?usb 1-1: Product: USB2.0_Camera
>> ? ?usb 1-1: Manufacturer: PixArt Imaging Inc.
>> ? ?usb 1-1: configuration #1 chosen from 1 choice
>> ? ?Linux video capture interface: v2.00
>> ? ?uvcvideo: Found UVC 1.00 device USB2.0_Camera
>> ? ?(093a:2700)
>> ? ?input: USB2.0_Camera as /devices/pci0000:00/0000:
>> ? ?00:02.1/usb1/1-1/1-1:1.0/input/input6
>> ? ?usbcore: registered new interface driver uvcvideo
>> ? ?USB Video Class driver (v0.1.0)
>> ? ?ALSA sound/usb/usbaudio.c:1300: current rate
>> ? ?6292992 is different from the runtime rate 16000
>> ? ?ALSA sound/usb/usbaudio.c:1300: current rate 34560
>> ? ?is different from the runtime rate 48000
>> ? ?usbcore: registered new interface driver snd-usb-audio
>> ? ?ALSA sound/usb/usbaudio.c:1300: current rate 33024
>> ? ?is different from the runtime rate 48000
>> ? ?ALSA sound/usb/usbaudio.c:1300: current rate 33280
>> ? ?is different from the runtime rate 48000
>>
>>
>> ?luvcview output looks okay (save that massive fraction);
>> ? ?# ./luvcview -L
>> ? ?luvcview version 0.2.1
>> ? ?Video driver: x11
>> ? ?A window manager is available
>> ? ?video /dev/video0
>> ? ?/dev/video0 does not support read i/o
>> ? ?{ pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
>> ? ?{ discrete: width = 640, height = 480 }
>> ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
>> ? ? ? ?1/5, 1/1,
>> ? ?{ discrete: width = 320, height = 240 }
>> ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
>> ? ? ? ?1589/15625, 1/1,
>> ? ?{ discrete: width = 160, height = 120 }
>> ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
>> ? ? ? ?1589/15625, 1/1,
>> ? ?{ discrete: width = 176, height = 144 }
>> ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
>> ? ? ? ?1589/15625, 1/1,
>> ? ?{ discrete: width = 352, height = 288 }
>> ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
>> ? ? ? ?1589/15625, 1/1,
>>
>>
>> And I can see my ugly mug at 640x480 via the native
>> "Cheese Webcam Booth" app - no magic required. ?Nice.
>>
>>
>> The issue that I have is that this camera is sold as a 16
>> (well, 16.0) mega-pixel camera;
>>
>> ? ?Speed 16.0Mega Pixel USB2.0 Webcam S4850v
>> ? ?https://www.pcdiy.com.au/product_info.php?products_id=9757
>>
>> ? ?TECHNICAL SPECIFICATION
>> ? ? ?- Speed 16.0Mega Pixel USB2.0 Webcam
>> ? ? ?- Effective Static Pixels 16 Mega Pixel
>> ? ? ?- Maximum Resolution : 4608 x 3456
>> ? ? ?- Output Format: YUY2
>> ? ? ?- Max Frame Rate: 30fps
>> ? ? ?- USB 2.0 compatible
>> ? ? ?- White balance: Auto
>> ? ? ?- Auto Exposure ( AE ): Auto
>>
>>
>> ?While I understand that I would get 16MP in a photo,
>> I don't see the option to take a photo greater than
>> 640x480 (the 1.3MP that is reported on the linux-uvc
>> compatibility chart).
>>
>> ?Any thoughts on how to poke this device to get the
>> higher resolutions? ?Or is it possible that they're going
>> outside of UVC (to something proprietary) to get those
>> resolutions? ?Or are they doing something bodgy in
>> the win32 software by collating 16 to 32 frames of 1.3MP
>> shots to "assemble" a 16MP image?
>>
>> ?I'm confident that my reseller is above board - the
>> specifications on that site match those on the back of
>> the product's packaging. ?I obviously can't speak for
>> the whole-saler or upstream there-after ..
>>
>> ?lsusb -v output is attached and is consistent with
>> luvcview output.
>>
>> ?The device does not have an external power option.
>>
>>
>> Thanks for your help,
>>
>>
>>
>>
>>
>> --
>> Ian Latter
>> Late night coder ..
>> http://midnightcode.org/
>> -------------- next part --------------
>> An embedded and charset-unspecified text was scrubbed...
>> Name: lsusb.txt
>> URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100409/af1c174c/attachment.txt>
>>
>> ------------------------------
>>
>> _______________________________________________
>> Linux-uvc-devel mailing list
>> Linux-uvc-devel at lists.berlios.de
>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>
>>
>> End of Linux-uvc-devel Digest, Vol 46, Issue 9
>> **********************************************
>>
>
>
> ------------------------------
>
> Message: 3
> Date: Sat, 10 Apr 2010 13:14:57 +1000
> From: "Ian Latter" <ian.latter at midnightcode.org>
> To: "Paulo Assis" <pj.assis at gmail.com>
> Cc: linux-uvc-devel at lists.berlios.de
> Subject: Re: [Linux-uvc-devel] 16MP or 1.3MP?
> Message-ID: <201004100214.o3A2Evl7008718 at singularity.tronunltd.com>
> Content-Type: text/plain; charset="us-ascii"
>
> Hello Paulo,
>
>
> ?Out of the 15-or-so computers that I own none of them
> run Windows, so I can't actually test it in Windows here.
> I'll send it round to a mates place and see what he makes
> of it - and I'll try and get a "high res" sample up on a web
> server somewhere.
>
> ?This morning I did a quick search for specifications, and
> which-ever sensor chip is inside it, it can't be good;
>
> http://www.pixart.com.tw/productsditel.asp?ToPage=1&productclassify_id=8
>
> ?The max spec there is for a 640x480 sensor - so it
> must be Win32 application magic - which, I agree, must
> make an output image that is as fuzzy as foobar ...
>
>
> Thanks,
>
> ----- Original Message -----
>>From: "Paulo Assis" <pj.assis at gmail.com>
>>To: "Ian Latter" <ian.latter at midnightcode.org>
>>Subject: ?Re: [Linux-uvc-devel] 16MP or 1.3MP?
>>Date: Fri, 09 Apr 2010 12:15:25 +0100
>>
>> Hi,
>> From your lsusb output the camera max resolution is
> 640x480 (even for
>> still image)
>> If you can get an higher resolution in windows, I guess
> it's probably
>> trough some sort of interpolation technique.
>> I doubt however that the quality is any good.
>> It can also be that the camera uses some sort of "extra"
> proprietary
>> protocol, but if it does, it doesn't seem to reported .
>>
>> Best Regards,
>> Paulo
>>
>> 2010/4/9 Ian Latter <ian.latter at midnightcode.org>:
>> > Hello,
>> >
>> >
>> > ?Its a been a long time since I was last working with UVC,
>> > but I found a camera that I couldn't resist, and you're
> in the
>> > mainline kernel now .. and I'd like to do some aerial photos
>> > from my embedded platform ..
>> >
>> > ?You have a 093a:2700 device listed on your site as
>> > working (and my testing confirms this);
>> >
>> > ? ?http://linux-uvc.berlios.de/
>> > ? ?093a:2700
>> > ? ? ? ?- iSonic W002
>> > ? ? ? ?- A4Tech PK-635K
>> > ? ? ? ?- Digital Innovations 1.3MP Webcam
>> > ? ? ? ?--> Pixart Imaging
>> >
>> > ?Confirmed in Fedora 12 (kernel 2.6.31 - dmesg output);
>> > ? ?usb 1-1: new high speed USB device using ehci_hcd
>> > ? ?and address 27
>> > ? ?usb 1-1: New USB device found, idVendor=093a,
>> > ? ?idProduct=2700
>> > ? ?usb 1-1: New USB device strings: Mfr=16, Product=96,
>> > ? ?SerialNumber=0
>> > ? ?usb 1-1: Product: USB2.0_Camera
>> > ? ?usb 1-1: Manufacturer: PixArt Imaging Inc.
>> > ? ?usb 1-1: configuration #1 chosen from 1 choice
>> > ? ?Linux video capture interface: v2.00
>> > ? ?uvcvideo: Found UVC 1.00 device USB2.0_Camera
>> > ? ?(093a:2700)
>> > ? ?input: USB2.0_Camera as /devices/pci0000:00/0000:
>> > ? ?00:02.1/usb1/1-1/1-1:1.0/input/input6
>> > ? ?usbcore: registered new interface driver uvcvideo
>> > ? ?USB Video Class driver (v0.1.0)
>> > ? ?ALSA sound/usb/usbaudio.c:1300: current rate
>> > ? ?6292992 is different from the runtime rate 16000
>> > ? ?ALSA sound/usb/usbaudio.c:1300: current rate 34560
>> > ? ?is different from the runtime rate 48000
>> > ? ?usbcore: registered new interface driver snd-usb-audio
>> > ? ?ALSA sound/usb/usbaudio.c:1300: current rate 33024
>> > ? ?is different from the runtime rate 48000
>> > ? ?ALSA sound/usb/usbaudio.c:1300: current rate 33280
>> > ? ?is different from the runtime rate 48000
>> >
>> >
>> > ?luvcview output looks okay (save that massive fraction);
>> > ? ?# ./luvcview -L
>> > ? ?luvcview version 0.2.1
>> > ? ?Video driver: x11
>> > ? ?A window manager is available
>> > ? ?video /dev/video0
>> > ? ?/dev/video0 does not support read i/o
>> > ? ?{ pixelformat = 'YUYV', description = 'YUV 4:2:2
> (YUYV)' }
>> > ? ?{ discrete: width = 640, height = 480 }
>> > ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
>> > ? ? ? ?1/5, 1/1,
>> > ? ?{ discrete: width = 320, height = 240 }
>> > ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
>> > ? ? ? ?1589/15625, 1/1,
>> > ? ?{ discrete: width = 160, height = 120 }
>> > ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
>> > ? ? ? ?1589/15625, 1/1,
>> > ? ?{ discrete: width = 176, height = 144 }
>> > ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
>> > ? ? ? ?1589/15625, 1/1,
>> > ? ?{ discrete: width = 352, height = 288 }
>> > ? ? ? ?Time interval between frame: 1/30, 1/20, 1/15, 1/10,
>> > ? ? ? ?1589/15625, 1/1,
>> >
>> >
>> > And I can see my ugly mug at 640x480 via the native
>> > "Cheese Webcam Booth" app - no magic required. ?Nice.
>> >
>> >
>> > The issue that I have is that this camera is sold as a 16
>> > (well, 16.0) mega-pixel camera;
>> >
>> > ? ?Speed 16.0Mega Pixel USB2.0 Webcam S4850v
>> > ?
> ?https://www.pcdiy.com.au/product_info.php?products_id=9757
>> >
>> > ? ?TECHNICAL SPECIFICATION
>> > ? ? ?- Speed 16.0Mega Pixel USB2.0 Webcam
>> > ? ? ?- Effective Static Pixels 16 Mega Pixel
>> > ? ? ?- Maximum Resolution : 4608 x 3456
>> > ? ? ?- Output Format: YUY2
>> > ? ? ?- Max Frame Rate: 30fps
>> > ? ? ?- USB 2.0 compatible
>> > ? ? ?- White balance: Auto
>> > ? ? ?- Auto Exposure ( AE ): Auto
>> >
>> >
>> > ?While I understand that I would get 16MP in a photo,
>> > I don't see the option to take a photo greater than
>> > 640x480 (the 1.3MP that is reported on the linux-uvc
>> > compatibility chart).
>> >
>> > ?Any thoughts on how to poke this device to get the
>> > higher resolutions? ?Or is it possible that they're going
>> > outside of UVC (to something proprietary) to get those
>> > resolutions? ?Or are they doing something bodgy in
>> > the win32 software by collating 16 to 32 frames of 1.3MP
>> > shots to "assemble" a 16MP image?
>> >
>> > ?I'm confident that my reseller is above board - the
>> > specifications on that site match those on the back of
>> > the product's packaging. ?I obviously can't speak for
>> > the whole-saler or upstream there-after ..
>> >
>> > ?lsusb -v output is attached and is consistent with
>> > luvcview output.
>> >
>> > ?The device does not have an external power option.
>> >
>> >
>> > Thanks for your help,
>> >
>> >
>> >
>> >
>> >
>> > --
>> > Ian Latter
>> > Late night coder ..
>> > http://midnightcode.org/
>> >
>> > _______________________________________________
>> > Linux-uvc-devel mailing list
>> > Linux-uvc-devel at lists.berlios.de
>> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>> >
>> >
>>
>
>
> --
> Ian Latter
> Late night coder ..
> http://midnightcode.org/
>
>
> ------------------------------
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>
> End of Linux-uvc-devel Digest, Vol 46, Issue 10
> ***********************************************
>


From xsdg at xsdg.org  Mon Apr 12 05:36:49 2010
From: xsdg at xsdg.org (Omari Stephens)
Date: Mon, 12 Apr 2010 03:36:49 +0000
Subject: [Linux-uvc-devel] Lenovo T510 camera works
In-Reply-To: <201004111236.26550.laurent.pinchart@ideasonboard.com>
References: <20100408131343.GB21801@eesfc3.engr.ccny.cuny.edu>
	<201004111236.26550.laurent.pinchart@ideasonboard.com>
Message-ID: <4BC29551.4040200@xsdg.org>

On 04/11/2010 10:36 AM, Laurent Pinchart wrote:
> Hi Kurt,
>
> On Thursday 08 April 2010 15:13:43 Kurt Rosenfeld wrote:
>> Hello,
>>
>> The UVC camera in the Lenovo T510 works if this small modification is
>> made to uvc_driver.c:
>> http://w140.com/kurt/lenovo_t510_linux_uvc_camera.html
>
> Thanks for the report, but I really can't see why the patch is required. If
> the webcam works with that patch, it should work without it.
Sorry for not getting back to you before.  Without a patch like this, 
the driver doesn't pick up the webcam ? you modprobe the driver and it 
doesn't recognize anything it should try to support, so it doesn't do 
anything.

> Could you retest using the same driver version, without the patch applied ? If
> you still experience problems, please describe them in details on the list
> (don't forget kernel log messages).
>
> Please also report the output of
>
> lsusb -v -d 17ef:480f
Attached

--xsdg
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: webcam_lsusb.txt
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100412/89bbee66/attachment.txt>

From RMartinez at aurensis.com  Mon Apr 12 11:32:44 2010
From: RMartinez at aurensis.com (Ricardo Martinez Monje)
Date: Mon, 12 Apr 2010 11:32:44 +0200
Subject: [Linux-uvc-devel] How do I set PIXELFORMAT for...
In-Reply-To: <201004111313.24946.laurent.pinchart@ideasonboard.com>
References: <53536DD176E21C41B47CE16CBDAC4965342E31@bali.aurensis.com>
	<201004111313.24946.laurent.pinchart@ideasonboard.com>
Message-ID: <53536DD176E21C41B47CE16CBDAC49653431F6@bali.aurensis.com>

Hi Laurent,

 

1st of all, thank you for your interest. Here is the information you
requested:

 

http://pastebin.com/cFpfwZVJ

 

 

Regards,

mtz

 

 

-----Mensaje original-----
De: Laurent Pinchart [mailto:laurent.pinchart at ideasonboard.com] 
Enviado el: domingo, 11 de abril de 2010 13:13
Para: linux-uvc-devel at lists.berlios.de
CC: Ricardo Martinez Monje
Asunto: Re: [Linux-uvc-devel] How do I set PIXELFORMAT for...

 

Hi Ricardo,

 

On Wednesday 31 March 2010 14:04:29 Ricardo Martinez Monje wrote:

> Hi,

> 

> I have a webcam with two pixel formats:

> 

> $ v4l2-ctl --list-formats-ext

> 

> ioctl: VIDIOC_ENUM_FMT

>         Index       : 0

>         Type        : Video Capture

>         Pixel Format: 'YUYV'

>         Name        : YUV 4:2:2 (YUYV)

>                 Size: Discrete 640x480

>                         Interval: Discrete 0.040 s (25.000 fps)

>                         Interval: Discrete 0.100 s (10.000 fps)

>                         Interval: Discrete 0.200 s (5.000 fps)

>         Index       : 1

>         Type        : Video Capture

>         Pixel Format: ''

>         Name        : 20363159-0000-0010-8000-00aa003

>                 Size: Discrete 640x480

>                         Interval: Discrete 0.040 s (25.000 fps)

>                         Interval: Discrete 0.100 s (10.000 fps)

>                         Interval: Discrete 0.200 s (5.000 fps)

> 

> The first is 8bit YUYV and the second is 14bit Y6 (FOURCC 0x20363159)

> compliant...

 

The Y16 format is not supported by the uvcvideo driver.

 

I can fix that, could you please send me the output of 'lsusb -v' for
your 

webcam ?

 

-- 

Regards,

 

Laurent Pinchart

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100412/c66ac4df/attachment.html>

From laurent.pinchart at ideasonboard.com  Mon Apr 12 11:46:55 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Mon, 12 Apr 2010 11:46:55 +0200
Subject: [Linux-uvc-devel] How do I set PIXELFORMAT for...
In-Reply-To: <53536DD176E21C41B47CE16CBDAC49653431F6@bali.aurensis.com>
References: <53536DD176E21C41B47CE16CBDAC4965342E31@bali.aurensis.com>
	<201004111313.24946.laurent.pinchart@ideasonboard.com>
	<53536DD176E21C41B47CE16CBDAC49653431F6@bali.aurensis.com>
Message-ID: <201004121146.57330.laurent.pinchart@ideasonboard.com>

Hi Ricardo,

On Monday 12 April 2010 11:32:44 Ricardo Martinez Monje wrote:
> Hi Laurent,
> 
> 1st of all, thank you for your interest. Here is the information you
> requested:
> 
> http://pastebin.com/cFpfwZVJ

Thanks for the information.

Looking at the USB descriptors, your webcam isn't UVC compatible. It's then 
not supported by the uvcvideo driver, you're probably using another driver.

I maintain the uvcvideo driver only, you will need to contact your driver 
mailing list or author for support.

-- 
Regards,

Laurent Pinchart


From RMartinez at aurensis.com  Mon Apr 12 11:48:00 2010
From: RMartinez at aurensis.com (Ricardo Martinez Monje)
Date: Mon, 12 Apr 2010 11:48:00 +0200
Subject: [Linux-uvc-devel] How do I set PIXELFORMAT for...
In-Reply-To: <201004121146.57330.laurent.pinchart@ideasonboard.com>
References: <53536DD176E21C41B47CE16CBDAC4965342E31@bali.aurensis.com>
	<201004111313.24946.laurent.pinchart@ideasonboard.com>
	<53536DD176E21C41B47CE16CBDAC49653431F6@bali.aurensis.com>
	<201004121146.57330.laurent.pinchart@ideasonboard.com>
Message-ID: <53536DD176E21C41B47CE16CBDAC49653431FF@bali.aurensis.com>

Laurent,

 

I'm sure that the camera is UVC compliant, 

 

$dmesg | tail

[ 8583.393067] usb 1-1: new high speed USB device using ehci_hcd and address 4

[ 8583.537905] usb 1-1: configuration #1 chosen from 1 choice

[ 8583.585815] uvcvideo: Unknown video format 20363159-0000-0010-8000-00aa00389b71

[ 8583.592560] uvcvideo: Found UVC 1.00 device Miricle 307K (17dc:0202)

[ 8583.592566] uvcvideo: Forcing device quirks to 0x10 by module parameter for testing purpose.

[ 8583.592569] uvcvideo: Please report required quirks to the linux-uvc-devel mailing list

 

 

Ricardo Mart?nez Monje

Network & Connectivity.

 

aurensis | Telespazio, a Finmeccanica/Thales Company

----------------

Rosa Sensat 9-11, 6? p ? 08005 Barcelona

Tel. (+34) 935 830 200 | Fax (+34) 935 830 201

---------------------------------------------------------

rmartinez at aurensis.com 

http://www.aurensis.com 

----------------

AURENSIS, S.L.U. le informa de que este mensaje, la informaci?n que contiene y cualesquiera archivos que adjunte se dirigen exclusivamente a su destinatario, estando prohibida por Ley su distribuci?n, copia o utilizaci?n con cualquier finalidad sin autorizaci?n expresa del remitente. Si Vd. recibe este mensaje por error, le rogamos que proceda a su eliminaci?n definitiva y nos lo comunique inmediatamente a trav?s de correo electr?nico.

AURENSIS, S.L.U. le informa, asimismo, de que todos los datos recibidos por esta v?a ser?n almacenados, pudiendo ser incluidos en un fichero de nuestra responsabilidad, donde se mantendr?n bajo la m?s estricta confidencialidad, con la finalidad de atender su solicitud y dar cumplimiento a los l?citos objetivos de la empresa. Puede ejercitar sus derechos de acceso, rectificaci?n, cancelaci?n y oposici?n, en los t?rminos que reconoce la Ley Org?nica 15/1999 de Protecci?n de Datos, dirigi?ndose a nuestras oficinas en Barcelona, C/ Rosa Sensat, 9-11. 08005, o enviando un e-mail a lopd at aurensis.com

 

 

-----Mensaje original-----
De: Laurent Pinchart [mailto:laurent.pinchart at ideasonboard.com] 
Enviado el: lunes, 12 de abril de 2010 11:47
Para: Ricardo Martinez Monje
CC: linux-uvc-devel at lists.berlios.de
Asunto: Re: [Linux-uvc-devel] How do I set PIXELFORMAT for...

 

Hi Ricardo,

 

On Monday 12 April 2010 11:32:44 Ricardo Martinez Monje wrote:

> Hi Laurent,

> 

> 1st of all, thank you for your interest. Here is the information you

> requested:

> 

> http://pastebin.com/cFpfwZVJ

 

Thanks for the information.

 

Looking at the USB descriptors, your webcam isn't UVC compatible. It's then 

not supported by the uvcvideo driver, you're probably using another driver.

 

I maintain the uvcvideo driver only, you will need to contact your driver 

mailing list or author for support.

 

-- 

Regards,

 

Laurent Pinchart

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100412/ecf0fd7f/attachment.html>

From laurent.pinchart at ideasonboard.com  Mon Apr 12 11:49:22 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Mon, 12 Apr 2010 11:49:22 +0200
Subject: [Linux-uvc-devel] Lenovo T510 camera works
In-Reply-To: <4BC29551.4040200@xsdg.org>
References: <20100408131343.GB21801@eesfc3.engr.ccny.cuny.edu>
	<201004111236.26550.laurent.pinchart@ideasonboard.com>
	<4BC29551.4040200@xsdg.org>
Message-ID: <201004121149.23045.laurent.pinchart@ideasonboard.com>

Hi,

On Monday 12 April 2010 05:36:49 Omari Stephens wrote:
> On 04/11/2010 10:36 AM, Laurent Pinchart wrote:
> > On Thursday 08 April 2010 15:13:43 Kurt Rosenfeld wrote:
> >> Hello,
> >> 
> >> The UVC camera in the Lenovo T510 works if this small modification is
> >> made to uvc_driver.c:
> >> http://w140.com/kurt/lenovo_t510_linux_uvc_camera.html
> > 
> > Thanks for the report, but I really can't see why the patch is required.
> > If the webcam works with that patch, it should work without it.
> 
> Sorry for not getting back to you before.  Without a patch like this,
> the driver doesn't pick up the webcam ? you modprobe the driver and it
> doesn't recognize anything it should try to support, so it doesn't do
> anything.

Does the unpatched driver print anything to the kernel log (you can read the 
kernel log by issuing the dmesg command) when you load it ?

> > Could you retest using the same driver version, without the patch applied
> > ? If you still experience problems, please describe them in details on
> > the list (don't forget kernel log messages).
> > 
> > Please also report the output of
> > 
> > lsusb -v -d 17ef:480f

Thanks.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Mon Apr 12 11:55:06 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Mon, 12 Apr 2010 11:55:06 +0200
Subject: [Linux-uvc-devel] How do I set PIXELFORMAT for...
In-Reply-To: <53536DD176E21C41B47CE16CBDAC49653431FF@bali.aurensis.com>
References: <53536DD176E21C41B47CE16CBDAC4965342E31@bali.aurensis.com>
	<201004121146.57330.laurent.pinchart@ideasonboard.com>
	<53536DD176E21C41B47CE16CBDAC49653431FF@bali.aurensis.com>
Message-ID: <201004121155.07369.laurent.pinchart@ideasonboard.com>

Hi Ricardo,

On Monday 12 April 2010 11:48:00 Ricardo Martinez Monje wrote:
> Laurent,
> 
> I'm sure that the camera is UVC compliant,
> 
> $dmesg | tail
> 
> [ 8583.393067] usb 1-1: new high speed USB device using ehci_hcd and
> address 4
> [ 8583.537905] usb 1-1: configuration #1 chosen from 1 choice
> [ 8583.585815] uvcvideo: Unknown video format
> 20363159-0000-0010-8000-00aa00389b71
> [ 8583.592560] uvcvideo: Found UVC 1.00 device Miricle 307K (17dc:0202)
> [ 8583.592566] uvcvideo: Forcing device quirks to 0x10 by module parameter
> for testing purpose.
> [ 8583.592569] uvcvideo: Please report required quirks to the
> linux-uvc-devel mailing list

The lsusb output you posted on pastebin.com is for device 17dc:0200, not 
17dc:0202.

-- 
Regards,

Laurent Pinchart


From RMartinez at aurensis.com  Mon Apr 12 12:39:44 2010
From: RMartinez at aurensis.com (Ricardo Martinez Monje)
Date: Mon, 12 Apr 2010 12:39:44 +0200
Subject: [Linux-uvc-devel] How do I set PIXELFORMAT for...
In-Reply-To: <201004121155.07369.laurent.pinchart@ideasonboard.com>
References: <53536DD176E21C41B47CE16CBDAC4965342E31@bali.aurensis.com>
	<201004121146.57330.laurent.pinchart@ideasonboard.com>
	<53536DD176E21C41B47CE16CBDAC49653431FF@bali.aurensis.com>
	<201004121155.07369.laurent.pinchart@ideasonboard.com>
Message-ID: <53536DD176E21C41B47CE16CBDAC496534320F@bali.aurensis.com>

Laurent,

 

Here is the output for the device 17dc:0202

 

http://pastebin.com/JU1qLmBS

 

Thanks.

 

 

Ricardo Mart?nez Monje

Network & Connectivity.

 

aurensis | Telespazio, a Finmeccanica/Thales Company

----------------

Rosa Sensat 9-11, 6? p ? 08005 Barcelona

Tel. (+34) 935 830 200 | Fax (+34) 935 830 201

---------------------------------------------------------

rmartinez at aurensis.com 

http://www.aurensis.com 

----------------

AURENSIS, S.L.U. le informa de que este mensaje, la informaci?n que contiene y cualesquiera archivos que adjunte se dirigen exclusivamente a su destinatario, estando prohibida por Ley su distribuci?n, copia o utilizaci?n con cualquier finalidad sin autorizaci?n expresa del remitente. Si Vd. recibe este mensaje por error, le rogamos que proceda a su eliminaci?n definitiva y nos lo comunique inmediatamente a trav?s de correo electr?nico.

AURENSIS, S.L.U. le informa, asimismo, de que todos los datos recibidos por esta v?a ser?n almacenados, pudiendo ser incluidos en un fichero de nuestra responsabilidad, donde se mantendr?n bajo la m?s estricta confidencialidad, con la finalidad de atender su solicitud y dar cumplimiento a los l?citos objetivos de la empresa. Puede ejercitar sus derechos de acceso, rectificaci?n, cancelaci?n y oposici?n, en los t?rminos que reconoce la Ley Org?nica 15/1999 de Protecci?n de Datos, dirigi?ndose a nuestras oficinas en Barcelona, C/ Rosa Sensat, 9-11. 08005, o enviando un e-mail a lopd at aurensis.com

 

 

-----Mensaje original-----
De: Laurent Pinchart [mailto:laurent.pinchart at ideasonboard.com] 
Enviado el: lunes, 12 de abril de 2010 11:55
Para: Ricardo Martinez Monje
CC: linux-uvc-devel at lists.berlios.de
Asunto: Re: [Linux-uvc-devel] How do I set PIXELFORMAT for...

 

Hi Ricardo,

 

On Monday 12 April 2010 11:48:00 Ricardo Martinez Monje wrote:

> Laurent,

> 

> I'm sure that the camera is UVC compliant,

> 

> $dmesg | tail

> 

> [ 8583.393067] usb 1-1: new high speed USB device using ehci_hcd and

> address 4

> [ 8583.537905] usb 1-1: configuration #1 chosen from 1 choice

> [ 8583.585815] uvcvideo: Unknown video format

> 20363159-0000-0010-8000-00aa00389b71

> [ 8583.592560] uvcvideo: Found UVC 1.00 device Miricle 307K (17dc:0202)

> [ 8583.592566] uvcvideo: Forcing device quirks to 0x10 by module parameter

> for testing purpose.

> [ 8583.592569] uvcvideo: Please report required quirks to the

> linux-uvc-devel mailing list

 

The lsusb output you posted on pastebin.com is for device 17dc:0200, not 

17dc:0202.

 

-- 

Regards,

 

Laurent Pinchart

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100412/5c72ccbb/attachment.html>

From laurent.pinchart at ideasonboard.com  Mon Apr 12 12:53:20 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Mon, 12 Apr 2010 12:53:20 +0200
Subject: [Linux-uvc-devel] How do I set PIXELFORMAT for...
In-Reply-To: <53536DD176E21C41B47CE16CBDAC496534320F@bali.aurensis.com>
References: <53536DD176E21C41B47CE16CBDAC4965342E31@bali.aurensis.com>
	<201004121155.07369.laurent.pinchart@ideasonboard.com>
	<53536DD176E21C41B47CE16CBDAC496534320F@bali.aurensis.com>
Message-ID: <201004121253.21502.laurent.pinchart@ideasonboard.com>

Hi Ricardo,

On Monday 12 April 2010 12:39:44 Ricardo Martinez Monje wrote:
> Laurent,
> 
> Here is the output for the device 17dc:0202
> 
> http://pastebin.com/JU1qLmBS

Thanks. Could you please try the following patch ?

diff --git a/drivers/media/video/uvc/uvc_driver.c b/drivers/media/video/uvc/uvc_driver.c
index 43892bf..c8dd892 100644
--- a/drivers/media/video/uvc/uvc_driver.c
+++ b/drivers/media/video/uvc/uvc_driver.c
@@ -90,10 +90,15 @@ static struct uvc_format_desc uvc_fmts[] = {
 		.fcc		= V4L2_PIX_FMT_UYVY,
 	},
 	{
-		.name		= "Greyscale",
+		.name		= "Greyscale (8-bit)",
 		.guid		= UVC_GUID_FORMAT_Y800,
 		.fcc		= V4L2_PIX_FMT_GREY,
 	},
+	{
+		.name		= "Greyscale (16-bit)",
+		.guid		= UVC_GUID_FORMAT_Y16,
+		.fcc		= V4L2_PIX_FMT_Y16,
+	},
 	{
 		.name		= "RGB Bayer",
 		.guid		= UVC_GUID_FORMAT_BY8,
diff --git a/drivers/media/video/uvc/uvcvideo.h b/drivers/media/video/uvc/uvcvideo.h
index 2bba059..d1f8840 100644
--- a/drivers/media/video/uvc/uvcvideo.h
+++ b/drivers/media/video/uvc/uvcvideo.h
@@ -131,11 +131,13 @@ struct uvc_xu_control {
 #define UVC_GUID_FORMAT_Y800 \
 	{ 'Y',  '8',  '0',  '0', 0x00, 0x00, 0x10, 0x00, \
 	 0x80, 0x00, 0x00, 0xaa, 0x00, 0x38, 0x9b, 0x71}
+#define UVC_GUID_FORMAT_Y16 \
+	{ 'Y',  '1',  '6',  ' ', 0x00, 0x00, 0x10, 0x00, \
+	 0x80, 0x00, 0x00, 0xaa, 0x00, 0x38, 0x9b, 0x71}
 #define UVC_GUID_FORMAT_BY8 \
 	{ 'B',  'Y',  '8',  ' ', 0x00, 0x00, 0x10, 0x00, \
 	 0x80, 0x00, 0x00, 0xaa, 0x00, 0x38, 0x9b, 0x71}
 
-
 /* ------------------------------------------------------------------------
  * Driver specific constants.
  */

-- 
Regards,

Laurent Pinchart


From RMartinez at aurensis.com  Mon Apr 12 15:16:21 2010
From: RMartinez at aurensis.com (Ricardo Martinez Monje)
Date: Mon, 12 Apr 2010 15:16:21 +0200
Subject: [Linux-uvc-devel] How do I set PIXELFORMAT for...
In-Reply-To: <201004121253.21502.laurent.pinchart@ideasonboard.com>
References: <53536DD176E21C41B47CE16CBDAC4965342E31@bali.aurensis.com>
	<201004121155.07369.laurent.pinchart@ideasonboard.com>
	<53536DD176E21C41B47CE16CBDAC496534320F@bali.aurensis.com>
	<201004121253.21502.laurent.pinchart@ideasonboard.com>
Message-ID: <53536DD176E21C41B47CE16CBDAC4965343232@bali.aurensis.com>

Laurent,

Thank you very much!!! That Works like a charm...

$ v4l2-ctl --list-formats
ioctl: VIDIOC_ENUM_FMT
	Index       : 0
	Type        : Video Capture
	Pixel Format: 'YUYV'
	Name        : YUV 4:2:2 (YUYV)

	Index       : 1
	Type        : Video Capture
	Pixel Format: 'Y16 '
	Name        : Greyscale (16-bit)



-----Mensaje original-----
De: Laurent Pinchart [mailto:laurent.pinchart at ideasonboard.com] 
Enviado el: lunes, 12 de abril de 2010 12:53
Para: Ricardo Martinez Monje
CC: linux-uvc-devel at lists.berlios.de
Asunto: Re: [Linux-uvc-devel] How do I set PIXELFORMAT for...

Hi Ricardo,

On Monday 12 April 2010 12:39:44 Ricardo Martinez Monje wrote:
> Laurent,
> 
> Here is the output for the device 17dc:0202
> 
> http://pastebin.com/JU1qLmBS

Thanks. Could you please try the following patch ?

diff --git a/drivers/media/video/uvc/uvc_driver.c
b/drivers/media/video/uvc/uvc_driver.c
index 43892bf..c8dd892 100644
--- a/drivers/media/video/uvc/uvc_driver.c
+++ b/drivers/media/video/uvc/uvc_driver.c
@@ -90,10 +90,15 @@ static struct uvc_format_desc uvc_fmts[] = {
 		.fcc		= V4L2_PIX_FMT_UYVY,
 	},
 	{
-		.name		= "Greyscale",
+		.name		= "Greyscale (8-bit)",
 		.guid		= UVC_GUID_FORMAT_Y800,
 		.fcc		= V4L2_PIX_FMT_GREY,
 	},
+	{
+		.name		= "Greyscale (16-bit)",
+		.guid		= UVC_GUID_FORMAT_Y16,
+		.fcc		= V4L2_PIX_FMT_Y16,
+	},
 	{
 		.name		= "RGB Bayer",
 		.guid		= UVC_GUID_FORMAT_BY8,
diff --git a/drivers/media/video/uvc/uvcvideo.h
b/drivers/media/video/uvc/uvcvideo.h
index 2bba059..d1f8840 100644
--- a/drivers/media/video/uvc/uvcvideo.h
+++ b/drivers/media/video/uvc/uvcvideo.h
@@ -131,11 +131,13 @@ struct uvc_xu_control {
 #define UVC_GUID_FORMAT_Y800 \
 	{ 'Y',  '8',  '0',  '0', 0x00, 0x00, 0x10, 0x00, \
 	 0x80, 0x00, 0x00, 0xaa, 0x00, 0x38, 0x9b, 0x71}
+#define UVC_GUID_FORMAT_Y16 \
+	{ 'Y',  '1',  '6',  ' ', 0x00, 0x00, 0x10, 0x00, \
+	 0x80, 0x00, 0x00, 0xaa, 0x00, 0x38, 0x9b, 0x71}
 #define UVC_GUID_FORMAT_BY8 \
 	{ 'B',  'Y',  '8',  ' ', 0x00, 0x00, 0x10, 0x00, \
 	 0x80, 0x00, 0x00, 0xaa, 0x00, 0x38, 0x9b, 0x71}
 
-
 /*
------------------------------------------------------------------------
  * Driver specific constants.
  */

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Mon Apr 12 15:42:27 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Mon, 12 Apr 2010 15:42:27 +0200
Subject: [Linux-uvc-devel] How do I set PIXELFORMAT for...
In-Reply-To: <53536DD176E21C41B47CE16CBDAC4965343232@bali.aurensis.com>
References: <53536DD176E21C41B47CE16CBDAC4965342E31@bali.aurensis.com>
	<201004121253.21502.laurent.pinchart@ideasonboard.com>
	<53536DD176E21C41B47CE16CBDAC4965343232@bali.aurensis.com>
Message-ID: <201004121542.28150.laurent.pinchart@ideasonboard.com>

Hi Ricardo,

On Monday 12 April 2010 15:16:21 Ricardo Martinez Monje wrote:
> Laurent,
> 
> Thank you very much!!! That Works like a charm...
> 
> $ v4l2-ctl --list-formats
> ioctl: VIDIOC_ENUM_FMT
> 	Index       : 0
> 	Type        : Video Capture
> 	Pixel Format: 'YUYV'
> 	Name        : YUV 4:2:2 (YUYV)
> 
> 	Index       : 1
> 	Type        : Video Capture
> 	Pixel Format: 'Y16 '
> 	Name        : Greyscale (16-bit)

Great. I'll commit the patch. Could you please give me the brand and name of 
the device ?

-- 
Regards,

Laurent Pinchart


From RMartinez at aurensis.com  Mon Apr 12 15:50:45 2010
From: RMartinez at aurensis.com (Ricardo Martinez Monje)
Date: Mon, 12 Apr 2010 15:50:45 +0200
Subject: [Linux-uvc-devel] How do I set PIXELFORMAT for...
In-Reply-To: <201004121542.28150.laurent.pinchart@ideasonboard.com>
References: <53536DD176E21C41B47CE16CBDAC4965342E31@bali.aurensis.com>
	<201004121253.21502.laurent.pinchart@ideasonboard.com>
	<53536DD176E21C41B47CE16CBDAC4965343232@bali.aurensis.com>
	<201004121542.28150.laurent.pinchart@ideasonboard.com>
Message-ID: <53536DD176E21C41B47CE16CBDAC496534323A@bali.aurensis.com>

Thermoteknix (http://www.thermoteknix.com/)

Miricle 307K
(http://www.thermoteknix.com/content/english/thermal_imaging_ir_products
/miricle_thermal_imaging_ir_cameras/index.html)

 

 

Regards,

mtz

 

-----Mensaje original-----
De: Laurent Pinchart [mailto:laurent.pinchart at ideasonboard.com] 
Enviado el: lunes, 12 de abril de 2010 15:42
Para: Ricardo Martinez Monje
CC: linux-uvc-devel at lists.berlios.de
Asunto: Re: [Linux-uvc-devel] How do I set PIXELFORMAT for...

 

Hi Ricardo,

 

On Monday 12 April 2010 15:16:21 Ricardo Martinez Monje wrote:

> Laurent,

> 

> Thank you very much!!! That Works like a charm...

> 

> $ v4l2-ctl --list-formats

> ioctl: VIDIOC_ENUM_FMT

>     Index       : 0

>     Type        : Video Capture

>     Pixel Format: 'YUYV'

>     Name        : YUV 4:2:2 (YUYV)

> 

>     Index       : 1

>     Type        : Video Capture

>     Pixel Format: 'Y16 '

>     Name        : Greyscale (16-bit)

 

Great. I'll commit the patch. Could you please give me the brand and
name of 

the device ?

 

-- 

Regards,

 

Laurent Pinchart

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100412/5e5224ab/attachment.html>

From ian.latter at midnightcode.org  Tue Apr 13 01:45:15 2010
From: ian.latter at midnightcode.org (Ian Latter)
Date: Tue, 13 Apr 2010 09:45:15 +1000
Subject: [Linux-uvc-devel] 16MP or 1.3MP?
Message-ID: <201004122245.o3CMjFSl016098@singularity.tronunltd.com>

Hello,


  My mate and I ran up a test yesterday; and even before we got 
to the test, the camera's native software only saw a 640x480 
device.  The value-add software didn't get to the 4000-odd pixel
sizing mentioned on the box for 16MP but it had something close 
(12MP maybe), but a photo at 640x480 versus one at 
3000xn000 odd pixels were almost identical.  Its clearly 
interpolating values from the camera in the win32 software.

  We did some googling for USB cameras of high resolution, and
learnt three things;

    1.  That there is a market full USB cameras advertised at 
         sizes up to 20MP (and costs less than 99p on UK ebay)
         that are software interpolated (many hide this in small
         print and many don't mention it at all).

    2.  That there are genuine high resolution USB cameras,
         but they appear to be locked up in the industrial
sector,
         such as these 10MP devices, that we found online for
         about EU$900 (note that I recall the biggest that we 
         found was a 14MP industrial camera, but we didn't 
         bookmark it);
        
http://www.ids-imaging.de/frontend/products.php?interface=USB&res=2&lang=e
        
http://www.ids-imaging.de/frontend/products.php?cam_id=28

    3.  That the highest resolution/performing PC-consumer 
         video USB camera seems to be a 720p (1280x720) 
         camera made by Tandberg (press released in 2009);
        
http://www.tandberg.com/video-conferencing-telepresence-peripherals/hd-usb-camera.jsp
        
http://the-gadgeteer.com/2010/03/26/tandberg-precisionhd-usb-video-camera-review/


For our application, given the state of the market, I think we 
will go to Cannon IXUS cameras (probably the IXUS100) which 
we can buy for a little under AU$200; that gives us 12MP photo 
resolution and 720p video.  With the CHDK environment we get 
full control over the device, and the ability to download
images 
via USB;  http://chdk.wikia.com/wiki/CHDK

Thanks for your invite on the camera array; I think it would be 
fun too, but I'm not convinced that I'm going to finish the
current 
project, let alone another one ;-)  FWIW the CHDK firmware 
allows multi-device synchronisation via USB trigger, so you 
could build an array of 12MP devices from consumer parts via 
the cheaper range of Cannon cameras.

Your AI research looks cool - nice work with the cat - I do
miss 
my lego.


Thanks,


----- Original Message -----
>From: "Dr. Alexander K. Seewald" <alex at seewald.at>
>To: <linux-uvc-devel at lists.berlios.de>
>Subject:  Re: [Linux-uvc-devel] 16MP or 1.3MP?
>Date: Sat, 10 Apr 2010 20:31:52 +0200
>
> Hi Ian,
> 
> You won't see a true 16MP USB 2.0 camera because...
> * the bandwidth in YUV mode would be far too high for USB 2.0
> * cheap hardware MJPEG compression chips only do up to
640x480, so
>   most UVC cameras do MJPEG only up to this. I don't think
a 16MP MJPEG
>   compression chips will appear in consumer USB 2.0
cameras anytime
>   soon. These things are still quite expensive... not to
mention the
>   CCD sensors themselves.
> 
> BTW I'm very satisfied with the Logitech QC 9000 Pro which
has a true 2MP
> sensor and reasonable performance (5fps @ 1600x1200 with
YUV due to USB 2.0
> bandwidth restrictions, but 15fps @ 960x720, and 30fps @
800x600 with
> MJPEG) - this is probably as good as it gets for UVC. If
you need higher
> resolution, you could look into camera arrays (at most 2
per dedicated
> USB controller should work) or FireWire cameras (which are
more expensive
> but have better quality MJPEG compression, higher
resolution and more
> bandwidth than USB 2.0)
> 
> I'm not associated in any way with Logitech. If you want
to set up a
> camera array, let me know. This would be fun.
> 
> Best,
>   Alex
> -- 
> Dr. Alexander K. Seewald
> 
> Seewald Solutions
> www.seewald.at
> Tel. +43(664)1106886
> Fax. +43(1)2533033/2764
> 


--
Ian Latter
Late night coder ..
http://midnightcode.org/


From barsnick at gmx.net  Wed Apr 14 13:52:15 2010
From: barsnick at gmx.net (Moritz Barsnick)
Date: Wed, 14 Apr 2010 13:52:15 +0200
Subject: [Linux-uvc-devel] 16MP or 1.3MP?
In-Reply-To: <201004122245.o3CMjFSl016098@singularity.tronunltd.com>
References: <201004122245.o3CMjFSl016098@singularity.tronunltd.com>
Message-ID: <20100414115215.GC30607@sunshine.barsnick.net>

Hi Ian, list,

On Tue, Apr 13, 2010 at 09:45:15 +1000, Ian Latter wrote:
>   My mate and I ran up a test yesterday; and even before we got 
> to the test, the camera's native software only saw a 640x480 
> device.

So just the usual marketing bulls**t, as we had expected. ;-) Can't
Americans sue these kinds of marketers?

>   We did some googling for USB cameras of high resolution, and
> learnt three things;

Excellent, I think this is one of the analyses I have been waiting for
for a long time.

>     3.  That the highest resolution/performing PC-consumer 
>          video USB camera seems to be a 720p (1280x720) 
>          camera made by Tandberg (press released in 2009);

Depending on how you calculate that, several Logitech devices might be
able to compete. At least the resolutions are okay, but I think they
don't actually hit the 30 fps mark at max resolution, though they do at
720p:

http://www.quickcamteam.net/devices/logitech_uvc_frame_format_list.pdf

Note: I don't advocate Logitech, indeed they have built quite some
junk. Furthermore, I believe that other manufacturers may also hit the
30fps at 720p mark.

What's really missing are more reviews and experience reports such as
this:
> http://the-gadgeteer.com/2010/03/26/tandberg-precisionhd-usb-video-camera-review/

And comparisons for quality: lens/sharpness, noise, stability of FPS,
overall stability, and of course linux-uvc compatibility. :-)

> via USB;  http://chdk.wikia.com/wiki/CHDK

Thanks for this very interesting link!
(We have a spare IXUS at home, after my wife upgraded to the excellent
PowerShot SX200 IS. That IXUS should work with CHDK. Could they also
please support Panasonic? :-))

I am still looking for a way to use a digital camera as a remote
control single-shot or video camera - similar to a webcam but with a
better much better sensor and lense, but perhaps less FPS due to
single-shot mode. The gphoto suite does support this for some models,
but I have never owned one which happened to have this gphoto support.
:-/


Thanks,
Moritz


From martijn at uncinc.nl  Wed Apr 14 15:11:07 2010
From: martijn at uncinc.nl (Martijn Houtman)
Date: Wed, 14 Apr 2010 15:11:07 +0200
Subject: [Linux-uvc-devel] 16MP or 1.3MP?
In-Reply-To: <20100414115215.GC30607@sunshine.barsnick.net>
References: <201004122245.o3CMjFSl016098@singularity.tronunltd.com>
	<20100414115215.GC30607@sunshine.barsnick.net>
Message-ID: <9427E4F6-B5FD-4EDF-BB18-9EDB7495C6C3@uncinc.nl>

On Apr 14, 2010, at 1:52 PM, Moritz Barsnick wrote:

> What's really missing are more reviews and experience reports such as
> this:
>> http://the-gadgeteer.com/2010/03/26/tandberg-precisionhd-usb-video-camera-review/
>
> And comparisons for quality: lens/sharpness, noise, stability of FPS,
> overall stability, and of course linux-uvc compatibility. :-)

What I always miss from reviews (and specifications) is the control  
you have over a webcam, i.e. if you can manually set white-balance,  
gain, exposure, focus, etc. For the purposes I use these webcams, it  
is very important to have control over these settings, rather than  
having the camera decide these settings for me.

Although the "supported devices list" is very interesting and useful,  
I would like to see what UVC specs are (not) being implemented by the  
camera.

> I am still looking for a way to use a digital camera as a remote
> control single-shot or video camera - similar to a webcam but with a
> better much better sensor and lense, but perhaps less FPS due to
> single-shot mode. The gphoto suite does support this for some models,
> but I have never owned one which happened to have this gphoto support.


You're probably better of with a firewire camera plus http://damien.douxchamps.net/ieee1394/coriander/ 
  or something.

Regards,
-- 
Martijn Houtman

martijn at uncinc.nl
+31(0)6-15197925
+31(0)20-6892000
Unc Inc
Jacob van Lennepkade 334 X
1053 NJ Amsterdam
www.uncinc.nl



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100414/8eceee4e/attachment.html>

From tingustar at gmail.com  Thu Apr 15 10:57:31 2010
From: tingustar at gmail.com (David Song)
Date: Thu, 15 Apr 2010 16:57:31 +0800
Subject: [Linux-uvc-devel] MSI U130 netbook built-in 1.3M webcam doesn't
	work!
Message-ID: <u2tc85db8ca1004150157ud2bc642ufba0750fe4e1e4c6@mail.gmail.com>

Hi all,

I have a MSI U130 netbook with a built-in 1.3M pixels webcam.
Unfortunately, however, this webcam is not recognized by uvcvideo
driver. Can anyone help me to enable it up? Thanks.
Btw, my kernel version is 2.6.33.1.

-David


From kgy at teledigit.hu  Thu Apr 15 13:46:52 2010
From: kgy at teledigit.hu (=?iso-8859-1?q?K=F6vesdi_Gy=F6rgy?=)
Date: Thu, 15 Apr 2010 13:46:52 +0200
Subject: [Linux-uvc-devel] wanted: camera handler library
Message-ID: <201004151346.52925.kgy@teledigit.hu>

Hi,

Is there a generic library to handle UVC (or other type of) cameras?
I see such one on the Logitech web site, which is probably Logitech-specific, 
and hard to compile (at least for me).

Thx
K. Gy.


From pj.assis at gmail.com  Thu Apr 15 14:36:20 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Thu, 15 Apr 2010 13:36:20 +0100
Subject: [Linux-uvc-devel] wanted: camera handler library
In-Reply-To: <201004151346.52925.kgy@teledigit.hu>
References: <201004151346.52925.kgy@teledigit.hu>
Message-ID: <n2g59cf47a81004150536m1b6259f1xe945ad45ef87b161@mail.gmail.com>

Hi,
There is libv4l for c and I'm currently developing a c++ framework
consisting of several libraries for v4l2 access and encoding,
rendering etc.

if you are interested you can get the code with git:
git clone git://git.berlios.de/gvideo


It's still under development but most of the functionality is already
in place and working.
Best regards,
Paulo

2010/4/15 K?vesdi Gy?rgy <kgy at teledigit.hu>:
> Hi,
>
> Is there a generic library to handle UVC (or other type of) cameras?
> I see such one on the Logitech web site, which is probably Logitech-specific,
> and hard to compile (at least for me).
>
> Thx
> K. Gy.
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From pj.assis at gmail.com  Thu Apr 15 14:39:32 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Thu, 15 Apr 2010 13:39:32 +0100
Subject: [Linux-uvc-devel] MSI U130 netbook built-in 1.3M webcam doesn't
	work!
In-Reply-To: <u2tc85db8ca1004150157ud2bc642ufba0750fe4e1e4c6@mail.gmail.com>
References: <u2tc85db8ca1004150157ud2bc642ufba0750fe4e1e4c6@mail.gmail.com>
Message-ID: <s2w59cf47a81004150539n9b4d683at4894d83ba1efeaf@mail.gmail.com>

David Hi,
Maybe the camera it's not uvc compatible, you can check it with lsusb.

Best Regards,
Paulo

2010/4/15 David Song <tingustar at gmail.com>:
> Hi all,
>
> I have a MSI U130 netbook with a built-in 1.3M pixels webcam.
> Unfortunately, however, this webcam is not recognized by uvcvideo
> driver. Can anyone help me to enable it up? Thanks.
> Btw, my kernel version is 2.6.33.1.
>
> -David
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From mcamurli at hotmail.com  Fri Apr 16 09:06:48 2010
From: mcamurli at hotmail.com (Mustafa CAMURLI)
Date: Fri, 16 Apr 2010 10:06:48 +0300
Subject: [Linux-uvc-devel] Question about crash issue
In-Reply-To: <SNT106-DS20201D2B7241AB9C3156E3CF0F0@phx.gbl>
References: <SNT106-DS20201D2B7241AB9C3156E3CF0F0@phx.gbl>
Message-ID: <SNT106-W1CDE2A49AE6A38FF8DF38CF0E0@phx.gbl>


Hi everyone,
 
I am Mustafa from Turkey. I have a school project named 
"eye-tracker and viewer" in this semester. I have two cameras. One for 
retrieving eye frames to find where pupil is, second for viewer frame where the 
user looking at. So, we are using opencv in order to grap frames and for vision 
functionalities. In Windows, surprisingly, we can grab frames both 
cameras, but unfortunately, in Linux we can't. We 
can open just one camera at the same time. When we try to grab a frame from 
second one, "VIDIOC_STREAMON no left memory on the device 28" error occurs. 
Please help us for this problem. If you need any additional info, 
just reply this mail. 
 
Thanks you very much.

-- 
Mustafa CAMURLI



AirTies

Wireless life

___________________________________________



AirTies Wireless Networks 
G?lbahar Mah. Avni Dilligil Sok.

?elik Is Merkezi No:5 Mecidiyekoy

Istanbul, Turkey

Tel       +90 212 318 62 00



email     mustafac at airties.com

_____________________________________________

_____________________________________________



Gebze Institute Of Technology

Computer Engineering



Istanbul Caddesi No:101 41400, 
Gebze, Kocaeli T?rkiye

Tel: +90 (262) 605 22 43



email mcamurli at gyte.edu.tr







 		 	   		  
_________________________________________________________________
Yeni Windows 7: Size en uygun bilgisayar? bulun. Daha fazla bilgi edinin.
http://windows.microsoft.com/shop
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100416/cd91fbc8/attachment.html>

From hdegoede at redhat.com  Sat Apr 17 13:10:51 2010
From: hdegoede at redhat.com (Hans de Goede)
Date: Sat, 17 Apr 2010 13:10:51 +0200
Subject: [Linux-uvc-devel] MSI U130 netbook built-in 1.3M webcam doesn't
 work!
In-Reply-To: <u2tc85db8ca1004150157ud2bc642ufba0750fe4e1e4c6@mail.gmail.com>
References: <u2tc85db8ca1004150157ud2bc642ufba0750fe4e1e4c6@mail.gmail.com>
Message-ID: <4BC9973B.3010905@redhat.com>

Hi,

On 04/15/2010 10:57 AM, David Song wrote:
> Hi all,
>
> I have a MSI U130 netbook with a built-in 1.3M pixels webcam.
> Unfortunately, however, this webcam is not recognized by uvcvideo
> driver. Can anyone help me to enable it up? Thanks.
> Btw, my kernel version is 2.6.33.1.
>

The MSI U1xx series allow turning the webcam on / off with the Fn + F6 key
combi. Make sure the webcam is present in the output of the "lsusb" command
and if not press Fn + F6 and try again.

Regards,

Hans


From palmax at gmail.com  Sat Apr 24 01:04:43 2010
From: palmax at gmail.com (Palmax Maverick)
Date: Sat, 24 Apr 2010 01:04:43 +0200
Subject: [Linux-uvc-devel] [Linux-uvc] [UVC] Searching my webcam
Message-ID: <l2x209499a1004231604zbae12296o56dfd921974a0bf9@mail.gmail.com>

Hello Laurent and others linux-uvc developers,


I want to know what is the "struct usb_device *udev" of my webcam.
Have I to search in /sys/devices/pciXXXX:XX/XXXX:XX:XX:XX/usbX/
directory?
I think that you should know a function that helps me in this work :-).

I need it because I want to get some control information of my webcam:
maximum packet sizes, resolutions of still image formats, ...
I think that I should use uvc_probe_video for getting this
information, after I uvc_init_video my webcam.

Thanks
Palmax


From laurent.pinchart at ideasonboard.com  Sun Apr 25 20:41:20 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Sun, 25 Apr 2010 20:41:20 +0200
Subject: [Linux-uvc-devel] Question about crash issue
In-Reply-To: <SNT106-W1CDE2A49AE6A38FF8DF38CF0E0@phx.gbl>
References: <SNT106-DS20201D2B7241AB9C3156E3CF0F0@phx.gbl>
	<SNT106-W1CDE2A49AE6A38FF8DF38CF0E0@phx.gbl>
Message-ID: <201004252041.20794.laurent.pinchart@ideasonboard.com>

Hi Mustafa,

Sorry for the late reply.

On Friday 16 April 2010 09:06:48 Mustafa CAMURLI wrote:
> Hi everyone,
> 
> I am Mustafa from Turkey. I have a school project named "eye-tracker and
> viewer" in this semester. I have two cameras. One for retrieving eye frames
> to find where pupil is, second for viewer frame where the user looking at.
> So, we are using opencv in order to grap frames and for vision
> functionalities. In Windows, surprisingly, we can grab frames both cameras,
> but unfortunately, in Linux we can't. We can open just one camera at the
> same time. When we try to grab a frame from second one, "VIDIOC_STREAMON no
> left memory on the device 28" error occurs. Please help us for this problem.
> If you need any additional info, just reply this mail.

Error 28 is ENOSPC. This means the operation you tried to perform would use 
more USB bandwidth than available. This is usually the case when you capture 
uncompressed high-resolution video from two webcams simultaneously.

You could try to select a smaller frame size, or use a compressed format if 
your cameras support that (many UVC camera support MJPEG).

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Sun Apr 25 21:02:51 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Sun, 25 Apr 2010 21:02:51 +0200
Subject: [Linux-uvc-devel] [Linux-uvc] [UVC] Searching my webcam
In-Reply-To: <l2x209499a1004231604zbae12296o56dfd921974a0bf9@mail.gmail.com>
References: <l2x209499a1004231604zbae12296o56dfd921974a0bf9@mail.gmail.com>
Message-ID: <201004252102.51682.laurent.pinchart@ideasonboard.com>

Hi Palmax,

On Saturday 24 April 2010 01:04:43 Palmax Maverick wrote:
> Hello Laurent and others linux-uvc developers,
> 
> I want to know what is the "struct usb_device *udev" of my webcam.
> Have I to search in /sys/devices/pciXXXX:XX/XXXX:XX:XX:XX/usbX/
> directory?
> I think that you should know a function that helps me in this work :-).
> 
> I need it because I want to get some control information of my webcam:
> maximum packet sizes, resolutions of still image formats, ...
> I think that I should use uvc_probe_video for getting this
> information, after I uvc_init_video my webcam.

The usb_device structure represents the USB device in kernel space. The 
uvcvideo driver receives a pointer to a USB interface in its probe function, 
and gets the USB device pointer for that interface. The USB device is then 
used for various purposes, such as printing messages to the kernel log.

You can get to the USB interface in sysfs through the 
/sys/class/video4linux/videoX/device symlink. The parent of that device is the 
USB device.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Sun Apr 25 21:07:40 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Sun, 25 Apr 2010 21:07:40 +0200
Subject: [Linux-uvc-devel] support for high speed uvc cam in USB 1.1
In-Reply-To: <m2u690b911e1004120546r2a7455fcg80b91c7021ca14dc@mail.gmail.com>
References: <m2u690b911e1004120546r2a7455fcg80b91c7021ca14dc@mail.gmail.com>
Message-ID: <201004252107.41244.laurent.pinchart@ideasonboard.com>

Hi Nitesh,

On Monday 12 April 2010 14:46:38 nitesh suthar wrote:
> dear all,

As your greetings message mentions "all", I suppose you meant to CC the linux-
uvc-devel list. I've done so in this reply.

> I have a High speed UVC cam , which is working properly in USB 2.0 but
> camera is not working in USB 1.1
> Is there any solution or process by which we can achieve that same camera
> which is working in usb 2.0, will work properly in usb 1.1 too.
> 
> I want to make camera workable with usb 1.1 . So please guide me how to
> proceed with it .

USB 1.1 has a much lower bandwidth than USB 2.0 (or, to be accurate, USB 2.0 
supports high-speed USB mode which offers a much higher bandwidth than what 
full-speed in USB 1.1 can offer). You can't thus expect a USB 2.0 camera that 
uses high-speed mode to transfer high-resolution uncompressed data to offer 
the same performances when connected to a USB 1.1 host.

Most UVC cameras will work when connected to a USB 1.1 host, in a smaller 
resolution or in a compressed format (MJPEG). Some are buggy and don't work at 
all with USB 1.1, and there's not much we can do about it.

How does your camera fail to work exactly ?

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Sun Apr 25 21:12:06 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Sun, 25 Apr 2010 21:12:06 +0200
Subject: [Linux-uvc-devel] problems with uvc cameras and gstreamer on
	gentoo
In-Reply-To: <201003312100.31136.chris@basementcode.com>
References: <201003100240.14189.chris@basementcode.com>
	<201003311811.47840.laurent.pinchart@ideasonboard.com>
	<201003312100.31136.chris@basementcode.com>
Message-ID: <201004252112.07320.laurent.pinchart@ideasonboard.com>

Hi Christopher,

On Thursday 01 April 2010 03:00:31 Christopher Harvey wrote:
> No worries with reply time.
> 
> I used modprobe uvcvideo quriks=2
> 
> the output is the same, with the addition of :
> [19551.461076] uvcvideo: Found UVC 1.00 device <unnamed> (046d:08ca)
> [19551.461080] uvcvideo: Forcing device quirks 0x2 by module parameter for
> testing purpose.
> [19551.461082] uvcvideo: Please report required quirks to the
> linux-uvc-devel mailing list.

That's weird. The

uvcvideo: Failed to query (131) UVC probe control : -32 (exp. 26).

message you got shouldn't be printed anymore, as quirk 2 prevents the driver 
from issuing the GET_MAX request (131). Could you please double-check ? What 
kernel version are you using (assuming the uvcvideo driver comes from the 
kernel ebuild) ?

> I've never messed with kernel modules before, but if you want I can
> compile/patch code from source to figure this out.

-- 
Regards,

Laurent Pinchart


From djmuhlestein at gmail.com  Mon Apr 26 22:43:39 2010
From: djmuhlestein at gmail.com (Dennis Muhlestein)
Date: Mon, 26 Apr 2010 14:43:39 -0600
Subject: [Linux-uvc-devel] Multiple camera framerate.
Message-ID: <4BD5FAFB.9080201@gmail.com>

I have a project I've been playing with that uses a number of cameras to 
construct video from 360 degrees.  All cameras can be configured as long 
as I don't overload the underlying ISO bandwidth limits.  ("No space 
left on device." has been discussed a few times on this list.)

The application works well, but I'd like to experiment with making the 
video quality better.  There is always some sheering when the cameras 
are moving but the higher framerate I can capture at, the less the 
sheering effect will degrade the video quality.

Can anyone suggest a way to configure the cameras at a higher framerate 
without overloading the USB bus?  Suppose I can read at 10 fps right now 
without overloading the USB bus.  I'd like to set the framerate to 15, 
but still just capture around 10.

Any thoughts?

Thanks
Dennis


From philippe.huyang at sagem.com  Tue Apr 27 11:50:33 2010
From: philippe.huyang at sagem.com (HU YANG Philippe (SAGEM SECURITE))
Date: Tue, 27 Apr 2010 11:50:33 +0200
Subject: [Linux-uvc-devel] (no subject)
Message-ID: <4CA15D3E4C4D054889655862AC2C45E84270A74B44@Y000IIIV01.rd1.rf1>

Hi,
I use a webcam for linux and I need the executable driver uvc.
Could you send me this data please?

Kind regards.
Phil


#
" Ce courriel et les documents qui lui sont joints peuvent contenir des
informations confidentielles ou ayant un caract?re priv?. S'ils ne vous sont
pas destin?s, nous vous signalons qu'il est strictement interdit de les
divulguer, de les reproduire ou d'en utiliser de quelque mani?re que ce
soit le contenu. Si ce message vous a ?t? transmis par erreur, merci d'en
informer l'exp?diteur et de supprimer imm?diatement de votre syst?me
informatique ce courriel ainsi que tous les documents qui y sont attach?s."
								******
" This e-mail and any attached documents may contain confidential or
proprietary information. If you are not the intended recipient, you are
notified that any dissemination, copying of this e-mail and any attachments
thereto or use of their contents by any means whatsoever is strictly
prohibited. If you have received this e-mail in error, please advise the
sender immediately and delete this e-mail and all attached documents
from your computer system."
#
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20100427/0d7b29f3/attachment.html>

From alex at seewald.at  Tue Apr 27 12:08:47 2010
From: alex at seewald.at (Dr. Alexander K. Seewald)
Date: Tue, 27 Apr 2010 12:08:47 +0200
Subject: [Linux-uvc-devel] Multiple camera framerate.
Message-ID: <20100427100847.GB3540@sdg.at>

Hi Dennis,

I don't think it is possible to decouple the recording frame rate
from the output framerate, at least not with the UVC firmware out
there. But you could try to switch off auto exposure and set it
manually if your cameras expose this control. A smaller exposure
time should IMHO also solve your problem at the cost of getting
slightly darker images (you can fix this by increasing lighting ;-)

Best,
  Alex
-- 
Dr. Alexander K. Seewald

Seewald Solutions
www.seewald.at
Tel. +43(664)1106886
Fax. +43(1)2533033/2764


From pj.assis at gmail.com  Tue Apr 27 12:24:13 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Tue, 27 Apr 2010 11:24:13 +0100
Subject: [Linux-uvc-devel] (no subject)
In-Reply-To: <4CA15D3E4C4D054889655862AC2C45E84270A74B44@Y000IIIV01.rd1.rf1>
References: <4CA15D3E4C4D054889655862AC2C45E84270A74B44@Y000IIIV01.rd1.rf1>
Message-ID: <n2o59cf47a81004270324le0888585l266134a79e539fc9@mail.gmail.com>

Phil,
you can get the linux uvc driver with mercurial (hg) from linuxtv.org,
just follow the how-to:
http://www.linuxtv.org/wiki/index.php/How_to_Obtain,_Build_and_Install_V4L-DVB_Device_Drivers

Best Regards,
Paulo

2010/4/27 HU YANG Philippe (SAGEM SECURITE) <philippe.huyang at sagem.com>:
> Hi,
>
> I use a webcam for linux and I need the executable driver uvc.
>
> Could you send me this data please?
>
>
>
> Kind regards.
>
> Phil
>
>
>
>
>
> #
> " Ce courriel et les documents qui lui sont joints peuvent contenir des
> informations confidentielles ou ayant un caract?re priv?. S'ils ne vous sont
> pas destin?s, nous vous signalons qu'il est strictement interdit de les
> divulguer, de les reproduire ou d'en utiliser de quelque mani?re que ce
> soit le contenu. Si ce message vous a ?t? transmis par erreur, merci d'en
> informer l'exp?diteur et de supprimer imm?diatement de votre syst?me
> informatique ce courriel ainsi que tous les documents qui y sont attach?s."
> ??? ??? ??? ??? ??? ??? ??? ??? ******
> " This e-mail and any attached documents may contain confidential or
> proprietary information. If you are not the intended recipient, you are
> notified that any dissemination, copying of this e-mail and any attachments
> thereto or use of their contents by any means whatsoever is strictly
> prohibited. If you have received this e-mail in error, please advise the
> sender immediately and delete this e-mail and all attached documents
> from your computer system."
> #
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>


From ian.latter at midnightcode.org  Tue Apr 27 13:34:38 2010
From: ian.latter at midnightcode.org (Ian Latter)
Date: Tue, 27 Apr 2010 21:34:38 +1000
Subject: [Linux-uvc-devel] Multiple camera framerate.
Message-ID: <201004271034.o3RAYc9f007644@singularity.tronunltd.com>

Hello,

  Do they need to be simultaneous?  I.e. from your
description, ideally they would be, but then the higher
the frame-rate the lesser the delta between frames
(assuming your solution moves slowly or observes
something that moves slowly).

  Implementation could be interesting.  I don't know what 
UVC does when you don't de-queue the capture buffer 
(VIDIOC_DQBUF), whether the camera captures 
frames but doesn't send them to the host over the wire,
or whether the camera captures frames and sends 
them to the host to have the host UVC driver dump 
them.

      *However* 

  Assuming the former; you could try setting the 
frame rate that you want on all of the cameras in
your solution, then running a "capture" thread that
walks the cameras sequentially in a 10-cameras-per-
second walk to DQ them.
  If you think you can sustain multiple cameras 
simultaneously, then you could kick off (concurrency) 
"capture" threads of 10-cameras-per-second for 
(total/concurrency) cameras each. 

  This is silly - I don't remember the timing models - 
you should be able to kick off a thread per camera 
and use a mutex to prevent unwanted simultanety, and
then use signals with select(?) in each thread to 
manage its own timing .. or did that result in a signal
for the process, rather than the thread .. hmm .. maybe
you should be mixing both ideas.

  Either way do any further image handling in a 
"processing" thread to keep your image handling out
of your capture timing ...


Chalk it up as one thought ;-)



----- Original Message -----
>From: "Dennis Muhlestein" <djmuhlestein at gmail.com>
>To: <linux-uvc-devel at lists.berlios.de>
>Subject:  [Linux-uvc-devel] Multiple camera framerate.
>Date: Mon, 26 Apr 2010 14:43:39 -0600
>
> I have a project I've been playing with that uses a number
of cameras to 
> construct video from 360 degrees.  All cameras can be
configured as long 
> as I don't overload the underlying ISO bandwidth limits. 
("No space 
> left on device." has been discussed a few times on this list.)
> 
> The application works well, but I'd like to experiment
with making the 
> video quality better.  There is always some sheering when
the cameras 
> are moving but the higher framerate I can capture at, the
less the 
> sheering effect will degrade the video quality.
> 
> Can anyone suggest a way to configure the cameras at a
higher framerate 
> without overloading the USB bus?  Suppose I can read at 10
fps right now 
> without overloading the USB bus.  I'd like to set the
framerate to 15, 
> but still just capture around 10.
> 
> Any thoughts?
> 
> Thanks
> Dennis
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 


--
Ian Latter
Late night coder ..
http://midnightcode.org/


From pj.assis at gmail.com  Tue Apr 27 12:52:58 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Tue, 27 Apr 2010 11:52:58 +0100
Subject: [Linux-uvc-devel] Multiple camera framerate.
In-Reply-To: <4BD5FAFB.9080201@gmail.com>
References: <4BD5FAFB.9080201@gmail.com>
Message-ID: <w2r59cf47a81004270352weaf206dcl167f41807728b895@mail.gmail.com>

Dennis,

> Can anyone suggest a way to configure the cameras at a higher framerate
> without overloading the USB bus? ?Suppose I can read at 10 fps right now
> without overloading the USB bus. ?I'd like to set the framerate to 15, but
> still just capture around 10.

You can grab frames at whatever speed you want, but it's the camera
framerate that will make a difference in the usb bandwidth and not the
amount of frames you get with your application.
Is the 10 fps limit achieved with compressed (MJPG) or uncompressed
(YUV) frames ?
Using compressed frames should allow for much higher framerates when
using multiple cameras. Resolution will also have an impact on the
bandwidth.
Another alternative is to add another usb controler to you system, (a
usb pci card if you are using a standard pc).
As an example using MJPG I have no problem in using 3 cameras
simultaneous (800x600 at 20 fps)


Best Regards,
Paulo


From ian.latter at midnightcode.org  Tue Apr 27 14:31:59 2010
From: ian.latter at midnightcode.org (Ian Latter)
Date: Tue, 27 Apr 2010 22:31:59 +1000
Subject: [Linux-uvc-devel] Multiple camera framerate.
Message-ID: <201004271131.o3RBVxCM007900@singularity.tronunltd.com>

> You can grab frames at whatever speed you want, but it's
the camera
> framerate that will make a difference in the usb bandwidth
and not the
> amount of frames you get with your application.

So, if you don't take a frame from the UVC driver, it will
simply
continue to refresh an internal buffer with new frames from the
camera device?



--
Ian Latter
Late night coder ..
http://midnightcode.org/


From pj.assis at gmail.com  Tue Apr 27 13:48:37 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Tue, 27 Apr 2010 12:48:37 +0100
Subject: [Linux-uvc-devel] Multiple camera framerate.
In-Reply-To: <201004271131.o3RBVxCM007900@singularity.tronunltd.com>
References: <201004271131.o3RBVxCM007900@singularity.tronunltd.com>
Message-ID: <i2r59cf47a81004270448mc32a01a7x6d93575f95f62f15@mail.gmail.com>

Ian

2010/4/27 Ian Latter <ian.latter at midnightcode.org>:
>> You can grab frames at whatever speed you want, but it's
> the camera
>> framerate that will make a difference in the usb bandwidth
> and not the
>> amount of frames you get with your application.
>
> So, if you don't take a frame from the UVC driver, it will
> simply
> continue to refresh an internal buffer with new frames from the
> camera device?

Think of it like this, the necessary bandwidth is requested by the
device and it will depend on the compression, resolution and
framerate, in fact I think some ("buggy") devices will always request
the maximum bandwidth causing problems on initialization, for these
devices I think uvcvideo uses it's own algorithm to calc the necessary
bandwidth.

Also the device will always try to dispatch frames at the requested
framerate, if you don't grab them they will simply be dropped by the
driver.

Best regards,
Paulo


From ian.latter at midnightcode.org  Tue Apr 27 15:27:31 2010
From: ian.latter at midnightcode.org (Ian Latter)
Date: Tue, 27 Apr 2010 23:27:31 +1000
Subject: [Linux-uvc-devel] Multiple camera framerate.
Message-ID: <201004271227.o3RCRVno008151@singularity.tronunltd.com>


Nice.  Thanks Paulo.

Disregard my dodgy idea.  I'd say multiple USB buses will be
the 
only way to scale around the problem.



----- Original Message -----
>From: "Paulo Assis" <pj.assis at gmail.com>
>To: "Ian Latter" <ian.latter at midnightcode.org>
>Subject:  Re: [Linux-uvc-devel] Multiple camera framerate.
>Date: Tue, 27 Apr 2010 12:48:37 +0100
>
> Ian
> 
> 2010/4/27 Ian Latter <ian.latter at midnightcode.org>:
> >> You can grab frames at whatever speed you want, but it's
> > the camera
> >> framerate that will make a difference in the usb bandwidth
> > and not the
> >> amount of frames you get with your application.
> >
> > So, if you don't take a frame from the UVC driver, it will
> > simply
> > continue to refresh an internal buffer with new frames
from the
> > camera device?
> 
> Think of it like this, the necessary bandwidth is
requested by the
> device and it will depend on the compression, resolution and
> framerate, in fact I think some ("buggy") devices will
always request
> the maximum bandwidth causing problems on initialization,
for these
> devices I think uvcvideo uses it's own algorithm to calc
the necessary
> bandwidth.
> 
> Also the device will always try to dispatch frames at the
requested
> framerate, if you don't grab them they will simply be
dropped by the
> driver.
> 
> Best regards,
> Paulo
> 


--
Ian Latter
Late night coder ..
http://midnightcode.org/


From pj.assis at gmail.com  Tue Apr 27 15:13:10 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Tue, 27 Apr 2010 14:13:10 +0100
Subject: [Linux-uvc-devel] (no subject)
In-Reply-To: <4CA15D3E4C4D054889655862AC2C45E84270AA9105@Y000IIIV01.rd1.rf1>
References: <4CA15D3E4C4D054889655862AC2C45E84270A74B44@Y000IIIV01.rd1.rf1>
	<n2o59cf47a81004270324le0888585l266134a79e539fc9@mail.gmail.com>
	<4CA15D3E4C4D054889655862AC2C45E84270AA9105@Y000IIIV01.rd1.rf1>
Message-ID: <j2u59cf47a81004270613ye3ca60c8y670ea8209eed913a@mail.gmail.com>

Phil,
mercurial is just the version control system used by linuxtv, if you
want you can also download a tarball with the code from here:
http://linuxtv.org/hg/~pinchartl/uvcvideo/archive/tip.tar.gz

Note however that uvc is integrated in the kernel since 2.6.27, so if
you are using a recent kernel version you really don't need to build
it from source.

Best Regards,
Paulo

2010/4/27 HU YANG Philippe (SAGEM SECURITE) <philippe.huyang at sagem.com>:
> Thanks for your reply, but I can't find it, so could you send me all the data I need to make my webcam available please? I mean mercurial and uvc driver.
>
>
> -----Original Message-----
> From: Paulo Assis [mailto:pj.assis at gmail.com]
> Sent: Tuesday, April 27, 2010 12:24 PM
> To: HU YANG Philippe (SAGEM SECURITE)
> Cc: linux-uvc-devel at lists.berlios.de
> Subject: Re: [Linux-uvc-devel] (no subject)
>
> Phil,
> you can get the linux uvc driver with mercurial (hg) from linuxtv.org,
> just follow the how-to:
> http://www.linuxtv.org/wiki/index.php/How_to_Obtain,_Build_and_Install_V4L-DVB_Device_Drivers
>
> Best Regards,
> Paulo
>
> 2010/4/27 HU YANG Philippe (SAGEM SECURITE) <philippe.huyang at sagem.com>:
>> Hi,
>>
>> I use a webcam for linux and I need the executable driver uvc.
>>
>> Could you send me this data please?
>>
>>
>>
>> Kind regards.
>>
>> Phil
>>
>>
>>
>>
>>
>> #
>> " Ce courriel et les documents qui lui sont joints peuvent contenir des
>> informations confidentielles ou ayant un caract?re priv?. S'ils ne vous sont
>> pas destin?s, nous vous signalons qu'il est strictement interdit de les
>> divulguer, de les reproduire ou d'en utiliser de quelque mani?re que ce
>> soit le contenu. Si ce message vous a ?t? transmis par erreur, merci d'en
>> informer l'exp?diteur et de supprimer imm?diatement de votre syst?me
>> informatique ce courriel ainsi que tous les documents qui y sont attach?s."
>> ??? ??? ??? ??? ??? ??? ??? ??? ******
>> " This e-mail and any attached documents may contain confidential or
>> proprietary information. If you are not the intended recipient, you are
>> notified that any dissemination, copying of this e-mail and any attachments
>> thereto or use of their contents by any means whatsoever is strictly
>> prohibited. If you have received this e-mail in error, please advise the
>> sender immediately and delete this e-mail and all attached documents
>> from your computer system."
>> #
>>
>> _______________________________________________
>> Linux-uvc-devel mailing list
>> Linux-uvc-devel at lists.berlios.de
>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>
>>
> #
> " Ce courriel et les documents qui lui sont joints peuvent contenir des
> informations confidentielles ou ayant un caract?re priv?. S'ils ne vous sont
> pas destin?s, nous vous signalons qu'il est strictement interdit de les
> divulguer, de les reproduire ou d'en utiliser de quelque mani?re que ce
> soit le contenu. Si ce message vous a ?t? transmis par erreur, merci d'en
> informer l'exp?diteur et de supprimer imm?diatement de votre syst?me
> informatique ce courriel ainsi que tous les documents qui y sont attach?s."
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?******
> " This e-mail and any attached documents may contain confidential or
> proprietary information. If you are not the intended recipient, you are
> notified that any dissemination, copying of this e-mail and any attachments
> thereto or use of their contents by any means whatsoever is strictly
> prohibited. If you have received this e-mail in error, please advise the
> sender immediately and delete this e-mail and all attached documents
> from your computer system."
> #
>
>


From laurent.pinchart at ideasonboard.com  Tue Apr 27 16:27:29 2010
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Tue, 27 Apr 2010 16:27:29 +0200
Subject: [Linux-uvc-devel] (no subject)
In-Reply-To: <j2u59cf47a81004270613ye3ca60c8y670ea8209eed913a@mail.gmail.com>
References: <4CA15D3E4C4D054889655862AC2C45E84270A74B44@Y000IIIV01.rd1.rf1>
	<4CA15D3E4C4D054889655862AC2C45E84270AA9105@Y000IIIV01.rd1.rf1>
	<j2u59cf47a81004270613ye3ca60c8y670ea8209eed913a@mail.gmail.com>
Message-ID: <201004271627.30035.laurent.pinchart@ideasonboard.com>

On Tuesday 27 April 2010 15:13:10 Paulo Assis wrote:
> Phil,
> mercurial is just the version control system used by linuxtv, if you
> want you can also download a tarball with the code from here:
> http://linuxtv.org/hg/~pinchartl/uvcvideo/archive/tip.tar.gz

The UVC driver now uses git for development. You then have two options:

- checkout the latest driver sources from the git tree at 
http://git.linuxtv.org/pinchartl/uvcvideo.git

- get the latest v4l-dvb hg snapshot at http://linuxtv.org/hg/v4l-dvb/

The former will require recompiling the whole kernel, while the later will let 
you update the v4l-dvb subsystem completely (highly recommended for end 
users).

> Note however that uvc is integrated in the kernel since 2.6.27, so if
> you are using a recent kernel version you really don't need to build
> it from source.

-- 
Regards,

Laurent Pinchart


From djmuhlestein at gmail.com  Tue Apr 27 17:07:09 2010
From: djmuhlestein at gmail.com (Dennis Muhlestein)
Date: Tue, 27 Apr 2010 09:07:09 -0600
Subject: [Linux-uvc-devel] Multiple camera framerate.
In-Reply-To: <w2r59cf47a81004270352weaf206dcl167f41807728b895@mail.gmail.com>
References: <4BD5FAFB.9080201@gmail.com>
	<w2r59cf47a81004270352weaf206dcl167f41807728b895@mail.gmail.com>
Message-ID: <4BD6FD9D.9010702@gmail.com>

On 04/27/2010 04:52 AM, Paulo Assis wrote:
> Dennis,
>
>> Can anyone suggest a way to configure the cameras at a higher framerate
>> without overloading the USB bus?  Suppose I can read at 10 fps right now
>> without overloading the USB bus.  I'd like to set the framerate to 15, but
>> still just capture around 10.
>
> You can grab frames at whatever speed you want, but it's the camera
> framerate that will make a difference in the usb bandwidth and not the
> amount of frames you get with your application.

This is correct.  No matter what speed I dequeue buffers at, if the 
cameras are configured to capture at 15 fps I can't start more than 
about 3 at a time.  The rest will error with "No space left on device" 
which is passed up from the usb layer when the UVC drivers tries to 
queue the USB URBs.  (Note that the error happens when URBs are 
submitted, not when the interface is claimed, which tells me that 
perhaps there is a way modify something in the kernel to not submit as 
many URBs but still capture the images from all the cameras since it's 
at the point the interface is claimed that the camera is ready to send 
images at 15 fps.)

> Is the 10 fps limit achieved with compressed (MJPG) or uncompressed
> (YUV) frames ?

MJPG.  I can read a lot more frames/sec with MJPG than with YUYV.

> Using compressed frames should allow for much higher framerates when
> using multiple cameras. Resolution will also have an impact on the
> bandwidth.

True again.  I can read up to 20 fps with 8 cameras in VGA mode.  I'm 
interested in capturing as high a resolution as possible.  Above 960x720 
and I can only do 10 fps before the bandwidth limit.

> Another alternative is to add another usb controler to you system, (a
> usb pci card if you are using a standard pc).
> As an example using MJPG I have no problem in using 3 cameras
> simultaneous (800x600 at 20 fps)
>

It's actually an embedded device.  I am using an external hub to connect 
the cameras but there is only one USB bus on the base unit.  I'm not 
sure exactly where the "No space left on device" error is originating. 
Anyone know if this is an error propagated back from the physical USB 
hub or if somewhere in the kernel there is code attempting to follow the 
USB spec and not allocate over a certain percentage of the bandwidth to 
ISO endpoints?

-Dennis


From djmuhlestein at gmail.com  Tue Apr 27 17:26:07 2010
From: djmuhlestein at gmail.com (Dennis Muhlestein)
Date: Tue, 27 Apr 2010 09:26:07 -0600
Subject: [Linux-uvc-devel] Multiple camera framerate.
In-Reply-To: <20100427100847.GB3540@sdg.at>
References: <20100427100847.GB3540@sdg.at>
Message-ID: <4BD7020F.1020709@gmail.com>

On 04/27/2010 04:08 AM, Dr. Alexander K. Seewald wrote:
> Hi Dennis,
>
> I don't think it is possible to decouple the recording frame rate
> from the output framerate, at least not with the UVC firmware out
> there. But you could try to switch off auto exposure and set it
> manually if your cameras expose this control. A smaller exposure
> time should IMHO also solve your problem at the cost of getting
> slightly darker images (you can fix this by increasing lighting ;-)
>

Exposure would help with motion blur, but the shearing problem is 
specifically due to the framerate.  We're actually not having a problem 
with motion blur when just leaving the cameras in their auto exposure mode.

Thanks
Dennis


From djmuhlestein at gmail.com  Tue Apr 27 18:19:01 2010
From: djmuhlestein at gmail.com (Dennis Muhlestein)
Date: Tue, 27 Apr 2010 10:19:01 -0600
Subject: [Linux-uvc-devel] Multiple camera framerate.
In-Reply-To: <i2r59cf47a81004270448mc32a01a7x6d93575f95f62f15@mail.gmail.com>
References: <201004271131.o3RBVxCM007900@singularity.tronunltd.com>
	<i2r59cf47a81004270448mc32a01a7x6d93575f95f62f15@mail.gmail.com>
Message-ID: <4BD70E75.8060804@gmail.com>

On 04/27/2010 05:48 AM, Paulo Assis wrote:
> Ian
>
> 2010/4/27 Ian Latter<ian.latter at midnightcode.org>:
>>> You can grab frames at whatever speed you want, but it's
>> the camera
>>> framerate that will make a difference in the usb bandwidth
>> and not the
>>> amount of frames you get with your application.
>>
>> So, if you don't take a frame from the UVC driver, it will
>> simply
>> continue to refresh an internal buffer with new frames from the
>> camera device?
>
> Think of it like this, the necessary bandwidth is requested by the
> device and it will depend on the compression, resolution and
> framerate, in fact I think some ("buggy") devices will always request
> the maximum bandwidth causing problems on initialization, for these
> devices I think uvcvideo uses it's own algorithm to calc the necessary
> bandwidth.

Do the number of URBs have any effect at all?  I made an initial attempt 
to check this a while back by recompiling the driver with UVC_URBS as 1 
or 2 instead of 5.  Changed the MAX_ISO_PACKETS a lot smaller too.  I 
wanted to see if perhaps submitting less URBs would somehow lessen the 
bandwidth requirements.  It didn't fix the problem though.

I suspect that somewhere in an underlying layer, whether kernel or 
physical, something is checking that bandwidth requirement for the 
configured endpoints and then denying new URBs being submitted.  I'm not 
opposed to modifying something at a lower level but I haven't found the 
spot at this point.  I guess if the error comes from the physical hub 
there isn't much to be done then.

>
> Also the device will always try to dispatch frames at the requested
> framerate, if you don't grab them they will simply be dropped by the
> driver.

I wonder if there is some way to restrict URB submitting to around 10 
fps?  Perhaps a semaphore on the number of cameras that can be 
submitting URBs at all.  If I go ahead and configure all the cameras to 
run at 15 fps but only submit URBs for say 3 of the cameras at a time it 
seems it would work.  I'm not worried about dropping 1/3 of the frames. 
  I don't think I can write them all out to storage fast enough anyway. 
  (I can come close to keeping up with 10 fps on 8 cameras though.)

-Dennis




From lameventanas at gmail.com  Thu Apr 29 17:18:07 2010
From: lameventanas at gmail.com (Alan)
Date: Fri, 30 Apr 2010 00:18:07 +0900
Subject: [Linux-uvc-devel] Quickcam Pro 9000 LED control
Message-ID: <l2lf475b8d21004290818wbf6b2469s75f525a2f916536d@mail.gmail.com>

Hello list,

I have a Quickcam Pro 9000 and I can't control the LED:

# uvcdynctrl -d video0 -s 'LED1 Mode' 0
ERROR: Unknown control specified.

Effectively, running uvcdynctrl -c doesn't show this control, but I
thought all new models supported the LED control.
Is this a hardware limitation or a software limitation?
My camera's usb id is: 046d:0809

Thanks.

Alan


From pj.assis at gmail.com  Thu Apr 29 17:41:56 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Thu, 29 Apr 2010 16:41:56 +0100
Subject: [Linux-uvc-devel] Quickcam Pro 9000 LED control
In-Reply-To: <l2lf475b8d21004290818wbf6b2469s75f525a2f916536d@mail.gmail.com>
References: <l2lf475b8d21004290818wbf6b2469s75f525a2f916536d@mail.gmail.com>
Message-ID: <u2q59cf47a81004290841vd55af2ewc35abeeaf53262c@mail.gmail.com>

Hi,
you need to import the extension controls first.

If you have libwebcam installed try retriggering udev with "udevadm
trigger" or by replugging your camera.
For Ubuntu (at least), udev doesn't seem to work very well when cold
plugging the webcam.

You can also use guvcview (run it as root at least once).

Best regards,
Paulo

2010/4/29 Alan <lameventanas at gmail.com>:
> Hello list,
>
> I have a Quickcam Pro 9000 and I can't control the LED:
>
> # uvcdynctrl -d video0 -s 'LED1 Mode' 0
> ERROR: Unknown control specified.
>
> Effectively, running uvcdynctrl -c doesn't show this control, but I
> thought all new models supported the LED control.
> Is this a hardware limitation or a software limitation?
> My camera's usb id is: 046d:0809
>
> Thanks.
>
> Alan
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From lameventanas at gmail.com  Thu Apr 29 19:23:19 2010
From: lameventanas at gmail.com (Alan)
Date: Fri, 30 Apr 2010 02:23:19 +0900
Subject: [Linux-uvc-devel] Quickcam Pro 9000 LED control
In-Reply-To: <u2q59cf47a81004290841vd55af2ewc35abeeaf53262c@mail.gmail.com>
References: <l2lf475b8d21004290818wbf6b2469s75f525a2f916536d@mail.gmail.com>
	<u2q59cf47a81004290841vd55af2ewc35abeeaf53262c@mail.gmail.com>
Message-ID: <z2lf475b8d21004291023i775ae71dl3a0d18f1f5a7c272@mail.gmail.com>

Thanks a lot, I ran udevadm and now the led control is working :)

By the way, I just had a thought that it would be cool to export the
led control of the webcam using leds-class:

http://www.mjmwired.net/kernel/Documentation/leds-class.txt

Alan


On Fri, Apr 30, 2010 at 12:41 AM, Paulo Assis <pj.assis at gmail.com> wrote:
> Hi,
> you need to import the extension controls first.
>
> If you have libwebcam installed try retriggering udev with "udevadm
> trigger" or by replugging your camera.
> For Ubuntu (at least), udev doesn't seem to work very well when cold
> plugging the webcam.
>
> You can also use guvcview (run it as root at least once).
>
> Best regards,
> Paulo
>
> 2010/4/29 Alan <lameventanas at gmail.com>:
>> Hello list,
>>
>> I have a Quickcam Pro 9000 and I can't control the LED:
>>
>> # uvcdynctrl -d video0 -s 'LED1 Mode' 0
>> ERROR: Unknown control specified.
>>
>> Effectively, running uvcdynctrl -c doesn't show this control, but I
>> thought all new models supported the LED control.
>> Is this a hardware limitation or a software limitation?
>> My camera's usb id is: 046d:0809
>>
>> Thanks.
>>
>> Alan
>> _______________________________________________
>> Linux-uvc-devel mailing list
>> Linux-uvc-devel at lists.berlios.de
>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>
>


From lameventanas at gmail.com  Thu Apr 29 20:01:26 2010
From: lameventanas at gmail.com (Alan)
Date: Fri, 30 Apr 2010 03:01:26 +0900
Subject: [Linux-uvc-devel] Framerate of Quickcam Pro 9000
Message-ID: <r2nf475b8d21004291101gc050f050yd12d2fb96f5c3911@mail.gmail.com>

I have a problem with my camera: the framerate is too low.
I tested the camera using mplayer and motion with different light levels.

So I tried to fix it by following the instructions here:
http://www.quickcamteam.net/documentation/how-to/how-to-maximize-the-frame-rate

Unfortunately its still slow, and I think I messed up something
because every time I run uvcdynctrl I get this error:
[libwebcam] Unknown V4L2 private control ID encountered: 0x0A046D04
(V4L2_CID_PRIVATE_BASE + 33844484)

So I think at some moment I used an invalid parameter, so I thought I
could rmmod and modprobe uvcvideo to fix it, but no. Reconnecting the
camera doesn't help either.

So is this an invalid parameter? If so, where is it stored, in some
memory inside the camera?
And how do I fix the framerate issue?

Thanks!

Alan


From pj.assis at gmail.com  Thu Apr 29 20:15:59 2010
From: pj.assis at gmail.com (Paulo Assis)
Date: Thu, 29 Apr 2010 19:15:59 +0100
Subject: [Linux-uvc-devel] Framerate of Quickcam Pro 9000
In-Reply-To: <r2nf475b8d21004291101gc050f050yd12d2fb96f5c3911@mail.gmail.com>
References: <r2nf475b8d21004291101gc050f050yd12d2fb96f5c3911@mail.gmail.com>
Message-ID: <q2g59cf47a81004291115nb436eeei839e3c8c045863bd@mail.gmail.com>

Alan Hi,
Can you test with guvcview (http://guvcview.berlios.de)?

Maximum frame rate also depends on the pixel format and resolution, so
choose a format and resolution that supports a high frame-rate (e.g
MJPG at 800x600)

Regards,
Paulo

2010/4/29 Alan <lameventanas at gmail.com>:
> I have a problem with my camera: the framerate is too low.
> I tested the camera using mplayer and motion with different light levels.
>
> So I tried to fix it by following the instructions here:
> http://www.quickcamteam.net/documentation/how-to/how-to-maximize-the-frame-rate
>
> Unfortunately its still slow, and I think I messed up something
> because every time I run uvcdynctrl I get this error:
> [libwebcam] Unknown V4L2 private control ID encountered: 0x0A046D04
> (V4L2_CID_PRIVATE_BASE + 33844484)
>
> So I think at some moment I used an invalid parameter, so I thought I
> could rmmod and modprobe uvcvideo to fix it, but no. Reconnecting the
> camera doesn't help either.
>
> So is this an invalid parameter? If so, where is it stored, in some
> memory inside the camera?
> And how do I fix the framerate issue?
>
> Thanks!
>
> Alan
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From djmuhlestein at gmail.com  Thu Apr 29 20:40:24 2010
From: djmuhlestein at gmail.com (Dennis Muhlestein)
Date: Thu, 29 Apr 2010 12:40:24 -0600
Subject: [Linux-uvc-devel] Multiple camera framerate.
In-Reply-To: <4BD5FAFB.9080201@gmail.com>
References: <4BD5FAFB.9080201@gmail.com>
Message-ID: <4BD9D298.1040105@gmail.com>

On 04/26/2010 02:43 PM, Dennis Muhlestein wrote:
> I have a project I've been playing with that uses a number of cameras to
> construct video from 360 degrees. All cameras can be configured as long
> as I don't overload the underlying ISO bandwidth limits. ("No space left
> on device." has been discussed a few times on this list.)
>
> The application works well, but I'd like to experiment with making the
> video quality better. There is always some sheering when the cameras are
> moving but the higher framerate I can capture at, the less the sheering
> effect will degrade the video quality.
>
> Can anyone suggest a way to configure the cameras at a higher framerate
> without overloading the USB bus? Suppose I can read at 10 fps right now
> without overloading the USB bus. I'd like to set the framerate to 15,
> but still just capture around 10.
>

One idea I've been toying with is to add a semaphore around submitting 
the URBs.

In uvc_video.c, where the URBs are submitted, I'd acquire a semephore 
for each device currently submitting URBs.  The semaphore would limit 
the number of devices to whatever number I decide can safely submit URBs 
simultaneously on the bus without throwing out of space errors.

I did an initial test of this and it looks promising.  I can configure 
all the cameras.  As long as I don't submit the URBs for the number of 
devices beyond that which will work at the same time, the other cameras 
simply drop the data.

I'm not sure the best places to control the locking and unlocking of the 
semaphore are.  Right now, I lock it before submitting URBs in 
uvc_init_video.  In uvc_video_complete, I unlock it and relock it if the 
buffer is complete (allowing another camera to acquire it and capture a 
frame).

Anyway, it isn't working perfectly yet but I think I can debug it and at 
least get to a point where I know if it's worth pursuing.  I'm curious 
if anyone can provide thoughts or alternatives.

Thanks
Dennis


