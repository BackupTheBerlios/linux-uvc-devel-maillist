From samir.i at myrealbox.com  Sat Dec  1 09:25:10 2007
From: samir.i at myrealbox.com (Samir Ibradzic)
Date: Sat, 01 Dec 2007 17:25:10 +0900
Subject: [Linux-uvc-devel] Sanyo au W33SA cellphone web-cam support?
In-Reply-To: <b1923f7f0711301319x3876b7fdr8a1b3ba3da923f2c@mail.gmail.com>
References: <474A94A0.7070302@myrealbox.com>	
	<200711282028.10452.laurent.pinchart@skynet.be>	
	<474EAD5F.1030103@myrealbox.com>	
	<200711292056.18394.laurent.pinchart@skynet.be>	
	<47504B67.3090403@myrealbox.com>
	<b1923f7f0711301319x3876b7fdr8a1b3ba3da923f2c@mail.gmail.com>
Message-ID: <47511A66.6030509@myrealbox.com>


Hello Anthony,

Check;

http://mrk.sed.pl/node/22/
http://ubuntuforums.org/showthread.php?p=3856516
http://forum.skype.com/index.php?s=371031b5cc409110cf01b9fa8e1621c8&showtopic=102838

Also, if you use amd64 platform, make sure you install 32bit versions of 
all of the necessary packages (check by running skype from command 
line). It should be much easier to check everything working in x86 
environment first, because of the skype. Note that skype 2 beta & 
gstfakevideo aren't very stable pieces of soft anyway...

Hope it will help you.

Samir


Anthony Durity wrote:
> What is gstfakevideo? I can't get my webcam working with Skype Beta 2 on 
> Ubuntu 64bit.
> It's a Logitech QuickCam for Notebooks Pro 2006 version.
> Is this a workaround?
> 
> On 11/30/07, *Samir Ibradzic* <samir.i at myrealbox.com 
> <mailto:samir.i at myrealbox.com>> wrote:
> 
> 
>     Laurent, thanks again! Checked the latest uvcvideo revision, and my
>     camera works fine...
> 
>     Kudos for your hard work!
> 
>     To all who may concern, camera works with luvcview, ekiga and mplayer
>     without any hassle. I will try other japanese Sanyo cellphone models
>     with this as soon as i get chance...
> 
>     some mplayer syntax;
> 
>     mplayer -tv
>     driver=v4l2:width=320:height=240:device=/dev/video0:fps=15:outfmt=yuy2
>     tv://
> 
>     camera worked with gstreamer too, when specifying some pipeline
>     settings
>     like;
> 
>     gst-launch-0.10 v4l2src ! jpegdec ! xvimagesink
> 
>     and even gstreamer-properties, when specifying custom video plugin
>     settings, as;
> 
>     v4l2src device="/dev/video0" ! jpegdec ! ffmpegcolorspace
> 
>     but for some strange reasons, these custom settings doesn't stick in the
>     properties!?!
> 
>     i also made it work with Skype beta 2, by using a thing called
>     gstfakevideo (or skype_video_hijacker, how it was previously called);
> 
>     sudo mv /dev/video0 /dev/video1
>     gstfakevideo v4l2src device=/dev/video1 ! jpegdec ! ffmpegcolorspace
> 
>     note that these 'tricks' might also work with other non-YUV, MJPEG only
>     UVC cameras...
> 
> 
>     Samir
> 
> 
>     Laurent Pinchart wrote:
>      > Hi Samir,
>      >
>      > On Thursday 29 November 2007, Samir Ibradzic wrote:
>      >> Laurent, you are just remarkable!
>      >
>      > Thanks :-)
>      >
>      >> Camera worked, just after the patch was applied!
>      >
>      > I committed it to SVN.
>      >
>      >> I tested it using lucview, though no controls are working...
>      >
>      > That's because your phone has no video controls, so that's pretty
>     normal.
>      >
>      >> here's dmesg;
>      >>
>      > [snip]
>      >> ...
>      >>
>      >> Why all these details in kernel messages? Just for the sake of
>     the test?
>      >
>      > Those are debug messages. You can turn them off by setting the
>     trace parameter
>      > back to 0.
>      >
>      >> How can i set it up to work in gstreamer?
>      >>
>      >> I have the following error in gstreamer-properties;
>      >>
>      >> gstreamer-properties-Message: Error running pipeline 'Video for
>     Linux 2
>      >> (v4l2)': Could not negotiate format [gstbasesrc.c(2062):
>      >> gst_base_src_start (): /pipeline0/v4l2src3:
>      >> Check your filtered caps, if any]
>      >
>      > I've never really used gstreamer, so don't know what goes wrong.
>     Your phone
>      > supports MJPEG only while most other UVC devices support YUV as
>     well. That
>      > might be a clue.
>      >
>      >> Thanks again for your hard work! This means one more camera can
>     work in
>      >> Linux! Actually, there is a whole line of Sanyo (au) cellphones
>      >> available here in japan, who probably use same or very similar
>     camera
>      >> USB interface...
>      >
>      > Best regards,
>      >
>      > Laurent Pinchart
>      >
>      > --- AV & Spam Filtering by M+Guardian - Risk Free Email (TM) ---
>      >
>      >
> 
> 
> 
>     _______________________________________________
>     Linux-uvc-devel mailing list
>     Linux-uvc-devel at lists.berlios.de
>     <mailto:Linux-uvc-devel at lists.berlios.de>
>     https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 
> 
> --- AV & Spam Filtering by M+Guardian - Risk Free Email (TM) ---


From laurent.pinchart at skynet.be  Sun Dec  2 13:39:47 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 2 Dec 2007 13:39:47 +0100
Subject: [Linux-uvc-devel] Hercules Dualpix Exchange fully supported
	(tested with skype 2.0)
In-Reply-To: <783c3ee00711300251qb50133el88329ed892dec381@mail.gmail.com>
References: <783c3ee00711300251qb50133el88329ed892dec381@mail.gmail.com>
Message-ID: <200712021339.47557.laurent.pinchart@skynet.be>

Hi John,

On Friday 30 November 2007, John Bro wrote:
> Hello folks;
>
> I just joined after extensive googling and finally finding the message
> here that the Hercules Dualpix worked with skype, and indeed it does (skype
> 2.0b that is..)
>
> Now, I  have compiled and installed uvcvideo, V4L and just about anything
> vaguely related from apt-get on my Debian lenny 2.6.22-3-k7
> But Ekiga still says  my video driver doesn't support the requested format.

Try upgrading to a more recent Ekiga version, and make sure you have installed 
the libpt-plugins-v4l2  package.

> And camorama says my /dev/video0/ is not there when it most certainly is
> -- and it sure looks like a device; too.? 

Camorama doesn't support V4L2 so it won't work with the UVC driver.

> Should my webcam work outside of skype ?

Your webcam should work with any video software that supports V4L2.

> When I plug it in, I get "cannot get freq at ep 0x84 which seems to be a
> common problem with webcams but which means nothing to me..

That error is related to the usbaudio module and should not affect the video 
driver.

> Elsewhere it was suggested that reloading the module with trace=15 might
> help.. it didn't for me..

Setting trace to 15 prints more debugging messages to the kernel log but 
shouldn't affect the driver's behaviour (except maybe for some border-line 
timing related problems).

> Although I am a linux user since RedHat 3, I am still no guru, especially
> with drivers and modules, and even less with video; so let's not ignore the
> basics.. I may be missing something fundamental..
>
> I can send usb logs and lsusb output and all if useful, but I thought I
> would just ask first, can I get my cam to work in other linux apps or only
> skype for now ?

Camorama won't work, but Ekiga should. It will probably work if you upgrade to 
a more recent version. You might have to upgrade libpt too.

Best regards,

Laurent Pinchart


From jt at hpl.hp.com  Mon Dec  3 23:09:34 2007
From: jt at hpl.hp.com (Jean Tourrilhes)
Date: Mon, 3 Dec 2007 14:09:34 -0800
Subject: [Linux-uvc-devel] Test report : Quickcam Communicate Deluxe
Message-ID: <20071203220934.GA32543@bougret.hpl.hp.com>

	Hi,

	After some research, I bought a Logitech Quickcam Communicate
Deluxe (046d:0992). I can report that it work perfectly with luvcview,
but does not work properly with Skype.
	Note that Ligitech names are somewhat confusing. Do not
confuse it either with the Quickcam Communicate STX (a spca5xx model)
or the Quickcam Deluxe for Notebooks (UVC + fixed focus).

      I believe that this precise model is the safest buy amongst
Logitech UVC webcams, other Logitech UVC cameras have either "the bug"
or are autofocus models (or fixed focus).
	This model, the Logitech Quickcam Communicate Deluxe
(046d:0992) is listed by Logitech as having the new chip inside
(SPCA527) and does not seem to have "the bug".
		http://www.quickcamteam.net/hcl/linux/logitech-webcams
	This model has manual focus, all other SPCA527 models have
autofocus, and autofocus is currently not supported well under
Linux. I'm not going to pay more to have what effectively becomes a
fixed focus camera.
	This model is currently still a bit expensive, probably
because it was released not long ago, hopefully with time the price
should go down.
	Note that I said the "safest Logitech UVC webcams". There are
other very good non-UVC Logitech webcams, I am personally very happy
with the PRO 3000 and PRO 4000 (both pwc), however their new lines has
very few webcams with manual focus. And I bet there are also very good
UVC non-Logitech webcams.

	With luvcview : work up to 960x720, which is the highest
resolution in mjpeg mode. The image is very crisp and clear. It
basically work.

	With xawtv (version 4, from CVS). For some reasons, I could
not make the option '-device /dev/video1' work. When I unplugged my
primary webcam, then xawtv worked fine at 1280x960 using YUYV, which
is the highest resolution of the webcam. Image quality is real good to
my eyes.
	Note that xawtv 3.95 does not sem to support v4l2.

	With skype 2.0 beta : audio work. Image is black or
corrupted. It does not work well.
	It seems that the Skype guys are working on it. I have not
tried yet any workaround found on the Skype forums.

	I'll still have the webcam for a few days before "gifting" it.

	Have fun...

	Jean


From McFrame at gmx.at  Tue Dec  4 09:34:26 2007
From: McFrame at gmx.at (=?iso-8859-1?Q?=22G=FCnter_Haus=22?=)
Date: Tue, 04 Dec 2007 09:34:26 +0100
Subject: [Linux-uvc-devel] Unsupported HP webcam by Chicony
In-Reply-To: <200711282053.16879.laurent.pinchart@skynet.be>
References: <20071127220437.177540@gmx.net>
	<200711282053.16879.laurent.pinchart@skynet.be>
Message-ID: <20071204083426.204040@gmx.net>

Thank you Laurent for this information, it is in fact because of an v4l-dvb installation I have. Searching around the net for some hours, I have not found any solution how to make uvcvideo and v4l-dvb to work together. 
I have a virgin Ubuntu gutsy ..386-generic (exept the v4l-dvb modules)
Do you have any clues?

thx in advance
G?nter
 

-------- Original-Nachricht --------
> Datum: Wed, 28 Nov 2007 20:53:16 +0100
> Von: Laurent Pinchart <laurent.pinchart at skynet.be>
> An: linux-uvc-devel at lists.berlios.de
> CC: McFrame at gmx.at
> Betreff: Re: [Linux-uvc-devel] Unsupported HP webcam by Chicony

> Hi G?nter,
> 
> On Tuesday 27 November 2007, McFrame at gmx.at wrote:
> > Hi,
> > in my HP 2710p there is a fix Webcam made by Chicony
> >
> > lsusb -d 04f2:b017 -v
> [snip]
> 
> Thanks for the report.> modprobe uvcvideo  (recent version) results:
> 
> > uvcvideo: disagrees about version of symbol video_devdata
> > [   19.048000] uvcvideo: Unknown symbol video_devdata
> > [   19.048000] uvcvideo: disagrees about version of symbol
> > video_unregister_device 
> [snip]
> 
> The error messages you get in the kernel log are caused by compilation
> issues 
> and not by the UVC driver itself.
> 
> Make sure you compile the uvcvideo module against the source tree of your 
> running kernel. I also remember someone reporting similar problems coming 
> >from patched kernel headers shipped by v4l-dvb.
> 
> Best regards,
> 
> Laurent Pinchart

-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser


From harroun at gmail.com  Tue Dec  4 10:42:08 2007
From: harroun at gmail.com (John Bro)
Date: Tue, 4 Dec 2007 10:42:08 +0100
Subject: [Linux-uvc-devel] Hercules Dualpix Exchange fully supported
	(tested with skype 2.0)
Message-ID: <783c3ee00712040142j38ee448y868984f63c831881@mail.gmail.com>

 > > Now, I  have compiled and installed uvcvideo, V4L and just about
anything
 > > vaguely related from apt-get on my Debian lenny 2.6.22-3-k7
 > > But Ekiga still says  my video driver doesn't support the requested
format.

 > Try upgrading to a more recent Ekiga version, and make sure you have
installed
 > the libpt-plugins-v4l2  package.

Thanks; Laurent, but it's still not working... which version of ekiga would
you recommend ?
I have 2.03 which is the latest available for lenny from apt-get;

I see a version for ubuntu-lenny that has v. 2.0.11 yet uses older libpt
libs than I
 have on my non-ubuntu lenny  and it looks very tricky to install an ubuntu
deb on vanilla debian..
anyway...

I have installed the libplugins for V4L2 but nothing has changed except that
now
even Skype no longer shows anything in the test window -- even tho the
little blue light
does come on, although that already started before I installed any new
libs..
Ekiga continues to say my video driver doesn't support the requested format.

Furthermore, skype never really worked after all since in a real video call;
it would display video
for only a few seconds and then freeze. And it the self-viewing inset would
just go blank..
I'm beginning to wonder if the webcam is defective..

Can you or anybody suggest more diagnostics before I send the thing back ?

thanks again
- John
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071204/cf2c6178/attachment.html>

From marcel at datkan.net  Tue Dec  4 14:13:13 2007
From: marcel at datkan.net (Marcel van Beurden)
Date: Tue, 04 Dec 2007 14:13:13 +0100
Subject: [Linux-uvc-devel] Test report : Quickcam Communicate Deluxe
In-Reply-To: <20071203220934.GA32543@bougret.hpl.hp.com>
References: <20071203220934.GA32543@bougret.hpl.hp.com>
Message-ID: <47555269.9010305@datkan.net>

Hi Jean,

Jean Tourrilhes wrote:
> 	Hi,
> 
> 	After some research, I bought a Logitech Quickcam Communicate
> Deluxe (046d:0992). I can report that it work perfectly with luvcview,
> but does not work properly with Skype.
...
> 	With skype 2.0 beta : audio work. Image is black or
> corrupted. It does not work well.
> 	It seems that the Skype guys are working on it. I have not
> tried yet any workaround found on the Skype forums.

I have the same problem with Skype and a Quickcam Fusion. I think it's this bug:

https://developer.skype.com/jira/browse/SCL-250

Regards,
Marcel


From arakeis at free.fr  Tue Dec  4 16:02:50 2007
From: arakeis at free.fr (arakeis)
Date: Tue, 4 Dec 2007 16:02:50 +0100
Subject: [Linux-uvc-devel] uvc having hicups on integrated ricoh webcam
	: 1839
In-Reply-To: <200711241656.21351.laurent.pinchart@skynet.be>
References: <3338542a0711230233w70508824sba3127918674eb25@mail.gmail.com>
	<200711241656.21351.laurent.pinchart@skynet.be>
Message-ID: <3338542a0712040702j23ab3551gc0be73cdf994328c@mail.gmail.com>

2007/11/24, Laurent Pinchart <laurent.pinchart at skynet.be>:
>
>
> I think that's right. Previous Ricoh webcams were not completely USB
> compliant. Sam Revitch wrote a specific driver called r5u870 that handles
> firmware loading as well as device-specific requests. You should have a
> look
> at it.
>

looked at it, but the maintainer and website seems away, I tried manually
patching the
driver to use another firmware from a close model (I know it is a bit
optimistic) I get
a device node created, and when used a brief green led flash, and it crashes
obviously.

is it easy to extract a firmware from a working windows setup ?

(i tried contacting the maintainer but so far no luck)

-- 
arno
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071204/d06e7ea3/attachment.html>

From philipp at kolmann.at  Tue Dec  4 20:59:29 2007
From: philipp at kolmann.at (Philipp Kolmann)
Date: Tue, 4 Dec 2007 20:59:29 +0100
Subject: [Linux-uvc-devel] Logitech QC 9000 lockup on dwFrameInterval change
	during Skype call
Message-ID: <20071204195929.GA1101@kolmann.at>

Hi,

I have a Logitech QuickCam 9000 which works really nice during daylight with
Skype 2.0 Beta.

Skype starts the Video-Calls with 15fps settings (dwFrameInterval: 666666)
wich works nicely. After some time, it changes the fps to 30fps
(dwFrameInterval: 333333) and the cam locks up.

The only possibility to solve this issue is to unplug the cam completely from
the computer.

I have added a few lines of debug code to the uvc module I will attach to this
report. Additional I have attached the output of these debug lines to syslog.

Maybe you have an idea, what's going wrong here. Skype told me to get in
touch with you, since it works during daylight but not with bad light during
the night.

If you would have any patches to test, I am more then willing to test them.

I hope you can help me with this issue,
thanks a lot

Philipp


-- 
The more I learn about people, the more I like my dog!
-------------- next part --------------
A non-text attachment was scrubbed...
Name: uvc.diff
Type: text/x-diff
Size: 4045 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071204/d453bc9b/attachment.diff>
-------------- next part --------------
Dec  4 20:48:02 chief kernel: usb 3-1: USB disconnect, address 8
Dec  4 20:48:09 chief kernel: usb 3-1: new high speed USB device using ehci_hcd and address 9
Dec  4 20:48:09 chief kernel: usb 3-1: configuration #1 chosen from 1 choice
Dec  4 20:48:09 chief kernel: uvcvideo: Probing generic UVC device 1
Dec  4 20:48:09 chief kernel: uvcvideo: Found format MJPEG.
Dec  4 20:48:09 chief kernel: uvcvideo: - 160x120 (30.0 fps)
Dec  4 20:48:09 chief kernel: uvcvideo: - 176x144 (30.0 fps)
Dec  4 20:48:09 chief kernel: uvcvideo: - 320x240 (15.0 fps)
Dec  4 20:48:09 chief kernel: uvcvideo: - 352x288 (15.0 fps)
Dec  4 20:48:09 chief kernel: uvcvideo: - 640x480 (15.0 fps)
Dec  4 20:48:09 chief kernel: uvcvideo: - 800x600 (15.0 fps)
Dec  4 20:48:09 chief kernel: uvcvideo: - 960x720 (10.0 fps)
Dec  4 20:48:09 chief kernel: uvcvideo: Found format YUV 4:2:2 (YUYV).
Dec  4 20:48:09 chief kernel: uvcvideo: - 160x120 (30.0 fps)
Dec  4 20:48:09 chief kernel: uvcvideo: - 176x144 (30.0 fps)
Dec  4 20:48:09 chief kernel: uvcvideo: - 320x240 (15.0 fps)
Dec  4 20:48:09 chief kernel: uvcvideo: - 352x288 (15.0 fps)
Dec  4 20:48:09 chief kernel: uvcvideo: - 640x480 (15.0 fps)
Dec  4 20:48:09 chief kernel: uvcvideo: - 800x600 (15.0 fps)
Dec  4 20:48:09 chief kernel: uvcvideo: - 960x720 (10.0 fps)
Dec  4 20:48:09 chief kernel: uvcvideo: - 1600x1200 (5.0 fps)
Dec  4 20:48:09 chief kernel: uvcvideo: Found a Status endpoint (addr 87).
Dec  4 20:48:09 chief kernel: uvcvideo: Found UVC 1.00 device <unnamed> (046d:0990)
Dec  4 20:48:09 chief kernel: uvcvideo: Added control 00000000-0000-0000-0000-000000000101/2 to device 1 entity 2
Dec  4 20:48:09 chief kernel: uvcvideo: Added control 00000000-0000-0000-0000-000000000101/3 to device 1 entity 2
Dec  4 20:48:09 chief kernel: uvcvideo: Added control 00000000-0000-0000-0000-000000000101/7 to device 1 entity 2
Dec  4 20:48:09 chief kernel: uvcvideo: Added control 00000000-0000-0000-0000-000000000101/8 to device 1 entity 2
Dec  4 20:48:09 chief kernel: uvcvideo: Added control 00000000-0000-0000-0000-000000000101/1 to device 1 entity 2
Dec  4 20:48:09 chief kernel: uvcvideo: Added control 00000000-0000-0000-0000-000000000101/4 to device 1 entity 2
Dec  4 20:48:09 chief kernel: uvcvideo: Added control 00000000-0000-0000-0000-000000000101/5 to device 1 entity 2
Dec  4 20:48:09 chief kernel: uvcvideo: Added control 00000000-0000-0000-0000-000000000001/2 to device 1 entity 1
Dec  4 20:48:09 chief kernel: uvcvideo: Added control 00000000-0000-0000-0000-000000000001/4 to device 1 entity 1
Dec  4 20:48:09 chief kernel: uvcvideo: Added control 00000000-0000-0000-0000-000000000101/11 to device 1 entity 2
Dec  4 20:48:09 chief kernel: uvcvideo: Added control 00000000-0000-0000-0000-000000000101/10 to device 1 entity 2
Dec  4 20:48:09 chief kernel: uvcvideo: Scanning UVC chain: OT 5 <- XU 4 (-> XU 10 12 8 11 9) <- PU 2 (-> XU 13) <- IT 1
Dec  4 20:48:09 chief kernel: uvcvideo: Found a valid video chain (1 -> 5).
Dec  4 20:48:09 chief kernel: uvcvideo: Some webcams don't suport GET_DEF request on the probe control
Dec  4 20:48:09 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  4 20:48:09 chief kernel: uvcvideo: bmHint: 44581
Dec  4 20:48:09 chief kernel: uvcvideo: bFormatIndex: 1
Dec  4 20:48:09 chief kernel: uvcvideo: bFrameIndex: 3
Dec  4 20:48:09 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  4 20:48:09 chief kernel: uvcvideo: wKeyFrameRate: 61704
Dec  4 20:48:09 chief kernel: uvcvideo: wCompQuality: 10000
Dec  4 20:48:09 chief kernel: uvcvideo: wCompWindowSize: 14087
Dec  4 20:48:09 chief kernel: uvcvideo: wDelay: 0
Dec  4 20:48:09 chief kernel: uvcvideo: dwMaxVideoFrameSize: 102400
Dec  4 20:48:09 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 192
Dec  4 20:48:09 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  4 20:48:09 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  4 20:48:09 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  4 20:48:09 chief kernel: uvcvideo: bMinVersion: 0
Dec  4 20:48:09 chief kernel: uvcvideo: bMaxVersion: 0
Dec  4 20:48:09 chief kernel: uvcvideo: =======================
Dec  4 20:48:09 chief kernel: uvcvideo: UVC device initialized.
Dec  4 20:49:18 chief kernel: uvcvideo: Trying format 0x32315559 (YU12): 320x240.
Dec  4 20:49:18 chief kernel: uvcvideo: Unsupported format 0x32315559.
Dec  4 20:49:18 chief kernel: uvcvideo: Trying format 0x56595559 (YUYV): 320x240.
Dec  4 20:49:18 chief kernel: uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
Dec  4 20:49:18 chief kernel: uvcvideo: bmHint: 1
Dec  4 20:49:18 chief kernel: uvcvideo: bFormatIndex: 2
Dec  4 20:49:18 chief kernel: uvcvideo: bFrameIndex: 3
Dec  4 20:49:18 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  4 20:49:18 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wCompQuality: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wDelay: 0
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxVideoFrameSize: 0
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 0
Dec  4 20:49:18 chief kernel: uvcvideo: dwClockFrequency: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMinVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMaxVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: =======================
Dec  4 20:49:18 chief kernel: uvcvideo: Get the minimum and maximum values for compression settings.
Dec  4 20:49:18 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  4 20:49:18 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  4 20:49:18 chief kernel: uvcvideo: xxx
Dec  4 20:49:18 chief kernel: uvcvideo: bmHint: 1
Dec  4 20:49:18 chief kernel: uvcvideo: bFormatIndex: 2
Dec  4 20:49:18 chief kernel: uvcvideo: bFrameIndex: 3
Dec  4 20:49:18 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  4 20:49:18 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wCompQuality: 10000
Dec  4 20:49:18 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wDelay: 0
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxVideoFrameSize: 0
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 0
Dec  4 20:49:18 chief kernel: uvcvideo: dwClockFrequency: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMinVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMaxVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: =======================
Dec  4 20:49:18 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  4 20:49:18 chief kernel: uvcvideo: bmHint: 1
Dec  4 20:49:18 chief kernel: uvcvideo: bFormatIndex: 2
Dec  4 20:49:18 chief kernel: uvcvideo: bFrameIndex: 3
Dec  4 20:49:18 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  4 20:49:18 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wCompQuality: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wDelay: 0
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxVideoFrameSize: 153600
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 512
Dec  4 20:49:18 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  4 20:49:18 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMinVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMaxVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: =======================
Dec  4 20:49:18 chief kernel: uvcvideo: Setting frame interval to 1/15 (666666).
Dec  4 20:49:18 chief kernel: uvcvideo: uvc_try_frame_interval()
Dec  4 20:49:18 chief kernel: uvcvideo: Probe the device with the new settings.
Dec  4 20:49:18 chief kernel: uvcvideo: bmHint: 1
Dec  4 20:49:18 chief kernel: uvcvideo: bFormatIndex: 2
Dec  4 20:49:18 chief kernel: uvcvideo: bFrameIndex: 3
Dec  4 20:49:18 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  4 20:49:18 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wCompQuality: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wDelay: 0
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxVideoFrameSize: 153600
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 512
Dec  4 20:49:18 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  4 20:49:18 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMinVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMaxVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: =======================
Dec  4 20:49:18 chief kernel: uvcvideo: Get the minimum and maximum values for compression settings.
Dec  4 20:49:18 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  4 20:49:18 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  4 20:49:18 chief kernel: uvcvideo: xxx
Dec  4 20:49:18 chief kernel: uvcvideo: bmHint: 1
Dec  4 20:49:18 chief kernel: uvcvideo: bFormatIndex: 2
Dec  4 20:49:18 chief kernel: uvcvideo: bFrameIndex: 3
Dec  4 20:49:18 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  4 20:49:18 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wCompQuality: 10000
Dec  4 20:49:18 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wDelay: 0
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxVideoFrameSize: 153600
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 512
Dec  4 20:49:18 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  4 20:49:18 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMinVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMaxVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: =======================
Dec  4 20:49:18 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  4 20:49:18 chief kernel: uvcvideo: Commit the new settings.
Dec  4 20:49:18 chief kernel: uvcvideo: bmHint: 1
Dec  4 20:49:18 chief kernel: uvcvideo: bFormatIndex: 2
Dec  4 20:49:18 chief kernel: uvcvideo: bFrameIndex: 3
Dec  4 20:49:18 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  4 20:49:18 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wCompQuality: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wDelay: 0
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxVideoFrameSize: 153600
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 512
Dec  4 20:49:18 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  4 20:49:18 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMinVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMaxVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: =======================
Dec  4 20:49:18 chief kernel: uvcvideo: Return the actual frame period.
Dec  4 20:49:18 chief kernel: uvcvideo: Trying format 0x32315559 (YU12): 640x480.
Dec  4 20:49:18 chief kernel: uvcvideo: Unsupported format 0x32315559.
Dec  4 20:49:18 chief kernel: uvcvideo: Trying format 0x56595559 (YUYV): 640x480.
Dec  4 20:49:18 chief kernel: uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
Dec  4 20:49:18 chief kernel: uvcvideo: bmHint: 1
Dec  4 20:49:18 chief kernel: uvcvideo: bFormatIndex: 2
Dec  4 20:49:18 chief kernel: uvcvideo: bFrameIndex: 5
Dec  4 20:49:18 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  4 20:49:18 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wCompQuality: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wDelay: 0
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxVideoFrameSize: 0
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 0
Dec  4 20:49:18 chief kernel: uvcvideo: dwClockFrequency: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMinVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMaxVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: =======================
Dec  4 20:49:18 chief kernel: uvcvideo: Get the minimum and maximum values for compression settings.
Dec  4 20:49:18 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  4 20:49:18 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  4 20:49:18 chief kernel: uvcvideo: xxx
Dec  4 20:49:18 chief kernel: uvcvideo: bmHint: 1
Dec  4 20:49:18 chief kernel: uvcvideo: bFormatIndex: 2
Dec  4 20:49:18 chief kernel: uvcvideo: bFrameIndex: 5
Dec  4 20:49:18 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  4 20:49:18 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wCompQuality: 10000
Dec  4 20:49:18 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wDelay: 0
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxVideoFrameSize: 0
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 0
Dec  4 20:49:18 chief kernel: uvcvideo: dwClockFrequency: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMinVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMaxVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: =======================
Dec  4 20:49:18 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  4 20:49:18 chief kernel: uvcvideo: bmHint: 1
Dec  4 20:49:18 chief kernel: uvcvideo: bFormatIndex: 2
Dec  4 20:49:18 chief kernel: uvcvideo: bFrameIndex: 5
Dec  4 20:49:18 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  4 20:49:18 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wCompQuality: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wDelay: 0
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxVideoFrameSize: 614400
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 1984
Dec  4 20:49:18 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  4 20:49:18 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMinVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMaxVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: =======================
Dec  4 20:49:18 chief kernel: uvcvideo: Setting frame interval to 1/15 (666666).
Dec  4 20:49:18 chief kernel: uvcvideo: uvc_try_frame_interval()
Dec  4 20:49:18 chief kernel: uvcvideo: Probe the device with the new settings.
Dec  4 20:49:18 chief kernel: uvcvideo: bmHint: 1
Dec  4 20:49:18 chief kernel: uvcvideo: bFormatIndex: 2
Dec  4 20:49:18 chief kernel: uvcvideo: bFrameIndex: 5
Dec  4 20:49:18 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  4 20:49:18 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wCompQuality: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wDelay: 0
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxVideoFrameSize: 614400
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 1984
Dec  4 20:49:18 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  4 20:49:18 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMinVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMaxVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: =======================
Dec  4 20:49:18 chief kernel: uvcvideo: Get the minimum and maximum values for compression settings.
Dec  4 20:49:18 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  4 20:49:18 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  4 20:49:18 chief kernel: uvcvideo: xxx
Dec  4 20:49:18 chief kernel: uvcvideo: bmHint: 1
Dec  4 20:49:18 chief kernel: uvcvideo: bFormatIndex: 2
Dec  4 20:49:18 chief kernel: uvcvideo: bFrameIndex: 5
Dec  4 20:49:18 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  4 20:49:18 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wCompQuality: 10000
Dec  4 20:49:18 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wDelay: 0
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxVideoFrameSize: 614400
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 1984
Dec  4 20:49:18 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  4 20:49:18 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMinVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMaxVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: =======================
Dec  4 20:49:18 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  4 20:49:18 chief kernel: uvcvideo: Commit the new settings.
Dec  4 20:49:18 chief kernel: uvcvideo: bmHint: 1
Dec  4 20:49:18 chief kernel: uvcvideo: bFormatIndex: 2
Dec  4 20:49:18 chief kernel: uvcvideo: bFrameIndex: 5
Dec  4 20:49:18 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  4 20:49:18 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wCompQuality: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  4 20:49:18 chief kernel: uvcvideo: wDelay: 0
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxVideoFrameSize: 614400
Dec  4 20:49:18 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 1984
Dec  4 20:49:18 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  4 20:49:18 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMinVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: bMaxVersion: 0
Dec  4 20:49:18 chief kernel: uvcvideo: =======================
Dec  4 20:49:18 chief kernel: uvcvideo: Return the actual frame period.
Dec  4 20:49:35 chief kernel: uvcvideo: Setting frame interval to 1/30 (333333).
Dec  4 20:49:35 chief kernel: uvcvideo: uvc_try_frame_interval()
Dec  4 20:49:35 chief kernel: uvcvideo: Probe the device with the new settings.
Dec  4 20:49:35 chief kernel: uvcvideo: bmHint: 1
Dec  4 20:49:35 chief kernel: uvcvideo: bFormatIndex: 2
Dec  4 20:49:35 chief kernel: uvcvideo: bFrameIndex: 5
Dec  4 20:49:35 chief kernel: uvcvideo: dwFrameInterval: 333333
Dec  4 20:49:35 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  4 20:49:35 chief kernel: uvcvideo: wCompQuality: 0
Dec  4 20:49:35 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  4 20:49:35 chief kernel: uvcvideo: wDelay: 0
Dec  4 20:49:35 chief kernel: uvcvideo: dwMaxVideoFrameSize: 614400
Dec  4 20:49:35 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 1984
Dec  4 20:49:35 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  4 20:49:35 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  4 20:49:35 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  4 20:49:35 chief kernel: uvcvideo: bMinVersion: 0
Dec  4 20:49:35 chief kernel: uvcvideo: bMaxVersion: 0
Dec  4 20:49:35 chief kernel: uvcvideo: =======================
Dec  4 20:49:35 chief kernel: uvcvideo: Get the minimum and maximum values for compression settings.
Dec  4 20:49:35 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  4 20:49:35 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  4 20:49:35 chief kernel: uvcvideo: xxx
Dec  4 20:49:35 chief kernel: uvcvideo: bmHint: 1
Dec  4 20:49:35 chief kernel: uvcvideo: bFormatIndex: 2
Dec  4 20:49:35 chief kernel: uvcvideo: bFrameIndex: 5
Dec  4 20:49:35 chief kernel: uvcvideo: dwFrameInterval: 333333
Dec  4 20:49:35 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  4 20:49:35 chief kernel: uvcvideo: wCompQuality: 10000
Dec  4 20:49:35 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  4 20:49:35 chief kernel: uvcvideo: wDelay: 0
Dec  4 20:49:35 chief kernel: uvcvideo: dwMaxVideoFrameSize: 614400
Dec  4 20:49:35 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 1984
Dec  4 20:49:35 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  4 20:49:35 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  4 20:49:35 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  4 20:49:35 chief kernel: uvcvideo: bMinVersion: 0
Dec  4 20:49:35 chief kernel: uvcvideo: bMaxVersion: 0
Dec  4 20:49:35 chief kernel: uvcvideo: =======================
Dec  4 20:49:35 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  4 20:49:35 chief kernel: uvcvideo: Commit the new settings.
Dec  4 20:49:35 chief kernel: uvcvideo: bmHint: 1
Dec  4 20:49:35 chief kernel: uvcvideo: bFormatIndex: 2
Dec  4 20:49:35 chief kernel: uvcvideo: bFrameIndex: 5
Dec  4 20:49:35 chief kernel: uvcvideo: dwFrameInterval: 333333
Dec  4 20:49:35 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  4 20:49:35 chief kernel: uvcvideo: wCompQuality: 2000
Dec  4 20:49:35 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  4 20:49:35 chief kernel: uvcvideo: wDelay: 1
Dec  4 20:49:35 chief kernel: uvcvideo: dwMaxVideoFrameSize: 614400
Dec  4 20:49:35 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 3060
Dec  4 20:49:35 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  4 20:49:35 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  4 20:49:35 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  4 20:49:35 chief kernel: uvcvideo: bMinVersion: 0
Dec  4 20:49:35 chief kernel: uvcvideo: bMaxVersion: 0
Dec  4 20:49:35 chief kernel: uvcvideo: =======================
Dec  4 20:49:36 chief kernel: uvcvideo: Failed to query (1) UVC control 2 (unit 0) : -110 (exp. 26).

From leftmostcat at gmail.com  Tue Dec  4 22:33:05 2007
From: leftmostcat at gmail.com (=?UTF-8?B?U2XDoW4gZGUgQsO6cmNh?=)
Date: Tue, 04 Dec 2007 14:33:05 -0700
Subject: [Linux-uvc-devel]  [PATCH] Apple iSight
Message-ID: <4755C791.7040409@gmail.com>

   I just gave the new patch a shot and I'm still experiencing a problem 
I've been seeing for some time. I get a segmentation fault in 
isight_load_firmware but for what reason I'm unsure. I'm attaching the 
dump I find in dmesg. I'd much appreciate any help anyone can give me. 
Firmware is where it should be. I've tried with both the version from my 
OSX drive and the version in the all-in-one bundle with the same results.

Sean Burke

BUG: unable to handle kernel NULL pointer dereference at virtual address 
00000002
printing eip:
f8bddbba
*pde = 00000000
Oops: 0000 [#1]
PREEMPT SMP
Modules linked in: cryptomgr crypto_algapi uvcvideo snd_pcm_oss 
snd_mixer_oss snd_seq_oss snd_seq_midi_event snd_seq snd_seq_device 
hci_usb wlan_scan_sta ath_rate_sample(F) ath_pci(F) wlan ath_hal(P) sky2 
usbhid appletouch evdev snd_hda_intel snd_pcm snd_timer snd soundcore 
snd_page_alloc
CPU:    0
EIP:    0060:[<f8bddbba>]    Tainted: PF       VLI
EFLAGS: 00210282   (2.6.23-gentoo-r3-mactel #1)
EIP is at isight_load_firmware+0x1ba/0x570 [uvcvideo]
eax: eaecbcdc   ebx: f7f79200   ecx: c189f4c0   edx: fffffffe
esi: eaecbcdc   edi: eaecbccc   ebp: f78c4400   esp: eaecbc7c
ds: 007b   es: 007b   fs: 00d8  gs: 0033  ss: 0068
Process modprobe (pid: 6837, ti=eaeca000 task=f78b3550 task.ti=eaeca000)
Stack: 00000001 c1563ba0 c015535c 00000002 00000044 eb1dc000 eaecbcb8 
ea820000
      00012ab0 c04bcb00 c04bca40 00000002 00000000 c17d3a14 c04bd150 
00000000
      00000000 00000000 00000000 00000000 c1550400 00000000 c012165f 
00012ab0
Call Trace:
[<c015535c>] get_page_from_freelist+0x2ac/0x3a0
[<c012165f>] enqueue_entity+0xbf/0x230
[<f8bd6dbb>] uvc_delete+0x24b/0x1e50 [uvcvideo]
[<c0125c79>] check_preempt_curr_fair+0x59/0x90
[<c0274caa>] idr_get_empty_slot+0xea/0x270
[<c0274eb7>] ida_get_new_above+0x87/0x180
[<c0182e5e>] find_inode+0x3e/0x70
[<c01ac290>] sysfs_ilookup_test+0x0/0x10
[<c0182fa6>] ifind+0x46/0xa0
[<c0182c75>] iput+0x35/0x70
[<c01ac8c4>] sysfs_addrm_finish+0x34/0x200
[<c01adb36>] sysfs_create_link+0x96/0x170
[<c0339517>] usb_match_one_id+0x27/0xc0
[<c033a3a5>] usb_probe_interface+0x75/0xd0
[<c02e82ce>] driver_probe_device+0x8e/0x190
[<c03eb97d>] klist_next+0x5d/0xa0
[<c02e8510>] __driver_attach+0x80/0x90
[<c02e768a>] bus_for_each_dev+0x3a/0x60
[<c02e8136>] driver_attach+0x16/0x20
[<c02e8490>] __driver_attach+0x0/0x90
[<c02e7a6b>] bus_add_driver+0x8b/0x1b0
[<c033a330>] usb_probe_interface+0x0/0xd0
[<c0339e25>] usb_register_driver+0x95/0x110
[<f8a4106f>] init_module+0x6f/0x86 [uvcvideo]
[<c014858f>] sys_init_module+0x15f/0x18d0
[<c01554a7>] __alloc_pages+0x57/0x2f0
[<f8bc5000>] crypto_remove_final+0x0/0x50 [crypto_algapi]
[<c028f55d>] tty_write+0x1bd/0x1d0
[<c010431e>] sysenter_past_esp+0x5f/0x85
=======================
Code: 8b 44 24 20 89 44 24 5c b8 6f 01 be f8 e8 3f a6 68 c7 89 c2 89 44 
24 60 85 d2 b8 00 02 00 00 89 44 24 64 74 30 8d 74 24 60 89 f0 <ff> 52 
04 89 f0 8b 5c 24 60 8d 54 24 50 8b 4c 24 20 ff 53 08 89
EIP: [<f8bddbba>] isight_load_firmware+0x1ba/0x570 [uvcvideo] SS:ESP 
0068:eaecbc7c


From cesar_maciel at ig.com.br  Wed Dec  5 01:13:00 2007
From: cesar_maciel at ig.com.br (Cesar Maciel)
Date: Tue, 04 Dec 2007 19:13:00 -0500
Subject: [Linux-uvc-devel] Saving mjpeg stream to disk using command-line
	tool
Message-ID: <4755ED0C.5030503@ig.com.br>

Hello,
  Does anyone have a tool to save a mjpeg stream captured from an uvc 
webcam that outputs mjpeg (like the Logitech Quickcam 5000) directly to 
disk, using a command-line tool (that could be embedded in scripts)? I 
tried getting the stream from the webcam with uvc_stream and saving it 
with vlc, but even with command-line option vlc still opens the GUI. I 
would like to save the mjpeg directly without relying on transcoding 
(like with ffmpeg) due to CPU utilization (planning to use it on an 
embedded CPU). Tried also with wget, but the output file is a sequence 
of jpegs, and I believe there is a need of changing file structure to 
convert it to mjpeg (ffmpeg does it, but I don't want to do post 
processing either).
  Has anyone modified uvc_stream to output to disk also, or has a tool 
that grabs the http stream generated by uvc_stream and generates an 
mjpeg video file?

Thanks
  Cesar



From funtasyspace at yahoo.com  Wed Dec  5 07:45:07 2007
From: funtasyspace at yahoo.com (=?iso-8859-1?Q?J=F6rg_Hermsdorf?=)
Date: Tue, 4 Dec 2007 22:45:07 -0800 (PST)
Subject: [Linux-uvc-devel] Saving mjpeg stream to disk using
	command-line tool
Message-ID: <578914.11404.qm@web50002.mail.re2.yahoo.com>

Hi Cesar,

> I 
> tried getting the stream from the webcam with uvc_stream and saving it 
> with vlc, but even with command-line option vlc still opens the GUI.


# vlc -I dummy

this parameter prevents vlc to open a gui.

Best Regards,

J?rg



      Machen Sie Yahoo! zu Ihrer Startseite. Los geht's: 
http://de.yahoo.com/set


From uvc-devel at jollyrotten.org  Wed Dec  5 08:48:06 2007
From: uvc-devel at jollyrotten.org (Anthony Durity)
Date: Wed, 5 Dec 2007 08:48:06 +0100
Subject: [Linux-uvc-devel] Test report : Quickcam Communicate Deluxe
In-Reply-To: <20071203220934.GA32543@bougret.hpl.hp.com>
References: <20071203220934.GA32543@bougret.hpl.hp.com>
Message-ID: <b1923f7f0712042348p4ba0ac21odc358dfe5778122b@mail.gmail.com>

On 12/3/07, Jean Tourrilhes <jt at hpl.hp.com> wrote:
>
>         Hi,
>
>         After some research, I bought a Logitech Quickcam Communicate
> Deluxe (046d:0992). I can report that it work perfectly with luvcview,
> but does not work properly with Skype.


This posting on the Skype forums is continually updated as the devs iron
out the kinks in the Skype video code. It is informative.

http://forum.skype.com/index.php?showtopic=101297&st=20

It seems to me by a process of elimination that the least flaky hardware
combo is an nVidia or Intel board and a 32bit Linux OS. 64bits has issues
and when it comes to ATI chipsets the open source radeon driver has
only one port on the xvideo adaptor and the fglrx is flaky... Others may
correct me if I am wrong!

All the best,
    Anto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071205/d02eb713/attachment.html>

From diegoiast at gmail.com  Wed Dec  5 11:10:01 2007
From: diegoiast at gmail.com (Diego Iastrubni)
Date: Wed, 5 Dec 2007 12:10:01 +0200
Subject: [Linux-uvc-devel] Lenovo 3000 cameras - 0c45:627f Microdia
Message-ID: <2a7dfb920712050210webf079ane55acecc45c597b0@mail.gmail.com>

Hi all,

I just checked out the code, and I see that in revision 148, there is
no support for 627f of Microdia, which is found in Lenovo's 3000
computers.

I have the HW, and compiling is not a big problem for me. So,
basically what I am saying, is that if you need  a test bunny, you got
one. From looking at the code, I have seen that there are some cameras
do support the UVC interface, but do not announce that. Is it possible
that this happes with this camera? Is anyone working on making this
driver work? (again, how can I help?)

- diego


From felix at derklecks.de  Wed Dec  5 11:13:46 2007
From: felix at derklecks.de (=?ISO-8859-1?Q?Felix_M=F6ller?=)
Date: Wed, 05 Dec 2007 11:13:46 +0100
Subject: [Linux-uvc-devel] Lenovo 3000 cameras - 0c45:627f Microdia
In-Reply-To: <2a7dfb920712050210webf079ane55acecc45c597b0@mail.gmail.com>
References: <2a7dfb920712050210webf079ane55acecc45c597b0@mail.gmail.com>
Message-ID: <475679DA.5090509@derklecks.de>

Hi,
> I just checked out the code, and I see that in revision 148, there is
> no support for 627f of Microdia, which is found in Lenovo's 3000
> computers.
> 
> I have the HW, and compiling is not a big problem for me. So,
> basically what I am saying, is that if you need  a test bunny, you got
> one. From looking at the code, I have seen that there are some cameras
> do support the UVC interface, but do not announce that. Is it possible
> that this happes with this camera? Is anyone working on making this
> driver work? (again, how can I help?)
you should post the output of lsusb -vv of your camera with usbutils
0.72 or newer.

greetings
Felix M?ller



From diegoiast at gmail.com  Wed Dec  5 11:19:34 2007
From: diegoiast at gmail.com (Diego Iastrubni)
Date: Wed, 5 Dec 2007 12:19:34 +0200
Subject: [Linux-uvc-devel] Lenovo 3000 cameras - 0c45:627f Microdia
In-Reply-To: <475679DA.5090509@derklecks.de>
References: <2a7dfb920712050210webf079ane55acecc45c597b0@mail.gmail.com>
	<475679DA.5090509@derklecks.de>
Message-ID: <2a7dfb920712050219v6299490bu81fbf13f3a03a237@mail.gmail.com>

Hi,

I attach the output of lsusb -vv (taken from Ubuntu 7.10 64 bit,
usbutils 0.72). The gziped file is 2k, but opens to 37, device is the
first in the list.


On Dec 5, 2007 12:13 PM, Felix M?ller <felix at derklecks.de> wrote:
> Hi,
>
> > I just checked out the code, and I see that in revision 148, there is
> > no support for 627f of Microdia, which is found in Lenovo's 3000
> > computers.
> >
> > I have the HW, and compiling is not a big problem for me. So,
> > basically what I am saying, is that if you need  a test bunny, you got
> > one. From looking at the code, I have seen that there are some cameras
> > do support the UVC interface, but do not announce that. Is it possible
> > that this happes with this camera? Is anyone working on making this
> > driver work? (again, how can I help?)
> you should post the output of lsusb -vv of your camera with usbutils
> 0.72 or newer.
>
> greetings
> Felix M?ller
>
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lsusb.txt.gz
Type: application/x-gzip
Size: 2357 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071205/21b03760/attachment.bin>

From t.st1 at gmx.net  Wed Dec  5 12:03:56 2007
From: t.st1 at gmx.net (Tom St)
Date: Wed, 05 Dec 2007 12:03:56 +0100
Subject: [Linux-uvc-devel] Saving mjpeg stream to disk using
 command-line tool
In-Reply-To: <4755ED0C.5030503@ig.com.br>
References: <4755ED0C.5030503@ig.com.br>
Message-ID: <4756859C.6020003@gmx.net>

Ave Cesar,
>   Does anyone have a tool to save a mjpeg stream captured from an uvc 
> webcam that outputs mjpeg (like the Logitech Quickcam 5000) directly to 
> disk, using a command-line tool (that could be embedded in scripts)? I 
> tried getting the stream from the webcam with uvc_stream and saving it 
> with vlc, but even with command-line option vlc still opens the GUI. I 
> would like to save the mjpeg directly without relying on transcoding 
> (like with ffmpeg) due to CPU utilization (planning to use it on an 
> embedded CPU). 
You may checkout revision #31 of mjpg-streamer and issue the following
command:
# make clean all
# export LD_LIBRARY_PATH="$(pwd)"
# mkdir -p pictures
# ./mjpg-streamer -o "output_file.so -f pictures"

More examples are to be found in the included "start.sh" file

URL: http://mjpg-streamer.sf.net
The intended module is
"http://mjpg-streamer.svn.sourceforge.net/viewvc/mjpg-streamer/mjpg-streamer/plugins/output_file/output_file.c?revision=28&view=markup"
The subversion repsository is at:
http://mjpg-streamer.svn.sourceforge.net/viewvc/mjpg-streamer/mjpg-streamer/

Kind regards,
Tom


From mactel at sukimashita.com  Wed Dec  5 14:20:15 2007
From: mactel at sukimashita.com (M.S.)
Date: Wed, 05 Dec 2007 14:20:15 +0100
Subject: [Linux-uvc-devel] [PATCH] Apple iSight
In-Reply-To: <4755C791.7040409@gmail.com>
References: <4755C791.7040409@gmail.com>
Message-ID: <1196860815.15919.6.camel@mirell0001.mirell>

1. Does a reboot fix the issue? Do you have put the firmware
in /lib/firmware/?

2. If you replace this part out of isight.c, do you still get the crash?

From:
	if (success == 0)
		isight_patch_usb_descriptor (dev);
To:
	if ((success == 0) && (dev->descriptor.idProduct == 0x8501))
		isight_patch_usb_descriptor (dev);

--- M.S.

On Tue, 2007-12-04 at 14:33 -0700, Se?n de B?rca wrote:
> I just gave the new patch a shot and I'm still experiencing a problem 
> I've been seeing for some time. I get a segmentation fault in 
> isight_load_firmware but for what reason I'm unsure. I'm attaching the 
> dump I find in dmesg. I'd much appreciate any help anyone can give me. 
> Firmware is where it should be. I've tried with both the version from my 
> OSX drive and the version in the all-in-one bundle with the same results.
> 
> Sean Burke
> 
> BUG: unable to handle kernel NULL pointer dereference at virtual address 
> 00000002
> printing eip:
> f8bddbba
> *pde = 00000000
> Oops: 0000 [#1]
> PREEMPT SMP
> Modules linked in: cryptomgr crypto_algapi uvcvideo snd_pcm_oss 
> snd_mixer_oss snd_seq_oss snd_seq_midi_event snd_seq snd_seq_device 
> hci_usb wlan_scan_sta ath_rate_sample(F) ath_pci(F) wlan ath_hal(P) sky2 
> usbhid appletouch evdev snd_hda_intel snd_pcm snd_timer snd soundcore 
> snd_page_alloc
> CPU:    0
> EIP:    0060:[<f8bddbba>]    Tainted: PF       VLI
> EFLAGS: 00210282   (2.6.23-gentoo-r3-mactel #1)
> EIP is at isight_load_firmware+0x1ba/0x570 [uvcvideo]
> eax: eaecbcdc   ebx: f7f79200   ecx: c189f4c0   edx: fffffffe
> esi: eaecbcdc   edi: eaecbccc   ebp: f78c4400   esp: eaecbc7c
> ds: 007b   es: 007b   fs: 00d8  gs: 0033  ss: 0068
> Process modprobe (pid: 6837, ti=eaeca000 task=f78b3550 task.ti=eaeca000)
> Stack: 00000001 c1563ba0 c015535c 00000002 00000044 eb1dc000 eaecbcb8 
> ea820000
>       00012ab0 c04bcb00 c04bca40 00000002 00000000 c17d3a14 c04bd150 
> 00000000
>       00000000 00000000 00000000 00000000 c1550400 00000000 c012165f 
> 00012ab0
> Call Trace:
> [<c015535c>] get_page_from_freelist+0x2ac/0x3a0
> [<c012165f>] enqueue_entity+0xbf/0x230
> [<f8bd6dbb>] uvc_delete+0x24b/0x1e50 [uvcvideo]
> [<c0125c79>] check_preempt_curr_fair+0x59/0x90
> [<c0274caa>] idr_get_empty_slot+0xea/0x270
> [<c0274eb7>] ida_get_new_above+0x87/0x180
> [<c0182e5e>] find_inode+0x3e/0x70
> [<c01ac290>] sysfs_ilookup_test+0x0/0x10
> [<c0182fa6>] ifind+0x46/0xa0
> [<c0182c75>] iput+0x35/0x70
> [<c01ac8c4>] sysfs_addrm_finish+0x34/0x200
> [<c01adb36>] sysfs_create_link+0x96/0x170
> [<c0339517>] usb_match_one_id+0x27/0xc0
> [<c033a3a5>] usb_probe_interface+0x75/0xd0
> [<c02e82ce>] driver_probe_device+0x8e/0x190
> [<c03eb97d>] klist_next+0x5d/0xa0
> [<c02e8510>] __driver_attach+0x80/0x90
> [<c02e768a>] bus_for_each_dev+0x3a/0x60
> [<c02e8136>] driver_attach+0x16/0x20
> [<c02e8490>] __driver_attach+0x0/0x90
> [<c02e7a6b>] bus_add_driver+0x8b/0x1b0
> [<c033a330>] usb_probe_interface+0x0/0xd0
> [<c0339e25>] usb_register_driver+0x95/0x110
> [<f8a4106f>] init_module+0x6f/0x86 [uvcvideo]
> [<c014858f>] sys_init_module+0x15f/0x18d0
> [<c01554a7>] __alloc_pages+0x57/0x2f0
> [<f8bc5000>] crypto_remove_final+0x0/0x50 [crypto_algapi]
> [<c028f55d>] tty_write+0x1bd/0x1d0
> [<c010431e>] sysenter_past_esp+0x5f/0x85
> =======================
> Code: 8b 44 24 20 89 44 24 5c b8 6f 01 be f8 e8 3f a6 68 c7 89 c2 89 44 
> 24 60 85 d2 b8 00 02 00 00 89 44 24 64 74 30 8d 74 24 60 89 f0 <ff> 52 
> 04 89 f0 8b 5c 24 60 8d 54 24 50 8b 4c 24 20 ff 53 08 89
> EIP: [<f8bddbba>] isight_load_firmware+0x1ba/0x570 [uvcvideo] SS:ESP 
> 0068:eaecbc7c
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 



From urs.beyerle at psi.ch  Wed Dec  5 16:48:38 2007
From: urs.beyerle at psi.ch (Beyerle Urs)
Date: Wed, 05 Dec 2007 16:48:38 +0100
Subject: [Linux-uvc-devel] Problem with Fujitsu Webcam 046d:09b2
Message-ID: <4756C856.2090304@psi.ch>

Hi,

I can not get a Fujitsu Webcam 046d:09b2 working with the uvcvideo driver (SVN revision 148). The driver loads 
perfectly but no signal at /dev/video0.

My System:
- FJS Laptop Lifebook S6410
- Scientific Linux 51 (RHEL5.1) with kernel 2.6.18-53.el5

# lsusb
...
Bus 006 Device 003: ID 046d:09b2 Logitech, Inc.
...

# less /var/log/messages
...
Dec  5 16:04:59 s6410 kernel: uvcvideo: Found UVC 1.00 device OEM Camera (046d:09b2)
Dec  5 16:04:59 s6410 kernel: usbcore: registered new driver uvcvideo
Dec  5 16:04:59 s6410 kernel: USB Video Class driver (v0.1.0)

and /dev/video and /dev/video is created by udev

# ll /dev/video
lrwxrwxrwx 1 root root 6 Dec  5 16:04 /dev/video -> video0
[root at s6410 ~]# ll /dev/video0
crw------- 1 root root 81, 0 Dec  5 16:04 /dev/video0

However
# cat /dev/video0
cat: /dev/video0: No such device


How can I debug the problem?


Thanks,

	Urs





From felix at derklecks.de  Wed Dec  5 17:17:04 2007
From: felix at derklecks.de (=?ISO-8859-1?Q?Felix_M=F6ller?=)
Date: Wed, 05 Dec 2007 17:17:04 +0100
Subject: [Linux-uvc-devel] Problem with Fujitsu Webcam 046d:09b2
In-Reply-To: <4756C856.2090304@psi.ch>
References: <4756C856.2090304@psi.ch>
Message-ID: <4756CF00.3030704@derklecks.de>

Hi,

> I can not get a Fujitsu Webcam 046d:09b2 working with the uvcvideo driver (SVN revision 148). The driver loads 
> perfectly but no signal at /dev/video0.
> 
> My System:
> - FJS Laptop Lifebook S6410
> - Scientific Linux 51 (RHEL5.1) with kernel 2.6.18-53.el5
> 
> # lsusb
> ...
> Bus 006 Device 003: ID 046d:09b2 Logitech, Inc.
> ...
I think Laurent needs the output of lsusb -vv of you camera with
usbutils 0.72 or newer.

HTH
Felix M?ller


From leftmostcat at gmail.com  Wed Dec  5 17:33:08 2007
From: leftmostcat at gmail.com (=?UTF-8?B?U2XDoW4gZGUgQsO6cmNh?=)
Date: Wed, 05 Dec 2007 09:33:08 -0700
Subject: [Linux-uvc-devel] [PATCH] Apple iSight
In-Reply-To: <1196860815.15919.6.camel@mirell0001.mirell>
References: <4755C791.7040409@gmail.com>
	<1196860815.15919.6.camel@mirell0001.mirell>
Message-ID: <4756D2C4.7080508@gmail.com>

Scr?obh M.S.:
> 2. If you replace this part out of isight.c, do you still get the crash?
>
> From:
> 	if (success == 0)
> 		isight_patch_usb_descriptor (dev);
> To:
> 	if ((success == 0) && (dev->descriptor.idProduct == 0x8501))
> 		isight_patch_usb_descriptor (dev);
>
> --- M.S
    This doesn't work, but a number of reboots and lots of debug 
statements later, I tracked the problem into _extract_offset and from 
there into _sha1. I didn't have SHA1 compiled into the kernel and there 
doesn't appear to be any checking on this, thus the segfault. Adding the 
SHA1 option to the kernel allows the driver to load properly. It would 
probably be a good idea to note this dependency somewhere and maybe do 
some checking to make sure we don't try to access a NULL crypto_tfm. If 
desired, I can try to update the patch with this when I get home this 
evening.

Sean Burke


From laurent.pinchart at skynet.be  Wed Dec  5 22:10:13 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 5 Dec 2007 22:10:13 +0100
Subject: [Linux-uvc-devel] Test report : Quickcam Communicate Deluxe
In-Reply-To: <20071203220934.GA32543@bougret.hpl.hp.com>
References: <20071203220934.GA32543@bougret.hpl.hp.com>
Message-ID: <200712052210.13205.laurent.pinchart@skynet.be>

Hi Jean,

On Monday 03 December 2007, Jean Tourrilhes wrote:
> 	Hi,
>
> 	After some research, I bought a Logitech Quickcam Communicate
> Deluxe (046d:0992). I can report that it work perfectly with luvcview,
> but does not work properly with Skype.
> 	Note that Ligitech names are somewhat confusing. Do not
> confuse it either with the Quickcam Communicate STX (a spca5xx model)
> or the Quickcam Deluxe for Notebooks (UVC + fixed focus).
>
>       I believe that this precise model is the safest buy amongst
> Logitech UVC webcams, other Logitech UVC cameras have either "the bug"
> or are autofocus models (or fixed focus).
> 	This model, the Logitech Quickcam Communicate Deluxe
> (046d:0992) is listed by Logitech as having the new chip inside
> (SPCA527) and does not seem to have "the bug".
> 		http://www.quickcamteam.net/hcl/linux/logitech-webcams
> 	This model has manual focus, all other SPCA527 models have
> autofocus, and autofocus is currently not supported well under
> Linux. I'm not going to pay more to have what effectively becomes a
> fixed focus camera.

None of the existing SPCA527 models have hardware autofocus. All the models 
referenced as having autofocus on Logitech's website have a USB-controllable 
manual focus that is supported by the Linux UVC driver. Autofocus is 
implemented in software in the Windows driver.

> 	This model is currently still a bit expensive, probably
> because it was released not long ago, hopefully with time the price
> should go down.
> 	Note that I said the "safest Logitech UVC webcams". There are
> other very good non-UVC Logitech webcams, I am personally very happy
> with the PRO 3000 and PRO 4000 (both pwc), however their new lines has
> very few webcams with manual focus. And I bet there are also very good
> UVC non-Logitech webcams.
>
> 	With luvcview : work up to 960x720, which is the highest
> resolution in mjpeg mode. The image is very crisp and clear. It
> basically work.
>
> 	With xawtv (version 4, from CVS). For some reasons, I could
> not make the option '-device /dev/video1' work. When I unplugged my
> primary webcam, then xawtv worked fine at 1280x960 using YUYV, which
> is the highest resolution of the webcam. Image quality is real good to
> my eyes.
> 	Note that xawtv 3.95 does not sem to support v4l2.

xawtv 3.95 has a small bug that prevents it from working with the Linux UVC 
driver. It works with some other V4L2 drivers.

> 	With skype 2.0 beta : audio work. Image is black or
> corrupted. It does not work well.
> 	It seems that the Skype guys are working on it. I have not
> tried yet any workaround found on the Skype forums.
>
> 	I'll still have the webcam for a few days before "gifting" it.
>
> 	Have fun...

Thanks for sharing your opinion. I'm sure other users will find this helpful.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Dec  5 22:14:24 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 5 Dec 2007 22:14:24 +0100
Subject: [Linux-uvc-devel] Unsupported HP webcam by Chicony
In-Reply-To: <20071204083426.204040@gmx.net>
References: <20071127220437.177540@gmx.net>
	<200711282053.16879.laurent.pinchart@skynet.be>
	<20071204083426.204040@gmx.net>
Message-ID: <200712052214.24668.laurent.pinchart@skynet.be>

Hi G?nter,

On Tuesday 04 December 2007, G?nter Haus wrote:
> Thank you Laurent for this information, it is in fact because of an v4l-dvb
> installation I have. Searching around the net for some hours, I have not
> found any solution how to make uvcvideo and v4l-dvb to work together. I
> have a virgin Ubuntu gutsy ..386-generic (exept the v4l-dvb modules) Do you
> have any clues?

Sorry I don't. I've never tried v4l-dvb. As they are the ones who ship 
modified kernel headers, maybe you could try asking on their list ?

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Dec  5 22:22:34 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 5 Dec 2007 22:22:34 +0100
Subject: [Linux-uvc-devel] Hercules Dualpix Exchange fully supported
	(tested with skype 2.0)
In-Reply-To: <783c3ee00712040142j38ee448y868984f63c831881@mail.gmail.com>
References: <783c3ee00712040142j38ee448y868984f63c831881@mail.gmail.com>
Message-ID: <200712052222.34974.laurent.pinchart@skynet.be>

Hi John,

On Tuesday 04 December 2007, John Bro wrote:
> > > Now, I  have compiled and installed uvcvideo, V4L and just about
> > > anything vaguely related from apt-get on my Debian lenny 2.6.22-3-k7
> > > But Ekiga still says  my video driver doesn't support the requested 
> > > format. 
> > Try upgrading to a more recent Ekiga version, and make sure you have
> > installed the libpt-plugins-v4l2  package.
>
> Thanks; Laurent, but it's still not working... which version of ekiga would
> you recommend ?
> I have 2.03 which is the latest available for lenny from apt-get;

I'm using 2.0.11. I don't know if it will fix your problem, but it might be 
worth a shot.

> I see a version for ubuntu-lenny that has v. 2.0.11 yet uses older libpt
> libs than I have on my non-ubuntu lenny  and it looks very tricky to install
> an ubuntu deb on vanilla debian..
> anyway...
>
> I have installed the libplugins for V4L2 but nothing has changed except
> that now even Skype no longer shows anything in the test window -- even tho
> the little blue light does come on, although that already started before I
> installed any new libs..
> Ekiga continues to say my video driver doesn't support the requested
> format.
>
> Furthermore, skype never really worked after all since in a real video
> call; it would display video for only a few seconds and then freeze. And it
> the self-viewing inset would just go blank..

Video support in Skype is still beta so I wouldn't be surprised if it doesn't 
work properly.

> I'm beginning to wonder if the webcam is defective..
>
> Can you or anybody suggest more diagnostics before I send the thing back ?

You could try luvcview or ucview, they are both known to work properly with 
the Linux UVC driver.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Dec  5 22:31:57 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 5 Dec 2007 22:31:57 +0100
Subject: [Linux-uvc-devel] uvc having hicups on integrated ricoh webcam
	: 1839
In-Reply-To: <3338542a0712040702j23ab3551gc0be73cdf994328c@mail.gmail.com>
References: <3338542a0711230233w70508824sba3127918674eb25@mail.gmail.com>
	<200711241656.21351.laurent.pinchart@skynet.be>
	<3338542a0712040702j23ab3551gc0be73cdf994328c@mail.gmail.com>
Message-ID: <200712052231.57650.laurent.pinchart@skynet.be>

On Tuesday 04 December 2007, arakeis wrote:
> 2007/11/24, Laurent Pinchart <laurent.pinchart at skynet.be>:
> > I think that's right. Previous Ricoh webcams were not completely USB
> > compliant. Sam Revitch wrote a specific driver called r5u870 that handles
> > firmware loading as well as device-specific requests. You should have a
> > look
> > at it.
>
> looked at it, but the maintainer and website seems away, I tried manually
> patching the driver to use another firmware from a close model (I know it is
> a bit optimistic) I get a device node created, and when used a brief green
> led flash, and it crashes obviously.
>
> is it easy to extract a firmware from a working windows setup ?

Sorry I have no idea :-( I don't own any Ricoh webcam.

> (i tried contacting the maintainer but so far no luck)

Keep trying :-)

Good luck.

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Dec  5 22:41:57 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 5 Dec 2007 22:41:57 +0100
Subject: [Linux-uvc-devel] Lenovo 3000 cameras - 0c45:627f Microdia
In-Reply-To: <2a7dfb920712050219v6299490bu81fbf13f3a03a237@mail.gmail.com>
References: <2a7dfb920712050210webf079ane55acecc45c597b0@mail.gmail.com>
	<475679DA.5090509@derklecks.de>
	<2a7dfb920712050219v6299490bu81fbf13f3a03a237@mail.gmail.com>
Message-ID: <200712052241.57565.laurent.pinchart@skynet.be>

Hi Diego,

On Wednesday 05 December 2007, Diego Iastrubni wrote:
> Hi,
>
> I attach the output of lsusb -vv (taken from Ubuntu 7.10 64 bit,
> usbutils 0.72). The gziped file is 2k, but opens to 37, device is the
> first in the list.

Thanks for the report. Unfortunately your webcam isn't UVC compatible so it 
won't be supported by the Linux UVC driver.

> On Dec 5, 2007 12:13 PM, Felix M?ller <felix at derklecks.de> wrote:
> > Hi,
> >
> > > I just checked out the code, and I see that in revision 148, there is
> > > no support for 627f of Microdia, which is found in Lenovo's 3000
> > > computers.
> > >
> > > I have the HW, and compiling is not a big problem for me. So,
> > > basically what I am saying, is that if you need  a test bunny, you got
> > > one. From looking at the code, I have seen that there are some cameras
> > > do support the UVC interface, but do not announce that.

Those are the first Logitech UVC webcams. I doubt recent webcams would do 
that.

> > > Is it possible that this happes with this camera?

Your camera has a single interface, while UVC webcams need at least 2. I'm 
afraid that rules out the possibility of UVC support.

> > > Is anyone working on making this driver work? (again, how can I help?)
> >
> > you should post the output of lsusb -vv of your camera with usbutils
> > 0.72 or newer.

Thanks Felix for assisting me :-)

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Dec  5 22:49:49 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 5 Dec 2007 22:49:49 +0100
Subject: [Linux-uvc-devel] Problem with Fujitsu Webcam 046d:09b2
In-Reply-To: <4756C856.2090304@psi.ch>
References: <4756C856.2090304@psi.ch>
Message-ID: <200712052249.50056.laurent.pinchart@skynet.be>

Hi Urs,

On Wednesday 05 December 2007, Beyerle Urs wrote:
> Hi,
>
> I can not get a Fujitsu Webcam 046d:09b2 working with the uvcvideo driver
> (SVN revision 148). The driver loads perfectly but no signal at
> /dev/video0.
>
> My System:
> - FJS Laptop Lifebook S6410
> - Scientific Linux 51 (RHEL5.1) with kernel 2.6.18-53.el5
>
> # lsusb
> ...
> Bus 006 Device 003: ID 046d:09b2 Logitech, Inc.
> ...
>
> # less /var/log/messages
> ...
> Dec  5 16:04:59 s6410 kernel: uvcvideo: Found UVC 1.00 device OEM Camera
> (046d:09b2) Dec  5 16:04:59 s6410 kernel: usbcore: registered new driver
> uvcvideo Dec  5 16:04:59 s6410 kernel: USB Video Class driver (v0.1.0)
>
> and /dev/video and /dev/video is created by udev
>
> # ll /dev/video
> lrwxrwxrwx 1 root root 6 Dec  5 16:04 /dev/video -> video0
> [root at s6410 ~]# ll /dev/video0
> crw------- 1 root root 81, 0 Dec  5 16:04 /dev/video0
>
> However
> # cat /dev/video0
> cat: /dev/video0: No such device

That's pretty normal, the driver doesn't support the read() interface. Try 
using applications such as luvcview, ucview or ekiga, they should work fine.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Dec  5 23:31:58 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 5 Dec 2007 23:31:58 +0100
Subject: [Linux-uvc-devel] Logitech QC 9000 lockup on dwFrameInterval
	change during Skype call
In-Reply-To: <20071204195929.GA1101@kolmann.at>
References: <20071204195929.GA1101@kolmann.at>
Message-ID: <200712052331.59034.laurent.pinchart@skynet.be>

Hi Philipp,

On Tuesday 04 December 2007, Philipp Kolmann wrote:
> Hi,
>
> I have a Logitech QuickCam 9000 which works really nice during daylight
> with Skype 2.0 Beta.
>
> Skype starts the Video-Calls with 15fps settings (dwFrameInterval: 666666)
> wich works nicely. After some time, it changes the fps to 30fps
> (dwFrameInterval: 333333) and the cam locks up.

Changing the frame rate from 15fps to 30fps would exceed the allocated bus 
bandwidth. That's not allowed by the UVC spec. Changing from 30fps to 15fps 
might be legal but I'm not sure about it.

> The only possibility to solve this issue is to unplug the cam completely
> from the computer.

The device shouldn't deadlock, that might be a device bug.

> I have added a few lines of debug code to the uvc module I will attach to
> this report. Additional I have attached the output of these debug lines to
> syslog.
>
> Maybe you have an idea, what's going wrong here. Skype told me to get in
> touch with you, since it works during daylight but not with bad light
> during the night.
>
> If you would have any patches to test, I am more then willing to test them.
>
> I hope you can help me with this issue,

The application should stop video streaming before changing the frame rate. 
Could you add debug messages to VIDIOC_STREAMOFF and see if it gets called 
before changing the frame rate ?

If it doesn't, I'm not sure who is to blame. V4L2 doesn't clearly state if 
changing the frame rate during video streaming is allowed or not.

I will raise the issue on the video4linux mailing list if you confirm that 
Skype doesn't stop streaming before changing the frame rate.

Best regards,

Laurent Pinchart


From philipp at kolmann.at  Thu Dec  6 07:56:37 2007
From: philipp at kolmann.at (Philipp Kolmann)
Date: Thu, 6 Dec 2007 07:56:37 +0100
Subject: [Linux-uvc-devel] Logitech QC 9000 lockup on dwFrameInterval
	change during Skype call
In-Reply-To: <200712052331.59034.laurent.pinchart@skynet.be>
References: <20071204195929.GA1101@kolmann.at>
	<200712052331.59034.laurent.pinchart@skynet.be>
Message-ID: <20071206065637.GA26483@kolmann.at>

Hi Laurent,

thanks for looking into this issue.

On Wed, Dec 05, 2007 at 11:31:58PM +0100, Laurent Pinchart wrote:
> Hi Philipp,
> 
> On Tuesday 04 December 2007, Philipp Kolmann wrote:
> > Hi,
> >
> > I have a Logitech QuickCam 9000 which works really nice during daylight
> > with Skype 2.0 Beta.
> >
> > Skype starts the Video-Calls with 15fps settings (dwFrameInterval: 666666)
> > wich works nicely. After some time, it changes the fps to 30fps
> > (dwFrameInterval: 333333) and the cam locks up.
> 
> Changing the frame rate from 15fps to 30fps would exceed the allocated bus 
> bandwidth. That's not allowed by the UVC spec. Changing from 30fps to 15fps 
> might be legal but I'm not sure about it.

It works for me with good light. Not in bad light conditions tough.

> > The only possibility to solve this issue is to unplug the cam completely
> > from the computer.
> 
> The device shouldn't deadlock, that might be a device bug.
> 
> > I have added a few lines of debug code to the uvc module I will attach to
> > this report. Additional I have attached the output of these debug lines to
> > syslog.
> >
> > Maybe you have an idea, what's going wrong here. Skype told me to get in
> > touch with you, since it works during daylight but not with bad light
> > during the night.
> >
> > If you would have any patches to test, I am more then willing to test them.
> >
> > I hope you can help me with this issue,
> 
> The application should stop video streaming before changing the frame rate. 
> Could you add debug messages to VIDIOC_STREAMOFF and see if it gets called 
> before changing the frame rate ?

I added debug output to VIDIOC_STREAMON and VIDIOC_STREAMOFF. VIDIOC_STREAMON
is called after all initial setup is done, but then no VIDIOC_STREAMOFF before
changes.

> If it doesn't, I'm not sure who is to blame. V4L2 doesn't clearly state if 
> changing the frame rate during video streaming is allowed or not.
> 
> I will raise the issue on the video4linux mailing list if you confirm that 
> Skype doesn't stop streaming before changing the frame rate.

Attached find a new syslog with the new debugging in it.

Thanks
Philipp


-- 
The more I learn about people, the more I like my dog!
-------------- next part --------------
Dec  6 07:50:55 chief kernel: usbcore: deregistering interface driver uvcvideo
Dec  6 07:51:23 chief kernel: uvcvideo: Adding mapping Brightness to control 00000000-0000-0000-0000-000000000101/2.
Dec  6 07:51:23 chief kernel: uvcvideo: Adding mapping Contrast to control 00000000-0000-0000-0000-000000000101/3.
Dec  6 07:51:23 chief kernel: uvcvideo: Adding mapping Hue to control 00000000-0000-0000-0000-000000000101/6.
Dec  6 07:51:23 chief kernel: uvcvideo: Adding mapping Saturation to control 00000000-0000-0000-0000-000000000101/7.
Dec  6 07:51:23 chief kernel: uvcvideo: Adding mapping Sharpness to control 00000000-0000-0000-0000-000000000101/8.
Dec  6 07:51:23 chief kernel: uvcvideo: Adding mapping Gamma to control 00000000-0000-0000-0000-000000000101/9.
Dec  6 07:51:23 chief kernel: uvcvideo: Adding mapping Backlight Compensation to control 00000000-0000-0000-0000-000000000101/1.
Dec  6 07:51:23 chief kernel: uvcvideo: Adding mapping Gain to control 00000000-0000-0000-0000-000000000101/4.
Dec  6 07:51:23 chief kernel: uvcvideo: Adding mapping Power Line Frequency to control 00000000-0000-0000-0000-000000000101/5.
Dec  6 07:51:23 chief kernel: uvcvideo: Adding mapping Hue, Auto to control 00000000-0000-0000-0000-000000000101/16.
Dec  6 07:51:23 chief kernel: uvcvideo: Adding mapping Exposure, Auto to control 00000000-0000-0000-0000-000000000001/2.
Dec  6 07:51:23 chief kernel: uvcvideo: Adding mapping Exposure (Absolute) to control 00000000-0000-0000-0000-000000000001/4.
Dec  6 07:51:23 chief kernel: uvcvideo: Adding mapping White Balance Temperature, Auto to control 00000000-0000-0000-0000-000000000101/11.
Dec  6 07:51:23 chief kernel: uvcvideo: Adding mapping White Balance Temperature to control 00000000-0000-0000-0000-000000000101/10.
Dec  6 07:51:23 chief kernel: uvcvideo: Adding mapping Focus (absolute) to control 00000000-0000-0000-0000-000000000001/6.
Dec  6 07:51:23 chief kernel: uvcvideo: Adding mapping Focus, Auto to control 00000000-0000-0000-0000-000000000001/8.
Dec  6 07:51:23 chief kernel: uvcvideo: Probing generic UVC device 1
Dec  6 07:51:23 chief kernel: uvcvideo: Found format MJPEG.
Dec  6 07:51:23 chief kernel: uvcvideo: - 160x120 (30.0 fps)
Dec  6 07:51:23 chief kernel: uvcvideo: - 176x144 (30.0 fps)
Dec  6 07:51:23 chief kernel: uvcvideo: - 320x240 (15.0 fps)
Dec  6 07:51:23 chief kernel: uvcvideo: - 352x288 (15.0 fps)
Dec  6 07:51:23 chief kernel: uvcvideo: - 640x480 (15.0 fps)
Dec  6 07:51:23 chief kernel: uvcvideo: - 800x600 (15.0 fps)
Dec  6 07:51:23 chief kernel: uvcvideo: - 960x720 (10.0 fps)
Dec  6 07:51:23 chief kernel: uvcvideo: Found format YUV 4:2:2 (YUYV).
Dec  6 07:51:23 chief kernel: uvcvideo: - 160x120 (30.0 fps)
Dec  6 07:51:23 chief kernel: uvcvideo: - 176x144 (30.0 fps)
Dec  6 07:51:23 chief kernel: uvcvideo: - 320x240 (15.0 fps)
Dec  6 07:51:23 chief kernel: uvcvideo: - 352x288 (15.0 fps)
Dec  6 07:51:23 chief kernel: uvcvideo: - 640x480 (15.0 fps)
Dec  6 07:51:23 chief kernel: uvcvideo: - 800x600 (15.0 fps)
Dec  6 07:51:23 chief kernel: uvcvideo: - 960x720 (10.0 fps)
Dec  6 07:51:23 chief kernel: uvcvideo: - 1600x1200 (5.0 fps)
Dec  6 07:51:23 chief kernel: uvcvideo: Found a Status endpoint (addr 87).
Dec  6 07:51:23 chief kernel: uvcvideo: Found UVC 1.00 device <unnamed> (046d:0990)
Dec  6 07:51:23 chief kernel: uvcvideo: Added control 00000000-0000-0000-0000-000000000101/2 to device 1 entity 2
Dec  6 07:51:23 chief kernel: uvcvideo: Added control 00000000-0000-0000-0000-000000000101/3 to device 1 entity 2
Dec  6 07:51:23 chief kernel: uvcvideo: Added control 00000000-0000-0000-0000-000000000101/7 to device 1 entity 2
Dec  6 07:51:23 chief kernel: uvcvideo: Added control 00000000-0000-0000-0000-000000000101/8 to device 1 entity 2
Dec  6 07:51:23 chief kernel: uvcvideo: Added control 00000000-0000-0000-0000-000000000101/1 to device 1 entity 2
Dec  6 07:51:23 chief kernel: uvcvideo: Added control 00000000-0000-0000-0000-000000000101/4 to device 1 entity 2
Dec  6 07:51:23 chief kernel: uvcvideo: Added control 00000000-0000-0000-0000-000000000101/5 to device 1 entity 2
Dec  6 07:51:23 chief kernel: uvcvideo: Added control 00000000-0000-0000-0000-000000000001/2 to device 1 entity 1
Dec  6 07:51:23 chief kernel: uvcvideo: Added control 00000000-0000-0000-0000-000000000001/4 to device 1 entity 1
Dec  6 07:51:23 chief kernel: uvcvideo: Added control 00000000-0000-0000-0000-000000000101/11 to device 1 entity 2
Dec  6 07:51:23 chief kernel: uvcvideo: Added control 00000000-0000-0000-0000-000000000101/10 to device 1 entity 2
Dec  6 07:51:23 chief kernel: uvcvideo: Scanning UVC chain: OT 5 <- XU 4 (-> XU 10 12 8 11 9) <- PU 2 (-> XU 13) <- IT 1
Dec  6 07:51:23 chief kernel: uvcvideo: Found a valid video chain (1 -> 5).
Dec  6 07:51:23 chief kernel: uvcvideo: Some webcams don't suport GET_DEF request on the probe control
Dec  6 07:51:23 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 07:51:23 chief kernel: uvcvideo: bmHint: 44581
Dec  6 07:51:23 chief kernel: uvcvideo: bFormatIndex: 1
Dec  6 07:51:23 chief kernel: uvcvideo: bFrameIndex: 3
Dec  6 07:51:23 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 07:51:23 chief kernel: uvcvideo: wKeyFrameRate: 61704
Dec  6 07:51:23 chief kernel: uvcvideo: wCompQuality: 10000
Dec  6 07:51:23 chief kernel: uvcvideo: wCompWindowSize: 46919
Dec  6 07:51:23 chief kernel: uvcvideo: wDelay: 0
Dec  6 07:51:23 chief kernel: uvcvideo: dwMaxVideoFrameSize: 102400
Dec  6 07:51:23 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 192
Dec  6 07:51:23 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  6 07:51:23 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 07:51:23 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 07:51:23 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 07:51:23 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 07:51:23 chief kernel: uvcvideo: =======================
Dec  6 07:51:23 chief kernel: uvcvideo: UVC device initialized.
Dec  6 07:51:23 chief kernel: usbcore: registered new interface driver uvcvideo
Dec  6 07:51:23 chief kernel: USB Video Class driver (v0.1.0)
Dec  6 07:51:45 chief kernel: uvcvideo: Trying format 0x32315559 (YU12): 320x240.
Dec  6 07:51:45 chief kernel: uvcvideo: Unsupported format 0x32315559.
Dec  6 07:51:45 chief kernel: uvcvideo: Trying format 0x56595559 (YUYV): 320x240.
Dec  6 07:51:45 chief kernel: uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
Dec  6 07:51:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 07:51:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 07:51:45 chief kernel: uvcvideo: bFrameIndex: 3
Dec  6 07:51:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 07:51:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wCompQuality: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 0
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 0
Dec  6 07:51:45 chief kernel: uvcvideo: dwClockFrequency: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: =======================
Dec  6 07:51:45 chief kernel: uvcvideo: Get the minimum and maximum values for compression settings.
Dec  6 07:51:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 07:51:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 07:51:45 chief kernel: uvcvideo: xxx
Dec  6 07:51:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 07:51:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 07:51:45 chief kernel: uvcvideo: bFrameIndex: 3
Dec  6 07:51:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 07:51:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wCompQuality: 10000
Dec  6 07:51:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 0
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 0
Dec  6 07:51:45 chief kernel: uvcvideo: dwClockFrequency: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: =======================
Dec  6 07:51:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 07:51:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 07:51:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 07:51:45 chief kernel: uvcvideo: bFrameIndex: 3
Dec  6 07:51:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 07:51:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wCompQuality: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 153600
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 512
Dec  6 07:51:45 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  6 07:51:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: =======================
Dec  6 07:51:45 chief kernel: uvcvideo: Setting frame interval to 1/15 (666666).
Dec  6 07:51:45 chief kernel: uvcvideo: uvc_try_frame_interval()
Dec  6 07:51:45 chief kernel: uvcvideo: Probe the device with the new settings.
Dec  6 07:51:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 07:51:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 07:51:45 chief kernel: uvcvideo: bFrameIndex: 3
Dec  6 07:51:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 07:51:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wCompQuality: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 153600
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 512
Dec  6 07:51:45 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  6 07:51:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: =======================
Dec  6 07:51:45 chief kernel: uvcvideo: Get the minimum and maximum values for compression settings.
Dec  6 07:51:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 07:51:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 07:51:45 chief kernel: uvcvideo: xxx
Dec  6 07:51:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 07:51:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 07:51:45 chief kernel: uvcvideo: bFrameIndex: 3
Dec  6 07:51:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 07:51:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wCompQuality: 10000
Dec  6 07:51:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 153600
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 512
Dec  6 07:51:45 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  6 07:51:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: =======================
Dec  6 07:51:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 07:51:45 chief kernel: uvcvideo: Commit the new settings.
Dec  6 07:51:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 07:51:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 07:51:45 chief kernel: uvcvideo: bFrameIndex: 3
Dec  6 07:51:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 07:51:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wCompQuality: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 153600
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 512
Dec  6 07:51:45 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  6 07:51:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: =======================
Dec  6 07:51:45 chief kernel: uvcvideo: Return the actual frame period.
Dec  6 07:51:45 chief kernel: uvcvideo: Trying format 0x32315559 (YU12): 640x480.
Dec  6 07:51:45 chief kernel: uvcvideo: Unsupported format 0x32315559.
Dec  6 07:51:45 chief kernel: uvcvideo: Trying format 0x56595559 (YUYV): 640x480.
Dec  6 07:51:45 chief kernel: uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
Dec  6 07:51:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 07:51:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 07:51:45 chief kernel: uvcvideo: bFrameIndex: 5
Dec  6 07:51:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 07:51:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wCompQuality: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 0
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 0
Dec  6 07:51:45 chief kernel: uvcvideo: dwClockFrequency: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: =======================
Dec  6 07:51:45 chief kernel: uvcvideo: Get the minimum and maximum values for compression settings.
Dec  6 07:51:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 07:51:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 07:51:45 chief kernel: uvcvideo: xxx
Dec  6 07:51:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 07:51:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 07:51:45 chief kernel: uvcvideo: bFrameIndex: 5
Dec  6 07:51:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 07:51:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wCompQuality: 10000
Dec  6 07:51:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 0
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 0
Dec  6 07:51:45 chief kernel: uvcvideo: dwClockFrequency: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: =======================
Dec  6 07:51:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 07:51:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 07:51:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 07:51:45 chief kernel: uvcvideo: bFrameIndex: 5
Dec  6 07:51:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 07:51:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wCompQuality: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 614400
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 1984
Dec  6 07:51:45 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  6 07:51:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: =======================
Dec  6 07:51:45 chief kernel: uvcvideo: Setting frame interval to 1/15 (666666).
Dec  6 07:51:45 chief kernel: uvcvideo: uvc_try_frame_interval()
Dec  6 07:51:45 chief kernel: uvcvideo: Probe the device with the new settings.
Dec  6 07:51:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 07:51:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 07:51:45 chief kernel: uvcvideo: bFrameIndex: 5
Dec  6 07:51:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 07:51:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wCompQuality: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 614400
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 1984
Dec  6 07:51:45 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  6 07:51:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: =======================
Dec  6 07:51:45 chief kernel: uvcvideo: Get the minimum and maximum values for compression settings.
Dec  6 07:51:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 07:51:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 07:51:45 chief kernel: uvcvideo: xxx
Dec  6 07:51:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 07:51:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 07:51:45 chief kernel: uvcvideo: bFrameIndex: 5
Dec  6 07:51:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 07:51:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wCompQuality: 10000
Dec  6 07:51:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 614400
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 1984
Dec  6 07:51:45 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  6 07:51:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: =======================
Dec  6 07:51:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 07:51:45 chief kernel: uvcvideo: Commit the new settings.
Dec  6 07:51:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 07:51:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 07:51:45 chief kernel: uvcvideo: bFrameIndex: 5
Dec  6 07:51:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 07:51:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wCompQuality: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 07:51:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 614400
Dec  6 07:51:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 1984
Dec  6 07:51:45 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  6 07:51:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 07:51:45 chief kernel: uvcvideo: =======================
Dec  6 07:51:45 chief kernel: uvcvideo: Return the actual frame period.
Dec  6 07:51:45 chief kernel: uvcvideo: VIDIOC_STREAMON.

Running for a few secs and then trying to go to 25 fps (new in beta 2).

Dec  6 07:51:56 chief kernel: uvcvideo: Setting frame interval to 1/25 (400000).
Dec  6 07:51:56 chief kernel: uvcvideo: uvc_try_frame_interval()
Dec  6 07:51:56 chief kernel: uvcvideo: Probe the device with the new settings.
Dec  6 07:51:56 chief kernel: uvcvideo: bmHint: 1
Dec  6 07:51:56 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 07:51:56 chief kernel: uvcvideo: bFrameIndex: 5
Dec  6 07:51:56 chief kernel: uvcvideo: dwFrameInterval: 400000
Dec  6 07:51:56 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 07:51:56 chief kernel: uvcvideo: wCompQuality: 0
Dec  6 07:51:56 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 07:51:56 chief kernel: uvcvideo: wDelay: 0
Dec  6 07:51:56 chief kernel: uvcvideo: dwMaxVideoFrameSize: 614400
Dec  6 07:51:56 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 1984
Dec  6 07:51:56 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  6 07:51:56 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 07:51:56 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 07:51:56 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 07:51:56 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 07:51:56 chief kernel: uvcvideo: =======================
Dec  6 07:51:56 chief kernel: uvcvideo: Get the minimum and maximum values for compression settings.
Dec  6 07:51:56 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 07:51:56 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 07:51:56 chief kernel: uvcvideo: xxx
Dec  6 07:51:56 chief kernel: uvcvideo: bmHint: 1
Dec  6 07:51:56 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 07:51:56 chief kernel: uvcvideo: bFrameIndex: 5
Dec  6 07:51:56 chief kernel: uvcvideo: dwFrameInterval: 400000
Dec  6 07:51:56 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 07:51:56 chief kernel: uvcvideo: wCompQuality: 10000
Dec  6 07:51:56 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 07:51:56 chief kernel: uvcvideo: wDelay: 0
Dec  6 07:51:56 chief kernel: uvcvideo: dwMaxVideoFrameSize: 614400
Dec  6 07:51:56 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 1984
Dec  6 07:51:56 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  6 07:51:56 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 07:51:56 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 07:51:56 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 07:51:56 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 07:51:56 chief kernel: uvcvideo: =======================
Dec  6 07:51:56 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 07:51:56 chief kernel: uvcvideo: Commit the new settings.
Dec  6 07:51:56 chief kernel: uvcvideo: bmHint: 1
Dec  6 07:51:56 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 07:51:56 chief kernel: uvcvideo: bFrameIndex: 5
Dec  6 07:51:56 chief kernel: uvcvideo: dwFrameInterval: 400000
Dec  6 07:51:56 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 07:51:56 chief kernel: uvcvideo: wCompQuality: 0
Dec  6 07:51:56 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 07:51:56 chief kernel: uvcvideo: wDelay: 1
Dec  6 07:51:56 chief kernel: uvcvideo: dwMaxVideoFrameSize: 614400
Dec  6 07:51:56 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 3060
Dec  6 07:51:56 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  6 07:51:56 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 07:51:56 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 07:51:56 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 07:51:56 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 07:51:56 chief kernel: uvcvideo: =======================
Dec  6 07:51:57 chief kernel: uvcvideo: Failed to query (1) UVC control 2 (unit 0) : -110 (exp. 26).

From philipp at kolmann.at  Thu Dec  6 08:17:06 2007
From: philipp at kolmann.at (Philipp Kolmann)
Date: Thu, 6 Dec 2007 08:17:06 +0100
Subject: [Linux-uvc-devel] Logitech QC 9000 lockup on dwFrameInterval
	change during Skype call
In-Reply-To: <20071206065637.GA26483@kolmann.at>
References: <20071204195929.GA1101@kolmann.at>
	<200712052331.59034.laurent.pinchart@skynet.be>
	<20071206065637.GA26483@kolmann.at>
Message-ID: <20071206071706.GA29043@kolmann.at>

Here is the syslog output of a sessing with better day-light. As you can see,
the cam didn't crash.

Thanks
Philipp
-------------- next part --------------
Dec  6 08:13:45 chief kernel: uvcvideo: Trying format 0x32315559 (YU12): 320x240.
Dec  6 08:13:45 chief kernel: uvcvideo: Unsupported format 0x32315559.
Dec  6 08:13:45 chief kernel: uvcvideo: Trying format 0x56595559 (YUYV): 320x240.
Dec  6 08:13:45 chief kernel: uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
Dec  6 08:13:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 08:13:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 08:13:45 chief kernel: uvcvideo: bFrameIndex: 3
Dec  6 08:13:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 08:13:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wCompQuality: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 0
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 0
Dec  6 08:13:45 chief kernel: uvcvideo: dwClockFrequency: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: =======================
Dec  6 08:13:45 chief kernel: uvcvideo: Get the minimum and maximum values for compression settings.
Dec  6 08:13:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 08:13:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 08:13:45 chief kernel: uvcvideo: xxx
Dec  6 08:13:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 08:13:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 08:13:45 chief kernel: uvcvideo: bFrameIndex: 3
Dec  6 08:13:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 08:13:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wCompQuality: 10000
Dec  6 08:13:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 0
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 0
Dec  6 08:13:45 chief kernel: uvcvideo: dwClockFrequency: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: =======================
Dec  6 08:13:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 08:13:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 08:13:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 08:13:45 chief kernel: uvcvideo: bFrameIndex: 3
Dec  6 08:13:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 08:13:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wCompQuality: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 153600
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 512
Dec  6 08:13:45 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  6 08:13:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: =======================
Dec  6 08:13:45 chief kernel: uvcvideo: Setting frame interval to 1/15 (666666).
Dec  6 08:13:45 chief kernel: uvcvideo: uvc_try_frame_interval()
Dec  6 08:13:45 chief kernel: uvcvideo: Probe the device with the new settings.
Dec  6 08:13:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 08:13:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 08:13:45 chief kernel: uvcvideo: bFrameIndex: 3
Dec  6 08:13:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 08:13:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wCompQuality: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 153600
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 512
Dec  6 08:13:45 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  6 08:13:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: =======================
Dec  6 08:13:45 chief kernel: uvcvideo: Get the minimum and maximum values for compression settings.
Dec  6 08:13:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 08:13:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 08:13:45 chief kernel: uvcvideo: xxx
Dec  6 08:13:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 08:13:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 08:13:45 chief kernel: uvcvideo: bFrameIndex: 3
Dec  6 08:13:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 08:13:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wCompQuality: 10000
Dec  6 08:13:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 153600
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 512
Dec  6 08:13:45 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  6 08:13:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: =======================
Dec  6 08:13:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 08:13:45 chief kernel: uvcvideo: Commit the new settings.
Dec  6 08:13:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 08:13:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 08:13:45 chief kernel: uvcvideo: bFrameIndex: 3
Dec  6 08:13:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 08:13:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wCompQuality: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 153600
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 512
Dec  6 08:13:45 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  6 08:13:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: =======================
Dec  6 08:13:45 chief kernel: uvcvideo: Return the actual frame period.
Dec  6 08:13:45 chief kernel: uvcvideo: Trying format 0x32315559 (YU12): 640x480.
Dec  6 08:13:45 chief kernel: uvcvideo: Unsupported format 0x32315559.
Dec  6 08:13:45 chief kernel: uvcvideo: Trying format 0x56595559 (YUYV): 640x480.
Dec  6 08:13:45 chief kernel: uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
Dec  6 08:13:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 08:13:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 08:13:45 chief kernel: uvcvideo: bFrameIndex: 5
Dec  6 08:13:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 08:13:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wCompQuality: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 0
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 0
Dec  6 08:13:45 chief kernel: uvcvideo: dwClockFrequency: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: =======================
Dec  6 08:13:45 chief kernel: uvcvideo: Get the minimum and maximum values for compression settings.
Dec  6 08:13:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 08:13:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 08:13:45 chief kernel: uvcvideo: xxx
Dec  6 08:13:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 08:13:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 08:13:45 chief kernel: uvcvideo: bFrameIndex: 5
Dec  6 08:13:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 08:13:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wCompQuality: 10000
Dec  6 08:13:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 0
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 0
Dec  6 08:13:45 chief kernel: uvcvideo: dwClockFrequency: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: =======================
Dec  6 08:13:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 08:13:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 08:13:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 08:13:45 chief kernel: uvcvideo: bFrameIndex: 5
Dec  6 08:13:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 08:13:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wCompQuality: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 614400
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 1984
Dec  6 08:13:45 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  6 08:13:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: =======================
Dec  6 08:13:45 chief kernel: uvcvideo: Setting frame interval to 1/15 (666666).
Dec  6 08:13:45 chief kernel: uvcvideo: uvc_try_frame_interval()
Dec  6 08:13:45 chief kernel: uvcvideo: Probe the device with the new settings.
Dec  6 08:13:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 08:13:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 08:13:45 chief kernel: uvcvideo: bFrameIndex: 5
Dec  6 08:13:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 08:13:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wCompQuality: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 614400
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 1984
Dec  6 08:13:45 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  6 08:13:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: =======================
Dec  6 08:13:45 chief kernel: uvcvideo: Get the minimum and maximum values for compression settings.
Dec  6 08:13:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 08:13:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 08:13:45 chief kernel: uvcvideo: xxx
Dec  6 08:13:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 08:13:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 08:13:45 chief kernel: uvcvideo: bFrameIndex: 5
Dec  6 08:13:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 08:13:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wCompQuality: 10000
Dec  6 08:13:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 614400
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 1984
Dec  6 08:13:45 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  6 08:13:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: =======================
Dec  6 08:13:45 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 08:13:45 chief kernel: uvcvideo: Commit the new settings.
Dec  6 08:13:45 chief kernel: uvcvideo: bmHint: 1
Dec  6 08:13:45 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 08:13:45 chief kernel: uvcvideo: bFrameIndex: 5
Dec  6 08:13:45 chief kernel: uvcvideo: dwFrameInterval: 666666
Dec  6 08:13:45 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wCompQuality: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 08:13:45 chief kernel: uvcvideo: wDelay: 0
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxVideoFrameSize: 614400
Dec  6 08:13:45 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 1984
Dec  6 08:13:45 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  6 08:13:45 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 08:13:45 chief kernel: uvcvideo: =======================
Dec  6 08:13:45 chief kernel: uvcvideo: Return the actual frame period.
Dec  6 08:13:45 chief kernel: uvcvideo: VIDIOC_STREAMON.


Dec  6 08:13:58 chief kernel: uvcvideo: Setting frame interval to 1/25 (400000).
Dec  6 08:13:58 chief kernel: uvcvideo: uvc_try_frame_interval()
Dec  6 08:13:58 chief kernel: uvcvideo: Probe the device with the new settings.
Dec  6 08:13:58 chief kernel: uvcvideo: bmHint: 1
Dec  6 08:13:58 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 08:13:58 chief kernel: uvcvideo: bFrameIndex: 5
Dec  6 08:13:58 chief kernel: uvcvideo: dwFrameInterval: 400000
Dec  6 08:13:58 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 08:13:58 chief kernel: uvcvideo: wCompQuality: 0
Dec  6 08:13:58 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 08:13:58 chief kernel: uvcvideo: wDelay: 0
Dec  6 08:13:58 chief kernel: uvcvideo: dwMaxVideoFrameSize: 614400
Dec  6 08:13:58 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 1984
Dec  6 08:13:58 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  6 08:13:58 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 08:13:58 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 08:13:58 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 08:13:58 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 08:13:58 chief kernel: uvcvideo: =======================
Dec  6 08:13:58 chief kernel: uvcvideo: Get the minimum and maximum values for compression settings.
Dec  6 08:13:58 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 08:13:59 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 08:13:59 chief kernel: uvcvideo: xxx
Dec  6 08:13:59 chief kernel: uvcvideo: bmHint: 1
Dec  6 08:13:59 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 08:13:59 chief kernel: uvcvideo: bFrameIndex: 5
Dec  6 08:13:59 chief kernel: uvcvideo: dwFrameInterval: 400000
Dec  6 08:13:59 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 08:13:59 chief kernel: uvcvideo: wCompQuality: 10000
Dec  6 08:13:59 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 08:13:59 chief kernel: uvcvideo: wDelay: 0
Dec  6 08:13:59 chief kernel: uvcvideo: dwMaxVideoFrameSize: 614400
Dec  6 08:13:59 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 1984
Dec  6 08:13:59 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  6 08:13:59 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 08:13:59 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 08:13:59 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 08:13:59 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 08:13:59 chief kernel: uvcvideo: =======================
Dec  6 08:13:59 chief kernel: uvcvideo: uvc_get_video_ctrl
Dec  6 08:13:59 chief kernel: uvcvideo: Commit the new settings.
Dec  6 08:13:59 chief kernel: uvcvideo: bmHint: 1
Dec  6 08:13:59 chief kernel: uvcvideo: bFormatIndex: 2
Dec  6 08:13:59 chief kernel: uvcvideo: bFrameIndex: 5
Dec  6 08:13:59 chief kernel: uvcvideo: dwFrameInterval: 400000
Dec  6 08:13:59 chief kernel: uvcvideo: wKeyFrameRate: 0
Dec  6 08:13:59 chief kernel: uvcvideo: wCompQuality: 0
Dec  6 08:13:59 chief kernel: uvcvideo: wCompWindowSize: 0
Dec  6 08:13:59 chief kernel: uvcvideo: wDelay: 1
Dec  6 08:13:59 chief kernel: uvcvideo: dwMaxVideoFrameSize: 614400
Dec  6 08:13:59 chief kernel: uvcvideo: dwMaxPayloadTransferSize: 3060
Dec  6 08:13:59 chief kernel: uvcvideo: dwClockFrequency: 48000000
Dec  6 08:13:59 chief kernel: uvcvideo: bmFramingInfo: 0
Dec  6 08:13:59 chief kernel: uvcvideo: bPreferedVersion: 0
Dec  6 08:13:59 chief kernel: uvcvideo: bMinVersion: 0
Dec  6 08:13:59 chief kernel: uvcvideo: bMaxVersion: 0
Dec  6 08:13:59 chief kernel: uvcvideo: =======================
Dec  6 08:13:59 chief kernel: uvcvideo: Return the actual frame period.


Dec  6 08:14:22 chief kernel: uvcvideo: VIDIOC_STREAMOFF.

From urs.beyerle at psi.ch  Thu Dec  6 12:34:39 2007
From: urs.beyerle at psi.ch (Beyerle Urs)
Date: Thu, 06 Dec 2007 12:34:39 +0100
Subject: [Linux-uvc-devel] Problem with Fujitsu Webcam 046d:09b2
In-Reply-To: <200712052249.50056.laurent.pinchart@skynet.be>
References: <4756C856.2090304@psi.ch>
	<200712052249.50056.laurent.pinchart@skynet.be>
Message-ID: <4757DE4F.4080204@psi.ch>

Laurent Pinchart wrote:
> Hi Urs,
> 
> On Wednesday 05 December 2007, Beyerle Urs wrote:
>> Hi,
>>
>> I can not get a Fujitsu Webcam 046d:09b2 working with the uvcvideo driver
>> (SVN revision 148). The driver loads perfectly but no signal at
>> /dev/video0.
>>
>> My System:
>> - FJS Laptop Lifebook S6410
>> - Scientific Linux 51 (RHEL5.1) with kernel 2.6.18-53.el5
>>
>> # lsusb
>> ...
>> Bus 006 Device 003: ID 046d:09b2 Logitech, Inc.
>> ...
>>
>> # less /var/log/messages
>> ...
>> Dec  5 16:04:59 s6410 kernel: uvcvideo: Found UVC 1.00 device OEM Camera
>> (046d:09b2) Dec  5 16:04:59 s6410 kernel: usbcore: registered new driver
>> uvcvideo Dec  5 16:04:59 s6410 kernel: USB Video Class driver (v0.1.0)
>>
>> and /dev/video and /dev/video is created by udev
>>
>> # ll /dev/video
>> lrwxrwxrwx 1 root root 6 Dec  5 16:04 /dev/video -> video0
>> [root at s6410 ~]# ll /dev/video0
>> crw------- 1 root root 81, 0 Dec  5 16:04 /dev/video0
>>
>> However
>> # cat /dev/video0
>> cat: /dev/video0: No such device
> 
> That's pretty normal, the driver doesn't support the read() interface. Try 
> using applications such as luvcview, ucview or ekiga, they should work fine.
> 


Thanks for the answer. Yes, it's working with luvcview and ekiga!

Hope vlc soon supports v4l2...

Thanks again,

	Urs






> Best regards,
> 
> Laurent Pinchart



From laurent.pinchart at skynet.be  Fri Dec  7 01:37:46 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 7 Dec 2007 01:37:46 +0100
Subject: [Linux-uvc-devel] Logitech QC 9000 lockup on dwFrameInterval
	change during Skype call
In-Reply-To: <20071206065637.GA26483@kolmann.at>
References: <20071204195929.GA1101@kolmann.at>
	<200712052331.59034.laurent.pinchart@skynet.be>
	<20071206065637.GA26483@kolmann.at>
Message-ID: <200712070137.46488.laurent.pinchart@skynet.be>

On Thursday 06 December 2007, Philipp Kolmann wrote:
> Hi Laurent,
>
> thanks for looking into this issue.
>
> On Wed, Dec 05, 2007 at 11:31:58PM +0100, Laurent Pinchart wrote:
> > Hi Philipp,
> >
> > On Tuesday 04 December 2007, Philipp Kolmann wrote:
> > > Hi,
> > >
> > > I have a Logitech QuickCam 9000 which works really nice during daylight
> > > with Skype 2.0 Beta.
> > >
> > > Skype starts the Video-Calls with 15fps settings (dwFrameInterval:
> > > 666666) wich works nicely. After some time, it changes the fps to 30fps
> > > (dwFrameInterval: 333333) and the cam locks up.
> >
> > Changing the frame rate from 15fps to 30fps would exceed the allocated
> > bus bandwidth. That's not allowed by the UVC spec. Changing from 30fps to
> > 15fps might be legal but I'm not sure about it.
>
> It works for me with good light. Not in bad light conditions tough.
>
> > > The only possibility to solve this issue is to unplug the cam
> > > completely from the computer.
> >
> > The device shouldn't deadlock, that might be a device bug.
> >
> > > I have added a few lines of debug code to the uvc module I will attach
> > > to this report. Additional I have attached the output of these debug
> > > lines to syslog.
> > >
> > > Maybe you have an idea, what's going wrong here. Skype told me to get
> > > in touch with you, since it works during daylight but not with bad
> > > light during the night.
> > >
> > > If you would have any patches to test, I am more then willing to test
> > > them.
> > >
> > > I hope you can help me with this issue,
> >
> > The application should stop video streaming before changing the frame
> > rate. Could you add debug messages to VIDIOC_STREAMOFF and see if it gets
> > called before changing the frame rate ?
>
> I added debug output to VIDIOC_STREAMON and VIDIOC_STREAMOFF.
> VIDIOC_STREAMON is called after all initial setup is done, but then no
> VIDIOC_STREAMOFF before changes.
>
> > If it doesn't, I'm not sure who is to blame. V4L2 doesn't clearly state
> > if changing the frame rate during video streaming is allowed or not.
> >
> > I will raise the issue on the video4linux mailing list if you confirm
> > that Skype doesn't stop streaming before changing the frame rate.
>
> Attached find a new syslog with the new debugging in it.

For some unknown reason, the camera crashes when requesting a higher frame 
rate in low light conditions while streaming.

Raising the frame rate while streaming is probably illegal. It would raise the 
bandwidth, which requires bandwidth renegotiation when using isochronous 
transfers.

As we can't fix the webcam itself, there are two main solutions.

- The uvcvideo driver could stop streaming, renegotiate the parameters and 
restart streaming. The webcam might still crash as the cause of the crash is 
not understood.

- Skype could stop streaming, change the frame rate and restart streaming. 
Ditto about the webcam crash.

It would be interesting to write a small application to stress-test different 
use cases and see what works before making modifications to Skype or to the 
driver.

Best regards,

Laurent Pinchart


From jt at hpl.hp.com  Sat Dec  8 00:24:02 2007
From: jt at hpl.hp.com (Jean Tourrilhes)
Date: Fri, 7 Dec 2007 15:24:02 -0800
Subject: [Linux-uvc-devel] Test report : Quickcam Communicate Deluxe
In-Reply-To: <200712052210.13205.laurent.pinchart@skynet.be>
References: <20071203220934.GA32543@bougret.hpl.hp.com>
	<200712052210.13205.laurent.pinchart@skynet.be>
Message-ID: <20071207232402.GA17491@bougret.hpl.hp.com>

	Hi all,

	I was planning to reply to you all and do more test, but
unfortunately did not find the time. Sorry about that. Maybe during
the Chrismas break I'll find a few minutes.
	Thanks for your response and encouragment.

On Wed, Dec 05, 2007 at 08:46:03AM +0100, Anthony Durity wrote:
>
> This posting on the Skype forums is continually updated as the devs iron
> out the kinks in the Skype video code. It is informative.
> 
> http://forum.skype.com/index.php?showtopic=101297&st=20

	Yes, the Skype situation is evolving as we speak. It seems
that they have released a new beta and that setting the frame size and
frame rate do help. I was planning to test that.
	Because of the fluidity of the situation, I decided to not
elaborate in my original e-mail.

On Wed, Dec 05, 2007 at 10:10:13PM +0100, Laurent Pinchart wrote:
> Hi Jean,
> 
> On Monday 03 December 2007, Jean Tourrilhes wrote:
> >
> > 	This model has manual focus, all other SPCA527 models have
> > autofocus, and autofocus is currently not supported well under
> > Linux. I'm not going to pay more to have what effectively becomes a
> > fixed focus camera.
> 
> None of the existing SPCA527 models have hardware autofocus. All the models 
> referenced as having autofocus on Logitech's website have a USB-controllable 
> manual focus that is supported by the Linux UVC driver. Autofocus is 
> implemented in software in the Windows driver.

	I've never said those have hardware autofocus (wow, I wish it
was the case), I was just quoting the commonly accepted categorisation
of webcams, which are "fixed", "manual" and "autofocus".
	If you want to get detailed, they do have hardware support for
autofocus and limited support for manual focus. Manual focus
photographic cameras and webcams usually have a ring or wheel to
adjust the focus. On the Quickcam Communicate Deluxe, there is a wheel
on the right of the webcam to adjust focus, on the pro3000/pro4000 you
turn the black ring around the lens. On the other hand, the Quickcam
Communicate Deluxe will never support autofocus, as it doesn't have
hardware support for autofocus.
	Note that the implementation of autofocus in most point and
shoot digital cameras is software controlled (contrast detection on
the main sensor run by the main CPU). When you look at the system
view, the Logitech webcam solution is similar, focus is achieved
automatically and continuously by the software on the main CPU (in the
driver) using contrast detection (in the driver).

	Now, implementation of autofocus in Linux will require some
change. You can't force every single application to implement the
autofocus itself. And you don't want to push it in the driver. It
seems obvious that some framework change is needed.
	For example, you could modify V4L2 to allow two application to
simultaneously get data from the driver, one would be your main webcam
app, and the second a specific autofocus app. The same way two apps
can simultaneously read data from a NIC or a disk. There is many other
ways to do it, all seems to require framework change (either kernel or
userspace).
	I personally don't see that happening overnight, therefore I
decided against an "autofocus" webcam.

> > 	Note that xawtv 3.95 does not sem to support v4l2.
> 
> xawtv 3.95 has a small bug that prevents it from working with the Linux UVC 
> driver. It works with some other V4L2 drivers.

	Ok, I stand corrected. Anyway, I did not care about xawtv, I
just wanted to test YUYV and the highest resolution.

> Thanks for sharing your opinion. I'm sure other users will find this helpful.

	Well, I found that picking a webcam is not easy, as they are
lot's of pitfalls and incompatibilites. I actually picked this webcam
for my brother who is using a Mac. The support of webcam in OS-X is
pretty weird as well.

> Best regards,
> 
> Laurent Pinchart

	A+

	Jean


From bersace03 at gmail.com  Sat Dec  8 17:16:31 2007
From: bersace03 at gmail.com (=?ISO-8859-1?Q?=C9tienne?= Bersac)
Date: Sat, 08 Dec 2007 17:16:31 +0100
Subject: [Linux-uvc-devel] Built-in iSight Firmware Tools
Message-ID: <1197130591.6842.32.camel@thilivren>

Hi,

Investigating iSight support for my iMac G5 iSight
( http://www.apple.com/support/imac/g5/ ), i forked the previous work of
Ronald S. Bultje named "extract.c". I didn't read the news about iSight
driver with built-in firmware extrator and loader.

It could have been enough just to add powerpc AppleUSBVideoSupport SHA1
sum + offset, but since Ronald switched to Mac OS X, i though i had to
take the project. This is why i forked.

Once i got firmware loading, i search to get the driver set up. I
contacted Laurent and then i found the work done by Ivan. I reworked the
patch to fulfill several needs :

For userspace tools :

      * Create a proper project named isight-firmware-tools, using
        autotools.
      * Added support for PowerPC64 boxes (iMac G5 iSight 17" and 20").
      * Splitted extract into ift-extract and ift-load
      * Reworked ift-extract to patch the firmware
      * By default, output firmware to /lib/firmware/isight.fw
      * Added a udev rules to call ift-load on 0x05ac:0x8300 isight
      * Reworked ift-load to use USB bus and device ID from udev env
        vars (USB_BUS and USB_DEV)
      * Misc : use GOptions, i18n, website, etc.

For the patch :

      * Drop firmware extraction and loading
      * Apply to r148
      * Ported to Linux 2.6.24
      * Ported to PowerPC64 (endianness issue)
      * Drop 0x8300 device id
      * Renamed isight.[hc] as uvc_isight.[hc]

What can be done :

      * export firmware to intel hex format, drop ift-load in favor to
        fxload (not sure if that's doable)
      * debianize
      * drop is_isight() and implement a proper way to workaround UVC
        variant.

You'll find more info at the tiny website i build for this project :
http://bersace03.free.fr/ift/ .

I would like to work closer to linux-uvc toward proper integration in
trunk. Sorry for not contacting linux-uvc-devel earlier !

Regards,
?tienne.
-- 
E Ultre?a !



From uvc at mauve.plus.com  Sat Dec  8 23:04:30 2007
From: uvc at mauve.plus.com (Ian Stirling)
Date: Sat, 08 Dec 2007 22:04:30 +0000
Subject: [Linux-uvc-devel] USB  ID eb1a:2761 eMPIA Technology, Inc works
Message-ID: <475B14EE.20105@mauve.plus.com>

640*480 USB2 camera - bought from
http://www.dealextreme.com/details.dx/sku.2887 for $17 works.
Thanks!

I have doubts if the '1.3mp' is real.

The camera has 6 LEDs, which go on and off according to a sensor mounted
at the top of the device. Unscrewing two screws, and twisting together
the CDS sensor wires (the sensor clearly under the hole with long wires)
disables the LEDs electrically safely, and can be reversed later.

The video output quality is OK with adequate light. It drops in
framerate from 25fps to 7fps, as the light level drops.

untested on USB1

Its performance at low light is perhaps a little better than other
cameras of the same sort.


-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: camdump
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071208/e83a06cf/attachment.ksh>

From lists at ebourne.me.uk  Sun Dec  9 01:40:03 2007
From: lists at ebourne.me.uk (Martin Ebourne)
Date: Sun, 09 Dec 2007 00:40:03 +0000
Subject: [Linux-uvc-devel] ekiga fails to open camera on second run
Message-ID: <1197160803.2694.18.camel@avenin.ebourne.me.uk>

Hi,

I have a Logitech Quickcam Pro for Notebooks (046d:0991) which works
with ekiga (3.0 svn) the first time I run it, but on subsequent runs
ekiga fails to open the camera and gives an error 'Your driver doesn't
seem to support any of the colour formats supported by Ekiga.'

If I unplug and reinsert the camera ekiga works again for one more run.
These are the messages when the camera is inserted:

usb 1-6: new high speed USB device using ehci_hcd and address 3
usb 1-6: configuration #1 chosen from 1 choice
Linux video capture interface: v2.00
uvcvideo: Found UVC 1.00 device <unnamed> (046d:0991)
usbcore: registered new interface driver uvcvideo
USB Video Class driver (v0.1.0)

These errors appear when ekiga loads and the camera works:

uvcvideo: Failed to query (135) UVC control 2 (unit 2) : -110 (exp. 2).
uvcvideo: Failed to query (135) UVC control 7 (unit 2) : -110 (exp. 2).
uvcvideo: Failed to query (135) UVC control 3 (unit 2) : -110 (exp. 2).

These errors appear when it doesn't work:

uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110 (exp. 26).
uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32 (exp. 26).
uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32 (exp. 26).
uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32 (exp. 26).

I've asked over in the ekiga list
http://mail.gnome.org/archives/ekiga-devel-list/2007-December/msg00029.html
and they think it is a linux-uvc bug.

I'm using r148 of linux-uvc and kernel-2.6.23.8-63.fc. I've also
attached a debug log from ekiga when it didn't work.

Cheers,

Martin.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: fails.log.gz
Type: application/x-gzip
Size: 4436 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071209/7c94468e/attachment.bin>

From lists at ebourne.me.uk  Sun Dec  9 02:23:20 2007
From: lists at ebourne.me.uk (Martin Ebourne)
Date: Sun, 09 Dec 2007 01:23:20 +0000
Subject: [Linux-uvc-devel] ekiga hang cancelling druid
Message-ID: <1197163401.2694.21.camel@avenin.ebourne.me.uk>

When I run ekiga, open the configuration druid and then cancel it, most
times ekiga locks up.

I'm using r5776 and the backtrace is below.

Cheers,

Martin.

Program received signal SIGINT, Interrupt.
[Switching to Thread 46912516974944 (LWP 15824)]
0x000000376160a8f9 in pthread_cond_wait@@GLIBC_2.3.2 ()
   from /lib64/libpthread.so.0
(gdb) thread apply all bt

Thread 23 (Thread 1107339600 (LWP 15869)):
#0  0x00000037606cddf2 in select () from /lib64/libc.so.6
#1  0x00002aaaaac4aec5 in PSocket::Select (read=<value optimized out>, 
    write=<value optimized out>, except=<value optimized out>, 
    timeout=@0x42009fd0) at socket.cxx:319
#2  0x00002aaaaac5ec94 in PSocket::Select (read=@0x42009d80, 
    timeout=@0x42009fd0) at ../common/sockets.cxx:1031
#3  0x00002aaaaac66077 in PMonitoredSockets::ReadFromSocket (this=0xd49450, 
    info=@0xd49b98, buf=0xf3d770, len=2000, addr=@0x42009eb0, 
    port=@0x42009eae, lastReadCount=@0x42009ea8, timeout=@0x42009fd0)
    at ../../ptclib/psockbun.cxx:564
#4  0x00002aaaaac6638d in PSingleMonitoredSocket::ReadFromBundle (
    this=0xd49450, buf=0xf3d770, len=2000, addr=@0x42009eb0, port=@0x42009eae, 
    iface=@0x42009e50, lastReadCount=@0x42009ea8, timeout=@0x42009fd0)
    at ../../ptclib/psockbun.cxx:1084
#5  0x00002aaaab391d33 in OpalListenerUDP::Accept (this=0xcfd7d0, 
    timeout=@0x42009fd0)
    at /usr/src/debug/opal-3.1.0/src/opal/transports.cxx:757
#6  0x00002aaaab396e2c in OpalListener::ListenForConnections (this=0xcfd7d0, 
    thread=@0xd4a2a0) at /usr/src/debug/opal-3.1.0/src/opal/transports.cxx:416
#7  0x00002aaaaac55ba3 in PThread::PX_ThreadStart (arg=<value optimized out>)
    at tlibthrd.cxx:804
---Type <return> to continue, or q <return> to quit---
#8  0x0000003761606407 in start_thread () from /lib64/libpthread.so.0
#9  0x00000037606d4b0d in clone () from /lib64/libc.so.6
Current language:  auto; currently c

Thread 22 (Thread 1085827408 (LWP 15868)):
#0  0x00000037606cddf2 in select () from /lib64/libc.so.6
#1  0x00002aaaaac59374 in PThread::PXBlockOnIO (this=0xcfdd10, handle=43, 
    type=2, timeout=@0x40b85d40) at tlibthrd.cxx:896
#2  0x00002aaaaac4cf0a in PChannel::PXSetIOBlock (this=0xcfd8a8, 
    type=PChannel::PXAcceptBlock, timeout=@0x40b85d40) at channel.cxx:119
#3  0x00002aaaaac48e6e in PSocket::os_accept (this=0xcf1470, 
    listener=@0xcfd8a8, addr=0x40b85da0, size=0x40b85d9c) at socket.cxx:197
#4  0x00002aaaaac60860 in PTCPSocket::Accept (this=0xcf1470, socket=@0xcfd8a8)
    at ../common/sockets.cxx:2231
#5  0x00002aaaab394ee1 in OpalListenerTCP::Accept (this=0xcfd850, 
    timeout=<value optimized out>)
    at /usr/src/debug/opal-3.1.0/src/opal/transports.cxx:661
#6  0x00002aaaab396e2c in OpalListener::ListenForConnections (this=0xcfd850, 
    thread=@0xcfdd10) at /usr/src/debug/opal-3.1.0/src/opal/transports.cxx:416
#7  0x00002aaaaac55ba3 in PThread::PX_ThreadStart (arg=<value optimized out>)
    at tlibthrd.cxx:804
#8  0x0000003761606407 in start_thread () from /lib64/libpthread.so.0
#9  0x00000037606d4b0d in clone () from /lib64/libc.so.6

---Type <return> to continue, or q <return> to quit---
Thread 16 (Thread 1107605840 (LWP 15858)):
#0  0x00000037606cddf2 in select () from /lib64/libc.so.6
#1  0x00002aaaaac56049 in PThread::Sleep (timeout=@0x4204afa0)
    at tlibthrd.cxx:672
#2  0x00000000004c58f9 in GMAccountsEndpoint::Main (this=0xd4ae00)
    at endpoints/accountshandler.cpp:163
#3  0x00002aaaaac55ba3 in PThread::PX_ThreadStart (arg=<value optimized out>)
    at tlibthrd.cxx:804
#4  0x0000003761606407 in start_thread () from /lib64/libpthread.so.0
#5  0x00000037606d4b0d in clone () from /lib64/libc.so.6

Thread 14 (Thread 1107073360 (LWP 15856)):
#0  0x000000376160ab7d in pthread_cond_timedwait@@GLIBC_2.3.2 ()
   from /lib64/libpthread.so.0
#1  0x00002aaaaac55041 in PSyncPoint::Wait (this=0x2aaaaaf0fa88, 
    waitTime=@0x2aaaaaf0fa38) at tlibthrd.cxx:1434
#2  0x00002aaaaac66a7d in PInterfaceMonitor::UpdateThreadMain (
    this=0x2aaaaaf0fa00) at ../../ptclib/psockbun.cxx:236
#3  0x00002aaaaac55ba3 in PThread::PX_ThreadStart (arg=<value optimized out>)
    at tlibthrd.cxx:804
#4  0x0000003761606407 in start_thread () from /lib64/libpthread.so.0
#5  0x00000037606d4b0d in clone () from /lib64/libc.so.6
Current language:  auto; currently asm

---Type <return> to continue, or q <return> to quit---
Thread 12 (Thread 1074538832 (LWP 15854)):
#0  0x000000376160cef4 in __lll_lock_wait () from /lib64/libpthread.so.0
#1  0x0000003761608915 in _L_lock_102 () from /lib64/libpthread.so.0
#2  0x0000003761608390 in pthread_mutex_lock () from /lib64/libpthread.so.0
#3  0x00000000004ad84c in gnomemeeting_threads_enter () at gui/misc.cpp:65
#4  0x00000000004b7731 in PVideoInputDevice_Picture::GetFrameDataNoDelay (
    this=0xce2000, frame=0x2aaab571f010 '? <repeats 200 times>..., 
    i=<value optimized out>) at devices/fakevideoinput.cpp:270
#5  0x00000000004b7673 in PVideoInputDevice_Picture::GetFrameData (
    this=0xce2000, a=0x2aaab571f010 '? <repeats 200 times>..., i=0x400c1f5c)
    at devices/fakevideoinput.cpp:238
#6  0x00002aaaaabf4422 in PVideoInputDevice::GetFrame (this=0xce2000, 
    frame=@0x400c1fa0) at ../common/videoio.cxx:1184
#7  0x00000000004ba414 in GMVideoGrabber::Main (this=0xc97110)
    at devices/videoinput.cpp:124
#8  0x00002aaaaac55ba3 in PThread::PX_ThreadStart (arg=<value optimized out>)
    at tlibthrd.cxx:804
#9  0x0000003761606407 in start_thread () from /lib64/libpthread.so.0
#10 0x00000037606d4b0d in clone () from /lib64/libc.so.6

Thread 11 (Thread 1075071312 (LWP 15853)):
#0  0x000000376160a8f9 in pthread_cond_wait@@GLIBC_2.3.2 ()
   from /lib64/libpthread.so.0
---Type <return> to continue, or q <return> to quit---
#1  0x0000003fb3c08a0e in PArrayObjects::Insert () at ../common/collect.cxx:153
#2  0x0000003fb3c0a485 in xcb_wait_for_reply () from /usr/lib64/libxcb.so.1
#3  0x0000003fb444b08b in _XReply () from /usr/lib64/libX11.so.6
#4  0x0000003fb443f7aa in XSync () from /usr/lib64/libX11.so.6
#5  0x00000000004ef2e8 in XVWindow::Sync (this=0xdeb500) at xvwindow.cpp:326
#6  0x00000000004bcefa in GMVideoDisplay_embedded::Main (this=0xce72e0)
    at devices/videodisplay.cpp:156
#7  0x00002aaaaac55ba3 in PThread::PX_ThreadStart (arg=<value optimized out>)
    at tlibthrd.cxx:804
#8  0x0000003761606407 in start_thread () from /lib64/libpthread.so.0
#9  0x00000037606d4b0d in clone () from /lib64/libc.so.6

Thread 8 (Thread 1085561168 (LWP 15841)):
#0  0x00000037606cbd66 in __poll (fds=0x889220, nfds=1, timeout=-1)
    at ../sysdeps/unix/sysv/linux/poll.c:87
#1  0x000000373a031f3e in g_main_context_iterate (context=0x88dfe0, block=1, 
    dispatch=1, self=<value optimized out>) at gmain.c:2996
#2  0x000000373a0323fa in IA__g_main_loop_run (loop=0x88a650) at gmain.c:2898
#3  0x0000003fbca181fd in startup_mainloop (arg=<value optimized out>)
    at e-book.c:3767
#4  0x000000373a050664 in g_thread_create_proxy (data=0x889970)
    at gthread.c:635
#5  0x0000003761606407 in start_thread () from /lib64/libpthread.so.0
---Type <return> to continue, or q <return> to quit---
#6  0x00000037606d4b0d in clone () from /lib64/libc.so.6
Current language:  auto; currently c

Thread 7 (Thread 1074805072 (LWP 15839)):
#0  0x00000037606cbd66 in __poll (fds=0x888ce0, nfds=9, timeout=-1)
    at ../sysdeps/unix/sysv/linux/poll.c:87
#1  0x000000373a031f3e in g_main_context_iterate (context=0x86cde0, block=1, 
    dispatch=1, self=<value optimized out>) at gmain.c:2996
#2  0x000000373a0323fa in IA__g_main_loop_run (loop=0x86cec0) at gmain.c:2898
#3  0x00000037416463b0 in PArrayObjects::Insert () at ../common/collect.cxx:153
#4  0x000000373a050664 in g_thread_create_proxy (data=0x82c810)
    at gthread.c:635
#5  0x0000003761606407 in start_thread () from /lib64/libpthread.so.0
#6  0x00000037606d4b0d in clone () from /lib64/libc.so.6

Thread 4 (Thread 1074272592 (LWP 15837)):
#0  0x000000376160ab7d in pthread_cond_timedwait@@GLIBC_2.3.2 ()
   from /lib64/libpthread.so.0
#1  0x00002aaaaac55041 in PSyncPoint::Wait (this=0x7d1698, 
    waitTime=@0x40080ff0) at tlibthrd.cxx:1434
#2  0x00002aaaaac5750b in PHouseKeepingThread::Main (this=0x86e2a0)
    at tlibthrd.cxx:125
#3  0x00002aaaaac55ba3 in PThread::PX_ThreadStart (arg=<value optimized out>)
    at tlibthrd.cxx:804
---Type <return> to continue, or q <return> to quit---
#4  0x0000003761606407 in start_thread () from /lib64/libpthread.so.0
#5  0x00000037606d4b0d in clone () from /lib64/libc.so.6
Current language:  auto; currently asm

Thread 3 (Thread 1074006352 (LWP 15836)):
#0  0x000000376160ab7d in pthread_cond_timedwait@@GLIBC_2.3.2 ()
   from /lib64/libpthread.so.0
#1  0x00002aaaaac55041 in PSyncPoint::Wait (this=0x869d40, 
    waitTime=@0x4003ffe0) at tlibthrd.cxx:1434
#2  0x00002aaaab359d13 in OpalManager::GarbageMain (this=0x869420)
    at /usr/src/debug/opal-3.1.0/src/opal/manager.cxx:1241
#3  0x00002aaaaac55ba3 in PThread::PX_ThreadStart (arg=<value optimized out>)
    at tlibthrd.cxx:804
#4  0x0000003761606407 in start_thread () from /lib64/libpthread.so.0
#5  0x00000037606d4b0d in clone () from /lib64/libc.so.6

Thread 2 (Thread 46912516974944 (LWP 15824)):
#0  0x000000376160a8f9 in pthread_cond_wait@@GLIBC_2.3.2 ()
   from /lib64/libpthread.so.0
#1  0x0000003fb3c088bb in _xcb_lock_io () from /usr/lib64/libxcb.so.1
#2  0x0000003fb3c08a1c in PArrayObjects::Insert () at ../common/collect.cxx:153
#3  0x0000003fb3c0a485 in xcb_wait_for_reply () from /usr/lib64/libxcb.so.1
#4  0x0000003fb444b08b in _XReply () from /usr/lib64/libX11.so.6
#5  0x0000003fb4439616 in XQueryPointer () from /usr/lib64/libX11.so.6
---Type <return> to continue, or q <return> to quit---
#6  0x00000035360623dd in _gdk_windowing_window_get_pointer (
    display=<value optimized out>, window=0xbe3f30, x=0x7fff7ddd295c, 
    y=0x7fff7ddd2958, mask=0x7fff7ddd2954) at gdkwindow-x11.c:3593
#7  0x0000003536031fe9 in IA__gdk_window_get_pointer (window=0xbe3f30, 
    x=0x7fff7ddd29a4, y=0x7fff7ddd29a0, mask=0x0) at gdkwindow.c:3099
#8  0x000000353606a16f in IA__gdk_device_get_state (device=0x81ca00, 
    window=0xbe3f30, axes=0x0, mask=0x0) at gdkinput-x11.c:787
#9  0x0000003535c3c3d8 in _gtk_tooltip_handle_event (event=0xefa630)
    at gtktooltip.c:1202
#10 0x0000003535b5aaf7 in IA__gtk_main_do_event (event=0xefa630)
    at gtkmain.c:1591
#11 0x000000353604b82c in gdk_event_dispatch (source=<value optimized out>, 
    callback=<value optimized out>, user_data=<value optimized out>)
    at gdkevents-x11.c:2351
#12 0x000000373a02edf3 in IA__g_main_context_dispatch (context=0x7ec940)
    at gmain.c:2061
#13 0x000000373a0320ed in g_main_context_iterate (context=0x7ec940, block=1, 
    dispatch=1, self=<value optimized out>) at gmain.c:2694
#14 0x000000373a0323fa in IA__g_main_loop_run (loop=0xda6120) at gmain.c:2898
#15 0x0000003535b5b0c3 in IA__gtk_main () at gtkmain.c:1146
#16 0x00000000004a8c49 in main (argc=3, argv=<value optimized out>, 
    envp=<value optimized out>) at gui/main.cpp:4413

---Type <return> to continue, or q <return> to quit---
Thread 1 (LWP 15824):
#0  0x000000376160a8f9 in pthread_cond_wait@@GLIBC_2.3.2 ()
   from /lib64/libpthread.so.0
#1  0x0000003fb3c088bb in _xcb_lock_io () from /usr/lib64/libxcb.so.1
#2  0x0000003fb3c08a1c in PArrayObjects::Insert () at ../common/collect.cxx:153
#3  0x0000003fb3c0a485 in xcb_wait_for_reply () from /usr/lib64/libxcb.so.1
#4  0x0000003fb444b08b in _XReply () from /usr/lib64/libX11.so.6
#5  0x0000003fb4439616 in XQueryPointer () from /usr/lib64/libX11.so.6
#6  0x00000035360623dd in _gdk_windowing_window_get_pointer (
    display=<value optimized out>, window=0xbe3f30, x=0x7fff7ddd295c, 
    y=0x7fff7ddd2958, mask=0x7fff7ddd2954) at gdkwindow-x11.c:3593
#7  0x0000003536031fe9 in IA__gdk_window_get_pointer (window=0xbe3f30, 
    x=0x7fff7ddd29a4, y=0x7fff7ddd29a0, mask=0x0) at gdkwindow.c:3099
#8  0x000000353606a16f in IA__gdk_device_get_state (device=0x81ca00, 
    window=0xbe3f30, axes=0x0, mask=0x0) at gdkinput-x11.c:787
#9  0x0000003535c3c3d8 in _gtk_tooltip_handle_event (event=0xefa630)
    at gtktooltip.c:1202
#10 0x0000003535b5aaf7 in IA__gtk_main_do_event (event=0xefa630)
    at gtkmain.c:1591
#11 0x000000353604b82c in gdk_event_dispatch (source=<value optimized out>, 
    callback=<value optimized out>, user_data=<value optimized out>)
    at gdkevents-x11.c:2351
#12 0x000000373a02edf3 in IA__g_main_context_dispatch (context=0x7ec940)
---Type <return> to continue, or q <return> to quit---
    at gmain.c:2061
#13 0x000000373a0320ed in g_main_context_iterate (context=0x7ec940, block=1, 
    dispatch=1, self=<value optimized out>) at gmain.c:2694
#14 0x000000373a0323fa in IA__g_main_loop_run (loop=0xda6120) at gmain.c:2898
#15 0x0000003535b5b0c3 in IA__gtk_main () at gtkmain.c:1146
#16 0x00000000004a8c49 in main (argc=3, argv=<value optimized out>, 
    envp=<value optimized out>) at gui/main.cpp:4413
#0  0x000000376160a8f9 in pthread_cond_wait@@GLIBC_2.3.2 ()
   from /lib64/libpthread.so.0
(gdb) 




From asmo.koskinen at arkki.info  Sun Dec  9 11:33:13 2007
From: asmo.koskinen at arkki.info (Asmo Koskinen)
Date: Sun, 09 Dec 2007 12:33:13 +0200
Subject: [Linux-uvc-devel] Finnish Wiki page for Logitech QuickCam Pro 9000
Message-ID: <475BC469.50001@arkki.info>


I bought yesterday Logitech QuickCam Pro 9000 and today there is finnish 
wiki page for that model.

uvcvideo, uvcview, luvcview, uvc-streamer and mjpg-streamer - I explain 
all these programs on that wiki page.

http://wiki.ubuntu-fi.org/Logitech_QuickCam_Pro_9000

So thank you everybody very much for all these programs for uvcvideo 
based webcams.

Best Regards Asmo Koskinen.


From contact at i-nz.net  Sun Dec  9 16:20:30 2007
From: contact at i-nz.net (Ivan N. Zlatev)
Date: Sun, 09 Dec 2007 15:20:30 +0000
Subject: [Linux-uvc-devel] Built-in iSight Firmware Tools
In-Reply-To: <1197130591.6842.32.camel@thilivren>
References: <1197130591.6842.32.camel@thilivren>
Message-ID: <475C07BE.9000501@i-nz.net>

On 12/8/07, ?tienne Bersac <bersace03 at gmail.com> wrote:
> Hi,
> 
> Investigating iSight support for my iMac G5 iSight
> ( http://www.apple.com/support/imac/g5/ ), i forked the previous work of
> Ronald S. Bultje named "extract.c". I didn't read the news about iSight
> driver with built-in firmware extrator and loader.
> 
> It could have been enough just to add powerpc AppleUSBVideoSupport SHA1
> sum + offset, but since Ronald switched to Mac OS X, i though i had to
> take the project. This is why i forked.
> 
> Once i got firmware loading, i search to get the driver set up. I
> contacted Laurent and then i found the work done by Ivan. I reworked the
> patch to fulfill several needs :
> 
> For userspace tools :
> 
>       * Create a proper project named isight-firmware-tools, using
>         autotools.
>       * Added support for PowerPC64 boxes (iMac G5 iSight 17" and 20").
>       * Splitted extract into ift-extract and ift-load
>       * Reworked ift-extract to patch the firmware
>       * By default, output firmware to /lib/firmware/isight.fw
>       * Added a udev rules to call ift-load on 0x05ac:0x8300 isight
>       * Reworked ift-load to use USB bus and device ID from udev env
>         vars (USB_BUS and USB_DEV)
>       * Misc : use GOptions, i18n, website, etc.
> 
> For the patch :
> 
>       * Drop firmware extraction and loading
>       * Apply to r148
>       * Ported to Linux 2.6.24
>       * Ported to PowerPC64 (endianness issue)
>       * Drop 0x8300 device id
>       * Renamed isight.[hc] as uvc_isight.[hc]
> 
> What can be done :
> 
>       * export firmware to intel hex format, drop ift-load in favor to
>         fxload (not sure if that's doable)
>       * debianize
>       * drop is_isight() and implement a proper way to workaround UVC
>         variant.
> 
> You'll find more info at the tiny website i build for this project :
> http://bersace03.free.fr/ift/ .
> 

Great, you beat me to it!

> I would like to work closer to linux-uvc toward proper integration in
> trunk. Sorry for not contacting linux-uvc-devel earlier !
> 

We had a short discussion about that here -
http://lists.berlios.de/pipermail/linux-uvc-devel/2007-November/002393.html.
And now thanks to your effort I hope Laurent will be happier to get
this in.

I will build openSUSE rpms later this week. I will also make my iSight
patch page (http://i-nz.net/projects/linux-kernel/) point to yours.

Cheers!
-- 
Ivan N. Zlatev

Web: http://www.i-nZ.net
"It's all some kind of whacked out conspiracy."



From bersace03 at gmail.com  Sun Dec  9 16:42:06 2007
From: bersace03 at gmail.com (=?ISO-8859-1?Q?=C9tienne?= Bersac)
Date: Sun, 09 Dec 2007 16:42:06 +0100
Subject: [Linux-uvc-devel] Built-in iSight Firmware Tools
In-Reply-To: <475C07BE.9000501@i-nz.net>
References: <1197130591.6842.32.camel@thilivren> <475C07BE.9000501@i-nz.net>
Message-ID: <1197214926.10167.6.camel@thilivren>

Hi,

> Great, you beat me to it!

Well, without the previous work from you, Ronald and Johannes, i won't
have reach this state so far. So, please consider this fork as an
enhancement of the same project.

I updated the patch against r149. I dropped is_isight() and
uvc_video_decode. Now the driver properly determine decode function on
video initialization. Thanks to Laurent for helping cleaning the patch.

http://bersace03.free.fr/ift/

I worked on .hex export, but really that's suboptimal. Also, fxload is
old and unmaintained and buggy and it seems even unusused. So, either i
fork it or i keep on the ift-load. It seems that the iSight is not fully
FX2 compliant so that fxload refuses to load the entire firmware.

I'll publish a converter in isight-firmware-tools for those who want to
play with.

Regards,
?tienne.



From richard at 2007.atterer.net  Sun Dec  9 16:58:46 2007
From: richard at 2007.atterer.net (Richard Atterer)
Date: Sun, 9 Dec 2007 16:58:46 +0100
Subject: [Linux-uvc-devel] [PATCH] Better fps display in luvcview-20070512
Message-ID: <20071209155845.GA13096@vilya>

Hello,

just a small patch: I didn't like how the fps display in luvcview was so 
jittery, so this change measures the fps value over 10 frames instead of 
just one. Also, it correctly rounds towards the nearest integer fps value, 
which further reduces fps value flicker.

Cheers,

  Richard

-- 
  __   _
  |_) /|  Richard Atterer     |  GnuPG key: 888354F7
  | \/?|  http://atterer.net  |  08A9 7B7D 3D13 3EF2 3D25  D157 79E6 F6DC 8883 54F7
  ? '` ?

--- ./Makefile
+++ ./Makefile	2007-12-09 16:34:48.859937394 +0100
@@ -22,7 +22,7 @@
 #           -Wno-unused
 #           -Wunused
 
-CFLAGS += -DUSE_SDL -O2 -DLINUX -DVERSION=\"$(VERSION)\" -I$(SDLFLAGS) $(WARNINGS)
+CFLAGS += -DUSE_SDL -O2 -Wall -DLINUX -DVERSION=\"$(VERSION)\" -I$(SDLFLAGS) $(WARNINGS)
 CPPFLAGS = $(CFLAGS)
 
 OBJECTS= luvcview.o color.o utils.o v4l2uvc.o gui.o avilib.o
--- ./luvcview.c
+++ ./luvcview.c	2007-12-09 16:52:53.421743049 +0100
@@ -199,7 +199,28 @@
 static int eventThread(void *data);
 static Uint32 SDL_VIDEO_Flags =
     SDL_ANYFORMAT | SDL_DOUBLEBUF | SDL_RESIZABLE;
+
     
+/* Framerate will be measured over this many frames for better accuracy */
+#define FRAMERATE_FRAMES 10
+static Uint32 framerate_timestamps[FRAMERATE_FRAMES];
+static int framerate_index = 0;
+
+/* Call this when a new frame has been delivered */
+void framerate_newframe() {
+    framerate_index = (framerate_index + 1) % FRAMERATE_FRAMES;
+    framerate_timestamps[framerate_index] = SDL_GetTicks();
+}
+
+/* Returns the frames per second, or 0 if less than FRAMERATE_FRAMES
+   delivered so far. */
+unsigned framerate_get() {
+    Uint32 oldest = framerate_timestamps[(framerate_index + 1) % FRAMERATE_FRAMES];
+    Uint32 current = framerate_timestamps[framerate_index];
+    if (oldest == 0 || current == 0) return 0.0;
+    return 1000.0 * (FRAMERATE_FRAMES - 1) / (current - oldest) + 0.5;
+}
+
 
 int main(int argc, char *argv[])
 {
@@ -213,8 +234,6 @@
     SDL_mutex *affmutex;
 
     int status;
-    Uint32 currtime;
-    Uint32 lasttime;
     unsigned char *p = NULL;
     int hwaccel = 0;
     const char *videodevice = NULL;
@@ -465,7 +484,6 @@
 		videoIn->rawFrameCapture = enableRawFrameCapture;
 initLut();
     SDL_WM_SetCaption(title_act[A_VIDEO].title, NULL);
-    lasttime = SDL_GetTicks();
     creatButt(videoIn->width, 32);
     SDL_LockYUVOverlay(overlay);
     memcpy(p + (videoIn->width * (videoIn->height) * 2), YUYVbutt,
@@ -481,11 +499,8 @@
     mythread = SDL_CreateThread(eventThread, (void *) &ptdata);
     /* main big loop */
     while (videoIn->signalquit) {
-	currtime = SDL_GetTicks();
-	if (currtime - lasttime > 0) {
-		frmrate = 1000/(currtime - lasttime);
-	}
-	lasttime = currtime;
+    framerate_newframe();
+    frmrate = framerate_get();
 	if (uvcGrab(videoIn) < 0) {
 	    printf("Error grabbing \n");
 	    break;
@@ -875,10 +890,9 @@
 	snprintf(videoIn->status, len,"%s %06d",title_act[curr_action].title,value);
 	}
 	} else { // mouseon
-	
-	len = strlen(title_act[curr_action].title)+9;
-	snprintf(videoIn->status, len,"%s, %02d Fps",title_act[curr_action].title, frmrate);
-	
+        len = strlen(title_act[curr_action].title) + 9;
+        snprintf(videoIn->status, len, "%s, %02d fps",
+                 title_act[curr_action].title, frmrate);
 	}
 	SDL_Delay(50);
 	//printf("fp/s %d \n",frmrate);


From mxhaard at magic.fr  Sun Dec  9 18:05:45 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Sun, 9 Dec 2007 18:05:45 +0100
Subject: [Linux-uvc-devel] [PATCH] Better fps display in
	luvcview-20070512
In-Reply-To: <20071209155845.GA13096@vilya>
References: <20071209155845.GA13096@vilya>
Message-ID: <200712091805.45420.mxhaard@magic.fr>

Le dimanche 9 d?cembre 2007 16:58, Richard Atterer a ?crit?:
> Hello,
>
> just a small patch: I didn't like how the fps display in luvcview was so
> jittery, so this change measures the fps value over 10 frames instead of
> just one. Also, it correctly rounds towards the nearest integer fps value,
> which further reduces fps value flicker.
>
> Cheers,
>
>   Richard
Thanks 
-- 
Michel Xhaard
http://mxhaard.free.fr


From laurent.pinchart at skynet.be  Sun Dec  9 18:55:03 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 9 Dec 2007 18:55:03 +0100
Subject: [Linux-uvc-devel] USB  ID eb1a:2761 eMPIA Technology, Inc works
In-Reply-To: <475B14EE.20105@mauve.plus.com>
References: <475B14EE.20105@mauve.plus.com>
Message-ID: <200712091855.03458.laurent.pinchart@skynet.be>

Hi Ian,

On Saturday 08 December 2007, Ian Stirling wrote:
> 640*480 USB2 camera - bought from
> http://www.dealextreme.com/details.dx/sku.2887 for $17 works.
> Thanks!
>
> I have doubts if the '1.3mp' is real.

You're right, the camera seems to use a VGA sensor.

> The camera has 6 LEDs, which go on and off according to a sensor mounted
> at the top of the device. Unscrewing two screws, and twisting together
> the CDS sensor wires (the sensor clearly under the hole with long wires)
> disables the LEDs electrically safely, and can be reversed later.
>
> The video output quality is OK with adequate light. It drops in
> framerate from 25fps to 7fps, as the light level drops.
>
> untested on USB1
>
> Its performance at low light is perhaps a little better than other
> cameras of the same sort.

Thanks for the report. I updated the supported devices list on the website.

Best regards,

Laurent Pinchart


From murdock2000 at email.it  Sun Dec  9 19:10:57 2007
From: murdock2000 at email.it (MurdocK)
Date: Sun, 09 Dec 2007 19:10:57 +0100
Subject: [Linux-uvc-devel] acer webcam
Message-ID: <475C2FB1.2070506@email.it>

Hello,

I have a webcam that is not in the list of your supported hardware:

Laptop: Acer Aspire 5520G

webcam Acer OrbiCam ID 5986:0102

Thanks

MurdocK
 
 
 --
 Email.it, the professional e-mail, gratis per te: http://www.email.it/f
 
 Sponsor:
 In REGALO un GIOCO! Scegli GPBikes 3D,Bubble Boom, Rock City Empire
 Clicca qui: http://adv.email.it/cgi-bin/foclick.cgi?mid=6732&d=9-12


From bersace03 at gmail.com  Sun Dec  9 20:17:50 2007
From: bersace03 at gmail.com (=?ISO-8859-1?Q?=C9tienne?= Bersac)
Date: Sun, 09 Dec 2007 20:17:50 +0100
Subject: [Linux-uvc-devel] Built-in iSight Firmware Tools
In-Reply-To: <1197130591.6842.32.camel@thilivren>
References: <1197130591.6842.32.camel@thilivren>
Message-ID: <1197227870.10167.28.camel@thilivren>

Hi,

Uploaded the 0.5 version which includes ift-export to export to Intel
HEX format as well as info and manpages for ift-extract and ift-export.
ift-load now uses syslog facility.

The TODO list is empty. :)

http://bersace03.free.fr/ift/

Regards,
?tienne.
-- 
E Ultre?a !



From bersace03 at gmail.com  Sun Dec  9 20:19:13 2007
From: bersace03 at gmail.com (=?ISO-8859-1?Q?=C9tienne?= Bersac)
Date: Sun, 09 Dec 2007 20:19:13 +0100
Subject: [Linux-uvc-devel] [PATCH] Apple Built-in iSight
Message-ID: <1197227953.10167.32.camel@thilivren>

Hi,

Follows an updated patch based on Ivan work. It's half weighted, mainly
because it does not extract and load the AppleUSBVideoSupport OS X
driver. This is done in userspace using isight-firmware-tools availables
at http://bersace03.free.fr/ift/ and udev.  No SHA1 computation, No
twice probe, No double device entry, No kernel space firmware loading,
No is_isight(), etc. isight.h has been merged into uvcvideo.h and
isight.c has been renamed to uvc_isight.c.

Many thanks to Laurent for helping cleaning the patch and properly
implement the quirk workaround.

Kind regards,
?tienne.

Signed-off-by: ?tienne Bersac <bersace at gmail.com>
---
Add built-in isight support to uvcvieo driver. Add a decode function
member to struct uvc_video_queue. The decode function has three
implementation : isoc, bulk and isight. uvc_isight.c implement the
isight decode function.

A BUILTIN_ISIGHT quirk is added allowing to determine wether to use
isight decode function or not.

Index: uvc_video.c
===================================================================
--- uvc_video.c	(r?vision 149)
+++ uvc_video.c	(copie de travail)
@@ -452,8 +452,9 @@
 /*
  * Completion handler for video URBs.
  */
-static void uvc_video_complete_isoc(struct urb *urb,
-	struct uvc_video_queue *queue, struct uvc_buffer *buf)
+static void uvc_video_decode_isoc(struct urb *urb,
+				  struct uvc_video_queue *queue,
+				  struct uvc_buffer *buf)
 {
 	u8 *mem;
 	int ret, i;
@@ -490,8 +491,9 @@
 	}
 }
 
-static void uvc_video_complete_bulk(struct urb *urb,
-	struct uvc_video_queue *queue, struct uvc_buffer *buf)
+static void uvc_video_decode_bulk(struct urb *urb,
+				  struct uvc_video_queue *queue,
+				  struct uvc_buffer *buf)
 {
 	u8 *mem;
 	int len, ret;
@@ -585,10 +587,7 @@
 		buf = list_entry(queue->irqqueue.next, struct uvc_buffer, queue);
 	spin_unlock_irqrestore(&queue->irqlock, flags);
 
-	if (urb->number_of_packets)
-		uvc_video_complete_isoc(urb, queue, buf);
-	else
-		uvc_video_complete_bulk(urb, queue, buf);
+	queue->decode(urb, queue, buf);
 
 	if ((ret = usb_submit_urb(urb, GFP_ATOMIC)) < 0) {
 		uvc_printk(KERN_ERR, "Failed to resubmit video URB (%d).\n",
@@ -628,7 +627,8 @@
  * Initialize isochronous URBs and allocate transfer buffers. The packet size
  * is given by the endpoint.
  */
-static int uvc_init_video_isoc(struct uvc_video_device *video, struct usb_host_endpoint *ep)
+static int uvc_init_video_isoc(struct uvc_video_device *video,
+			       struct usb_host_endpoint *ep)
 {
 	struct urb *urb;
 	unsigned int npackets, i, j;
@@ -693,7 +693,8 @@
  * Initialize bulk URBs and allocate transfer buffers. The packet size is
  * given by the endpoint.
  */
-static int uvc_init_video_bulk(struct uvc_video_device *video, struct usb_host_endpoint *ep)
+static int uvc_init_video_bulk(struct uvc_video_device *video,
+			       struct usb_host_endpoint *ep)
 {
 	struct urb *urb;
 	unsigned int pipe, i;
@@ -747,7 +748,7 @@
 {
 	struct usb_interface *intf = video->streaming->intf;
 	struct usb_host_interface *alts;
-	struct usb_host_endpoint *ep;
+	struct usb_host_endpoint *ep = NULL;
 	int intfnum = video->streaming->intfnum;
 	unsigned int bandwidth, psize, i;
 	int ret;
@@ -937,6 +938,16 @@
 	video->streaming->cur_frame = frame;
 	atomic_set(&video->active, 1);
 
+
+	/* determine the decode function */
+	if (video->dev->quirks & UVC_QUIRK_BUILTIN_ISIGHT)
+		video->queue.decode = uvc_video_decode_isight;
+	else if (video->streaming->intf->num_altsetting > 1)
+		video->queue.decode = uvc_video_decode_isoc;
+	else 
+		video->queue.decode = uvc_video_decode_bulk;
+
+
 	return 0;
 }
 
Index: uvc_isight.c
===================================================================
--- uvc_isight.c	(r?vision 0)
+++ uvc_isight.c	(r?vision 0)
@@ -0,0 +1,154 @@
+/*
+ * Copyright (C) 2006-2007 Ivan N. Zlatev <contact at i-nz.net>
+ * Copyright ? 2007 ?tienne Bersac <bersace03 at laposte.net>
+ *
+ * Based on extract.c by Ronald S. Bultje <rbultje at ronald.bitfreak.net>
+ * Firmware loading specifics by Johannes Berg <johannes at sipsolutions.net>
+ * at http://johannes.sipsolutions.net/MacBook/iSight
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
+ * MA 02110-1301, USA
+ */
+
+#include <linux/usb.h>
+#include <linux/kernel.h>
+#include <linux/mm.h>
+
+#include "uvcvideo.h"
+
+#define isight_printk(msg...)				\
+	printk(KERN_DEBUG "uvcvideo: iSight: " msg)
+
+/* Built-in iSight webcams are completely broken. They implement most
+ * of UVC 1.0, but the Apple engineers decided to use a completely
+ * different packet format, although the video data is in YUV. Were
+ * they on crack or just lazy ? As the hardware is 8051-based, it
+ * might be interesting to write an open-source firmware.
+ *
+ * Instead of sending a header at the beginning of each isochronous
+ * transfer payload, the webcam sends a single header per image (on
+ * its own in a packet), followed by packets containing data only.
+ *
+ * Offset   Size (bytes)	Description
+ * ------------------------------------------------------------------
+ * 0x00 	1   	Header length
+ * 0x01 	1   	Flags (UVC-compliant)
+ * 0x02 	4   	Always equal to '11223344'
+ * 0x06 	8   	Always equal to 'deadbeefdeadface'
+ * 0x0e 	16  	Unknown
+ *
+ * The header can be prefixed by an optional, unknown-purpose byte.
+ */
+
+static int isight_decode (struct uvc_video_queue *queue,
+			  struct uvc_buffer *buf,
+			  const __u8 *data, unsigned int len)
+{
+	static const __u8 hdr[] = {
+		0x11, 0x22, 0x33, 0x44, 0xde, 0xad, 0xbe, 0xef,
+		0xde, 0xad, 0xfa, 0xce
+	};
+
+	unsigned int maxlen, nbytes;
+	__u8 *mem;
+	int is_header = 0;
+
+	if (buf == NULL)
+		return 0;
+
+	if ((len >= 14 && memcmp (&data[2], hdr, 12) == 0) ||
+	    (len >= 15 && memcmp (&data[3], hdr, 12) == 0)) {
+		uvc_trace(UVC_TRACE_FRAME, "iSight header found\n");
+		is_header = 1;
+	}
+
+	/* Synchronize to the input stream by waiting for a header packet. */
+	if (buf->state != UVC_BUF_STATE_ACTIVE) {
+		if (!is_header) {
+			uvc_trace(UVC_TRACE_FRAME, "Dropping packet (out of "
+				  "sync).\n");
+			return 0;
+		}
+
+		buf->state = UVC_BUF_STATE_ACTIVE;
+	}
+
+	/* Mark the buffer as done if we're at the beginning of a new frame.
+	 *
+	 * Empty buffers (bytesused == 0) don't trigger end of frame detection
+	 * as it doesn't make sense to return an empty buffer.
+	 */
+	if (is_header && buf->buf.bytesused != 0) {
+		buf->state = UVC_BUF_STATE_DONE;
+		return -EAGAIN;
+	}
+
+	/* Copy the video data to the buffer. Skip header packets, as they
+	 * contain no data.
+	 */
+	if (!is_header) {
+		maxlen = buf->buf.length - buf->buf.bytesused;
+		mem = queue->mem + buf->buf.m.offset + buf->buf.bytesused;
+		nbytes = min(len, maxlen);
+		memcpy(mem, data, nbytes);
+		buf->buf.bytesused += nbytes;
+
+		/* Drop the current frame if the buffer size was exceeded. */
+		if (len > maxlen || buf->buf.bytesused == buf->buf.length) {
+			uvc_trace(UVC_TRACE_FRAME, "Frame complete (overflow).\n");
+			buf->state = UVC_BUF_STATE_DONE;
+		}
+	}
+
+	return 0;
+}
+
+void uvc_video_decode_isight (struct urb *urb,
+			      struct uvc_video_queue *queue,
+			      struct uvc_buffer *buf)
+{
+	int ret, i;
+
+	for (i = 0; i < urb->number_of_packets; ++i) {
+		if (urb->iso_frame_desc[i].status < 0) {
+			uvc_trace(UVC_TRACE_FRAME, "USB isochronous frame "
+				  "lost (%d).\n", urb->iso_frame_desc[i].status);
+			/* Breaks 640x480
+			   continue;
+			*/
+		}
+
+		/* Decode the payload packet.
+		 * uvc_video_decode is entered twice when a frame transition
+		 * has been detected because the end of frame can only be
+		 * reliably detected when the first packet of the new frame
+		 * is processed. The first pass detects the transition and
+		 * closes the previous frame's buffer, the second pass
+		 * processes the data of the first payload of the new frame.
+		 */
+		do {
+			ret = isight_decode(queue, buf,
+					    urb->transfer_buffer + urb->iso_frame_desc[i].offset,
+					    urb->iso_frame_desc[i].actual_length);
+
+			if (buf == NULL)
+				break;
+
+			if (buf->state == UVC_BUF_STATE_DONE ||
+			    buf->state == UVC_BUF_STATE_ERROR)
+				buf = uvc_queue_next_buffer(queue, buf);
+		} while (ret == -EAGAIN);
+	}
+}
Index: uvc_driver.c
===================================================================
--- uvc_driver.c	(r?vision 149)
+++ uvc_driver.c	(copie de travail)
@@ -1667,6 +1667,13 @@
 	  .bInterfaceProtocol	= 0,
 	  .driver_info		= UVC_QUIRK_PROBE_MINMAX
 	},
+	/* Apple Built-In iSight */
+	{ .match_flags		= USB_DEVICE_ID_MATCH_DEVICE,
+	  .idVendor		= 0x05ac,
+	  .idProduct		= 0x8501,
+	  .driver_info 		= UVC_QUIRK_PROBE_MINMAX
+	                        | UVC_QUIRK_BUILTIN_ISIGHT
+	},
 	/* Microsoft Lifecam NX-6000 */
 	{ .match_flags		= USB_DEVICE_ID_MATCH_DEVICE
 				| USB_DEVICE_ID_MATCH_INT_INFO,
Index: uvcvideo.h
===================================================================
--- uvcvideo.h	(r?vision 149)
+++ uvcvideo.h	(copie de travail)
@@ -311,6 +311,7 @@
 #define UVC_QUIRK_STATUS_INTERVAL	0x00000001
 #define UVC_QUIRK_PROBE_MINMAX		0x00000002
 #define UVC_QUIRK_PROBE_EXTRAFIELDS	0x00000004
+#define UVC_QUIRK_BUILTIN_ISIGHT	0x00000008
 
 /* Format flags */
 #define UVC_FMT_FLAG_COMPRESSED		0x00000001
@@ -576,6 +577,9 @@
 
 	struct list_head mainqueue;
 	struct list_head irqqueue;
+
+	void (*decode) (struct urb *urb, struct uvc_video_queue *queue,
+			struct uvc_buffer *buf);
 };
 
 struct uvc_video_device {
@@ -764,6 +768,11 @@
 extern struct usb_host_endpoint *uvc_find_endpoint(
 		struct usb_host_interface *alts, __u8 epaddr);
 
+/* quirks functions */
+void uvc_video_decode_isight (struct urb *urb, struct uvc_video_queue *queue, 
+			      struct uvc_buffer *buf);
+
+
 #endif /* __KERNEL__ */
 
 #endif
Index: Makefile
===================================================================
--- Makefile	(r?vision 149)
+++ Makefile	(copie de travail)
@@ -5,7 +5,7 @@
 PWD		:= $(shell pwd)
 
 obj-m		:= uvcvideo.o
-uvcvideo-objs   := uvc_driver.o uvc_queue.o uvc_v4l2.o uvc_video.o uvc_ctrl.o
+uvcvideo-objs   := uvc_driver.o uvc_queue.o uvc_v4l2.o uvc_video.o uvc_ctrl.o uvc_isight.o
 
 all: uvcvideo
 



From laurent.pinchart at skynet.be  Sun Dec  9 21:53:41 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 9 Dec 2007 21:53:41 +0100
Subject: [Linux-uvc-devel] [PATCH] Apple Built-in iSight
In-Reply-To: <1197227953.10167.32.camel@thilivren>
References: <1197227953.10167.32.camel@thilivren>
Message-ID: <200712092153.41674.laurent.pinchart@skynet.be>

Hi ?tienne,

On Sunday 09 December 2007, ?tienne Bersac wrote:
> Hi,
>
> Follows an updated patch based on Ivan work. It's half weighted, mainly
> because it does not extract and load the AppleUSBVideoSupport OS X
> driver. This is done in userspace using isight-firmware-tools availables
> at http://bersace03.free.fr/ift/ and udev.  No SHA1 computation, No
> twice probe, No double device entry, No kernel space firmware loading,
> No is_isight(), etc. isight.h has been merged into uvcvideo.h and
> isight.c has been renamed to uvc_isight.c.

First of all, thanks for your work. Comments inlined.

> Many thanks to Laurent for helping cleaning the patch and properly
> implement the quirk workaround.
>
> Kind regards,
> ?tienne.
>
> Signed-off-by: ?tienne Bersac <bersace at gmail.com>
> ---
> Add built-in isight support to uvcvieo driver. Add a decode function
> member to struct uvc_video_queue. The decode function has three
> implementation : isoc, bulk and isight. uvc_isight.c implement the
> isight decode function.
>
> A BUILTIN_ISIGHT quirk is added allowing to determine wether to use
> isight decode function or not.
>
> Index: uvc_video.c
> ===================================================================
> --- uvc_video.c	(r?vision 149)
> +++ uvc_video.c	(copie de travail)
> @@ -452,8 +452,9 @@
>  /*
>   * Completion handler for video URBs.
>   */
> -static void uvc_video_complete_isoc(struct urb *urb,
> -	struct uvc_video_queue *queue, struct uvc_buffer *buf)
> +static void uvc_video_decode_isoc(struct urb *urb,
> +				  struct uvc_video_queue *queue,
> +				  struct uvc_buffer *buf)
>  {
>  	u8 *mem;
>  	int ret, i;

Please don't cleanup formatting unrelated to iSight support.

> @@ -490,8 +491,9 @@
>  	}
>  }
>
> -static void uvc_video_complete_bulk(struct urb *urb,
> -	struct uvc_video_queue *queue, struct uvc_buffer *buf)
> +static void uvc_video_decode_bulk(struct urb *urb,
> +				  struct uvc_video_queue *queue,
> +				  struct uvc_buffer *buf)
>  {
>  	u8 *mem;
>  	int len, ret;

Ditto.

> @@ -585,10 +587,7 @@
>  		buf = list_entry(queue->irqqueue.next, struct uvc_buffer, queue);
>  	spin_unlock_irqrestore(&queue->irqlock, flags);
>
> -	if (urb->number_of_packets)
> -		uvc_video_complete_isoc(urb, queue, buf);
> -	else
> -		uvc_video_complete_bulk(urb, queue, buf);
> +	queue->decode(urb, queue, buf);
>
>  	if ((ret = usb_submit_urb(urb, GFP_ATOMIC)) < 0) {
>  		uvc_printk(KERN_ERR, "Failed to resubmit video URB (%d).\n",
> @@ -628,7 +627,8 @@
>   * Initialize isochronous URBs and allocate transfer buffers. The packet
> size * is given by the endpoint.
>   */
> -static int uvc_init_video_isoc(struct uvc_video_device *video, struct
> usb_host_endpoint *ep) +static int uvc_init_video_isoc(struct
> uvc_video_device *video,
> +			       struct usb_host_endpoint *ep)
>  {
>  	struct urb *urb;
>  	unsigned int npackets, i, j;

Ditto.

> @@ -693,7 +693,8 @@
>   * Initialize bulk URBs and allocate transfer buffers. The packet size is
>   * given by the endpoint.
>   */
> -static int uvc_init_video_bulk(struct uvc_video_device *video, struct
> usb_host_endpoint *ep) +static int uvc_init_video_bulk(struct
> uvc_video_device *video,
> +			       struct usb_host_endpoint *ep)
>  {
>  	struct urb *urb;
>  	unsigned int pipe, i;

Ditto.

> @@ -747,7 +748,7 @@
>  {
>  	struct usb_interface *intf = video->streaming->intf;
>  	struct usb_host_interface *alts;
> -	struct usb_host_endpoint *ep;
> +	struct usb_host_endpoint *ep = NULL;
>  	int intfnum = video->streaming->intfnum;
>  	unsigned int bandwidth, psize, i;
>  	int ret;

This fixes a gcc4 warning. I'll commit it as a separate patch.

> @@ -937,6 +938,16 @@
>  	video->streaming->cur_frame = frame;
>  	atomic_set(&video->active, 1);
>
> +
> +	/* determine the decode function */
> +	if (video->dev->quirks & UVC_QUIRK_BUILTIN_ISIGHT)
> +		video->queue.decode = uvc_video_decode_isight;
> +	else if (video->streaming->intf->num_altsetting > 1)
> +		video->queue.decode = uvc_video_decode_isoc;
> +	else
> +		video->queue.decode = uvc_video_decode_bulk;
> +
> +

Please remove extra blank lines.

>  	return 0;
>  }
>
> Index: uvc_isight.c
> ===================================================================
> --- uvc_isight.c	(r?vision 0)
> +++ uvc_isight.c	(r?vision 0)
> @@ -0,0 +1,154 @@
> +/*
> + * Copyright (C) 2006-2007 Ivan N. Zlatev <contact at i-nz.net>
> + * Copyright ? 2007 ?tienne Bersac <bersace03 at laposte.net>

Are non ascii characters allowed in Linux sources ?

> + *
> + * Based on extract.c by Ronald S. Bultje <rbultje at ronald.bitfreak.net>
> + * Firmware loading specifics by Johannes Berg <johannes at sipsolutions.net>
> + * at http://johannes.sipsolutions.net/MacBook/iSight

There is no firmware loading anymore.

> + *
> + * This program is free software; you can redistribute it and/or modify
> + * it under the terms of the GNU General Public License as published by
> + * the Free Software Foundation; either version 2 of the License, or
> + * (at your option) any later version.
> + *
> + * This program is distributed in the hope that it will be useful,
> + * but WITHOUT ANY WARRANTY; without even the implied warranty of
> + * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
> + * GNU General Public License for more details.
> + *
> + * You should have received a copy of the GNU General Public License
> + * along with this program; if not, write to the Free Software
> + * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
> + * MA 02110-1301, USA
> + */
> +
> +#include <linux/usb.h>
> +#include <linux/kernel.h>
> +#include <linux/mm.h>
> +
> +#include "uvcvideo.h"
> +
> +#define isight_printk(msg...)				\
> +	printk(KERN_DEBUG "uvcvideo: iSight: " msg)
> +

Unused, please remove.

> +/* Built-in iSight webcams are completely broken. They implement most
> + * of UVC 1.0, but the Apple engineers decided to use a completely
> + * different packet format, although the video data is in YUV. Were
> + * they on crack or just lazy ? As the hardware is 8051-based, it
> + * might be interesting to write an open-source firmware.

I think I'm the author of that message. Now that I know more about the 
hardware, I understand the 8051-based controller they used doesn't have the 
required hardware to generate UVC-compatible isochronous packets. The comment 
should be made a bit less aggressive :-)

> + *
> + * Instead of sending a header at the beginning of each isochronous
> + * transfer payload, the webcam sends a single header per image (on
> + * its own in a packet), followed by packets containing data only.
> + *
> + * Offset   Size (bytes)	Description
> + * ------------------------------------------------------------------
> + * 0x00 	1   	Header length
> + * 0x01 	1   	Flags (UVC-compliant)
> + * 0x02 	4   	Always equal to '11223344'
> + * 0x06 	8   	Always equal to 'deadbeefdeadface'
> + * 0x0e 	16  	Unknown
> + *
> + * The header can be prefixed by an optional, unknown-purpose byte.
> + */
> +
> +static int isight_decode (struct uvc_video_queue *queue,
> +			  struct uvc_buffer *buf,
> +			  const __u8 *data, unsigned int len)

Please use two tabs to indent function arguments, don't try to align them on 
the opening parenthesis.

> +{
> +	static const __u8 hdr[] = {
> +		0x11, 0x22, 0x33, 0x44, 0xde, 0xad, 0xbe, 0xef,
> +		0xde, 0xad, 0xfa, 0xce
> +	};
> +
> +	unsigned int maxlen, nbytes;
> +	__u8 *mem;
> +	int is_header = 0;
> +
> +	if (buf == NULL)
> +		return 0;
> +
> +	if ((len >= 14 && memcmp (&data[2], hdr, 12) == 0) ||
> +	    (len >= 15 && memcmp (&data[3], hdr, 12) == 0)) {
> +		uvc_trace(UVC_TRACE_FRAME, "iSight header found\n");
> +		is_header = 1;
> +	}
> +
> +	/* Synchronize to the input stream by waiting for a header packet. */
> +	if (buf->state != UVC_BUF_STATE_ACTIVE) {
> +		if (!is_header) {
> +			uvc_trace(UVC_TRACE_FRAME, "Dropping packet (out of "
> +				  "sync).\n");
> +			return 0;
> +		}
> +
> +		buf->state = UVC_BUF_STATE_ACTIVE;
> +	}
> +
> +	/* Mark the buffer as done if we're at the beginning of a new frame.
> +	 *
> +	 * Empty buffers (bytesused == 0) don't trigger end of frame detection
> +	 * as it doesn't make sense to return an empty buffer.
> +	 */
> +	if (is_header && buf->buf.bytesused != 0) {
> +		buf->state = UVC_BUF_STATE_DONE;
> +		return -EAGAIN;
> +	}
> +
> +	/* Copy the video data to the buffer. Skip header packets, as they
> +	 * contain no data.
> +	 */
> +	if (!is_header) {
> +		maxlen = buf->buf.length - buf->buf.bytesused;
> +		mem = queue->mem + buf->buf.m.offset + buf->buf.bytesused;
> +		nbytes = min(len, maxlen);
> +		memcpy(mem, data, nbytes);
> +		buf->buf.bytesused += nbytes;
> +
> +		/* Drop the current frame if the buffer size was exceeded. */

The frame isn't dropped, the comment is incorrect.

> +		if (len > maxlen || buf->buf.bytesused == buf->buf.length) {
> +			uvc_trace(UVC_TRACE_FRAME, "Frame complete (overflow).\n");
> +			buf->state = UVC_BUF_STATE_DONE;
> +		}
> +	}
> +
> +	return 0;
> +}
> +
> +void uvc_video_decode_isight (struct urb *urb,
> +			      struct uvc_video_queue *queue,
> +			      struct uvc_buffer *buf)

Two tabs please.

> +{
> +	int ret, i;
> +
> +	for (i = 0; i < urb->number_of_packets; ++i) {
> +		if (urb->iso_frame_desc[i].status < 0) {
> +			uvc_trace(UVC_TRACE_FRAME, "USB isochronous frame "
> +				  "lost (%d).\n", urb->iso_frame_desc[i].status);
> +			/* Breaks 640x480
> +			   continue;
> +			*/

Please remove commented code.

> +		}
> +
> +		/* Decode the payload packet.
> +		 * uvc_video_decode is entered twice when a frame transition
> +		 * has been detected because the end of frame can only be
> +		 * reliably detected when the first packet of the new frame
> +		 * is processed. The first pass detects the transition and
> +		 * closes the previous frame's buffer, the second pass
> +		 * processes the data of the first payload of the new frame.
> +		 */
> +		do {
> +			ret = isight_decode(queue, buf,
> +					    urb->transfer_buffer + urb->iso_frame_desc[i].offset,
> +					    urb->iso_frame_desc[i].actual_length);
> +
> +			if (buf == NULL)
> +				break;
> +
> +			if (buf->state == UVC_BUF_STATE_DONE ||
> +			    buf->state == UVC_BUF_STATE_ERROR)
> +				buf = uvc_queue_next_buffer(queue, buf);
> +		} while (ret == -EAGAIN);
> +	}
> +}
> Index: uvc_driver.c
> ===================================================================
> --- uvc_driver.c	(r?vision 149)
> +++ uvc_driver.c	(copie de travail)
> @@ -1667,6 +1667,13 @@
>  	  .bInterfaceProtocol	= 0,
>  	  .driver_info		= UVC_QUIRK_PROBE_MINMAX
>  	},
> +	/* Apple Built-In iSight */
> +	{ .match_flags		= USB_DEVICE_ID_MATCH_DEVICE,
> +	  .idVendor		= 0x05ac,
> +	  .idProduct		= 0x8501,
> +	  .driver_info 		= UVC_QUIRK_PROBE_MINMAX
> +	                        | UVC_QUIRK_BUILTIN_ISIGHT
> +	},
>  	/* Microsoft Lifecam NX-6000 */
>  	{ .match_flags		= USB_DEVICE_ID_MATCH_DEVICE
>
>  				| USB_DEVICE_ID_MATCH_INT_INFO,
>
> Index: uvcvideo.h
> ===================================================================
> --- uvcvideo.h	(r?vision 149)
> +++ uvcvideo.h	(copie de travail)
> @@ -311,6 +311,7 @@
>  #define UVC_QUIRK_STATUS_INTERVAL	0x00000001
>  #define UVC_QUIRK_PROBE_MINMAX		0x00000002
>  #define UVC_QUIRK_PROBE_EXTRAFIELDS	0x00000004
> +#define UVC_QUIRK_BUILTIN_ISIGHT	0x00000008
>
>  /* Format flags */
>  #define UVC_FMT_FLAG_COMPRESSED		0x00000001
> @@ -576,6 +577,9 @@
>
>  	struct list_head mainqueue;
>  	struct list_head irqqueue;
> +
> +	void (*decode) (struct urb *urb, struct uvc_video_queue *queue,
> +			struct uvc_buffer *buf);
>  };
>
>  struct uvc_video_device {
> @@ -764,6 +768,11 @@
>  extern struct usb_host_endpoint *uvc_find_endpoint(
>  		struct usb_host_interface *alts, __u8 epaddr);
>
> +/* quirks functions */

Could you rename that to 'Quirks support' ?

> +void uvc_video_decode_isight (struct urb *urb, struct uvc_video_queue
> *queue, +			      struct uvc_buffer *buf);

Two tabs please.

> +
> +
>  #endif /* __KERNEL__ */
>
>  #endif
> Index: Makefile
> ===================================================================
> --- Makefile	(r?vision 149)
> +++ Makefile	(copie de travail)
> @@ -5,7 +5,7 @@
>  PWD		:= $(shell pwd)
>
>  obj-m		:= uvcvideo.o
> -uvcvideo-objs   := uvc_driver.o uvc_queue.o uvc_v4l2.o uvc_video.o
> uvc_ctrl.o +uvcvideo-objs   := uvc_driver.o uvc_queue.o uvc_v4l2.o
> uvc_video.o uvc_ctrl.o uvc_isight.o
>
>  all: uvcvideo

Other than for those cosmetic fixes, the patch looks fine to me. Please 
resubmit it, and I'll then wait a few days to see if other people have 
comments before committing it.

Thanks a lot for your work.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Dec  9 21:57:34 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 9 Dec 2007 21:57:34 +0100
Subject: [Linux-uvc-devel] acer webcam
In-Reply-To: <475C2FB1.2070506@email.it>
References: <475C2FB1.2070506@email.it>
Message-ID: <200712092157.34204.laurent.pinchart@skynet.be>

Hi,

On Sunday 09 December 2007, MurdocK wrote:
> Hello,
>
> I have a webcam that is not in the list of your supported hardware:
>
> Laptop: Acer Aspire 5520G
>
> webcam Acer OrbiCam ID 5986:0102

Thanks. Website updated.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Dec  9 21:59:07 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 9 Dec 2007 21:59:07 +0100
Subject: [Linux-uvc-devel] Finnish Wiki page for Logitech QuickCam Pro
	9000
In-Reply-To: <475BC469.50001@arkki.info>
References: <475BC469.50001@arkki.info>
Message-ID: <200712092159.07984.laurent.pinchart@skynet.be>

Hi Asmo,

On Sunday 09 December 2007, Asmo Koskinen wrote:
> I bought yesterday Logitech QuickCam Pro 9000 and today there is finnish
> wiki page for that model.
>
> uvcvideo, uvcview, luvcview, uvc-streamer and mjpg-streamer - I explain
> all these programs on that wiki page.
>
> http://wiki.ubuntu-fi.org/Logitech_QuickCam_Pro_9000
>
> So thank you everybody very much for all these programs for uvcvideo
> based webcams.

Thanks a lot for your contribution. Documentation is always appreciated.

You could also announce this on the www.quickcamteam.net forum.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Dec  9 22:01:11 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 9 Dec 2007 22:01:11 +0100
Subject: [Linux-uvc-devel] ekiga hang cancelling druid
In-Reply-To: <1197163401.2694.21.camel@avenin.ebourne.me.uk>
References: <1197163401.2694.21.camel@avenin.ebourne.me.uk>
Message-ID: <200712092201.12081.laurent.pinchart@skynet.be>

Hi Martin,

On Sunday 09 December 2007, Martin Ebourne wrote:
> When I run ekiga, open the configuration druid and then cancel it, most
> times ekiga locks up.
>
> I'm using r5776 and the backtrace is below.

This should go to the Ekiga support mailing list/forum.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Dec  9 22:03:58 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 9 Dec 2007 22:03:58 +0100
Subject: [Linux-uvc-devel] ekiga fails to open camera on second run
In-Reply-To: <1197160803.2694.18.camel@avenin.ebourne.me.uk>
References: <1197160803.2694.18.camel@avenin.ebourne.me.uk>
Message-ID: <200712092203.58503.laurent.pinchart@skynet.be>

Hi Martin,

On Sunday 09 December 2007, Martin Ebourne wrote:
> Hi,
>
> I have a Logitech Quickcam Pro for Notebooks (046d:0991) which works
> with ekiga (3.0 svn) the first time I run it, but on subsequent runs
> ekiga fails to open the camera and gives an error 'Your driver doesn't
> seem to support any of the colour formats supported by Ekiga.'
>
> If I unplug and reinsert the camera ekiga works again for one more run.
> These are the messages when the camera is inserted:
>
> usb 1-6: new high speed USB device using ehci_hcd and address 3
> usb 1-6: configuration #1 chosen from 1 choice
> Linux video capture interface: v2.00
> uvcvideo: Found UVC 1.00 device <unnamed> (046d:0991)
> usbcore: registered new interface driver uvcvideo
> USB Video Class driver (v0.1.0)
>
> These errors appear when ekiga loads and the camera works:
>
> uvcvideo: Failed to query (135) UVC control 2 (unit 2) : -110 (exp. 2).
> uvcvideo: Failed to query (135) UVC control 7 (unit 2) : -110 (exp. 2).
> uvcvideo: Failed to query (135) UVC control 3 (unit 2) : -110 (exp. 2).
>
> These errors appear when it doesn't work:
>
> uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110 (exp. 26).
> uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32 (exp. 26).
> uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32 (exp. 26).
> uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32 (exp. 26).
>
> I've asked over in the ekiga list
> http://mail.gnome.org/archives/ekiga-devel-list/2007-December/msg00029.html
> and they think it is a linux-uvc bug.

It sounds like a driver and/or hardware/firmware issue. Could you please give 
me more information regarding your hardware configuration ? The content 
of /proc/cpuinfo and the output of lspci and lsusb might help diagnose the 
issue.

> I'm using r148 of linux-uvc and kernel-2.6.23.8-63.fc. I've also
> attached a debug log from ekiga when it didn't work.

Best regards,

Laurent Pinchart


From bersace03 at gmail.com  Sun Dec  9 22:51:35 2007
From: bersace03 at gmail.com (=?ISO-8859-1?Q?=C9tienne?= Bersac)
Date: Sun, 09 Dec 2007 22:51:35 +0100
Subject: [Linux-uvc-devel] [PATCH] Apple Built-in iSight
In-Reply-To: <200712092153.41674.laurent.pinchart@skynet.be>
References: <1197227953.10167.32.camel@thilivren>
	<200712092153.41674.laurent.pinchart@skynet.be>
Message-ID: <1197237095.12516.7.camel@thilivren>

Hi,

Follows the cleaned up patch. Thanks for te comments, the patch now
weight less than 8K !

Signed-off-by: ?tienne Bersac <bersace03 at gmail.com>
---
Add built-in isight support to uvcvideo driver. Add a decode function
member to struct uvc_video_queue. The decode function has three
implementation yet : isoc, bulk and isight. uvc_isight.c contains the
the isight decode function implementation.

A BUILTIN_ISIGHT quirk is added allowing to determine wether to use
isight decode function or not.

Index: uvc_video.c
===================================================================
--- uvc_video.c	(r?vision 149)
+++ uvc_video.c	(copie de travail)
@@ -452,7 +452,7 @@
 /*
  * Completion handler for video URBs.
  */
-static void uvc_video_complete_isoc(struct urb *urb,
+static void uvc_video_decode_isoc(struct urb *urb,
 	struct uvc_video_queue *queue, struct uvc_buffer *buf)
 {
 	u8 *mem;
@@ -490,7 +490,7 @@
 	}
 }
 
-static void uvc_video_complete_bulk(struct urb *urb,
+static void uvc_video_decode_bulk(struct urb *urb,
 	struct uvc_video_queue *queue, struct uvc_buffer *buf)
 {
 	u8 *mem;
@@ -585,10 +585,7 @@
 		buf = list_entry(queue->irqqueue.next, struct uvc_buffer, queue);
 	spin_unlock_irqrestore(&queue->irqlock, flags);
 
-	if (urb->number_of_packets)
-		uvc_video_complete_isoc(urb, queue, buf);
-	else
-		uvc_video_complete_bulk(urb, queue, buf);
+	queue->decode(urb, queue, buf);
 
 	if ((ret = usb_submit_urb(urb, GFP_ATOMIC)) < 0) {
 		uvc_printk(KERN_ERR, "Failed to resubmit video URB (%d).\n",
@@ -937,6 +934,14 @@
 	video->streaming->cur_frame = frame;
 	atomic_set(&video->active, 1);
 
+	/* Select the video decoding function */
+	if (video->dev->quirks & UVC_QUIRK_BUILTIN_ISIGHT)
+		video->queue.decode = uvc_video_decode_isight;
+	else if (video->streaming->intf->num_altsetting > 1)
+		video->queue.decode = uvc_video_decode_isoc;
+	else 
+		video->queue.decode = uvc_video_decode_bulk;
+
 	return 0;
 }
 
Index: uvc_isight.c
===================================================================
--- uvc_isight.c	(r?vision 0)
+++ uvc_isight.c	(r?vision 0)
@@ -0,0 +1,140 @@
+/*
+ * Copyright (C) 2006-2007 Ivan N. Zlatev <contact at i-nz.net>
+ *
+ * Based on extract.c by Ronald S. Bultje <rbultje at ronald.bitfreak.net>.
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
+ * MA 02110-1301, USA
+ */
+
+#include <linux/usb.h>
+#include <linux/kernel.h>
+#include <linux/mm.h>
+
+#include "uvcvideo.h"
+
+/* Built-in iSight webcams implements most of UVC 1.0 except a
+ * different packet format. Instead of sending a header at the
+ * beginning of each isochronous transfer payload, the webcam sends a
+ * single header per image (on its own in a packet), followed by
+ * packets containing data only.
+ *
+ * Offset   Size (bytes)	Description
+ * ------------------------------------------------------------------
+ * 0x00 	1   	Header length
+ * 0x01 	1   	Flags (UVC-compliant)
+ * 0x02 	4   	Always equal to '11223344'
+ * 0x06 	8   	Always equal to 'deadbeefdeadface'
+ * 0x0e 	16  	Unknown
+ *
+ * The header can be prefixed by an optional, unknown-purpose byte.
+ */
+
+static int isight_decode (struct uvc_video_queue *queue, struct uvc_buffer *buf,
+		const __u8 *data, unsigned int len)
+{
+	static const __u8 hdr[] = {
+		0x11, 0x22, 0x33, 0x44,
+		0xde, 0xad, 0xbe, 0xef,
+		0xde, 0xad, 0xfa, 0xce
+	};
+
+	unsigned int maxlen, nbytes;
+	__u8 *mem;
+	int is_header = 0;
+
+	if (buf == NULL)
+		return 0;
+
+	if ((len >= 14 && memcmp (&data[2], hdr, 12) == 0) ||
+	    (len >= 15 && memcmp (&data[3], hdr, 12) == 0)) {
+		uvc_trace(UVC_TRACE_FRAME, "iSight header found\n");
+		is_header = 1;
+	}
+
+	/* Synchronize to the input stream by waiting for a header packet. */
+	if (buf->state != UVC_BUF_STATE_ACTIVE) {
+		if (!is_header) {
+			uvc_trace(UVC_TRACE_FRAME, "Dropping packet (out of "
+				  "sync).\n");
+			return 0;
+		}
+
+		buf->state = UVC_BUF_STATE_ACTIVE;
+	}
+
+	/* Mark the buffer as done if we're at the beginning of a new frame.
+	 *
+	 * Empty buffers (bytesused == 0) don't trigger end of frame detection
+	 * as it doesn't make sense to return an empty buffer.
+	 */
+	if (is_header && buf->buf.bytesused != 0) {
+		buf->state = UVC_BUF_STATE_DONE;
+		return -EAGAIN;
+	}
+
+	/* Copy the video data to the buffer. Skip header packets, as they
+	 * contain no data.
+	 */
+	if (!is_header) {
+		maxlen = buf->buf.length - buf->buf.bytesused;
+		mem = queue->mem + buf->buf.m.offset + buf->buf.bytesused;
+		nbytes = min(len, maxlen);
+		memcpy(mem, data, nbytes);
+		buf->buf.bytesused += nbytes;
+
+		if (len > maxlen || buf->buf.bytesused == buf->buf.length) {
+			uvc_trace(UVC_TRACE_FRAME, "Frame complete (overflow).\n");
+			buf->state = UVC_BUF_STATE_DONE;
+		}
+	}
+
+	return 0;
+}
+
+void uvc_video_decode_isight (struct urb *urb, struct uvc_video_queue *queue,
+		struct uvc_buffer *buf)
+{
+	int ret, i;
+
+	for (i = 0; i < urb->number_of_packets; ++i) {
+		if (urb->iso_frame_desc[i].status < 0) {
+			uvc_trace(UVC_TRACE_FRAME, "USB isochronous frame "
+				  "lost (%d).\n",
+				  urb->iso_frame_desc[i].status);
+		}
+
+		/* Decode the payload packet.
+		 * uvc_video_decode is entered twice when a frame transition
+		 * has been detected because the end of frame can only be
+		 * reliably detected when the first packet of the new frame
+		 * is processed. The first pass detects the transition and
+		 * closes the previous frame's buffer, the second pass
+		 * processes the data of the first payload of the new frame.
+		 */
+		do {
+			ret = isight_decode(queue, buf,
+					    urb->transfer_buffer + urb->iso_frame_desc[i].offset,
+					    urb->iso_frame_desc[i].actual_length);
+
+			if (buf == NULL)
+				break;
+
+			if (buf->state == UVC_BUF_STATE_DONE ||
+			    buf->state == UVC_BUF_STATE_ERROR)
+				buf = uvc_queue_next_buffer(queue, buf);
+		} while (ret == -EAGAIN);
+	}
+}
Index: uvc_driver.c
===================================================================
--- uvc_driver.c	(r?vision 149)
+++ uvc_driver.c	(copie de travail)
@@ -1667,6 +1667,13 @@
 	  .bInterfaceProtocol	= 0,
 	  .driver_info		= UVC_QUIRK_PROBE_MINMAX
 	},
+	/* Apple Built-In iSight */
+	{ .match_flags		= USB_DEVICE_ID_MATCH_DEVICE,
+	  .idVendor		= 0x05ac,
+	  .idProduct		= 0x8501,
+	  .driver_info 		= UVC_QUIRK_PROBE_MINMAX
+	                        | UVC_QUIRK_BUILTIN_ISIGHT
+	},
 	/* Microsoft Lifecam NX-6000 */
 	{ .match_flags		= USB_DEVICE_ID_MATCH_DEVICE
 				| USB_DEVICE_ID_MATCH_INT_INFO,
Index: uvcvideo.h
===================================================================
--- uvcvideo.h	(r?vision 149)
+++ uvcvideo.h	(copie de travail)
@@ -311,6 +311,7 @@
 #define UVC_QUIRK_STATUS_INTERVAL	0x00000001
 #define UVC_QUIRK_PROBE_MINMAX		0x00000002
 #define UVC_QUIRK_PROBE_EXTRAFIELDS	0x00000004
+#define UVC_QUIRK_BUILTIN_ISIGHT	0x00000008
 
 /* Format flags */
 #define UVC_FMT_FLAG_COMPRESSED		0x00000001
@@ -576,6 +577,9 @@
 
 	struct list_head mainqueue;
 	struct list_head irqqueue;
+
+	void (*decode) (struct urb *urb, struct uvc_video_queue *queue,
+			struct uvc_buffer *buf);
 };
 
 struct uvc_video_device {
@@ -764,6 +768,10 @@
 extern struct usb_host_endpoint *uvc_find_endpoint(
 		struct usb_host_interface *alts, __u8 epaddr);
 
+/* Quirks support */
+void uvc_video_decode_isight (struct urb *urb, struct uvc_video_queue *queue, 
+		struct uvc_buffer *buf);
+
 #endif /* __KERNEL__ */
 
 #endif
Index: Makefile
===================================================================
--- Makefile	(r?vision 149)
+++ Makefile	(copie de travail)
@@ -5,7 +5,7 @@
 PWD		:= $(shell pwd)
 
 obj-m		:= uvcvideo.o
-uvcvideo-objs   := uvc_driver.o uvc_queue.o uvc_v4l2.o uvc_video.o uvc_ctrl.o
+uvcvideo-objs   := uvc_driver.o uvc_queue.o uvc_v4l2.o uvc_video.o uvc_ctrl.o uvc_isight.o
 
 all: uvcvideo
 

 




From asmo.koskinen at arkki.info  Sun Dec  9 23:24:16 2007
From: asmo.koskinen at arkki.info (Asmo Koskinen)
Date: Mon, 10 Dec 2007 00:24:16 +0200
Subject: [Linux-uvc-devel] Finnish Wiki page for Logitech QuickCam Pro
 9000
In-Reply-To: <200712092159.07984.laurent.pinchart@skynet.be>
References: <475BC469.50001@arkki.info>
	<200712092159.07984.laurent.pinchart@skynet.be>
Message-ID: <475C6B10.8010300@arkki.info>

Laurent Pinchart kirjoitti:
> Thanks a lot for your contribution. Documentation is always appreciated.
>   

I will add tomorrow more about Flumotion 0.5.1. I use also yours 
svn-module. Anyway, I think this video and sound quality is quite good, 
what you think?

http://www.arkki.info/wordpress/?p=14

Best Reagrds Asmo Koskinen.


From felix at derklecks.de  Mon Dec 10 00:42:49 2007
From: felix at derklecks.de (=?UTF-8?B?RmVsaXggTcO2bGxlcg==?=)
Date: Mon, 10 Dec 2007 00:42:49 +0100
Subject: [Linux-uvc-devel] [PATCH] Apple Built-in iSight
In-Reply-To: <1197237095.12516.7.camel@thilivren>
References: <1197227953.10167.32.camel@thilivren>	<200712092153.41674.laurent.pinchart@skynet.be>
	<1197237095.12516.7.camel@thilivren>
Message-ID: <475C7D79.1040309@derklecks.de>

Hi,

> Follows the cleaned up patch. Thanks for te comments, the patch now
> weight less than 8K !

i just applied your patch and tested it on my MacBook of early 2006. I
am running openSUSE 11.0 alpha0 and kernel 2.6.24-rc3-git1-3-default.

I hit some small problems:
# /usr/local/lib/udev/ift-load -f /lib/firmware/isight.fw
does not load the firmware for me as far as I can see. (i.e. the device
id does not change)
# /usr/local/lib/udev/ift-load -f /lib/firmware/isight.fw -b 001 -d 004
works.

I cannot make the help folder:
"Making all in help
 make[2]: Entering directory `/home/fm/isight-firmware-tools-0.5/help'
 ift-extract.info > ift-extract.1
 /bin/sh: ift-extract.info: command not found"
Commenting out help from SUBDIRS let make finish successfully. ;)

But otherwise, great work! With mplayer tv:// -tv
driver=v4l2:width=352:height=288:device=/dev/video0 i am getting a
perfect picture.

Thanks alot!
Felix M?ller


From lists at ebourne.me.uk  Mon Dec 10 01:30:04 2007
From: lists at ebourne.me.uk (Martin Ebourne)
Date: Mon, 10 Dec 2007 00:30:04 +0000
Subject: [Linux-uvc-devel] ekiga fails to open camera on second run
In-Reply-To: <200712092203.58503.laurent.pinchart@skynet.be>
References: <1197160803.2694.18.camel@avenin.ebourne.me.uk>
	<200712092203.58503.laurent.pinchart@skynet.be>
Message-ID: <1197246604.3122.6.camel@avenin.ebourne.me.uk>

On Sun, 2007-12-09 at 22:03 +0100, Laurent Pinchart wrote:
> It sounds like a driver and/or hardware/firmware issue. Could you please give 
> me more information regarding your hardware configuration ?

Nothing special as far as I know, just the logitech cam as described
before. I'm running Fedora 8 x86_64.

Linux 2.6.23.8-63.fc8 #1 SMP Wed Nov 21 17:56:40 EST 2007 x86_64 x86_64
x86_64 GNU/Linux

>  The content 
> of /proc/cpuinfo and the output of lspci and lsusb might help diagnose the 
> issue.

Sure, please find attached. Any other info/tests let me know.

I think the problem only manifests if ekiga crashes (which is happening
a lot as per the other email which was sent to the wrong list, doh!). If
I quit ekiga it works again next time, but if it crashes and gets into
this bad state it will be like that every time.

Either unplugging the cam or running 'xawtv -hwscan' fixes it. Looks
like the driver gets into some sort of bad state that the scan fixes.

Cheers,

Martin.
-------------- next part --------------
processor	: 0
vendor_id	: AuthenticAMD
cpu family	: 15
model		: 36
model name	: AMD Turion(tm) 64 Mobile Technology ML-37
stepping	: 2
cpu MHz		: 800.000
cache size	: 1024 KB
fpu		: yes
fpu_exception	: yes
cpuid level	: 1
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 syscall nx mmxext fxsr_opt lm 3dnowext 3dnow up rep_good pni lahf_lm
bogomips	: 1601.08
TLB size	: 1024 4K pages
clflush size	: 64
cache_alignment	: 64
address sizes	: 40 bits physical, 48 bits virtual
power management: ts fid vid ttp tm stc

-------------- next part --------------
00:00.0 Host bridge: ATI Technologies Inc Radeon Xpress 200 (RS480/RS482/RX480/RX482) Chipset - Host bridge (rev 01)
	Flags: bus master, 66MHz, medium devsel, latency 64

00:02.0 PCI bridge: ATI Technologies Inc RS480 PCI-X Root Port (prog-if 00 [Normal decode])
	Flags: bus master, fast devsel, latency 0
	Bus: primary=00, secondary=01, subordinate=01, sec-latency=0
	I/O behind bridge: 00009000-00009fff
	Memory behind bridge: c0100000-c01fffff
	Prefetchable memory behind bridge: c8000000-cfffffff
	Capabilities: [50] Power Management version 3
	Capabilities: [58] Express Root Port (Slot-) IRQ 0
	Capabilities: [80] Message Signalled Interrupts: Mask- 64bit- Queue=0/0 Enable+
	Capabilities: [b0] Subsystem: ATI Technologies Inc Unknown device 5951
	Capabilities: [b8] HyperTransport: MSI Mapping

00:06.0 PCI bridge: ATI Technologies Inc RS480 PCI Bridge (prog-if 00 [Normal decode])
	Flags: bus master, fast devsel, latency 0
	Bus: primary=00, secondary=05, subordinate=05, sec-latency=0
	Memory behind bridge: c0200000-c02fffff
	Capabilities: [50] Power Management version 3
	Capabilities: [58] Express Root Port (Slot-) IRQ 0
	Capabilities: [80] Message Signalled Interrupts: Mask- 64bit- Queue=0/0 Enable+
	Capabilities: [b0] Subsystem: ATI Technologies Inc Unknown device 5951
	Capabilities: [b8] HyperTransport: MSI Mapping

00:13.0 USB Controller: ATI Technologies Inc IXP SB400 USB Host Controller (prog-if 10 [OHCI])
	Subsystem: Acer Incorporated [ALI] Unknown device 007e
	Flags: bus master, 66MHz, medium devsel, latency 64, IRQ 19
	Memory at c0000000 (32-bit, non-prefetchable) [size=4K]
	Capabilities: [d0] Message Signalled Interrupts: Mask- 64bit- Queue=0/0 Enable-

00:13.1 USB Controller: ATI Technologies Inc IXP SB400 USB Host Controller (prog-if 10 [OHCI])
	Subsystem: Acer Incorporated [ALI] Unknown device 007e
	Flags: bus master, 66MHz, medium devsel, latency 64, IRQ 19
	Memory at c0001000 (32-bit, non-prefetchable) [size=4K]
	Capabilities: [d0] Message Signalled Interrupts: Mask- 64bit- Queue=0/0 Enable-

00:13.2 USB Controller: ATI Technologies Inc IXP SB400 USB2 Host Controller (prog-if 20 [EHCI])
	Subsystem: Acer Incorporated [ALI] Unknown device 007e
	Flags: bus master, 66MHz, medium devsel, latency 64, IRQ 19
	Memory at c0002000 (32-bit, non-prefetchable) [size=4K]
	Capabilities: [dc] Power Management version 2
	Capabilities: [d0] Message Signalled Interrupts: Mask- 64bit- Queue=0/0 Enable-

00:14.0 SMBus: ATI Technologies Inc IXP SB400 SMBus Controller (rev 11)
	Subsystem: Acer Incorporated [ALI] Unknown device 007e
	Flags: 66MHz, medium devsel
	I/O ports at 8400 [size=16]
	Memory at c0003000 (32-bit, non-prefetchable) [size=1K]
	Capabilities: [b0] HyperTransport: MSI Mapping

00:14.1 IDE interface: ATI Technologies Inc Standard Dual Channel PCI IDE Controller (prog-if 8a [Master SecP PriP])
	Subsystem: Acer Incorporated [ALI] Unknown device 007e
	Flags: bus master, 66MHz, medium devsel, latency 64, IRQ 16
	I/O ports at 01f0 [size=8]
	I/O ports at 03f4 [size=1]
	I/O ports at 0170 [size=8]
	I/O ports at 0374 [size=1]
	I/O ports at 8410 [size=16]
	Capabilities: [70] Message Signalled Interrupts: Mask- 64bit- Queue=0/0 Enable-

00:14.3 ISA bridge: ATI Technologies Inc IXP SB400 PCI-ISA Bridge
	Subsystem: Acer Incorporated [ALI] Unknown device 007e
	Flags: bus master, 66MHz, medium devsel, latency 0

00:14.4 PCI bridge: ATI Technologies Inc IXP SB400 PCI-PCI Bridge (prog-if 01 [Subtractive decode])
	Flags: bus master, 66MHz, medium devsel, latency 64
	Bus: primary=00, secondary=06, subordinate=0a, sec-latency=64
	Memory behind bridge: c0300000-c03fffff

00:14.5 Multimedia audio controller: ATI Technologies Inc IXP SB400 AC'97 Audio Controller (rev 02)
	Subsystem: Acer Incorporated [ALI] Unknown device 007e
	Flags: bus master, 66MHz, slow devsel, latency 64, IRQ 17
	Memory at c0003400 (32-bit, non-prefetchable) [size=256]
	Capabilities: [40] Message Signalled Interrupts: Mask- 64bit- Queue=0/0 Enable-

00:14.6 Modem: ATI Technologies Inc SB400 AC'97 Modem Controller (rev 02) (prog-if 00 [Generic])
	Subsystem: Acer Incorporated [ALI] Unknown device 007e
	Flags: bus master, 66MHz, slow devsel, latency 64, IRQ 17
	Memory at c0003800 (32-bit, non-prefetchable) [size=256]
	Capabilities: [40] Message Signalled Interrupts: Mask- 64bit- Queue=0/0 Enable-

00:18.0 Host bridge: Advanced Micro Devices [AMD] K8 [Athlon64/Opteron] HyperTransport Technology Configuration
	Flags: fast devsel
	Capabilities: [80] HyperTransport: Host or Secondary Interface

00:18.1 Host bridge: Advanced Micro Devices [AMD] K8 [Athlon64/Opteron] Address Map
	Flags: fast devsel

00:18.2 Host bridge: Advanced Micro Devices [AMD] K8 [Athlon64/Opteron] DRAM Controller
	Flags: fast devsel

00:18.3 Host bridge: Advanced Micro Devices [AMD] K8 [Athlon64/Opteron] Miscellaneous Control
	Flags: fast devsel

01:00.0 VGA compatible controller: ATI Technologies Inc Radeon Mobility X700 (PCIE) (prog-if 00 [VGA])
	Subsystem: Acer Incorporated [ALI] Unknown device 007e
	Flags: bus master, fast devsel, latency 0, IRQ 18
	Memory at c8000000 (32-bit, prefetchable) [size=128M]
	I/O ports at 9000 [size=256]
	Memory at c0100000 (32-bit, non-prefetchable) [size=64K]
	[virtual] Expansion ROM at c0120000 [disabled] [size=128K]
	Capabilities: [50] Power Management version 2
	Capabilities: [58] Express Endpoint IRQ 0
	Capabilities: [80] Message Signalled Interrupts: Mask- 64bit+ Queue=0/0 Enable-

05:00.0 Ethernet controller: Broadcom Corporation NetLink BCM5789 Gigabit Ethernet PCI Express (rev 11)
	Subsystem: Acer Incorporated [ALI] Unknown device 007e
	Flags: bus master, fast devsel, latency 0, IRQ 18
	Memory at c0200000 (64-bit, non-prefetchable) [size=64K]
	Capabilities: [48] Power Management version 2
	Capabilities: [50] Vital Product Data
	Capabilities: [58] Message Signalled Interrupts: Mask- 64bit+ Queue=0/3 Enable-
	Capabilities: [d0] Express Endpoint IRQ 0

06:02.0 Network controller: Intel Corporation PRO/Wireless 2200BG Network Connection (rev 05)
	Subsystem: Intel Corporation Unknown device 2702
	Flags: bus master, medium devsel, latency 64, IRQ 21
	Memory at c0306000 (32-bit, non-prefetchable) [size=4K]
	Capabilities: [dc] Power Management version 2

06:09.0 CardBus bridge: Texas Instruments PCIxx21/x515 Cardbus Controller
	Subsystem: Acer Incorporated [ALI] Unknown device 007e
	Flags: bus master, medium devsel, latency 168, IRQ 23
	Memory at c0307000 (32-bit, non-prefetchable) [size=4K]
	Bus: primary=06, secondary=07, subordinate=0a, sec-latency=176
	Memory window 0: 50000000-53fff000 (prefetchable)
	Memory window 1: 54000000-57fff000
	I/O window 0: 00001400-000014ff
	I/O window 1: 00001800-000018ff
	16-bit legacy interface ports at 0001

06:09.2 FireWire (IEEE 1394): Texas Instruments OHCI Compliant IEEE 1394 Host Controller (prog-if 10 [OHCI])
	Subsystem: Acer Incorporated [ALI] Unknown device 007e
	Flags: bus master, medium devsel, latency 64, IRQ 21
	Memory at c0308000 (32-bit, non-prefetchable) [size=2K]
	Memory at c0300000 (32-bit, non-prefetchable) [size=16K]
	Capabilities: [44] Power Management version 2

06:09.3 Mass storage controller: Texas Instruments PCIxx21 Integrated FlashMedia Controller
	Subsystem: Acer Incorporated [ALI] Unknown device 007e
	Flags: bus master, medium devsel, latency 64, IRQ 23
	Memory at c0304000 (32-bit, non-prefetchable) [size=8K]
	Capabilities: [44] Power Management version 2

-------------- next part --------------

Bus 001 Device 002: ID 046d:0991 Logitech, Inc. 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x046d Logitech, Inc.
  idProduct          0x0991 
  bcdDevice            0.05
  iManufacturer           0 
  iProduct                0 
  iSerial                 2 AA8240EB
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength         1433
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
    MaxPower              500mA
    UNRECOGNIZED:  08 0b 00 02 0e 03 00 00
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0 
      iInterface              0 
      UNRECOGNIZED:  20 41 01 0c 82 06 61 63 70 50 ab 49 b8 cc b3 85 5e 8d 22 50 14 01 04 03 ff ff 0f 00 00 00 00 00
      UNRECOGNIZED:  20 41 01 08 82 06 61 63 70 50 ab 49 b8 cc b3 85 5e 8d 22 51 03 01 04 03 19 00 00 00 00 00 01 00
      UNRECOGNIZED:  20 41 01 0b 82 06 61 63 70 50 ab 49 b8 cc b3 85 5e 8d 22 55 01 01 04 03 01 00 00 00 00 00 00 00
      UNRECOGNIZED:  20 41 01 09 82 06 61 63 70 50 ab 49 b8 cc b3 85 5e 8d 22 56 02 01 04 03 0c 00 00 00 00 00 00 00
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x87  EP 7 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               8
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x00c0  1x 192 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0180  1x 384 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0280  1x 640 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x03b0  1x 944 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       7
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0a80  2x 640 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       8
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b20  2x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       9
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0be0  2x 992 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting      10
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1380  3x 896 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting      11
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x13fc  3x 1020 bytes
        bInterval               1
        UNRECOGNIZED:  08 0b 02 02 01 02 00 00
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0 
      iInterface              0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           38
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0 
        iTerminal               0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          1
        bSourceID               5
        iTerminal               0 
      AudioControl Interface Descriptor:
        bLength                 8
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 5
        bSourceID               1
        bControlSize            1
        bmaControls( 0)      0x03
          Mute
          Volume
        iFeature                0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            1 Discrete
        tSamFreq[ 0]        16000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0044  1x 68 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1

Bus 001 Device 001: ID 0000:0000  
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            9 Hub
  bDeviceSubClass         0 Unused
  bDeviceProtocol         1 Single TT
  bMaxPacketSize0        64
  idVendor           0x0000 
  idProduct          0x0000 
  bcdDevice            2.06
  iManufacturer           3 Linux 2.6.23.8-63.fc8 ehci_hcd
  iProduct                2 EHCI Host Controller
  iSerial                 1 0000:00:13.2
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           25
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xe0
      Self Powered
      Remote Wakeup
    MaxPower                0mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         9 Hub
      bInterfaceSubClass      0 Unused
      bInterfaceProtocol      0 Full speed (or root) hub
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0004  1x 4 bytes
        bInterval              12
Hub Descriptor:
  bLength              11
  bDescriptorType      41
  nNbrPorts             8
  wHubCharacteristic 0x000a
    No power switching (usb 1.0)
    Per-port overcurrent protection
    TT think time 8 FS bits
  bPwrOn2PwrGood       10 * 2 milli seconds
  bHubContrCurrent      0 milli Ampere
  DeviceRemovable    0x00 0x60
  PortPwrCtrlMask    0x17  0x95 
 Hub Port Status:
   Port 1: 0000.0100 power
   Port 2: 0000.0100 power
   Port 3: 0000.0100 power
   Port 4: 0000.0100 power
   Port 5: 0000.0100 power
   Port 6: 0000.0503 highspeed power enable connect
   Port 7: 0000.0100 power
   Port 8: 0000.0100 power

Bus 003 Device 001: ID 0000:0000  
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            9 Hub
  bDeviceSubClass         0 Unused
  bDeviceProtocol         0 Full speed (or root) hub
  bMaxPacketSize0        64
  idVendor           0x0000 
  idProduct          0x0000 
  bcdDevice            2.06
  iManufacturer           3 Linux 2.6.23.8-63.fc8 ohci_hcd
  iProduct                2 OHCI Host Controller
  iSerial                 1 0000:00:13.1
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           25
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xe0
      Self Powered
      Remote Wakeup
    MaxPower                0mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         9 Hub
      bInterfaceSubClass      0 Unused
      bInterfaceProtocol      0 Full speed (or root) hub
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval             255
Hub Descriptor:
  bLength               9
  bDescriptorType      41
  nNbrPorts             4
  wHubCharacteristic 0x0002
    No power switching (usb 1.0)
    Ganged overcurrent protection
  bPwrOn2PwrGood        2 * 2 milli seconds
  bHubContrCurrent      0 milli Ampere
  DeviceRemovable    0x00
  PortPwrCtrlMask    0x60 
 Hub Port Status:
   Port 1: 0000.0100 power
   Port 2: 0000.0100 power
   Port 3: 0000.0100 power
   Port 4: 0000.0100 power

Bus 002 Device 001: ID 0000:0000  
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            9 Hub
  bDeviceSubClass         0 Unused
  bDeviceProtocol         0 Full speed (or root) hub
  bMaxPacketSize0        64
  idVendor           0x0000 
  idProduct          0x0000 
  bcdDevice            2.06
  iManufacturer           3 Linux 2.6.23.8-63.fc8 ohci_hcd
  iProduct                2 OHCI Host Controller
  iSerial                 1 0000:00:13.0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           25
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xe0
      Self Powered
      Remote Wakeup
    MaxPower                0mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         9 Hub
      bInterfaceSubClass      0 Unused
      bInterfaceProtocol      0 Full speed (or root) hub
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval             255
Hub Descriptor:
  bLength               9
  bDescriptorType      41
  nNbrPorts             4
  wHubCharacteristic 0x0002
    No power switching (usb 1.0)
    Ganged overcurrent protection
  bPwrOn2PwrGood        2 * 2 milli seconds
  bHubContrCurrent      0 milli Ampere
  DeviceRemovable    0x00
  PortPwrCtrlMask    0x60 
 Hub Port Status:
   Port 1: 0000.0100 power
   Port 2: 0000.0100 power
   Port 3: 0000.0100 power
   Port 4: 0000.0100 power

From bersace03 at gmail.com  Mon Dec 10 01:37:58 2007
From: bersace03 at gmail.com (=?ISO-8859-1?Q?=C9tienne?= Bersac)
Date: Mon, 10 Dec 2007 01:37:58 +0100
Subject: [Linux-uvc-devel] [PATCH] Apple Built-in iSight
In-Reply-To: <475C7D79.1040309@derklecks.de>
References: <1197227953.10167.32.camel@thilivren>
	<200712092153.41674.laurent.pinchart@skynet.be>
	<1197237095.12516.7.camel@thilivren>  <475C7D79.1040309@derklecks.de>
Message-ID: <1197247078.13367.4.camel@thilivren>

Hallo,

> I hit some small problems:
> # /usr/local/lib/udev/ift-load -f /lib/firmware/isight.fw

You should not load manually the firmware. This is done by a udev rules.
Ensure your configured with --sysconfdir=/etc . This is why ift-load is
now installed in ${prefix}/lib/udev/ .

> # /usr/local/lib/udev/ift-load -f /lib/firmware/isight.fw -b 001 -d 004
> works.

ift-load does not probe for an isight, it udev's job. You should not
care about firmware loading. Think *just work* ;)

> I cannot make the help folder:
> "Making all in help
>  make[2]: Entering directory `/home/fm/isight-firmware-tools-0.5/help'
>  ift-extract.info > ift-extract.1
>  /bin/sh: ift-extract.info: command not found"

You just need to install info2man. I updated the tarball to use a proper
check. (0.5.0.1).

Regards,
?tienne.



From asmo.koskinen at arkki.info  Mon Dec 10 09:29:28 2007
From: asmo.koskinen at arkki.info (Asmo Koskinen)
Date: Mon, 10 Dec 2007 10:29:28 +0200
Subject: [Linux-uvc-devel] Finnish Wiki page for Logitech QuickCam Pro
 9000
In-Reply-To: <475C6B10.8010300@arkki.info>
References: <475BC469.50001@arkki.info>	<200712092159.07984.laurent.pinchart@skynet.be>
	<475C6B10.8010300@arkki.info>
Message-ID: <475CF8E8.5090707@arkki.info>

Asmo Koskinen kirjoitti:
> I will add tomorrow more about Flumotion 0.5.1.

Here it is:

http://wiki.ubuntu-fi.org/Logitech_QuickCam_Pro_9000#head-4db751a4aa0b185cc63871074c634cae9be0beb5

Best Regards Asmo Koskinen.


From l.schimmer at cgv.tugraz.at  Fri Dec  7 11:12:32 2007
From: l.schimmer at cgv.tugraz.at (Lars Schimmer)
Date: Fri, 07 Dec 2007 11:12:32 +0100
Subject: [Linux-uvc-devel] Logitech QC 9000 lockup on dwFrameInterval
 change during Skype call
In-Reply-To: <200712070137.46488.laurent.pinchart@skynet.be>
References: <20071204195929.GA1101@kolmann.at>	<200712052331.59034.laurent.pinchart@skynet.be>	<20071206065637.GA26483@kolmann.at>
	<200712070137.46488.laurent.pinchart@skynet.be>
Message-ID: <47591C90.8050805@cgv.tugraz.at>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Laurent Pinchart wrote:

> - Skype could stop streaming, change the frame rate and restart streaming. 
> Ditto about the webcam crash.
> 
> It would be interesting to write a small application to stress-test different 
> use cases and see what works before making modifications to Skype or to the 
> driver.

Just a sidenote, as I see it nearly in every place:
Is skype THE standard, teh reference to test upon?
As I see, most people say: skype for Linux with video is out! And my
webcam doesn't work, so, driver team, change the driver, make it work
with skype!

In my eyes, skype is the bad boy who is not working 100% correct and the
skype team has to change it, but since skype is out, nearly everyone
measures against skype and think "skype is perfect and bugfree", seems
to be...

> Best regards,
> 
> Laurent Pinchart

MfG,
Lars Schimmer
- --
- -------------------------------------------------------------
TU Graz, Institut f?r ComputerGraphik & WissensVisualisierung
Tel: +43 316 873-5405       E-Mail: l.schimmer at cgv.tugraz.at
Fax: +43 316 873-5402       PGP-Key-ID: 0x4A9B1723
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFHWRyQmWhuE0qbFyMRAmVcAJ0bmNtSzzEokSgIHjibB7Z1PGNqHgCghUEG
/IYQP5j335wql/EvUkNVCZo=
=YBGH
-----END PGP SIGNATURE-----


From laurent.pinchart at skynet.be  Mon Dec 10 12:23:41 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 10 Dec 2007 12:23:41 +0100
Subject: [Linux-uvc-devel] Logitech QC 9000 lockup on dwFrameInterval
	change during Skype call
In-Reply-To: <47591C90.8050805@cgv.tugraz.at>
References: <20071204195929.GA1101@kolmann.at>
	<200712070137.46488.laurent.pinchart@skynet.be>
	<47591C90.8050805@cgv.tugraz.at>
Message-ID: <200712101223.41865.laurent.pinchart@skynet.be>

Hi Lars,

On Friday 07 December 2007 11:12, Lars Schimmer wrote:
> Laurent Pinchart wrote:
> > - Skype could stop streaming, change the frame rate and restart
> > streaming. Ditto about the webcam crash.
> >
> > It would be interesting to write a small application to stress-test
> > different use cases and see what works before making modifications to
> > Skype or to the driver.
>
> Just a sidenote, as I see it nearly in every place:
> Is skype THE standard, teh reference to test upon?
> As I see, most people say: skype for Linux with video is out! And my
> webcam doesn't work, so, driver team, change the driver, make it work
> with skype!
>
> In my eyes, skype is the bad boy who is not working 100% correct and the
> skype team has to change it, but since skype is out, nearly everyone
> measures against skype and think "skype is perfect and bugfree", seems
> to be...

I can't agree more with you. I don't treat Skype-related issues differently 
than other issues. If the driver is at fault because it doesn't implement a 
feature according to the V4L2 spec, I will try to fix it. On the other hand, 
if the application behaves incorrectly, I won't be able to look at its source 
code so I tell users to report the problem to Skype technical support.

As far as I'm concerned, Skype is a second-class citizen that I don't care 
much about. If it works, fine, but if it doesn't I'm definitely not going to 
add workarounds to the driver.

Best regards,

Laurent Pinchart


From contact at i-nz.net  Mon Dec 10 22:50:28 2007
From: contact at i-nz.net (Ivan N. Zlatev)
Date: Mon, 10 Dec 2007 21:50:28 +0000
Subject: [Linux-uvc-devel] [PATCH] Apple Built-in iSight
In-Reply-To: <1197247078.13367.4.camel@thilivren>
References: <1197227953.10167.32.camel@thilivren>	<200712092153.41674.laurent.pinchart@skynet.be>	<1197237095.12516.7.camel@thilivren>
	<475C7D79.1040309@derklecks.de>
	<1197247078.13367.4.camel@thilivren>
Message-ID: <475DB4A4.3010101@i-nz.net>

?tienne Bersac wrote:
> Hallo,
> 
>> I hit some small problems:
>> # /usr/local/lib/udev/ift-load -f /lib/firmware/isight.fw
> 
> You should not load manually the firmware. This is done by a udev rules.
> Ensure your configured with --sysconfdir=/etc . This is why ift-load is
> now installed in ${prefix}/lib/udev/ .
> 
>> # /usr/local/lib/udev/ift-load -f /lib/firmware/isight.fw -b 001 -d 004
>> works.
> 
> ift-load does not probe for an isight, it udev's job. You should not
> care about firmware loading. Think *just work* ;)
> 
>> I cannot make the help folder:
>> "Making all in help
>>  make[2]: Entering directory `/home/fm/isight-firmware-tools-0.5/help'
>>  ift-extract.info > ift-extract.1
>>  /bin/sh: ift-extract.info: command not found"
> 
> You just need to install info2man. I updated the tarball to use a proper
> check. (0.5.0.1).
> 

It seems that there is no info2man rpm for openSUSE available, which
makes me think that there are no packages available for other
distributions as well. Can you please ship both the man and info pages?

Regards,
Ivan


From shaohuang at gmail.com  Mon Dec 10 23:11:58 2007
From: shaohuang at gmail.com (Brian Pin)
Date: Mon, 10 Dec 2007 14:11:58 -0800
Subject: [Linux-uvc-devel] Question about contant define numbers...
Message-ID: <a81f87bb0712101411p464dfc67u34d2654b318e58ad@mail.gmail.com>

Hi, I am sorry if this is stupid..but I want to ask:

1. why are we set UVC_MAX_ISO_PACKETS to 40?
2. why UVC_URBS set to 5


-- 
Best Regards
Brian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071210/1e4a6565/attachment.html>

From bersace03 at gmail.com  Mon Dec 10 23:28:43 2007
From: bersace03 at gmail.com (=?ISO-8859-1?Q?=C9tienne?= Bersac)
Date: Mon, 10 Dec 2007 23:28:43 +0100
Subject: [Linux-uvc-devel] [PATCH] Apple Built-in iSight
In-Reply-To: <475DB4A4.3010101@i-nz.net>
References: <1197227953.10167.32.camel@thilivren>
	<200712092153.41674.laurent.pinchart@skynet.be>
	<1197237095.12516.7.camel@thilivren>  <475C7D79.1040309@derklecks.de>
	<1197247078.13367.4.camel@thilivren>  <475DB4A4.3010101@i-nz.net>
Message-ID: <1197325723.7018.8.camel@thilivren>

Hi,

Thanks for pointing this. Fixed in 0.5.0.4.

Regards,
?tienne.



From contact at i-nz.net  Tue Dec 11 01:40:51 2007
From: contact at i-nz.net (Ivan N. Zlatev)
Date: Tue, 11 Dec 2007 00:40:51 +0000
Subject: [Linux-uvc-devel] Built-in iSight Firmware Tools
In-Reply-To: <1197227870.10167.28.camel@thilivren>
References: <1197130591.6842.32.camel@thilivren>
	<1197227870.10167.28.camel@thilivren>
Message-ID: <475DDC93.7020204@i-nz.net>

?tienne Bersac wrote:
> Hi,
> 
> Uploaded the 0.5 version which includes ift-export to export to Intel
> HEX format as well as info and manpages for ift-extract and ift-export.
> ift-load now uses syslog facility.
> 
> The TODO list is empty. :)
> 
> http://bersace03.free.fr/ift/
> 
> Regards,
> ?tienne.

A few things:

1) The build system seems broken to me:

 * It doesn't set proper permissions (e.g root for ift-load)
 * It doesn't default to paths that make sense and I had to explicitly
configure as shown below to get the thing to install properly:

./configure --prefix=/ --libdir=/lib --bindir=/bin --sbindir=/sbin
--datarootdir=/usr/share --datadir=/usr/share --sysconfdir=/etc

And that would still generate "//lib/firmware..." path. Because of the
-prefix=/ I pressume.

2) The udev rule doesn't work for me in terms of ift-load doesn't load
the firmware. Probably the USB_BUS and USB_DEV env variables are not set
as you seem to expect them to be in ift-load. May be you should either
pass those explicitly in the udev rule or just make ift-load find the
device itself basid on the device and vendor id?

3) In ift-load (load.c) you are using "ift-extract" instead of
"ift-load". :) E.g:

g_set_prgname("ift-extract");
...
gchar *desc = _("Extract firmware using ift-extract.");
etc...

4) ift-load (load.c) syslog logging won't work because you are:

 * Meant to use syslog/vsyslog functions (instead of g_error) to send
the log messages to the syslog.
 * openlog("ift-extract", 0, LOG_SYSLOG); - That should probably be
something like:

openlog("ift-load", LOG_PERROR, LOG_USER);

The man page says LOG_SYSLOG is for generated internally by syslogd
messages. LOG_PERROR will also print to stderr.

Also on a side-note: g_error is a bit excessive probably because it
aborts immediately.

Regards,
Ivan


From bersace03 at gmail.com  Tue Dec 11 02:40:24 2007
From: bersace03 at gmail.com (=?ISO-8859-1?Q?=C9tienne?= Bersac)
Date: Tue, 11 Dec 2007 02:40:24 +0100
Subject: [Linux-uvc-devel] Built-in iSight Firmware Tools
In-Reply-To: <475DDC93.7020204@i-nz.net>
References: <1197130591.6842.32.camel@thilivren>
	<1197227870.10167.28.camel@thilivren>  <475DDC93.7020204@i-nz.net>
Message-ID: <1197337224.15974.20.camel@thilivren>

Hi,

Thanks for testing and feedbacks.

> 1) The build system seems broken to me:
> 
>  * It doesn't set proper permissions (e.g root for ift-load)

Is it a bug of permissions or ownership ?


> And that would still generate "//lib/firmware..." path. Because of the
> -prefix=/ I pressume.

/lib/firmware have nothing to do with ${prefix} and friends, it is
hardcoded both in ift-extract and isight.rules. ift-extract has an
option if you want to output in a different directory (e.g.  '.'), see
info ift-extract. Only ${sysconfdir} should be overriden for proper
installation of the udev rules.

> 2) Probably the USB_BUS and USB_DEV env variables are not set
> as you seem to expect them to be in ift-load. May be you should either
> pass those explicitly in the udev rule or just make ift-load find the
> device itself basid on the device and vendor id?

Do you have the firmware in /lib/firmware/isight.fw ? I dropped device
probe because it's udev job. Please confirm the bug. Write a udev rules
running a script which dump `export` to a log file to see what info udev
exports in env.

> 4)  * Meant to use syslog/vsyslog functions (instead of g_error) to send
> the log messages to the syslog.

If you read carefully the beginning of load.c, it overload
g_{message,warning,error} ;). I renamed them to
ift_{message,warning,error} to avoid confusion. ift_error uses exit(-1)
instead of abort() as overloaded g_error() did.

>  * openlog("ift-extract", 0, LOG_SYSLOG); - That should probably be
> something like:
> 
> openlog("ift-load", LOG_PERROR, LOG_USER);

Fixed, thanks.


I produce a 0.5.1 bugfixe release with your feedbacks. Don't hesitate to
provide deeper info. I don't mind releasing several releases per
weeks ;)


Regards,
?tienne.



From contact at i-nz.net  Tue Dec 11 04:00:14 2007
From: contact at i-nz.net (Ivan N. Zlatev)
Date: Tue, 11 Dec 2007 03:00:14 +0000
Subject: [Linux-uvc-devel] Built-in iSight Firmware Tools
In-Reply-To: <1197337224.15974.20.camel@thilivren>
References: <1197130591.6842.32.camel@thilivren>	
	<1197227870.10167.28.camel@thilivren> <475DDC93.7020204@i-nz.net>
	<1197337224.15974.20.camel@thilivren>
Message-ID: <475DFD3E.7010703@i-nz.net>

?tienne Bersac wrote:
> Hi,
> 
> Thanks for testing and feedbacks.
> 
>> 1) The build system seems broken to me:
>>
>>  * It doesn't set proper permissions (e.g root for ift-load)
> 
> Is it a bug of permissions or ownership ?

Ownership.

> 
>> And that would still generate "//lib/firmware..." path. Because of the
>> -prefix=/ I pressume.
> 
> /lib/firmware have nothing to do with ${prefix} and friends, it is
> hardcoded both in ift-extract and isight.rules. ift-extract has an
> option if you want to output in a different directory (e.g.  '.'), see
> info ift-extract. Only ${sysconfdir} should be overriden for proper
> installation of the udev rules.
> 

Please apologies me for the confusion. I meant the following snippet
from isight.rules.in:

RUN+="@prefix@/lib/udev/ift-load -f /lib/firmware/isight.fw"

becomes (with --prefix=/) :

RUN+="//lib/udev/ift-load -f /lib/firmware/isight.fw"

>> 2) Probably the USB_BUS and USB_DEV env variables are not set
>> as you seem to expect them to be in ift-load. May be you should either
>> pass those explicitly in the udev rule or just make ift-load find the
>> device itself basid on the device and vendor id?
> 
> Do you have the firmware in /lib/firmware/isight.fw ? I dropped device
> probe because it's udev job. Please confirm the bug. Write a udev rules
> running a script which dump `export` to a log file to see what info udev
> exports in env.
> 

Yes I have the firmware in place.

Firstly in order to make the udev rule to get executed I had to change
SUBSYSTEM=="usb_device" to "usb". "usb_device" seems deprecated. As you
can see there is no USB_DEV nor USB_BUS here:

declare -x ACTION="add"
declare -x DEVICE="/proc/bus/usb/005/003"
declare -x DEVPATH="/devices/pci0000:00/0000:00:1d.7/usb5/5-4/5-4:1.0"
declare -x DEVTYPE="usb_interface"
declare -x INTERFACE="255/255/255"
declare -x MODALIAS="usb:v05ACp8300d010DdcFFdscFFdpFFicFFiscFFipFF"
declare -x OLDPWD
declare -x PRODUCT="5ac/8300/10d"
declare -x PWD="/"
declare -x SEQNUM="1444"
declare -x SHLVL="1"
declare -x SUBSYSTEM="usb"
declare -x TYPE="255/255/255"
declare -x UDEVD_EVENT="1"
declare -x UDEV_LOG="3"

>> 4)  * Meant to use syslog/vsyslog functions (instead of g_error) to send
>> the log messages to the syslog.
> 
> If you read carefully the beginning of load.c, it overload
> g_{message,warning,error} ;). I renamed them to
> ift_{message,warning,error} to avoid confusion. ift_error uses exit(-1)
> instead of abort() as overloaded g_error() did.
> 
>>  * openlog("ift-extract", 0, LOG_SYSLOG); - That should probably be
>> something like:
>>
>> openlog("ift-load", LOG_PERROR, LOG_USER);
> 
> Fixed, thanks.
> 
> 
> I produce a 0.5.1 bugfixe release with your feedbacks. Don't hesitate to
> provide deeper info. I don't mind releasing several releases per
> weeks ;)
> 
> 
> Regards,
> ?tienne.
> 


From bersace03 at gmail.com  Tue Dec 11 16:41:38 2007
From: bersace03 at gmail.com (=?ISO-8859-1?Q?=C9tienne?= Bersac)
Date: Tue, 11 Dec 2007 16:41:38 +0100
Subject: [Linux-uvc-devel] Built-in iSight Firmware Tools
In-Reply-To: <475DFD3E.7010703@i-nz.net>
References: <1197130591.6842.32.camel@thilivren>
	<1197227870.10167.28.camel@thilivren>  <475DDC93.7020204@i-nz.net>
	<1197337224.15974.20.camel@thilivren>  <475DFD3E.7010703@i-nz.net>
Message-ID: <1197387698.6785.3.camel@thilivren>

Hi,

> > Is it a bug of permissions or ownership ?
> 
> Ownership.

What do you get ? What do you expect ?

> Please apologies me for the confusion. I meant the following snippet
> from isight.rules.in:
> 
> RUN+="@prefix@/lib/udev/ift-load -f /lib/firmware/isight.fw"
> 
> becomes (with --prefix=/) :
> 
> RUN+="//lib/udev/ift-load -f /lib/firmware/isight.fw"

This is the awaited behaviour. What do you expect ?


> Firstly in order to make the udev rule to get executed I had to change
> SUBSYSTEM=="usb_device" to "usb". "usb_device" seems deprecated. As you
> can see there is no USB_DEV nor USB_BUS here:
> 
> declare -x ACTION="add"
> declare -x DEVICE="/proc/bus/usb/005/003"
> declare -x DEVPATH="/devices/pci0000:00/0000:00:1d.7/usb5/5-4/5-4:1.0"
> declare -x DEVTYPE="usb_interface"
> declare -x INTERFACE="255/255/255"
> declare -x MODALIAS="usb:v05ACp8300d010DdcFFdscFFdpFFicFFiscFFipFF"
> declare -x OLDPWD
> declare -x PRODUCT="5ac/8300/10d"
> declare -x PWD="/"
> declare -x SEQNUM="1444"
> declare -x SHLVL="1"
> declare -x SUBSYSTEM="usb"
> declare -x TYPE="255/255/255"
> declare -x UDEVD_EVENT="1"
> declare -x UDEV_LOG="3"

Which version of udev do you use ?

Regards,
?tienne.



From contact at i-nz.net  Tue Dec 11 16:49:46 2007
From: contact at i-nz.net (Ivan N. Zlatev)
Date: Tue, 11 Dec 2007 15:49:46 +0000
Subject: [Linux-uvc-devel] Built-in iSight Firmware Tools
In-Reply-To: <1197387698.6785.3.camel@thilivren>
References: <1197130591.6842.32.camel@thilivren>	
	<1197227870.10167.28.camel@thilivren> <475DDC93.7020204@i-nz.net>	
	<1197337224.15974.20.camel@thilivren>
	<475DFD3E.7010703@i-nz.net> <1197387698.6785.3.camel@thilivren>
Message-ID: <475EB19A.4020405@i-nz.net>

?tienne Bersac wrote:
> Hi,
> 
>>> Is it a bug of permissions or ownership ?
>> Ownership.
> 
> What do you get ? What do you expect ?
> 

Seems I was too tired yesterday. False alarm, everything is fine.

>> Please apologies me for the confusion. I meant the following snippet
>> from isight.rules.in:
>>
>> RUN+="@prefix@/lib/udev/ift-load -f /lib/firmware/isight.fw"
>>
>> becomes (with --prefix=/) :
>>
>> RUN+="//lib/udev/ift-load -f /lib/firmware/isight.fw"
> 
> This is the awaited behaviour. What do you expect ?
> 

Well merely a cosmetic thing; note the double "//" in the path above.
Should probably be:

RUN+="/lib/udev/ift-load ...

> 
>> Firstly in order to make the udev rule to get executed I had to change
>> SUBSYSTEM=="usb_device" to "usb". "usb_device" seems deprecated. As you
>> can see there is no USB_DEV nor USB_BUS here:
>>
>> declare -x ACTION="add"
>> declare -x DEVICE="/proc/bus/usb/005/003"
>> declare -x DEVPATH="/devices/pci0000:00/0000:00:1d.7/usb5/5-4/5-4:1.0"
>> declare -x DEVTYPE="usb_interface"
>> declare -x INTERFACE="255/255/255"
>> declare -x MODALIAS="usb:v05ACp8300d010DdcFFdscFFdpFFicFFiscFFipFF"
>> declare -x OLDPWD
>> declare -x PRODUCT="5ac/8300/10d"
>> declare -x PWD="/"
>> declare -x SEQNUM="1444"
>> declare -x SHLVL="1"
>> declare -x SUBSYSTEM="usb"
>> declare -x TYPE="255/255/255"
>> declare -x UDEVD_EVENT="1"
>> declare -x UDEV_LOG="3"
> 
> Which version of udev do you use ?
> 

Version 114


From bersace03 at gmail.com  Tue Dec 11 17:35:31 2007
From: bersace03 at gmail.com (=?ISO-8859-1?Q?=C9tienne?= Bersac)
Date: Tue, 11 Dec 2007 17:35:31 +0100
Subject: [Linux-uvc-devel] Built-in iSight Firmware Tools
In-Reply-To: <475EB19A.4020405@i-nz.net>
References: <1197130591.6842.32.camel@thilivren>
	<1197227870.10167.28.camel@thilivren>  <475DDC93.7020204@i-nz.net>
	<1197337224.15974.20.camel@thilivren>  <475DFD3E.7010703@i-nz.net>
	<1197387698.6785.3.camel@thilivren>  <475EB19A.4020405@i-nz.net>
Message-ID: <1197390931.6785.9.camel@thilivren>

Hi,

> >> Firstly in order to make the udev rule to get executed I had to change
> >> SUBSYSTEM=="usb_device" to "usb". "usb_device" seems deprecated. As you
> >> can see there is no USB_DEV nor USB_BUS here:
> Version 114

Ok, i have only 113 at home (gutsy/hardy). Please fix this for udev 114
and send me the patch. I setted up a bzr repos at
http://launchpad.net/isight-firmware-tools/ , sadly, i lost the lock and
can't push anymore :/ (f*** bzr).

Anyway, i publised a 0.5.1.1 at http://bersace03.free.fr/ift/

?tienne.



From contact at i-nz.net  Tue Dec 11 19:16:02 2007
From: contact at i-nz.net (Ivan N. Zlatev)
Date: Tue, 11 Dec 2007 18:16:02 +0000
Subject: [Linux-uvc-devel] Built-in iSight Firmware Tools
In-Reply-To: <1197390931.6785.9.camel@thilivren>
References: <1197130591.6842.32.camel@thilivren>	
	<1197227870.10167.28.camel@thilivren> <475DDC93.7020204@i-nz.net>	
	<1197337224.15974.20.camel@thilivren> <475DFD3E.7010703@i-nz.net>	
	<1197387698.6785.3.camel@thilivren> <475EB19A.4020405@i-nz.net>
	<1197390931.6785.9.camel@thilivren>
Message-ID: <475ED3E2.9020908@i-nz.net>

?tienne Bersac wrote:
> Hi,
> 
>>>> Firstly in order to make the udev rule to get executed I had to change
>>>> SUBSYSTEM=="usb_device" to "usb". "usb_device" seems deprecated. As you
>>>> can see there is no USB_DEV nor USB_BUS here:
>> Version 114
> 
> Ok, i have only 113 at home (gutsy/hardy). Please fix this for udev 114
> and send me the patch. 

The udev rule cannot be fixed. After a bit of research I found out that
the USB_DEV and USB_BUS are exported by /lib/udev/usb_device_name which
is a Ubuntu specific patch to udev (also a specific Ubuntu rule that
invokes that tool). I recommend you revert to a ift-load version where
you find the isight usb device on the basis of the vendor and device Id
and get rid of the bus/dev code.

Regards,
Ivan


From bersace03 at gmail.com  Tue Dec 11 20:33:39 2007
From: bersace03 at gmail.com (=?ISO-8859-1?Q?=C9tienne?= Bersac)
Date: Tue, 11 Dec 2007 20:33:39 +0100
Subject: [Linux-uvc-devel] Built-in iSight Firmware Tools
In-Reply-To: <475ED3E2.9020908@i-nz.net>
References: <1197130591.6842.32.camel@thilivren>
	<1197227870.10167.28.camel@thilivren>  <475DDC93.7020204@i-nz.net>
	<1197337224.15974.20.camel@thilivren>  <475DFD3E.7010703@i-nz.net>
	<1197387698.6785.3.camel@thilivren>  <475EB19A.4020405@i-nz.net>
	<1197390931.6785.9.camel@thilivren>  <475ED3E2.9020908@i-nz.net>
Message-ID: <1197401619.6785.14.camel@thilivren>

Hi,

Seems that you don't have SYSFS attr either. Can you try to write a rule
which append options to ift-load from var. udev does not export all the
data is has. Try something like ENV{USB_BUS}=SYSFS{busId} or similar.

I'll try something later, but i don't want to probe anymore. I'll try to
bridge libusb and devpath or drop libusb (like fxload).

Regards,
?tienne.



From laurent.pinchart at skynet.be  Tue Dec 11 23:35:40 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 11 Dec 2007 23:35:40 +0100
Subject: [Linux-uvc-devel] [SVN] iSight support
Message-ID: <200712112335.41024.laurent.pinchart@skynet.be>

Hi everybody,

it's been a long time since the last SVN commit announcement. Most recent 
commits were too small improvements to be officially announced on the list. 
Today's commit is different: the Linux UVC driver now supports the built-in 
iSight cameras.

iSight support in the driver doesn't include firmware loading. You will need 
the ift-extract and ift-load userspace tools to extract the firmware from the 
MacOS X driver (we can't redistribute it for obvious legal reasons) and to 
load the firmware to the device. Those tools can be found at 
http://bersace03.free.fr/ift/

Thanks to ?tienne Bersac for working on iSight support and getting the patch 
and userspace tools in shape. Thanks also to Ronald Bultje and Ivan Zlatev 
for reverse-engineering the iSight proprietary video transmission protocol 
and working on the first versions of the patch.

Have fun.

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Dec 11 23:41:01 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 11 Dec 2007 23:41:01 +0100
Subject: [Linux-uvc-devel] Question about contant define numbers...
In-Reply-To: <a81f87bb0712101411p464dfc67u34d2654b318e58ad@mail.gmail.com>
References: <a81f87bb0712101411p464dfc67u34d2654b318e58ad@mail.gmail.com>
Message-ID: <200712112341.01258.laurent.pinchart@skynet.be>

Hi Brian,

On Monday 10 December 2007, Brian Pin wrote:
> Hi, I am sorry if this is stupid..but I want to ask:
>
> 1. why are we set UVC_MAX_ISO_PACKETS to 40?
> 2. why UVC_URBS set to 5

This is very far from stupid. Those constants are arbitrary. 
UVC_MAX_ISO_PACKETS and UVC_URBS need to be big enough so that host-side 
latencies will not result in buffer overruns in the camera, while being small 
enough not to use too much of the host memory.

UVC_MAX_ISO_PACKETS comes from another driver (although I don't remember which 
one). UVC_URBS was just a guess, and I found the value to be an acceptable 
tradeoff on regular desktops.

For embedded platforms, you might want to decrease those values if memory is 
an issue. Interrupt latency will then need to be low enough or parts of the 
video frames will be missing.

For desktops with plenty of memory but with high interrupt latencies, the 
values could even be raised. Raising UVC_MAX_ISO_PACKETS will introduce a 
bigger latency in the video stream but might put less pressure on the USB 
controller than raising UVC_URBS (I'm not 100% sure about this).

Best regards,

Laurent Pinchart


From contact at i-nz.net  Tue Dec 11 23:54:57 2007
From: contact at i-nz.net (Ivan N. Zlatev)
Date: Tue, 11 Dec 2007 22:54:57 +0000
Subject: [Linux-uvc-devel] [SVN] iSight support
In-Reply-To: <200712112335.41024.laurent.pinchart@skynet.be>
References: <200712112335.41024.laurent.pinchart@skynet.be>
Message-ID: <475F1541.9060908@i-nz.net>

Laurent Pinchart wrote:
> iSight support in the driver doesn't include firmware loading. You will need 
> the ift-extract and ift-load userspace tools to extract the firmware from the 
> MacOS X driver (we can't redistribute it for obvious legal reasons) and to 
> load the firmware to the device. Those tools can be found at 
> http://bersace03.free.fr/ift/
> 

I just wanted to note that currently the automatic loading of the
firmware at boot time only works on Ubuntu and derivatives, because of
the ubuntu-specific udev rule <-> ift-load interaction. This should be
fixed in the 0.6 release I hope. Also as soon as this is fixed I will
build openSUSE RPMs and post a link in case someone needs them.

> Thanks to ?tienne Bersac for working on iSight support and getting the patch 
> and userspace tools in shape. Thanks also to Ronald Bultje and Ivan Zlatev 
> for reverse-engineering the iSight proprietary video transmission protocol 
> and working on the first versions of the patch.
> 

Thank you all for your time, effort and help!

Regards,
Ivan Zlatev


From felix at derklecks.de  Wed Dec 12 00:47:53 2007
From: felix at derklecks.de (=?UTF-8?B?RmVsaXggTcO2bGxlcg==?=)
Date: Wed, 12 Dec 2007 00:47:53 +0100
Subject: [Linux-uvc-devel] [SVN] iSight support
In-Reply-To: <200712112335.41024.laurent.pinchart@skynet.be>
References: <200712112335.41024.laurent.pinchart@skynet.be>
Message-ID: <475F21A9.10905@derklecks.de>

Hi,
> it's been a long time since the last SVN commit announcement. Most recent 
> commits were too small improvements to be officially announced on the list. 
> Today's commit is different: the Linux UVC driver now supports the built-in 
> iSight cameras.
thanks alot!

The firmware loading does not work for me yet on openSUSE 11.0 alpha0
(udev udev-117-6) as Ivan noted.

As everybody seems to be playing with Skype. I just tried it and it
seems to work with current Skype. I did not work for me a few weeks ago ...

Thanks!

Felix M?ller


From lambros at lambrou.net  Wed Dec 12 00:45:38 2007
From: lambros at lambrou.net (Lambros Lambrou)
Date: Tue, 11 Dec 2007 23:45:38 +0000
Subject: [Linux-uvc-devel] OmniVision webcam, error -45
Message-ID: <1197416739.8233.40.camel@ll-laptop>

Dear all,

I have a Dell Inspiron 1720 laptop, running Ubuntu 7.10, x86_64.  The
webcam, according to 'lsusb' is:

05a9:2640 OmniVision Technologies, Inc.

My problem is, the webcam appears to work fine for about 1 minute, and
then the picture freezes.  I have tested this using Ekiga, skype (beta
version 2.0.0.27), luvcview and gstreamer-properties.  In all
applications except Ekiga, the camera functions for about 1 minute then
the picture is frozen, until I restart the test, when the camera runs
for a further 1 minute.. ad nauseam.  With Ekiga, all tests seem to run
fine, until I attempt an actual VoIP call with a real person, when the
video and sound are garbled, and the application becomes generally
unstable, with random segfaults (see
https://bugs.launchpad.net/ubuntu/+source/ekiga/+bug/164942 ).

I have tried the latest uvcvideo driver from the SVN trunk (revision
151) but the behaviour is no different.  I have also tried various
patches that I found, with no luck (either the patches failed to apply,
or there was no difference in behaviour).

Whenever the problem occurs, I always get this in my 'dmesg' output:
[ 6045.133998] uvcvideo: Failed to resubmit video URB (-45).
[ 6045.134047] uvcvideo: Failed to resubmit video URB (-45).
[ 6045.134088] uvcvideo: Failed to resubmit video URB (-45).
[ 6045.134131] uvcvideo: Failed to resubmit video URB (-45).

I get the same diagnostics if I use 'trace=15' when loading the module -
it doesn't seem to give any more information (I use the command 'sudo
modprobe uvcvideo trace=15').  Would I need to configure
'CONFIG_USB_DEBUG=y' to get more helpful debug information?  Would I
need to recompile the Ubuntu kernel to do this?

I notice that the problem is not permanent.  In Skype, I can simply stop
and start my video to get the camera running for another minute or so.
Is there some way I could modify the driver to automatically reset the
device when this error-condition occurs?  Obviously this wouldn't be a
proper solution, but it would meet my needs.

I have tried modifying the driver, to resubmit the video URB when the
particular error-code "-45" is returned.  This does not help - it simply
fails again with the same error code.

>From looking around the 'net, it appears that -45 refers to -EL2NSYNC,
which is reportedly only used by ehci_hcd, and is perhaps audio-related.
I disabled my audio driver "snd_hda_intel", but this did not help.

Would it be helpful for me to try the 32-bit version of Ubuntu instead
of the 64-bit version?  I don't want to try this if it would be wasted
effort.

I did some searching on the "OmniVision" webcam but I could find very
little information.  By all accounts, this camera is supposed to work
perfectly with Free Software (but sadly, not for me).  It is built into
the screen of my laptop, so I really would like to get it working,
instead of just buying another cheap webcam to plug into the side.

Any help debugging this would be much appreciated.  Please let me know
what further info would be useful.

Many thanks,
Lambros




From bersace03 at gmail.com  Wed Dec 12 04:39:55 2007
From: bersace03 at gmail.com (=?ISO-8859-1?Q?=C9tienne?= Bersac)
Date: Wed, 12 Dec 2007 04:39:55 +0100
Subject: [Linux-uvc-devel] [SVN] iSight support
In-Reply-To: <475F1541.9060908@i-nz.net>
References: <200712112335.41024.laurent.pinchart@skynet.be>
	<475F1541.9060908@i-nz.net>
Message-ID: <1197430795.18325.4.camel@thilivren>

Hi,

> This should be fixed in the 0.6 release I hope.

I second this. Ubuntu users can get a package for i386 and amd64 on my
PPA : http://launchpad.net/~bersace/+archive for gutsy. I'll try to get
0.6 ready in the following days.

Regards,
?tienne.



From laurent.pinchart at skynet.be  Wed Dec 12 23:20:32 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 12 Dec 2007 23:20:32 +0100
Subject: [Linux-uvc-devel] OmniVision webcam, error -45
In-Reply-To: <1197416739.8233.40.camel@ll-laptop>
References: <1197416739.8233.40.camel@ll-laptop>
Message-ID: <200712122320.32115.laurent.pinchart@skynet.be>

Hi Lambros,

On Wednesday 12 December 2007, Lambros Lambrou wrote:
> Dear all,
>
> I have a Dell Inspiron 1720 laptop, running Ubuntu 7.10, x86_64.  The
> webcam, according to 'lsusb' is:
>
> 05a9:2640 OmniVision Technologies, Inc.
>
> My problem is, the webcam appears to work fine for about 1 minute, and
> then the picture freezes.  I have tested this using Ekiga, skype (beta
> version 2.0.0.27), luvcview and gstreamer-properties.  In all
> applications except Ekiga, the camera functions for about 1 minute then
> the picture is frozen, until I restart the test, when the camera runs
> for a further 1 minute.. ad nauseam.  With Ekiga, all tests seem to run
> fine, until I attempt an actual VoIP call with a real person, when the
> video and sound are garbled, and the application becomes generally
> unstable, with random segfaults (see
> https://bugs.launchpad.net/ubuntu/+source/ekiga/+bug/164942 ).
>
> I have tried the latest uvcvideo driver from the SVN trunk (revision
> 151) but the behaviour is no different.  I have also tried various
> patches that I found, with no luck (either the patches failed to apply,
> or there was no difference in behaviour).
>
> Whenever the problem occurs, I always get this in my 'dmesg' output:
> [ 6045.133998] uvcvideo: Failed to resubmit video URB (-45).
> [ 6045.134047] uvcvideo: Failed to resubmit video URB (-45).
> [ 6045.134088] uvcvideo: Failed to resubmit video URB (-45).
> [ 6045.134131] uvcvideo: Failed to resubmit video URB (-45).

I don't like that :-(

> I get the same diagnostics if I use 'trace=15' when loading the module -
> it doesn't seem to give any more information (I use the command 'sudo
> modprobe uvcvideo trace=15').  Would I need to configure
> 'CONFIG_USB_DEBUG=y' to get more helpful debug information?  Would I
> need to recompile the Ubuntu kernel to do this?

I don't think CONFIG_USB_DEBUG would help, except maybe by slowing the kernel 
down a bit. You will have to recompile the Ubuntu kernel, or at least the USB 
modules if the USB subsystem is built as a module.

> I notice that the problem is not permanent.  In Skype, I can simply stop
> and start my video to get the camera running for another minute or so.
> Is there some way I could modify the driver to automatically reset the
> device when this error-condition occurs?  Obviously this wouldn't be a
> proper solution, but it would meet my needs.
>
> I have tried modifying the driver, to resubmit the video URB when the
> particular error-code "-45" is returned.  This does not help - it simply
> fails again with the same error code.

Was worth a shot as a workaround.

> From looking around the 'net, it appears that -45 refers to -EL2NSYNC,
> which is reportedly only used by ehci_hcd, and is perhaps audio-related.
> I disabled my audio driver "snd_hda_intel", but this did not help.

EL2NSYNC is returned by the EHCI HCD driver when it has trouble scheduling an 
isochronous URB. I'm not sure if this is caused by a wrong behaviour of the 
uvcvideo driver or by a bug in the ehci_hcd driver itself.

> Would it be helpful for me to try the 32-bit version of Ubuntu instead
> of the 64-bit version?  I don't want to try this if it would be wasted
> effort.

I doubt it would help, but that's always worth a shot if everything else 
fails.

> I did some searching on the "OmniVision" webcam but I could find very
> little information.  By all accounts, this camera is supposed to work
> perfectly with Free Software (but sadly, not for me).  It is built into
> the screen of my laptop, so I really would like to get it working,
> instead of just buying another cheap webcam to plug into the side.
>
> Any help debugging this would be much appreciated.  Please let me know
> what further info would be useful.

I would start by trying a vanilla kernel instead of the Ubuntu kernel. Ubuntu 
might ship patches that affect the ehci scheduler.

If it still fails, we should raise the problem on the linux-usb mailing list 
to find out who is to blame. I don't have enough knowledge of the ehci driver 
to understand its scheduling policy.

Best regards,

Laurent Pinchart


From brandon at ifup.org  Thu Dec 13 02:59:19 2007
From: brandon at ifup.org (Brandon Philips)
Date: Wed, 12 Dec 2007 17:59:19 -0800
Subject: [Linux-uvc-devel] [PATCH] uvcvideo: usb power management
Message-ID: <20071213015919.GD530@ifup.org>

This patch enables usb power management in the UVC driver.  As cameras
are built into more and more modern laptops it is important that we get
power management for them working.

How-to Test
-----------
0. Apply and recompile with CONFIG_USB_DEBUG
1. Plug in the camera
2. rmmod usb-snd-audio # no pm in usb-snd-audio yet and many cameras
   have a mic
3. Locate the device with lsusb
4. Go to its sysfs directory
5. echo "auto" > power/level
6. wait for messages about the device and its root hub being suspended
   in syslog. It'll take a few seconds

Signed-off-by: Oliver Neukum <oliver at neukum.org>
Reviewed-by: Brandon Philips <bphilips at suse.de>

---
 uvc_driver.c |    7 ++++++-
 uvc_v4l2.c   |    6 ++++++
 2 files changed, 12 insertions(+), 1 deletion(-)

Index: uvc/uvc_v4l2.c
===================================================================
--- uvc.orig/uvc_v4l2.c
+++ uvc/uvc_v4l2.c
@@ -413,10 +413,15 @@ static int uvc_v4l2_open(struct inode *i
 		goto done;
 	}
 
+	ret = usb_autopm_get_interface(video->dev->intf);
+	if (ret < 0)
+		goto done;
+
 	/* Create the device handle. */
 	handle = kzalloc(sizeof *handle, GFP_KERNEL);
 	if (handle == NULL) {
 		ret = -ENOMEM;
+		usb_autopm_put_interface(video->dev->intf);
 		goto done;
 	}
 
@@ -455,6 +460,7 @@ static int uvc_v4l2_release(struct inode
 	kfree(handle);
 	file->private_data = NULL;
 
+	usb_autopm_put_interface(video->dev->intf);
 	kref_put(&video->dev->kref, uvc_delete);
 	return 0;
 }
Index: uvc/uvc_driver.c
===================================================================
--- uvc.orig/uvc_driver.c
+++ uvc/uvc_driver.c
@@ -678,8 +678,10 @@ static int uvc_parse_streaming(struct uv
 			format->frame = frame;
 			ret = uvc_parse_format(dev, streaming, format,
 				&interval, buffer, buflen);
-			if (ret < 0)
+			if (ret < 0) {
+				kfree(format);
 				return ret;
+			}
 
 			frame += format->nframes;
 			format++;
@@ -1605,6 +1607,8 @@ static int uvc_suspend(struct usb_interf
 	uvc_trace(UVC_TRACE_SUSPEND, "Suspending interface %u\n",
 		intf->cur_altsetting->desc.bInterfaceNumber);
 
+	usb_kill_urb(dev->int_urb);
+
 	/* Controls are cached on the fly so they don't need to be saved. */
 	if (intf->cur_altsetting->desc.bInterfaceSubClass == SC_VIDEOCONTROL)
 		return 0;
@@ -1809,6 +1813,7 @@ struct uvc_driver uvc_driver = {
 		.suspend	= uvc_suspend,
 		.resume		= uvc_resume,
 		.id_table	= uvc_ids,
+		.supports_autosuspend = 1,
 	},
 };
 


From shaohuang at gmail.com  Thu Dec 13 03:01:06 2007
From: shaohuang at gmail.com (Brian Pin)
Date: Wed, 12 Dec 2007 18:01:06 -0800
Subject: [Linux-uvc-devel] bulk or isoc?
Message-ID: <a81f87bb0712121801l2cca7e5arb9400ca0e5bfed32@mail.gmail.com>

Hi,
recently I look into Microsoft LifeCam NX-6000, I found no  bulk endpoint
exists in default interface.
That mean I am forced to use isoc pipe for the device. Is it common for UVC
devices?
Not implementing the bulk pipe and only the isoc pipe?

-- 
Best Regards
Brian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071212/d5de957e/attachment.html>

From tmbinc at elitedvb.net  Thu Dec 13 03:05:35 2007
From: tmbinc at elitedvb.net (Felix Domke)
Date: Thu, 13 Dec 2007 03:05:35 +0100
Subject: [Linux-uvc-devel] bulk or isoc?
In-Reply-To: <a81f87bb0712121801l2cca7e5arb9400ca0e5bfed32@mail.gmail.com>
References: <a81f87bb0712121801l2cca7e5arb9400ca0e5bfed32@mail.gmail.com>
Message-ID: <4760936F.3080601@elitedvb.net>

Brian Pin wrote:
> Hi,
> recently I look into Microsoft LifeCam NX-6000, I found no  bulk
> endpoint exists in default interface.
> That mean I am forced to use isoc pipe for the device. Is it common for
> UVC devices?
> Not implementing the bulk pipe and only the isoc pipe?
At least the Microsoft Xbox Live Vision camera does the same - isoc
only, even for images.

regards,
Felix


From antoniathlonnt at gmail.com  Fri Dec 14 13:51:18 2007
From: antoniathlonnt at gmail.com (Antoni Ridzki Andromeda)
Date: Fri, 14 Dec 2007 19:51:18 +0700
Subject: [Linux-uvc-devel] I can't download the binary packages or source
	codes, I neither can access though SVN
In-Reply-To: <29f464300712140442i6d99d7aak544197973c55947e@mail.gmail.com>
References: <29f464300712140442i6d99d7aak544197973c55947e@mail.gmail.com>
Message-ID: <29f464300712140451o6d3c187eic4bf344259c71d92@mail.gmail.com>

---------- Forwarded message ----------
Helo.

I'm user who have Acer Crystal Eye Webcam (SuYin), and now I hardly need it
on Linux (Fedora 8).
Please help me make it works on my Fedora, I'm tired googling all the time
and returning zero result.

Please tell me how to download the source code or any one can give me the
source code package, please.....

Thanks for your attention.

-- 
Antoni Ridzki Andromeda,
Currently student at University of Indonesia,



-- 
Antoni Ridzki Andromeda,
Currently student at University of Indonesia,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071214/f783094b/attachment.html>

From lawrence.leonard at gmail.com  Fri Dec 14 14:05:52 2007
From: lawrence.leonard at gmail.com (Lawrence Leonard)
Date: Fri, 14 Dec 2007 08:05:52 -0500
Subject: [Linux-uvc-devel] Unsupported device,
	OmniVision cam (05a9:2641) in Dell SP2008WFP Monitor
Message-ID: <4c40a1190712140505h72a977f8geac75e07710e042d@mail.gmail.com>

I am using a Dell SP2008WFP monitor with built-in OmniVision webcam and
microphone that appears to not be supported by UVC. The device id is
05a9:2641.

The Supported Devices list at http://linux-uvc.berlios.de/ lists support
for 2640. Does anyone know if development is underway to support the
2641 product?

I am currently running Ubuntu 7.10. If there are any lsusb, dmesg, etc
outputs that I should supply to document this inquiry, please let me know.

Best regards,

Lawrence Leonard


From mxhaard at magic.fr  Fri Dec 14 17:19:57 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Fri, 14 Dec 2007 17:19:57 +0100
Subject: [Linux-uvc-devel] Unsupported device,
	OmniVision cam (05a9:2641) in Dell SP2008WFP Monitor
In-Reply-To: <4c40a1190712140505h72a977f8geac75e07710e042d@mail.gmail.com>
References: <4c40a1190712140505h72a977f8geac75e07710e042d@mail.gmail.com>
Message-ID: <200712141719.57316.mxhaard@magic.fr>

Le vendredi 14 d?cembre 2007 14:05, Lawrence Leonard a ?crit?:
> I am using a Dell SP2008WFP monitor with built-in OmniVision webcam and
> microphone that appears to not be supported by UVC. The device id is
> 05a9:2641.
>
> The Supported Devices list at http://linux-uvc.berlios.de/ lists support
> for 2640. Does anyone know if development is underway to support the
> 2641 product?
>
> I am currently running Ubuntu 7.10. If there are any lsusb, dmesg, etc
> outputs that I should supply to document this inquiry, please let me know.
>
> Best regards,
>
> Lawrence Leonard

0x2641 is not a 0x2640 ;-) please provided your lsusb output
-- 
Michel Xhaard
http://mxhaard.free.fr


From laurent.pinchart at skynet.be  Sat Dec 15 12:09:22 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 15 Dec 2007 12:09:22 +0100
Subject: [Linux-uvc-devel] bulk or isoc?
In-Reply-To: <a81f87bb0712121801l2cca7e5arb9400ca0e5bfed32@mail.gmail.com>
References: <a81f87bb0712121801l2cca7e5arb9400ca0e5bfed32@mail.gmail.com>
Message-ID: <200712151209.22319.laurent.pinchart@skynet.be>

Hi Brian,

On Thursday 13 December 2007, Brian Pin wrote:
> Hi,
> recently I look into Microsoft LifeCam NX-6000, I found no  bulk endpoint
> exists in default interface.
> That mean I am forced to use isoc pipe for the device. Is it common for UVC
> devices?
> Not implementing the bulk pipe and only the isoc pipe?

The UVC spec allows devices to use either bulk or isochronous transfers. Most 
webcams went for isoc. Bulk-based UVC devices are not common.

Best regards,

Laurent Pinchart


From julian at selectparks.net  Sat Dec 15 15:32:35 2007
From: julian at selectparks.net (Julian Oliver)
Date: Sat, 15 Dec 2007 15:32:35 +0100
Subject: [Linux-uvc-devel] // Quickcam Pro 9000: slow frame rate? //
Message-ID: <20071215143235.GK4986@dropworld>


hi list,

i've installed the linux-uvc driver distribution to use with my Quickcam 
Pro 9000, from SVN, on my linux 2.6.22 kernel. 

while picture quality is excellent (for a webcam especially), i'm a bit 
disappointed with frame rate compared to my other cameras, especially in 
low-light conditions. in a well lit environment, i get around ~15 FPS while 
when the light is low, only 8-10 FPS (tested with luvcview) at 320x240.

for what it's worth, the box promised a relatively unrealistic ~30fps.

are there any plans to expose this automatic light calibration as a param 
accessible to modprobe? i'd like very much to not have this automagical 
calibration at work at all times.

cheers,

-- 
http://julianoliver.com
http://selectparks.net
emails containing HTML will not be read.




From lawrence.leonard at gmail.com  Sat Dec 15 17:36:25 2007
From: lawrence.leonard at gmail.com (Lawrence Leonard)
Date: Sat, 15 Dec 2007 11:36:25 -0500
Subject: [Linux-uvc-devel] Unsupported device,
	OmniVision cam (05a9:2641) in Dell SP2008WFP Monitor
In-Reply-To: <200712141719.57316.mxhaard@magic.fr>
References: <4c40a1190712140505h72a977f8geac75e07710e042d@mail.gmail.com>
	<200712141719.57316.mxhaard@magic.fr>
Message-ID: <4c40a1190712150836k77fa67cetd48004b263298427@mail.gmail.com>

On Dec 14, 2007 11:19 AM, Michel Xhaard <mxhaard at magic.fr> wrote:
>
> 0x2641 is not a 0x2640 ;-) please provided your lsusb output


Bus 006 Device 004: ID 05a9:2641 OmniVision Technologies, Inc.
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x05a9 OmniVision Technologies, Inc.
  idProduct          0x2641
  bcdDevice            1.00
  iManufacturer           1
  iProduct                2
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          765
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               2
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              2
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength          109
        dwClockFrequency       30.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                17
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  2
        bmControls           0x00000a00
          Zoom (Absolute)
          PanTilt (Absolute)
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               5
        iTerminal               0
      VideoControl Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      4 (SELECTOR_UNIT)
        bUnitID                 4
        bNrInPins               1
        baSource( 0)            1
        iSelector               0
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 5
        bSourceID               4
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000557f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Power Line Frequency
          White Balance Temperature, Auto
          Digital Multiplier
        iProcessing             0
        bmVideoStandards     0x1a
          NTSC - 525/60
          SECAM - 625/50
          NTSC - 625/50
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 7
        guidExtensionCode         {dd880f8a-1cba-4954-8a25-f7875967f0f7}
        bNumControl             1
        bNrPins                 1
        baSourceID( 0)          1
        bControlSize            1
        bmControls( 0)       0x01
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 6
        guidExtensionCode         {8e4af708-51ab-4625-a2a2-31aab38e59da}
        bNumControl             1
        bNrPins                 1
        baSourceID( 0)          5
        bControlSize            1
        bmControls( 0)       0x01
        iExtension              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              16
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            15
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormarts                        2
        wTotalLength                    33025
        bEndPointAddress                    0
        bmInfo                              3
        bTerminalLink                       0
        bStillCaptureMethod                 0
        bTriggerSupport                     0
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    11
        bmaControls( 1)                    11
      VideoStreaming Interface Descriptor:
        bLength                            11
        bDescriptorType                    36
        bDescriptorSubtype                  6 (FORMAT_MJPEG)
        bFormatIndex                        1
        bNumFrameDescriptors                9
        bFlags                              1
          Fixed-size samples: Yes
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                147456000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                  9216000
        dwMaxBitRate                  9216000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                 12165120
        dwMaxBitRate                 12165120
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                 36864000
        dwMaxBitRate                 36864000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                 48660480
        dwMaxBitRate                 48660480
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            800
        wHeight                           600
        dwMinBitRate                230400000
        dwMaxBitRate                230400000
        dwMaxVideoFrameBufferSize      960000
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         7
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1024
        wHeight                           768
        dwMinBitRate                 94371840
        dwMaxBitRate                 94371840
        dwMaxVideoFrameBufferSize     1572864
        dwDefaultFrameInterval        1000000
        bFrameIntervalType                  1
        dwFrameInterval( 0)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         8
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                157286400
        dwMaxBitRate                157286400
        dwMaxVideoFrameBufferSize     2621440
        dwDefaultFrameInterval        1000000
        bFrameIntervalType                  1
        dwFrameInterval( 0)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         9
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1600
        wHeight                          1200
        dwMinBitRate                230400000
        dwMaxBitRate                230400000
        dwMaxVideoFrameBufferSize     3840000
        dwDefaultFrameInterval        1000000
        bFrameIntervalType                  1
        dwFrameInterval( 0)           1000000
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        2
        bNumFrameDescriptors                5
        guidFormat
{32595559-0000-0010-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                147456000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval        1000000
        bFrameIntervalType                  1
        dwFrameInterval( 0)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                  9216000
        dwMaxBitRate                  9216000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                 12165120
        dwMaxBitRate                 12165120
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                 36864000
        dwMaxBitRate                 36864000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                 48660480
        dwMaxBitRate                 48660480
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x13fc  3x 1020 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       1 Control Device
      bFunctionProtocol       0
      iFunction               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0
      iInterface              0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           39
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             2
        wChannelConfig     0x0000
        iChannelNames           0
        iTerminal               0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               3
        iTerminal               0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 3
        bSourceID               1
        bControlSize            1
        bmaControls( 0)      0x00
        bmaControls( 1)      0x03
          Mute
          Volume
        iFeature                0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           2
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             2
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            1 Discrete
        tSamFreq[ 0]        16000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x84  EP 4 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x00
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined


From richard at 2007.atterer.net  Sat Dec 15 19:03:54 2007
From: richard at 2007.atterer.net (Richard Atterer)
Date: Sat, 15 Dec 2007 19:03:54 +0100
Subject: [Linux-uvc-devel] // Quickcam Pro 9000: slow frame rate? //
In-Reply-To: <20071215143235.GK4986@dropworld>
References: <20071215143235.GK4986@dropworld>
Message-ID: <20071215180354.GA5844@vilya>

Hi Julian,

On Sat, Dec 15, 2007 at 03:32:35PM +0100, Julian Oliver wrote:
> are there any plans to expose this automatic light calibration as a param 
> accessible to modprobe? i'd like very much to not have this automagical 
> calibration at work at all times.

This is already possible, although luvcview doesn't always behave 
deterministically for me when doing it.

In luvcview, I switch auto-exposure mode off (may require several random 
clicks on Auto Exposure On/Off), then set the exposure to some high value 
(300 seems to stand for 30 fps), then adjust the gain to get a light enough 
picture. Unfortunately, the picture may still be too dark at maximum gain 
(255), so you may also have to play with brightness and contrast.

For me, picture quality is good even with little light. With almost no 
light, just what's coming from my 2 screens, I start to see some noise 
(vertical blue/orange stripes), but the picture is still OK, if slightly 
blurry. Compliments to Logitech/Zeiss!! :-)

IMHO, it wouldn't hurt at all if the auto exposure mode were a bit less 
conservative. It would also be convenient if you could specify a minimum as 
well as a maximum framerate.

Cheers,

  Richard

BTW, changing controls is also possible with uvcdynctrl 
<http://www.quickcamteam.net/software/libwebcam/> and v4l2ucp 
<http://sourceforge.net/project/showfiles.php?group_id=146218>.
-- 
  __   _
  |_) /|  Richard Atterer     |  GnuPG key: 888354F7
  | \/?|  http://atterer.net  |  08A9 7B7D 3D13 3EF2 3D25  D157 79E6 F6DC 8883 54F7
  ? '` ?


From asmo.koskinen at arkki.info  Sat Dec 15 19:05:27 2007
From: asmo.koskinen at arkki.info (Asmo Koskinen)
Date: Sat, 15 Dec 2007 20:05:27 +0200
Subject: [Linux-uvc-devel] // Quickcam Pro 9000: slow frame rate? //
In-Reply-To: <20071215143235.GK4986@dropworld>
References: <20071215143235.GK4986@dropworld>
Message-ID: <47641767.1080203@arkki.info>

Julian Oliver kirjoitti:
> while picture quality is excellent (for a webcam especially), i'm a bit 
> disappointed with frame rate compared to my other cameras, especially in 
> low-light conditions. in a well lit environment, i get around ~15 FPS while 
> when the light is low, only 8-10 FPS (tested with luvcview) at 320x240.
>   

What you do think about this kind of quality? Same webcam.

asmok at ubuntu:~$ ffmpeg -f video4linux2 -s 352x288 -r 30 -i /dev/video0 
-an -vcodec mpeg4 out.avi
[--]
Input #0, video4linux2, from '/dev/video0':
  Duration: N/A, bitrate: 48660 kb/s
  Stream #0.0: Video: rawvideo, yuyv422, 352x288, 48660 kb/s, 30.00 fps(r)
Output #0, avi, to 'out.avi':
  Stream #0.0: Video: mpeg4, yuv420p, 352x288, q=2-31, 200 kb/s, 30.00 
fps(c)
Stream mapping:
  Stream #0.0 -> #0.0
Press [q] to stop encoding
frame=  264 q=14.6 Lsize=     641kB time=8.8 bitrate= 596.8kbits/s   
video:16kB audio:0kB global headers:0kB muxing overhead 3976.306966%
asmok at ubuntu:~$ file out.avi
out.avi: RIFF (little-endian) data, AVI, 352 x 288, 30.00 fps, video: 
FFMpeg MPEG-4
asmok at ubuntu:~$ ls -l out.avi
-rw-r--r-- 1 asmok asmok 656530 2007-12-15 19:52 out.avi
asmok at ubuntu:~$

http://www.arkki.info/howto/LogitechPro9000/out.avi

I think that is quite good...no sunlight or extra lights.

I'm not any kind of expert or developer - how I can know real fps?

Best Regards Asmo Koskinen.


From laurent.pinchart at skynet.be  Sat Dec 15 19:17:34 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 15 Dec 2007 19:17:34 +0100
Subject: [Linux-uvc-devel] [PATCH] uvcvideo: usb power management
In-Reply-To: <20071213015919.GD530@ifup.org>
References: <20071213015919.GD530@ifup.org>
Message-ID: <200712151917.34906.laurent.pinchart@skynet.be>

Hi Brandon,

On Thursday 13 December 2007, Brandon Philips wrote:
> This patch enables usb power management in the UVC driver.  As cameras
> are built into more and more modern laptops it is important that we get
> power management for them working.

Thanks for the patch. Comments inlined.

> How-to Test
> -----------
> 0. Apply and recompile with CONFIG_USB_DEBUG
> 1. Plug in the camera
> 2. rmmod usb-snd-audio # no pm in usb-snd-audio yet and many cameras
>    have a mic
> 3. Locate the device with lsusb
> 4. Go to its sysfs directory
> 5. echo "auto" > power/level
> 6. wait for messages about the device and its root hub being suspended
>    in syslog. It'll take a few seconds
>
> Signed-off-by: Oliver Neukum <oliver at neukum.org>
> Reviewed-by: Brandon Philips <bphilips at suse.de>
>
> ---
>  uvc_driver.c |    7 ++++++-
>  uvc_v4l2.c   |    6 ++++++
>  2 files changed, 12 insertions(+), 1 deletion(-)
>
> Index: uvc/uvc_v4l2.c
> ===================================================================
> --- uvc.orig/uvc_v4l2.c
> +++ uvc/uvc_v4l2.c
> @@ -413,10 +413,15 @@ static int uvc_v4l2_open(struct inode *i
>  		goto done;
>  	}
>
> +	ret = usb_autopm_get_interface(video->dev->intf);
> +	if (ret < 0)
> +		goto done;
> +
>  	/* Create the device handle. */
>  	handle = kzalloc(sizeof *handle, GFP_KERNEL);
>  	if (handle == NULL) {
>  		ret = -ENOMEM;
> +		usb_autopm_put_interface(video->dev->intf);
>  		goto done;
>  	}
>
> @@ -455,6 +460,7 @@ static int uvc_v4l2_release(struct inode
>  	kfree(handle);
>  	file->private_data = NULL;
>
> +	usb_autopm_put_interface(video->dev->intf);
>  	kref_put(&video->dev->kref, uvc_delete);
>  	return 0;
>  }

Is autosuspend interface-based or device-based ? If I understand things 
correctly, a device won't be autosuspended as long as at least one of its 
interfaces have a PM counter greater than 0. In that case incrementing the PM 
counter for the control interface should be enough, there's no need to 
increment the streaming interface PM counter. Am I right ?

> Index: uvc/uvc_driver.c
> ===================================================================
> --- uvc.orig/uvc_driver.c
> +++ uvc/uvc_driver.c
> @@ -678,8 +678,10 @@ static int uvc_parse_streaming(struct uv
>  			format->frame = frame;
>  			ret = uvc_parse_format(dev, streaming, format,
>  				&interval, buffer, buflen);
> -			if (ret < 0)
> +			if (ret < 0) {
> +				kfree(format);
>  				return ret;
> +			}

Are you sure about this ? format is freed in uvc_delete().

>  			frame += format->nframes;
>  			format++;
> @@ -1605,6 +1607,8 @@ static int uvc_suspend(struct usb_interf
>  	uvc_trace(UVC_TRACE_SUSPEND, "Suspending interface %u\n",
>  		intf->cur_altsetting->desc.bInterfaceNumber);
>
> +	usb_kill_urb(dev->int_urb);
> +

The URB should be resubmitted on resume. I'll take care of this.

>  	/* Controls are cached on the fly so they don't need to be saved. */
>  	if (intf->cur_altsetting->desc.bInterfaceSubClass == SC_VIDEOCONTROL)
>  		return 0;
> @@ -1809,6 +1813,7 @@ struct uvc_driver uvc_driver = {
>  		.suspend	= uvc_suspend,
>  		.resume		= uvc_resume,
>  		.id_table	= uvc_ids,
> +		.supports_autosuspend = 1,
>  	},
>  };

What about devices that don't implement suspend properly ? Do I need some kind 
of quirk for them ?

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Dec 15 19:20:19 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 15 Dec 2007 19:20:19 +0100
Subject: [Linux-uvc-devel] I can't download the binary packages or
	source codes, I neither can access though SVN
In-Reply-To: <29f464300712140451o6d3c187eic4bf344259c71d92@mail.gmail.com>
References: <29f464300712140442i6d99d7aak544197973c55947e@mail.gmail.com>
	<29f464300712140451o6d3c187eic4bf344259c71d92@mail.gmail.com>
Message-ID: <200712151920.20096.laurent.pinchart@skynet.be>

Hi Antoni,

On Friday 14 December 2007, Antoni Ridzki Andromeda wrote:
> ---------- Forwarded message ----------
> Helo.
>
> I'm user who have Acer Crystal Eye Webcam (SuYin), and now I hardly need it
> on Linux (Fedora 8).
> Please help me make it works on my Fedora, I'm tired googling all the time
> and returning zero result.
>
> Please tell me how to download the source code or any one can give me the
> source code package, please.....

There is currently no source package, the sources are available through SVN 
only. Do you have trouble following the instructions on the website, or is 
SVN access impossible for you for some reason ?

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Dec 15 19:25:18 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 15 Dec 2007 19:25:18 +0100
Subject: [Linux-uvc-devel] Unsupported device,
	OmniVision cam (05a9:2641) in Dell SP2008WFP Monitor
In-Reply-To: <4c40a1190712150836k77fa67cetd48004b263298427@mail.gmail.com>
References: <4c40a1190712140505h72a977f8geac75e07710e042d@mail.gmail.com>
	<200712141719.57316.mxhaard@magic.fr>
	<4c40a1190712150836k77fa67cetd48004b263298427@mail.gmail.com>
Message-ID: <200712151925.19135.laurent.pinchart@skynet.be>

Hi Lawrence,

On Saturday 15 December 2007, Lawrence Leonard wrote:
> On Dec 14, 2007 11:19 AM, Michel Xhaard <mxhaard at magic.fr> wrote:
> > 0x2641 is not a 0x2640 ;-) please provided your lsusb output
>
> Bus 006 Device 004: ID 05a9:2641 OmniVision Technologies, Inc.
[snip]

Thanks for the information.

Your device should be supported out of the box. Have you tried the driver ? Be 
aware that it uses V4L2 and doesn't support the outdated and deprecated V4L1 
API. Applications that implement V4L1 support only won't work. Ekiga, aMsn, 
ucview, luvcview, ... should all work. If they don't, please check the kernel 
log for error messages and report them here.

Best regards,

Laurent Pinchart


From asmo.koskinen at arkki.info  Sat Dec 15 19:37:49 2007
From: asmo.koskinen at arkki.info (Asmo Koskinen)
Date: Sat, 15 Dec 2007 20:37:49 +0200
Subject: [Linux-uvc-devel] // Quickcam Pro 9000: slow frame rate? //
In-Reply-To: <47641767.1080203@arkki.info>
References: <20071215143235.GK4986@dropworld> <47641767.1080203@arkki.info>
Message-ID: <47641EFD.8050207@arkki.info>

Asmo Koskinen kirjoitti:
> http://www.arkki.info/howto/LogitechPro9000/out.avi

asmok at ubuntu:~$ ffmpeg -i out.avi -r 29.97 out2.avi

btw - this is a great little helper:

http://oggconvert.tristanb.net/

http://www.arkki.info/howto/LogitechPro9000/out.ogg (out2.avi)

Best Regards Asmo Koskinen.


From julian at selectparks.net  Sat Dec 15 19:28:53 2007
From: julian at selectparks.net (Julian Oliver)
Date: Sat, 15 Dec 2007 19:28:53 +0100
Subject: [Linux-uvc-devel] // Quickcam Pro 9000: slow frame rate? //
In-Reply-To: <20071215180354.GA5844@vilya>
References: <20071215143235.GK4986@dropworld> <20071215180354.GA5844@vilya>
Message-ID: <20071215182853.GO4986@dropworld>

..on or around Sat, Dec 15, 2007 at 07:03:54PM +0100, Richard Atterer said:
> 
> On Sat, Dec 15, 2007 at 03:32:35PM +0100, Julian Oliver wrote:
> > are there any plans to expose this automatic light calibration as a param 
> > accessible to modprobe? i'd like very much to not have this automagical 
> > calibration at work at all times.
> 
> This is already possible, although luvcview doesn't always behave 
> deterministically for me when doing it.
> 
> In luvcview, I switch auto-exposure mode off (may require several random 
> clicks on Auto Exposure On/Off), then set the exposure to some high value 
> (300 seems to stand for 30 fps), then adjust the gain to get a light enough 
> picture. Unfortunately, the picture may still be too dark at maximum gain 
> (255), so you may also have to play with brightness and contrast.
> 

this is great, thanks: after several random clicks Auto Exposure is set to off. 
however, i don't seem to have much luck with changing the Exposure rate
itself in luvcview. i get this error output:

  max 10000, min 1, step 1, default 166 ,current 81 
  ioctl set control error
  Set Absolute Exposure up error

> For me, picture quality is good even with little light. With almost no 
> light, just what's coming from my 2 screens, I start to see some noise 
> (vertical blue/orange stripes), but the picture is still OK, if slightly 
> blurry. Compliments to Logitech/Zeiss!! :-)

truly.. i'm working on a large computer vision project currently: this camera 
has better picture quality than some of the comparitively expensive firewire 
cameras i've played with (and at 960x720 it's quite a find).

> 
> IMHO, it wouldn't hurt at all if the auto exposure mode were a bit less 
> conservative. It would also be convenient if you could specify a minimum as 
> well as a maximum framerate.

agreed, this would be good..
> 
> BTW, changing controls is also possible with uvcdynctrl 
> <http://www.quickcamteam.net/software/libwebcam/> and v4l2ucp 
> <http://sourceforge.net/project/showfiles.php?group_id=146218>.

i'll try uvcdynctrl now to see if this allows me to manipulate the
capture rate.

thanks again,

-- 
http://julianoliver.com
http://selectparks.net
emails containing HTML will not be read.




From julian at selectparks.net  Sat Dec 15 19:52:48 2007
From: julian at selectparks.net (Julian Oliver)
Date: Sat, 15 Dec 2007 19:52:48 +0100
Subject: [Linux-uvc-devel] // Quickcam Pro 9000: slow frame rate? //
In-Reply-To: <20071215180354.GA5844@vilya>
References: <20071215143235.GK4986@dropworld> <20071215180354.GA5844@vilya>
Message-ID: <20071215185247.GA2966@dropworld>

hi Richard,

..on or around Sat, Dec 15, 2007 at 07:03:54PM +0100, Richard Atterer said:
> 
> BTW, changing controls is also possible with uvcdynctrl 
> <http://www.quickcamteam.net/software/libwebcam/> and v4l2ucp 
> <http://sourceforge.net/project/showfiles.php?group_id=146218>.

it seems the controls i can't set with luvcview can't be set with uvcdynctrl 
either. thankfully, the latter has slightly more useful output:

  [~/downloads/libwebcam-0.1/Apps/uvcdynctrl]./uvcdynctrl --set="Exposure (Absolute)" 300
  ERROR: Unable to set new control value: A Video4Linux2 API call returned an unexpected error (12)

out of interest, what version of Linux are you running? i'm on Debian's stock 2.6.22-i686 here..

cheers,

-- 
http://julianoliver.com
http://selectparks.net
emails containing HTML will not be read.




From julian at selectparks.net  Sat Dec 15 20:16:29 2007
From: julian at selectparks.net (Julian Oliver)
Date: Sat, 15 Dec 2007 20:16:29 +0100
Subject: [Linux-uvc-devel] // Quickcam Pro 9000: slow frame rate? //
In-Reply-To: <20071215185247.GA2966@dropworld>
References: <20071215143235.GK4986@dropworld> <20071215180354.GA5844@vilya>
	<20071215185247.GA2966@dropworld>
Message-ID: <20071215191629.GB2966@dropworld>

hi Richard,

ignore that last email. it seems that once i turn off Auto Exposure i
can then set Absolute Exposure as i wish using uvcdynctrl. 

i should've guessed..

cheers,

julian

..on or around Sat, Dec 15, 2007 at 07:52:48PM +0100, Julian Oliver said:
> hi Richard,
> 
> ..on or around Sat, Dec 15, 2007 at 07:03:54PM +0100, Richard Atterer said:
> > 
> > BTW, changing controls is also possible with uvcdynctrl 
> > <http://www.quickcamteam.net/software/libwebcam/> and v4l2ucp 
> > <http://sourceforge.net/project/showfiles.php?group_id=146218>.
> 
> it seems the controls i can't set with luvcview can't be set with uvcdynctrl 
> either. thankfully, the latter has slightly more useful output:
> 
>   [~/downloads/libwebcam-0.1/Apps/uvcdynctrl]./uvcdynctrl --set="Exposure (Absolute)" 300
>   ERROR: Unable to set new control value: A Video4Linux2 API call returned an unexpected error (12)
> 
> out of interest, what version of Linux are you running? i'm on Debian's stock 2.6.22-i686 here..
> 
> cheers,
> 
> -- 
> http://julianoliver.com
> http://selectparks.net
> emails containing HTML will not be read.
> 
> 
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel

-- 
http://julianoliver.com
http://selectparks.net
emails containing HTML will not be read.




From richard at 2007.atterer.net  Sat Dec 15 23:33:51 2007
From: richard at 2007.atterer.net (Richard Atterer)
Date: Sat, 15 Dec 2007 23:33:51 +0100
Subject: [Linux-uvc-devel] // Quickcam Pro 9000: slow frame rate? //
In-Reply-To: <47641767.1080203@arkki.info>
References: <20071215143235.GK4986@dropworld> <47641767.1080203@arkki.info>
Message-ID: <20071215223351.GA1195@vilya>

On Sat, Dec 15, 2007 at 08:05:27PM +0200, Asmo Koskinen wrote:
> out.avi: RIFF (little-endian) data, AVI, 352 x 288, 30.00 fps, video: 
> FFMpeg MPEG-4

> I'm not any kind of expert or developer - how I can know real fps?

Looking at the video in a video editor, you can see that each single video 
frame is repeated 6 times, which means that the camera supplied 5 fps.

Cheers,

  Richard

-- 
  __   _
  |_) /|  Richard Atterer     |  GnuPG key: 888354F7
  | \/?|  http://atterer.net  |  08A9 7B7D 3D13 3EF2 3D25  D157 79E6 F6DC 8883 54F7
  ? '` ?


From shaohuang at gmail.com  Sun Dec 16 07:38:54 2007
From: shaohuang at gmail.com (Brian Pin)
Date: Sat, 15 Dec 2007 22:38:54 -0800
Subject: [Linux-uvc-devel] is there any device side code?
Message-ID: <a81f87bb0712152238l1de93a0au6e3deb1eb757d2e5@mail.gmail.com>

Hi,
I am wondering is there any linux/open source device(gadget) driver for UVC
now.
Is it highly device dependent?

Another question, an UVC driver should open its sof interrupt, is it true?
Because if it doesn't, it won't be able to handle isoc packets on time and
could possiblly lose packets.
I am asking this because I am on a very low cpu clock environment, my system
can't
handle sof interrupt that fast. So I am must turn off sof interrupt. Anyway,
no matter host/device mode UVC
always need to handle its sof interrupt right?

-- 
Best Regards
Brian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071215/437a1b36/attachment.html>

From asmo.koskinen at arkki.info  Sun Dec 16 08:09:07 2007
From: asmo.koskinen at arkki.info (Asmo Koskinen)
Date: Sun, 16 Dec 2007 09:09:07 +0200
Subject: [Linux-uvc-devel] // Quickcam Pro 9000: slow frame rate? //
In-Reply-To: <20071215223351.GA1195@vilya>
References: <20071215143235.GK4986@dropworld> <47641767.1080203@arkki.info>
	<20071215223351.GA1195@vilya>
Message-ID: <4764CF13.1040001@arkki.info>

Richard Atterer kirjoitti:
> Looking at the video in a video editor, you can see that each single video 
> frame is repeated 6 times, which means that the camera supplied 5 fps.
>   

I tried that in Kino with fw/camcorder and usb/webcam, now I see. Thank 
you for open my eyes.

Best Regards Asmo Koskinen.



From IngoFeinerer at web.de  Sun Dec 16 10:06:13 2007
From: IngoFeinerer at web.de (Ingo Feinerer)
Date: Sun, 16 Dec 2007 10:06:13 +0100
Subject: [Linux-uvc-devel] Makefile clean rule
Message-ID: <4764EA85.8090708@web.de>

Hello,

I think I found a small cosmetic issue in the UVC Makefile which can be
easily fixed:

"make" works perfectly for me and generates (of course amongst others)
the file "Module.symvers".

"make clean" deletes all object files but misses to erase
"Module.symvers". Instead the clean Makefile rule says "Modules.symvers"
(note the additional "s").

Best regards,

Ingo

-- 
Ingo Feinerer
HP: http://www.logic.at/staff/feinerer


From laurent.pinchart at skynet.be  Sun Dec 16 10:19:51 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 16 Dec 2007 10:19:51 +0100
Subject: [Linux-uvc-devel] Makefile clean rule
In-Reply-To: <4764EA85.8090708@web.de>
References: <4764EA85.8090708@web.de>
Message-ID: <200712161019.51489.laurent.pinchart@skynet.be>

Hi Ingo,
On Sunday 16 December 2007, Ingo Feinerer wrote:
> Hello,
>
> I think I found a small cosmetic issue in the UVC Makefile which can be
> easily fixed:
>
> "make" works perfectly for me and generates (of course amongst others)
> the file "Module.symvers".
>
> "make clean" deletes all object files but misses to erase
> "Module.symvers". Instead the clean Makefile rule says "Modules.symvers"
> (note the additional "s").

Thanks. Committed.

Best regards,

Laurent Pinchart


From greg at justaguy.ca  Tue Dec 18 01:17:37 2007
From: greg at justaguy.ca (Greg Dickie)
Date: Mon, 17 Dec 2007 19:17:37 -0500
Subject: [Linux-uvc-devel] Newbie help with a Quickcam Communicate Deluxe
Message-ID: <1197937057.3763.7.camel@silence>


Hi,


  Sorry if this is a newbie question but I was a bit surprised at how
hard it is to get a webcam working in linux (just like the old days with
any hardware ;-). I just purchased the above-mentioned camera and went
through a few different drivers trying to find one that would recognize
this camera before finding uvcvideo. That seems to work but now when I
run luvcview I get a black picture. Actually its just very dark as I
discovered when I pointed it directly at a light. I tried cranking uo
the brightness and the contrast but I cannot seem to get a picture out
of it even in full light. Does anyone know what I'm doing wrong?

TIA,
Greg 


-- 
Greg Dickie
just a guy



From greg at justaguy.ca  Tue Dec 18 03:17:14 2007
From: greg at justaguy.ca (Greg Dickie)
Date: Mon, 17 Dec 2007 21:17:14 -0500
Subject: [Linux-uvc-devel] Newbie help with a Quickcam Communicate	Deluxe
In-Reply-To: <20071218004031.GB11232@dropworld>
References: <1197937057.3763.7.camel@silence>
	<20071218004031.GB11232@dropworld>
Message-ID: <1197944234.3763.12.camel@silence>

Hi Julian,

Thanks for the reply. See below.


On Tue, 2007-12-18 at 01:40 +0100, Julian Oliver wrote:
> ..on or around Mon, Dec 17, 2007 at 07:17:37PM -0500, Greg Dickie said:
> > 
> > Hi,
> > 
> > 
> >   Sorry if this is a newbie question but I was a bit surprised at how
> > hard it is to get a webcam working in linux (just like the old days with
> > any hardware ;-). I just purchased the above-mentioned camera and went
> > through a few different drivers trying to find one that would recognize
> > this camera before finding uvcvideo. That seems to work but now when I
> > run luvcview I get a black picture. Actually its just very dark as I
> > discovered when I pointed it directly at a light. I tried cranking uo
> > the brightness and the contrast but I cannot seem to get a picture out
> > of it even in full light. Does anyone know what I'm doing wrong?
> >
> 
> is it possible the Quickcam Messenger you bought is very recent?
> 
>   http://home.mag.cx/messenger/
> 
> does your camera appear on this table?
> 
>   http://www.quickcamteam.net/hcl/linux/logitech-webcams


yes, its PID 0992


> 
> cheers,
> 
> julian
> 
-- 
Greg Dickie
just a guy



From martijn at uncinc.nl  Tue Dec 18 14:52:12 2007
From: martijn at uncinc.nl (Martijn Houtman)
Date: Tue, 18 Dec 2007 14:52:12 +0100
Subject: [Linux-uvc-devel] Auto gain/exposure settings not working?
Message-ID: <2D11012A-5DE9-41C5-9944-51781ED4B6F2@uncinc.nl>

Hello list,

I am creating an application where I need a webcam to have a static  
exposure time per frame so it does no try to compensate the lighting  
situation and I can control the lighting myself.

I am using the mjpeg-streamer application to grab images over HTTP,  
which works fine btw, very handy tool! I added a few lines in the  
input_uvc module so as to turn off auto-exposure, gain and  
whitebalance, but no combination of this seems to work.

The following code:
     printf("Auto whitebalance: %d\n", v4l2SetControl(vd,  
V4L2_CID_WHITE_BALANCE_TEMPERATURE_AUTO, 0));
     printf("Auto exposure: %d\n", v4l2SetControl(vd,  
V4L2_CID_EXPOSURE_AUTO, 0));
     printf("Auto gain: %d\n", v4l2SetControl(vd, V4L2_CID_AUTOGAIN,  
0));

results in:
     contol White Balance Temperature, Auto unsupported
     Auto whitebalance: -1
     Auto exposure: 0
     Auto gain: -1

dmesg output:
     uvcvideo: Failed to query (1) UVC control 2 (unit 2) : -32 (exp.  
2).

uvc module revision 156, device id 046d:08ce,

Am I missing something?

With kind regards,
-- 
Martijn Houtman

martijn at uncinc.nl
+31(0)6-15197925
+31(0)20-6892000
Unc Inc
Jacob van Lennepkade 334 X
1053 NJ Amsterdam
www.uncinc.nl



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071218/a5782f6c/attachment.html>

From mail at andieh.de  Tue Dec 18 18:26:44 2007
From: mail at andieh.de (Andieh)
Date: Tue, 18 Dec 2007 18:26:44 +0100
Subject: [Linux-uvc-devel] corrupted images with quickcam pro 5000
Message-ID: <1197998804.15443.28.camel@localhost.localdomain>

Hi there!

i bought me a logitech quickcam 5000 months ago. i tried to get it to
work with motion, but i have many messed up pictures. I had to reduce
down the pictures to a very small resolution and have to restart motion
every 10 minutes to get some good results. this "worked" for me since
sommer this year.

today i tried a complete update, motion and linux-uvc from svn. i hoped
the problems dissapear. but i have them again. they now come rarly, but
they are still there. here is a picture of it:
http://www.informatik.uni-frankfurt.de/~fuertig/upload/bilder/20071218180413.jpg

i searched a lot and found a little help on the quickcam team page, but
the hints are dated from 2006. is this still a bug?

here some other informations for you:
motion, linux-uvc svn
archlinux with kernel 2.6.23
usb 2.0 pci card
lsusb: Bus 004 Device 002: ID 046d:08ce Logitech, Inc. QuickCam Pro 5000

thank you for your help!

andieh




From lawrence.leonard at gmail.com  Wed Dec 19 03:57:23 2007
From: lawrence.leonard at gmail.com (Lawrence Leonard)
Date: Tue, 18 Dec 2007 21:57:23 -0500
Subject: [Linux-uvc-devel] Another question regarding OmniVision cam
	(05a9:2641) in Dell SP2008WFP Monitor
Message-ID: <4c40a1190712181857wc1ebd77ied796a57d9479f25@mail.gmail.com>

Thanks to Laurent Pinchart, I now know that the OmniVision 2641 device
should work out of the box, and after rebooting it did come up
automatically in Skype and Ekiga and I was able to get the microphone
adjustments set so that sound and video both worked.

However, after rebooting again at a later time (I dual boot Ubuntu and
Windows XP) the device wasn't recognized and didn't work in Skype or
Ekiga.  Another reboot and the devices did work.  This has me a little
perplexed.

In a boot when the camera DOES work, dmesg reports:

[   28.186439] uvcvideo: Found UVC 1.00 device Monitor Integrated
Webcam (05a9:2641)
[   28.186625] uvcvideo: Failed to query (135) UVC control 1 (unit 0)
: -32 (exp. 26).
[   28.243851] usbcore: registered new interface driver uvcvideo

In a boot when the camera DOES NOT work, dmesg reports:

[   27.598409] uvcvideo: Found UVC 1.00 device Monitor Integrated
Webcam (05a9:2641)
[   27.599298] uvcvideo: Failed to query (135) UVC control 1 (unit 0)
: -32 (exp. 26).
[   27.599408] uvcvideo: Failed to query (129) UVC control 1 (unit 0)
: -32 (exp. 26).
[   27.599411] uvcvideo: Failed to initialize the device (-5).
[   27.599445] usbcore: registered new interface driver uvcvideo

Is it correct to request help with these symptoms on this list, or is
this something specific to the Ubuntu boot processes ("upstart") that
I should pursue downstream on an Ubuntu-specific list/forum?

Many thanks,

Lawrence Leonard


From fungos at gmail.com  Thu Dec 20 03:19:54 2007
From: fungos at gmail.com (fungos)
Date: Thu, 20 Dec 2007 00:19:54 -0200
Subject: [Linux-uvc-devel] HP dv6000 Webcam Ricoh
Message-ID: <e763e59d0712191819l213b12b2vc51268913b555458@mail.gmail.com>

Hi, I tried to use uvcvideo but it just doesnt create /dev/video0, if
anybody can help me to get this work.

Thank you.


my dmesg when I load the module with trace=15:

Dec 20 00:06:51 Darkbrain kernel: [ 2088.133372] uvcvideo: Found UVC
1.00device <unnamed> (05ca:1810)
Dec 20 00:06:51 Darkbrain kernel: [ 2088.133424] uvcvideo: Found a valid
video chain (1 -> 3).
Dec 20 00:06:56 Darkbrain kernel: [ 2092.725146] usbcore: registered new
interface driver uvcvideo
Dec 20 00:06:56 Darkbrain kernel: [ 2092.725151] USB Video Class driver (
v0.1.0)

Here is my lsusb output:

Bus 002 Device 002: ID 05ca:1810 Ricoh Co., Ltd
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x05ca Ricoh Co., Ltd
  idProduct          0x1810
  bcdDevice            1.00
  iManufacturer           0
  iProduct                0
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          396
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              100mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              0
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           78
        dwClockFrequency       12.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          1
        bSourceID               4
        iTerminal               0
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {4441621c-8989-4346-afb3-20f37590304e}
        bNumControl             1
        bNrPins                 1
        baSourceID( 0)          2
        bControlSize            1
        bmControls( 0)       0xff
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          3
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000000
      VideoControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 2
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            3
        bmControls     0x0000043f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          Power Line Frequency
        iProcessing             0
        bmVideoStandards     0x 9
          None
          SECAM - 625/50
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormarts                        1
        wTotalLength                    34304
        bEndPointAddress                    1
        bmInfo                              3
        bTerminalLink                       0
        bStillCaptureMethod                 0
        bTriggerSupport                     0
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                5
        guidFormat
{32595559-0000-0010-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x02
          Interlaced stream or variable: No
          Fields per frame: 2 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                147456000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         500000
        bFrameIntervalType                  1
        dwFrameInterval( 0)            500000
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                157286400
        dwMaxBitRate                157286400
        dwMaxVideoFrameBufferSize     2621440
        dwDefaultFrameInterval        1333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)           1333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                 48660480
        dwMaxBitRate                 48660480
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         500000
        bFrameIntervalType                  1
        dwFrameInterval( 0)            500000
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                 36864000
        dwMaxBitRate                 36864000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         500000
        bFrameIntervalType                  1
        dwFrameInterval( 0)            500000
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                 12165120
        dwMaxBitRate                 12165120
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         500000
        bFrameIntervalType                  1
        dwFrameInterval( 0)            500000
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x13d4  3x 980 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x13ec  3x 1004 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1370  3x 880 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0364  1x 868 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0278  1x 632 bytes
        bInterval               1
Device Status:     0x0000
  (Bus Powered)



-- 
Animal Frontline Liberation
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071220/93d850f1/attachment.html>

From asmo.koskinen at arkki.info  Thu Dec 20 11:49:59 2007
From: asmo.koskinen at arkki.info (Asmo Koskinen)
Date: Thu, 20 Dec 2007 12:49:59 +0200
Subject: [Linux-uvc-devel] HP dv6000 Webcam Ricoh
In-Reply-To: <e763e59d0712191819l213b12b2vc51268913b555458@mail.gmail.com>
References: <e763e59d0712191819l213b12b2vc51268913b555458@mail.gmail.com>
Message-ID: <476A48D7.4070905@arkki.info>

fungos kirjoitti:
> Hi, I tried to use uvcvideo but it just doesnt create /dev/video0, if
> anybody can help me to get this work.
>   

Maybe manually "modprobe videodev" helps?

asmok at ubuntu:~$ lsmod | grep uvcvideo
uvcvideo               53636  0
compat_ioctl32          2304  1 uvcvideo
videodev               29568  2 uvcvideo,saa7146_vv
v4l2_common            18560  3 uvcvideo,saa7146_vv,videodev
v4l1_compat            15364  3 uvcvideo,saa7146_vv,videodev
usbcore               139912  10 
snd_usb_audio,snd_usb_lib,xpad,uvcvideo,hci_usb,usblp,usbhid,uhci_hcd,ehci_hcd
asmok at ubuntu:~$

asmok at ubuntu:~$ dmesg | grep uvcvideo
[   69.318236] uvcvideo: Found UVC 1.00 device <unnamed> (046d:0990)
[   69.347428] usbcore: registered new interface driver uvcvideo
asmok at ubuntu:~$

I use svn-version, not default for Ubuntu 7.10:

http://wiki.ubuntu-fi.org/Webkamerat_%28uvcvideo-_ja_stk11xx-ajurit%29
http://wiki.ubuntu-fi.org/Logitech_QuickCam_Pro_9000

I have made howto (sorry for finnish) for module:

http://wiki.ubuntu-fi.org/Webkamerat_uvcvideo

Best Regards Asmo Koskinen.


From tnetter at ifi.uzh.ch  Thu Dec 20 12:37:10 2007
From: tnetter at ifi.uzh.ch (Thomas Netter)
Date: Thu, 20 Dec 2007 12:37:10 +0100 (CET)
Subject: [Linux-uvc-devel] Debugging UVC + Sanyo Xacti cameras
Message-ID: <44759.130.60.75.225.1198150630.squirrel@bela.ifi.unizh.ch>

Hi Laurent and UVC developers,

I'm starting to give a close look at luvcview failures when using Xacti
cameras with UVC. I'm new to UVC so any help would be greatly appreciated.
The problem was initially described by Lars T?uber with the Sanyo HD 1000:
http://lists.berlios.de/pipermail/linux-uvc-devel/2007-September/002145.html
To summarize: luvcview works on the first execute-quit sequence but fails if
you try to execute luvcview again. I tried plugging Lars T?uber's code
snippet into uvc_driver.c but that had no visible effect.

I'm experiencing the same problem with a Xacti C6. I also have access to
Xacti C4, HD 1000, and HD 2 cameras to test on other models.

Device numbers:
Xacti HD 1000: 0474:0238
Xacti C6:      0474:0241

Below are logs obtained with SnoopyPro-022 while starting AMCap video
capture on Windows XP ( http://noeld.com/programs.asp?cat=video )
These logs track the following sequence:
- Start Amcap
- Capture 2 to 3 seconds of 320x240 video
- Quit Amcap
- Wait a few seconds
- Start Amcap
- Capture 2 to 3 seconds of 320x240 video
- Quit Amcap

Log from "video device":
Snoopy binary log: http://www.ailab.ch/~tnetter/USBLog12.usblog
Text version: http://www.ailab.ch/~tnetter/log12.txt.gz

Simultaneous log from "composite device":
Snoopy binary log: http://www.ailab.ch/~tnetter/USBLog13.usblog
Text version: http://www.ailab.ch/~tnetter/log13.txt.gz

Here's what happens in Ubuntu 7.10, linux 2.6.22-14-generic,
uvcvideo-r104, luvcview-20070512 (tried both from SVN and from deb
package).

First attempt works:
sudo ./luvcview
luvcview version 0.2.1
Video driver: x11
A window manager is available
video /dev/video0
Stop asked
 Clean Up done Quit

Second attempt fails:
sudo ./luvcview
luvcview version 0.2.1
Video driver: x11
A window manager is available
video /dev/video0
Unable to set format: 5.
 Init v4L2 failed !! exit fatal

If I unplug and replug the camera into the USB port then luvcview
works again for one more attempt.

Any help / hints are welcome.

-Thomas




From romal at gmx.de  Thu Dec 20 19:39:08 2007
From: romal at gmx.de (Robert M. Albrecht)
Date: Thu, 20 Dec 2007 19:39:08 +0100
Subject: [Linux-uvc-devel] Collision with ALSA device
Message-ID: <476AB6CC.6050500@gmx.de>

Hi,

whenever the webcam is connected while booting the system, the onboard
sound card does not work.

Is there any known workaround ?

cu romal


From rinolf at gmail.com  Thu Dec 20 20:35:17 2007
From: rinolf at gmail.com (Niklas Larsson)
Date: Thu, 20 Dec 2007 20:35:17 +0100
Subject: [Linux-uvc-devel] Creative Webcam Live! Cam Notebook Ultra
Message-ID: <115781230712201135x1ab85efeq8218c1c5556c4ece@mail.gmail.com>

Hi!

I have bought a Creative Webcam Live! Cam Notebook Ultra and now i
discovered that there is no linux drivers for it (maybe should have thought
of that earlier!). This is the info I got:

$ lsusb | grep Creative
Bus 003 Device 006: ID 041e:405b Creative Technology, Ltd

Any thing else i can provide you with?

It would be great to have drivers for it!

Thanks in advance
Niklas Larsson
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071220/2fbf6f88/attachment.html>

From alan at tomun.org  Thu Dec 20 20:39:44 2007
From: alan at tomun.org (Alan James)
Date: Thu, 20 Dec 2007 19:39:44 +0000
Subject: [Linux-uvc-devel] New Camera Feiya Technology 090c:b370
Message-ID: <b837d6d80712201139n525a792fk680a0662373a4e6b@mail.gmail.com>

http://www.chinavasion.com/product_info.php/pName/driverless-webcam-stylish-bendable-design/

I've just got hold of three of these funky looking webcams, (the brass
version not the silver they show on the web page) but unfortunately it
doesn't just work.

uvcvideo has a go but fails to initialise the device:

usb 2-6: new high speed USB device using ehci_hcd and address 8
usb 2-6: configuration #1 chosen from 1 choice
uvcvideo: Found UVC 1.00 device USB 2.0 PC Cam (090c:b370)
nm_hal_device_added(): New device added (hal udi is
'/org/freedesktop/Hal/devices/usb_device_90c_b370_noserial').
nm_hal_device_added(): New device added (hal udi is
'/org/freedesktop/Hal/devices/usb_device_ffffffff_ffffffff_noserial').
uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -110 (exp. 26).
uvcvideo: Failed to query (129) UVC control 1 (unit 0) : -110 (exp. 26).
uvcvideo: Failed to initialize the device (-5).
nm_hal_device_added(): New device added (hal udi is
'/org/freedesktop/Hal/devices/usb_device_90c_b370_noserial_if1').
nm_hal_device_added(): New device added (hal udi is
'/org/freedesktop/Hal/devices/usb_device_90c_b370_noserial_usbraw').

I'm using a stock Ubuntu 2.6.22 kernel so I wont have the latest
uvcvideo but since I don't see this device id on your supported list
I'm guessing that wont work either.
Let me know if you need to me to do anything or need more information.
lsusb output is attached.

Alan.
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: usb.txt
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071220/fb44507d/attachment.txt>

From laurent.pinchart at skynet.be  Thu Dec 20 21:22:28 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 20 Dec 2007 21:22:28 +0100
Subject: [Linux-uvc-devel] Newbie help with a Quickcam Communicate Deluxe
In-Reply-To: <1197937057.3763.7.camel@silence>
References: <1197937057.3763.7.camel@silence>
Message-ID: <200712202122.28755.laurent.pinchart@skynet.be>

Hi Greg,

On Tuesday 18 December 2007, Greg Dickie wrote:
> Hi,
>
>   Sorry if this is a newbie question but I was a bit surprised at how
> hard it is to get a webcam working in linux (just like the old days with
> any hardware ;-). I just purchased the above-mentioned camera and went
> through a few different drivers trying to find one that would recognize
> this camera before finding uvcvideo. That seems to work but now when I
> run luvcview I get a black picture. Actually its just very dark as I
> discovered when I pointed it directly at a light. I tried cranking uo
> the brightness and the contrast but I cannot seem to get a picture out
> of it even in full light. Does anyone know what I'm doing wrong?

When pushing brightness up, do you see any change in the image ? Do you get 
error messages in the kernel log ?

You could also try your luck on the www.quickcamteam.net forums.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Dec 20 21:33:49 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 20 Dec 2007 21:33:49 +0100
Subject: [Linux-uvc-devel] is there any device side code?
In-Reply-To: <a81f87bb0712152238l1de93a0au6e3deb1eb757d2e5@mail.gmail.com>
References: <a81f87bb0712152238l1de93a0au6e3deb1eb757d2e5@mail.gmail.com>
Message-ID: <200712202133.49984.laurent.pinchart@skynet.be>

Hi Brian,

On Sunday 16 December 2007, Brian Pin wrote:
> Hi,
> I am wondering is there any linux/open source device(gadget) driver for UVC
> now. Is it highly device dependent?

Thomann Andreas posted a mail to the list on September 15th 2006 and seemed to 
imply he would start a UVC gadget driver. You should try to contact him.

> Another question, an UVC driver should open its sof interrupt, is it true?
> Because if it doesn't, it won't be able to handle isoc packets on time and
> could possiblly lose packets.
> I am asking this because I am on a very low cpu clock environment, my
> system can't handle sof interrupt that fast. So I am must turn off sof
> interrupt.
> Anyway, no matter host/device mode UVC always need to handle its sof
> interrupt right? 

UVC devices must report the SOF counter value, but I don't think they need to 
process SOF interrupts if the device has a hardware SOF counter.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Dec 20 21:47:46 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 20 Dec 2007 21:47:46 +0100
Subject: [Linux-uvc-devel] Auto gain/exposure settings not working?
In-Reply-To: <2D11012A-5DE9-41C5-9944-51781ED4B6F2@uncinc.nl>
References: <2D11012A-5DE9-41C5-9944-51781ED4B6F2@uncinc.nl>
Message-ID: <200712202147.47004.laurent.pinchart@skynet.be>

Hi Martijn,

On Tuesday 18 December 2007, Martijn Houtman wrote:
> Hello list,
>
> I am creating an application where I need a webcam to have a static
> exposure time per frame so it does no try to compensate the lighting
> situation and I can control the lighting myself.
>
> I am using the mjpeg-streamer application to grab images over HTTP,
> which works fine btw, very handy tool! I added a few lines in the
> input_uvc module so as to turn off auto-exposure, gain and
> whitebalance, but no combination of this seems to work.
>
> The following code:
>      printf("Auto whitebalance: %d\n", v4l2SetControl(vd,
> V4L2_CID_WHITE_BALANCE_TEMPERATURE_AUTO, 0));
>      printf("Auto exposure: %d\n", v4l2SetControl(vd,
> V4L2_CID_EXPOSURE_AUTO, 0));
>      printf("Auto gain: %d\n", v4l2SetControl(vd, V4L2_CID_AUTOGAIN,
> 0));
>
> results in:
>      contol White Balance Temperature, Auto unsupported
>      Auto whitebalance: -1

I don't know why this fails. Could you try modifying auto white balance only 
and check the kernel log for error messages ? You can set the trace level to 
4 for additional control-related information.

>      Auto exposure: 0

No problem there.

>      Auto gain: -1

Auto gain is not supported by your camera, so this is expected.

>
> dmesg output:
>      uvcvideo: Failed to query (1) UVC control 2 (unit 2) : -32 (exp.
> 2).

Have you tried modifying the brightness ? control 2/unit 2 is the brightness 
control.

> uvc module revision 156, device id 046d:08ce,
>
> Am I missing something?

Except the fact that auto gain is not supported by the device, you haven't 
missed anything obvious.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Dec 20 21:51:45 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 20 Dec 2007 21:51:45 +0100
Subject: [Linux-uvc-devel] Trouble recording from two webcams
In-Reply-To: <C5335C312A969B4090CF4593F36C2AE53BEF81@SRV602.tudelft.net>
References: <C5335C312A969B4090CF4593F36C2AE53BEF81@SRV602.tudelft.net>
Message-ID: <200712202151.45831.laurent.pinchart@skynet.be>

Hi,

On Tuesday 18 December 2007, Plooij wrote:
> Hi,
>
> I have exactly the same problem as Vidar Normann with the UVC driver:
>
> I have two (identical) UVC cameras. When connecting to one of them and not
> to the other, there is no problem (I can use both of them, but not
> simultaneously). When trying to use them simultaneously, there are two
> cases:
>
> * When they are connected to the same USB host controller, I get the "No
> space left on device" error on the VIDIOC_STREAMON ioctl.

That's because you would use too much USB bandwidth with two video streams.

> * When they are connected to different USB host controllers, one of them
> (/dev/video0) works fine, but the other one (/dev/video1) only gives a
> completely useless corrupted image, containing mostly noise and chunks of
> the first camera's image.

Maybe PCI bandwidth issues ? I'm sorry but I really have no idea there.

> I use the following video format:
> 640x480 YUYV

If possible you should try streaming in MJPEG. That would lower the bandwidth 
requirements.

> I make my own V4L2 software, loosely based on the V4L2 tutorial. I tried to
> reduce the frame rate, but VIDIOC_S_PARM gives EINVAL, so it doesn't seem
> to be supported.

VIDIO_S_PARM should be supported. Maybe the parameters you supplied were 
erroneous ?

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Dec 20 21:55:53 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 20 Dec 2007 21:55:53 +0100
Subject: [Linux-uvc-devel] corrupted images with quickcam pro 5000
In-Reply-To: <1197998804.15443.28.camel@localhost.localdomain>
References: <1197998804.15443.28.camel@localhost.localdomain>
Message-ID: <200712202155.53910.laurent.pinchart@skynet.be>

Hi Andieh,

On Tuesday 18 December 2007, Andieh wrote:
> Hi there!
>
> i bought me a logitech quickcam 5000 months ago. i tried to get it to
> work with motion, but i have many messed up pictures. I had to reduce
> down the pictures to a very small resolution and have to restart motion
> every 10 minutes to get some good results. this "worked" for me since
> sommer this year.
>
> today i tried a complete update, motion and linux-uvc from svn. i hoped
> the problems dissapear. but i have them again. they now come rarly, but
> they are still there. here is a picture of it:
> http://www.informatik.uni-frankfurt.de/~fuertig/upload/bilder/2007121818041
>3.jpg

That's caused by a lost USB isochronous packet. The UVC streaming format 
doesn't make it possible to detect lost packets, so the image can't be 
padded. The rest of the image will be shifted.

> i searched a lot and found a little help on the quickcam team page, but
> the hints are dated from 2006. is this still a bug?

When bandwidth is not involved, this kind of problem can be caused by bad USB 
cables, or noisy electrical environments. Making sure your USB cable doesn't 
run too close to power cables might help. Replacing the cable is obviously 
impossible with most webcams.

> here some other informations for you:
> motion, linux-uvc svn
> archlinux with kernel 2.6.23
> usb 2.0 pci card
> lsusb: Bus 004 Device 002: ID 046d:08ce Logitech, Inc. QuickCam Pro 5000

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Dec 20 22:05:34 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 20 Dec 2007 22:05:34 +0100
Subject: [Linux-uvc-devel] Another question regarding OmniVision cam
	(05a9:2641) in Dell SP2008WFP Monitor
In-Reply-To: <4c40a1190712181857wc1ebd77ied796a57d9479f25@mail.gmail.com>
References: <4c40a1190712181857wc1ebd77ied796a57d9479f25@mail.gmail.com>
Message-ID: <200712202205.34742.laurent.pinchart@skynet.be>

Hi Lawrence,

On Wednesday 19 December 2007, Lawrence Leonard wrote:
> Thanks to Laurent Pinchart, I now know that the OmniVision 2641 device
> should work out of the box, and after rebooting it did come up
> automatically in Skype and Ekiga and I was able to get the microphone
> adjustments set so that sound and video both worked.
>
> However, after rebooting again at a later time (I dual boot Ubuntu and
> Windows XP) the device wasn't recognized and didn't work in Skype or
> Ekiga.  Another reboot and the devices did work.  This has me a little
> perplexed.
>
> In a boot when the camera DOES work, dmesg reports:
>
> uvcvideo: Found UVC 1.00 device Monitor Integrated Webcam (05a9:2641)
> uvcvideo: Failed to query (135) UVC control 1 (unit 0): -32 (exp. 26).
> usbcore: registered new interface driver uvcvideo
>
> In a boot when the camera DOES NOT work, dmesg reports:
>
> uvcvideo: Found UVC 1.00 device Monitor Integrated Webcam (05a9:2641)
> uvcvideo: Failed to query (135) UVC control 1 (unit 0): -32 (exp. 26).
> uvcvideo: Failed to query (129) UVC control 1 (unit 0): -32 (exp. 26).
> uvcvideo: Failed to initialize the device (-5).
> usbcore: registered new interface driver uvcvideo
>
> Is it correct to request help with these symptoms on this list, or is
> this something specific to the Ubuntu boot processes ("upstart") that
> I should pursue downstream on an Ubuntu-specific list/forum?

The problem is not Ubuntu-specific. I *think* it is unfortunately 
device-specific. The device failed to answer two requests. The first one 
(135) is a very common device bug that the driver works around. The second 
one seems to be another device bug that the driver can't work around :-/

Basically, the driver queries the device, and the device stalls (refuses to 
answer the request). As this doesn't happen everytime, I suspect the problem 
to be caused by a firmware bug in the device.

It might be possible to implement a software workaround in the UVC driver by 
adding a small delay in one place or another, but I don't know of any 
definitive solution. The device passed manufacturer's testing because Windows 
and Linux schedule USB transactions differently, which results in slower 
timings in Windows. The bug just slipped uncaught.

It might also be possible to tweak the EHCI controller driver to alter timings 
and make them more Windows-like. That would be a complex project, involving 
deep knowledge of the EHCI host controller. The documentation is out there 
though.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Dec 20 22:10:59 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 20 Dec 2007 22:10:59 +0100
Subject: [Linux-uvc-devel] HP dv6000 Webcam Ricoh
In-Reply-To: <e763e59d0712191819l213b12b2vc51268913b555458@mail.gmail.com>
References: <e763e59d0712191819l213b12b2vc51268913b555458@mail.gmail.com>
Message-ID: <200712202210.59468.laurent.pinchart@skynet.be>

Hi,

On Thursday 20 December 2007, fungos wrote:
> Hi, I tried to use uvcvideo but it just doesnt create /dev/video0, if
> anybody can help me to get this work.
>
> Thank you.
>
> my dmesg when I load the module with trace=15:
>
> uvcvideo: Found UVC 1.00 device <unnamed> (05ca:1810)
> uvcvideo: Found a valid video chain (1 -> 3).
> usbcore: registered new interface driver uvcvideo
> USB Video Class driver (v0.1.0)

Looks quite normal to me. Has the driver created anything 
in /sys/class/video4linux ? If so the device is properly detected and 
registered, and you should check your udev rules.

Best regards,

Laurent Pinchart



From laurent.pinchart at skynet.be  Thu Dec 20 22:12:20 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 20 Dec 2007 22:12:20 +0100
Subject: [Linux-uvc-devel] Collision with ALSA device
In-Reply-To: <476AB6CC.6050500@gmx.de>
References: <476AB6CC.6050500@gmx.de>
Message-ID: <200712202212.20335.laurent.pinchart@skynet.be>

Hi Robert,

On Thursday 20 December 2007, Robert M. Albrecht wrote:
> Hi,
>
> whenever the webcam is connected while booting the system, the onboard
> sound card does not work.

Are you sure it doesn't work ? Maybe ALSA devices are just enumerated in a 
different order, which might confuse the rest of the system if it tries to 
use the first ALSA device.

> Is there any known workaround ?

That's probably an ALSA configuration issue. You should ask on ALSA-related 
mailing lists or forums.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Dec 20 22:13:56 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 20 Dec 2007 22:13:56 +0100
Subject: [Linux-uvc-devel] Creative Webcam Live! Cam Notebook Ultra
In-Reply-To: <115781230712201135x1ab85efeq8218c1c5556c4ece@mail.gmail.com>
References: <115781230712201135x1ab85efeq8218c1c5556c4ece@mail.gmail.com>
Message-ID: <200712202213.56128.laurent.pinchart@skynet.be>

Hi Niklas,

On Thursday 20 December 2007, Niklas Larsson wrote:
> Hi!
>
> I have bought a Creative Webcam Live! Cam Notebook Ultra and now i
> discovered that there is no linux drivers for it (maybe should have thought
> of that earlier!). This is the info I got:
>
> $ lsusb | grep Creative
> Bus 003 Device 006: ID 041e:405b Creative Technology, Ltd
>
> Any thing else i can provide you with?

lsusb -d 041e:405b -v would help.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Dec 20 22:19:10 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 20 Dec 2007 22:19:10 +0100
Subject: [Linux-uvc-devel] New Camera Feiya Technology 090c:b370
In-Reply-To: <b837d6d80712201139n525a792fk680a0662373a4e6b@mail.gmail.com>
References: <b837d6d80712201139n525a792fk680a0662373a4e6b@mail.gmail.com>
Message-ID: <200712202219.10969.laurent.pinchart@skynet.be>

Hi Alan,

On Thursday 20 December 2007, Alan James wrote:
> http://www.chinavasion.com/product_info.php/pName/driverless-webcam-stylish
>-bendable-design/
>
> I've just got hold of three of these funky looking webcams, (the brass
> version not the silver they show on the web page) but unfortunately it
> doesn't just work.
>
> uvcvideo has a go but fails to initialise the device:
>
> usb 2-6: new high speed USB device using ehci_hcd and address 8
> usb 2-6: configuration #1 chosen from 1 choice
> uvcvideo: Found UVC 1.00 device USB 2.0 PC Cam (090c:b370)
> nm_hal_device_added(): New device added (hal udi is
> '/org/freedesktop/Hal/devices/usb_device_90c_b370_noserial').
> nm_hal_device_added(): New device added (hal udi is
> '/org/freedesktop/Hal/devices/usb_device_ffffffff_ffffffff_noserial').
> uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -110 (exp. 26).
> uvcvideo: Failed to query (129) UVC control 1 (unit 0) : -110 (exp. 26).

I don't like that. Many devices are known to be buggy and fail to answer the 
first request properly. The second request should work though.

> uvcvideo: Failed to initialize the device (-5).
> nm_hal_device_added(): New device added (hal udi is
> '/org/freedesktop/Hal/devices/usb_device_90c_b370_noserial_if1').
> nm_hal_device_added(): New device added (hal udi is
> '/org/freedesktop/Hal/devices/usb_device_90c_b370_noserial_usbraw').
>
> I'm using a stock Ubuntu 2.6.22 kernel so I wont have the latest
> uvcvideo but since I don't see this device id on your supported list
> I'm guessing that wont work either.
> Let me know if you need to me to do anything or need more information.
> lsusb output is attached.

The camera might have crashed when getting the first request. Please try the 
attached patch and let me know if it helps. The Failed to query (135) message 
should disappear complete. If it doesn't, you're still using the unpatched 
driver.

Best regards,

Laurent Pinchart
-------------- next part --------------
A non-text attachment was scrubbed...
Name: feiya.patch
Type: text/x-diff
Size: 568 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071220/c2bd77b8/attachment.patch>

From ludovic at cial.ca  Thu Dec 20 22:38:33 2007
From: ludovic at cial.ca (Ludovic Andrivon)
Date: Thu, 20 Dec 2007 16:38:33 -0500
Subject: [Linux-uvc-devel] patche on a quickcam fusion
Message-ID: <6546a46a0712201338g38922f2h285daffda70c7ac7@mail.gmail.com>

Hi,

I'm a 'proud' owner of a quickcam fusion... that is affected by THE bug
unfortunatelly. I tried to change the USB port, I plugged the webcam into
various USB hub, but it is not reliable.

Also I saw that some patches exists, but how to apply them as I'm not very
familiar with C programming ?

I read this email
http://lists.berlios.de/pipermail/linux-uvc-devel/2007-April/001645.html but
the patche seems to be applied on revision 89. Is it still possible to apply
the patches as described on the actual version ?

If not what are the changes to do to be able to applie the patche.

and finally is there any chances that this patche will be integrated into
the UVC driver ?
Thanks for your help
Ludovic
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071220/c2fd0f10/attachment.html>

From alan at tomun.org  Thu Dec 20 23:40:32 2007
From: alan at tomun.org (Alan James)
Date: Thu, 20 Dec 2007 22:40:32 +0000
Subject: [Linux-uvc-devel] New Camera Feiya Technology 090c:b370
In-Reply-To: <200712202219.10969.laurent.pinchart@skynet.be>
References: <b837d6d80712201139n525a792fk680a0662373a4e6b@mail.gmail.com>
	<200712202219.10969.laurent.pinchart@skynet.be>
Message-ID: <b837d6d80712201440h69ce3fb1nd91331f9bae1abf2@mail.gmail.com>

> The camera might have crashed when getting the first request. Please try the
> attached patch and let me know if it helps. The Failed to query (135) message
> should disappear complete. If it doesn't, you're still using the unpatched
> driver.

Thanks for your help. The driver now loads without any problems, and a
video device gets registered.

Unfortunately the errors were only delayed until I tried to use it.
This is kopete scanning the device:

uvcvideo: Failed to query (135) UVC control 2 (unit 3) : -110 (exp. 2).
uvcvideo: Failed to query (135) UVC control 3 (unit 3) : -110 (exp. 2).
uvcvideo: Failed to query (135) UVC control 7 (unit 3) : -110 (exp. 2).
uvcvideo: Failed to query (135) UVC control 6 (unit 3) : -110 (exp. 2).
uvcvideo: Failed to query (135) UVC control 9 (unit 3) : -110 (exp. 2).
uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110 (exp. 26).
uvcvideo: Failed to query (135) UVC control 2 (unit 3) : -110 (exp. 2).
uvcvideo: Failed to query (135) UVC control 3 (unit 3) : -110 (exp. 2).
uvcvideo: Failed to query (135) UVC control 7 (unit 3) : -110 (exp. 2).
uvcvideo: Failed to query (135) UVC control 9 (unit 3) : -110 (exp. 2).
uvcvideo: Failed to query (135) UVC control 6 (unit 3) : -110 (exp. 2).

Alan.


From alan at tomun.org  Fri Dec 21 02:25:07 2007
From: alan at tomun.org (Alan James)
Date: Fri, 21 Dec 2007 01:25:07 +0000
Subject: [Linux-uvc-devel] New Camera Feiya Technology 090c:b370
In-Reply-To: <b837d6d80712201440h69ce3fb1nd91331f9bae1abf2@mail.gmail.com>
References: <b837d6d80712201139n525a792fk680a0662373a4e6b@mail.gmail.com>
	<200712202219.10969.laurent.pinchart@skynet.be>
	<b837d6d80712201440h69ce3fb1nd91331f9bae1abf2@mail.gmail.com>
Message-ID: <b837d6d80712201725r10bdb2dv9607fd3ec5570b06@mail.gmail.com>

It turns out that the GET_DEF wasn't causing the original error at
all. The old Ubuntu version of uvcvideo must be doing something
different.
So I'm now running the unpatched code I grabbed from svn earlier today
and I've got it kinda working.

"luvcview -f yuv" works, and once I figured out that there was a
channel 0, I got ekiga working too. The one program I wanted to use
though, kopete, still sends errors to syslog and somehow crashes the
camera too. I'll play more tomorrow.

Alan.


From timoph at gmail.com  Fri Dec 21 09:42:44 2007
From: timoph at gmail.com (Timo H)
Date: Fri, 21 Dec 2007 10:42:44 +0200
Subject: [Linux-uvc-devel] Divide error with MS vx-7000
In-Reply-To: <4757CEF4.8060407@gmail.com>
References: <4757CEF4.8060407@gmail.com>
Message-ID: <3b2d6e400712210042t18d5ae74qb4d00f81ecf372df@mail.gmail.com>

I got a Microsoft VX-7000 camera as a gift and tried to get it working. It
works fine with luvcview, but not with any other v4l2 sw. I even managed
to change the luvcview-code so that it feeds vloopback and I get it
working with v4l software (thats ugly but at least makes the camera
usable to some extent).

The biggest problem is that the kopete crashes when the uvcvideo module
is loaded and the camera is plugged. That is really annoying because the
camera can't be plugged on when booting. Is there anything to do or is
there some non-standard things in the camera? (That might be possible
because it is MS after all). I could debug this more if you could give
some hints what to do next?

I added some debugging code from older threads and here is the dmesg output:

[10750.400000] uvcvideo: Found UVC 1.00 device Microsoft? LifeCam
VX-7000 (045e:0723)
[10750.400000] uvcvideo: Failed to query (135) UVC control 1 (unit 0) :
-32 (exp. 26).
[10750.400000] uvcvideo: GET_CUR(probe)
[10750.400000] bmHint: 0x0001
[10750.400000] bFormatIndex: 1
[10750.400000] bFrameIndex: 2
[10750.400000] dwFrameInterval: 1333333
[10750.400000] wKeyFrameRate: 0
[10750.400000] wPFrameRate: 0
[10750.400000] wCompQuality: 0
[10750.400000] wCompWindowSize: 0
[10750.400000] wDelay: 0
[10750.400000] dwMaxVideoFrameSize: 3840000
[10750.400000] dwMaxPayloadTransferSize: 1020
[10750.400000] dwClockFrequency: 0
[10750.400000] bmFramingInfo: 0x00
[10750.400000] bPreferedVersion: 0
[10750.400000] bMinVersion: 0
[10750.400000] bMaxVersion: 0
[10750.408000] usbcore: registered new interface driver uvcvideo
[10750.408000] USB Video Class driver (v0.1.0)
[10757.844000] uvcvideo: GET_MIN(probe)
[10757.844000] bmHint: 0x0001
[10757.844000] bFormatIndex: 1
[10757.844000] bFrameIndex: 2
[10757.844000] dwFrameInterval: 1333333
[10757.844000] wKeyFrameRate: 0
[10757.844000] wPFrameRate: 0
[10757.844000] wCompQuality: 0
[10757.844000] wCompWindowSize: 0
[10757.844000] wDelay: 0
[10757.844000] dwMaxVideoFrameSize: 3840000
[10757.844000] dwMaxPayloadTransferSize: 1020
[10757.844000] dwClockFrequency: 538546
[10757.844000] bmFramingInfo: 0x01
[10757.844000] bPreferedVersion: 0
[10757.844000] bMinVersion: 0
[10757.844000] bMaxVersion: 0
[10757.844000] uvcvideo: GET_MAX(probe)
[10757.844000] bmHint: 0x0001
[10757.844000] bFormatIndex: 1
[10757.844000] bFrameIndex: 2
[10757.844000] dwFrameInterval: 1333333
[10757.844000] wKeyFrameRate: 0
[10757.844000] wPFrameRate: 0
[10757.844000] wCompQuality: 0
[10757.844000] wCompWindowSize: 0
[10757.844000] wDelay: 0
[10757.844000] dwMaxVideoFrameSize: 3840000
[10757.844000] dwMaxPayloadTransferSize: 1020
[10757.844000] dwClockFrequency: 0
[10757.844000] bmFramingInfo: 0xfc
[10757.844000] bPreferedVersion: 53
[10757.844000] bMinVersion: 198
[10757.844000] bMaxVersion: 193
[10757.848000] uvcvideo: GET_CUR(probe)
[10757.848000] bmHint: 0x0001
[10757.848000] bFormatIndex: 1
[10757.848000] bFrameIndex: 2
[10757.848000] dwFrameInterval: 1333333
[10757.848000] wKeyFrameRate: 0
[10757.848000] wPFrameRate: 0
[10757.848000] wCompQuality: 0
[10757.848000] wCompWindowSize: 0
[10757.848000] wDelay: 0
[10757.848000] dwMaxVideoFrameSize: 3840000
[10757.848000] dwMaxPayloadTransferSize: 1020
[10757.848000] dwClockFrequency: 0
[10757.848000] bmFramingInfo: 0x00
[10757.848000] bPreferedVersion: 0
[10757.848000] bMinVersion: 0
[10757.848000] bMaxVersion: 0
[10758.896000] divide error: 0000 [#10]
[10758.896000] Modules linked in: uvcvideo usbvideo compat_ioctl32
binfmt_misc rfcomm l2cap vboxdrv xt_limit xt_tcpudp iptable_mangle
ipt_LOG ipt_MASQUERADE nf_nat ipt_TOS ipt_REJECT nf_conntrack_irc
nf_conntrack_ftp nf_conntrack_ipv4 xt_state nf_conntrack nfnetlink
iptable_filter ip_tables x_tables ppdev cpufreq_powersave cpufreq_stats
cpufreq_userspace cpufreq_ondemand cpufreq_conservative freq_table
tc1100_wmi pcc_acpi sony_acpi dev_acpi video battery container sbs
button i2c_ec dock ac asus_acpi backlight nls_iso8859_1 nls_cp437 vfat
fat ext3 jbd mbcache ipv6 fuse nvram lp snd_cmipci snd_opl3_lib
snd_usb_audio snd_usb_lib snd_via82xx videodev v4l1_compat snd_seq_dummy
snd_seq_oss snd_hwdep gameport snd_ac97_codec v4l2_common hci_usb
bluetooth ac97_bus snd_seq_midi snd_seq_midi_event parport_pc parport
rtc snd_pcm_oss snd_mixer_oss psmouse pcspkr snd_seq ves1820 snd_pcm
snd_timer snd_page_alloc snd_mpu401_uart snd_rawmidi snd_seq_device
via_agp agpgart i2c_viapro budget budget_core saa7146 ttpci_eeprom snd
dvb_core via_ircc irda serio_raw crc_ccitt i2c_core soundcore shpchp
pci_hotplug af_packet tsdev evdev reiserfs ide_cd cdrom ide_disk generic
usb_storage libusual via82cxxx sg sd_mod ata_generic via_rhine mii
ehci_hcd uhci_hcd usbcore sata_via libata scsi_mod raid10 raid456 xor
raid1 raid0 multipath linear md_mod thermal processor fan dm_mod fbcon
tileblit font bitblit softcursor vesafb capability commoncap
[10758.896000] CPU: 0
[10758.896000] EIP: 0060:[<e0d6b204>] Not tainted VLI
[10758.896000] EFLAGS: 00010256 (2.6.20-16-386 #2)
[10758.896000] EIP is at get_v4l_control+0xa4/0xf0 [v4l1_compat]
[10758.896000] eax: 00000000 ebx: 800e7606 ecx: 00000000 edx: 00000000
[10758.896000] esi: ddebe720 edi: ccf43ec8 ebp: d7078000 esp: ccf43974
[10758.896000] ds: 007b es: 007b ss: 0068
[10758.896000] Process kopete (pid: 29569, ti=ccf42000 task=d4cb3590
task.ti=ccf42000)
[10758.896000] Stack: e0d6bbb9 e1156b00 e1156b00 10000000 ccf43bd8
ddebe720 cc9769f0 d38a3580
[10758.896000] 00000000 00000001 00000640 000004b0 47504a4d 00000001
00000000 003a9800
[10758.896000] 00000008 00000000 00000000 00000000 00000000 00000000
00000000 00000000
[10758.896000] Call Trace:
[10758.896000] [<e0d6bbb9>] v4l_compat_translate_ioctl+0x969/0x2184
[v4l1_compat]
[10758.896000] [<e1156b00>] uvc_v4l2_do_ioctl+0x0/0xfe0 [uvcvideo]
[10758.896000] [<e1156b00>] uvc_v4l2_do_ioctl+0x0/0xfe0 [uvcvideo]
[10758.896000] [<e0a03fe5>] search_for_position_by_key+0x145/0x370
[reiserfs]
[10758.896000] [<c01818a3>] __find_get_block_slow+0xa3/0x120
[10758.896000] [<c0246204>] ide_map_sg+0x34/0x90
[10758.896000] [<c024e6e2>] ide_build_sglist+0x22/0xd0
[10758.896000] [<e0892839>] uhci_giveback_urb+0x79/0x180 [uhci_hcd]
[10758.896000] [<e09edd18>] make_cpu_key+0x48/0x60 [reiserfs]
[10758.896000] [<e0a02a60>] pathrelse+0x20/0x30 [reiserfs]
[10758.896000] [<e09ee683>] _get_block_create_0+0x603/0x680 [reiserfs]
[10758.896000] [<c0246204>] ide_map_sg+0x34/0x90
[10758.896000] [<c024e6e2>] ide_build_sglist+0x22/0xd0
[10758.896000] [<c01c81ad>] elv_dispatch_sort+0x2d/0x100
[10758.896000] [<c024e7c2>] ide_build_dmatable+0x32/0x170
[10758.896000] [<c01d93d8>] delay_tsc+0x18/0x30
[10758.896000] [<c01d9436>] __delay+0x6/0x10
[10758.896000] [<c0246a02>] ide_do_request+0x532/0x9d0
[10758.896000] [<c01d2626>] cfq_insert_request+0x3b6/0x500
[10758.896000] [<c01c720c>] elv_set_request+0x1c/0x40
[10758.896000] [<c01c9b27>] generic_make_request+0xc7/0x240
[10758.896000] [<c0174a78>] d_splice_alias+0x38/0xf0
[10758.896000] [<c01cc220>] submit_bio+0x40/0xc0
[10758.896000] [<c0173878>] __d_lookup+0x98/0xe0
[10758.896000] [<c0173e65>] dput+0xb5/0x120
[10758.896000] [<c0169d85>] do_lookup+0x65/0x190
[10758.896000] [<c0173e65>] dput+0xb5/0x120
[10758.896000] [<c016bdea>] __link_path_walk+0x8ea/0xcc0
[10758.896000] [<e1156fb2>] uvc_v4l2_do_ioctl+0x4b2/0xfe0 [uvcvideo]
[10758.896000] [<e1156b00>] uvc_v4l2_do_ioctl+0x0/0xfe0 [uvcvideo]
[10758.896000] [<c01186f6>] __cond_resched+0x16/0x40
[10758.896000] [<c02da83a>] cond_resched+0x2a/0x40
[10758.896000] [<e0d9fb71>] video_usercopy+0xc1/0x210 [videodev]
[10758.896000] [<c015245a>] __handle_mm_fault+0x23a/0x990
[10758.896000] [<c01616f0>] do_filp_open+0x50/0x60
[10758.896000] [<e11564e4>] uvc_v4l2_ioctl+0x44/0x60 [uvcvideo]
[10758.896000] [<e1156b00>] uvc_v4l2_do_ioctl+0x0/0xfe0 [uvcvideo]
[10758.896000] [<e11564a0>] uvc_v4l2_ioctl+0x0/0x60 [uvcvideo]
[10758.896000] [<c016e399>] do_ioctl+0x69/0x70
[10758.896000] [<c016e3fc>] vfs_ioctl+0x5c/0x270
[10758.896000] [<c016e682>] sys_ioctl+0x72/0x90
[10758.896000] [<c0102fc0>] sysenter_past_esp+0x69/0xa9
[10758.896000] =======================
[10758.896000] Code: 34 8b 5c 24 54 8b 74 24 58 29 d0 8b 7c 24 5c 83 c4
60 29 d1 89 c2 c1 e2 10 29 c2 89 c8 c1 e8 1f 01 c8 d1 f8 01 c2 89 d0 c1
fa 1f <f7> f9 c3 8b 35 00 e8 d6 e0 85 f6 74 88 89 44 24 04 c7 04 24 a4
[10758.896000] EIP: [<e0d6b204>] get_v4l_control+0xa4/0xf0 [v4l1_compat]
SS:ESP 0068:ccf43974
[10758.896000]

Timo H.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071221/4cdb0c5b/attachment.html>

From alex at alexpounds.com  Fri Dec 21 10:08:37 2007
From: alex at alexpounds.com (Alex Pounds)
Date: Fri, 21 Dec 2007 09:08:37 +0000
Subject: [Linux-uvc-devel] Collision with ALSA device
In-Reply-To: <476AB6CC.6050500@gmx.de>
References: <476AB6CC.6050500@gmx.de>
Message-ID: <20071221090837.GA10105@localhost.localdomain>

On Thu, Dec 20, 2007 at 07:39:08PM +0100, Robert M. Albrecht wrote:
> whenever the webcam is connected while booting the system, the onboard
> sound card does not work.
> 
> Is there any known workaround ?

I have a similar 'problem' - generally when I boot up the webcam's
microphone is found first and that's used as a default sound device. The
solution is to run 'alsaconf' as root to reconfigure ALSA and choose the
correct soundcard to use. There's probably a better solution out there but
I don't reboot frequently enough to go looking for one. :) 


Hope this helps, 

-- 
Alex Pounds (Creature)                  .~.      http://www.alexpounds.com/
                                        /V\     http://www.ethicsgirls.com/
                                       // \\
"Variables won't; Constants aren't"   /(   )\
                                       ^`~'^


From laurent.pinchart at skynet.be  Fri Dec 21 11:55:05 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 21 Dec 2007 11:55:05 +0100
Subject: [Linux-uvc-devel] Divide error with MS vx-7000
In-Reply-To: <3b2d6e400712210042t18d5ae74qb4d00f81ecf372df@mail.gmail.com>
References: <4757CEF4.8060407@gmail.com>
	<3b2d6e400712210042t18d5ae74qb4d00f81ecf372df@mail.gmail.com>
Message-ID: <200712211155.05402.laurent.pinchart@skynet.be>

Hi Timo,

On Friday 21 December 2007 09:42, Timo H wrote:
> I got a Microsoft VX-7000 camera as a gift and tried to get it working. It
> works fine with luvcview, but not with any other v4l2 sw. I even managed
> to change the luvcview-code so that it feeds vloopback and I get it
> working with v4l software (thats ugly but at least makes the camera
> usable to some extent).

Nice trick. I'm pretty sure other users might be interested in this.

Could you please send me the output of lsusb -v (using usbutils 0.72 or 
newer) ? Thanks.

> The biggest problem is that the kopete crashes when the uvcvideo module
> is loaded and the camera is plugged. That is really annoying because the
> camera can't be plugged on when booting. Is there anything to do or is
> there some non-standard things in the camera? (That might be possible
> because it is MS after all). I could debug this more if you could give
> some hints what to do next?

The crash is caused by a bug in the v4l1 compat layer. I raised the issue on 
the video4linux mailing list.

> I added some debugging code from older threads and here is the dmesg
> output:
>
> [10750.400000] uvcvideo: Found UVC 1.00 device Microsoft? LifeCam
> VX-7000 (045e:0723)
> [10750.400000] uvcvideo: Failed to query (135) UVC control 1 (unit 0) :
> -32 (exp. 26).

This error is pretty normal. Most devices don't implement that function, and 
the driver can work around this.

[snip]

> [10758.896000] divide error: 0000 [#10]
> [10758.896000] Modules linked in: uvcvideo usbvideo compat_ioctl32
[snip]
> [10758.896000] CPU: 0
> [10758.896000] EIP: 0060:[<e0d6b204>] Not tainted VLI
> [10758.896000] EFLAGS: 00010256 (2.6.20-16-386 #2)
> [10758.896000] EIP is at get_v4l_control+0xa4/0xf0 [v4l1_compat]
[snip]

Here's the offending v4l1 compat code (drivers/media/video/v4l1_compat.c).

static int
get_v4l_control(struct inode            *inode,
                struct file             *file,
                int                     cid,
                v4l2_kioctl             drv)
{
        struct v4l2_queryctrl   qctrl2;
        struct v4l2_control     ctrl2;
        int                     err;

        qctrl2.id = cid;
        err = drv(inode, file, VIDIOC_QUERYCTRL, &qctrl2);
        if (err < 0)
                dprintk("VIDIOC_QUERYCTRL: %d\n",err);
        if (err == 0 &&
            !(qctrl2.flags & V4L2_CTRL_FLAG_DISABLED))
        {
                ctrl2.id = qctrl2.id;
                err = drv(inode, file, VIDIOC_G_CTRL, &ctrl2);
                if (err < 0) {
                        dprintk("VIDIOC_G_CTRL: %d\n",err);
                        return 0;
                }
                return ((ctrl2.value - qctrl2.minimum) * 65535
                         + (qctrl2.maximum - qctrl2.minimum) / 2)
                        / (qctrl2.maximum - qctrl2.minimum);
        }
        return 0;
}

When qctrl2.maximum equals qctrl2.minimum the code will divide by zero and 
crash.

Best regards,

Laurent Pinchart


From mxhaard at magic.fr  Fri Dec 21 15:00:44 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Fri, 21 Dec 2007 15:00:44 +0100
Subject: [Linux-uvc-devel] Divide error with MS vx-7000
In-Reply-To: <3b2d6e400712210042t18d5ae74qb4d00f81ecf372df@mail.gmail.com>
References: <4757CEF4.8060407@gmail.com>
	<3b2d6e400712210042t18d5ae74qb4d00f81ecf372df@mail.gmail.com>
Message-ID: <200712211500.44873.mxhaard@magic.fr>

Le vendredi 21 d?cembre 2007 09:42, Timo H a ?crit?:
Timo,
> I got a Microsoft VX-7000 camera as a gift and tried to get it working. It
> works fine with luvcview, but not with any other v4l2 sw. I even managed
> to change the luvcview-code so that it feeds vloopback and I get it
> working with v4l software (thats ugly but at least makes the camera
> usable to some extent).
Interresting, can you mail me your change ?
<snip>
>
bests regards
-- 
Michel Xhaard
http://mxhaard.free.fr


From Stephane.Senesi at libertysurf.fr  Fri Dec 21 22:22:21 2007
From: Stephane.Senesi at libertysurf.fr (=?ISO-8859-1?Q?St=E9phane_S=E9n=E9si?=)
Date: Fri, 21 Dec 2007 22:22:21 +0100
Subject: [Linux-uvc-devel] Support forLogitech Quickcam Communicate STX ?
Message-ID: <476C2E8D.9040404@libertysurf.fr>

Hello,

I got this type of Logitech Webcam, which product ID is 08d7;
The gspca driver seems to not recognize it;
It does not show as supported on page http://linux-uvc.berlios.de/#devices

What is the staus of its support by the UVC driver ?

Thanks
St?phane


From shaohuang at gmail.com  Sat Dec 22 03:23:29 2007
From: shaohuang at gmail.com (Brian Pin)
Date: Fri, 21 Dec 2007 18:23:29 -0800
Subject: [Linux-uvc-devel] about number of packets inside URB..
Message-ID: <a81f87bb0712211823ofe3740bmb374a5d6e4d72dab@mail.gmail.com>

In uvc_video.c:

uvc_init_video_isoc(...) {
:
 npackets = (size + psize - 1) / psize;
 if (npackets > UVC_MAX_ISO_PACKETS)
  npackets = UVC_MAX_ISO_PACKETS;
:
}
in mycase I originally have npackets = 199, and after the 3 lines there, it
becomes 40, which is UVC_MAX_ISO_PACKETS.
My question is if there is a frame that needs more than 40 packets to
transfer, how is the data going to be not lost?
Is it because we send multiple URBs (I set UVC_URBS to 1)?

-- 
Best Regards
Brian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071221/e15f8383/attachment.html>

From rankincj at yahoo.com  Sun Dec 23 14:53:12 2007
From: rankincj at yahoo.com (Chris Rankin)
Date: Sun, 23 Dec 2007 13:53:12 +0000 (GMT)
Subject: [Linux-uvc-devel] BUG with uvcvideo SVN and 2.6.23.11
Message-ID: <613695.87540.qm@web52907.mail.re2.yahoo.com>

Hi,

I am running the uvcvideo module from subversion with Linux 2.6.23.11, and I have just found this
BUG in my message log:

usb 4-3: new high speed USB device using ehci_hcd and address 4
usb 4-3: configuration #1 chosen from 1 choice
uvcvideo: Found UVC 1.00 device <unnamed> (046d:0992)
BUG: atomic counter underflow at:
 [<f89c3ee4>] uvc_acquire_privileges+0x34/0x66 [uvcvideo]
 [<f89c4647>] uvc_v4l2_do_ioctl+0x60d/0xcd6 [uvcvideo]
 [<c015ae59>] __slab_free+0xaa/0x2ca
 [<f892303b>] v4l_compat_translate_ioctl+0x1ea3/0x1ebc [v4l1_compat]
 [<f89212ea>] v4l_compat_translate_ioctl+0x152/0x1ebc [v4l1_compat]
 [<f892303b>] v4l_compat_translate_ioctl+0x1ea3/0x1ebc [v4l1_compat]
 [<f892303b>] v4l_compat_translate_ioctl+0x1ea3/0x1ebc [v4l1_compat]
 [<f8921510>] v4l_compat_translate_ioctl+0x378/0x1ebc [v4l1_compat]
 [<c02770b7>] _spin_unlock_irqrestore+0xf/0x23
 [<c01fbd2f>] dma_pool_alloc+0x171/0x17e
 [<c011ae0f>] find_busiest_group+0x1c4/0x547
 [<c011ae0f>] find_busiest_group+0x1c4/0x547
 [<f8848bf6>] qh_append_tds+0x366/0x452 [ehci_hcd]
 [<f88487e3>] qh_urb_transaction+0x2be/0x2fd [ehci_hcd]
 [<c02770b7>] _spin_unlock_irqrestore+0xf/0x23
 [<c01fbd2f>] dma_pool_alloc+0x171/0x17e
 [<c02770b7>] _spin_unlock_irqrestore+0xf/0x23
 [<f8849308>] ehci_urb_enqueue+0x123/0xce1 [ehci_hcd]
 [<c012b727>] __atomic_notifier_call_chain+0x3f/0x5a
 [<c012b759>] atomic_notifier_call_chain+0x17/0x1a
 [<c01ac9f4>] __next_cpu+0x12/0x21
 [<c011ae0f>] find_busiest_group+0x1c4/0x547
 [<c02770b7>] _spin_unlock_irqrestore+0xf/0x23
 [<c0128377>] lock_timer_base+0x19/0x35
 [<c01b0328>] number+0x159/0x231
 [<c02770b7>] _spin_unlock_irqrestore+0xf/0x23
 [<c011a131>] enqueue_entity+0x1d2/0x1f3
 [<c011a3ee>] __check_preempt_curr_fair+0x4d/0x7e
 [<c011dda8>] check_preempt_curr_fair+0x6b/0x71
 [<c0119c2c>] balance_tasks+0xe1/0x10b
 [<c0119cbd>] load_balance_fair+0x67/0x78
 [<c011ddae>] load_balance_start_fair+0x0/0x21
 [<c011a2a2>] load_balance_next_fair+0x0/0x21
 [<c01198ac>] update_stats_wait_end+0x9b/0xbe
 [<c0103038>] __switch_to+0x23/0x13f
 [<c02771f0>] __reacquire_kernel_lock+0x43/0x4b
 [<c0275247>] __sched_text_start+0x5d7/0x5f1
 [<c01ac9f4>] __next_cpu+0x12/0x21
 [<c011ae0f>] find_busiest_group+0x1c4/0x547
 [<c02770b7>] _spin_unlock_irqrestore+0xf/0x23
 [<c016d56e>] __d_lookup+0xee/0x10b
 [<c0164da6>] do_lookup+0x4f/0x140
 [<f89c4c81>] uvc_v4l2_do_ioctl+0xc47/0xcd6 [uvcvideo]
 [<f89c403a>] uvc_v4l2_do_ioctl+0x0/0xcd6 [uvcvideo]
 [<c0170c22>] mntput_no_expire+0x11/0x63
 [<f8a57fc1>] pwc_camera_power+0x6d/0x76 [pwc]
 [<c02761dd>] __mutex_lock_slowpath+0x212/0x21a
 [<f898cb67>] video_usercopy+0x178/0x23d [videodev]
 [<c015d58a>] nameidata_to_filp+0x24/0x33
 [<c015d5cb>] do_filp_open+0x32/0x39
 [<f8a57fc1>] pwc_camera_power+0x6d/0x76 [pwc]
 [<f89c3bb9>] uvc_v4l2_ioctl+0x3b/0x41 [uvcvideo]
 [<f89c403a>] uvc_v4l2_do_ioctl+0x0/0xcd6 [uvcvideo]
 [<c0168954>] do_ioctl+0x4c/0x62
 [<c0168b98>] vfs_ioctl+0x22e/0x240
 [<c0168bdd>] sys_ioctl+0x33/0x4a
 [<c0103f66>] sysenter_past_esp+0x5f/0x85
 [<c027007b>] unix_seq_start+0x2b/0x5a
 =======================

Cheers,
Chris



      ___________________________________________________________
Support the World Aids Awareness campaign this month with Yahoo! For Good http://uk.promotions.yahoo.com/forgood/


From rinolf at gmail.com  Sat Dec 22 17:58:38 2007
From: rinolf at gmail.com (Niklas Larsson)
Date: Sat, 22 Dec 2007 17:58:38 +0100
Subject: [Linux-uvc-devel] Creative Webcam Live! Cam Notebook Ultra
In-Reply-To: <200712202213.56128.laurent.pinchart@skynet.be>
References: <115781230712201135x1ab85efeq8218c1c5556c4ece@mail.gmail.com>
	<200712202213.56128.laurent.pinchart@skynet.be>
Message-ID: <115781230712220858p2def7d15l901aa13dab87d864@mail.gmail.com>

Hi!

This is a lot of info I would have attached it as a file but don't think
that is aload.

This is the output of lsusb -d 041e:405b -v:

Bus 003 Device 004: ID 041e:405b Creative Technology, Ltd
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0        64
  idVendor           0x041e Creative Technology, Ltd
  idProduct          0x405b
  bcdDevice            1.00
  iManufacturer           1 Creative Labs
  iProduct                2 Live! Cam Notebook Ultra
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          385
    bNumInterfaces          3
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              400mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               7
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       1
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               7
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       2
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               7
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       3
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               7
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0400  1x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       4
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               7
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0b00  2x 768 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       5
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               7
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0c00  2x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       6
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               7
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x1380  3x 896 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       7
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               7
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0
      iInterface              2 Live! Cam Notebook Ultra
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           40
        bInCollection           1
        baInterfaceNr( 0)       2
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0602 Digital Audio Interface
        bAssocTerminal          0
        bNrChannels             2
        wChannelConfig     0x0033
          Left Front (L)
          Right Front (R)
          Left Surround (LS)
          Right Surround (RS)
        iChannelNames           0
        iTerminal               0
      AudioControl Interface Descriptor:
        bLength                10
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 2
        bSourceID               1
        bControlSize            1
        bmaControls( 0)      0x00
        bmaControls( 1)      0x03
          Mute
          Volume
        bmaControls( 2)      0x03
          Mute
          Volume
        iFeature                0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               2
        iTerminal               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                35
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            9 Discrete
        tSamFreq[ 0]         8000
        tSamFreq[ 1]        11025
        tSamFreq[ 2]        12000
        tSamFreq[ 3]        16000
        tSamFreq[ 4]        22050
        tSamFreq[ 5]        24000
        tSamFreq[ 6]        32000
        tSamFreq[ 7]        44100
        tSamFreq[ 8]        48000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0062  1x 98 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                35
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             2
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            9 Discrete
        tSamFreq[ 0]         8000
        tSamFreq[ 1]        11025
        tSamFreq[ 2]        12000
        tSamFreq[ 3]        16000
        tSamFreq[ 4]        22050
        tSamFreq[ 5]        24000
        tSamFreq[ 6]        32000
        tSamFreq[ 7]        44100
        tSamFreq[ 8]        48000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x00c4  1x 196 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)

Best regards
Niklas

On Dec 20, 2007 10:13 PM, Laurent Pinchart <laurent.pinchart at skynet.be>
wrote:

> Hi Niklas,
>
> On Thursday 20 December 2007, Niklas Larsson wrote:
> > Hi!
> >
> > I have bought a Creative Webcam Live! Cam Notebook Ultra and now i
> > discovered that there is no linux drivers for it (maybe should have
> thought
> > of that earlier!). This is the info I got:
> >
> > $ lsusb | grep Creative
> > Bus 003 Device 006: ID 041e:405b Creative Technology, Ltd
> >
> > Any thing else i can provide you with?
>
> lsusb -d 041e:405b -v would help.
>
> Best regards,
>
> Laurent Pinchart
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071222/8bd86e92/attachment.html>

From abotezatu at gmail.com  Mon Dec 24 08:09:37 2007
From: abotezatu at gmail.com (Alexandru Botezatu)
Date: Mon, 24 Dec 2007 09:09:37 +0200
Subject: [Linux-uvc-devel] Fwd: Panasonic PV-GS500 not working with any of
	the webcam apps
In-Reply-To: <164b2cf80712232303i293eacacodd630560cca9dcc3@mail.gmail.com>
References: <164b2cf80712232303i293eacacodd630560cca9dcc3@mail.gmail.com>
Message-ID: <164b2cf80712232309n302c45c9nacd68e3de2d552e7@mail.gmail.com>

Hi,

I'd like to report a problem with ekiga and all other webcam apps that
do not work with my camera in webcam mode. The camera works with
luvcview and mplayer, though. I really want to be able to use it in
skype or Ekiga.

I read a few threads here on other panasonic cameras and saw that it
was possible to get some of them to work with Ekiga. Can you help me
with my model as well?

Here is the output of dmesg when turning the camera on in webcam mode:

[263155.941893] usb 2-2: new full speed USB device using ohci_hcd and address 27
[263156.099613] usb 2-2: configuration #1 chosen from 1 choice
[263156.105574] uvcvideo: Probing generic UVC device 2
[263156.105586] uvcvideo: Found format MJPEG.
[263156.105591] uvcvideo: - 320x240 (14.9 fps)
[263156.117498] uvcvideo: Found a Status endpoint (addr 86).
[263156.117505] uvcvideo: Found UVC 1.00 device DVC (04da:231d)
[263156.117518] uvcvideo: Scanning UVC chain: OT 3 <- SU 4 <- IT 1 2
[263156.117526] uvcvideo: Found a valid video chain (1,2 -> 3).
[263156.127532] uvcvideo: UVC device initialized.


and in DV mode:

[262857.677671] usb 1-2: new high speed USB device using ehci_hcd and address 32
[262857.795013] usb 1-2: configuration #1 chosen from 1 choice
[262857.795689] uvcvideo: Probing generic UVC device 2
[262857.795702] uvcvideo: device 32 videostreaminginterface 1: unknown
DV format 128
[262857.798003] uvcvideo: Found a Status endpoint (addr 86).
[262857.798010] uvcvideo: Found UVC 1.00 device DVC (04da:231e)
[262857.798023] uvcvideo: Scanning UVC chain: OT 3 <- XU 5 <- SU 4 <- IT 1 2
[262857.798032] uvcvideo: No valid video chain found.

Here is the output of lsusb:

Bus 002 Device 027: ID 04da:231d Panasonic (Matsushita)
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x04da Panasonic (Matsushita)
  idProduct          0x231d
  bcdDevice            1.00
  iManufacturer           1 Panasonic
  iProduct                2 DVC
  iSerial                 3 0000118d60cb
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          286
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0xc0
      Self Powered
    MaxPower                2mA
    UNRECOGNIZED:  08 0b 00 02 0e 03 00 04
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              4 Web-Camera
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              9 VideoStreamingInterface
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              9 VideoStreamingInterface
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
        UNRECOGNIZED:  08 0b 02 02 01 01 00 02
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0
      iInterface              0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           30
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             2
        wChannelConfig     0x0003
          Left Front (L)
          Right Front (R)
        iChannelNames           0
        iTerminal               0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               1
        iTerminal               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           2
        bDelay                  2 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             2
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            1 Discrete
        tSamFreq[ 0]        16000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               1
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x00
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined

Please let me know if you need any more information.
Thank you.


From mail at andreas-demmer.de  Thu Dec 27 16:19:37 2007
From: mail at andreas-demmer.de (Andreas Demmer)
Date: Thu, 27 Dec 2007 16:19:37 +0100
Subject: [Linux-uvc-devel] built-in logitech webcam (dell oem) not recognized
Message-ID: <200712271619.37429.mail@andreas-demmer.de>

Hi,

I own a Dell XPS M2010 Notebook with a built-in webcam. lsusb identifies it as 
an logitech device, but the ID 046d:0897 seems to be no supported Logitech 
webcam:

--------------------
Bus 005 Device 009: ID 046d:0897 Logitech, Inc.
Device Descriptor:
? bLength ? ? ? ? ? ? ? ?18
? bDescriptorType ? ? ? ? 1
? bcdUSB ? ? ? ? ? ? ? 2.00
? bDeviceClass ? ? ? ? ?255 Vendor Specific Class
? bDeviceSubClass ? ? ? 255 Vendor Specific Subclass
? bDeviceProtocol ? ? ? 255 Vendor Specific Protocol
? bMaxPacketSize0 ? ? ? ?64
? idVendor ? ? ? ? ? 0x046d Logitech, Inc.
? idProduct ? ? ? ? ?0x0897
? bcdDevice ? ? ? ? ? ?1.00
? iManufacturer ? ? ? ? ? 1 OEM
? iProduct ? ? ? ? ? ? ? ?2 Camera
? iSerial ? ? ? ? ? ? ? ? 0
? bNumConfigurations ? ? ?1
? Configuration Descriptor:
? ? bLength ? ? ? ? ? ? ? ? 9
? ? bDescriptorType ? ? ? ? 2
? ? wTotalLength ? ? ? ? ?193
? ? bNumInterfaces ? ? ? ? ?1
? ? bConfigurationValue ? ? 1
? ? iConfiguration ? ? ? ? ?0
? ? bmAttributes ? ? ? ? 0x80
? ? ? (Bus Powered)
? ? MaxPower ? ? ? ? ? ? ?200mA
? ? Interface Descriptor:
? ? ? bLength ? ? ? ? ? ? ? ? 9
? ? ? bDescriptorType ? ? ? ? 4
? ? ? bInterfaceNumber ? ? ? ?0
? ? ? bAlternateSetting ? ? ? 0
? ? ? bNumEndpoints ? ? ? ? ? 2
? ? ? bInterfaceClass ? ? ? 255 Vendor Specific Class
? ? ? bInterfaceSubClass ? ? ?0
? ? ? bInterfaceProtocol ? ? ?0
? ? ? iInterface ? ? ? ? ? ? ?0
? ? ? Endpoint Descriptor:
? ? ? ? bLength ? ? ? ? ? ? ? ? 7
? ? ? ? bDescriptorType ? ? ? ? 5
? ? ? ? bEndpointAddress ? ? 0x81 ?EP 1 IN
? ? ? ? bmAttributes ? ? ? ? ? ?3
? ? ? ? ? Transfer Type ? ? ? ? ? ?Interrupt
? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
? ? ? ? wMaxPacketSize ? ? 0x0008 ?1x 8 bytes
? ? ? ? bInterval ? ? ? ? ? ? ? 7
? ? ? Endpoint Descriptor:
? ? ? ? bLength ? ? ? ? ? ? ? ? 7
? ? ? ? bDescriptorType ? ? ? ? 5
? ? ? ? bEndpointAddress ? ? 0x82 ?EP 2 IN
? ? ? ? bmAttributes ? ? ? ? ? ?1
? ? ? ? ? Transfer Type ? ? ? ? ? ?Isochronous
? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
? ? ? ? wMaxPacketSize ? ? 0x0000 ?1x 0 bytes
? ? ? ? bInterval ? ? ? ? ? ? ? 1
? ? Interface Descriptor:
? ? ? bLength ? ? ? ? ? ? ? ? 9
? ? ? bDescriptorType ? ? ? ? 4
? ? ? bInterfaceNumber ? ? ? ?0
? ? ? bAlternateSetting ? ? ? 1
? ? ? bNumEndpoints ? ? ? ? ? 2
? ? ? bInterfaceClass ? ? ? 255 Vendor Specific Class
? ? ? bInterfaceSubClass ? ? ?0
? ? ? bInterfaceProtocol ? ? ?0
? ? ? iInterface ? ? ? ? ? ? ?0
? ? ? Endpoint Descriptor:
? ? ? ? bLength ? ? ? ? ? ? ? ? 7
? ? ? ? bDescriptorType ? ? ? ? 5
? ? ? ? bEndpointAddress ? ? 0x81 ?EP 1 IN
? ? ? ? bmAttributes ? ? ? ? ? ?3
? ? ? ? ? Transfer Type ? ? ? ? ? ?Interrupt
? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
? ? ? ? wMaxPacketSize ? ? 0x0008 ?1x 8 bytes
? ? ? ? bInterval ? ? ? ? ? ? ? 7
? ? ? Endpoint Descriptor:
? ? ? ? bLength ? ? ? ? ? ? ? ? 7
? ? ? ? bDescriptorType ? ? ? ? 5
? ? ? ? bEndpointAddress ? ? 0x82 ?EP 2 IN
? ? ? ? bmAttributes ? ? ? ? ? ?1
? ? ? ? ? Transfer Type ? ? ? ? ? ?Isochronous
? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
? ? ? ? wMaxPacketSize ? ? 0x0080 ?1x 128 bytes
? ? ? ? bInterval ? ? ? ? ? ? ? 1
? ? Interface Descriptor:
? ? ? bLength ? ? ? ? ? ? ? ? 9
? ? ? bDescriptorType ? ? ? ? 4
? ? ? bInterfaceNumber ? ? ? ?0
? ? ? bAlternateSetting ? ? ? 2
? ? ? bNumEndpoints ? ? ? ? ? 2
? ? ? bInterfaceClass ? ? ? 255 Vendor Specific Class
? ? ? bInterfaceSubClass ? ? ?0
? ? ? bInterfaceProtocol ? ? ?0
? ? ? iInterface ? ? ? ? ? ? ?0
? ? ? Endpoint Descriptor:
? ? ? ? bLength ? ? ? ? ? ? ? ? 7
? ? ? ? bDescriptorType ? ? ? ? 5
? ? ? ? bEndpointAddress ? ? 0x81 ?EP 1 IN
? ? ? ? bmAttributes ? ? ? ? ? ?3
? ? ? ? ? Transfer Type ? ? ? ? ? ?Interrupt
? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
? ? ? ? wMaxPacketSize ? ? 0x0008 ?1x 8 bytes
? ? ? ? bInterval ? ? ? ? ? ? ? 7
? ? ? Endpoint Descriptor:
? ? ? ? bLength ? ? ? ? ? ? ? ? 7
? ? ? ? bDescriptorType ? ? ? ? 5
? ? ? ? bEndpointAddress ? ? 0x82 ?EP 2 IN
? ? ? ? bmAttributes ? ? ? ? ? ?1
? ? ? ? ? Transfer Type ? ? ? ? ? ?Isochronous
? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
? ? ? ? wMaxPacketSize ? ? 0x0200 ?1x 512 bytes
? ? ? ? bInterval ? ? ? ? ? ? ? 1
? ? Interface Descriptor:
? ? ? bLength ? ? ? ? ? ? ? ? 9
? ? ? bDescriptorType ? ? ? ? 4
? ? ? bInterfaceNumber ? ? ? ?0
? ? ? bAlternateSetting ? ? ? 3
? ? ? bNumEndpoints ? ? ? ? ? 2
? ? ? bInterfaceClass ? ? ? 255 Vendor Specific Class
? ? ? bInterfaceSubClass ? ? ?0
? ? ? bInterfaceProtocol ? ? ?0
? ? ? iInterface ? ? ? ? ? ? ?0
? ? ? Endpoint Descriptor:
? ? ? ? bLength ? ? ? ? ? ? ? ? 7
? ? ? ? bDescriptorType ? ? ? ? 5
? ? ? ? bEndpointAddress ? ? 0x81 ?EP 1 IN
? ? ? ? bmAttributes ? ? ? ? ? ?3
? ? ? ? ? Transfer Type ? ? ? ? ? ?Interrupt
? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
? ? ? ? wMaxPacketSize ? ? 0x0008 ?1x 8 bytes
? ? ? ? bInterval ? ? ? ? ? ? ? 7
? ? ? Endpoint Descriptor:
? ? ? ? bLength ? ? ? ? ? ? ? ? 7
? ? ? ? bDescriptorType ? ? ? ? 5
? ? ? ? bEndpointAddress ? ? 0x82 ?EP 2 IN
? ? ? ? bmAttributes ? ? ? ? ? ?1
? ? ? ? ? Transfer Type ? ? ? ? ? ?Isochronous
? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
? ? ? ? wMaxPacketSize ? ? 0x0400 ?1x 0 bytes
? ? ? ? bInterval ? ? ? ? ? ? ? 1
? ? Interface Descriptor:
? ? ? bLength ? ? ? ? ? ? ? ? 9
? ? ? bDescriptorType ? ? ? ? 4
? ? ? bInterfaceNumber ? ? ? ?0
? ? ? bAlternateSetting ? ? ? 4
? ? ? bNumEndpoints ? ? ? ? ? 2
? ? ? bInterfaceClass ? ? ? 255 Vendor Specific Class
? ? ? bInterfaceSubClass ? ? ?0
? ? ? bInterfaceProtocol ? ? ?0
? ? ? iInterface ? ? ? ? ? ? ?0
? ? ? Endpoint Descriptor:
? ? ? ? bLength ? ? ? ? ? ? ? ? 7
? ? ? ? bDescriptorType ? ? ? ? 5
? ? ? ? bEndpointAddress ? ? 0x81 ?EP 1 IN
? ? ? ? bmAttributes ? ? ? ? ? ?3
? ? ? ? ? Transfer Type ? ? ? ? ? ?Interrupt
? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
? ? ? ? wMaxPacketSize ? ? 0x0008 ?1x 8 bytes
? ? ? ? bInterval ? ? ? ? ? ? ? 7
? ? ? Endpoint Descriptor:
? ? ? ? bLength ? ? ? ? ? ? ? ? 7
? ? ? ? bDescriptorType ? ? ? ? 5
? ? ? ? bEndpointAddress ? ? 0x82 ?EP 2 IN
? ? ? ? bmAttributes ? ? ? ? ? ?1
? ? ? ? ? Transfer Type ? ? ? ? ? ?Isochronous
? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
? ? ? ? wMaxPacketSize ? ? 0x0b00 ?2x 768 bytes
? ? ? ? bInterval ? ? ? ? ? ? ? 1
? ? Interface Descriptor:
? ? ? bLength ? ? ? ? ? ? ? ? 9
? ? ? bDescriptorType ? ? ? ? 4
? ? ? bInterfaceNumber ? ? ? ?0
? ? ? bAlternateSetting ? ? ? 5
? ? ? bNumEndpoints ? ? ? ? ? 2
? ? ? bInterfaceClass ? ? ? 255 Vendor Specific Class
? ? ? bInterfaceSubClass ? ? ?0
? ? ? bInterfaceProtocol ? ? ?0
? ? ? iInterface ? ? ? ? ? ? ?0
? ? ? Endpoint Descriptor:
? ? ? ? bLength ? ? ? ? ? ? ? ? 7
? ? ? ? bDescriptorType ? ? ? ? 5
? ? ? ? bEndpointAddress ? ? 0x81 ?EP 1 IN
? ? ? ? bmAttributes ? ? ? ? ? ?3
? ? ? ? ? Transfer Type ? ? ? ? ? ?Interrupt
? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
? ? ? ? wMaxPacketSize ? ? 0x0008 ?1x 8 bytes
? ? ? ? bInterval ? ? ? ? ? ? ? 7
? ? ? Endpoint Descriptor:
? ? ? ? bLength ? ? ? ? ? ? ? ? 7
? ? ? ? bDescriptorType ? ? ? ? 5
? ? ? ? bEndpointAddress ? ? 0x82 ?EP 2 IN
? ? ? ? bmAttributes ? ? ? ? ? ?1
? ? ? ? ? Transfer Type ? ? ? ? ? ?Isochronous
? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
? ? ? ? wMaxPacketSize ? ? 0x0c00 ?2x 0 bytes
? ? ? ? bInterval ? ? ? ? ? ? ? 1
? ? Interface Descriptor:
? ? ? bLength ? ? ? ? ? ? ? ? 9
? ? ? bDescriptorType ? ? ? ? 4
? ? ? bInterfaceNumber ? ? ? ?0
? ? ? bAlternateSetting ? ? ? 6
? ? ? bNumEndpoints ? ? ? ? ? 2
? ? ? bInterfaceClass ? ? ? 255 Vendor Specific Class
? ? ? bInterfaceSubClass ? ? ?0
? ? ? bInterfaceProtocol ? ? ?0
? ? ? iInterface ? ? ? ? ? ? ?0
? ? ? Endpoint Descriptor:
? ? ? ? bLength ? ? ? ? ? ? ? ? 7
? ? ? ? bDescriptorType ? ? ? ? 5
? ? ? ? bEndpointAddress ? ? 0x81 ?EP 1 IN
? ? ? ? bmAttributes ? ? ? ? ? ?3
? ? ? ? ? Transfer Type ? ? ? ? ? ?Interrupt
? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
? ? ? ? wMaxPacketSize ? ? 0x0008 ?1x 8 bytes
? ? ? ? bInterval ? ? ? ? ? ? ? 7
? ? ? Endpoint Descriptor:
? ? ? ? bLength ? ? ? ? ? ? ? ? 7
? ? ? ? bDescriptorType ? ? ? ? 5
? ? ? ? bEndpointAddress ? ? 0x82 ?EP 2 IN
? ? ? ? bmAttributes ? ? ? ? ? ?1
? ? ? ? ? Transfer Type ? ? ? ? ? ?Isochronous
? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
? ? ? ? wMaxPacketSize ? ? 0x1380 ?3x 896 bytes
? ? ? ? bInterval ? ? ? ? ? ? ? 1
? ? Interface Descriptor:
? ? ? bLength ? ? ? ? ? ? ? ? 9
? ? ? bDescriptorType ? ? ? ? 4
? ? ? bInterfaceNumber ? ? ? ?0
? ? ? bAlternateSetting ? ? ? 7
? ? ? bNumEndpoints ? ? ? ? ? 2
? ? ? bInterfaceClass ? ? ? 255 Vendor Specific Class
? ? ? bInterfaceSubClass ? ? ?0
? ? ? bInterfaceProtocol ? ? ?0
? ? ? iInterface ? ? ? ? ? ? ?0
? ? ? Endpoint Descriptor:
? ? ? ? bLength ? ? ? ? ? ? ? ? 7
? ? ? ? bDescriptorType ? ? ? ? 5
? ? ? ? bEndpointAddress ? ? 0x81 ?EP 1 IN
? ? ? ? bmAttributes ? ? ? ? ? ?3
? ? ? ? ? Transfer Type ? ? ? ? ? ?Interrupt
? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
? ? ? ? wMaxPacketSize ? ? 0x0008 ?1x 8 bytes
? ? ? ? bInterval ? ? ? ? ? ? ? 7
? ? ? Endpoint Descriptor:
? ? ? ? bLength ? ? ? ? ? ? ? ? 7
? ? ? ? bDescriptorType ? ? ? ? 5
? ? ? ? bEndpointAddress ? ? 0x82 ?EP 2 IN
? ? ? ? bmAttributes ? ? ? ? ? ?1
? ? ? ? ? Transfer Type ? ? ? ? ? ?Isochronous
? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
? ? ? ? wMaxPacketSize ? ? 0x1400 ?3x 0 bytes
? ? ? ? bInterval ? ? ? ? ? ? ? 1
Device Qualifier (for other device speed):
? bLength ? ? ? ? ? ? ? ?10
? bDescriptorType ? ? ? ? 6
? bcdUSB ? ? ? ? ? ? ? 2.00
? bDeviceClass ? ? ? ? ? ?0 (Defined at Interface level)
? bDeviceSubClass ? ? ? ? 0
? bDeviceProtocol ? ? ? ? 0
? bMaxPacketSize0 ? ? ? ?64
? bNumConfigurations ? ? ?1
Device Status: ? ? 0x0000
? (Bus Powered)
--------------------

I tried to add this ID to the ucv_driver.c file and compiled afterwards:

--------------------
static struct usb_device_id uvc_ids[] = {
? ? ? ? ?/* Dell XPS M2010 built-in webcam */
? ? ? ? { .match_flags ? ? ? ? ?= USB_DEVICE_ID_MATCH_DEVICE
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? | USB_DEVICE_ID_MATCH_INT_INFO,
? ? ? ? ? .idVendor ? ? ? ? ? ? = 0x046d,
? ? ? ? ? .idProduct ? ? ? ? ? ?= 0x0897,
? ? ? ? ? .bInterfaceClass ? ? ?= USB_CLASS_VENDOR_SPEC,
? ? ? ? ? .bInterfaceSubClass ? = 1,
? ? ? ? ? .bInterfaceProtocol ? = 0 },
--------------------

The module loads smoothly "modprobe -v uvcvideo" sais:

install /sbin/modprobe snd_usb_audio; /sbin/modprobe --ignore-install uvcvideo
insmod /lib/modules/2.6.22.13-0.3-default/usb/media/uvcvideo.ko

and adds the following output to /var/log/messages:

Dec 27 15:57:55 onyx kernel: usbcore: deregistering interface driver uvcvideo
Dec 27 15:57:59 onyx kernel: usbcore: registered new interface driver uvcvideo
Dec 27 15:57:59 onyx kernel: USB Video Class driver (v0.1.0)

But still, I do not have a /dev/video0 device.

"lsmod | grep uvc" tells me that the modules seem to be working:

uvcvideo ? ? ? ? ? ? ? 52356 ?0 
compat_ioctl32 ? ? ? ? ?5376 ?1 uvcvideo
videodev ? ? ? ? ? ? ? 30464 ?2 uvcvideo,gspca
v4l2_common ? ? ? ? ? ?20608 ?2 uvcvideo,videodev
v4l1_compat ? ? ? ? ? ?16388 ?2 uvcvideo,videodev
usbcore ? ? ? ? ? ? ? 123756 ?8 
uvcvideo,uhci_hcd,gspca,snd_usb_audio,snd_usb_lib,usbhid,ehci_hcd

Any idea would I should do to get my webcam working? As far as this is an 
Logitech device, this should not be a big problem, should it?

Greets,
Andreas

-- 
http://www.andreas-demmer.de

From mxhaard at magic.fr  Thu Dec 27 17:23:12 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Thu, 27 Dec 2007 17:23:12 +0100
Subject: [Linux-uvc-devel] built-in logitech webcam (dell oem) not
	recognized
In-Reply-To: <200712271619.37429.mail@andreas-demmer.de>
References: <200712271619.37429.mail@andreas-demmer.de>
Message-ID: <200712271723.12604.mxhaard@magic.fr>

Le jeudi 27 d?cembre 2007 16:19, Andreas Demmer a ?crit?:
> Hi,
>
> I own a Dell XPS M2010 Notebook with a built-in webcam. lsusb identifies it
> as an logitech device, but the ID 046d:0897 seems to be no supported
> Logitech webcam:
>
> --------------------
> Bus 005 Device 009: ID 046d:0897 Logitech, Inc.
> Device Descriptor:
> ? bLength ? ? ? ? ? ? ? ?18
> ? bDescriptorType ? ? ? ? 1
> ? bcdUSB ? ? ? ? ? ? ? 2.00
> ? bDeviceClass ? ? ? ? ?255 Vendor Specific Class
> ? bDeviceSubClass ? ? ? 255 Vendor Specific Subclass
> ? bDeviceProtocol ? ? ? 255 Vendor Specific Protocol
> ? bMaxPacketSize0 ? ? ? ?64
> ? idVendor ? ? ? ? ? 0x046d Logitech, Inc.
> ? idProduct ? ? ? ? ?0x0897
> ? bcdDevice ? ? ? ? ? ?1.00
> ? iManufacturer ? ? ? ? ? 1 OEM
> ? iProduct ? ? ? ? ? ? ? ?2 Camera
> ? iSerial ? ? ? ? ? ? ? ? 0
> ? bNumConfigurations ? ? ?1
> ? Configuration Descriptor:
> ? ? bLength ? ? ? ? ? ? ? ? 9
> ? ? bDescriptorType ? ? ? ? 2
> ? ? wTotalLength ? ? ? ? ?193
> ? ? bNumInterfaces ? ? ? ? ?1
> ? ? bConfigurationValue ? ? 1
> ? ? iConfiguration ? ? ? ? ?0
> ? ? bmAttributes ? ? ? ? 0x80
> ? ? ? (Bus Powered)
> ? ? MaxPower ? ? ? ? ? ? ?200mA
> ? ? Interface Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ? 9
> ? ? ? bDescriptorType ? ? ? ? 4
> ? ? ? bInterfaceNumber ? ? ? ?0
> ? ? ? bAlternateSetting ? ? ? 0
> ? ? ? bNumEndpoints ? ? ? ? ? 2
> ? ? ? bInterfaceClass ? ? ? 255 Vendor Specific Class
> ? ? ? bInterfaceSubClass ? ? ?0
> ? ? ? bInterfaceProtocol ? ? ?0
> ? ? ? iInterface ? ? ? ? ? ? ?0
> ? ? ? Endpoint Descriptor:
> ? ? ? ? bLength ? ? ? ? ? ? ? ? 7
> ? ? ? ? bDescriptorType ? ? ? ? 5
> ? ? ? ? bEndpointAddress ? ? 0x81 ?EP 1 IN
> ? ? ? ? bmAttributes ? ? ? ? ? ?3
> ? ? ? ? ? Transfer Type ? ? ? ? ? ?Interrupt
> ? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
> ? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
> ? ? ? ? wMaxPacketSize ? ? 0x0008 ?1x 8 bytes
> ? ? ? ? bInterval ? ? ? ? ? ? ? 7
> ? ? ? Endpoint Descriptor:
> ? ? ? ? bLength ? ? ? ? ? ? ? ? 7
> ? ? ? ? bDescriptorType ? ? ? ? 5
> ? ? ? ? bEndpointAddress ? ? 0x82 ?EP 2 IN
> ? ? ? ? bmAttributes ? ? ? ? ? ?1
> ? ? ? ? ? Transfer Type ? ? ? ? ? ?Isochronous
> ? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
> ? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
> ? ? ? ? wMaxPacketSize ? ? 0x0000 ?1x 0 bytes
> ? ? ? ? bInterval ? ? ? ? ? ? ? 1
> ? ? Interface Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ? 9
> ? ? ? bDescriptorType ? ? ? ? 4
> ? ? ? bInterfaceNumber ? ? ? ?0
> ? ? ? bAlternateSetting ? ? ? 1
> ? ? ? bNumEndpoints ? ? ? ? ? 2
> ? ? ? bInterfaceClass ? ? ? 255 Vendor Specific Class
> ? ? ? bInterfaceSubClass ? ? ?0
> ? ? ? bInterfaceProtocol ? ? ?0
> ? ? ? iInterface ? ? ? ? ? ? ?0
> ? ? ? Endpoint Descriptor:
> ? ? ? ? bLength ? ? ? ? ? ? ? ? 7
> ? ? ? ? bDescriptorType ? ? ? ? 5
> ? ? ? ? bEndpointAddress ? ? 0x81 ?EP 1 IN
> ? ? ? ? bmAttributes ? ? ? ? ? ?3
> ? ? ? ? ? Transfer Type ? ? ? ? ? ?Interrupt
> ? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
> ? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
> ? ? ? ? wMaxPacketSize ? ? 0x0008 ?1x 8 bytes
> ? ? ? ? bInterval ? ? ? ? ? ? ? 7
> ? ? ? Endpoint Descriptor:
> ? ? ? ? bLength ? ? ? ? ? ? ? ? 7
> ? ? ? ? bDescriptorType ? ? ? ? 5
> ? ? ? ? bEndpointAddress ? ? 0x82 ?EP 2 IN
> ? ? ? ? bmAttributes ? ? ? ? ? ?1
> ? ? ? ? ? Transfer Type ? ? ? ? ? ?Isochronous
> ? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
> ? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
> ? ? ? ? wMaxPacketSize ? ? 0x0080 ?1x 128 bytes
> ? ? ? ? bInterval ? ? ? ? ? ? ? 1
> ? ? Interface Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ? 9
> ? ? ? bDescriptorType ? ? ? ? 4
> ? ? ? bInterfaceNumber ? ? ? ?0
> ? ? ? bAlternateSetting ? ? ? 2
> ? ? ? bNumEndpoints ? ? ? ? ? 2
> ? ? ? bInterfaceClass ? ? ? 255 Vendor Specific Class
> ? ? ? bInterfaceSubClass ? ? ?0
> ? ? ? bInterfaceProtocol ? ? ?0
> ? ? ? iInterface ? ? ? ? ? ? ?0
> ? ? ? Endpoint Descriptor:
> ? ? ? ? bLength ? ? ? ? ? ? ? ? 7
> ? ? ? ? bDescriptorType ? ? ? ? 5
> ? ? ? ? bEndpointAddress ? ? 0x81 ?EP 1 IN
> ? ? ? ? bmAttributes ? ? ? ? ? ?3
> ? ? ? ? ? Transfer Type ? ? ? ? ? ?Interrupt
> ? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
> ? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
> ? ? ? ? wMaxPacketSize ? ? 0x0008 ?1x 8 bytes
> ? ? ? ? bInterval ? ? ? ? ? ? ? 7
> ? ? ? Endpoint Descriptor:
> ? ? ? ? bLength ? ? ? ? ? ? ? ? 7
> ? ? ? ? bDescriptorType ? ? ? ? 5
> ? ? ? ? bEndpointAddress ? ? 0x82 ?EP 2 IN
> ? ? ? ? bmAttributes ? ? ? ? ? ?1
> ? ? ? ? ? Transfer Type ? ? ? ? ? ?Isochronous
> ? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
> ? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
> ? ? ? ? wMaxPacketSize ? ? 0x0200 ?1x 512 bytes
> ? ? ? ? bInterval ? ? ? ? ? ? ? 1
> ? ? Interface Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ? 9
> ? ? ? bDescriptorType ? ? ? ? 4
> ? ? ? bInterfaceNumber ? ? ? ?0
> ? ? ? bAlternateSetting ? ? ? 3
> ? ? ? bNumEndpoints ? ? ? ? ? 2
> ? ? ? bInterfaceClass ? ? ? 255 Vendor Specific Class
> ? ? ? bInterfaceSubClass ? ? ?0
> ? ? ? bInterfaceProtocol ? ? ?0
> ? ? ? iInterface ? ? ? ? ? ? ?0
> ? ? ? Endpoint Descriptor:
> ? ? ? ? bLength ? ? ? ? ? ? ? ? 7
> ? ? ? ? bDescriptorType ? ? ? ? 5
> ? ? ? ? bEndpointAddress ? ? 0x81 ?EP 1 IN
> ? ? ? ? bmAttributes ? ? ? ? ? ?3
> ? ? ? ? ? Transfer Type ? ? ? ? ? ?Interrupt
> ? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
> ? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
> ? ? ? ? wMaxPacketSize ? ? 0x0008 ?1x 8 bytes
> ? ? ? ? bInterval ? ? ? ? ? ? ? 7
> ? ? ? Endpoint Descriptor:
> ? ? ? ? bLength ? ? ? ? ? ? ? ? 7
> ? ? ? ? bDescriptorType ? ? ? ? 5
> ? ? ? ? bEndpointAddress ? ? 0x82 ?EP 2 IN
> ? ? ? ? bmAttributes ? ? ? ? ? ?1
> ? ? ? ? ? Transfer Type ? ? ? ? ? ?Isochronous
> ? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
> ? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
> ? ? ? ? wMaxPacketSize ? ? 0x0400 ?1x 0 bytes
> ? ? ? ? bInterval ? ? ? ? ? ? ? 1
> ? ? Interface Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ? 9
> ? ? ? bDescriptorType ? ? ? ? 4
> ? ? ? bInterfaceNumber ? ? ? ?0
> ? ? ? bAlternateSetting ? ? ? 4
> ? ? ? bNumEndpoints ? ? ? ? ? 2
> ? ? ? bInterfaceClass ? ? ? 255 Vendor Specific Class
> ? ? ? bInterfaceSubClass ? ? ?0
> ? ? ? bInterfaceProtocol ? ? ?0
> ? ? ? iInterface ? ? ? ? ? ? ?0
> ? ? ? Endpoint Descriptor:
> ? ? ? ? bLength ? ? ? ? ? ? ? ? 7
> ? ? ? ? bDescriptorType ? ? ? ? 5
> ? ? ? ? bEndpointAddress ? ? 0x81 ?EP 1 IN
> ? ? ? ? bmAttributes ? ? ? ? ? ?3
> ? ? ? ? ? Transfer Type ? ? ? ? ? ?Interrupt
> ? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
> ? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
> ? ? ? ? wMaxPacketSize ? ? 0x0008 ?1x 8 bytes
> ? ? ? ? bInterval ? ? ? ? ? ? ? 7
> ? ? ? Endpoint Descriptor:
> ? ? ? ? bLength ? ? ? ? ? ? ? ? 7
> ? ? ? ? bDescriptorType ? ? ? ? 5
> ? ? ? ? bEndpointAddress ? ? 0x82 ?EP 2 IN
> ? ? ? ? bmAttributes ? ? ? ? ? ?1
> ? ? ? ? ? Transfer Type ? ? ? ? ? ?Isochronous
> ? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
> ? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
> ? ? ? ? wMaxPacketSize ? ? 0x0b00 ?2x 768 bytes
> ? ? ? ? bInterval ? ? ? ? ? ? ? 1
> ? ? Interface Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ? 9
> ? ? ? bDescriptorType ? ? ? ? 4
> ? ? ? bInterfaceNumber ? ? ? ?0
> ? ? ? bAlternateSetting ? ? ? 5
> ? ? ? bNumEndpoints ? ? ? ? ? 2
> ? ? ? bInterfaceClass ? ? ? 255 Vendor Specific Class
> ? ? ? bInterfaceSubClass ? ? ?0
> ? ? ? bInterfaceProtocol ? ? ?0
> ? ? ? iInterface ? ? ? ? ? ? ?0
> ? ? ? Endpoint Descriptor:
> ? ? ? ? bLength ? ? ? ? ? ? ? ? 7
> ? ? ? ? bDescriptorType ? ? ? ? 5
> ? ? ? ? bEndpointAddress ? ? 0x81 ?EP 1 IN
> ? ? ? ? bmAttributes ? ? ? ? ? ?3
> ? ? ? ? ? Transfer Type ? ? ? ? ? ?Interrupt
> ? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
> ? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
> ? ? ? ? wMaxPacketSize ? ? 0x0008 ?1x 8 bytes
> ? ? ? ? bInterval ? ? ? ? ? ? ? 7
> ? ? ? Endpoint Descriptor:
> ? ? ? ? bLength ? ? ? ? ? ? ? ? 7
> ? ? ? ? bDescriptorType ? ? ? ? 5
> ? ? ? ? bEndpointAddress ? ? 0x82 ?EP 2 IN
> ? ? ? ? bmAttributes ? ? ? ? ? ?1
> ? ? ? ? ? Transfer Type ? ? ? ? ? ?Isochronous
> ? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
> ? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
> ? ? ? ? wMaxPacketSize ? ? 0x0c00 ?2x 0 bytes
> ? ? ? ? bInterval ? ? ? ? ? ? ? 1
> ? ? Interface Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ? 9
> ? ? ? bDescriptorType ? ? ? ? 4
> ? ? ? bInterfaceNumber ? ? ? ?0
> ? ? ? bAlternateSetting ? ? ? 6
> ? ? ? bNumEndpoints ? ? ? ? ? 2
> ? ? ? bInterfaceClass ? ? ? 255 Vendor Specific Class
> ? ? ? bInterfaceSubClass ? ? ?0
> ? ? ? bInterfaceProtocol ? ? ?0
> ? ? ? iInterface ? ? ? ? ? ? ?0
> ? ? ? Endpoint Descriptor:
> ? ? ? ? bLength ? ? ? ? ? ? ? ? 7
> ? ? ? ? bDescriptorType ? ? ? ? 5
> ? ? ? ? bEndpointAddress ? ? 0x81 ?EP 1 IN
> ? ? ? ? bmAttributes ? ? ? ? ? ?3
> ? ? ? ? ? Transfer Type ? ? ? ? ? ?Interrupt
> ? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
> ? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
> ? ? ? ? wMaxPacketSize ? ? 0x0008 ?1x 8 bytes
> ? ? ? ? bInterval ? ? ? ? ? ? ? 7
> ? ? ? Endpoint Descriptor:
> ? ? ? ? bLength ? ? ? ? ? ? ? ? 7
> ? ? ? ? bDescriptorType ? ? ? ? 5
> ? ? ? ? bEndpointAddress ? ? 0x82 ?EP 2 IN
> ? ? ? ? bmAttributes ? ? ? ? ? ?1
> ? ? ? ? ? Transfer Type ? ? ? ? ? ?Isochronous
> ? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
> ? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
> ? ? ? ? wMaxPacketSize ? ? 0x1380 ?3x 896 bytes
> ? ? ? ? bInterval ? ? ? ? ? ? ? 1
> ? ? Interface Descriptor:
> ? ? ? bLength ? ? ? ? ? ? ? ? 9
> ? ? ? bDescriptorType ? ? ? ? 4
> ? ? ? bInterfaceNumber ? ? ? ?0
> ? ? ? bAlternateSetting ? ? ? 7
> ? ? ? bNumEndpoints ? ? ? ? ? 2
> ? ? ? bInterfaceClass ? ? ? 255 Vendor Specific Class
> ? ? ? bInterfaceSubClass ? ? ?0
> ? ? ? bInterfaceProtocol ? ? ?0
> ? ? ? iInterface ? ? ? ? ? ? ?0
> ? ? ? Endpoint Descriptor:
> ? ? ? ? bLength ? ? ? ? ? ? ? ? 7
> ? ? ? ? bDescriptorType ? ? ? ? 5
> ? ? ? ? bEndpointAddress ? ? 0x81 ?EP 1 IN
> ? ? ? ? bmAttributes ? ? ? ? ? ?3
> ? ? ? ? ? Transfer Type ? ? ? ? ? ?Interrupt
> ? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
> ? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
> ? ? ? ? wMaxPacketSize ? ? 0x0008 ?1x 8 bytes
> ? ? ? ? bInterval ? ? ? ? ? ? ? 7
> ? ? ? Endpoint Descriptor:
> ? ? ? ? bLength ? ? ? ? ? ? ? ? 7
> ? ? ? ? bDescriptorType ? ? ? ? 5
> ? ? ? ? bEndpointAddress ? ? 0x82 ?EP 2 IN
> ? ? ? ? bmAttributes ? ? ? ? ? ?1
> ? ? ? ? ? Transfer Type ? ? ? ? ? ?Isochronous
> ? ? ? ? ? Synch Type ? ? ? ? ? ? ? None
> ? ? ? ? ? Usage Type ? ? ? ? ? ? ? Data
> ? ? ? ? wMaxPacketSize ? ? 0x1400 ?3x 0 bytes
> ? ? ? ? bInterval ? ? ? ? ? ? ? 1
> Device Qualifier (for other device speed):
> ? bLength ? ? ? ? ? ? ? ?10
> ? bDescriptorType ? ? ? ? 6
> ? bcdUSB ? ? ? ? ? ? ? 2.00
> ? bDeviceClass ? ? ? ? ? ?0 (Defined at Interface level)
> ? bDeviceSubClass ? ? ? ? 0
> ? bDeviceProtocol ? ? ? ? 0
> ? bMaxPacketSize0 ? ? ? ?64
> ? bNumConfigurations ? ? ?1
> Device Status: ? ? 0x0000
> ? (Bus Powered)
> --------------------
>
> I tried to add this ID to the ucv_driver.c file and compiled afterwards:
>
> --------------------
> static struct usb_device_id uvc_ids[] = {
> ? ? ? ? ?/* Dell XPS M2010 built-in webcam */
> ? ? ? ? { .match_flags ? ? ? ? ?= USB_DEVICE_ID_MATCH_DEVICE
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? | USB_DEVICE_ID_MATCH_INT_INFO,
> ? ? ? ? ? .idVendor ? ? ? ? ? ? = 0x046d,
> ? ? ? ? ? .idProduct ? ? ? ? ? ?= 0x0897,
> ? ? ? ? ? .bInterfaceClass ? ? ?= USB_CLASS_VENDOR_SPEC,
> ? ? ? ? ? .bInterfaceSubClass ? = 1,
> ? ? ? ? ? .bInterfaceProtocol ? = 0 },
> --------------------
>
> The module loads smoothly "modprobe -v uvcvideo" sais:
>
> install /sbin/modprobe snd_usb_audio; /sbin/modprobe --ignore-install
> uvcvideo insmod /lib/modules/2.6.22.13-0.3-default/usb/media/uvcvideo.ko
>
> and adds the following output to /var/log/messages:
>
> Dec 27 15:57:55 onyx kernel: usbcore: deregistering interface driver
> uvcvideo Dec 27 15:57:59 onyx kernel: usbcore: registered new interface
> driver uvcvideo Dec 27 15:57:59 onyx kernel: USB Video Class driver
> (v0.1.0)
>
> But still, I do not have a /dev/video0 device.
>
> "lsmod | grep uvc" tells me that the modules seem to be working:
>
> uvcvideo ? ? ? ? ? ? ? 52356 ?0
> compat_ioctl32 ? ? ? ? ?5376 ?1 uvcvideo
> videodev ? ? ? ? ? ? ? 30464 ?2 uvcvideo,gspca
> v4l2_common ? ? ? ? ? ?20608 ?2 uvcvideo,videodev
> v4l1_compat ? ? ? ? ? ?16388 ?2 uvcvideo,videodev
> usbcore ? ? ? ? ? ? ? 123756 ?8
> uvcvideo,uhci_hcd,gspca,snd_usb_audio,snd_usb_lib,usbhid,ehci_hcd
>
> Any idea would I should do to get my webcam working? As far as this is an
> Logitech device, this should not be a big problem, should it?
>
> Greets,
> Andreas
Andreas,
Look like a VC0321 or VC0323 from Vimicro, it is not a usb video class 
webcam :( 
Can you mail me the *. inf file from the windows driver ? I will try to 
support it  in gspca soon
Regards
-- 
Michel Xhaard
http://mxhaard.free.fr

From mail at andreas-demmer.de  Thu Dec 27 16:01:57 2007
From: mail at andreas-demmer.de (Andreas Demmer)
Date: Thu, 27 Dec 2007 16:01:57 +0100
Subject: [Linux-uvc-devel] built-in logitech webcam (dell oem) not recognized
Message-ID: <200712271602.01401.mail@andreas-demmer.de>

Hi,

I own a Dell XPS M2010 Notebook with a built-in webcam. lsusb identifies it as 
an logitech device, but the ID 046d:0897 seems to be no supported Logitech 
webcam:

--------------------
Bus 005 Device 009: ID 046d:0897 Logitech, Inc.
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          255 Vendor Specific Class
  bDeviceSubClass       255 Vendor Specific Subclass
  bDeviceProtocol       255 Vendor Specific Protocol
  bMaxPacketSize0        64
  idVendor           0x046d Logitech, Inc.
  idProduct          0x0897
  bcdDevice            1.00
  iManufacturer           1 OEM
  iProduct                2 Camera
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          193
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              200mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               7
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       1
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               7
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       2
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               7
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       3
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               7
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0400  1x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       4
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               7
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0b00  2x 768 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       5
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               7
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0c00  2x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       6
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               7
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x1380  3x 896 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       7
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               7
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 0 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)
--------------------

I tried to add this ID to the ucv_driver.c file and compiled afterwards:

--------------------
static struct usb_device_id uvc_ids[] = {
         /* Dell XPS M2010 built-in webcam */
        { .match_flags          = USB_DEVICE_ID_MATCH_DEVICE
                                | USB_DEVICE_ID_MATCH_INT_INFO,
          .idVendor             = 0x046d,
          .idProduct            = 0x0897,
          .bInterfaceClass      = USB_CLASS_VENDOR_SPEC,
          .bInterfaceSubClass   = 1,
          .bInterfaceProtocol   = 0 },
--------------------

The module loads smoothly "modprobe -v uvcvideo" sais:

install /sbin/modprobe snd_usb_audio; /sbin/modprobe --ignore-install uvcvideo
insmod /lib/modules/2.6.22.13-0.3-default/usb/media/uvcvideo.ko

and adds the following output to /var/log/messages:

Dec 27 15:57:55 onyx kernel: usbcore: deregistering interface driver uvcvideo
Dec 27 15:57:59 onyx kernel: usbcore: registered new interface driver uvcvideo
Dec 27 15:57:59 onyx kernel: USB Video Class driver (v0.1.0)

But still, I do not have a /dev/video0 device.

"lsmod | grep uvc" tells me that the modules seem to be working:

uvcvideo               52356  0 
compat_ioctl32          5376  1 uvcvideo
videodev               30464  2 uvcvideo,gspca
v4l2_common            20608  2 uvcvideo,videodev
v4l1_compat            16388  2 uvcvideo,videodev
usbcore               123756  8 
uvcvideo,uhci_hcd,gspca,snd_usb_audio,snd_usb_lib,usbhid,ehci_hcd

Any idea would I should do to get my webcam working? As far as this is an 
Logitech device, this should not be a big problem, should it?

Greets,
Andreas

-- 
http://www.andreas-demmer.de
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: This is a digitally signed message part.
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071227/a73e07ed/attachment.pgp>

From mail at andreas-demmer.de  Thu Dec 27 18:48:17 2007
From: mail at andreas-demmer.de (Andreas Demmer)
Date: Thu, 27 Dec 2007 18:48:17 +0100
Subject: [Linux-uvc-devel] built-in logitech webcam (dell oem) not
	recognized
In-Reply-To: <200712271723.12604.mxhaard@magic.fr>
References: <200712271619.37429.mail@andreas-demmer.de>
	<200712271723.12604.mxhaard@magic.fr>
Message-ID: <200712271848.17690.mail@andreas-demmer.de>

Michel Xhaard wrote:
> Can you mail me the *. inf file from the windows driver ? I will try to
> support it ?in gspca soon

Wow, great, thanks! :-)

I had to download 137MB from the Dell website in order to get the drivers, 
wow! After extracting the .exe file, I found 4 .inf files in it. Since I am 
not quite sure which is the right one, I zipped all 4 files for you:

http://www.andreas-demmer.de/dell_webcam.tar.gz

How do I notice when the cam is supported in gspca? What files do I have to 
update, then? Download the latest gspca from SVN and build it manually?
Or are my openSUSE 10.3 repositories up to date and will have precompiled 
packages?

Greets,
Andreas

-- 
http://www.andreas-demmer.de


From bersace03 at gmail.com  Thu Dec 27 18:52:01 2007
From: bersace03 at gmail.com (=?ISO-8859-1?Q?=C9tienne?= Bersac)
Date: Thu, 27 Dec 2007 18:52:01 +0100
Subject: [Linux-uvc-devel] [SVN] iSight support
In-Reply-To: <475F1541.9060908@i-nz.net>
References: <200712112335.41024.laurent.pinchart@skynet.be>
	<475F1541.9060908@i-nz.net>
Message-ID: <1198777921.7164.6.camel@thilivren>

Hi everyone,

After some days (who said weeks ?) i finally got the time to work on ift
and fix it. I also added Leopard driver support ! I produce a 1.0
without RC (i'm not afraid of a 1.1 ?). It has now lots of driver
hash/offset, and should work on many env. It rely on DEVICE being of the
form /dev/bus/usb/<bus-id>/<dev-id> .

http://bersace03.free.fr/ift

The packages should land soon on my PPA.

So, this is kind of my gift for Xmas (i confess a bit late). Happy new
year !

Regards,
?tienne.



From jice at free.fr  Thu Dec 27 23:49:10 2007
From: jice at free.fr (Jean-Christophe Jice Cardot)
Date: Thu, 27 Dec 2007 23:49:10 +0100
Subject: [Linux-uvc-devel] supported device Philips SPC1000NC
Message-ID: <200712272349.18294.jice@free.fr>

Hi

As asked in this page (http://linux-uvc.berlios.de/), I report that my webcam 
Philips SPC 1000NC works (almost) with the uvcvideo module.

I compiled the revision 158 from SVN, using the following kernel :
[fred at jice luvcview-20070512]$ uname -a
Linux jice.is-a-geek.org 2.6.17-14mdvcustom #1 SMP Tue Dec 25 20:47:45 CET 
2007 i686 AMD Athlon(tm) XP 1800+ GNU/Linux

I managed to have the picture in luvcview, but I must run the same command 
line a few times before it works.

Below, the first command line did not work, the second yes.
If you need more information, I'd like to help you to better support this 
webcam.

[fred at jice luvcview-20070512]$ ./luvcview -d /dev/video1 -s 640x480
luvcview version 0.2.1
 size width: 640 height: 480
Video driver: x11
A window manager is available
video /dev/video1
Unable to dequeue buffer (5).
Error grabbing
 Clean Up done Quit
[fred at jice luvcview-20070512]$ ./luvcview -d /dev/video1 -s 640x480
luvcview version 0.2.1
 size width: 640 height: 480
Video driver: x11
A window manager is available
video /dev/video1

Stop asked
 Clean Up done Quit
[fred at jice luvcview-20070512]$

By the way, thanks for this driver :-)

I also managed to have the webcam display something in the AMSN wizard once, 
but the subsequent tries failed (AMSN saying that it cannot grab). Also, the 
device is changing from /dev/video1 to /dev/video2 and back to /dev/video1, 
and dmesg displays:

usbcore: deregistering driver uvcvideo
uvcvideo: Found UVC 1.00 device Philips SPC 1000NC Webcam (0471:0332)
usbcore: registered new driver uvcvideo
USB Video Class driver (v0.1.0)
usb 3-1: USB disconnect, address 3
usb 3-1: new high speed USB device using ehci_hcd and address 4
usb 3-1: configuration #1 chosen from 1 choice
uvcvideo: Found UVC 1.00 device Philips SPC 1000NC Webcam (0471:0332)
4:3:1: cannot get freq at ep 0x84
usb 3-1: USB disconnect, address 4
usb 3-1: new high speed USB device using ehci_hcd and address 5
usb 3-1: configuration #1 chosen from 1 choice
uvcvideo: Found UVC 1.00 device Philips SPC 1000NC Webcam (0471:0332)
5:3:1: cannot get freq at ep 0x84
usb 3-1: USB disconnect, address 5
usb 3-1: new high speed USB device using ehci_hcd and address 6
usb 3-1: configuration #1 chosen from 1 choice

(of course I never unpluged the usb cable)

please contact me if I can help.

bye
-- 
Jean-Christophe Cardot - jice at lea-linux.org
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part.
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071227/ebd60c9d/attachment.pgp>

From georgeps at xmission.com  Fri Dec 28 00:46:58 2007
From: georgeps at xmission.com (George Peter Staplin)
Date: Thu, 27 Dec 2007 16:46:58 -0700
Subject: [Linux-uvc-devel] Problem with newer Creative Live! IM Pro chip
Message-ID: <20071227164658.d1jxlnc34sc0cws8@webmail.xmission.com>

I built the latest driver from svn and installed it without a problem,  
but when I plug in the webcam the driver initialization fails:

[ 4108.805744] uvcvideo: Found UVC 1.00 device VF0410 Live! Cam Video  
IM Pro (041e:4063)
[ 4108.808049] Device initialization failed: the default format and/or  
frame are not valid.
[ 4108.808054] uvcvideo: <3>uvcvideo: Failed to initialize the device (-22).
[ 4108.835866] 8:3:1: cannot get freq at ep 0x84

$ lsusb
Bus 005 Device 008: ID 041e:4063 Creative Technology, Ltd
Bus 005 Device 001: ID 0000:0000
Bus 003 Device 001: ID 0000:0000
Bus 002 Device 001: ID 0000:0000
Bus 001 Device 001: ID 0000:0000
Bus 004 Device 001: ID 0000:0000

I'm assuming that because it is a 4063 rather than 4056 that it's a  
slightly newer unit.  It would be nice if Creative listed things like  
that on the boxes.


T:  Bus=05 Lev=01 Prnt=01 Port=07 Cnt=01 Dev#=  8 Spd=480 MxCh= 0
D:  Ver= 2.00 Cls=ef(unk. ) Sub=02 Prot=01 MxPS=64 #Cfgs=  1
P:  Vendor=041e ProdID=4063 Rev= 1.00
S:  Manufacturer=Creative Technology Ltd
S:  Product=VF0410 Live! Cam Video IM Pro
C:* #Ifs= 4 Cfg#= 1 Atr=80 MxPwr=168mA
I:  If#= 0 Alt= 0 #EPs= 1 Cls=0e(unk. ) Sub=01 Prot=00 Driver=(none)
E:  Ad=83(I) Atr=03(Int.) MxPS=  16 Ivl=4ms
I:  If#= 1 Alt= 0 #EPs= 0 Cls=0e(unk. ) Sub=02 Prot=00 Driver=uvcvideo
I:  If#= 1 Alt= 1 #EPs= 1 Cls=0e(unk. ) Sub=02 Prot=00 Driver=uvcvideo
E:  Ad=81(I) Atr=05(Isoc) MxPS= 128 Ivl=125us
I:  If#= 1 Alt= 2 #EPs= 1 Cls=0e(unk. ) Sub=02 Prot=00 Driver=uvcvideo
E:  Ad=81(I) Atr=05(Isoc) MxPS= 256 Ivl=125us
I:  If#= 1 Alt= 3 #EPs= 1 Cls=0e(unk. ) Sub=02 Prot=00 Driver=uvcvideo
E:  Ad=81(I) Atr=05(Isoc) MxPS= 800 Ivl=125us
I:  If#= 1 Alt= 4 #EPs= 1 Cls=0e(unk. ) Sub=02 Prot=00 Driver=uvcvideo
E:  Ad=81(I) Atr=05(Isoc) MxPS=1600 Ivl=125us
I:  If#= 1 Alt= 5 #EPs= 1 Cls=0e(unk. ) Sub=02 Prot=00 Driver=uvcvideo
E:  Ad=81(I) Atr=05(Isoc) MxPS=2400 Ivl=125us
I:  If#= 1 Alt= 6 #EPs= 1 Cls=0e(unk. ) Sub=02 Prot=00 Driver=uvcvideo
E:  Ad=81(I) Atr=05(Isoc) MxPS=3072 Ivl=125us
I:  If#= 2 Alt= 0 #EPs= 0 Cls=01(audio) Sub=01 Prot=00 Driver=snd-usb-audio
I:  If#= 3 Alt= 0 #EPs= 0 Cls=01(audio) Sub=02 Prot=00 Driver=snd-usb-audio
I:  If#= 3 Alt= 1 #EPs= 1 Cls=01(audio) Sub=02 Prot=00 Driver=snd-usb-audio
E:  Ad=84(I) Atr=05(Isoc) MxPS= 400 Ivl=1ms

Any help would be appreciated.  I can test patches or modify things if  
you give me some hints :)


George
-- 
http://www.xmission.com/~georgeps/  http://whim.linuxsys.net
http://code.google.com/p/megapkg/   http://code.google.com/p/opennexx/



From herton at mandriva.com.br  Fri Dec 28 16:40:17 2007
From: herton at mandriva.com.br (Herton Ronaldo Krzesinski)
Date: Fri, 28 Dec 2007 13:40:17 -0200
Subject: [Linux-uvc-devel] Add new sync quirk to uvcvideo and use with
	Syntek 174f:5212
Message-ID: <200712281340.17571.herton@mandriva.com.br>

This patch from Claudio S. Matsuoka adds a new quirk to make the Syntek 
174f:5212 work.

From 79775881893806a3aab141b278cf4039673121d7 Mon Sep 17 00:00:00 2001
From: Claudio Matsuoka <cmatsuoka at gmail.com>
Date: Thu, 27 Dec 2007 13:10:14 -0200
Subject: [PATCH] Add quirk for Syntek 174f:5212 camera

The Syntek 174f:5212 UVC camera in HP Spartan laptops fail to synchronize
frames, add quirk to skip synchronization.

Signed-off-by: Claudio Matsuoka <cmatsuoka at gmail.com>
---
 uvc_driver.c |   12 ++++++++++++
 uvc_video.c  |   12 ++++++++----
 uvcvideo.h   |    1 +
 3 files changed, 21 insertions(+), 4 deletions(-)

diff --git a/uvc_driver.c b/uvc_driver.c
index 715b4b1..49fb900 100644
--- a/uvc_driver.c
+++ b/uvc_driver.c
@@ -1530,6 +1530,7 @@ static int uvc_probe(struct usb_interface *intf,
 	dev->intf = usb_get_intf(intf);
 	dev->intfnum = intf->cur_altsetting->desc.bInterfaceNumber;
 	dev->quirks = id->driver_info;
+	dev->udev->quirks = id->driver_info;
 
 	/* Parse the Video Class control descriptor */
 	if (uvc_parse_control(dev) < 0) {
@@ -1653,6 +1654,17 @@ static int uvc_resume(struct usb_interface *intf)
  * though they are compliant.
  */
 static struct usb_device_id uvc_ids[] = {
+	/* Syntek (HP Spartan) */
+	{ .match_flags		= USB_DEVICE_ID_MATCH_DEVICE
+				| USB_DEVICE_ID_MATCH_INT_INFO,
+	  .idVendor		= 0x174f,
+	  .idProduct		= 0x5212,
+	  .bInterfaceClass	= USB_CLASS_VIDEO,
+	  .bInterfaceSubClass	= 1,
+	  .bInterfaceProtocol	= 0,
+	  .driver_info		= UVC_QUIRK_PROBE_MINMAX
+				| UVC_QUIRK_DONT_SYNCHRONIZE
+	},
 	/* ALi M5606 (Clevo M540SR) */
 	{ .match_flags		= USB_DEVICE_ID_MATCH_DEVICE
 				| USB_DEVICE_ID_MATCH_INT_INFO,
diff --git a/uvc_video.c b/uvc_video.c
index 60e1507..dde1469 100644
--- a/uvc_video.c
+++ b/uvc_video.c
@@ -266,7 +266,8 @@ done:
  * uvc_video_decode_end will never be called with a NULL buffer.
  */
 static int uvc_video_decode_start(struct uvc_video_queue *queue,
-		struct uvc_buffer *buf, const __u8 *data, int len)
+		struct uvc_buffer *buf, const __u8 *data, int len,
+		const __u32 quirks)
 {
 	__u8 fid;
 
@@ -300,7 +301,8 @@ static int uvc_video_decode_start(struct uvc_video_queue *queue,
 	 * frame will always be in sync.
 	 */
 	if (buf->state != UVC_BUF_STATE_ACTIVE) {
-		if (fid == queue->last_fid) {
+		if (~quirks & UVC_QUIRK_DONT_SYNCHRONIZE &&
+					fid == queue->last_fid) {
 			uvc_trace(UVC_TRACE_FRAME, "Dropping payload (out of "
 				"sync).\n");
 			return -ENODATA;
@@ -396,7 +398,8 @@ static void uvc_video_decode_isoc(struct urb *urb,
 		mem = urb->transfer_buffer + urb->iso_frame_desc[i].offset;
 		do {
 			ret = uvc_video_decode_start(queue, buf, mem,
-				urb->iso_frame_desc[i].actual_length);
+				urb->iso_frame_desc[i].actual_length,
+				urb->dev->quirks);
 			if (ret == -EAGAIN)
 				buf = uvc_queue_next_buffer(queue, buf);
 		} while (ret == -EAGAIN);
@@ -432,7 +435,8 @@ static void uvc_video_decode_bulk(struct urb *urb,
 	 */
 	if (queue->bulk.header_size == -1) {
 		do {
-			ret = uvc_video_decode_start(queue, buf, mem, len);
+			ret = uvc_video_decode_start(queue, buf, mem, len,
+							urb->dev->quirks);
 			if (ret == -EAGAIN)
 				buf = uvc_queue_next_buffer(queue, buf);
 		} while (ret == -EAGAIN);
diff --git a/uvcvideo.h b/uvcvideo.h
index 84ef9f4..6545951 100644
--- a/uvcvideo.h
+++ b/uvcvideo.h
@@ -312,6 +312,7 @@ struct uvc_xu_control {
 #define UVC_QUIRK_PROBE_MINMAX		0x00000002
 #define UVC_QUIRK_PROBE_EXTRAFIELDS	0x00000004
 #define UVC_QUIRK_BUILTIN_ISIGHT	0x00000008
+#define UVC_QUIRK_DONT_SYNCHRONIZE	0x00000010
 
 /* Format flags */
 #define UVC_FMT_FLAG_COMPRESSED		0x00000001
-- 
1.5.2.5

--
[]'s
Herton


From mslemko at netscape.net  Fri Dec 28 20:28:24 2007
From: mslemko at netscape.net (mslemko)
Date: Fri, 28 Dec 2007 12:28:24 -0700
Subject: [Linux-uvc-devel] Logitech Quickcam Orbit AF pan and tilt errors
Message-ID: <47754E58.5080600@netscape.net>

Hi,

I have a Logitech Quickcam Orbit AF and the video is working nicely at 5 
fps in all camera resolutions.

However, I get errors from the luvcview application when trying to set 
Pan or Tilt.
for example:
  ioctl querycontrol error 22
  Set Tilt up error

Is there something I can configure to fix this issue?

I've attached the lsusb dump for the camera ( lsusb -v -d 046d:0994 )

environment:
fedora 8, 64 bit - kernel 2.6.23.9-85.fc8 x86_64
linux-uvc Revision: 158
luvcview-20070512

thanks!

-Mark
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: tmp.txt
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071228/8fa59f1d/attachment.txt>

From fett_uvcvideo at fragcom.de  Fri Dec 28 22:38:32 2007
From: fett_uvcvideo at fragcom.de (Daniel Fett)
Date: Fri, 28 Dec 2007 22:38:32 +0100
Subject: [Linux-uvc-devel] Asus G1s built-in webcam problems
Message-ID: <47756CD8.2080007@fragcom.de>

Hi!

I have a Asus G1s Laptop and it has this built-in webcam. The uvcvideo
driver recognizes it, but after a few seconds of video in any
application, it hangs. dmesg output:

[35837.372000] uvcvideo: Found UVC 1.00 device USB 2.0 Camera (174f:5a35)
[35837.708000] usbcore: registered new interface driver uvcvideo
[35837.708000] USB Video Class driver (v0.1.0)
[35884.560000] uvcvideo: Failed to resubmit video URB (-45).
[35884.560000] uvcvideo: Failed to resubmit video URB (-45).
[35884.560000] uvcvideo: Failed to resubmit video URB (-45).
...

The driver is compiled from SVN revision 158.

Any ideas how to solve this?

Also, the camera module is mounted upside-down, but that is a minor problem.

Daniel


From laurent.pinchart at skynet.be  Fri Dec 28 23:28:03 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 28 Dec 2007 23:28:03 +0100
Subject: [Linux-uvc-devel] Debugging UVC + Sanyo Xacti cameras
In-Reply-To: <44759.130.60.75.225.1198150630.squirrel@bela.ifi.unizh.ch>
References: <44759.130.60.75.225.1198150630.squirrel@bela.ifi.unizh.ch>
Message-ID: <200712282328.04081.laurent.pinchart@skynet.be>

On Thursday 20 December 2007, Thomas Netter wrote:
> Hi Laurent and UVC developers,
>
> I'm starting to give a close look at luvcview failures when using Xacti
> cameras with UVC. I'm new to UVC so any help would be greatly appreciated.
> The problem was initially described by Lars T?uber with the Sanyo HD 1000:
> http://lists.berlios.de/pipermail/linux-uvc-devel/2007-September/002145.htm
>l To summarize: luvcview works on the first execute-quit sequence but fails
> if you try to execute luvcview again. I tried plugging Lars T?uber's code
> snippet into uvc_driver.c but that had no visible effect.
>
> I'm experiencing the same problem with a Xacti C6. I also have access to
> Xacti C4, HD 1000, and HD 2 cameras to test on other models.
>
> Device numbers:
> Xacti HD 1000: 0474:0238
> Xacti C6:      0474:0241
>
> Below are logs obtained with SnoopyPro-022 while starting AMCap video
> capture on Windows XP ( http://noeld.com/programs.asp?cat=video )
> These logs track the following sequence:
> - Start Amcap
> - Capture 2 to 3 seconds of 320x240 video
> - Quit Amcap
> - Wait a few seconds
> - Start Amcap
> - Capture 2 to 3 seconds of 320x240 video
> - Quit Amcap
>
> Log from "video device":
> Snoopy binary log: http://www.ailab.ch/~tnetter/USBLog12.usblog
> Text version: http://www.ailab.ch/~tnetter/log12.txt.gz
>
> Simultaneous log from "composite device":
> Snoopy binary log: http://www.ailab.ch/~tnetter/USBLog13.usblog
> Text version: http://www.ailab.ch/~tnetter/log13.txt.gz
>
> Here's what happens in Ubuntu 7.10, linux 2.6.22-14-generic,
> uvcvideo-r104, luvcview-20070512 (tried both from SVN and from deb
> package).
>
> First attempt works:
> sudo ./luvcview
> luvcview version 0.2.1
> Video driver: x11
> A window manager is available
> video /dev/video0
> Stop asked
>  Clean Up done Quit
>
> Second attempt fails:
> sudo ./luvcview
> luvcview version 0.2.1
> Video driver: x11
> A window manager is available
> video /dev/video0
> Unable to set format: 5.
>  Init v4L2 failed !! exit fatal
>
> If I unplug and replug the camera into the USB port then luvcview
> works again for one more attempt.
>
> Any help / hints are welcome.

Thanks a lot for the logs. Unfortunately I won't be able to look at them 
before January 7th as I'll be away next week. I'll try to debug the problem 
when I'll come back.

In the meantime, could you generate a log on Linux that includes the two 
luvcview runs ? In a nutshell, to use usbmon:

mount -t debug none /sys/kernel/debug
cat /sys/kernel/debug/usbmon/<busnr>t > usbmon.dump

You will need debugfs and usbmon support in your kernel.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Dec 28 23:31:30 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 28 Dec 2007 23:31:30 +0100
Subject: [Linux-uvc-devel] patche on a quickcam fusion
In-Reply-To: <6546a46a0712201338g38922f2h285daffda70c7ac7@mail.gmail.com>
References: <6546a46a0712201338g38922f2h285daffda70c7ac7@mail.gmail.com>
Message-ID: <200712282331.30836.laurent.pinchart@skynet.be>

Hi Ludovic,

On Thursday 20 December 2007, Ludovic Andrivon wrote:
> Hi,
>
> I'm a 'proud' owner of a quickcam fusion... that is affected by THE bug
> unfortunatelly. I tried to change the USB port, I plugged the webcam into
> various USB hub, but it is not reliable.
>
> Also I saw that some patches exists, but how to apply them as I'm not very
> familiar with C programming ?
>
> I read this email
> http://lists.berlios.de/pipermail/linux-uvc-devel/2007-April/001645.html
> but the patche seems to be applied on revision 89. Is it still possible to
> apply the patches as described on the actual version ?

No, the patches will have to be updated for the latest driver revision.

> If not what are the changes to do to be able to applie the patche.
>
> and finally is there any chances that this patche will be integrated into
> the UVC driver ?

That's very unlikely. The patches you are referring to are a quick&dirty hack 
to work around the problem. They help some users and are completely 
ineffective for others. There is currently no known way to fix the problem. 
It would require in-depth analysis with a hardware USB2.0 analyser.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Dec 28 23:36:07 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 28 Dec 2007 23:36:07 +0100
Subject: [Linux-uvc-devel] Trouble recording from two webcams
In-Reply-To: <C5335C312A969B4090CF4593F36C2AE53BEF82@SRV602.tudelft.net>
References: <C5335C312A969B4090CF4593F36C2AE53BEF81@SRV602.tudelft.net>
	<200712202151.45831.laurent.pinchart@skynet.be>
	<C5335C312A969B4090CF4593F36C2AE53BEF82@SRV602.tudelft.net>
Message-ID: <200712282336.07370.laurent.pinchart@skynet.be>

Hi,

On Friday 21 December 2007, Plooij wrote:
> I have some news on this issue: after an update from Ubuntu last Wednesday,
> both cameras work fine simultaneously. They even continue to work fine
> after rebooting, so the problem seems to be solved permanently (there's
> nothing worse than problems that occur only sometimes). The Ubuntu update
> contained an updated kernel.
>
> Sorry, I forgot rule nr. 1 in bug reporting: use the latest version of the
> program. I downloaded a recent version of your driver from SVN. Should I
> use that one instead of the one from Ubuntu that seems to work now?

Given that the Ubuntu package will probably follow the driver's development, I 
would at least try the SVN version to discover bugs before it's too late :-)

> After the update, I still can't set the frame rate parameter. I've added my
> code below (irrelevant code is replaced by text between [] brackets). This
> is the output of the code section:
>
> Parameter getting not supported.
> Parameter setting not supported.

See comment below.

> Do you think it is possible to make a driver that skips frames in case of
> insufficient bandwidth, instead of giving corrupted frames to applications?

For YUV video streams that would be possible, as images have a fixed size. For 
MJPEG video streams there is no way to detect packet loss.

> void CGrabber_Implementation::init_device()
> {
> 	struct v4l2_capability cap;
> 	struct v4l2_cropcap cropcap;
> 	struct v4l2_crop crop;
> 	struct v4l2_streamparm streamparm;
> 	struct v4l2_format fmt;
> 	unsigned int min;
>
> 	[Capability checks]
>
> 	[Cropping settings]
>
> 	//Parameters
> 	CLEAR(streamparm);

Set streamparm.type to V4L2_BUF_TYPE_VIDEO_CAPTURE. That should solve your 
problem.

> 	if (-1 == xioctl (fd, VIDIOC_G_PARM, &streamparm))
> 	{
> 		switch (errno)
> 		{
> 		case EINVAL:
> 			printf("Parameter getting not supported.\n");
> 			break;
> 		default:
> 			errno_exit ("VIDIOC_G_PARM");
> 			break;
> 		}
> 	}
>
> 	streamparm.parm.capture.timeperframe.numerator   = 1;
> 	streamparm.parm.capture.timeperframe.denominator = 15;
>
> 	if (-1 == xioctl (fd, VIDIOC_S_PARM, &streamparm))
> 	{
> 		switch (errno)
> 		{
> 		case EINVAL:
> 			printf("Parameter setting not supported.\n");
> 			break;
> 		default:
> 			errno_exit ("VIDIOC_S_PARM");
> 			break;
> 		}
> 	}
>
> 	//Format
> 	CLEAR (fmt);
>
> 	fmt.type                = V4L2_BUF_TYPE_VIDEO_CAPTURE;
> 	fmt.fmt.pix.width       = 640;
> 	fmt.fmt.pix.height      = 480;
> 	fmt.fmt.pix.pixelformat = V4L2_PIX_FMT_YUYV;
> 	fmt.fmt.pix.field       = V4L2_FIELD_NONE;
>
> 	if (-1 == xioctl (fd, VIDIOC_S_FMT, &fmt))
> 		errno_exit ("VIDIOC_S_FMT");
>
> 	[Format checks]
>
> 	[More initialization]
>
> 	[Camera control settings]
> }

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Dec 28 23:39:30 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 28 Dec 2007 23:39:30 +0100
Subject: [Linux-uvc-devel] Support forLogitech Quickcam Communicate STX ?
In-Reply-To: <476C2E8D.9040404@libertysurf.fr>
References: <476C2E8D.9040404@libertysurf.fr>
Message-ID: <200712282339.30939.laurent.pinchart@skynet.be>

Hi St?phane,

On Friday 21 December 2007, St?phane S?n?si wrote:
> Hello,
>
> I got this type of Logitech Webcam, which product ID is 08d7;
> The gspca driver seems to not recognize it;
> It does not show as supported on page http://linux-uvc.berlios.de/#devices
>
> What is the staus of its support by the UVC driver ?

That camera isn't UVC compatible so it will never be supported by the UVC 
driver.

http://www.quickcamteam.net/hcl/linux/logitech-webcams

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Dec 28 23:42:59 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 28 Dec 2007 23:42:59 +0100
Subject: [Linux-uvc-devel] about number of packets inside URB..
In-Reply-To: <a81f87bb0712211823ofe3740bmb374a5d6e4d72dab@mail.gmail.com>
References: <a81f87bb0712211823ofe3740bmb374a5d6e4d72dab@mail.gmail.com>
Message-ID: <200712282342.59542.laurent.pinchart@skynet.be>

Hi Brian,

On Saturday 22 December 2007, Brian Pin wrote:
> In uvc_video.c:
>
> uvc_init_video_isoc(...) {
>
>  npackets = (size + psize - 1) / psize;
>  if (npackets > UVC_MAX_ISO_PACKETS)
>   npackets = UVC_MAX_ISO_PACKETS;
>
> }
> in mycase I originally have npackets = 199, and after the 3 lines there, it
> becomes 40, which is UVC_MAX_ISO_PACKETS.
> My question is if there is a frame that needs more than 40 packets to
> transfer, how is the data going to be not lost?
> Is it because we send multiple URBs (I set UVC_URBS to 1)?

The driver resubmits URBs after they complete. Even with a small number of 
packets and a small number of URBs, if the device is able to buffer enough 
data and if the host is fast enough to resubmit, data won't be lost.

In practice the number of packets and the number of URBs is a compromise 
between the memory footprint and the ability to handle delays in URB 
resubmission.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Dec 28 23:44:41 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 28 Dec 2007 23:44:41 +0100
Subject: [Linux-uvc-devel] Creative Webcam Live! Cam Notebook Ultra
In-Reply-To: <115781230712220858p2def7d15l901aa13dab87d864@mail.gmail.com>
References: <115781230712201135x1ab85efeq8218c1c5556c4ece@mail.gmail.com>
	<200712202213.56128.laurent.pinchart@skynet.be>
	<115781230712220858p2def7d15l901aa13dab87d864@mail.gmail.com>
Message-ID: <200712282344.41221.laurent.pinchart@skynet.be>

Hi Niklas,

On Saturday 22 December 2007, Niklas Larsson wrote:
> Hi!
>
> This is a lot of info I would have attached it as a file but don't think
> that is aload.

I think it is. I'm sure I haven't disabled e-mail attachments on purpose :-)

> This is the output of lsusb -d 041e:405b -v:
[snip]

Thanks for the information. Unfortunately the camera isn't UVC compatible, so 
you won't have luck with the UVC driver :-(

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Dec 28 23:47:20 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 28 Dec 2007 23:47:20 +0100
Subject: [Linux-uvc-devel] BUG with uvcvideo SVN and 2.6.23.11
In-Reply-To: <613695.87540.qm@web52907.mail.re2.yahoo.com>
References: <613695.87540.qm@web52907.mail.re2.yahoo.com>
Message-ID: <200712282347.21068.laurent.pinchart@skynet.be>

Hi Chris,

On Sunday 23 December 2007, Chris Rankin wrote:
> Hi,
>
> I am running the uvcvideo module from subversion with Linux 2.6.23.11, and
> I have just found this BUG in my message log:
>
> usb 4-3: new high speed USB device using ehci_hcd and address 4
> usb 4-3: configuration #1 chosen from 1 choice
> uvcvideo: Found UVC 1.00 device <unnamed> (046d:0992)
> BUG: atomic counter underflow at:
[snip]

Thanks for the report. This is a warning and isn't critical, so I'll take care 
of it when I'll get back from holidays on January 7th.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Dec 28 23:50:59 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 28 Dec 2007 23:50:59 +0100
Subject: [Linux-uvc-devel] Fwd: Panasonic PV-GS500 not working with any
	of the webcam apps
In-Reply-To: <164b2cf80712232309n302c45c9nacd68e3de2d552e7@mail.gmail.com>
References: <164b2cf80712232303i293eacacodd630560cca9dcc3@mail.gmail.com>
	<164b2cf80712232309n302c45c9nacd68e3de2d552e7@mail.gmail.com>
Message-ID: <200712282351.00013.laurent.pinchart@skynet.be>

Hi Alexandru,

On Monday 24 December 2007, Alexandru Botezatu wrote:
> Hi,
>
> I'd like to report a problem with ekiga and all other webcam apps that
> do not work with my camera in webcam mode. The camera works with
> luvcview and mplayer, though. I really want to be able to use it in
> skype or Ekiga.
>
> I read a few threads here on other panasonic cameras and saw that it
> was possible to get some of them to work with Ekiga. Can you help me
> with my model as well?
>
> Here is the output of dmesg when turning the camera on in webcam mode:
>
> [263155.941893] usb 2-2: new full speed USB device using ohci_hcd and
> address 27 [263156.099613] usb 2-2: configuration #1 chosen from 1 choice
> [263156.105574] uvcvideo: Probing generic UVC device 2
> [263156.105586] uvcvideo: Found format MJPEG.
> [263156.105591] uvcvideo: - 320x240 (14.9 fps)
> [263156.117498] uvcvideo: Found a Status endpoint (addr 86).
> [263156.117505] uvcvideo: Found UVC 1.00 device DVC (04da:231d)
> [263156.117518] uvcvideo: Scanning UVC chain: OT 3 <- SU 4 <- IT 1 2
> [263156.117526] uvcvideo: Found a valid video chain (1,2 -> 3).
> [263156.127532] uvcvideo: UVC device initialized.
>
>
> and in DV mode:
>
> [262857.677671] usb 1-2: new high speed USB device using ehci_hcd and
> address 32 [262857.795013] usb 1-2: configuration #1 chosen from 1 choice
> [262857.795689] uvcvideo: Probing generic UVC device 2
> [262857.795702] uvcvideo: device 32 videostreaminginterface 1: unknown
> DV format 128
> [262857.798003] uvcvideo: Found a Status endpoint (addr 86).
> [262857.798010] uvcvideo: Found UVC 1.00 device DVC (04da:231e)
> [262857.798023] uvcvideo: Scanning UVC chain: OT 3 <- XU 5 <- SU 4 <- IT 1
> 2 [262857.798032] uvcvideo: No valid video chain found.
>
> Here is the output of lsusb:
[snip]
>
> Please let me know if you need any more information.

Please use usbutils 0.72 or newer and get the lsusb output in DV mode (that 
one was from webcam mode).

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Dec 28 23:55:48 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 28 Dec 2007 23:55:48 +0100
Subject: [Linux-uvc-devel] supported device Philips SPC1000NC
In-Reply-To: <200712272349.18294.jice@free.fr>
References: <200712272349.18294.jice@free.fr>
Message-ID: <200712282355.48719.laurent.pinchart@skynet.be>

Hi Jean-Christophe,

On Thursday 27 December 2007, Jean-Christophe Jice Cardot wrote:
> Hi
>
> As asked in this page (http://linux-uvc.berlios.de/), I report that my
> webcam Philips SPC 1000NC works (almost) with the uvcvideo module.

Could you please send the 'lsusb -v' output using usbutils 0.72 or newer ?

> I compiled the revision 158 from SVN, using the following kernel :
> [fred at jice luvcview-20070512]$ uname -a
> Linux jice.is-a-geek.org 2.6.17-14mdvcustom #1 SMP Tue Dec 25 20:47:45 CET
> 2007 i686 AMD Athlon(tm) XP 1800+ GNU/Linux
>
> I managed to have the picture in luvcview, but I must run the same command
> line a few times before it works.
>
> Below, the first command line did not work, the second yes.
> If you need more information, I'd like to help you to better support this
> webcam.
>
> [fred at jice luvcview-20070512]$ ./luvcview -d /dev/video1 -s 640x480
> luvcview version 0.2.1
>  size width: 640 height: 480
> Video driver: x11
> A window manager is available
> video /dev/video1
> Unable to dequeue buffer (5).
> Error grabbing
>  Clean Up done Quit
> [fred at jice luvcview-20070512]$ ./luvcview -d /dev/video1 -s 640x480
> luvcview version 0.2.1
>  size width: 640 height: 480
> Video driver: x11
> A window manager is available
> video /dev/video1
>
> Stop asked
>  Clean Up done Quit
> [fred at jice luvcview-20070512]$
>
> By the way, thanks for this driver :-)
>
> I also managed to have the webcam display something in the AMSN wizard
> once, but the subsequent tries failed (AMSN saying that it cannot grab).
> Also, the device is changing from /dev/video1 to /dev/video2 and back to
> /dev/video1, and dmesg displays:
>
> usbcore: deregistering driver uvcvideo
> uvcvideo: Found UVC 1.00 device Philips SPC 1000NC Webcam (0471:0332)
> usbcore: registered new driver uvcvideo
> USB Video Class driver (v0.1.0)
> usb 3-1: USB disconnect, address 3
> usb 3-1: new high speed USB device using ehci_hcd and address 4
> usb 3-1: configuration #1 chosen from 1 choice
> uvcvideo: Found UVC 1.00 device Philips SPC 1000NC Webcam (0471:0332)
> 4:3:1: cannot get freq at ep 0x84
> usb 3-1: USB disconnect, address 4
> usb 3-1: new high speed USB device using ehci_hcd and address 5
> usb 3-1: configuration #1 chosen from 1 choice
> uvcvideo: Found UVC 1.00 device Philips SPC 1000NC Webcam (0471:0332)
> 5:3:1: cannot get freq at ep 0x84
> usb 3-1: USB disconnect, address 5
> usb 3-1: new high speed USB device using ehci_hcd and address 6
> usb 3-1: configuration #1 chosen from 1 choice
>
> (of course I never unpluged the usb cable)

That doesn't look good. Do the 'USB disconnect' messages appear on their own 
when you're not doing anything, or are they printed only when you try to use 
the webcam ? Please try to plug the camera in another port and see if it 
helps.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Dec 29 00:00:11 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 29 Dec 2007 00:00:11 +0100
Subject: [Linux-uvc-devel] Problem with newer Creative Live! IM Pro chip
In-Reply-To: <20071227164658.d1jxlnc34sc0cws8@webmail.xmission.com>
References: <20071227164658.d1jxlnc34sc0cws8@webmail.xmission.com>
Message-ID: <200712290000.11439.laurent.pinchart@skynet.be>

Hi George,

On Friday 28 December 2007, George Peter Staplin wrote:
> I built the latest driver from svn and installed it without a problem,
> but when I plug in the webcam the driver initialization fails:
>
> [ 4108.805744] uvcvideo: Found UVC 1.00 device VF0410 Live! Cam Video
> IM Pro (041e:4063)
> [ 4108.808049] Device initialization failed: the default format and/or
> frame are not valid.

Have you modified the driver ? I can't find the above message in the sources. 
Where does it come from ?

> [ 4108.808054] uvcvideo: <3>uvcvideo: Failed to initialize the device
> (-22). [ 4108.835866] 8:3:1: cannot get freq at ep 0x84
>
> $ lsusb
> Bus 005 Device 008: ID 041e:4063 Creative Technology, Ltd
> Bus 005 Device 001: ID 0000:0000
> Bus 003 Device 001: ID 0000:0000
> Bus 002 Device 001: ID 0000:0000
> Bus 001 Device 001: ID 0000:0000
> Bus 004 Device 001: ID 0000:0000
>
> I'm assuming that because it is a 4063 rather than 4056 that it's a
> slightly newer unit.  It would be nice if Creative listed things like
> that on the boxes.

Could you please run 'lsusb -d 041e:4063 -v' and send the output ? Make sure 
you use usbutils 0.72 or newer.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Dec 29 00:07:35 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 29 Dec 2007 00:07:35 +0100
Subject: [Linux-uvc-devel] Logitech Quickcam Orbit AF pan and tilt errors
In-Reply-To: <47754E58.5080600@netscape.net>
References: <47754E58.5080600@netscape.net>
Message-ID: <200712290007.35714.laurent.pinchart@skynet.be>

Hi Mark,

On Friday 28 December 2007, mslemko wrote:
> Hi,
>
> I have a Logitech Quickcam Orbit AF and the video is working nicely at 5
> fps in all camera resolutions.
>
> However, I get errors from the luvcview application when trying to set
> Pan or Tilt.
> for example:
>   ioctl querycontrol error 22
>   Set Tilt up error

Pan and tilt don't work at resolutions higher than 640x480 (from the top of my 
head, it might be another resolution limit). That's a webcam limitation.

> Is there something I can configure to fix this issue?
>
> I've attached the lsusb dump for the camera ( lsusb -v -d 046d:0994 )

Please use usbutils 0.72 or newer when generating lsusb dumps.

Best regards,

Laurent Pinchart


From jice at free.fr  Sat Dec 29 00:10:12 2007
From: jice at free.fr (Jean-Christophe Jice Cardot)
Date: Sat, 29 Dec 2007 00:10:12 +0100
Subject: [Linux-uvc-devel] supported device Philips SPC1000NC
In-Reply-To: <200712272349.18294.jice@free.fr>
References: <200712272349.18294.jice@free.fr>
Message-ID: <200712290010.26226.jice@free.fr>

forgot to add the result of lsusb -d 0471:0332 -v, sorry.

also I'll try with a newer kernel, but for the moment the newest is in 
panic 'cause it does not find my root partition. still have to find why :-p

Le jeudi 27 d?cembre 2007, Jean-Christophe Jice Cardot a ?crit :
> Hi
>
> As asked in this page (http://linux-uvc.berlios.de/), I report that my
> webcam Philips SPC 1000NC works (almost) with the uvcvideo module.
>
> I compiled the revision 158 from SVN, using the following kernel :
> [fred at jice luvcview-20070512]$ uname -a
> Linux jice.is-a-geek.org 2.6.17-14mdvcustom #1 SMP Tue Dec 25 20:47:45 CET
> 2007 i686 AMD Athlon(tm) XP 1800+ GNU/Linux
>
> I managed to have the picture in luvcview, but I must run the same command
> line a few times before it works.
>
> Below, the first command line did not work, the second yes.
> If you need more information, I'd like to help you to better support this
> webcam.
>
> [fred at jice luvcview-20070512]$ ./luvcview -d /dev/video1 -s 640x480
> luvcview version 0.2.1
>  size width: 640 height: 480
> Video driver: x11
> A window manager is available
> video /dev/video1
> Unable to dequeue buffer (5).
> Error grabbing
>  Clean Up done Quit
> [fred at jice luvcview-20070512]$ ./luvcview -d /dev/video1 -s 640x480
> luvcview version 0.2.1
>  size width: 640 height: 480
> Video driver: x11
> A window manager is available
> video /dev/video1
>
> Stop asked
>  Clean Up done Quit
> [fred at jice luvcview-20070512]$
>
> By the way, thanks for this driver :-)
>
> I also managed to have the webcam display something in the AMSN wizard
> once, but the subsequent tries failed (AMSN saying that it cannot grab).
> Also, the device is changing from /dev/video1 to /dev/video2 and back to
> /dev/video1, and dmesg displays:
>
> usbcore: deregistering driver uvcvideo
> uvcvideo: Found UVC 1.00 device Philips SPC 1000NC Webcam (0471:0332)
> usbcore: registered new driver uvcvideo
> USB Video Class driver (v0.1.0)
> usb 3-1: USB disconnect, address 3
> usb 3-1: new high speed USB device using ehci_hcd and address 4
> usb 3-1: configuration #1 chosen from 1 choice
> uvcvideo: Found UVC 1.00 device Philips SPC 1000NC Webcam (0471:0332)
> 4:3:1: cannot get freq at ep 0x84
> usb 3-1: USB disconnect, address 4
> usb 3-1: new high speed USB device using ehci_hcd and address 5
> usb 3-1: configuration #1 chosen from 1 choice
> uvcvideo: Found UVC 1.00 device Philips SPC 1000NC Webcam (0471:0332)
> 5:3:1: cannot get freq at ep 0x84
> usb 3-1: USB disconnect, address 5
> usb 3-1: new high speed USB device using ehci_hcd and address 6
> usb 3-1: configuration #1 chosen from 1 choice
>
> (of course I never unpluged the usb cable)
>
> please contact me if I can help.
>
> bye


-- 
Jean-Christophe "Jic?" Cardot - cofondateur de http://lea-linux.org
-------------- next part --------------

Bus 005 Device 002: ID 0471:0332 Philips 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x0471 Philips
  idProduct          0x0332 
  bcdDevice            1.00
  iManufacturer           2 Philips CE
  iProduct                1 Philips SPC 1000NC Webcam
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength         1066
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              168mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0 
      iFunction               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0 
      iInterface              0 
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength          103
        dwClockFrequency       15.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               5
        iTerminal               0 
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {7033f028-1163-2e4a-ba2c-6890eb334016}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          3
        bControlSize            1
        bmControls( 0)       0x1f
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 5
        guidExtensionCode         {3fae1228-d7bc-114e-a357-6f1edef7d61d}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          4
        bControlSize            1
        bmControls( 0)       0x00
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0 
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000a0e
          Auto-Exposure Mode
          Auto-Exposure Priority
          Exposure Time (Absolute)
          Zoom (Absolute)
          PanTilt (Absolute)
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000177f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Gain
          Power Line Frequency
          White Balance Temperature, Auto
        iProcessing             0 
        bmVideoStandards     0x 0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      VideoStreaming Interface Descriptor:
        bLength                            15
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                        2
        wTotalLength                      692
        bEndPointAddress                  129
        bmInfo                              0
        bTerminalLink                       2
        bStillCaptureMethod                 2
        bTriggerSupport                     1
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    27
        bmaControls( 1)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                6
        guidFormat                            {59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                  3072000
        dwMaxBitRate                 18432000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                  1013760
        dwMaxBitRate                  6082560
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   768000
        dwMaxBitRate                  4608000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                   253440
        dwMaxBitRate                  1520640
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   192000
        dwMaxBitRate                  1152000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                 13107200
        dwMaxBitRate                 23592960
        dwMaxVideoFrameBufferSize     2621440
        dwDefaultFrameInterval        1111111
        bFrameIntervalType                  2
        dwFrameInterval( 0)           1111111
        dwFrameInterval( 1)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               6
        wWidth( 0)                       1280
        wHeight( 0)                       960
        wWidth( 1)                        640
        wHeight( 1)                       480
        wWidth( 2)                        352
        wHeight( 2)                       288
        wWidth( 3)                        320
        wHeight( 3)                       240
        wWidth( 4)                        176
        wHeight( 4)                       144
        wWidth( 5)                        160
        wHeight( 5)                       120
        bNumCompressionPatterns             6
      VideoStreaming Interface Descriptor:
        bLength                            11
        bDescriptorType                    36
        bDescriptorSubtype                  6 (FORMAT_MJPEG)
        bFormatIndex                        2
        bNumFrameDescriptors                6
        bFlags                              0
          Fixed-size samples: No
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   384000
        dwMaxBitRate                  2304000
        dwMaxVideoFrameBufferSize       76800
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   126720
        dwMaxBitRate                   760320
        dwMaxVideoFrameBufferSize       25344
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                    96000
        dwMaxBitRate                   576000
        dwMaxVideoFrameBufferSize       19200
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                    31680
        dwMaxBitRate                   190080
        dwMaxVideoFrameBufferSize        6336
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                    24000
        dwMaxBitRate                   144000
        dwMaxVideoFrameBufferSize        4800
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                  1638400
        dwMaxBitRate                  4915200
        dwMaxVideoFrameBufferSize      327680
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  3
        dwFrameInterval( 0)            666666
        dwFrameInterval( 1)           1000000
        dwFrameInterval( 2)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            31
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               6
        wWidth( 0)                       1280
        wHeight( 0)                       960
        wWidth( 1)                        640
        wHeight( 1)                       480
        wWidth( 2)                        352
        wHeight( 2)                       288
        wWidth( 3)                        320
        wHeight( 3)                       240
        wWidth( 4)                        176
        wHeight( 4)                       144
        wWidth( 5)                        160
        wHeight( 5)                       120
        bNumCompressionPatterns             6
        bCompression( 0)                    0
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b20  2x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1320  3x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 1024 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       0 
      bFunctionProtocol       0 
      iFunction               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0 
      iInterface              0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           41
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0 
        iTerminal               0 
      AudioControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 2
        bSourceID               1
        bControlSize            2
        bmaControls( 0)      0x01
        bmaControls( 0)      0x00
          Mute
        bmaControls( 1)      0x02
        bmaControls( 1)      0x00
          Volume
        iFeature                0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               2
        iTerminal               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                29
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            7 Discrete
        tSamFreq[ 0]         8000
        tSamFreq[ 1]        11025
        tSamFreq[ 2]        16000
        tSamFreq[ 3]        22050
        tSamFreq[ 4]        24000
        tSamFreq[ 5]        44100
        tSamFreq[ 6]        48000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x84  EP 4 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0190  1x 400 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0002
  (Bus Powered)
  Remote Wakeup Enabled
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part.
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071229/8c3430d6/attachment.pgp>

From laurent.pinchart at skynet.be  Sat Dec 29 00:16:52 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 29 Dec 2007 00:16:52 +0100
Subject: [Linux-uvc-devel] Asus G1s built-in webcam problems
In-Reply-To: <47756CD8.2080007@fragcom.de>
References: <47756CD8.2080007@fragcom.de>
Message-ID: <200712290016.52999.laurent.pinchart@skynet.be>

Hi Daniel,

On Friday 28 December 2007, Daniel Fett wrote:
> Hi!
>
> I have a Asus G1s Laptop and it has this built-in webcam. The uvcvideo
> driver recognizes it, but after a few seconds of video in any
> application, it hangs. dmesg output:
>
> [35837.372000] uvcvideo: Found UVC 1.00 device USB 2.0 Camera (174f:5a35)
> [35837.708000] usbcore: registered new interface driver uvcvideo
> [35837.708000] USB Video Class driver (v0.1.0)
> [35884.560000] uvcvideo: Failed to resubmit video URB (-45).
> [35884.560000] uvcvideo: Failed to resubmit video URB (-45).
> [35884.560000] uvcvideo: Failed to resubmit video URB (-45).
> ...
>
> The driver is compiled from SVN revision 158.
>
> Any ideas how to solve this?

That's an EHCI driver issue. Have a look at 
http://www.mail-archive.com/linux-usb-devel%40lists.sourceforge.net/msg47202.html

You should try to ping the EHCI developers on the linux-usb mailing list.

> Also, the camera module is mounted upside-down, but that is a minor
> problem.

I'll try to contact to Sonix developers again to find a solution but there's 
not much I can do without their support.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Dec 29 00:26:53 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 29 Dec 2007 00:26:53 +0100
Subject: [Linux-uvc-devel] Add new sync quirk to uvcvideo and use with
	Syntek 174f:5212
In-Reply-To: <200712281340.17571.herton@mandriva.com.br>
References: <200712281340.17571.herton@mandriva.com.br>
Message-ID: <200712290026.53860.laurent.pinchart@skynet.be>

Hi Herton,

On Friday 28 December 2007, Herton Ronaldo Krzesinski wrote:
> This patch from Claudio S. Matsuoka adds a new quirk to make the Syntek
> 174f:5212 work.
>
> From 79775881893806a3aab141b278cf4039673121d7 Mon Sep 17 00:00:00 2001
> From: Claudio Matsuoka <cmatsuoka at gmail.com>
> Date: Thu, 27 Dec 2007 13:10:14 -0200
> Subject: [PATCH] Add quirk for Syntek 174f:5212 camera
>
> The Syntek 174f:5212 UVC camera in HP Spartan laptops fail to synchronize
> frames, add quirk to skip synchronization.
>
> Signed-off-by: Claudio Matsuoka <cmatsuoka at gmail.com>
> ---
>  uvc_driver.c |   12 ++++++++++++
>  uvc_video.c  |   12 ++++++++----
>  uvcvideo.h   |    1 +
>  3 files changed, 21 insertions(+), 4 deletions(-)
>
> diff --git a/uvc_driver.c b/uvc_driver.c
> index 715b4b1..49fb900 100644
> --- a/uvc_driver.c
> +++ b/uvc_driver.c
> @@ -1530,6 +1530,7 @@ static int uvc_probe(struct usb_interface *intf,
>  	dev->intf = usb_get_intf(intf);
>  	dev->intfnum = intf->cur_altsetting->desc.bInterfaceNumber;
>  	dev->quirks = id->driver_info;
> +	dev->udev->quirks = id->driver_info;

The dev->udev->quirks field is meant to be filed with values found in 
linux/usb/quirks.h.

I have a pending patch that passes the uvc_video_device structure to URB 
completion callbacks instead of the uvc_video_queue structure. This should 
take care of the problem you solved by setting dev->udev->quirks.

>  	/* Parse the Video Class control descriptor */
>  	if (uvc_parse_control(dev) < 0) {
> @@ -1653,6 +1654,17 @@ static int uvc_resume(struct usb_interface *intf)
>   * though they are compliant.
>   */
>  static struct usb_device_id uvc_ids[] = {
> +	/* Syntek (HP Spartan) */
> +	{ .match_flags		= USB_DEVICE_ID_MATCH_DEVICE
> +				| USB_DEVICE_ID_MATCH_INT_INFO,
> +	  .idVendor		= 0x174f,
> +	  .idProduct		= 0x5212,
> +	  .bInterfaceClass	= USB_CLASS_VIDEO,
> +	  .bInterfaceSubClass	= 1,
> +	  .bInterfaceProtocol	= 0,
> +	  .driver_info		= UVC_QUIRK_PROBE_MINMAX
> +				| UVC_QUIRK_DONT_SYNCHRONIZE
> +	},
>  	/* ALi M5606 (Clevo M540SR) */
>  	{ .match_flags		= USB_DEVICE_ID_MATCH_DEVICE
>
>  				| USB_DEVICE_ID_MATCH_INT_INFO,
>
> diff --git a/uvc_video.c b/uvc_video.c
> index 60e1507..dde1469 100644
> --- a/uvc_video.c
> +++ b/uvc_video.c
> @@ -266,7 +266,8 @@ done:
>   * uvc_video_decode_end will never be called with a NULL buffer.
>   */
>  static int uvc_video_decode_start(struct uvc_video_queue *queue,
> -		struct uvc_buffer *buf, const __u8 *data, int len)
> +		struct uvc_buffer *buf, const __u8 *data, int len,
> +		const __u32 quirks)
>  {
>  	__u8 fid;
>
> @@ -300,7 +301,8 @@ static int uvc_video_decode_start(struct
> uvc_video_queue *queue, * frame will always be in sync.
>  	 */
>  	if (buf->state != UVC_BUF_STATE_ACTIVE) {
> -		if (fid == queue->last_fid) {
> +		if (~quirks & UVC_QUIRK_DONT_SYNCHRONIZE &&
> +					fid == queue->last_fid) {

Does the camera really fail to toggle the FID bit, or is there another 
problem ? Could you please send me some debug logs to explain the issue (with 
header bits printed to the kernel log) ?.

>  			uvc_trace(UVC_TRACE_FRAME, "Dropping payload (out of "
>  				"sync).\n");
>  			return -ENODATA;
> @@ -396,7 +398,8 @@ static void uvc_video_decode_isoc(struct urb *urb,
>  		mem = urb->transfer_buffer + urb->iso_frame_desc[i].offset;
>  		do {
>  			ret = uvc_video_decode_start(queue, buf, mem,
> -				urb->iso_frame_desc[i].actual_length);
> +				urb->iso_frame_desc[i].actual_length,
> +				urb->dev->quirks);
>  			if (ret == -EAGAIN)
>  				buf = uvc_queue_next_buffer(queue, buf);
>  		} while (ret == -EAGAIN);
> @@ -432,7 +435,8 @@ static void uvc_video_decode_bulk(struct urb *urb,
>  	 */
>  	if (queue->bulk.header_size == -1) {
>  		do {
> -			ret = uvc_video_decode_start(queue, buf, mem, len);
> +			ret = uvc_video_decode_start(queue, buf, mem, len,
> +							urb->dev->quirks);
>  			if (ret == -EAGAIN)
>  				buf = uvc_queue_next_buffer(queue, buf);
>  		} while (ret == -EAGAIN);
> diff --git a/uvcvideo.h b/uvcvideo.h
> index 84ef9f4..6545951 100644
> --- a/uvcvideo.h
> +++ b/uvcvideo.h
> @@ -312,6 +312,7 @@ struct uvc_xu_control {
>  #define UVC_QUIRK_PROBE_MINMAX		0x00000002
>  #define UVC_QUIRK_PROBE_EXTRAFIELDS	0x00000004
>  #define UVC_QUIRK_BUILTIN_ISIGHT	0x00000008
> +#define UVC_QUIRK_DONT_SYNCHRONIZE	0x00000010
>
>  /* Format flags */
>  #define UVC_FMT_FLAG_COMPRESSED		0x00000001

Best regards,

Laurent Pinchart


From bob.l.lewis at gmail.com  Sat Dec 29 06:48:37 2007
From: bob.l.lewis at gmail.com (Robert Lewis)
Date: Fri, 28 Dec 2007 21:48:37 -0800
Subject: [Linux-uvc-devel] Installing uvcvideo.ko driver on SUSE Linux
Message-ID: <86d2b63e0712282148qa35f158ib831f7c882c52f2b@mail.gmail.com>

I was hoping some SUSE user might have succeeded in installing the
latest uvc driver
and could advise how I might get past my failure..

I am using SUSE Linux 10.3 with kernel 2.6.22.13-0.3-default

I am able to make the driver.
However, the problem is with installing the driver.

I am attempting to install a driver for my Logitech 9000.
The supplied driver from SUSE with 10.3 is
uvcvideo-kmp-default-r117_2.6.22.5_31-2
However, the UVC developers have released 158 although that is a beta.
I would like to try out the beta.  I removed the rpm for the SUSE released
driver.

When I compile the one that I get from
svn://svn.berlios.de/linux-uvc/linux-uvc/trun
which required that the svn command be installed on ones system
I then put the driver in:
/lib/modules/$(uname -r)/kernel/drivers/media/video/usbvideo/
The name of the driver is uvcvideo.ko

However, when I envoke the
modprobe uvcvideo                    # command
I get back.
FATAL: Module uvcvideo.ko not found.

What am I doing wrong?   Any help most appreciated as is the driver
you guys have worked hard to create.

Cheers,
Bob


From brandon at ifup.org  Sat Dec 29 06:59:28 2007
From: brandon at ifup.org (Brandon Philips)
Date: Fri, 28 Dec 2007 21:59:28 -0800
Subject: [Linux-uvc-devel] Installing uvcvideo.ko driver on SUSE Linux
In-Reply-To: <86d2b63e0712282148qa35f158ib831f7c882c52f2b@mail.gmail.com>
References: <86d2b63e0712282148qa35f158ib831f7c882c52f2b@mail.gmail.com>
Message-ID: <20071229055928.GA22615@ifup.org>

On 21:48 Fri 28 Dec 2007, Robert Lewis wrote:
> I am attempting to install a driver for my Logitech 9000.  The
> supplied driver from SUSE with 10.3 is
> uvcvideo-kmp-default-r117_2.6.22.5_31-2 However, the UVC developers
> have released 158 although that is a beta.  I would like to try out
> the beta.  I removed the rpm for the SUSE released driver.

I will look into getting this updated.

> However, when I envoke the
> modprobe uvcvideo                    # command
> I get back.
> FATAL: Module uvcvideo.ko not found.
> 
> What am I doing wrong?   Any help most appreciated as is the driver
> you guys have worked hard to create.

Try running `depmod -a` as root.

Thanks,

	Brandon


From georgeps at xmission.com  Sat Dec 29 08:12:37 2007
From: georgeps at xmission.com (George Peter Staplin)
Date: Sat, 29 Dec 2007 00:12:37 -0700
Subject: [Linux-uvc-devel] (041e:4063) uvc_trace_param enhanced output
Message-ID: <20071229001237.82yfahbd0k848cgs@webmail.xmission.com>

This is a followup to my message about the Creative VF0410 Live! Cam  
Video IM Pro (041e:4063)

I changed the uvc_trace_param in uvc_driver.c, so that I could get  
more information about what is going on:
unsigned int uvc_trace_param = UVC_TRACE_PROBE | UVC_TRACE_DESCR |  
UVC_TRACE_CONTROL | UVC_TRACE_FORMAT | UVC_TRACE_CAPTURE |  
UVC_TRACE_CALLS | UVC_TRACE_IOCTL | UVC_TRACE_FRAME;

Now when I insmod the driver, and plug in the webcam I get:

[ 2626.794551] usb 5-8: new high speed USB device using ehci_hcd and  
address 12
[ 2626.968643] usb 5-8: configuration #1 chosen from 1 choice
[ 2626.969218] uvcvideo: Probing generic UVC device 8
[ 2626.969234] uvcvideo: Found format YUV 4:2:2 (YUYV).
[ 2626.969239] uvcvideo: - 640x480 (30.0 fps)
[ 2626.969243] uvcvideo: - 352x288 (30.0 fps)
[ 2626.969247] uvcvideo: - 320x240 (30.0 fps)
[ 2626.969250] uvcvideo: - 176x144 (30.0 fps)
[ 2626.969253] uvcvideo: - 160x120 (30.0 fps)
[ 2626.969257] uvcvideo: Found format MJPEG.
[ 2626.969261] uvcvideo: - 640x480 (30.0 fps)
[ 2626.969264] uvcvideo: - 352x288 (30.0 fps)
[ 2626.969267] uvcvideo: - 320x240 (30.0 fps)
[ 2626.969271] uvcvideo: - 176x144 (30.0 fps)
[ 2626.969274] uvcvideo: - 160x120 (30.0 fps)
[ 2626.969282] uvcvideo: Found a Status endpoint (addr 83).
[ 2626.969286] uvcvideo: Found UVC 1.00 device VF0410 Live! Cam Video  
IM Pro (041e:4063)
[ 2626.969296] uvcvideo: Added control  
00000000-0000-0000-0000-000000000101/2 to device 8 entity 3
[ 2626.969302] uvcvideo: Added control  
00000000-0000-0000-0000-000000000101/3 to device 8 entity 3
[ 2626.969309] uvcvideo: Added control  
00000000-0000-0000-0000-000000000101/6 to device 8 entity 3
[ 2626.969315] uvcvideo: Added control  
00000000-0000-0000-0000-000000000101/7 to device 8 entity 3
[ 2626.969322] uvcvideo: Added control  
00000000-0000-0000-0000-000000000101/8 to device 8 entity 3
[ 2626.969330] uvcvideo: Added control  
00000000-0000-0000-0000-000000000101/9 to device 8 entity 3
[ 2626.969339] uvcvideo: Added control  
00000000-0000-0000-0000-000000000101/1 to device 8 entity 3
[ 2626.969348] uvcvideo: Added control  
00000000-0000-0000-0000-000000000101/4 to device 8 entity 3
[ 2626.969357] uvcvideo: Added control  
00000000-0000-0000-0000-000000000101/5 to device 8 entity 3
[ 2626.969366] uvcvideo: Added control  
00000000-0000-0000-0000-000000000001/2 to device 8 entity 1
[ 2626.969375] uvcvideo: Added control  
00000000-0000-0000-0000-000000000001/4 to device 8 entity 1
[ 2626.969386] uvcvideo: Added control  
00000000-0000-0000-0000-000000000101/11 to device 8 entity 3
[ 2626.969395] uvcvideo: Added control  
00000000-0000-0000-0000-000000000101/10 to device 8 entity 3
[ 2626.969402] uvcvideo: Scanning UVC chain: OT 2 <- XU 5 <- XU 4 <-  
PU 3 <- IT 1
[ 2626.969415] uvcvideo: Found a valid video chain (1 -> 2).
[ 2626.975707] uvcvideo: UVC device initialized.
[ 2627.004211] 12:3:1: cannot get freq at ep 0x84

Any clue as to why 12:3:1 (what is that?) thinks the endpoint 0x84 is  
invalid for freq (fetching?)?

Thanks,

George
-- 
http://www.xmission.com/~georgeps/  http://whim.linuxsys.net
http://code.google.com/p/megapkg/   http://code.google.com/p/opennexx/



From abotezatu at gmail.com  Sat Dec 29 09:45:53 2007
From: abotezatu at gmail.com (Alexandru Botezatu)
Date: Sat, 29 Dec 2007 10:45:53 +0200
Subject: [Linux-uvc-devel] Fwd: Panasonic PV-GS500 not working with any of
	the webcam apps
In-Reply-To: <164b2cf80712290044j7f726b04xc68e0ca93c15a67d@mail.gmail.com>
References: <164b2cf80712232303i293eacacodd630560cca9dcc3@mail.gmail.com>
	<164b2cf80712232309n302c45c9nacd68e3de2d552e7@mail.gmail.com>
	<200712282351.00013.laurent.pinchart@skynet.be>
	<164b2cf80712290044j7f726b04xc68e0ca93c15a67d@mail.gmail.com>
Message-ID: <164b2cf80712290045q48514188tfc89fab02ac7a874@mail.gmail.com>

Hi Laurent,

thank you for the reply. From what I understand, webcam mode is
unuseable since it produces MJPG output and none of the chat apps
support MJPG  webcams. Am I correct in this assumption?
I was able to run skype in windows, using splitcam, but I do not like
doing that since windows resides on a separate drive and I have to
muck with the cables every time I want to video conference.

Ok, more on topic, here is the output of updated lsusb from DV mode:

Bus 001 Device 003: ID 04da:231e Panasonic (Matsushita)
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x04da Panasonic (Matsushita)
  idProduct          0x231e
  bcdDevice            1.00
  iManufacturer           1 Panasonic
  iProduct                2 DVC
  iSerial                 3 0000118d60cb
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          175
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0xc0
      Self Powered
    MaxPower                2mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               4 Video Edit
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              4 Video Edit
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           89
        dwClockFrequency       13.500000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                17
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               6 Camera
        wObjectiveFocalLengthMin    100
        wObjectiveFocalLengthMax   1200
        wOcularFocalLength          100
        bControlSize                  2
        bmControls           0x00000000
      VideoControl Interface Descriptor:
        bLength                16
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0202 Sequential Media
        bAssocTerminal          0
        iTerminal               7 MTIT
        junk at descriptor end: 01 0f 05 af ff ff 7f 02
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               5
        iTerminal               8 OT
      VideoControl Interface Descriptor:
        bLength                 8
        bDescriptorType        36
        bDescriptorSubtype      4 (SELECTOR_UNIT)
        bUnitID                 4
        bNrInPins               2
        baSource( 0)            1
        baSource( 1)            2
        iSelector               9 SU
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 5
        guidExtensionCode         {6f04be00-b9e8-4b11-8fa2-a5b99e5a7698}
        bNumControl             3
        bNrPins                 1
        baSourceID( 0)          4
        bControlSize            1
        bmControls( 0)       0x07
        iExtension             10 XU
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface             11 DV IN
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormarts                        1
        wTotalLength                    33024
        bEndPointAddress                    0
        bmInfo                              3
        bTerminalLink                       0
        bStillCaptureMethod                 0
        bTriggerSupport                     0
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                     9
      VideoStreaming Interface Descriptor:
        bLength                             9
        bDescriptorType                    36
        bDescriptorSubtype                 12         Invalid desc
subtype: 01 c0 d4 01 00 80
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface             11 DV IN
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x01ec  1x 492 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0         8
  bNumConfigurations      1
Device Status:     0x0001
  Self Powered

Thank you.


> Please use usbutils 0.72 or newer and get the lsusb output in DV mode (that
> one was from webcam mode).
>
> Best regards,
>
> Laurent Pinchart
>


From mail at andreas-demmer.de  Sat Dec 29 10:07:43 2007
From: mail at andreas-demmer.de (Andreas Demmer)
Date: Sat, 29 Dec 2007 10:07:43 +0100
Subject: [Linux-uvc-devel] built-in logitech webcam (dell oem) not
	recognized
In-Reply-To: <200712271848.17690.mail@andreas-demmer.de>
References: <200712271619.37429.mail@andreas-demmer.de>
	<200712271723.12604.mxhaard@magic.fr>
	<200712271848.17690.mail@andreas-demmer.de>
Message-ID: <200712291007.43462.mail@andreas-demmer.de>

Andreas Demmer worte
> After extracting the .exe file, I found 4 .inf files in it. Since I am
> not quite sure which is the right one, I zipped all 4 files for you:
> http://www.andreas-demmer.de/dell_webcam.tar.gz
>
> How do I notice when the cam is supported in gspca?

Just in case I missed it: Was this question answered or are you lucky and on 
holidays? :-)

> What files do I have to 
> update, then? Download the latest gspca from SVN and build it manually?

I am asking because I did not quite understand the uvc driver. Is this the 
only driver I need?

Greets,
Andreas

-- 
http://www.andreas-demmer.de


From mslemko at netscape.net  Sat Dec 29 05:58:42 2007
From: mslemko at netscape.net (mslemko)
Date: Fri, 28 Dec 2007 21:58:42 -0700
Subject: [Linux-uvc-devel] Logitech Quickcam Orbit AF pan and tilt errors
In-Reply-To: <200712290007.35714.laurent.pinchart@skynet.be>
References: <47754E58.5080600@netscape.net>
	<200712290007.35714.laurent.pinchart@skynet.be>
Message-ID: <4775D402.3080306@netscape.net>

Hi Laurent,

Laurent Pinchart wrote:
> Hi Mark,
>
> On Friday 28 December 2007, mslemko wrote:
>   
>> Hi,
>>
>> I have a Logitech Quickcam Orbit AF and the video is working nicely at 5
>> fps in all camera resolutions.
>>
>> However, I get errors from the luvcview application when trying to set
>> Pan or Tilt.
>> for example:
>>   ioctl querycontrol error 22
>>   Set Tilt up error
>>     
>
> Pan and tilt don't work at resolutions higher than 640x480 (from the top of my 
> head, it might be another resolution limit). That's a webcam limitation.
>
>   
Thanks for the idea. I tried this with 320x240 and 640x480, and pan/tilt 
doesn't work at these resolutions either. Perhaps the camera has changed 
recently. Is there any information that might help in tracking the 
difference down?
>> Is there something I can configure to fix this issue?
>>
>> I've attached the lsusb dump for the camera ( lsusb -v -d 046d:0994 )
>>     
>
> Please use usbutils 0.72 or newer when generating lsusb dumps.
>   
I installed usbutils 0.73, attached new dump using ( lsusb -v -d 
046d:0994 ).
> Best regards,
>
> Laurent Pinchart
>   

All the best,

-Mark Slemko
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: tmp.txt
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071228/aef738c0/attachment.txt>

From mxhaard at magic.fr  Sat Dec 29 12:09:25 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Sat, 29 Dec 2007 12:09:25 +0100
Subject: [Linux-uvc-devel] built-in logitech webcam (dell oem) not
	recognized
In-Reply-To: <200712291007.43462.mail@andreas-demmer.de>
References: <200712271619.37429.mail@andreas-demmer.de>
	<200712271848.17690.mail@andreas-demmer.de>
	<200712291007.43462.mail@andreas-demmer.de>
Message-ID: <200712291209.26110.mxhaard@magic.fr>

Le samedi 29 d?cembre 2007 10:07, Andreas Demmer a ?crit?:
> Andreas Demmer worte
>
> > After extracting the .exe file, I found 4 .inf files in it. Since I am
> > not quite sure which is the right one, I zipped all 4 files for you:
> > http://www.andreas-demmer.de/dell_webcam.tar.gz
> >
> > How do I notice when the cam is supported in gspca?
>
> Just in case I missed it: Was this question answered or are you lucky and
> on holidays? :-)
>
> > What files do I have to
> > update, then? Download the latest gspca from SVN and build it manually?
>
> I am asking because I did not quite understand the uvc driver. Is this the
> only driver I need?
>
> Greets,
> Andreas
Andreas,
from our lVLMA64v.inf your chips seem a VC0321 from Vimicro but i did not know 
what sensor are in used. Your webcam is not UVC compliant so you don't need 
the uvc driver. I will try to support your webcam in gspca soon, see you on 
the "QuickCam Team Forums Mailer"  from
http://www.quickcamteam.net/
There are a thread for your webcam ;-)
Cheers,
-- 
Michel Xhaard
http://mxhaard.free.fr


From laurent.pinchart at skynet.be  Sat Dec 29 11:48:31 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 29 Dec 2007 11:48:31 +0100
Subject: [Linux-uvc-devel] Logitech Quickcam Orbit AF pan and tilt errors
In-Reply-To: <4775D402.3080306@netscape.net>
References: <47754E58.5080600@netscape.net>
	<200712290007.35714.laurent.pinchart@skynet.be>
	<4775D402.3080306@netscape.net>
Message-ID: <200712291148.31584.laurent.pinchart@skynet.be>

Hi Mark,

On Saturday 29 December 2007, mslemko wrote:
> Laurent Pinchart wrote:
> > On Friday 28 December 2007, mslemko wrote:
> >> Hi,
> >>
> >> I have a Logitech Quickcam Orbit AF and the video is working nicely at 5
> >> fps in all camera resolutions.
> >>
> >> However, I get errors from the luvcview application when trying to set
> >> Pan or Tilt.
> >> for example:
> >>   ioctl querycontrol error 22
> >>   Set Tilt up error
> >
> > Pan and tilt don't work at resolutions higher than 640x480 (from the top
> > of my head, it might be another resolution limit). That's a webcam
> > limitation.
>
> Thanks for the idea. I tried this with 320x240 and 640x480, and pan/tilt
> doesn't work at these resolutions either. Perhaps the camera has changed
> recently. Is there any information that might help in tracking the
> difference down?

Actually error 22 (EINVAL) means that an invalid parameter has been supplied. 
It shouldn't be related to the video resolution. My bad.

Pan/tilt support is implemented as an extension unit in Logitech webcams. The 
driver now requires an external utility to configure extension units. Have a 
look at http://www.quickcamteam.net/software/libwebcam/ for instructions.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Dec 29 12:32:04 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 29 Dec 2007 12:32:04 +0100
Subject: [Linux-uvc-devel] Fwd: Panasonic PV-GS500 not working with any
	of the webcam apps
In-Reply-To: <164b2cf80712290045q48514188tfc89fab02ac7a874@mail.gmail.com>
References: <164b2cf80712232303i293eacacodd630560cca9dcc3@mail.gmail.com>
	<164b2cf80712290044j7f726b04xc68e0ca93c15a67d@mail.gmail.com>
	<164b2cf80712290045q48514188tfc89fab02ac7a874@mail.gmail.com>
Message-ID: <200712291232.04739.laurent.pinchart@skynet.be>

Hi Alexandru,

On Saturday 29 December 2007, Alexandru Botezatu wrote:
> Hi Laurent,
>
> thank you for the reply. From what I understand, webcam mode is
> unuseable since it produces MJPG output and none of the chat apps
> support MJPG  webcams. Am I correct in this assumption?

MJPEG support is getting more common. luvcview, Ekiga, aMsn, all of them now 
support MJPEG. DV, on the other hand, isn't widely supported.

> I was able to run skype in windows, using splitcam, but I do not like
> doing that since windows resides on a separate drive and I have to
> muck with the cables every time I want to video conference.
>
> Ok, more on topic, here is the output of updated lsusb from DV mode:
[snip]

I've just committed a patch which should fix the issue you experienced with DV 
mode.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Dec 29 12:42:11 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 29 Dec 2007 12:42:11 +0100
Subject: [Linux-uvc-devel] (041e:4063) uvc_trace_param enhanced output
In-Reply-To: <20071229001237.82yfahbd0k848cgs@webmail.xmission.com>
References: <20071229001237.82yfahbd0k848cgs@webmail.xmission.com>
Message-ID: <200712291242.11322.laurent.pinchart@skynet.be>

Hi George,

On Saturday 29 December 2007, George Peter Staplin wrote:
> This is a followup to my message about the Creative VF0410 Live! Cam
> Video IM Pro (041e:4063)
>
> I changed the uvc_trace_param in uvc_driver.c, so that I could get
> more information about what is going on:
> unsigned int uvc_trace_param = UVC_TRACE_PROBE | UVC_TRACE_DESCR |
> UVC_TRACE_CONTROL | UVC_TRACE_FORMAT | UVC_TRACE_CAPTURE |
> UVC_TRACE_CALLS | UVC_TRACE_IOCTL | UVC_TRACE_FRAME;
>
> Now when I insmod the driver, and plug in the webcam I get:
>
> [ 2626.794551] usb 5-8: new high speed USB device using ehci_hcd and
> address 12
> [ 2626.968643] usb 5-8: configuration #1 chosen from 1 choice
> [ 2626.969218] uvcvideo: Probing generic UVC device 8
> [ 2626.969234] uvcvideo: Found format YUV 4:2:2 (YUYV).
> [ 2626.969239] uvcvideo: - 640x480 (30.0 fps)
> [ 2626.969243] uvcvideo: - 352x288 (30.0 fps)
> [ 2626.969247] uvcvideo: - 320x240 (30.0 fps)
> [ 2626.969250] uvcvideo: - 176x144 (30.0 fps)
> [ 2626.969253] uvcvideo: - 160x120 (30.0 fps)
> [ 2626.969257] uvcvideo: Found format MJPEG.
> [ 2626.969261] uvcvideo: - 640x480 (30.0 fps)
> [ 2626.969264] uvcvideo: - 352x288 (30.0 fps)
> [ 2626.969267] uvcvideo: - 320x240 (30.0 fps)
> [ 2626.969271] uvcvideo: - 176x144 (30.0 fps)
> [ 2626.969274] uvcvideo: - 160x120 (30.0 fps)
> [ 2626.969282] uvcvideo: Found a Status endpoint (addr 83).
> [ 2626.969286] uvcvideo: Found UVC 1.00 device VF0410 Live! Cam Video
> IM Pro (041e:4063)
> [ 2626.969296] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000101/2 to device 8 entity 3
> [ 2626.969302] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000101/3 to device 8 entity 3
> [ 2626.969309] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000101/6 to device 8 entity 3
> [ 2626.969315] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000101/7 to device 8 entity 3
> [ 2626.969322] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000101/8 to device 8 entity 3
> [ 2626.969330] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000101/9 to device 8 entity 3
> [ 2626.969339] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000101/1 to device 8 entity 3
> [ 2626.969348] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000101/4 to device 8 entity 3
> [ 2626.969357] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000101/5 to device 8 entity 3
> [ 2626.969366] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000001/2 to device 8 entity 1
> [ 2626.969375] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000001/4 to device 8 entity 1
> [ 2626.969386] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000101/11 to device 8 entity 3
> [ 2626.969395] uvcvideo: Added control
> 00000000-0000-0000-0000-000000000101/10 to device 8 entity 3
> [ 2626.969402] uvcvideo: Scanning UVC chain: OT 2 <- XU 5 <- XU 4 <-
> PU 3 <- IT 1
> [ 2626.969415] uvcvideo: Found a valid video chain (1 -> 2).
> [ 2626.975707] uvcvideo: UVC device initialized.
> [ 2627.004211] 12:3:1: cannot get freq at ep 0x84
>
> Any clue as to why 12:3:1 (what is that?) thinks the endpoint 0x84 is
> invalid for freq (fetching?)?

The message is printed by the usbaudio driver. Don't worry about it. usbaudio 
has been fixed in 2.6.22 (or 2.6.23, can't remember from the top of my head). 
It shouldn't break anything anyway.

Your webcam seems to be correctly detected and initialised by the driver. It's 
now time to try and use it. I suggest luvcview, uvccapture or ucview for a 
first try. Let me know if it works.

Best regards,

Laurent Pinchart


From jice at free.fr  Sat Dec 29 13:17:15 2007
From: jice at free.fr (Jean-Christophe Jice Cardot)
Date: Sat, 29 Dec 2007 13:17:15 +0100
Subject: [Linux-uvc-devel] supported device Philips SPC1000NC
In-Reply-To: <200712282355.48719.laurent.pinchart@skynet.be>
References: <200712272349.18294.jice@free.fr>
	<200712282355.48719.laurent.pinchart@skynet.be>
Message-ID: <200712291317.19829.jice@free.fr>

Le vendredi 28 d?cembre 2007, Laurent Pinchart a ?crit :
> That doesn't look good. Do the 'USB disconnect' messages appear on their
> own when you're not doing anything, or are they printed only when you try
> to use the webcam ? Please try to plug the camera in another port and see
> if it helps.

here it is. after the ">", the lines from dmesg.

rmmod uvcvideo (ro remove the old version)
>usbcore: deregistering driver uvcvideo

insmod ./uvcvideo.ko
>uvcvideo: Found UVC 1.00 device Philips SPC 1000NC Webcam (0471:0332)
>usbcore: registered new driver uvcvideo
>USB Video Class driver (v0.1.0)

press the camera button
>uvcvideo: Button event (1).
>uvcvideo: Button event (0).

[fred at jice luvcview-20070512]$ ./luvcview -d /dev/video1
luvcview version 0.2.1
Video driver: x11
A window manager is available
video /dev/video1

Stop asked
 Clean Up done Quit
>nothing in dmesg

[fred at jice luvcview-20070512]$ ./luvcview -d /dev/video1
luvcview version 0.2.1
Video driver: x11
A window manager is available
video /dev/video1
Unable to dequeue buffer (5).
Error grabbing
 Clean Up done Quit
>usb 1-1: USB disconnect, address 2
>usb 1-1: new high speed USB device using ehci_hcd and address 3
>usb 1-1: configuration #1 chosen from 1 choice
>uvcvideo: Found UVC 1.00 device Philips SPC 1000NC Webcam (0471:0332)
>3:3:1: cannot get freq at ep 0x84

also, /dev/video1 has been recreated:
it was:
>crw-rw---- 1 fred video 81, 1 2007-12-29 12:12 /dev/v4l/video1
and is now, after the failure:
>crw-rw---- 1 fred video 81, 1 2007-12-29 12:25 /dev/v4l/video1
note the change in the time.

again a failure of luvcview:
>usb 1-1: USB disconnect, address 3
>usb 1-1: new high speed USB device using ehci_hcd and address 4
>usb 1-1: configuration #1 chosen from 1 choice
>uvcvideo: Found UVC 1.00 device Philips SPC 1000NC Webcam (0471:0332)
>4:3:1: cannot get freq at ep 0x84

then another:
>usb 1-1: USB disconnect, address 4
>usb 1-1: new high speed USB device using ehci_hcd and address 5
>usb 1-1: configuration #1 chosen from 1 choice
>uvcvideo: Found UVC 1.00 device Philips SPC 1000NC Webcam (0471:0332)
>5:3:1: cannot get freq at ep 0x84

then it works (and nothing in dmesg).

there is no logical suite in the failures and successes (like 2 failures then 
one success).

so let's try to change the plug:
unplug:
>usb 1-1: USB disconnect, address 13

plug:
>usb 1-3: new high speed USB device using ehci_hcd and address 14
>usb 1-3: configuration #1 chosen from 1 choice
>uvcvideo: Found UVC 1.00 device Philips SPC 1000NC Webcam (0471:0332)
>14:3:1: cannot get freq at ep 0x84

again luvcview fails then works then fails then fails...
>usb 1-3: USB disconnect, address 14
>usb 1-3: new high speed USB device using ehci_hcd and address 15
>usb 1-3: configuration #1 chosen from 1 choice
>uvcvideo: Found UVC 1.00 device Philips SPC 1000NC Webcam (0471:0332)
>15:3:1: cannot get freq at ep 0x84

ok, this was my only usb2 controller, so let's try a USB1 controller:
>usb 1-3: USB disconnect, address 15
>usb 5-2: new full speed USB device using uhci_hcd and address 4
>usb 5-2: not running at top speed; connect to a high speed hub
>usb 5-2: configuration #1 chosen from 1 choice
>uvcvideo: Found UVC 1.00 device Philips SPC 1000NC Webcam (0471:0332)
>4:3:1: cannot get freq at ep 0x84

surprise! luvcview always work properly! and with the same fps (12).

so now I've a work-around, but still I'd like to help it work on the USB2 
controller if it suits you, because maybe others will have the same 
problem...

bye and have a good "f?tes de fin d'ann?e" ! (you're speaking french, Laurent, 
aren't you?)

-- 
Jean-Christophe "Jic?" Cardot - cofondateur de http://lea-linux.org
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part.
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071229/6359435d/attachment.pgp>

From bob.l.lewis at gmail.com  Sat Dec 29 22:29:48 2007
From: bob.l.lewis at gmail.com (Robert Lewis)
Date: Sat, 29 Dec 2007 13:29:48 -0800
Subject: [Linux-uvc-devel] Logitech 9000 shows up as a output device.
Message-ID: <86d2b63e0712291329y1435be77r1fc3570da013496d@mail.gmail.com>

Out of curiosity, now that I have my Logitech 9000 working with the
latest driver.
The Microphone works well too.
However, I notice that the Skype control panel shows the Camera as
both an input and output
device.  Since obviously it is not an output device then Skype
provides a failure message about
no output device.

What s/w registers the Camera as an output device for audio?  Is this
a correctable
phenomenon?

Cheers,
Bob


From richard at 2007.atterer.net  Sat Dec 29 23:23:38 2007
From: richard at 2007.atterer.net (Richard Atterer)
Date: Sat, 29 Dec 2007 23:23:38 +0100
Subject: [Linux-uvc-devel] Logitech 9000 shows up as a output device.
In-Reply-To: <86d2b63e0712291329y1435be77r1fc3570da013496d@mail.gmail.com>
References: <86d2b63e0712291329y1435be77r1fc3570da013496d@mail.gmail.com>
Message-ID: <20071229222337.GA26445@vilya>

On Sat, Dec 29, 2007 at 01:29:48PM -0800, Robert Lewis wrote:
> However, I notice that the Skype control panel shows the Camera as both 
> an input and output device.

I can confirm this. IMHO Skype is just buggy in this respect, because 
"aplay -l" does not list the camera as an output device, whereas "arecord 
-l" does correctly list it as an input device.

Cheers,

  Richard

-- 
  __   _
  |_) /|  Richard Atterer     |  GnuPG key: 888354F7
  | \/?|  http://atterer.net  |  08A9 7B7D 3D13 3EF2 3D25  D157 79E6 F6DC 8883 54F7
  ? '` ?


From mslemko at netscape.net  Sat Dec 29 23:29:15 2007
From: mslemko at netscape.net (mslemko)
Date: Sat, 29 Dec 2007 15:29:15 -0700
Subject: [Linux-uvc-devel] Logitech Quickcam Orbit AF pan and tilt errors
In-Reply-To: <200712291148.31584.laurent.pinchart@skynet.be>
References: <47754E58.5080600@netscape.net>
	<200712290007.35714.laurent.pinchart@skynet.be>
	<4775D402.3080306@netscape.net>
	<200712291148.31584.laurent.pinchart@skynet.be>
Message-ID: <4776CA3B.2040108@netscape.net>

Hi Laurent,

Thank you for the link!
That is exactly what I needed and it works perfectly (with a bit of 
fiddling to compile).

http://www.quickcamteam.net/software/libwebcam/

Have a great new year!

-Mark

Laurent Pinchart wrote:
> Hi Mark,
>
> On Saturday 29 December 2007, mslemko wrote:
>   
>> Laurent Pinchart wrote:
>>     
>>> On Friday 28 December 2007, mslemko wrote:
>>>       
>>>> Hi,
>>>>
>>>> I have a Logitech Quickcam Orbit AF and the video is working nicely at 5
>>>> fps in all camera resolutions.
>>>>
>>>> However, I get errors from the luvcview application when trying to set
>>>> Pan or Tilt.
>>>> for example:
>>>>   ioctl querycontrol error 22
>>>>   Set Tilt up error
>>>>         
>>> Pan and tilt don't work at resolutions higher than 640x480 (from the top
>>> of my head, it might be another resolution limit). That's a webcam
>>> limitation.
>>>       
>> Thanks for the idea. I tried this with 320x240 and 640x480, and pan/tilt
>> doesn't work at these resolutions either. Perhaps the camera has changed
>> recently. Is there any information that might help in tracking the
>> difference down?
>>     
>
> Actually error 22 (EINVAL) means that an invalid parameter has been supplied. 
> It shouldn't be related to the video resolution. My bad.
>
> Pan/tilt support is implemented as an extension unit in Logitech webcams. The 
> driver now requires an external utility to configure extension units. Have a 
> look at http://www.quickcamteam.net/software/libwebcam/ for instructions.
>
> Best regards,
>
> Laurent Pinchart
>   



From trasp at arcor.de  Sun Dec 30 01:04:32 2007
From: trasp at arcor.de (trasp at arcor.de)
Date: Sun, 30 Dec 2007 01:04:32 +0100 (CET)
Subject: [Linux-uvc-devel] luvcview stream
Message-ID: <1209776.1198973072633.JavaMail.ngmail@webmail11>

Is it possible to save a stream with luvcview while startet in YUYV mode?
With the defaul video format it works.

Webcam is a Logitech Communicate Deluxe (046d:0992)

Peter

Viel oder wenig? Schnell oder langsam? Unbegrenzt surfen + telefonieren
ohne Zeit- und Volumenbegrenzung? DAS TOP ANGEBOT F?R ALLE NEUEINSTEIGER
Jetzt bei Arcor: g?nstig und schnell mit DSL - das All-Inclusive-Paket
f?r clevere Doppel-Sparer, nur  29,95 Euro  inkl. DSL- und ISDN-Grundgeb?hr!
http://www.arcor.de/rd/emf-dsl-2


From georgeps at xmission.com  Sun Dec 30 02:52:04 2007
From: georgeps at xmission.com (George Peter Staplin)
Date: Sat, 29 Dec 2007 18:52:04 -0700
Subject: [Linux-uvc-devel] (041e:4063) uvc_trace_param enhanced output
In-Reply-To: <200712291242.11322.laurent.pinchart@skynet.be>
References: <20071229001237.82yfahbd0k848cgs@webmail.xmission.com>
	<200712291242.11322.laurent.pinchart@skynet.be>
Message-ID: <20071229185204.q554lepfwgowskc0@webmail.xmission.com>

Quoted Laurent Pinchart <laurent.pinchart at skynet.be>:

> Hi George,

Hi Laurent,

> On Saturday 29 December 2007, George Peter Staplin wrote:
>> This is a followup to my message about the Creative VF0410 Live! Cam
>> Video IM Pro (041e:4063)
>>
>> I changed the uvc_trace_param in uvc_driver.c, so that I could get
>> more information about what is going on:
>> unsigned int uvc_trace_param = UVC_TRACE_PROBE | UVC_TRACE_DESCR |
>> UVC_TRACE_CONTROL | UVC_TRACE_FORMAT | UVC_TRACE_CAPTURE |
>> UVC_TRACE_CALLS | UVC_TRACE_IOCTL | UVC_TRACE_FRAME;
>>
>> Now when I insmod the driver, and plug in the webcam I get:
>>
>> [ 2626.794551] usb 5-8: new high speed USB device using ehci_hcd and
>> address 12
>> [ 2626.968643] usb 5-8: configuration #1 chosen from 1 choice
>> [ 2626.969218] uvcvideo: Probing generic UVC device 8
>> [ 2626.969234] uvcvideo: Found format YUV 4:2:2 (YUYV).
>> [ 2626.969239] uvcvideo: - 640x480 (30.0 fps)
>> [ 2626.969243] uvcvideo: - 352x288 (30.0 fps)
>> [ 2626.969247] uvcvideo: - 320x240 (30.0 fps)
>> [ 2626.969250] uvcvideo: - 176x144 (30.0 fps)
>> [ 2626.969253] uvcvideo: - 160x120 (30.0 fps)
>> [ 2626.969257] uvcvideo: Found format MJPEG.
>> [ 2626.969261] uvcvideo: - 640x480 (30.0 fps)
>> [ 2626.969264] uvcvideo: - 352x288 (30.0 fps)
>> [ 2626.969267] uvcvideo: - 320x240 (30.0 fps)
>> [ 2626.969271] uvcvideo: - 176x144 (30.0 fps)
>> [ 2626.969274] uvcvideo: - 160x120 (30.0 fps)
>> [ 2626.969282] uvcvideo: Found a Status endpoint (addr 83).
>> [ 2626.969286] uvcvideo: Found UVC 1.00 device VF0410 Live! Cam Video
>> IM Pro (041e:4063)
>> [ 2626.969296] uvcvideo: Added control
>> 00000000-0000-0000-0000-000000000101/2 to device 8 entity 3
>> [ 2626.969302] uvcvideo: Added control
>> 00000000-0000-0000-0000-000000000101/3 to device 8 entity 3
>> [ 2626.969309] uvcvideo: Added control
>> 00000000-0000-0000-0000-000000000101/6 to device 8 entity 3
>> [ 2626.969315] uvcvideo: Added control
>> 00000000-0000-0000-0000-000000000101/7 to device 8 entity 3
>> [ 2626.969322] uvcvideo: Added control
>> 00000000-0000-0000-0000-000000000101/8 to device 8 entity 3
>> [ 2626.969330] uvcvideo: Added control
>> 00000000-0000-0000-0000-000000000101/9 to device 8 entity 3
>> [ 2626.969339] uvcvideo: Added control
>> 00000000-0000-0000-0000-000000000101/1 to device 8 entity 3
>> [ 2626.969348] uvcvideo: Added control
>> 00000000-0000-0000-0000-000000000101/4 to device 8 entity 3
>> [ 2626.969357] uvcvideo: Added control
>> 00000000-0000-0000-0000-000000000101/5 to device 8 entity 3
>> [ 2626.969366] uvcvideo: Added control
>> 00000000-0000-0000-0000-000000000001/2 to device 8 entity 1
>> [ 2626.969375] uvcvideo: Added control
>> 00000000-0000-0000-0000-000000000001/4 to device 8 entity 1
>> [ 2626.969386] uvcvideo: Added control
>> 00000000-0000-0000-0000-000000000101/11 to device 8 entity 3
>> [ 2626.969395] uvcvideo: Added control
>> 00000000-0000-0000-0000-000000000101/10 to device 8 entity 3
>> [ 2626.969402] uvcvideo: Scanning UVC chain: OT 2 <- XU 5 <- XU 4 <-
>> PU 3 <- IT 1
>> [ 2626.969415] uvcvideo: Found a valid video chain (1 -> 2).
>> [ 2626.975707] uvcvideo: UVC device initialized.
>> [ 2627.004211] 12:3:1: cannot get freq at ep 0x84
>>
>> Any clue as to why 12:3:1 (what is that?) thinks the endpoint 0x84 is
>> invalid for freq (fetching?)?
>
> The message is printed by the usbaudio driver. Don't worry about it. usbaudio
> has been fixed in 2.6.22 (or 2.6.23, can't remember from the top of my head).
> It shouldn't break anything anyway.

Oh, I see.

> Your webcam seems to be correctly detected and initialised by the   
> driver. It's
> now time to try and use it. I suggest luvcview, uvccapture or ucview for a
> first try. Let me know if it works.

I see.  lucview works.  thank you :)

Unfortunately some other tools fail that worked with another webcam.   
I'm finding that kopete (a KDE instant messaging program) prints this  
endlessly "read error 19, No such device"

A tool called camstream also has a similar error 19.

I just did an svn update to get rid of my local changes.

I see: uvcvideo: uvc_v4l2_read: not implemented when using camstream  
and kopete.

Does that mean that an mmap interface is the only interface supported?  
  Or perhaps that these programs are using the old Video4Linux kernel  
API?

Thank you for this driver.  :)

George
-- 
http://www.xmission.com/~georgeps/  http://whim.linuxsys.net
http://code.google.com/p/megapkg/   http://code.google.com/p/opennexx/



From abotezatu at gmail.com  Sun Dec 30 07:19:51 2007
From: abotezatu at gmail.com (Alexandru Botezatu)
Date: Sun, 30 Dec 2007 08:19:51 +0200
Subject: [Linux-uvc-devel] Fwd: Panasonic PV-GS500 not working with any
	of the webcam apps
In-Reply-To: <200712291232.04739.laurent.pinchart@skynet.be>
References: <164b2cf80712232303i293eacacodd630560cca9dcc3@mail.gmail.com>
	<164b2cf80712290044j7f726b04xc68e0ca93c15a67d@mail.gmail.com>
	<164b2cf80712290045q48514188tfc89fab02ac7a874@mail.gmail.com>
	<200712291232.04739.laurent.pinchart@skynet.be>
Message-ID: <164b2cf80712292219wfec5bfeq831c55502bf816d@mail.gmail.com>

Hi Laurent,

After the patch, the device gets a /dev/video entry. Thanks : ))

This is the output of dmesg:

[ 1283.621026] usb 1-2: new high speed USB device using ehci_hcd and address 4
[ 1283.738527] usb 1-2: configuration #1 chosen from 1 choice
[ 1283.739239] uvcvideo: Probing generic UVC device 2
[ 1283.739251] uvcvideo: Found format SD-DV 60Hz.
[ 1283.741546] uvcvideo: Found a Status endpoint (addr 86).
[ 1283.741552] uvcvideo: Found UVC 1.00 device DVC (04da:231e)
[ 1283.741565] uvcvideo: Scanning UVC chain: OT 3 <- XU 5 <- SU 4 <- IT 1 2
[ 1283.741574] uvcvideo: Found a valid video chain (1,2 -> 3).
[ 1283.742462] uvcvideo: UVC device initialized.

Thanks.

On Dec 29, 2007 1:32 PM, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> Hi Alexandru,
>
> On Saturday 29 December 2007, Alexandru Botezatu wrote:
> > Hi Laurent,
> >
> > thank you for the reply. From what I understand, webcam mode is
> > unuseable since it produces MJPG output and none of the chat apps
> > support MJPG  webcams. Am I correct in this assumption?
>
> MJPEG support is getting more common. luvcview, Ekiga, aMsn, all of them now
> support MJPEG. DV, on the other hand, isn't widely supported.
>
> > I was able to run skype in windows, using splitcam, but I do not like
> > doing that since windows resides on a separate drive and I have to
> > muck with the cables every time I want to video conference.
> >
> > Ok, more on topic, here is the output of updated lsusb from DV mode:
> [snip]
>
> I've just committed a patch which should fix the issue you experienced with DV
>
> mode.
>
> Best regards,
>
> Laurent Pinchart
>


From shaohuang at gmail.com  Sun Dec 30 21:23:32 2007
From: shaohuang at gmail.com (Brian Pin)
Date: Sun, 30 Dec 2007 12:23:32 -0800
Subject: [Linux-uvc-devel] about number of packets inside URB..
In-Reply-To: <200712282342.59542.laurent.pinchart@skynet.be>
References: <a81f87bb0712211823ofe3740bmb374a5d6e4d72dab@mail.gmail.com>
	<200712282342.59542.laurent.pinchart@skynet.be>
Message-ID: <a81f87bb0712301223w2ab5fc90u4324b429de587d89@mail.gmail.com>

Hi Laurent,
Can I say that one URB corresponds to one frame only?
Because I saw the driver send out multiple URB at a time,

 for (i = 0; i < UVC_URBS; ++i) {
  if ((ret = usb_submit_urb(video->urb[i], GFP_KERNEL)) < 0) {
:

and this goes to the following question that
what if a URB is not capable of containing one frame...
Thanks



On Dec 28, 2007 2:42 PM, Laurent Pinchart <laurent.pinchart at skynet.be>
wrote:

> Hi Brian,
>
> On Saturday 22 December 2007, Brian Pin wrote:
> > In uvc_video.c:
> >
> > uvc_init_video_isoc(...) {
> >
> >  npackets = (size + psize - 1) / psize;
> >  if (npackets > UVC_MAX_ISO_PACKETS)
> >   npackets = UVC_MAX_ISO_PACKETS;
> >
> > }
> > in mycase I originally have npackets = 199, and after the 3 lines there,
> it
> > becomes 40, which is UVC_MAX_ISO_PACKETS.
> > My question is if there is a frame that needs more than 40 packets to
> > transfer, how is the data going to be not lost?
> > Is it because we send multiple URBs (I set UVC_URBS to 1)?
>
> The driver resubmits URBs after they complete. Even with a small number of
> packets and a small number of URBs, if the device is able to buffer enough
> data and if the host is fast enough to resubmit, data won't be lost.
>
> In practice the number of packets and the number of URBs is a compromise
> between the memory footprint and the ability to handle delays in URB
> resubmission.
>
> Best regards,
>
> Laurent Pinchart
>



-- 
Best Regards
Brian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071230/08f1f0bc/attachment.html>

From lsatenstein at yahoo.com  Mon Dec 31 20:58:08 2007
From: lsatenstein at yahoo.com (Leslie Satenstein)
Date: Mon, 31 Dec 2007 11:58:08 -0800 (PST)
Subject: [Linux-uvc-devel] As Green as they come.
Message-ID: <971906.52222.qm@web30502.mail.mud.yahoo.com>

Happy New Year and .....

I am a (semi-retired) C programmer (15 years of coding), who stopped coding a while back. I bought a webcam that does not function well, (MS VX1000), and I have another webcam (Creative Live Voice) that is still waiting for debugging.

I have tried to download some webcam analysis software, but was unsuccessful.

I would like to be to share my research into the webcam specs, and to contribute in ways that I can.  
My linux distributions are Fedora 8, Fedora 7 and PCLINUXOS, on my one system.

My Fedora versions are 64 bit ones, the PCLINUXOS is 32bits.  So, with that combination, I can help test changes to gspca, or other loadable drivers.

My C coding stopped in 2002, but I still read code like one reads a novel.

Please advise how I can proceed.

Yours

Leslie Satenstein
PS. You may correspond in French.

PS. I am a consultant in IT, with Project Management skills.
I can also write English well.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071231/09d6fc2c/attachment.html>

