<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] unstable pictures with logitech pro 5000
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2006-December/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20unstable%20pictures%20with%20logitech%20pro%205000&In-Reply-To=%3C200612071431.16091.simon.morlat%40linphone.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001073.html">
   <LINK REL="Next"  HREF="001069.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] unstable pictures with logitech pro 5000</H1>
    <B>Simon Morlat</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20unstable%20pictures%20with%20logitech%20pro%205000&In-Reply-To=%3C200612071431.16091.simon.morlat%40linphone.org%3E"
       TITLE="[Linux-uvc-devel] unstable pictures with logitech pro 5000">simon.morlat at linphone.org
       </A><BR>
    <I>Thu Dec  7 14:31:16 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="001073.html">[Linux-uvc-devel] Automatic Gain Control
</A></li>
        <LI>Next message: <A HREF="001069.html">[Linux-uvc-devel] unstable pictures with logitech pro 5000
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1067">[ date ]</a>
              <a href="thread.html#1067">[ thread ]</a>
              <a href="subject.html#1067">[ subject ]</a>
              <a href="author.html#1067">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I've bought a Logitech Quickcam Pro 5000 (Bus 004 Device 003: ID 046d:08c5 
Logitech, Inc.), and I've got some problems with it and the uvc driver.
I use linphone (a sip video phone I'm the maintainer). The picture is grabbed 
using mmap v4lv2 standart method with MJPEG format, then passed to ffmpeg to 
decode it as YUV420P and then displayed.

Sometimes (quite often), it works well.
Sometimes, despite pictures display correctly, ffmpeg complains with those 
warnings:

[mjpeg @ 0xb6c8e9a8]mjpeg: unsupported coding type (c7)
[mjpeg @ 0xb6c8e9a8]mjpeg: unsupported coding type (c6)

[mjpeg @ 0xb6c8e9a8]picture size invalid (62975x62965)
[mjpeg @ 0xb6c8e9a8]picture size invalid (62975x62965)

[mjpeg @ 0xb6c8e9a8]huffman table decode error

[mjpeg @ 0xb6c689a8]mjpeg: unsupported coding type (cf)
[mjpeg @ 0xb6c689a8]invalid id 224


That seems to indicate that there is something corrupted in the MJPEG 
bitstream.

And finally sometimes the picture are completely mixed, look for example this 
one:
<A HREF="http://simon.morlat.free.fr/pro5000bug.jpg">http://simon.morlat.free.fr/pro5000bug.jpg</A>
The frontiers between image parts are constantly and quicly moving.
I saw on the mailing list that I was not the only one having this problem.

As I'm also suspecting a problem with my code, I tried with xawtv, but 
unfortunately it fails and display nothing (for other reasons):

This is xawtv-3.95, running on Linux/i686 (2.6.18-fm)
WARNING: Your X-Server has no DGA support.
/dev/video0 [v4l2]: no overlay support
v4l-conf had some trouble, trying to continue anyway
Warning: Cannot convert string &quot;-*-ledfixed-medium-r-*--39-*-*-*-c-*-*-*&quot; to 
type FontStruct
ioctl: VIDIOC_G_STD(std=0xbffd1744 
[PAL_G,PAL_D1,PAL_M,PAL_N,PAL_Nc,NTSC_M,SECAM_B,SECAM_G,SECAM_H,SECAM_K,SECAM_K1,SECAM_L,?ATSC_8_VSB,ATSC_16_VSB,
(null),(null),(null),(null),(null),(null)]): Argument invalide
ioctl: VIDIOC_S_STD(std=0x0 []): Argument invalide
ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0 
[];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.seconds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits=&quot;&quot;;sequence=0;memory=unknown): 
Argument invalide

Maybe you have other suggestion of a working v4lv2 compatible viewer ?

I used the uvc driver from svn (updated yesterday), compiled for 2.6.18 
kernel.
In dmesg, I have thoses messages:
EOF in empty packet.
EOF in empty packet.
EOF in empty packet.

I'm not sure they are related with uvc driver.

Thanks for your help, tell me if you need more information.

Simon

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001073.html">[Linux-uvc-devel] Automatic Gain Control
</A></li>
	<LI>Next message: <A HREF="001069.html">[Linux-uvc-devel] unstable pictures with logitech pro 5000
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1067">[ date ]</a>
              <a href="thread.html#1067">[ thread ]</a>
              <a href="subject.html#1067">[ subject ]</a>
              <a href="author.html#1067">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
