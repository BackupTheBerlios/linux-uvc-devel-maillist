From gonzo at agoralabs.com  Thu Nov  1 00:46:22 2007
From: gonzo at agoralabs.com (Andres Gonzalez)
Date: Wed, 31 Oct 2007 18:46:22 -0500
Subject: [Linux-uvc-devel] basic questions
Message-ID: <BHEGIOGPONBOCFLOJCJBOEJNDJAA.gonzo@agoralabs.com>

This is my first post here--not sure if this is the right place to ask
these questions. If not, let me know.

I have been playing around with V4L2 with a Logitech QuickCam Pro 4000
with the pwc driver. The VIDIOC_ENUM_FRAMESIZES and
VIDIOC_ENUM_FRAMEINTERNALS ioctls do not seem to work. Consequently, I
have some basic questions.

1) with V4L2, is the frame rate under the control of the driver or the
application? That is, can the application simply grab the video data
at whatever frame rate it wants?  Or do you tell the driver what frame
rate you want?

2) I just found out about UVC so I do not know much about it. Is UVC a
replacement for the pwc driver I am currently using?

I just signed up for the mailing list and I hope to learn a lot
lurking around here.

Thanks,

-Andres




From ben at benmorris.org.uk  Thu Nov  1 01:15:18 2007
From: ben at benmorris.org.uk (Ben Morris)
Date: Thu, 1 Nov 2007 00:15:18 +0000
Subject: [Linux-uvc-devel] Non-working device
In-Reply-To: <200710311608.32851.laurent.pinchart@skynet.be>
References: <200710281153.01400.ben@benmorris.org.uk>
	<200710311451.48926.ben@benmorris.org.uk>
	<200710311608.32851.laurent.pinchart@skynet.be>
Message-ID: <200711010015.18403.ben@benmorris.org.uk>

On Wednesday 31 October 2007 15:08:32 you wrote:
> Hi Ben,
>
> On Wednesday 31 October 2007 15:51, Ben Morris wrote:
> > On Tuesday 30 October 2007 22:01:58 you wrote:
> > > Hi Ben,
> > >
> > > On Sunday 28 October 2007, Ben Morris wrote:
> > > > I installed linux-uvc, SVN version from a Gentoo ebuild.
> > > > There was a post-install note saying to get involved here if a device
> > > > doesn't work. I hope I am not spamming the wrong list. :-)
> > >
> > > This is the right list. Let's see if your post should be considered as
> > > spam :-)
> > >
> > > > I have an HP dv9574 laptop with a built-in webcam. What sort of
> > > > camera it actually is is not obvious, but I believe this lsusb entry
> > > > is it: Bus 002 Device 004: ID 064e:a101 Suyin Corp.
> > > >
> > > > Here is dmesg's output on loading the uvcvideo module:
> > > > uvcvideo: Found UVC 1.00 device HP Webcam (064e:a101)
> > > > usbcore: registered new interface driver uvcvideo
> > > > USB Video Class driver (v0.1.0)
> > >
> > > Looks great so far.
> > >
> > > > The dev entry is created but does not seem to work:
> > > > # cat /dev/video0
> > > > cat: /dev/video0: No such device
> > >
> > > That's perfectly normal. The Linux UVC driver doesn't support read()
> > > (yet). Only softwares using the mmap() streaming method will work.
> > >
> > > > The file does exist, by the way.
> > > >
> > > > Running xawtv causes the blue LED next to the camera to light
> > > > briefly, but does not produce a picture.
> > >
> > > xawtv has known bugs. Could you please try luvcview ? As your camera
> > > doesn't support MJPEG, you should run it with
> > >
> > > luvcview -f yuv
>
> ^^^^^^^^^^^^^^^^^^^^^
> *HINT*HINT*HINT*HINT*
>

Oops.
Spent altogether too long trying to install it (network was down...), then 
forgot what I was doing when it started working...

> > > > I would be glad to assist in any way I can to help add support for
> > > > this device. I can't code but I will do any tests you suggest.
> > >
> > > If luvcview works (and it probably will), Ekiga should work as well.
> > > aMsn and mplayer should too if you use recent enough versions.
> > >
> > > Best regards,
> > >
> > > Laurent Pinchart
> >
> > Thanks. I compiled luvcview using the ebuild from
> > http://lists.berlios.de/pipermail/linux-uvc-devel/2006-February/000255.ht
> >ml
> >
> > $ luvcview
> > luvcview version 0.2.1
> > Video driver: x11
> > A window manager is available
> > video /dev/video0
> > Unable to set format: 22.
> >  Init v4L2 failed !! exit fatal
>
> Refer to the above hint :-)
>
> > What parameters would I use with mplayer to test the cam? I have Gentoo's
> > mplayer-1.0_rc1_p20070824.
>
> Try something like
>
> mplayer tv:// -tv driver=v4l2:fps=25:width=640:height=480
>
> p20070824 should be recent enough, but if you get error messages such as
>
> v4l2: ioctl dequeue buffer failed: Invalid argument, idx = 0
>
> you should try to upgrade to a later version.
>
> > BTW, I know that the camera is working as I tested it before wiping out
> > the Vista install this laptop came with (no refunds from HP). :-(
>
> Best regards,
>
> Laurent Pinchart
>
> PS: Please reply to the list


Mplayer and luvcview both seem to work fine. 


Thanks for tolerating my confusion,

Ben Morris


From NathanaelGalpin at smarttech.com  Thu Nov  1 17:12:50 2007
From: NathanaelGalpin at smarttech.com (Nathanael Galpin)
Date: Thu, 1 Nov 2007 10:12:50 -0600
Subject: [Linux-uvc-devel] basic questions
Message-ID: <AACE2A3DD3559A4CBA163CB5D70C9ABE0ACF706D@calmail1.smarttech.inc>



Hi Andres,

In regards to your first question, it's a bit of both. Cameras support a
maximum frame rate at any given resolution. A common example is 640x480
@ 30 FPS. This is heavily affected by the exposure setting however. Set
the exposure past 33 ms, and it becomes physically impossible to capture
at 30 FPS.

So to answer your question, you set in the driver the frame rate you
want, and based on its other settings the camera delivers the closest
frame rate it can manage. 

In your application however, you have the option of not capturing as
many frames as the camera delivers. I've written a number of programs
where I set the camera to run at 30 FPS in the driver, but only display
10 FPS to the user. This can be accomplished using timers to only grab a
frame from the camera ever x number of ms.

Hopefully that helps, feel free to ask more questions if something isn't
clear.

  -- Nathanael

-----Original Message-----
From: linux-uvc-devel-bounces at lists.berlios.de
[mailto:linux-uvc-devel-bounces at lists.berlios.de] On Behalf Of Andres
Gonzalez
Sent: Wednesday, October 31, 2007 5:46 PM
To: linux-uvc-devel at lists.berlios.de
Subject: [Linux-uvc-devel] basic questions

This is my first post here--not sure if this is the right place to ask
these questions. If not, let me know.

I have been playing around with V4L2 with a Logitech QuickCam Pro 4000
with the pwc driver. The VIDIOC_ENUM_FRAMESIZES and
VIDIOC_ENUM_FRAMEINTERNALS ioctls do not seem to work. Consequently, I
have some basic questions.

1) with V4L2, is the frame rate under the control of the driver or the
application? That is, can the application simply grab the video data
at whatever frame rate it wants?  Or do you tell the driver what frame
rate you want?

2) I just found out about UVC so I do not know much about it. Is UVC a
replacement for the pwc driver I am currently using?

I just signed up for the mailing list and I hope to learn a lot
lurking around here.

Thanks,

-Andres


From laurent.pinchart at skynet.be  Fri Nov  2 12:21:41 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 2 Nov 2007 12:21:41 +0100
Subject: [Linux-uvc-devel] basic questions
In-Reply-To: <BHEGIOGPONBOCFLOJCJBOEJNDJAA.gonzo@agoralabs.com>
References: <BHEGIOGPONBOCFLOJCJBOEJNDJAA.gonzo@agoralabs.com>
Message-ID: <200711021221.41850.laurent.pinchart@skynet.be>

Hi Andres,

On Thursday 01 November 2007, Andres Gonzalez wrote:
> This is my first post here--not sure if this is the right place to ask
> these questions. If not, let me know.
>
> I have been playing around with V4L2 with a Logitech QuickCam Pro 4000
> with the pwc driver. The VIDIOC_ENUM_FRAMESIZES and
> VIDIOC_ENUM_FRAMEINTERNALS ioctls do not seem to work. Consequently, I
> have some basic questions.

You should contact a pwc mailing list. I suppose the pwc driver doesn't 
support the new VIDIOC_ENUM_FRAME* ioctls yet.

> 1) with V4L2, is the frame rate under the control of the driver or the
> application? That is, can the application simply grab the video data
> at whatever frame rate it wants?  Or do you tell the driver what frame
> rate you want?

Applications request the desired frame rate from the driver. The driver 
returns the selected frame rate, which can differ (for instance, if an 
application requests 10000fps the driver will obviously not be able to 
fullfill that request, and it will select the highest available frame rate).

Applications then proceed to reading frames. If the application doesn't keep 
up with the frame rate, the device will drop frames.

> 2) I just found out about UVC so I do not know much about it. Is UVC a
> replacement for the pwc driver I am currently using?

No, the Linux UVC driver is a driver for UVC compatible devices. The Quickcam 
Pro 4000 isn't UVC compatible, so it will never be supported by this driver. 
You should keep on using the pwc driver.

> I just signed up for the mailing list and I hope to learn a lot
> lurking around here.

Best regards,

Laurent Pinchart


From gonzo at agoralabs.com  Sat Nov  3 22:51:15 2007
From: gonzo at agoralabs.com (Andres Gonzalez)
Date: Sat, 3 Nov 2007 16:51:15 -0500
Subject: [Linux-uvc-devel] more questions
Message-ID: <BHEGIOGPONBOCFLOJCJBAEKODJAA.gonzo@agoralabs.com>

Sorry Laurent, I originally posted this incorrectly. This is what I
meant to post:



Laurent,

Thank you to you and Nathanael for your responses. A couple of other
questions.

So then, it is the select mechanism that enforces the frame rate?  By
that I mean, in my application, if I use select/read, select will
block until the video frame is completely captured by the driver. So,
as long as my frame-by-frame processing latency is small enough,
select will unblock according to the frame rate, thus it is the
enforcer of the frame rate?

I guess then, my Quickcam Pro 4000 must be based on a different
chipset than the cameras the UVC driver supports. The reason I
purchased the Quickcam Pro 4000 was that I thought there was a driver
available for it, the PWC driver. I thought that was my only
alternative under linux. However, my understand was that the
developers had stopped moving forward on it so I suspected it was not
fully supported. Consequently, I was not too surprised (although
disappointed) to experience that some ioctls are not working
correctly.

It appears that there is another alternative. What is the general
state of development of the UVC driver? Is it safe to assume that it
is further along than the PWC driver? If that is the case, then I need
to get a different camera, one that is supported by the UVC driver.

If so, what UVC supported camera would you recommend? Which supports
the widest frame sizes, frame rates, best quality, etc.

Thanks again,

-Andres







From eigenlambda at gmail.com  Sat Nov  3 21:48:42 2007
From: eigenlambda at gmail.com (Thomas Folz-Donahue)
Date: Sat, 3 Nov 2007 16:48:42 -0400
Subject: [Linux-uvc-devel] YUV streaming?
Message-ID: <c459ed240711031348v1df8d854ge931a473b0606fb2@mail.gmail.com>

Hey guys,

Does any program currently exist to stream from a YUV-only UVC device?
 The only thing I can think of is to modify luvcview and use it as a
source.

~thomas
-- 
cartwheel ^(^_^)> v(.-.)v <(^_^)^


From t.st1 at gmx.net  Sun Nov  4 11:06:45 2007
From: t.st1 at gmx.net (Tom St)
Date: Sun, 04 Nov 2007 11:06:45 +0100
Subject: [Linux-uvc-devel] YUV streaming?
In-Reply-To: <c459ed240711031348v1df8d854ge931a473b0606fb2@mail.gmail.com>
References: <c459ed240711031348v1df8d854ge931a473b0606fb2@mail.gmail.com>
Message-ID: <472D99B5.7050701@gmx.net>

Hello Thomas,
By a fluke I implemented the YUV pixel format a few hours ago, even
though I did not like it so much, since it consumes many CPU cycles to
do such a YUV->JPEG compression. However, if that is your only
possibility you may give it a try. You can get the most current version
by using subversion:

$ mkdir somefolder
$ cd somefolder
$ svn co https://mjpg-streamer.svn.sourceforge.net/svnroot/mjpg-streamer
mjpg-streamer
$ cd mjpeg-streamer/mjpg-streamer
$ make clean all

Compression is done by libjpeg, please check if you have installed the
header files and its library.

In your case the invocation of the server will look like:
$ export LD_LIBRARY_PATH=.
$ ./mjpg_streamer --input "input_uvc.so --yuv --fps 5 --resolution
320x240" --output "output_http.so --www ./www"

If you want to daemonize the server (command line switch -b), use
absolute paths.

Known issues:

    * My Logitech 5000 just supports 160x120, 320x240 but not 640x480
      capturing in YUV pixel format mode. It also does not work with
      luvcview to use the highest resolution.

Feedback welcome and with kind regards,
Tom


From contact at i-nz.net  Sun Nov  4 15:37:22 2007
From: contact at i-nz.net (Ivan N. Zlatev)
Date: Sun, 4 Nov 2007 14:37:22 +0000
Subject: [Linux-uvc-devel] [PATCH] Apple iSight
Message-ID: <3db1ec7f0711040637x437c3bc6j6fef56e2b54078af@mail.gmail.com>

Hello,

Attached you will find a patch that adds iSight support to uvcvideo
and applies to HEAD (revision 140). This patch has existed for some
time now. Initially it was very instrusive to the uvcvideo code, but
this has been fixed.

Please, lets get this reviewed and merged with uvcvideo. It's very
time consuming for me to keep it in sync with uvcvideo head. openSUSE
patches uvcvideo with this patch, Gentoo too, possibly others. It
would make our life much easier if we could get this upstream.

This patch enables the isight camera found in all apple macs fully,
including suspend and resume support.

iSight is an uvc device, but not fully. I am not an expert but it
seems to use a custom packet format on top of the uvc, has different
guid, has partially broken video descriptors and requires firmware.
This patch deals with those in the most intrusive way I could.

Inside the uvcvideo code it will only change the decoding queue if the
device is recognized as an isight device. In addition it will call
uvc_load_firmware during the uvc initialization.

Outside in the self-contained isight.c|h it will handle the firmware
loading, patching the usb descriptors and the decoding.

I would like to express my gratitude to Martin Szulecki who worked
with me on getting the patch in sync with latest uvcvideo and testing
it for the past two days.

Regards,
-- 
Ivan N. Zlatev

Web: http://www.i-nZ.net
"It's all some kind of whacked out conspiracy."
-------------- next part --------------
A non-text attachment was scrubbed...
Name: isight-trunk.patch
Type: text/x-patch
Size: 20141 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071104/d0fe9b89/attachment.bin>

From vnb2005 at gmail.com  Sun Nov  4 17:59:30 2007
From: vnb2005 at gmail.com (Vidyadhar Bhise)
Date: Sun, 4 Nov 2007 22:29:30 +0530
Subject: [Linux-uvc-devel] Problem with Acer Crystal eye Webcam
Message-ID: <54b9a21e0711040859i3064d7dl1d835b5f4c8f126f@mail.gmail.com>

hi,
I have recently purchased an Acer AS4710z laptop, it has Acer Crystal
Eye integrated Webcam. I removed the basic linpus linux and installed
fedora 7& and did all the updates.
Then I installed the linuxuvc drivers but my webcam(5986:0102) gives
error messages.
I have made the text files of error messages and here are the links to
the files.


http://dhost.info/vnb/lsusb_error
http://dhost.info/vnb/lsusb_for_webcam
http://dhost.info/vnb/luvcview_error_1
http://dhost.info/vnb/luvcview_error_2


Please help me in starting my webcam.

Thanks and regards,
Vidyadhar Neelkanth Bhise.


From eigenlambda at gmail.com  Sun Nov  4 19:51:25 2007
From: eigenlambda at gmail.com (Thomas Folz-Donahue)
Date: Sun, 4 Nov 2007 13:51:25 -0500
Subject: [Linux-uvc-devel] YUV streaming?
In-Reply-To: <472D99B5.7050701@gmx.net>
References: <c459ed240711031348v1df8d854ge931a473b0606fb2@mail.gmail.com>
	<472D99B5.7050701@gmx.net>
Message-ID: <c459ed240711041051p73da5a19h17904bba2a1b43b2@mail.gmail.com>

On 11/4/07, Tom St <t.st1 at gmx.net> wrote:
> Hello Thomas,
hi there

> By a fluke I implemented the YUV pixel format a few hours ago, even
> though I did not like it so much, since it consumes many CPU cycles to
> do such a YUV->JPEG compression.
It does use a bit of cpu- 6% on my 1.9GHz AMD Turion64X2, according to
top (dunno if that counts both cores).  The routers you're planning on
running this on probably don't have 3dNOW+ and SSE2, though.

> In your case the invocation of the server will look like:
> $ export LD_LIBRARY_PATH=.
> $ ./mjpg_streamer --input "input_uvc.so --yuv --fps 5 --resolution
> 320x240" --output "output_http.so --www ./www"
Works beautifully, when it removed the --resolution option.  The "UVC
webcam M-JPEG grabber" didn't recognise --resolution, or -r.  I guess
I should look at the source code and find out why, then I can test in
all camera modes ^_^

thanks!

~thomas
-- 
cartwheel ^(^_^)> v(.-.)v <(^_^)^


From eigenlambda at gmail.com  Sun Nov  4 21:08:44 2007
From: eigenlambda at gmail.com (Thomas Folz-Donahue)
Date: Sun, 4 Nov 2007 15:08:44 -0500
Subject: [Linux-uvc-devel] YUV streaming?
In-Reply-To: <c459ed240711041051p73da5a19h17904bba2a1b43b2@mail.gmail.com>
References: <c459ed240711031348v1df8d854ge931a473b0606fb2@mail.gmail.com>
	<472D99B5.7050701@gmx.net>
	<c459ed240711041051p73da5a19h17904bba2a1b43b2@mail.gmail.com>
Message-ID: <c459ed240711041208q42c8ccc5oa4e75756d5ec0ddb@mail.gmail.com>

> > $ ./mjpg_streamer --input "input_uvc.so --yuv --fps 5 --resolution
> > 320x240" --output "output_http.so --www ./www"
> Works beautifully, when it removed the --resolution option.
Actually, it turns out I copy/pasted the command wrong.  So.  Using
the 'time' command,
160x120:
real    0m9.050s
user    0m0.037s
sys     0m0.010s
320x240:
real    0m15.051s
user    0m0.240s
sys     0m0.003s
640x480:
real    0m20.167s
user    0m1.220s
sys     0m0.020s

I don't know why you disabled other resolutions.  Maybe you know
something I don't :)?

~thomas
-- 
cartwheel ^(^_^)> v(.-.)v <(^_^)^


From t.st1 at gmx.net  Sun Nov  4 21:09:37 2007
From: t.st1 at gmx.net (Tom St)
Date: Sun, 04 Nov 2007 21:09:37 +0100
Subject: [Linux-uvc-devel] YUV streaming?
In-Reply-To: <c459ed240711041051p73da5a19h17904bba2a1b43b2@mail.gmail.com>
References: <c459ed240711031348v1df8d854ge931a473b0606fb2@mail.gmail.com>	
	<472D99B5.7050701@gmx.net>
	<c459ed240711041051p73da5a19h17904bba2a1b43b2@mail.gmail.com>
Message-ID: <472E2701.4080909@gmx.net>

Hi Thomas,
Yes, 6% is not much on a desktop, but it would be to much for a weak
200MHz Mipsel CPU :-) In M-JPEG mode it already works well on weak
hardware supported by OpenWRT.

I rechecked --yuv and -r and added more resolutions. Is there everything
ok with the command line invocation? It is very important to set the
quote signs properly.

The parameters for the input plugin are (as of rev #30):
 [-d | --device ].......: video device to open (your camera)
 [-r | --resolution ]...: 160x120 QSIF 176x144 QCIF
                          320x240 QVGA 352x288 CIF
                          432x240 480x360 512x288 640x360
                          640x480 VGA 704x576 864x480
                          960x720 1024x576 1280x960 SXGA
 [-f | --fps ]..........: frames per second
 [-y | --yuv ]..........: enable YUYV format and disable MJPEG mode
 [-q | --quality ]......: JPEG compression quality in percent
                          (activates YUYV format, disables MJPEG)

Kind regards,
Tom


From eigenlambda at gmail.com  Sun Nov  4 22:18:31 2007
From: eigenlambda at gmail.com (Thomas Folz-Donahue)
Date: Sun, 4 Nov 2007 16:18:31 -0500
Subject: [Linux-uvc-devel] YUV streaming?
In-Reply-To: <472E2701.4080909@gmx.net>
References: <c459ed240711031348v1df8d854ge931a473b0606fb2@mail.gmail.com>
	<472D99B5.7050701@gmx.net>
	<c459ed240711041051p73da5a19h17904bba2a1b43b2@mail.gmail.com>
	<472E2701.4080909@gmx.net>
Message-ID: <c459ed240711041318h5bbb18bejbda6681572703bf8@mail.gmail.com>

On 11/4/07, Tom St <t.st1 at gmx.net> wrote:
> Is everything ok with the command line invocation?
Yes.  That was _completely_ my problem (I copy-pasted out of gmail
without deleting all the '\n's).  Sorry.

>  [-r | --resolution ]...: 160x120 QSIF 176x144 QCIF
>                           320x240 QVGA 352x288 CIF
>                           432x240 480x360 512x288 640x360
>                           640x480 VGA 704x576 864x480
>                           960x720 1024x576 1280x960 SXGA
I think no matter how many resolutions mjpeg-streamer supports, there
will still be cameras with different resolutions.  Mine does six of
the resolutions on that list, plus 1280x800 (according to luvcview
-L).  However, it looks like you're using 1280x960 as SXGA?  According
to Wikipedia, SXGA is 1280x1024.  So I wrote a patch to support any
resolution ^_^

~thomas
-- 
cartwheel ^(^_^)> v(.-.)v <(^_^)^
-------------- next part --------------
A non-text attachment was scrubbed...
Name: svn_diff
Type: application/octet-stream
Size: 3071 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071104/f42821b9/attachment.obj>

From laurent.pinchart at skynet.be  Mon Nov  5 20:00:02 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 5 Nov 2007 20:00:02 +0100
Subject: [Linux-uvc-devel] more questions
In-Reply-To: <BHEGIOGPONBOCFLOJCJBAEKODJAA.gonzo@agoralabs.com>
References: <BHEGIOGPONBOCFLOJCJBAEKODJAA.gonzo@agoralabs.com>
Message-ID: <200711052000.02222.laurent.pinchart@skynet.be>

Hi Andres,

On Saturday 03 November 2007, Andres Gonzalez wrote:
> Sorry Laurent, I originally posted this incorrectly. This is what I
> meant to post:

No worries.

> Laurent,
>
> Thank you to you and Nathanael for your responses. A couple of other
> questions.
>
> So then, it is the select mechanism that enforces the frame rate?  By
> that I mean, in my application, if I use select/read, select will
> block until the video frame is completely captured by the driver. So,
> as long as my frame-by-frame processing latency is small enough,
> select will unblock according to the frame rate, thus it is the
> enforcer of the frame rate?

In a nutshell, yes. V4L2 provides a buffer-based mechanism to prevent frame 
loss. Applications enqueue several buffers and use select() to wait for frame 
ready events. They then dequeue a buffer, process the data and requeue the 
buffer. As long as the average processing time is smaller than the frame 
interval, no frame loss will occur.

> I guess then, my Quickcam Pro 4000 must be based on a different
> chipset than the cameras the UVC driver supports. The reason I
> purchased the Quickcam Pro 4000 was that I thought there was a driver
> available for it, the PWC driver. I thought that was my only
> alternative under linux. However, my understand was that the
> developers had stopped moving forward on it so I suspected it was not
> fully supported. Consequently, I was not too surprised (although
> disappointed) to experience that some ioctls are not working
> correctly.

You should try contacting Luc Sailard, the driver's maintainer. Adding support 
for the enumeration ioctls isn't difficult.

> It appears that there is another alternative. What is the general
> state of development of the UVC driver? Is it safe to assume that it
> is further along than the PWC driver? If that is the case, then I need
> to get a different camera, one that is supported by the UVC driver.

I don't follow the pwc driver's development so I can't tell if one of the 
projects is "further along" than the other. The frame size and frame interval 
enumeration ioctl have been introduced by the UVC driver so it should be 
expected that other drivers don't implement them yet. There are other 
features implemented in the pwc driver that are not available in the UVC 
driver yet (read() support for instance). If you only miss the enumeration 
ioctls, I'd suggest keeping your QC Pro 4000 and getting the required 
functions implemented in the pwc driver.

> If so, what UVC supported camera would you recommend? Which supports
> the widest frame sizes, frame rates, best quality, etc.

Have a look at the hardware compatibility list at 
http://linux-uvc.berlios.de/#devices

Avoid the first and second generation Logitech webcams (marked with a warning 
sign). The third generation is a safe bet (046d:0990, 046d:0991 and 
046d:0994). That's the ones I mostly use.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Nov  5 20:11:08 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 5 Nov 2007 20:11:08 +0100
Subject: [Linux-uvc-devel] Problem with Acer Crystal eye Webcam
In-Reply-To: <54b9a21e0711040859i3064d7dl1d835b5f4c8f126f@mail.gmail.com>
References: <54b9a21e0711040859i3064d7dl1d835b5f4c8f126f@mail.gmail.com>
Message-ID: <200711052011.08389.laurent.pinchart@skynet.be>

Hi,

On Sunday 04 November 2007, Vidyadhar Bhise wrote:
> hi,
> I have recently purchased an Acer AS4710z laptop, it has Acer Crystal
> Eye integrated Webcam. I removed the basic linpus linux and installed
> fedora 7& and did all the updates.
> Then I installed the linuxuvc drivers but my webcam(5986:0102) gives
> error messages.
> I have made the text files of error messages and here are the links to
> the files.
>
>
> http://dhost.info/vnb/lsusb_error
> http://dhost.info/vnb/lsusb_for_webcam
> http://dhost.info/vnb/luvcview_error_1
> http://dhost.info/vnb/luvcview_error_2
>
>
> Please help me in starting my webcam.

Please post the kernel log output after luvcview failure.

Best regards,

Laurent Pinchart


From ryan at linuxbox.com  Mon Nov  5 19:28:41 2007
From: ryan at linuxbox.com (Ryan Jud Hughes)
Date: Mon, 5 Nov 2007 13:28:41 -0500 (EST)
Subject: [Linux-uvc-devel] Bus 007 Device 002: ID 17ef:1004 ChipsBnk (fwd)
Message-ID: <alpine.DEB.0.99.0711051328300.27747@galaxor.private.linuxbox.com>

Hi.  I just got a ThinkPad R61.  It has a usb webcam which does not seem to 
work.  It's using the uvc module, so I thought this would be the place.

The output from lsusb is the subject of this message.  Here's the output of a 
few apps:

____ Application:  xawtv (shows black screen) ____
This is xawtv-3.95.dfsg.1, running on Linux/x86_64 (2.6.22-14-generic)
WARNING: Your X-Server has no DGA support.
/dev/video0 [v4l2]: no overlay support
v4l-conf had some trouble, trying to continue anyway
Warning: Cannot convert string "-*-ledfixed-medium-r-*--39-*-*-*-c-*-*-*" to 
type FontStruct
ioctl: VIDIOC_G_STD(std=0x7fff98783514 
[PAL_G,PAL_I,PAL_M,PAL_Nc,NTSC_M,NTSC_M_JP,SECAM_H,SECAM_K,SECAM_K1,SECAM_L,(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null)]): 
Invalid argument
ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument
ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0 
[];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.seconds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0;memory=unknown): 
Invalid argument



____ Application:  gqcam ____
Segmentation Fault


____ Application: luvcview ____
luvcview version 0.2.1
Video driver: x11
A window manager is available
video /dev/video0
Unable to set format: 22.
  Init v4L2 failed !! exit fatal


____ Application:  luvcview -f yuv ____
Shows an image, which is attached.



____ Application:  cheese ____

** Message: Probing the webcam, please ignore the following, not applicabable 
tries
** Message: test pipeline for v4l2src failed:
Failed to construct test pipeline for 'v4l2src ! fakesink'
** Message: Error running pipeline 'v4lsrc ! 
video/x-raw-rgb,width=640,height=480 ! fakesink': Could not get/set settings 
from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm (): 
/pipeline1/v4lsrc0:
Error setting the channel/norm settings: Invalid argument]
** Message: test pipeline for v4lsrc failed:
[v4lsrc ! video/x-raw-rgb,width=640,height=480 ! fakesink]: Could not get/set 
settings from/on resource.
** Message: Error running pipeline 'v4lsrc ! 
video/x-raw-yuv,width=640,height=480 ! fakesink': Could not get/set settings 
from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm (): 
/pipeline2/v4lsrc1:
Error setting the channel/norm settings: Invalid argument]
** Message: test pipeline for v4lsrc failed:
[v4lsrc ! video/x-raw-yuv,width=640,height=480 ! fakesink]: Could not get/set 
settings from/on resource.
** Message: Error running pipeline 'v4lsrc ! 
video/x-raw-rgb,width=320,height=240 ! fakesink': Could not get/set settings 
from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm (): 
/pipeline3/v4lsrc2:
Error setting the channel/norm settings: Invalid argument]
** Message: test pipeline for v4lsrc failed:
[v4lsrc ! video/x-raw-rgb,width=320,height=240 ! fakesink]: Could not get/set 
settings from/on resource.
** Message: Error running pipeline 'v4lsrc ! 
video/x-raw-rgb,width=1280,height=960 ! fakesink': Could not get/set settings 
from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm (): 
/pipeline4/v4lsrc3:
Error setting the channel/norm settings: Invalid argument]
** Message: test pipeline for v4lsrc failed:
[v4lsrc ! video/x-raw-rgb,width=1280,height=960 ! fakesink]: Could not get/set 
settings from/on resource.
** Message: Error running pipeline 'v4lsrc ! 
video/x-raw-rgb,width=174,height=144 ! fakesink': Could not get/set settings 
from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm (): 
/pipeline5/v4lsrc4:
Error setting the channel/norm settings: Invalid argument]
** Message: test pipeline for v4lsrc failed:
[v4lsrc ! video/x-raw-rgb,width=174,height=144 ! fakesink]: Could not get/set 
settings from/on resource.
** Message: Error running pipeline 'v4lsrc ! 
video/x-raw-rgb,width=160,height=120 ! fakesink': Could not get/set settings 
from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm (): 
/pipeline6/v4lsrc5:
Error setting the channel/norm settings: Invalid argument]
** Message: test pipeline for v4lsrc failed:
[v4lsrc ! video/x-raw-rgb,width=160,height=120 ! fakesink]: Could not get/set 
settings from/on resource.
** Message: Error running pipeline 'v4lsrc ! fakesink': Could not get/set 
settings from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm (): 
/pipeline7/v4lsrc6:
Error setting the channel/norm settings: Invalid argument]
** Message: test pipeline for v4lsrc failed:
[v4lsrc ! fakesink]: Could not get/set settings from/on resource.
using source: videotestsrc


Thanks.  I hope that I'm helpful.

--Ryan
-------------- next part --------------
A non-text attachment was scrubbed...
Name: luvcview.png
Type: image/png
Size: 100273 bytes
Desc: 
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071105/6af74846/attachment.png>

From laurent.pinchart at skynet.be  Mon Nov  5 20:47:58 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 5 Nov 2007 20:47:58 +0100
Subject: [Linux-uvc-devel] [ANNOUNCEMENT] First realease of the UVC dynamic
	controls tool
Message-ID: <200711052047.59027.laurent.pinchart@skynet.be>

Hi everybody,

Martin Rubli from Logitech has released the first version of his libwebcam, 
along with a tool to manage UVC dynamic controls.

Those of you who mourned the lost pan/tilt and exposition time controls are 
encouraged to play the tool and report problems.

Please note this is alpha code, bla bla full of bugs bla bla at your own risks 
bla bla bla :-) The full announcement can be found at 
http://forums.quickcamteam.net/showthread.php?tid=32

Contributions (such as ideas for improvements or udev integration) are more 
than welcome.

Best regards, and thanks a lot to Martin for his work.

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Nov  5 21:25:44 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 5 Nov 2007 21:25:44 +0100
Subject: [Linux-uvc-devel] [PATCH] Apple iSight
In-Reply-To: <3db1ec7f0711040637x437c3bc6j6fef56e2b54078af@mail.gmail.com>
References: <3db1ec7f0711040637x437c3bc6j6fef56e2b54078af@mail.gmail.com>
Message-ID: <200711052125.44732.laurent.pinchart@skynet.be>

Hi Ivan,

On Sunday 04 November 2007, Ivan N. Zlatev wrote:
> Hello,
>
> Attached you will find a patch that adds iSight support to uvcvideo
> and applies to HEAD (revision 140). This patch has existed for some
> time now. Initially it was very instrusive to the uvcvideo code, but
> this has been fixed.

I can see that, it got better :-)

> Please, lets get this reviewed and merged with uvcvideo. It's very
> time consuming for me to keep it in sync with uvcvideo head. openSUSE
> patches uvcvideo with this patch, Gentoo too, possibly others. It
> would make our life much easier if we could get this upstream.

Ok, let's try. I agree keeping patches in sync isn't exactly fun.

> This patch enables the isight camera found in all apple macs fully,
> including suspend and resume support.
>
> iSight is an uvc device, but not fully. I am not an expert but it
> seems to use a custom packet format on top of the uvc, has different
> guid, has partially broken video descriptors and requires firmware.
> This patch deals with those in the most intrusive way I could.

I suppose you mean the less intrusive way.

> Inside the uvcvideo code it will only change the decoding queue if the
> device is recognized as an isight device. In addition it will call
> uvc_load_firmware during the uvc initialization.
>
> Outside in the self-contained isight.c|h it will handle the firmware
> loading, patching the usb descriptors and the decoding.
>
> I would like to express my gratitude to Martin Szulecki who worked
> with me on getting the patch in sync with latest uvcvideo and testing
> it for the past two days.

There are two issues left that bother me.

1. I'm still not convinced firmware loading belongs in the kernel. Let's 
discuss the second issue first.

2. If I'm not mistaken, some iSight firmware revisions set the bInterfaceClass 
and bInterfaceSubClass fields to 0xff. This won't be compatible with various 
tests in uvc_driver.c that check for SC_VIDEOSTREAMING or SC_VIDEOCONTROL in 
the bInterfaceSubClass field.

Are you aware of the second problem ?

Best regards,

Laurent Pinchart


From contact at i-nz.net  Mon Nov  5 21:36:16 2007
From: contact at i-nz.net (Ivan N. Zlatev)
Date: Mon, 5 Nov 2007 20:36:16 +0000
Subject: [Linux-uvc-devel] [PATCH] Apple iSight
In-Reply-To: <200711052125.44732.laurent.pinchart@skynet.be>
References: <3db1ec7f0711040637x437c3bc6j6fef56e2b54078af@mail.gmail.com>
	<200711052125.44732.laurent.pinchart@skynet.be>
Message-ID: <3db1ec7f0711051236o36e062e0ve27719e97c6a9e19@mail.gmail.com>

On 11/5/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> Hi Ivan,
>
> On Sunday 04 November 2007, Ivan N. Zlatev wrote:
> > Hello,
> >
> > Attached you will find a patch that adds iSight support to uvcvideo
> > and applies to HEAD (revision 140). This patch has existed for some
> > time now. Initially it was very instrusive to the uvcvideo code, but
> > this has been fixed.
>
> I can see that, it got better :-)
>
> > Please, lets get this reviewed and merged with uvcvideo. It's very
> > time consuming for me to keep it in sync with uvcvideo head. openSUSE
> > patches uvcvideo with this patch, Gentoo too, possibly others. It
> > would make our life much easier if we could get this upstream.
>
> Ok, let's try. I agree keeping patches in sync isn't exactly fun.
>
> > This patch enables the isight camera found in all apple macs fully,
> > including suspend and resume support.
> >
> > iSight is an uvc device, but not fully. I am not an expert but it
> > seems to use a custom packet format on top of the uvc, has different
> > guid, has partially broken video descriptors and requires firmware.
> > This patch deals with those in the most intrusive way I could.
>
> I suppose you mean the less intrusive way.
>

Yes indeed. :-)

> > Inside the uvcvideo code it will only change the decoding queue if the
> > device is recognized as an isight device. In addition it will call
> > uvc_load_firmware during the uvc initialization.
> >
> > Outside in the self-contained isight.c|h it will handle the firmware
> > loading, patching the usb descriptors and the decoding.
> >
> > I would like to express my gratitude to Martin Szulecki who worked
> > with me on getting the patch in sync with latest uvcvideo and testing
> > it for the past two days.
>
> There are two issues left that bother me.
>
> 1. I'm still not convinced firmware loading belongs in the kernel. Let's
> discuss the second issue first.
>
> 2. If I'm not mistaken, some iSight firmware revisions set the bInterfaceClass
> and bInterfaceSubClass fields to 0xff. This won't be compatible with various
> tests in uvc_driver.c that check for SC_VIDEOSTREAMING or SC_VIDEOCONTROL in
> the bInterfaceSubClass field.
>
> Are you aware of the second problem ?
>

Yes. There are two workarounds we thought of. One is to introduce an
ISIGHT_BROKEN_INTF quirk and the other one is to patch the descriptors
as far as see. Currently we do the second as it is less intrusive to
the uvcvideo code. After the firmware is loaded (and the device
reinitialized) isight_patch_usb_descriptor[1] from isight.c is called
by the firmware loading just before the control is passed back to
uvcvideo. I am not convinced that this is a 100% reliable way to do
it, but me and a couple of other people tested on different machines
and it seems to work quite well.

[1]
static void isight_patch_usb_descriptor (struct usb_device *dev)
{
	struct usb_interface *intf = NULL;
	struct usb_host_interface *setting = NULL;

	isight_printk ("Patching broken iSight USB interface descriptors\n");

	intf = usb_ifnum_to_if (dev, 0);
    if (intf != NULL) {
        setting = &intf->altsetting[0];
        setting->desc.bInterfaceClass   	= USB_CLASS_VIDEO;
        setting->desc.bInterfaceSubClass	= SC_VIDEOCONTROL;
        setting->desc.bInterfaceProtocol	= PC_PROTOCOL_UNDEFINED;
    }

	intf = usb_ifnum_to_if (dev, 1);
    if (intf != NULL) {
        setting = &intf->altsetting[0];
        setting->desc.bInterfaceClass   	= USB_CLASS_VIDEO;
        setting->desc.bInterfaceSubClass	= SC_VIDEOSTREAMING;
        setting->desc.bInterfaceProtocol	= PC_PROTOCOL_UNDEFINED;
        setting = &intf->altsetting[1];
        setting->desc.bInterfaceClass   	= USB_CLASS_VIDEO;
        setting->desc.bInterfaceSubClass	= SC_VIDEOSTREAMING;
        setting->desc.bInterfaceProtocol	= PC_PROTOCOL_UNDEFINED;
    }
}

> Best regards,
>
> Laurent Pinchart
>
-- 
Ivan N. Zlatev

Web: http://www.i-nZ.net
"It's all some kind of whacked out conspiracy."


From laurent.pinchart at skynet.be  Mon Nov  5 22:16:04 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 5 Nov 2007 22:16:04 +0100
Subject: [Linux-uvc-devel] [PATCH] Apple iSight
In-Reply-To: <3db1ec7f0711051236o36e062e0ve27719e97c6a9e19@mail.gmail.com>
References: <3db1ec7f0711040637x437c3bc6j6fef56e2b54078af@mail.gmail.com>
	<200711052125.44732.laurent.pinchart@skynet.be>
	<3db1ec7f0711051236o36e062e0ve27719e97c6a9e19@mail.gmail.com>
Message-ID: <200711052216.04542.laurent.pinchart@skynet.be>

Hi Ivan,

On Monday 05 November 2007, Ivan N. Zlatev wrote:
> On 11/5/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > Hi Ivan,
> >
> > On Sunday 04 November 2007, Ivan N. Zlatev wrote:
> > > Hello,
> > >
> > > Attached you will find a patch that adds iSight support to uvcvideo
> > > and applies to HEAD (revision 140). This patch has existed for some
> > > time now. Initially it was very instrusive to the uvcvideo code, but
> > > this has been fixed.
> >
> > I can see that, it got better :-)
> >
> > > Please, lets get this reviewed and merged with uvcvideo. It's very
> > > time consuming for me to keep it in sync with uvcvideo head. openSUSE
> > > patches uvcvideo with this patch, Gentoo too, possibly others. It
> > > would make our life much easier if we could get this upstream.
> >
> > Ok, let's try. I agree keeping patches in sync isn't exactly fun.
> >
> > > This patch enables the isight camera found in all apple macs fully,
> > > including suspend and resume support.
> > >
> > > iSight is an uvc device, but not fully. I am not an expert but it
> > > seems to use a custom packet format on top of the uvc, has different
> > > guid, has partially broken video descriptors and requires firmware.
> > > This patch deals with those in the most intrusive way I could.
> >
> > I suppose you mean the less intrusive way.
>
> Yes indeed. :-)
>
> > > Inside the uvcvideo code it will only change the decoding queue if the
> > > device is recognized as an isight device. In addition it will call
> > > uvc_load_firmware during the uvc initialization.
> > >
> > > Outside in the self-contained isight.c|h it will handle the firmware
> > > loading, patching the usb descriptors and the decoding.
> > >
> > > I would like to express my gratitude to Martin Szulecki who worked
> > > with me on getting the patch in sync with latest uvcvideo and testing
> > > it for the past two days.
> >
> > There are two issues left that bother me.
> >
> > 1. I'm still not convinced firmware loading belongs in the kernel. Let's
> > discuss the second issue first.
> >
> > 2. If I'm not mistaken, some iSight firmware revisions set the
> > bInterfaceClass and bInterfaceSubClass fields to 0xff. This won't be
> > compatible with various tests in uvc_driver.c that check for
> > SC_VIDEOSTREAMING or SC_VIDEOCONTROL in the bInterfaceSubClass field.
> >
> > Are you aware of the second problem ?
>
> Yes. There are two workarounds we thought of. One is to introduce an
> ISIGHT_BROKEN_INTF quirk and the other one is to patch the descriptors
> as far as see. Currently we do the second as it is less intrusive to
> the uvcvideo code. After the firmware is loaded (and the device
> reinitialized) isight_patch_usb_descriptor[1] from isight.c is called
> by the firmware loading just before the control is passed back to
> uvcvideo. I am not convinced that this is a 100% reliable way to do
> it, but me and a couple of other people tested on different machines
> and it seems to work quite well.
>
> [1]
> static void isight_patch_usb_descriptor (struct usb_device *dev)
> {
> 	struct usb_interface *intf = NULL;
> 	struct usb_host_interface *setting = NULL;
>
> 	isight_printk ("Patching broken iSight USB interface descriptors\n");
>
> 	intf = usb_ifnum_to_if (dev, 0);
>     if (intf != NULL) {
>         setting = &intf->altsetting[0];
>         setting->desc.bInterfaceClass   	= USB_CLASS_VIDEO;
>         setting->desc.bInterfaceSubClass	= SC_VIDEOCONTROL;
>         setting->desc.bInterfaceProtocol	= PC_PROTOCOL_UNDEFINED;
>     }
>
> 	intf = usb_ifnum_to_if (dev, 1);
>     if (intf != NULL) {
>         setting = &intf->altsetting[0];
>         setting->desc.bInterfaceClass   	= USB_CLASS_VIDEO;
>         setting->desc.bInterfaceSubClass	= SC_VIDEOSTREAMING;
>         setting->desc.bInterfaceProtocol	= PC_PROTOCOL_UNDEFINED;
>         setting = &intf->altsetting[1];
>         setting->desc.bInterfaceClass   	= USB_CLASS_VIDEO;
>         setting->desc.bInterfaceSubClass	= SC_VIDEOSTREAMING;
>         setting->desc.bInterfaceProtocol	= PC_PROTOCOL_UNDEFINED;
>     }
> }

I like the second solution better as well. I should have read isight.c in 
details before asking sorry.

Wouldn't it be possible to extract the firmware and patch it in userspace, 
even if we keep firmware loading in the driver ? That's how the bcm43xx 
driver works for instance. It would then be easier to update the firmware 
extraction code. Descriptor patching would happen in userspace as well during 
the extraction phase.

Best regards,

Laurent Pinchart


From contact at i-nz.net  Mon Nov  5 22:47:04 2007
From: contact at i-nz.net (Ivan N. Zlatev)
Date: Mon, 5 Nov 2007 21:47:04 +0000
Subject: [Linux-uvc-devel] [PATCH] Apple iSight
In-Reply-To: <200711052216.04542.laurent.pinchart@skynet.be>
References: <3db1ec7f0711040637x437c3bc6j6fef56e2b54078af@mail.gmail.com>
	<200711052125.44732.laurent.pinchart@skynet.be>
	<3db1ec7f0711051236o36e062e0ve27719e97c6a9e19@mail.gmail.com>
	<200711052216.04542.laurent.pinchart@skynet.be>
Message-ID: <3db1ec7f0711051347n15e61db3w14586f09d28eb8ea@mail.gmail.com>

On 11/5/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> Hi Ivan,
>
> On Monday 05 November 2007, Ivan N. Zlatev wrote:
> > On 11/5/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > > Hi Ivan,
> > >
> > > On Sunday 04 November 2007, Ivan N. Zlatev wrote:
> > > > Hello,
> > > >
> > > > Attached you will find a patch that adds iSight support to uvcvideo
> > > > and applies to HEAD (revision 140). This patch has existed for some
> > > > time now. Initially it was very instrusive to the uvcvideo code, but
> > > > this has been fixed.
> > >
> > > I can see that, it got better :-)
> > >
> > > > Please, lets get this reviewed and merged with uvcvideo. It's very
> > > > time consuming for me to keep it in sync with uvcvideo head. openSUSE
> > > > patches uvcvideo with this patch, Gentoo too, possibly others. It
> > > > would make our life much easier if we could get this upstream.
> > >
> > > Ok, let's try. I agree keeping patches in sync isn't exactly fun.
> > >
> > > > This patch enables the isight camera found in all apple macs fully,
> > > > including suspend and resume support.
> > > >
> > > > iSight is an uvc device, but not fully. I am not an expert but it
> > > > seems to use a custom packet format on top of the uvc, has different
> > > > guid, has partially broken video descriptors and requires firmware.
> > > > This patch deals with those in the most intrusive way I could.
> > >
> > > I suppose you mean the less intrusive way.
> >
> > Yes indeed. :-)
> >
> > > > Inside the uvcvideo code it will only change the decoding queue if the
> > > > device is recognized as an isight device. In addition it will call
> > > > uvc_load_firmware during the uvc initialization.
> > > >
> > > > Outside in the self-contained isight.c|h it will handle the firmware
> > > > loading, patching the usb descriptors and the decoding.
> > > >
> > > > I would like to express my gratitude to Martin Szulecki who worked
> > > > with me on getting the patch in sync with latest uvcvideo and testing
> > > > it for the past two days.
> > >
> > > There are two issues left that bother me.
> > >
> > > 1. I'm still not convinced firmware loading belongs in the kernel. Let's
> > > discuss the second issue first.
> > >
> > > 2. If I'm not mistaken, some iSight firmware revisions set the
> > > bInterfaceClass and bInterfaceSubClass fields to 0xff. This won't be
> > > compatible with various tests in uvc_driver.c that check for
> > > SC_VIDEOSTREAMING or SC_VIDEOCONTROL in the bInterfaceSubClass field.
> > >
> > > Are you aware of the second problem ?
> >
> > Yes. There are two workarounds we thought of. One is to introduce an
> > ISIGHT_BROKEN_INTF quirk and the other one is to patch the descriptors
> > as far as see. Currently we do the second as it is less intrusive to
> > the uvcvideo code. After the firmware is loaded (and the device
> > reinitialized) isight_patch_usb_descriptor[1] from isight.c is called
> > by the firmware loading just before the control is passed back to
> > uvcvideo. I am not convinced that this is a 100% reliable way to do
> > it, but me and a couple of other people tested on different machines
> > and it seems to work quite well.
> >
> > [1]
> > static void isight_patch_usb_descriptor (struct usb_device *dev)
> > {
> >       struct usb_interface *intf = NULL;
> >       struct usb_host_interface *setting = NULL;
> >
> >       isight_printk ("Patching broken iSight USB interface descriptors\n");
> >
> >       intf = usb_ifnum_to_if (dev, 0);
> >     if (intf != NULL) {
> >         setting = &intf->altsetting[0];
> >         setting->desc.bInterfaceClass         = USB_CLASS_VIDEO;
> >         setting->desc.bInterfaceSubClass      = SC_VIDEOCONTROL;
> >         setting->desc.bInterfaceProtocol      = PC_PROTOCOL_UNDEFINED;
> >     }
> >
> >       intf = usb_ifnum_to_if (dev, 1);
> >     if (intf != NULL) {
> >         setting = &intf->altsetting[0];
> >         setting->desc.bInterfaceClass         = USB_CLASS_VIDEO;
> >         setting->desc.bInterfaceSubClass      = SC_VIDEOSTREAMING;
> >         setting->desc.bInterfaceProtocol      = PC_PROTOCOL_UNDEFINED;
> >         setting = &intf->altsetting[1];
> >         setting->desc.bInterfaceClass         = USB_CLASS_VIDEO;
> >         setting->desc.bInterfaceSubClass      = SC_VIDEOSTREAMING;
> >         setting->desc.bInterfaceProtocol      = PC_PROTOCOL_UNDEFINED;
> >     }
> > }
>
> I like the second solution better as well. I should have read isight.c in
> details before asking sorry.
>
> Wouldn't it be possible to extract the firmware and patch it in userspace,
> even if we keep firmware loading in the driver ? That's how the bcm43xx
> driver works for instance. It would then be easier to update the firmware
> extraction code. Descriptor patching would happen in userspace as well during
> the extraction phase.
>

It would be possible but there is one complication that imho makes it
pointless. The problem is that I do not know how to verify the
extracted firmware, but I know how to verify the non-extracted via the
sha1 sums. So the only way I can think of is to hardcode the the
hashes of the extracted firmware into the firmware loading, but that's
a bit pointless because it's already done. I am not familiar with
bcm43xx's code base and I do not know if they have such a problem or
not and if and how they solve it. I am assuming that uploading random
firmware data to the device might damage it.

> Best regards,
>
> Laurent Pinchart
>


-- 
Ivan N. Zlatev

Web: http://www.i-nZ.net
"It's all some kind of whacked out conspiracy."


From felix at derklecks.de  Mon Nov  5 23:15:22 2007
From: felix at derklecks.de (=?ISO-8859-15?Q?Felix_M=F6ller?=)
Date: Mon, 05 Nov 2007 23:15:22 +0100
Subject: [Linux-uvc-devel] [PATCH] Apple iSight
In-Reply-To: <3db1ec7f0711040637x437c3bc6j6fef56e2b54078af@mail.gmail.com>
References: <3db1ec7f0711040637x437c3bc6j6fef56e2b54078af@mail.gmail.com>
Message-ID: <472F95FA.8020106@derklecks.de>

Hi,

> Attached you will find a patch that adds iSight support to uvcvideo
> and applies to HEAD (revision 140). This patch has existed for some
> time now. Initially it was very instrusive to the uvcvideo code, but
> this has been fixed.
> 
> Please, lets get this reviewed and merged with uvcvideo. It's very
> time consuming for me to keep it in sync with uvcvideo head. openSUSE
> patches uvcvideo with this patch, Gentoo too, possibly others. It
> would make our life much easier if we could get this upstream.
> 
> This patch enables the isight camera found in all apple macs fully,
> including suspend and resume support.
I compiled and tried your patch on my openSUSE factory MacBook with
kernel (2.6.23.1-8-default) and it works wonderfully. Thanks a lot or
writing this driver!

Sadly I cannot test suspend as my intel driver crashes on resume... :-(

Greetings
Felix M?ller


From hirofumi at momose.com  Tue Nov  6 08:51:38 2007
From: hirofumi at momose.com (Hirofumi Momose)
Date: Tue, 06 Nov 2007 16:51:38 +0900
Subject: [Linux-uvc-devel] timeout at second VIDIOC_STREAMON
Message-ID: <20071106163909.700D.HIROFUMI@momose.com>

Hello,

I have a question that why uvc driver causes select() to time-out at 
second VIDIOC_STREAMON.

This can be reproduced using v4l2 sample code.
http://v4l2spec.bytesex.org/v4l2spec/capture.c

Modify the main() a bit.

...
open_device ();
init_device ();

// First streaming, works fine.
start_capturing ();
mainloop ();
stop_capturing ();

// Second attempt, fails.
start_capturing();
mainloop(); // => cause select() to time out.
...

Is this correct ?

Regards,
-- 
Hirofumi Momose <hirofumi at momose.com>



From jedsen at fakemarktwainquotes.com  Tue Nov  6 09:40:11 2007
From: jedsen at fakemarktwainquotes.com (Brian Jedsen)
Date: Tue, 06 Nov 2007 00:40:11 -0800
Subject: [Linux-uvc-devel] [PATCH] Apple iSight
In-Reply-To: <3db1ec7f0711040637x437c3bc6j6fef56e2b54078af@mail.gmail.com>
References: <3db1ec7f0711040637x437c3bc6j6fef56e2b54078af@mail.gmail.com>
Message-ID: <4730286B.2020402@fakemarktwainquotes.com>

This patch works very well. I tested it with ekiga and was able to get 
full 640x480 video. Thanks.

Ivan N. Zlatev wrote:
> Hello,
>
> Attached you will find a patch that adds iSight support to uvcvideo
> and applies to HEAD (revision 140). This patch has existed for some
> time now. Initially it was very instrusive to the uvcvideo code, but
> this has been fixed.
>
> Please, lets get this reviewed and merged with uvcvideo. It's very
> time consuming for me to keep it in sync with uvcvideo head. openSUSE
> patches uvcvideo with this patch, Gentoo too, possibly others. It
> would make our life much easier if we could get this upstream.
>
> This patch enables the isight camera found in all apple macs fully,
> including suspend and resume support.
>
> iSight is an uvc device, but not fully. I am not an expert but it
> seems to use a custom packet format on top of the uvc, has different
> guid, has partially broken video descriptors and requires firmware.
> This patch deals with those in the most intrusive way I could.
>
> Inside the uvcvideo code it will only change the decoding queue if the
> device is recognized as an isight device. In addition it will call
> uvc_load_firmware during the uvc initialization.
>
> Outside in the self-contained isight.c|h it will handle the firmware
> loading, patching the usb descriptors and the decoding.
>
> I would like to express my gratitude to Martin Szulecki who worked
> with me on getting the patch in sync with latest uvcvideo and testing
> it for the past two days.
>
> Regards,
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel



From richard at rsk.demon.co.uk  Tue Nov  6 10:28:14 2007
From: richard at rsk.demon.co.uk (richard kennedy)
Date: Tue, 06 Nov 2007 09:28:14 +0000
Subject: [Linux-uvc-devel] 2.6.24-rc1 video_device hardware field removed
Message-ID: <1194341294.3062.8.camel@castor.rsk.org>

Hi,
in 2.6.24-rc1 the hardware field in video_device has been removed.

The git log entry says :-

> commit 22c4a4e98ece0eaff13b3d0ac73c5283013eb6b1
> Author: Mauro Carvalho Chehab <mchehab at infradead.org>
>Date:   Mon Oct 15 12:09:17 2007 -0300
>
>    V4L/DVB (6320): v4l core: remove the unused .hardware V4L1 field
>    
>    struct video_device used to define a .hardware field. While
>    initialized on severl drivers, this field is never used inside V4L.
>    However, drivers using it need to include the old V4L1 header.
>   
>   This seems to cause compilation troubles with some random configs.
>   Better just to remove it from all drivers.


This patch makes the driver build for me.

Cheers
Richard  




Index: uvc_driver.c
===================================================================
--- uvc_driver.c	(revision 140)
+++ uvc_driver.c	(working copy)
@@ -1433,7 +1433,6 @@
 	vdev->dev = &dev->intf->dev;
 	vdev->type = 0;
 	vdev->type2 = 0;
-	vdev->hardware = 0;
 	vdev->minor = -1;
 	vdev->fops = &uvc_fops;
 	vdev->release = video_device_release;




From laurent.pinchart at skynet.be  Tue Nov  6 11:35:59 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 6 Nov 2007 11:35:59 +0100
Subject: [Linux-uvc-devel] 2.6.24-rc1 video_device hardware field removed
In-Reply-To: <1194341294.3062.8.camel@castor.rsk.org>
References: <1194341294.3062.8.camel@castor.rsk.org>
Message-ID: <200711061136.00316.laurent.pinchart@skynet.be>

Hi Richard,

On Tuesday 06 November 2007 10:28, richard kennedy wrote:
> Hi,
> in 2.6.24-rc1 the hardware field in video_device has been removed.
>
> The git log entry says :-
>
> > commit 22c4a4e98ece0eaff13b3d0ac73c5283013eb6b1
> > Author: Mauro Carvalho Chehab <mchehab at infradead.org>
> >Date:   Mon Oct 15 12:09:17 2007 -0300
> >
> >    V4L/DVB (6320): v4l core: remove the unused .hardware V4L1 field
> >
> >    struct video_device used to define a .hardware field. While
> >    initialized on severl drivers, this field is never used inside V4L.
> >    However, drivers using it need to include the old V4L1 header.
> >
> >   This seems to cause compilation troubles with some random configs.
> >   Better just to remove it from all drivers.
>
> This patch makes the driver build for me.

Thanks, committed.

Best regards,

Laurent Pinchart


From vnb2005 at gmail.com  Tue Nov  6 16:22:07 2007
From: vnb2005 at gmail.com (Vidyadhar Bhise)
Date: Tue, 6 Nov 2007 20:52:07 +0530
Subject: [Linux-uvc-devel] Problem with Acer Crystal eye Webcam
In-Reply-To: <200711052011.08389.laurent.pinchart@skynet.be>
References: <54b9a21e0711040859i3064d7dl1d835b5f4c8f126f@mail.gmail.com>
	<200711052011.08389.laurent.pinchart@skynet.be>
Message-ID: <54b9a21e0711060722i3a3f98a8v11de4fd4dfa8172e@mail.gmail.com>

On Nov 6, 2007 12:41 AM, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> Hi,
>
>
> On Sunday 04 November 2007, Vidyadhar Bhise wrote:
> > I have made the text files of error messages and here are the links to
> > the files.
> >
> >
> > http://dhost.info/vnb/lsusb_error
> > http://dhost.info/vnb/lsusb_for_webcam
> > http://dhost.info/vnb/luvcview_error_1
> > http://dhost.info/vnb/luvcview_error_2
> >
> >
> > Please help me in starting my webcam.
>
> Please post the kernel log output after luvcview failure.
>
> Best regards,
>
> Laurent Pinchart
>

Hi,
Here is the kernel log output after luvcview failure.

[root at vnb log]# tail -f /var/log/messages|grep kernel
Nov  6 20:36:04 vnb kernel: uvcvideo: Failed to query (130) UVC
control 1 (unit 0) : 2 (exp. 26).
Nov  6 20:44:09 vnb kernel: uvcvideo: Failed to query (130) UVC
control 1 (unit 0) : 2 (exp. 26).

thanks.
Vidyadhar Neelkanth Bhise.


From vnb2005 at gmail.com  Tue Nov  6 16:33:34 2007
From: vnb2005 at gmail.com (Vidyadhar Bhise)
Date: Tue, 6 Nov 2007 21:03:34 +0530
Subject: [Linux-uvc-devel] Problem with Acer Crystal eye Webcam
In-Reply-To: <200711052011.08389.laurent.pinchart@skynet.be>
References: <54b9a21e0711040859i3064d7dl1d835b5f4c8f126f@mail.gmail.com>
	<200711052011.08389.laurent.pinchart@skynet.be>
Message-ID: <54b9a21e0711060733h799479d2i36a591ff8f82b7e4@mail.gmail.com>

On Nov 6, 2007 12:41 AM, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:

> Please post the kernel log output after luvcview failure.
>
> Best regards,
>
> Laurent Pinchart
>
hi, this is the output in dmesg

[vidyadhar at vnb ~]$ dmesg|grep uvc
uvcvideo: Found UVC 1.00 device Acer Crystal Eye webcam (5986:0102)
usbcore: registered new interface driver uvcvideo
uvcvideo: Failed to query (130) UVC control 1 (unit 0) : 2 (exp. 26).
uvcvideo: Failed to query (130) UVC control 1 (unit 0) : 2 (exp. 26).


From t.st1 at gmx.net  Tue Nov  6 20:26:23 2007
From: t.st1 at gmx.net (Tom St)
Date: Tue, 06 Nov 2007 20:26:23 +0100
Subject: [Linux-uvc-devel] YUV streaming?
In-Reply-To: <c459ed240711041318h5bbb18bejbda6681572703bf8@mail.gmail.com>
References: <c459ed240711031348v1df8d854ge931a473b0606fb2@mail.gmail.com>	
	<472D99B5.7050701@gmx.net>	
	<c459ed240711041051p73da5a19h17904bba2a1b43b2@mail.gmail.com>	
	<472E2701.4080909@gmx.net>
	<c459ed240711041318h5bbb18bejbda6681572703bf8@mail.gmail.com>
Message-ID: <4730BFDF.7070203@gmx.net>

Hi Thomas,
> So I wrote a patch to support any
> resolution ^_^
>   
Thanks for the patch, i applied it with checkin #31. Thank you!

Cheers,
Tom


From laurent.pinchart at skynet.be  Wed Nov  7 00:41:28 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 7 Nov 2007 00:41:28 +0100
Subject: [Linux-uvc-devel] Problem with Acer Crystal eye Webcam
In-Reply-To: <54b9a21e0711060722i3a3f98a8v11de4fd4dfa8172e@mail.gmail.com>
References: <54b9a21e0711040859i3064d7dl1d835b5f4c8f126f@mail.gmail.com>
	<200711052011.08389.laurent.pinchart@skynet.be>
	<54b9a21e0711060722i3a3f98a8v11de4fd4dfa8172e@mail.gmail.com>
Message-ID: <200711070041.28720.laurent.pinchart@skynet.be>

On Tuesday 06 November 2007, Vidyadhar Bhise wrote:
> On Nov 6, 2007 12:41 AM, Laurent Pinchart <laurent.pinchart at skynet.be> 
wrote:
> > Hi,
> >
> > On Sunday 04 November 2007, Vidyadhar Bhise wrote:
> > > I have made the text files of error messages and here are the links to
> > > the files.
> > >
> > >
> > > http://dhost.info/vnb/lsusb_error
> > > http://dhost.info/vnb/lsusb_for_webcam
> > > http://dhost.info/vnb/luvcview_error_1
> > > http://dhost.info/vnb/luvcview_error_2
> > >
> > >
> > > Please help me in starting my webcam.
> >
> > Please post the kernel log output after luvcview failure.
> >
> > Best regards,
> >
> > Laurent Pinchart
>
> Hi,
> Here is the kernel log output after luvcview failure.
>
> [root at vnb log]# tail -f /var/log/messages|grep kernel
> Nov  6 20:36:04 vnb kernel: uvcvideo: Failed to query (130) UVC
> control 1 (unit 0) : 2 (exp. 26).
> Nov  6 20:44:09 vnb kernel: uvcvideo: Failed to query (130) UVC
> control 1 (unit 0) : 2 (exp. 26).

The problem should have been fixed with r136 from the linux-uvc SVN 
repository. Please upgrade and try again. Instructions to retrieve the latest 
SVN revision are provided on the project homepage.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Nov  7 00:46:25 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 7 Nov 2007 00:46:25 +0100
Subject: [Linux-uvc-devel] timeout at second VIDIOC_STREAMON
In-Reply-To: <20071106163909.700D.HIROFUMI@momose.com>
References: <20071106163909.700D.HIROFUMI@momose.com>
Message-ID: <200711070046.25618.laurent.pinchart@skynet.be>

Hi Hirofumi,

On Tuesday 06 November 2007, Hirofumi Momose wrote:
> Hello,
>
> I have a question that why uvc driver causes select() to time-out at
> second VIDIOC_STREAMON.
>
> This can be reproduced using v4l2 sample code.
> http://v4l2spec.bytesex.org/v4l2spec/capture.c
>
> Modify the main() a bit.
>
> ...
> open_device ();
> init_device ();
>
> // First streaming, works fine.
> start_capturing ();
> mainloop ();
> stop_capturing ();
>
> // Second attempt, fails.
> start_capturing();
> mainloop(); // => cause select() to time out.
> ...
>
> Is this correct ?

select() shouldn't timeout. Does the Linux UVC driver print messages in the 
kernel log after the timeout ?

Regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Nov  7 00:56:22 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 7 Nov 2007 00:56:22 +0100
Subject: [Linux-uvc-devel] Bus 007 Device 002: ID 17ef:1004 ChipsBnk
	(fwd)
In-Reply-To: <alpine.DEB.0.99.0711051328300.27747@galaxor.private.linuxbox.com>
References: <alpine.DEB.0.99.0711051328300.27747@galaxor.private.linuxbox.com>
Message-ID: <200711070056.22411.laurent.pinchart@skynet.be>

Hi Ryan,

On Monday 05 November 2007, Ryan Jud Hughes wrote:
> Hi.  I just got a ThinkPad R61.  It has a usb webcam which does not seem to
> work.  It's using the uvc module, so I thought this would be the place.
>
> The output from lsusb is the subject of this message.  Here's the output of
> a few apps:
>
> ____ Application:  xawtv (shows black screen) ____
> This is xawtv-3.95.dfsg.1, running on Linux/x86_64 (2.6.22-14-generic)
> WARNING: Your X-Server has no DGA support.
> /dev/video0 [v4l2]: no overlay support
> v4l-conf had some trouble, trying to continue anyway
> Warning: Cannot convert string "-*-ledfixed-medium-r-*--39-*-*-*-c-*-*-*"
> to type FontStruct
> ioctl: VIDIOC_G_STD(std=0x7fff98783514
> [PAL_G,PAL_I,PAL_M,PAL_Nc,NTSC_M,NTSC_M_JP,SECAM_H,SECAM_K,SECAM_K1,SECAM_L
>,(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null
>),(null),(null),(null),(null),(null),(null),(null)]): Invalid argument
> ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument
> ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0
> [];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.s
>econds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0
>;memory=unknown): Invalid argument

Xawtv 3.95 is known not to work. You could try upgrading to the 4 beta 
version.

> ____ Application:  gqcam ____
> Segmentation Fault
>
> ____ Application: luvcview ____
> luvcview version 0.2.1
> Video driver: x11
> A window manager is available
> video /dev/video0
> Unable to set format: 22.
>   Init v4L2 failed !! exit fatal
>

Pretty normal if your webcam support yuv only.

> ____ Application:  luvcview -f yuv ____
> Shows an image, which is attached.

That's bad :-/ Do you get any suspicious message in the kernel log when 
running luvcview -f yuv ? Try to set the trace level to 128 ('modprobe 
uvcvideo trace=128' or 'echo 128 > /sys/modules/uvcvideo/parameters/trace') 
and see if you get any "Dropping payload" message (warning: this will flood 
your kernel log).

> ____ Application:  cheese ____
>
> ** Message: Probing the webcam, please ignore the following, not
> applicabable tries
> ** Message: test pipeline for v4l2src failed:
> Failed to construct test pipeline for 'v4l2src ! fakesink'
> ** Message: Error running pipeline 'v4lsrc !
> video/x-raw-rgb,width=640,height=480 ! fakesink': Could not get/set
> settings from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm ():
> /pipeline1/v4lsrc0:
> Error setting the channel/norm settings: Invalid argument]
> ** Message: test pipeline for v4lsrc failed:
> [v4lsrc ! video/x-raw-rgb,width=640,height=480 ! fakesink]: Could not
> get/set settings from/on resource.
> ** Message: Error running pipeline 'v4lsrc !
> video/x-raw-yuv,width=640,height=480 ! fakesink': Could not get/set
> settings from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm ():
> /pipeline2/v4lsrc1:
> Error setting the channel/norm settings: Invalid argument]
> ** Message: test pipeline for v4lsrc failed:
> [v4lsrc ! video/x-raw-yuv,width=640,height=480 ! fakesink]: Could not
> get/set settings from/on resource.
> ** Message: Error running pipeline 'v4lsrc !
> video/x-raw-rgb,width=320,height=240 ! fakesink': Could not get/set
> settings from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm ():
> /pipeline3/v4lsrc2:
> Error setting the channel/norm settings: Invalid argument]
> ** Message: test pipeline for v4lsrc failed:
> [v4lsrc ! video/x-raw-rgb,width=320,height=240 ! fakesink]: Could not
> get/set settings from/on resource.
> ** Message: Error running pipeline 'v4lsrc !
> video/x-raw-rgb,width=1280,height=960 ! fakesink': Could not get/set
> settings from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm ():
> /pipeline4/v4lsrc3:
> Error setting the channel/norm settings: Invalid argument]
> ** Message: test pipeline for v4lsrc failed:
> [v4lsrc ! video/x-raw-rgb,width=1280,height=960 ! fakesink]: Could not
> get/set settings from/on resource.
> ** Message: Error running pipeline 'v4lsrc !
> video/x-raw-rgb,width=174,height=144 ! fakesink': Could not get/set
> settings from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm ():
> /pipeline5/v4lsrc4:
> Error setting the channel/norm settings: Invalid argument]
> ** Message: test pipeline for v4lsrc failed:
> [v4lsrc ! video/x-raw-rgb,width=174,height=144 ! fakesink]: Could not
> get/set settings from/on resource.
> ** Message: Error running pipeline 'v4lsrc !
> video/x-raw-rgb,width=160,height=120 ! fakesink': Could not get/set
> settings from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm ():
> /pipeline6/v4lsrc5:
> Error setting the channel/norm settings: Invalid argument]
> ** Message: test pipeline for v4lsrc failed:
> [v4lsrc ! video/x-raw-rgb,width=160,height=120 ! fakesink]: Could not
> get/set settings from/on resource.
> ** Message: Error running pipeline 'v4lsrc ! fakesink': Could not get/set
> settings from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm ():
> /pipeline7/v4lsrc6:
> Error setting the channel/norm settings: Invalid argument]
> ** Message: test pipeline for v4lsrc failed:
> [v4lsrc ! fakesink]: Could not get/set settings from/on resource.
> using source: videotestsrc

I think there's a known issue with some gstreamer versions. Try searching the 
mailing list archive for more information.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Nov  7 01:22:34 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 7 Nov 2007 01:22:34 +0100
Subject: [Linux-uvc-devel] [PATCH] Apple iSight
In-Reply-To: <3db1ec7f0711051347n15e61db3w14586f09d28eb8ea@mail.gmail.com>
References: <3db1ec7f0711040637x437c3bc6j6fef56e2b54078af@mail.gmail.com>
	<200711052216.04542.laurent.pinchart@skynet.be>
	<3db1ec7f0711051347n15e61db3w14586f09d28eb8ea@mail.gmail.com>
Message-ID: <200711070122.34239.laurent.pinchart@skynet.be>

Hi Ivan,

On Monday 05 November 2007, Ivan N. Zlatev wrote:
> On 11/5/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > Hi Ivan,
> >
> > On Monday 05 November 2007, Ivan N. Zlatev wrote:
> > > On 11/5/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > > > Hi Ivan,
> > > >
> > > > On Sunday 04 November 2007, Ivan N. Zlatev wrote:
> > > > > Hello,
> > > > >
> > > > > Attached you will find a patch that adds iSight support to uvcvideo
> > > > > and applies to HEAD (revision 140). This patch has existed for some
> > > > > time now. Initially it was very instrusive to the uvcvideo code,
> > > > > but this has been fixed.
> > > >
> > > > I can see that, it got better :-)
> > > >
> > > > > Please, lets get this reviewed and merged with uvcvideo. It's very
> > > > > time consuming for me to keep it in sync with uvcvideo head.
> > > > > openSUSE patches uvcvideo with this patch, Gentoo too, possibly
> > > > > others. It would make our life much easier if we could get this
> > > > > upstream.
> > > >
> > > > Ok, let's try. I agree keeping patches in sync isn't exactly fun.
> > > >
> > > > > This patch enables the isight camera found in all apple macs fully,
> > > > > including suspend and resume support.
> > > > >
> > > > > iSight is an uvc device, but not fully. I am not an expert but it
> > > > > seems to use a custom packet format on top of the uvc, has
> > > > > different guid, has partially broken video descriptors and requires
> > > > > firmware. This patch deals with those in the most intrusive way I
> > > > > could.
> > > >
> > > > I suppose you mean the less intrusive way.
> > >
> > > Yes indeed. :-)
> > >
> > > > > Inside the uvcvideo code it will only change the decoding queue if
> > > > > the device is recognized as an isight device. In addition it will
> > > > > call uvc_load_firmware during the uvc initialization.
> > > > >
> > > > > Outside in the self-contained isight.c|h it will handle the
> > > > > firmware loading, patching the usb descriptors and the decoding.
> > > > >
> > > > > I would like to express my gratitude to Martin Szulecki who worked
> > > > > with me on getting the patch in sync with latest uvcvideo and
> > > > > testing it for the past two days.
> > > >
> > > > There are two issues left that bother me.
> > > >
> > > > 1. I'm still not convinced firmware loading belongs in the kernel.
> > > > Let's discuss the second issue first.
> > > >
> > > > 2. If I'm not mistaken, some iSight firmware revisions set the
> > > > bInterfaceClass and bInterfaceSubClass fields to 0xff. This won't be
> > > > compatible with various tests in uvc_driver.c that check for
> > > > SC_VIDEOSTREAMING or SC_VIDEOCONTROL in the bInterfaceSubClass field.
> > > >
> > > > Are you aware of the second problem ?
> > >
> > > Yes. There are two workarounds we thought of. One is to introduce an
> > > ISIGHT_BROKEN_INTF quirk and the other one is to patch the descriptors
> > > as far as see. Currently we do the second as it is less intrusive to
> > > the uvcvideo code. After the firmware is loaded (and the device
> > > reinitialized) isight_patch_usb_descriptor[1] from isight.c is called
> > > by the firmware loading just before the control is passed back to
> > > uvcvideo. I am not convinced that this is a 100% reliable way to do
> > > it, but me and a couple of other people tested on different machines
> > > and it seems to work quite well.
> > >
> > > [1]
> > > static void isight_patch_usb_descriptor (struct usb_device *dev)
> > > {
> > >       struct usb_interface *intf = NULL;
> > >       struct usb_host_interface *setting = NULL;
> > >
> > >       isight_printk ("Patching broken iSight USB interface
> > > descriptors\n");
> > >
> > >       intf = usb_ifnum_to_if (dev, 0);
> > >     if (intf != NULL) {
> > >         setting = &intf->altsetting[0];
> > >         setting->desc.bInterfaceClass         = USB_CLASS_VIDEO;
> > >         setting->desc.bInterfaceSubClass      = SC_VIDEOCONTROL;
> > >         setting->desc.bInterfaceProtocol      = PC_PROTOCOL_UNDEFINED;
> > >     }
> > >
> > >       intf = usb_ifnum_to_if (dev, 1);
> > >     if (intf != NULL) {
> > >         setting = &intf->altsetting[0];
> > >         setting->desc.bInterfaceClass         = USB_CLASS_VIDEO;
> > >         setting->desc.bInterfaceSubClass      = SC_VIDEOSTREAMING;
> > >         setting->desc.bInterfaceProtocol      = PC_PROTOCOL_UNDEFINED;
> > >         setting = &intf->altsetting[1];
> > >         setting->desc.bInterfaceClass         = USB_CLASS_VIDEO;
> > >         setting->desc.bInterfaceSubClass      = SC_VIDEOSTREAMING;
> > >         setting->desc.bInterfaceProtocol      = PC_PROTOCOL_UNDEFINED;
> > >     }
> > > }
> >
> > I like the second solution better as well. I should have read isight.c in
> > details before asking sorry.
> >
> > Wouldn't it be possible to extract the firmware and patch it in
> > userspace, even if we keep firmware loading in the driver ? That's how
> > the bcm43xx driver works for instance. It would then be easier to update
> > the firmware extraction code. Descriptor patching would happen in
> > userspace as well during the extraction phase.
>
> It would be possible but there is one complication that imho makes it
> pointless

> The problem is that I do not know how to verify the 
> extracted firmware, but I know how to verify the non-extracted via the
> sha1 sums. So the only way I can think of is to hardcode the the
> hashes of the extracted firmware into the firmware loading, but that's
> a bit pointless because it's already done.

What do you want to protect against exactly ? Once the firmware has been 
extracted from the Mac OS X driver and has been verified using it's sha1 sum, 
what are the possible reasons for firmware corruption ?

> I am not familiar with 
> bcm43xx's code base and I do not know if they have such a problem or
> not and if and how they solve it. I am assuming that uploading random
> firmware data to the device might damage it.

I don't know either. The Cypress chip used in the iSight doesn't validate the 
firmware.

Random firmwares might damage the hardware, but the odds are extremely small. 
You would have to upload random data that make a valid 8051 program, and that 
program would have to setup I/Os that would conflict with the hardware. Even 
then it wouldn't necessarily damage the hardware.

If firmware loading were to be carried from userspace there wouldn't be any 
issue on the driver side :-) The UVC driver will require a userspace tool to 
configure extension unit controls anyway, so I think we could distribute a 
userspace firmware handling tool along with it.

Best regards,

Laurent Pinchart


From contact at i-nz.net  Wed Nov  7 17:52:09 2007
From: contact at i-nz.net (Ivan N. Zlatev)
Date: Wed, 7 Nov 2007 16:52:09 +0000
Subject: [Linux-uvc-devel] [PATCH] Apple iSight
In-Reply-To: <200711070122.34239.laurent.pinchart@skynet.be>
References: <3db1ec7f0711040637x437c3bc6j6fef56e2b54078af@mail.gmail.com>
	<200711052216.04542.laurent.pinchart@skynet.be>
	<3db1ec7f0711051347n15e61db3w14586f09d28eb8ea@mail.gmail.com>
	<200711070122.34239.laurent.pinchart@skynet.be>
Message-ID: <3db1ec7f0711070852x61fae6b8v41ccfb3562b6495b@mail.gmail.com>

On 11/7/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> Hi Ivan,
>
> On Monday 05 November 2007, Ivan N. Zlatev wrote:
> > On 11/5/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > > Hi Ivan,
> > >
> > > On Monday 05 November 2007, Ivan N. Zlatev wrote:
> > > > On 11/5/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > > > > Hi Ivan,
> > > > >
> > > > > On Sunday 04 November 2007, Ivan N. Zlatev wrote:
> > > > > > Hello,
> > > > > >
> > > > > > Attached you will find a patch that adds iSight support to uvcvideo
> > > > > > and applies to HEAD (revision 140). This patch has existed for some
> > > > > > time now. Initially it was very instrusive to the uvcvideo code,
> > > > > > but this has been fixed.
> > > > >
> > > > > I can see that, it got better :-)
> > > > >
> > > > > > Please, lets get this reviewed and merged with uvcvideo. It's very
> > > > > > time consuming for me to keep it in sync with uvcvideo head.
> > > > > > openSUSE patches uvcvideo with this patch, Gentoo too, possibly
> > > > > > others. It would make our life much easier if we could get this
> > > > > > upstream.
> > > > >
> > > > > Ok, let's try. I agree keeping patches in sync isn't exactly fun.
> > > > >
> > > > > > This patch enables the isight camera found in all apple macs fully,
> > > > > > including suspend and resume support.
> > > > > >
> > > > > > iSight is an uvc device, but not fully. I am not an expert but it
> > > > > > seems to use a custom packet format on top of the uvc, has
> > > > > > different guid, has partially broken video descriptors and requires
> > > > > > firmware. This patch deals with those in the most intrusive way I
> > > > > > could.
> > > > >
> > > > > I suppose you mean the less intrusive way.
> > > >
> > > > Yes indeed. :-)
> > > >
> > > > > > Inside the uvcvideo code it will only change the decoding queue if
> > > > > > the device is recognized as an isight device. In addition it will
> > > > > > call uvc_load_firmware during the uvc initialization.
> > > > > >
> > > > > > Outside in the self-contained isight.c|h it will handle the
> > > > > > firmware loading, patching the usb descriptors and the decoding.
> > > > > >
> > > > > > I would like to express my gratitude to Martin Szulecki who worked
> > > > > > with me on getting the patch in sync with latest uvcvideo and
> > > > > > testing it for the past two days.
> > > > >
> > > > > There are two issues left that bother me.
> > > > >
> > > > > 1. I'm still not convinced firmware loading belongs in the kernel.
> > > > > Let's discuss the second issue first.
> > > > >
> > > > > 2. If I'm not mistaken, some iSight firmware revisions set the
> > > > > bInterfaceClass and bInterfaceSubClass fields to 0xff. This won't be
> > > > > compatible with various tests in uvc_driver.c that check for
> > > > > SC_VIDEOSTREAMING or SC_VIDEOCONTROL in the bInterfaceSubClass field.
> > > > >
> > > > > Are you aware of the second problem ?
> > > >
> > > > Yes. There are two workarounds we thought of. One is to introduce an
> > > > ISIGHT_BROKEN_INTF quirk and the other one is to patch the descriptors
> > > > as far as see. Currently we do the second as it is less intrusive to
> > > > the uvcvideo code. After the firmware is loaded (and the device
> > > > reinitialized) isight_patch_usb_descriptor[1] from isight.c is called
> > > > by the firmware loading just before the control is passed back to
> > > > uvcvideo. I am not convinced that this is a 100% reliable way to do
> > > > it, but me and a couple of other people tested on different machines
> > > > and it seems to work quite well.
> > > >
> > > > [1]
> > > > static void isight_patch_usb_descriptor (struct usb_device *dev)
> > > > {
> > > >       struct usb_interface *intf = NULL;
> > > >       struct usb_host_interface *setting = NULL;
> > > >
> > > >       isight_printk ("Patching broken iSight USB interface
> > > > descriptors\n");
> > > >
> > > >       intf = usb_ifnum_to_if (dev, 0);
> > > >     if (intf != NULL) {
> > > >         setting = &intf->altsetting[0];
> > > >         setting->desc.bInterfaceClass         = USB_CLASS_VIDEO;
> > > >         setting->desc.bInterfaceSubClass      = SC_VIDEOCONTROL;
> > > >         setting->desc.bInterfaceProtocol      = PC_PROTOCOL_UNDEFINED;
> > > >     }
> > > >
> > > >       intf = usb_ifnum_to_if (dev, 1);
> > > >     if (intf != NULL) {
> > > >         setting = &intf->altsetting[0];
> > > >         setting->desc.bInterfaceClass         = USB_CLASS_VIDEO;
> > > >         setting->desc.bInterfaceSubClass      = SC_VIDEOSTREAMING;
> > > >         setting->desc.bInterfaceProtocol      = PC_PROTOCOL_UNDEFINED;
> > > >         setting = &intf->altsetting[1];
> > > >         setting->desc.bInterfaceClass         = USB_CLASS_VIDEO;
> > > >         setting->desc.bInterfaceSubClass      = SC_VIDEOSTREAMING;
> > > >         setting->desc.bInterfaceProtocol      = PC_PROTOCOL_UNDEFINED;
> > > >     }
> > > > }
> > >
> > > I like the second solution better as well. I should have read isight.c in
> > > details before asking sorry.
> > >
> > > Wouldn't it be possible to extract the firmware and patch it in
> > > userspace, even if we keep firmware loading in the driver ? That's how
> > > the bcm43xx driver works for instance. It would then be easier to update
> > > the firmware extraction code. Descriptor patching would happen in
> > > userspace as well during the extraction phase.
> >
> > It would be possible but there is one complication that imho makes it
> > pointless
>
> > The problem is that I do not know how to verify the
> > extracted firmware, but I know how to verify the non-extracted via the
> > sha1 sums. So the only way I can think of is to hardcode the the
> > hashes of the extracted firmware into the firmware loading, but that's
> > a bit pointless because it's already done.
>
> What do you want to protect against exactly ? Once the firmware has been
> extracted from the Mac OS X driver and has been verified using it's sha1 sum,
> what are the possible reasons for firmware corruption ?
>
> > I am not familiar with
> > bcm43xx's code base and I do not know if they have such a problem or
> > not and if and how they solve it. I am assuming that uploading random
> > firmware data to the device might damage it.
>
> I don't know either. The Cypress chip used in the iSight doesn't validate the
> firmware.
>
> Random firmwares might damage the hardware, but the odds are extremely small.
> You would have to upload random data that make a valid 8051 program, and that
> program would have to setup I/Os that would conflict with the hardware. Even
> then it wouldn't necessarily damage the hardware.
>
> If firmware loading were to be carried from userspace there wouldn't be any
> issue on the driver side :-)

But as we currently stand everything works so nicely as it is. Why
should we have to spend precious time to port all of it to user land,
read on how to write udev rules, bash scripts and what the best
solution for distributions will be in terms of all of that. :-(

> The UVC driver will require a userspace tool to
> configure extension unit controls anyway, so I think we could distribute a
> userspace firmware handling tool along with it.
>

Are there any other webcams that require firmware in uvc land?

-- 
Ivan N. Zlatev

Web: http://www.i-nZ.net
"It's all some kind of whacked out conspiracy."


From max.giesbert at gmail.com  Wed Nov  7 22:20:27 2007
From: max.giesbert at gmail.com (Max Giesbert)
Date: Wed, 07 Nov 2007 22:20:27 +0100
Subject: [Linux-uvc-devel]  0c45:624f Microdia web cam
In-Reply-To: 200707302041.48277.baeckham@gmx.net
Message-ID: <1194470427.6501.6.camel@max-laptop>

any progress on this webcam yet?

(g)spca5xx on Ubuntu 7.10 didn't recognize the cam...

thx



From laurent.pinchart at skynet.be  Thu Nov  8 00:20:49 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 8 Nov 2007 00:20:49 +0100
Subject: [Linux-uvc-devel] 0c45:624f Microdia web cam
In-Reply-To: <1194470427.6501.6.camel@max-laptop>
References: <1194470427.6501.6.camel@max-laptop>
Message-ID: <200711080020.49932.laurent.pinchart@skynet.be>

On Wednesday 07 November 2007, Max Giesbert wrote:
> any progress on this webcam yet?
>
> (g)spca5xx on Ubuntu 7.10 didn't recognize the cam...

As I already explained, that camera is *not* UVC compatible. It will thus 
never be supported by the Linux UVC driver, so there's no point in asking on 
this list.

Best regards,

Laurent Pinchart


From t.st1 at gmx.net  Thu Nov  8 08:04:34 2007
From: t.st1 at gmx.net (Tom St)
Date: Thu, 08 Nov 2007 08:04:34 +0100
Subject: [Linux-uvc-devel] [PATCH] Apple iSight
In-Reply-To: <3db1ec7f0711070852x61fae6b8v41ccfb3562b6495b@mail.gmail.com>
References: <3db1ec7f0711040637x437c3bc6j6fef56e2b54078af@mail.gmail.com>	<200711052216.04542.laurent.pinchart@skynet.be>	<3db1ec7f0711051347n15e61db3w14586f09d28eb8ea@mail.gmail.com>	<200711070122.34239.laurent.pinchart@skynet.be>
	<3db1ec7f0711070852x61fae6b8v41ccfb3562b6495b@mail.gmail.com>
Message-ID: <4732B502.4080209@gmx.net>

Hello,
> But as we currently stand everything works so nicely as it is. Why
> should we have to spend precious time to port all of it to user land,
> read on how to write udev rules, bash scripts and what the best
> solution for distributions will be in terms of all of that. :-(
>   
I think usability is also an argument. For a user it is already complex enough to install the driver without firmware, scripts etc. I think it is better to have a solution, that "just works" and can be handled by users easily in contrast to an very clean solutions noone understands. Well, this argument depends on your audience...

Regards,
Tom



From felix at derklecks.de  Thu Nov  8 16:17:18 2007
From: felix at derklecks.de (=?ISO-8859-1?Q?Felix_M=F6ller?=)
Date: Thu, 08 Nov 2007 16:17:18 +0100
Subject: [Linux-uvc-devel] [PATCH] Apple iSight
In-Reply-To: <4732B502.4080209@gmx.net>
References: <3db1ec7f0711040637x437c3bc6j6fef56e2b54078af@mail.gmail.com>	<200711052216.04542.laurent.pinchart@skynet.be>	<3db1ec7f0711051347n15e61db3w14586f09d28eb8ea@mail.gmail.com>	<200711070122.34239.laurent.pinchart@skynet.be>	<3db1ec7f0711070852x61fae6b8v41ccfb3562b6495b@mail.gmail.com>
	<4732B502.4080209@gmx.net>
Message-ID: <4733287E.3010705@derklecks.de>

Hi,

>> But as we currently stand everything works so nicely as it is. Why 
>> should we have to spend precious time to port all of it to user
>> land, read on how to write udev rules, bash scripts and what the
>> best solution for distributions will be in terms of all of that.
>> :-(
>> 
> I think usability is also an argument. For a user it is already
> complex enough to install the driver without firmware, scripts etc. I
> think it is better to have a solution, that "just works" and can be
> handled by users easily in contrast to an very clean solutions noone
> understands.
yes I think so too.

And I think firmware loading from the kernel is not that uncommon the
new intel wlan driver iwlwifi loads its firmware too.

greetings
Felix M?ller


From jbm9 at wilmington.dreamhost.com  Thu Nov  8 18:45:51 2007
From: jbm9 at wilmington.dreamhost.com (Josh Myer)
Date: Thu, 8 Nov 2007 09:45:51 -0800
Subject: [Linux-uvc-devel] Laptop Integrated Webcam video chain wonkiness?
Message-ID: <20071108174551.GJ27818@wilmington.dreamhost.com>

I've got a Dell 1520 with the "Omnivision Laptop Integrated Webcam"
(0x05a9/0x2640).  Adding the standard block gets the camera recognized
and mostly initialized, but then it bombs out with "Failed to query
(135) UVC control 1 (unit 0) : -32 (exp. 26)."  As far as I can tell,
that's from the URB layer trying to talk to a closed/missing endpoint
(not totally certain, it's been a long time since I worked with the USB
guts and the APIs might be different).

Does anyone have any ideas about this?  I'm pretty stumped, though it 
doesn't help that I only have a vague idea how UVC works =)

This is an Ubuntu Gutsy Gibbon system with the default kernel.

Thanks for any help you can offer!
-josh

(System info follows)

$ uname -a
Linux density 2.6.22-14-generic #1 SMP Sun Oct 14 23:05:12 GMT 2007 i686 
GNU/Linux


The diff between current trunk and what I'm running:
$ svn diff
Index: uvc_driver.c
===================================================================
--- uvc_driver.c        (revision 141)
+++ uvc_driver.c        (working copy)
@@ -1656,6 +1656,16 @@
          .bInterfaceSubClass   = 1,
          .bInterfaceProtocol   = 0,
          .driver_info          = UVC_QUIRK_PROBE_MINMAX },
+/* OmniVision OEM Dell Notebook */
+       { .match_flags          = USB_DEVICE_ID_MATCH_DEVICE
+                               | USB_DEVICE_ID_MATCH_INT_INFO,
+         .idVendor             = 0x05a9,
+         .idProduct            = 0x2640,
+         .bInterfaceClass      = USB_CLASS_VIDEO,
+         .bInterfaceSubClass   = 1,
+         .bInterfaceProtocol   = 0,
+         .driver_info          = UVC_QUIRK_PROBE_MINMAX },
+
        /* Logitech Quickcam Fusion */
        { .match_flags          = USB_DEVICE_ID_MATCH_DEVICE
                                | USB_DEVICE_ID_MATCH_INT_INFO,



dmesg output from 'insmod ./uvcvideo.ko trace=15'
[  400.076000] uvcvideo: Adding mapping Brightness to control 00000000-0000-0000-0000-000000000101/2.
[  400.076000] uvcvideo: Adding mapping Contrast to control 00000000-0000-0000-0000-000000000101/3.
[  400.076000] uvcvideo: Adding mapping Hue to control 00000000-0000-0000-0000-000000000101/6.
[  400.076000] uvcvideo: Adding mapping Saturation to control 00000000-0000-0000-0000-000000000101/7.
[  400.076000] uvcvideo: Adding mapping Sharpness to control 00000000-0000-0000-0000-000000000101/8.
[  400.076000] uvcvideo: Adding mapping Gamma to control 00000000-0000-0000-0000-000000000101/9.
[  400.076000] uvcvideo: Adding mapping Backlight Compensation to control 00000000-0000-0000-0000-000000000101/1.
[  400.076000] uvcvideo: Adding mapping Gain to control 00000000-0000-0000-0000-000000000101/4.
[  400.076000] uvcvideo: Adding mapping Power Line Frequency to control 00000000-0000-0000-0000-000000000101/5.
[  400.076000] uvcvideo: Adding mapping Hue, Auto to control 00000000-0000-0000-0000-000000000101/16.
[  400.076000] uvcvideo: Adding mapping Exposure, Auto to control 00000000-0000-0000-0000-000000000001/2.
[  400.076000] uvcvideo: Adding mapping Exposure (Absolute) to control 00000000-0000-0000-0000-000000000001/4.
[  400.076000] uvcvideo: Adding mapping White Balance Temperature, Auto to control 00000000-0000-0000-0000-000000000101/11.
[  400.076000] uvcvideo: Adding mapping White Balance Temperature to control 00000000-0000-0000-0000-000000000101/10.
[  400.076000] uvcvideo: Adding mapping Focus (absolute) to control 00000000-0000-0000-0000-000000000001/6.
[  400.076000] uvcvideo: Adding mapping Focus, Auto to control 00000000-0000-0000-0000-000000000001/8.
[  400.076000] uvcvideo: Probing known UVC device 6 (05a9:2640)
[  400.076000] uvcvideo: Found format MJPEG.
[  400.076000] uvcvideo: - 640x480 (30.0 fps)
[  400.076000] uvcvideo: - 160x120 (30.0 fps)
[  400.076000] uvcvideo: - 176x144 (30.0 fps)
[  400.076000] uvcvideo: - 320x240 (30.0 fps)
[  400.076000] uvcvideo: - 352x288 (30.0 fps)
[  400.076000] uvcvideo: - 800x600 (30.0 fps)
[  400.076000] uvcvideo: - 1024x768 (10.0 fps)
[  400.076000] uvcvideo: - 1280x1024 (10.0 fps)
[  400.076000] uvcvideo: - 1600x1200 (10.0 fps)
[  400.076000] uvcvideo: Found format YUV 4:2:2 (YUYV).
[  400.076000] uvcvideo: - 640x480 (10.0 fps)
[  400.076000] uvcvideo: - 160x120 (30.0 fps)
[  400.076000] uvcvideo: - 176x144 (30.0 fps)
[  400.076000] uvcvideo: - 320x240 (30.0 fps)
[  400.076000] uvcvideo: - 352x288 (30.0 fps)
[  400.076000] uvcvideo: Found a Status endpoint (addr 83).
[  400.076000] uvcvideo: Found UVC 1.00 device Laptop Integrated Webcam (05a9:2640)
[  400.076000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/2 to device 6 entity 5
[  400.076000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/3 to device 6 entity 5
[  400.076000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/6 to device 6 entity 5
[  400.076000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/7 to device 6 entity 5
[  400.076000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/8 to device 6 entity 5
[  400.076000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/9 to device 6 entity 5
[  400.076000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/1 to device 6 entity 5
[  400.076000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/5 to device 6 entity 5
[  400.076000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/11 to device 6 entity 5
[  400.076000] uvcvideo: Added control 00000000-0000-0000-0000-000000000101/10 to device 6 entity 5
[  400.076000] uvcvideo: Scanning UVC chain: OT 3 <- PU 5 (-> XU 6) <- SU 4 <- IT 1
[  400.076000]  (-> XU 7)<6>uvcvideo: Found a valid video chain (1 -> 3).
[  400.076000] uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -32 (exp. 26).
[  400.080000] uvcvideo: UVC device initialized.
[  400.080000] usbcore: registered new interface driver uvcvideo

-- 
/jbm, but you can call me Josh.  Really, you can!


From hirofumi at momose.com  Thu Nov  8 23:58:18 2007
From: hirofumi at momose.com (Hirofumi Momose)
Date: Fri, 09 Nov 2007 07:58:18 +0900
Subject: [Linux-uvc-devel] timeout at second VIDIOC_STREAMON
In-Reply-To: <200711070046.25618.laurent.pinchart@skynet.be>
References: <20071106163909.700D.HIROFUMI@momose.com>
	<200711070046.25618.laurent.pinchart@skynet.be>
Message-ID: <20071109072726.6D01.HIROFUMI@momose.com>

Hi,

I found it depends on camera.

Second capturing fails with device which ID=0c45:62c0 (Sonix USB 2.0
Camera). 
But works with ID=046d:0992 (Logitech Quickcam Communicate STX) 
Status of this camera on the list http://linux-uvc.berlios.de/ is still
unknown but works fine.

Regards,

On Wed, 7 Nov 2007 00:46:25 +0100
Laurent Pinchart <laurent.pinchart at skynet.be> wrote:

> Hi Hirofumi,
> 
> On Tuesday 06 November 2007, Hirofumi Momose wrote:
> > Hello,
> >
> > I have a question that why uvc driver causes select() to time-out at
> > second VIDIOC_STREAMON.
> >
> > This can be reproduced using v4l2 sample code.
> > http://v4l2spec.bytesex.org/v4l2spec/capture.c
> >
> > Modify the main() a bit.
> >
> > ...
> > open_device ();
> > init_device ();
> >
> > // First streaming, works fine.
> > start_capturing ();
> > mainloop ();
> > stop_capturing ();
> >
> > // Second attempt, fails.
> > start_capturing();
> > mainloop(); // => cause select() to time out.
> > ...
> >
> > Is this correct ?
> 
> select() shouldn't timeout. Does the Linux UVC driver print messages in the 
> kernel log after the timeout ?
> 
> Regards,
> 
> Laurent Pinchart




From pauljurczak at yahoo.com  Fri Nov  9 00:49:28 2007
From: pauljurczak at yahoo.com (Paul Jurczak)
Date: Thu, 8 Nov 2007 15:49:28 -0800 (PST)
Subject: [Linux-uvc-devel] timeout at second VIDIOC_STREAMON
Message-ID: <300536.30465.qm@web60519.mail.yahoo.com>

Hi Hirofumi,

Are you sure ID=046d:0992 belongs to Logitech Quickcam Communicate STX? I have Logitech QuickCam Communicate Deluxe with the same ID.
 
Regards,
Paul

----- Original Message ----
> From: Hirofumi Momose <hirofumi at momose.com>
> To: linux-uvc-devel at lists.berlios.de
> Sent: Thursday, November 8, 2007 4:58:18 PM
> Subject: Re: [Linux-uvc-devel] timeout at second VIDIOC_STREAMON
> 
> Hi,
> 
> I found it depends on camera.
> 
> Second capturing fails with device which ID=0c45:62c0 (Sonix USB 2.0
> Camera). 
> But works with ID=046d:0992 (Logitech Quickcam Communicate STX) 
> Status of this camera on the list http://linux-uvc.berlios.de/ is still
> unknown but works fine.
> 
> Regards,
> 
> On Wed, 7 Nov 2007 00:46:25 +0100
> Laurent Pinchart  wrote:
> 
> > Hi Hirofumi,
> > 
> > On Tuesday 06 November 2007, Hirofumi Momose wrote:
> > > Hello,
> > >
> > > I have a question that why uvc driver causes select() to
> time-out
> 
 at
> > > second VIDIOC_STREAMON.
> > >
> > > This can be reproduced using v4l2 sample code.
> > > http://v4l2spec.bytesex.org/v4l2spec/capture.c
> > >
> > > Modify the main() a bit.
> > >
> > > ...
> > > open_device ();
> > > init_device ();
> > >
> > > // First streaming, works fine.
> > > start_capturing ();
> > > mainloop ();
> > > stop_capturing ();
> > >
> > > // Second attempt, fails.
> > > start_capturing();
> > > mainloop(); // => cause select() to time out.
> > > ...
> > >
> > > Is this correct ?
> > 
> > select() shouldn't timeout. Does the Linux UVC driver print
> messages
> 
 in the 
> > kernel log after the timeout ?
> > 
> > Regards,
> > 
> > Laurent Pinchart
> 
> 
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 



__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 


From hirofumi at momose.com  Fri Nov  9 14:27:17 2007
From: hirofumi at momose.com (Hirofumi Momose)
Date: Fri, 09 Nov 2007 22:27:17 +0900
Subject: [Linux-uvc-devel] timeout at second VIDIOC_STREAMON
In-Reply-To: <300536.30465.qm@web60519.mail.yahoo.com>
References: <300536.30465.qm@web60519.mail.yahoo.com>
Message-ID: <20071109222205.DA94.HIROFUMI@momose.com>

Hello Paul.

You are right. Camera is Communicate Deluxe.
The model string "Logitech Quickcam Communicate STX" was copied from 
list on the site which id is 046d:0992

Regards,


On Thu, 8 Nov 2007 15:49:28 -0800 (PST)
Paul Jurczak <pauljurczak at yahoo.com> wrote:

> Hi Hirofumi,
> 
> Are you sure ID=046d:0992 belongs to Logitech Quickcam Communicate STX? I have Logitech QuickCam Communicate Deluxe with the same ID.
>  
> Regards,
> Paul
> 
> ----- Original Message ----
> > From: Hirofumi Momose <hirofumi at momose.com>
> > To: linux-uvc-devel at lists.berlios.de
> > Sent: Thursday, November 8, 2007 4:58:18 PM
> > Subject: Re: [Linux-uvc-devel] timeout at second VIDIOC_STREAMON
> > 
> > Hi,
> > 
> > I found it depends on camera.
> > 
> > Second capturing fails with device which ID=0c45:62c0 (Sonix USB 2.0
> > Camera). 
> > But works with ID=046d:0992 (Logitech Quickcam Communicate STX) 
> > Status of this camera on the list http://linux-uvc.berlios.de/ is still
> > unknown but works fine.
> > 
> > Regards,
> > 
> > On Wed, 7 Nov 2007 00:46:25 +0100
> > Laurent Pinchart  wrote:
> > 
> > > Hi Hirofumi,
> > > 
> > > On Tuesday 06 November 2007, Hirofumi Momose wrote:
> > > > Hello,
> > > >
> > > > I have a question that why uvc driver causes select() to
> > time-out
> > 
>  at
> > > > second VIDIOC_STREAMON.
> > > >
> > > > This can be reproduced using v4l2 sample code.
> > > > http://v4l2spec.bytesex.org/v4l2spec/capture.c
> > > >
> > > > Modify the main() a bit.
> > > >
> > > > ...
> > > > open_device ();
> > > > init_device ();
> > > >
> > > > // First streaming, works fine.
> > > > start_capturing ();
> > > > mainloop ();
> > > > stop_capturing ();
> > > >
> > > > // Second attempt, fails.
> > > > start_capturing();
> > > > mainloop(); // => cause select() to time out.
> > > > ...
> > > >
> > > > Is this correct ?
> > > 
> > > select() shouldn't timeout. Does the Linux UVC driver print
> > messages
> > 
>  in the 
> > > kernel log after the timeout ?
> > > 
> > > Regards,
> > > 
> > > Laurent Pinchart
> > 
> > 
> > _______________________________________________
> > Linux-uvc-devel mailing list
> > Linux-uvc-devel at lists.berlios.de
> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> > 
> 
> 
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around 
> http://mail.yahoo.com 




From vnb2005 at gmail.com  Fri Nov  9 14:27:28 2007
From: vnb2005 at gmail.com (Vidyadhar Bhise)
Date: Fri, 9 Nov 2007 18:57:28 +0530
Subject: [Linux-uvc-devel] Problem with Acer Crystal eye Webcam
In-Reply-To: <200711070041.28720.laurent.pinchart@skynet.be>
References: <54b9a21e0711040859i3064d7dl1d835b5f4c8f126f@mail.gmail.com>
	<200711052011.08389.laurent.pinchart@skynet.be>
	<54b9a21e0711060722i3a3f98a8v11de4fd4dfa8172e@mail.gmail.com>
	<200711070041.28720.laurent.pinchart@skynet.be>
Message-ID: <54b9a21e0711090527g4afb928y4e5dcea266dcf05b@mail.gmail.com>

On Nov 7, 2007 5:11 AM, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> On Tuesday 06 November 2007, Vidyadhar Bhise wrote:
> > On Nov 6, 2007 12:41 AM, Laurent Pinchart <laurent.pinchart at skynet.be>
> wrote:
> > > Hi,
> > >
> > > On Sunday 04 November 2007, Vidyadhar Bhise wrote:
> > > > I have made the text files of error messages and here are the links to
> > > > the files.
> > > >
> > > >
> > > > http://dhost.info/vnb/lsusb_error
> > > > http://dhost.info/vnb/lsusb_for_webcam
> > > > http://dhost.info/vnb/luvcview_error_1
> > > > http://dhost.info/vnb/luvcview_error_2
> > > >
> > > >
> > > > Please help me in starting my webcam.
> > >
> > > Please post the kernel log output after luvcview failure.
> > >
> > > Best regards,
> > >
> > > Laurent Pinchart
> >
> > Hi,
> > Here is the kernel log output after luvcview failure.
> >
> > [root at vnb log]# tail -f /var/log/messages|grep kernel
> > Nov  6 20:36:04 vnb kernel: uvcvideo: Failed to query (130) UVC
> > control 1 (unit 0) : 2 (exp. 26).
> > Nov  6 20:44:09 vnb kernel: uvcvideo: Failed to query (130) UVC
> > control 1 (unit 0) : 2 (exp. 26).
>
> The problem should have been fixed with r136 from the linux-uvc SVN
> repository. Please upgrade and try again. Instructions to retrieve the latest
> SVN revision are provided on the project homepage.
>
> Best regards,
>
> Laurent Pinchart
>

Hi Laurent,
I Updated system, Removed xorg-x11-v4l driver..
Used revision 141. Luvcvideo window appears and fades out with the
attached error.
http://dhost.info/vnb/luvc_window_comes_and_goes
Changed setting in Ekiga to use V4L2 instead of V4L. It now works in ekiga.

Thank you.


From laurent.pinchart at skynet.be  Sat Nov 10 01:07:44 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 10 Nov 2007 01:07:44 +0100
Subject: [Linux-uvc-devel] Laptop Integrated Webcam video chain
	wonkiness?
In-Reply-To: <20071108174551.GJ27818@wilmington.dreamhost.com>
References: <20071108174551.GJ27818@wilmington.dreamhost.com>
Message-ID: <200711100107.44254.laurent.pinchart@skynet.be>

Hi Josh,

On Thursday 08 November 2007, Josh Myer wrote:
> I've got a Dell 1520 with the "Omnivision Laptop Integrated Webcam"
> (0x05a9/0x2640).  Adding the standard block gets the camera recognized
> and mostly initialized, but then it bombs out with "Failed to query
> (135) UVC control 1 (unit 0) : -32 (exp. 26)."  As far as I can tell,
> that's from the URB layer trying to talk to a closed/missing endpoint
> (not totally certain, it's been a long time since I worked with the USB
> guts and the APIs might be different).

You shouldn't need to add anything to the driver. Could you retry without the 
patch ?

> Does anyone have any ideas about this?  I'm pretty stumped, though it
> doesn't help that I only have a vague idea how UVC works =)

The error message isn't fatal. The device is buggy, it failed to answer a 
GET_DEF request, but the driver works around that. Your webcam should work 
fine.

> This is an Ubuntu Gutsy Gibbon system with the default kernel.
>
> Thanks for any help you can offer!

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Nov 10 01:13:07 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 10 Nov 2007 01:13:07 +0100
Subject: [Linux-uvc-devel] Problem with Acer Crystal eye Webcam
In-Reply-To: <54b9a21e0711090527g4afb928y4e5dcea266dcf05b@mail.gmail.com>
References: <54b9a21e0711040859i3064d7dl1d835b5f4c8f126f@mail.gmail.com>
	<200711070041.28720.laurent.pinchart@skynet.be>
	<54b9a21e0711090527g4afb928y4e5dcea266dcf05b@mail.gmail.com>
Message-ID: <200711100113.08100.laurent.pinchart@skynet.be>

On Friday 09 November 2007, Vidyadhar Bhise wrote:
> On Nov 7, 2007 5:11 AM, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > On Tuesday 06 November 2007, Vidyadhar Bhise wrote:
> > > On Nov 6, 2007 12:41 AM, Laurent Pinchart <laurent.pinchart at skynet.be>
> >
> > wrote:
> > > > Hi,
> > > >
> > > > On Sunday 04 November 2007, Vidyadhar Bhise wrote:
> > > > > I have made the text files of error messages and here are the links
> > > > > to the files.
> > > > >
> > > > >
> > > > > http://dhost.info/vnb/lsusb_error
> > > > > http://dhost.info/vnb/lsusb_for_webcam
> > > > > http://dhost.info/vnb/luvcview_error_1
> > > > > http://dhost.info/vnb/luvcview_error_2
> > > > >
> > > > >
> > > > > Please help me in starting my webcam.
> > > >
> > > > Please post the kernel log output after luvcview failure.
> > > >
> > > > Best regards,
> > > >
> > > > Laurent Pinchart
> > >
> > > Hi,
> > > Here is the kernel log output after luvcview failure.
> > >
> > > [root at vnb log]# tail -f /var/log/messages|grep kernel
> > > Nov  6 20:36:04 vnb kernel: uvcvideo: Failed to query (130) UVC
> > > control 1 (unit 0) : 2 (exp. 26).
> > > Nov  6 20:44:09 vnb kernel: uvcvideo: Failed to query (130) UVC
> > > control 1 (unit 0) : 2 (exp. 26).
> >
> > The problem should have been fixed with r136 from the linux-uvc SVN
> > repository. Please upgrade and try again. Instructions to retrieve the
> > latest SVN revision are provided on the project homepage.
> >
> > Best regards,
> >
> > Laurent Pinchart
>
> Hi Laurent,
> I Updated system, Removed xorg-x11-v4l driver..
> Used revision 141. Luvcvideo window appears and fades out with the
> attached error.
> http://dhost.info/vnb/luvc_window_comes_and_goes
> Changed setting in Ekiga to use V4L2 instead of V4L. It now works in ekiga.

The X error isn't related to the Liunx UVC driver, so I can't really help you 
there. That's a luvcview/SDL/X issue.

Your webcam seems to work fine otherwise, as you've been successful with 
Ekiga.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Nov 10 01:22:47 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 10 Nov 2007 01:22:47 +0100
Subject: [Linux-uvc-devel] timeout at second VIDIOC_STREAMON
In-Reply-To: <300536.30465.qm@web60519.mail.yahoo.com>
References: <300536.30465.qm@web60519.mail.yahoo.com>
Message-ID: <200711100122.47851.laurent.pinchart@skynet.be>

Hi Paul,

On Friday 09 November 2007, Paul Jurczak wrote:
> Hi Hirofumi,
>
> Are you sure ID=046d:0992 belongs to Logitech Quickcam Communicate STX? I
> have Logitech QuickCam Communicate Deluxe with the same ID.

Thanks for the hint. I fixed the website.

Regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Nov 10 01:24:12 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 10 Nov 2007 01:24:12 +0100
Subject: [Linux-uvc-devel] timeout at second VIDIOC_STREAMON
In-Reply-To: <20071109072726.6D01.HIROFUMI@momose.com>
References: <20071106163909.700D.HIROFUMI@momose.com>
	<200711070046.25618.laurent.pinchart@skynet.be>
	<20071109072726.6D01.HIROFUMI@momose.com>
Message-ID: <200711100124.12949.laurent.pinchart@skynet.be>

Hi Hirofumi,

On Thursday 08 November 2007, Hirofumi Momose wrote:
> Hi,
>
> I found it depends on camera.
>
> Second capturing fails with device which ID=0c45:62c0 (Sonix USB 2.0
> Camera).
> But works with ID=046d:0992 (Logitech Quickcam Communicate STX)
> Status of this camera on the list http://linux-uvc.berlios.de/ is still
> unknown but works fine.

Please check the kernel log for error messages after the timeout.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Nov 10 03:06:37 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 10 Nov 2007 03:06:37 +0100
Subject: [Linux-uvc-devel] [PATCH] Apple iSight
In-Reply-To: <4733287E.3010705@derklecks.de>
References: <3db1ec7f0711040637x437c3bc6j6fef56e2b54078af@mail.gmail.com>
	<4732B502.4080209@gmx.net> <4733287E.3010705@derklecks.de>
Message-ID: <200711100306.37417.laurent.pinchart@skynet.be>

Hi Ivan, Tom, Felix and all other iSight users.

On Thursday 08 November 2007, Felix M?ller wrote:
> Hi,
>
> >> But as we currently stand everything works so nicely as it is. Why
> >> should we have to spend precious time to port all of it to user
> >> land, read on how to write udev rules, bash scripts and what the
> >> best solution for distributions will be in terms of all of that.
> >>
> >> :-(
> >
> > I think usability is also an argument. For a user it is already
> > complex enough to install the driver without firmware, scripts etc. I
> > think it is better to have a solution, that "just works" and can be
> > handled by users easily in contrast to an very clean solutions noone
> > understands.
>
> yes I think so too.
>
> And I think firmware loading from the kernel is not that uncommon the
> new intel wlan driver iwlwifi loads its firmware too.

EZ-USB firmware loading have traditionally been done in userspace. The fxload 
utility has been designed for that purpose. I'm also not keen on adding a 
dependency on SHA1 to the Linux UVC driver, especially if only one buggy 
device requires it.

Moving code from userspace to kernelspace doesn't really goes in the general 
direction Linux is taking today. I'm however ready to consider kernelspace 
EZ-USB firmware loading, but that should be made generic as other drivers 
might then be interested.

If you're ok with this approach, I think the issue should be raised on the 
linux-usb-devel mailing list. People there are more aware of the USB firmware 
loading issues than I am,  and I'll trust their judgement regarding this 
issue.

Cheers,

Laurent Pinchart


From jbm9 at wilmington.dreamhost.com  Sat Nov 10 18:38:18 2007
From: jbm9 at wilmington.dreamhost.com (Josh Myer)
Date: Sat, 10 Nov 2007 09:38:18 -0800
Subject: [Linux-uvc-devel] Laptop Integrated Webcam video chain
	wonkiness?
In-Reply-To: <200711100107.44254.laurent.pinchart@skynet.be>
References: <20071108174551.GJ27818@wilmington.dreamhost.com>
	<200711100107.44254.laurent.pinchart@skynet.be>
Message-ID: <20071110173818.GM27818@wilmington.dreamhost.com>

On Sat, Nov 10, 2007 at 01:07:44AM +0100, Laurent Pinchart wrote:

> You shouldn't need to add anything to the driver. Could you retry without the 
> patch ?
> 

D'oh.  That fixed it right up, and things are working beautifully.  Thanks!
--
/jbm, but you can call me Josh.  Really, you can!




From redkrieg at gmail.com  Sat Nov 10 19:24:09 2007
From: redkrieg at gmail.com (Brandon Whaley)
Date: Sat, 10 Nov 2007 13:24:09 -0500
Subject: [Linux-uvc-devel] Xbox live vision camera revisited
Message-ID: <1194719049.21618.4.camel@h4xt0p>

I was going through the mail archives for this list from september and
found a patch to get the xbox live vision camera to work using uvc,
unfortunately when I pull the latest svn and apply the patch, the
resulting module produces this output when the camera is plugged in:

Nov 10 13:03:12 h4xt0p kernel: [  168.612000] uvcvideo: Found UVC 1.00
device Video Camera            (045e:0294)
Nov 10 13:03:13 h4xt0p kernel: [  169.612000] uvcvideo: Failed to query
(135) UVC control 1 (unit 0) : -110 (exp. 26).
Nov 10 13:03:14 h4xt0p kernel: [  170.612000] uvcvideo: Failed to query
(129) UVC control 1 (unit 0) : -110 (exp. 26).
Nov 10 13:03:14 h4xt0p kernel: [  170.612000] uvcvideo: Failed to
initialize the device (-5).
Nov 10 13:03:14 h4xt0p kernel: [  170.612000] usbcore: registered new
interface driver uvcvideo

Any idea what might be causing this, and if so how I might be able to
fix it?



From gnu.linux at gmx.net  Sun Nov 11 10:09:01 2007
From: gnu.linux at gmx.net (gnu.linux at gmx.net)
Date: Sun, 11 Nov 2007 10:09:01 +0100
Subject: [Linux-uvc-devel] quickcam pro 9000 viewer
Message-ID: <20071111090901.233790@gmx.net>

Hi uvc-friends,

yesterday I received my new Logitech Quickcam Pro 9000.
With the newest uvc driver I got it work directly.
But the only program which streams a constant picture is "luvcview".

Are there any more programs available? with more configure-options?
I tried fswebcam and uvccapture but I am not satisfied with this programs.

I would like to use my favorite cam-program "camorama". Is it possible?

by the way: I use debian etch.


Thank you very much!


Best regards,
Frank.
-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger


From contact at i-nz.net  Sun Nov 11 20:59:55 2007
From: contact at i-nz.net (Ivan N. Zlatev)
Date: Sun, 11 Nov 2007 19:59:55 +0000
Subject: [Linux-uvc-devel] [PATCH] Apple iSight
In-Reply-To: <200711100306.37417.laurent.pinchart@skynet.be>
References: <3db1ec7f0711040637x437c3bc6j6fef56e2b54078af@mail.gmail.com>
	<4732B502.4080209@gmx.net> <4733287E.3010705@derklecks.de>
	<200711100306.37417.laurent.pinchart@skynet.be>
Message-ID: <3db1ec7f0711111159m334e6a18y317cd340eca8586e@mail.gmail.com>

On 11/10/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> Hi Ivan, Tom, Felix and all other iSight users.
>
> On Thursday 08 November 2007, Felix M?ller wrote:
> > Hi,
> >
> > >> But as we currently stand everything works so nicely as it is. Why
> > >> should we have to spend precious time to port all of it to user
> > >> land, read on how to write udev rules, bash scripts and what the
> > >> best solution for distributions will be in terms of all of that.
> > >>
> > >> :-(
> > >
> > > I think usability is also an argument. For a user it is already
> > > complex enough to install the driver without firmware, scripts etc. I
> > > think it is better to have a solution, that "just works" and can be
> > > handled by users easily in contrast to an very clean solutions noone
> > > understands.
> >
> > yes I think so too.
> >
> > And I think firmware loading from the kernel is not that uncommon the
> > new intel wlan driver iwlwifi loads its firmware too.
>
> EZ-USB firmware loading have traditionally been done in userspace. The fxload
> utility has been designed for that purpose. I'm also not keen on adding a
> dependency on SHA1 to the Linux UVC driver, especially if only one buggy
> device requires it.
>

I see. Kernel space fxload firmware loader sounds a bit off scope. Do
you know off the top of your head a driver I can look into for their
fxload based userspace hotplug(?) integration (scripts?)? I am willing
to look into a fxload based setup as long as it's convenient for
distributions.

Regards.

> Moving code from userspace to kernelspace doesn't really goes in the general
> direction Linux is taking today. I'm however ready to consider kernelspace
> EZ-USB firmware loading, but that should be made generic as other drivers
> might then be interested.
>
> If you're ok with this approach, I think the issue should be raised on the
> linux-usb-devel mailing list. People there are more aware of the USB firmware
> loading issues than I am,  and I'll trust their judgement regarding this
> issue.
>
> Cheers,
>
> Laurent Pinchart
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


-- 
Ivan N. Zlatev

Web: http://www.i-nZ.net
"It's all some kind of whacked out conspiracy."

From hirofumi at momose.com  Tue Nov 13 02:13:27 2007
From: hirofumi at momose.com (Hirofumi Momose)
Date: Tue, 13 Nov 2007 10:13:27 +0900
Subject: [Linux-uvc-devel] timeout at second VIDIOC_STREAMON
In-Reply-To: <200711100124.12949.laurent.pinchart@skynet.be>
References: <20071109072726.6D01.HIROFUMI@momose.com>
	<200711100124.12949.laurent.pinchart@skynet.be>
Message-ID: <20071113101048.FEE6.HIROFUMI@momose.com>

Hello Laurent,

No related logs in the kernel messages.
I think this is of firmware issue.

Thanks
-- 
Hirofumi Momose <hirofumi at momose.com>


On Sat, 10 Nov 2007 01:24:12 +0100
Laurent Pinchart <laurent.pinchart at skynet.be> wrote:

> Hi Hirofumi,
> 
> On Thursday 08 November 2007, Hirofumi Momose wrote:
> > Hi,
> >
> > I found it depends on camera.
> >
> > Second capturing fails with device which ID=0c45:62c0 (Sonix USB 2.0
> > Camera).
> > But works with ID=046d:0992 (Logitech Quickcam Communicate STX)
> > Status of this camera on the list http://linux-uvc.berlios.de/ is still
> > unknown but works fine.
> 
> Please check the kernel log for error messages after the timeout.
> 
> Best regards,
> 
> Laurent Pinchart




From sether at tru7h.org  Tue Nov 13 15:18:46 2007
From: sether at tru7h.org (Seth Graham)
Date: Tue, 13 Nov 2007 08:18:46 -0600
Subject: [Linux-uvc-devel] Xbox live vision camera revisited
In-Reply-To: <1194719049.21618.4.camel@h4xt0p>
References: <1194719049.21618.4.camel@h4xt0p>
Message-ID: <4739B246.4050401@tru7h.org>

Brandon Whaley wrote:
> I was going through the mail archives for this list from september and
> found a patch to get the xbox live vision camera to work using uvc,
> unfortunately when I pull the latest svn and apply the patch, the
> resulting module produces this output when the camera is plugged in:


It still seems to work.. did you try bringing up luvcview?

I'm using svn revision 139.

I get the same errors in dmesg, minus the "failed to initialize" one.


> 
> Nov 10 13:03:12 h4xt0p kernel: [  168.612000] uvcvideo: Found UVC 1.00
> device Video Camera            (045e:0294)
> Nov 10 13:03:13 h4xt0p kernel: [  169.612000] uvcvideo: Failed to query
> (135) UVC control 1 (unit 0) : -110 (exp. 26).
> Nov 10 13:03:14 h4xt0p kernel: [  170.612000] uvcvideo: Failed to query
> (129) UVC control 1 (unit 0) : -110 (exp. 26).
> Nov 10 13:03:14 h4xt0p kernel: [  170.612000] uvcvideo: Failed to
> initialize the device (-5).
> Nov 10 13:03:14 h4xt0p kernel: [  170.612000] usbcore: registered new
> interface driver uvcvideo
> 
> Any idea what might be causing this, and if so how I might be able to
> fix it?
> 
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel



From laurent.pinchart at skynet.be  Tue Nov 13 17:36:15 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 13 Nov 2007 17:36:15 +0100
Subject: [Linux-uvc-devel] timeout at second VIDIOC_STREAMON
In-Reply-To: <20071113101048.FEE6.HIROFUMI@momose.com>
References: <20071109072726.6D01.HIROFUMI@momose.com>
	<200711100124.12949.laurent.pinchart@skynet.be>
	<20071113101048.FEE6.HIROFUMI@momose.com>
Message-ID: <200711131736.15995.laurent.pinchart@skynet.be>

On Tuesday 13 November 2007, Hirofumi Momose wrote:
> Hello Laurent,
>
> No related logs in the kernel messages.
> I think this is of firmware issue.

It might be :-/ Could you try to add a delay (a few seconds should be enough) 
before starting the second capture and see if it helps ?

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Nov 13 17:52:53 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 13 Nov 2007 17:52:53 +0100
Subject: [Linux-uvc-devel] [PATCH] Apple iSight
In-Reply-To: <3db1ec7f0711111159m334e6a18y317cd340eca8586e@mail.gmail.com>
References: <3db1ec7f0711040637x437c3bc6j6fef56e2b54078af@mail.gmail.com>
	<200711100306.37417.laurent.pinchart@skynet.be>
	<3db1ec7f0711111159m334e6a18y317cd340eca8586e@mail.gmail.com>
Message-ID: <200711131752.53135.laurent.pinchart@skynet.be>

Hi Ivan,

On Sunday 11 November 2007, Ivan N. Zlatev wrote:
> On 11/10/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > Hi Ivan, Tom, Felix and all other iSight users.
> >
> > On Thursday 08 November 2007, Felix M?ller wrote:
> > > Hi,
> > >
> > > >> But as we currently stand everything works so nicely as it is. Why
> > > >> should we have to spend precious time to port all of it to user
> > > >> land, read on how to write udev rules, bash scripts and what the
> > > >> best solution for distributions will be in terms of all of that.
> > > >>
> > > >> :-(
> > > >
> > > > I think usability is also an argument. For a user it is already
> > > > complex enough to install the driver without firmware, scripts etc. I
> > > > think it is better to have a solution, that "just works" and can be
> > > > handled by users easily in contrast to an very clean solutions noone
> > > > understands.
> > >
> > > yes I think so too.
> > >
> > > And I think firmware loading from the kernel is not that uncommon the
> > > new intel wlan driver iwlwifi loads its firmware too.
> >
> > EZ-USB firmware loading have traditionally been done in userspace. The
> > fxload utility has been designed for that purpose. I'm also not keen on
> > adding a dependency on SHA1 to the Linux UVC driver, especially if only
> > one buggy device requires it.
>
> I see. Kernel space fxload firmware loader sounds a bit off scope.

It's a bit out of scope for the Linux UVC driver, but it might still be 
useful.

Basically, my position is that I don't want to decide if firmware loading 
should be done in userspace or kernelspace. EZ-USB firmware loading is 
currently done in userspace by the fxload utility. I'm not against moving 
this to the kernel if USB gurus (I'm thinking about the linux-usb-devel 
mailing list) think it would be a better approach. In that case, I would 
however insist on implementing this in a generic way, not specific to the 
Linux UVC driver.

To summarise the issue, I'm ok with a userspace implementation (which already 
exists). If you feel the task would be better handled in the kernel, I would 
be ok with a generic kernelspace approved the linux-usb-devel.

> Do you know off the top of your head a driver I can look into for their
> fxload based userspace hotplug(?) integration (scripts?)? I am willing
> to look into a fxload based setup as long as it's convenient for
> distributions.

The Xilinx ISE toolchain uses fxload. The software can be downloaded at no 
cost. As the package is a bit big (around 1GB), here's the udev rule:

BUS=="usb", ACTION=="add", SYSFS{idVendor}=="03fd", SYSFS{idProduct}=="0009", 
RUN+="/sbin/fxload -v -t fx2 -I /usr/share/xusbdfwu.hex -d $TEMPNODE"

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Nov 13 17:57:52 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 13 Nov 2007 17:57:52 +0100
Subject: [Linux-uvc-devel] quickcam pro 9000 viewer
In-Reply-To: <20071111090901.233790@gmx.net>
References: <20071111090901.233790@gmx.net>
Message-ID: <200711131757.52429.laurent.pinchart@skynet.be>

Hi Frank,

On Sunday 11 November 2007, gnu.linux at gmx.net wrote:
> Hi uvc-friends,
>
> yesterday I received my new Logitech Quickcam Pro 9000.
> With the newest uvc driver I got it work directly.
> But the only program which streams a constant picture is "luvcview".
>
> Are there any more programs available? with more configure-options?
> I tried fswebcam and uvccapture but I am not satisfied with this programs.

uvccapture should definitely work. fswebcam seems to support V4L2, I'll try it 
tonight.

> I would like to use my favorite cam-program "camorama". Is it possible?

Camorama doesn't support V4L2. I contacted the developers about offered my 
help. I filed a bug report but haven't heard from them since.

> by the way: I use debian etch.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Nov 13 18:06:32 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 13 Nov 2007 18:06:32 +0100
Subject: [Linux-uvc-devel]
	=?iso-8859-15?q?Logitech_Quickcam_pro_for_Noteb?=
	=?iso-8859-15?q?ooks_fps=09problems?=
In-Reply-To: <20071025233129.GA7406@vilya>
References: <8bd748e80710251537g2f0ff957j1030e64ae730e763@mail.gmail.com>
	<20071025233129.GA7406@vilya>
Message-ID: <200711131806.33085.laurent.pinchart@skynet.be>

On Friday 26 October 2007, Richard Atterer wrote:
> On Fri, Oct 26, 2007 at 12:37:42AM +0200, Diego Gonz?lez wrote:
> > I'm using the Logitech Quickcam pro for Notbooks to do some computer
> > vision related tasks using OpenCV. If have tried to configure the camera
> > to get around 20-40 fps but all that i get is 5fps at max. luvcview
> > reports that the modes and it seems that i should be able to get 640x480
> > at 20,25 or 30 fps. But not even luvcview gets that many frames.
>
> You need *lots* of light to make the camera switch to higher fps values.
>
> By default, the camera is in "auto exposure mode", which means that it will
> automatically lower the frame rate to be able expose longer to get
> satisfactory results.
>
> Theoretically, it should be possible to switch auto exposure off and then
> lower the exposure duration to something like 1/200 second or shorter to
> get more fps. With my Quickcam 9000 Pro, I have only been able to do this
> using the "v4l2ucp" tool - luvcview's controls somehow do not work, they
> always return "ioctl set control error". However even that no longer works
> with recent versions of the driver - the exposure control no longer shows
> up in v4l2ucp. Maybe this is due to the ongoing "dynamic controls" work?

The exposure controls are still present in the driver. However, the control 
enumeration code has been modified. Applications should use the 
V4L2_CTRL_FLAG_NEXT_CTRL flag to enumerate device-specific controls, 
otherwise the enumeration process will stop at the first unsupported control.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Nov 13 22:34:13 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 13 Nov 2007 22:34:13 +0100
Subject: [Linux-uvc-devel] quickcam pro 9000 viewer
In-Reply-To: <200711131757.52429.laurent.pinchart@skynet.be>
References: <20071111090901.233790@gmx.net>
	<200711131757.52429.laurent.pinchart@skynet.be>
Message-ID: <200711132234.13321.laurent.pinchart@skynet.be>

On Tuesday 13 November 2007, Laurent Pinchart wrote:
> Hi Frank,
>
> On Sunday 11 November 2007, gnu.linux at gmx.net wrote:
> > Hi uvc-friends,
> >
> > yesterday I received my new Logitech Quickcam Pro 9000.
> > With the newest uvc driver I got it work directly.
> > But the only program which streams a constant picture is "luvcview".
> >
> > Are there any more programs available? with more configure-options?
> > I tried fswebcam and uvccapture but I am not satisfied with this
> > programs.
>
> uvccapture should definitely work. fswebcam seems to support V4L2, I'll try
> it tonight.

I tested fswebcam (20070108 snapshot) and it works fine here with a Logitech 
Quickcam Pro for Notebooks.

> > I would like to use my favorite cam-program "camorama". Is it possible?
>
> Camorama doesn't support V4L2. I contacted the developers about offered my
> help. I filed a bug report but haven't heard from them since.
>
> > by the way: I use debian etch.

Best regards,

Laurent Pinchart


From genstef at gentoo.org  Tue Nov 13 23:09:18 2007
From: genstef at gentoo.org (Stefan Schweizer)
Date: Tue, 13 Nov 2007 23:09:18 +0100
Subject: [Linux-uvc-devel] [PATCH] Apple iSight
References: <3db1ec7f0711040637x437c3bc6j6fef56e2b54078af@mail.gmail.com>
	<200711100306.37417.laurent.pinchart@skynet.be>
	<3db1ec7f0711111159m334e6a18y317cd340eca8586e@mail.gmail.com>
	<200711131752.53135.laurent.pinchart@skynet.be>
Message-ID: <fhd7ac$9ac$1@ger.gmane.org>

Just made a simple rule here: 

ACTION=="add", SUBSYSTEM=="usb", ATTRS{idVendor}=="05ac", \
        ATTRS{idProduct}=="8300",
RUN+="/sbin/extract /lib/firmware/AppleUSBVideoSupport"

works perfectly fine with the ectract tool in /sbin and the firmware
in /lib/firmware.

The tool can be found here:
http://people.freedesktop.org/~rbultje/linux-uvc-0.1.0-e.tar.gz

Looks much cleaner than kernel side for me that way.

Best regards,
Stefan



From richard at 2007.atterer.net  Tue Nov 13 23:11:47 2007
From: richard at 2007.atterer.net (Richard Atterer)
Date: Tue, 13 Nov 2007 23:11:47 +0100
Subject: [Linux-uvc-devel] quickcam pro 9000 viewer
In-Reply-To: <20071111090901.233790@gmx.net>
References: <20071111090901.233790@gmx.net>
Message-ID: <20071113221147.GB28114@vilya>

Hi Frank,

On Sun, Nov 11, 2007 at 10:09:01AM +0100, gnu.linux at gmx.net wrote:
> But the only program which streams a constant picture is "luvcview".
> Are there any more programs available? with more configure-options?

Some more suggestions:

* mplayer -tv driver=v4l2:width=640:height=480:device=/dev/video0:fps=30:outfmt=yuy2 tv://
This needs a recent mplayer. I'm having problems selecting any other format 
than VGA, though. Needs much less CPU to display the live picture than 
uvcview.

* Also, motion 3.2.8 works. (The versions currently in Debian are too old.) 
It autodetects the type of device, basically a "videodevice /dev/video0" in 
motion.conf is enough.

* Furthermore, a couple of video telephony applications support v4l2, 
including the latest Skype for Linux as well as ekiga (but do remember to 
install the libpt-1.10.10-plugins-v4l2 package for ekiga!).

* Plus, specifically for MJPEG V4L2 devices, there's MJPG-streamer 
<http://naaa.de/uvc_streamer.htm>.

* Finally, gstreamer has support for v4l2 and you can find some command 
line examples for certain webcams (e.g. iSight) on the web, but personally 
I haven't been able to get it to work with my Quickcam 9000. The command 
line syntax is rather complicated - maybe someone who has tried longer than 
me can provide a working example.

vlc is missing in this list! :( Too bad, it's a nice, versatile tool. I 
hope support will be added sooner or later.

Have fun! :)

  Richard

-- 
  __   _
  |_) /|  Richard Atterer     |  GnuPG key: 888354F7
  | \/?|  http://atterer.net  |  08A9 7B7D 3D13 3EF2 3D25  D157 79E6 F6DC 8883 54F7
  ? '` ?


From hirofumi at momose.com  Wed Nov 14 05:56:56 2007
From: hirofumi at momose.com (Hirofumi Momose)
Date: Wed, 14 Nov 2007 13:56:56 +0900
Subject: [Linux-uvc-devel] timeout at second VIDIOC_STREAMON
In-Reply-To: <200711131736.15995.laurent.pinchart@skynet.be>
References: <20071113101048.FEE6.HIROFUMI@momose.com>
	<200711131736.15995.laurent.pinchart@skynet.be>
Message-ID: <20071114135303.C0BC.HIROFUMI@momose.com>

Hello Laurent,

Set 60 seconds!, but fails.
Maybe, someting stucked in the camera firm.

Regards,

-- 
Hirofumi Momose <hirofumi at momose.com>


On Tue, 13 Nov 2007 17:36:15 +0100
Laurent Pinchart <laurent.pinchart at skynet.be> wrote:

> On Tuesday 13 November 2007, Hirofumi Momose wrote:
> > Hello Laurent,
> >
> > No related logs in the kernel messages.
> > I think this is of firmware issue.
> 
> It might be :-/ Could you try to add a delay (a few seconds should be enough) 
> before starting the second capture and see if it helps ?
> 
> Best regards,
> 
> Laurent Pinchart




From simon.morlat at linphone.org  Tue Nov 13 15:56:27 2007
From: simon.morlat at linphone.org (Simon Morlat)
Date: Tue, 13 Nov 2007 15:56:27 +0100
Subject: [Linux-uvc-devel] [Linphone-developers] 064e:a101 Suyin Corp.
	Cam in Acer Notebook
In-Reply-To: <200710302312.19279.laurent.pinchart@skynet.be>
References: <20070923125827.10910@gmx.net>
	<200710301105.47982.simon.morlat@linphone.org>
	<200710302312.19279.laurent.pinchart@skynet.be>
Message-ID: <200711131556.27444.simon.morlat@linphone.org>


>
> The USB stack shouldn't care, or at least I think it shouldn't. Would it be
> possible to move the init phase to the streaming thread for testing purpose
> ?
>
Yes it is possible. I plan to do it as soon as I can.

Thanks

Simon


From yoann.di-ruzza at limgeo.com  Wed Nov 14 13:17:02 2007
From: yoann.di-ruzza at limgeo.com (Yoann DI RUZZA)
Date: Wed, 14 Nov 2007 13:17:02 +0100
Subject: [Linux-uvc-devel] Hercules Dualpix Exchange fully supported (tested
	with skype 2.0)
Message-ID: <1195042622.23989.0.camel@pcyoann64.lim>

Hi everybody,
        
        Could anybody add Hercules Dualpix Exchange to the supported
        device list
        in the website main page?
        I tested it and everything's ok with skype 2.0.
        
        Device ID: 06f8:3005
        
        ### v4l2 device info [/dev/video0] ###
        general info
            VIDIOC_QUERYCAP
                driver                  : "uvcvideo"
                card                    : "Hercules Dualpix Exchange"
                bus_info                : "0000:00:02.1"
                version                 : 0.1.0
                capabilities            : 0x4000001
        [VIDEO_CAPTURE,STREAMING]
        
        thx
        -- 
        ------------------------------------------
        Yoann
        
        
        



From laurent.pinchart at skynet.be  Wed Nov 14 14:25:00 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 14 Nov 2007 14:25:00 +0100
Subject: [Linux-uvc-devel] Hercules Dualpix Exchange fully supported
	(tested with skype 2.0)
In-Reply-To: <1195042622.23989.0.camel@pcyoann64.lim>
References: <1195042622.23989.0.camel@pcyoann64.lim>
Message-ID: <200711141425.00588.laurent.pinchart@skynet.be>

Hi Yoann,

On Wednesday 14 November 2007 13:17, Yoann DI RUZZA wrote:
> Hi everybody,
>
>         Could anybody add Hercules Dualpix Exchange to the supported
>         device list
>         in the website main page?
>         I tested it and everything's ok with skype 2.0.
>
>         Device ID: 06f8:3005
>
>         ### v4l2 device info [/dev/video0] ###
>         general info
>             VIDIOC_QUERYCAP
>                 driver                  : "uvcvideo"
>                 card                    : "Hercules Dualpix Exchange"
>                 bus_info                : "0000:00:02.1"
>                 version                 : 0.1.0
>                 capabilities            : 0x4000001
>         [VIDEO_CAPTURE,STREAMING]

Could you please send me the output of

lsusb -v -d 06f8:3005

with usbutils 0.72 or newer ?

Thanks.

Best regards,

Laurent Pinchart


From yoann.di-ruzza at limgeo.com  Wed Nov 14 16:16:52 2007
From: yoann.di-ruzza at limgeo.com (Yoann DI RUZZA)
Date: Wed, 14 Nov 2007 16:16:52 +0100
Subject: [Linux-uvc-devel] Hercules Dualpix Exchange fully
	supported	(tested with skype 2.0)
In-Reply-To: <200711141425.00588.laurent.pinchart@skynet.be>
References: <1195042622.23989.0.camel@pcyoann64.lim>
	<200711141425.00588.laurent.pinchart@skynet.be>
Message-ID: <1195053412.20082.3.camel@pcyoann64.lim>


Le mercredi 14 novembre 2007 ? 14:25 +0100, Laurent Pinchart a ?crit :
> Hi Yoann,
> 
> On Wednesday 14 November 2007 13:17, Yoann DI RUZZA wrote:
> > Hi everybody,
> >
> >         Could anybody add Hercules Dualpix Exchange to the supported
> >         device list
> >         in the website main page?
> >         I tested it and everything's ok with skype 2.0.
> >
> >         Device ID: 06f8:3005
> >
> >         ### v4l2 device info [/dev/video0] ###
> >         general info
> >             VIDIOC_QUERYCAP
> >                 driver                  : "uvcvideo"
> >                 card                    : "Hercules Dualpix Exchange"
> >                 bus_info                : "0000:00:02.1"
> >                 version                 : 0.1.0
> >                 capabilities            : 0x4000001
> >         [VIDEO_CAPTURE,STREAMING]
> 
> Could you please send me the output of
> 
> lsusb -v -d 06f8:3005
> 
> with usbutils 0.72 or newer ?
> 
> Thanks.
> 
> Best regards,
> 
> Laurent Pinchart
> 
Hi Laurent,

My version of usbutils is 0.72.
lsusb -v -d 06f8:3005 =>

Bus 001 Device 002: ID 06f8:3005 Guillemot Corp. 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x06f8 Guillemot Corp.
  idProduct          0x3005 
  bcdDevice            1.00
  iManufacturer           2 Guillemot Corporation
  iProduct                1 Hercules Dualpix Exchange
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          915
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              168mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0 
      iFunction               5 Hercules Dualpix Exchange
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0 
      iInterface              5 Hercules Dualpix Exchange
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength          103
        dwClockFrequency       15.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               5
        iTerminal               0 
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {28f03370-6311-4a2e-ba2c-6890eb334016}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          3
        bControlSize            1
        bmControls( 0)       0x0f
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 5
        guidExtensionCode         {2812ae3f-bcd7-4e11-a357-6f1edef7d61d}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          4
        bControlSize            1
        bmControls( 0)       0x00
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0 
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000a0e
          Auto-Exposure Mode
          Auto-Exposure Priority
          Exposure Time (Absolute)
          Zoom (Absolute)
          PanTilt (Absolute)
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x000037ff
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          White Balance Component
          Backlight Compensation
          Gain
          Power Line Frequency
          White Balance Temperature, Auto
          White Balance Component, Auto
        iProcessing             0 
        bmVideoStandards     0x 0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      VideoStreaming Interface Descriptor:
        bLength                            15
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormarts                        2
        wTotalLength                    33026
        bEndPointAddress                    0
        bmInfo                              2
        bTerminalLink                       1
        bStillCaptureMethod                 1
        bTriggerSupport                     1
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    27
        bmaControls( 1)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                5
        guidFormat
{32595559-0000-0010-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                  3072000
        dwMaxBitRate                 18432000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                  1013760
        dwMaxBitRate                  6082560
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   768000
        dwMaxBitRate                  4608000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                   253440
        dwMaxBitRate                  1520640
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   192000
        dwMaxBitRate                  1152000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            11
        bDescriptorType                    36
        bDescriptorSubtype                  6 (FORMAT_MJPEG)
        bFormatIndex                        2
        bNumFrameDescriptors                5
        bFlags                              0
          Fixed-size samples: No
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   384000
        dwMaxBitRate                  2304000
        dwMaxVideoFrameBufferSize       76800
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   126720
        dwMaxBitRate                   760320
        dwMaxVideoFrameBufferSize       25344
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                    96000
        dwMaxBitRate                   576000
        dwMaxVideoFrameBufferSize       19200
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                    31680
        dwMaxBitRate                   190080
        dwMaxVideoFrameBufferSize        6336
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                    24000
        dwMaxBitRate                   144000
        dwMaxVideoFrameBufferSize        4800
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b20  2x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1320  3x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 0 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       0 
      bFunctionProtocol       0 
      iFunction               4 Hercules Dualpix Exchange Mic
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0 
      iInterface              4 Hercules Dualpix Exchange Mic
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           41
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0 
        iTerminal               0 
      AudioControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 2
        bSourceID               1
        bControlSize            2
        bmaControls( 0)      0x01
        bmaControls( 0)      0x00
          Mute
        bmaControls( 1)      0x02
        bmaControls( 1)      0x00
          Volume
        iFeature                0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               2
        iTerminal               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            1 Discrete
        tSamFreq[ 0]        16000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x84  EP 4 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0190  1x 400 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0002
  (Bus Powered)
  Remote Wakeup Enabled

-- 
Yoann




From uvc-devel at jollyrotten.org  Wed Nov 14 17:22:50 2007
From: uvc-devel at jollyrotten.org (Anthony Durity)
Date: Wed, 14 Nov 2007 17:22:50 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam for Notebooks Pro 2006 version
	and Skype Beta 2
Message-ID: <b1923f7f0711140822j34850deen2d38d0435743351e@mail.gmail.com>

Hi there,

I recently bought a Logitech QuickCam. I blacklisted ehci_hcd and this is
what I get from the new skype beta 2 with video support. luvcview and ekiga
seem to have no problems, the thing is that most everyone I know uses skype
and not ekiga. I'm running Gutsy 64bit version. I got test video with skype
the first few times, then I ran ekiga and then skype stopped working. And
now even though I unplugged it and plugged it back in and unloaded and
loaded the modules it still does not work with skype.

[63000.237037] usb 1-2: new full speed USB device using ohci_hcd and address
3
[63000.555227] usb 1-2: configuration #1 chosen from 1 choice
[63000.675744] Linux video capture interface: v2.00
[63000.968905] usbcore: registered new interface driver snd-usb-audio
[63001.562107] uvcvideo: Found UVC 1.00 device <unnamed> (046d:08cb)
[63001.613822] usbcore: registered new interface driver uvcvideo
[63001.614755] USB Video Class driver (v0.1.0)
[63081.556079] compat_ioctl32: v4l2 ioctl VIDIOC_S_PARM, dir=rw (0xc0cc5616)
[63081.556243] ioctl32(skype:9593): Unknown cmd fd(33)
cmd(c0cc5616){t:'V';sz:204} arg(f4df0e50) on /dev/video0
[63081.603070] compat_ioctl32: v4l2 ioctl VIDIOC_S_PARM, dir=rw (0xc0cc5616)
[63081.603234] ioctl32(skype:9593): Unknown cmd fd(33)
cmd(c0cc5616){t:'V';sz:204} arg(f4df0e20) on /dev/video0

I put the following line in a modprobe file as instructed.
install uvcvideo /sbin/modprobe snd_usb_audio; /sbin/modprobe
--ignore-install uvcvideo

Any ideas?
Thanks,
    Anthony
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071114/6c213d6a/attachment.html>

From laurent.pinchart at skynet.be  Wed Nov 14 19:16:10 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 14 Nov 2007 19:16:10 +0100
Subject: [Linux-uvc-devel]
	=?utf-8?q?Hercules_Dualpix_Exchange_fully_suppo?=
	=?utf-8?q?rted_=28tested_with_skype_2=2E0=29?=
In-Reply-To: <1195053412.20082.3.camel@pcyoann64.lim>
References: <1195042622.23989.0.camel@pcyoann64.lim>
	<200711141425.00588.laurent.pinchart@skynet.be>
	<1195053412.20082.3.camel@pcyoann64.lim>
Message-ID: <200711141916.10840.laurent.pinchart@skynet.be>

On Wednesday 14 November 2007, Yoann DI RUZZA wrote:
> Le mercredi 14 novembre 2007 ? 14:25 +0100, Laurent Pinchart a ?crit :
> > Hi Yoann,
> >
> > On Wednesday 14 November 2007 13:17, Yoann DI RUZZA wrote:
> > > Hi everybody,
> > >
> > >         Could anybody add Hercules Dualpix Exchange to the supported
> > >         device list
> > >         in the website main page?
> > >         I tested it and everything's ok with skype 2.0.
> > >
> > >         Device ID: 06f8:3005
> > >
> > >         ### v4l2 device info [/dev/video0] ###
> > >         general info
> > >             VIDIOC_QUERYCAP
> > >                 driver                  : "uvcvideo"
> > >                 card                    : "Hercules Dualpix Exchange"
> > >                 bus_info                : "0000:00:02.1"
> > >                 version                 : 0.1.0
> > >                 capabilities            : 0x4000001
> > >         [VIDEO_CAPTURE,STREAMING]
> >
> > Could you please send me the output of
> >
> > lsusb -v -d 06f8:3005
> >
> > with usbutils 0.72 or newer ?
> >
>
> Hi Laurent,
>
> My version of usbutils is 0.72.
> lsusb -v -d 06f8:3005 =>
[snip]

Thanks for the information. I've updated the website.

Best regards,

Laurent Pinchart


From philipp at kolmann.at  Wed Nov 14 21:42:16 2007
From: philipp at kolmann.at (Philipp Kolmann)
Date: Wed, 14 Nov 2007 21:42:16 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam for Notebooks Pro 2006
	version and Skype Beta 2
In-Reply-To: <b1923f7f0711140822j34850deen2d38d0435743351e@mail.gmail.com>
References: <b1923f7f0711140822j34850deen2d38d0435743351e@mail.gmail.com>
Message-ID: <20071114204216.GA4631@kolmann.at>

On Wed, Nov 14, 2007 at 05:22:50PM +0100, Anthony Durity wrote:
> I recently bought a Logitech QuickCam. I blacklisted ehci_hcd and this is
> what I get from the new skype beta 2 with video support. luvcview and ekiga
> seem to have no problems, the thing is that most everyone I know uses skype
> and not ekiga. I'm running Gutsy 64bit version. I got test video with skype
> the first few times, then I ran ekiga and then skype stopped working. And
> now even though I unplugged it and plugged it back in and unloaded and
> loaded the modules it still does not work with skype.

Regarding to the forum posts on the skype forums, it seem that there may be
some problems with the compat_ioctl32. Check the forums for details.

hth
Philipp


-- 
The more I learn about people, the more I like my dog!


From muneebel at yahoo.com  Wed Nov 14 22:51:10 2007
From: muneebel at yahoo.com (Muneeb Dawood)
Date: Wed, 14 Nov 2007 13:51:10 -0800 (PST)
Subject: [Linux-uvc-devel] uvc pixel format
Message-ID: <323626.54046.qm@web30802.mail.mud.yahoo.com>

Dear All

I am trying to grab real time video stream using uvc driver. The pixel format is in the yuyv format. could anybody guide me how to get the 4:2:0 format from the uvc. The camera is Creative Live Cam optia  AF and its output is yuyv . Also would it be possible to convert the yuyv format to yuv 4:2:0 in real time and save the bitstream in the 4:2:0 yuv format to a file. I will appreciate any help in this regard. Thanks

Muneeb

Muneeb
       
---------------------------------
Never miss a thing.   Make Yahoo your homepage.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071114/5a64f4d4/attachment.html>

From gregory.kokanosky at gmail.com  Wed Nov 14 23:27:36 2007
From: gregory.kokanosky at gmail.com (Gregory Kokanosky)
Date: Wed, 14 Nov 2007 23:27:36 +0100
Subject: [Linux-uvc-devel] Patch for Dell XPS 1330 Integrated Webcam support
Message-ID: <761cc8520711141427k46edf02fx4a63f1fd57983cf4@mail.gmail.com>

Hi all,

please find attached a patch for Dell XPS 1330 integrated webcam (LED display).

It works nice on OpenSuse 10.3 with uvc build from trunk.

Regards,
Greg
-------------- next part --------------
A non-text attachment was scrubbed...
Name: OmniVision_0x05a9_0x7670.diff
Type: text/x-patch
Size: 680 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071114/a7bb15dd/attachment.bin>

From NathanaelGalpin at smarttech.com  Thu Nov 15 01:59:42 2007
From: NathanaelGalpin at smarttech.com (Nathanael Galpin)
Date: Wed, 14 Nov 2007 17:59:42 -0700
Subject: [Linux-uvc-devel] uvc pixel format
In-Reply-To: <323626.54046.qm@web30802.mail.mud.yahoo.com>
References: <323626.54046.qm@web30802.mail.mud.yahoo.com>
Message-ID: <AACE2A3DD3559A4CBA163CB5D70C9ABE0ACF7084@calmail1.smarttech.inc>

Hi Muneeb,

 

I'm fairly certain the Optia cam will not natively stream YUV 4:2:0. I
seem to remember from when I was using it that

it supports YUYV and MJPEG only.

 

Converting it in real time should be feasible. Check out this page, 

http://v4l2spec.bytesex.org/spec-single/v4l2.html#YUV-FORMATS, among
other things it documents the different

video formats. 

 

There are really two major things you have to handle. One is simply
rearranging the bytes, this is straightforward. The

second is how to halve the number of chroma values. This I'm not really
sure about. In YUYV one Cr and one Cb

apply to 2 Y values. In 4:2:0 one Cr and one Cb apply to 4 Y values. My
first thought would be too simply average C

values from the YUYV stream to generate each of the C values in 4:2:0.
Maybe someone with more experience here

has a suggestion:-).

 

Let me know if that helps and how you make out.

 

Nathanael

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071114/f8bf81f8/attachment.html>

From uvc-devel at jollyrotten.org  Thu Nov 15 13:55:47 2007
From: uvc-devel at jollyrotten.org (Anthony Durity)
Date: Thu, 15 Nov 2007 13:55:47 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam for Notebooks Pro 2006
	version and Skype Beta 2
In-Reply-To: <20071114204216.GA4631@kolmann.at>
References: <b1923f7f0711140822j34850deen2d38d0435743351e@mail.gmail.com>
	<20071114204216.GA4631@kolmann.at>
Message-ID: <b1923f7f0711150455w1371c076w368422fbbfaa15a8@mail.gmail.com>

Hi there,

I've checked the forums - they say maybe that compat_ioctl32 is not new
enough. Ubuntu Gutsy is fresh off the presses, how do I make sure
compat_ioctl32 is up to date? I've installed uvc from trunk so that should
be okay. Who should I be asking about compat_ioctl32 stuff? The v4l2 people?
Anything I can do to help improve the support for this particular device, I
can't afford ?99 on the 2007 model unfortunately.

Thanks in advance...

On 11/14/07, Philipp Kolmann <philipp at kolmann.at> wrote:
>
> On Wed, Nov 14, 2007 at 05:22:50PM +0100, Anthony Durity wrote:
> > I recently bought a Logitech QuickCam. I blacklisted ehci_hcd and this
> is
> > what I get from the new skype beta 2 with video support. luvcview and
> ekiga
> > seem to have no problems, the thing is that most everyone I know uses
> skype
> > and not ekiga. I'm running Gutsy 64bit version. I got test video with
> skype
> > the first few times, then I ran ekiga and then skype stopped working.
> And
> > now even though I unplugged it and plugged it back in and unloaded and
> > loaded the modules it still does not work with skype.
>
> Regarding to the forum posts on the skype forums, it seem that there may
> be
> some problems with the compat_ioctl32. Check the forums for details.
>
> hth
> Philipp
>
>
> --
> The more I learn about people, the more I like my dog!
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071115/ad959020/attachment.html>

From mike at werk01.de  Thu Nov 15 14:02:44 2007
From: mike at werk01.de (Mike Lohmann)
Date: Thu, 15 Nov 2007 14:02:44 +0100
Subject: [Linux-uvc-devel] Canon DigitalCam as Webcam
Message-ID: <4A4AA016-EF96-4F1B-852A-A6304865AB86@werk01.de>

Hi,

I have a new Canon Powershot G9 and I would like to use it as v4l  
device. I know there is gphoto2 or the convert programm (not  
Imagemagick) to access the camera. convert also creates a viewfinder  
as GTK Window and you can see, what the camera sees in her viewfinder.

I now have the idea to use this ptp feature (redirecting the  
viewfinder image to the ram and then read it out by a programm) to a / 
dev/video device, which I can then access for example with xawtv or  
something else.

My Problem is:

I don't know where to start. Is it possible to use the libptp in a  
driver? There is this wall between kernel space and user space, isn't  
it? Is it possible to access the cam's viewfinder via libptp and  
redirect it to a / dev/video device? How can I "create" a device for  
that?
Can someone of you give me a hint?

Would be great to get something from you.

Thanks.

Mike



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071115/538d76af/attachment.html>

From filip at helmut.se  Sun Nov 18 15:03:01 2007
From: filip at helmut.se (Filip Palm)
Date: Sun, 18 Nov 2007 15:03:01 +0100
Subject: [Linux-uvc-devel] quickcam pro 9000 viewer
In-Reply-To: <20071111090901.233790@gmx.net>
References: <20071111090901.233790@gmx.net>
Message-ID: <1195394581.21459.2.camel@filip-desktop>


On s?n, 2007-11-11 at 10:09 +0100, gnu.linux at gmx.net wrote:
> Hi uvc-friends,
> 
> yesterday I received my new Logitech Quickcam Pro 9000.
> With the newest uvc driver I got it work directly.
> But the only program which streams a constant picture is "luvcview".
> 
> Are there any more programs available? with more configure-options?
Not with so much configuration option but a good program that has much
potential in the future is:
http://live.gnome.org/Cheese

"Cheese is a Photobooth-inspired GNOME application for taking pictures
and videos from a webcam. It also includes fancy graphical effects based
on the gstreamer-backend." - from the Cheese site.

> I tried fswebcam and uvccapture but I am not satisfied with this programs.
> 
> I would like to use my favorite cam-program "camorama". Is it possible?
> 
> by the way: I use debian etch.
> 
> 
> Thank you very much!
> 
> 
> Best regards,
> Frank.



From laurent.pinchart at skynet.be  Sun Nov 18 23:08:17 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 18 Nov 2007 23:08:17 +0100
Subject: [Linux-uvc-devel] Microsoft VX-6000 webcam, an uvc device ?
In-Reply-To: <e4901aff0711170805u1656ea41gaee0a26dd40570b6@mail.gmail.com>
References: <e4901aff0711162201s55407ef0ud11abb45703d1891@mail.gmail.com>
	<e4901aff0711170805u1656ea41gaee0a26dd40570b6@mail.gmail.com>
Message-ID: <200711182308.17337.laurent.pinchart@skynet.be>

Hi Jon,

On Saturday 17 November 2007, Jon Petitta wrote:
> Laurent,
>
> I have the same webcam as Patrice, and can not get uvc to recognize the
> camera.  I wanted to post the information that you where looking for, and
> hopefully find a resolution for this.
>
> Jon
>
> lsusb
> ******************
>
> Bus 002 Device 009: ID 045e:00f4 Microsoft Corp.
> Device Descriptor:
>   bLength                18
>   bDescriptorType         1
>   bcdUSB               2.00
>   bDeviceClass            0 (Defined at Interface level)
>   bDeviceSubClass         0
>   bDeviceProtocol         0
>   bMaxPacketSize0        64
>   idVendor           0x045e Microsoft Corp.
>   idProduct          0x00f4
>   bcdDevice            1.00
>   iManufacturer           0
>   iProduct                1
>   iSerial                 0
>   bNumConfigurations      1
>   Configuration Descriptor:
>     bLength                 9
>     bDescriptorType         2
>     wTotalLength          382
>     bNumInterfaces          3
>     bConfigurationValue     1
>     iConfiguration          0
>     bmAttributes         0x80
>       (Bus Powered)
>     MaxPower              500mA
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       0
>       bNumEndpoints           3
>       bInterfaceClass       255 Vendor Specific Class
>       bInterfaceSubClass    255 Vendor Specific Subclass
>       bInterfaceProtocol    255 Vendor Specific Protocol
>       iInterface              0
[snip]

That's a very different device. "255 Vendor Specific Class" means the device 
is not UVC compliant (would have been "14 Video" otherwise). I'm afraid that 
webcam will probably never be supported by the Linux UVC driver.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Nov 18 23:09:58 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 18 Nov 2007 23:09:58 +0100
Subject: [Linux-uvc-devel] Microsoft VX-6000 webcam, an uvc device ?
In-Reply-To: <200711182308.17337.laurent.pinchart@skynet.be>
References: <e4901aff0711162201s55407ef0ud11abb45703d1891@mail.gmail.com>
	<e4901aff0711170805u1656ea41gaee0a26dd40570b6@mail.gmail.com>
	<200711182308.17337.laurent.pinchart@skynet.be>
Message-ID: <200711182309.58450.laurent.pinchart@skynet.be>

On Sunday 18 November 2007, Laurent Pinchart wrote:
> Hi Jon,
>
> On Saturday 17 November 2007, Jon Petitta wrote:
> > Laurent,
> >
> > I have the same webcam as Patrice, and can not get uvc to recognize the
> > camera.  I wanted to post the information that you where looking for, and
> > hopefully find a resolution for this.
> >
> > Jon
> >
> > lsusb
> > ******************
> >
> > Bus 002 Device 009: ID 045e:00f4 Microsoft Corp.
> > Device Descriptor:
> >   bLength                18
> >   bDescriptorType         1
> >   bcdUSB               2.00
> >   bDeviceClass            0 (Defined at Interface level)
> >   bDeviceSubClass         0
> >   bDeviceProtocol         0
> >   bMaxPacketSize0        64
> >   idVendor           0x045e Microsoft Corp.
> >   idProduct          0x00f4
> >   bcdDevice            1.00
> >   iManufacturer           0
> >   iProduct                1
> >   iSerial                 0
> >   bNumConfigurations      1
> >   Configuration Descriptor:
> >     bLength                 9
> >     bDescriptorType         2
> >     wTotalLength          382
> >     bNumInterfaces          3
> >     bConfigurationValue     1
> >     iConfiguration          0
> >     bmAttributes         0x80
> >       (Bus Powered)
> >     MaxPower              500mA
> >     Interface Descriptor:
> >       bLength                 9
> >       bDescriptorType         4
> >       bInterfaceNumber        0
> >       bAlternateSetting       0
> >       bNumEndpoints           3
> >       bInterfaceClass       255 Vendor Specific Class
> >       bInterfaceSubClass    255 Vendor Specific Subclass
> >       bInterfaceProtocol    255 Vendor Specific Protocol
> >       iInterface              0
>
> [snip]
>
> That's a very different device. "255 Vendor Specific Class" means the
> device is not UVC compliant (would have been "14 Video" otherwise). I'm
> afraid that webcam will probably never be supported by the Linux UVC
> driver.

I mean very different from the NX-6000, not the one Patrice reported :-)

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Nov 18 23:14:50 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 18 Nov 2007 23:14:50 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam for Notebooks Pro 2006
	version and Skype Beta 2
In-Reply-To: <b1923f7f0711150455w1371c076w368422fbbfaa15a8@mail.gmail.com>
References: <b1923f7f0711140822j34850deen2d38d0435743351e@mail.gmail.com>
	<20071114204216.GA4631@kolmann.at>
	<b1923f7f0711150455w1371c076w368422fbbfaa15a8@mail.gmail.com>
Message-ID: <200711182314.50500.laurent.pinchart@skynet.be>

Hi Anthony,

On Thursday 15 November 2007, Anthony Durity wrote:
> Hi there,
>
> I've checked the forums - they say maybe that compat_ioctl32 is not new
> enough. Ubuntu Gutsy is fresh off the presses, how do I make sure
> compat_ioctl32 is up to date? I've installed uvc from trunk so that should
> be okay. Who should I be asking about compat_ioctl32 stuff? The v4l2
> people? Anything I can do to help improve the support for this particular
> device, I can't afford ?99 on the 2007 model unfortunately.

The good news is you don't have to spend $99 on a newer webcam, as the other 
you got is unrelated to the infamous firmware bug (although this doesn't rule 
out the possibility that you could experience that problem later).

As Skype is a closed-source software, I think you should complain directly to 
them until they give you a solution, or tell you where to ask if they are 
sure your issue is not related to their software.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Nov 18 23:24:11 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 18 Nov 2007 23:24:11 +0100
Subject: [Linux-uvc-devel] Patch for Dell XPS 1330 Integrated Webcam
	support
In-Reply-To: <761cc8520711141427k46edf02fx4a63f1fd57983cf4@mail.gmail.com>
References: <761cc8520711141427k46edf02fx4a63f1fd57983cf4@mail.gmail.com>
Message-ID: <200711182324.12118.laurent.pinchart@skynet.be>

Hi Greg,

On Wednesday 14 November 2007, Gregory Kokanosky wrote:
> Hi all,
>
> please find attached a patch for Dell XPS 1330 integrated webcam (LED
> display).
>
> It works nice on OpenSuse 10.3 with uvc build from trunk.

Before I apply the patch, could you please confirm that you tried the Linux 
UVC driver (SVN trunk) without the patch (and that it didn't work) ?

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Nov 18 23:27:03 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 18 Nov 2007 23:27:03 +0100
Subject: [Linux-uvc-devel] Canon DigitalCam as Webcam
In-Reply-To: <4A4AA016-EF96-4F1B-852A-A6304865AB86@werk01.de>
References: <4A4AA016-EF96-4F1B-852A-A6304865AB86@werk01.de>
Message-ID: <200711182327.04067.laurent.pinchart@skynet.be>

Hi Mike,

On Thursday 15 November 2007, Mike Lohmann wrote:
> Hi,
>
> I have a new Canon Powershot G9 and I would like to use it as v4l
> device. I know there is gphoto2 or the convert programm (not
> Imagemagick) to access the camera. convert also creates a viewfinder
> as GTK Window and you can see, what the camera sees in her viewfinder.
>
> I now have the idea to use this ptp feature (redirecting the
> viewfinder image to the ram and then read it out by a programm) to a /
> dev/video device, which I can then access for example with xawtv or
> something else.
>
> My Problem is:
>
> I don't know where to start. Is it possible to use the libptp in a
> driver? There is this wall between kernel space and user space, isn't
> it? Is it possible to access the cam's viewfinder via libptp and
> redirect it to a / dev/video device? How can I "create" a device for
> that?
> Can someone of you give me a hint?
>
> Would be great to get something from you.

There's some kind of loopback video driver but I've never used it. You would 
then need a userspace application to access the camera through ptp and feed 
the result back to the kernel. You might have more luck on the video4linux 
mailing list than here, as your issue isn't really related to the UVC driver.

On a side note, have you checked the device USB descriptors ? There might be 
another non-ptp interface. Just a wild guess.

Best regards,

Laurent Pinchart


From gregory.kokanosky at gmail.com  Mon Nov 19 09:45:04 2007
From: gregory.kokanosky at gmail.com (Gregory Kokanosky)
Date: Mon, 19 Nov 2007 09:45:04 +0100
Subject: [Linux-uvc-devel] Patch for Dell XPS 1330 Integrated Webcam
	support
In-Reply-To: <200711182324.12118.laurent.pinchart@skynet.be>
References: <761cc8520711141427k46edf02fx4a63f1fd57983cf4@mail.gmail.com>
	<200711182324.12118.laurent.pinchart@skynet.be>
Message-ID: <761cc8520711190045g5b633793u5f3c5877e88822a6@mail.gmail.com>

On Nov 18, 2007 11:24 PM, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> Hi Greg,
>
>
> On Wednesday 14 November 2007, Gregory Kokanosky wrote:
> > Hi all,
> >
> > please find attached a patch for Dell XPS 1330 integrated webcam (LED
> > display).
> >
> > It works nice on OpenSuse 10.3 with uvc build from trunk.
>
> Before I apply the patch, could you please confirm that you tried the Linux
> UVC driver (SVN trunk) without the patch (and that it didn't work) ?

I confirm, It didn't work with trunk revision 141 without the patch.

Regards,
Greg

>
> Best regards,
>
> Laurent Pinchart
>


From olivier.revelin at gmail.com  Mon Nov 19 19:31:27 2007
From: olivier.revelin at gmail.com (Olivier Revelin)
Date: Mon, 19 Nov 2007 19:31:27 +0100
Subject: [Linux-uvc-devel] Creative Live! Cam Video IM pro
Message-ID: <73b5f3be0711191031u2195fa6akc04997a145d6697c@mail.gmail.com>

I'm trying to get this webcam working :

Bus 007 Device 003: ID 041e:4055 Creative Technology, Ltd

This ID (4055) is found on various forum threads / mail archives and no clue
about what driver to use (I tried gspca, uvc, pwc, .... every single driver
I could lay my hands on).
Some threads end with a "wait and see"  style note. I had a lot of hopes
when I saw that a lot of webcams with IDs very close to this one were
supported, but I guess I'm out of luck.

Is there any way I could provide some help for any driver project out there
? Provide a USB sniff dump on Windows ?

Thank you

Kind regards,


-- 
Olivier Revelin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071119/de16fdf2/attachment.html>

From mxhaard at magic.fr  Mon Nov 19 21:03:33 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Mon, 19 Nov 2007 21:03:33 +0100
Subject: [Linux-uvc-devel] Creative Live! Cam Video IM pro
In-Reply-To: <73b5f3be0711191031u2195fa6akc04997a145d6697c@mail.gmail.com>
References: <73b5f3be0711191031u2195fa6akc04997a145d6697c@mail.gmail.com>
Message-ID: <200711192103.33912.mxhaard@magic.fr>

Le Lundi 19 Novembre 2007 19:31, Olivier Revelin a ?crit?:
> I'm trying to get this webcam working :
>
> Bus 007 Device 003: ID 041e:4055 Creative Technology, Ltd
>
> This ID (4055) is found on various forum threads / mail archives and no
> clue about what driver to use (I tried gspca, uvc, pwc, .... every single
> driver I could lay my hands on).
> Some threads end with a "wait and see"  style note. I had a lot of hopes
> when I saw that a lot of webcams with IDs very close to this one were
> supported, but I guess I'm out of luck.
>
> Is there any way I could provide some help for any driver project out there
> ? Provide a USB sniff dump on Windows ?
>
> Thank you
>
> Kind regards,
Olivier,
Maybe this driver can support your webcam 
https://sourceforge.net/projects/m560x-driver/
regards
-- 
Michel Xhaard
http://mxhaard.free.fr


From laurent.pinchart at skynet.be  Mon Nov 19 23:36:54 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 19 Nov 2007 23:36:54 +0100
Subject: [Linux-uvc-devel] Patch for Dell XPS 1330 Integrated Webcam
	support
In-Reply-To: <761cc8520711190045g5b633793u5f3c5877e88822a6@mail.gmail.com>
References: <761cc8520711141427k46edf02fx4a63f1fd57983cf4@mail.gmail.com>
	<200711182324.12118.laurent.pinchart@skynet.be>
	<761cc8520711190045g5b633793u5f3c5877e88822a6@mail.gmail.com>
Message-ID: <200711192336.54144.laurent.pinchart@skynet.be>

Hi Greg,

On Monday 19 November 2007, Gregory Kokanosky wrote:
> On Nov 18, 2007 11:24 PM, Laurent Pinchart <laurent.pinchart at skynet.be> 
wrote:
> > Hi Greg,
> >
> > On Wednesday 14 November 2007, Gregory Kokanosky wrote:
> > > Hi all,
> > >
> > > please find attached a patch for Dell XPS 1330 integrated webcam (LED
> > > display).
> > >
> > > It works nice on OpenSuse 10.3 with uvc build from trunk.
> >
> > Before I apply the patch, could you please confirm that you tried the
> > Linux UVC driver (SVN trunk) without the patch (and that it didn't work)
> > ?
>
> I confirm, It didn't work with trunk revision 141 without the patch.

Could you please post the kernel log with r141 (no patch) after a failure 
(with luvcview for instance) ? I got conflicting reports and I'd like to sort 
this out before committing the patch.

Thanks for your help.

Best regards,

Laurent Pinchart


From olivier.revelin at gmail.com  Tue Nov 20 00:11:16 2007
From: olivier.revelin at gmail.com (Olivier Revelin)
Date: Tue, 20 Nov 2007 00:11:16 +0100
Subject: [Linux-uvc-devel] Creative Live! Cam Video IM pro
In-Reply-To: <200711192103.33912.mxhaard@magic.fr>
References: <73b5f3be0711191031u2195fa6akc04997a145d6697c@mail.gmail.com>
	<200711192103.33912.mxhaard@magic.fr>
Message-ID: <73b5f3be0711191511q314b37f7kb555815733b36637@mail.gmail.com>

Is that a guess or did I miss some information that could lead me to the
name of the chipset ?

Here's the lspci -v output ... if it can be of any help.

Bus 007 Device 003: ID 041e:4055 Creative Technology, Ltd
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0        64
  idVendor           0x041e Creative Technology, Ltd
  idProduct          0x4055
  bcdDevice            1.02
  iManufacturer           0
  iProduct                1 Live! Cam Video IM Pro
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          101
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               4
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       1
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 0 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               4
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       2
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x1380  3x 896 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               4
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       3
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x1300  3x 768 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               4
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)


2007/11/19, Michel Xhaard <mxhaard at magic.fr>:
>
> Le Lundi 19 Novembre 2007 19:31, Olivier Revelin a ?crit:
> > I'm trying to get this webcam working :
> >
> > Bus 007 Device 003: ID 041e:4055 Creative Technology, Ltd
> >
> > This ID (4055) is found on various forum threads / mail archives and no
> > clue about what driver to use (I tried gspca, uvc, pwc, .... every
> single
> > driver I could lay my hands on).
> > Some threads end with a "wait and see"  style note. I had a lot of hopes
> > when I saw that a lot of webcams with IDs very close to this one were
> > supported, but I guess I'm out of luck.
> >
> > Is there any way I could provide some help for any driver project out
> there
> > ? Provide a USB sniff dump on Windows ?
> >
> > Thank you
> >
> > Kind regards,
> Olivier,
> Maybe this driver can support your webcam
> https://sourceforge.net/projects/m560x-driver/
> regards
> --
> Michel Xhaard
> http://mxhaard.free.fr
>



-- 
Olivier Revelin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071120/595558e2/attachment.html>

From mxhaard at magic.fr  Tue Nov 20 01:04:44 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Tue, 20 Nov 2007 01:04:44 +0100
Subject: [Linux-uvc-devel] Creative Live! Cam Video IM pro
In-Reply-To: <73b5f3be0711191511q314b37f7kb555815733b36637@mail.gmail.com>
References: <73b5f3be0711191031u2195fa6akc04997a145d6697c@mail.gmail.com>
	<200711192103.33912.mxhaard@magic.fr>
	<73b5f3be0711191511q314b37f7kb555815733b36637@mail.gmail.com>
Message-ID: <200711200104.44620.mxhaard@magic.fr>

Le Mardi 20 Novembre 2007 00:11, Olivier Revelin a ?crit?:
> Is that a guess or did I miss some information that could lead me to the
> name of the chipset ?
>
> Here's the lspci -v output ... if it can be of any help.
>
> Bus 007 Device 003: ID 041e:4055 Creative Technology, Ltd
> Device Descriptor:
>   bLength                18
>   bDescriptorType         1
>   bcdUSB               2.00
>   bDeviceClass            0 (Defined at Interface level)
>   bDeviceSubClass         0
>   bDeviceProtocol         0
>   bMaxPacketSize0        64
>   idVendor           0x041e Creative Technology, Ltd
>   idProduct          0x4055
>   bcdDevice            1.02
>   iManufacturer           0
>   iProduct                1 Live! Cam Video IM Pro
>   iSerial                 0
>   bNumConfigurations      1
>   Configuration Descriptor:
>     bLength                 9
>     bDescriptorType         2
>     wTotalLength          101
>     bNumInterfaces          1
>     bConfigurationValue     1
>     iConfiguration          0
>     bmAttributes         0x80
>       (Bus Powered)
>     MaxPower              500mA
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       0
>       bNumEndpoints           2
>       bInterfaceClass       255 Vendor Specific Class
>       bInterfaceSubClass    255 Vendor Specific Subclass
>       bInterfaceProtocol    255 Vendor Specific Protocol
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            1
>           Transfer Type            Isochronous
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0000  1x 0 bytes
>         bInterval               1
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x82  EP 2 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0000  1x 0 bytes
>         bInterval               4
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       1
>       bNumEndpoints           2
>       bInterfaceClass       255 Vendor Specific Class
>       bInterfaceSubClass    255 Vendor Specific Subclass
>       bInterfaceProtocol    255 Vendor Specific Protocol
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            1
>           Transfer Type            Isochronous
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x1400  3x 0 bytes
>         bInterval               1
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x82  EP 2 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0010  1x 16 bytes
>         bInterval               4
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       2
>       bNumEndpoints           2
>       bInterfaceClass       255 Vendor Specific Class
>       bInterfaceSubClass    255 Vendor Specific Subclass
>       bInterfaceProtocol    255 Vendor Specific Protocol
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            1
>           Transfer Type            Isochronous
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x1380  3x 896 bytes
>         bInterval               1
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x82  EP 2 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0010  1x 16 bytes
>         bInterval               4
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       3
>       bNumEndpoints           2
>       bInterfaceClass       255 Vendor Specific Class
>       bInterfaceSubClass    255 Vendor Specific Subclass
>       bInterfaceProtocol    255 Vendor Specific Protocol
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            1
>           Transfer Type            Isochronous
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x1300  3x 768 bytes
>         bInterval               1
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x82  EP 2 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0010  1x 16 bytes
>         bInterval               4
> Device Qualifier (for other device speed):
>   bLength                10
>   bDescriptorType         6
>   bcdUSB               2.00
>   bDeviceClass            0 (Defined at Interface level)
>   bDeviceSubClass         0
>   bDeviceProtocol         0
>   bMaxPacketSize0        64
>   bNumConfigurations      1
> Device Status:     0x0000
>   (Bus Powered)
>
> 2007/11/19, Michel Xhaard <mxhaard at magic.fr>:
> > Le Lundi 19 Novembre 2007 19:31, Olivier Revelin a ?crit:
> > > I'm trying to get this webcam working :
> > >
> > > Bus 007 Device 003: ID 041e:4055 Creative Technology, Ltd
> > >
> > > This ID (4055) is found on various forum threads / mail archives and no
> > > clue about what driver to use (I tried gspca, uvc, pwc, .... every
> >
> > single
> >
> > > driver I could lay my hands on).
> > > Some threads end with a "wait and see"  style note. I had a lot of
> > > hopes when I saw that a lot of webcams with IDs very close to this one
> > > were supported, but I guess I'm out of luck.
> > >
> > > Is there any way I could provide some help for any driver project out
> >
> > there
> >
> > > ? Provide a USB sniff dump on Windows ?
> > >
> > > Thank you
> > >
> > > Kind regards,
> >
> > Olivier,
> > Maybe this driver can support your webcam
> > https://sourceforge.net/projects/m560x-driver/
> > regards
> > --
> > Michel Xhaard
> > http://mxhaard.free.fr
This webcam seem set with a ALI M5603C 
-- 
Michel Xhaard
http://mxhaard.free.fr


From olivier.revelin at gmail.com  Tue Nov 20 06:59:26 2007
From: olivier.revelin at gmail.com (Olivier Revelin)
Date: Tue, 20 Nov 2007 06:59:26 +0100
Subject: [Linux-uvc-devel] Creative Live! Cam Video IM pro
In-Reply-To: <200711200104.44620.mxhaard@magic.fr>
References: <73b5f3be0711191031u2195fa6akc04997a145d6697c@mail.gmail.com>
	<200711192103.33912.mxhaard@magic.fr>
	<73b5f3be0711191511q314b37f7kb555815733b36637@mail.gmail.com>
	<200711200104.44620.mxhaard@magic.fr>
Message-ID: <73b5f3be0711192159i3bac4b83g3dcdd46ee1f66253@mail.gmail.com>

oK, thanks a lot for your answers. I'll try this one harder :) I've only got
Seg Fault so far.

Regards

2007/11/20, Michel Xhaard <mxhaard at magic.fr>:
>
> Le Mardi 20 Novembre 2007 00:11, Olivier Revelin a ?crit:
> > Is that a guess or did I miss some information that could lead me to the
> > name of the chipset ?
> >
> > Here's the lspci -v output ... if it can be of any help.
> >
> > Bus 007 Device 003: ID 041e:4055 Creative Technology, Ltd
> > Device Descriptor:
> >   bLength                18
> >   bDescriptorType         1
> >   bcdUSB               2.00
> >   bDeviceClass            0 (Defined at Interface level)
> >   bDeviceSubClass         0
> >   bDeviceProtocol         0
> >   bMaxPacketSize0        64
> >   idVendor           0x041e Creative Technology, Ltd
> >   idProduct          0x4055
> >   bcdDevice            1.02
> >   iManufacturer           0
> >   iProduct                1 Live! Cam Video IM Pro
> >   iSerial                 0
> >   bNumConfigurations      1
> >   Configuration Descriptor:
> >     bLength                 9
> >     bDescriptorType         2
> >     wTotalLength          101
> >     bNumInterfaces          1
> >     bConfigurationValue     1
> >     iConfiguration          0
> >     bmAttributes         0x80
> >       (Bus Powered)
> >     MaxPower              500mA
> >     Interface Descriptor:
> >       bLength                 9
> >       bDescriptorType         4
> >       bInterfaceNumber        0
> >       bAlternateSetting       0
> >       bNumEndpoints           2
> >       bInterfaceClass       255 Vendor Specific Class
> >       bInterfaceSubClass    255 Vendor Specific Subclass
> >       bInterfaceProtocol    255 Vendor Specific Protocol
> >       iInterface              0
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x81  EP 1 IN
> >         bmAttributes            1
> >           Transfer Type            Isochronous
> >           Synch Type               None
> >           Usage Type               Data
> >         wMaxPacketSize     0x0000  1x 0 bytes
> >         bInterval               1
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x82  EP 2 IN
> >         bmAttributes            3
> >           Transfer Type            Interrupt
> >           Synch Type               None
> >           Usage Type               Data
> >         wMaxPacketSize     0x0000  1x 0 bytes
> >         bInterval               4
> >     Interface Descriptor:
> >       bLength                 9
> >       bDescriptorType         4
> >       bInterfaceNumber        0
> >       bAlternateSetting       1
> >       bNumEndpoints           2
> >       bInterfaceClass       255 Vendor Specific Class
> >       bInterfaceSubClass    255 Vendor Specific Subclass
> >       bInterfaceProtocol    255 Vendor Specific Protocol
> >       iInterface              0
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x81  EP 1 IN
> >         bmAttributes            1
> >           Transfer Type            Isochronous
> >           Synch Type               None
> >           Usage Type               Data
> >         wMaxPacketSize     0x1400  3x 0 bytes
> >         bInterval               1
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x82  EP 2 IN
> >         bmAttributes            3
> >           Transfer Type            Interrupt
> >           Synch Type               None
> >           Usage Type               Data
> >         wMaxPacketSize     0x0010  1x 16 bytes
> >         bInterval               4
> >     Interface Descriptor:
> >       bLength                 9
> >       bDescriptorType         4
> >       bInterfaceNumber        0
> >       bAlternateSetting       2
> >       bNumEndpoints           2
> >       bInterfaceClass       255 Vendor Specific Class
> >       bInterfaceSubClass    255 Vendor Specific Subclass
> >       bInterfaceProtocol    255 Vendor Specific Protocol
> >       iInterface              0
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x81  EP 1 IN
> >         bmAttributes            1
> >           Transfer Type            Isochronous
> >           Synch Type               None
> >           Usage Type               Data
> >         wMaxPacketSize     0x1380  3x 896 bytes
> >         bInterval               1
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x82  EP 2 IN
> >         bmAttributes            3
> >           Transfer Type            Interrupt
> >           Synch Type               None
> >           Usage Type               Data
> >         wMaxPacketSize     0x0010  1x 16 bytes
> >         bInterval               4
> >     Interface Descriptor:
> >       bLength                 9
> >       bDescriptorType         4
> >       bInterfaceNumber        0
> >       bAlternateSetting       3
> >       bNumEndpoints           2
> >       bInterfaceClass       255 Vendor Specific Class
> >       bInterfaceSubClass    255 Vendor Specific Subclass
> >       bInterfaceProtocol    255 Vendor Specific Protocol
> >       iInterface              0
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x81  EP 1 IN
> >         bmAttributes            1
> >           Transfer Type            Isochronous
> >           Synch Type               None
> >           Usage Type               Data
> >         wMaxPacketSize     0x1300  3x 768 bytes
> >         bInterval               1
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x82  EP 2 IN
> >         bmAttributes            3
> >           Transfer Type            Interrupt
> >           Synch Type               None
> >           Usage Type               Data
> >         wMaxPacketSize     0x0010  1x 16 bytes
> >         bInterval               4
> > Device Qualifier (for other device speed):
> >   bLength                10
> >   bDescriptorType         6
> >   bcdUSB               2.00
> >   bDeviceClass            0 (Defined at Interface level)
> >   bDeviceSubClass         0
> >   bDeviceProtocol         0
> >   bMaxPacketSize0        64
> >   bNumConfigurations      1
> > Device Status:     0x0000
> >   (Bus Powered)
> >
> > 2007/11/19, Michel Xhaard <mxhaard at magic.fr>:
> > > Le Lundi 19 Novembre 2007 19:31, Olivier Revelin a ?crit:
> > > > I'm trying to get this webcam working :
> > > >
> > > > Bus 007 Device 003: ID 041e:4055 Creative Technology, Ltd
> > > >
> > > > This ID (4055) is found on various forum threads / mail archives and
> no
> > > > clue about what driver to use (I tried gspca, uvc, pwc, .... every
> > >
> > > single
> > >
> > > > driver I could lay my hands on).
> > > > Some threads end with a "wait and see"  style note. I had a lot of
> > > > hopes when I saw that a lot of webcams with IDs very close to this
> one
> > > > were supported, but I guess I'm out of luck.
> > > >
> > > > Is there any way I could provide some help for any driver project
> out
> > >
> > > there
> > >
> > > > ? Provide a USB sniff dump on Windows ?
> > > >
> > > > Thank you
> > > >
> > > > Kind regards,
> > >
> > > Olivier,
> > > Maybe this driver can support your webcam
> > > https://sourceforge.net/projects/m560x-driver/
> > > regards
> > > --
> > > Michel Xhaard
> > > http://mxhaard.free.fr
> This webcam seem set with a ALI M5603C
> --
> Michel Xhaard
> http://mxhaard.free.fr
>



-- 
Olivier Revelin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071120/59f15d13/attachment.html>

From sweetsalts at gmail.com  Tue Nov 20 07:09:08 2007
From: sweetsalts at gmail.com (ken)
Date: Tue, 20 Nov 2007 15:09:08 +0900
Subject: [Linux-uvc-devel] ELECOM UCAM-DLQ30(0ac8:0336)
Message-ID: <e8e4db9e0711192209l40535584qf012a566a3a0b5e1@mail.gmail.com>

Hello,

I'm trying to get ELECOM UCAM-DLQ30 working. But it doesn't work.
Any help for me?

Regards,
Ken

Info:
~/pub/uvccapture-0.4$ ./uvccapture -v
Using videodevice: /dev/video0
Saving images to: snap.jpg
Image size: 320x240
Taking snapshot every 0 seconds
Taking images using mmap
Unable to set format: 22.
 Init v4L2 failed !! exit fatal

ubuntu:~/pub/uvccapture-0.4$ sudo xawtv -hwscan
This is xawtv-3.95.dfsg.1, running on Linux/i686 (2.6.22-14-generic)
looking for available devices
port 73-73
    type : Xvideo, image scaler
    name : Intel(R) Video Overlay

/dev/video0: OK                         [ -device /dev/video0 ]
    type : v4l2
    name : USB 2.0 Camera
    flags:  capture

# lsusb -v -d 0ac8:0336

Bus 001 Device 003: ID 0ac8:0336 Z-Star Microelectronics Corp.
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x0ac8 Z-Star Microelectronics Corp.
  idProduct          0x0336
  bcdDevice            1.00
  iManufacturer           1 Solid Year
  iProduct                2 USB 2.0 Camera
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          581
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               2 USB 2.0 Camera
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              2 USB 2.0 Camera
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           79
        dwClockFrequency       24.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x0004000a
          Auto-Exposure Mode
          Exposure Time (Absolute)
          Privacy
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 2
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000177f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Gain
          Power Line Frequency
          White Balance Temperature, Auto
        iProcessing             0
        bmVideoStandards     0x 9
          None
          SECAM - 625/50
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               2
        iTerminal               0
      VideoControl Interface Descriptor:
        bLength                28
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {a917c75d-4119-11da-ae0e-000d56ac7b4c}
        bNumControl            13
        bNrPins                 1
        baSourceID( 0)          1
        bControlSize            3
        bmControls( 0)       0xf9
        bmControls( 1)       0x1f
        bmControls( 2)       0x18
        iExtension              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x000a  1x 10 bytes
        bInterval               5
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormarts                        1
        wTotalLength                    33281
        bEndPointAddress                    0
        bmInfo                              3
        bTerminalLink                       2
        bStillCaptureMethod                 1
        bTriggerSupport                     1
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                5
        guidFormat                            {32595559-0000-0010-8000-00aa00389
b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            54
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                 24576000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  7
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666667
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           1333333
        dwFrameInterval( 6)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            54
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                 24576000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  7
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666667
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           1333333
        dwFrameInterval( 6)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            54
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                 24576000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  7
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666667
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           1333333
        dwFrameInterval( 6)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            54
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                 24576000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  7
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666667
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           1333333
        dwFrameInterval( 6)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            54
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                 24576000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  7
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666667
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           1333333
        dwFrameInterval( 6)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            26
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               5
        wWidth( 0)                        640
        wHeight( 0)                       480
        wWidth( 1)                        352
        wHeight( 1)                       288
        wWidth( 2)                        320
        wHeight( 2)                       240
        wWidth( 3)                        176
        wHeight( 3)                       144
        wWidth( 4)                        160
        wHeight( 4)                       120
        bNumCompressionPatterns             5
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     0 (Unspecified)
        bTransferCharacteristics            0 (Unspecified)
        bMatrixCoefficients                 0 (Unspecified)
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0400  1x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b00  2x 768 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0c00  2x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1380  3x 896 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       7
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 0 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)


From laurent.pinchart at skynet.be  Tue Nov 20 14:19:03 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 20 Nov 2007 14:19:03 +0100
Subject: [Linux-uvc-devel] ELECOM UCAM-DLQ30(0ac8:0336)
In-Reply-To: <e8e4db9e0711192209l40535584qf012a566a3a0b5e1@mail.gmail.com>
References: <e8e4db9e0711192209l40535584qf012a566a3a0b5e1@mail.gmail.com>
Message-ID: <200711201419.03635.laurent.pinchart@skynet.be>

Hi Ken,

On Tuesday 20 November 2007 07:09, ken wrote:
> Hello,
>
> I'm trying to get ELECOM UCAM-DLQ30 working. But it doesn't work.
> Any help for me?
>
> Regards,
> Ken
>
> Info:
> ~/pub/uvccapture-0.4$ ./uvccapture -v
> Using videodevice: /dev/video0
> Saving images to: snap.jpg
> Image size: 320x240
> Taking snapshot every 0 seconds
> Taking images using mmap
> Unable to set format: 22.
>  Init v4L2 failed !! exit fatal

Your camera doesn't support MJPEG. Try

uvccapture -m

Best regards,

Laurent Pinchart


From ryan at linuxbox.com  Tue Nov 20 17:00:37 2007
From: ryan at linuxbox.com (Ryan Jud Hughes)
Date: Tue, 20 Nov 2007 11:00:37 -0500 (EST)
Subject: [Linux-uvc-devel] Bus 007 Device 002: ID 17ef:1004 ChipsBnk
 (fwd)
In-Reply-To: <200711070056.22411.laurent.pinchart@skynet.be>
References: <alpine.DEB.0.99.0711051328300.27747@galaxor.private.linuxbox.com>
	<200711070056.22411.laurent.pinchart@skynet.be>
Message-ID: <alpine.DEB.0.99.0711201057100.10111@galaxor>

Hi.  I just ran a few updates and now my camera works.  I think I was 
having usb problems.  (from this, I discovered that it is an incredibly 
shitty camera, but that's beside the point).  It works just fine in 
luvcview and in cheese.

Now here's the ekiga output with -d 4.  I see a camera with plugin v4l, 
but isn't mine only v4l2?  Maybe I'm wrong.

In a dialogue box, it says "Your video driver doesn't support the 
requested video format."

Nothing suspicious is in my /var/log/syslog.

Thanks.
--Ryan

Here's the ekiga -d 4 output.

2007/11/20 10:54:34.932   0:00.651                        ekiga Detected 
audio plugins: ALSA

2007/11/20 10:54:34.932   0:00.651                        ekiga Detected 
video plugins: Picture,V4L2,V4L

2007/11/20 10:54:34.932   0:00.651                        ekiga Detected 
audio plugins: ALSA

2007/11/20 10:54:34.932   0:00.651                        ekiga Detected 
video plugins: Picture,V4L2,V4L

2007/11/20 10:54:35.258   0:00.978                        ekiga Detected 
the following audio input devices: Default,HDA Intel with plugin ALSA

2007/11/20 10:54:35.259   0:00.978                        ekiga Detected 
the following audio output devices: Default,HDA Intel with plugin ALSA

2007/11/20 10:54:35.259   0:00.978                        ekiga Detected 
the following video input devices: Integrated Camera with plugin V4L

2007/11/20 10:54:35.259   0:00.978                        ekiga Detected 
the following audio input devices: Default,HDA Intel with plugin ALSA

2007/11/20 10:54:35.259   0:00.978                        ekiga Detected 
the following audio output devices: Default,HDA Intel with plugin ALSA

2007/11/20 10:54:35.259   0:00.978                        ekiga Detected 
the following video input devices: Integrated Camera with plugin V4L

2007/11/20 10:54:35.576   0:01.295                        ekiga Ekiga 
version 2.0.11

2007/11/20 10:54:35.576   0:01.295                        ekiga OPAL 
version 2.2.11

2007/11/20 10:54:35.576   0:01.295                        ekiga PWLIB 
version 1.10.10

2007/11/20 10:54:35.576   0:01.295                        ekiga GNOME 
support enabled

2007/11/20 10:54:35.576   0:01.295                        ekiga Fullscreen 
support enabled

2007/11/20 10:54:35.576   0:01.295                        ekiga DBUS 
support enabled

2007/11/20 10:54:35.580   0:01.299                        ekiga Set TCP 
port range to 30000:30010

2007/11/20 10:54:35.580   0:01.299                        ekiga Set RTP 
port range to 5000:5059

2007/11/20 10:54:35.580   0:01.299                        ekiga Set UDP 
port range to 5060:5100

2007/11/20 10:54:36.024   0:01.743                        ekiga AVAHI 
Adding service Ryan Hughes



On Wed, 7 Nov 2007, Laurent Pinchart wrote:

> Hi Ryan,
>
> On Monday 05 November 2007, Ryan Jud Hughes wrote:
>> Hi.  I just got a ThinkPad R61.  It has a usb webcam which does not seem to
>> work.  It's using the uvc module, so I thought this would be the place.
>>
>> The output from lsusb is the subject of this message.  Here's the output of
>> a few apps:
>>
>> ____ Application:  xawtv (shows black screen) ____
>> This is xawtv-3.95.dfsg.1, running on Linux/x86_64 (2.6.22-14-generic)
>> WARNING: Your X-Server has no DGA support.
>> /dev/video0 [v4l2]: no overlay support
>> v4l-conf had some trouble, trying to continue anyway
>> Warning: Cannot convert string "-*-ledfixed-medium-r-*--39-*-*-*-c-*-*-*"
>> to type FontStruct
>> ioctl: VIDIOC_G_STD(std=0x7fff98783514
>> [PAL_G,PAL_I,PAL_M,PAL_Nc,NTSC_M,NTSC_M_JP,SECAM_H,SECAM_K,SECAM_K1,SECAM_L
>> ,(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null
>> ),(null),(null),(null),(null),(null),(null),(null)]): Invalid argument
>> ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument
>> ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0
>> [];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.s
>> econds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0
>> ;memory=unknown): Invalid argument
>
> Xawtv 3.95 is known not to work. You could try upgrading to the 4 beta
> version.
>
>> ____ Application:  gqcam ____
>> Segmentation Fault
>>
>> ____ Application: luvcview ____
>> luvcview version 0.2.1
>> Video driver: x11
>> A window manager is available
>> video /dev/video0
>> Unable to set format: 22.
>>   Init v4L2 failed !! exit fatal
>>
>
> Pretty normal if your webcam support yuv only.
>
>> ____ Application:  luvcview -f yuv ____
>> Shows an image, which is attached.
>
> That's bad :-/ Do you get any suspicious message in the kernel log when
> running luvcview -f yuv ? Try to set the trace level to 128 ('modprobe
> uvcvideo trace=128' or 'echo 128 > /sys/modules/uvcvideo/parameters/trace')
> and see if you get any "Dropping payload" message (warning: this will flood
> your kernel log).
>
>> ____ Application:  cheese ____
>>
>> ** Message: Probing the webcam, please ignore the following, not
>> applicabable tries
>> ** Message: test pipeline for v4l2src failed:
>> Failed to construct test pipeline for 'v4l2src ! fakesink'
>> ** Message: Error running pipeline 'v4lsrc !
>> video/x-raw-rgb,width=640,height=480 ! fakesink': Could not get/set
>> settings from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm ():
>> /pipeline1/v4lsrc0:
>> Error setting the channel/norm settings: Invalid argument]
>> ** Message: test pipeline for v4lsrc failed:
>> [v4lsrc ! video/x-raw-rgb,width=640,height=480 ! fakesink]: Could not
>> get/set settings from/on resource.
>> ** Message: Error running pipeline 'v4lsrc !
>> video/x-raw-yuv,width=640,height=480 ! fakesink': Could not get/set
>> settings from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm ():
>> /pipeline2/v4lsrc1:
>> Error setting the channel/norm settings: Invalid argument]
>> ** Message: test pipeline for v4lsrc failed:
>> [v4lsrc ! video/x-raw-yuv,width=640,height=480 ! fakesink]: Could not
>> get/set settings from/on resource.
>> ** Message: Error running pipeline 'v4lsrc !
>> video/x-raw-rgb,width=320,height=240 ! fakesink': Could not get/set
>> settings from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm ():
>> /pipeline3/v4lsrc2:
>> Error setting the channel/norm settings: Invalid argument]
>> ** Message: test pipeline for v4lsrc failed:
>> [v4lsrc ! video/x-raw-rgb,width=320,height=240 ! fakesink]: Could not
>> get/set settings from/on resource.
>> ** Message: Error running pipeline 'v4lsrc !
>> video/x-raw-rgb,width=1280,height=960 ! fakesink': Could not get/set
>> settings from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm ():
>> /pipeline4/v4lsrc3:
>> Error setting the channel/norm settings: Invalid argument]
>> ** Message: test pipeline for v4lsrc failed:
>> [v4lsrc ! video/x-raw-rgb,width=1280,height=960 ! fakesink]: Could not
>> get/set settings from/on resource.
>> ** Message: Error running pipeline 'v4lsrc !
>> video/x-raw-rgb,width=174,height=144 ! fakesink': Could not get/set
>> settings from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm ():
>> /pipeline5/v4lsrc4:
>> Error setting the channel/norm settings: Invalid argument]
>> ** Message: test pipeline for v4lsrc failed:
>> [v4lsrc ! video/x-raw-rgb,width=174,height=144 ! fakesink]: Could not
>> get/set settings from/on resource.
>> ** Message: Error running pipeline 'v4lsrc !
>> video/x-raw-rgb,width=160,height=120 ! fakesink': Could not get/set
>> settings from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm ():
>> /pipeline6/v4lsrc5:
>> Error setting the channel/norm settings: Invalid argument]
>> ** Message: test pipeline for v4lsrc failed:
>> [v4lsrc ! video/x-raw-rgb,width=160,height=120 ! fakesink]: Could not
>> get/set settings from/on resource.
>> ** Message: Error running pipeline 'v4lsrc ! fakesink': Could not get/set
>> settings from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm ():
>> /pipeline7/v4lsrc6:
>> Error setting the channel/norm settings: Invalid argument]
>> ** Message: test pipeline for v4lsrc failed:
>> [v4lsrc ! fakesink]: Could not get/set settings from/on resource.
>> using source: videotestsrc
>
> I think there's a known issue with some gstreamer versions. Try searching the
> mailing list archive for more information.
>
> Best regards,
>
> Laurent Pinchart
>


From ryan at linuxbox.com  Tue Nov 20 17:05:56 2007
From: ryan at linuxbox.com (Ryan Jud Hughes)
Date: Tue, 20 Nov 2007 11:05:56 -0500 (EST)
Subject: [Linux-uvc-devel] Bus 007 Device 002: ID 17ef:1004 ChipsBnk
 (fwd)
In-Reply-To: <alpine.DEB.0.99.0711201057100.10111@galaxor>
References: <alpine.DEB.0.99.0711051328300.27747@galaxor.private.linuxbox.com>
	<200711070056.22411.laurent.pinchart@skynet.be>
	<alpine.DEB.0.99.0711201057100.10111@galaxor>
Message-ID: <alpine.DEB.0.99.0711201105180.10111@galaxor>

Oh, never mind.  I just had ekiga misconfigured.  I went to the edit 
preferences and changed the video plugin to v4l2 and the format to pal and 
I was good.

Thank you very much!
--Ryan

On Tue, 20 Nov 2007, Ryan Jud Hughes wrote:

> Hi.  I just ran a few updates and now my camera works.  I think I was
> having usb problems.  (from this, I discovered that it is an incredibly
> shitty camera, but that's beside the point).  It works just fine in
> luvcview and in cheese.
>
> Now here's the ekiga output with -d 4.  I see a camera with plugin v4l,
> but isn't mine only v4l2?  Maybe I'm wrong.
>
> In a dialogue box, it says "Your video driver doesn't support the
> requested video format."
>
> Nothing suspicious is in my /var/log/syslog.
>
> Thanks.
> --Ryan
>
> Here's the ekiga -d 4 output.
>
> 2007/11/20 10:54:34.932   0:00.651                        ekiga Detected
> audio plugins: ALSA
>
> 2007/11/20 10:54:34.932   0:00.651                        ekiga Detected
> video plugins: Picture,V4L2,V4L
>
> 2007/11/20 10:54:34.932   0:00.651                        ekiga Detected
> audio plugins: ALSA
>
> 2007/11/20 10:54:34.932   0:00.651                        ekiga Detected
> video plugins: Picture,V4L2,V4L
>
> 2007/11/20 10:54:35.258   0:00.978                        ekiga Detected
> the following audio input devices: Default,HDA Intel with plugin ALSA
>
> 2007/11/20 10:54:35.259   0:00.978                        ekiga Detected
> the following audio output devices: Default,HDA Intel with plugin ALSA
>
> 2007/11/20 10:54:35.259   0:00.978                        ekiga Detected
> the following video input devices: Integrated Camera with plugin V4L
>
> 2007/11/20 10:54:35.259   0:00.978                        ekiga Detected
> the following audio input devices: Default,HDA Intel with plugin ALSA
>
> 2007/11/20 10:54:35.259   0:00.978                        ekiga Detected
> the following audio output devices: Default,HDA Intel with plugin ALSA
>
> 2007/11/20 10:54:35.259   0:00.978                        ekiga Detected
> the following video input devices: Integrated Camera with plugin V4L
>
> 2007/11/20 10:54:35.576   0:01.295                        ekiga Ekiga
> version 2.0.11
>
> 2007/11/20 10:54:35.576   0:01.295                        ekiga OPAL
> version 2.2.11
>
> 2007/11/20 10:54:35.576   0:01.295                        ekiga PWLIB
> version 1.10.10
>
> 2007/11/20 10:54:35.576   0:01.295                        ekiga GNOME
> support enabled
>
> 2007/11/20 10:54:35.576   0:01.295                        ekiga Fullscreen
> support enabled
>
> 2007/11/20 10:54:35.576   0:01.295                        ekiga DBUS
> support enabled
>
> 2007/11/20 10:54:35.580   0:01.299                        ekiga Set TCP
> port range to 30000:30010
>
> 2007/11/20 10:54:35.580   0:01.299                        ekiga Set RTP
> port range to 5000:5059
>
> 2007/11/20 10:54:35.580   0:01.299                        ekiga Set UDP
> port range to 5060:5100
>
> 2007/11/20 10:54:36.024   0:01.743                        ekiga AVAHI
> Adding service Ryan Hughes
>
>
>
> On Wed, 7 Nov 2007, Laurent Pinchart wrote:
>
>> Hi Ryan,
>>
>> On Monday 05 November 2007, Ryan Jud Hughes wrote:
>>> Hi.  I just got a ThinkPad R61.  It has a usb webcam which does not seem to
>>> work.  It's using the uvc module, so I thought this would be the place.
>>>
>>> The output from lsusb is the subject of this message.  Here's the output of
>>> a few apps:
>>>
>>> ____ Application:  xawtv (shows black screen) ____
>>> This is xawtv-3.95.dfsg.1, running on Linux/x86_64 (2.6.22-14-generic)
>>> WARNING: Your X-Server has no DGA support.
>>> /dev/video0 [v4l2]: no overlay support
>>> v4l-conf had some trouble, trying to continue anyway
>>> Warning: Cannot convert string "-*-ledfixed-medium-r-*--39-*-*-*-c-*-*-*"
>>> to type FontStruct
>>> ioctl: VIDIOC_G_STD(std=0x7fff98783514
>>> [PAL_G,PAL_I,PAL_M,PAL_Nc,NTSC_M,NTSC_M_JP,SECAM_H,SECAM_K,SECAM_K1,SECAM_L
>>> ,(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null
>>> ),(null),(null),(null),(null),(null),(null),(null)]): Invalid argument
>>> ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument
>>> ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0
>>> [];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.s
>>> econds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0
>>> ;memory=unknown): Invalid argument
>>
>> Xawtv 3.95 is known not to work. You could try upgrading to the 4 beta
>> version.
>>
>>> ____ Application:  gqcam ____
>>> Segmentation Fault
>>>
>>> ____ Application: luvcview ____
>>> luvcview version 0.2.1
>>> Video driver: x11
>>> A window manager is available
>>> video /dev/video0
>>> Unable to set format: 22.
>>>   Init v4L2 failed !! exit fatal
>>>
>>
>> Pretty normal if your webcam support yuv only.
>>
>>> ____ Application:  luvcview -f yuv ____
>>> Shows an image, which is attached.
>>
>> That's bad :-/ Do you get any suspicious message in the kernel log when
>> running luvcview -f yuv ? Try to set the trace level to 128 ('modprobe
>> uvcvideo trace=128' or 'echo 128 > /sys/modules/uvcvideo/parameters/trace')
>> and see if you get any "Dropping payload" message (warning: this will flood
>> your kernel log).
>>
>>> ____ Application:  cheese ____
>>>
>>> ** Message: Probing the webcam, please ignore the following, not
>>> applicabable tries
>>> ** Message: test pipeline for v4l2src failed:
>>> Failed to construct test pipeline for 'v4l2src ! fakesink'
>>> ** Message: Error running pipeline 'v4lsrc !
>>> video/x-raw-rgb,width=640,height=480 ! fakesink': Could not get/set
>>> settings from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm ():
>>> /pipeline1/v4lsrc0:
>>> Error setting the channel/norm settings: Invalid argument]
>>> ** Message: test pipeline for v4lsrc failed:
>>> [v4lsrc ! video/x-raw-rgb,width=640,height=480 ! fakesink]: Could not
>>> get/set settings from/on resource.
>>> ** Message: Error running pipeline 'v4lsrc !
>>> video/x-raw-yuv,width=640,height=480 ! fakesink': Could not get/set
>>> settings from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm ():
>>> /pipeline2/v4lsrc1:
>>> Error setting the channel/norm settings: Invalid argument]
>>> ** Message: test pipeline for v4lsrc failed:
>>> [v4lsrc ! video/x-raw-yuv,width=640,height=480 ! fakesink]: Could not
>>> get/set settings from/on resource.
>>> ** Message: Error running pipeline 'v4lsrc !
>>> video/x-raw-rgb,width=320,height=240 ! fakesink': Could not get/set
>>> settings from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm ():
>>> /pipeline3/v4lsrc2:
>>> Error setting the channel/norm settings: Invalid argument]
>>> ** Message: test pipeline for v4lsrc failed:
>>> [v4lsrc ! video/x-raw-rgb,width=320,height=240 ! fakesink]: Could not
>>> get/set settings from/on resource.
>>> ** Message: Error running pipeline 'v4lsrc !
>>> video/x-raw-rgb,width=1280,height=960 ! fakesink': Could not get/set
>>> settings from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm ():
>>> /pipeline4/v4lsrc3:
>>> Error setting the channel/norm settings: Invalid argument]
>>> ** Message: test pipeline for v4lsrc failed:
>>> [v4lsrc ! video/x-raw-rgb,width=1280,height=960 ! fakesink]: Could not
>>> get/set settings from/on resource.
>>> ** Message: Error running pipeline 'v4lsrc !
>>> video/x-raw-rgb,width=174,height=144 ! fakesink': Could not get/set
>>> settings from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm ():
>>> /pipeline5/v4lsrc4:
>>> Error setting the channel/norm settings: Invalid argument]
>>> ** Message: test pipeline for v4lsrc failed:
>>> [v4lsrc ! video/x-raw-rgb,width=174,height=144 ! fakesink]: Could not
>>> get/set settings from/on resource.
>>> ** Message: Error running pipeline 'v4lsrc !
>>> video/x-raw-rgb,width=160,height=120 ! fakesink': Could not get/set
>>> settings from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm ():
>>> /pipeline6/v4lsrc5:
>>> Error setting the channel/norm settings: Invalid argument]
>>> ** Message: test pipeline for v4lsrc failed:
>>> [v4lsrc ! video/x-raw-rgb,width=160,height=120 ! fakesink]: Could not
>>> get/set settings from/on resource.
>>> ** Message: Error running pipeline 'v4lsrc ! fakesink': Could not get/set
>>> settings from/on resource. [v4l_calls.c(409): gst_v4l_set_chan_norm ():
>>> /pipeline7/v4lsrc6:
>>> Error setting the channel/norm settings: Invalid argument]
>>> ** Message: test pipeline for v4lsrc failed:
>>> [v4lsrc ! fakesink]: Could not get/set settings from/on resource.
>>> using source: videotestsrc
>>
>> I think there's a known issue with some gstreamer versions. Try searching the
>> mailing list archive for more information.
>>
>> Best regards,
>>
>> Laurent Pinchart
>>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From laurent.pinchart at skynet.be  Tue Nov 20 23:47:50 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 20 Nov 2007 23:47:50 +0100
Subject: [Linux-uvc-devel] Bus 007 Device 002: ID 17ef:1004 ChipsBnk
	(fwd)
In-Reply-To: <alpine.DEB.0.99.0711201105180.10111@galaxor>
References: <alpine.DEB.0.99.0711051328300.27747@galaxor.private.linuxbox.com>
	<alpine.DEB.0.99.0711201057100.10111@galaxor>
	<alpine.DEB.0.99.0711201105180.10111@galaxor>
Message-ID: <200711202347.51057.laurent.pinchart@skynet.be>

Hi Ryan,

On Tuesday 20 November 2007, Ryan Jud Hughes wrote:
> Oh, never mind.  I just had ekiga misconfigured.  I went to the edit
> preferences and changed the video plugin to v4l2 and the format to pal and
> I was good.
>
> Thank you very much!

You're welcome. I love problems that solve themselves without any work from my 
side :-)

Could you please send me the output of

lsusb -v -d 17ef:1004

with usbutils 0.72 or newer ? I'll then add the camera to the supported 
devices list.

Best regards,

Laurent Pinchart


From sweetsalts at gmail.com  Wed Nov 21 11:49:26 2007
From: sweetsalts at gmail.com (ken)
Date: Wed, 21 Nov 2007 19:49:26 +0900
Subject: [Linux-uvc-devel] ELECOM UCAM-DLQ30(0ac8:0336)
In-Reply-To: <200711201419.03635.laurent.pinchart@skynet.be>
References: <e8e4db9e0711192209l40535584qf012a566a3a0b5e1@mail.gmail.com>
	<200711201419.03635.laurent.pinchart@skynet.be>
Message-ID: <e8e4db9e0711210249w51ab775dyee015e7819bb74d6@mail.gmail.com>

Hi Laurent,

I succeeded it.

Thank you!

Ken

2007/11/20, Laurent Pinchart <laurent.pinchart at skynet.be>:
> Hi Ken,
>
> On Tuesday 20 November 2007 07:09, ken wrote:
> > Hello,
> >
> > I'm trying to get ELECOM UCAM-DLQ30 working. But it doesn't work.
> > Any help for me?
> >
> > Regards,
> > Ken
> >
> > Info:
> > ~/pub/uvccapture-0.4$ ./uvccapture -v
> > Using videodevice: /dev/video0
> > Saving images to: snap.jpg
> > Image size: 320x240
> > Taking snapshot every 0 seconds
> > Taking images using mmap
> > Unable to set format: 22.
> >  Init v4L2 failed !! exit fatal
>
> Your camera doesn't support MJPEG. Try
>
> uvccapture -m
>
> Best regards,
>
> Laurent Pinchart
>


From mrechberger at gmail.com  Wed Nov 21 17:08:46 2007
From: mrechberger at gmail.com (Markus Rechberger)
Date: Wed, 21 Nov 2007 17:08:46 +0100
Subject: [Linux-uvc-devel] RFC: suspend/resume and randomly stopping stream,
	latest mplayer
Message-ID: <d9def9db0711210808p20f3623ew69125e1b9bb83df2@mail.gmail.com>

Hi,

1.)
I had a closer look at susend/resuming and the uvcdriver on my notebook.
After resuming the driver is unable to read some registers, the
usbsubsystem always returns -EPROTO (-71).
Adding a softreset to the resume handler fixes this issue.
The system still doesn't resume if a videoapplication is open (I'll do
some further work on that).
(the msleep isn't required)

2.)
mplayer requires an ENUMSTD ioctl, afterwards mplayer tv:// -tv
driver=v4l2 just works fine.

3.)
the stream randomly stops on that notebook for some reason. ignoring
the errors in the callback handler seems to work fine. This especially
happens if I disconnect a usb storage device which hangs on the same
hub. Maybe adding a module param to ignore those return values as a
hack would be acceptable?

thanks for all the work,
Markus
-------------- next part --------------
A non-text attachment was scrubbed...
Name: uvcvideo.diff
Type: text/x-patch
Size: 1941 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071121/0d3e0492/attachment.bin>

From mrechberger at gmail.com  Wed Nov 21 17:15:43 2007
From: mrechberger at gmail.com (Markus Rechberger)
Date: Wed, 21 Nov 2007 17:15:43 +0100
Subject: [Linux-uvc-devel] RFC: suspend/resume and randomly stopping
	stream, latest mplayer
In-Reply-To: <d9def9db0711210808p20f3623ew69125e1b9bb83df2@mail.gmail.com>
References: <d9def9db0711210808p20f3623ew69125e1b9bb83df2@mail.gmail.com>
Message-ID: <d9def9db0711210815w65f20d2fo17dcb8f0c9387d13@mail.gmail.com>

On 11/21/07, Markus Rechberger <mrechberger at gmail.com> wrote:
> Hi,
>
> 1.)
> I had a closer look at susend/resuming and the uvcdriver on my notebook.
> After resuming the driver is unable to read some registers, the
> usbsubsystem always returns -EPROTO (-71).
> Adding a softreset to the resume handler fixes this issue.
> The system still doesn't resume if a videoapplication is open (I'll do
> some further work on that).
> (the msleep isn't required)
>

Here's a further discussion about the reset issue:
http://lkml.org/lkml/2007/11/20/433

> 2.)
> mplayer requires an ENUMSTD ioctl, afterwards mplayer tv:// -tv
> driver=v4l2 just works fine.
>
> 3.)
> the stream randomly stops on that notebook for some reason. ignoring
> the errors in the callback handler seems to work fine. This especially
> happens if I disconnect a usb storage device which hangs on the same
> hub. Maybe adding a module param to ignore those return values as a
> hack would be acceptable?
>
> thanks for all the work,
> Markus
>


From laurent.pinchart at skynet.be  Wed Nov 21 21:17:13 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 21 Nov 2007 21:17:13 +0100
Subject: [Linux-uvc-devel] RFC: suspend/resume and randomly stopping
	stream, latest mplayer
In-Reply-To: <d9def9db0711210808p20f3623ew69125e1b9bb83df2@mail.gmail.com>
References: <d9def9db0711210808p20f3623ew69125e1b9bb83df2@mail.gmail.com>
Message-ID: <200711212117.13558.laurent.pinchart@skynet.be>

Hi Markus,

On Wednesday 21 November 2007, Markus Rechberger wrote:
> Hi,
>
> 1.)
> I had a closer look at susend/resuming and the uvcdriver on my notebook.
> After resuming the driver is unable to read some registers, the
> usbsubsystem always returns -EPROTO (-71).
> Adding a softreset to the resume handler fixes this issue.
> The system still doesn't resume if a videoapplication is open (I'll do
> some further work on that).
> (the msleep isn't required)

This is a hack to solve a problem you ran into with specific hardware. Before 
applying it I'd like to know which hardware requires this hack (I suspect 
you're using the EM2760 chipset in an EeePC) and why the USB subsystem 
returns -EPROTO. Either the hardware is buggy and don't implement suspend, in 
which case we need a quirk, or the USB subsystem has some issue, in which 
case it should be fixed.

> 2.)
> mplayer requires an ENUMSTD ioctl, afterwards mplayer tv:// -tv
> driver=v4l2 just works fine.

mplayer tv:// -tv driver=v4l2:fps=25

should already work. As mentioned numerous times, VIDIOC_ENUMSTD don't make 
sense for webcams.

> 3.)
> the stream randomly stops on that notebook for some reason. ignoring
> the errors in the callback handler seems to work fine. This especially
> happens if I disconnect a usb storage device which hangs on the same
> hub. Maybe adding a module param to ignore those return values as a
> hack would be acceptable?

Your modifications to uvc_video.c and uvc_queue.c seem to both address this 
problem. Are they both required ? What error status do you get in the status 
and video completion handlers ? Does the driver mark some video buffers as 
erroneous ? If so, why ?

> thanks for all the work,

You're welcome, thanks for the report.

Best regards,

Laurent Pinchart


From mrechberger at gmail.com  Wed Nov 21 23:30:43 2007
From: mrechberger at gmail.com (Markus Rechberger)
Date: Wed, 21 Nov 2007 23:30:43 +0100
Subject: [Linux-uvc-devel] RFC: suspend/resume and randomly stopping
	stream, latest mplayer
In-Reply-To: <200711212117.13558.laurent.pinchart@skynet.be>
References: <d9def9db0711210808p20f3623ew69125e1b9bb83df2@mail.gmail.com>
	<200711212117.13558.laurent.pinchart@skynet.be>
Message-ID: <d9def9db0711211430m4c5465d5r6a29bf355a909ef0@mail.gmail.com>

Hi Laurent,

On 11/21/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> Hi Markus,
>
> On Wednesday 21 November 2007, Markus Rechberger wrote:
> > Hi,
> >
> > 1.)
> > I had a closer look at susend/resuming and the uvcdriver on my notebook.
> > After resuming the driver is unable to read some registers, the
> > usbsubsystem always returns -EPROTO (-71).
> > Adding a softreset to the resume handler fixes this issue.
> > The system still doesn't resume if a videoapplication is open (I'll do
> > some further work on that).
> > (the msleep isn't required)
>
> This is a hack to solve a problem you ran into with specific hardware.
> Before
> applying it I'd like to know which hardware requires this hack (I suspect
> you're using the EM2760 chipset in an EeePC) and why the USB subsystem
> returns -EPROTO. Either the hardware is buggy and don't implement suspend,
> in
> which case we need a quirk, or the USB subsystem has some issue, in which
> case it should be fixed.
>

I'm very sure it's not the device it's the usb controller which
doesn't follow the USB standards (surpricingly not the first time.. we
already had some other non standard usb controllers..)
It's up to you if you want to add it if those controllers would do
what they should it wouldn't be necessary.

> > 2.)
> > mplayer requires an ENUMSTD ioctl, afterwards mplayer tv:// -tv
> > driver=v4l2 just works fine.
>
> mplayer tv:// -tv driver=v4l2:fps=25
>
> should already work. As mentioned numerous times, VIDIOC_ENUMSTD don't make
> sense for webcams.
>

I took the latest svn uvcvideo driver and the latest mplayer svn sources.

> > 3.)
> > the stream randomly stops on that notebook for some reason. ignoring
> > the errors in the callback handler seems to work fine. This especially
> > happens if I disconnect a usb storage device which hangs on the same
> > hub. Maybe adding a module param to ignore those return values as a
> > hack would be acceptable?
>
> Your modifications to uvc_video.c and uvc_queue.c seem to both address this
> problem. Are they both required ? What error status do you get in the status
> and video completion handlers ? Does the driver mark some video buffers as
> erroneous ?

yes

> If so, why ?
>

it happens under load or if someone unplugs other usb devices (eg. usb
storage). It seems to be usb controller related again... finally the
idea of resetting the device came from the usb bulk storage driver
because it seems to work to connect 2 devices to that notebook. I
wouldn't mind to bind that specific quirk to that device although it
will happen with other devices too very likely since it's usb
controller dependent (also please note that this reset quirk is not
available for older kernels).

thanks,
Markus

> > thanks for all the work,
>
> You're welcome, thanks for the report.
>
> Best regards,
>
> Laurent Pinchart
>


-- 
http://www.couchsurfing.com/people/mrec


From herton at mandriva.com.br  Thu Nov 22 21:35:25 2007
From: herton at mandriva.com.br (Herton Ronaldo Krzesinski)
Date: Thu, 22 Nov 2007 18:35:25 -0200
Subject: [Linux-uvc-devel] Add quirk for ALi 5606 found on clevo M540SR
Message-ID: <200711221835.25394.herton@mandriva.com.br>

Hi,

When I try to use luvcview to test the webcam on clevo M540SR I get the 
following output:
$ ./luvcview
uvcview version 0.1.7
Video driver: x11
A window manager is available
video /dev/video0
Unable to set format: 5.
 Init v4L2 failed !! exit fatal

This the relevant entry of kernel log after trying luvcview:
uvcvideo: Failed to query (130) UVC control 1 (unit 0) : 2 (exp. 26).

I tried r88, r133, r141 and latest r143 from svn with same results.

Looking at the uvcvideo code, and making the following patch, I managed to 
make the builtin webcam work (luvcview successfuly started to capture frames
from the webcam):

Quirk for uvcvideo, needed by the webcam found on Clevo M540SR
(ALi 5606).

Signed-off-by: Herton Ronaldo Krzesinski <herton at mandriva.com>

--- linux-2.6.23.1-2mdv/3rdparty/uvc/uvc_driver.c.orig	2007-11-22 16:55:58.000000000 -0200
+++ linux-2.6.23.1-2mdv/3rdparty/uvc/uvc_driver.c	2007-11-22 17:12:57.000000000 -0200
@@ -1774,6 +1774,16 @@
 	  .bInterfaceProtocol	= 0,
 	  .driver_info		= UVC_QUIRK_PROBE_MINMAX
 	},
+	/* ALi USB 2.0 Camera 5606 */
+	{ .match_flags          = USB_DEVICE_ID_MATCH_DEVICE
+	                        | USB_DEVICE_ID_MATCH_INT_INFO,
+	  .idVendor             = 0x0402,
+	  .idProduct            = 0x5606,
+	  .bInterfaceClass      = USB_CLASS_VIDEO,
+	  .bInterfaceSubClass   = 1,
+	  .bInterfaceProtocol   = 0,
+	  .driver_info          = UVC_QUIRK_PROBE_MINMAX
+	},
 	/* Generic USB Video Class */
 	{ USB_INTERFACE_INFO(USB_CLASS_VIDEO, 1, 0) },
 	{}

If any more info is needed etc. please let me know. This is the lsusb output of the device:

Bus 005 Device 003: ID 0402:5606 ALi Corp. 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x0402 ALi Corp.
  idProduct          0x5606 
  bcdDevice            0.02
  iManufacturer           0 
  iProduct                1 USB2.0 Camera
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          704
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0 
      iFunction               1 USB2.0 Camera
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0 
      iInterface              1 USB2.0 Camera
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           84
        dwClockFrequency       30.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                17
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0 
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  2
        bmControls           0x00000000
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               6
        iTerminal               0 
      VideoControl Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      4 (SELECTOR_UNIT)
        bUnitID                 4
        bNrInPins               1
        baSource( 0)            1
        iSelector               0 
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 5
        bSourceID               4
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000053f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          Backlight Compensation
          Power Line Frequency
        iProcessing             0 
        bmVideoStandards     0x1b
          None
          NTSC - 525/60
          SECAM - 625/50
          NTSC - 625/50
      VideoControl Interface Descriptor:
        bLength                27
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 6
        guidExtensionCode         {a7974c56-a77e-4b90-8cbf-1c71ec303000}
        bNumControl            16
        bNrPins                 1
        baSourceID( 0)          5
        bControlSize            2
        bmControls( 0)       0xff
        bmControls( 1)       0xff
        iExtension              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              15
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      VideoStreaming Interface Descriptor:
        bLength                            15
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormarts                        2
        wTotalLength                    33026
        bEndPointAddress                    0
        bmInfo                              3
        bTerminalLink                       2
        bStillCaptureMethod                 1
        bTriggerSupport                     1
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    11
        bmaControls( 1)                    11
      VideoStreaming Interface Descriptor:
        bLength                            11
        bDescriptorType                    36
        bDescriptorSubtype                  6 (FORMAT_MJPEG)
        bFormatIndex                        1
        bNumFrameDescriptors                6
        bFlags                              1
          Fixed-size samples: Yes
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         1
        bmCapabilities                   0x01
          Still image supported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      921600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         2
        bmCapabilities                   0x01
          Still image supported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      230400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         3
        bmCapabilities                   0x01
          Still image supported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize       57600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         4
        bmCapabilities                   0x01
          Still image supported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      304128
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         5
        bmCapabilities                   0x01
          Still image supported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize       76032
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         6
        bmCapabilities                   0x01
          Still image supported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize     3932160
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  2
        dwFrameInterval( 0)            666666
        dwFrameInterval( 1)           1428571
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               6
        wWidth( 0)                        640
        wHeight( 0)                       480
        wWidth( 1)                        320
        wHeight( 1)                       240
        wWidth( 2)                        160
        wHeight( 2)                       120
        wWidth( 3)                        352
        wHeight( 3)                       288
        wWidth( 4)                        176
        wHeight( 4)                       144
        wWidth( 5)                       1280
        wHeight( 5)                      1024
        bNumCompressionPatterns             6
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        2
        bNumFrameDescriptors                6
        guidFormat                            {32595559-0000-0010-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x01
          Still image supported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x01
          Still image supported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      230400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x01
          Still image supported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize       57600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x01
          Still image supported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      304128
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x01
          Still image supported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize       76032
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x01
          Still image supported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize     3932160
        dwDefaultFrameInterval        1428571
        bFrameIntervalType                  1
        dwFrameInterval( 0)           1428571
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               6
        wWidth( 0)                        640
        wHeight( 0)                       480
        wWidth( 1)                        320
        wHeight( 1)                       240
        wWidth( 2)                        160
        wHeight( 2)                       120
        wWidth( 3)                        352
        wHeight( 3)                       288
        wWidth( 4)                        176
        wHeight( 4)                       144
        wWidth( 5)                       1280
        wHeight( 5)                      1024
        bNumCompressionPatterns             6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 0 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)

--
[]'s
Herton


From arakeis at free.fr  Fri Nov 23 11:33:26 2007
From: arakeis at free.fr (arakeis)
Date: Fri, 23 Nov 2007 11:33:26 +0100
Subject: [Linux-uvc-devel] uvc having hicups on integrated ricoh webcam :
	1839
Message-ID: <3338542a0711230233w70508824sba3127918674eb25@mail.gmail.com>

Hi all,

attached the result of lsusb -v on device,
dmesg output showing the pb :

> uvcvideo: Found UVC 1.00 device <unnamed> (05ca:1839)
> uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -32 (exp. 26).
> uvcvideo: Failed to query (129) UVC control 1 (unit 0) : -32 (exp. 26).
> uvcvideo: Failed to initialize the device (-5).
> usbcore: registered new interface driver uvcvideo


so the webcam seems to have some uvc compliant hook but fails to
initiate, firmware needed maybe ?

how can I help ?

more info on the device :

It is an ricoh webcam used on some vaio laptops : CR11 & CR21
I've seen while googleing around that it exists on some pacard bell laptops
as well.
tested on opensuse10.3 ( r117 )
I still have my vista partition so I can retrieve any drivers from it, if
needed.

-- 
arno
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071123/bc92aea4/attachment.html>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: lsusb.txt
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071123/bc92aea4/attachment.txt>

From i.am.a.tommyknocker at gmail.com  Fri Nov 23 15:44:44 2007
From: i.am.a.tommyknocker at gmail.com (tommy knocker)
Date: Fri, 23 Nov 2007 15:44:44 +0100
Subject: [Linux-uvc-devel] sn9c201 / 202
Message-ID: <83927e1e0711230644r6a39044dk8be54021cd3a7f9@mail.gmail.com>

Hi,

any news about sn9c201/202 driver?

Latest relevant messages on this list are

https://lists.berlios.de/pipermail/linux-uvc-devel/2007-January/001191.html
https://lists.berlios.de/pipermail/linux-uvc-devel/2007-March/001459.html

both by Michel Xhaard.

Cheers!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071123/7964e4c9/attachment.html>

From laurent.pinchart at skynet.be  Sat Nov 24 16:44:27 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 24 Nov 2007 16:44:27 +0100
Subject: [Linux-uvc-devel] Add quirk for ALi 5606 found on clevo M540SR
In-Reply-To: <200711221835.25394.herton@mandriva.com.br>
References: <200711221835.25394.herton@mandriva.com.br>
Message-ID: <200711241644.27763.laurent.pinchart@skynet.be>

Hi Herton,

On Thursday 22 November 2007, Herton Ronaldo Krzesinski wrote:
> Hi,
>
> When I try to use luvcview to test the webcam on clevo M540SR I get the
> following output:
> $ ./luvcview
> uvcview version 0.1.7
> Video driver: x11
> A window manager is available
> video /dev/video0
> Unable to set format: 5.
>  Init v4L2 failed !! exit fatal
>
> This the relevant entry of kernel log after trying luvcview:
> uvcvideo: Failed to query (130) UVC control 1 (unit 0) : 2 (exp. 26).
>
> I tried r88, r133, r141 and latest r143 from svn with same results.
>
> Looking at the uvcvideo code, and making the following patch, I managed to
> make the builtin webcam work (luvcview successfuly started to capture
> frames from the webcam):
>
> Quirk for uvcvideo, needed by the webcam found on Clevo M540SR
> (ALi 5606).
>
> Signed-off-by: Herton Ronaldo Krzesinski <herton at mandriva.com>

Committed, thanks a lot.

[snip]

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Nov 24 16:56:21 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 24 Nov 2007 16:56:21 +0100
Subject: [Linux-uvc-devel] uvc having hicups on integrated ricoh webcam
	: 1839
In-Reply-To: <3338542a0711230233w70508824sba3127918674eb25@mail.gmail.com>
References: <3338542a0711230233w70508824sba3127918674eb25@mail.gmail.com>
Message-ID: <200711241656.21351.laurent.pinchart@skynet.be>

Hi,

On Friday 23 November 2007, arakeis wrote:
> Hi all,
>
> attached the result of lsusb -v on device,
>
> dmesg output showing the pb :
> > uvcvideo: Found UVC 1.00 device <unnamed> (05ca:1839)
> > uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -32 (exp. 26).
> > uvcvideo: Failed to query (129) UVC control 1 (unit 0) : -32 (exp. 26).
> > uvcvideo: Failed to initialize the device (-5).
> > usbcore: registered new interface driver uvcvideo
>
> so the webcam seems to have some uvc compliant hook but fails to
> initiate, firmware needed maybe ?

I think that's right. Previous Ricoh webcams were not completely USB 
compliant. Sam Revitch wrote a specific driver called r5u870 that handles 
firmware loading as well as device-specific requests. You should have a look 
at it.

> how can I help ?
>
> more info on the device :
>
> It is an ricoh webcam used on some vaio laptops : CR11 & CR21
> I've seen while googleing around that it exists on some pacard bell laptops
> as well.
> tested on opensuse10.3 ( r117 )
> I still have my vista partition so I can retrieve any drivers from it, if
> needed.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Nov 24 17:11:10 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 24 Nov 2007 17:11:10 +0100
Subject: [Linux-uvc-devel] RFC: suspend/resume and randomly stopping
	stream, latest mplayer
In-Reply-To: <d9def9db0711211430m4c5465d5r6a29bf355a909ef0@mail.gmail.com>
References: <d9def9db0711210808p20f3623ew69125e1b9bb83df2@mail.gmail.com>
	<200711212117.13558.laurent.pinchart@skynet.be>
	<d9def9db0711211430m4c5465d5r6a29bf355a909ef0@mail.gmail.com>
Message-ID: <200711241711.10581.laurent.pinchart@skynet.be>

On Wednesday 21 November 2007, Markus Rechberger wrote:
> Hi Laurent,
>
> On 11/21/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > Hi Markus,
> >
> > On Wednesday 21 November 2007, Markus Rechberger wrote:
> > > Hi,
> > >
> > > 1.)
> > > I had a closer look at susend/resuming and the uvcdriver on my
> > > notebook. After resuming the driver is unable to read some registers,
> > > the usbsubsystem always returns -EPROTO (-71).
> > > Adding a softreset to the resume handler fixes this issue.
> > > The system still doesn't resume if a videoapplication is open (I'll do
> > > some further work on that).
> > > (the msleep isn't required)
> >
> > This is a hack to solve a problem you ran into with specific hardware.
> > Before
> > applying it I'd like to know which hardware requires this hack (I suspect
> > you're using the EM2760 chipset in an EeePC) and why the USB subsystem
> > returns -EPROTO. Either the hardware is buggy and don't implement
> > suspend, in
> > which case we need a quirk, or the USB subsystem has some issue, in which
> > case it should be fixed.
>
> I'm very sure it's not the device it's the usb controller which
> doesn't follow the USB standards (surpricingly not the first time.. we
> already had some other non standard usb controllers..)
> It's up to you if you want to add it if those controllers would do
> what they should it wouldn't be necessary.

If that's true I'm not sure how to handle the issue. The workaround is only 
needed for the EeePC USB controller. I don't want to apply your patch as-is 
as it would affect all USB controllers.

> > > 2.)
> > > mplayer requires an ENUMSTD ioctl, afterwards mplayer tv:// -tv
> > > driver=v4l2 just works fine.
> >
> > mplayer tv:// -tv driver=v4l2:fps=25
> >
> > should already work. As mentioned numerous times, VIDIOC_ENUMSTD don't
> > make sense for webcams.
>
> I took the latest svn uvcvideo driver and the latest mplayer svn sources.

mplayer tv:// -tv driver=v4l2:fps=25

works here.

> > > 3.)
> > > the stream randomly stops on that notebook for some reason. ignoring
> > > the errors in the callback handler seems to work fine. This especially
> > > happens if I disconnect a usb storage device which hangs on the same
> > > hub. Maybe adding a module param to ignore those return values as a
> > > hack would be acceptable?
> >
> > Your modifications to uvc_video.c and uvc_queue.c seem to both address
> > this problem. Are they both required ? What error status do you get in
> > the status and video completion handlers ? Does the driver mark some
> > video buffers as erroneous ?
>
> yes

What error status do you get in the status and video completion handlers ?
Does the driver mark some video buffers as erroneous ? If so, why ? You can 
get more information by raising the trace level and looking in the kernel 
log.

> > If so, why ?
>
> it happens under load or if someone unplugs other usb devices (eg. usb
> storage). It seems to be usb controller related again... finally the
> idea of resetting the device came from the usb bulk storage driver
> because it seems to work to connect 2 devices to that notebook. I
> wouldn't mind to bind that specific quirk to that device although it
> will happen with other devices too very likely since it's usb
> controller dependent (also please note that this reset quirk is not
> available for older kernels).

If the USB controller is at fault, I see no point in adding a reset quirk in 
the UVC driver. This should be handled at the USB host controller level with 
a controller-specific quirk.

Best regards,

Laurent Pinchart


From samir.i at myrealbox.com  Mon Nov 26 10:40:48 2007
From: samir.i at myrealbox.com (Samir Ibradzic)
Date: Mon, 26 Nov 2007 18:40:48 +0900
Subject: [Linux-uvc-devel] Sanyo au W33SA cellphone web-cam support?
Message-ID: <474A94A0.7070302@myrealbox.com>


Hello there, this is my first post here (& ever on berilos), sorry for 
any inconvenience & ignorance...

I have this cellphone whose camera can work as UVC device (at least in 
windows it does). Have been playing a bit with uvcvideo driver, but this 
camera doesn't seem to be supported (tried builds 141 & 147)...

Thank you for all UVC supporting efforts!

Btw, what is the meaning of 'Failed to initialize the device (-5).' ?


here's dmesg info;

[ 5954.620000] usb 2-1: new full speed USB device using uhci_hcd and 
address 11
[ 5954.796000] usb 2-1: configuration #1 chosen from 1 choice
[ 5954.800000] uvcvideo: Probing generic UVC device 1
[ 5954.800000] uvcvideo: Found format MJPEG.
[ 5954.800000] uvcvideo: - 320x240 (15.0 fps)
[ 5954.800000] uvcvideo: Found UVC 1.10 device au W33SA (0474:0722)
[ 5954.800000] uvcvideo: Scanning UVC chain: OT 3 <- PU 2 <- IT 1
[ 5954.800000] uvcvideo: Found a valid video chain (1 -> 3).
[ 5954.804000] uvcvideo: Failed to query (135) UVC control 1 (unit 0) : 
-32 (exp. 34).
[ 5954.804000] uvcvideo: Failed to query (129) UVC control 1 (unit 0) : 
-32 (exp. 34).
[ 5954.804000] uvcvideo: Failed to initialize the device (-5).


and also lsusb
$ lsusb -v -d 0474:0722

Bus 002 Device 008: ID 0474:0722 Sanyo Electric Co., Ltd
Device Descriptor:
   bLength                18
   bDescriptorType         1
   bcdUSB               2.00
   bDeviceClass          239 Miscellaneous Device
   bDeviceSubClass         2 Common Class
   bDeviceProtocol         1 Interface Association
   bMaxPacketSize0        64
   idVendor           0x0474 Sanyo Electric Co., Ltd
   idProduct          0x0722
   bcdDevice            0.00
   iManufacturer           1 SANYO Electric Co.,Ltd.
   iProduct                2 au W33SA
   iSerial                 3 000000000001
   bNumConfigurations      1
   Configuration Descriptor:
     bLength                 9
     bDescriptorType         2
     wTotalLength          155
     bNumInterfaces          2
     bConfigurationValue     1
     iConfiguration          0
     bmAttributes         0xc0
       Self Powered
     MaxPower                0mA
     Interface Association:
       bLength                 8
       bDescriptorType        11
       bFirstInterface         0
       bInterfaceCount         2
       bFunctionClass         14 Video
       bFunctionSubClass       3 Video Interface Collection
       bFunctionProtocol       0
       iFunction               2 au W33SA
     Interface Descriptor:
       bLength                 9
       bDescriptorType         4
       bInterfaceNumber        0
       bAlternateSetting       0
       bNumEndpoints           0
       bInterfaceClass        14 Video
       bInterfaceSubClass      1 Video Control
       bInterfaceProtocol      0
       iInterface              2 au W33SA
       VideoControl Interface Descriptor:
         bLength                13
         bDescriptorType        36
         bDescriptorSubtype      1 (HEADER)
         bcdUVC               1.0a
         wTotalLength           50
         dwClockFrequency        0.001000MHz
         bInCollection           1
         baInterfaceNr( 0)       1
       VideoControl Interface Descriptor:
         bLength                17
         bDescriptorType        36
         bDescriptorSubtype      2 (INPUT_TERMINAL)
         bTerminalID             1
         wTerminalType      0x0201 Camera Sensor
         bAssocTerminal          0
         iTerminal               0
         wObjectiveFocalLengthMin      0
         wObjectiveFocalLengthMax      0
         wOcularFocalLength            0
         bControlSize                  2
         bmControls           0x00000000
       VideoControl Interface Descriptor:
         bLength                11
         bDescriptorType        36
         bDescriptorSubtype      5 (PROCESSING_UNIT)
       Warning: Descriptor too short
         bUnitID                 2
         bSourceID               1
         wMaxMultiplier          0
         bControlSize            2
         bmControls     0x00000000
         iProcessing             0
         bmVideoStandards     0x 9
           None
           SECAM - 625/50
       VideoControl Interface Descriptor:
         bLength                 9
         bDescriptorType        36
         bDescriptorSubtype      3 (OUTPUT_TERMINAL)
         bTerminalID             3
         wTerminalType      0x0101 USB Streaming
         bAssocTerminal          0
         bSourceID               2
         iTerminal               0
     Interface Descriptor:
       bLength                 9
       bDescriptorType         4
       bInterfaceNumber        1
       bAlternateSetting       0
       bNumEndpoints           1
       bInterfaceClass        14 Video
       bInterfaceSubClass      2 Video Streaming
       bInterfaceProtocol      0
       iInterface              2 au W33SA
       VideoStreaming Interface Descriptor:
         bLength                            14
         bDescriptorType                    36
         bDescriptorSubtype                  1 (INPUT_HEADER)
         bNumFormarts                        1
         wTotalLength                    33536
         bEndPointAddress                    0
         bmInfo                              3
         bTerminalLink                       1
         bStillCaptureMethod                 0
         bTriggerSupport                     0
         bTriggerUsage                       1
         bControlSize                        1
         bmaControls( 0)                    11
       VideoStreaming Interface Descriptor:
         bLength                            11
         bDescriptorType                    36
         bDescriptorSubtype                  6 (FORMAT_MJPEG)
         bFormatIndex                        1
         bNumFrameDescriptors                1
         bFlags                              1
           Fixed-size samples: Yes
         bDefaultFrameIndex                  1
         bAspectRatioX                       0
         bAspectRatioY                       0
         bmInterlaceFlags                 0x00
           Interlaced stream or variable: No
           Fields per frame: 1 fields
           Field 1 first: No
           Field pattern: Field 1 only
           bCopyProtect                      0
       VideoStreaming Interface Descriptor:
         bLength                            38
         bDescriptorType                    36
         bDescriptorSubtype                  7 (FRAME_MJPEG)
         bFrameIndex                         1
         bmCapabilities                   0x00
           Still image unsupported
         wWidth                            320
         wHeight                           240
         dwMinBitRate                   307230
         dwMaxBitRate                   307230
         dwMaxVideoFrameBufferSize       20482
         dwDefaultFrameInterval         666666
         bFrameIntervalType                  0
         dwMinFrameInterval             666666
         dwMaxFrameInterval             666666
         dwFrameIntervalStep                 0
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x83  EP 3 IN
         bmAttributes            2
           Transfer Type            Bulk
           Synch Type               None
           Usage Type               Data
         wMaxPacketSize     0x0040  1x 64 bytes
         bInterval               0
Device Status:     0x0000
   (Bus Powered)


  * * *

hwinfo -usb (short)

11: USB 00.0: 0000 Unclassified device
   [Created at usb.122]
   UDI: /org/freedesktop/Hal/devices/usb_device_474_722_000000000001_if0
   Unique ID: FKGF.uEX_wlDPNaD
   Parent ID: pBe4.5RvVF0y2QS4
   SysFS ID: /devices/pci0000:00/0000:00:10.1/usb2/2-1/2-1:1.0
   SysFS BusID: 2-1:1.0
   Hardware Class: unknown
   Model: "Sanyo Electric au W33SA"
   Hotplug: USB
   Vendor: usb 0x0474 "Sanyo Electric Co. Ltd."
   Device: usb 0x0722 "au W33SA"
   Serial ID: "000000000001"
   Speed: 12 Mbps
   Module Alias: "usb:v0474p0722d0000dcEFdsc02dp01ic0Eisc01ip00"
   Driver Info #0:
     Driver Status: uvcvideo is active
     Driver Activation Cmd: "modprobe uvcvideo"
   Config Status: cfg=new, avail=yes, need=no, active=unknown
   Attached to: #4 (Hub)



From alex at seewald.at  Mon Nov 26 11:12:58 2007
From: alex at seewald.at (Dr. Alexander K. Seewald)
Date: Mon, 26 Nov 2007 11:12:58 +0100
Subject: [Linux-uvc-devel] Software Autofocus stand-alone application
Message-ID: <20071126101258.GA7976@sdg.at>

Hi all,

I've written a stand-alone software autofocus application to be used
with Logitech USB cameras with proprietary focus extension (e.g. the
QuickCam Pro 9000). It can be downloaded from
http://alex.seewald.at/projects, current version is 0.05.


What this is: A stand-alone program you can start _before_ using the
USB cam in a given setting (e.g. video conferencing) and which will
compute the correct focus once for a given scene. This focus will
remain constant even when the scene changes afterwards.


What this is not: A continuous adaptation of the focus during camera
usage (similar to the autofocus under Windows). This is because necessary
frameworks are not yet in place.


Enjoy!


The used algorithm would be able to do a continuous on-line autofocus:
* stable performance from 176x144 to 640x480 resolution
* quite fast (<15ms to process 640x480, <2ms to process 176x144 frame)
  [still some 10-20% potential for optimization]
* Only for MJPEG video format, YUV currently not supported.

However, I would need a framework that allows to...
1)process all raw frames displayed by a second application. V4L2 does not
  allow concurrent access, and there is no universal video splitter.
2)set the focus under exclusive control of the autofocus [should be ok]
3)prevent some frames being forwarded to the application [optional,
  to prevent blurry images during refocussing]
4)recode raw frames to a different format [optional, e.g. for
  YUV->JPEG encoding to make the autofocus work with YUV video]

Processing for 1-4) should be done in userspace. It would be possible to
patch the driver, but such a patch would never make it upstream into the
kernel because of JPEG licensing issues. And of course it would be
really messy. :->>

This is probably out-of-scope for the linux-uvc driver, and will soon be
raised on the V4L2 mailing list. Helpful suggestions and volunteers
are of course welcome.

Best,
  Alex
-- 
Dr. Alexander K. Seewald         +43(664)1106886
              Seewald Solutions                 
------------------------------------------------
         Information wants to be free;
Information also wants to be expensive (S.Brant)
--------------- alex.seewald.at ----------------


From laurent.pinchart at skynet.be  Mon Nov 26 14:12:43 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 26 Nov 2007 14:12:43 +0100
Subject: [Linux-uvc-devel] Sanyo au W33SA cellphone web-cam support?
In-Reply-To: <474A94A0.7070302@myrealbox.com>
References: <474A94A0.7070302@myrealbox.com>
Message-ID: <200711261412.44195.laurent.pinchart@skynet.be>

Hi Samir,

On Monday 26 November 2007 10:40, Samir Ibradzic wrote:
> Hello there, this is my first post here (& ever on berilos), sorry for
> any inconvenience & ignorance...

No worries. You didn't cause any inconvenience. Your report is clear and 
includes all the information I need.

> I have this cellphone whose camera can work as UVC device (at least in
> windows it does). Have been playing a bit with uvcvideo driver, but this
> camera doesn't seem to be supported (tried builds 141 & 147)...
>
> Thank you for all UVC supporting efforts!

You're welcome :-)

> Btw, what is the meaning of 'Failed to initialize the device (-5).' ?

You can find a description of the error codes printed by the Linux UVC driver 
in errno.h. In this case, -5 is -EIO (I/O error). This means the driver 
failed to initialize the device because of an unexpected error during 
communication with the camera.

> here's dmesg info;
>
> [ 5954.620000] usb 2-1: new full speed USB device using uhci_hcd and
> address 11
> [ 5954.796000] usb 2-1: configuration #1 chosen from 1 choice
> [ 5954.800000] uvcvideo: Probing generic UVC device 1
> [ 5954.800000] uvcvideo: Found format MJPEG.
> [ 5954.800000] uvcvideo: - 320x240 (15.0 fps)
> [ 5954.800000] uvcvideo: Found UVC 1.10 device au W33SA (0474:0722)
> [ 5954.800000] uvcvideo: Scanning UVC chain: OT 3 <- PU 2 <- IT 1
> [ 5954.800000] uvcvideo: Found a valid video chain (1 -> 3).
> [ 5954.804000] uvcvideo: Failed to query (135) UVC control 1 (unit 0) :
> -32 (exp. 34).
> [ 5954.804000] uvcvideo: Failed to query (129) UVC control 1 (unit 0) :
> -32 (exp. 34).
> [ 5954.804000] uvcvideo: Failed to initialize the device (-5).

The last message is merely a summary of the previous two messages. Your camera 
stalled when queried for its default (135) and current (129) configurations. 
The driver starts by querying the default configuration, and falls back to 
current configuration if the first request fails.

As the first request isn't issued by the Windows UVC driver, it might confuse 
the camera and make it fail responding to the second request. This can be 
checked by trying the attached patch which issues the second request only.

Best regards,

Laurent Pinchart
-------------- next part --------------
A non-text attachment was scrubbed...
Name: sanyo.patch
Type: text/x-diff
Size: 568 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071126/c6b69a1f/attachment.patch>

From tomeks at spoko.eu.org  Mon Nov 26 16:48:07 2007
From: tomeks at spoko.eu.org (Tom)
Date: Mon, 26 Nov 2007 16:48:07 +0100
Subject: [Linux-uvc-devel] Software Autofocus stand-alone application
Message-ID: <9774516318.20071126164807@spoko.eu.org>

Hi

DAKS> I've written a stand-alone software autofocus application to be used
DAKS> with Logitech USB cameras with proprietary focus extension (e.g. the
DAKS> QuickCam Pro 9000). It can be downloaded from
DAKS> http://alex.seewald.at/projects, current version is 0.05.
correct link:
http://alex.seewald.at/projects.html
http://alex.seewald.at/files/sw-af-v0.05.tar.gz

DAKS> What this is: A stand-alone program you can start _before_ using the
DAKS> USB cam in a given setting (e.g. video conferencing) and which will
DAKS> compute the correct focus once for a given scene. This focus will
DAKS> remain constant even when the scene changes afterwards.

Works perfect (logitech software on windows does not work better).
Some jpegs here:
http://spoko.eu.org/9000/sw-af.zip

Do You know how to get more than 800x600 with Logitech's 9000 webcam ?


Regards

Tom Salwach



From laurent.pinchart at skynet.be  Mon Nov 26 21:58:49 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 26 Nov 2007 21:58:49 +0100
Subject: [Linux-uvc-devel] Sanyo au W33SA cellphone web-cam support?
In-Reply-To: <474AE165.6040301@myrealbox.com>
References: <474A94A0.7070302@myrealbox.com>
	<200711261412.44195.laurent.pinchart@skynet.be>
	<474AE165.6040301@myrealbox.com>
Message-ID: <200711262158.49591.laurent.pinchart@skynet.be>

Hi Samir,

please CC the list when answering.

On Monday 26 November 2007, Samir Ibradzic wrote:
> Laurent, thanks for very fast reply!
>
> I applied the patch, it still fails at second request (129). Any further
> patches and/or tests i could try?
>
> dmsg output (when tried with 'modprobe uvcvideo trace=15'):
>
[snip]
> [  223.544000] uvcvideo: Probing generic UVC device 1
> [  223.544000] uvcvideo: Found format MJPEG.
> [  223.544000] uvcvideo: - 320x240 (15.0 fps)
> [  223.544000] uvcvideo: Found UVC 1.10 device au W33SA (0474:0722)
> [  223.544000] uvcvideo: Scanning UVC chain: OT 3 <- PU 2 <- IT 1
> [  223.544000] uvcvideo: Found a valid video chain (1 -> 3).
> [  223.556000] uvcvideo: Failed to query (129) UVC control 1 (unit 0) :
> -32 (exp. 34).
> [  223.556000] uvcvideo: Failed to initialize the device (-5).
> [  223.556000] usbcore: registered new interface driver uvcvideo
> [  223.556000] USB Video Class driver (v0.1.0)

Let's try something else then. The attached patch writes the video streaming 
probe with a dummy value (all 0's) before attempting to retrieve it. Let me 
know if it helps.

Best regards,

Laurent Pinchart
-------------- next part --------------
A non-text attachment was scrubbed...
Name: sanyo.patch
Type: text/x-diff
Size: 856 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071126/f64a978a/attachment.patch>

From richard at 2007.atterer.net  Mon Nov 26 23:08:35 2007
From: richard at 2007.atterer.net (Richard Atterer)
Date: Mon, 26 Nov 2007 23:08:35 +0100
Subject: [Linux-uvc-devel] Software Autofocus stand-alone application
In-Reply-To: <20071126101258.GA7976@sdg.at>
References: <20071126101258.GA7976@sdg.at>
Message-ID: <20071126220835.GA1307@vilya>

On Mon, Nov 26, 2007 at 11:12:58AM +0100, Dr. Alexander K. Seewald wrote:
> I've written a stand-alone software autofocus application to be used with 
> Logitech USB cameras with proprietary focus extension (e.g. the QuickCam 
> Pro 9000). It can be downloaded from http://alex.seewald.at/projects, 
> current version is 0.05.

Nice work - thanks Alex! :-)

  Richard

-- 
  __   _
  |_) /|  Richard Atterer     |  GnuPG key: 888354F7
  | \/?|  http://atterer.net  |  08A9 7B7D 3D13 3EF2 3D25  D157 79E6 F6DC 8883 54F7
  ? '` ?


From samir.i at myrealbox.com  Tue Nov 27 01:47:14 2007
From: samir.i at myrealbox.com (Samir Ibradzic)
Date: Tue, 27 Nov 2007 09:47:14 +0900
Subject: [Linux-uvc-devel] Sanyo au W33SA cellphone web-cam support?
In-Reply-To: <200711262158.49591.laurent.pinchart@skynet.be>
References: <474A94A0.7070302@myrealbox.com>
	<200711261412.44195.laurent.pinchart@skynet.be>
	<474AE165.6040301@myrealbox.com>
	<200711262158.49591.laurent.pinchart@skynet.be>
Message-ID: <474B6912.7090102@myrealbox.com>


Hello Laurent,

Laurent Pinchart wrote:
> Hi Samir,
> 
> please CC the list when answering.
> 

sorry about that...


> On Monday 26 November 2007, Samir Ibradzic wrote:
>> Laurent, thanks for very fast reply!
>>
>> I applied the patch, it still fails at second request (129). Any further
>> patches and/or tests i could try?
>>
>> dmsg output (when tried with 'modprobe uvcvideo trace=15'):
>>
> [snip]
>> [  223.544000] uvcvideo: Probing generic UVC device 1
>> [  223.544000] uvcvideo: Found format MJPEG.
>> [  223.544000] uvcvideo: - 320x240 (15.0 fps)
>> [  223.544000] uvcvideo: Found UVC 1.10 device au W33SA (0474:0722)
>> [  223.544000] uvcvideo: Scanning UVC chain: OT 3 <- PU 2 <- IT 1
>> [  223.544000] uvcvideo: Found a valid video chain (1 -> 3).
>> [  223.556000] uvcvideo: Failed to query (129) UVC control 1 (unit 0) :
>> -32 (exp. 34).
>> [  223.556000] uvcvideo: Failed to initialize the device (-5).
>> [  223.556000] usbcore: registered new interface driver uvcvideo
>> [  223.556000] USB Video Class driver (v0.1.0)
> 
> Let's try something else then. The attached patch writes the video streaming 
> probe with a dummy value (all 0's) before attempting to retrieve it. Let me 
> know if it helps.
> 

I've tried second patch, got compile error;

~/Desktop/uvcvideo/trunk/uvc_video.c: In function ?uvc_video_init?:
~/Desktop/uvcvideo/trunk/uvc_video.c:901: error: too many arguments to 
function ?uvc_set_video_ctrl?

Then I tried using only 3 parameters in that uvc_set_video_ctrl call;

LN901:	if ((ret = uvc_set_video_ctrl(video, probe, 1)) < 0) {

but it didn't work (tried putting 0, 1 and SET_CUR as third parameter as 
well);

[ 2688.648000] usb 2-1: new full speed USB device using uhci_hcd and 
address 5
[ 2688.824000] usb 2-1: configuration #1 chosen from 1 choice
[ 2688.828000] uvcvideo: Probing generic UVC device 1
[ 2688.828000] uvcvideo: Found format MJPEG.
[ 2688.828000] uvcvideo: - 320x240 (15.0 fps)
[ 2688.828000] uvcvideo: Found UVC 1.10 device au W33SA (0474:0722)
[ 2688.828000] uvcvideo: Scanning UVC chain: OT 3 <- PU 2 <- IT 1
[ 2688.828000] uvcvideo: Found a valid video chain (1 -> 3).
[ 2688.832000] uvcvideo: Failed to query (1) UVC control 1 (unit 0) : 
-32 (exp. 34).
[ 2688.832000] uvcvideo: Failed to initialize probe control.
[ 2688.832000] uvcvideo: Failed to initialize the device (-5).


> Best regards,
> 
> Laurent Pinchart
> 
> 
> --- AV & Spam Filtering by M+Guardian - Risk Free Email (TM) ---
> 


From iain at cheyne.net  Tue Nov 27 12:45:43 2007
From: iain at cheyne.net (Iain Cheyne)
Date: Tue, 27 Nov 2007 11:45:43 +0000
Subject: [Linux-uvc-devel] Wiki status?
Message-ID: <99e6ead20711270345o2a910659k4d93e240388c545c@mail.gmail.com>

Hi all

I want to make some edits to the wiki, as it needs some tidying up. Is
it broken? When I login I get an error message.

"Forbidden
You don't have permission to access /index-en.phtml on this server."

-- 
Iain


From alex at seewald.at  Tue Nov 27 15:46:14 2007
From: alex at seewald.at (Dr. Alexander K. Seewald)
Date: Tue, 27 Nov 2007 15:46:14 +0100
Subject: [Linux-uvc-devel] Software Autofocus stand-alone application
Message-ID: <20071127144614.GA22424@sdg.at>

Hi Tom,

Thanks for the link error correction. From now on,
http://projects.seewald.at works as well and is a little bit
shorter. ;-)

>Do You know how to get more than 800x600 with Logitech's 9000 webcam?
I think so, at least it works here. It's a bit fiddly...
* add one line to your main graphics device (Section "Device") in
  the X11 configuration file (usually xorg.conf):
  Options "LinearAlloc" "16144"
[otherwise you can't get larger images than your main screen]
* up to 960x720 work with MJPEG + the autofocus, beyond that frame
  rate are much lower and only YUV format works (e.g. use -f yuv for
  lucview)

uvccapture does not seem to need the Options LinearAlloc - at least I
think it worked before this change.

HTH,
  Alex  
-- 
Dr. Alexander K. Seewald         +43(664)1106886
              Seewald Solutions                 
------------------------------------------------
         Information wants to be free;
Information also wants to be expensive (S.Brant)
--------------- alex.seewald.at ----------------


From laurent.pinchart at skynet.be  Tue Nov 27 19:40:34 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 27 Nov 2007 19:40:34 +0100
Subject: [Linux-uvc-devel] Sanyo au W33SA cellphone web-cam support?
In-Reply-To: <474B6912.7090102@myrealbox.com>
References: <474A94A0.7070302@myrealbox.com>
	<200711262158.49591.laurent.pinchart@skynet.be>
	<474B6912.7090102@myrealbox.com>
Message-ID: <200711271940.34709.laurent.pinchart@skynet.be>

Hi Samir,

On Tuesday 27 November 2007, Samir Ibradzic wrote:
> Laurent Pinchart wrote:
>
> I've tried second patch, got compile error;
>
> ~/Desktop/uvcvideo/trunk/uvc_video.c: In function ?uvc_video_init?:
> ~/Desktop/uvcvideo/trunk/uvc_video.c:901: error: too many arguments to
> function ?uvc_set_video_ctrl?
>
> Then I tried using only 3 parameters in that uvc_set_video_ctrl call;
>
> LN901:	if ((ret = uvc_set_video_ctrl(video, probe, 1)) < 0) {
>
> but it didn't work (tried putting 0, 1 and SET_CUR as third parameter as
> well);

Sorry I should have tried the patch first. You did the right thing. The third 
parameter should be 1.

> [ 2688.648000] usb 2-1: new full speed USB device using uhci_hcd and
> address 5
> [ 2688.824000] usb 2-1: configuration #1 chosen from 1 choice
> [ 2688.828000] uvcvideo: Probing generic UVC device 1
> [ 2688.828000] uvcvideo: Found format MJPEG.
> [ 2688.828000] uvcvideo: - 320x240 (15.0 fps)
> [ 2688.828000] uvcvideo: Found UVC 1.10 device au W33SA (0474:0722)
> [ 2688.828000] uvcvideo: Scanning UVC chain: OT 3 <- PU 2 <- IT 1
> [ 2688.828000] uvcvideo: Found a valid video chain (1 -> 3).
> [ 2688.832000] uvcvideo: Failed to query (1) UVC control 1 (unit 0) :
> -32 (exp. 34).
> [ 2688.832000] uvcvideo: Failed to initialize probe control.
> [ 2688.832000] uvcvideo: Failed to initialize the device (-5).

I don't know why the phone fails to respond. Could you plug it in a Windows 
computer and get a USB bus trace ? I'd like to get the whole trace starting 
at device plug-in.

Best regards,

Laurent Pinchart


From McFrame at gmx.at  Tue Nov 27 23:04:37 2007
From: McFrame at gmx.at (McFrame at gmx.at)
Date: Tue, 27 Nov 2007 23:04:37 +0100
Subject: [Linux-uvc-devel] Unsupported HP webcam by Chicony
Message-ID: <20071127220437.177540@gmx.net>

Hi,
in my HP 2710p there is a fix Webcam made by Chicony

lsusb -d 04f2:b017 -v
results:
Bus 007 Device 003: ID 04f2:b017 Chicony Electronics Co., Ltd
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x04f2 Chicony Electronics Co., Ltd
  idProduct          0xb017
  bcdDevice           50.05
  iManufacturer           2 Chicony Electronics Co., Ltd.
  iProduct                1 HP Webcam
  iSerial                 3 SN0001
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          629
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               1 HP Webcam
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              1 HP Webcam
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           77
        dwClockFrequency        6.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               4
        iTerminal               0
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {28f03370-6311-4a2e-ba2c-6890eb334016}
        bNumControl             1
        bNrPins                 1
        baSourceID( 0)          3
        bControlSize            1
        bmControls( 0)       0x01
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000000
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000053f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          Backlight Compensation
          Power Line Frequency
        iProcessing             0
        bmVideoStandards     0x84
          PAL - 625/50
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormarts                        1
        wTotalLength                    33025
        bEndPointAddress                    0
        bmInfo                              2
        bTerminalLink                       0
        bStillCaptureMethod                 0
        bTriggerSupport                     0
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                8
        guidFormat                            {32595559-0000-0010-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   614400
        dwMaxBitRate                 18432000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
        dwFrameInterval( 5)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   202752
        dwMaxBitRate                  6082560
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
        dwFrameInterval( 5)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   153600
        dwMaxBitRate                  4608000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
        dwFrameInterval( 5)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                    50688
        dwMaxBitRate                  1520640
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
        dwFrameInterval( 5)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                    38400
        dwMaxBitRate                  1152000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
        dwFrameInterval( 5)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            46
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            800
        wHeight                           600
        dwMinBitRate                   960000
        dwMaxBitRate                 19200000
        dwMaxVideoFrameBufferSize      960000
        dwDefaultFrameInterval         500000
        bFrameIntervalType                  5
        dwFrameInterval( 0)            500000
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
        dwFrameInterval( 3)           2000000
        dwFrameInterval( 4)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         7
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                           960
        dwMinBitRate                  2457600
        dwMaxBitRate                 22118400
        dwMaxVideoFrameBufferSize     2457600
        dwDefaultFrameInterval        1111111
        bFrameIntervalType                  3
        dwFrameInterval( 0)           1111111
        dwFrameInterval( 1)           2000000
        dwFrameInterval( 2)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         8
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1600
        wHeight                          1200
        dwMinBitRate                  3840000
        dwMaxBitRate                 19200000
        dwMaxVideoFrameBufferSize     3840000
        dwDefaultFrameInterval        2000000
        bFrameIntervalType                  2
        dwFrameInterval( 0)           2000000
        dwFrameInterval( 1)          10000000
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b20  2x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1320  3x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x13e8  3x 1000 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)
 
modprobe uvcvideo  (recent version) results:

uvcvideo: disagrees about version of symbol video_devdata
[   19.048000] uvcvideo: Unknown symbol video_devdata
[   19.048000] uvcvideo: disagrees about version of symbol video_unregister_device
[   19.048000] uvcvideo: Unknown symbol video_unregister_device
[   19.048000] uvcvideo: disagrees about version of symbol video_device_alloc
[   19.048000] uvcvideo: Unknown symbol video_device_alloc
[   19.048000] uvcvideo: disagrees about version of symbol video_register_device
[   19.048000] uvcvideo: Unknown symbol video_register_device
[   19.048000] uvcvideo: disagrees about version of symbol video_device_release
[   19.048000] uvcvideo: Unknown symbol video_device_release
[   20.240000] uvcvideo: disagrees about version of symbol video_devdata
[   20.240000] uvcvideo: Unknown symbol video_devdata
[   20.240000] uvcvideo: disagrees about version of symbol video_unregister_device
[   20.240000] uvcvideo: Unknown symbol video_unregister_device
[   20.240000] uvcvideo: disagrees about version of symbol video_device_alloc
[   20.240000] uvcvideo: Unknown symbol video_device_alloc
[   20.240000] uvcvideo: disagrees about version of symbol video_register_device
[   20.240000] uvcvideo: Unknown symbol video_register_device
[   20.240000] uvcvideo: disagrees about version of symbol video_device_release
[   20.240000] uvcvideo: Unknown symbol video_device_release

Is there something I can do to help the development process?
Regards
G?nter Haus

-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer


From jfcosta1 at yahoo.com  Wed Nov 28 04:59:09 2007
From: jfcosta1 at yahoo.com (Fernando Costa)
Date: Wed, 28 Nov 2007 04:59:09 +0100
Subject: [Linux-uvc-devel] Sonix Oc45:624f
Message-ID: <474CE78D.80603@yahoo.com>

Hi,

I own a built in webcam that doesn't seem to work, running lsusb I get
0c45:624f and googling a bit I get that the webcam use the SN9C201
driver. I have seen in the web page that the webcam 0c45:62c0 is
supported...
I have installed the the uvcvideo-kmp-default version r117_2.6.22.5_31-2
from the openSUSE repositories, is there some newer version or some
patch to make the webcam work. I have also found a generic driver that
works, but is a restricted driver and it's a time-limited trial version.

Thanks...


From samir.i at myrealbox.com  Wed Nov 28 13:14:40 2007
From: samir.i at myrealbox.com (Samir Ibradzic)
Date: Wed, 28 Nov 2007 21:14:40 +0900
Subject: [Linux-uvc-devel] Sanyo au W33SA cellphone web-cam support?
In-Reply-To: <200711271940.34709.laurent.pinchart@skynet.be>
References: <474A94A0.7070302@myrealbox.com>
	<200711262158.49591.laurent.pinchart@skynet.be>
	<474B6912.7090102@myrealbox.com>
	<200711271940.34709.laurent.pinchart@skynet.be>
Message-ID: <474D5BB0.9000404@myrealbox.com>


Hello Laurent,

I've tried the USB capture thing... Used SnoopyPro, and because of the 
size of the files i will attach them only to you personally... The 
reason for the big file size is that i started capture before plugging 
the cable, then i tested the video stream in Media Player Classics for a 
secund or two... The reason because there are two files is that there 
were two devices in SnoopyPro, with similar IDs, but somewhat similar 
capture results;

USB\Vid_0474&Pid_0722&Rev_0000&MI_00,USB\Vid_0474&Pid_0722&MI_00  -  USB 
Video Device

and

USB\Vid_0474&Pid_0722&Rev_0000,USB\Vid_0474&Pid_0722  -  USB Composite 
Device

What is the deal with these two?

I also have to mention that when i plug this phone into USB, I get the 
menu on it, where i select if it should work as USB camera, Storage 
Device, USB Print device or Direct Comm. Transfer mode. Prior to 
selecting USB camera mode there is no activity on USB, afaik...

Thanks again! I just hope we will come up with something...


Samir


Laurent Pinchart wrote:
> Hi Samir,
> 
> On Tuesday 27 November 2007, Samir Ibradzic wrote:
>> Laurent Pinchart wrote:
>>
>> I've tried second patch, got compile error;
>>
>> ~/Desktop/uvcvideo/trunk/uvc_video.c: In function ?uvc_video_init?:
>> ~/Desktop/uvcvideo/trunk/uvc_video.c:901: error: too many arguments to
>> function ?uvc_set_video_ctrl?
>>
>> Then I tried using only 3 parameters in that uvc_set_video_ctrl call;
>>
>> LN901:	if ((ret = uvc_set_video_ctrl(video, probe, 1)) < 0) {
>>
>> but it didn't work (tried putting 0, 1 and SET_CUR as third parameter as
>> well);
> 
> Sorry I should have tried the patch first. You did the right thing. The third 
> parameter should be 1.
> 
>> [ 2688.648000] usb 2-1: new full speed USB device using uhci_hcd and
>> address 5
>> [ 2688.824000] usb 2-1: configuration #1 chosen from 1 choice
>> [ 2688.828000] uvcvideo: Probing generic UVC device 1
>> [ 2688.828000] uvcvideo: Found format MJPEG.
>> [ 2688.828000] uvcvideo: - 320x240 (15.0 fps)
>> [ 2688.828000] uvcvideo: Found UVC 1.10 device au W33SA (0474:0722)
>> [ 2688.828000] uvcvideo: Scanning UVC chain: OT 3 <- PU 2 <- IT 1
>> [ 2688.828000] uvcvideo: Found a valid video chain (1 -> 3).
>> [ 2688.832000] uvcvideo: Failed to query (1) UVC control 1 (unit 0) :
>> -32 (exp. 34).
>> [ 2688.832000] uvcvideo: Failed to initialize probe control.
>> [ 2688.832000] uvcvideo: Failed to initialize the device (-5).
> 
> I don't know why the phone fails to respond. Could you plug it in a Windows 
> computer and get a USB bus trace ? I'd like to get the whole trace starting 
> at device plug-in.
> 
> Best regards,
> 
> Laurent Pinchart
> 
> --- AV & Spam Filtering by M+Guardian - Risk Free Email (TM) ---
> 
> 


From laurent.pinchart at skynet.be  Wed Nov 28 20:28:10 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 28 Nov 2007 20:28:10 +0100
Subject: [Linux-uvc-devel] Sanyo au W33SA cellphone web-cam support?
In-Reply-To: <474D5BB0.9000404@myrealbox.com>
References: <474A94A0.7070302@myrealbox.com>
	<200711271940.34709.laurent.pinchart@skynet.be>
	<474D5BB0.9000404@myrealbox.com>
Message-ID: <200711282028.10452.laurent.pinchart@skynet.be>

Hi Samir,

On Wednesday 28 November 2007, Samir Ibradzic wrote:
> Hello Laurent,
>
> I've tried the USB capture thing... Used SnoopyPro, and because of the
> size of the files i will attach them only to you personally... The
> reason for the big file size is that i started capture before plugging
> the cable, then i tested the video stream in Media Player Classics for a
> secund or two... The reason because there are two files is that there
> were two devices in SnoopyPro, with similar IDs, but somewhat similar
> capture results;

Thanks for the logs. The binary format scared me, but I found a tool to dump 
the logs to text (http://www.stillhq.com/usblogdump/).

> USB\Vid_0474&Pid_0722&Rev_0000&MI_00,USB\Vid_0474&Pid_0722&MI_00  -  USB
> Video Device
>
> and
>
> USB\Vid_0474&Pid_0722&Rev_0000,USB\Vid_0474&Pid_0722  -  USB Composite
> Device
>
> What is the deal with these two?

That's just the way Windows deals with devices that have more than one 
function. Sniffing the composite device will probably log all URBs regardless 
of the function (camera, ...), while sniffing the video device will only log 
video-related URBs. Don't take this for granted as I'm no Windows expert, but 
I expect it to work like that.

> I also have to mention that when i plug this phone into USB, I get the
> menu on it, where i select if it should work as USB camera, Storage
> Device, USB Print device or Direct Comm. Transfer mode. Prior to
> selecting USB camera mode there is no activity on USB, afaik...
>
> Thanks again! I just hope we will come up with something...

Could you please try the attached patch ? You can discard the previous ones.

Best regards,

Laurent Pinchart
-------------- next part --------------
A non-text attachment was scrubbed...
Name: sanyo.patch
Type: text/x-diff
Size: 1056 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071128/d0c8290b/attachment.patch>

From laurent.pinchart at skynet.be  Wed Nov 28 20:34:08 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 28 Nov 2007 20:34:08 +0100
Subject: [Linux-uvc-devel] Sonix Oc45:624f
In-Reply-To: <474CE78D.80603@yahoo.com>
References: <474CE78D.80603@yahoo.com>
Message-ID: <200711282034.08762.laurent.pinchart@skynet.be>

Hi Fernando,

On Wednesday 28 November 2007, Fernando Costa wrote:
> Hi,
>
> I own a built in webcam that doesn't seem to work, running lsusb I get
> 0c45:624f and googling a bit I get that the webcam use the SN9C201
> driver. I have seen in the web page that the webcam 0c45:62c0 is
> supported...

The 0c45:62c0 webcam uses a different chipset. The Linux UVC driver doesn't 
support SN9C20x-based devices.

> I have installed the the uvcvideo-kmp-default version r117_2.6.22.5_31-2
> from the openSUSE repositories, is there some newer version or some
> patch to make the webcam work. I have also found a generic driver that
> works, but is a restricted driver and it's a time-limited trial version.

If you mean the driver provided at 
http://www.linux-projects.org/modules/news/, I would stay away from it. Luca 
Risolia, the author, is known to write binary-only kernel modules that work 
with his own commercial closed-source application only. He doesn't play along 
with the Linux kernel open-source rule, and most people tend to ignore him.

You should instead contact Michel Xhaard (http://mxhaard.free.fr/) who said he 
would work on SN9C20x support for his gspca driver.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Nov 28 20:53:16 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 28 Nov 2007 20:53:16 +0100
Subject: [Linux-uvc-devel] Unsupported HP webcam by Chicony
In-Reply-To: <20071127220437.177540@gmx.net>
References: <20071127220437.177540@gmx.net>
Message-ID: <200711282053.16879.laurent.pinchart@skynet.be>

Hi G?nter,

On Tuesday 27 November 2007, McFrame at gmx.at wrote:
> Hi,
> in my HP 2710p there is a fix Webcam made by Chicony
>
> lsusb -d 04f2:b017 -v
[snip]

Thanks for the report.> modprobe uvcvideo  (recent version) results:

> uvcvideo: disagrees about version of symbol video_devdata
> [   19.048000] uvcvideo: Unknown symbol video_devdata
> [   19.048000] uvcvideo: disagrees about version of symbol
> video_unregister_device 
[snip]

The error messages you get in the kernel log are caused by compilation issues 
and not by the UVC driver itself.

Make sure you compile the uvcvideo module against the source tree of your 
running kernel. I also remember someone reporting similar problems coming 
from patched kernel headers shipped by v4l-dvb.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Nov 28 21:02:16 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 28 Nov 2007 21:02:16 +0100
Subject: [Linux-uvc-devel] Wiki status?
In-Reply-To: <99e6ead20711270345o2a910659k4d93e240388c545c@mail.gmail.com>
References: <99e6ead20711270345o2a910659k4d93e240388c545c@mail.gmail.com>
Message-ID: <200711282102.16180.laurent.pinchart@skynet.be>

Hi Iain,

On Tuesday 27 November 2007, Iain Cheyne wrote:
> Hi all
>
> I want to make some edits to the wiki, as it needs some tidying up. Is
> it broken? When I login I get an error message.
>
> "Forbidden
> You don't have permission to access /index-en.phtml on this server."

I reported that issue a month ago to Berlios 
(http://developer.berlios.de/bugs/?func=detailbug&bug_id=12184&group_id=1) 
and they still haven't fixed it. I'm afraid there's not much I can do about 
it.

Berlios might have decided to disable the OpenFacts wiki in favour of 
OpenFacts2. If that's the case an announcement would have helped.

Best regards,

Laurent Pinchart


From katarzyna.kaczor at lpmagazine.org  Thu Nov 29 11:55:35 2007
From: katarzyna.kaczor at lpmagazine.org (Katarzyna Kaczor)
Date: Thu, 29 Nov 2007 11:55:35 +0100
Subject: [Linux-uvc-devel] Interested in contributing to Linux+ magazine?
Message-ID: <200711291155.35376.katarzyna.kaczor@lpmagazine.org>

Hello,

My name is Katarzyna Kaczor and I am an editorial assistant in Linux+DVD 
magazine. It's a quaterly totally devoted toLinux, distributed all over the 
US and in Australia. (for more details please visit www.lpmagazine.org/en)

I am currently preparing the next issue and seeking people who could carry out 
a consument test of webcams running on Linux. Perhaps you could help me.

Please, let me know if you are interested in cooperation with us. I will send 
you more details then.

I am looking forward ?to your reply,
kind regards
Kate ?
-- 
Katarzyna Kaczor
Linux+ DVD magazine

///////////////////////////////////////////////
Software Media LLC
1461 A First Avenue, # 360
New York, NY 10021-2209
USA

phone number: 1-917-338 - 3631/ +48 22 427 35 34
fax: ?+48 22 887 10 11
www.lpmagazine.org/en
http://www.buyitpress.com/en/


From iain at cheyne.net  Thu Nov 29 12:39:05 2007
From: iain at cheyne.net (Iain Cheyne)
Date: Thu, 29 Nov 2007 11:39:05 +0000
Subject: [Linux-uvc-devel] Wiki status?
In-Reply-To: <200711282102.16180.laurent.pinchart@skynet.be>
References: <99e6ead20711270345o2a910659k4d93e240388c545c@mail.gmail.com>
	<200711282102.16180.laurent.pinchart@skynet.be>
Message-ID: <99e6ead20711290339n25aca660m39d0d9fd025c4f0a@mail.gmail.com>

Thanks Laurent

When it works, I will get involved.

On Nov 28, 2007 8:02 PM, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> Hi Iain,
>
>
> On Tuesday 27 November 2007, Iain Cheyne wrote:
> > Hi all
> >
> > I want to make some edits to the wiki, as it needs some tidying up. Is
> > it broken? When I login I get an error message.
> >
> > "Forbidden
> > You don't have permission to access /index-en.phtml on this server."
>
> I reported that issue a month ago to Berlios
> (http://developer.berlios.de/bugs/?func=detailbug&bug_id=12184&group_id=1)
> and they still haven't fixed it. I'm afraid there's not much I can do about
> it.
>
> Berlios might have decided to disable the OpenFacts wiki in favour of
> OpenFacts2. If that's the case an announcement would have helped.
>
> Best regards,
>
> Laurent Pinchart
>



-- 
Iain


From samir.i at myrealbox.com  Thu Nov 29 13:15:27 2007
From: samir.i at myrealbox.com (Samir Ibradzic)
Date: Thu, 29 Nov 2007 21:15:27 +0900
Subject: [Linux-uvc-devel] Sanyo au W33SA cellphone web-cam support?
In-Reply-To: <200711282028.10452.laurent.pinchart@skynet.be>
References: <474A94A0.7070302@myrealbox.com>
	<200711271940.34709.laurent.pinchart@skynet.be>
	<474D5BB0.9000404@myrealbox.com>
	<200711282028.10452.laurent.pinchart@skynet.be>
Message-ID: <474EAD5F.1030103@myrealbox.com>


Laurent, you are just remarkable!

Camera worked, just after the patch was applied!
I tested it using lucview, though no controls are working...

here's dmesg;

[ 2910.636000] usb 2-1: new full speed USB device using uhci_hcd and 
address 5
[ 2910.812000] usb 2-1: configuration #1 chosen from 1 choice
[ 2910.816000] uvcvideo: Probing generic UVC device 1
[ 2910.816000] uvcvideo: Found format MJPEG.
[ 2910.816000] uvcvideo: - 320x240 (15.0 fps)
[ 2910.816000] uvcvideo: Found UVC 1.10 device au W33SA (0474:0722)
[ 2910.816000] uvcvideo: Scanning UVC chain: OT 3 <- PU 2 <- IT 1
[ 2910.816000] uvcvideo: Found a valid video chain (1 -> 3).
[ 2910.820000] uvcvideo: UVC device initialized.
[ 2914.108000] uvcvideo: uvc_v4l2_open
[ 2914.108000] uvcvideo: uvc_v4l2_ioctl
[ 2914.108000] v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
[ 2914.108000] uvcvideo: uvc_v4l2_ioctl
[ 2914.108000] v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
[ 2914.108000] uvcvideo: Trying format 0x47504a4d (MJPG): 320x240.
[ 2914.108000] uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
[ 2914.124000] uvcvideo: uvc_v4l2_ioctl
[ 2914.124000] v4l2 ioctl VIDIOC_S_PARM, dir=rw (0xc0cc5616)
[ 2914.124000] uvcvideo: Setting frame interval to 1/15 (666666).
[ 2914.160000] uvcvideo: uvc_v4l2_ioctl
[ 2914.160000] v4l2 ioctl VIDIOC_REQBUFS, dir=rw (0xc0145608)
[ 2914.160000] uvcvideo: uvc_v4l2_ioctl
[ 2914.160000] v4l2 ioctl VIDIOC_QUERYBUF, dir=rw (0xc0445609)
[ 2914.160000] uvcvideo: uvc_v4l2_mmap
[ 2914.160000] uvcvideo: uvc_v4l2_ioctl
[ 2914.160000] v4l2 ioctl VIDIOC_QUERYBUF, dir=rw (0xc0445609)
[ 2914.160000] uvcvideo: uvc_v4l2_mmap
[ 2914.160000] uvcvideo: uvc_v4l2_ioctl
[ 2914.160000] v4l2 ioctl VIDIOC_QUERYBUF, dir=rw (0xc0445609)
[ 2914.160000] uvcvideo: uvc_v4l2_mmap
[ 2914.160000] uvcvideo: uvc_v4l2_ioctl
[ 2914.160000] v4l2 ioctl VIDIOC_QUERYBUF, dir=rw (0xc0445609)
[ 2914.164000] uvcvideo: uvc_v4l2_mmap
[ 2914.164000] uvcvideo: uvc_v4l2_ioctl
[ 2914.164000] v4l2 ioctl VIDIOC_QBUF, dir=rw (0xc044560f)
[ 2914.164000] uvcvideo: Queuing buffer 0.
[ 2914.164000] uvcvideo: uvc_v4l2_ioctl
[ 2914.164000] v4l2 ioctl VIDIOC_QBUF, dir=rw (0xc044560f)
[ 2914.164000] uvcvideo: Queuing buffer 1.
[ 2914.164000] uvcvideo: uvc_v4l2_ioctl
[ 2914.164000] v4l2 ioctl VIDIOC_QBUF, dir=rw (0xc044560f)
[ 2914.164000] uvcvideo: Queuing buffer 2.
[ 2914.164000] uvcvideo: uvc_v4l2_ioctl
[ 2914.164000] v4l2 ioctl VIDIOC_QBUF, dir=rw (0xc044560f)
[ 2914.164000] uvcvideo: Queuing buffer 3.
[ 2914.380000] uvcvideo: uvc_v4l2_ioctl
[ 2914.380000] v4l2 ioctl VIDIOC_STREAMON, dir=-w (0x40045612)
[ 2914.380000] uvcvideo: uvc_v4l2_ioctl
[ 2914.380000] v4l2 ioctl VIDIOC_DQBUF, dir=rw (0xc0445611)
[ 2914.380000] uvcvideo: Dequeuing buffer 0.
[ 2914.676000] uvcvideo: Frame complete (EOF found).
...

Why all these details in kernel messages? Just for the sake of the test?

How can i set it up to work in gstreamer?

I have the following error in gstreamer-properties;

gstreamer-properties-Message: Error running pipeline 'Video for Linux 2 
(v4l2)': Could not negotiate format [gstbasesrc.c(2062): 
gst_base_src_start (): /pipeline0/v4l2src3:
Check your filtered caps, if any]

Thanks again for your hard work! This means one more camera can work in 
Linux! Actually, there is a whole line of Sanyo (au) cellphones 
available here in japan, who probably use same or very similar camera 
USB interface...


Samir


Laurent Pinchart wrote:
> Hi Samir,
> 
> On Wednesday 28 November 2007, Samir Ibradzic wrote:
>> Hello Laurent,
>>
>> I've tried the USB capture thing... Used SnoopyPro, and because of the
>> size of the files i will attach them only to you personally... The
>> reason for the big file size is that i started capture before plugging
>> the cable, then i tested the video stream in Media Player Classics for a
>> secund or two... The reason because there are two files is that there
>> were two devices in SnoopyPro, with similar IDs, but somewhat similar
>> capture results;
> 
> Thanks for the logs. The binary format scared me, but I found a tool to dump 
> the logs to text (http://www.stillhq.com/usblogdump/).
> 
>> USB\Vid_0474&Pid_0722&Rev_0000&MI_00,USB\Vid_0474&Pid_0722&MI_00  -  USB
>> Video Device
>>
>> and
>>
>> USB\Vid_0474&Pid_0722&Rev_0000,USB\Vid_0474&Pid_0722  -  USB Composite
>> Device
>>
>> What is the deal with these two?
> 
> That's just the way Windows deals with devices that have more than one 
> function. Sniffing the composite device will probably log all URBs regardless 
> of the function (camera, ...), while sniffing the video device will only log 
> video-related URBs. Don't take this for granted as I'm no Windows expert, but 
> I expect it to work like that.
> 
>> I also have to mention that when i plug this phone into USB, I get the
>> menu on it, where i select if it should work as USB camera, Storage
>> Device, USB Print device or Direct Comm. Transfer mode. Prior to
>> selecting USB camera mode there is no activity on USB, afaik...
>>
>> Thanks again! I just hope we will come up with something...
> 
> Could you please try the attached patch ? You can discard the previous ones.
> 
> Best regards,
> 
> Laurent Pinchart
> 
> 
> --- AV & Spam Filtering by M+Guardian - Risk Free Email (TM) ---
> 


From ryanbreheny at blueyonder.co.uk  Thu Nov 29 15:30:39 2007
From: ryanbreheny at blueyonder.co.uk (ryanbreheny)
Date: Thu, 29 Nov 2007 14:30:39 +0000
Subject: [Linux-uvc-devel] CECT mobile phone webcam
Message-ID: <20071129143039.55056069@TheBrain>

Hi i recently purchased a CECT phone which has a rather good webcam
feature on it , it worked in windows without installing anything and
gave excellent results , i found the uvcvideo driver almost works in
linux , i plug the phone in and select the webcam function and the
uvcvideo module is loaded and gives me the /dev/v4l/video0 device node
however i cannot seem to use it , ekiga says the following : 

Your driver doesn't seem to support any of the color formats supported
by Ekiga. Please check your kernel driver documentation in order to
determine which Palette is supported

http://omploader.org/vN2lh/lsusbvvv.txt

here is the output from lsusb -vvv

http://omploader.org/vN2li/v4l-info.txt

and here is the output from v4l-info

any help would be greatly appreciated 

		thanks in advance 
			ryan breheny



From laurent.pinchart at skynet.be  Thu Nov 29 20:56:18 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 29 Nov 2007 20:56:18 +0100
Subject: [Linux-uvc-devel] Sanyo au W33SA cellphone web-cam support?
In-Reply-To: <474EAD5F.1030103@myrealbox.com>
References: <474A94A0.7070302@myrealbox.com>
	<200711282028.10452.laurent.pinchart@skynet.be>
	<474EAD5F.1030103@myrealbox.com>
Message-ID: <200711292056.18394.laurent.pinchart@skynet.be>

Hi Samir,

On Thursday 29 November 2007, Samir Ibradzic wrote:
> Laurent, you are just remarkable!

Thanks :-)

> Camera worked, just after the patch was applied!

I committed it to SVN.

> I tested it using lucview, though no controls are working...

That's because your phone has no video controls, so that's pretty normal.

> here's dmesg;
>
[snip]
> ...
>
> Why all these details in kernel messages? Just for the sake of the test?

Those are debug messages. You can turn them off by setting the trace parameter 
back to 0.

> How can i set it up to work in gstreamer?
>
> I have the following error in gstreamer-properties;
>
> gstreamer-properties-Message: Error running pipeline 'Video for Linux 2
> (v4l2)': Could not negotiate format [gstbasesrc.c(2062):
> gst_base_src_start (): /pipeline0/v4l2src3:
> Check your filtered caps, if any]

I've never really used gstreamer, so don't know what goes wrong. Your phone 
supports MJPEG only while most other UVC devices support YUV as well. That 
might be a clue.

> Thanks again for your hard work! This means one more camera can work in
> Linux! Actually, there is a whole line of Sanyo (au) cellphones
> available here in japan, who probably use same or very similar camera
> USB interface...

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Nov 29 21:33:27 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 29 Nov 2007 21:33:27 +0100
Subject: [Linux-uvc-devel] CECT mobile phone webcam
In-Reply-To: <20071129143039.55056069@TheBrain>
References: <20071129143039.55056069@TheBrain>
Message-ID: <200711292133.28099.laurent.pinchart@skynet.be>

Hi Ryan,

On Thursday 29 November 2007, ryanbreheny wrote:
> Hi i recently purchased a CECT phone which has a rather good webcam
> feature on it , it worked in windows without installing anything and
> gave excellent results , i found the uvcvideo driver almost works in
> linux , i plug the phone in and select the webcam function and the
> uvcvideo module is loaded and gives me the /dev/v4l/video0 device node
> however i cannot seem to use it , ekiga says the following :
>
> Your driver doesn't seem to support any of the color formats supported
> by Ekiga. Please check your kernel driver documentation in order to
> determine which Palette is supported

Your camera supports MJPEG only. Ekiga got MJPEG support around 2.03, so make 
sure you use a recent version.

If it still doesn't work after upgrading, raise the uvcvideo trace level (echo 
15 > /sys/modules/uvcvideo/parameters/trace) and check the kernel log after 
starting Ekiga to see if you get any error message.

> http://omploader.org/vN2lh/lsusbvvv.txt
>
> here is the output from lsusb -vvv
>
> http://omploader.org/vN2li/v4l-info.txt
>
> and here is the output from v4l-info
>
> any help would be greatly appreciated

Best regards,

Laurent Pinchart


From harroun at gmail.com  Fri Nov 30 11:51:53 2007
From: harroun at gmail.com (John Bro)
Date: Fri, 30 Nov 2007 11:51:53 +0100
Subject: [Linux-uvc-devel] re: Hercules Dualpix Exchange fully supported
	(tested with skype 2.0)
Message-ID: <783c3ee00711300251qb50133el88329ed892dec381@mail.gmail.com>

Hello folks;

 I just joined after extensive googling and finally finding the message here
that the
Hercules Dualpix worked with skype, and indeed it does (skype 2.0b that
is..)

Now, I  have compiled and installed uvcvideo, V4L and just about anything
vaguely related from apt-get on my Debian lenny 2.6.22-3-k7
But Ekiga still says  my video driver doesn't support the requested format.
And camorama says my /dev/video0/   is not there
   when it most certainly is  -- and it sure looks like a device; too.?
Should my webcam work outside of skype ? I

When I plug it in, I get "cannot get freq at ep 0x84 which seems to be a
common problem with webcams
but which means nothing to me..
Elsewhere it was suggested that reloading the module with trace=15 might
help.. it didn't for me..

Although I am a linux user since RedHat 3, I am still no guru, especially
with drivers and modules,
and even less with video; so let's not ignore the basics.. I may be missing
something fundamental..

I can send usb logs and lsusb output and all if useful, but I thought I
would just ask first,
can I get my cam to work in other linux apps or only skype for now ?

thanks,
 John
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071130/e68bc5d7/attachment.html>

From yoann.di-ruzza at limgeo.com  Fri Nov 30 13:27:34 2007
From: yoann.di-ruzza at limgeo.com (Yoann DI RUZZA)
Date: Fri, 30 Nov 2007 13:27:34 +0100
Subject: [Linux-uvc-devel] Hercules Dualpix Exchange fully	supported
	(tested with skype 2.0)
In-Reply-To: <783c3ee00711300251qb50133el88329ed892dec381@mail.gmail.com>
References: <783c3ee00711300251qb50133el88329ed892dec381@mail.gmail.com>
Message-ID: <1196425654.3974.8.camel@pcyoann64.lim>

Hello John,

I also use this webcam for amsn and ekiga and works well. Which dev is
used in skype video settings? Do you use V4L2?
I also have "cannot get freq at ep 0x84" but it doesn't seem important.

Tested with Ubuntu feisty and gentoo

Yoann


Le vendredi 30 novembre 2007 ? 11:51 +0100, John Bro a ?crit :
> Hello folks;
> 
>  I just joined after extensive googling and finally finding the
> message here that the 
> Hercules Dualpix worked with skype, and indeed it does (skype 2.0b
> that is..)
> 
> Now, I  have compiled and installed uvcvideo, V4L and just about
> anything 
> vaguely related from apt-get on my Debian lenny 2.6.22-3-k7
> But Ekiga still says  my video driver doesn't support the requested
> format. 
> And camorama says my /dev/video0/   is not there 
>    when it most certainly is  -- and it sure looks like a device;
> too.? 
> Should my webcam work outside of skype ? I
> 
> When I plug it in, I get "cannot get freq at ep 0x84 which seems to be
> a common problem with webcams
> but which means nothing to me..
> Elsewhere it was suggested that reloading the module with trace=15
> might help.. it didn't for me.. 
> 
> Although I am a linux user since RedHat 3, I am still no guru,
> especially with drivers and modules,
> and even less with video; so let's not ignore the basics.. I may be
> missing something fundamental..
> 
> I can send usb logs and lsusb output and all if useful, but I thought
> I would just ask first,
> can I get my cam to work in other linux apps or only skype for now ?
> 
> thanks,
>  John
> 
> 
> 
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel





From samir.i at myrealbox.com  Fri Nov 30 18:41:59 2007
From: samir.i at myrealbox.com (Samir Ibradzic)
Date: Sat, 01 Dec 2007 02:41:59 +0900
Subject: [Linux-uvc-devel] Sanyo au W33SA cellphone web-cam support?
In-Reply-To: <200711292056.18394.laurent.pinchart@skynet.be>
References: <474A94A0.7070302@myrealbox.com>
	<200711282028.10452.laurent.pinchart@skynet.be>
	<474EAD5F.1030103@myrealbox.com>
	<200711292056.18394.laurent.pinchart@skynet.be>
Message-ID: <47504B67.3090403@myrealbox.com>


Laurent, thanks again! Checked the latest uvcvideo revision, and my
camera works fine...

Kudos for your hard work!

To all who may concern, camera works with luvcview, ekiga and mplayer
without any hassle. I will try other japanese Sanyo cellphone models
with this as soon as i get chance...

some mplayer syntax;

mplayer -tv
driver=v4l2:width=320:height=240:device=/dev/video0:fps=15:outfmt=yuy2 tv://

camera worked with gstreamer too, when specifying some pipeline settings
like;

gst-launch-0.10 v4l2src ! jpegdec ! xvimagesink

and even gstreamer-properties, when specifying custom video plugin
settings, as;

v4l2src device="/dev/video0" ! jpegdec ! ffmpegcolorspace

but for some strange reasons, these custom settings doesn't stick in the
properties!?!

i also made it work with Skype beta 2, by using a thing called
gstfakevideo (or skype_video_hijacker, how it was previously called);

sudo mv /dev/video0 /dev/video1
gstfakevideo v4l2src device=/dev/video1 ! jpegdec ! ffmpegcolorspace

note that these 'tricks' might also work with other non-YUV, MJPEG only
UVC cameras...


Samir


Laurent Pinchart wrote:
> Hi Samir,
> 
> On Thursday 29 November 2007, Samir Ibradzic wrote:
>> Laurent, you are just remarkable!
> 
> Thanks :-)
> 
>> Camera worked, just after the patch was applied!
> 
> I committed it to SVN.
> 
>> I tested it using lucview, though no controls are working...
> 
> That's because your phone has no video controls, so that's pretty normal.
> 
>> here's dmesg;
>>
> [snip]
>> ...
>>
>> Why all these details in kernel messages? Just for the sake of the test?
> 
> Those are debug messages. You can turn them off by setting the trace parameter 
> back to 0.
> 
>> How can i set it up to work in gstreamer?
>>
>> I have the following error in gstreamer-properties;
>>
>> gstreamer-properties-Message: Error running pipeline 'Video for Linux 2
>> (v4l2)': Could not negotiate format [gstbasesrc.c(2062):
>> gst_base_src_start (): /pipeline0/v4l2src3:
>> Check your filtered caps, if any]
> 
> I've never really used gstreamer, so don't know what goes wrong. Your phone 
> supports MJPEG only while most other UVC devices support YUV as well. That 
> might be a clue.
> 
>> Thanks again for your hard work! This means one more camera can work in
>> Linux! Actually, there is a whole line of Sanyo (au) cellphones
>> available here in japan, who probably use same or very similar camera
>> USB interface...
> 
> Best regards,
> 
> Laurent Pinchart
> 
> --- AV & Spam Filtering by M+Guardian - Risk Free Email (TM) ---
> 
> 





From malcolm at interele.demon.co.uk  Fri Nov 30 20:37:05 2007
From: malcolm at interele.demon.co.uk (malcolm)
Date: Fri, 30 Nov 2007 19:37:05 +0000
Subject: [Linux-uvc-devel] Creative AF
Message-ID: <1196451425.2818.11.camel@interele.demon.co.uk>

Hopefully I'm in the right list ...

I have a Creative Optia AF 
I built and installed uncvideo
and everything seem to go OK
However the picture in Ekiga looks
like a 60's acid trip and luvcview
gives:

luvcview version 0.2.1 
Video driver: x11
A window manager is available
video /dev/video0 
Unable to set format: 22.
 Init v4L2 failed !! exit fatal 

this is fedora 8

I have a bttv card in the machine too

Have I done anything wrong

best wishes

Mal



From uvc-devel at jollyrotten.org  Fri Nov 30 22:19:10 2007
From: uvc-devel at jollyrotten.org (Anthony Durity)
Date: Fri, 30 Nov 2007 22:19:10 +0100
Subject: [Linux-uvc-devel] Sanyo au W33SA cellphone web-cam support?
In-Reply-To: <47504B67.3090403@myrealbox.com>
References: <474A94A0.7070302@myrealbox.com>
	<200711282028.10452.laurent.pinchart@skynet.be>
	<474EAD5F.1030103@myrealbox.com>
	<200711292056.18394.laurent.pinchart@skynet.be>
	<47504B67.3090403@myrealbox.com>
Message-ID: <b1923f7f0711301319x3876b7fdr8a1b3ba3da923f2c@mail.gmail.com>

What is gstfakevideo? I can't get my webcam working with Skype Beta 2 on
Ubuntu 64bit.
It's a Logitech QuickCam for Notebooks Pro 2006 version.
Is this a workaround?

On 11/30/07, Samir Ibradzic <samir.i at myrealbox.com> wrote:
>
>
> Laurent, thanks again! Checked the latest uvcvideo revision, and my
> camera works fine...
>
> Kudos for your hard work!
>
> To all who may concern, camera works with luvcview, ekiga and mplayer
> without any hassle. I will try other japanese Sanyo cellphone models
> with this as soon as i get chance...
>
> some mplayer syntax;
>
> mplayer -tv
> driver=v4l2:width=320:height=240:device=/dev/video0:fps=15:outfmt=yuy2
> tv://
>
> camera worked with gstreamer too, when specifying some pipeline settings
> like;
>
> gst-launch-0.10 v4l2src ! jpegdec ! xvimagesink
>
> and even gstreamer-properties, when specifying custom video plugin
> settings, as;
>
> v4l2src device="/dev/video0" ! jpegdec ! ffmpegcolorspace
>
> but for some strange reasons, these custom settings doesn't stick in the
> properties!?!
>
> i also made it work with Skype beta 2, by using a thing called
> gstfakevideo (or skype_video_hijacker, how it was previously called);
>
> sudo mv /dev/video0 /dev/video1
> gstfakevideo v4l2src device=/dev/video1 ! jpegdec ! ffmpegcolorspace
>
> note that these 'tricks' might also work with other non-YUV, MJPEG only
> UVC cameras...
>
>
> Samir
>
>
> Laurent Pinchart wrote:
> > Hi Samir,
> >
> > On Thursday 29 November 2007, Samir Ibradzic wrote:
> >> Laurent, you are just remarkable!
> >
> > Thanks :-)
> >
> >> Camera worked, just after the patch was applied!
> >
> > I committed it to SVN.
> >
> >> I tested it using lucview, though no controls are working...
> >
> > That's because your phone has no video controls, so that's pretty
> normal.
> >
> >> here's dmesg;
> >>
> > [snip]
> >> ...
> >>
> >> Why all these details in kernel messages? Just for the sake of the
> test?
> >
> > Those are debug messages. You can turn them off by setting the trace
> parameter
> > back to 0.
> >
> >> How can i set it up to work in gstreamer?
> >>
> >> I have the following error in gstreamer-properties;
> >>
> >> gstreamer-properties-Message: Error running pipeline 'Video for Linux 2
> >> (v4l2)': Could not negotiate format [gstbasesrc.c(2062):
> >> gst_base_src_start (): /pipeline0/v4l2src3:
> >> Check your filtered caps, if any]
> >
> > I've never really used gstreamer, so don't know what goes wrong. Your
> phone
> > supports MJPEG only while most other UVC devices support YUV as well.
> That
> > might be a clue.
> >
> >> Thanks again for your hard work! This means one more camera can work in
> >> Linux! Actually, there is a whole line of Sanyo (au) cellphones
> >> available here in japan, who probably use same or very similar camera
> >> USB interface...
> >
> > Best regards,
> >
> > Laurent Pinchart
> >
> > --- AV & Spam Filtering by M+Guardian - Risk Free Email (TM) ---
> >
> >
>
>
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20071130/637e25ce/attachment.html>

From graham at gmurray.org.uk  Fri Nov 30 23:05:02 2007
From: graham at gmurray.org.uk (Graham Murray)
Date: Fri, 30 Nov 2007 22:05:02 +0000
Subject: [Linux-uvc-devel] Creative AF
In-Reply-To: <1196451425.2818.11.camel@interele.demon.co.uk>
	(malcolm@interele.demon.co.uk's message of "Fri, 30 Nov 2007 19:37:05
	+0000")
References: <1196451425.2818.11.camel@interele.demon.co.uk>
Message-ID: <87d4tr4cfl.fsf@newton.gmurray.org.uk>

malcolm <malcolm at interele.demon.co.uk> writes:

> Hopefully I'm in the right list ...
>
> I have a Creative Optia AF 
> I built and installed uncvideo
> and everything seem to go OK
> However the picture in Ekiga looks
> like a 60's acid trip and luvcview
> gives:
>
> luvcview version 0.2.1 
> Video driver: x11
> A window manager is available
> video /dev/video0 
> Unable to set format: 22.
>  Init v4L2 failed !! exit fatal 

I see the same effect initially with kopete have to adjust the controls
(I normally use 'Saturation') before the picture becomes normal. 

luvcview 0.2.1 shows the video with no problems but not all controls
work (presumably because the camera does not support them)


