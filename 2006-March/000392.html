<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] Problems with QuickCam Pro 5000
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2006-March/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Problems%20with%20QuickCam%20Pro%205000&In-Reply-To=%3C20060329193411.GA17295%40localhost.localdomain%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000386.html">
   <LINK REL="Next"  HREF="000393.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] Problems with QuickCam Pro 5000</H1>
    <B>Eduardo P&#233;rez Ureta</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Problems%20with%20QuickCam%20Pro%205000&In-Reply-To=%3C20060329193411.GA17295%40localhost.localdomain%3E"
       TITLE="[Linux-uvc-devel] Problems with QuickCam Pro 5000">eduardo.perez at uc3m.es
       </A><BR>
    <I>Wed Mar 29 21:34:11 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000386.html">[Linux-uvc-devel] Problems with QuickCam Pro 5000
</A></li>
        <LI>Next message: <A HREF="000393.html">[Linux-uvc-devel] Problems with QuickCam Pro 5000
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#392">[ date ]</a>
              <a href="thread.html#392">[ thread ]</a>
              <a href="subject.html#392">[ subject ]</a>
              <a href="author.html#392">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2006-03-28 15:09:35 +0200, Christian Iversen wrote:
&gt;<i> Hi. I've recently bought a Logitech QC Pro 5000. I've compiled and 
</I>&gt;<i> installed the driver on a 2.6.14 kernel.
</I>&gt;<i> 
</I>&gt;<i> uvcviewer works fine. I get a good clean picture in (what seems to 
</I>&gt;<i> be) 640x480 x 30fps.
</I>&gt;<i> 
</I>&gt;<i> Now, I've tried various programs, to see if I can make this webcam work with 
</I>&gt;<i> anything other than uvcviewer.
</I>&gt;<i> 
</I>&gt;<i> #### Lavrec ####
</I>&gt;<i> 
</I>&gt;<i> [<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">root at zephyr</A>]~ #LAV_VIDEO_DEV=/dev/video1 lavrec -v2  test.avi
</I>&gt;<i>    INFO: [lavrec] Recording parameters:
</I>&gt;<i>    INFO: [lavrec] Output format:      AVI
</I>&gt;<i>    INFO: [lavrec] Input Source:       Auto detect
</I>&gt;<i> 
</I>&gt;<i>    INFO: [lavrec] Decimation:         4
</I>&gt;<i>    INFO: [lavrec] Quality:            50
</I>&gt;<i>    INFO: [lavrec] Recording time:     -1 sec
</I>&gt;<i>    INFO: [lavrec]
</I>&gt;<i>    INFO: [lavrec] MJPEG buffer size:  256 KB
</I>&gt;<i>    INFO: [lavrec] # of MJPEG buffers: 64
</I>&gt;<i>    INFO: [lavrec] Audio parameters:
</I>&gt;<i>    INFO: [lavrec] Audio sample size:           16 bit
</I>&gt;<i>    INFO: [lavrec] Audio sampling rate:         44100 Hz
</I>&gt;<i>    INFO: [lavrec] Audio is MONO
</I>&gt;<i>    INFO: [lavrec] Audio input recording level: Use mixer setting
</I>&gt;<i>    INFO: [lavrec] Level of correction for Audio/Video synchronization:
</I>&gt;<i>    INFO: [lavrec] Lost frame compensation and frame drop/insert
</I>&gt;<i> --DEBUG: [lavrec] Maximum size per file will be 1739 MB
</I>&gt;<i>    INFO: [lavrec] Using mmap(2) system call for capture
</I>&gt;<i>    INFO: [lavrec] Auto detecting input and norm ...
</I>&gt;<i>    INFO: [lavrec] Trying Composite ...
</I>&gt;<i> **ERROR: [lavrec] Error getting video input status: Invalid argument
</I>&gt;<i> ++ WARN: [lavrec] Not ready for capture (state = 0)!
</I>&gt;<i> zsh: segmentation fault  LAV_VIDEO_DEV=/dev/video1 lavrec -v2 test.avi
</I>&gt;<i> 
</I>&gt;<i> I think the problem here is that lavrec expects PAL, NTSC or SECAM. Of course, 
</I>&gt;<i> selecting one of those standards is not going to work.
</I>
Then, most probably, there is a problem in lavrec that should be fixed there.
You should ask lavrec maintainers if they made lavrec work with a USB webcam.

&gt;<i> #### Transcode ####
</I>&gt;<i> 
</I>&gt;<i> [<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">root at zephyr</A>]~ #transcode -x v4l2,null -i /dev/video1 -g160x120 -y ffmpeg -F 
</I>&gt;<i> mpeg4 -w 1024 -c 0-0:0:10 -o test.avi
</I>&gt;<i> transcode v1.0.2 (C) 2001-2003 Thomas Oestreich, 2003-2004 T. Bitterberg
</I>&gt;<i> [transcode] (probe) suggested AV correction -D 0 (0 ms) | AV 0 ms | 0 ms
</I>&gt;<i> [transcode] auto-probing source /dev/video1 (ok)
</I>&gt;<i> [transcode] V: import format    | unknown  (V=v4l2|A=null)
</I>&gt;<i> [transcode] V: import frame     | 160x120  1.33:1
</I>&gt;<i> [transcode] V: bits/pixel       | 2.133
</I>&gt;<i> [transcode] V: decoding fps,frc | 25.000,3
</I>&gt;<i> [transcode] V: Y'CbCr           | YV12/I420
</I>&gt;<i> [transcode] A: import format    | 0x1     PCM          [44100,16,2]
</I>&gt;<i> [transcode] A: export format    | 0x55    MPEG layer-3 [44100,16,2]  128 kbps
</I>&gt;<i> [transcode] V: encoding fps,frc | 25.000,3
</I>&gt;<i> [transcode] A: bytes per frame  | 7056 (7056.000000)
</I>&gt;<i> [transcode] A: adjustment       | <A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">0 at 1000</A>
</I>&gt;<i> [transcode] V: IA32/AMD64 accel | sse (sse 3dnowext 3dnow mmxext mmx asm C)
</I>&gt;<i> tc_memcpy: using sse for memcpy
</I>&gt;<i> [transcode] V: video buffer     | 10 @ 160x120
</I>&gt;<i> [import_null.so] v0.2.0 (2002-01-19) (video) null | (audio) null
</I>&gt;<i> [import_v4l2.so] v1.3.5 (2005-03-11) (video) v4l2 | (audio) pcm
</I>&gt;<i> [export_ffmpeg.so] v0.3.13 (2004-08-03) (video) Lavc51.0.0 | (audio) 
</I>&gt;<i> MPEG/AC3/PCM
</I>&gt;<i> [import_v4l2.so]: v4l2 video grabbing
</I>&gt;<i> [import_v4l2.so]: resync disabled
</I>&gt;<i> [import_v4l2.so]: video grabbing, driver = uvcvideo, card = USB Video Class 
</I>&gt;<i> device
</I>&gt;<i> [import_v4l2.so]: VIDIOC_S_FMT: : Invalid argument
</I>&gt;<i> [import_v4l2.so]: VIDIOC_S_FMT: : Invalid argument
</I>&gt;<i> [import_v4l2.so]: VIDIOC_S_FMT: : Invalid argument
</I>&gt;<i> [import_v4l2.so]: no usable pixel format supported by card
</I>&gt;<i> video import module error: OPEN failed
</I>&gt;<i> [transcode] critical: failed to open input source
</I>&gt;<i> 
</I>&gt;<i> I'm not exactly sure what format import_v4l2.so wants, but it doesn't seem to 
</I>&gt;<i> be supported. 
</I>
You should ask the import_v4l2 maintainer to print the formats tried on
every VIDIOC_S_FMT call instead of just 'Invalid argument'.
And if one of those pixel formats is supposed to work with the webcam
them maybe there is a problem in the uvc driver.

&gt;<i> #### XawTV ####
</I>&gt;<i> 
</I>&gt;<i> This is xawtv-3.94, running on Linux/i686 (2.6.14-zephyr)
</I>&gt;<i> xinerama 0: 1280x1024+0+0
</I>&gt;<i> xinerama 1: 1280x1024+1280+0
</I>&gt;<i> X Error of failed request:  XF86DGANoDirectVideoMode
</I>&gt;<i>   Major opcode of failed request:  137 (XFree86-DGA)
</I>&gt;<i>   Minor opcode of failed request:  1 (XF86DGAGetVideoLL)
</I>&gt;<i>   Serial number of failed request:  13
</I>&gt;<i>   Current serial number in output stream:  13
</I>&gt;<i> v4l-conf had some trouble, trying to continue anyway
</I>&gt;<i> Warning: Cannot convert string &quot;-*-ledfixed-medium-r-*--39-*-*-*-c-*-*-*&quot; to 
</I>&gt;<i> type FontStruct
</I>&gt;<i> ioctl: VIDIOC_G_STD(std=0xbf859bb4 
</I>&gt;<i> [PAL_G,PAL_I,PAL_D,PAL_K,PAL_M,PAL_N,PAL_60,NTSC_M,?,SECAM_B,SECAM_G,?ATSC_8_VSB,ATSC_16_VSB,
</I>&gt;<i> (null),(null),(null),(null),(null),(null)]): Invalid argument
</I>&gt;<i> config: invalid value for input: Television
</I>&gt;<i> valid choices for &quot;input&quot;: &quot;Camera&quot;
</I>&gt;<i> config: invalid value for norm: PAL
</I>&gt;<i> valid choices for &quot;norm&quot;:
</I>&gt;<i> ioctl: VIDIOC_S_CTRL(id=9963778;value=124): Input/output error
</I>&gt;<i> ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument
</I>&gt;<i> ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0 
</I>&gt;<i> [];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.seconds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits=&quot;&quot;;sequence=0;memory=unknown): 
</I>&gt;<i> Invalid argument
</I>&gt;<i> ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0 
</I>&gt;<i> [];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.seconds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits=&quot;&quot;;sequence=0;memory=unknown): 
</I>&gt;<i> Invalid argument
</I>&gt;<i> &lt;ctrl-c pressed here&gt;
</I>&gt;<i> zsh: segmentation fault  xawtv -nodga -c /dev/video1
</I>&gt;<i> 
</I>&gt;<i> I don't know what the problem with this is, either. Is XawTV supposed to work?
</I>
This seems like a bug in the uvc driver that does not correctly support
VIDIOC_DQBUF but maybe XawTV is not totally ready for USB webcams.

&gt;<i> #### Kopete ####
</I>&gt;<i> 
</I>&gt;<i> (which is what I mostly want to use this cam for)
</I>
There are people in this list that have the webcam working with kopete.
You should ask them. Maybe there is some patch left to apply to kopete or
the uvc driver.

&gt;<i> I actually get a picture! It's even in 30fps. Unfortunately, the colors are 
</I>&gt;<i> all wrong! The color of the first pixel on each scanline is duplicated 
</I>&gt;<i> throughout that line. I have a picture of that effect here:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://iversen-net.dk/~chrivers/uvc/kopete-qc-problems.png">http://iversen-net.dk/~chrivers/uvc/kopete-qc-problems.png</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ####
</I>&gt;<i> 
</I>&gt;<i> Now, if anybody has any idea on making any of these cases work, I'd be very 
</I>&gt;<i> interested.
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000386.html">[Linux-uvc-devel] Problems with QuickCam Pro 5000
</A></li>
	<LI>Next message: <A HREF="000393.html">[Linux-uvc-devel] Problems with QuickCam Pro 5000
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#392">[ date ]</a>
              <a href="thread.html#392">[ thread ]</a>
              <a href="subject.html#392">[ subject ]</a>
              <a href="author.html#392">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
