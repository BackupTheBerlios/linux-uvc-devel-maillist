<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] -Werror fixes for uvcvideo
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2007-February/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20-Werror%20fixes%20for%20uvcvideo&In-Reply-To=%3Cop.tm3n1mh842iof8%40nb-mrublixp.am.logitech.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001319.html">
   <LINK REL="Next"  HREF="001323.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] -Werror fixes for uvcvideo</H1>
    <B>Martin Rubli</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20-Werror%20fixes%20for%20uvcvideo&In-Reply-To=%3Cop.tm3n1mh842iof8%40nb-mrublixp.am.logitech.com%3E"
       TITLE="[Linux-uvc-devel] -Werror fixes for uvcvideo">linux at rubli.info
       </A><BR>
    <I>Fri Feb  2 03:33:12 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="001319.html">[Linux-uvc-devel] -Werror fixes for uvcvideo
</A></li>
        <LI>Next message: <A HREF="001323.html">[Linux-uvc-devel] -Werror fixes for uvcvideo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1322">[ date ]</a>
              <a href="thread.html#1322">[ thread ]</a>
              <a href="subject.html#1322">[ subject ]</a>
              <a href="author.html#1322">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 01 Feb 2007 12:12:00 -0800, Luigi Rizzo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">rizzo at icir.org</A>&gt; wrote:

&gt;<i> one reason of concern is a note about future support that i misread
</I>&gt;<i> in <A HREF="http://gcc.gnu.org/onlinedocs/gcc/Unnamed-Fields.html:">http://gcc.gnu.org/onlinedocs/gcc/Unnamed-Fields.html:</A>
</I>&gt;<i>
</I>&gt;<i> 	... For example, this structure:
</I>&gt;<i> 		...
</I>&gt;<i> 	It is ambiguous which a is being referred to with `foo.a'.
</I>&gt;<i> 	Such constructs are not supported and must be avoided.  In
</I>&gt;<i> 	the future, such constructs may be detected and treated as
</I>&gt;<i> 	compilation errors.
</I>&gt;<i>
</I>&gt;<i> maybe the note on treating these as errors in the future
</I>&gt;<i> refers only to ambiguous constructs and not to all unnamed unions.
</I>
Yes, indeed. In our case there is no ambiguity. The whole struct becomes  
much easier to read if the unions are anonymous.

&gt;<i> the other reason for concern is ease of porting to other systems --  
</I>&gt;<i> things like pragmas and attributes are easy to remap with a one time
</I>&gt;<i> #define, but unnamed extensions are a pain to handle because you
</I>&gt;<i> have to modify all references to the fields in the source.
</I>&gt;<i>
</I>&gt;<i> and of course - there is the issue of code safety, because
</I>&gt;<i> 1)this feature can cause ambiguous constructs, and 2) it doesn't
</I>&gt;<i> suggest the programmer that multiple items are sharing the same
</I>&gt;<i> memory location. The union name at least gives you some hints,
</I>&gt;<i> especially if you call it 'u' ...
</I>
I somewhat agree with the portability part. However, these Linux system  
structures (they're part of V4L2 and, therefore, the official Linux  
kernel) are not designed to be portable. And given the wide availability  
of gcc I think you'd have a hard time finding a platform to port V4L2 to  
that doesn't support these constructs.

If you want, you can raise the discussion on the V4L2 mailing list. When  
we proposed the changes we were really just trying to fit in to what was  
already there.

Cheers,
Martin

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001319.html">[Linux-uvc-devel] -Werror fixes for uvcvideo
</A></li>
	<LI>Next message: <A HREF="001323.html">[Linux-uvc-devel] -Werror fixes for uvcvideo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1322">[ date ]</a>
              <a href="thread.html#1322">[ thread ]</a>
              <a href="subject.html#1322">[ subject ]</a>
              <a href="author.html#1322">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
