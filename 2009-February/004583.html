<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] Strange issue with V4L, Gumstix,	and VIDIOC_REQBUFS/VIDIOC_QUERYBUF
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Strange%20issue%20with%20V4L%2C%20Gumstix%2C%0A%09and%20VIDIOC_REQBUFS/VIDIOC_QUERYBUF&In-Reply-To=%3C49A3DF53.8080302%40atl.lmco.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004588.html">
   <LINK REL="Next"  HREF="004590.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] Strange issue with V4L, Gumstix,	and VIDIOC_REQBUFS/VIDIOC_QUERYBUF</H1>
    <B>Tom Moore</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Strange%20issue%20with%20V4L%2C%20Gumstix%2C%0A%09and%20VIDIOC_REQBUFS/VIDIOC_QUERYBUF&In-Reply-To=%3C49A3DF53.8080302%40atl.lmco.com%3E"
       TITLE="[Linux-uvc-devel] Strange issue with V4L, Gumstix,	and VIDIOC_REQBUFS/VIDIOC_QUERYBUF">thomas.a.moore at lmco.com
       </A><BR>
    <I>Tue Feb 24 12:51:47 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004588.html">[Linux-uvc-devel] Supported camera: Aldi Traveler DC 8900
</A></li>
        <LI>Next message: <A HREF="004590.html">[Linux-uvc-devel] Strange issue with V4L, Gumstix,	and VIDIOC_REQBUFS/VIDIOC_QUERYBUF
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4583">[ date ]</a>
              <a href="thread.html#4583">[ thread ]</a>
              <a href="subject.html#4583">[ subject ]</a>
              <a href="author.html#4583">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I wrote some capture code and tested it out on Ubuntu 8.10 (kernel 
2.6.27.11). My Dynex 1.3 MP camera supports memory mapping and works 
just fine on my Ubuntu box. However, I have cross-compiled the UVC 
driver for my Gumstix (the target platform for capture - kernel is 
2.6.21) and though I was able to successfully install the driver, my 
capture code doesn't seem to work. I've traced the problem to to ioctl 
call with VIDIOC_QUERYBUF. On my box, that function call returns a 
buffer length of width * height * 2 (format is YUYV, so this is right). 
On my Gumstix, it returns width * height + 589 (the 589 is the same 
regardless of the frame size).

Is there any reason why this would be happening? I appear to be 
unfamilar with the behavior of VIDIOC_QUERYBUF, but it looks like it 
ought to be pretty straightforward.

Oh, I should point out that calls to VIDIOCSPICT and VIDIOCGPICT on my 
Ubuntu box works just fine, but returns -1 for the Gumstix. This camera 
requires that I use some bizarre combinations of V4L1 and V4L2 code to 
access all of its functionality. I'm not sure what versions of the 
various V4L modules and camera drivers are.

Thanks in advance.

-Tom

-- 

Tom Moore
Member, Engineering Staff
Lockheed Martin Advanced Technology Laboratories
3 Executive Campus, Suite 600
Cherry Hill, NJ 08002
Phone: 856-792-9750
E-mail: <A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">tmoore at atl.lmco.com</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004588.html">[Linux-uvc-devel] Supported camera: Aldi Traveler DC 8900
</A></li>
	<LI>Next message: <A HREF="004590.html">[Linux-uvc-devel] Strange issue with V4L, Gumstix,	and VIDIOC_REQBUFS/VIDIOC_QUERYBUF
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4583">[ date ]</a>
              <a href="thread.html#4583">[ thread ]</a>
              <a href="subject.html#4583">[ subject ]</a>
              <a href="author.html#4583">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
