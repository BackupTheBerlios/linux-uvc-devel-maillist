From csmith at mclellanfunds.com  Wed Feb  1 03:55:44 2006
From: csmith at mclellanfunds.com (Christopher Smith)
Date: Tue, 31 Jan 2006 21:55:44 -0500
Subject: [Linux-uvc-devel] Logitech Communicate STX Support
Message-ID: <43E02330.8050803@mclellanfunds.com>

Is the Logitech Communicate STX supported?


From Olivier.Bornet at idiap.ch  Wed Feb  1 12:30:12 2006
From: Olivier.Bornet at idiap.ch (Olivier Bornet)
Date: Wed, 1 Feb 2006 12:30:12 +0100
Subject: [Linux-uvc-devel] linux-uvc also on MacOS X ?
Message-ID: <20060201113012.GN27958@idiap.ch>

Hello all,

(sorry to be a little bit off-topic...)

do you know if there is a way to use one of the Logitech webcam
supported by linux-uvc on a Mac ? I have a co-worker with a PowerBook,
and he want to know if he can use one of these webcams.

(I don't have any experience with MacOS X...)

Thanks in advance.

        Olivier
-- 
Olivier Bornet, IDIAP, CP 592, CH-1920 Martigny
http://www.idiap.ch/~bornet/
http://www.idiap.ch/~bornet/pgp/
PGP-key: 0xC53D9218
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20060201/c0a26ef6/attachment.pgp>

From jmarina at gmail.com  Wed Feb  1 20:30:52 2006
From: jmarina at gmail.com (Jorge Marina)
Date: Wed, 1 Feb 2006 20:30:52 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Express
Message-ID: <584992990602011130h5fc8d2c1l@mail.gmail.com>

Device ID: 046d:0928

I am not sure that this is a uvc compatible device

Thanks in advance

Jorge
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20060201/5c25e746/attachment.html>

From mini at nada.kth.se  Wed Feb  1 20:41:49 2006
From: mini at nada.kth.se (Mikael Nilsson)
Date: Wed, 01 Feb 2006 20:41:49 +0100
Subject: [Linux-uvc-devel] Ekiga (aka gnomemeeting) support MJPEG stream
In-Reply-To: <20060130151906.GE20164@sd291.sivit.org>
References: <20060130151906.GE20164@sd291.sivit.org>
Message-ID: <1138822909.12231.94.camel@yossarian>

I just installed the latest ekiga-cvs debian package, along with the
libpt-cvs-plugins-v4l2 package.

And, wow, I get video with my QC Fusion!

So that means the driver works well for my USB1.1 setup, even though
uvcview does not work for some reason.

I'm very satisfied now :-)

/Mikael

m?n 2006-01-30 klockan 16:19 +0100 skrev Luc Saillard:
> Since yesterday, we have another application to use with our webcam. I've
> made some tests with the logitech fusion on a x86 system. The decoder has
> been tested on an ppc system, but not the application, so if someone have the
> hardware to test ...
> 
> 
> Luc
> [1] ekiga: http://ekiga.org/
>            http://snapshots.seconix.com/
>            http://www.gnomemeeting.org/
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 
-- 
Plus ?a change, plus c'est la m?me chose



From laurent.pinchart at skynet.be  Wed Feb  1 22:37:49 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 1 Feb 2006 22:37:49 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Express
In-Reply-To: <584992990602011130h5fc8d2c1l@mail.gmail.com>
References: <584992990602011130h5fc8d2c1l@mail.gmail.com>
Message-ID: <200602012237.49325.laurent.pinchart@skynet.be>

> Device ID: 046d:0928
>
> I am not sure that this is a uvc compatible device

That's a spca5xx device. http://mxhaard.free.fr/spca5xx.html

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Feb  1 22:38:55 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 1 Feb 2006 22:38:55 +0100
Subject: [Linux-uvc-devel] Logitech Communicate STX Support
In-Reply-To: <43E02330.8050803@mclellanfunds.com>
References: <43E02330.8050803@mclellanfunds.com>
Message-ID: <200602012238.55181.laurent.pinchart@skynet.be>

> Is the Logitech Communicate STX supported?

That's a spca5xx device. http://mxhaard.free.fr/spca5xx.html

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Feb  1 22:40:45 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 1 Feb 2006 22:40:45 +0100
Subject: [Linux-uvc-devel] linux-uvc also on MacOS X ?
In-Reply-To: <20060201113012.GN27958@idiap.ch>
References: <20060201113012.GN27958@idiap.ch>
Message-ID: <200602012240.45332.laurent.pinchart@skynet.be>

Hi Olivier,

> (sorry to be a little bit off-topic...)
>
> do you know if there is a way to use one of the Logitech webcam
> supported by linux-uvc on a Mac ? I have a co-worker with a PowerBook,
> and he want to know if he can use one of these webcams.

Your co-worker can either port the driver to MacOS X, or install Linux on his 
Mac :-)

Laurent Pinchart


From Olivier.Bornet at idiap.ch  Thu Feb  2 08:32:17 2006
From: Olivier.Bornet at idiap.ch (Olivier Bornet)
Date: Thu, 2 Feb 2006 08:32:17 +0100
Subject: [Linux-uvc-devel] linux-uvc also on MacOS X ?
In-Reply-To: <200602012240.45332.laurent.pinchart@skynet.be>
References: <20060201113012.GN27958@idiap.ch> <200602012240.45332.laurent.pinchart@skynet.be>
Message-ID: <20060202073217.GP27958@idiap.ch>

Hi Laurent,

> > do you know if there is a way to use one of the Logitech webcam
> > supported by linux-uvc on a Mac ? I have a co-worker with a PowerBook,
> > and he want to know if he can use one of these webcams.
> 
> Your co-worker can either port the driver to MacOS X, or install Linux on his 
> Mac :-)

Thanks for the answer. The choice was to order a supported webcam. ;-)

Have a nice day.

        Olivier
-- 
Olivier Bornet, IDIAP, CP 592, CH-1920 Martigny
http://www.idiap.ch/~bornet/
http://www.idiap.ch/~bornet/pgp/
PGP-key: 0xC53D9218
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20060202/3dc7572c/attachment.pgp>

From pmwisse at wanadoo.nl  Thu Feb  2 10:08:52 2006
From: pmwisse at wanadoo.nl (Maarten Wisse)
Date: Thu, 2 Feb 2006 10:08:52 +0100
Subject: [Linux-uvc-devel] Fuji Finepix S5500 -- kernel call trace
Message-ID: <200602021008.52488.pmwisse@wanadoo.nl>

Dear linux-uvc developers,

first, thanks for developing this driver. I've been looking for it for some 
time, since I have a Fuji Finepix S5500 with a webcam mode based on uvc.

I've tried the driver on 2.6.15-suspend2-r3 Gentoo kernel--driver from SVN 
from yesterday, version 0.1.0. It compiles properly, loads properly (it may 
help for some to know that multimedia support needs to be a module or 
compiled into the kernel---otherwise, the driver compiles with some warnings 
but doesn't load due to missing symbols). It even recognizes the device as a 
web camera:

uvcvideo: Found UVC 1.00 device USB Web Camera (04cb:016f)

but when I try uvcview on it, uvcview segfaults and I get a trace in dmesg. I 
attached the trace for your information.

Best regards,

Maarten Wisse

-------------- next part --------------
Linux video capture interface: v1.00
usbcore: registered new driver usbvideo
USB Video Class driver (v0.1.0)
spurious 8259A interrupt: IRQ7.
usb 1-2: new full speed USB device using uhci_hcd and address 2
uvcvideo: Found UVC 1.00 device USB Web Camera (04cb:016f)
divide error: 0000 [#1]
PREEMPT 
Modules linked in: uvcvideo videodev v4l2_common savage drm snd_pcm_oss snd_mixer_oss snd_seq_oss snd_seq_midi_event snd_seq snd_via82xx snd_ac97_codec snd_ac97_bus snd_pcm snd_timer snd_page_alloc snd_mpu401_uart snd_rawmidi snd_seq_device snd soundcore atmel_cs atmel firmware_class yenta_socket rsrc_nonstatic pcmcia pcmcia_core via_agp agpgart ehci_hcd uhci_hcd usbcore via_rhine mii ide_cd cdrom loop cpufreq_ondemand cpufreq_userspace powernow_k7
CPU:    0
EIP:    0060:[<dee0466a>]    Not tainted VLI
EFLAGS: 00210256   (2.6.15-suspend2-r3) 
EIP is at uvc_v4l2_try_format+0x290/0x4ac [uvcvideo]
eax: 00000000   ebx: 000f4240   ecx: 000f4240   edx: 00000000
esi: 00000000   edi: 00000000   ebp: dc5234f4   esp: cd849d4c
ds: 007b   es: 007b   ss: 0068
Process uvcview (pid: 10335, threadinfo=cd848000 task=ce2a35a0)
Stack: 0120e2d0 00000020 00000001 8d407300 00000001 00006000 014000f0 dc5234f4 
       dc5234c0 d22c4aa8 cd849f2c c17fa1a0 c01648e3 ddfe4d48 c031c750 c17fa1a0 
       00000000 c0159279 ddfe4d20 c17fa1a0 ddfe4d20 00200286 d1a75000 00000013 
Call Trace:
 [<c01648e3>] mntput_no_expire+0x14/0x83
 [<c0159279>] link_path_walk+0xa5/0xaf
 [<c01f36c3>] write_chan+0x0/0x1ab
 [<dee04935>] uvc_v4l2_set_format+0x2e/0x77 [uvcvideo]
 [<c011f546>] __rcu_process_callbacks+0x98/0xb3
 [<c011f589>] rcu_process_callbacks+0x28/0x2c
 [<dee04db9>] uvc_v4l2_do_ioctl+0x344/0x463 [uvcvideo]
 [<c01159ef>] tasklet_action+0x3a/0x57
 [<c0115794>] __do_softirq+0x34/0x7d
 [<c01b5ee6>] copy_from_user+0x3a/0x60
 [<dedd0354>] video_usercopy+0x9e/0xf7 [videodev]
 [<dee04f06>] uvc_v4l2_ioctl+0x2e/0x32 [uvcvideo]
 [<dee04a75>] uvc_v4l2_do_ioctl+0x0/0x463 [uvcvideo]
 [<c015c288>] do_ioctl+0x54/0x65
 [<c015c51f>] vfs_ioctl+0x180/0x18e
 [<c015c558>] sys_ioctl+0x2b/0x47
 [<c01025a7>] sysenter_past_esp+0x54/0x75
Code: 8b 5c 24 1c 8b 54 24 10 8b 43 1c 8b 74 90 fc eb 27 8b 4c 24 1c 31 d2 8b 41 1c 8b 78 08 8b 08 8b 58 04 89 f8 29 ce d1 e8 8d 04 06 <f7> f7 0f af c7 8d 34 01 39 de 0f 47 f3 31 c0 b9 09 00 00 00 8b 
 <1>divide error: 0000 [#2]
PREEMPT 
Modules linked in: uvcvideo videodev v4l2_common savage drm snd_pcm_oss snd_mixer_oss snd_seq_oss snd_seq_midi_event snd_seq snd_via82xx snd_ac97_codec snd_ac97_bus snd_pcm snd_timer snd_page_alloc snd_mpu401_uart snd_rawmidi snd_seq_device snd soundcore atmel_cs atmel firmware_class yenta_socket rsrc_nonstatic pcmcia pcmcia_core via_agp agpgart ehci_hcd uhci_hcd usbcore via_rhine mii ide_cd cdrom loop cpufreq_ondemand cpufreq_userspace powernow_k7
CPU:    0
EIP:    0060:[<dee0466a>]    Not tainted VLI
EFLAGS: 00210256   (2.6.15-suspend2-r3) 
EIP is at uvc_v4l2_try_format+0x290/0x4ac [uvcvideo]
eax: 00000000   ebx: 000f4240   ecx: 000f4240   edx: 00000000
esi: 00000000   edi: 00000000   ebp: dc5234f4   esp: cfc27d4c
ds: 007b   es: 007b   ss: 0068
Process uvcview (pid: 10348, threadinfo=cfc26000 task=cf414a50)
Stack: 0120e748 00000020 00000001 8bb0f000 00000001 00006000 014000f0 dc5234f4 
       dc5234c0 d22c4aa8 cfc27f2c c17fa1a0 c01648e3 ddfe4d48 c031c750 c17fa1a0 
       00000000 c0159279 ddfe4d20 c17fa1a0 ddfe4d20 00200286 d1a75000 00000013 
Call Trace:
 [<c01648e3>] mntput_no_expire+0x14/0x83
 [<c0159279>] link_path_walk+0xa5/0xaf
 [<c01f36c3>] write_chan+0x0/0x1ab
 [<dee04935>] uvc_v4l2_set_format+0x2e/0x77 [uvcvideo]
 [<c01f2d5b>] n_tty_receive_buf+0xb25/0xb58
 [<c01648e3>] mntput_no_expire+0x14/0x83
 [<dee04db9>] uvc_v4l2_do_ioctl+0x344/0x463 [uvcvideo]
 [<c01b5ee6>] copy_from_user+0x3a/0x60
 [<dedd0354>] video_usercopy+0x9e/0xf7 [videodev]
 [<dee04f06>] uvc_v4l2_ioctl+0x2e/0x32 [uvcvideo]
 [<dee04a75>] uvc_v4l2_do_ioctl+0x0/0x463 [uvcvideo]
 [<c015c288>] do_ioctl+0x54/0x65
 [<c015c51f>] vfs_ioctl+0x180/0x18e
 [<c015c558>] sys_ioctl+0x2b/0x47
 [<c01025a7>] sysenter_past_esp+0x54/0x75
Code: 8b 5c 24 1c 8b 54 24 10 8b 43 1c 8b 74 90 fc eb 27 8b 4c 24 1c 31 d2 8b 41 1c 8b 78 08 8b 08 8b 58 04 89 f8 29 ce d1 e8 8d 04 06 <f7> f7 0f af c7 8d 34 01 39 de 0f 47 f3 31 c0 b9 09 00 00 00 8b 
 

From Maarten.Wisse at urz.uni-heidelberg.de  Thu Feb  2 10:09:18 2006
From: Maarten.Wisse at urz.uni-heidelberg.de (Maarten Wisse)
Date: Thu, 2 Feb 2006 10:09:18 +0100
Subject: [Linux-uvc-devel] Fuji Finepix S5500 -- kernel call trace
Message-ID: <200602021009.18537.Maarten.Wisse@urz.uni-heidelberg.de>

Dear linux-uvc developers,

first, thanks for developing this driver. I've been looking for it for some 
time, since I have a Fuji Finepix S5500 with a webcam mode based on uvc.

I've tried the driver on 2.6.15-suspend2-r3 Gentoo kernel--driver from SVN 
from yesterday, version 0.1.0. It compiles properly, loads properly (it may 
help for some to know that multimedia support needs to be a module or 
compiled into the kernel---otherwise, the driver compiles with some warnings 
but doesn't load due to missing symbols). It even recognizes the device as a 
web camera:

uvcvideo: Found UVC 1.00 device USB Web Camera (04cb:016f)

but when I try uvcview on it, uvcview segfaults and I get a trace in dmesg. I 
attached the trace for your information.

Best regards,

Maarten Wisse


-- 
Dr. Maarten Wisse
NWO TALENT Research Fellow
Ecumenical Institute
Faculty of Theology
University of Heidelberg

Editor of
Ars Disputandi
The Online Journal for Philosophy of Religion
http://www.ArsDisputandi.org
Hosted by Utrecht University Library
http://www.igitur.uu.nl
-------------- next part --------------
Linux video capture interface: v1.00
usbcore: registered new driver usbvideo
USB Video Class driver (v0.1.0)
spurious 8259A interrupt: IRQ7.
usb 1-2: new full speed USB device using uhci_hcd and address 2
uvcvideo: Found UVC 1.00 device USB Web Camera (04cb:016f)
divide error: 0000 [#1]
PREEMPT 
Modules linked in: uvcvideo videodev v4l2_common savage drm snd_pcm_oss snd_mixer_oss snd_seq_oss snd_seq_midi_event snd_seq snd_via82xx snd_ac97_codec snd_ac97_bus snd_pcm snd_timer snd_page_alloc snd_mpu401_uart snd_rawmidi snd_seq_device snd soundcore atmel_cs atmel firmware_class yenta_socket rsrc_nonstatic pcmcia pcmcia_core via_agp agpgart ehci_hcd uhci_hcd usbcore via_rhine mii ide_cd cdrom loop cpufreq_ondemand cpufreq_userspace powernow_k7
CPU:    0
EIP:    0060:[<dee0466a>]    Not tainted VLI
EFLAGS: 00210256   (2.6.15-suspend2-r3) 
EIP is at uvc_v4l2_try_format+0x290/0x4ac [uvcvideo]
eax: 00000000   ebx: 000f4240   ecx: 000f4240   edx: 00000000
esi: 00000000   edi: 00000000   ebp: dc5234f4   esp: cd849d4c
ds: 007b   es: 007b   ss: 0068
Process uvcview (pid: 10335, threadinfo=cd848000 task=ce2a35a0)
Stack: 0120e2d0 00000020 00000001 8d407300 00000001 00006000 014000f0 dc5234f4 
       dc5234c0 d22c4aa8 cd849f2c c17fa1a0 c01648e3 ddfe4d48 c031c750 c17fa1a0 
       00000000 c0159279 ddfe4d20 c17fa1a0 ddfe4d20 00200286 d1a75000 00000013 
Call Trace:
 [<c01648e3>] mntput_no_expire+0x14/0x83
 [<c0159279>] link_path_walk+0xa5/0xaf
 [<c01f36c3>] write_chan+0x0/0x1ab
 [<dee04935>] uvc_v4l2_set_format+0x2e/0x77 [uvcvideo]
 [<c011f546>] __rcu_process_callbacks+0x98/0xb3
 [<c011f589>] rcu_process_callbacks+0x28/0x2c
 [<dee04db9>] uvc_v4l2_do_ioctl+0x344/0x463 [uvcvideo]
 [<c01159ef>] tasklet_action+0x3a/0x57
 [<c0115794>] __do_softirq+0x34/0x7d
 [<c01b5ee6>] copy_from_user+0x3a/0x60
 [<dedd0354>] video_usercopy+0x9e/0xf7 [videodev]
 [<dee04f06>] uvc_v4l2_ioctl+0x2e/0x32 [uvcvideo]
 [<dee04a75>] uvc_v4l2_do_ioctl+0x0/0x463 [uvcvideo]
 [<c015c288>] do_ioctl+0x54/0x65
 [<c015c51f>] vfs_ioctl+0x180/0x18e
 [<c015c558>] sys_ioctl+0x2b/0x47
 [<c01025a7>] sysenter_past_esp+0x54/0x75
Code: 8b 5c 24 1c 8b 54 24 10 8b 43 1c 8b 74 90 fc eb 27 8b 4c 24 1c 31 d2 8b 41 1c 8b 78 08 8b 08 8b 58 04 89 f8 29 ce d1 e8 8d 04 06 <f7> f7 0f af c7 8d 34 01 39 de 0f 47 f3 31 c0 b9 09 00 00 00 8b 
 <1>divide error: 0000 [#2]
PREEMPT 
Modules linked in: uvcvideo videodev v4l2_common savage drm snd_pcm_oss snd_mixer_oss snd_seq_oss snd_seq_midi_event snd_seq snd_via82xx snd_ac97_codec snd_ac97_bus snd_pcm snd_timer snd_page_alloc snd_mpu401_uart snd_rawmidi snd_seq_device snd soundcore atmel_cs atmel firmware_class yenta_socket rsrc_nonstatic pcmcia pcmcia_core via_agp agpgart ehci_hcd uhci_hcd usbcore via_rhine mii ide_cd cdrom loop cpufreq_ondemand cpufreq_userspace powernow_k7
CPU:    0
EIP:    0060:[<dee0466a>]    Not tainted VLI
EFLAGS: 00210256   (2.6.15-suspend2-r3) 
EIP is at uvc_v4l2_try_format+0x290/0x4ac [uvcvideo]
eax: 00000000   ebx: 000f4240   ecx: 000f4240   edx: 00000000
esi: 00000000   edi: 00000000   ebp: dc5234f4   esp: cfc27d4c
ds: 007b   es: 007b   ss: 0068
Process uvcview (pid: 10348, threadinfo=cfc26000 task=cf414a50)
Stack: 0120e748 00000020 00000001 8bb0f000 00000001 00006000 014000f0 dc5234f4 
       dc5234c0 d22c4aa8 cfc27f2c c17fa1a0 c01648e3 ddfe4d48 c031c750 c17fa1a0 
       00000000 c0159279 ddfe4d20 c17fa1a0 ddfe4d20 00200286 d1a75000 00000013 
Call Trace:
 [<c01648e3>] mntput_no_expire+0x14/0x83
 [<c0159279>] link_path_walk+0xa5/0xaf
 [<c01f36c3>] write_chan+0x0/0x1ab
 [<dee04935>] uvc_v4l2_set_format+0x2e/0x77 [uvcvideo]
 [<c01f2d5b>] n_tty_receive_buf+0xb25/0xb58
 [<c01648e3>] mntput_no_expire+0x14/0x83
 [<dee04db9>] uvc_v4l2_do_ioctl+0x344/0x463 [uvcvideo]
 [<c01b5ee6>] copy_from_user+0x3a/0x60
 [<dedd0354>] video_usercopy+0x9e/0xf7 [videodev]
 [<dee04f06>] uvc_v4l2_ioctl+0x2e/0x32 [uvcvideo]
 [<dee04a75>] uvc_v4l2_do_ioctl+0x0/0x463 [uvcvideo]
 [<c015c288>] do_ioctl+0x54/0x65
 [<c015c51f>] vfs_ioctl+0x180/0x18e
 [<c015c558>] sys_ioctl+0x2b/0x47
 [<c01025a7>] sysenter_past_esp+0x54/0x75
Code: 8b 5c 24 1c 8b 54 24 10 8b 43 1c 8b 74 90 fc eb 27 8b 4c 24 1c 31 d2 8b 41 1c 8b 78 08 8b 08 8b 58 04 89 f8 29 ce d1 e8 8d 04 06 <f7> f7 0f af c7 8d 34 01 39 de 0f 47 f3 31 c0 b9 09 00 00 00 8b 
 

From Maarten.Wisse at urz.uni-heidelberg.de  Thu Feb  2 10:14:02 2006
From: Maarten.Wisse at urz.uni-heidelberg.de (Maarten Wisse)
Date: Thu, 2 Feb 2006 10:14:02 +0100
Subject: [Linux-uvc-devel] Please use uni-heidelberg address
Message-ID: <200602021014.02399.Maarten.Wisse@urz.uni-heidelberg.de>

Per accident, the first mail had the wrong from address. Please use the second 
mail to reply, and block unsubscribed addresses from your list.


From laurent.pinchart at skynet.be  Thu Feb  2 10:52:07 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 2 Feb 2006 10:52:07 +0100
Subject: [Linux-uvc-devel] Fuji Finepix S5500 -- kernel call trace
In-Reply-To: <200602021009.18537.Maarten.Wisse@urz.uni-heidelberg.de>
References: <200602021009.18537.Maarten.Wisse@urz.uni-heidelberg.de>
Message-ID: <200602021052.07591.laurent.pinchart@skynet.be>

Hi Maarten,

> first, thanks for developing this driver. I've been looking for it for some
> time, since I have a Fuji Finepix S5500 with a webcam mode based on uvc.

You're welcome.

> I've tried the driver on 2.6.15-suspend2-r3 Gentoo kernel--driver from SVN
> from yesterday, version 0.1.0. It compiles properly, loads properly (it may
> help for some to know that multimedia support needs to be a module or
> compiled into the kernel---otherwise, the driver compiles with some
> warnings but doesn't load due to missing symbols).

I'll see if I can fix that.

> It even recognizes the device as a web camera:
>
> uvcvideo: Found UVC 1.00 device USB Web Camera (04cb:016f)
>
> but when I try uvcview on it, uvcview segfaults and I get a trace in dmesg.
> I attached the trace for your information.

Can you try the attached patch ?

Laurent Pinchart
-------------- next part --------------
A non-text attachment was scrubbed...
Name: zerodev.patch
Type: text/x-diff
Size: 612 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20060202/33cab127/attachment.patch>

From Maarten.Wisse at urz.uni-heidelberg.de  Thu Feb  2 11:08:30 2006
From: Maarten.Wisse at urz.uni-heidelberg.de (Maarten Wisse)
Date: Thu, 2 Feb 2006 11:08:30 +0100
Subject: [Linux-uvc-devel] Fuji Finepix S5500 -- kernel call trace
In-Reply-To: <200602021052.07591.laurent.pinchart@skynet.be>
References: <200602021009.18537.Maarten.Wisse@urz.uni-heidelberg.de> <200602021052.07591.laurent.pinchart@skynet.be>
Message-ID: <200602021108.30694.Maarten.Wisse@urz.uni-heidelberg.de>

Thanks for the reply. I'll try the patch. Luc Saillard has asked me for the 
module to have a look at it tonight, so he is working at it too.

On Thursday 02 February 2006 10:52, Laurent Pinchart wrote:
> Hi Maarten,
>
> > first, thanks for developing this driver. I've been looking for it for
> > some time, since I have a Fuji Finepix S5500 with a webcam mode based on
> > uvc.
>
> You're welcome.
>
> > I've tried the driver on 2.6.15-suspend2-r3 Gentoo kernel--driver from
> > SVN from yesterday, version 0.1.0. It compiles properly, loads properly
> > (it may help for some to know that multimedia support needs to be a
> > module or compiled into the kernel---otherwise, the driver compiles with
> > some warnings but doesn't load due to missing symbols).
>
> I'll see if I can fix that.
>
> > It even recognizes the device as a web camera:
> >
> > uvcvideo: Found UVC 1.00 device USB Web Camera (04cb:016f)
> >
> > but when I try uvcview on it, uvcview segfaults and I get a trace in
> > dmesg. I attached the trace for your information.
>
> Can you try the attached patch ?
>
> Laurent Pinchart

-- 
Dr. Maarten Wisse
NWO TALENT Research Fellow
Ecumenical Institute
Faculty of Theology
University of Heidelberg

Editor of
Ars Disputandi
The Online Journal for Philosophy of Religion
http://www.ArsDisputandi.org
Hosted by Utrecht University Library
http://www.igitur.uu.nl


From Maarten.Wisse at urz.uni-heidelberg.de  Thu Feb  2 11:21:01 2006
From: Maarten.Wisse at urz.uni-heidelberg.de (Maarten Wisse)
Date: Thu, 2 Feb 2006 11:21:01 +0100
Subject: [Linux-uvc-devel] Fuji Finepix S5500 -- kernel call trace
In-Reply-To: <200602021108.30694.Maarten.Wisse@urz.uni-heidelberg.de>
References: <200602021009.18537.Maarten.Wisse@urz.uni-heidelberg.de> <200602021052.07591.laurent.pinchart@skynet.be> <200602021108.30694.Maarten.Wisse@urz.uni-heidelberg.de>
Message-ID: <200602021121.01585.Maarten.Wisse@urz.uni-heidelberg.de>

This solves the crash in the module! But now, uvcview complains as follows:

maarten at aspire ~ $ uvcview
uvcview verion 0.1.3
Video driver: x11
A window manager is available
video /dev/video0
 format asked unavailable get width 352 height 288
Unable to start capture: 5.
Error grabbing
 Clean Up done Quit

It seems like the driver or uvcview want a smaller picture than the cam 
provides. But I don't know the resolution of the cam in webcam mode. It might 
be VGA as that is what it does when recording movies.

Best and thanks for your help so far. We're making progress!

Maarten

On Thursday 02 February 2006 11:08, Maarten Wisse wrote:
> Thanks for the reply. I'll try the patch. Luc Saillard has asked me for the
> module to have a look at it tonight, so he is working at it too.
>
> On Thursday 02 February 2006 10:52, Laurent Pinchart wrote:
> > Hi Maarten,
> >
> > > first, thanks for developing this driver. I've been looking for it for
> > > some time, since I have a Fuji Finepix S5500 with a webcam mode based
> > > on uvc.
> >
> > You're welcome.
> >
> > > I've tried the driver on 2.6.15-suspend2-r3 Gentoo kernel--driver from
> > > SVN from yesterday, version 0.1.0. It compiles properly, loads properly
> > > (it may help for some to know that multimedia support needs to be a
> > > module or compiled into the kernel---otherwise, the driver compiles
> > > with some warnings but doesn't load due to missing symbols).
> >
> > I'll see if I can fix that.
> >
> > > It even recognizes the device as a web camera:
> > >
> > > uvcvideo: Found UVC 1.00 device USB Web Camera (04cb:016f)
> > >
> > > but when I try uvcview on it, uvcview segfaults and I get a trace in
> > > dmesg. I attached the trace for your information.
> >
> > Can you try the attached patch ?
> >
> > Laurent Pinchart

-- 
Dr. Maarten Wisse
NWO TALENT Research Fellow
Ecumenical Institute
Faculty of Theology
University of Heidelberg

Editor of
Ars Disputandi
The Online Journal for Philosophy of Religion
http://www.ArsDisputandi.org
Hosted by Utrecht University Library
http://www.igitur.uu.nl


From Maarten.Wisse at urz.uni-heidelberg.de  Thu Feb  2 11:26:02 2006
From: Maarten.Wisse at urz.uni-heidelberg.de (Maarten Wisse)
Date: Thu, 2 Feb 2006 11:26:02 +0100
Subject: [Linux-uvc-devel] Fuji Finepix S5500 -- kernel call trace
In-Reply-To: <200602021121.01585.Maarten.Wisse@urz.uni-heidelberg.de>
References: <200602021009.18537.Maarten.Wisse@urz.uni-heidelberg.de> <200602021108.30694.Maarten.Wisse@urz.uni-heidelberg.de> <200602021121.01585.Maarten.Wisse@urz.uni-heidelberg.de>
Message-ID: <200602021126.03000.Maarten.Wisse@urz.uni-heidelberg.de>

> It seems like the driver or uvcview want a smaller picture than the cam
> provides. But I don't know the resolution of the cam in webcam mode. It
> might be VGA as that is what it does when recording movies.
Some additional information on what movie modes this cam provides:

vga: 640x480 and 

vga/2: 320x240

I'm not sure whether that is what comes through webcam mode too.

Best,

Maarten


From laurent.pinchart at skynet.be  Thu Feb  2 11:45:15 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 2 Feb 2006 11:45:15 +0100
Subject: [Linux-uvc-devel] Fuji Finepix S5500 -- kernel call trace
In-Reply-To: <200602021121.01585.Maarten.Wisse@urz.uni-heidelberg.de>
References: <200602021009.18537.Maarten.Wisse@urz.uni-heidelberg.de> <200602021108.30694.Maarten.Wisse@urz.uni-heidelberg.de> <200602021121.01585.Maarten.Wisse@urz.uni-heidelberg.de>
Message-ID: <200602021145.15263.laurent.pinchart@skynet.be>

> This solves the crash in the module! But now, uvcview complains as follows:
>
> maarten at aspire ~ $ uvcview
> uvcview verion 0.1.3
> Video driver: x11
> A window manager is available
> video /dev/video0
>  format asked unavailable get width 352 height 288
> Unable to start capture: 5.
> Error grabbing
>  Clean Up done Quit

Can you try 'uvcview -s 640x480' ?

Could you also send me the device descriptors ? You will need lsusb from the 
CVS version of usbutils 
(:pserver:anonymous at cvs.sourceforge.net:/cvsroot/linux-usb).

Laurent Pinchart


From tante at emptiness.de  Thu Feb  2 14:27:21 2006
From: tante at emptiness.de (=?UTF-8?B?SsO8cmdlbiBHZXV0ZXI=?=)
Date: Thu, 02 Feb 2006 14:27:21 +0100
Subject: [Linux-uvc-devel] gentoo ebuild
Message-ID: <43E208B9.1010109@emptiness.de>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hossa,

I own a Logitech 5000 Pro Webcam that works with this driver. For all
the other fellow Gentooers I created an ebuild for your portage overlay
that pull the sources from the SVN and builds and installs the module
for you.

You can download it at
http://gambit.ath.cx/~tante/ebuilds/media-video/uvcvideo/

I'll do one for the uvcview application, too, will report back later.

J?rgen Geuter
- --
ICQ # 81510866  -  tante at jabber.org  -  MSN thanatos at gambit.ath.cx
"Governments can be useful to the governed only so long as inherent
tendencies toward tyranny are restrained."
Frank Herbert, 'God Emperor Of Dune'
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFD4gi5rAehKXTNZasRAgsLAJ4ghoVtxL+ksZ7XY3kEXtDeXKwSXACfWcDl
fLrXV7fqzV0R2CRYzNwbiEU=
=z87Y
-----END PGP SIGNATURE-----


From tante at emptiness.de  Thu Feb  2 16:42:55 2006
From: tante at emptiness.de (=?UTF-8?B?SsO8cmdlbiBHZXV0ZXI=?=)
Date: Thu, 02 Feb 2006 16:42:55 +0100
Subject: [Linux-uvc-devel] gentoo ebuild
In-Reply-To: <43E208B9.1010109@emptiness.de>
References: <43E208B9.1010109@emptiness.de>
Message-ID: <43E2287F.1000506@emptiness.de>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

At
http://gambit.ath.cx/~tante/ebuilds/media-video/uvcview/
you can find a ebuild for uvcview.

- --
ICQ # 81510866  -  tante at jabber.org  -  MSN thanatos at gambit.ath.cx
"Governments can be useful to the governed only so long as inherent
tendencies toward tyranny are restrained."
Frank Herbert, 'God Emperor Of Dune'
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFD4ih/rAehKXTNZasRAlxcAJ9pcA6/MzlgNwlwu4P3u0m+2EQL4ACfXdHo
CUjZNRmv/rfZOfj30rzCbt0=
=Myin
-----END PGP SIGNATURE-----


From ghostx at optonline.net  Thu Feb  2 17:00:02 2006
From: ghostx at optonline.net (Salvador Gonzalez)
Date: Thu, 2 Feb 2006 11:00:02 -0500
Subject: [Linux-uvc-devel] gentoo ebuild
In-Reply-To: <43E2287F.1000506@emptiness.de>
References: <43E208B9.1010109@emptiness.de> <43E2287F.1000506@emptiness.de>
Message-ID: <200602021100.02366.ghostx@optonline.net>

On Thursday 02 February 2006 10:42, J?rgen Geuter wrote:
> http://gambit.ath.cx/~tante/ebuilds/media-video/uvcview/

Thanks for the e-builds! You should add arch ~amd64 to both of these, so 
gentoores know it 'works' on amd64 as well.


From tante at emptiness.de  Thu Feb  2 17:16:54 2006
From: tante at emptiness.de (=?UTF-8?B?SsO8cmdlbiBHZXV0ZXI=?=)
Date: Thu, 02 Feb 2006 17:16:54 +0100
Subject: [Linux-uvc-devel] gentoo ebuild
In-Reply-To: <200602021100.02366.ghostx@optonline.net>
References: <43E208B9.1010109@emptiness.de> <43E2287F.1000506@emptiness.de> <200602021100.02366.ghostx@optonline.net>
Message-ID: <43E23076.4090009@emptiness.de>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Salvador Gonzalez wrote:

> Thanks for the e-builds! You should add arch ~amd64 to both of these, so 
> gentoores know it 'works' on amd64 as well.

Will do that right now, thanks for the tip!
- --
ICQ # 81510866  -  tante at jabber.org  -  MSN thanatos at gambit.ath.cx
"Governments can be useful to the governed only so long as inherent
tendencies toward tyranny are restrained."
Frank Herbert, 'God Emperor Of Dune'
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFD4jB2rAehKXTNZasRAtE3AJwJaX+eenJ3ejJ1HrZl5XLnB0iDqACdEtBj
kg1oBeyj48tyAlyGuJjvCh0=
=u4Pe
-----END PGP SIGNATURE-----


From Maarten.Wisse at urz.uni-heidelberg.de  Thu Feb  2 18:45:25 2006
From: Maarten.Wisse at urz.uni-heidelberg.de (Maarten Wisse)
Date: Thu, 2 Feb 2006 18:45:25 +0100
Subject: [Linux-uvc-devel] Fuji Finepix S5500 -- kernel call trace
In-Reply-To: <200602021145.15263.laurent.pinchart@skynet.be>
References: <200602021009.18537.Maarten.Wisse@urz.uni-heidelberg.de> <200602021121.01585.Maarten.Wisse@urz.uni-heidelberg.de> <200602021145.15263.laurent.pinchart@skynet.be>
Message-ID: <200602021845.25986.Maarten.Wisse@urz.uni-heidelberg.de>

> Can you try 'uvcview -s 640x480' ?
As lsusb tells us, the output format is mjpeg 352x288, 15 fps. When I do that, 
I get:

maarten at aspire:~ uvcview -s 352x288
uvcview verion 0.1.3
 size width: 352 height: 288
Video driver: x11
A window manager is available
video /dev/video0
Unable to start capture: 5.
Error grabbing
 Clean Up done Quit
>
> Could you also send me the device descriptors ? You will need lsusb from
> the CVS version of usbutils
> (:pserver:anonymous at cvs.sourceforge.net:/cvsroot/linux-usb).
Attached.
Best,

Maarten
-------------- next part --------------

Bus 003 Device 001: ID 0000:0000  
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            9 Hub
  bDeviceSubClass         0 Unused
  bDeviceProtocol         1 Single TT
  bMaxPacketSize0        64
  idVendor           0x0000 
  idProduct          0x0000 
  bcdDevice            2.06
  iManufacturer           3 Linux 2.6.15-suspend2-r3 ehci_hcd
  iProduct                2 EHCI Host Controller
  iSerial                 1 0000:00:10.3
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           25
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xc0
      Self Powered
    MaxPower                0mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         9 Hub
      bInterfaceSubClass      0 Unused
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              12
Hub Descriptor:
  bLength               9
  bDescriptorType      41
  nNbrPorts             4
  wHubCharacteristic 0x000a
    No power switching (usb 1.0)
    Per-port overcurrent protection
    TT think time 8 FS bits
  bPwrOn2PwrGood       10 * 2 milli seconds
  bHubContrCurrent      0 milli Ampere
  DeviceRemovable    0x00
  PortPwrCtrlMask    0xff
 Hub Port Status:
   Port 1: 0000.0000
   Port 2: 0000.0100 power
   Port 3: 0000.0100 power
   Port 4: 0000.0100 power
Device Status:     0x0001
  Self Powered

Bus 002 Device 001: ID 0000:0000  
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            9 Hub
  bDeviceSubClass         0 Unused
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  idVendor           0x0000 
  idProduct          0x0000 
  bcdDevice            2.06
  iManufacturer           3 Linux 2.6.15-suspend2-r3 uhci_hcd
  iProduct                2 UHCI Host Controller
  iSerial                 1 0000:00:10.1
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           25
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xe0
      Self Powered
      Remote Wakeup
    MaxPower                0mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         9 Hub
      bInterfaceSubClass      0 Unused
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval             255
Hub Descriptor:
  bLength               9
  bDescriptorType      41
  nNbrPorts             2
  wHubCharacteristic 0x000a
    No power switching (usb 1.0)
    Per-port overcurrent protection
  bPwrOn2PwrGood        1 * 2 milli seconds
  bHubContrCurrent      0 milli Ampere
  DeviceRemovable    0x00
  PortPwrCtrlMask    0xff
 Hub Port Status:
   Port 1: 0000.0100 power
   Port 2: 0000.0100 power
Device Status:     0x0003
  Self Powered
  Remote Wakeup Enabled

Bus 001 Device 002: ID 04cb:016f Fuji Photo Film Co., Ltd 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x04cb Fuji Photo Film Co., Ltd
  idProduct          0x016f 
  bcdDevice            1.00
  iManufacturer           0 
  iProduct                2 USB Web Camera
  iSerial                 3 Y-752^^^^^050208XFPX0002040518
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          156
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xc0
      Self Powered
    MaxPower               50mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0 
      iFunction               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0 
      iInterface              0 
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           46
        dwClockFrequency        0.750000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                15
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0 
        junk at descriptor end: 00 00 00 00 00 00 00
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 2
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            0
        bmControls     0x00000000
        iProcessing             0 
        bmVideoStandards     0x 9
          None
          SECAM - 625/50
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               2
        iTerminal               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      VideoStreaming Interface Descriptor:
        bLength                            13
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormarts                        1
        wTotalLength                    33024
        bEndPointAddress                    0
        bmInfo                              3
        bTerminalLink                       0
        bStillCaptureMethod                 0
        bTriggerSupport                     0
        bTriggerUsage                       0
        bControlSize                        0
        bmaControls( 0)                    11
      VideoStreaming Interface Descriptor:
        bLength                            11
        bDescriptorType                    36
        bDescriptorSubtype                  6 (FORMAT_MJPEG)
        bFormatIndex                        1
        bNumFrameDescriptors                1
        bFlags                              0
          Fixed-size samples: No
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                  1600000
        dwMaxBitRate                  1600000
        dwMaxVideoFrameBufferSize       65536
        dwDefaultFrameInterval             15
        bFrameIntervalType                  0
        dwMinFrameInterval            1000000
        dwMaxFrameInterval            1000000
        dwFrameIntervalStep                 0
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            7 (sRGB)
        bMatrixCoefficients                 1 (BT.709)
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
Device Status:     0x0001
  Self Powered

Bus 001 Device 001: ID 0000:0000  
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            9 Hub
  bDeviceSubClass         0 Unused
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  idVendor           0x0000 
  idProduct          0x0000 
  bcdDevice            2.06
  iManufacturer           3 Linux 2.6.15-suspend2-r3 uhci_hcd
  iProduct                2 UHCI Host Controller
  iSerial                 1 0000:00:10.0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           25
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xe0
      Self Powered
      Remote Wakeup
    MaxPower                0mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         9 Hub
      bInterfaceSubClass      0 Unused
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval             255
Hub Descriptor:
  bLength               9
  bDescriptorType      41
  nNbrPorts             2
  wHubCharacteristic 0x000a
    No power switching (usb 1.0)
    Per-port overcurrent protection
  bPwrOn2PwrGood        1 * 2 milli seconds
  bHubContrCurrent      0 milli Ampere
  DeviceRemovable    0x00
  PortPwrCtrlMask    0xff
 Hub Port Status:
   Port 1: 0000.0103 power enable connect
   Port 2: 0000.0100 power
Device Status:     0x0003
  Self Powered
  Remote Wakeup Enabled

From laurent.pinchart at skynet.be  Thu Feb  2 19:32:58 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 2 Feb 2006 19:32:58 +0100
Subject: [Linux-uvc-devel] Fuji Finepix S5500 -- kernel call trace
In-Reply-To: <200602021845.25986.Maarten.Wisse@urz.uni-heidelberg.de>
References: <200602021009.18537.Maarten.Wisse@urz.uni-heidelberg.de> <200602021145.15263.laurent.pinchart@skynet.be> <200602021845.25986.Maarten.Wisse@urz.uni-heidelberg.de>
Message-ID: <200602021932.58389.laurent.pinchart@skynet.be>

> > Can you try 'uvcview -s 640x480' ?
>
> As lsusb tells us, the output format is mjpeg 352x288, 15 fps. When I do
> that, I get:
>
> maarten at aspire:~ uvcview -s 352x288
> uvcview verion 0.1.3
>  size width: 352 height: 288
> Video driver: x11
> A window manager is available
> video /dev/video0
> Unable to start capture: 5.
> Error grabbing
>  Clean Up done Quit

That's better, but still not good. The device descriptors show that your 
camera has a bulk endpoint, while the linux-uvc driver currently supports 
isochronous endpoints transfers. As I have no bulk device, it would be 
difficult to implement bulk support. If you are familiar with kernel 
development, I can give you some help regarging what should be done.

Laurent Pinchart


From mxhaard at magic.fr  Thu Feb  2 19:37:38 2006
From: mxhaard at magic.fr (michel Xhaard)
Date: Thu, 2 Feb 2006 19:37:38 +0100
Subject: [Linux-uvc-devel] Fuji Finepix S5500 -- kernel call trace
In-Reply-To: <200602021845.25986.Maarten.Wisse@urz.uni-heidelberg.de>
References: <200602021009.18537.Maarten.Wisse@urz.uni-heidelberg.de> <200602021145.15263.laurent.pinchart@skynet.be> <200602021845.25986.Maarten.Wisse@urz.uni-heidelberg.de>
Message-ID: <200602021937.38177.mxhaard@magic.fr>

Le Jeudi 2 F?vrier 2006 18:45, Maarten Wisse a ?crit?:
> > Can you try 'uvcview -s 640x480' ?
>
> As lsusb tells us, the output format is mjpeg 352x288, 15 fps. When I do
> that, I get:
>
> maarten at aspire:~ uvcview -s 352x288
> uvcview verion 0.1.3
>  size width: 352 height: 288
> Video driver: x11
> A window manager is available
> video /dev/video0
> Unable to start capture: 5.
> Error grabbing
>  Clean Up done Quit
>
> > Could you also send me the device descriptors ? You will need lsusb from
> > the CVS version of usbutils
> > (:pserver:anonymous at cvs.sourceforge.net:/cvsroot/linux-usb).
>
> Attached.
> Best,
>
> Maarten
Maarten,
maybe i am wrong but the video pipe look Bulk only and the uvc driver only 
implement ISO pipe 
-- 
Michel Xhaard
http://mxhaard.free.fr


From Maarten.Wisse at urz.uni-heidelberg.de  Thu Feb  2 19:57:33 2006
From: Maarten.Wisse at urz.uni-heidelberg.de (Maarten Wisse)
Date: Thu, 2 Feb 2006 19:57:33 +0100
Subject: [Linux-uvc-devel] Fuji Finepix S5500 -- kernel call trace
In-Reply-To: <200602021932.58389.laurent.pinchart@skynet.be>
References: <200602021009.18537.Maarten.Wisse@urz.uni-heidelberg.de> <200602021845.25986.Maarten.Wisse@urz.uni-heidelberg.de> <200602021932.58389.laurent.pinchart@skynet.be>
Message-ID: <200602021957.33467.Maarten.Wisse@urz.uni-heidelberg.de>

> That's better, but still not good. The device descriptors show that your
> camera has a bulk endpoint, while the linux-uvc driver currently supports
> isochronous endpoints transfers. As I have no bulk device, it would be
> difficult to implement bulk support.
I understand. Unfortunately, I'm not familiar with kernel development, not 
even with writing programs in C. I have some programming experience, but not 
much beyond high level languages such as PHP or Python. I'm a pretty 
experience user of Linux, but not a developer.

So let's wait until a developer with a similar device appears who's willing to 
implement it, as there will probably be more people with these kind of 
devices. At least all recent Fuji cameras will be similar, probably.

If you think this could be a nice opportunity to jump into C development, let 
me know what should be done...

Best,

Maarten


From nick at customdesigns.ca  Thu Feb  2 20:33:39 2006
From: nick at customdesigns.ca (Nick Wiltshire)
Date: Thu, 2 Feb 2006 12:33:39 -0700
Subject: [Linux-uvc-devel] QC fusion almost working in kopete
Message-ID: <200602021233.39712.nick@customdesigns.ca>

Hi all,

I'm pretty new to the list, hopefully I can contribute something.

Im running kopete 0.11.1 with kde 3.5.1 on a Gentoo system, kernel 2.6.14.3. I 
grabbed the driver (rev 16), compiled, installed, loaded...dmesg said all was 
well. I fired up kopete and the camera was working(!), though zoomed in so 
all I could see was my forehead :)

I left the config window for a minute, then went back to it. Now the window 
just showed a pixelized QT logo. dmesg showed:

uvcvideo: Failed to query UVC control 1 (unit 0) : -110.

so I unloaded/reloaded the driver:

usbcore: deregistering driver usbvideo
uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c1)
uvcvideo: Failed to query UVC control 1 (unit 0) : -110.
uvcvideo: Failed to initialize the device (-5).
usbcore: registered new driver usbvideo
USB Video Class driver (v0.1.0)

any idea why this would happen?

Nick


From laurent.pinchart at skynet.be  Thu Feb  2 21:23:04 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 2 Feb 2006 21:23:04 +0100
Subject: [Linux-uvc-devel] QC fusion almost working in kopete
In-Reply-To: <200602021233.39712.nick@customdesigns.ca>
References: <200602021233.39712.nick@customdesigns.ca>
Message-ID: <200602022123.04974.laurent.pinchart@skynet.be>

Hi Nick,

> I'm pretty new to the list, hopefully I can contribute something.

Seems you can at least contribute problems :-)

> Im running kopete 0.11.1 with kde 3.5.1 on a Gentoo system, kernel
> 2.6.14.3. I grabbed the driver (rev 16), compiled, installed,
> loaded...dmesg said all was well. I fired up kopete and the camera was
> working(!), though zoomed in so all I could see was my forehead :)

When Kopete receives an image bigger than it expects, only the upper-left 
corner of the image will be used instead of resizing it properly.

> I left the config window for a minute, then went back to it. Now the window
> just showed a pixelized QT logo. dmesg showed:
>
> uvcvideo: Failed to query UVC control 1 (unit 0) : -110.
>
> so I unloaded/reloaded the driver:
>
> usbcore: deregistering driver usbvideo
> uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c1)
> uvcvideo: Failed to query UVC control 1 (unit 0) : -110.
> uvcvideo: Failed to initialize the device (-5).
> usbcore: registered new driver usbvideo
> USB Video Class driver (v0.1.0)

-110 is -ETIMEDOUT. This means the camera failed to answer fast enough. I'm 
not sure why this happens, but do you remember if the blue light was on when 
you went back to the Kopete window ? I noticed that the webcams are sometimes 
slower to answer when video streaming is on. It seems that your camera was 
left in an unknown state. Unplugging and replugging the webcam should fix the 
problem. If not, the USB subsystem might be screwed up.

Can you reproduce the problem ? Does unplugging and replugging the webcam make 
it functionnal again ? Could you try upgrading to kernel 2.6.15 and see if 
things are better ?

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Feb  2 21:30:32 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 2 Feb 2006 21:30:32 +0100
Subject: [Linux-uvc-devel] [SVN] Divide by zero fix
Message-ID: <200602022130.32541.laurent.pinchart@skynet.be>

Hi everybody,

I commited a fix for the divide by zero problem. This shouldn't affect any of 
you, but I wouldn't mind some testing.

I also commited another small fix, VIDIOC_DQBUF now fills the timestamp field 
in the v4l2_buffer structure.

On a side note, I tried to benchmark the driver after someone reported a 1-2s 
lag during video acquisition. The good news is that the latency introduced by 
the driver (delay between tend-of-frame and image availability in user space) 
is around 10?s with a few peaks up to 2.5ms, which is quite good. I don't 
know yet how I could measure the delay introduced by the webcam itself.

Laurent Pinchart


From diaxen at free.fr  Thu Feb  2 21:51:10 2006
From: diaxen at free.fr (Alexandre Becoulet)
Date: Thu, 2 Feb 2006 21:51:10 +0100
Subject: [Linux-uvc-devel] Re: [PATCH] QC fusion almost working in kopete
In-Reply-To: <200602021233.39712.nick@customdesigns.ca>
References: <200602021233.39712.nick@customdesigns.ca>
Message-ID: <200602022151.10430.diaxen@free.fr>

On Thursday 02 February 2006 20:33, Nick Wiltshire wrote:

> uvcvideo: Failed to query UVC control 1 (unit 0) : -110.
>
> so I unloaded/reloaded the driver:
>
> usbcore: deregistering driver usbvideo
> uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c1)
> uvcvideo: Failed to query UVC control 1 (unit 0) : -110.
> uvcvideo: Failed to initialize the device (-5).
> usbcore: registered new driver usbvideo
> USB Video Class driver (v0.1.0)
>
> any idea why this would happen?

I have the same problem when using my quickcam pro 5000 for some time.

Sending an usb reset to the camera solve the problem. I wrote a patch to reset 
the camera on device close if an IO error occurred, and on device 
initialization failure.

You may try this patch and see if it works for you.

Index: uvcvideo.c
===================================================================
--- uvcvideo.c	(revision 16)
+++ uvcvideo.c	(working copy)
@@ -317,6 +317,7 @@
 
 enum uvc_device_state {
 	UVC_DEV_DISCONNECTED = 1,
+	UVC_DEV_IOERROR = 2,
 };
 
 struct uvc_device {
@@ -1317,6 +1318,29 @@
  * UVC Controls
  */
 
+static int uvc_usb_reset(struct uvc_device *dev)
+{
+	int l, ret;
+
+	l = usb_lock_device_for_reset(dev->udev, dev->intf);
+
+	if (l >= 0) {
+		ret = usb_reset_device(dev->udev);
+		if (l)
+			usb_unlock_device(dev->udev);
+	}
+	else
+		ret = -EBUSY;
+
+	if (ret)
+		uvc_printk(KERN_DEBUG, "uvc_usb_reset: Unable to reset usb device"
+			   "(%d).\n", ret);
+	else
+		dev->state &= ~UVC_DEV_IOERROR;
+
+	return ret;
+}
+
 static int uvc_query_ctrl(struct uvc_device *dev, __u8 query, __u8 unit,
 			  __u8 intfnum, __u8 cs, void *data, __u16 size)
 {
@@ -1334,6 +1358,7 @@
 	if (ret != size) {
 		uvc_printk(KERN_ERR, "Failed to query UVC control %u "
 			"(unit %u) : %d.\n", cs, unit, ret);
+		dev->state |= UVC_DEV_IOERROR;
 		return -EIO;
 	}
 
@@ -1548,6 +1573,25 @@
  * Video device
  */
 
+/* 
+ * Reset and Re-Initialize video device
+ */
+static int uvc_video_reinit(struct uvc_video_device *video)
+{
+	int ret;
+
+	if ((ret = uvc_usb_reset(video->dev)) < 0)
+		return ret;
+
+	if ((ret = uvc_set_video_ctrl(video, &video->streaming->ctrl, 0)) < 0) {
+		uvc_printk(KERN_DEBUG, "uvc_video_reinit: Unable to commit format "
+			   "(%d).\n", ret);
+		return ret;
+	}
+
+	return 0;
+}
+
 /*
  * Initialize the UVC video device.
  *
@@ -1942,6 +1986,10 @@
 		uvc_printk(KERN_ERR, "uvc_v4l2_release: Unable to free buffers.\n");
 	up(&video->queue.lock);
 
+	/* leave usb device in a clean state */
+	if (video->dev->state & UVC_DEV_IOERROR)
+		uvc_video_reinit(video);
+
 	atomic_inc(&video->count);
 	kref_put(&video->dev->kref, uvc_delete);
 	return 0;
@@ -2984,9 +3032,18 @@
 	 * parameters.
 	 */
 	if ((ret = uvc_video_init(&dev->video)) < 0) {
-		uvc_printk(KERN_ERR, "Failed to initialize the device "
-			"(%d).\n", ret);
-		return ret;
+
+		uvc_printk(KERN_ERR, "Failed to initialize the device, "
+			   "(%d). trying to reset ...\n", ret);
+
+		if ((ret = uvc_usb_reset(dev)))
+			return ret;
+
+		if ((ret = uvc_video_init(&dev->video)) < 0) {
+			uvc_printk(KERN_ERR, "Failed to initialize the device "
+				   "(%d).\n", ret);
+			return ret;
+		}
 	}
 
 	/* Register the device with V4L. */

-- 
Alexandre


From ghostx at optonline.net  Fri Feb  3 02:49:26 2006
From: ghostx at optonline.net (Salvador Gonzalez)
Date: Thu, 02 Feb 2006 20:49:26 -0500
Subject: [Linux-uvc-devel] Any success with streaming applications?
In-Reply-To: <200602022130.32541.laurent.pinchart@skynet.be>
References: <200602022130.32541.laurent.pinchart@skynet.be>
Message-ID: <200602022049.26405.ghostx@optonline.net>

Hi everyone,

	I was wondering if anyone has had success with web streaming applications 
with this driver?  So far I have tried vlc and ffmpeg, both of which failed 
for me.  Investigation on this list's archives reveals that the problem lies 
with the lack of v4l2 support on both of these applications.  So far the only 
success I've had is with a hacky setup, using a modified version of a test 
program posted last month on this list that grabs frames and outputs mjpegs, 
combined with mjpeg2jpeg.py, ImageMagick's convert, and a java applet that 
redisplays a picture over a set time period.
	So what is every one elses experience?

Cheers!

---
Sal Gonzalez <ghostx at optonline.net>


From nick at customdesigns.ca  Fri Feb  3 10:23:27 2006
From: nick at customdesigns.ca (Nick Wiltshire)
Date: Fri, 3 Feb 2006 02:23:27 -0700
Subject: [Linux-uvc-devel] QC fusion almost working in kopete
In-Reply-To: <200602022123.04974.laurent.pinchart@skynet.be>
References: <200602021233.39712.nick@customdesigns.ca>
Message-ID: <200602030223.28372.nick@customdesigns.ca>

On Thursday 02 February 2006 1:23 pm, Laurent Pinchart wrote:
> Hi Nick,
>
> > I'm pretty new to the list, hopefully I can contribute something.
>
> Seems you can at least contribute problems :-)

Yes, that I can do!

>
> > Im running kopete 0.11.1 with kde 3.5.1 on a Gentoo system, kernel
> > 2.6.14.3. I grabbed the driver (rev 16), compiled, installed,
> > loaded...dmesg said all was well. I fired up kopete and the camera was
> > working(!), though zoomed in so all I could see was my forehead :)
>
> When Kopete receives an image bigger than it expects, only the upper-left
> corner of the image will be used instead of resizing it properly.
>

Is there a workaround I've missed?

> > I left the config window for a minute, then went back to it. Now the
> > window just showed a pixelized QT logo. dmesg showed:
> >
> > uvcvideo: Failed to query UVC control 1 (unit 0) : -110.
> >
> > so I unloaded/reloaded the driver:
> >
> > usbcore: deregistering driver usbvideo
> > uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c1)
> > uvcvideo: Failed to query UVC control 1 (unit 0) : -110.
> > uvcvideo: Failed to initialize the device (-5).
> > usbcore: registered new driver usbvideo
> > USB Video Class driver (v0.1.0)
>
> -110 is -ETIMEDOUT. This means the camera failed to answer fast enough. I'm
> not sure why this happens, but do you remember if the blue light was on
> when you went back to the Kopete window ?

Yes, it was.

> I noticed that the webcams are 
> sometimes slower to answer when video streaming is on. It seems that your
> camera was left in an unknown state. Unplugging and replugging the webcam
> should fix the problem. If not, the USB subsystem might be screwed up.
>

Did that, now I get lines :) see...I can contribute lots of problems.

> Can you reproduce the problem ?

Yes.

> Does unplugging and replugging the webcam 
> make it functionnal again ?

Sort of (the "lines" move when the camera sees motion, but the picture is 
unrecognisable).

> Could you try upgrading to kernel 2.6.15 and 
> see if things are better ?

I'd be happy to. I will let you know tomorrow if it works -- if not I'll try 
Alexandre Becoulet's patch and report on that as well.

If it matters, I was able to sync my iPod, so the USB subsystem must still be 
in decent shape.

Nick


From cvazquez at udc.es  Fri Feb  3 19:10:12 2006
From: cvazquez at udc.es (cvazquez at udc.es)
Date: Fri, 03 Feb 2006 19:10:12 +0100
Subject: [Linux-uvc-devel] Anyone already working on pan and tilt control?
Message-ID: <1138990212.43e39c849eddb@webmail.udc.es>

Hi,

I am also need the pan/tilt control and perhaps I can help.

Carlos V. Regueiro


 >Hi Rick,
 >
 > > Just wondering if anyone is already working on pan and tilt control, and
 > > if so what the status is?
 >
 >I currently have no camera to test that feature, so I haven't implemented
 >it yet.
 >
 > > If it hasn't been started, perhaps I can help out.
 >
 >Feel free to submit a patch :-) The pan/tilt control has been implemented
 >using an Extension Unit, so you need the Logitech specs. I'll ask them if I
 >can give publish the information you need.
 >
 >Laurent Pinchart
 >


----------------------------------------------------------------
Correo enviado usando el servicio de Webmail del SIAIN


From laurent.pinchart at skynet.be  Fri Feb  3 17:02:12 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 3 Feb 2006 17:02:12 +0100
Subject: [Linux-uvc-devel] Anyone already working on pan and tilt control?
In-Reply-To: <1138990212.43e39c849eddb@webmail.udc.es>
References: <1138990212.43e39c849eddb@webmail.udc.es>
Message-ID: <200602031702.12230.laurent.pinchart@skynet.be>

Hi everybody,

I'll get a pan/tilt webcam (many thanks to Logitech) on monday. You can expect 
a driver update in a week or two if I'm not too busy with other projects :-)

In the meantime, if someone wants to start coding, I'd like to have a look at 
the descriptors (lsusb -v from the CVS version of usbutils + 
cat /proc/bus/usb/xxx/yyy > descriptors.bin).

Laurent Pinchart


From rvinyard at cs.nmsu.edu  Fri Feb  3 22:18:55 2006
From: rvinyard at cs.nmsu.edu (Rick L Vinyard Jr)
Date: Fri, 03 Feb 2006 14:18:55 -0700
Subject: [Linux-uvc-devel] Anyone already working on pan and tilt
	control?
In-Reply-To: <200602031702.12230.laurent.pinchart@skynet.be>
References: <1138990212.43e39c849eddb@webmail.udc.es>
	 <200602031702.12230.laurent.pinchart@skynet.be>
Message-ID: <1139001535.12015.3.camel@fangorn.local>

On Fri, 2006-02-03 at 17:02 +0100, Laurent Pinchart wrote:
> I'll get a pan/tilt webcam (many thanks to Logitech) on monday. You can expect 
> a driver update in a week or two if I'm not too busy with other projects :-)

That sounds great. I'm glad to hear Logitech is supporting developers;
after all, it really is in their best interests.

> In the meantime, if someone wants to start coding, I'd like to have a look at 
> the descriptors (lsusb -v from the CVS version of usbutils + 
> cat /proc/bus/usb/xxx/yyy > descriptors.bin).

I'd be happy to, but I wouldn't be able to until Monday at the earliest,
which sounds like it will be too late.



From jwspring at comcast.net  Sat Feb  4 03:01:21 2006
From: jwspring at comcast.net (James W. Spring)
Date: Fri, 03 Feb 2006 18:01:21 -0800
Subject: [Linux-uvc-devel] Test with Ekiga
Message-ID: <43E40AF1.1000104@comcast.net>

 From the Ekiga site the latest for Fedora 4. Ekiga 1.99.0
 From a Gnome terminal
Kernel 2.6.15_My_15 #3 Sat Jan 14 09:30:20 PST 2006 i686 i686 i386 GNU/Linux
The latest version of uvc drivers from this site

Error while opening video device /dev/video0

A moving logo will be transmitted during calls. Notice that you can 
always transmit a given image or the moving logo by choosing "Picture" 
as video plugin and "MovingLogo" or "StaticPicture" as device.

Your driver doesn't seem to support any of the color formats supported 
by Ekiga.
 Please check your kernel driver documentation in order to determine 
which Palette is supported.


From luc at saillard.org  Sat Feb  4 10:30:48 2006
From: luc at saillard.org (Luc Saillard)
Date: Sat, 4 Feb 2006 10:30:48 +0100
Subject: [Linux-uvc-devel] Test with Ekiga
In-Reply-To: <43E40AF1.1000104@comcast.net>
References: <43E40AF1.1000104@comcast.net>
Message-ID: <20060204093048.GL20204@sd291.sivit.org>

On Fri, Feb 03, 2006 at 06:01:21PM -0800, James W. Spring wrote:
> From the Ekiga site the latest for Fedora 4. Ekiga 1.99.0
> From a Gnome terminal
> Kernel 2.6.15_My_15 #3 Sat Jan 14 09:30:20 PST 2006 i686 i686 i386 GNU/Linux
> The latest version of uvc drivers from this site
> 
 
You need to take the lastest snapshot, and not the tarball of version from
two weeks.

Luc


From scoutts at bcs.org.uk  Sat Feb  4 10:42:23 2006
From: scoutts at bcs.org.uk (Steven Coutts)
Date: Sat, 4 Feb 2006 09:42:23 +0000
Subject: [Linux-uvc-devel] Quickcam Pro 5000
In-Reply-To: <200601282134.43847.mxhaard@magic.fr>
References: <200601191350.50916.scoutts@bcs.org.uk> <1138479496.11704.2.camel@yossarian> <200601282134.43847.mxhaard@magic.fr>
Message-ID: <200602040942.26657.scoutts@bcs.org.uk>

On Saturday 28 January 2006 20:34, michel Xhaard wrote:
> Le Samedi 28 Janvier 2006 21:18, Mikael Nilsson a ?crite
> >
> > Well, then it seems Steven Coutts (who originated this thread) actually
> > has a USB2 controller:
> >
> > usb 1-1: new high speed USB device using ehci_hcd and address 6
> >
> > so it does *not* seem to be a USB1.1 issue after all.
> >
> > The strange thing is that test.c works fine.
> >
> > /Mikael
> >
> > > Laurent Pinchart
> > > _______________________________________________
>
> test.c did not alloc overlay surface for the screen and nor xv feature from
> the video adaptator. uvcvideo need a working video adaptator Xserver or
> Fbdev allowing large video surface to be create 1280x960.

So, any ideas how I get it working then?

Works fine on my D600 laptop.

Regards

-- 
Steven Coutts B.Sc.(Hons) MBCS
scoutts at bcs.org.uk

PGP Public Key
<http://stevec.couttsnet.com/scoutts.asc>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20060204/2aceecb9/attachment.pgp>

From stevec at couttsnet.com  Sat Feb  4 11:37:33 2006
From: stevec at couttsnet.com (Steven Coutts)
Date: Sat, 4 Feb 2006 10:37:33 -0000 (GMT)
Subject: [Linux-uvc-devel] Quickcam Pro 5000
In-Reply-To: <200602040942.26657.scoutts@bcs.org.uk>
References: <200601191350.50916.scoutts@bcs.org.uk>
    <1138479496.11704.2.camel@yossarian>
    <200601282134.43847.mxhaard@magic.fr>
    <200602040942.26657.scoutts@bcs.org.uk>
Message-ID: <52846.10.0.0.237.1139049453.squirrel@mail.couttsnet.com>

On Sat, February 4, 2006 09:42, Steven Coutts wrote:
>
>
> So, any ideas how I get it working then?
>
> Works fine on my D600 laptop.
>

Disabling the composite extension in xorg.conf makes it work!





From laurent.pinchart at skynet.be  Sat Feb  4 11:39:22 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 4 Feb 2006 11:39:22 +0100
Subject: [Linux-uvc-devel] Quickcam Pro 5000
In-Reply-To: <200602040942.26657.scoutts@bcs.org.uk>
References: <200601191350.50916.scoutts@bcs.org.uk> <200601282134.43847.mxhaard@magic.fr> <200602040942.26657.scoutts@bcs.org.uk>
Message-ID: <200602041139.22868.laurent.pinchart@skynet.be>

> > test.c did not alloc overlay surface for the screen and nor xv feature
> > from the video adaptator. uvcvideo need a working video adaptator Xserver
> > or Fbdev allowing large video surface to be create 1280x960.
>
> So, any ideas how I get it working then?
>
> Works fine on my D600 laptop.

You seem to be having two different problems. Xawtv has some trouble 
allocating a video surface. That's related to your X server but not with the 
linux-uvc driver or the webcam.

The second problem (Unable to set format: 5) is definitely a hardware and/or 
driver issue.

I'd like to debug the driver issue first (because it will make solving the 
Xawtv problem easier, and because Xawtv is currently beyond the limits of my 
knownledge).

Can you reproduce the problem on your Dell Optiplex GX270 with the test 
program ? If so, are you using the same kernel version on both hardware ? Can 
you upgrade to 2.6.15 on the Optiplex if you haven't already ?

Laurent Pinchart


From mxhaard at magic.fr  Sat Feb  4 11:48:23 2006
From: mxhaard at magic.fr (michel Xhaard)
Date: Sat, 4 Feb 2006 11:48:23 +0100
Subject: [Linux-uvc-devel] Quickcam Pro 5000
In-Reply-To: <200602040942.26657.scoutts@bcs.org.uk>
References: <200601191350.50916.scoutts@bcs.org.uk> <200601282134.43847.mxhaard@magic.fr> <200602040942.26657.scoutts@bcs.org.uk>
Message-ID: <200602041148.24048.mxhaard@magic.fr>

Le Samedi 4 F?vrier 2006 10:42, Steven Coutts a ?crit?:
> On Saturday 28 January 2006 20:34, michel Xhaard wrote:
> > Le Samedi 28 Janvier 2006 21:18, Mikael Nilsson a ?crite
> >
> > > Well, then it seems Steven Coutts (who originated this thread) actually
> > > has a USB2 controller:
> > >
> > > usb 1-1: new high speed USB device using ehci_hcd and address 6
> > >
> > > so it does *not* seem to be a USB1.1 issue after all.
> > >
> > > The strange thing is that test.c works fine.
> > >
> > > /Mikael
> > >
> > > > Laurent Pinchart
> > > > _______________________________________________
> >
> > test.c did not alloc overlay surface for the screen and nor xv feature
> > from the video adaptator. uvcvideo need a working video adaptator Xserver
> > or Fbdev allowing large video surface to be create 1280x960.
>
> So, any ideas how I get it working then?
>
> Works fine on my D600 laptop.
>
> Regards
Steven,
Maybe try the attached patch.
Let me know if that help
regards
-- 
Michel Xhaard
http://mxhaard.free.fr
-------------- next part --------------
A non-text attachment was scrubbed...
Name: uvc0107-0204.patch
Type: text/x-diff
Size: 587 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20060204/c8f4c7ed/attachment.patch>

From mxhaard at magic.fr  Sat Feb  4 11:52:00 2006
From: mxhaard at magic.fr (michel Xhaard)
Date: Sat, 4 Feb 2006 11:52:00 +0100
Subject: [Linux-uvc-devel] Quickcam Pro 5000
In-Reply-To: <200602041148.24048.mxhaard@magic.fr>
References: <200601191350.50916.scoutts@bcs.org.uk> <200602040942.26657.scoutts@bcs.org.uk> <200602041148.24048.mxhaard@magic.fr>
Message-ID: <200602041152.00703.mxhaard@magic.fr>

Le Samedi 4 F?vrier 2006 11:48, michel Xhaard a ?crit?:
> Le Samedi 4 F?vrier 2006 10:42, Steven Coutts a ?crit?:
> > On Saturday 28 January 2006 20:34, michel Xhaard wrote:
> > > Le Samedi 28 Janvier 2006 21:18, Mikael Nilsson a ?crite
> > >
> > > > Well, then it seems Steven Coutts (who originated this thread)
> > > > actually has a USB2 controller:
> > > >
> > > > usb 1-1: new high speed USB device using ehci_hcd and address 6
> > > >
> > > > so it does *not* seem to be a USB1.1 issue after all.
> > > >
> > > > The strange thing is that test.c works fine.
> > > >
> > > > /Mikael
> > > >
> > > > > Laurent Pinchart
> > > > > _______________________________________________
> > >
> > > test.c did not alloc overlay surface for the screen and nor xv feature
> > > from the video adaptator. uvcvideo need a working video adaptator
> > > Xserver or Fbdev allowing large video surface to be create 1280x960.
> >
> > So, any ideas how I get it working then?
> >
> > Works fine on my D600 laptop.
> >
> > Regards
>
> Steven,
> Maybe try the attached patch.
> Let me know if that help
> regards
Ooops that is not clear,  this is a uvcview patch sorry :(
-- 
Michel Xhaard
http://mxhaard.free.fr


From mini at nada.kth.se  Sat Feb  4 20:14:07 2006
From: mini at nada.kth.se (Mikael Nilsson)
Date: Sat, 04 Feb 2006 20:14:07 +0100
Subject: [Linux-uvc-devel] Quickcam Pro 5000
In-Reply-To: <200602041152.00703.mxhaard@magic.fr>
References: <200601191350.50916.scoutts@bcs.org.uk>
	 <200602040942.26657.scoutts@bcs.org.uk>
	 <200602041148.24048.mxhaard@magic.fr> <200602041152.00703.mxhaard@magic.fr>
Message-ID: <1139080447.11123.5.camel@yossarian>

l?r 2006-02-04 klockan 11:52 +0100 skrev michel Xhaard:
> >
> > Steven,
> > Maybe try the attached patch.
> > Let me know if that help
> > regards
> Ooops that is not clear,  this is a uvcview patch sorry :(

I ran uvcview as:

SDL_VIDEO_YUV_HWACCEL=0 ./uvcview

and it worked!!!

Thanks. I wonder why hw accel does not work ...

/Mikael
-- 
Plus ?a change, plus c'est la m?me chose



From mxhaard at magic.fr  Sat Feb  4 21:02:05 2006
From: mxhaard at magic.fr (michel Xhaard)
Date: Sat, 4 Feb 2006 21:02:05 +0100
Subject: [Linux-uvc-devel] Quickcam Pro 5000
In-Reply-To: <1139080447.11123.5.camel@yossarian>
References: <200601191350.50916.scoutts@bcs.org.uk> <200602041152.00703.mxhaard@magic.fr> <1139080447.11123.5.camel@yossarian>
Message-ID: <200602042102.06193.mxhaard@magic.fr>

Le Samedi 4 F?vrier 2006 20:14, Mikael Nilsson a ?crit?:
> l?r 2006-02-04 klockan 11:52 +0100 skrev michel Xhaard:
> > > Steven,
> > > Maybe try the attached patch.
> > > Let me know if that help
> > > regards
> >
> > Ooops that is not clear,  this is a uvcview patch sorry :(
>
> I ran uvcview as:
>
> SDL_VIDEO_YUV_HWACCEL=0 ./uvcview
>
> and it worked!!!
>
> Thanks. I wonder why hw accel does not work ...
>
> /Mikael
Mikael,
Thanks for the feedback :) I did not have a heavy knowledge on video card , 
using SDL as a big advantage all bugs are now knows :)
-- 
Michel Xhaard
http://mxhaard.free.fr


From mini at nada.kth.se  Sat Feb  4 21:16:34 2006
From: mini at nada.kth.se (Mikael Nilsson)
Date: Sat, 04 Feb 2006 21:16:34 +0100
Subject: [Linux-uvc-devel] V4L1 backwards compatibility
Message-ID: <1139084195.11123.14.camel@yossarian>

Hi!

I wonder: what is the reason that the v4l1 backwards compatibility
module (videodev) does not seem to work with the uvc driver? What would
be required to get it to work?

Background: I'm forced to use a proprietary videoconf app that only
supports v4l1 at the moment. And it does not work with my cam,
unfortunately.

I've talked to a technician and he told me that v4l2 is not a priority
at the moment, and "I was under the impression that V4L2 was supposed to
be backwards compatible with V4L, but it appears this is not the case."

Well, the videodev module *does* exist, so why doesn't it work?

/Mikael
 
-- 
Plus ?a change, plus c'est la m?me chose



From mini at nada.kth.se  Sat Feb  4 22:47:00 2006
From: mini at nada.kth.se (Mikael Nilsson)
Date: Sat, 04 Feb 2006 22:47:00 +0100
Subject: [Linux-uvc-devel] V4L1 backwards compatibility
In-Reply-To: <1139084195.11123.14.camel@yossarian>
References: <1139084195.11123.14.camel@yossarian>
Message-ID: <1139089620.11123.16.camel@yossarian>

l?r 2006-02-04 klockan 21:16 +0100 skrev Mikael Nilsson:
> Hi!
> 
> I wonder: what is the reason that the v4l1 backwards compatibility
> module (videodev) does not seem to work with the uvc driver? What would
> be required to get it to work?
> 
> Background: I'm forced to use a proprietary videoconf app that only
> supports v4l1 at the moment. And it does not work with my cam,
> unfortunately.
> 
> I've talked to a technician and he told me that v4l2 is not a priority
> at the moment, and "I was under the impression that V4L2 was supposed to
> be backwards compatible with V4L, but it appears this is not the case."
> 
> Well, the videodev module *does* exist, so why doesn't it work?

Specifically, dmegs shows:

usbvideo: Unknown ioctl 0x803c7601

0x803c7601 is VIDIOCGCAP, and that seems to be handled by v4l1-compat.c,
which is in videodev, which is loaded according to lsmod. So why is that
not handled???

/Mikael

-- 
Plus ?a change, plus c'est la m?me chose



From mxhaard at magic.fr  Sat Feb  4 23:05:16 2006
From: mxhaard at magic.fr (michel Xhaard)
Date: Sat, 4 Feb 2006 23:05:16 +0100
Subject: [Linux-uvc-devel] V4L1 backwards compatibility
In-Reply-To: <1139089620.11123.16.camel@yossarian>
References: <1139084195.11123.14.camel@yossarian> <1139089620.11123.16.camel@yossarian>
Message-ID: <200602042305.16891.mxhaard@magic.fr>

Le Samedi 4 F?vrier 2006 22:47, Mikael Nilsson a ?crit?:
> l?r 2006-02-04 klockan 21:16 +0100 skrev Mikael Nilsson:
> > Hi!
> >
> > I wonder: what is the reason that the v4l1 backwards compatibility
> > module (videodev) does not seem to work with the uvc driver? What would
> > be required to get it to work?
> >
> > Background: I'm forced to use a proprietary videoconf app that only
> > supports v4l1 at the moment. And it does not work with my cam,
> > unfortunately.
> >
> > I've talked to a technician and he told me that v4l2 is not a priority
> > at the moment, and "I was under the impression that V4L2 was supposed to
> > be backwards compatible with V4L, but it appears this is not the case."
> >
> > Well, the videodev module *does* exist, so why doesn't it work?
>
> Specifically, dmegs shows:
>
> usbvideo: Unknown ioctl 0x803c7601
>
> 0x803c7601 is VIDIOCGCAP, and that seems to be handled by v4l1-compat.c,
> which is in videodev, which is loaded according to lsmod. So why is that
> not handled???
>
> /Mikael
Mikael
This driver design is v4l2 only . The v4L1 compat only works for old driver to 
the new interface, but a young driver, like uvcvideo works directly on v4l2.
-- 
Michel Xhaard
http://mxhaard.free.fr


From mini at nada.kth.se  Sat Feb  4 23:23:59 2006
From: mini at nada.kth.se (Mikael Nilsson)
Date: Sat, 04 Feb 2006 23:23:59 +0100
Subject: [Linux-uvc-devel] V4L1 backwards compatibility
In-Reply-To: <200602042305.16891.mxhaard@magic.fr>
References: <1139084195.11123.14.camel@yossarian>
	 <1139089620.11123.16.camel@yossarian> <200602042305.16891.mxhaard@magic.fr>
Message-ID: <1139091839.11123.21.camel@yossarian>

l?r 2006-02-04 klockan 23:05 +0100 skrev michel Xhaard:
> Mikael
> This driver design is v4l2 only . The v4L1 compat only works for old driver to 
> the new interface, but a young driver, like uvcvideo works directly on v4l2.

Hmmm? Are you sure? This is the text in v4l1-compat.c:

 *      Video for Linux Two
 *      Backward Compatibility Layer
 *
 *      Support subroutines for providing V4L2 drivers with backward
 *      compatibility with applications using the old API.
 *

I read this as support for *new* drivers and *old* applications, not the
other way around. But then again, I'm no expert...

/Mikael
-- 
Plus ?a change, plus c'est la m?me chose



From cvazquez at udc.es  Sun Feb  5 02:18:03 2006
From: cvazquez at udc.es (cvazquez at udc.es)
Date: Sun, 05 Feb 2006 02:18:03 +0100
Subject: [Linux-uvc-devel] Anyone already working on pan and tilt control?
Message-ID: <1139102282.43e5524b002b1@webmail.udc.es>


On Fri, 03 Feb 2006 at 14:18:55 -0700, Rick L Vinyard Jr wrote:
>On Fri, 2006-02-03 at 17:02 +0100, Laurent Pinchart wrote:
>> I'll get a pan/tilt webcam (many thanks to Logitech) on monday. You can
>expect
>> a driver update in a week or two if I'm not too busy with other
> projects :-)
>
> That sounds great. I'm glad to hear Logitech is supporting developers;
> after all, it really is in their best interests.

Very good news.

> > In the meantime, if someone wants to start coding, I'd like to have a
> look at
> > the descriptors (lsusb -v from the CVS version of usbutils +
> > cat /proc/bus/usb/xxx/yyy > descriptors.bin).
>
> I'd be happy to, but I wouldn't be able to until Monday at the earliest,
> which sounds like it will be too late.

I attach the results of  "cat /proc/bus/usb/*/* > descriptors.bin" and
 "lsusb -v" (lsusb (usbutils) version 0.71) on file
'usb_descriptors.logitech_sphere'.
I will try to install lsusb from CVS version ASAP.





----------------------------------------------------------------
Correo enviado usando el servicio de Webmail del SIAIN
-------------- next part --------------
A non-text attachment was scrubbed...
Name: usb_descriptors.logitech_sphere
Type: text/x-java
Size: 26660 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20060205/ac653425/attachment.java>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: descriptors.bin
Type: application/octet-stream
Size: 1540 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20060205/ac653425/attachment.bin>

From anssi_ranta at suomi24.fi  Mon Feb  6 14:51:12 2006
From: anssi_ranta at suomi24.fi (anssi Ranta)
Date: Mon, 6 Feb 2006 14:51:12 +0100 (CET)
Subject: [Linux-uvc-devel] Howto install Quickcam Pro 5000?
Message-ID: <11314889.1139233872621.JavaMail.apache@eni-cpps04.sth.basefarm.net>

I use Ubuntu 5.10 and I have Qc Pro 5000
can anyone help me? how can I install it?
I'm new linux user so keep it simple!





From laurent.pinchart at skynet.be  Mon Feb  6 17:23:19 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 6 Feb 2006 17:23:19 +0100
Subject: [Linux-uvc-devel] [SVN] Added preliminary pan/tilt support for Quickcam Orbit MP
Message-ID: <200602061723.19542.laurent.pinchart@skynet.be>

Hi everybody,

thanks to Logitech that sent a Quickcam Orbit MP, you can find a preliminary 
pan/tilt support in the latest SVN release. Preliminary means that pan/tilt 
works as expected, but the interface will change in the near future as I 
rewrite the UVC controls handling code.

As this is a brand new feature, you probably won't find any application 
supporting it yet. For those of you who would like to play with pan/tilt, 
here's the API.

Pan/tilt is currently implemented with the following controls (refer to the 
V4L2 API for details regarding how to use VIDIOC_S_CTRL) :

- V4L2_CID_PANTILT_RELATIVE (V4L2_CID_PRIVATE_BASE+7) commands the pan/tilt 
motion. The argument is a 4 bytes array formatted as a 32 bits number.

Offset	Field		Size	Value		Description
-----------------------------------------------------------------------------
0	wPanRelative	2	Signed Number	Pan relative rotation
2	wTiltRelative	2	SignedNumber	Tilt relative rotation


- V4L2_CID_PANTILT_RESET (V4L2_CID_PRIVATE_BASE+8) resets pan/tilt to their 
default value. The argument is a bit field formatted as a 32 bits number.

Offset	Field		Size	Value		Description
-----------------------------------------------------------------------------
0	bReset		1	Number		D0: 	0 No action
							1 Reset Pan position
						D1: 	0 No action
							1 Reset Tilt position
						D2..D7: Not used (set to 0)

The interface *will* change in a future release, but in the meantime you can 
start implementing a motion-tracking algorithm :-)

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Feb  6 17:48:46 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 6 Feb 2006 17:48:46 +0100
Subject: [Linux-uvc-devel] Howto install Quickcam Pro 5000?
In-Reply-To: <11314889.1139233872621.JavaMail.apache@eni-cpps04.sth.basefarm.net>
References: <11314889.1139233872621.JavaMail.apache@eni-cpps04.sth.basefarm.net>
Message-ID: <200602061748.46937.laurent.pinchart@skynet.be>

> I use Ubuntu 5.10 and I have Qc Pro 5000
> can anyone help me? how can I install it?
> I'm new linux user so keep it simple!

Well, it's quite simple, if you know how to compile a kernel :-)

(Lines starting by $ are commands you will have to run in a console, don't 
type the leading $. Be sure to copy the complete command when it spans 
several lines.)

- Install the subversion client (I've never used Ubuntu but I suppose there is 
a software manager application somewhere to install packages)
- Open a console
- Fetch the driver sources :
$ svn checkout http://svn.berlios.de/svnroot/repos/linux-uvc/linux-uvc/trunk  
linux-uvc
- Compile the driver :
$ make
- Become superuser (root) :
$ su
- Install the driver :
$ make install

You're done. If you Linux kernel is too old, you might want to upgrade it to 
2.6.15 before compiling the driver.

Now, depending on what you want to do with your webcam, you will probably want 
to install applications. The latest version of Ekiga (Gnomemeeting) supports 
your webcam.

Laurent Pinchart


From mxhaard at magic.fr  Mon Feb  6 21:10:53 2006
From: mxhaard at magic.fr (michel Xhaard)
Date: Mon, 6 Feb 2006 21:10:53 +0100
Subject: [Linux-uvc-devel] [SVN] Added preliminary pan/tilt support for Quickcam Orbit MP
In-Reply-To: <200602061723.19542.laurent.pinchart@skynet.be>
References: <200602061723.19542.laurent.pinchart@skynet.be>
Message-ID: <200602062110.53964.mxhaard@magic.fr>

Le Lundi 6 F?vrier 2006 17:23, Laurent Pinchart a ?crit?:
> Hi everybody,
>
> thanks to Logitech that sent a Quickcam Orbit MP, you can find a
> preliminary pan/tilt support in the latest SVN release. Preliminary means
> that pan/tilt works as expected, but the interface will change in the near
> future as I rewrite the UVC controls handling code.
>
> As this is a brand new feature, you probably won't find any application
> supporting it yet. For those of you who would like to play with pan/tilt,
> here's the API.
>
> Pan/tilt is currently implemented with the following controls (refer to the
> V4L2 API for details regarding how to use VIDIOC_S_CTRL) :
>
> - V4L2_CID_PANTILT_RELATIVE (V4L2_CID_PRIVATE_BASE+7) commands the pan/tilt
> motion. The argument is a 4 bytes array formatted as a 32 bits number.
>
> Offset	Field		Size	Value		Description
> ---------------------------------------------------------------------------
>-- 0	wPanRelative	2	Signed Number	Pan relative rotation
> 2	wTiltRelative	2	SignedNumber	Tilt relative rotation
>
>
> - V4L2_CID_PANTILT_RESET (V4L2_CID_PRIVATE_BASE+8) resets pan/tilt to their
> default value. The argument is a bit field formatted as a 32 bits number.
>
> Offset	Field		Size	Value		Description
> ---------------------------------------------------------------------------
>-- 0	bReset		1	Number		D0: 	0 No action
> 							1 Reset Pan position
> 						D1: 	0 No action
> 							1 Reset Tilt position
> 						D2..D7: Not used (set to 0)
>
> The interface *will* change in a future release, but in the meantime you
> can start implementing a motion-tracking algorithm :-)
>
> Laurent Pinchart
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/linux-uvc-devel
Laurent, 
Just trying to set the feature in uvcview but with some problems 
so a question :
is - V4L2_CID_PANTILT_RESET mean the two motors are reset to a middle value ?
Hope there are electronic switch in the webcam at the moment the webcam switch 
to max min without middle point :))
regards 
-- 
Michel Xhaard
http://mxhaard.free.fr


From mxhaard at magic.fr  Mon Feb  6 21:39:03 2006
From: mxhaard at magic.fr (michel Xhaard)
Date: Mon, 6 Feb 2006 21:39:03 +0100
Subject: [Linux-uvc-devel] [SVN] Added preliminary pan/tilt support for Quickcam Orbit MP
In-Reply-To: <200602061723.19542.laurent.pinchart@skynet.be>
References: <200602061723.19542.laurent.pinchart@skynet.be>
Message-ID: <200602062139.03341.mxhaard@magic.fr>

Le Lundi 6 F?vrier 2006 17:23, Laurent Pinchart a ?crit?:
> Hi everybody,
>
> thanks to Logitech that sent a Quickcam Orbit MP, you can find a
> preliminary pan/tilt support in the latest SVN release. Preliminary means
> that pan/tilt works as expected, but the interface will change in the near
> future as I rewrite the UVC controls handling code.
>
> As this is a brand new feature, you probably won't find any application
> supporting it yet. For those of you who would like to play with pan/tilt,
> here's the API.
>
> Pan/tilt is currently implemented with the following controls (refer to the
> V4L2 API for details regarding how to use VIDIOC_S_CTRL) :
>
> - V4L2_CID_PANTILT_RELATIVE (V4L2_CID_PRIVATE_BASE+7) commands the pan/tilt
> motion. The argument is a 4 bytes array formatted as a 32 bits number.
>
> Offset	Field		Size	Value		Description
> ---------------------------------------------------------------------------
>-- 0	wPanRelative	2	Signed Number	Pan relative rotation
> 2	wTiltRelative	2	SignedNumber	Tilt relative rotation
>
>
> - V4L2_CID_PANTILT_RESET (V4L2_CID_PRIVATE_BASE+8) resets pan/tilt to their
> default value. The argument is a bit field formatted as a 32 bits number.
>
> Offset	Field		Size	Value		Description
> ---------------------------------------------------------------------------
>-- 0	bReset		1	Number		D0: 	0 No action
> 							1 Reset Pan position
> 						D1: 	0 No action
> 							1 Reset Tilt position
> 						D2..D7: Not used (set to 0)
>
> The interface *will* change in a future release, but in the meantime you
> can start implementing a motion-tracking algorithm :-)
>
> Laurent Pinchart
> _______________________________________________
Well another question I use :
int err =0;
    queryctrl->id = control;
    if ((err= ioctl(vd->fd, VIDIOC_QUERYCTRL, queryctrl)) < 0) {
	printf("ioctl querycontrol error %d \n",err);
to verify the control V4L2_CID_PANTILT_RESET  exist
 for some strange reason the ioctl return -EPERM ?
-- 
Michel Xhaard
http://mxhaard.free.fr


From laurent.pinchart at skynet.be  Mon Feb  6 21:56:59 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 6 Feb 2006 21:56:59 +0100
Subject: [Linux-uvc-devel] [SVN] Added preliminary pan/tilt support for Quickcam Orbit MP
In-Reply-To: <200602062139.03341.mxhaard@magic.fr>
References: <200602061723.19542.laurent.pinchart@skynet.be> <200602062139.03341.mxhaard@magic.fr>
Message-ID: <200602062156.59841.laurent.pinchart@skynet.be>

> Well another question I use :
> int err =0;
>     queryctrl->id = control;
>     if ((err= ioctl(vd->fd, VIDIOC_QUERYCTRL, queryctrl)) < 0) {
> 	printf("ioctl querycontrol error %d \n",err);
> to verify the control V4L2_CID_PANTILT_RESET  exist
>  for some strange reason the ioctl return -EPERM ?

Print errno instead of err. ioctl() returns -1 (== -EPERM) in case of failure. 
The error code is stored in errno.

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Feb  6 21:59:02 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 6 Feb 2006 21:59:02 +0100
Subject: [Linux-uvc-devel] [SVN] Added preliminary pan/tilt support for Quickcam Orbit MP
In-Reply-To: <200602062110.53964.mxhaard@magic.fr>
References: <200602061723.19542.laurent.pinchart@skynet.be> <200602062110.53964.mxhaard@magic.fr>
Message-ID: <200602062159.02776.laurent.pinchart@skynet.be>

> Just trying to set the feature in uvcview but with some problems
> so a question :
> is - V4L2_CID_PANTILT_RESET mean the two motors are reset to a middle value
> ? Hope there are electronic switch in the webcam at the moment the webcam
> switch to max min without middle point :))

V4L2_CID_PANTILT_RESET means the motors will move to a middle position along 
the pan axis and tilt axis when bits 0 and 1 of tha value are set.

0 : No action
1 : Pan reset
2 : Tilt reset
3 : Pan/Tilt reset

Laurent Pinchart


From mini at nada.kth.se  Mon Feb  6 22:59:08 2006
From: mini at nada.kth.se (Mikael Nilsson)
Date: Mon, 06 Feb 2006 22:59:08 +0100
Subject: [Linux-uvc-devel] V4L1 backwards compatibility
In-Reply-To: <1139091839.11123.21.camel@yossarian>
References: <1139084195.11123.14.camel@yossarian>
	 <1139089620.11123.16.camel@yossarian> <200602042305.16891.mxhaard@magic.fr>
	 <1139091839.11123.21.camel@yossarian>
Message-ID: <1139263149.11330.73.camel@yossarian>

If I understand the kernel API correctly, something like this patch
*should* bring V4L1 compatibility to the uvc driver. However, I don't
get a picture in gnomemeeting (old version, not ekiga), and not in the
proprietary app I talked about.

I suppose there might be a reson why this cannot work. Can anyone
enlighten me?



Index: uvcvideo.c
===================================================================
--- uvcvideo.c  (revision 17)
+++ uvcvideo.c  (working copy)
@@ -2139,7 +2139,8 @@

        default:
                uvc_trace(UVC_TRACE_IOCTL, "Unknown ioctl 0x%08x\n", cmd);
-               return -ENOIOCTLCMD;
+               return v4l_compat_translate_ioctl(inode,file,cmd,arg,
+                                                 uvc_v4l2_do_ioctl);
        }

        return 0;


/Mikael

l?r 2006-02-04 klockan 23:23 +0100 skrev Mikael Nilsson:
> l?r 2006-02-04 klockan 23:05 +0100 skrev michel Xhaard:
> > Mikael
> > This driver design is v4l2 only . The v4L1 compat only works for old driver to 
> > the new interface, but a young driver, like uvcvideo works directly on v4l2.
> 
> Hmmm? Are you sure? This is the text in v4l1-compat.c:
> 
>  *      Video for Linux Two
>  *      Backward Compatibility Layer
>  *
>  *      Support subroutines for providing V4L2 drivers with backward
>  *      compatibility with applications using the old API.
>  *
> 
> I read this as support for *new* drivers and *old* applications, not the
> other way around. But then again, I'm no expert...
> 
> /Mikael
-- 
Plus ?a change, plus c'est la m?me chose



From luc at saillard.org  Mon Feb  6 23:29:16 2006
From: luc at saillard.org (Luc Saillard)
Date: Mon, 6 Feb 2006 23:29:16 +0100
Subject: [Linux-uvc-devel] V4L1 backwards compatibility
In-Reply-To: <1139263149.11330.73.camel@yossarian>
References: <1139084195.11123.14.camel@yossarian> <1139089620.11123.16.camel@yossarian> <200602042305.16891.mxhaard@magic.fr> <1139091839.11123.21.camel@yossarian> <1139263149.11330.73.camel@yossarian>
Message-ID: <20060206222915.GZ20204@sd291.sivit.org>

On Mon, Feb 06, 2006 at 10:59:08PM +0100, Mikael Nilsson wrote:
> If I understand the kernel API correctly, something like this patch
> *should* bring V4L1 compatibility to the uvc driver. However, I don't
> get a picture in gnomemeeting (old version, not ekiga), and not in the
> proprietary app I talked about.
> 
> I suppose there might be a reson why this cannot work. Can anyone
> enlighten me?
> 
 
Because Gnomemeeting don't support MJPEG frame before beta2 and only in v4l2.

Luc


From mini at nada.kth.se  Mon Feb  6 23:36:55 2006
From: mini at nada.kth.se (Mikael Nilsson)
Date: Mon, 06 Feb 2006 23:36:55 +0100
Subject: [Linux-uvc-devel] V4L1 backwards compatibility
In-Reply-To: <20060206222915.GZ20204@sd291.sivit.org>
References: <1139084195.11123.14.camel@yossarian>
	 <1139089620.11123.16.camel@yossarian> <200602042305.16891.mxhaard@magic.fr>
	 <1139091839.11123.21.camel@yossarian> <1139263149.11330.73.camel@yossarian>
	 <20060206222915.GZ20204@sd291.sivit.org>
Message-ID: <1139265415.11330.76.camel@yossarian>

m?n 2006-02-06 klockan 23:29 +0100 skrev Luc Saillard:
> On Mon, Feb 06, 2006 at 10:59:08PM +0100, Mikael Nilsson wrote:
> > If I understand the kernel API correctly, something like this patch
> > *should* bring V4L1 compatibility to the uvc driver. However, I don't
> > get a picture in gnomemeeting (old version, not ekiga), and not in the
> > proprietary app I talked about.
> > 
> > I suppose there might be a reson why this cannot work. Can anyone
> > enlighten me?
> > 
>  
> Because Gnomemeeting don't support MJPEG frame before beta2 and only in v4l2.

I suspected as much. Is it reasonable to assume most v4l1 apps don't
support MJPEG at all? Why is the support only for v4l2?

/Mikael

-- 
Plus ?a change, plus c'est la m?me chose



From mxhaard at magic.fr  Mon Feb  6 23:54:44 2006
From: mxhaard at magic.fr (michel Xhaard)
Date: Mon, 6 Feb 2006 23:54:44 +0100
Subject: [Linux-uvc-devel] [SVN] Added preliminary pan/tilt support for Quickcam Orbit MP
In-Reply-To: <200602062159.02776.laurent.pinchart@skynet.be>
References: <200602061723.19542.laurent.pinchart@skynet.be> <200602062110.53964.mxhaard@magic.fr> <200602062159.02776.laurent.pinchart@skynet.be>
Message-ID: <200602062354.44937.mxhaard@magic.fr>

Le Lundi 6 F?vrier 2006 21:59, Laurent Pinchart a ?crit?:
> > Just trying to set the feature in uvcview but with some problems
> > so a question :
> > is - V4L2_CID_PANTILT_RESET mean the two motors are reset to a middle
> > value ? Hope there are electronic switch in the webcam at the moment the
> > webcam switch to max min without middle point :))
>
> V4L2_CID_PANTILT_RESET means the motors will move to a middle position
> along the pan axis and tilt axis when bits 0 and 1 of tha value are set.
>
> 0 : No action
> 1 : Pan reset
> 2 : Tilt reset
> 3 : Pan/Tilt reset
>
> Laurent Pinchart
> _______________________________________________
Pan tilt is now working with luvcview :)
 for some reason reset did not work at the moment, i will look tomorrow and 
check errno. Thanks for the answer 
regards
-- 
Michel Xhaard
http://mxhaard.free.fr


From thanatos at emptiness.de  Tue Feb  7 01:20:25 2006
From: thanatos at emptiness.de (=?ISO-8859-15?Q?J=FCrgen_Geuter?=)
Date: Tue, 07 Feb 2006 01:20:25 +0100
Subject: [Linux-uvc-devel] Howto install Quickcam Pro 5000?
In-Reply-To: <200602061748.46937.laurent.pinchart@skynet.be>
References: <11314889.1139233872621.JavaMail.apache@eni-cpps04.sth.basefarm.net> <200602061748.46937.laurent.pinchart@skynet.be>
Message-ID: <43E7E7C9.60703@emptiness.de>

Laurent Pinchart wrote:
> Well, it's quite simple, if you know how to compile a kernel :-)
> 
> - Install the subversion client (I've never used Ubuntu but I suppose there is 
> a software manager application somewhere to install packages)

(you can use the graphical package manager or "apt-get install 
<PACKAGE-NAME>). I'm not sure but I think you might have to install the 
kernel sources respective the kernel headers for your kernel. The 
packages are called "kernel-headers" and "kernel-sources" afaik.


-- 
ICQ # 81510866  -  http://www.emptiness.de  -  thanatos at emptiness.de
"Governments can be useful to the governed only so long as inherent 
tendencies toward tyranny are restrained."
Frank Herbert, 'God Emperor Of Dune'


From mini at nada.kth.se  Tue Feb  7 10:19:50 2006
From: mini at nada.kth.se (Mikael Nilsson)
Date: Tue, 07 Feb 2006 10:19:50 +0100
Subject: [Linux-uvc-devel] Howto install Quickcam Pro 5000?
In-Reply-To: <43E7E7C9.60703@emptiness.de>
References: 	 <11314889.1139233872621.JavaMail.apache@eni-cpps04.sth.basefarm.net>
	 <200602061748.46937.laurent.pinchart@skynet.be>
	 <43E7E7C9.60703@emptiness.de>
Message-ID: <1139303991.7885.4.camel@yossarian>

tis 2006-02-07 klockan 01:20 +0100 skrev J?rgen Geuter:
> Laurent Pinchart wrote:
> > Well, it's quite simple, if you know how to compile a kernel :-)
> > 
> > - Install the subversion client (I've never used Ubuntu but I suppose there is 
> > a software manager application somewhere to install packages)
> 
> (you can use the graphical package manager or "apt-get install 
> <PACKAGE-NAME>). I'm not sure but I think you might have to install the 
> kernel sources respective the kernel headers for your kernel. The 
> packages are called "kernel-headers" and "kernel-sources" afaik.

I don't know about Ubuntu 5.10, but the Debian packages changed to
linux-headers-... last summer or so. The linux-headers-... (or
kernel-headers-... if your system is a bit older) package should be
enough. 

Also, don't mistake this for the userspace headers, which are in
"linux-kernel-headers", and will not work for compiling modules.

/Mikael



> 
> 
-- 
Plus ?a change, plus c'est la m?me chose



From phil at firestorm.cx  Tue Feb  7 10:42:43 2006
From: phil at firestorm.cx (Philip Heron)
Date: Tue, 07 Feb 2006 09:42:43 +0000
Subject: [Linux-uvc-devel] V4L1 backwards compatibility
In-Reply-To: <1139265415.11330.76.camel@yossarian>
References: <1139084195.11123.14.camel@yossarian>
	 <1139089620.11123.16.camel@yossarian> <200602042305.16891.mxhaard@magic.fr>
	 <1139091839.11123.21.camel@yossarian> <1139263149.11330.73.camel@yossarian>
	 <20060206222915.GZ20204@sd291.sivit.org>
	 <1139265415.11330.76.camel@yossarian>
Message-ID: <1139305364.3033.5.camel@beastie.firestorm.cx>

On Mon, 2006-02-06 at 23:36 +0100, Mikael Nilsson wrote:
> > Because Gnomemeeting don't support MJPEG frame before beta2 and only in v4l2.
> 
> I suspected as much. Is it reasonable to assume most v4l1 apps don't
> support MJPEG at all? Why is the support only for v4l2?

There was an extension to V4L adding MJPEG support for the Zoran
drivers. It's not well supported by any apps, and I don't think the V4L
compatibility layer supports this extension either.

-Phil <phil at firestorm.cx>




From mxhaard at magic.fr  Tue Feb  7 12:43:24 2006
From: mxhaard at magic.fr (michel Xhaard)
Date: Tue, 7 Feb 2006 12:43:24 +0100
Subject: [Linux-uvc-devel] [SVN] Added preliminary pan/tilt support for Quickcam Orbit MP
In-Reply-To: <200602062156.59841.laurent.pinchart@skynet.be>
References: <200602061723.19542.laurent.pinchart@skynet.be> <200602062139.03341.mxhaard@magic.fr> <200602062156.59841.laurent.pinchart@skynet.be>
Message-ID: <200602071243.24718.mxhaard@magic.fr>

Le Lundi 6 F?vrier 2006 21:56, Laurent Pinchart a ?crit?:
> > Well another question I use :
> > int err =0;
> >     queryctrl->id = control;
> >     if ((err= ioctl(vd->fd, VIDIOC_QUERYCTRL, queryctrl)) < 0) {
> > 	printf("ioctl querycontrol error %d \n",err);
> > to verify the control V4L2_CID_PANTILT_RESET  exist
> >  for some strange reason the ioctl return -EPERM ?
>
> Print errno instead of err. ioctl() returns -1 (== -EPERM) in case of
> failure. The error code is stored in errno.
>
> Laurent Pinchart

errno is set with  EIO 
-- 
Michel Xhaard
http://mxhaard.free.fr


From laurent.pinchart at skynet.be  Tue Feb  7 13:09:47 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 7 Feb 2006 13:09:47 +0100
Subject: [Linux-uvc-devel] [SVN] Added preliminary pan/tilt support for Quickcam Orbit MP
In-Reply-To: <200602071243.24718.mxhaard@magic.fr>
References: <200602061723.19542.laurent.pinchart@skynet.be> <200602062156.59841.laurent.pinchart@skynet.be> <200602071243.24718.mxhaard@magic.fr>
Message-ID: <200602071309.47718.laurent.pinchart@skynet.be>

> > > Well another question I use :
> > > int err =0;
> > >     queryctrl->id = control;
> > >     if ((err= ioctl(vd->fd, VIDIOC_QUERYCTRL, queryctrl)) < 0) {
> > > 	printf("ioctl querycontrol error %d \n",err);
> > > to verify the control V4L2_CID_PANTILT_RESET  exist
> > >  for some strange reason the ioctl return -EPERM ?
> >
> > Print errno instead of err. ioctl() returns -1 (== -EPERM) in case of
> > failure. The error code is stored in errno.
>
> errno is set with  EIO

Could you apply this patch and tell me what you get in the kernel log ?

Laurent Pinchart

Index: uvcvideo.c
===================================================================
--- uvcvideo.c  (revision 18)
+++ uvcvideo.c  (working copy)
@@ -1362,8 +1362,8 @@
                        unit << 8 | intfnum, data, size, UVC_CTRL_TIMEOUT);

        if (ret != size) {
-               uvc_printk(KERN_ERR, "Failed to query UVC control %u "
-                       "(unit %u) : %d.\n", cs, unit, ret);
+               uvc_printk(KERN_ERR, "Failed to query (%u) UVC control %u "
+                       "(unit %u) : %d.\n", query, cs, unit, ret);
                return -EIO;
        }


From mxhaard at magic.fr  Tue Feb  7 13:25:23 2006
From: mxhaard at magic.fr (michel Xhaard)
Date: Tue, 7 Feb 2006 13:25:23 +0100
Subject: [Linux-uvc-devel] [SVN] Added preliminary pan/tilt support for Quickcam Orbit MP
In-Reply-To: <200602071309.47718.laurent.pinchart@skynet.be>
References: <200602061723.19542.laurent.pinchart@skynet.be> <200602071243.24718.mxhaard@magic.fr> <200602071309.47718.laurent.pinchart@skynet.be>
Message-ID: <200602071325.24087.mxhaard@magic.fr>

Le Mardi 7 F?vrier 2006 13:09, Laurent Pinchart a ?crit?:
> > > > Well another question I use :
> > > > int err =0;
> > > >     queryctrl->id = control;
> > > >     if ((err= ioctl(vd->fd, VIDIOC_QUERYCTRL, queryctrl)) < 0) {
> > > > 	printf("ioctl querycontrol error %d \n",err);
> > > > to verify the control V4L2_CID_PANTILT_RESET  exist
> > > >  for some strange reason the ioctl return -EPERM ?
> > >
> > > Print errno instead of err. ioctl() returns -1 (== -EPERM) in case of
> > > failure. The error code is stored in errno.
> >
> > errno is set with  EIO
>
> Could you apply this patch and tell me what you get in the kernel log ?
>
> Laurent Pinchart
>
> Index: uvcvideo.c
> ===================================================================
> --- uvcvideo.c  (revision 18)
> +++ uvcvideo.c  (working copy)
> @@ -1362,8 +1362,8 @@
>                         unit << 8 | intfnum, data, size, UVC_CTRL_TIMEOUT);
>
>         if (ret != size) {
> -               uvc_printk(KERN_ERR, "Failed to query UVC control %u "
> -                       "(unit %u) : %d.\n", cs, unit, ret);
> +               uvc_printk(KERN_ERR, "Failed to query (%u) UVC control %u "
> +                       "(unit %u) : %d.\n", query, cs, unit, ret);
>                 return -EIO;
>         }
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/linux-uvc-devel

Feb  7 13:16:26 linux kernel: usbcore: deregistering driver usbvideo
Feb  7 13:16:33 linux kernel: uvcvideo: Found UVC 1.00 device <unnamed> 
(046d:08c2)
Feb  7 13:16:33 linux kernel: usbcore: registered new driver usbvideo
Feb  7 13:16:33 linux kernel: USB Video Class driver (v0.1.0)
Feb  7 13:16:57 linux kernel: uvcvideo: Failed to query (132) UVC control 1 
(unit 9) : 1.
Feb  7 13:16:57 linux syslog-ng[3019]: STATS: dropped 0
Feb  7 13:17:00 linux kernel: uvcvideo: Failed to query (132) UVC control 1 
(unit 9) : 1.

-- 
Michel Xhaard
http://mxhaard.free.fr


From laurent.pinchart at skynet.be  Tue Feb  7 13:38:05 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 7 Feb 2006 13:38:05 +0100
Subject: [Linux-uvc-devel] [SVN] Added preliminary pan/tilt support for Quickcam Orbit MP
In-Reply-To: <200602071325.24087.mxhaard@magic.fr>
References: <200602061723.19542.laurent.pinchart@skynet.be> <200602071309.47718.laurent.pinchart@skynet.be> <200602071325.24087.mxhaard@magic.fr>
Message-ID: <200602071338.05303.laurent.pinchart@skynet.be>

> Feb  7 13:16:26 linux kernel: usbcore: deregistering driver usbvideo
> Feb  7 13:16:33 linux kernel: uvcvideo: Found UVC 1.00 device <unnamed>
> (046d:08c2)
> Feb  7 13:16:33 linux kernel: usbcore: registered new driver usbvideo
> Feb  7 13:16:33 linux kernel: USB Video Class driver (v0.1.0)
> Feb  7 13:16:57 linux kernel: uvcvideo: Failed to query (132) UVC control 1
> (unit 9) : 1.
> Feb  7 13:16:57 linux syslog-ng[3019]: STATS: dropped 0
> Feb  7 13:17:00 linux kernel: uvcvideo: Failed to query (132) UVC control 1
> (unit 9) : 1.

Are you sure you're not having trouble with querying 
V4L2_CID_PANTILT_RELATIVE ? The failure in the kernel log seems to indicate 
that you're querying V4L2_CID_PANTILT_RELATIVE twice.

Anyway, the following patch might help.

Laurent Pinchart

Index: uvcvideo.c
===================================================================
--- uvcvideo.c  (revision 18)
+++ uvcvideo.c  (working copy)
@@ -477,8 +477,7 @@
                .type           = V4L2_CTRL_TYPE_INTEGER,
                .unit           = UVC_GUID_LOGITECH_MOTOR,
                .flags          = UVC_CONTROL_SET_CUR | UVC_CONTROL_GET_MIN
-                               | UVC_CONTROL_GET_MAX | UVC_CONTROL_GET_RES
-                               | UVC_CONTROL_GET_DEF,
+                               | UVC_CONTROL_GET_MAX | UVC_CONTROL_GET_DEF,
        },
        {
                .v4l2           = V4L2_CID_PANTILT_RESET,


From mxhaard at magic.fr  Tue Feb  7 14:28:50 2006
From: mxhaard at magic.fr (michel Xhaard)
Date: Tue, 7 Feb 2006 14:28:50 +0100
Subject: [Linux-uvc-devel] [SVN] Added preliminary pan/tilt support for Quickcam Orbit MP
In-Reply-To: <200602071338.05303.laurent.pinchart@skynet.be>
References: <200602061723.19542.laurent.pinchart@skynet.be> <200602071325.24087.mxhaard@magic.fr> <200602071338.05303.laurent.pinchart@skynet.be>
Message-ID: <200602071428.50321.mxhaard@magic.fr>

Le Mardi 7 F?vrier 2006 13:38, Laurent Pinchart a ?crit?:
> > Feb  7 13:16:26 linux kernel: usbcore: deregistering driver usbvideo
> > Feb  7 13:16:33 linux kernel: uvcvideo: Found UVC 1.00 device <unnamed>
> > (046d:08c2)
> > Feb  7 13:16:33 linux kernel: usbcore: registered new driver usbvideo
> > Feb  7 13:16:33 linux kernel: USB Video Class driver (v0.1.0)
> > Feb  7 13:16:57 linux kernel: uvcvideo: Failed to query (132) UVC control
> > 1 (unit 9) : 1.
> > Feb  7 13:16:57 linux syslog-ng[3019]: STATS: dropped 0
> > Feb  7 13:17:00 linux kernel: uvcvideo: Failed to query (132) UVC control
> > 1 (unit 9) : 1.
>
> Are you sure you're not having trouble with querying
> V4L2_CID_PANTILT_RELATIVE ? The failure in the kernel log seems to indicate
> that you're querying V4L2_CID_PANTILT_RELATIVE twice.
>
> Anyway, the following patch might help.
>
> Laurent Pinchart
>
> Index: uvcvideo.c
> ===================================================================
> --- uvcvideo.c  (revision 18)
> +++ uvcvideo.c  (working copy)
> @@ -477,8 +477,7 @@
>                 .type           = V4L2_CTRL_TYPE_INTEGER,
>                 .unit           = UVC_GUID_LOGITECH_MOTOR,
>                 .flags          = UVC_CONTROL_SET_CUR | UVC_CONTROL_GET_MIN
> -                               | UVC_CONTROL_GET_MAX | UVC_CONTROL_GET_RES
> -                               | UVC_CONTROL_GET_DEF,
> +                               | UVC_CONTROL_GET_MAX |
> UVC_CONTROL_GET_DEF, },
>         {
>                 .v4l2           = V4L2_CID_PANTILT_RESET,
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/linux-uvc-devel
Laurent,
Sure a lot of trouble in my understanding.
maybe i have ask twice to be sure to get one in the log :)
The pantilt reset now work fine , but the pan tilt relative, not really like i 
need  :)
as i did not really understand, how the signed value are in the 4 char array, 
i have try to set up one union like that :
union pantilt {
	struct {
		short pan;
		short tilt;
	} s16;
	int value;
} pantilt;
so i expect s16.pan reffer to the signed value of pan  and
s16.tilt to the tilt value.
as a result the sign of relative goes right, tilt and pan is not mixed and i 
can scan min to max or max to min , but difficukt to stop the scan between :(
I will try your patch soon 
regards
-- 
Michel Xhaard
http://mxhaard.free.fr


From laurent.pinchart at skynet.be  Tue Feb  7 14:45:31 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 7 Feb 2006 14:45:31 +0100
Subject: [Linux-uvc-devel] [SVN] Added preliminary pan/tilt support for Quickcam Orbit MP
In-Reply-To: <200602071428.50321.mxhaard@magic.fr>
References: <200602061723.19542.laurent.pinchart@skynet.be> <200602071338.05303.laurent.pinchart@skynet.be> <200602071428.50321.mxhaard@magic.fr>
Message-ID: <200602071445.31232.laurent.pinchart@skynet.be>

> The pantilt reset now work fine , but the pan tilt relative, not really
> like i need  :)
> as i did not really understand, how the signed value are in the 4 char
> array, i have try to set up one union like that :
> union pantilt {
> 	struct {
> 		short pan;
> 		short tilt;
> 	} s16;
> 	int value;
> } pantilt;
> so i expect s16.pan reffer to the signed value of pan  and
> s16.tilt to the tilt value.
> as a result the sign of relative goes right, tilt and pan is not mixed and
> i can scan min to max or max to min , but difficukt to stop the scan
> between :(

I just noticed that there's an endianess problem in the driver. Please try the 
following code.

-----------------------------------------------------------------------------
union pantilt {
	unsigned char bytes[4];
	int value;
} pantilt;

pantilt.bytes[0] = (pan >> 0) & 0xff;
pantilt.bytes[1] = (pan >> 8) & 0xff;
pantilt.bytes[2] = (tilt >> 0) & 0xff;
pantilt.bytes[3] = (tilt >> 8) & 0xff;

ctrl.value = pantilt.value;
-----------------------------------------------------------------------------

This will only work on little endian platforms. Please note that the interface 
will probably change as soon as I find time to rework the controls handling 
code.

Laurent Pinchart


From mxhaard at magic.fr  Tue Feb  7 15:16:54 2006
From: mxhaard at magic.fr (michel Xhaard)
Date: Tue, 7 Feb 2006 15:16:54 +0100
Subject: [Linux-uvc-devel] [SVN] Added preliminary pan/tilt support for Quickcam Orbit MP
In-Reply-To: <200602071445.31232.laurent.pinchart@skynet.be>
References: <200602061723.19542.laurent.pinchart@skynet.be> <200602071428.50321.mxhaard@magic.fr> <200602071445.31232.laurent.pinchart@skynet.be>
Message-ID: <200602071516.54962.mxhaard@magic.fr>

Le Mardi 7 F?vrier 2006 14:45, Laurent Pinchart a ?crit?:
> > The pantilt reset now work fine , but the pan tilt relative, not really
> > like i need  :)
> > as i did not really understand, how the signed value are in the 4 char
> > array, i have try to set up one union like that :
> > union pantilt {
> > 	struct {
> > 		short pan;
> > 		short tilt;
> > 	} s16;
> > 	int value;
> > } pantilt;
> > so i expect s16.pan reffer to the signed value of pan  and
> > s16.tilt to the tilt value.
> > as a result the sign of relative goes right, tilt and pan is not mixed
> > and i can scan min to max or max to min , but difficukt to stop the scan
> > between :(
>
> I just noticed that there's an endianess problem in the driver. Please try
> the following code.
>
> ---------------------------------------------------------------------------
>-- union pantilt {
> 	unsigned char bytes[4];
> 	int value;
> } pantilt;
>
> pantilt.bytes[0] = (pan >> 0) & 0xff;
> pantilt.bytes[1] = (pan >> 8) & 0xff;
> pantilt.bytes[2] = (tilt >> 0) & 0xff;
> pantilt.bytes[3] = (tilt >> 8) & 0xff;
>
> ctrl.value = pantilt.value;
> ---------------------------------------------------------------------------
>--
>
> This will only work on little endian platforms. Please note that the
> interface will probably change as soon as I find time to rework the
> controls handling code.
>
> Laurent Pinchart

I get with that code  ioctl errors, the motors did not move from the middle 
position :(
-- 
Michel Xhaard
http://mxhaard.free.fr


From laurent.pinchart at skynet.be  Tue Feb  7 15:24:11 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 7 Feb 2006 15:24:11 +0100
Subject: [Linux-uvc-devel] [SVN] Added preliminary pan/tilt support for Quickcam Orbit MP
In-Reply-To: <200602071516.54962.mxhaard@magic.fr>
References: <200602061723.19542.laurent.pinchart@skynet.be> <200602071445.31232.laurent.pinchart@skynet.be> <200602071516.54962.mxhaard@magic.fr>
Message-ID: <200602071524.12310.laurent.pinchart@skynet.be>

> I get with that code  ioctl errors, the motors did not move from the middle
> position :(

Could you send me the complete pan/tilt control code, including calls to 
VIDIOC_QUERYCTRL ?

Laurent Pinchart


From mxhaard at magic.fr  Tue Feb  7 15:32:32 2006
From: mxhaard at magic.fr (michel Xhaard)
Date: Tue, 7 Feb 2006 15:32:32 +0100
Subject: [Linux-uvc-devel] [SVN] Added preliminary pan/tilt support for Quickcam Orbit MP
In-Reply-To: <200602071445.31232.laurent.pinchart@skynet.be>
References: <200602061723.19542.laurent.pinchart@skynet.be> <200602071428.50321.mxhaard@magic.fr> <200602071445.31232.laurent.pinchart@skynet.be>
Message-ID: <200602071532.32531.mxhaard@magic.fr>

Le Mardi 7 F?vrier 2006 14:45, Laurent Pinchart a ?crit?:
> > The pantilt reset now work fine , but the pan tilt relative, not really
> > like i need  :)
> > as i did not really understand, how the signed value are in the 4 char
> > array, i have try to set up one union like that :
> > union pantilt {
> > 	struct {
> > 		short pan;
> > 		short tilt;
> > 	} s16;
> > 	int value;
> > } pantilt;
> > so i expect s16.pan reffer to the signed value of pan  and
> > s16.tilt to the tilt value.
> > as a result the sign of relative goes right, tilt and pan is not mixed
> > and i can scan min to max or max to min , but difficukt to stop the scan
> > between :(
>
> I just noticed that there's an endianess problem in the driver. Please try
> the following code.
>
> ---------------------------------------------------------------------------
>-- union pantilt {
> 	unsigned char bytes[4];
> 	int value;
> } pantilt;
>
> pantilt.bytes[0] = (pan >> 0) & 0xff;
> pantilt.bytes[1] = (pan >> 8) & 0xff;
> pantilt.bytes[2] = (tilt >> 0) & 0xff;
> pantilt.bytes[3] = (tilt >> 8) & 0xff;
>
> ctrl.value = pantilt.value;
> ---------------------------------------------------------------------------
>--
>
> This will only work on little endian platforms. Please note that the
> interface will probably change as soon as I find time to rework the
> controls handling code.
>
> Laurent Pinchart
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/linux-uvc-devel

Feb  7 15:29:51 linux kernel: uvcvideo: Failed to query (135) UVC control 4 
(unit 2) : -110.
Feb  7 15:29:51 linux kernel: uvcvideo: Failed to query (130) UVC control 4 
(unit 2) : -75.
Feb  7 15:30:06 linux kernel: uvcvideo: Failed to query (1) UVC control 1 
(unit 2) : -32.
Feb  7 15:30:06 linux kernel: uvcvideo: Failed to query (1) UVC control 1 
(unit 2) : -32.
Feb  7 15:30:40 linux su: (to root) michel on /dev/pts/4
Feb  7 15:30:40 linux su: (to root) michel on /dev/pts/4
-- 
Michel Xhaard
http://mxhaard.free.fr


From mxhaard at magic.fr  Tue Feb  7 16:05:30 2006
From: mxhaard at magic.fr (michel Xhaard)
Date: Tue, 7 Feb 2006 16:05:30 +0100
Subject: [Linux-uvc-devel] [SVN] Added preliminary pan/tilt support for Quickcam Orbit MP
In-Reply-To: <200602071524.12310.laurent.pinchart@skynet.be>
References: <200602061723.19542.laurent.pinchart@skynet.be> <200602071516.54962.mxhaard@magic.fr> <200602071524.12310.laurent.pinchart@skynet.be>
Message-ID: <200602071605.30199.mxhaard@magic.fr>

Le Mardi 7 F?vrier 2006 15:24, Laurent Pinchart a ?crit?:
> > I get with that code  ioctl errors, the motors did not move from the
> > middle position :(
>
> Could you send me the complete pan/tilt control code, including calls to
> VIDIOC_QUERYCTRL ?
>
> Laurent Pinchart
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/linux-uvc-devel
Laurent
I have send the relevant code in privacy, with some comments in french :)
-- 
Michel Xhaard
http://mxhaard.free.fr


From mxhaard at magic.fr  Tue Feb  7 21:06:02 2006
From: mxhaard at magic.fr (michel Xhaard)
Date: Tue, 7 Feb 2006 21:06:02 +0100
Subject: [Linux-uvc-devel] luvcview support pan /tilt :)
Message-ID: <200602072106.02593.mxhaard@magic.fr>

hi all
luvcview now support pan tilt for the Logitech  Quickcam Orbit MP
available here:
http://mxhaard.free.fr/spca50x/Investigation/uvc/
there are a new option -w to disable SDl hardware acceleration if necessarry 
regards
-- 
Michel Xhaard
http://mxhaard.free.fr


From ghostx at optonline.net  Tue Feb  7 21:19:43 2006
From: ghostx at optonline.net (Salvador Gonzalez)
Date: Tue, 7 Feb 2006 15:19:43 -0500
Subject: [Linux-uvc-devel] luvcview ebuild
In-Reply-To: <200602072106.02593.mxhaard@magic.fr>
References: <200602072106.02593.mxhaard@magic.fr>
Message-ID: <200602071519.43786.ghostx@optonline.net>

Hey all,
	Attached is a gentoo ebuild for luvcview.  Enjoy!

-------------- next part --------------
# Copyright 1999-2005 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2
# $Header: $

DESCRIPTION="$PN is a program to watch streams from uvc webcams"
IUSE=""
DEPEND="media-libs/libsdl"
SLOT="0"
KEYWORDS="~x86 ~amd64"
HOMEPAGE="http://mxhaard.free.fr/download.html"
SRC_URI="http://mxhaard.free.fr/spca50x/Investigation/uvc/$PN-$PV.tar.gz"

src_compile() {
        cd $S
	make $PN||die "Error: The compilation failed. Please report back the the uvc mailinglist linux-uvc-devel at lists.berlios.de\!"
}

src_install() {
 	mkdir $D/usr
	mkdir $D/usr/bin
	cp $S/$PN $D/usr/bin
}

From phil at firestorm.cx  Wed Feb  8 19:53:26 2006
From: phil at firestorm.cx (Philip Heron)
Date: Wed, 08 Feb 2006 18:53:26 +0000
Subject: [Linux-uvc-devel] Small typo
Message-ID: <1139424806.3562.5.camel@beastie.firestorm.cx>

Hi all,

 I got a first chance to use the linux-uvc driver today with the arrival
of a QC Fusion camera. It built cleanly and worked first time. Nice
work!

Attached is a patch that fixes a very tiny typo in one of the control
names.

-Phil <phil at firestorm.cx>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: linux-uvc-brightness-type.diff
Type: text/x-patch
Size: 391 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20060208/2b4ee549/attachment.bin>

From laurent.pinchart at skynet.be  Wed Feb  8 20:22:35 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 8 Feb 2006 20:22:35 +0100
Subject: [Linux-uvc-devel] Small typo
In-Reply-To: <1139424806.3562.5.camel@beastie.firestorm.cx>
References: <1139424806.3562.5.camel@beastie.firestorm.cx>
Message-ID: <200602082022.35948.laurent.pinchart@skynet.be>

Hi Philip,

>  I got a first chance to use the linux-uvc driver today with the arrival
> of a QC Fusion camera. It built cleanly and worked first time. Nice
> work!

Thanks. I like to receive feedback from happy users...

> Attached is a patch that fixes a very tiny typo in one of the control
> names.

... especially when they send patches :-)

Laurent Pinchart


From nicolas at mizel.ch  Thu Feb  9 16:54:22 2006
From: nicolas at mizel.ch (Nicolas Mizel)
Date: Thu, 9 Feb 2006 16:54:22 +0100 (CET)
Subject: [Linux-uvc-devel] Quickcam Pro 5000 - Pinkish images
Message-ID: <38947.193.43.93.1.1139500462.squirrel@sirius.mizel.ch>

Hello,

I successfully compiled and installed the uvcvideo driver on a Linux
2.6.12-1.1381_FC3 running on a VIA EDEN 5000 motherboard (USB 1.1).

My Quickcam Pro 5000 is correctly detected

[root at sirius ~]# lsusb
Bus 002 Device 001: ID 0000:0000
Bus 001 Device 013: ID 046d:08c5 Logitech, Inc.
Bus 001 Device 005: ID 0db0:1967 Micro Star International Bluetooth Dongle
Bus 001 Device 003: ID 0840:0082 Argosy Research, Inc.
Bus 001 Device 002: ID 03eb:3301 Atmel Corp. 4-port Hub
Bus 001 Device 001: ID 0000:0000

and I can take pictures with the test program (test.c) posted on this list
some time ago. I then convert the pictures (adding the missing the Huffman
tables) with the Python script available in the svn trunk.

So far, so good, indoor pictures looks fine, but outdoor pictures looks
pinkish (e.g. http://sirius.mizel.net/quickcam-099.jpg).

What could be causing this problem? Something wrong with the Huffman tables?
I'll test tonight my camera with the Logitech software just in case.

Also, how do I set up the camera parameters such as Brightness, Contrast,
Saturation, Backlight Compensation, etc. Maybe that's what I am missing...

Thanks for all the hard work spent on this cool driver.

Best regards,
Nicolas



From nicolas at mizel.ch  Fri Feb 10 14:49:36 2006
From: nicolas at mizel.ch (Nicolas Mizel)
Date: Fri, 10 Feb 2006 14:49:36 +0100 (CET)
Subject: [Linux-uvc-devel] Quickcam Pro 5000 - Pinkish images
In-Reply-To: <38947.193.43.93.1.1139500462.squirrel@sirius.mizel.ch>
References: <38947.193.43.93.1.1139500462.squirrel@sirius.mizel.ch>
Message-ID: <58952.193.43.93.1.1139579376.squirrel@sirius.mizel.ch>

Hello again,

> I'll test tonight my camera with the Logitech software just in case.

Well, same effect with the Logitech software. It happens only outdoor with
a lot of light. I never experienced this odd behaviour with my old
Quickcam Pro 4000.

> Also, how do I set up the camera parameters such as Brightness, Contrast,
> Saturation, Backlight Compensation, etc. Maybe that's what I am missing...

I found v4lctl from the xawtv package that allows to control the camera's
parameters.

Regards,
Nicolas



From falso at rdk.homeip.net  Fri Feb 10 15:09:28 2006
From: falso at rdk.homeip.net (Pedro de Oliveira)
Date: Fri, 10 Feb 2006 14:09:28 -0000
Subject: [Linux-uvc-devel] Bulk Transfers
Message-ID: <001f01c62e4b$9b2e3740$1a00a8c0@PC26>

Hello sirs, i just wanted to ask if theres any news about BULK Transfers,
cause my camera uses UVC but the *traferring* method is different from the
one that seems that every other cam uses.

Thanks



From laurent.pinchart at skynet.be  Fri Feb 10 16:53:16 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 10 Feb 2006 16:53:16 +0100
Subject: [Linux-uvc-devel] Bulk Transfers
In-Reply-To: <001f01c62e4b$9b2e3740$1a00a8c0@PC26>
References: <001f01c62e4b$9b2e3740$1a00a8c0@PC26>
Message-ID: <200602101653.16414.laurent.pinchart@skynet.be>

> Hello sirs, i just wanted to ask if theres any news about BULK Transfers,
> cause my camera uses UVC but the *traferring* method is different from the
> one that seems that every other cam uses.

Bulk transfers are unfortunately still not supported. If someone on this list 
owns a bulk UVC device and either a) wants to try kernel development, b) can 
send me the device (yes, I'm a dreamer :-)) or c) can give me root ssh access 
to a box on which the device is plugged, with a way to reboot the box, I 
think it wouldn't take long to implement bulk transfers.

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Feb 10 16:55:23 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 10 Feb 2006 16:55:23 +0100
Subject: [Linux-uvc-devel] Quickcam Pro 5000 - Pinkish images
In-Reply-To: <58952.193.43.93.1.1139579376.squirrel@sirius.mizel.ch>
References: <38947.193.43.93.1.1139500462.squirrel@sirius.mizel.ch> <58952.193.43.93.1.1139579376.squirrel@sirius.mizel.ch>
Message-ID: <200602101655.23245.laurent.pinchart@skynet.be>

> Hello again,
>
> > I'll test tonight my camera with the Logitech software just in case.
>
> Well, same effect with the Logitech software. It happens only outdoor with
> a lot of light. I never experienced this odd behaviour with my old
> Quickcam Pro 4000.

So it's definitely not a driver problem. Bad news, as it could have been fixed 
more easily.

> > Also, how do I set up the camera parameters such as Brightness, Contrast,
> > Saturation, Backlight Compensation, etc. Maybe that's what I am
> > missing...
>
> I found v4lctl from the xawtv package that allows to control the camera's
> parameters.

v4lctl should work out of the box for standard controls, exotic and 
proprietary controls will need to be added to v4lctl and all other v4l-aware 
applications.

Laurent Pinchart


From szo at ies.hu  Fri Feb 10 16:54:06 2006
From: szo at ies.hu (SZOKOVACS Robert)
Date: Fri, 10 Feb 2006 16:54:06 +0100
Subject: [Linux-uvc-devel] Bulk Transfers
In-Reply-To: <200602101653.16414.laurent.pinchart@skynet.be>
References: <001f01c62e4b$9b2e3740$1a00a8c0@PC26> <200602101653.16414.laurent.pinchart@skynet.be>
Message-ID: <200602101654.06385.szo@ies.hu>

On Friday 10 February 2006 16:53, Laurent Pinchart wrote:
> > Hello sirs, i just wanted to ask if theres any news about BULK Transfers,
> > cause my camera uses UVC but the *traferring* method is different from
> > the one that seems that every other cam uses.
>
> Bulk transfers are unfortunately still not supported. If someone on this
> list owns a bulk UVC device and either a) wants to try kernel development,

what are those devices?

Szo



From ghostx at optonline.net  Fri Feb 10 17:16:13 2006
From: ghostx at optonline.net (Salvador Gonzalez)
Date: Fri, 10 Feb 2006 11:16:13 -0500
Subject: [Linux-uvc-devel] Quickcam Pro 5000 - Pinkish images
In-Reply-To: <200602101655.23245.laurent.pinchart@skynet.be>
References: <38947.193.43.93.1.1139500462.squirrel@sirius.mizel.ch> <58952.193.43.93.1.1139579376.squirrel@sirius.mizel.ch> <200602101655.23245.laurent.pinchart@skynet.be>
Message-ID: <200602101116.13319.ghostx@optonline.net>

On Friday 10 February 2006 10:55, Laurent Pinchart wrote:
> > Hello again,
> >
> > > I'll test tonight my camera with the Logitech software just in case.
> >
> > Well, same effect with the Logitech software. It happens only outdoor
> > with a lot of light. I never experienced this odd behaviour with my old
> > Quickcam Pro 4000.
>
> So it's definitely not a driver problem. Bad news, as it could have been
> fixed more easily.

Since it looks to only happen on outdoor images (esp. in the sky,) is there 
any chance this is just the camera lens picking up UV light?  I remember a 
few years ago about a quickcam hack that involved removing an IR filter on 
one, that resulted in night vision-like abilities.

[*snip*]


From brian at interlinx.bc.ca  Sat Feb 11 02:13:59 2006
From: brian at interlinx.bc.ca (Brian J. Murrell)
Date: Fri, 10 Feb 2006 20:13:59 -0500
Subject: [Linux-uvc-devel] no joy with quickcam 5000
Message-ID: <1139620440.7267.46.camel@pc.ilinx>

I see some at least partial success stories here about logitech quickcam
5000s.  I'm getting nothing of the sort I'm afraid.  Even xawtv
segfaults trying to display from it.  My driver is up to date as of
yesterday but still no joy.

Where can I start in trying to figure this out?

b.

-- 
My other computer is your Microsoft Windows server.

Brian J. Murrell
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20060210/554b3316/attachment.pgp>

From anssi_ranta at suomi24.fi  Sat Feb 11 23:56:12 2006
From: anssi_ranta at suomi24.fi (anssi Ranta)
Date: Sat, 11 Feb 2006 23:56:12 +0100 (CET)
Subject: [Linux-uvc-devel] Howto install Quickcam Pro 5000?
Message-ID: <16102755.1139698572845.JavaMail.apache@eni-cpps01.sth.basefarm.net>

now it works . I had to upgrade kernel.
but it work only uvcview so is there any messanger were it work and 
how?


>----Alkuper?inen viesti----
>L?hett?j?: laurent.pinchart at skynet.be
>P?iv?m??r?: 06.02.2006 18:48
>Vastaanottaja: <linux-uvc-devel at lists.berlios.de>
>Aihe: Re: [Linux-uvc-devel] Howto install Quickcam Pro 5000?
>
>> I use Ubuntu 5.10 and I have Qc Pro 5000
>> can anyone help me? how can I install it?
>> I'm new linux user so keep it simple!
>
>Well, it's quite simple, if you know how to compile a kernel :-)
>
>(Lines starting by $ are commands you will have to run in a console, 
don't 
>type the leading $. Be sure to copy the complete command when it 
spans 
>several lines.)
>
>- Install the subversion client (I've never used Ubuntu but I suppose 
there is 
>a software manager application somewhere to install packages)
>- Open a console
>- Fetch the driver sources :
>$ svn checkout http://svn.berlios.de/svnroot/repos/linux-uvc/linux-
uvc/trunk  
>linux-uvc
>- Compile the driver :
>$ make
>- Become superuser (root) :
>$ su
>- Install the driver :
>$ make install
>
>You're done. If you Linux kernel is too old, you might want to 
upgrade it to 
>2.6.15 before compiling the driver.
>
>Now, depending on what you want to do with your webcam, you will 
probably want 
>to install applications. The latest version of Ekiga (Gnomemeeting) 
supports 
>your webcam.
>
>Laurent Pinchart
>_______________________________________________
>Linux-uvc-devel mailing list
>Linux-uvc-devel at lists.berlios.de
>http://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>




From eduardo.perez at uc3m.es  Mon Feb 13 13:47:41 2006
From: eduardo.perez at uc3m.es (Eduardo =?iso-8859-1?Q?P=E9rez?= Ureta)
Date: Mon, 13 Feb 2006 12:47:41 +0000
Subject: [Linux-uvc-devel] V4L1 backwards compatibility
In-Reply-To: <1139263149.11330.73.camel@yossarian>
References: <1139084195.11123.14.camel@yossarian> <1139089620.11123.16.camel@yossarian> <200602042305.16891.mxhaard@magic.fr> <1139091839.11123.21.camel@yossarian> <1139263149.11330.73.camel@yossarian>
Message-ID: <20060213124741.GA12287@localhost.localdomain>

I'm trying to make this driver work with applications like mplayer,
xawtv, vic, gnomemeeting but I can't get it working with any of these
applications.

I think the patch suggested by Mikael should be applied to support v4l1
only applications.

I'm attaching a patch that get some of the applications mentioned get
more ioctls working but still no luck.

Has anybody made this driver work with the mentioned applications?

I'm using a Logitech QuickCam Pro 5000

On 2006-02-06 22:59:08 +0100, Mikael Nilsson wrote:
> If I understand the kernel API correctly, something like this patch
> *should* bring V4L1 compatibility to the uvc driver. However, I don't
> get a picture in gnomemeeting (old version, not ekiga), and not in the
> proprietary app I talked about.
> 
> I suppose there might be a reson why this cannot work. Can anyone
> enlighten me?
> 
> Index: uvcvideo.c
> ===================================================================
> --- uvcvideo.c  (revision 17)
> +++ uvcvideo.c  (working copy)
> @@ -2139,7 +2139,8 @@
> 
>         default:
>                 uvc_trace(UVC_TRACE_IOCTL, "Unknown ioctl 0x%08x\n", cmd);
> -               return -ENOIOCTLCMD;
> +               return v4l_compat_translate_ioctl(inode,file,cmd,arg,
> +                                                 uvc_v4l2_do_ioctl);
>         }
> 
>         return 0;
> 
> l?r 2006-02-04 klockan 23:23 +0100 skrev Mikael Nilsson:
> > l?r 2006-02-04 klockan 23:05 +0100 skrev michel Xhaard:
> > > Mikael
> > > This driver design is v4l2 only . The v4L1 compat only works for old driver to 
> > > the new interface, but a young driver, like uvcvideo works directly on v4l2.
> > 
> > Hmmm? Are you sure? This is the text in v4l1-compat.c:
> > 
> >  *      Video for Linux Two
> >  *      Backward Compatibility Layer
> >  *
> >  *      Support subroutines for providing V4L2 drivers with backward
> >  *      compatibility with applications using the old API.
> >  *
> > 
> > I read this as support for *new* drivers and *old* applications, not the
> > other way around. But then again, I'm no expert...
-------------- next part --------------
--- uvcvideo.c
+++ uvcvideo.c
@@ -2148,12 +2148,34 @@
 		return uvc_video_enable(video, 0);
 	}
 
-	/* Analog video standards make no sense for digital cameras. */
-	case VIDIOC_ENUMSTD:
-	case VIDIOC_QUERYSTD:
 	case VIDIOC_G_STD:
+	{
+		v4l2_std_id *std = arg;
+		*std = V4L2_STD_UNKNOWN;
+		return 0;
+	}
+
 	case VIDIOC_S_STD:
+	{
+		v4l2_std_id *std = arg;
+		if (*std != V4L2_STD_UNKNOWN)
+			return -EINVAL;
+		return 0;
+	}
 
+	case VIDIOC_ENUMSTD:
+	{
+		struct v4l2_standard *std = arg;
+		if (std->index != 0)
+			return -EINVAL;
+		std->id = V4L2_STD_UNKNOWN;
+		strncpy(std->name, "webcam", sizeof(std->name));
+		return 0;
+	}
+
+	/* Analog video standards make no sense for digital cameras. */
+	case VIDIOC_QUERYSTD:
+
 	case VIDIOC_OVERLAY:
 
 	case VIDIOC_ENUMAUDIO:
@@ -2164,8 +2186,7 @@
 		return -EINVAL;
 
 	default:
-		uvc_trace(UVC_TRACE_IOCTL, "Unknown ioctl 0x%08x\n", cmd);
-		return -ENOIOCTLCMD;
+		return v4l_compat_translate_ioctl(inode,file,cmd,arg, uvc_v4l2_do_ioctl);
 	}
 
 	return 0;

From nick at customdesigns.ca  Mon Feb 13 18:30:29 2006
From: nick at customdesigns.ca (Nick Wiltshire)
Date: Mon, 13 Feb 2006 10:30:29 -0700
Subject: [Linux-uvc-devel] QC fusion almost working in kopete
In-Reply-To: <200602030223.28372.nick@customdesigns.ca>
References: <200602021233.39712.nick@customdesigns.ca> <200602030223.28372.nick@customdesigns.ca>
Message-ID: <200602131030.29432.nick@customdesigns.ca>

On Friday 03 February 2006 2:23 am, Nick Wiltshire wrote:
> On Thursday 02 February 2006 1:23 pm, Laurent Pinchart wrote:
> > Hi Nick,
> >
> > > I'm pretty new to the list, hopefully I can contribute something.
> >
> > Seems you can at least contribute problems :-)
>
> Yes, that I can do!
>
> > > Im running kopete 0.11.1 with kde 3.5.1 on a Gentoo system, kernel
> > > 2.6.14.3. I grabbed the driver (rev 16), compiled, installed,
> > > loaded...dmesg said all was well. I fired up kopete and the camera was
> > > working(!), though zoomed in so all I could see was my forehead :)
> >
> > When Kopete receives an image bigger than it expects, only the upper-left
> > corner of the image will be used instead of resizing it properly.
>
> Is there a workaround I've missed?
>
> > > I left the config window for a minute, then went back to it. Now the
> > > window just showed a pixelized QT logo. dmesg showed:
> > >
> > > uvcvideo: Failed to query UVC control 1 (unit 0) : -110.
> > >
> > > so I unloaded/reloaded the driver:
> > >
> > > usbcore: deregistering driver usbvideo
> > > uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c1)
> > > uvcvideo: Failed to query UVC control 1 (unit 0) : -110.
> > > uvcvideo: Failed to initialize the device (-5).
> > > usbcore: registered new driver usbvideo
> > > USB Video Class driver (v0.1.0)
> >
> > -110 is -ETIMEDOUT. This means the camera failed to answer fast enough.
> > I'm not sure why this happens, but do you remember if the blue light was
> > on when you went back to the Kopete window ?
>
> Yes, it was.
>
> > I noticed that the webcams are
> > sometimes slower to answer when video streaming is on. It seems that your
> > camera was left in an unknown state. Unplugging and replugging the webcam
> > should fix the problem. If not, the USB subsystem might be screwed up.
>
> Did that, now I get lines :) see...I can contribute lots of problems.
>
> > Can you reproduce the problem ?
>
> Yes.
>
> > Does unplugging and replugging the webcam
> > make it functionnal again ?
>
> Sort of (the "lines" move when the camera sees motion, but the picture is
> unrecognisable).
>
> > Could you try upgrading to kernel 2.6.15 and
> > see if things are better ?
>
> I'd be happy to. I will let you know tomorrow if it works -- if not I'll
> try Alexandre Becoulet's patch and report on that as well.
>

Apologies for taking so long to get to this. I still have the same issue with 
a 2.6.15.3 kernel. I was unable to patch the source - it kept saying the 
patch was invalid and I couldn't figure out why for the life of me.

I also tried revision 19, the problem still exists.

Alexandre - could you do a similar patch for r19 ? I'd really like to see if 
it works.

> If it matters, I was able to sync my iPod, so the USB subsystem must still
> be in decent shape.
>
> Nick


From diaxen at free.fr  Mon Feb 13 23:06:10 2006
From: diaxen at free.fr (Alexandre Becoulet)
Date: Mon, 13 Feb 2006 23:06:10 +0100
Subject: [Linux-uvc-devel] QC fusion almost working in kopete
In-Reply-To: <200602131030.29432.nick@customdesigns.ca>
References: <200602021233.39712.nick@customdesigns.ca> <200602030223.28372.nick@customdesigns.ca> <200602131030.29432.nick@customdesigns.ca>
Message-ID: <200602132306.10511.diaxen@free.fr>

On Monday 13 February 2006 18:30, Nick Wiltshire wrote:

> Alexandre - could you do a similar patch for r19 ? I'd really like to see
> if it works.

Index: uvcvideo.c
===================================================================
--- uvcvideo.c	(revision 19)
+++ uvcvideo.c	(working copy)
@@ -320,6 +320,7 @@
 
 enum uvc_device_state {
 	UVC_DEV_DISCONNECTED = 1,
+	UVC_DEV_IOERROR = 2,
 };
 
 struct uvc_device {
@@ -1346,6 +1347,29 @@
  * UVC Controls
  */
 
+static int uvc_usb_reset(struct uvc_device *dev)
+{
+	int l, ret;
+
+	l = usb_lock_device_for_reset(dev->udev, dev->intf);
+
+	if (l >= 0) {
+		ret = usb_reset_device(dev->udev);
+		if (l)
+			usb_unlock_device(dev->udev);
+	}
+	else
+		ret = -EBUSY;
+
+	if (ret)
+		uvc_printk(KERN_DEBUG, "uvc_usb_reset: Unable to reset usb device"
+			   "(%d).\n", ret);
+	else
+		dev->state &= ~UVC_DEV_IOERROR;
+
+	return ret;
+}
+
 static int uvc_query_ctrl(struct uvc_device *dev, __u8 query, __u8 unit,
 			  __u8 intfnum, __u8 cs, void *data, __u16 size)
 {
@@ -1363,6 +1387,7 @@
 	if (ret != size) {
 		uvc_printk(KERN_ERR, "Failed to query (%u) UVC control %u "
 			"(unit %u) : %d.\n", query, cs, unit, ret);
+ 		dev->state |= UVC_DEV_IOERROR;
 		return -EIO;
 	}
 
@@ -1577,6 +1602,25 @@
  * Video device
  */
 
+/* 
+ * Reset and Re-Initialize video device
+ */
+static int uvc_video_reinit(struct uvc_video_device *video)
+{
+	int ret;
+
+	if ((ret = uvc_usb_reset(video->dev)) < 0)
+		return ret;
+
+	if ((ret = uvc_set_video_ctrl(video, &video->streaming->ctrl, 0)) < 0) {
+		uvc_printk(KERN_DEBUG, "uvc_video_reinit: Unable to commit format "
+			   "(%d).\n", ret);
+		return ret;
+	}
+
+	return 0;
+}
+
 /*
  * Initialize the UVC video device.
  *
@@ -1971,6 +2015,10 @@
 		uvc_printk(KERN_ERR, "uvc_v4l2_release: Unable to free buffers.\n");
 	up(&video->queue.lock);
 
+	/* leave usb device in a clean state */
+	if (video->dev->state & UVC_DEV_IOERROR)
+		uvc_video_reinit(video);
+
 	atomic_inc(&video->count);
 	kref_put(&video->dev->kref, uvc_delete);
 	return 0;
@@ -3117,9 +3165,18 @@
 	 * parameters.
 	 */
 	if ((ret = uvc_video_init(&dev->video)) < 0) {
-		uvc_printk(KERN_ERR, "Failed to initialize the device "
-			"(%d).\n", ret);
-		return ret;
+
+		uvc_printk(KERN_ERR, "Failed to initialize the device, "
+			   "(%d). trying to reset ...\n", ret);
+
+		if ((ret = uvc_usb_reset(dev)))
+			return ret;
+
+		if ((ret = uvc_video_init(&dev->video)) < 0) {
+			uvc_printk(KERN_ERR, "Failed to initialize the device "
+				   "(%d).\n", ret);
+			return ret;
+		}
 	}
 
 	/* Register the device with V4L. */


-- 
Alexandre


From nick at customdesigns.ca  Tue Feb 14 00:30:16 2006
From: nick at customdesigns.ca (Nick Wiltshire)
Date: Mon, 13 Feb 2006 16:30:16 -0700
Subject: [Linux-uvc-devel] QC fusion almost working in kopete
In-Reply-To: <200602132306.10511.diaxen@free.fr>
References: <200602021233.39712.nick@customdesigns.ca> <200602131030.29432.nick@customdesigns.ca> <200602132306.10511.diaxen@free.fr>
Message-ID: <200602131630.16838.nick@customdesigns.ca>

On Monday 13 February 2006 3:06 pm, Alexandre Becoulet wrote:
> On Monday 13 February 2006 18:30, Nick Wiltshire wrote:
> > Alexandre - could you do a similar patch for r19 ? I'd really like to see
> > if it works.

<snipped out the patch>

I keep getting Malformed patch at line 6, which is a blank line between

@@ -320,6 +320,7 @@
-------this is line 6---------?
?enum uvc_device_state {

I tried
$patch < patchfile
and
$patch uvcvideo.c patchfile

Neither worked.

what am I doing wrong?

Nick


From diaxen at free.fr  Tue Feb 14 02:05:06 2006
From: diaxen at free.fr (Alexandre Becoulet)
Date: Tue, 14 Feb 2006 02:05:06 +0100
Subject: [Linux-uvc-devel] QC fusion almost working in kopete
In-Reply-To: <200602131630.16838.nick@customdesigns.ca>
References: <200602021233.39712.nick@customdesigns.ca> <200602132306.10511.diaxen@free.fr> <200602131630.16838.nick@customdesigns.ca>
Message-ID: <200602140205.06183.diaxen@free.fr>

On Tuesday 14 February 2006 00:30, Nick Wiltshire wrote:
> On Monday 13 February 2006 3:06 pm, Alexandre Becoulet wrote:
> > On Monday 13 February 2006 18:30, Nick Wiltshire wrote:
> > > Alexandre - could you do a similar patch for r19 ? I'd really like to
> > > see if it works.
>
> <snipped out the patch>
>
> I keep getting Malformed patch at line 6, which is a blank line between
>
> @@ -320,6 +320,7 @@
> -------this is line 6---------?
> ?enum uvc_device_state {
>
> I tried
> $patch < patchfile
> and
> $patch uvcvideo.c patchfile

It looks like the patch has been mangled. I'll send it again to you as 
attached file.

-- 
Alexandre


From lp at lapont.dk  Tue Feb 14 14:18:19 2006
From: lp at lapont.dk (Lars Pontoppidan)
Date: Tue, 14 Feb 2006 14:18:19 +0100
Subject: [Linux-uvc-devel] uvcview or luvcview
Message-ID: <43F1D89B.8010601@lapont.dk>

I have installed both uvcview and luvcview. They both work with my 
QuickCam Fusion and the uvcvideo driver.
What is the difference between the two programs?

Another question: uvcview and luvcview are the only two programs that 
work with QC Fusion on my Suse 10.0, kernel 2.6 13-15.8.
None of the two programs are very usefull, I can see myself on screen 
and make a snapshot.
I have read a post in this list, that someone nearly had success with QC 
Fusion and Kopete. My Kopete doesn't se the camera, but only my  Bt848 
Tv-card. Something I can do to make Kopete seeing the webcam?

Best regards
Lars Pontoppidan


From nick at customdesigns.ca  Tue Feb 14 18:43:28 2006
From: nick at customdesigns.ca (Nick Wiltshire)
Date: Tue, 14 Feb 2006 10:43:28 -0700
Subject: [Linux-uvc-devel] QC fusion almost working in kopete
In-Reply-To: <200602132306.10511.diaxen@free.fr>
References: <200602021233.39712.nick@customdesigns.ca> <200602131030.29432.nick@customdesigns.ca> <200602132306.10511.diaxen@free.fr>
Message-ID: <200602141043.29108.nick@customdesigns.ca>

On Monday 13 February 2006 3:06 pm, Alexandre Becoulet wrote:
> On Monday 13 February 2006 18:30, Nick Wiltshire wrote:
> > Alexandre - could you do a similar patch for r19 ? I'd really like to see
> > if it works.
>

<snip>

Ok, the new patch worked :)

gambit trunk # patch < uvcvideo-usbreset-r19.patch
patching file uvcvideo.c
gambit trunk # make
Building USB Video Class driver...
make[1]: Entering directory `/usr/src/linux-2.6.15.3'
  CC [M]  /home/nick/docs/code/linux-uvc/linux-uvc/trunk/uvcvideo.o
  Building modules, stage 2.
  MODPOST
  CC      /home/nick/docs/code/linux-uvc/linux-uvc/trunk/uvcvideo.mod.o
  LD [M]  /home/nick/docs/code/linux-uvc/linux-uvc/trunk/uvcvideo.ko
make[1]: Leaving directory `/usr/src/linux-2.6.15.3'
gambit trunk # make install
Installing USB Video Class driver...
make[1]: Entering directory `/usr/src/linux-2.6.15.3'
  INSTALL /home/nick/docs/code/linux-uvc/linux-uvc/trunk/uvcvideo.ko
make[1]: Leaving directory `/usr/src/linux-2.6.15.3'
depmod -ae
gambit trunk # lsmod
Module                  Size  Used by
ntfs                  104688  1
gambit trunk # modprobe uvcvideo
gambit trunk # lsmod
Module                  Size  Used by
uvcvideo               30916  0
ntfs                  104688  1
gambit trunk # dmesg
<snip>
uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c1)
usbcore: registered new driver usbvideo
USB Video Class driver (v0.1.0)

So far so good...

I opened Kopete, and it was working. I closed Kopete, re-opened it, and got 
mangled video...

gambit trunk #dmesg
<snip>
uvcvideo: Failed to query (130) UVC control 1 (unit 0) : -32.
uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32.
uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110.
uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110.

Then I waited a few seconds...
usb 1-1: reset high speed USB device using ehci_hcd and address 2

...and the video went back to normal! This patch gets my vote.

Nick


From laurent.pinchart at skynet.be  Tue Feb 14 23:03:24 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 14 Feb 2006 23:03:24 +0100
Subject: [Linux-uvc-devel] QC fusion almost working in kopete
In-Reply-To: <200602141043.29108.nick@customdesigns.ca>
References: <200602021233.39712.nick@customdesigns.ca> <200602132306.10511.diaxen@free.fr> <200602141043.29108.nick@customdesigns.ca>
Message-ID: <200602142303.24130.laurent.pinchart@skynet.be>

> Ok, the new patch worked :)
[snip]
> I opened Kopete, and it was working. I closed Kopete, re-opened it, and got
> mangled video...
>
> gambit trunk #dmesg
> <snip>
> uvcvideo: Failed to query (130) UVC control 1 (unit 0) : -32.
> uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32.
> uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110.
> uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110.
>
> Then I waited a few seconds...
> usb 1-1: reset high speed USB device using ehci_hcd and address 2
>
> ...and the video went back to normal! This patch gets my vote.

I'll have a look at it in a few days, I'm quite busy at the moment (if anyone 
has experience in electronic design for robot control, and has some spare 
time, please contact me :-)).

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Feb 14 23:06:14 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 14 Feb 2006 23:06:14 +0100
Subject: [Linux-uvc-devel] Bulk Transfers
In-Reply-To: <200602101654.06385.szo@ies.hu>
References: <001f01c62e4b$9b2e3740$1a00a8c0@PC26> <200602101653.16414.laurent.pinchart@skynet.be> <200602101654.06385.szo@ies.hu>
Message-ID: <200602142306.14333.laurent.pinchart@skynet.be>

> > > Hello sirs, i just wanted to ask if theres any news about BULK
> > > Transfers, cause my camera uses UVC but the *traferring* method is
> > > different from the one that seems that every other cam uses.
> >
> > Bulk transfers are unfortunately still not supported. If someone on this
> > list owns a bulk UVC device and either a) wants to try kernel
> > development,
>
> what are those devices?

Some video cameras (some Fujitsu Finepix devices from what I've heard) seem to 
be UVC compliant and use bulk transfers.

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Feb 14 23:08:24 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 14 Feb 2006 23:08:24 +0100
Subject: [Linux-uvc-devel] no joy with quickcam 5000
In-Reply-To: <1139620440.7267.46.camel@pc.ilinx>
References: <1139620440.7267.46.camel@pc.ilinx>
Message-ID: <200602142308.24683.laurent.pinchart@skynet.be>

> I see some at least partial success stories here about logitech quickcam
> 5000s.  I'm getting nothing of the sort I'm afraid.  Even xawtv
> segfaults trying to display from it.  My driver is up to date as of
> yesterday but still no joy.
>
> Where can I start in trying to figure this out?

Try luvcview (Google is your friend). If it doesn't work, the driver and/or 
your kernel are at fault, and I'll look into the issue. If it does, ask your 
favorite webcam application's developpers to fix V4L2 and/or MJPEG support.

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Feb 14 23:12:09 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 14 Feb 2006 23:12:09 +0100
Subject: [Linux-uvc-devel] uvcview or luvcview
In-Reply-To: <43F1D89B.8010601@lapont.dk>
References: <43F1D89B.8010601@lapont.dk>
Message-ID: <200602142312.09892.laurent.pinchart@skynet.be>

> I have installed both uvcview and luvcview. They both work with my
> QuickCam Fusion and the uvcvideo driver.
> What is the difference between the two programs?

There's no difference, uvcview has been renamed to luvcview (naming issue, 
uvcview is a Microsoft software).

> Another question: uvcview and luvcview are the only two programs that
> work with QC Fusion on my Suse 10.0, kernel 2.6 13-15.8.
> None of the two programs are very usefull, I can see myself on screen
> and make a snapshot.
> I have read a post in this list, that someone nearly had success with QC
> Fusion and Kopete. My Kopete doesn't se the camera, but only my  Bt848
> Tv-card. Something I can do to make Kopete seeing the webcam?

Kopete 0.11 (KDE 3.5.0) should detect the webcam. If it doesn't, have a look 
at the kernel log to see if there's anything related to the UVC driver.

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Feb 14 23:25:34 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 14 Feb 2006 23:25:34 +0100
Subject: [Linux-uvc-devel] V4L1 backwards compatibility
In-Reply-To: <20060213124741.GA12287@localhost.localdomain>
References: <1139084195.11123.14.camel@yossarian> <1139263149.11330.73.camel@yossarian> <20060213124741.GA12287@localhost.localdomain>
Message-ID: <200602142325.34778.laurent.pinchart@skynet.be>

> I'm trying to make this driver work with applications like mplayer,
> xawtv, vic, gnomemeeting but I can't get it working with any of these
> applications.

Have you tried Ekiga (Gnomemeeting 2.0) ?

> I think the patch suggested by Mikael should be applied to support v4l1
> only applications.
>
> I'm attaching a patch that get some of the applications mentioned get
> more ioctls working but still no luck.

I'll have a look at it in a few days, or earlier if I can find more than 24h 
in a single day :-)

Laurent Pinchart


From mxhaard at magic.fr  Tue Feb 14 23:42:21 2006
From: mxhaard at magic.fr (michel Xhaard)
Date: Tue, 14 Feb 2006 23:42:21 +0100
Subject: [Linux-uvc-devel] uvcview or luvcview
In-Reply-To: <200602142312.09892.laurent.pinchart@skynet.be>
References: <43F1D89B.8010601@lapont.dk> <200602142312.09892.laurent.pinchart@skynet.be>
Message-ID: <200602142342.21281.mxhaard@magic.fr>

Le Mardi 14 F?vrier 2006 23:12, Laurent Pinchart a ?crit?:
> > I have installed both uvcview and luvcview. They both work with my
> > QuickCam Fusion and the uvcvideo driver.
> > What is the difference between the two programs?
>
> There's no difference, uvcview has been renamed to luvcview (naming issue,
> uvcview is a Microsoft software).

A little diff  there are now 32 buttons for the nearest uvcvideo extensions :) 
and the support for  Pan Tilt
>
> > Another question: uvcview and luvcview are the only two programs that
> > work with QC Fusion on my Suse 10.0, kernel 2.6 13-15.8.
> > None of the two programs are very usefull, I can see myself on screen
> > and make a snapshot.
> > I have read a post in this list, that someone nearly had success with QC
> > Fusion and Kopete. My Kopete doesn't se the camera, but only my  Bt848
> > Tv-card. Something I can do to make Kopete seeing the webcam?
>
> Kopete 0.11 (KDE 3.5.0) should detect the webcam. If it doesn't, have a
> look at the kernel log to see if there's anything related to the UVC
> driver.
>
> Laurent Pinchart
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/linux-uvc-devel

-- 
Michel Xhaard
http://mxhaard.free.fr


From nicolas at mizel.ch  Tue Feb 14 23:52:59 2006
From: nicolas at mizel.ch (Nicolas Mizel)
Date: Tue, 14 Feb 2006 23:52:59 +0100
Subject: [Linux-uvc-devel] Quickcam Pro 5000 - Pinkish images
In-Reply-To: <200602101116.13319.ghostx@optonline.net>
References: <38947.193.43.93.1.1139500462.squirrel@sirius.mizel.ch> <58952.193.43.93.1.1139579376.squirrel@sirius.mizel.ch> <200602101655.23245.laurent.pinchart@skynet.be> <200602101116.13319.ghostx@optonline.net>
Message-ID: <43F25F4B.2070308@mizel.ch>

Hello all,

I tried with another QC 5000, and guess what, same effect... 
Fortunately, I could exchange my QC 5000 with an "old" 4000, so my 
problem is solved.

So I'm back with the pwc driver.

Best regards,
Nicolas


Salvador Gonzalez wrote:
> On Friday 10 February 2006 10:55, Laurent Pinchart wrote:
>>> Hello again,
>>>
>>>> I'll test tonight my camera with the Logitech software just in case.
>>> Well, same effect with the Logitech software. It happens only outdoor
>>> with a lot of light. I never experienced this odd behaviour with my old
>>> Quickcam Pro 4000.
>> So it's definitely not a driver problem. Bad news, as it could have been
>> fixed more easily.
> 
> Since it looks to only happen on outdoor images (esp. in the sky,) is there 
> any chance this is just the camera lens picking up UV light?  I remember a 
> few years ago about a quickcam hack that involved removing an IR filter on 
> one, that resulted in night vision-like abilities.
> 
> [*snip*]
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/linux-uvc-devel


From brian at interlinx.bc.ca  Wed Feb 15 02:13:22 2006
From: brian at interlinx.bc.ca (Brian J. Murrell)
Date: Tue, 14 Feb 2006 20:13:22 -0500
Subject: [Linux-uvc-devel] no joy with quickcam 5000
In-Reply-To: <200602142308.24683.laurent.pinchart@skynet.be>
References: <1139620440.7267.46.camel@pc.ilinx>
	 <200602142308.24683.laurent.pinchart@skynet.be>
Message-ID: <1139966002.5043.5.camel@pc.ilinx>

On Tue, 2006-02-14 at 23:08 +0100, Laurent Pinchart wrote:
> 
> Try luvcview (Google is your friend).

Got it.

> If it doesn't work,

Hrm.  It does indeed seem to work using jpg.

>  the driver and/or 
> your kernel are at fault, and I'll look into the issue.

  Doesn't using yuv:

uvcview verion 0.1.4
Video driver: x11
A window manager is available
video /dev/video1
 format asked unavailable get width 640 height 360
Unable to dequeue buffer (5).
Error grabbing
 Clean Up done Quit

>  If it does, ask your 
> favorite webcam application's developpers to fix V4L2 and/or MJPEG support.

xawtv segfaults.  ekiga just fails to find a video device (who knows
what it's looking for and can't find).

Any ideas on either of those?  Anyone got either of those working with a
QC 5000?

b.

-- 
My other computer is your Microsoft Windows server.

Brian J. Murrell
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20060214/94046dbd/attachment.pgp>

From mini at nada.kth.se  Wed Feb 15 08:06:46 2006
From: mini at nada.kth.se (Mikael Nilsson)
Date: Wed, 15 Feb 2006 08:06:46 +0100
Subject: [Linux-uvc-devel] V4L1 backwards compatibility
In-Reply-To: <200602142325.34778.laurent.pinchart@skynet.be>
References: <1139084195.11123.14.camel@yossarian>
	 <1139263149.11330.73.camel@yossarian>
	 <20060213124741.GA12287@localhost.localdomain>
	 <200602142325.34778.laurent.pinchart@skynet.be>
Message-ID: <1139987206.7553.14.camel@yossarian>

tis 2006-02-14 klockan 23:25 +0100 skrev Laurent Pinchart:
> > I'm trying to make this driver work with applications like mplayer,
> > xawtv, vic, gnomemeeting but I can't get it working with any of these
> > applications.
> 
> Have you tried Ekiga (Gnomemeeting 2.0) ?
> 
> > I think the patch suggested by Mikael should be applied to support v4l1
> > only applications.
> >
> > I'm attaching a patch that get some of the applications mentioned get
> > more ioctls working but still no luck.
> 
> I'll have a look at it in a few days, or earlier if I can find more than 24h 
> in a single day :-)

I'd be more than willing to test anything you can bring up, as I have
some v4l1-only apps that I cannot patch ... one such is Marratech:
www.marratech.com. There's a free client that you can download and test
with if you want, and I have a technical contact there that listens with
interest to these developments.

Another is Flash (yes, Macromedia Flash). You can test the camera using
e.g. www.flashmeeting.com (you can start a demo session without
registering, but if you need to set up longer tests, contact me). I
haven't managed to get a response from Macromedia on that point,
though :-)

Also, note that my patch did *nothing* to help me, so I'm not at all
sure I did *anything* right... it's based on pure imitation.

It's possible that using USB2 would help, as USB1.1 seems to force the
cam into MJPEG mode, which it seems few or none of the v4l1 apps
support. If I use USB2 I should get YUV from the cam even using the v4l1
compat layer, right? I'm probably getting a new laptop in a few weeks,
so that might help...

/Mikael

> 
> Laurent Pinchart
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 
-- 
Plus ?a change, plus c'est la m?me chose



From mini at nada.kth.se  Wed Feb 15 08:12:20 2006
From: mini at nada.kth.se (Mikael Nilsson)
Date: Wed, 15 Feb 2006 08:12:20 +0100
Subject: [Linux-uvc-devel] no joy with quickcam 5000
In-Reply-To: <1139966002.5043.5.camel@pc.ilinx>
References: <1139620440.7267.46.camel@pc.ilinx>
	 <200602142308.24683.laurent.pinchart@skynet.be>
	 <1139966002.5043.5.camel@pc.ilinx>
Message-ID: <1139987541.7553.19.camel@yossarian>

tis 2006-02-14 klockan 20:13 -0500 skrev Brian J. Murrell:
> On Tue, 2006-02-14 at 23:08 +0100, Laurent Pinchart wrote:
> > 
> > Try luvcview (Google is your friend).
> 
> Got it.
> 
> > If it doesn't work,
> 
> Hrm.  It does indeed seem to work using jpg.
> 
> >  the driver and/or 
> > your kernel are at fault, and I'll look into the issue.
> 
>   Doesn't using yuv:
> 
> uvcview verion 0.1.4
> Video driver: x11
> A window manager is available
> video /dev/video1
>  format asked unavailable get width 640 height 360
> Unable to dequeue buffer (5).
> Error grabbing
>  Clean Up done Quit

Do you use USB 1.1 or 2.0 ? USB 1.1 seems to put the cam in MJPEG mode
only (for me at least).

> 
> >  If it does, ask your 
> > favorite webcam application's developpers to fix V4L2 and/or MJPEG support.
> 
> xawtv segfaults.  ekiga just fails to find a video device (who knows
> what it's looking for and can't find).

You will need the v4l2 plugin, in the Debian package
libpt-cvs-plugins-v4l2. For me it was not installed by default. With
that, the ekiga CVS packages work for me. Note that 1.99 will *not*
work, you need the CVS packages from http://snapshots.gnomemeeting.net/

/Mikael

-- 
Plus ?a change, plus c'est la m?me chose



From lp at lapont.dk  Wed Feb 15 12:50:08 2006
From: lp at lapont.dk (Lars Pontoppidan)
Date: Wed, 15 Feb 2006 12:50:08 +0100
Subject: [Linux-uvc-devel] uvcview or luvcview
In-Reply-To: <200602142312.09892.laurent.pinchart@skynet.be>
References: <43F1D89B.8010601@lapont.dk> <200602142312.09892.laurent.pinchart@skynet.be>
Message-ID: <43F31570.5060303@lapont.dk>

>> I have installed both uvcview and luvcview. They both work with my
>> QuickCam Fusion and the uvcvideo driver.
>> What is the difference between the two programs?
> 
> There's no difference, uvcview has been renamed to luvcview (naming issue, 
> uvcview is a Microsoft software).
> 
QC Fusion on my Suse 10.0, kernel 2.6 13-15.8. KDE 3.5.1
My screen has a built in usb hub, that apparently is not usb2. This hub 
is plugged in a usb2 port in the computer.
luvcview works perfectly with QC Fusion connected to the hub.
luvcvview flickers when QC Fusion is connected to a genuine usb2 port in 
the computer.

When connecting to the genuine usb2 port dmesg says:

usb 4-5: new high speed USB device using ehci_hcd and address 4
uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c1)
ALSA sound/usb/usbaudio.c:1213: 4:3:1: cannot set freq 0 to ep 0x86
ALSA sound/usb/usbaudio.c:1213: 4:3:2: cannot set freq 0 to ep 0x86
ALSA sound/usb/usbaudio.c:1220: 4:3:3: cannot get freq at ep 0x86

When connecting to the hub in the screen dmesg says:

usb 3-2.5: new full speed USB device using ohci_hcd and address 4
usb 3-2.5: not running at top speed; connect to a high speed hub
uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c1)
ALSA sound/usb/usbaudio.c:1213: 4:3:1: cannot set freq 0 to ep 0x86
ALSA sound/usb/usbaudio.c:1213: 4:3:2: cannot set freq 0 to ep 0x86
ALSA sound/usb/usbaudio.c:1213: 4:3:3: cannot set freq 16000 to ep 0x86

> 
> Kopete 0.11 (KDE 3.5.0) should detect the webcam. If it doesn't, have a look 
> at the kernel log to see if there's anything related to the UVC driver.
> 
I'm not a kernel expert and don't know where to find the kernel log.
All I know about installing kernel modules is from playing with uvcvideo 
and QC Fusion.
lars at linux:~> lsmod | grep uvcvideo
uvcvideo               30340  0
v4l2_common             5760  2 uvcvideo,bttv
videodev                9088  2 uvcvideo,bttv
usbcore               112512  7 
usbhid,snd_usb_audio,snd_usb_lib,uvcvideo,ehci_hcd,ohci_hcd

Lars Pontoppidan
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3396 bytes
Desc: S/MIME Cryptographic Signature
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20060215/cbd880e5/attachment.bin>

From brian at interlinx.bc.ca  Wed Feb 15 14:49:52 2006
From: brian at interlinx.bc.ca (Brian J. Murrell)
Date: Wed, 15 Feb 2006 08:49:52 -0500
Subject: [Linux-uvc-devel] no joy with quickcam 5000
In-Reply-To: <1139966002.5043.5.camel@pc.ilinx>
References: <1139620440.7267.46.camel@pc.ilinx>
	 <200602142308.24683.laurent.pinchart@skynet.be>
	 <1139966002.5043.5.camel@pc.ilinx>
Message-ID: <1140011393.12539.1.camel@pc.ilinx>

On Tue, 2006-02-14 at 20:13 -0500, Brian J. Murrell wrote:
> On Tue, 2006-02-14 at 23:08 +0100, Laurent Pinchart wrote:
> > 
> > Try luvcview (Google is your friend).
> 
> Got it.
> 
> > If it doesn't work,
> 
> Hrm.  It does indeed seem to work using jpg.

I think I spoke too soon.  It doesn't seem to be working for jpg now
anymore:

$ /usr/src/luvcview-20060207/luvcview -d /dev/video1 -f jpg
uvcview verion 0.1.4
Video driver: x11
A window manager is available
video /dev/video1
Unable to dequeue buffer (5).
Error grabbing
 Clean Up done Quit

and dmesg says:

uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c5)
usbcore: registered new driver usbvideo
USB Video Class driver (v0.1.0)
uvcvideo: Non-zero status (-84) in isoc completion handler.
uvcvideo: Non-zero status (-84) in isoc completion handler.
uvcvideo: Non-zero status (-84) in isoc completion handler.
uvcvideo: Non-zero status (-84) in isoc completion handler.
uvcvideo: Non-zero status (-84) in isoc completion handler.
uvcvideo: Non-zero status (-84) in isoc completion handler.

b.

-- 
My other computer is your Microsoft Windows server.

Brian J. Murrell
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20060215/dabb6c25/attachment.pgp>

From brian at interlinx.bc.ca  Wed Feb 15 14:56:03 2006
From: brian at interlinx.bc.ca (Brian J. Murrell)
Date: Wed, 15 Feb 2006 08:56:03 -0500
Subject: [Linux-uvc-devel] no joy with quickcam 5000
In-Reply-To: <1139987541.7553.19.camel@yossarian>
References: <1139620440.7267.46.camel@pc.ilinx>
	 <200602142308.24683.laurent.pinchart@skynet.be>
	 <1139966002.5043.5.camel@pc.ilinx>  <1139987541.7553.19.camel@yossarian>
Message-ID: <1140011763.12539.8.camel@pc.ilinx>

On Wed, 2006-02-15 at 08:12 +0100, Mikael Nilsson wrote:
> 
> Do you use USB 1.1 or 2.0 ?

2.0.

> USB 1.1 seems to put the cam in MJPEG mode
> only (for me at least).

Seems a likely scenario.  JPEG images would be of course much smaller
than YUV which would be better over the 1.1 interface speed.

> You will need the v4l2 plugin, in the Debian package
> libpt-cvs-plugins-v4l2.

Hrm.  I can't seem to dig that up in Mandriva's distribution.  Can you
do a package listing of that package for me so I can see what files it
includes?

> With
> that, the ekiga CVS packages work for me.

Cool.

> Note that 1.99 will *not*
> work, you need the CVS packages from http://snapshots.gnomemeeting.net/

Hrm.  I have something called 1.99.1.  Not sure if that's an ekiga
release version of a vendor "mangled" version to represent a pre-2.0
release.

b.

-- 
My other computer is your Microsoft Windows server.

Brian J. Murrell
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20060215/a2f2a854/attachment.pgp>

From laurent.pinchart at skynet.be  Wed Feb 15 15:02:47 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 15 Feb 2006 15:02:47 +0100
Subject: [Linux-uvc-devel] no joy with quickcam 5000
In-Reply-To: <1140011393.12539.1.camel@pc.ilinx>
References: <1139620440.7267.46.camel@pc.ilinx> <1139966002.5043.5.camel@pc.ilinx> <1140011393.12539.1.camel@pc.ilinx>
Message-ID: <200602151502.48080.laurent.pinchart@skynet.be>

> I think I spoke too soon.  It doesn't seem to be working for jpg now
> anymore:
>
> $ /usr/src/luvcview-20060207/luvcview -d /dev/video1 -f jpg
> uvcview verion 0.1.4
> Video driver: x11
> A window manager is available
> video /dev/video1
> Unable to dequeue buffer (5).
> Error grabbing
>  Clean Up done Quit
>
> and dmesg says:
>
> uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c5)
> usbcore: registered new driver usbvideo
> USB Video Class driver (v0.1.0)
> uvcvideo: Non-zero status (-84) in isoc completion handler.
> uvcvideo: Non-zero status (-84) in isoc completion handler.
> uvcvideo: Non-zero status (-84) in isoc completion handler.
> uvcvideo: Non-zero status (-84) in isoc completion handler.
> uvcvideo: Non-zero status (-84) in isoc completion handler.
> uvcvideo: Non-zero status (-84) in isoc completion handler.

That's a low-level USB error. Either the device or the host controller is at 
fault. Are you runing Linux 2.6.15 ? If not, please upgrade.

Laurent Pinchart


From mini at nada.kth.se  Wed Feb 15 18:56:41 2006
From: mini at nada.kth.se (Mikael Nilsson)
Date: Wed, 15 Feb 2006 18:56:41 +0100
Subject: [Linux-uvc-devel] no joy with quickcam 5000
In-Reply-To: <1140011763.12539.8.camel@pc.ilinx>
References: <1139620440.7267.46.camel@pc.ilinx>
	 <200602142308.24683.laurent.pinchart@skynet.be>
	 <1139966002.5043.5.camel@pc.ilinx>  <1139987541.7553.19.camel@yossarian>
	 <1140011763.12539.8.camel@pc.ilinx>
Message-ID: <1140026201.17013.2.camel@yossarian>

ons 2006-02-15 klockan 08:56 -0500 skrev Brian J. Murrell:
> On Wed, 2006-02-15 at 08:12 +0100, Mikael Nilsson wrote:
> > 
> > Do you use USB 1.1 or 2.0 ?
> 
> 2.0.

Well, that's not the issue then.

> Hrm.  I can't seem to dig that up in Mandriva's distribution.  Can you
> do a package listing of that package for me so I can see what files it
> includes?

The only interesting file is

/usr/lib/pwlib-cvs/device/videoinput/v4l2_pwplugin.so

> > Note that 1.99 will *not*
> > work, you need the CVS packages from http://snapshots.gnomemeeting.net/
> 
> Hrm.  I have something called 1.99.1.  Not sure if that's an ekiga
> release version of a vendor "mangled" version to represent a pre-2.0
> release.

I would guess that's *not* recent enough, unfortunately... 

/Mikael

-- 
Plus ?a change, plus c'est la m?me chose



From brian at interlinx.bc.ca  Wed Feb 15 19:26:04 2006
From: brian at interlinx.bc.ca (Brian J. Murrell)
Date: Wed, 15 Feb 2006 13:26:04 -0500
Subject: [Linux-uvc-devel] no joy with quickcam 5000
In-Reply-To: <1140026201.17013.2.camel@yossarian>
References: <1139620440.7267.46.camel@pc.ilinx>
	 <200602142308.24683.laurent.pinchart@skynet.be>
	 <1139966002.5043.5.camel@pc.ilinx>  <1139987541.7553.19.camel@yossarian>
	 <1140011763.12539.8.camel@pc.ilinx>  <1140026201.17013.2.camel@yossarian>
Message-ID: <1140027964.13947.11.camel@pc.ilinx>

On Wed, 2006-02-15 at 18:56 +0100, Mikael Nilsson wrote:
> 
> The only interesting file is
> 
> /usr/lib/pwlib-cvs/device/videoinput/v4l2_pwplugin.so

_Exactly_ what I was looking for because it led me to:

$ rpm -qf /usr/lib/pwlib/devices/videoinput/v4l_pwplugin.so
libpwlib1-plugins-1.9.3-1mdk
$ rpm -ql libpwlib1-plugins-1.9.3-1mdk
/usr/lib/pwlib
/usr/lib/pwlib/devices
/usr/lib/pwlib/devices/sound
/usr/lib/pwlib/devices/sound/alsa_pwplugin.so
/usr/lib/pwlib/devices/sound/oss_pwplugin.so
/usr/lib/pwlib/devices/videoinput
/usr/lib/pwlib/devices/videoinput/v4l_pwplugin.so

So yeah, I need that plugin.  :-(  Will have to hunt that down and get
Mandriva to start including it.

> I would guess that's *not* recent enough, unfortunately... 

It's probably more a case of the pwlib I would think.

Thanx for the info!

b.

-- 
My other computer is your Microsoft Windows server.

Brian J. Murrell
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20060215/9c81ba6d/attachment.pgp>

From mini at nada.kth.se  Thu Feb 16 08:21:36 2006
From: mini at nada.kth.se (Mikael Nilsson)
Date: Thu, 16 Feb 2006 08:21:36 +0100
Subject: [Linux-uvc-devel] no joy with quickcam 5000
In-Reply-To: <1140027964.13947.11.camel@pc.ilinx>
References: <1139620440.7267.46.camel@pc.ilinx>
	 <200602142308.24683.laurent.pinchart@skynet.be>
	 <1139966002.5043.5.camel@pc.ilinx>  <1139987541.7553.19.camel@yossarian>
	 <1140011763.12539.8.camel@pc.ilinx>  <1140026201.17013.2.camel@yossarian>
	 <1140027964.13947.11.camel@pc.ilinx>
Message-ID: <1140074496.7494.2.camel@yossarian>

ons 2006-02-15 klockan 13:26 -0500 skrev Brian J. Murrell:
> On Wed, 2006-02-15 at 18:56 +0100, Mikael Nilsson wrote:
> > 
> > The only interesting file is
> > 
> > /usr/lib/pwlib-cvs/device/videoinput/v4l2_pwplugin.so
> 
> _Exactly_ what I was looking for because it led me to:
> 
> $ rpm -qf /usr/lib/pwlib/devices/videoinput/v4l_pwplugin.so
> libpwlib1-plugins-1.9.3-1mdk
> $ rpm -ql libpwlib1-plugins-1.9.3-1mdk
> /usr/lib/pwlib
> /usr/lib/pwlib/devices
> /usr/lib/pwlib/devices/sound
> /usr/lib/pwlib/devices/sound/alsa_pwplugin.so
> /usr/lib/pwlib/devices/sound/oss_pwplugin.so
> /usr/lib/pwlib/devices/videoinput
> /usr/lib/pwlib/devices/videoinput/v4l_pwplugin.so
> 
> So yeah, I need that plugin.  :-(  Will have to hunt that down and get
> Mandriva to start including it.
> 
> > I would guess that's *not* recent enough, unfortunately... 
> 
> It's probably more a case of the pwlib I would think.

I'm not so sure, as I also have a libpt-plugins-v4l2, which is used for
the old non-ekiga version of gnomemeeting. But although that lib
supports v4l2, it does not seem to work with the QC5000. Support for
these cameras was added in CVS only recently. 

But, hey, try it and see :-)

/Mikael



> 
> Thanx for the info!
> 
> b.
> 
-- 
Plus ?a change, plus c'est la m?me chose



From eduardo.perez at uc3m.es  Thu Feb 16 13:11:02 2006
From: eduardo.perez at uc3m.es (Eduardo =?iso-8859-1?Q?P=E9rez?= Ureta)
Date: Thu, 16 Feb 2006 12:11:02 +0000
Subject: [Linux-uvc-devel] V4L1 backwards compatibility
In-Reply-To: <200602142325.34778.laurent.pinchart@skynet.be>
References: <1139084195.11123.14.camel@yossarian> <1139263149.11330.73.camel@yossarian> <20060213124741.GA12287@localhost.localdomain> <200602142325.34778.laurent.pinchart@skynet.be>
Message-ID: <20060216121102.GA10381@localhost.localdomain>

On 2006-02-14 23:25:34 +0100, Laurent Pinchart wrote:
> > I'm trying to make this driver work with applications like mplayer,
> > xawtv, vic, gnomemeeting but I can't get it working with any of these
> > applications.
> 
> Have you tried Ekiga (Gnomemeeting 2.0) ?

No, I still haven't tried Ekiga (I'm going to test it when I have the
time), but I still need to have the webcam working with all these other
applications.

Do you mean that all these applications use the v4l or v4l2 interface
incorrectly?

Do you have plans to have v4l1 compatibility in the driver?

I still don't know what ioctls should be in a v4l2 driver with v4l1
compatibility using v4l_compat_translate_ioctl()
Do you know where I can find that list?

Do you know of a good webcam USB driver that has good v4l1 compatibility
using v4l_compat_translate_ioctl() ?
I saw http://www.saillard.org/linux/pwc/ but it has both v4l1 and v4l2
APIs.

> > I think the patch suggested by Mikael should be applied to support v4l1
> > only applications.
> >
> > I'm attaching a patch that get some of the applications mentioned get
> > more ioctls working but still no luck.
> 
> I'll have a look at it in a few days, or earlier if I can find more than 24h 
> in a single day :-)


From pbrobinson at gmail.com  Thu Feb 16 14:05:59 2006
From: pbrobinson at gmail.com (Peter Robinson)
Date: Thu, 16 Feb 2006 13:05:59 +0000
Subject: [Linux-uvc-devel] V4L1 backwards compatibility
In-Reply-To: <20060216121102.GA10381@localhost.localdomain>
References: <1139084195.11123.14.camel@yossarian>
	 <1139263149.11330.73.camel@yossarian>
	 <20060213124741.GA12287@localhost.localdomain>
	 <200602142325.34778.laurent.pinchart@skynet.be>
	 <20060216121102.GA10381@localhost.localdomain>
Message-ID: <5256d0b0602160505l5f31c87fj266b84e6fefb99ee@mail.gmail.com>

> No, I still haven't tried Ekiga (I'm going to test it when I have the
> time), but I still need to have the webcam working with all these other
> applications.
>
> Do you mean that all these applications use the v4l or v4l2 interface
> incorrectly?
>
> Do you have plans to have v4l1 compatibility in the driver?
>
> I still don't know what ioctls should be in a v4l2 driver with v4l1
> compatibility using v4l_compat_translate_ioctl()
> Do you know where I can find that list?
>
> Do you know of a good webcam USB driver that has good v4l1 compatibility
> using v4l_compat_translate_ioctl() ?
> I saw http://www.saillard.org/linux/pwc/ but it has both v4l1 and v4l2
> APIs.

I don't see the point in adding V4L1 support as its due to be removed
from the kernel before too long (can't remember the exact proposed
kernel release but it may be 2.6.18).

Peter


From mini at nada.kth.se  Thu Feb 16 14:15:50 2006
From: mini at nada.kth.se (Mikael Nilsson)
Date: Thu, 16 Feb 2006 14:15:50 +0100
Subject: [Linux-uvc-devel] V4L1 backwards compatibility
In-Reply-To: <5256d0b0602160505l5f31c87fj266b84e6fefb99ee@mail.gmail.com>
References: <1139084195.11123.14.camel@yossarian>
	 <1139263149.11330.73.camel@yossarian>
	 <20060213124741.GA12287@localhost.localdomain>
	 <200602142325.34778.laurent.pinchart@skynet.be>
	 <20060216121102.GA10381@localhost.localdomain>
	 <5256d0b0602160505l5f31c87fj266b84e6fefb99ee@mail.gmail.com>
Message-ID: <1140095750.9644.7.camel@yossarian>

tor 2006-02-16 klockan 13:05 +0000 skrev Peter Robinson:
> 
> I don't see the point in adding V4L1 support as its due to be removed
> from the kernel before too long (can't remember the exact proposed
> kernel release but it may be 2.6.18).

I do see that point. However, a number of non-patchable apps use v4l1,
and *on the condition* that it's not a large effort, it *might* be a
good thing. But everyone spends their time as they wish, in any
case :-).

BTW, I am pushing the relevant vendors to get them to support v4l2.
Please, do that you too! It would also help in that process to get a
pointer to a statement that v4l1 is going away soon! Can you try to dig
it up?

/Mikael

-- 
Plus ?a change, plus c'est la m?me chose



From mini at nada.kth.se  Thu Feb 16 14:17:54 2006
From: mini at nada.kth.se (Mikael Nilsson)
Date: Thu, 16 Feb 2006 14:17:54 +0100
Subject: [Linux-uvc-devel] V4L1 backwards compatibility
In-Reply-To: <20060216121102.GA10381@localhost.localdomain>
References: <1139084195.11123.14.camel@yossarian>
	 <1139263149.11330.73.camel@yossarian>
	 <20060213124741.GA12287@localhost.localdomain>
	 <200602142325.34778.laurent.pinchart@skynet.be>
	 <20060216121102.GA10381@localhost.localdomain>
Message-ID: <1140095874.9644.10.camel@yossarian>

tor 2006-02-16 klockan 12:11 +0000 skrev Eduardo P?rez Ureta:
> 
> Do you know of a good webcam USB driver that has good v4l1 compatibility
> using v4l_compat_translate_ioctl() ?

No, but I found a reference to that function in

drivers/media/common/saa7146_video.c
drivers/media/video/cx88/cx88-video.c
drivers/media/video/saa7134/saa7134-video.c

in the linux 2.6.14 source. Might want to check them out at least.

/Mikael
-- 
Plus ?a change, plus c'est la m?me chose



From eduardo.perez at uc3m.es  Thu Feb 16 14:40:30 2006
From: eduardo.perez at uc3m.es (Eduardo =?iso-8859-1?Q?P=E9rez?= Ureta)
Date: Thu, 16 Feb 2006 13:40:30 +0000
Subject: [Linux-uvc-devel] V4L1 backwards compatibility
In-Reply-To: <1140095874.9644.10.camel@yossarian>
References: <1139084195.11123.14.camel@yossarian> <1139263149.11330.73.camel@yossarian> <20060213124741.GA12287@localhost.localdomain> <200602142325.34778.laurent.pinchart@skynet.be> <20060216121102.GA10381@localhost.localdomain> <1140095874.9644.10.camel@yossarian>
Message-ID: <20060216134030.GA10980@localhost.localdomain>

On 2006-02-16 14:17:54 +0100, Mikael Nilsson wrote:
> tor 2006-02-16 klockan 12:11 +0000 skrev Eduardo P?rez Ureta:
> > 
> > Do you know of a good webcam USB driver that has good v4l1 compatibility
> > using v4l_compat_translate_ioctl() ?
> 
> No, but I found a reference to that function in
> 
> drivers/media/common/saa7146_video.c
> drivers/media/video/cx88/cx88-video.c
> drivers/media/video/saa7134/saa7134-video.c
> 
> in the linux 2.6.14 source. Might want to check them out at least.

I already checked them. If these drivers are correct (I suppose so) then
my patch is correct and should be applied (there are more things to fix
but my patch is a good start to get v4l1 compatibility)


From eduardo.perez at uc3m.es  Thu Feb 16 14:50:31 2006
From: eduardo.perez at uc3m.es (Eduardo =?iso-8859-1?Q?P=E9rez?= Ureta)
Date: Thu, 16 Feb 2006 13:50:31 +0000
Subject: [Linux-uvc-devel] V4L1 backwards compatibility
In-Reply-To: <5256d0b0602160505l5f31c87fj266b84e6fefb99ee@mail.gmail.com>
References: <1139084195.11123.14.camel@yossarian> <1139263149.11330.73.camel@yossarian> <20060213124741.GA12287@localhost.localdomain> <200602142325.34778.laurent.pinchart@skynet.be> <20060216121102.GA10381@localhost.localdomain> <5256d0b0602160505l5f31c87fj266b84e6fefb99ee@mail.gmail.com>
Message-ID: <20060216135031.GA11090@localhost.localdomain>

On 2006-02-16 13:05:59 +0000, Peter Robinson wrote:
> > No, I still haven't tried Ekiga (I'm going to test it when I have the
> > time), but I still need to have the webcam working with all these other
> > applications.
> >
> > Do you mean that all these applications use the v4l or v4l2 interface
> > incorrectly?
> >
> > Do you have plans to have v4l1 compatibility in the driver?
> >
> > I still don't know what ioctls should be in a v4l2 driver with v4l1
> > compatibility using v4l_compat_translate_ioctl()
> > Do you know where I can find that list?
> >
> > Do you know of a good webcam USB driver that has good v4l1 compatibility
> > using v4l_compat_translate_ioctl() ?
> > I saw http://www.saillard.org/linux/pwc/ but it has both v4l1 and v4l2
> > APIs.
> 
> I don't see the point in adding V4L1 support as its due to be removed
> from the kernel before too long (can't remember the exact proposed
> kernel release but it may be 2.6.18).

The point is having applications that only have v4l1 support be able to
work with this webcam. So until these apps have not upgraded to a v4l2
interface the v4l1 compatibility should be added.

At linux-source-2.6.15/Documentation/feature-removal-schedule.txt
> What:   Video4Linux API 1 ioctls and video_decoder.h from Video devices.
> When:   July 2006
> Why:    V4L1 AP1 was replaced by V4L2 API. during migration from 2.4 to 2.6
>         series. The old API have lots of drawbacks and don't provide enough
>         means to work with all video and audio standards. The newer API is
>         already available on the main drivers and should be used instead.
>         Newer drivers should use v4l_compat_translate_ioctl function to handle
>         old calls, replacing to newer ones.
>         Decoder iocts are using internally to allow video drivers to
>         communicate with video decoders. This should also be improved to allow
>         V4L2 calls being translated into compatible internal ioctls.
> Who:    Mauro Carvalho Chehab <mchehab at brturbo.com.br>

You can see that v4l_compat_translate_ioctl should be used to provide
v4l1 compatibility.

Please, forward me the email or page where V4L1 support is said to be
removed.


From brian at interlinx.bc.ca  Thu Feb 16 15:42:33 2006
From: brian at interlinx.bc.ca (Brian J. Murrell)
Date: Thu, 16 Feb 2006 09:42:33 -0500
Subject: [Linux-uvc-devel] no joy with quickcam 5000
In-Reply-To: <1140074496.7494.2.camel@yossarian>
References: <1139620440.7267.46.camel@pc.ilinx>
	 <200602142308.24683.laurent.pinchart@skynet.be>
	 <1139966002.5043.5.camel@pc.ilinx>  <1139987541.7553.19.camel@yossarian>
	 <1140011763.12539.8.camel@pc.ilinx>  <1140026201.17013.2.camel@yossarian>
	 <1140027964.13947.11.camel@pc.ilinx>  <1140074496.7494.2.camel@yossarian>
Message-ID: <1140100953.13947.44.camel@pc.ilinx>

On Thu, 2006-02-16 at 08:21 +0100, Mikael Nilsson wrote:
> 
> I'm not so sure, as I also have a libpt-plugins-v4l2, which is used for
> the old non-ekiga version of gnomemeeting. But although that lib
> supports v4l2, it does not seem to work with the QC5000. Support for
> these cameras was added in CVS only recently. 

I found a package in my distro with the 4L2 plugin (as well as some
ieee1394 plugins) and my QC 5000 is working great with ekiga now!  Way
better picture than the old QC USBs.

Thanx for all of your input, it was very helpful.

b.

-- 
My other computer is your Microsoft Windows server.

Brian J. Murrell
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20060216/7b5c8c1a/attachment.pgp>

From pbrobinson at gmail.com  Thu Feb 16 15:45:44 2006
From: pbrobinson at gmail.com (Peter Robinson)
Date: Thu, 16 Feb 2006 14:45:44 +0000
Subject: [Linux-uvc-devel] V4L1 backwards compatibility
In-Reply-To: <20060216135031.GA11090@localhost.localdomain>
References: <1139084195.11123.14.camel@yossarian>
	 <1139263149.11330.73.camel@yossarian>
	 <20060213124741.GA12287@localhost.localdomain>
	 <200602142325.34778.laurent.pinchart@skynet.be>
	 <20060216121102.GA10381@localhost.localdomain>
	 <5256d0b0602160505l5f31c87fj266b84e6fefb99ee@mail.gmail.com>
	 <20060216135031.GA11090@localhost.localdomain>
Message-ID: <5256d0b0602160645y650087a2i611b8ada04177856@mail.gmail.com>

> > I don't see the point in adding V4L1 support as its due to be removed
> > from the kernel before too long (can't remember the exact proposed
> > kernel release but it may be 2.6.18).
>
> The point is having applications that only have v4l1 support be able to
> work with this webcam. So until these apps have not upgraded to a v4l2
> interface the v4l1 compatibility should be added.

Yes, but on the flip side of the coin if v1 is going to be ripped out
of the mainstream kernel in next couple of months none of the webcams
will work with v4l1 only applications and hence they are going to have
to upgrade anyway and v4l2 has been around since 2.5.x so its not like
they haven't had time to port their apps.

Peter


From mini at nada.kth.se  Thu Feb 16 15:57:37 2006
From: mini at nada.kth.se (Mikael Nilsson)
Date: Thu, 16 Feb 2006 15:57:37 +0100
Subject: [Linux-uvc-devel] V4L1 backwards compatibility
In-Reply-To: <5256d0b0602160645y650087a2i611b8ada04177856@mail.gmail.com>
References: <1139084195.11123.14.camel@yossarian>
	 <1139263149.11330.73.camel@yossarian>
	 <20060213124741.GA12287@localhost.localdomain>
	 <200602142325.34778.laurent.pinchart@skynet.be>
	 <20060216121102.GA10381@localhost.localdomain>
	 <5256d0b0602160505l5f31c87fj266b84e6fefb99ee@mail.gmail.com>
	 <20060216135031.GA11090@localhost.localdomain>
	 <5256d0b0602160645y650087a2i611b8ada04177856@mail.gmail.com>
Message-ID: <1140101857.9644.35.camel@yossarian>

tor 2006-02-16 klockan 14:45 +0000 skrev Peter Robinson:
> > > I don't see the point in adding V4L1 support as its due to be removed
> > > from the kernel before too long (can't remember the exact proposed
> > > kernel release but it may be 2.6.18).
> >
> > The point is having applications that only have v4l1 support be able to
> > work with this webcam. So until these apps have not upgraded to a v4l2
> > interface the v4l1 compatibility should be added.
> 
> Yes, but on the flip side of the coin if v1 is going to be ripped out
> of the mainstream kernel in next couple of months 

The compatibility layer will not be ripped out in this round, however.
And that's all we're discussing here...

> none of the webcams
> will work with v4l1 only applications and hence they are going to have
> to upgrade anyway and v4l2 has been around since 2.5.x so its not like
> they haven't had time to port their apps.

I do agree, and I think everyone else does too, that V4L2 support in the
apps is a Good Thing. However, it might be that we can get some of those
to work *now* instead of in two years. I'm talking commercial videoconf
apps, Macromedia Flash, etc, which we can't patch and which wont update
very quickly.

As much as I dislike using proprietary apps, in this field the choices
are sometimes pretty limited.

/Mikael

-- 
Plus ?a change, plus c'est la m?me chose



From nick at customdesigns.ca  Fri Feb 17 19:39:22 2006
From: nick at customdesigns.ca (Nick Wiltshire)
Date: Fri, 17 Feb 2006 11:39:22 -0700
Subject: [Linux-uvc-devel] QC Fusion: 3 questions
Message-ID: <200602171139.22823.nick@customdesigns.ca>

Hi all,

3 quick questions:

has anyone looked at getting Kopete to scale the images rather than clipping 
them?

images are in black & white...what did I do? :P

lastly, and this may be outside the scope of this driver, but does anyone have 
the mic working?

Thanks,
Nick


From ace at staticwave.ca  Sat Feb 18 03:11:42 2006
From: ace at staticwave.ca (Gabriel A. Devenyi)
Date: Fri, 17 Feb 2006 21:11:42 -0500
Subject: [Linux-uvc-devel] [ANNOUNCE] uvccapture-0.2
Message-ID: <200602172111.42701.ace@staticwave.ca>

I'm please to announce the release of a new piece of software for the UVC V4L2 
interface.

http://staticwave.ca/source/uvccapture/uvccapture-0.2.tar.bz2

uvccapture is based of luvcview written by Laurent Pinchart & Michel Xhaard.

Essentially what I've done is stripped away all the SDL GUI elements, and 
implemented a timer interface to save JPEG files at a user-specified 
interval.

This is very much a hack, as still image support isn't available from the 
driver, this continuously captures images and writes to a file according to a 
user-specified interval. This eats up lots of CPU, especially if you up the 
default image size. The reason for continuous polling is that it seems as 
soon as the driver is initalized it begins buffering images, and so I have to 
discard the shots otherwise the "write an image every x seconds" becomes 
"write the next frame every x seconds". The command-line parameter code is 
very primitive, so make sure you pass valid inputs. As noted by the driver 
sourcecode, don't expect to kill this program and run it again, as re-opening 
of the videodevice seems to be buggy.

Bugfixes, enhancements and feature patches are welcome, please test patches, 
as I don't actually have a cam that uses this driver, its been tested 
entirely by a third party for me. (Thanks Ian)

For more info see README in the tarball.

 -- 
Gabriel A. Devenyi 
ace at staticwave.ca


From nivw2002 at fastmail.fm  Sun Feb 19 19:04:42 2006
From: nivw2002 at fastmail.fm (niv)
Date: Sun, 19 Feb 2006 20:04:42 +0200
Subject: [Linux-uvc-devel] what quality does the QC pro 5000 gives?
Message-ID: <43F8B33A.2050005@fastmail.fm>

Hay,
I am considering to purchace the logitech QC pro 5000.
I own the kodak DVC-325 and hope to get better quality, and fster frame 
rate.
I know this project is still young , but, what say you?
Niv


From mxhaard at magic.fr  Sun Feb 19 19:41:31 2006
From: mxhaard at magic.fr (michel Xhaard)
Date: Sun, 19 Feb 2006 19:41:31 +0100
Subject: [Linux-uvc-devel] what quality does the QC pro 5000 gives?
In-Reply-To: <43F8B33A.2050005@fastmail.fm>
References: <43F8B33A.2050005@fastmail.fm>
Message-ID: <200602191941.31759.mxhaard@magic.fr>

Le Dimanche 19 F?vrier 2006 19:04, niv a ?crit?:
> Hay,
> I am considering to purchace the logitech QC pro 5000.
> I own the kodak DVC-325 and hope to get better quality, and fster frame
> rate.
> I know this project is still young , but, what say you?
> Niv
Niv,
The DVC-325 spca501a chipset is now obsolete. Be sure to get better 
performance with the Logitec QC pro 5000 but you need USB 2.0 set on your 
Linux Box.
Best regards
-- 
Michel Xhaard
http://mxhaard.free.fr


From nivw2002 at fastmail.fm  Sun Feb 19 22:22:58 2006
From: nivw2002 at fastmail.fm (Niv)
Date: Sun, 19 Feb 2006 23:22:58 +0200
Subject: [Linux-uvc-devel] what quality does the QC pro 5000 gives?
In-Reply-To: <200602191941.31759.mxhaard@magic.fr>
References: <43F8B33A.2050005@fastmail.fm> <200602191941.31759.mxhaard@magic.fr>
Message-ID: <43F8E1B2.4060507@fastmail.fm>

Thanks,
Assuming I have a choice of the pro 5000 and the fusion , what would you 
say - gives better results in usb 2.0?



michel Xhaard wrote:

>Le Dimanche 19 F?vrier 2006 19:04, niv a ?crit :
>  
>
>>Hay,
>>I am considering to purchace the logitech QC pro 5000.
>>I own the kodak DVC-325 and hope to get better quality, and fster frame
>>rate.
>>I know this project is still young , but, what say you?
>>Niv
>>    
>>
>Niv,
>The DVC-325 spca501a chipset is now obsolete. Be sure to get better 
>performance with the Logitec QC pro 5000 but you need USB 2.0 set on your 
>Linux Box.
>Best regards
>  
>



From ace at staticwave.ca  Mon Feb 20 01:09:09 2006
From: ace at staticwave.ca (Gabriel A. Devenyi)
Date: Sun, 19 Feb 2006 19:09:09 -0500
Subject: [Linux-uvc-devel] [ANNOUNCE] uvccapture-0.3
Message-ID: <200602191909.10010.ace@staticwave.ca>

Announcing a new version of uvccapture, webcam image capture for the Linux USB 
UVC V4L2 stack.

Changes:
Removed JPEG decoding of every frame, since that was for SDL to display 
images, and its no longer used. This has reduced worst case CPU usage to ~1% 
a vast improvement from 30%.
Thanks to Philip Heron <phil at firestorm.cx> for pointing out the JPEG decode 
and Iain Cuthbertson <iain at lazygnome.net> for hardware testing.

Release available at 
http://staticwave.ca/source/uvccapture/uvccapture-0.3.tar.bz2

-- 
Gabriel A. Devenyi
ace at staticwave.ca


From luca.barbieri at gmail.com  Tue Feb 21 23:50:12 2006
From: luca.barbieri at gmail.com (Luca Barbieri)
Date: Tue, 21 Feb 2006 23:50:12 +0100
Subject: [Linux-uvc-devel] [PATCH] Report buffer status in querybuf
Message-ID: <1140562213.2745.9.camel@lb-notebook.dyndns.org>

This patch makes the driver fill the buf->flags field in querybuf.
This is the correct behavior and needed for MPlayer.

--
Luca Barbieri


-------------- next part --------------
A non-text attachment was scrubbed...
Name: querybuf.patch
Type: text/x-patch
Size: 819 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20060221/f5a280b8/attachment.bin>

From luca.barbieri at gmail.com  Tue Feb 21 23:51:52 2006
From: luca.barbieri at gmail.com (Luca Barbieri)
Date: Tue, 21 Feb 2006 23:51:52 +0100
Subject: [Linux-uvc-devel] [PATCH] Add V4L1 support
Message-ID: <1140562312.2745.12.camel@lb-notebook.dyndns.org>

This patch adds support for V4L1 ioctls by using the compatibility code
in the Linux kernel.
This allows V4L1 programs to work at least with uncompressed data.

--
Luca Barbieri

-------------- next part --------------
A non-text attachment was scrubbed...
Name: v4l1.patch
Type: text/x-patch
Size: 387 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20060221/cad45201/attachment.bin>

From luca.barbieri at gmail.com  Tue Feb 21 23:53:53 2006
From: luca.barbieri at gmail.com (Luca Barbieri)
Date: Tue, 21 Feb 2006 23:53:53 +0100
Subject: [Linux-uvc-devel] [PATCH] Remove check breaking MPlayer and TVTime
Message-ID: <1140562433.2745.15.camel@lb-notebook.dyndns.org>

This patch removes a check that breaks MPlayer and TVTime.
While the problem probably lies in the application, doing the check
brings no advantages, so I think it's better to disable it.

--
Luca Barbieri

-------------- next part --------------
A non-text attachment was scrubbed...
Name: noformatcheck.patch
Type: text/x-patch
Size: 500 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20060221/0681437e/attachment.bin>

From luca.barbieri at gmail.com  Tue Feb 21 23:55:37 2006
From: luca.barbieri at gmail.com (Luca Barbieri)
Date: Tue, 21 Feb 2006 23:55:37 +0100
Subject: [Linux-uvc-devel] [PATCH] Fake a TV tuner for MPlayer and TV apps
Message-ID: <1140562538.2745.18.camel@lb-notebook.dyndns.org>

This patch makes uvcvideo claim it supports the NTSC standard and makes
it accept configuration to any TV standards.

Some programs like MPlayer will fail without this.

--
Luca Barbieri

-------------- next part --------------
A non-text attachment was scrubbed...
Name: tuner.patch
Type: text/x-patch
Size: 861 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20060221/c3f22ef0/attachment.bin>

From luca.barbieri at gmail.com  Tue Feb 21 23:57:25 2006
From: luca.barbieri at gmail.com (Luca Barbieri)
Date: Tue, 21 Feb 2006 23:57:25 +0100
Subject: [Linux-uvc-devel] [PATCH] Support for kernel 2.6.16
Message-ID: <1140562645.2745.21.camel@lb-notebook.dyndns.org>

This makes the driver compile for preliminary releases of Linux 2.6.16.
You may want the make the .owner declaration conditional on the kernel
version.

--
Luca Barbieri

-------------- next part --------------
A non-text attachment was scrubbed...
Name: post-2.6.15.patch
Type: text/x-patch
Size: 637 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20060221/3cf4e6fc/attachment.bin>

From eduardo.perez at uc3m.es  Wed Feb 22 08:42:50 2006
From: eduardo.perez at uc3m.es (Eduardo =?iso-8859-1?Q?P=E9rez?= Ureta)
Date: Wed, 22 Feb 2006 07:42:50 +0000
Subject: [Linux-uvc-devel] [PATCH] Fake a TV tuner for MPlayer and TV apps
In-Reply-To: <1140562538.2745.18.camel@lb-notebook.dyndns.org>
References: <1140562538.2745.18.camel@lb-notebook.dyndns.org>
Message-ID: <20060222074250.GA11515@localhost.localdomain>

I submitted a patch a while ago that has some of the changes you submitted.
Maybe we need svn access to prevent this from happen again.
Anyway, I think hardcoding NTSC support may not be the best idea. I
copied my changes from:
http://www.saillard.org/linux/pwc/
And they are not hardcoding NTSC.
We need a standard API among drivers and applications to make v4l
a good standard otherwise only some applications will work correctly.

On 2006-02-21 23:55:37 +0100, Luca Barbieri wrote:
> This patch makes uvcvideo claim it supports the NTSC standard and makes
> it accept configuration to any TV standards.
> 
> Some programs like MPlayer will fail without this.
> 

> Index: uvcvideo.c
> ===================================================================
> --- uvcvideo.c	(revision 19)
> +++ uvcvideo.c	(working copy)
> @@ -2148,12 +2167,37 @@
>  		return uvc_video_enable(video, 0);
>  	}
>  
> +	case VIDIOC_G_STD:
> +	{
> +		v4l2_std_id *std = arg;
> +		*std = V4L2_STD_NTSC;
> +		return 0;
> +	}
> +
> +	case VIDIOC_S_STD:
> +		return 0;
> +		
>  	/* Analog video standards make no sense for digital cameras. */
>  	case VIDIOC_ENUMSTD:
> +	{
> +		struct v4l2_standard *std = arg;
> +		if(std->index != 0)
> +			return -EINVAL;
> +
> +		v4l2_video_std_construct(std, V4L2_STD_NTSC, "NTSC");
> +		return 0;
> +	}
> +		
>  	case VIDIOC_QUERYSTD:
> -	case VIDIOC_G_STD:
> -	case VIDIOC_S_STD:
> +	{
> +		//v4l2_std_id *std = arg;
> +		return 0;
> +		//if(*std == V4L2_STD_ALL || *std == V4L2_STD_NTSC)
> +		//	return 0;
>  
> +		//return -EINVAL;
> +	}
> +
>  	case VIDIOC_OVERLAY:
>  
>  	case VIDIOC_ENUMAUDIO:


From lp at lapont.dk  Wed Feb 22 21:53:26 2006
From: lp at lapont.dk (Lars Pontoppidan)
Date: Wed, 22 Feb 2006 21:53:26 +0100
Subject: [Linux-uvc-devel] [PATCH] Add V4L1 support
In-Reply-To: <1140562312.2745.12.camel@lb-notebook.dyndns.org>
References: <1140562312.2745.12.camel@lb-notebook.dyndns.org>
Message-ID: <43FCCF46.7060309@lapont.dk>

 > Luca Barbieri wrote:
> This patch adds support for V4L1 ioctls by using the compatibility code
> in the Linux kernel.
> This allows V4L1 programs to work at least with uncompressed data.
> 
> --
> Luca Barbieri
> 
Does this also compile and work on Suse 10.0 with kernel 2.6.13-15.8.

Lars Pontoppidan


From reiffert at Student.Physik.Uni-Mainz.DE  Thu Feb 23 09:04:11 2006
From: reiffert at Student.Physik.Uni-Mainz.DE (Thomas Reifferscheid)
Date: Thu, 23 Feb 2006 09:04:11 +0100 (CET)
Subject: [Linux-uvc-devel] Quickcam fusion
Message-ID: <Pine.LNX.4.63.0602230900360.4146@student.physik.uni-mainz.de>

Hi there,

I got a QC fusion working with kopete with the patch attached
to this mail, against the berlios svn.

Unfortunatly I can't bring up mplayer, mythtv, anything else
to get a video out of the cam. How can I help?

Kind regards,
Thomas Reifferscheid
-------------- next part --------------
diff -Naur -x entries trunk/uvcvideo.c current/uvcvideo.c
--- trunk/uvcvideo.c	2006-02-23 08:58:54.000000000 +0100
+++ current/uvcvideo.c	2006-02-23 08:48:50.000000000 +0100
@@ -320,6 +320,7 @@
 
 enum uvc_device_state {
 	UVC_DEV_DISCONNECTED = 1,
+	UVC_DEV_IOERROR = 2,
 };
 
 struct uvc_device {
@@ -889,8 +890,8 @@
 	uvc_trace(UVC_TRACE_CAPTURE, "Dequeuing buffer %u.\n",
 		v4l2_buf->index);
 
-	if (v4l2_buf->type != V4L2_BUF_TYPE_VIDEO_CAPTURE ||
-	    v4l2_buf->memory != V4L2_MEMORY_MMAP) {
+	if (v4l2_buf->type != V4L2_BUF_TYPE_VIDEO_CAPTURE
+/*	    v4l2_buf->memory != V4L2_MEMORY_MMAP */ ) {
 		uvc_trace(UVC_TRACE_CAPTURE, "[E] Invalid buffer type (%u) "
 			"and/or memory (%u).\n", v4l2_buf->type,
 			v4l2_buf->memory);
@@ -1342,6 +1343,31 @@
 	return 0;
 }
 
+
+static int uvc_usb_reset(struct uvc_device *dev)
+{
+	int l, ret;
+
+	l = usb_lock_device_for_reset(dev->udev, dev->intf);
+
+	if (l >= 0) {
+		ret = usb_reset_device(dev->udev);
+		if (l)
+			usb_unlock_device(dev->udev);
+	}
+	else
+		ret = -EBUSY;
+
+	if (ret)
+		uvc_printk(KERN_DEBUG, "uvc_usb_reset: Unable to reset usb device"
+			   "(%d).\n", ret);
+	else
+		dev->state &= ~UVC_DEV_IOERROR;
+
+	return ret;
+}
+
+
 /* ------------------------------------------------------------------------
  * UVC Controls
  */
@@ -1363,6 +1389,7 @@
 	if (ret != size) {
 		uvc_printk(KERN_ERR, "Failed to query (%u) UVC control %u "
 			"(unit %u) : %d.\n", query, cs, unit, ret);
+		dev->state |= UVC_DEV_IOERROR;
 		return -EIO;
 	}
 
@@ -1577,6 +1604,26 @@
  * Video device
  */
 
+/* 
+ * Reset and Re-Initialize video device
+ */
+static int uvc_video_reinit(struct uvc_video_device *video)
+{
+	int ret;
+
+	if ((ret = uvc_usb_reset(video->dev)) < 0)
+		return ret;
+
+	if ((ret = uvc_set_video_ctrl(video, &video->streaming->ctrl, 0)) < 0) {
+		uvc_printk(KERN_DEBUG, "uvc_video_reinit: Unable to commit format "
+			   "(%d).\n", ret);
+		return ret;
+	}
+
+	return 0;
+}
+
+
 /*
  * Initialize the UVC video device.
  *
@@ -1970,6 +2017,9 @@
 	if (uvc_free_buffers(&video->queue) < 0)
 		uvc_printk(KERN_ERR, "uvc_v4l2_release: Unable to free buffers.\n");
 	up(&video->queue.lock);
+	/* leave usb device in a clean state */
+	if (video->dev->state & UVC_DEV_IOERROR)
+		uvc_video_reinit(video);
 
 	atomic_inc(&video->count);
 	kref_put(&video->dev->kref, uvc_delete);
@@ -2148,11 +2198,38 @@
 		return uvc_video_enable(video, 0);
 	}
 
+	case VIDIOC_G_STD:
+	{
+		v4l2_std_id *std = arg;
+		*std = V4L2_STD_NTSC;
+		return 0;
+	}
+
+	case VIDIOC_S_STD:
+		return 0;
+		
+
 	/* Analog video standards make no sense for digital cameras. */
 	case VIDIOC_ENUMSTD:
+	{
+		struct v4l2_standard *std = arg;
+		if(std->index != 0)
+			return -EINVAL;
+
+		v4l2_video_std_construct(std, V4L2_STD_NTSC, "NTSC");
+		return 0;
+	}
+			
 	case VIDIOC_QUERYSTD:
-	case VIDIOC_G_STD:
-	case VIDIOC_S_STD:
+	{
+		//v4l2_std_id *std = arg;
+		return 0;
+		//if(*std == V4L2_STD_ALL || *std == V4L2_STD_NTSC)
+		//	return 0;
+
+		//return -EINVAL;
+	}
+	
 
 	case VIDIOC_OVERLAY:
 
@@ -3117,9 +3194,18 @@
 	 * parameters.
 	 */
 	if ((ret = uvc_video_init(&dev->video)) < 0) {
-		uvc_printk(KERN_ERR, "Failed to initialize the device "
-			"(%d).\n", ret);
-		return ret;
+
+		uvc_printk(KERN_ERR, "Failed to initialize the device, "
+			   "(%d). trying to reset ...\n", ret);
+
+		if ((ret = uvc_usb_reset(dev)))
+			return ret;
+
+		if ((ret = uvc_video_init(&dev->video)) < 0) {
+			uvc_printk(KERN_ERR, "Failed to initialize the device "
+				   "(%d).\n", ret);
+			return ret;
+		}
 	}
 
 	/* Register the device with V4L. */

From reiffert at student.physik.uni-mainz.de  Thu Feb 23 09:30:22 2006
From: reiffert at student.physik.uni-mainz.de (Thomas Reifferscheid)
Date: Thu, 23 Feb 2006 09:30:22 +0100
Subject: [Linux-uvc-devel] Quickcam fusion
In-Reply-To: <Pine.LNX.4.63.0602230900360.4146@student.physik.uni-mainz.de>
References: <Pine.LNX.4.63.0602230900360.4146@student.physik.uni-mainz.de>
Message-ID: <20060223083022.GA4875@student.physik.uni-mainz.de>

Sorry for the mime encoded patch.

Here is it again.

-------------- next part --------------
diff -Naur -x entries trunk/uvcvideo.c current/uvcvideo.c
--- trunk/uvcvideo.c	2006-02-23 08:58:54.000000000 +0100
+++ current/uvcvideo.c	2006-02-23 08:48:50.000000000 +0100
@@ -320,6 +320,7 @@
 
 enum uvc_device_state {
 	UVC_DEV_DISCONNECTED = 1,
+	UVC_DEV_IOERROR = 2,
 };
 
 struct uvc_device {
@@ -889,8 +890,8 @@
 	uvc_trace(UVC_TRACE_CAPTURE, "Dequeuing buffer %u.\n",
 		v4l2_buf->index);
 
-	if (v4l2_buf->type != V4L2_BUF_TYPE_VIDEO_CAPTURE ||
-	    v4l2_buf->memory != V4L2_MEMORY_MMAP) {
+	if (v4l2_buf->type != V4L2_BUF_TYPE_VIDEO_CAPTURE
+/*	    v4l2_buf->memory != V4L2_MEMORY_MMAP */ ) {
 		uvc_trace(UVC_TRACE_CAPTURE, "[E] Invalid buffer type (%u) "
 			"and/or memory (%u).\n", v4l2_buf->type,
 			v4l2_buf->memory);
@@ -1342,6 +1343,31 @@
 	return 0;
 }
 
+
+static int uvc_usb_reset(struct uvc_device *dev)
+{
+	int l, ret;
+
+	l = usb_lock_device_for_reset(dev->udev, dev->intf);
+
+	if (l >= 0) {
+		ret = usb_reset_device(dev->udev);
+		if (l)
+			usb_unlock_device(dev->udev);
+	}
+	else
+		ret = -EBUSY;
+
+	if (ret)
+		uvc_printk(KERN_DEBUG, "uvc_usb_reset: Unable to reset usb device"
+			   "(%d).\n", ret);
+	else
+		dev->state &= ~UVC_DEV_IOERROR;
+
+	return ret;
+}
+
+
 /* ------------------------------------------------------------------------
  * UVC Controls
  */
@@ -1363,6 +1389,7 @@
 	if (ret != size) {
 		uvc_printk(KERN_ERR, "Failed to query (%u) UVC control %u "
 			"(unit %u) : %d.\n", query, cs, unit, ret);
+		dev->state |= UVC_DEV_IOERROR;
 		return -EIO;
 	}
 
@@ -1577,6 +1604,26 @@
  * Video device
  */
 
+/* 
+ * Reset and Re-Initialize video device
+ */
+static int uvc_video_reinit(struct uvc_video_device *video)
+{
+	int ret;
+
+	if ((ret = uvc_usb_reset(video->dev)) < 0)
+		return ret;
+
+	if ((ret = uvc_set_video_ctrl(video, &video->streaming->ctrl, 0)) < 0) {
+		uvc_printk(KERN_DEBUG, "uvc_video_reinit: Unable to commit format "
+			   "(%d).\n", ret);
+		return ret;
+	}
+
+	return 0;
+}
+
+
 /*
  * Initialize the UVC video device.
  *
@@ -1970,6 +2017,9 @@
 	if (uvc_free_buffers(&video->queue) < 0)
 		uvc_printk(KERN_ERR, "uvc_v4l2_release: Unable to free buffers.\n");
 	up(&video->queue.lock);
+	/* leave usb device in a clean state */
+	if (video->dev->state & UVC_DEV_IOERROR)
+		uvc_video_reinit(video);
 
 	atomic_inc(&video->count);
 	kref_put(&video->dev->kref, uvc_delete);
@@ -2148,11 +2198,38 @@
 		return uvc_video_enable(video, 0);
 	}
 
+	case VIDIOC_G_STD:
+	{
+		v4l2_std_id *std = arg;
+		*std = V4L2_STD_NTSC;
+		return 0;
+	}
+
+	case VIDIOC_S_STD:
+		return 0;
+		
+
 	/* Analog video standards make no sense for digital cameras. */
 	case VIDIOC_ENUMSTD:
+	{
+		struct v4l2_standard *std = arg;
+		if(std->index != 0)
+			return -EINVAL;
+
+		v4l2_video_std_construct(std, V4L2_STD_NTSC, "NTSC");
+		return 0;
+	}
+			
 	case VIDIOC_QUERYSTD:
-	case VIDIOC_G_STD:
-	case VIDIOC_S_STD:
+	{
+		//v4l2_std_id *std = arg;
+		return 0;
+		//if(*std == V4L2_STD_ALL || *std == V4L2_STD_NTSC)
+		//	return 0;
+
+		//return -EINVAL;
+	}
+	
 
 	case VIDIOC_OVERLAY:
 
@@ -3117,9 +3194,18 @@
 	 * parameters.
 	 */
 	if ((ret = uvc_video_init(&dev->video)) < 0) {
-		uvc_printk(KERN_ERR, "Failed to initialize the device "
-			"(%d).\n", ret);
-		return ret;
+
+		uvc_printk(KERN_ERR, "Failed to initialize the device, "
+			   "(%d). trying to reset ...\n", ret);
+
+		if ((ret = uvc_usb_reset(dev)))
+			return ret;
+
+		if ((ret = uvc_video_init(&dev->video)) < 0) {
+			uvc_printk(KERN_ERR, "Failed to initialize the device "
+				   "(%d).\n", ret);
+			return ret;
+		}
 	}
 
 	/* Register the device with V4L. */

From luc at saillard.org  Thu Feb 23 10:21:54 2006
From: luc at saillard.org (Luc Saillard)
Date: Thu, 23 Feb 2006 10:21:54 +0100
Subject: [Linux-uvc-devel] Quickcam fusion
In-Reply-To: <20060223083022.GA4875@student.physik.uni-mainz.de>
References: <Pine.LNX.4.63.0602230900360.4146@student.physik.uni-mainz.de> <20060223083022.GA4875@student.physik.uni-mainz.de>
Message-ID: <20060223092154.GN2642@sd291.sivit.org>

On Thu, Feb 23, 2006 at 09:30:22AM +0100, Thomas Reifferscheid wrote:
> Sorry for the mime encoded patch.
> 
> Here is it again.
> 

> diff -Naur -x entries trunk/uvcvideo.c current/uvcvideo.c
> --- trunk/uvcvideo.c	2006-02-23 08:58:54.000000000 +0100
> +++ current/uvcvideo.c	2006-02-23 08:48:50.000000000 +0100
> @@ -320,6 +320,7 @@
>  
>  enum uvc_device_state {
>  	UVC_DEV_DISCONNECTED = 1,
> +	UVC_DEV_IOERROR = 2,
>  };
>  
>  struct uvc_device {
> @@ -889,8 +890,8 @@
>  	uvc_trace(UVC_TRACE_CAPTURE, "Dequeuing buffer %u.\n",
>  		v4l2_buf->index);
>  
> -	if (v4l2_buf->type != V4L2_BUF_TYPE_VIDEO_CAPTURE ||
> -	    v4l2_buf->memory != V4L2_MEMORY_MMAP) {
> +	if (v4l2_buf->type != V4L2_BUF_TYPE_VIDEO_CAPTURE
> +/*	    v4l2_buf->memory != V4L2_MEMORY_MMAP */ ) {
>  		uvc_trace(UVC_TRACE_CAPTURE, "[E] Invalid buffer type (%u) "
>  			"and/or memory (%u).\n", v4l2_buf->type,
>  			v4l2_buf->memory);

Sorry but this is problem with the application and not the driver. The pwc
driver enforces this value too (else it's a bug). Application need to be
modify to fix the bug in the application. Any ioctl values need to be
allocated or cleared before the system call. Valgrind detect this type of
bug.


> @@ -1342,6 +1343,31 @@
>  	return 0;
>  }
>  
> +	case VIDIOC_G_STD:
> +	{
> +		v4l2_std_id *std = arg;
> +		*std = V4L2_STD_NTSC;
> +		return 0;

Why don't use V4L2_STD_UNKNOWN ? and Laurent have already say that mplayer
and other program need to be fixed ...

And please remove comment with // or /* that removes code and do not add
comments.

Luc


From laurent.pinchart at skynet.be  Thu Feb 23 14:52:22 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 23 Feb 2006 14:52:22 +0100
Subject: [Linux-uvc-devel] [SVN] Various compatibility patches
Message-ID: <200602231452.23052.laurent.pinchart@skynet.be>

Hi everybody,

I finally got some time to answer your e-mails.

I'd like to thank all the people who sent me patches (Eduardo P?rez Ureta, 
Mikael Nilsson and Luca Barbieri among others). Here is what I committed so 
far:

- Handle V4L1 ioctls using the compatibility layer
- Update buffer flag field in VIDIOC_QUERYBUF and VIDIOC_DQBUF
- Linux 2.6.16 support

I'll have a look at the device reset patch. It seems a good workaround for 
hardware issues.

Regarding the "fake TV tuner" (VIDIOC_*_STD) and "Check removal" patches, I 
already stated that applications should be fixed. There's already a patch for 
TVTime in the linux-uvc SVN repository, and I'd be happy to host the patches 
for mplayer, Kopete and <insert your favorite application here> until they 
are applied mainstream.

Removing checks in drivers to work around application bugs will result in 
buggy drivers, and application developpers testing their software against the 
driver will not notice their own bugs.

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Feb 23 14:54:04 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 23 Feb 2006 14:54:04 +0100
Subject: [Linux-uvc-devel] what quality does the QC pro 5000 gives?
In-Reply-To: <43F8E1B2.4060507@fastmail.fm>
References: <43F8B33A.2050005@fastmail.fm> <200602191941.31759.mxhaard@magic.fr> <43F8E1B2.4060507@fastmail.fm>
Message-ID: <200602231454.05031.laurent.pinchart@skynet.be>

> Assuming I have a choice of the pro 5000 and the fusion , what would you
> say - gives better results in usb 2.0?

The Quickcam Fusion has a 1.3Mpixels sensor, while the Pro 5000 is limited to 
640x480.

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu Feb 23 15:01:12 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 23 Feb 2006 15:01:12 +0100
Subject: [Linux-uvc-devel] QC Fusion: 3 questions
In-Reply-To: <200602171139.22823.nick@customdesigns.ca>
References: <200602171139.22823.nick@customdesigns.ca>
Message-ID: <200602231501.12970.laurent.pinchart@skynet.be>

> has anyone looked at getting Kopete to scale the images rather than
> clipping them?

Not yet. I might have a look at that later when I find some free time (won't 
be before two months though).

> images are in black & white...what did I do? :P

Are they ? That might be a brightness/contrast/hue/saturation issue.

> lastly, and this may be outside the scope of this driver, but does anyone
> have the mic working?

If I'm not mistaken, I did. The microphone is a standard USB audio device. Try 
to get it working first while video streaming is off, as that's what I did.

Laurent Pinchart


From sig at netdot.net  Thu Feb 23 17:35:55 2006
From: sig at netdot.net (Aaron VanDevender)
Date: Thu, 23 Feb 2006 10:35:55 -0600
Subject: [Linux-uvc-devel] Ekiga and QuickCam Fusion
Message-ID: <1140712555.3465.22.camel@lazlo.netdot.net>

I am trying to get a QuickCam Fusion to work with Ekiga. I'm using rev
21 of the uvc driver and Ekiga Beta2 (2006.02.13), on FC4
(kernel-2.6.15-1.1831_FC4). I've seen some people on the list get
combination to work (Mikael), so I'm wondering what I'm doing wrong.

Plugging in the device gives me from dmesg:

usb 1-2: new high speed USB device using ehci_hcd and address 14
14:3:1: cannot set freq 0 to ep 0x86
14:3:2: cannot set freq 0 to ep 0x86
14:3:3: cannot set freq 16000 to ep 0x86
uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c1)
usbcore: registered new driver usbvideo
USB Video Class driver (v0.1.0)
uvcvideo: Failed to query (129) UVC control 1 (unit 0) : -32.
uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32.
uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110.
uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110.

replugging gives me:

usb 1-2: new high speed USB device using ehci_hcd and address 15
uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c1)
15:3:1: cannot set freq 0 to ep 0x86
15:3:2: cannot set freq 0 to ep 0x86
15:3:3: cannot get freq at ep 0x86

If I try and reload the module, I get

uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c1)
uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110.
uvcvideo: Failed to initialize the device (-5).
usbcore: registered new driver usbvideo
USB Video Class driver (v0.1.0)

The blue light never comes on. In fact, I didn't even realize the blue
light existed until Laurent mentioned it in a post to Nick, and I
confirmed it in the manual. It could be that this unit is dead out of
the box, as I don't have any windows boxes that I can test it on. But I
think it is more likely that I just need to tweak the driver somehow.

dmesg does not report that any sources (MJPEG or uncompressed) are
available. When I load up ekiga, it sees a device (/dev/video1) but
cannot open it. Instead it gives me an error that says:

"Your video driver doesn't support the requested video format."

If anyone has any suggestions for getting this to work, I would
appreciate it.

-- 

sig at netdot.net
Plead the First.


From dariusz.dworznik at gmail.com  Thu Feb 23 17:42:55 2006
From: dariusz.dworznik at gmail.com (Dariusz Dworznik)
Date: Thu, 23 Feb 2006 17:42:55 +0100
Subject: [Linux-uvc-devel] Ekiga and QuickCam Fusion
In-Reply-To: <1140712555.3465.22.camel@lazlo.netdot.net>
References: <1140712555.3465.22.camel@lazlo.netdot.net>
Message-ID: <200602231742.55900.dariusz.dworznik@gmail.com>

try with the latest cvs ekiga snapshots.. 

it works for me with this webcam. 

dariusz dworznik

On Thursday 23 February 2006 17:35, Aaron VanDevender wrote:
> I am trying to get a QuickCam Fusion to work with Ekiga. I'm using rev
> 21 of the uvc driver and Ekiga Beta2 (2006.02.13), on FC4
> (kernel-2.6.15-1.1831_FC4). I've seen some people on the list get
> combination to work (Mikael), so I'm wondering what I'm doing wrong.
>
> Plugging in the device gives me from dmesg:
>
> usb 1-2: new high speed USB device using ehci_hcd and address 14
> 14:3:1: cannot set freq 0 to ep 0x86
> 14:3:2: cannot set freq 0 to ep 0x86
> 14:3:3: cannot set freq 16000 to ep 0x86
> uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c1)
> usbcore: registered new driver usbvideo
> USB Video Class driver (v0.1.0)
> uvcvideo: Failed to query (129) UVC control 1 (unit 0) : -32.
> uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32.
> uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110.
> uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110.
>
> replugging gives me:
>
> usb 1-2: new high speed USB device using ehci_hcd and address 15
> uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c1)
> 15:3:1: cannot set freq 0 to ep 0x86
> 15:3:2: cannot set freq 0 to ep 0x86
> 15:3:3: cannot get freq at ep 0x86
>
> If I try and reload the module, I get
>
> uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c1)
> uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110.
> uvcvideo: Failed to initialize the device (-5).
> usbcore: registered new driver usbvideo
> USB Video Class driver (v0.1.0)
>
> The blue light never comes on. In fact, I didn't even realize the blue
> light existed until Laurent mentioned it in a post to Nick, and I
> confirmed it in the manual. It could be that this unit is dead out of
> the box, as I don't have any windows boxes that I can test it on. But I
> think it is more likely that I just need to tweak the driver somehow.
>
> dmesg does not report that any sources (MJPEG or uncompressed) are
> available. When I load up ekiga, it sees a device (/dev/video1) but
> cannot open it. Instead it gives me an error that says:
>
> "Your video driver doesn't support the requested video format."
>
> If anyone has any suggestions for getting this to work, I would
> appreciate it.


From luc at saillard.org  Thu Feb 23 17:47:04 2006
From: luc at saillard.org (Luc Saillard)
Date: Thu, 23 Feb 2006 17:47:04 +0100
Subject: [Linux-uvc-devel] Ekiga and QuickCam Fusion
In-Reply-To: <1140712555.3465.22.camel@lazlo.netdot.net>
References: <1140712555.3465.22.camel@lazlo.netdot.net>
Message-ID: <20060223164704.GQ2642@sd291.sivit.org>

On Thu, Feb 23, 2006 at 10:35:55AM -0600, Aaron VanDevender wrote:
> 
> I am trying to get a QuickCam Fusion to work with Ekiga. I'm using rev
> 21 of the uvc driver and Ekiga Beta2 (2006.02.13), on FC4
> (kernel-2.6.15-1.1831_FC4). I've seen some people on the list get
> combination to work (Mikael), so I'm wondering what I'm doing wrong.

Just to be sure, you have test this webcam without plugging it in a usb hub ?
(like lcd screen).
Many webcams don't support to be plug into a usb hub. For the pwc driver,
I've a lot of success when plugging the webcam directly to the computer.

Luc


From sig at netdot.net  Thu Feb 23 18:23:46 2006
From: sig at netdot.net (Aaron VanDevender)
Date: Thu, 23 Feb 2006 11:23:46 -0600
Subject: [Linux-uvc-devel] Ekiga and QuickCam Fusion
In-Reply-To: <20060223164704.GQ2642@sd291.sivit.org>
References: <1140712555.3465.22.camel@lazlo.netdot.net>
	 <20060223164704.GQ2642@sd291.sivit.org>
Message-ID: <1140715426.3465.25.camel@lazlo.netdot.net>

On Thu, 2006-02-23 at 17:47 +0100, Luc Saillard wrote:
> On Thu, Feb 23, 2006 at 10:35:55AM -0600, Aaron VanDevender wrote:
> > 
> > I am trying to get a QuickCam Fusion to work with Ekiga. I'm using rev
> > 21 of the uvc driver and Ekiga Beta2 (2006.02.13), on FC4
> > (kernel-2.6.15-1.1831_FC4). I've seen some people on the list get
> > combination to work (Mikael), so I'm wondering what I'm doing wrong.
> 
> Just to be sure, you have test this webcam without plugging it in a usb hub ?
> (like lcd screen).
> Many webcams don't support to be plug into a usb hub. For the pwc driver,
> I've a lot of success when plugging the webcam directly to the computer.

I don't have it in a hub. I have it plugged straight into one of the USB
ports on the motherboard.

-- 

sig at netdot.net
Plead the First.


From sig at netdot.net  Thu Feb 23 21:09:19 2006
From: sig at netdot.net (Aaron VanDevender)
Date: Thu, 23 Feb 2006 14:09:19 -0600
Subject: [Linux-uvc-devel] Ekiga and QuickCam Fusion
In-Reply-To: <200602231742.55900.dariusz.dworznik@gmail.com>
References: <1140712555.3465.22.camel@lazlo.netdot.net>
	 <200602231742.55900.dariusz.dworznik@gmail.com>
Message-ID: <1140725359.18852.5.camel@lazlo.netdot.net>

Dariusz,

Thanks for the tip. I got the snapshot from seconix.com, and after
sorting out all the dependencies, I built it, ran it, and it works with
my camera. Thank you.

On Thu, 2006-02-23 at 17:42 +0100, Dariusz Dworznik wrote:
> try with the latest cvs ekiga snapshots.. 
> 
> it works for me with this webcam. 
> 
> dariusz dworznik
> 
> On Thursday 23 February 2006 17:35, Aaron VanDevender wrote:
> > I am trying to get a QuickCam Fusion to work with Ekiga. I'm using rev
> > 21 of the uvc driver and Ekiga Beta2 (2006.02.13), on FC4
> > (kernel-2.6.15-1.1831_FC4). I've seen some people on the list get
> > combination to work (Mikael), so I'm wondering what I'm doing wrong.
> >
> > Plugging in the device gives me from dmesg:
> >
> > usb 1-2: new high speed USB device using ehci_hcd and address 14
> > 14:3:1: cannot set freq 0 to ep 0x86
> > 14:3:2: cannot set freq 0 to ep 0x86
> > 14:3:3: cannot set freq 16000 to ep 0x86
> > uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c1)
> > usbcore: registered new driver usbvideo
> > USB Video Class driver (v0.1.0)
> > uvcvideo: Failed to query (129) UVC control 1 (unit 0) : -32.
> > uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32.
> > uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110.
> > uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110.
> >
> > replugging gives me:
> >
> > usb 1-2: new high speed USB device using ehci_hcd and address 15
> > uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c1)
> > 15:3:1: cannot set freq 0 to ep 0x86
> > 15:3:2: cannot set freq 0 to ep 0x86
> > 15:3:3: cannot get freq at ep 0x86
> >
> > If I try and reload the module, I get
> >
> > uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c1)
> > uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110.
> > uvcvideo: Failed to initialize the device (-5).
> > usbcore: registered new driver usbvideo
> > USB Video Class driver (v0.1.0)
> >
> > The blue light never comes on. In fact, I didn't even realize the blue
> > light existed until Laurent mentioned it in a post to Nick, and I
> > confirmed it in the manual. It could be that this unit is dead out of
> > the box, as I don't have any windows boxes that I can test it on. But I
> > think it is more likely that I just need to tweak the driver somehow.
> >
> > dmesg does not report that any sources (MJPEG or uncompressed) are
> > available. When I load up ekiga, it sees a device (/dev/video1) but
> > cannot open it. Instead it gives me an error that says:
> >
> > "Your video driver doesn't support the requested video format."
> >
> > If anyone has any suggestions for getting this to work, I would
> > appreciate it.
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 
-- 

sig at netdot.net
Plead the First.


From per at pz.se  Fri Feb 24 10:28:35 2006
From: per at pz.se (Per Zetterlund)
Date: Fri, 24 Feb 2006 10:28:35 +0100
Subject: [Linux-uvc-devel] Small fix and help offered
Message-ID: <43FED1C3.4070002@pz.se>

Hi all!

Great work on this driver! Let's just hope that more manufacturers start 
using
the standard.

Looking through the code I found whan I think is an error. Se patch below.

--- uvcvideo.c  (revision 22)
+++ uvcvideo.c  (working copy)
@@ -1327,7 +1327,7 @@

                video->iso_buffer[i] = usb_buffer_alloc(video->dev->udev,
                        size, GFP_KERNEL, &urb->transfer_dma);
-               if (video == NULL) {
+               if (video->iso_buffer[i] == NULL) {
                        usb_free_urb(urb);
                        uvc_uninit_isoc(video);
                        return -ENOMEM;


I have experience of driver development and video systems, and I'd 
really like to help
develop this driver furter. What needs to be done? Bulk transfer? Maybe 
I can try to
get hold of one of those Fuji cameras....

Best regards,
  Per



From sig at netdot.net  Fri Feb 24 21:58:58 2006
From: sig at netdot.net (Aaron VanDevender)
Date: Fri, 24 Feb 2006 14:58:58 -0600
Subject: [Linux-uvc-devel] Fusion Resolution
Message-ID: <1140814738.18852.33.camel@lazlo.netdot.net>

I have a QuickCam Fusion, which has a 1.3 Megapixel CCD, which
translates to 1280x1024. However, the max resolution that I can get out
of uvccapture is 960x720. Is there anyway to actually obtain the maximum
natural resolution out of the camera?

Also, is there a usb control that can be implemented to control a
digital zoom, similar to the tilt/pan control, or would this
functionality have to be done by the third party app (ekiga, or
whatever)?

-- 

sig at netdot.net
Plead the First.


From phil at firestorm.cx  Fri Feb 24 22:15:19 2006
From: phil at firestorm.cx (Philip Heron)
Date: Fri, 24 Feb 2006 21:15:19 +0000
Subject: [Linux-uvc-devel] Fusion Resolution
In-Reply-To: <1140814738.18852.33.camel@lazlo.netdot.net>
References: <1140814738.18852.33.camel@lazlo.netdot.net>
Message-ID: <1140815719.3802.4.camel@beastie.firestorm.cx>

Hi Aaron,

On Fri, 2006-02-24 at 14:58 -0600, Aaron VanDevender wrote:
> I have a QuickCam Fusion, which has a 1.3 Megapixel CCD, which
> translates to 1280x1024. However, the max resolution that I can get out
> of uvccapture is 960x720. Is there anyway to actually obtain the maximum
> natural resolution out of the camera?

The camera can only go as high as 960x720 when using MJPEG. The Fusion
can do higher resolutions (maximum of 1280x960) when using the YUYV
pixel format:

http://yoshi.firestorm.cx/webcam/03-large.jpeg

-Phil <phil at firestorm.cx>




From sig at netdot.net  Fri Feb 24 22:28:35 2006
From: sig at netdot.net (Aaron VanDevender)
Date: Fri, 24 Feb 2006 15:28:35 -0600
Subject: [Linux-uvc-devel] Fusion Resolution
In-Reply-To: <1140815719.3802.4.camel@beastie.firestorm.cx>
References: <1140814738.18852.33.camel@lazlo.netdot.net>
	 <1140815719.3802.4.camel@beastie.firestorm.cx>
Message-ID: <1140816516.18852.39.camel@lazlo.netdot.net>

Philip,

On Fri, 2006-02-24 at 21:15 +0000, Philip Heron wrote:
> Hi Aaron,
> 
> On Fri, 2006-02-24 at 14:58 -0600, Aaron VanDevender wrote:
> > I have a QuickCam Fusion, which has a 1.3 Megapixel CCD, which
> > translates to 1280x1024. However, the max resolution that I can get out
> > of uvccapture is 960x720. Is there anyway to actually obtain the maximum
> > natural resolution out of the camera?
> 
> The camera can only go as high as 960x720 when using MJPEG. The Fusion
> can do higher resolutions (maximum of 1280x960) when using the YUYV
> pixel format:
> 
> http://yoshi.firestorm.cx/webcam/03-large.jpeg

I changed the format to V4L2_PIX_FMT_YUYV in uvccapture.c, and the
verbose output said it was taking a picture at 1280x960, but the image
it produced was a 4k file which, when opened with eog, had no height and
width (so there was no real image there, only headers). Is there
something else I need to do to get YUYV capture to work?

-Aaron



sig at netdot.net
Plead the First.


From ace at staticwave.ca  Fri Feb 24 22:55:18 2006
From: ace at staticwave.ca (Gabriel A. Devenyi)
Date: Fri, 24 Feb 2006 16:55:18 -0500
Subject: [Linux-uvc-devel] Fusion Resolution
In-Reply-To: <1140816516.18852.39.camel@lazlo.netdot.net>
References: <1140814738.18852.33.camel@lazlo.netdot.net> <1140815719.3802.4.camel@beastie.firestorm.cx> <1140816516.18852.39.camel@lazlo.netdot.net>
Message-ID: <200602241655.18939.ace@staticwave.ca>

On February 24, 2006 16:28, Aaron VanDevender wrote:
> I changed the format to V4L2_PIX_FMT_YUYV in uvccapture.c, and the
> verbose output said it was taking a picture at 1280x960, but the image
> it produced was a 4k file which, when opened with eog, had no height and
> width (so there was no real image there, only headers). Is there
> something else I need to do to get YUYV capture to work?

uvccapture is really setup just to create JPEGs by using the MJPEG frames. 
Since its built on the luvcview core, the YUYV capture is present in the 
code, but I've not implemented a method to get it out. I'll dig through and 
see if I can add a YUYV dump, but I'm not even sure of the file formatting, 
so I'll have to do a little research. At the very least I'll disallow 
>960x720 in MJPEG mode, and make a note in the README and usage output. 
Patches are always welcome to help implementing this. 

-- 
Gabriel A. Devenyi
ace at staticwave.ca


From sig at netdot.net  Sat Feb 25 00:21:40 2006
From: sig at netdot.net (Aaron VanDevender)
Date: Fri, 24 Feb 2006 17:21:40 -0600
Subject: [Linux-uvc-devel] Fusion Resolution
In-Reply-To: <200602241655.18939.ace@staticwave.ca>
References: <1140814738.18852.33.camel@lazlo.netdot.net>
	 <1140815719.3802.4.camel@beastie.firestorm.cx>
	 <1140816516.18852.39.camel@lazlo.netdot.net>
	 <200602241655.18939.ace@staticwave.ca>
Message-ID: <1140823301.3484.3.camel@lazlo.netdot.net>

Gabriel,

On Fri, 2006-02-24 at 16:55 -0500, Gabriel A. Devenyi wrote:
> uvccapture is really setup just to create JPEGs by using the MJPEG frames. 
> Since its built on the luvcview core, the YUYV capture is present in the 
> code, but I've not implemented a method to get it out. I'll dig through and 
> see if I can add a YUYV dump, but I'm not even sure of the file formatting, 
> so I'll have to do a little research. At the very least I'll disallow 
> >960x720 in MJPEG mode, and make a note in the README and usage output. 
> Patches are always welcome to help implementing this. 

Why would you want to disallow 960x720 in MJPEG mode? That works fine.

-- 

sig at netdot.net
Plead the First.


From ace at staticwave.ca  Sat Feb 25 01:04:31 2006
From: ace at staticwave.ca (Gabriel A. Devenyi)
Date: Fri, 24 Feb 2006 19:04:31 -0500
Subject: [Linux-uvc-devel] Fusion Resolution
In-Reply-To: <1140823301.3484.3.camel@lazlo.netdot.net>
References: <1140814738.18852.33.camel@lazlo.netdot.net> <200602241655.18939.ace@staticwave.ca> <1140823301.3484.3.camel@lazlo.netdot.net>
Message-ID: <200602241904.31748.ace@staticwave.ca>

On February 24, 2006 18:21, Aaron VanDevender wrote:
> Why would you want to disallow 960x720 in MJPEG mode? That works fine.

Oops, I meant "greater than", the math symbol clearly confuses things as its 
the same as the "quote" function in mail.

-- 
Gabriel A. Devenyi
ace at staticwave.ca


From luc at saillard.org  Sat Feb 25 01:37:24 2006
From: luc at saillard.org (Luc Saillard)
Date: Sat, 25 Feb 2006 01:37:24 +0100
Subject: [Linux-uvc-devel] Fusion Resolution
In-Reply-To: <200602241655.18939.ace@staticwave.ca>
References: <1140814738.18852.33.camel@lazlo.netdot.net> <1140815719.3802.4.camel@beastie.firestorm.cx> <1140816516.18852.39.camel@lazlo.netdot.net> <200602241655.18939.ace@staticwave.ca>
Message-ID: <20060225003724.GE16058@sd291.sivit.org>

On Fri, Feb 24, 2006 at 04:55:18PM -0500, Gabriel A. Devenyi wrote:
 
> uvccapture is really setup just to create JPEGs by using the MJPEG frames. 
> Since its built on the luvcview core, the YUYV capture is present in the 
> code, but I've not implemented a method to get it out. I'll dig through and 
> see if I can add a YUYV dump, but I'm not even sure of the file formatting, 
> so I'll have to do a little research. At the very least I'll disallow 
 
The format is very simple. For each pixel you have two bytes (even: Y and U)
or (odd: U and V). So for an image of 4x4, you have 32 bytes

 0: YU YV YU YV
 8: YU YV YU YV
16: YU YV YU YV
24: YU YV YU YV

This is very simple but i've not (yet) found a good algorithm when resizing
and converting to other colorspace. You see vertical line. One line will be
blue, the other line will be green.

Luc


From mxhaard at magic.fr  Sat Feb 25 10:54:36 2006
From: mxhaard at magic.fr (michel Xhaard)
Date: Sat, 25 Feb 2006 10:54:36 +0100
Subject: [Linux-uvc-devel] Fusion Resolution
In-Reply-To: <20060225003724.GE16058@sd291.sivit.org>
References: <1140814738.18852.33.camel@lazlo.netdot.net> <200602241655.18939.ace@staticwave.ca> <20060225003724.GE16058@sd291.sivit.org>
Message-ID: <200602251054.36786.mxhaard@magic.fr>

Le Samedi 25 F?vrier 2006 01:37, Luc Saillard a ?crit?:
> On Fri, Feb 24, 2006 at 04:55:18PM -0500, Gabriel A. Devenyi wrote:
> > uvccapture is really setup just to create JPEGs by using the MJPEG
> > frames. Since its built on the luvcview core, the YUYV capture is present
> > in the code, but I've not implemented a method to get it out. I'll dig
> > through and see if I can add a YUYV dump, but I'm not even sure of the
> > file formatting, so I'll have to do a little research. At the very least
> > I'll disallow
>
> The format is very simple. For each pixel you have two bytes (even: Y and
> U) or (odd: U and V). So for an image of 4x4, you have 32 bytes
>
>  0: YU YV YU YV
>  8: YU YV YU YV
> 16: YU YV YU YV
> 24: YU YV YU YV
>
> This is very simple but i've not (yet) found a good algorithm when resizing
> and converting to other colorspace. You see vertical line. One line will be
> blue, the other line will be green.
>
> Luc
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/linux-uvc-devel
Luc,
Maybe try this one, I have set in luvcview to resize the gui part . In 
luvcview i only resize the xaxis as y is a constant, this one may resize the 
two axis.

#define ADDRESSE(x,y,w) (((y)*(w))+(x))

typedef struct YU {
    unsigned char Y0;
    unsigned char U0;
} YU;

/* Each pixels in the resulting figure need to be set. For each one take the 
nearest available in the original surface
If the last Chroma component is U take a V else take U by moving the index in 
the nearest pixel from the left 
This routine only deal with X axis you need to make the original picture with 
the good height */

static int resize(unsigned char *INbuff, unsigned char *OUTbuff,
		  int Owidth, int Oheight, int width, int height)
{
    int rx, ry;
    int xscale,yscale;
    int x, y;
    int Cc, lastCc;
    YU *input = (YU *) INbuff;
    YU *output = (YU *) OUTbuff;
    if (!width || !height)
	return -1;
    /* at start Cc mean a U component so LastCc should be a V */
    lastCc = 1;
    xscale = (Owidth << 16) / width;
    yscale =(Oheight << 16) / height;
    
    for (y = 0; y < height; y++) {
	for (x = 0; x < width; x++) {
	    rx = x * xscale >> 16;
	    ry = y * yscale >> 16;
	    if (((2 * rx + 1) & 0x03) == 3)
		Cc = 1;		// find V component
	    else
		Cc = 0;
	    if (lastCc == Cc) {
		/* no Chroma interleave correct by moving the index */
		rx -= 1;
		Cc = !Cc;
	    }
	    memcpy(output++, &input[ADDRESSE((int) rx, (int) ry, Owidth)],
		   sizeof(YU));
	    lastCc = Cc;
	}
    }
    return 0;
} 

-- 
Michel Xhaard
http://mxhaard.free.fr


From phil at firestorm.cx  Sat Feb 25 13:14:17 2006
From: phil at firestorm.cx (Philip Heron)
Date: Sat, 25 Feb 2006 12:14:17 +0000
Subject: [Linux-uvc-devel] [PATCH] Support for V4L2 menu controls
Message-ID: <1140869657.1598.5.camel@beastie.firestorm.cx>

Hi All,

 The attached patch changes the "Power Line Frequency" integer control
to a menu control. This makes the driver a little friendlier when using
applications that support them.

-Phil <phil at firestorm.cx>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: uvclinux-20060225-menu-ctrl.patch.gz
Type: application/x-gzip
Size: 1021 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20060225/617228b2/attachment.bin>

From laurent.pinchart at skynet.be  Mon Feb 27 14:50:40 2006
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 27 Feb 2006 14:50:40 +0100
Subject: [Linux-uvc-devel] Small fix and help offered
In-Reply-To: <43FED1C3.4070002@pz.se>
References: <43FED1C3.4070002@pz.se>
Message-ID: <200602271450.40646.laurent.pinchart@skynet.be>

Hi Per,

> Great work on this driver! Let's just hope that more manufacturers start
> using the standard.
>
> Looking through the code I found whan I think is an error. Se patch below.
>
> --- uvcvideo.c  (revision 22)
> +++ uvcvideo.c  (working copy)
> @@ -1327,7 +1327,7 @@
>
>                 video->iso_buffer[i] = usb_buffer_alloc(video->dev->udev,
>                         size, GFP_KERNEL, &urb->transfer_dma);
> -               if (video == NULL) {
> +               if (video->iso_buffer[i] == NULL) {
>                         usb_free_urb(urb);
>                         uvc_uninit_isoc(video);
>                         return -ENOMEM;

Thanks. Applied.

> I have experience of driver development and video systems, and I'd
> really like to help develop this driver furter. What needs to be done? Bulk
> transfer? Maybe I can try to get hold of one of those Fuji cameras....

If you can get hold of one of those cameras, bulk transfers shouldn't be very 
difficult to implement.

You could also implement the V4L2 read() method as it's currently not 
supported. Another area of the driver that could do with some improvements is 
video controls handling (VIDIOC_{GS}_CTRL). A few controls are currently 
mapped directly from V4L2 to UVC, but complex controls can't be easily 
supported this way. I can give you more information if you're interested.

Best regards, and thank you for your help.

Laurent Pinchart


