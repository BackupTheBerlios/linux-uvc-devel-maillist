<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] UVC userpointer  streaming (memory mapping)
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2010-May/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20UVC%20userpointer%20%20streaming%20%28memory%20mapping%29&In-Reply-To=%3C201005311206.01156.laurent.pinchart%40ideasonboard.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005764.html">
   <LINK REL="Next"  HREF="005763.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] UVC userpointer  streaming (memory mapping)</H1>
    <B>Laurent Pinchart</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20UVC%20userpointer%20%20streaming%20%28memory%20mapping%29&In-Reply-To=%3C201005311206.01156.laurent.pinchart%40ideasonboard.com%3E"
       TITLE="[Linux-uvc-devel] UVC userpointer  streaming (memory mapping)">laurent.pinchart at ideasonboard.com
       </A><BR>
    <I>Mon May 31 12:06:00 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="005764.html">[Linux-uvc-devel] UVC userpointer  streaming (memory mapping)
</A></li>
        <LI>Next message: <A HREF="005763.html">[Linux-uvc-devel]  Looking for upside down uvc cams
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5766">[ date ]</a>
              <a href="thread.html#5766">[ thread ]</a>
              <a href="subject.html#5766">[ subject ]</a>
              <a href="author.html#5766">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Andreas,

I've just answered your private e-mail, here's a copy for the list.

On Friday 28 May 2010 11:08:19 Andreas Auer wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I'm trying to get user pointer streaming with UVC webcams working. I
</I>&gt;<i> already got a patch from Laurent Pinchart (thanks) which enables user
</I>&gt;<i> pointer streaming. This patch works if I pass malloc()'d memory to the
</I>&gt;<i> driver.
</I>&gt;<i> My problem is that I want to use mmap()'d memory (via /dev/mem) and this
</I>&gt;<i> type of memory (flags VM_IO and VM_PFNMAP are set) is not supported to
</I>&gt;<i> be used with get_user_pages to map the memory to the kernel space.
</I>&gt;<i> 
</I>&gt;<i> So, is there another way to map the pages into the kernel space to be
</I>&gt;<i> used for user pointer streaming?? I had a look at kmap (kmap_atomic)...
</I>&gt;<i> would this be possible??
</I>
PFNMAP memory has no page struct associated with it, it can't be handled the 
same way as regular main memory in the uvcvideo driver.

The DSP driver probably reserves memory at system startup. That memory isn't 
managed by the Linux kernel memory manager.

The uvcvideo driver doesn't support PFNMAP memory at the moment. That 
shouldn't be too difficult to fix though, but I'm afraid I don't have time to 
work on it right now.

-- 
Regards,

Laurent Pinchart

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005764.html">[Linux-uvc-devel] UVC userpointer  streaming (memory mapping)
</A></li>
	<LI>Next message: <A HREF="005763.html">[Linux-uvc-devel]  Looking for upside down uvc cams
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5766">[ date ]</a>
              <a href="thread.html#5766">[ thread ]</a>
              <a href="subject.html#5766">[ subject ]</a>
              <a href="author.html#5766">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
