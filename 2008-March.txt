From dark.shoyu at gmail.com  Sat Mar  1 18:16:40 2008
From: dark.shoyu at gmail.com (Dark Shoyu)
Date: Sat, 1 Mar 2008 14:16:40 -0300
Subject: [Linux-uvc-devel] Unsupported webcam
In-Reply-To: <bcbba7190803010903q6198a1fbh82595a797ff26d0e@mail.gmail.com>
References: <bcbba7190803010903q6198a1fbh82595a797ff26d0e@mail.gmail.com>
Message-ID: <bcbba7190803010916s565836a5o5563e1a6d6111dd1@mail.gmail.com>

Hey there,

I've recently bought my webcam and in the try of making it work in my Gentoo
system, I've already tried both gspcav1 and linux uvc drivers, but none of
them worked.

I found some details about my webcam at the Vimicro site (
http://www.vimicro.com/english/product/d_vc0332.htm)

*lsusb -v:*
 Bus 001 Device 003: ID 0ac8:332d Z-Star Microelectronics Corp.
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x0ac8 Z-Star Microelectronics Corp.
  idProduct          0x332d
  bcdDevice            1.00
  iManufacturer           1 Vimicro Corp.
  iProduct                2 Vega USB 2.0 Camera.
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          713
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               2 Vega USB 2.0 Camera.
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              2 Vega USB 2.0 Camera.
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           79
        dwClockFrequency       24.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x0004000a
          Auto-Exposure Mode
          Exposure Time (Absolute)
          Privacy
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 2
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000177f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Gain
          Power Line Frequency
          White Balance Temperature, Auto
        iProcessing             0
        bmVideoStandards     0x 9
          None
          SECAM - 625/50
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               2
        iTerminal               0
      VideoControl Interface Descriptor:
        bLength                28
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {a917c75d-4119-11da-ae0e-000d56ac7b4c}
        bNumControl            13
        bNrPins                 1
        baSourceID( 0)          1
        bControlSize            3
        bmControls( 0)       0xf9
        bmControls( 1)       0x1f
        bmControls( 2)       0x18
        iExtension              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x000a  1x 10 bytes
        bInterval               5
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormarts                        1
        wTotalLength                    33281
        bEndPointAddress                    0
        bmInfo                              3
        bTerminalLink                       2
        bStillCaptureMethod                 1
        bTriggerSupport                     1
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                5
        guidFormat
{32595559-0000-0010-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            54
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                 24576000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  7
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666667
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           1333333
        dwFrameInterval( 6)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            54
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                 24576000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  7
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666667
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           1333333
        dwFrameInterval( 6)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            54
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                 24576000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  7
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666667
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           1333333
        dwFrameInterval( 6)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            54
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                 24576000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  7
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666667
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           1333333
        dwFrameInterval( 6)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            54
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                 24576000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  7
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666667
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           1333333
        dwFrameInterval( 6)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            26
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               5
        wWidth( 0)                        640
        wHeight( 0)                       480
        wWidth( 1)                        352
        wHeight( 1)                       288
        wWidth( 2)                        320
        wHeight( 2)                       240
        wWidth( 3)                        176
        wHeight( 3)                       144
        wWidth( 4)                        160
        wHeight( 4)                       120
        bNumCompressionPatterns             5
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     0 (Unspecified)
        bTransferCharacteristics            0 (Unspecified)
        bMatrixCoefficients                 0 (Unspecified)
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0400  1x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b00  2x 768 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0c00  2x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1380  3x 896 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       7
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 0 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       2 Streaming
      bFunctionProtocol       0
      iFunction               2 Vega USB 2.0 Camera.
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0
      iInterface              2 Vega USB 2.0 Camera.
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           39
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0602 Digital Audio Interface
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0
        iTerminal               0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 2
        bSourceID               1
        bControlSize            1
        bmaControls( 0)      0x00
        bmaControls( 1)      0x03
          Mute
          Volume
        iFeature                0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               2
        iTerminal               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                35
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            9 Discrete
        tSamFreq[ 0]         8000
        tSamFreq[ 1]        11025
        tSamFreq[ 2]        12000
        tSamFreq[ 3]        16000
        tSamFreq[ 4]        22050
        tSamFreq[ 5]        24000
        tSamFreq[ 6]        32000
        tSamFreq[ 7]        44100
        tSamFreq[ 8]        48000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0062  1x 98 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)



Thanks in advance,
Shoyu.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080301/c1f55201/attachment.html>

From laurent.pinchart at skynet.be  Mon Mar  3 01:02:16 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 3 Mar 2008 01:02:16 +0100
Subject: [Linux-uvc-devel] Problems to install Logitech QuickCam Pro 5000
In-Reply-To: <E1JU3UX-0005cS-00@relay.mixmail.com>
References: <E1JU3UX-0005cS-00@relay.mixmail.com>
Message-ID: <200803030102.16323.laurent.pinchart@skynet.be>

Hi Pedro,

On Tuesday 26 February 2008, Pedro P wrote:
> Hi Laurent,
>
> Thanks a lot for your mail.
> I think to use WebCam for videoconference and instantmessenger..
> When I run "Ekiga" appears this error message:
> His controller of video does not support the format of requested video.
>
> If you need more information, send me command console. I'm new in Linux.

The kernel log I mentioned in my previous e-mail can be viewed using the dmesg 
command.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Mar  3 01:05:09 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 3 Mar 2008 01:05:09 +0100
Subject: [Linux-uvc-devel] Xbox live Vision webcam not working with
	latest svn version
In-Reply-To: <47C69643.7070504@gmail.com>
References: <47C69643.7070504@gmail.com>
Message-ID: <200803030105.09353.laurent.pinchart@skynet.be>

On Thursday 28 February 2008, Dems wrote:
> Hi, I have a Xbox live Vision webcam (045e:0294) device, and i managed
> to get it working with uvcvideo driver but with revision 147 ( svn
> checkout -r 147 svn://svn.berlios.de/linux-uvc/linux-uvc/trunk)
> With this older revision my webcam work fine and here is what i can see
> in dmesg :
>
>
> [590301.554701] Linux video capture interface: v2.00
> [590301.558325] uvcvideo: Found UVC 1.00 device Video Camera
> (045e:0294)
> [590301.565932] usbcore: registered new interface driver uvcvideo
> [590301.565936] USB Video Class driver (v0.1.0)
> [590362.019163] uvcvideo: Failed to query (129) UVC control 1 (unit 0) :
> -32 (exp. 26).
> [590438.635275] uvcvideo: Failed to query (1) UVC control 1 (unit 0) :
> -32 (exp. 26).
> [590461.272334] uvcvideo: Failed to query (1) UVC control 1 (unit 0) :
> -110 (exp. 26).
> [590474.309501] uvcvideo: Failed to query (1) UVC control 1 (unit 0) :
> -110 (exp. 26).
> [590553.455579] uvcvideo: Failed to query (1) UVC control 1 (unit 0) :
> -110 (exp. 26).
> [590656.259387] uvcvideo: Failed to query (1) UVC control 1 (unit 0) :
> -110 (exp. 26).
>
>
>
> But when I get latest svn version, recompile install the driver and load
> the module my webcam does not work anymore. There is still /dev/video0
> created but it deos not work and here is what i can see in dmesg :
>
> [591039.607261] Linux video capture interface: v2.00
> [591039.611234] uvcvideo: Found UVC 1.00 device Video Camera
> (045e:0294)
> [591039.699539] usbcore: registered new interface driver uvcvideo
> [591039.699545] USB Video Class driver (v0.1.0)
> [591051.421402] uvcvideo: Failed to query (131) UVC control 7 (unit 2) :
> -32 (exp. 2).
> [591051.422758] uvcvideo: Failed to query (135) UVC control 2 (unit 2) :
> -32 (exp. 2).
>
>
> I use Ubuntu 7.10 with kernel 2.6.22-14-generic.

Have you upgraded your kernel in-between ? How does it fail to work exactly ?

From the logs you posted it seems your webcam is quite buggy. It fails to 
answer many USB requests, probably because of timing issues. If that's the 
case there's not much I can do about it.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Mar  3 01:09:12 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 3 Mar 2008 01:09:12 +0100
Subject: [Linux-uvc-devel] A uvc_stream-compatible viewer
In-Reply-To: <20080228162033.7s00vipoyss4g00o@webmail.xmission.com>
References: <20080228162033.7s00vipoyss4g00o@webmail.xmission.com>
Message-ID: <200803030109.12756.laurent.pinchart@skynet.be>

Hi George,

thanks a lot for your contribution. The Linux UVC driver would be useless 
without userspace applications, and I'm always happy to see that the project 
attracts new developers.

You should post your announcement on the quickcamteam.net forum and ask for a 
link on their software page.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Mar  3 01:11:06 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 3 Mar 2008 01:11:06 +0100
Subject: [Linux-uvc-devel] Unsupported webcam
In-Reply-To: <bcbba7190803010916s565836a5o5563e1a6d6111dd1@mail.gmail.com>
References: <bcbba7190803010903q6198a1fbh82595a797ff26d0e@mail.gmail.com>
	<bcbba7190803010916s565836a5o5563e1a6d6111dd1@mail.gmail.com>
Message-ID: <200803030111.06648.laurent.pinchart@skynet.be>

Hi Shoyu,

your camera should be supported by the Linux UVC driver. Could you please give 
us more details about what goes wrong ? Make sure to include detailed error 
messages and excerpts of the kernel log in your report.

Best regards,

Laurent Pinchart


From masc at operamail.com  Tue Mar  4 00:00:34 2008
From: masc at operamail.com (martin schneebacher)
Date: Tue, 4 Mar 2008 00:00:34 +0100
Subject: [Linux-uvc-devel] labtec webcam for notebooks
Message-ID: <20080303230034.A2AA57BB0A@ws5-10.us4.outblaze.com>

hi!

i guess the labtec webcam (logitech?) i have here on my desk (0x046d/0x08aa) isn't supported by the uvc driver, as it claims 
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol

it uses the same bridge/chip as the logitech quickcam IM (Zc0302 / Hdcs2020) says http://mxhaard.free.fr/spca5xx.html

bye...masc.


 lsusb -s 3:6 -v

Bus 003 Device 006: ID 046d:08aa Logitech, Inc. 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0         8
  idVendor           0x046d Logitech, Inc.
  idProduct          0x08aa 
  bcdDevice            1.00
  iManufacturer           0 
  iProduct                2 Camera         
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          336
    bNumInterfaces          3
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xa0
      (Bus Powered)
      Remote Wakeup
    MaxPower              100mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       1
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       2
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x00c0  1x 192 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       3
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       4
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0180  1x 384 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       5
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       6
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0300  1x 768 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       7
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x03ff  1x 1023 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0 
      iInterface              0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           39
        bInCollection           1
        baInterfaceNr( 0)       2
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0 
        iTerminal               0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 2
        bSourceID               1
        bControlSize            2
        bmaControls( 0)      0x43
        bmaControls( 0)      0x00
          Mute
          Volume
          Automatic Gain
        iFeature                0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               2
        iTerminal               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            1 Discrete
        tSamFreq[ 0]         8000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               1
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x00
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            1 Discrete
        tSamFreq[ 0]        16000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0020  1x 32 bytes
        bInterval               1
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x00
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Status:     0x0000
  (Bus Powered)


-- 
_______________________________________________
Surf the Web in a faster, safer and easier way:
Download Opera 9 at http://www.opera.com

Powered by Outblaze


From Serge.A.S at tochka.ru  Tue Mar  4 00:18:10 2008
From: Serge.A.S at tochka.ru (Serge A. Suchkov)
Date: Tue, 4 Mar 2008 02:18:10 +0300
Subject: [Linux-uvc-devel] labtec webcam for notebooks
In-Reply-To: <20080303230034.A2AA57BB0A@ws5-10.us4.outblaze.com>
References: <20080303230034.A2AA57BB0A@ws5-10.us4.outblaze.com>
Message-ID: <200803040218.10286.Serge.A.S@tochka.ru>

> hi!
>
> i guess the labtec webcam (logitech?) i have here on my desk
> (0x046d/0x08aa) isn't supported by the uvc driver, as it claims
> bInterfaceClass       255 Vendor Specific Class
>       bInterfaceSubClass    255 Vendor Specific Subclass
>       bInterfaceProtocol    255 Vendor Specific Protocol
>
> it uses the same bridge/chip as the logitech quickcam IM (Zc0302 /
> Hdcs2020) says http://mxhaard.free.fr/spca5xx.html
>
AFAIK in QC IM used  Tas5130c sensor, but your webcam should work with 
gspcav1/2 in all cases.

-- 
Regards,
Serge A. Suchkov
--
"Pascal is not a high-level language."
		-- Steven Feiner


From masc at operamail.com  Tue Mar  4 17:42:44 2008
From: masc at operamail.com (martin schneebacher)
Date: Tue, 4 Mar 2008 17:42:44 +0100
Subject: [Linux-uvc-devel] labtec webcam for notebooks
Message-ID: <20080304164244.6A376CBE77@ws5-11.us4.outblaze.com>


> ----- Original Message -----
> From: "Serge A. Suchkov" <Serge.A.S at tochka.ru>
> To: linux-uvc-devel at lists.berlios.de
> Subject: Re: [Linux-uvc-devel] labtec webcam for notebooks
> Date: Tue, 4 Mar 2008 02:18:10 +0300

> > it uses the same bridge/chip as the logitech quickcam IM (Zc0302 /
> > Hdcs2020) says http://mxhaard.free.fr/spca5xx.html
> >
> AFAIK in QC IM used  Tas5130c sensor, but your webcam should work with
> gspcav1/2 in all cases.

yes, it works on my desktop with gspcav1 but on my openwrt device i have some troubles. that's why i thought about trying uvc... bad luck.

thanx&bye...masc.



-- 
_______________________________________________
Surf the Web in a faster, safer and easier way:
Download Opera 9 at http://www.opera.com

Powered by Outblaze


From rasasi78 at gmail.com  Wed Mar  5 21:04:42 2008
From: rasasi78 at gmail.com (=?UTF-8?B?UmHDumwgU8OhbmNoZXogU2lsZXM=?=)
Date: Wed, 05 Mar 2008 21:04:42 +0100
Subject: [Linux-uvc-devel] Black image on videoconferencing apps.
Message-ID: <fqmuds$e3c$1@ger.gmane.org>

  Hello All:

  Once I have a webcam and also a driver that makes it useful, I
thought: "Why not doing videconferencing?" :)

  And that's what I did. I've used skype and kopete using MSN protocol. I
started with kopete, and I had sort of the same problem. At first I blamed
kopete, but since the video conference was not very reliable there I moved
to skype.

  On skype I had the same problem and is this: I can start my video and the
other end will see it, but after a randon time ranging from little seconds
to little minutes, the image I sent (and that I'm able to see) goes to
black unconditionally.

  I'm using 2.6.24.3 with the latest svn driver. This is the skype output:

Skype V4L2: Failed to change capture framerate (15)
Skype V4L2: Failed to change capture framerate (15)
Starting the process...
Skype Xv: Xv ports available: 16
Skype XShm: XShm support enabled
Skype Xv: Using Xv port 75

  This looks like an initialization sequence, after which the video is
working, so I can't get any conclusion from it. It's only after that
undetermined time where it stops working.

  In this case I loaded the uvcvideo module with trace parameter set to 1 so
I expect some debugging info from the driver. This is what I got from
dmesg:

uvcvideo: Probing generic UVC device 3
uvcvideo: Found UVC 1.00 device Chicony USB 2.0 Camera (04f2:b008)
uvcvideo: Scanning UVC chain: OT 2 <- XU 4 <- PU 3 <- IT 1
uvcvideo: Found a valid video chain (1 -> 2).
uvcvideo: UVC device initialized.
usbcore: registered new interface driver uvcvideo
USB Video Class driver (v0.1.0)
compat_ioctl32: v4l2 ioctl VIDIOC_S_PARM, dir=rw (0xc0cc5616)
compat_ioctl32: v4l2 ioctl VIDIOC_S_PARM, dir=rw (0xc0cc5616)

  After this, same as before the video was working at this point, but stops
working after some time. Along the video conference skype seems to try to
reinitialize webcam, it starts working again, but then it goes to black
again.

  I'm willing to provide any information you need, perform any test or try
any patch. Any pointer would be appreciated.

  Thanks for the hard work!

  Regards,
-- 
     Ra?l S?nchez Siles
----->Proud Debian user<-----
Linux registered user #416098



From rasasi78 at gmail.com  Fri Mar  7 18:40:25 2008
From: rasasi78 at gmail.com (=?UTF-8?B?UmHDumwgU8OhbmNoZXogU2lsZXM=?=)
Date: Fri, 07 Mar 2008 18:40:25 +0100
Subject: [Linux-uvc-devel] Black image on videoconferencing apps.
References: <fqmuds$e3c$1@ger.gmane.org>
Message-ID: <fqrunc$sqq$1@ger.gmane.org>

  Hello All:

Ra?l S?nchez Siles wrote:

>   Hello All:
> 
>   On skype I had the same problem and is this: I can start my video and
>   the
> other end will see it, but after a randon time ranging from little seconds
> to little minutes, the image I sent (and that I'm able to see) goes to
> black unconditionally.
> 
>   After this, same as before the video was working at this point, but
>   stops
> working after some time. Along the video conference skype seems to try to
> reinitialize webcam, it starts working again, but then it goes to black
> again.
> 
>   I'm willing to provide any information you need, perform any test or try
> any patch. Any pointer would be appreciated.
> 
  For the moment I thought using strace would be helpful. I did it for a
kopete session. I went to preferences, go to the camera preview settings
where I can see the camera input till once the image vanishes (the problem)
I stopped the strace. The attached file is an excerpt of the output, last
lines should represent where the camera(or the driver) is sending a totally
black image.

  Meanwhile dmesg throwed some different output when using kopete:
uvcvideo: Failed to query (1) UVC control 2 (unit 3) : -32 (exp. 2).
uvcvideo: Failed to query (1) UVC control 2 (unit 3) : -32 (exp. 2).
uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
uvcvideo: Failed to query (1) UVC control 2 (unit 3) : -32 (exp. 2).
uvcvideo: Failed to query (1) UVC control 2 (unit 3) : -32 (exp. 2).
uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
uvcvideo: Failed to query (1) UVC control 2 (unit 3) : -32 (exp. 2).
uvcvideo: Failed to query (1) UVC control 2 (unit 3) : -32 (exp. 2).

  Well, for the moment is all I can think may help to find where the issue
could be. If you have any idea, please let me know.

  Thanks.

-- 
     Ra?l S?nchez Siles
----->Proud Debian user<-----
Linux registered user #416098
-------------- next part --------------
A non-text attachment was scrubbed...
Name: kopete_cam.strace.gz
Type: application/x-gzip
Size: 4675 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080307/d6186b6e/attachment.bin>

From jehan.procaccia at it-sudparis.eu  Sun Mar  9 12:40:17 2008
From: jehan.procaccia at it-sudparis.eu (jehan procaccia)
Date: Sun, 09 Mar 2008 12:40:17 +0100
Subject: [Linux-uvc-devel] Philips SPC 1000NC Webcam and VideoLan v4l2
Message-ID: <47D3CCA1.3000007@it-sudparis.eu>

Hello,

I cannot get videolan (vlc) capture from my philips SPC 1000NC Webcam.
I did install fom atrpms repo uvcvideo drivers which seems to load fine, 
and do works fine in the ekiga application :-) . I can see the captured 
video in ekiga by selectin v4l2 manager (not v4l !) . I suspect thet vlc 
isn't loading v4l2 or is searching for capabilities not defined ? If 
anyone did capture video from videolan with that webcam, or have an idao 
on my problem, please let me know.

thanks.

PS: I suspect it is related to problem mention here:
http://lists.berlios.de/pipermail/linux-uvc-devel/2007-May/001708.html

details below:

[root at localhost ~]# lsusb
Bus 001 Device 002: ID 0471:0332 Philips
Bus 001 Device 001: ID 0000:0000 

[root at localhost ~]# lsmod | grep vid
video                  20177  0
output                  6721  1 video
uvcvideo               47620  0
compat_ioctl32          5185  1 uvcvideo
videodev               27713  1 uvcvideo
v4l1_compat            15813  2 uvcvideo,videodev
v4l2_common            18497  2 uvcvideo,videodev

[root at localhost ~]# v4l-info

### v4l2 device info [/dev/video0] ###
general info
    VIDIOC_QUERYCAP
        driver                  : "uvcvideo"
        card                    : "Philips SPC 1000NC Webcam"
        bus_info                : "0000:00:07.2"
        version                 : 0.1.0
        capabilities            : 0x4000001 [VIDEO_CAPTURE,STREAMING]
...

[root at localhost ~]# rpm -qa | grep uvc
uvc-kmdl-2.6.24.3-12.fc8-svn_r158-1.fc8
uvc-svn_r158-1.fc8
[root at localhost ~]# cat /etc/redhat-release
Fedora release 8 (Werewolf)
[root at localhost ~]# uname -r
2.6.24.3-12.fc8


[root at localhost ~]# vlc -v v4l2:///dev/video0

[00000326] main demuxer warning: no access_demux module matched "v4l2"
[00000327] vcd access error: could not read TOCHDR
[00000327] vcd access error: no movie tracks found
[00000327] vcdx access warning: error in ioctl CDROMREADTOCHDR: Invalid 
argument

[00000327] vcdx access warning: error reading PVD sector (16) error -1
[00000327] access_file access error: file /dev/video0 is empty, aborting
[00000327] cdda access error: could not read TOCHDR
[00000327] cdda access error: no audio tracks found
[00000327] access_gnomevfs access warning: cannot parse MRL 
v4l2:///dev/video0 or unsupported protocol
[00000327] cddax access warning: error in ioctl CDROMREADTOCHDR: Invalid 
argument

[00000327] cddax access warning: error in ioctl CDROMREADTOCHDR: Invalid 
argument

[00000327] cddax access error: Disc seems not to be CD-DA. libcdio 
reports it is Error in getting information
[00000327] main access warning: no access2 module matching "v4l2" could 
be loaded
[00000324] main input error: no suitable access module for 
`v4l2:///dev/video0'
[00000315] main playlist: nothing to play
[00000315] main playlist: stopping playback



From m.m.chitchian at student.tudelft.nl  Mon Mar 10 16:20:51 2008
From: m.m.chitchian at student.tudelft.nl (Mehdi Chitchian)
Date: Mon, 10 Mar 2008 16:20:51 +0100
Subject: [Linux-uvc-devel] Capturing from two philips spc520nc webcams
Message-ID: <47D551D3.9040903@student.tudelft.nl>

Hi,

I'm trying to capture from two Philips SPC520NC webcams on a machine 
with a single USB2 controller. However, launching the second instance of 
luvcview for the second webcam fails with 'Unable to start capture: 28, 
Error grabbing' even with the lowest resolution setting. As far as I 
know, error 28 indicates that there is not sufficient bandwidth 
available. But the combination of a single Philips SPC520NC and a 
Logitech Quickcam Pro 5000 works perfectly on the same machine.

I ran luvcview with the following command: './luvcview -f yuv -s 320x240 
-i 15 -d /dev/videoX'. I tested with the linux-uvc driver shipped with 
debian etch as well as the latest version from svn (r193). I have 
attached the lsusb output for both webcams.

Thanks,
-- 
Mehdi Chitchian
Faculty of Electrical Engineering, Mathematics and Computer Science
Delft University of Technology
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: philips_spc520nc.txt
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080310/12fcd12d/attachment.txt>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: logitech_quickcam_pro_5000.txt
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080310/12fcd12d/attachment-0001.txt>

From volker at thalreit.de  Sun Mar  9 18:57:59 2008
From: volker at thalreit.de (Volker Jahns)
Date: Sun, 09 Mar 2008 18:57:59 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 9000 will not work on
 ubuntu 7.10 when using skype or camorama
Message-ID: <47D42527.8050503@thalreit.de>

Error description:

- video is garbled in skype ( video image is striped, sync problem? see 
attached screenshot)
- no video in camorama, error message on screen "Could not connect to 
video device (/dev/video0). Please check connection"

Tried several modules:
- distribution module (version 1.0.1)
- SVN checked out module ( SVN r186)

lucview produces video of good quality ( Windows XP is better 
though).
Using a Philips Vesta Pro webcam on same distribution and computer works 
well. Running the Logitech cam under Windows XP Home edition is fine, too.

Any help is much appreciated.





-------------- next part --------------
A non-text attachment was scrubbed...
Name: skpye-video-garbled.png
Type: image/png
Size: 177391 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080309/b4cc3d0f/attachment.png>

From tompoe at fngi.net  Mon Mar 10 17:28:02 2008
From: tompoe at fngi.net (Tom Poe)
Date: Mon, 10 Mar 2008 11:28:02 -0500
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 9000 will not work on
 ubuntu 7.10 when using skype or camorama
In-Reply-To: <47D42527.8050503@thalreit.de>
References: <47D42527.8050503@thalreit.de>
Message-ID: <47D56192.8080306@fngi.net>

Last time I checked, we're still waiting for this model to be 
supported.  I have video, using luvcview, and use cli to create recording:
1] create webcam file:  ffmpeg -f video4linux2 -s 320x240 -i /dev/video0 
-f oss -ac 2 -i /dev/dsp -f mp4 a.mp4
2]  convert a.mp4 to something standard:  ffmpeg -i a.mp4 -vcodec 
rawvideo b.avi
3]  convert and scale to standard:   mencoder b.avi -ovc lavc -lavcopts 
vcodec=mpeg4 -vf scale=320:240 -oac pcm -o c320x240.avi
4] merge two files:  avimerge -o d.avi -i title.avi c320x240.avi

* NOTE
The title clip is the result of this command:

mencoder movie.avi -ovc lavc -lavcopts vcodec=mpeg4 -vf scale=320:240 
-oac pcm -o movie320x240.avi

avimerge -o f.avi -i e.avi c320x240.avi

The above notes are not finalized approach.  Still experimenting to 
figure out easy steps to get from webcam to youtube .
Tom



Volker Jahns wrote:
> Error description:
>
> - video is garbled in skype ( video image is striped, sync problem? 
> see attached screenshot)
> - no video in camorama, error message on screen "Could not connect to 
> video device (/dev/video0). Please check connection"
>
> Tried several modules:
> - distribution module (version 1.0.1)
> - SVN checked out module ( SVN r186)
>
> lucview produces video of good quality ( Windows XP is better though).
> Using a Philips Vesta Pro webcam on same distribution and computer 
> works well. Running the Logitech cam under Windows XP Home edition is 
> fine, too.
>
> Any help is much appreciated.
>
>
>
>
>
>
> ------------------------------------------------------------------------
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>   



From richard at 2008.atterer.net  Mon Mar 10 17:55:54 2008
From: richard at 2008.atterer.net (Richard Atterer)
Date: Mon, 10 Mar 2008 17:55:54 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 9000 will not work
	on	ubuntu 7.10 when using skype or camorama
In-Reply-To: <47D56192.8080306@fngi.net>
References: <47D42527.8050503@thalreit.de> <47D56192.8080306@fngi.net>
Message-ID: <20080310165554.GA28524@fluff.lan>

On Mon, Mar 10, 2008 at 11:28:02AM -0500, Tom Poe wrote:
> Last time I checked, we're still waiting for this model to be 
> supported.

Nope, my QuickCam Pro 9000 works fine for video with Skype - or did 
sometime before Christmas, I haven't checked lately.

Cheers,

  Richard

-- 
  __   _
  |_) /|  Richard Atterer     |  GnuPG key: 888354F7
  | \/?|  http://atterer.net  |  08A9 7B7D 3D13 3EF2 3D25  D157 79E6 F6DC 8883 54F7
  ? '` ?


From tompoe at fngi.net  Mon Mar 10 18:04:29 2008
From: tompoe at fngi.net (Tom Poe)
Date: Mon, 10 Mar 2008 12:04:29 -0500
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 9000 will not work	on
 ubuntu 7.10 when using skype or camorama
In-Reply-To: <20080310165554.GA28524@fluff.lan>
References: <47D42527.8050503@thalreit.de> <47D56192.8080306@fngi.net>
	<20080310165554.GA28524@fluff.lan>
Message-ID: <47D56A1D.60905@fngi.net>

Richard Atterer wrote:
> On Mon, Mar 10, 2008 at 11:28:02AM -0500, Tom Poe wrote:
>   
>> Last time I checked, we're still waiting for this model to be 
>> supported.
>>     
>
> Nope, my QuickCam Pro 9000 works fine for video with Skype - or did 
> sometime before Christmas, I haven't checked lately.
>
> Cheers,
>
>   Richard
>
>   
Please check and share specifics.  I'm running FC8.  Need to know what 
you're running, and which Skype version you're running.
Thanks, Tom


From philipp at kolmann.at  Mon Mar 10 19:49:55 2008
From: philipp at kolmann.at (Philipp Kolmann)
Date: Mon, 10 Mar 2008 19:49:55 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 9000 will not work on
	ubuntu 7.10 when using skype or camorama
In-Reply-To: <47D42527.8050503@thalreit.de>
References: <47D42527.8050503@thalreit.de>
Message-ID: <20080310184955.GA24759@kolmann.at>

> Any help is much appreciated.

Hi,

I had something similar. It took some time but it seems that my issue was that
the cam and a USB Headset were connected to the same usb hub and somehow that
was too much bandwidth (check with usbview).

I have changed the hubs, the cam and the headset are connected and now I don't
have any issue with the cam.

hth
Philipp


-- 
The more I learn about people, the more I like my dog!


From tompoe at fngi.net  Mon Mar 10 20:03:34 2008
From: tompoe at fngi.net (Tom Poe)
Date: Mon, 10 Mar 2008 14:03:34 -0500
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 9000 will not work on
 ubuntu 7.10 when using skype or camorama
In-Reply-To: <20080310184955.GA24759@kolmann.at>
References: <47D42527.8050503@thalreit.de> <20080310184955.GA24759@kolmann.at>
Message-ID: <47D58606.8010808@fngi.net>

Philipp Kolmann wrote:
>> Any help is much appreciated.
>>     
>
> Hi,
>
> I had something similar. It took some time but it seems that my issue was that
> the cam and a USB Headset were connected to the same usb hub and somehow that
> was too much bandwidth (check with usbview).
>
> I have changed the hubs, the cam and the headset are connected and now I don't
> have any issue with the cam.
>
> hth
> Philipp
>
>
>   
What os are you running?  Are you able to record sound and video with 
luvcview?
Thanks, Tom


From richard at 2008.atterer.net  Mon Mar 10 20:31:14 2008
From: richard at 2008.atterer.net (Richard Atterer)
Date: Mon, 10 Mar 2008 20:31:14 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 9000 will not work
	on	ubuntu 7.10 when using skype or camorama
In-Reply-To: <20080310165554.GA28524@fluff.lan>
References: <47D42527.8050503@thalreit.de> <47D56192.8080306@fngi.net>
	<20080310165554.GA28524@fluff.lan>
Message-ID: <20080310193114.GA3398@vilya>

On Mon, Mar 10, 2008 at 05:55:54PM +0100, Richard Atterer wrote:
> On Mon, Mar 10, 2008 at 11:28:02AM -0500, Tom Poe wrote:
> > Last time I checked, we're still waiting for this model to be 
> > supported.
> 
> Nope, my QuickCam Pro 9000 works fine for video with Skype - or did 
> sometime before Christmas, I haven't checked lately.

OK, I've rechecked and it still works. I'm using Debian "testing", but with 
a vanilla 2.6.24 kernel built from kernel.org sources, and with uvcvideo 
from SVN; both SVN revisions 173 and the latest 193 work.

At least, I get a good picture when I press the "Test" button in Skype's 
preferences window. I haven't really been able to perform a video call with 
Skype so far, as it requires that the video chip supports two Xv overlays. 
My (fairly old) laptop only supports one, so during the call, I only ever 
got to see myself and not the other side.

The webcam is connected directly to the laptop.

<snip little rant about Skype developers not being allowed to look at OSS 
due to company policy, and thus making more mistakes during the Skype for 
Linux implementation than necessary.>

Cheers,

  Richard

-- 
  __   _
  |_) /|  Richard Atterer     |  GnuPG key: 888354F7
  | \/?|  http://atterer.net  |  08A9 7B7D 3D13 3EF2 3D25  D157 79E6 F6DC 8883 54F7
  ? '` ?


From philipp at kolmann.at  Mon Mar 10 21:45:24 2008
From: philipp at kolmann.at (Philipp Kolmann)
Date: Mon, 10 Mar 2008 21:45:24 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 9000 will not work on
	ubuntu 7.10 when using skype or camorama
In-Reply-To: <47D58606.8010808@fngi.net>
References: <47D42527.8050503@thalreit.de> <20080310184955.GA24759@kolmann.at>
	<47D58606.8010808@fngi.net>
Message-ID: <20080310204524.GA1502@kolmann.at>

On Mon, Mar 10, 2008 at 02:03:34PM -0500, Tom Poe wrote:
> What os are you running?

Debian sid.

> Are you able to record sound and video with luvcview?

It took me quite long to see that the problem seems to be a bandwidth issue
when sound and cam is beeing used by skype.

luvcview always worked alone. It also works, if I only use sound or OR
sound-in and webcam. But with all 3 (webcam, sound-out AND sound-in) I get a
bad image.

But I solved it for me now.

Philipp

-- 
The more I learn about people, the more I like my dog!


From tompoe at fngi.net  Mon Mar 10 21:50:59 2008
From: tompoe at fngi.net (Tom Poe)
Date: Mon, 10 Mar 2008 15:50:59 -0500
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 9000 will not work	on
 ubuntu 7.10 when using skype or camorama
In-Reply-To: <20080310193114.GA3398@vilya>
References: <47D42527.8050503@thalreit.de>
	<47D56192.8080306@fngi.net>	<20080310165554.GA28524@fluff.lan>
	<20080310193114.GA3398@vilya>
Message-ID: <47D59F33.7090209@fngi.net>

Richard Atterer wrote:
> On Mon, Mar 10, 2008 at 05:55:54PM +0100, Richard Atterer wrote:
>   
>> On Mon, Mar 10, 2008 at 11:28:02AM -0500, Tom Poe wrote:
>>     
>>> Last time I checked, we're still waiting for this model to be 
>>> supported.
>>>       
>> Nope, my QuickCam Pro 9000 works fine for video with Skype - or did 
>> sometime before Christmas, I haven't checked lately.
>>     
>
> OK, I've rechecked and it still works. I'm using Debian "testing", but with 
> a vanilla 2.6.24 kernel built from kernel.org sources, and with uvcvideo 
> from SVN; both SVN revisions 173 and the latest 193 work.
>
> At least, I get a good picture when I press the "Test" button in Skype's 
> preferences window. I haven't really been able to perform a video call with 
> Skype so far, as it requires that the video chip supports two Xv overlays. 
> My (fairly old) laptop only supports one, so during the call, I only ever 
> got to see myself and not the other side.
>
> The webcam is connected directly to the laptop.
>
> <snip little rant about Skype developers not being allowed to look at OSS 
> due to company policy, and thus making more mistakes during the Skype for 
> Linux implementation than necessary.>
>
> Cheers,
>
>   Richard
>
>   
Thanks, much.  Good info.
Tom


From sboyce at blueyonder.co.uk  Mon Mar 10 23:37:15 2008
From: sboyce at blueyonder.co.uk (Sid Boyce)
Date: Mon, 10 Mar 2008 22:37:15 +0000
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 9000 will not work on
 ubuntu 7.10 when using skype or camorama (Volker Jahns)
In-Reply-To: <mailman.2999.1205165478.29873.linux-uvc-devel@lists.berlios.de>
References: <mailman.2999.1205165478.29873.linux-uvc-devel@lists.berlios.de>
Message-ID: <47D5B81B.3030106@blueyonder.co.uk>

linux-uvc-devel-request at lists.berlios.de wrote:

> Message: 1
> Date: Sun, 09 Mar 2008 18:57:59 +0100
> From: Volker Jahns <volker at thalreit.de>
> Subject: [Linux-uvc-devel] Logitech QuickCam Pro 9000 will not work on
> 	ubuntu 7.10 when using skype or camorama
> To: linux-uvc-devel at lists.berlios.de
> Cc: Gabriele Thannbichler <thannbichlerlanger at web.de>
> Message-ID: <47D42527.8050503 at thalreit.de>
> Content-Type: text/plain; charset="iso-8859-15"
> 
> Error description:
> 
> - video is garbled in skype ( video image is striped, sync problem? see
> attached screenshot)
> - no video in camorama, error message on screen "Could not connect to
> video device (/dev/video0). Please check connection"
> 
> Tried several modules:
> - distribution module (version 1.0.1)
> - SVN checked out module ( SVN r186)
> 
> lucview produces video of good quality ( Windows XP is better
> though).
> Using a Philips Vesta Pro webcam on same distribution and computer works
> well. Running the Logitech cam under Windows XP Home edition is fine, too.
> 
> Any help is much appreciated.
> 

I have no Ubuntu box using uvc or the webcam. If it's kernel related, I 
have had 2 Pro 9000's running under several 2.6.24-git and 2.6.25-rc 
kernels, latest 2.6.25-rc4-git3. openSUSE 10.3 and 11.0 Alpha2 in each 
case.
uvc svn Revision: 193 currently.
When I first installed 10.3 on a relative's box with 128M on board 
Unichrome video, I got camera freezes and crashes on accasions in skype. 
Installing a NVidia FX5500 solved that.
Regards
Sid.
-- 
Sid Boyce ... Hamradio License G3VBV, Licensed Private Pilot
Emeritus IBM/Amdahl Mainframes and Sun/Fujitsu Servers Tech Support 
Specialist, Cricket Coach
Microsoft Windows Free Zone - Linux used for all Computing Tasks



From laurent.pinchart at skynet.be  Mon Mar 10 23:51:50 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 10 Mar 2008 23:51:50 +0100
Subject: [Linux-uvc-devel] Supported webcam
In-Reply-To: <1205052728.6260.5.camel@Pavilion.famklein.net>
References: <1205052728.6260.5.camel@Pavilion.famklein.net>
Message-ID: <200803102351.50851.laurent.pinchart@skynet.be>

Hi Hans,

On Sunday 09 March 2008, Hans-Joachim Klein wrote:
> Hi,
> I found that the webcam of my HP Pavilion dv9560eg is supported by your
> driver.
>
> Outout of lsusb:
> Bus 002 Device 003: ID 04f2:b023 Chicony Electronics Co., Ltd

Thank you for the report. Could you please send me mail with the output 
of 'lsusb -v -d 04f2:b023' (using usbutils 0.72 or newer, use the latest 
version - 0.73 - if possible) ?

> The webcam works fine with ekiga, but not with xawtv:
>
> [Pavilion:~]$ xawtv -nodga
> This is xawtv-3.95, running on Linux/x86_64 (2.6.24.3-12.fc8)
> X Error of failed request:  XF86DGANoDirectVideoMode
>   Major opcode of failed request:  140 (XFree86-DGA)
>   Minor opcode of failed request:  1 (XF86DGAGetVideoLL)
>   Serial number of failed request:  13
>   Current serial number in output stream:  13
> ioctl: VIDIOC_G_STD(std=0x0 []): Das Argument ist ung?ltig
> ioctl: VIDIOC_S_STD(std=0x0 []): Das Argument ist ung?ltig
> ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0
> [];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.s
>econds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0
>;memory=unknown): Das Argument ist ung?ltig

That's a known bug in xawtv 3.95. xawtv-4 should work better.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Mar 11 00:14:21 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 11 Mar 2008 00:14:21 +0100
Subject: [Linux-uvc-devel] Capturing from two philips spc520nc webcams
In-Reply-To: <47D551D3.9040903@student.tudelft.nl>
References: <47D551D3.9040903@student.tudelft.nl>
Message-ID: <200803110014.21425.laurent.pinchart@skynet.be>

Hi Mehdi,

On Monday 10 March 2008, Mehdi Chitchian wrote:
> Hi,
>
> I'm trying to capture from two Philips SPC520NC webcams on a machine
> with a single USB2 controller. However, launching the second instance of
> luvcview for the second webcam fails with 'Unable to start capture: 28,
> Error grabbing' even with the lowest resolution setting. As far as I
> know, error 28 indicates that there is not sufficient bandwidth
> available. But the combination of a single Philips SPC520NC and a
> Logitech Quickcam Pro 5000 works perfectly on the same machine.

That's because the SPC520NC require more bandwidth than the QC Pro 5000. 
There's not much I can't do about that, the error reported by the driver 
isn't a bug. sorry.

> I ran luvcview with the following command: './luvcview -f yuv -s 320x240
> -i 15 -d /dev/videoX'. I tested with the linux-uvc driver shipped with
> debian etch as well as the latest version from svn (r193). I have
> attached the lsusb output for both webcams.

Best regards,

Laurent Pinchart


From hector_hugo_aviles at hotmail.com  Tue Mar 11 00:19:10 2008
From: hector_hugo_aviles at hotmail.com (=?iso-8859-1?Q?H=E9ctor_Hugo_Avil=E9s_Arriaga?=)
Date: Mon, 10 Mar 2008 17:19:10 -0600
Subject: [Linux-uvc-devel] Image format on Luvcview
Message-ID: <BLU137-W177E502E5EB7BCDF1A0D4FD90E0@phx.gbl>


Dear all,

I'm a newbie in all this webcam stuff and trying the Luvcview source code. 
Luvcview is useful to me because it allows to display images from two videcameras at the
same time. Doing the same with OpenCV retrieves corrupted images. 

I want to access the pixel information. I'm able to convert 
YUYV format to 24RGB easily using the Pyuv422torgb24 function,
and the display the images using a 24bits BGR format directly.

Unfortunately, I cannot do the same with the MJPEG format.
I realize that the image is decompressed into the
videoIn->framebuffer buffer before displaying it, but I don't know how to access 
the pixel information correctly. 
I have tried to copy the image into an OpenCV buffer in this way:

opencv->imageData[curr_pos] = videoIn->framebuffer[curr_pos++]; // B
opencv->imageData[curr_pos] = videoIn->framebuffer[curr_pos++]; // G
opencv->imageData[curr_pos] = videoIn->framebuffer[curr_pos++]; // R

However, all I see are vertical lines and 
my silhouette repeated three times on the image.
As you can see,  I'm assuming this information is stored in BGR format
in the videoIn->framebuffer. 

The questions are: which is the correct form to access the information captured with
the MJPEG format?  and, using this format speeds up the capturing process after all?

Best regards,
Hector. 


_________________________________________________________________
Participa en nanometrajes y gana grandes premios 
http://cine.prodigymsn.com/nanometraje

From volker at thalreit.de  Tue Mar 11 12:28:05 2008
From: volker at thalreit.de (Volker Jahns)
Date: Tue, 11 Mar 2008 12:28:05 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Pro 9000 will not work	on
 ubuntu 7.10 when using skype or camorama
In-Reply-To: <20080310193114.GA3398@vilya>
References: <47D42527.8050503@thalreit.de>
	<47D56192.8080306@fngi.net>	<20080310165554.GA28524@fluff.lan>
	<20080310193114.GA3398@vilya>
Message-ID: <47D66CC5.9050202@thalreit.de>

Richard Atterer wrote:
> On Mon, Mar 10, 2008 at 05:55:54PM +0100, Richard Atterer wrote:
>> On Mon, Mar 10, 2008 at 11:28:02AM -0500, Tom Poe wrote:
>>> Last time I checked, we're still waiting for this model to be 
>>> supported.
>> Nope, my QuickCam Pro 9000 works fine for video with Skype - or did 
>> sometime before Christmas, I haven't checked lately.
> 
> OK, I've rechecked and it still works. I'm using Debian "testing", but with 
> a vanilla 2.6.24 kernel built from kernel.org sources, and with uvcvideo 
> from SVN; both SVN revisions 173 and the latest 193 work.
> 
> At least, I get a good picture when I press the "Test" button in Skype's 
> preferences window. I haven't really been able to perform a video call with 
> Skype so far, as it requires that the video chip supports two Xv overlays. 

Yes, in skype "test mode" the video runs superfine ( beta version 2.0, skype 
production release can't do video at all). The video becomes garbled when skype 
is _used_ ( i.e. if a party is called or being called).

We'll check on the bandwidth issue what Philipp stated.

-- 
Volker Jahns, volker at thalreit.de


From philipp at kolmann.at  Tue Mar 11 16:55:40 2008
From: philipp at kolmann.at (Philipp Kolmann)
Date: Tue, 11 Mar 2008 16:55:40 +0100
Subject: [Linux-uvc-devel] Logitech 9000 and 640@30fps
Message-ID: <20080311155540.GA5412@kolmann.at>

hi,

I just need to share this somewhere.

I just wondered why my Logi 9k cam suddenly gave me 30fps at 640x420 even in
modest light (Skype and luvcview).

Then I remembered. I tried this cam with latest logitech drivers with a
vmware-XP. So it seems that the logi drivers flash a new firmware into the cam
and enable some logic.

Is there any chance to get this firmware also loaded from linux?

Thanks
Philipp

-- 
The more I learn about people, the more I like my dog!


From richard at 2008.atterer.net  Tue Mar 11 17:09:41 2008
From: richard at 2008.atterer.net (Richard Atterer)
Date: Tue, 11 Mar 2008 17:09:41 +0100
Subject: [Linux-uvc-devel] Logitech 9000 and 640@30fps
In-Reply-To: <20080311155540.GA5412@kolmann.at>
References: <20080311155540.GA5412@kolmann.at>
Message-ID: <20080311160941.GA11273@fluff.lan>

On Tue, Mar 11, 2008 at 04:55:40PM +0100, Philipp Kolmann wrote:
> I just wondered why my Logi 9k cam suddenly gave me 30fps at 640x420 even 
> in modest light (Skype and luvcview).

Maybe because some program switched off auto-exposure and used a hardwired 
30fps one, together with an appropriate gain for your lighting conditions?

Cheers,

  Richard

-- 
  __   _
  |_) /|  Richard Atterer     |  GnuPG key: 888354F7
  | \/?|  http://atterer.net  |  08A9 7B7D 3D13 3EF2 3D25  D157 79E6 F6DC 8883 54F7
  ? '` ?


From philipp at kolmann.at  Tue Mar 11 17:16:18 2008
From: philipp at kolmann.at (Philipp Kolmann)
Date: Tue, 11 Mar 2008 17:16:18 +0100
Subject: [Linux-uvc-devel] Logitech 9000 and 640@30fps
In-Reply-To: <20080311160941.GA11273@fluff.lan>
References: <20080311155540.GA5412@kolmann.at>
	<20080311160941.GA11273@fluff.lan>
Message-ID: <20080311161618.GB5412@kolmann.at>

On Tue, Mar 11, 2008 at 05:09:41PM +0100, Richard Atterer wrote:
> On Tue, Mar 11, 2008 at 04:55:40PM +0100, Philipp Kolmann wrote:
> > I just wondered why my Logi 9k cam suddenly gave me 30fps at 640x420 even 
> > in modest light (Skype and luvcview).
> 
> Maybe because some program switched off auto-exposure and used a hardwired 
> 30fps one, together with an appropriate gain for your lighting conditions?

Well I just tested it again. After I unplug the cam and replug it, it works as
expected on 10-15 fps.

Then I attached it one to the windows with logitech drivers and suddenly it
works much better.

Well you could be right with the settings. How can I compare the settings?
Is there a dump tool around?

thanks
Philipp

-- 
The more I learn about people, the more I like my dog!


From philipp at kolmann.at  Tue Mar 11 17:41:07 2008
From: philipp at kolmann.at (Philipp Kolmann)
Date: Tue, 11 Mar 2008 17:41:07 +0100
Subject: [Linux-uvc-devel] Logitech 9000 and 640@30fps
In-Reply-To: <20080311161618.GB5412@kolmann.at>
References: <20080311155540.GA5412@kolmann.at>
	<20080311160941.GA11273@fluff.lan>
	<20080311161618.GB5412@kolmann.at>
Message-ID: <20080311164107.GA8630@kolmann.at>

On Tue, Mar 11, 2008 at 05:16:18PM +0100, Philipp Kolmann wrote:
> On Tue, Mar 11, 2008 at 05:09:41PM +0100, Richard Atterer wrote:
> > On Tue, Mar 11, 2008 at 04:55:40PM +0100, Philipp Kolmann wrote:
> > > I just wondered why my Logi 9k cam suddenly gave me 30fps at 640x420 even 
> > > in modest light (Skype and luvcview).
> > 
> > Maybe because some program switched off auto-exposure and used a hardwired 
> > 30fps one, together with an appropriate gain for your lighting conditions?
> 
> Well I just tested it again. After I unplug the cam and replug it, it works as
> expected on 10-15 fps.
> 
> Then I attached it one to the windows with logitech drivers and suddenly it
> works much better.
> 
> Well you could be right with the settings. How can I compare the settings?


I looked at luvcview -l -f yuv -i 30 -s 640x480:

With the windows drivers once touch the cam:

V4L2_CID_BASE         (predefined controls):
 index:9963776    name:Brightness                       type:1 min:0     max:255   step:1     def:128   now:128 
 index:9963777    name:Contrast                         type:1 min:0     max:255   step:1     def:32    now:33 
 index:9963778    name:Saturation                       type:1 min:0     max:255   step:1     def:32    now:32 
 index:9963788    name:White Balance Temperature, Auto  type:2 min:0     max:255   step:1     def:1     now:1 
 index:9963795    name:Gain                             type:1 min:0     max:255   step:1     def:0     now:255 
V4L2_CID_PRIVATE_BASE (driver specific controls):
 Clean Up done Quit 

Here I get 32fps at 640.

After power cycling the cam, I get the defaults from luvcview -l and 5fps.
After setting the Gain back to 255 the cam still only got me 5fps.
I haven't found how to disable auto-exposure so far.

Sorry for the spam
Philipp

-- 
The more I learn about people, the more I like my dog!


From m.m.chitchian at student.tudelft.nl  Wed Mar 12 02:12:05 2008
From: m.m.chitchian at student.tudelft.nl (mehdi chitchian)
Date: Wed, 12 Mar 2008 02:12:05 +0100
Subject: [Linux-uvc-devel] Capturing from two philips spc520nc webcams
In-Reply-To: <200803110014.21425.laurent.pinchart@skynet.be>
References: <47D551D3.9040903@student.tudelft.nl>
	<200803110014.21425.laurent.pinchart@skynet.be>
Message-ID: <47D72DE5.3010302@student.tudelft.nl>

Hi Laurent,

Laurent Pinchart wrote:
> Hi Mehdi,
> 
> On Monday 10 March 2008, Mehdi Chitchian wrote:
>>
>> I'm trying to capture from two Philips SPC520NC webcams on a machine
>> with a single USB2 controller. However, launching the second instance of
>> luvcview for the second webcam fails with 'Unable to start capture: 28,
>> Error grabbing' even with the lowest resolution setting. As far as I
>> know, error 28 indicates that there is not sufficient bandwidth
>> available. But the combination of a single Philips SPC520NC and a
>> Logitech Quickcam Pro 5000 works perfectly on the same machine.
> 
> That's because the SPC520NC require more bandwidth than the QC Pro 5000. 
> There's not much I can't do about that, the error reported by the driver 
> isn't a bug. sorry.
> 

Is it possible to force a certain bandwidth at the driver level? From 
what I understand from the uvc specification, certain parameters are 
used for bandwidth negotiation between the device and the host. 
Considering the fact that I am using the same settings for 
resolution/format/framerate, are there other parameters I can change to 
reduce the bandwidth?

Looking at the lsusb output for the philips webcam, I noticed strange 
values for dwMinBitRate and dwMaxBitRate. I don't know if this indicates 
a bug in the philips webcam.

Thanks,
-- 
Mehdi Chitchian
Faculty of Electrical Engineering, Mathematics and Computer Science
Delft University of Technology



From rasasi78 at gmail.com  Wed Mar 12 09:12:05 2008
From: rasasi78 at gmail.com (=?UTF-8?B?UmHDumwgU8OhbmNoZXogU2lsZXM=?=)
Date: Wed, 12 Mar 2008 09:12:05 +0100
Subject: [Linux-uvc-devel] Black image on videoconferencing apps.
References: <fqmuds$e3c$1@ger.gmane.org> <fqrunc$sqq$1@ger.gmane.org>
Message-ID: <fr839n$o77$1@ger.gmane.org>

  Hello again:

Ra?l S?nchez Siles wrote:

>   Hello All:
> 
> Ra?l S?nchez Siles wrote:
> 
>>   Hello All:
>> 
>>   On skype I had the same problem and is this: I can start my video and
>>   the
>> other end will see it, but after a randon time ranging from little
>> seconds to little minutes, the image I sent (and that I'm able to see)
>> goes to black unconditionally.
>> 
>>   After this, same as before the video was working at this point, but
>>   stops
>> working after some time. Along the video conference skype seems to try to
>> reinitialize webcam, it starts working again, but then it goes to black
>> again.
>> 
[...] 
>   Meanwhile dmesg throwed some different output when using kopete:
>   Well, for the moment is all I can think may help to find where the issue
> could be. If you have any idea, please let me know.
> 
>   Thanks.
> 

  I've reviewed the mailing list archive which is something that everybody
having a problem should do before posting and what I promise I'll do from
now on ;)

  I've seen that the trace parameter I had stated to the kernel module was
insufficient and I started over using trace=0xff. This time, the problem is
harder to reproduce. For the moment what I can attach is the dmesg output
containing the driver initialisation and some normal live capture dmesg
output. (uvcvideo.normal.gz)

  Since the camera is integrated in the laptop, I doubt it could be a noise
or cable quality. Also I think I'm using the ehci driver, but I'm attaching
the lsusb -vv output as well. (lsusb-vv.gz)

  I hope this could shed some light into the issue, but meanwhile I'll try
even harder to get a valid dmesg output when the camera stops working.

  Thanks and regards,

-- 
     Ra?l S?nchez Siles
----->Proud Debian user<-----
Linux registered user #416098
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lsusb-vv.gz
Type: application/x-gzip
Size: 2950 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080312/1072653f/attachment.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: uvcvideo.normal.gz
Type: application/x-gzip
Size: 1401 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080312/1072653f/attachment-0001.bin>

From fragabr at gmail.com  Wed Mar 12 19:46:01 2008
From: fragabr at gmail.com (=?ISO-8859-1?Q?D=E2niel?= Fraga)
Date: Wed, 12 Mar 2008 15:46:01 -0300
Subject: [Linux-uvc-devel] Logitech: Quickcam Pro 9000 x Orbit AF
Message-ID: <20080312154601.3549436a@tux.abusar.org.br>

	I compared the Logitech Quickcam Pro 9000 with the Logitech
Orbit AF and they're very similar, except that:

- Quickcam Pro 9000 has Snapshot Button 

- Orbit AF has Mechanical Pan+Tilt and the desktop stand

	As far as I understand, the snapshot button isn't supported yet
in uvcvideo, right? So, if it's true, it isn't a advantage right now.

	In the other hand, the "face tracking" must be supported in
software, and as far as I know, it doesn't exist yet in Linux, right?

	If I'm wrong, please correct me. I intend to use this webcam
with Kopete, Skype etc.

	So, what's your suggestion? Both webcams has the same
price. What do you think is the best deal for the money?

	Thank you very much!

-- 
Linux 2.6.24: Arr Matey! A Hairy Bilge Rat!
http://u-br.net http://www.abusar.org/FELIZ_2008.html




From shacky83 at gmail.com  Wed Mar 12 20:16:36 2008
From: shacky83 at gmail.com (shacky)
Date: Wed, 12 Mar 2008 20:16:36 +0100
Subject: [Linux-uvc-devel] uvcvideo driver modprobing problem
Message-ID: <7fedbc910803121216l556d404bucedb2adac3d0669a@mail.gmail.com>

Hi.
I'm trying to use the uvcvideo driver on my Ubuntu Gutsy 7.10 amd64.
When I type "modprobe uvcvideo" as root I get this error:

FATAL: Error inserting uvcvideo
(/lib/modules/2.6.22-14-generic/usb/media/uvcvideo.ko): Unknown symbol
in module, or unknown parameter (see dmesg)

And dmesg tells this:

[ 4317.113376] uvcvideo: disagrees about version of symbol
v4l_compat_translate_ioctl
[ 4317.113387] uvcvideo: Unknown symbol v4l_compat_translate_ioctl
[ 4317.113518] uvcvideo: disagrees about version of symbol video_devdata
[ 4317.113521] uvcvideo: Unknown symbol video_devdata
[ 4317.113780] uvcvideo: disagrees about version of symbol
video_unregister_device
[ 4317.113784] uvcvideo: Unknown symbol video_unregister_device
[ 4317.113873] uvcvideo: disagrees about version of symbol video_device_alloc
[ 4317.113876] uvcvideo: Unknown symbol video_device_alloc
[ 4317.113950] uvcvideo: disagrees about version of symbol video_register_device
[ 4317.113954] uvcvideo: Unknown symbol video_register_device
[ 4317.114112] uvcvideo: disagrees about version of symbol video_usercopy
[ 4317.114115] uvcvideo: Unknown symbol video_usercopy
[ 4317.114144] uvcvideo: disagrees about version of symbol video_device_release
[ 4317.114148] uvcvideo: Unknown symbol video_device_release

My kernel is 2.6.22-14-generic.

What's the problem?
Tank you very much for your help!
Bye.


From malo_mail at yahoo.it  Wed Mar 12 18:30:22 2008
From: malo_mail at yahoo.it (Malo)
Date: Wed, 12 Mar 2008 18:30:22 +0100
Subject: [Linux-uvc-devel] Hercules Dualpix HD Support
Message-ID: <200803121830.22953.malo_mail@yahoo.it>

I saw the Hercules Dualpix Exchange webcam in the support devices list.. how 
about his sister, the Hercules Dualpix HD? It is somehow supported? Thanks 
for your time..
Chiacchiera con i tuoi amici in tempo reale! 
 http://it.yahoo.com/mail_it/foot/*http://it.messenger.yahoo.com 



From bernhard.kleine at gmx.net  Wed Mar 12 21:41:18 2008
From: bernhard.kleine at gmx.net (Dr. Bernhard Kleine)
Date: Wed, 12 Mar 2008 21:41:18 +0100
Subject: [Linux-uvc-devel] Installation failure with kernel 2.6.24-1-686
	under Debian
Message-ID: <1205354478.5234.13.camel@amd2000bk.kleinedaheim>

Hallo,

I installed the latest debian version from unstable

 apt-cache policy linux-uvc-source
linux-uvc-source:
  Installiert:0.1.0.svn120-2
  M?gliche Pakete:0.1.0.svn120-2
  Versions-Tabelle:
 *** 0.1.0.svn120-2 0
        500 http://ftp.de.debian.org unstable/main Packages
        100 /var/lib/dpkg/status

according to the README.Debian

I did 
m-a prepare
m-a a-i linux-uvc

This resulted unfortunately in an error:
I did a protocol using tee

        Daten ?ber 1 Pakete aktualisiert.
        Paketlisten werden gelesen...
        Abh?ngigkeitsbaum wird aufgebaut...
        Reading state information...
        build-essential ist schon die neueste Version.
        0 aktualisiert, 0 neu installiert, 0 zu entfernen und 0 nicht
        aktualisiert.
        Extracting the package tarball, /usr/src/linux-uvc.tar.bz2,
        please wait...

The buildlog follows. Please let me know what I can do to get a working
webcam.

Bernhard

BUILDLOG:

        dh_testdir
        dh_testroot
        dh_clean
        /usr/bin/make -C /usr/src/modules/linux-uvc clean \
                KERNELPATH=/lib/modules/2.6.24-1-686/build
        KERNELRELEASE=2.6.24-1-686
        KERNELCONF=/lib/modules/2.6.24-1-686/build/.config 
        make[1]: Entering directory `/usr/src/modules/linux-uvc'
        rm -f *.o *.ko .*.cmd .*.flags *.mod.c Module.symvers
        rm -rf .tmp_versions
        make[1]: Leaving directory `/usr/src/modules/linux-uvc'
        /usr/bin/make  -f debian/rules kdist_clean kdist_config
        binary-modules
        make[1]: Entering directory `/usr/src/modules/linux-uvc'
        dh_testdir
        dh_testroot
        dh_clean
        /usr/bin/make -C /usr/src/modules/linux-uvc clean \
                KERNELPATH=/lib/modules/2.6.24-1-686/build
        KERNELRELEASE=2.6.24-1-686
        KERNELCONF=/lib/modules/2.6.24-1-686/build/.config 
        make[2]: Entering directory `/usr/src/modules/linux-uvc'
        rm -f *.o *.ko .*.cmd .*.flags *.mod.c Module.symvers
        rm -rf .tmp_versions
        make[2]: Leaving directory `/usr/src/modules/linux-uvc'
        for templ in ; do \
            cp $templ `echo $templ | sed -e
        's/_KVERS_/2.6.24-1-686/g'` ; \
          done
        for templ in `ls debian/*.modules.in` ; do \
            test -e ${templ%.modules.in}.backup || cp ${templ
        %.modules.in} ${templ%.modules.in}.backup 2>/dev/null || true; \
            sed -e
        's/##KVERS##/2.6.24-1-686/g ;s/#KVERS#/2.6.24-1-686/g ;
        s/_KVERS_/2.6.24-1-686/g ; s/##KDREV##/2.6.24-4/g ;
        s/#KDREV#/2.6.24-4/g ; s/_KDREV_/2.6.24-4/g  ' < $templ >
        ${templ%.modules.in}; \
          done
        dh_testdir
        dh_testroot
        dh_clean -k
        # Build modules
        /usr/bin/make -C /usr/src/modules/linux-uvc uvcvideo \
                KERNEL_DIR=/lib/modules/2.6.24-1-686/build
        KERNEL_VERSION=2.6.24-1-686
        KERNELCONF=/lib/modules/2.6.24-1-686/build/.config 
        make[2]: Entering directory `/usr/src/modules/linux-uvc'
        Building USB Video Class driver...
        make[3]: Entering directory
        `/usr/src/linux-headers-2.6.24-1-686'
          CC [M]  /usr/src/modules/linux-uvc/uvc_driver.o
        /usr/src/modules/linux-uvc/uvc_driver.c: In function
        'uvc_register_video':
        /usr/src/modules/linux-uvc/uvc_driver.c:1451: error: 'struct
        video_device' has no member named 'hardware'
        make[4]: *** [/usr/src/modules/linux-uvc/uvc_driver.o] Fehler 1
        make[3]: *** [_module_/usr/src/modules/linux-uvc] Fehler 2
        make[3]: Leaving directory `/usr/src/linux-headers-2.6.24-1-686'
        make[2]: *** [uvcvideo] Fehler 2
        make[2]: Leaving directory `/usr/src/modules/linux-uvc'
        make[1]: *** [binary-modules] Fehler 2
        make[1]: Leaving directory `/usr/src/modules/linux-uvc'
        make: *** [kdist_build] Fehler 2
        




From brandon at ifup.org  Wed Mar 12 22:21:22 2008
From: brandon at ifup.org (Brandon Philips)
Date: Wed, 12 Mar 2008 14:21:22 -0700
Subject: [Linux-uvc-devel] Installation failure with kernel	2.6.24-1-686
	under Debian
In-Reply-To: <1205354478.5234.13.camel@amd2000bk.kleinedaheim>
References: <1205354478.5234.13.camel@amd2000bk.kleinedaheim>
Message-ID: <20080312212122.GA4253@plankton.ifup.org>

On 21:41 Wed 12 Mar 2008, Dr. Bernhard Kleine wrote:
> I installed the latest debian version from unstable
> 
>  apt-cache policy linux-uvc-source
> linux-uvc-source:
>   Installiert:0.1.0.svn120-2
>   M?gliche Pakete:0.1.0.svn120-2
>   Versions-Tabelle:
>  *** 0.1.0.svn120-2 0
>         500 http://ftp.de.debian.org unstable/main Packages
>         100 /var/lib/dpkg/status
> 
> according to the README.Debian
> 
> I did 
> m-a prepare
> m-a a-i linux-uvc

The version of UVC in Debian is too old for the version of the Kernel
you are building against.  Please file a bug with Debian or use the
latest version of the UVC driver from SVN:

# svn checkout svn://svn.berlios.de/linux-uvc/linux-uvc/trunk uvc
# cd uvc
# make
# su
# make install

Thanks,

	Brandon



From brandon at ifup.org  Wed Mar 12 22:25:32 2008
From: brandon at ifup.org (Brandon Philips)
Date: Wed, 12 Mar 2008 14:25:32 -0700
Subject: [Linux-uvc-devel] uvcvideo driver modprobing problem
In-Reply-To: <7fedbc910803121216l556d404bucedb2adac3d0669a@mail.gmail.com>
References: <7fedbc910803121216l556d404bucedb2adac3d0669a@mail.gmail.com>
Message-ID: <20080312212532.GB4253@plankton.ifup.org>

On 20:16 Wed 12 Mar 2008, shacky wrote:
> I'm trying to use the uvcvideo driver on my Ubuntu Gutsy 7.10 amd64.
> When I type "modprobe uvcvideo" as root I get this error:
> 
> FATAL: Error inserting uvcvideo
> (/lib/modules/2.6.22-14-generic/usb/media/uvcvideo.ko): Unknown symbol
> in module, or unknown parameter (see dmesg)
> 
> And dmesg tells this:
> 
> [ 4317.113376] uvcvideo: disagrees about version of symbol
> v4l_compat_translate_ioctl
> [ 4317.113387] uvcvideo: Unknown symbol v4l_compat_translate_ioctl
> [ 4317.113518] uvcvideo: disagrees about version of symbol video_devdata
> [ 4317.113521] uvcvideo: Unknown symbol video_devdata
> [ 4317.113780] uvcvideo: disagrees about version of symbol
> video_unregister_device
> [ 4317.113784] uvcvideo: Unknown symbol video_unregister_device
> [ 4317.113873] uvcvideo: disagrees about version of symbol video_device_alloc
> [ 4317.113876] uvcvideo: Unknown symbol video_device_alloc
> [ 4317.113950] uvcvideo: disagrees about version of symbol video_register_device
> [ 4317.113954] uvcvideo: Unknown symbol video_register_device
> [ 4317.114112] uvcvideo: disagrees about version of symbol video_usercopy
> [ 4317.114115] uvcvideo: Unknown symbol video_usercopy
> [ 4317.114144] uvcvideo: disagrees about version of symbol video_device_release
> [ 4317.114148] uvcvideo: Unknown symbol video_device_release
> 
> My kernel is 2.6.22-14-generic.

The UVC driver you are trying to insert isn't built against the Kernel
you are running.  Did you build UVC yourself?  If so then rebuild the
driver against the source for this Kernel and reinstall the driver.

Otherwise, if you got UVC from Ubuntu then please file a bug with them.

Cheers,

	Brandon


From brandon at ifup.org  Wed Mar 12 22:28:24 2008
From: brandon at ifup.org (Brandon Philips)
Date: Wed, 12 Mar 2008 14:28:24 -0700
Subject: [Linux-uvc-devel] Logitech: Quickcam Pro 9000 x Orbit AF
In-Reply-To: <20080312154601.3549436a@tux.abusar.org.br>
References: <20080312154601.3549436a@tux.abusar.org.br>
Message-ID: <20080312212824.GC4253@plankton.ifup.org>

On 15:46 Wed 12 Mar 2008, D?niel Fraga wrote:
> As far as I understand, the snapshot button isn't supported yet in
> uvcvideo, right? So, if it's true, it isn't a advantage right now.

Correct, still image capture isn't in the Linux driver yet.

> In the other hand, the "face tracking" must be supported in software,
> and as far as I know, it doesn't exist yet in Linux, right?

Yes, face tracking is a software thing and I know of no application that
is currently doing it.

Cheers,

	Brandon


From brandon at ifup.org  Wed Mar 12 22:41:44 2008
From: brandon at ifup.org (Brandon Philips)
Date: Wed, 12 Mar 2008 14:41:44 -0700
Subject: [Linux-uvc-devel] Hercules Dualpix HD Support
In-Reply-To: <200803121830.22953.malo_mail@yahoo.it>
References: <200803121830.22953.malo_mail@yahoo.it>
Message-ID: <20080312214144.GD4253@plankton.ifup.org>

On 18:30 Wed 12 Mar 2008, Malo wrote:
> I saw the Hercules Dualpix Exchange webcam in the support devices list.. how 
> about his sister, the Hercules Dualpix HD? It is somehow supported? Thanks 
> for your time..

The product website contains no information about UVC and I can't
extract the .inf file from the driver exe on their website.  So, you
will have to either buy it and find out, get a Windows machine and post
the INF file from the driver on the list or ask the manufacturer.

Thanks,

	Brandon


From rasasi78 at gmail.com  Wed Mar 12 22:50:40 2008
From: rasasi78 at gmail.com (=?UTF-8?B?UmHDumwgU8OhbmNoZXogU2lsZXM=?=)
Date: Wed, 12 Mar 2008 22:50:40 +0100
Subject: [Linux-uvc-devel] Black image on videoconferencing apps.
References: <fqmuds$e3c$1@ger.gmane.org> <fqrunc$sqq$1@ger.gmane.org>
	<fr839n$o77$1@ger.gmane.org>
Message-ID: <fr9j8j$gfv$1@ger.gmane.org>

  I'm sorry about being so stubborn, but I think there must a be a problem
with this somewhere. I hope you don't mind I keep filing information
related to this thread.

Ra?l S?nchez Siles wrote:

>   Hello again:
> 
> Ra?l S?nchez Siles wrote:
> 
>>   Hello All:
>> 
>> Ra?l S?nchez Siles wrote:
>> 
>>>   Hello All:
>>> 
>>>   On skype I had the same problem and is this: I can start my video and
>>>   the
>>> other end will see it, but after a randon time ranging from little
>>> seconds to little minutes, the image I sent (and that I'm able to see)
>>> goes to black unconditionally.
>>> 
>>>   After this, same as before the video was working at this point, but
>>>   stops
>>> working after some time. Along the video conference skype seems to try
>>> to reinitialize webcam, it starts working again, but then it goes to
>>> black again.
>>> 
> [...]
>>   Meanwhile dmesg throwed some different output when using kopete:
>>   Well, for the moment is all I can think may help to find where the
>>   issue
>> could be. If you have any idea, please let me know.
>> 
>>   Thanks.
>> 
> 
>   Since the camera is integrated in the laptop, I doubt it could be a
>   noise
> or cable quality. Also I think I'm using the ehci driver, but I'm
> attaching the lsusb -vv output as well. (lsusb-vv.gz)
> 
>   I hope this could shed some light into the issue, but meanwhile I'll try
> even harder to get a valid dmesg output when the camera stops working.
> 

  Now I got to reproduce the problem. I think it's related to environmental
light somehow. I had some trouble to reproduce problem in the mornings
because I had a lot of natural light, but it was at evening that I was
trying to use the camera. So to test it out I turned on a lighter lamp.
This way it was harder to get the problem, and I only got it when I covered
the camera focus totally, after that, just a black image like the one I
used to see remained there. The only difference was a small whitish point.

  After this I think there's some problem in the light/bright regulation
mechanish. I think next step is starting to look at the code and see where
some of this regulation happen, any pointer would be appreciated.

  Meanwhile I'm attaching the last part of the dmesg output where I released
the camera as soon as I noticed the black frames. I think that may not be
very useful, but just in case...

  Regards,

-- 
     Ra?l S?nchez Siles
----->Proud Debian user<-----
Linux registered user #416098
-------------- next part --------------
A non-text attachment was scrubbed...
Name: uvcvideo.bad.gz
Type: application/x-gzip
Size: 712 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080312/e41fbee5/attachment.bin>

From brandon at ifup.org  Wed Mar 12 22:48:13 2008
From: brandon at ifup.org (Brandon Philips)
Date: Wed, 12 Mar 2008 14:48:13 -0700
Subject: [Linux-uvc-devel] Problems to install Logitech QuickCam Pro	5000
In-Reply-To: <E1JUqct-00040E-00@relay.mixmail.com>
References: <E1JUqct-00040E-00@relay.mixmail.com>
Message-ID: <20080312214813.GE4253@plankton.ifup.org>

On 22:49 Thu 28 Feb 2008, Pedro P  wrote:
> Please, Can you help me with the problem to install drivers of webcam
> Logitech QuickCam Pro 5000
> 
> I think to use WebCam for videoconference and instantmessenger..
> When I run "Ekiga" appears this error message:
> Your controller of video does not support the format of requested video.

If the UVC device works with other applications like luvcview[1] there
isn't much I can do.  Ekiga will need to add support for the formats
your device puts out.

Thanks,

	Brandon

[1] http://www.quickcamteam.net/software/linux/v4l2-software/luvcview


From fragabr at gmail.com  Thu Mar 13 00:34:24 2008
From: fragabr at gmail.com (=?ISO-8859-1?Q?D=E2niel?= Fraga)
Date: Wed, 12 Mar 2008 20:34:24 -0300
Subject: [Linux-uvc-devel] Logitech: Quickcam Pro 9000 x Orbit AF
In-Reply-To: <20080312212824.GC4253@plankton.ifup.org>
References: <20080312154601.3549436a@tux.abusar.org.br>
	<20080312212824.GC4253@plankton.ifup.org>
Message-ID: <20080312203424.477478a7@tux.abusar.org.br>

On Wed, 12 Mar 2008 14:28:24 -0700
Brandon Philips <brandon at ifup.org> wrote:

> Correct, still image capture isn't in the Linux driver yet.

	(...)

> Yes, face tracking is a software thing and I know of no application that
> is currently doing it.

	Ok. So I'll buy the Quickcam Pro 9000, since I think that still
image capture is more usefull for me (when it's supported).

	Thank you very much for your answer!

-- 


From malo_mail at yahoo.it  Wed Mar 12 23:40:13 2008
From: malo_mail at yahoo.it (Malo)
Date: Wed, 12 Mar 2008 23:40:13 +0100
Subject: [Linux-uvc-devel] Hercules Dualpix HD Support
In-Reply-To: <20080312214144.GD4253@plankton.ifup.org>
References: <200803121830.22953.malo_mail@yahoo.it>
	<20080312214144.GD4253@plankton.ifup.org>
Message-ID: <200803122340.13348.malo_mail@yahoo.it>

Il Wednesday 12 March 2008 22:41:44 hai scritto:
> On 18:30 Wed 12 Mar 2008, Malo wrote:
> > I saw the Hercules Dualpix Exchange webcam in the support devices list..
> > how about his sister, the Hercules Dualpix HD? It is somehow supported?
> > Thanks for your time..
>
> The product website contains no information about UVC and I can't
> extract the .inf file from the driver exe on their website.  So, you
> will have to either buy it and find out, get a Windows machine and post
> the INF file from the driver on the list or ask the manufacturer.
>
> Thanks,
>
> 	Brandon

Mmmm... can't i get in easier way the .inf file? If i just install onto a win 
machine the driver exe, i can get the driver file.. I don't know exactly what 
inf file do you need..

Chiacchiera con i tuoi amici in tempo reale! 
 http://it.yahoo.com/mail_it/foot/*http://it.messenger.yahoo.com 



From shacky83 at gmail.com  Thu Mar 13 04:10:18 2008
From: shacky83 at gmail.com (shacky)
Date: Thu, 13 Mar 2008 04:10:18 +0100
Subject: [Linux-uvc-devel] uvcvideo driver modprobing problem
In-Reply-To: <20080312212532.GB4253@plankton.ifup.org>
References: <7fedbc910803121216l556d404bucedb2adac3d0669a@mail.gmail.com>
	<20080312212532.GB4253@plankton.ifup.org>
Message-ID: <7fedbc910803122010x4fe30fb9g49a202e0ccb428c0@mail.gmail.com>

>  The UVC driver you are trying to insert isn't built against the Kernel
>  you are running.  Did you build UVC yourself?  If so then rebuild the
>  driver against the source for this Kernel and reinstall the driver.

I tried to built the uvcvideo driver myself from the sources.
I'm using the latest version grabbed from your website.

Thank you very much!
Bye.


From nick at datacall.net.au  Thu Mar 13 04:49:55 2008
From: nick at datacall.net.au (Nick Sonneveld)
Date: Thu, 13 Mar 2008 14:49:55 +1100
Subject: [Linux-uvc-devel] Hercules Dualpix HD Support
In-Reply-To: <200803122340.13348.malo_mail@yahoo.it>
References: <200803121830.22953.malo_mail@yahoo.it><20080312214144.GD4253@plankton.ifup.org>
	<200803122340.13348.malo_mail@yahoo.it>
Message-ID: <B10472081C389346A5EDD5CC436762BA44C796@fulgur.POWERCOM.local>

I ran the installation program just enough to get the install files to
be unzipped into Local Settings\Temp. Attached are the two .inf files
that I could find.

Here are the other install files if you're interested...
HDExt.ax
PushSource.ax
WebCamKSProxyPlugin.ax
hercules.cat
_IsRes.dll
_ISUser.dll
difxapi.dll
GDM.dll
HDEXT.DLL
isrt.dll
msvcp71.dll
HDTWN.ds
DialogBox.exe
DPInst.exe
IsWebcamUsedHD.exe
kill.exe
registry.exe
remove_signing.exe
RemoveWHQLPopUp.exe
vcredist_x86.exe
Hercules.inf
HerculesXP.inf
DIFxData.ini
FontData.ini
setup.inx
StringTable-0009-English.ips
default.pal
User Manual.pdf
order.reg
orderVista.reg
License.rtf
apollo9657.set
camfilt.sys
camfilt2.sys
hdvidv.sys

- Nick

-----Original Message-----
From: linux-uvc-devel-bounces at lists.berlios.de
[mailto:linux-uvc-devel-bounces at lists.berlios.de] On Behalf Of Malo
Sent: Thursday, 13 March 2008 9:40 AM
To: Brandon Philips
Cc: linux-uvc-devel at lists.berlios.de
Subject: Re: [Linux-uvc-devel] Hercules Dualpix HD Support

Il Wednesday 12 March 2008 22:41:44 hai scritto:
> On 18:30 Wed 12 Mar 2008, Malo wrote:
> > I saw the Hercules Dualpix Exchange webcam in the support devices
list..
> > how about his sister, the Hercules Dualpix HD? It is somehow
supported?
> > Thanks for your time..
>
> The product website contains no information about UVC and I can't
> extract the .inf file from the driver exe on their website.  So, you
> will have to either buy it and find out, get a Windows machine and
post
> the INF file from the driver on the list or ask the manufacturer.
>
> Thanks,
>
> 	Brandon

Mmmm... can't i get in easier way the .inf file? If i just install onto
a win 
machine the driver exe, i can get the driver file.. I don't know exactly
what 
inf file do you need..

Chiacchiera con i tuoi amici in tempo reale! 
 http://it.yahoo.com/mail_it/foot/*http://it.messenger.yahoo.com 

_______________________________________________
Linux-uvc-devel mailing list
Linux-uvc-devel at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
-------------- next part --------------
A non-text attachment was scrubbed...
Name: HerculesXP.inf
Type: application/octet-stream
Size: 9896 bytes
Desc: HerculesXP.inf
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080313/bb76bc09/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Hercules.inf
Type: application/octet-stream
Size: 9888 bytes
Desc: Hercules.inf
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080313/bb76bc09/attachment-0001.obj>

From fragabr at gmail.com  Thu Mar 13 06:16:55 2008
From: fragabr at gmail.com (=?ISO-8859-1?Q?D=E2niel?= Fraga)
Date: Thu, 13 Mar 2008 02:16:55 -0300
Subject: [Linux-uvc-devel] Logitech: Quickcam Pro 9000 x Orbit AF
In-Reply-To: <20080312212824.GC4253@plankton.ifup.org>
References: <20080312154601.3549436a@tux.abusar.org.br>
	<20080312212824.GC4253@plankton.ifup.org>
Message-ID: <20080313021655.0d50d1b5@tux.abusar.org.br>

On Wed, 12 Mar 2008 14:28:24 -0700
Brandon Philips <brandon at ifup.org> wrote:

> Correct, still image capture isn't in the Linux driver yet.

	Just for curiosity, is there an estimative when still image
capture will going to be supported by the driver? Is it too difficult?

	Thanks!

-- 


From brandon at ifup.org  Thu Mar 13 06:49:18 2008
From: brandon at ifup.org (Brandon Philips)
Date: Wed, 12 Mar 2008 22:49:18 -0700
Subject: [Linux-uvc-devel] uvcvideo driver modprobing problem
In-Reply-To: <7fedbc910803122010x4fe30fb9g49a202e0ccb428c0@mail.gmail.com>
References: <7fedbc910803121216l556d404bucedb2adac3d0669a@mail.gmail.com>
	<20080312212532.GB4253@plankton.ifup.org>
	<7fedbc910803122010x4fe30fb9g49a202e0ccb428c0@mail.gmail.com>
Message-ID: <20080313054918.GA27361@plankton.ifup.org>

On 04:10 Thu 13 Mar 2008, shacky wrote:
> >  The UVC driver you are trying to insert isn't built against the Kernel
> >  you are running.  Did you build UVC yourself?  If so then rebuild the
> >  driver against the source for this Kernel and reinstall the driver.
> 
> I tried to built the uvcvideo driver myself from the sources.
> I'm using the latest version grabbed from your website.

Ok, then you need to make sure you are building against a Kernel tree
that is the same as the one you are running.  I don't use Ubuntu so I
can't help you with the specifics there- Google around or try the
relevant lists/forums.

Cheers,

	Brandon


From brandon at ifup.org  Thu Mar 13 06:51:36 2008
From: brandon at ifup.org (Brandon Philips)
Date: Wed, 12 Mar 2008 22:51:36 -0700
Subject: [Linux-uvc-devel] Hercules Dualpix HD Support
In-Reply-To: <200803122340.13348.malo_mail@yahoo.it>
References: <200803121830.22953.malo_mail@yahoo.it>
	<20080312214144.GD4253@plankton.ifup.org>
	<200803122340.13348.malo_mail@yahoo.it>
Message-ID: <20080313055136.GB27361@plankton.ifup.org>

On 23:40 Wed 12 Mar 2008, Malo wrote:
> Il Wednesday 12 March 2008 22:41:44 hai scritto:
> > On 18:30 Wed 12 Mar 2008, Malo wrote:
> > > I saw the Hercules Dualpix Exchange webcam in the support devices
> > > list..  how about his sister, the Hercules Dualpix HD? It is
> > > somehow supported?  Thanks for your time..
> >
> > The product website contains no information about UVC and I can't
> > extract the .inf file from the driver exe on their website.  So, you
> > will have to either buy it and find out, get a Windows machine and
> > post the INF file from the driver on the list or ask the
> > manufacturer.
>
> If i just install onto a win machine the driver exe, i can get the
> driver file.. I don't know exactly what inf file do you need..

I don't know what inf file will be the right one either.  But that is
the only way I can think of knowing if this is a UVC device or not
without buying the device or contacting the manufacturer.

Good luck.

	Brandon


From brandon at ifup.org  Thu Mar 13 07:09:05 2008
From: brandon at ifup.org (Brandon Philips)
Date: Wed, 12 Mar 2008 23:09:05 -0700
Subject: [Linux-uvc-devel] Hercules Dualpix HD Support
In-Reply-To: <B10472081C389346A5EDD5CC436762BA44C796@fulgur.POWERCOM.local>
References: <200803122340.13348.malo_mail@yahoo.it>
	<B10472081C389346A5EDD5CC436762BA44C796@fulgur.POWERCOM.local>
Message-ID: <20080313060905.GA28252@plankton.ifup.org>

On 14:49 Thu 13 Mar 2008, Nick Sonneveld wrote:
> I ran the installation program just enough to get the install files to
> be unzipped into Local Settings\Temp. Attached are the two .inf files
> that I could find.

Based on the INF files these don't look like UVC devices.  They should
reference Usbvideo.inf or Usbvideo.sys in some way but these do not.

  http://msdn2.microsoft.com/en-us/library/ms803114.aspx

Cheers,

	Brandon

> -----Original Message-----
> From: linux-uvc-devel-bounces at lists.berlios.de
> [mailto:linux-uvc-devel-bounces at lists.berlios.de] On Behalf Of Malo
> Sent: Thursday, 13 March 2008 9:40 AM
> To: Brandon Philips
> Cc: linux-uvc-devel at lists.berlios.de
> Subject: Re: [Linux-uvc-devel] Hercules Dualpix HD Support
> 
> Il Wednesday 12 March 2008 22:41:44 hai scritto:
> > On 18:30 Wed 12 Mar 2008, Malo wrote:
> > > I saw the Hercules Dualpix Exchange webcam in the support devices
> list..
> > > how about his sister, the Hercules Dualpix HD? It is somehow
> supported?
> > > Thanks for your time..
> >
> > The product website contains no information about UVC and I can't
> > extract the .inf file from the driver exe on their website.  So, you
> > will have to either buy it and find out, get a Windows machine and
> post
> > the INF file from the driver on the list or ask the manufacturer.
> >
> > Thanks,
> >
> > 	Brandon
> 
> Mmmm... can't i get in easier way the .inf file? If i just install
> onto a win machine the driver exe, i can get the driver file.. I don't
> know exactly what inf file do you need..
> 


From brandon at ifup.org  Thu Mar 13 07:12:30 2008
From: brandon at ifup.org (Brandon Philips)
Date: Wed, 12 Mar 2008 23:12:30 -0700
Subject: [Linux-uvc-devel] Logitech: Quickcam Pro 9000 x Orbit AF
In-Reply-To: <20080313021655.0d50d1b5@tux.abusar.org.br>
References: <20080312154601.3549436a@tux.abusar.org.br>
	<20080312212824.GC4253@plankton.ifup.org>
	<20080313021655.0d50d1b5@tux.abusar.org.br>
Message-ID: <20080313061230.GB28252@plankton.ifup.org>

On 02:16 Thu 13 Mar 2008, D?niel Fraga wrote:
> On Wed, 12 Mar 2008 14:28:24 -0700
> Brandon Philips <brandon at ifup.org> wrote:
> 
> > Correct, still image capture isn't in the Linux driver yet.
> 
> Just for curiosity, is there an estimative when still image
> capture will going to be supported by the driver? Is it too difficult?

No one is working on it but it should be a fairly easy thing to
implement- we have the specs.  

However, the tricky parts of still capturing is how to fit the
functionality into the V4L API.

Cheers,

	Brandon


From fragabr at gmail.com  Thu Mar 13 14:14:36 2008
From: fragabr at gmail.com (=?ISO-8859-1?Q?D=E2niel?= Fraga)
Date: Thu, 13 Mar 2008 10:14:36 -0300
Subject: [Linux-uvc-devel] Logitech: Quickcam Pro 9000 x Orbit AF
In-Reply-To: <20080313061230.GB28252@plankton.ifup.org>
References: <20080312154601.3549436a@tux.abusar.org.br>
	<20080312212824.GC4253@plankton.ifup.org>
	<20080313021655.0d50d1b5@tux.abusar.org.br>
	<20080313061230.GB28252@plankton.ifup.org>
Message-ID: <20080313101436.09d94d2a@tux.abusar.org.br>

On Wed, 12 Mar 2008 23:12:30 -0700
Brandon Philips <brandon at ifup.org> wrote:

> No one is working on it but it should be a fairly easy thing to
> implement- we have the specs.  

	Nice :).

> However, the tricky parts of still capturing is how to fit the
> functionality into the V4L API.

	No problem Brandon. I can talk to Mauro Chehab about this and
the best way to do it. I'll return when I have a answer. Thanks!


-- 


From mchehab at infradead.org  Thu Mar 13 21:50:41 2008
From: mchehab at infradead.org (Mauro Carvalho Chehab)
Date: Thu, 13 Mar 2008 17:50:41 -0300
Subject: [Linux-uvc-devel] Logitech: Quickcam Pro 9000 x Orbit AF
In-Reply-To: <20080313101436.09d94d2a@tux.abusar.org.br>
References: <20080312154601.3549436a@tux.abusar.org.br>
	<20080312212824.GC4253@plankton.ifup.org>
	<20080313021655.0d50d1b5@tux.abusar.org.br>
	<20080313061230.GB28252@plankton.ifup.org>
	<20080313101436.09d94d2a@tux.abusar.org.br>
Message-ID: <20080313175041.768e158a@gaivota>

On Thu, 13 Mar 2008 10:14:36 -0300
D?niel Fraga <fragabr at gmail.com> wrote:

> On Wed, 12 Mar 2008 23:12:30 -0700
> Brandon Philips <brandon at ifup.org> wrote:
> 
> > No one is working on it but it should be a fairly easy thing to
> > implement- we have the specs.  
> 
> 	Nice :).
> 
> > However, the tricky parts of still capturing is how to fit the
> > functionality into the V4L API.
> 
> 	No problem Brandon. I can talk to Mauro Chehab about this and
> the best way to do it. I'll return when I have a answer. Thanks!

Capturing a still image doesn't seem to be hard. I'm not sure what's the proper
way to implement it either. One alternative for the webcam button is to use
event interface, like we do with IR controls. Not sure if this is the better way.


Cheers,
Mauro


From fragabr at gmail.com  Thu Mar 13 22:06:48 2008
From: fragabr at gmail.com (=?ISO-8859-1?Q?D=E2niel?= Fraga)
Date: Thu, 13 Mar 2008 18:06:48 -0300
Subject: [Linux-uvc-devel] Logitech: Quickcam Pro 9000 x Orbit AF
In-Reply-To: <20080313175041.768e158a@gaivota>
References: <20080312154601.3549436a@tux.abusar.org.br>
	<20080312212824.GC4253@plankton.ifup.org>
	<20080313021655.0d50d1b5@tux.abusar.org.br>
	<20080313061230.GB28252@plankton.ifup.org>
	<20080313101436.09d94d2a@tux.abusar.org.br>
	<20080313175041.768e158a@gaivota>
Message-ID: <20080313180648.21019cfd@tux.abusar.org.br>

On Thu, 13 Mar 2008 17:50:41 -0300
Mauro Carvalho Chehab <mchehab at infradead.org> wrote:

> Capturing a still image doesn't seem to be hard. I'm not sure what's the proper
> way to implement it either. One alternative for the webcam button is to use
> event interface, like we do with IR controls. Not sure if this is the better way.

	Thanks for answering Mauro!

	Is there any other suggestions about how to best implement it?

	The event interface is interesting because it would be
transparent, right?

	Anyway, when I get my cam, if you developers want, I can do any
necessary tests. Thank you everybody.

-- 


From laurent.pinchart at skynet.be  Thu Mar 13 23:42:04 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 13 Mar 2008 23:42:04 +0100
Subject: [Linux-uvc-devel] Image format on Luvcview
In-Reply-To: <BLU137-W177E502E5EB7BCDF1A0D4FD90E0@phx.gbl>
References: <BLU137-W177E502E5EB7BCDF1A0D4FD90E0@phx.gbl>
Message-ID: <200803132342.04830.laurent.pinchart@skynet.be>

Hi Hector,

On Tuesday 11 March 2008, H?ctor Hugo Avil?s Arriaga wrote:
> Dear all,
>
> I'm a newbie in all this webcam stuff and trying the Luvcview source code.
> Luvcview is useful to me because it allows to display images from two
> videcameras at the same time. Doing the same with OpenCV retrieves
> corrupted images.
>
> I want to access the pixel information. I'm able to convert
> YUYV format to 24RGB easily using the Pyuv422torgb24 function,
> and the display the images using a 24bits BGR format directly.

You should contact Michel Xhaard for questions related to luvcview internals. 
He is the luvcview author.

> Unfortunately, I cannot do the same with the MJPEG format.
> I realize that the image is decompressed into the
> videoIn->framebuffer buffer before displaying it, but I don't know how to
> access the pixel information correctly.
> I have tried to copy the image into an OpenCV buffer in this way:
>
> opencv->imageData[curr_pos] = videoIn->framebuffer[curr_pos++]; // B
> opencv->imageData[curr_pos] = videoIn->framebuffer[curr_pos++]; // G
> opencv->imageData[curr_pos] = videoIn->framebuffer[curr_pos++]; // R
>
> However, all I see are vertical lines and
> my silhouette repeated three times on the image.
> As you can see,  I'm assuming this information is stored in BGR format
> in the videoIn->framebuffer.
>
> The questions are: which is the correct form to access the information
> captured with the MJPEG format?  and, using this format speeds up the
> capturing process after all?

I'm not familiar with the luvcview code, but the data might be stored after 
decompression in YUV format instead of RGB. Just a wild guess.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Mar 14 00:01:31 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 14 Mar 2008 00:01:31 +0100
Subject: [Linux-uvc-devel] Logitech 9000 and 640@30fps
In-Reply-To: <20080311164107.GA8630@kolmann.at>
References: <20080311155540.GA5412@kolmann.at>
	<20080311161618.GB5412@kolmann.at>
	<20080311164107.GA8630@kolmann.at>
Message-ID: <200803140001.31749.laurent.pinchart@skynet.be>

Hi Philipp,

On Tuesday 11 March 2008, Philipp Kolmann wrote:
> On Tue, Mar 11, 2008 at 05:16:18PM +0100, Philipp Kolmann wrote:
> > On Tue, Mar 11, 2008 at 05:09:41PM +0100, Richard Atterer wrote:
> > > On Tue, Mar 11, 2008 at 04:55:40PM +0100, Philipp Kolmann wrote:
> > > > I just wondered why my Logi 9k cam suddenly gave me 30fps at 640x420
> > > > even in modest light (Skype and luvcview).
> > >
> > > Maybe because some program switched off auto-exposure and used a
> > > hardwired 30fps one, together with an appropriate gain for your
> > > lighting conditions?
> >
> > Well I just tested it again. After I unplug the cam and replug it, it
> > works as expected on 10-15 fps.
> >
> > Then I attached it one to the windows with logitech drivers and suddenly
> > it works much better.
> >
> > Well you could be right with the settings. How can I compare the
> > settings?
>
> I looked at luvcview -l -f yuv -i 30 -s 640x480:
>
> With the windows drivers once touch the cam:
>
> V4L2_CID_BASE         (predefined controls):
>  index:9963776    name:Brightness                       type:1 min:0    
> max:255   step:1     def:128   now:128 index:9963777    name:Contrast      
>                   type:1 min:0     max:255   step:1     def:32    now:33
> index:9963778    name:Saturation                       type:1 min:0    
> max:255   step:1     def:32    now:32 index:9963788    name:White Balance
> Temperature, Auto  type:2 min:0     max:255   step:1     def:1     now:1
> index:9963795    name:Gain                             type:1 min:0    
> max:255   step:1     def:0     now:255 V4L2_CID_PRIVATE_BASE (driver
> specific controls):
>  Clean Up done Quit
>
> Here I get 32fps at 640.
>
> After power cycling the cam, I get the defaults from luvcview -l and 5fps.
> After setting the Gain back to 255 the cam still only got me 5fps.
> I haven't found how to disable auto-exposure so far.

luvcview doesn't enumerate all controls. The test application available at 
http://linux-uvc.berlios.de/test.c should work better. Use it to enumerate 
all controls with their current value.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Mar 14 00:14:55 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 14 Mar 2008 00:14:55 +0100
Subject: [Linux-uvc-devel] Hercules Dualpix HD Support
In-Reply-To: <20080313060905.GA28252@plankton.ifup.org>
References: <200803122340.13348.malo_mail@yahoo.it>
	<B10472081C389346A5EDD5CC436762BA44C796@fulgur.POWERCOM.local>
	<20080313060905.GA28252@plankton.ifup.org>
Message-ID: <200803140014.55712.laurent.pinchart@skynet.be>

On Thursday 13 March 2008, Brandon Philips wrote:
> On 14:49 Thu 13 Mar 2008, Nick Sonneveld wrote:
> > I ran the installation program just enough to get the install files to
> > be unzipped into Local Settings\Temp. Attached are the two .inf files
> > that I could find.
>
> Based on the INF files these don't look like UVC devices.  They should
> reference Usbvideo.inf or Usbvideo.sys in some way but these do not.
>
>   http://msdn2.microsoft.com/en-us/library/ms803114.aspx

Note that some vendors ship their own UVC driver to work around the numerous 
bugs in the Microsoft driver. The best way to find out if the device is UVC 
compatible would be to get its USB descriptors.

A quick search on Google shows that the webcam isn't UVC compatible anyway.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Mar 14 00:21:40 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 14 Mar 2008 00:21:40 +0100
Subject: [Linux-uvc-devel] Logitech: Quickcam Pro 9000 x Orbit AF
In-Reply-To: <20080313180648.21019cfd@tux.abusar.org.br>
References: <20080312154601.3549436a@tux.abusar.org.br>
	<20080313175041.768e158a@gaivota>
	<20080313180648.21019cfd@tux.abusar.org.br>
Message-ID: <200803140021.41178.laurent.pinchart@skynet.be>

On Thursday 13 March 2008, D?niel Fraga wrote:
> On Thu, 13 Mar 2008 17:50:41 -0300
>
> Mauro Carvalho Chehab <mchehab at infradead.org> wrote:
> > Capturing a still image doesn't seem to be hard. I'm not sure what's the
> > proper way to implement it either. One alternative for the webcam button
> > is to use event interface, like we do with IR controls. Not sure if this
> > is the better way.
>
> 	Thanks for answering Mauro!
>
> 	Is there any other suggestions about how to best implement it?
>
> 	The event interface is interesting because it would be
> transparent, right?

The event interface would notify applications that a button event has been 
generated by the camera. It would not let the driver push a still image to 
userspace.

> 	Anyway, when I get my cam, if you developers want, I can do any
> necessary tests. Thank you everybody.

The problem is that V4L2 doesn't expose a still image capture API, so still 
image capture in the driver can't be interfaced to userspace in a standard 
way yet.

This being said, the UVC specification describes several still image capture 
methods. The one implemented by Logitech webcams is the simplest one, which 
just takes the next frame from the active video stream. With a way to get 
button events, a userspace application could easily implement that.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Mar 14 00:08:32 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 14 Mar 2008 00:08:32 +0100
Subject: [Linux-uvc-devel] Capturing from two philips spc520nc webcams
In-Reply-To: <47D72DE5.3010302@student.tudelft.nl>
References: <47D551D3.9040903@student.tudelft.nl>
	<200803110014.21425.laurent.pinchart@skynet.be>
	<47D72DE5.3010302@student.tudelft.nl>
Message-ID: <200803140008.32825.laurent.pinchart@skynet.be>

Hi Mehdi,

On Wednesday 12 March 2008, mehdi chitchian wrote:
> Hi Laurent,
>
> Laurent Pinchart wrote:
> > Hi Mehdi,
> >
> > On Monday 10 March 2008, Mehdi Chitchian wrote:
> >> I'm trying to capture from two Philips SPC520NC webcams on a machine
> >> with a single USB2 controller. However, launching the second instance of
> >> luvcview for the second webcam fails with 'Unable to start capture: 28,
> >> Error grabbing' even with the lowest resolution setting. As far as I
> >> know, error 28 indicates that there is not sufficient bandwidth
> >> available. But the combination of a single Philips SPC520NC and a
> >> Logitech Quickcam Pro 5000 works perfectly on the same machine.
> >
> > That's because the SPC520NC require more bandwidth than the QC Pro 5000.
> > There's not much I can't do about that, the error reported by the driver
> > isn't a bug. sorry.
>
> Is it possible to force a certain bandwidth at the driver level? From
> what I understand from the uvc specification, certain parameters are
> used for bandwidth negotiation between the device and the host.
> Considering the fact that I am using the same settings for
> resolution/format/framerate, are there other parameters I can change to
> reduce the bandwidth?

The driver automatically selects the lowest possible bandwidth compatible with 
the requested video parameters among the bandwidths supported by the device. 
Unfortunately the SPC520NC only supports a single bandwidth value:

    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 0 bytes
        bInterval               1

wMaxPacketSize is set to 0x1400 which is actually 3x 1024 bytes per frame, the 
highest bandwidth allowed by the USB 2.0 spec.

> Looking at the lsusb output for the philips webcam, I noticed strange
> values for dwMinBitRate and dwMaxBitRate. I don't know if this indicates
> a bug in the philips webcam.

The dwMinBitRate and dwMaxBitRate are indeed a bit large, but they are not 
used by the driver so it doesn't matter much.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Mar 14 00:23:22 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 14 Mar 2008 00:23:22 +0100
Subject: [Linux-uvc-devel] uvcvideo driver modprobing problem
In-Reply-To: <20080313054918.GA27361@plankton.ifup.org>
References: <7fedbc910803121216l556d404bucedb2adac3d0669a@mail.gmail.com>
	<7fedbc910803122010x4fe30fb9g49a202e0ccb428c0@mail.gmail.com>
	<20080313054918.GA27361@plankton.ifup.org>
Message-ID: <200803140023.22373.laurent.pinchart@skynet.be>

On Thursday 13 March 2008, Brandon Philips wrote:
> On 04:10 Thu 13 Mar 2008, shacky wrote:
> > >  The UVC driver you are trying to insert isn't built against the Kernel
> > >  you are running.  Did you build UVC yourself?  If so then rebuild the
> > >  driver against the source for this Kernel and reinstall the driver.
> >
> > I tried to built the uvcvideo driver myself from the sources.
> > I'm using the latest version grabbed from your website.
>
> Ok, then you need to make sure you are building against a Kernel tree
> that is the same as the one you are running.  I don't use Ubuntu so I
> can't help you with the specifics there- Google around or try the
> relevant lists/forums.

The problem reported by the original poster is often seen when compiling 
uvcvideo against a vanilla kernel and running the v4l drivers from the 
v4l-dvb branch.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Mar 14 00:27:33 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 14 Mar 2008 00:27:33 +0100
Subject: [Linux-uvc-devel]
	=?iso-8859-1?q?Problems_to_install_Logitech_Qui?=
	=?iso-8859-1?q?ckCam_Pro=095000?=
In-Reply-To: <20080312214813.GE4253@plankton.ifup.org>
References: <E1JUqct-00040E-00@relay.mixmail.com>
	<20080312214813.GE4253@plankton.ifup.org>
Message-ID: <200803140027.33732.laurent.pinchart@skynet.be>

On Wednesday 12 March 2008, Brandon Philips wrote:
> On 22:49 Thu 28 Feb 2008, Pedro P  wrote:
> > Please, Can you help me with the problem to install drivers of webcam
> > Logitech QuickCam Pro 5000
> >
> > I think to use WebCam for videoconference and instantmessenger..
> > When I run "Ekiga" appears this error message:
> > Your controller of video does not support the format of requested video.
>
> If the UVC device works with other applications like luvcview[1] there
> isn't much I can do.  Ekiga will need to add support for the formats
> your device puts out.

Ekiga has had YUV and MJPEG support for more than a year now. Pedro should 
check his kernel log for hints.

Best regards,

Laurent Pinchart


From mslemko at netscape.net  Fri Mar 14 00:46:33 2008
From: mslemko at netscape.net (mslemko)
Date: Thu, 13 Mar 2008 17:46:33 -0600
Subject: [Linux-uvc-devel] Logitech: Quickcam Pro 9000 x Orbit AF
In-Reply-To: <mailman.3605.1205450631.29873.linux-uvc-devel@lists.berlios.de>
References: <mailman.3605.1205450631.29873.linux-uvc-devel@lists.berlios.de>
Message-ID: <47D9BCD9.1040305@netscape.net>

Hi,

You might be interested in "motion"
http://sourceforge.net/projects/motion/
which takes a snapshot from any V4L device when it detects motion in the frame.

it works great with my Logitech Orbit AF (although no tilt or pan tracking)

-Mark

> Capturing a still image doesn't seem to be hard. I'm not sure what's the proper
> way to implement it either. One alternative for the webcam button is to use
> event interface, like we do with IR controls. Not sure if this is the better way.


    Thanks for answering Mauro!

    Is there any other suggestions about how to best implement it?

    The event interface is interesting because it would be
transparent, right?

    Anyway, when I get my cam, if you developers want, I can do any
necessary tests. Thank you everybody.



From fragabr at gmail.com  Fri Mar 14 01:13:15 2008
From: fragabr at gmail.com (=?ISO-8859-1?Q?D=E2niel?= Fraga)
Date: Thu, 13 Mar 2008 21:13:15 -0300
Subject: [Linux-uvc-devel] Logitech: Quickcam Pro 9000 x Orbit AF
In-Reply-To: <200803140021.41178.laurent.pinchart@skynet.be>
References: <20080312154601.3549436a@tux.abusar.org.br>
	<20080313175041.768e158a@gaivota>
	<20080313180648.21019cfd@tux.abusar.org.br>
	<200803140021.41178.laurent.pinchart@skynet.be>
Message-ID: <20080313211315.4719689d@tux.abusar.org.br>

On Fri, 14 Mar 2008 00:21:40 +0100
Laurent Pinchart <laurent.pinchart at skynet.be> wrote:

> This being said, the UVC specification describes several still image capture 
> methods. The one implemented by Logitech webcams is the simplest one, which 
> just takes the next frame from the active video stream. With a way to get 
> button events, a userspace application could easily implement that.

	Ok, it sounds good :). 

	Mauro do you think it's a trivial task to implement it or
should we discuss in the v4l mailing list before trying to implement
anything?

	Thanks.

-- 


From shacky83 at gmail.com  Fri Mar 14 07:43:35 2008
From: shacky83 at gmail.com (shacky)
Date: Fri, 14 Mar 2008 07:43:35 +0100
Subject: [Linux-uvc-devel] uvcvideo driver modprobing problem
In-Reply-To: <200803140023.22373.laurent.pinchart@skynet.be>
References: <7fedbc910803121216l556d404bucedb2adac3d0669a@mail.gmail.com>
	<7fedbc910803122010x4fe30fb9g49a202e0ccb428c0@mail.gmail.com>
	<20080313054918.GA27361@plankton.ifup.org>
	<200803140023.22373.laurent.pinchart@skynet.be>
Message-ID: <7fedbc910803132343n26ed04d2x950d75431a769b8b@mail.gmail.com>

> The problem reported by the original poster is often seen when compiling
>  uvcvideo against a vanilla kernel and running the v4l drivers from the
>  v4l-dvb branch.

Yes! This is my problem.
I had to compile the v4l drivers from the CVS repositories because I
needed the em28xx module.
So is there a way to solve this problem?


From alex at seewald.at  Fri Mar 14 08:51:55 2008
From: alex at seewald.at (Dr. Alexander K. Seewald)
Date: Fri, 14 Mar 2008 08:51:55 +0100
Subject: [Linux-uvc-devel] Logitech: Quickcam Pro 9000 x Orbit AF
Message-ID: <20080314075155.GA30893@sdg.at>

Still image capture support would be cool. If anyone needs my help,
just ask. This could probably improve the handling of multiple
cameras, as we could leave all connections open and request images
as needed... which is not possible with the current USB-bandwidth-
hungry video streaming protocol.

Best,
  Alex
-- 
Dr. Alexander K. Seewald

Seewald Solutions
www.seewald.at
Tel. +43(664)1106886
Fax. +43(1)2533033/2764


From s0238762 at sms.ed.ac.uk  Fri Mar 14 18:05:43 2008
From: s0238762 at sms.ed.ac.uk (Ioannis Nousias)
Date: Fri, 14 Mar 2008 17:05:43 +0000
Subject: [Linux-uvc-devel] inclusion in kernel
In-Reply-To: <200803140027.33732.laurent.pinchart@skynet.be>
References: <E1JUqct-00040E-00@relay.mixmail.com>	<20080312214813.GE4253@plankton.ifup.org>
	<200803140027.33732.laurent.pinchart@skynet.be>
Message-ID: <47DAB067.5040805@sms.ed.ac.uk>

Sorry if this has been asked before, but is linux-uvc now part of the 
mainline kernel? If not, when do you estimate this would happen? (2.6.26?)

regards,
Ioannis



From fragabr at gmail.com  Sat Mar 15 00:21:37 2008
From: fragabr at gmail.com (=?ISO-8859-1?Q?D=E2niel?= Fraga)
Date: Fri, 14 Mar 2008 20:21:37 -0300
Subject: [Linux-uvc-devel] inclusion in kernel
References: <E1JUqct-00040E-00@relay.mixmail.com>
	<20080312214813.GE4253@plankton.ifup.org>
	<200803140027.33732.laurent.pinchart@skynet.be>
	<47DAB067.5040805@sms.ed.ac.uk>
Message-ID: <20080314202137.76ded4fb@tux.abusar.org.br>

On Fri, 14 Mar 2008 17:05:43 +0000
Ioannis Nousias <s0238762 at sms.ed.ac.uk> wrote:

> Sorry if this has been asked before, but is linux-uvc now part of the 
> mainline kernel? If not, when do you estimate this would happen? (2.6.26?)

	The maintainers of uvcvideo answered me that they need somo
modifications on V4L before merging. So it will depend on Mauro Chehab
coordination, since he's the V4L maintainer.

-- 
Linux 2.6.24: Arr Matey! A Hairy Bilge Rat!
http://u-br.net http://www.abusar.org/FELIZ_2008.html
 - "Morcheeba - Tape Loop" (A late night blend of deep-house &
downtempo chill [SomaFM] [SomaFM])




From fragabr at gmail.com  Sat Mar 15 00:22:08 2008
From: fragabr at gmail.com (=?ISO-8859-1?Q?D=E2niel?= Fraga)
Date: Fri, 14 Mar 2008 20:22:08 -0300
Subject: [Linux-uvc-devel] Logitech: Quickcam Pro 9000 x Orbit AF
References: <20080314075155.GA30893@sdg.at>
Message-ID: <20080314202208.58d37d51@tux.abusar.org.br>

On Fri, 14 Mar 2008 08:51:55 +0100
"Dr. Alexander K. Seewald" <alex at seewald.at> wrote:

> Still image capture support would be cool. If anyone needs my help,
> just ask. This could probably improve the handling of multiple
> cameras, as we could leave all connections open and request images
> as needed... which is not possible with the current USB-bandwidth-
> hungry video streaming protocol.

	I can help too (at least with testing).

-- 
Linux 2.6.24: Arr Matey! A Hairy Bilge Rat!
http://u-br.net http://www.abusar.org/FELIZ_2008.html
 - "Tr??by Trio - Fauna Flash / Tel Aviv" (A late night blend of
deep-house & downtempo chill [SomaFM] [SomaFM])




From hector_hugo_aviles at hotmail.com  Sat Mar 15 00:47:38 2008
From: hector_hugo_aviles at hotmail.com (=?iso-8859-1?Q?H=E9ctor_Hugo_Avil=E9s_Arriaga?=)
Date: Fri, 14 Mar 2008 17:47:38 -0600
Subject: [Linux-uvc-devel] Logitech 9000 and 640@30fps
In-Reply-To: <200803140001.31749.laurent.pinchart@skynet.be>
References: <20080311155540.GA5412@kolmann.at>
	<20080311161618.GB5412@kolmann.at> <20080311164107.GA8630@kolmann.at> 
	<200803140001.31749.laurent.pinchart@skynet.be>
Message-ID: <BLU137-W36C56B23533E9602FB80B5D90A0@phx.gbl>


Hello Laurent,

Thanks for the previous tip.
I'm trying to list the camera controls (Logitech QuickCam Pro 9000) with the example:

http://linux-uvc.berlios.de/test.c

Unfortunately, the line:

		query.id |= V4L2_CTRL_FLAG_NEXT_CTRL;
#endif
		ret = ioctl(dev, VIDIOC_QUERYCTRL, &query); 

returns ret = -1.

:(

Regards,
H?ctor.


----------------------------------------
> From: laurent.pinchart at skynet.be
> To: linux-uvc-devel at lists.berlios.de
> Date: Fri, 14 Mar 2008 00:01:31 +0100
> Subject: Re: [Linux-uvc-devel] Logitech 9000 and 640 at 30fps
> 
> Hi Philipp,
> 
> On Tuesday 11 March 2008, Philipp Kolmann wrote:
>> On Tue, Mar 11, 2008 at 05:16:18PM +0100, Philipp Kolmann wrote:
>>> On Tue, Mar 11, 2008 at 05:09:41PM +0100, Richard Atterer wrote:
>>>> On Tue, Mar 11, 2008 at 04:55:40PM +0100, Philipp Kolmann wrote:
>>>>> I just wondered why my Logi 9k cam suddenly gave me 30fps at 640x420
>>>>> even in modest light (Skype and luvcview).
>>>>
>>>> Maybe because some program switched off auto-exposure and used a
>>>> hardwired 30fps one, together with an appropriate gain for your
>>>> lighting conditions?
>>>
>>> Well I just tested it again. After I unplug the cam and replug it, it
>>> works as expected on 10-15 fps.
>>>
>>> Then I attached it one to the windows with logitech drivers and suddenly
>>> it works much better.
>>>
>>> Well you could be right with the settings. How can I compare the
>>> settings?
>>
>> I looked at luvcview -l -f yuv -i 30 -s 640x480:
>>
>> With the windows drivers once touch the cam:
>>
>> V4L2_CID_BASE         (predefined controls):
>>  index:9963776    name:Brightness                       type:1 min:0    
>> max:255   step:1     def:128   now:128 index:9963777    name:Contrast      
>>                   type:1 min:0     max:255   step:1     def:32    now:33
>> index:9963778    name:Saturation                       type:1 min:0    
>> max:255   step:1     def:32    now:32 index:9963788    name:White Balance
>> Temperature, Auto  type:2 min:0     max:255   step:1     def:1     now:1
>> index:9963795    name:Gain                             type:1 min:0    
>> max:255   step:1     def:0     now:255 V4L2_CID_PRIVATE_BASE (driver
>> specific controls):
>>  Clean Up done Quit
>>
>> Here I get 32fps at 640.
>>
>> After power cycling the cam, I get the defaults from luvcview -l and 5fps.
>> After setting the Gain back to 255 the cam still only got me 5fps.
>> I haven't found how to disable auto-exposure so far.
> 
> luvcview doesn't enumerate all controls. The test application available at 
> http://linux-uvc.berlios.de/test.c should work better. Use it to enumerate 
> all controls with their current value.
> 
> Best regards,
> 
> Laurent Pinchart
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel

_________________________________________________________________
?Act?a tu pel?cula favorita y gana fabulosos premios!
http://cine.prodigymsn.com/nanometraje

From m.m.chitchian at student.tudelft.nl  Sat Mar 15 01:30:25 2008
From: m.m.chitchian at student.tudelft.nl (Mehdi Chitchian)
Date: Sat, 15 Mar 2008 01:30:25 +0100
Subject: [Linux-uvc-devel] Capturing from two philips spc520nc webcams
In-Reply-To: <200803140008.32825.laurent.pinchart@skynet.be>
References: <47D551D3.9040903@student.tudelft.nl>
	<200803110014.21425.laurent.pinchart@skynet.be>
	<47D72DE5.3010302@student.tudelft.nl>
	<200803140008.32825.laurent.pinchart@skynet.be>
Message-ID: <47DB18A1.50703@student.tudelft.nl>

Hi Laurent,

Laurent Pinchart wrote:
> Hi Mehdi,


> The driver automatically selects the lowest possible bandwidth compatible with 
> the requested video parameters among the bandwidths supported by the device. 
> Unfortunately the SPC520NC only supports a single bandwidth value:
> 
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       1
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0 
>       iInterface              0 
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x83  EP 3 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x1400  3x 0 bytes
>         bInterval               1
> 
> wMaxPacketSize is set to 0x1400 which is actually 3x 1024 bytes per frame, the 
> highest bandwidth allowed by the USB 2.0 spec.
> 

Thanks for the explanation. I will look into other uvc compliant webcams 
with less bandwidth requirements.

Regards,
-- 
Mehdi Chitchian
Faculty of Electrical Engineering, Mathematics and Computer Science
Delft University of Technology


From fragabr at gmail.com  Sat Mar 15 02:24:11 2008
From: fragabr at gmail.com (=?ISO-8859-1?Q?D=E2niel?= Fraga)
Date: Fri, 14 Mar 2008 22:24:11 -0300
Subject: [Linux-uvc-devel] Quickcam Pro 9000: current status
Message-ID: <20080314222411.29344ebe@tux.abusar.org.br>

Linux 2.6.24
Latest uvcvideo revision: 195

	Now i have my Quickcam Pro 9000 I'll test every improvement you
do to the driver. To start, I noticed that I can adjust just the
following settings:

fraga at tux ~/src$ luvcview -l
luvcview version 0.2.1 
Video driver: x11
A window manager is available
video /dev/video0 
Available controls of device 'Camera 1' (Type 1=Integer 2=Boolean 3=Menu 4=Button)
V4L2_CID_BASE         (predefined controls):
 index:9963776    name:Brightness                       type:1 min:0     max:255   step:1     def:128   now:128 
 index:9963777    name:Contrast                         type:1 min:0     max:255   step:1     def:32    now:32 
 index:9963778    name:Saturation                       type:1 min:0     max:255   step:1     def:32    now:32 
 index:9963788    name:White Balance Temperature, Auto  type:2 min:0     max:255   step:1     def:1     now:1 
 index:9963795    name:Gain                             type:1 min:0     max:255   step:1     def:0     now:0 
V4L2_CID_PRIVATE_BASE (driver specific controls):
 Clean Up done Quit 

	I tried to adjust for example the other controls and I get just:

ioctl querycontrol error 22 
Set Sharpness down error
ioctl querycontrol error 22 
Set Sharpness down error
ioctl querycontrol error 22 
Get value of light frequency filter error
Current light frequency filter: 50Hz
ioctl querycontrol error 22 
Switch light frequency filter error
ioctl querycontrol error 22 
Get value of light frequency filter error
Current light frequency filter: 50Hz
ioctl querycontrol error 22 
Switch light frequency filter error
ioctl querycontrol error 22 
Get value of light frequency filter error
Current light frequency filter: 50Hz
ioctl querycontrol error 22 
Switch light frequency filter error
ioctl querycontrol error 22 
Set Absolute Exposure down error
ioctl querycontrol error 22 
Set Absolute Exposure down error
ioctl querycontrol error 22 
Set Absolute Exposure down error
Set Auto Exposure off error
Set Auto Exposure off error

	Is it correct? I read some people could adjust exposure value, but it just gives error 22.

	Am I doing something wrong? Thank you!

-- 
Linux 2.6.24: Arr Matey! A Hairy Bilge Rat!
http://u-br.net http://www.abusar.org/FELIZ_2008.html
 - "Paco Fernandez - Mani" (A late night blend of deep-house &
downtempo chill [SomaFM] [SomaFM])




From philipp at kolmann.at  Sat Mar 15 07:13:36 2008
From: philipp at kolmann.at (Philipp Kolmann)
Date: Sat, 15 Mar 2008 07:13:36 +0100
Subject: [Linux-uvc-devel] Logitech 9000 and 640@30fps
In-Reply-To: <BLU137-W36C56B23533E9602FB80B5D90A0@phx.gbl>
References: <20080311155540.GA5412@kolmann.at>
	<20080311161618.GB5412@kolmann.at>
	<20080311164107.GA8630@kolmann.at>
	<200803140001.31749.laurent.pinchart@skynet.be>
	<BLU137-W36C56B23533E9602FB80B5D90A0@phx.gbl>
Message-ID: <20080315061336.GA18838@kolmann.at>

On Fri, Mar 14, 2008 at 05:47:38PM -0600, H?ctor Hugo Avil?s Arriaga wrote:
> Thanks for the previous tip.

I have to second that. This test app finally shows up the different settings.

I have dumped my settings of the cam both after a cold start with the defaults
and after letting windows onto the cam.

here is the diff:

pkolmann at wspk:~$ diff  -u logi9k-linsettings logi9k-winsettings
--- logi9k-linsettings  2008-03-14 11:30:28.000000000 +0100
+++ logi9k-winsettings  2008-03-14 11:30:12.000000000 +0100
-control 0x00980918 Power Line Frequency min 0 max 2 step 1 default 2 current 2.
+control 0x00980918 Power Line Frequency min 0 max 2 step 1 default 2 current 1.
   0: Disabled
   1: 50 Hz
   2: 60 Hz

-control 0x0098091a White Balance Temperature min 0 max 10000 step 10 default 4000 current 4000.
+control 0x0098091a White Balance Temperature min 0 max 10000 step 10 default 4000 current 7322.

-control 0x009a0902 Exposure (Absolute) min 1 max 10000 step 1 default 166 current 166.
-control 0x009a0903 Exposure, Auto Priority min 1 max 10000 step 1 default 166 current 1.
+control 0x009a0902 Exposure (Absolute) min 1 max 10000 step 1 default 166 current 338.
+control 0x009a0903 Exposure, Auto Priority min 1 max 10000 step 1 default 166 current 0.


So it boils down to Power Line Frequency, White balance and Exposure. I tried changing these 
settings with luvcview, but got only errors.

can this test.c be enhanced to be able to set those parameters?

thanks
Philipp


-- 
The more I learn about people, the more I like my dog!


From richard at 2008.atterer.net  Sat Mar 15 12:20:16 2008
From: richard at 2008.atterer.net (Richard Atterer)
Date: Sat, 15 Mar 2008 12:20:16 +0100
Subject: [Linux-uvc-devel] Logitech 9000 and 640@30fps
In-Reply-To: <20080315061336.GA18838@kolmann.at>
References: <20080311155540.GA5412@kolmann.at>
	<20080311161618.GB5412@kolmann.at>
	<20080311164107.GA8630@kolmann.at>
	<200803140001.31749.laurent.pinchart@skynet.be>
	<BLU137-W36C56B23533E9602FB80B5D90A0@phx.gbl>
	<20080315061336.GA18838@kolmann.at>
Message-ID: <20080315112016.GA3034@vilya>

On Sat, Mar 15, 2008 at 07:13:36AM +0100, Philipp Kolmann wrote:
> So it boils down to Power Line Frequency, White balance and Exposure. I tried changing these 
> settings with luvcview, but got only errors.

Have you tried uvcdynctrl?
Cheers,

  Richard

-- 
  __   _
  |_) /|  Richard Atterer     |  GnuPG key: 888354F7
  | \/?|  http://atterer.net  |  08A9 7B7D 3D13 3EF2 3D25  D157 79E6 F6DC 8883 54F7
  ? '` ?


From philipp at kolmann.at  Sat Mar 15 12:53:26 2008
From: philipp at kolmann.at (Philipp Kolmann)
Date: Sat, 15 Mar 2008 12:53:26 +0100
Subject: [Linux-uvc-devel] Logitech 9000 and 640@30fps
In-Reply-To: <20080315112016.GA3034@vilya>
References: <20080311155540.GA5412@kolmann.at>
	<20080311161618.GB5412@kolmann.at>
	<20080311164107.GA8630@kolmann.at>
	<200803140001.31749.laurent.pinchart@skynet.be>
	<BLU137-W36C56B23533E9602FB80B5D90A0@phx.gbl>
	<20080315061336.GA18838@kolmann.at> <20080315112016.GA3034@vilya>
Message-ID: <20080315115326.GA11596@kolmann.at>

On Sat, Mar 15, 2008 at 12:20:16PM +0100, Richard Atterer wrote:
> On Sat, Mar 15, 2008 at 07:13:36AM +0100, Philipp Kolmann wrote:
> > So it boils down to Power Line Frequency, White balance and Exposure. I
> > tried changing these settings with luvcview, but got only errors.
> 
> Have you tried uvcdynctrl?

Thanks for the hint.

Just tried it.

Got with the default libwecam 0.1.1 the following errors:

pkolmann at wspk:~/test/deb/uvc/app/uvcdyn/build$ make
[ 16%] Building C object Libs/libwebcam/CMakeFiles/webcam.dir/libwebcam.o
/home/pkolmann/test/deb/uvc/app/uvcdyn/Libs/libwebcam/libwebcam.c: In function 'get_control_id_from_v4l2':
/home/pkolmann/test/deb/uvc/app/uvcdyn/Libs/libwebcam/libwebcam.c:1683: error: 'V4L2_CID_PANTILT_RESET' undeclared (first use in this function)
/home/pkolmann/test/deb/uvc/app/uvcdyn/Libs/libwebcam/libwebcam.c:1683: error: (Each undeclared identifier is reported only once
/home/pkolmann/test/deb/uvc/app/uvcdyn/Libs/libwebcam/libwebcam.c:1683: error: for each function it appears in.)
/home/pkolmann/test/deb/uvc/app/uvcdyn/Libs/libwebcam/libwebcam.c:1688: error: 'V4L2_CID_WHITE_BALANCE_TEMPERATURE_AUTO' undeclared (first use in this function)
make[2]: *** [Libs/libwebcam/CMakeFiles/webcam.dir/libwebcam.o] Error 1
make[1]: *** [Libs/libwebcam/CMakeFiles/webcam.dir/all] Error 2
make: *** [all] Error 2

I have ifdef'ed those two controls for now in libwebcam.c.

Would it be possible to add those to uvc?

thanks
Philipp

-- 
The more I learn about people, the more I like my dog!


From philipp at kolmann.at  Sat Mar 15 13:15:26 2008
From: philipp at kolmann.at (Philipp Kolmann)
Date: Sat, 15 Mar 2008 13:15:26 +0100
Subject: [Linux-uvc-devel] Logitech 9000 and 640@30fps
In-Reply-To: <20080315115326.GA11596@kolmann.at>
References: <20080311155540.GA5412@kolmann.at>
	<20080311161618.GB5412@kolmann.at>
	<20080311164107.GA8630@kolmann.at>
	<200803140001.31749.laurent.pinchart@skynet.be>
	<BLU137-W36C56B23533E9602FB80B5D90A0@phx.gbl>
	<20080315061336.GA18838@kolmann.at> <20080315112016.GA3034@vilya>
	<20080315115326.GA11596@kolmann.at>
Message-ID: <20080315121526.GB11596@kolmann.at>

On Sat, Mar 15, 2008 at 12:53:26PM +0100, Philipp Kolmann wrote:
> On Sat, Mar 15, 2008 at 12:20:16PM +0100, Richard Atterer wrote:
> > On Sat, Mar 15, 2008 at 07:13:36AM +0100, Philipp Kolmann wrote:
> > > So it boils down to Power Line Frequency, White balance and Exposure. I
> > > tried changing these settings with luvcview, but got only errors.
> > 
> > Have you tried uvcdynctrl?
> 
> Thanks for the hint.

I got one step further. I was able to set the Power Line frequency without a problem.

I could read the current values of 'White Balance Temperature' and Exposure (Absolute) but setting them to the windows value failed:

./uvcdynctrl -s 'White Balance Temperature' 7322
[libwebcam] Unknown V4L2 control ID encountered: 10094851
ERROR: Unable to set new control value: A Video4Linux2 API call returned an unexpected error 5. (Code: 12)

./uvcdynctrl -s 'Exposure (Absolute)' 160
[libwebcam] Unknown V4L2 control ID encountered: 10094851
ERROR: Unable to set new control value: A Video4Linux2 API call returned an unexpected error 5. (Code: 12)

Getting (and setting) the value of Exposure, Auto Priority failed as well.

./uvcdynctrl -g 'Exposure, Auto Priority'
[libwebcam] Unknown V4L2 control ID encountered: 10094851
ERROR: Unknown control specified.

Thanks
Philipp

-- 
The more I learn about people, the more I like my dog!


From alex at seewald.at  Sat Mar 15 13:43:32 2008
From: alex at seewald.at (Dr. Alexander K. Seewald)
Date: Sat, 15 Mar 2008 13:43:32 +0100
Subject: [Linux-uvc-devel] Quickcam Pro 9000: current status
Message-ID: <20080315124332.GA26471@sdg.at>

Hi Daniel,

IMHO the 0.2.1 luvcview version does not support dynamic controls,
which the newest linux-uvc driver version provides. That is the
reason for the querycontrol 22 errors.

Please download libwebcam from ...
http://www.quickcamteam.net/software/libwebcam
... and set the controls via uvcdynctrl manually. The controls will
retain the same setting as long as the cam is plugged in and will
then revert to default settings. So, setting the controls, then
testing if it works via luvcview should work. I tested the software
autofocus in a similar setting.

Also, if you need this in your own application, take a look at my
autofocus code at http://projects.seewald.at .... it shows how to
work with both old driver (static controls) and new driver (dynamic
controls), setting up the focus control on-the-fly if necessary, but
using a preconfigured control (by uvcdynctrl) as well.

Best,
  Alex
-- 
Dr. Alexander K. Seewald

Seewald Solutions
www.seewald.at
Tel. +43(664)1106886
Fax. +43(1)2533033/2764


From fragabr at gmail.com  Sat Mar 15 17:16:31 2008
From: fragabr at gmail.com (=?ISO-8859-1?Q?D=E2niel?= Fraga)
Date: Sat, 15 Mar 2008 13:16:31 -0300
Subject: [Linux-uvc-devel] Quickcam Pro 9000: current status
In-Reply-To: <20080315124332.GA26471@sdg.at>
References: <20080315124332.GA26471@sdg.at>
Message-ID: <20080315131631.23dd3cbb@tux.abusar.org.br>

On Sat, 15 Mar 2008 13:43:32 +0100
"Dr. Alexander K. Seewald" <alex at seewald.at> wrote:

> Hi Daniel,

	Hi Dr. ;) Thanks for the answer.

> Please download libwebcam from ...
> http://www.quickcamteam.net/software/libwebcam
> ... and set the controls via uvcdynctrl manually. The controls will
> retain the same setting as long as the cam is plugged in and will
> then revert to default settings. So, setting the controls, then
> testing if it works via luvcview should work. I tested the software
> autofocus in a similar setting.

	I tried this, but there's a compilation issue:

fraga at tux ~/src/libwebcam-0.1.1/build$ make
Scanning dependencies of target webcam
[ 16%] [ 33%] Building C object Libs/libwebcam/CMakeFiles/webcam.dir/libwebcam.o
Building C object Libs/libwebcam/CMakeFiles/webcam.dir/dynctrl.o
/home/fraga/src/libwebcam-0.1.1/Libs/libwebcam/libwebcam.c: In function 'get_control_id_from_v4l2':
/home/fraga/src/libwebcam-0.1.1/Libs/libwebcam/libwebcam.c:1683: error: 'V4L2_CID_PANTILT_RESET' undeclared (first use in this function)
/home/fraga/src/libwebcam-0.1.1/Libs/libwebcam/libwebcam.c:1683: error: (Each undeclared identifier is reported only once
/home/fraga/src/libwebcam-0.1.1/Libs/libwebcam/libwebcam.c:1683: error: for each function it appears in.)
/home/fraga/src/libwebcam-0.1.1/Libs/libwebcam/libwebcam.c:1688: error: 'V4L2_CID_WHITE_BALANCE_TEMPERATURE_AUTO' undeclared (first use in this function)
make[2]: *** [Libs/libwebcam/CMakeFiles/webcam.dir/libwebcam.o] Error 1
make[2]: *** Waiting for unfinished jobs....
make[1]: *** [Libs/libwebcam/CMakeFiles/webcam.dir/all] Error 2
make: *** [all] Error 2

	Is there any hint?

> Also, if you need this in your own application, take a look at my
> autofocus code at http://projects.seewald.at .... it shows how to
> work with both old driver (static controls) and new driver (dynamic
> controls), setting up the focus control on-the-fly if necessary, but
> using a preconfigured control (by uvcdynctrl) as well.

	Thank you very much.


-- 


From fragabr at gmail.com  Sat Mar 15 17:30:22 2008
From: fragabr at gmail.com (=?ISO-8859-1?Q?D=E2niel?= Fraga)
Date: Sat, 15 Mar 2008 13:30:22 -0300
Subject: [Linux-uvc-devel] Quickcam Pro 9000: current status
References: <20080315124332.GA26471@sdg.at>
	<20080315131631.23dd3cbb@tux.abusar.org.br>
Message-ID: <20080315133022.42235f7c@tux.abusar.org.br>

On Sat, 15 Mar 2008 13:16:31 -0300
D?niel Fraga <fragabr at gmail.com> wrote:

> 	I tried this, but there's a compilation issue:

> /home/fraga/src/libwebcam-0.1.1/Libs/libwebcam/libwebcam.c:1683: error: 'V4L2_CID_PANTILT_RESET' undeclared (first use in this function)

	Sorry for asking too early. Here's the explanation:

http://forums.quickcamteam.net/showthread.php?tid=181

	I revert back to r178 and it compiled fine.

-- 
Linux 2.6.24: Arr Matey! A Hairy Bilge Rat!
http://u-br.net http://www.abusar.org/FELIZ_2008.html




From fragabr at gmail.com  Sat Mar 15 17:45:17 2008
From: fragabr at gmail.com (=?ISO-8859-1?Q?D=E2niel?= Fraga)
Date: Sat, 15 Mar 2008 13:45:17 -0300
Subject: [Linux-uvc-devel] Logitech 9000 and 640@30fps
References: <20080311155540.GA5412@kolmann.at>
	<20080311161618.GB5412@kolmann.at>
	<20080311164107.GA8630@kolmann.at>
	<200803140001.31749.laurent.pinchart@skynet.be>
	<BLU137-W36C56B23533E9602FB80B5D90A0@phx.gbl>
	<20080315061336.GA18838@kolmann.at> <20080315112016.GA3034@vilya>
	<20080315115326.GA11596@kolmann.at>
Message-ID: <20080315134517.75f3ab1f@tux.abusar.org.br>

On Sat, 15 Mar 2008 12:53:26 +0100
Philipp Kolmann <philipp at kolmann.at> wrote:

> /home/pkolmann/test/deb/uvc/app/uvcdyn/Libs/libwebcam/libwebcam.c:1683: error: 'V4L2_CID_PANTILT_RESET' undeclared (first use in this function)
> /home/pkolmann/test/deb/uvc/app/uvcdyn/Libs/libwebcam/libwebcam.c:1683: error: (Each undeclared identifier is reported only once
> /home/pkolmann/test/deb/uvc/app/uvcdyn/Libs/libwebcam/libwebcam.c:1683: error: for each function it appears in.)
> /home/pkolmann/test/deb/uvc/app/uvcdyn/Libs/libwebcam/libwebcam.c:1688: error: 'V4L2_CID_WHITE_BALANCE_TEMPERATURE_AUTO' undeclared (first use in this function)

http://forums.quickcamteam.net/showthread.php?tid=181

-- 
Linux 2.6.24: Arr Matey! A Hairy Bilge Rat!
http://u-br.net http://www.abusar.org/FELIZ_2008.html




From philipp at kolmann.at  Sat Mar 15 18:51:16 2008
From: philipp at kolmann.at (Philipp Kolmann)
Date: Sat, 15 Mar 2008 18:51:16 +0100
Subject: [Linux-uvc-devel] Quickcam Pro 9000: current status
In-Reply-To: <20080315133022.42235f7c@tux.abusar.org.br>
References: <20080315124332.GA26471@sdg.at>
	<20080315131631.23dd3cbb@tux.abusar.org.br>
	<20080315133022.42235f7c@tux.abusar.org.br>
Message-ID: <20080315175116.GA3469@kolmann.at>

On Sat, Mar 15, 2008 at 01:30:22PM -0300, D?niel Fraga wrote:
> On Sat, 15 Mar 2008 13:16:31 -0300
> D?niel Fraga <fragabr at gmail.com> wrote:
> 
> > 	I tried this, but there's a compilation issue:
> 
> > /home/fraga/src/libwebcam-0.1.1/Libs/libwebcam/libwebcam.c:1683: error:
> > 'V4L2_CID_PANTILT_RESET' undeclared (first use in this function)
> 
> 	Sorry for asking too early. Here's the explanation:
> 
> http://forums.quickcamteam.net/showthread.php?tid=181
> 
> 	I revert back to r178 and it compiled fine.

the other solution I use now, is to enclose the 2 case statement's with
#ifdef's.

Philipp

-- 
The more I learn about people, the more I like my dog!


From jlrmail at gmail.com  Sun Mar 16 15:30:38 2008
From: jlrmail at gmail.com (Jerry)
Date: Sun, 16 Mar 2008 10:30:38 -0400
Subject: [Linux-uvc-devel] Intermittent Webcam
Message-ID: <d03812580803160730q386a805eocf06dea1aee53cb8@mail.gmail.com>

I am having trouble getting my webcam working in Kubuntu.  I have luvcview
working somewhat, but have loaded wengo, skype,  Ekiga and a few others
trying to test out the camera, and now luvcview has intermittent problems

I believe I originally loaded the software by doing the following:

download uvcview-20070512.tar.gz and put it on my home directory

http://mxhaard.free.fr/spca50x/Investigation/uvc/luvcview-20070512.tar.gz

sudo -s
zcat luvcview-20070512.tar.gz |tar xvf -
cd luvcview-20070512/
make
make install
./luvcview -f yuv
./luvcview -f yuv -s 460x480

  This is loaded on an Acer 5630 laptop with Kubuntu.
Here is some information:

lsusb
Bus 005 Device 003: ID 046d:09b0 Logitech, Inc.


sudo lsmod | grep video

video                  18060  0

uvcvideo               48644  0
compat_ioctl32          2304  1 uvcvideo
videodev               29312  1 uvcvideo
v4l1_compat            15364  2 uvcvideo,videodev
v4l2_common            18432  2 uvcvideo,videodev

usbcore               138632  5 uvcvideo,usbhid,ehci_hcd,uhci_hcd

  I seem to have an intermittent problem.   When I am executing (luvcview -f
yuv).  I sometime get the following error:

luvcview version 0.2.1
Video driver: x11
A window manager is available
video /dev/video0
Unable to start capture: 71.
Error grabbing
 Clean Up done Quit

Sometimes it turns on the camera, but no video.. Other times it works fine.
Skype test turns on the camera light, but no video.

Any help would really be appreciated.

Thanks in advance.

Jerry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080316/71c31f6b/attachment.html>

From jp at binford3000.de  Sun Mar 16 14:07:41 2008
From: jp at binford3000.de (Janosch Peters)
Date: Sun, 16 Mar 2008 14:07:41 +0100
Subject: [Linux-uvc-devel] dynctrl doesnt get triggered by udev
	(ubuntu/hardy)
Message-ID: <frj62t$b8m$1@ger.gmane.org>

Hi,

the dynamic controls dont get added by the udev script as they should. I 
investigated a bit and found out that the script is looking for 
"idVendor" and "idProduct" files in the /sys diectory tree. The script 
logfile states:

---quote----
VID of new device: ''
PID of new device: ''
ERROR: Unable to extract USB VID from 
'/sys/sys/devices/pci0000:00/0000:00:1d.7/../idVendor'.
---quote----

I found two files which appear to hold those IDs: "vendor" and "device". 
So I changed the script to look for those files. But it still fails:

---quote----
VID of new device: '0x8086'
PID of new device: '0x265c'
ERROR: Device is not handled by uvcvideo but by 'ehci_hcd'.
---quote----

Any ideas?


cheers,
Janosch



From barsnick at gmx.net  Sun Mar 16 20:10:31 2008
From: barsnick at gmx.net (Moritz Barsnick)
Date: Sun, 16 Mar 2008 20:10:31 +0100
Subject: [Linux-uvc-devel] luvcview code enhancements (Was: Re: Intermittent
	Webcam)
In-Reply-To: <d03812580803160730q386a805eocf06dea1aee53cb8@mail.gmail.com>
References: <d03812580803160730q386a805eocf06dea1aee53cb8@mail.gmail.com>
Message-ID: <20080316191031.GB11048@sunshine.barsnick.net>

Hi,

I've been using luvcview to debug and bring up my cam (successfully
:-)), but have some improvements to suggest:

On Sun, Mar 16, 2008 at 10:30:38 -0400, Jerry wrote:
> Unable to start capture: 71.

I can't help with Jerry's problem, but I have some suggestions for code
improvements, e.g. to be able to tell Jerry that the above (71) is a
"protocol error".

The function perror() is being used in a few places, and
strerror[errno] in a few others, but not consequently throughout. I'm
attaching a patch which makes more use of perror(), hopefully appending
useful strings to all error messages. I know it has helped me in using
luvcview. The patch also removes the trailing "\n"s from perror(),
which mess up its display.

A second patch removes all whitespace at line ends. Admittedly, this is
purely cosmetic ;), but was an initial result of my cleanup of perror()
as mentioned above.

Oh, and since the changelog mentions the version 0.2.2, I thought it
might be okay to bump the version string in the Makefile as well. :)

If you think these patches are useful, feel free to integrate them into
its source.

Just to let you know,
thanks for listening and thanks for the tool!
Moritz
-------------- next part --------------
diff -ur luvcview-20070512/v4l2uvc.c luvcview-20070512-perror/v4l2uvc.c
--- luvcview-20070512/v4l2uvc.c	2007-05-08 17:39:40.000000000 +0200
+++ luvcview-20070512-perror/v4l2uvc.c	2008-03-16 19:47:44.000000000 +0100
@@ -41,7 +41,7 @@
  	snprintf(vd->videodevice, 12, "%s", device);
     printf("video %s \n", vd->videodevice);
     if ((vd->fd = open(vd->videodevice, O_RDWR)) == -1) {
-	perror("ERROR opening V4L interface \n");
+	perror("ERROR opening V4L interface");
 	exit(1);
     }
     memset(&vd->cap, 0, sizeof(struct v4l2_capability));
@@ -195,7 +195,7 @@
     } else {
       if (errno == EINVAL)
         continue;
-      printf ("error getting base controls");
+      perror ("error getting base controls");
       goto fatal_controls;
     }
   }
@@ -235,7 +235,7 @@
   memset (&control_s, 0, sizeof (control_s));
   configfile = fopen("luvcview.cfg", "w");
   if ( configfile == NULL) {
-    printf( "saving configfile luvcview.cfg failed, errno = %d (%s)\n", errno, strerror( errno));
+    perror("saving configfile luvcview.cfg failed");
   }
   else {
     fprintf(configfile, "id         value      # luvcview control settings configuration file\n");
@@ -292,7 +292,7 @@
   memset (&control, 0, sizeof (control));
   configfile = fopen("luvcview.cfg", "r");
   if ( configfile == NULL) {
-    printf( "configfile luvcview.cfg open failed, errno = %d (%s)\n", errno, strerror( errno));
+    perror("configfile luvcview.cfg open failed");
   }
   else {
     printf("loading controls from luvcview.cfg \n");
@@ -317,7 +317,7 @@
     int ret = 0;
 
     if ((vd->fd = open(vd->videodevice, O_RDWR)) == -1) {
-	perror("ERROR opening V4L interface \n");
+	perror("ERROR opening V4L interface");
 	exit(1);
     }
     memset(&vd->cap, 0, sizeof(struct v4l2_capability));
@@ -353,7 +353,7 @@
     vd->fmt.fmt.pix.field = V4L2_FIELD_ANY;
     ret = ioctl(vd->fd, VIDIOC_S_FMT, &vd->fmt);
     if (ret < 0) {
-	printf("Unable to set format: %d.\n", errno);
+	perror("Unable to set format");
 	goto fatal;
     }
     if ((vd->fmt.fmt.pix.width != vd->width) ||
@@ -383,7 +383,7 @@
 
     ret = ioctl(vd->fd, VIDIOC_REQBUFS, &vd->rb);
     if (ret < 0) {
-	printf("Unable to allocate buffers: %d.\n", errno);
+	perror("Unable to allocate buffers");
 	goto fatal;
     }
     /* map the buffers */
@@ -394,7 +394,7 @@
 	vd->buf.memory = V4L2_MEMORY_MMAP;
 	ret = ioctl(vd->fd, VIDIOC_QUERYBUF, &vd->buf);
 	if (ret < 0) {
-	    printf("Unable to query buffer (%d).\n", errno);
+	    perror("Unable to query buffer");
 	    goto fatal;
 	}
 	if (debug)
@@ -404,7 +404,7 @@
 			  vd->buf.length, PROT_READ, MAP_SHARED, vd->fd,
 			  vd->buf.m.offset);
 	if (vd->mem[i] == MAP_FAILED) {
-	    printf("Unable to map buffer (%d)\n", errno);
+	    perror("Unable to map buffer");
 	    goto fatal;
 	}
 	if (debug)
@@ -418,7 +418,7 @@
 	vd->buf.memory = V4L2_MEMORY_MMAP;
 	ret = ioctl(vd->fd, VIDIOC_QBUF, &vd->buf);
 	if (ret < 0) {
-	    printf("Unable to queue buffer (%d).\n", errno);
+	    perror("Unable to queue buffer");
 	    goto fatal;;
 	}
     }
@@ -435,7 +435,7 @@
 
     ret = ioctl(vd->fd, VIDIOC_STREAMON, &type);
     if (ret < 0) {
-	printf("Unable to %s capture: %d.\n", "start", errno);
+	perror("Unable to start capture");
 	return ret;
     }
     vd->isstreaming = 1;
@@ -449,7 +449,7 @@
 
     ret = ioctl(vd->fd, VIDIOC_STREAMOFF, &type);
     if (ret < 0) {
-	printf("Unable to %s capture: %d.\n", "stop", errno);
+	perror("Unable to stop capture");
 	return ret;
     }
     vd->isstreaming = 0;
@@ -470,7 +470,7 @@
     vd->buf.memory = V4L2_MEMORY_MMAP;
     ret = ioctl(vd->fd, VIDIOC_DQBUF, &vd->buf);
     if (ret < 0) {
-	printf("Unable to dequeue buffer (%d).\n", errno);
+	perror("Unable to dequeue buffer");
 	goto err;
     }
 
@@ -585,7 +585,7 @@
     }
     ret = ioctl(vd->fd, VIDIOC_QBUF, &vd->buf);
     if (ret < 0) {
-	printf("Unable to requeue buffer (%d).\n", errno);
+	perror("Unable to requeue buffer");
 	goto err;
     }
 
@@ -618,7 +618,7 @@
 int err =0;
     queryctrl->id = control;
     if ((err= ioctl(vd->fd, VIDIOC_QUERYCTRL, queryctrl)) < 0) {
-	printf("ioctl querycontrol error %d \n",errno);
+	perror("ioctl querycontrol error");
     } else if (queryctrl->flags & V4L2_CTRL_FLAG_DISABLED) {
 	printf("control %s disabled \n", (char *) queryctrl->name);
     } else if (queryctrl->flags & V4L2_CTRL_TYPE_BOOLEAN) {
@@ -948,7 +948,7 @@
 	}
 	printf("\n");
 	if (ret != 0 && errno != EINVAL) {
-		printf("ERROR enumerating frame intervals: %d\n", errno);
+		perror("ERROR enumerating frame intervals");
 		return errno;
 	}
 
@@ -990,7 +990,7 @@
 		fsize.index++;
 	}
 	if (ret != 0 && errno != EINVAL) {
-		printf("ERROR enumerating frame sizes: %d\n", errno);
+		perror("ERROR enumerating frame sizes");
 		return errno;
 	}
 
@@ -1016,7 +1016,7 @@
 			printf("  Unable to enumerate frame sizes.\n");
 	}
 	if (errno != EINVAL) {
-		printf("ERROR enumerating frame formats: %d\n", errno);
+		perror("ERROR enumerating frame formats");
 		return errno;
 	}
 
-------------- next part --------------
diff -ur luvcview-20070512/avilib.c luvcview-20070512-whitespace/avilib.c
--- luvcview-20070512/avilib.c	2006-09-20 17:47:36.000000000 +0200
+++ luvcview-20070512-whitespace/avilib.c	2008-03-16 19:37:43.000000000 +0100
@@ -616,7 +616,7 @@
       readable in the most cases */
 
    idxerror = 0;
-   //   fprintf(stderr, "pos=%lu, index_len=%ld             \n", AVI->pos, AVI->n_idx*16);
+   //   fprintf(stderr, "pos=%lu, index_len=%ld\n", AVI->pos, AVI->n_idx*16);
    ret = avi_add_chunk(AVI, (unsigned char *)"idx1", (unsigned char *)AVI->idx, AVI->n_idx*16);
    hasIndex = (ret==0);
    //fprintf(stderr, "pos=%lu, index_len=%d\n", AVI->pos, hasIndex);
diff -ur luvcview-20070512/luvcview.c luvcview-20070512-whitespace/luvcview.c
--- luvcview-20070512/luvcview.c	2007-05-12 12:03:14.000000000 +0200
+++ luvcview-20070512-whitespace/luvcview.c	2008-03-16 19:37:43.000000000 +0100
@@ -238,7 +238,7 @@
 
 
 
-    printf("luvcview version %s \n", version);
+    printf("luvcview version %s\n", version);
     for (i = 1; i < argc; i++) {
 	/* skip bad arguments */
 	if (argv[i] == NULL || *argv[i] == 0 || *argv[i] != '-') {
@@ -287,24 +287,24 @@
 
 	    width = strtoul(sizestring, &separateur, 10);
 	    if (*separateur != 'x') {
-		printf("Error in size use -s widthxheight \n");
+		printf("Error in size use -s widthxheight\n");
 		exit(1);
 	    } else {
 		++separateur;
 		height = strtoul(separateur, &separateur, 10);
 		if (*separateur != 0)
-		    printf("hmm.. dont like that!! trying this height \n");
-		printf(" size width: %d height: %d \n", width, height);
+		    printf("hmm.. dont like that!! trying this height\n");
+		printf(" size width: %d height: %d\n", width, height);
 	    }
 	}
 	if (strcmp(argv[i], "-i") == 0){
 	  if (i + 1 >= argc) {
-	    printf("No parameter specified with -i, aborting. \n");
+	    printf("No parameter specified with -i, aborting.\n");
 	    exit(1);
 	  }
 	  fpsstring = strdup(argv[i + 1]);
 	  fps = strtoul(fpsstring, &separateur, 10);
-	  printf(" interval: %d fps \n", fps);
+	  printf(" interval: %d fps\n", fps);
 	}
 	if (strcmp(argv[i], "-S") == 0) {
 	    /* Enable raw stream capture from the start */
@@ -340,14 +340,14 @@
 	    readconfigfile = 1;
 	}
 	if (strcmp(argv[i], "-h") == 0) {
-	    printf("usage: uvcview [-h -d -g -f -s -i -c -o -C -S -L -l -r] \n");
-	    printf("-h	print this message \n");
+	    printf("usage: uvcview [-h -d -g -f -s -i -c -o -C -S -L -l -r]\n");
+	    printf("-h	print this message\n");
 	    printf("-d	/dev/videoX       use videoX device\n");
-	    printf("-g	use read method for grab instead mmap \n");
-	    printf("-w	disable SDL hardware accel. \n");
-	    printf("-f	video format  default jpg  others options are yuv jpg \n");
-	    printf("-i	fps           use specified frame interval \n");
-	    printf("-s	widthxheight      use specified input size \n");
+	    printf("-g	use read method for grab instead mmap\n");
+	    printf("-w	disable SDL hardware accel.\n");
+	    printf("-f	video format  default jpg  others options are yuv jpg\n");
+	    printf("-i	fps           use specified frame interval\n");
+	    printf("-s	widthxheight      use specified input size\n");
 	    printf("-c	enable raw frame capturing for the first frame\n");
 	    printf("-C	enable raw frame stream capturing from the start\n");
 	    printf("-S	enable raw stream capturing from the start\n");
@@ -487,7 +487,7 @@
 	}
 	lasttime = currtime;
 	if (uvcGrab(videoIn) < 0) {
-	    printf("Error grabbing \n");
+	    printf("Error grabbing\n");
 	    break;
 	}
 
@@ -540,7 +540,7 @@
     free(videoIn);
     destroyButt();
     freeLut();
-    printf(" Clean Up done Quit \n");
+    printf(" Clean Up done Quit\n");
     SDL_Quit();
 }
 
@@ -640,7 +640,7 @@
 	case A_CONTRAST_UP:
 		if ((value =
 		     v4l2UpControl(videoIn, V4L2_CID_CONTRAST)) < 0)
-		    printf("Set Contrast up error \n");
+		    printf("Set Contrast up error\n");
 	    break;
 	case A_SATURATION_UP:
 		if ((value =
@@ -822,7 +822,7 @@
             if ((value = ioctl(videoIn->fd, VIDIOC_S_CTRL, &control)) < 0)
               printf("Set Auto Exposure on error\n");
             else
-              printf("Auto Exposure set to %d \n", control.value);
+              printf("Auto Exposure set to %d\n", control.value);
             break;
           case A_EXPOSURE_OFF:
             control.id    =V4L2_CID_EXPOSURE_AUTO;
@@ -830,7 +830,7 @@
             if ((value = ioctl(videoIn->fd, VIDIOC_S_CTRL, &control)) < 0)
               printf("Set Auto Exposure off error\n");
             else
-              printf("Auto Exposure set to %d \n", control.value);
+              printf("Auto Exposure set to %d\n", control.value);
             break;
           case A_BALANCE_UP:
             if ((value = v4l2UpControl(videoIn, V4L2_CID_WHITE_BALANCE_TEMPERATURE)) < 0)
@@ -846,7 +846,7 @@
             if ((value = ioctl(videoIn->fd, VIDIOC_S_CTRL, &control)) < 0)
               printf("Set Auto Balance on error\n");
             else
-              printf("Auto Balance set to %d \n", control.value);
+              printf("Auto Balance set to %d\n", control.value);
             break;
           case A_BALANCE_OFF:
             control.id    =V4L2_CID_WHITE_BALANCE_TEMPERATURE_AUTO;
@@ -854,14 +854,14 @@
             if ((value = ioctl(videoIn->fd, VIDIOC_S_CTRL, &control)) < 0)
               printf("Set Auto Balance off error\n");
             else
-              printf("Auto Balance set to %d \n", control.value);
+              printf("Auto Balance set to %d\n", control.value);
             break;
           case A_SAVE:
-	   printf("Save controls \n");
+	   printf("Save controls\n");
             save_controls(videoIn->fd);
             break;
           case A_LOAD:
-	   printf("load controls \n");
+	   printf("load controls\n");
             load_controls(videoIn->fd);
           break;
 	default:
@@ -881,7 +881,7 @@
 	
 	}
 	SDL_Delay(50);
-	//printf("fp/s %d \n",frmrate);
+	//printf("fp/s %d\n",frmrate);
     }				//end main loop
 
 	/* Close the stream capture file */
diff -ur luvcview-20070512/utils.c luvcview-20070512-whitespace/utils.c
--- luvcview-20070512/utils.c	2007-05-12 12:13:11.000000000 +0200
+++ luvcview-20070512-whitespace/utils.c	2008-03-16 19:37:43.000000000 +0100
@@ -191,7 +191,7 @@
 	    return 0;
 
 	case M_DQT:
-	//printf("find DQT \n");
+	//printf("find DQT\n");
 	    lq = getword();
 	    while (lq > 2) {
 		pq = getbyte();
@@ -208,7 +208,7 @@
 	    break;
 
 	case M_DHT:
-	//printf("find DHT \n");
+	//printf("find DHT\n");
 	    l = getword();
 	    while (l > 2) {
 		int hufflen[16], k;
@@ -235,7 +235,7 @@
 	    break;
 
 	case M_DRI:
-	printf("find DRI \n");
+	printf("find DRI\n");
 	    l = getword();
 	    info.dri = getword();
 	    break;
@@ -385,7 +385,7 @@
     if (i != 0 || j != 63 || m != 0) {
     	printf("hmm FW error,not seq DCT ??\n");
     }
-   // printf("ext huffman table %d \n",isInitHuffman);
+   // printf("ext huffman table %d\n",isInitHuffman);
     if(!isInitHuffman) {
     	if(huffman_init() < 0)
 		return -ERR_BAD_TABLES;
@@ -1250,7 +1250,7 @@
 if(picture){
 	Pyuv422torgb24(buf, picture, width, height);
 }else{
-	printf(" no room to take a picture \n");
+	printf(" no room to take a picture\n");
 	return 0;
 }
 if(name){
diff -ur luvcview-20070512/v4l2uvc.c luvcview-20070512-whitespace/v4l2uvc.c
--- luvcview-20070512/v4l2uvc.c	2007-05-08 17:39:40.000000000 +0200
+++ luvcview-20070512-whitespace/v4l2uvc.c	2008-03-16 19:53:00.000000000 +0100
@@ -39,7 +39,7 @@
 	return -1;
 	vd->videodevice = (char *) calloc(1, 16 * sizeof(char));
  	snprintf(vd->videodevice, 12, "%s", device);
-    printf("video %s \n", vd->videodevice);
+    printf("video %s\n", vd->videodevice);
     if ((vd->fd = open(vd->videodevice, O_RDWR)) == -1) {
 	perror("ERROR opening V4L interface \n");
 	exit(1);
@@ -86,7 +86,7 @@
     vd->status = (char *) calloc(1, 100 * sizeof(char));
     vd->pictName = (char *) calloc(1, 80 * sizeof(char));
     snprintf(vd->videodevice, 12, "%s", device);
-    printf("video %s \n", vd->videodevice);
+    printf("video %s\n", vd->videodevice);
     vd->toggleAvi = 0;
     vd->avifile = NULL;
     vd->avifilename = avifilename;
@@ -108,7 +108,7 @@
     vd->bytesWritten = 0;
     vd->framesWritten = 0;
     if (init_v4l2(vd) < 0) {
-	printf(" Init v4L2 failed !! exit fatal \n");
+	printf(" Init v4L2 failed !! exit fatal\n");
 	goto error;;
     }
     /* alloc a temp buffer to reconstruct the pict */
@@ -187,7 +187,7 @@
       control_s.id=queryctrl.id;
       ioctl(vd, VIDIOC_G_CTRL, &control_s);
       SDL_Delay(10);
-      printf (" index:%-10d name:%-32s type:%d min:%-5d max:%-5d step:%-5d def:%-5d now:%d \n",
+      printf (" index:%-10d name:%-32s type:%d min:%-5d max:%-5d step:%-5d def:%-5d now:%d\n",
               queryctrl.id, queryctrl.name, queryctrl.type, queryctrl.minimum,
               queryctrl.maximum, queryctrl.step, queryctrl.default_value, control_s.value);
       if (queryctrl.type == V4L2_CTRL_TYPE_MENU)
@@ -210,7 +210,7 @@
       control_s.id=queryctrl.id;
       ioctl(vd, VIDIOC_G_CTRL, &control_s);
       SDL_Delay(20);
-      printf (" index:%-10d name:%-32s type:%d min:%-5d max:%-5d step:%-5d def:%-5d now:%d \n",
+      printf (" index:%-10d name:%-32s type:%d min:%-5d max:%-5d step:%-5d def:%-5d now:%d\n",
               queryctrl.id, queryctrl.name, queryctrl.type, queryctrl.minimum,
               queryctrl.maximum, queryctrl.step, queryctrl.default_value, control_s.value);
       if (queryctrl.type == V4L2_CTRL_TYPE_MENU)
@@ -295,16 +295,16 @@
     printf( "configfile luvcview.cfg open failed, errno = %d (%s)\n", errno, strerror( errno));
   }
   else {
-    printf("loading controls from luvcview.cfg \n");
+    printf("loading controls from luvcview.cfg\n");
     char buffer[512]; 
     fgets(buffer, sizeof(buffer), configfile);
     while (NULL !=fgets(buffer, sizeof(buffer), configfile) )
       {
         sscanf(buffer, "%i%i", &control.id, &control.value);
         if (ioctl(vd, VIDIOC_S_CTRL, &control))
-          printf("ERROR id:%d val:%d \n", control.id, control.value);
+          printf("ERROR id:%d val:%d\n", control.id, control.value);
         else
-          printf("OK    id:%d val:%d \n", control.id, control.value);
+          printf("OK    id:%d val:%d\n", control.id, control.value);
         SDL_Delay(20);
       }   
     fclose(configfile);
@@ -358,7 +358,7 @@
     }
     if ((vd->fmt.fmt.pix.width != vd->width) ||
 	(vd->fmt.fmt.pix.height != vd->height)) {
-	printf(" format asked unavailable get width %d height %d \n",
+	printf(" format asked unavailable get width %d height %d\n",
 	       vd->fmt.fmt.pix.width, vd->fmt.fmt.pix.height);
 	vd->width = vd->fmt.fmt.pix.width;
 	vd->height = vd->fmt.fmt.pix.height;
@@ -569,7 +569,7 @@
 	    goto err;
 	}
 	if (debug)
-	    printf("bytes in used %d \n", vd->buf.bytesused);
+	    printf("bytes in used %d\n", vd->buf.bytesused);
 	break;
     case V4L2_PIX_FMT_YUYV:
 	if (vd->buf.bytesused > vd->framesizeIn)
@@ -620,13 +620,13 @@
     if ((err= ioctl(vd->fd, VIDIOC_QUERYCTRL, queryctrl)) < 0) {
 	printf("ioctl querycontrol error %d \n",errno);
     } else if (queryctrl->flags & V4L2_CTRL_FLAG_DISABLED) {
-	printf("control %s disabled \n", (char *) queryctrl->name);
+	printf("control %s disabled\n", (char *) queryctrl->name);
     } else if (queryctrl->flags & V4L2_CTRL_TYPE_BOOLEAN) {
 	return 1;
     } else if (queryctrl->type & V4L2_CTRL_TYPE_INTEGER) {
 	return 0;
     } else {
-	printf("contol %s unsupported  \n", (char *) queryctrl->name);
+	printf("contol %s unsupported\n", (char *) queryctrl->name);
     }
     return -1;
 }
@@ -683,7 +683,7 @@
     val_def = queryctrl.default_value;
     current = v4l2GetControl(vd, control);
     current += step;
-    printf("max %d, min %d, step %d, default %d ,current %d \n",max,min,step,val_def,current);
+    printf("max %d, min %d, step %d, default %d ,current %d\n",max,min,step,val_def,current);
     if (current <= max) {
 	control_s.id = control;
 	control_s.value = current;
@@ -693,7 +693,7 @@
 	}            
         printf ("Control name:%s set to value:%d\n", queryctrl.name, control_s.value);
     } else {
-      printf ("Control name:%s already has max value:%d \n", queryctrl.name, max); 
+      printf ("Control name:%s already has max value:%d\n", queryctrl.name, max); 
     }
      return control_s.value;
 }
@@ -711,7 +711,7 @@
     val_def = queryctrl.default_value;
     current = v4l2GetControl(vd, control);
     current -= step;
-    printf("max %d, min %d, step %d, default %d ,current %d \n",max,min,step,val_def,current);
+    printf("max %d, min %d, step %d, default %d ,current %d\n",max,min,step,val_def,current);
     if (current >= min) {
 	control_s.id = control;
 	control_s.value = current;
@@ -722,7 +722,7 @@
     printf ("Control name:%s set to value:%d\n", queryctrl.name, control_s.value);
     }
     else {
-      printf ("Control name:%s already has min value:%d \n", queryctrl.name, min); 
+      printf ("Control name:%s already has min value:%d\n", queryctrl.name, min); 
     }
     return control_s.value;
 }
-------------- next part --------------
diff -ur luvcview-20070512/Makefile luvcview-20070512-version/Makefile
--- luvcview-20070512/Makefile	2007-05-12 11:57:17.000000000 +0200
+++ luvcview-20070512-version/Makefile	2008-02-24 01:23:02.000000000 +0100
@@ -12,7 +12,7 @@
 SDLLIBS = $(shell sdl-config --libs) 
 SDLFLAGS = $(shell sdl-config --cflags)
 #LIBX11FLAGS= -I/usr/X11R6/include -L/usr/X11R6/lib
-VERSION = 0.2.1
+VERSION = 0.2.2
 
 #WARNINGS = -Wall \
 #           -Wundef -Wpointer-arith -Wbad-function-cast \

From mxhaard at magic.fr  Mon Mar 17 13:28:50 2008
From: mxhaard at magic.fr (Michel Xhaard)
Date: Mon, 17 Mar 2008 13:28:50 +0100
Subject: [Linux-uvc-devel] luvcview code enhancements (Was: Re:
	Intermittent Webcam)
In-Reply-To: <20080316191031.GB11048@sunshine.barsnick.net>
References: <d03812580803160730q386a805eocf06dea1aee53cb8@mail.gmail.com>
	<20080316191031.GB11048@sunshine.barsnick.net>
Message-ID: <200803171328.50668.mxhaard@magic.fr>

Le dimanche 16 mars 2008 20:10, Moritz Barsnick a ?crit?:
> Hi,
>
> I've been using luvcview to debug and bring up my cam (successfully
>
> :-)), but have some improvements to suggest:
>
> On Sun, Mar 16, 2008 at 10:30:38 -0400, Jerry wrote:
> > Unable to start capture: 71.
>
> I can't help with Jerry's problem, but I have some suggestions for code
> improvements, e.g. to be able to tell Jerry that the above (71) is a
> "protocol error".
>
> The function perror() is being used in a few places, and
> strerror[errno] in a few others, but not consequently throughout. I'm
> attaching a patch which makes more use of perror(), hopefully appending
> useful strings to all error messages. I know it has helped me in using
> luvcview. The patch also removes the trailing "\n"s from perror(),
> which mess up its display.
>
> A second patch removes all whitespace at line ends. Admittedly, this is
> purely cosmetic ;), but was an initial result of my cleanup of perror()
> as mentioned above.
>
> Oh, and since the changelog mentions the version 0.2.2, I thought it
> might be okay to bump the version string in the Makefile as well. :)
>
> If you think these patches are useful, feel free to integrate them into
> its source.
>
> Just to let you know,
> thanks for listening and thanks for the tool!
> Moritz
Moritz,
Thanks for all your patchs ;-)
regards
-- 
Michel Xhaard
http://mxhaard.free.fr


From philipp at kolmann.at  Mon Mar 17 20:48:34 2008
From: philipp at kolmann.at (Philipp Kolmann)
Date: Mon, 17 Mar 2008 20:48:34 +0100
Subject: [Linux-uvc-devel] uvcdynctrl fails with v4l2 error
Message-ID: <20080317194834.GA20650@kolmann.at>

Hi,

with the new svn release of libwebcam and uvcdynctrl it works again with
latest uvc releases.

uvcdynctrl -d video1 -s 'White Balance Temperature' 7000
[libwebcam] Unknown custom V4L2 control ID encountered: 134217728
(V4L2_CID_PRIVATE_BASE + 0)
[libwebcam] Unknown V4L2 control ID encountered: 10094851
ERROR: Unable to set new control value: A Video4Linux2 API call returned an
unexpected error 5. (Code: 12)

Mar 17 20:46:11 chief kernel: uvcvideo: Failed to query (1) UVC control 10
(unit 2) : -32 (exp. 2).

I am not sure if this is a uvcvideo bug or an error in libwebcam.

Thanks
Philipp

-- 
The more I learn about people, the more I like my dog!


From fragabr at gmail.com  Mon Mar 17 21:42:15 2008
From: fragabr at gmail.com (=?ISO-8859-1?Q?D=E2niel?= Fraga)
Date: Mon, 17 Mar 2008 17:42:15 -0300
Subject: [Linux-uvc-devel] v4l-dvb tree x uvcvideo driver
Message-ID: <20080317174215.7db4069f@tux.abusar.org.br>

	When I install the latest v4l-dvb tree:

http://linuxtv.org/hg/v4l-dvb

	uvcvideo can't be loaded:

uvcvideo: disagrees about version of symbol video_devdata
uvcvideo: Unknown symbol video_devdata
uvcvideo: disagrees about version of symbol video_unregister_device
uvcvideo: Unknown symbol video_unregister_device
uvcvideo: disagrees about version of symbol video_device_alloc
uvcvideo: Unknown symbol video_device_alloc
uvcvideo: disagrees about version of symbol video_register_device
uvcvideo: Unknown symbol video_register_device
uvcvideo: disagrees about version of symbol video_device_release
uvcvideo: Unknown symbol video_device_release

	and vice-versa (when I install the official 2.6.24 kernel
modules together with uvcvideo, I can't load v4l-dvb modules).

	So, when both will agree with each other?

	Thank you!

	Ps: I need some modules from v4l-dvb tree because they weren't
merger in the official kernel yet.

-- 
Linux 2.6.24: Arr Matey! A Hairy Bilge Rat!
http://u-br.net http://www.abusar.org/FELIZ_2008.html




From laurent.pinchart at skynet.be  Tue Mar 18 01:18:43 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 18 Mar 2008 01:18:43 +0100
Subject: [Linux-uvc-devel] uvcvideo driver modprobing problem
In-Reply-To: <7fedbc910803132343n26ed04d2x950d75431a769b8b@mail.gmail.com>
References: <7fedbc910803121216l556d404bucedb2adac3d0669a@mail.gmail.com>
	<200803140023.22373.laurent.pinchart@skynet.be>
	<7fedbc910803132343n26ed04d2x950d75431a769b8b@mail.gmail.com>
Message-ID: <200803180118.43574.laurent.pinchart@skynet.be>

On Friday 14 March 2008, shacky wrote:
> > The problem reported by the original poster is often seen when compiling
> >  uvcvideo against a vanilla kernel and running the v4l drivers from the
> >  v4l-dvb branch.
>
> Yes! This is my problem.
> I had to compile the v4l drivers from the CVS repositories because I
> needed the em28xx module.
> So is there a way to solve this problem?

Compiling the UVC driver against the v4l-dvb tree should work. Search the 
mailing list archive for a thread called "uvcvideo and mercurial v4l-dvb 
conflicts".

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Mar 18 01:25:29 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 18 Mar 2008 01:25:29 +0100
Subject: [Linux-uvc-devel] Logitech: Quickcam Pro 9000 x Orbit AF
In-Reply-To: <20080314075155.GA30893@sdg.at>
References: <20080314075155.GA30893@sdg.at>
Message-ID: <200803180125.29343.laurent.pinchart@skynet.be>

On Friday 14 March 2008, Dr. Alexander K. Seewald wrote:
> Still image capture support would be cool. If anyone needs my help,
> just ask. This could probably improve the handling of multiple
> cameras, as we could leave all connections open and request images
> as needed... which is not possible with the current USB-bandwidth-
> hungry video streaming protocol.

Still image capture wouldn't help much. Most devices don't have a separate 
endpoint to transfer still images but implement still image capture using 
method 1 defined in the UVC spec as

"Method 1 - The host software will extract the next available video frame from 
the active video pipe in the relevant VideoStreaming interface upon receiving 
the hardware trigger event. The hardware does not interrupt or alter the 
video stream in this case. For this method, the still image frame is always 
the same size as the video frames being streamed."

This make still image capture a software-only process and requires an active 
video stream to work.

Method 1 could be easily implemented if we had a proper still image transfer 
API in V4L2, but in the end it wouldn't help much. Forwarding the button 
press event to userspace would in my opinion be more useful.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Mar 18 01:29:50 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 18 Mar 2008 01:29:50 +0100
Subject: [Linux-uvc-devel] Logitech 9000 and 640@30fps
In-Reply-To: <BLU137-W36C56B23533E9602FB80B5D90A0@phx.gbl>
References: <20080311155540.GA5412@kolmann.at>
	<200803140001.31749.laurent.pinchart@skynet.be>
	<BLU137-W36C56B23533E9602FB80B5D90A0@phx.gbl>
Message-ID: <200803180129.50193.laurent.pinchart@skynet.be>

On Saturday 15 March 2008, H?ctor Hugo Avil?s Arriaga wrote:
> Hello Laurent,
>
> Thanks for the previous tip.
> I'm trying to list the camera controls (Logitech QuickCam Pro 9000) with
> the example:
>
> http://linux-uvc.berlios.de/test.c
>
> Unfortunately, the line:
>
> 		query.id |= V4L2_CTRL_FLAG_NEXT_CTRL;
> #endif
> 		ret = ioctl(dev, VIDIOC_QUERYCTRL, &query);
>
> returns ret = -1.
>
> :(

As hinted by Richard Atterer, you should try uvcdynctrl. The test application 
I posted is really, well, a test application that I've developed for personal 
use :-)

Best regards,

Laurent Pinchart


From bernhard.kleine at gmx.net  Sat Mar 15 20:04:30 2008
From: bernhard.kleine at gmx.net (Dr. Bernhard Kleine)
Date: Sat, 15 Mar 2008 20:04:30 +0100
Subject: [Linux-uvc-devel] Installation failure with kernel	2.6.24-1-686
	under Debian
In-Reply-To: <20080312212122.GA4253@plankton.ifup.org>
References: <1205354478.5234.13.camel@amd2000bk.kleinedaheim>
	<20080312212122.GA4253@plankton.ifup.org>
Message-ID: <1205607870.4703.3.camel@amd2000bk.kleinedaheim>


On Mi, 2008-03-12 at 14:21 -0700, Brandon Philips wrote:
> On 21:41 Wed 12 Mar 2008, Dr. Bernhard Kleine wrote:
> > I installed the latest debian version from unstable
> > 
> >  apt-cache policy linux-uvc-source
> > linux-uvc-source:
> >   Installiert:0.1.0.svn120-2
> >   M?gliche Pakete:0.1.0.svn120-2
> >   Versions-Tabelle:
> >  *** 0.1.0.svn120-2 0
> >         500 http://ftp.de.debian.org unstable/main Packages
> >         100 /var/lib/dpkg/status
> > 
> > according to the README.Debian
> > 
> > I did 
> > m-a prepare
> > m-a a-i linux-uvc
> 
> The version of UVC in Debian is too old for the version of the Kernel
> you are building against.  Please file a bug with Debian or use the
> latest version of the UVC driver from SVN:
> 
> # svn checkout svn://svn.berlios.de/linux-uvc/linux-uvc/trunk uvc
> # cd uvc
> # make
> # su
> # make install
> 
> Thanks,
> 
> 	Brandon

Merci!

Using luvcview I can see a picture!


I have now started ekiga and get the following error: Video format not
supported. How can I change that?

Bernhard



From laurent.pinchart at skynet.be  Tue Mar 18 01:35:05 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 18 Mar 2008 01:35:05 +0100
Subject: [Linux-uvc-devel] dynctrl doesnt get triggered by udev
	(ubuntu/hardy)
In-Reply-To: <frj62t$b8m$1@ger.gmane.org>
References: <frj62t$b8m$1@ger.gmane.org>
Message-ID: <200803180135.05298.laurent.pinchart@skynet.be>

Hi Janosch,

On Sunday 16 March 2008, Janosch Peters wrote:
> Hi,
>
> the dynamic controls dont get added by the udev script as they should. I
> investigated a bit and found out that the script is looking for
> "idVendor" and "idProduct" files in the /sys diectory tree. The script
> logfile states:
>
> ---quote----
> VID of new device: ''
> PID of new device: ''
> ERROR: Unable to extract USB VID from
> '/sys/sys/devices/pci0000:00/0000:00:1d.7/../idVendor'.
> ---quote----
>
> I found two files which appear to hold those IDs: "vendor" and "device".
> So I changed the script to look for those files. But it still fails:
>
> ---quote----
> VID of new device: '0x8086'
> PID of new device: '0x265c'
> ERROR: Device is not handled by uvcvideo but by 'ehci_hcd'.
> ---quote----
>
> Any ideas?

The uvcdynctrl application and the associated scripts are developed and 
maintained by Martin Rubli from Logitech. Could you please report the problem 
in the www.quickcamteam.net forums ?

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Mar 18 01:39:25 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 18 Mar 2008 01:39:25 +0100
Subject: [Linux-uvc-devel] v4l-dvb tree x uvcvideo driver
In-Reply-To: <20080317174215.7db4069f@tux.abusar.org.br>
References: <20080317174215.7db4069f@tux.abusar.org.br>
Message-ID: <200803180139.25179.laurent.pinchart@skynet.be>

Hi D?niel,

On Monday 17 March 2008, D?niel Fraga wrote:
> 	When I install the latest v4l-dvb tree:
>
> http://linuxtv.org/hg/v4l-dvb
>
> 	uvcvideo can't be loaded:
>
> uvcvideo: disagrees about version of symbol video_devdata
> uvcvideo: Unknown symbol video_devdata
> uvcvideo: disagrees about version of symbol video_unregister_device
> uvcvideo: Unknown symbol video_unregister_device
> uvcvideo: disagrees about version of symbol video_device_alloc
> uvcvideo: Unknown symbol video_device_alloc
> uvcvideo: disagrees about version of symbol video_register_device
> uvcvideo: Unknown symbol video_register_device
> uvcvideo: disagrees about version of symbol video_device_release
> uvcvideo: Unknown symbol video_device_release
>
> 	and vice-versa (when I install the official 2.6.24 kernel
> modules together with uvcvideo, I can't load v4l-dvb modules).
>
> 	So, when both will agree with each other?
>
> 	Thank you!
>
> 	Ps: I need some modules from v4l-dvb tree because they weren't
> merger in the official kernel yet.

Check the mailing list archive for a thread named "uvcvideo and mercurial 
v4l-dvb conflicts.". It should help you getting both v4l-dvb and uvcvideo 
working together.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Mar 18 01:42:39 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 18 Mar 2008 01:42:39 +0100
Subject: [Linux-uvc-devel] uvcdynctrl fails with v4l2 error
In-Reply-To: <20080317194834.GA20650@kolmann.at>
References: <20080317194834.GA20650@kolmann.at>
Message-ID: <200803180142.39290.laurent.pinchart@skynet.be>

Hi Philipp,

On Monday 17 March 2008, Philipp Kolmann wrote:
> Hi,
>
> with the new svn release of libwebcam and uvcdynctrl it works again with
> latest uvc releases.
>
> uvcdynctrl -d video1 -s 'White Balance Temperature' 7000
> [libwebcam] Unknown custom V4L2 control ID encountered: 134217728
> (V4L2_CID_PRIVATE_BASE + 0)
> [libwebcam] Unknown V4L2 control ID encountered: 10094851
> ERROR: Unable to set new control value: A Video4Linux2 API call returned an
> unexpected error 5. (Code: 12)
>
> Mar 17 20:46:11 chief kernel: uvcvideo: Failed to query (1) UVC control 10
> (unit 2) : -32 (exp. 2).

Check if auto white balance is enabled, and if so disable it. The manual white 
balance control can't be modified when automatic mode is enabled.

> I am not sure if this is a uvcvideo bug or an error in libwebcam.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Mar 18 01:45:01 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 18 Mar 2008 01:45:01 +0100
Subject: [Linux-uvc-devel]
	=?iso-8859-1?q?Installation_failure_with_kernel?=
	=?iso-8859-1?q?=092=2E6=2E24-1-686_under_Debian?=
In-Reply-To: <1205607870.4703.3.camel@amd2000bk.kleinedaheim>
References: <1205354478.5234.13.camel@amd2000bk.kleinedaheim>
	<20080312212122.GA4253@plankton.ifup.org>
	<1205607870.4703.3.camel@amd2000bk.kleinedaheim>
Message-ID: <200803180145.01633.laurent.pinchart@skynet.be>

On Saturday 15 March 2008, Dr. Bernhard Kleine wrote:
> On Mi, 2008-03-12 at 14:21 -0700, Brandon Philips wrote:
> > On 21:41 Wed 12 Mar 2008, Dr. Bernhard Kleine wrote:
> > > I installed the latest debian version from unstable
> > >
> > >  apt-cache policy linux-uvc-source
> > > linux-uvc-source:
> > >   Installiert:0.1.0.svn120-2
> > >   M?gliche Pakete:0.1.0.svn120-2
> > >   Versions-Tabelle:
> > >  *** 0.1.0.svn120-2 0
> > >         500 http://ftp.de.debian.org unstable/main Packages
> > >         100 /var/lib/dpkg/status
> > >
> > > according to the README.Debian
> > >
> > > I did
> > > m-a prepare
> > > m-a a-i linux-uvc
> >
> > The version of UVC in Debian is too old for the version of the Kernel
> > you are building against.  Please file a bug with Debian or use the
> > latest version of the UVC driver from SVN:
> >
> > # svn checkout svn://svn.berlios.de/linux-uvc/linux-uvc/trunk uvc
> > # cd uvc
> > # make
> > # su
> > # make install
> >
> > Thanks,
> >
> > 	Brandon
>
> Merci!
>
> Using luvcview I can see a picture!
>
>
> I have now started ekiga and get the following error: Video format not
> supported. How can I change that?

Which version of Ekiga are you using ? If it's too old you should upgrade to a 
more recent one.

Does the kernel log show any UVC-related error message ?

Best regards,

Laurent Pinchart


From fragabr at gmail.com  Tue Mar 18 02:03:57 2008
From: fragabr at gmail.com (=?ISO-8859-1?Q?D=E2niel?= Fraga)
Date: Mon, 17 Mar 2008 22:03:57 -0300
Subject: [Linux-uvc-devel] v4l-dvb tree x uvcvideo driver
In-Reply-To: <200803180139.25179.laurent.pinchart@skynet.be>
References: <20080317174215.7db4069f@tux.abusar.org.br>
	<200803180139.25179.laurent.pinchart@skynet.be>
Message-ID: <20080317220357.47f9d4f5@tux.abusar.org.br>

On Tue, 18 Mar 2008 01:39:25 +0100
Laurent Pinchart <laurent.pinchart at skynet.be> wrote:

> Check the mailing list archive for a thread named "uvcvideo and mercurial 
> v4l-dvb conflicts.". It should help you getting both v4l-dvb and uvcvideo 
> working together.

	Thank you very much Laurent. Copying the
v4l-dvb/v4l/Module.symvers into uvcvideo tree solved the problem.


-- 


From barsnick at gmx.net  Tue Mar 18 10:09:27 2008
From: barsnick at gmx.net (Moritz Barsnick)
Date: Tue, 18 Mar 2008 10:09:27 +0100
Subject: [Linux-uvc-devel] luvcview code enhancements
In-Reply-To: <200803171328.50668.mxhaard@magic.fr>
References: <d03812580803160730q386a805eocf06dea1aee53cb8@mail.gmail.com>
	<20080316191031.GB11048@sunshine.barsnick.net>
	<200803171328.50668.mxhaard@magic.fr>
Message-ID: <20080318090927.GB7268@sunshine.barsnick.net>

?llo Michel,

On Mon, Mar 17, 2008 at 13:28:50 +0100, Michel Xhaard wrote:
> Moritz,
> Thanks for all your patchs ;-)

Thanks for your feedback. :)

If these patches are really of interest, I've been hacking around a
little more.

First I noticed that the famous test.c displays an identification
string describing the device (coming from cap.card). I thought this
would be extremely useful, because I had accidentally been trying to
use luvcview with my TV card ;-) (which is on /dev/video1, and I had
forgotten about).

Then, just yesterday, I noticed in my "motion" logs that it too lists
this string, and it lists all (most of) the detected capabilities. I
thought this too would be nifty, as luvcview already checks a few of
them (e.g. to make sure it can function properly).

At the same time, I saw that a lot of code was basically duplicated in
those sections (v4l_init() for example). So I went through the pain of
taking that apart. Not sure I got it right.

Attached is a patch which attempts to do all these three things. I must
say I do not have a device which doesn't support streaming, therefore I
could not test those coded error conditions. But apart from that, it
works for me. :-) (There's one warning in compiling the code where I
tried to avoid passing a possible NULL pointer to printf(). Oh well.)

This is what my TV card looks like now (sorry, no UVC device connected
currently, I'm not physically next to my machine):

-- snip --
barsnick at sunshine:~ > luvcview -d /dev/video1 -L
luvcview version 0.2.2
Video driver: x11
A window manager is available
Video device /dev/video1
Device is "Terratec Cinergy 400 TV"
        on bus "PCI:0000:03:0b.0"
Device capabilities:
- VIDEO_CAPTURE (is a video capture device)
- VIDEO_OVERLAY (can do video overlay)
- VBI_CAPTURE (is a raw VBI capture device)
- TUNER (has a tuner)
- READWRITE (supports read/write system calls)
- STREAMING (supports streaming I/O ioctls)

{ pixelformat = 'GREY', description = '8 bpp gray' }
{ pixelformat = 'RGBO', description = '15 bpp RGB, le' }
[...more pixelformats...]
-- snip --

The two other patches align my recent whitespace and perror patches to
this new patch. All three apply nicely on top of each other.

See if you can make any use of this. I find it quite practical.

Kind regards,
Moritz
-------------- next part --------------
diff -ur luvcview-20070512/luvcview.c luvcview-20070512-name_and_capabilities/luvcview.c
--- luvcview-20070512/luvcview.c	2007-05-12 12:03:14.000000000 +0200
+++ luvcview-20070512-name_and_capabilities/luvcview.c	2008-03-17 23:36:19.000000000 +0100
@@ -425,7 +425,9 @@
     if ( queryformats ) {
      /* if we're supposed to list the video formats, do that now and go out */
      	check_videoIn(videoIn,(char *) videodevice);
-    	free(videoIn);
+        free(videoIn->videodevice);
+        free(videoIn->status);
+        free(videoIn);
 	SDL_Quit();
 	exit(1);
 	}
diff -ur luvcview-20070512/v4l2uvc.c luvcview-20070512-name_and_capabilities/v4l2uvc.c
--- luvcview-20070512/v4l2uvc.c	2007-05-08 17:39:40.000000000 +0200
+++ luvcview-20070512-name_and_capabilities/v4l2uvc.c	2008-03-18 00:33:38.000000000 +0100
@@ -34,39 +34,68 @@
 
 int check_videoIn(struct vdIn *vd, char *device)
 {
-int ret;
- if (vd == NULL || device == NULL)
-	return -1;
-	vd->videodevice = (char *) calloc(1, 16 * sizeof(char));
- 	snprintf(vd->videodevice, 12, "%s", device);
-    printf("video %s \n", vd->videodevice);
+    /* return value:
+     * 0 - okay
+     * 1 - opening device failed
+     * 2 - device opened, but some other failure
+     */
+    int ret;
+    char buf[512];
+    if (vd == NULL || device == NULL)
+	return -2; /* stupid error if it happens */
+    vd->videodevice = (char *) calloc(1, 16 * sizeof(char));
+    snprintf(vd->videodevice, 12, "%s", device);
+    printf("Video device %s\n", vd->videodevice);
     if ((vd->fd = open(vd->videodevice, O_RDWR)) == -1) {
-	perror("ERROR opening V4L interface \n");
-	exit(1);
+	perror("ERROR opening V4L interface");
+	return -1;
     }
     memset(&vd->cap, 0, sizeof(struct v4l2_capability));
     ret = ioctl(vd->fd, VIDIOC_QUERYCAP, &vd->cap);
     if (ret < 0) {
-	printf("Error opening device %s: unable to query device.\n",
-	       vd->videodevice);
-	goto fatal;
-    }
-    if ((vd->cap.capabilities & V4L2_CAP_VIDEO_CAPTURE) == 0) {
-	printf("Error opening device %s: video capture not supported.\n",
-	       vd->videodevice);
-    }
-    if (!(vd->cap.capabilities & V4L2_CAP_STREAMING)) {
-	    printf("%s does not support streaming i/o\n", vd->videodevice);
-    }
-    if (!(vd->cap.capabilities & V4L2_CAP_READWRITE)) {
-	    printf("%s does not support read i/o\n", vd->videodevice);
-    }
+        snprintf(buf, sizeof(buf), "Error opening device %s: unable to query device", vd->videodevice);
+        perror(buf);
+	return -2;
+    }
+
+    printf("Device is \"%s\"\n\ton bus \"%s\"\n",
+           vd->cap.card, (vd->cap.bus_info) ? (vd->cap.bus_info) : "<unknown>" );
+
+    printf("Device capabilities:\n");
+    if (vd->cap.capabilities & V4L2_CAP_VIDEO_CAPTURE)
+        printf("- VIDEO_CAPTURE (is a video capture device)\n");
+    else
+        printf("* WARNING: video capture not supported\n");
+    if (vd->cap.capabilities & V4L2_CAP_VIDEO_OUTPUT)
+        printf("- VIDEO_OUTPUT (is a video output device)\n");
+    if (vd->cap.capabilities & V4L2_CAP_VIDEO_OVERLAY)
+        printf("- VIDEO_OVERLAY (can do video overlay)\n");
+    if (vd->cap.capabilities & V4L2_CAP_VBI_CAPTURE)
+        printf("- VBI_CAPTURE (is a raw VBI capture device)\n");
+    if (vd->cap.capabilities & V4L2_CAP_VBI_OUTPUT)
+        printf("- VBI_OUTPUT (is a raw VBI output device)\n");
+    if (vd->cap.capabilities & V4L2_CAP_RDS_CAPTURE)
+        printf("- RDS_CAPTURE (supports RDS data capture)\n");
+    if (vd->cap.capabilities & V4L2_CAP_TUNER)
+        printf("- TUNER (has a tuner)\n");
+    if (vd->cap.capabilities & V4L2_CAP_AUDIO)
+        printf("- AUDIO (has audio support)\n");
+    if (vd->cap.capabilities & V4L2_CAP_READWRITE)
+        printf("- READWRITE (supports read/write system calls)\n");
+    else
+        printf("* WARNING: read I/O not supported\n");
+    if (vd->cap.capabilities & V4L2_CAP_ASYNCIO)
+        printf("- ASYNCIO (supports async I/O)\n");
+    if (vd->cap.capabilities & V4L2_CAP_STREAMING)
+        printf("- STREAMING (supports streaming I/O ioctls)\n");
+    else
+        printf("* WARNING: streaming I/O not supported\n");
+
+    printf("\n");
     enum_frame_formats(vd->fd);
-fatal:    
-       close(vd->fd);
-       free(vd->videodevice);
     return 0;
 }
+
 int
 init_videoIn(struct vdIn *vd, char *device, int width, int height, int fps,
 	     int format, int grabmethod, char *avifilename)
@@ -86,7 +115,6 @@
     vd->status = (char *) calloc(1, 100 * sizeof(char));
     vd->pictName = (char *) calloc(1, 80 * sizeof(char));
     snprintf(vd->videodevice, 12, "%s", device);
-    printf("video %s \n", vd->videodevice);
     vd->toggleAvi = 0;
     vd->avifile = NULL;
     vd->avifilename = avifilename;
@@ -314,36 +342,36 @@
 static int init_v4l2(struct vdIn *vd)
 {
     int i;
-    int ret = 0;
+    int ret;
+    int retval = 0;
 
-    if ((vd->fd = open(vd->videodevice, O_RDWR)) == -1) {
-	perror("ERROR opening V4L interface \n");
+    ret = check_videoIn(vd, vd->videodevice);
+    
+    if (ret == -1) {
+        /* failed to open device */
 	exit(1);
     }
-    memset(&vd->cap, 0, sizeof(struct v4l2_capability));
-    ret = ioctl(vd->fd, VIDIOC_QUERYCAP, &vd->cap);
-    if (ret < 0) {
-	printf("Error opening device %s: unable to query device.\n",
-	       vd->videodevice);
-	goto fatal;
+    if (ret == -2) {
+        /* opening succeeded, but other failure - close now */
+        return -1;
     }
-
-    if ((vd->cap.capabilities & V4L2_CAP_VIDEO_CAPTURE) == 0) {
-	printf("Error opening device %s: video capture not supported.\n",
-	       vd->videodevice);
-	goto fatal;;
+    if (!(vd->cap.capabilities & V4L2_CAP_VIDEO_CAPTURE)) {
+	printf("ERROR: video capture (V4L2_CAP_VIDEO_CAPTURE) not supported\n");
+	retval = -1;
     }
     if (vd->grabmethod) {
 	if (!(vd->cap.capabilities & V4L2_CAP_STREAMING)) {
-	    printf("%s does not support streaming i/o\n", vd->videodevice);
-	    goto fatal;
+	    printf("ERROR: streaming I/O (V4L2_CAP_STREAMING) not supported\n");
+            retval = -1;
 	}
     } else {
 	if (!(vd->cap.capabilities & V4L2_CAP_READWRITE)) {
-	    printf("%s does not support read i/o\n", vd->videodevice);
-	    goto fatal;
+	    printf("ERROR: read I/O (V4L2_CAP_READWRITE) not supported\n");
+            retval = -1;
 	}
     }
+    if (retval)
+        return retval;
     /* set format in */
     memset(&vd->fmt, 0, sizeof(struct v4l2_format));
     vd->fmt.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
@@ -354,7 +382,7 @@
     ret = ioctl(vd->fd, VIDIOC_S_FMT, &vd->fmt);
     if (ret < 0) {
 	printf("Unable to set format: %d.\n", errno);
-	goto fatal;
+        return -1;
     }
     if ((vd->fmt.fmt.pix.width != vd->width) ||
 	(vd->fmt.fmt.pix.height != vd->height)) {
@@ -384,7 +412,7 @@
     ret = ioctl(vd->fd, VIDIOC_REQBUFS, &vd->rb);
     if (ret < 0) {
 	printf("Unable to allocate buffers: %d.\n", errno);
-	goto fatal;
+        return -1;
     }
     /* map the buffers */
     for (i = 0; i < NB_BUFFER; i++) {
@@ -395,7 +423,7 @@
 	ret = ioctl(vd->fd, VIDIOC_QUERYBUF, &vd->buf);
 	if (ret < 0) {
 	    printf("Unable to query buffer (%d).\n", errno);
-	    goto fatal;
+            return -1;
 	}
 	if (debug)
 	    printf("length: %u offset: %u\n", vd->buf.length,
@@ -405,7 +433,7 @@
 			  vd->buf.m.offset);
 	if (vd->mem[i] == MAP_FAILED) {
 	    printf("Unable to map buffer (%d)\n", errno);
-	    goto fatal;
+            return -1;
 	}
 	if (debug)
 	    printf("Buffer mapped at address %p.\n", vd->mem[i]);
@@ -419,13 +447,10 @@
 	ret = ioctl(vd->fd, VIDIOC_QBUF, &vd->buf);
 	if (ret < 0) {
 	    printf("Unable to queue buffer (%d).\n", errno);
-	    goto fatal;;
+            return -1;
 	}
     }
     return 0;
-  fatal:
-    return -1;
-
 }
 
 static int video_enable(struct vdIn *vd)
-------------- next part --------------
diff -ur luvcview-20070512-name_and_capabilities/avilib.c luvcview-20070512-name_and_capabilities-whitespace/avilib.c
--- luvcview-20070512-name_and_capabilities/avilib.c	2006-09-20 17:47:36.000000000 +0200
+++ luvcview-20070512-name_and_capabilities-whitespace/avilib.c	2008-03-18 00:34:43.000000000 +0100
@@ -616,7 +616,7 @@
       readable in the most cases */
 
    idxerror = 0;
-   //   fprintf(stderr, "pos=%lu, index_len=%ld             \n", AVI->pos, AVI->n_idx*16);
+   //   fprintf(stderr, "pos=%lu, index_len=%ld\n", AVI->pos, AVI->n_idx*16);
    ret = avi_add_chunk(AVI, (unsigned char *)"idx1", (unsigned char *)AVI->idx, AVI->n_idx*16);
    hasIndex = (ret==0);
    //fprintf(stderr, "pos=%lu, index_len=%d\n", AVI->pos, hasIndex);
diff -ur luvcview-20070512-name_and_capabilities/luvcview.c luvcview-20070512-name_and_capabilities-whitespace/luvcview.c
--- luvcview-20070512-name_and_capabilities/luvcview.c	2008-03-17 23:36:19.000000000 +0100
+++ luvcview-20070512-name_and_capabilities-whitespace/luvcview.c	2008-03-18 00:34:43.000000000 +0100
@@ -238,7 +238,7 @@
 
 
 
-    printf("luvcview version %s \n", version);
+    printf("luvcview version %s\n", version);
     for (i = 1; i < argc; i++) {
 	/* skip bad arguments */
 	if (argv[i] == NULL || *argv[i] == 0 || *argv[i] != '-') {
@@ -287,24 +287,24 @@
 
 	    width = strtoul(sizestring, &separateur, 10);
 	    if (*separateur != 'x') {
-		printf("Error in size use -s widthxheight \n");
+		printf("Error in size use -s widthxheight\n");
 		exit(1);
 	    } else {
 		++separateur;
 		height = strtoul(separateur, &separateur, 10);
 		if (*separateur != 0)
-		    printf("hmm.. dont like that!! trying this height \n");
-		printf(" size width: %d height: %d \n", width, height);
+		    printf("hmm.. dont like that!! trying this height\n");
+		printf(" size width: %d height: %d\n", width, height);
 	    }
 	}
 	if (strcmp(argv[i], "-i") == 0){
 	  if (i + 1 >= argc) {
-	    printf("No parameter specified with -i, aborting. \n");
+	    printf("No parameter specified with -i, aborting.\n");
 	    exit(1);
 	  }
 	  fpsstring = strdup(argv[i + 1]);
 	  fps = strtoul(fpsstring, &separateur, 10);
-	  printf(" interval: %d fps \n", fps);
+	  printf(" interval: %d fps\n", fps);
 	}
 	if (strcmp(argv[i], "-S") == 0) {
 	    /* Enable raw stream capture from the start */
@@ -340,14 +340,14 @@
 	    readconfigfile = 1;
 	}
 	if (strcmp(argv[i], "-h") == 0) {
-	    printf("usage: uvcview [-h -d -g -f -s -i -c -o -C -S -L -l -r] \n");
-	    printf("-h	print this message \n");
+	    printf("usage: uvcview [-h -d -g -f -s -i -c -o -C -S -L -l -r]\n");
+	    printf("-h	print this message\n");
 	    printf("-d	/dev/videoX       use videoX device\n");
-	    printf("-g	use read method for grab instead mmap \n");
-	    printf("-w	disable SDL hardware accel. \n");
-	    printf("-f	video format  default jpg  others options are yuv jpg \n");
-	    printf("-i	fps           use specified frame interval \n");
-	    printf("-s	widthxheight      use specified input size \n");
+	    printf("-g	use read method for grab instead mmap\n");
+	    printf("-w	disable SDL hardware accel.\n");
+	    printf("-f	video format  default jpg  others options are yuv jpg\n");
+	    printf("-i	fps           use specified frame interval\n");
+	    printf("-s	widthxheight      use specified input size\n");
 	    printf("-c	enable raw frame capturing for the first frame\n");
 	    printf("-C	enable raw frame stream capturing from the start\n");
 	    printf("-S	enable raw stream capturing from the start\n");
@@ -489,7 +489,7 @@
 	}
 	lasttime = currtime;
 	if (uvcGrab(videoIn) < 0) {
-	    printf("Error grabbing \n");
+	    printf("Error grabbing\n");
 	    break;
 	}
 
@@ -542,7 +542,7 @@
     free(videoIn);
     destroyButt();
     freeLut();
-    printf(" Clean Up done Quit \n");
+    printf(" Clean Up done Quit\n");
     SDL_Quit();
 }
 
@@ -642,7 +642,7 @@
 	case A_CONTRAST_UP:
 		if ((value =
 		     v4l2UpControl(videoIn, V4L2_CID_CONTRAST)) < 0)
-		    printf("Set Contrast up error \n");
+		    printf("Set Contrast up error\n");
 	    break;
 	case A_SATURATION_UP:
 		if ((value =
@@ -824,7 +824,7 @@
             if ((value = ioctl(videoIn->fd, VIDIOC_S_CTRL, &control)) < 0)
               printf("Set Auto Exposure on error\n");
             else
-              printf("Auto Exposure set to %d \n", control.value);
+              printf("Auto Exposure set to %d\n", control.value);
             break;
           case A_EXPOSURE_OFF:
             control.id    =V4L2_CID_EXPOSURE_AUTO;
@@ -832,7 +832,7 @@
             if ((value = ioctl(videoIn->fd, VIDIOC_S_CTRL, &control)) < 0)
               printf("Set Auto Exposure off error\n");
             else
-              printf("Auto Exposure set to %d \n", control.value);
+              printf("Auto Exposure set to %d\n", control.value);
             break;
           case A_BALANCE_UP:
             if ((value = v4l2UpControl(videoIn, V4L2_CID_WHITE_BALANCE_TEMPERATURE)) < 0)
@@ -848,7 +848,7 @@
             if ((value = ioctl(videoIn->fd, VIDIOC_S_CTRL, &control)) < 0)
               printf("Set Auto Balance on error\n");
             else
-              printf("Auto Balance set to %d \n", control.value);
+              printf("Auto Balance set to %d\n", control.value);
             break;
           case A_BALANCE_OFF:
             control.id    =V4L2_CID_WHITE_BALANCE_TEMPERATURE_AUTO;
@@ -856,14 +856,14 @@
             if ((value = ioctl(videoIn->fd, VIDIOC_S_CTRL, &control)) < 0)
               printf("Set Auto Balance off error\n");
             else
-              printf("Auto Balance set to %d \n", control.value);
+              printf("Auto Balance set to %d\n", control.value);
             break;
           case A_SAVE:
-	   printf("Save controls \n");
+	   printf("Save controls\n");
             save_controls(videoIn->fd);
             break;
           case A_LOAD:
-	   printf("load controls \n");
+	   printf("load controls\n");
             load_controls(videoIn->fd);
           break;
 	default:
@@ -883,7 +883,7 @@
 	
 	}
 	SDL_Delay(50);
-	//printf("fp/s %d \n",frmrate);
+	//printf("fp/s %d\n",frmrate);
     }				//end main loop
 
 	/* Close the stream capture file */
diff -ur luvcview-20070512-name_and_capabilities/utils.c luvcview-20070512-name_and_capabilities-whitespace/utils.c
--- luvcview-20070512-name_and_capabilities/utils.c	2007-05-12 12:13:11.000000000 +0200
+++ luvcview-20070512-name_and_capabilities-whitespace/utils.c	2008-03-18 00:34:43.000000000 +0100
@@ -191,7 +191,7 @@
 	    return 0;
 
 	case M_DQT:
-	//printf("find DQT \n");
+	//printf("find DQT\n");
 	    lq = getword();
 	    while (lq > 2) {
 		pq = getbyte();
@@ -208,7 +208,7 @@
 	    break;
 
 	case M_DHT:
-	//printf("find DHT \n");
+	//printf("find DHT\n");
 	    l = getword();
 	    while (l > 2) {
 		int hufflen[16], k;
@@ -235,7 +235,7 @@
 	    break;
 
 	case M_DRI:
-	printf("find DRI \n");
+	printf("find DRI\n");
 	    l = getword();
 	    info.dri = getword();
 	    break;
@@ -385,7 +385,7 @@
     if (i != 0 || j != 63 || m != 0) {
     	printf("hmm FW error,not seq DCT ??\n");
     }
-   // printf("ext huffman table %d \n",isInitHuffman);
+   // printf("ext huffman table %d\n",isInitHuffman);
     if(!isInitHuffman) {
     	if(huffman_init() < 0)
 		return -ERR_BAD_TABLES;
@@ -1250,7 +1250,7 @@
 if(picture){
 	Pyuv422torgb24(buf, picture, width, height);
 }else{
-	printf(" no room to take a picture \n");
+	printf(" no room to take a picture\n");
 	return 0;
 }
 if(name){
diff -ur luvcview-20070512-name_and_capabilities/v4l2uvc.c luvcview-20070512-name_and_capabilities-whitespace/v4l2uvc.c
--- luvcview-20070512-name_and_capabilities/v4l2uvc.c	2008-03-18 00:33:38.000000000 +0100
+++ luvcview-20070512-name_and_capabilities-whitespace/v4l2uvc.c	2008-03-18 00:34:43.000000000 +0100
@@ -136,7 +136,7 @@
     vd->bytesWritten = 0;
     vd->framesWritten = 0;
     if (init_v4l2(vd) < 0) {
-	printf(" Init v4L2 failed !! exit fatal \n");
+	printf(" Init v4L2 failed !! exit fatal\n");
 	goto error;;
     }
     /* alloc a temp buffer to reconstruct the pict */
@@ -215,7 +215,7 @@
       control_s.id=queryctrl.id;
       ioctl(vd, VIDIOC_G_CTRL, &control_s);
       SDL_Delay(10);
-      printf (" index:%-10d name:%-32s type:%d min:%-5d max:%-5d step:%-5d def:%-5d now:%d \n",
+      printf (" index:%-10d name:%-32s type:%d min:%-5d max:%-5d step:%-5d def:%-5d now:%d\n",
               queryctrl.id, queryctrl.name, queryctrl.type, queryctrl.minimum,
               queryctrl.maximum, queryctrl.step, queryctrl.default_value, control_s.value);
       if (queryctrl.type == V4L2_CTRL_TYPE_MENU)
@@ -238,7 +238,7 @@
       control_s.id=queryctrl.id;
       ioctl(vd, VIDIOC_G_CTRL, &control_s);
       SDL_Delay(20);
-      printf (" index:%-10d name:%-32s type:%d min:%-5d max:%-5d step:%-5d def:%-5d now:%d \n",
+      printf (" index:%-10d name:%-32s type:%d min:%-5d max:%-5d step:%-5d def:%-5d now:%d\n",
               queryctrl.id, queryctrl.name, queryctrl.type, queryctrl.minimum,
               queryctrl.maximum, queryctrl.step, queryctrl.default_value, control_s.value);
       if (queryctrl.type == V4L2_CTRL_TYPE_MENU)
@@ -323,16 +323,16 @@
     printf( "configfile luvcview.cfg open failed, errno = %d (%s)\n", errno, strerror( errno));
   }
   else {
-    printf("loading controls from luvcview.cfg \n");
+    printf("loading controls from luvcview.cfg\n");
     char buffer[512]; 
     fgets(buffer, sizeof(buffer), configfile);
     while (NULL !=fgets(buffer, sizeof(buffer), configfile) )
       {
         sscanf(buffer, "%i%i", &control.id, &control.value);
         if (ioctl(vd, VIDIOC_S_CTRL, &control))
-          printf("ERROR id:%d val:%d \n", control.id, control.value);
+          printf("ERROR id:%d val:%d\n", control.id, control.value);
         else
-          printf("OK    id:%d val:%d \n", control.id, control.value);
+          printf("OK    id:%d val:%d\n", control.id, control.value);
         SDL_Delay(20);
       }   
     fclose(configfile);
@@ -386,7 +386,7 @@
     }
     if ((vd->fmt.fmt.pix.width != vd->width) ||
 	(vd->fmt.fmt.pix.height != vd->height)) {
-	printf(" format asked unavailable get width %d height %d \n",
+	printf(" format asked unavailable get width %d height %d\n",
 	       vd->fmt.fmt.pix.width, vd->fmt.fmt.pix.height);
 	vd->width = vd->fmt.fmt.pix.width;
 	vd->height = vd->fmt.fmt.pix.height;
@@ -594,7 +594,7 @@
 	    goto err;
 	}
 	if (debug)
-	    printf("bytes in used %d \n", vd->buf.bytesused);
+	    printf("bytes in used %d\n", vd->buf.bytesused);
 	break;
     case V4L2_PIX_FMT_YUYV:
 	if (vd->buf.bytesused > vd->framesizeIn)
@@ -645,13 +645,13 @@
     if ((err= ioctl(vd->fd, VIDIOC_QUERYCTRL, queryctrl)) < 0) {
 	printf("ioctl querycontrol error %d \n",errno);
     } else if (queryctrl->flags & V4L2_CTRL_FLAG_DISABLED) {
-	printf("control %s disabled \n", (char *) queryctrl->name);
+	printf("control %s disabled\n", (char *) queryctrl->name);
     } else if (queryctrl->flags & V4L2_CTRL_TYPE_BOOLEAN) {
 	return 1;
     } else if (queryctrl->type & V4L2_CTRL_TYPE_INTEGER) {
 	return 0;
     } else {
-	printf("contol %s unsupported  \n", (char *) queryctrl->name);
+	printf("contol %s unsupported\n", (char *) queryctrl->name);
     }
     return -1;
 }
@@ -708,7 +708,7 @@
     val_def = queryctrl.default_value;
     current = v4l2GetControl(vd, control);
     current += step;
-    printf("max %d, min %d, step %d, default %d ,current %d \n",max,min,step,val_def,current);
+    printf("max %d, min %d, step %d, default %d ,current %d\n",max,min,step,val_def,current);
     if (current <= max) {
 	control_s.id = control;
 	control_s.value = current;
@@ -718,7 +718,7 @@
 	}            
         printf ("Control name:%s set to value:%d\n", queryctrl.name, control_s.value);
     } else {
-      printf ("Control name:%s already has max value:%d \n", queryctrl.name, max); 
+      printf ("Control name:%s already has max value:%d\n", queryctrl.name, max); 
     }
      return control_s.value;
 }
@@ -736,7 +736,7 @@
     val_def = queryctrl.default_value;
     current = v4l2GetControl(vd, control);
     current -= step;
-    printf("max %d, min %d, step %d, default %d ,current %d \n",max,min,step,val_def,current);
+    printf("max %d, min %d, step %d, default %d ,current %d\n",max,min,step,val_def,current);
     if (current >= min) {
 	control_s.id = control;
 	control_s.value = current;
@@ -747,7 +747,7 @@
     printf ("Control name:%s set to value:%d\n", queryctrl.name, control_s.value);
     }
     else {
-      printf ("Control name:%s already has min value:%d \n", queryctrl.name, min); 
+      printf ("Control name:%s already has min value:%d\n", queryctrl.name, min); 
     }
     return control_s.value;
 }
-------------- next part --------------
diff -ur luvcview-20070512-name_and_capabilities/v4l2uvc.c luvcview-20070512-name_and_capabilities-perror/v4l2uvc.c
--- luvcview-20070512-name_and_capabilities/v4l2uvc.c	2008-03-18 00:00:15.000000000 +0100
+++ luvcview-20070512-name_and_capabilities-perror/v4l2uvc.c	2008-03-18 00:06:52.000000000 +0100
@@ -230,7 +230,7 @@
     } else {
       if (errno == EINVAL)
         continue;
-      printf ("error getting base controls");
+      perror ("error getting base controls");
       goto fatal_controls;
     }
   }
@@ -270,7 +270,7 @@
   memset (&control_s, 0, sizeof (control_s));
   configfile = fopen("luvcview.cfg", "w");
   if ( configfile == NULL) {
-    printf( "saving configfile luvcview.cfg failed, errno = %d (%s)\n", errno, strerror( errno));
+    perror("saving configfile luvcview.cfg failed");
   }
   else {
     fprintf(configfile, "id         value      # luvcview control settings configuration file\n");
@@ -327,7 +327,7 @@
   memset (&control, 0, sizeof (control));
   configfile = fopen("luvcview.cfg", "r");
   if ( configfile == NULL) {
-    printf( "configfile luvcview.cfg open failed, errno = %d (%s)\n", errno, strerror( errno));
+    perror("configfile luvcview.cfg open failed");
   }
   else {
     printf("loading controls from luvcview.cfg \n");
@@ -385,7 +385,7 @@
     vd->fmt.fmt.pix.field = V4L2_FIELD_ANY;
     ret = ioctl(vd->fd, VIDIOC_S_FMT, &vd->fmt);
     if (ret < 0) {
-	printf("Unable to set format: %d.\n", errno);
+	perror("Unable to set format");
         return -1;
     }
     if ((vd->fmt.fmt.pix.width != vd->width) ||
@@ -415,7 +415,7 @@
 
     ret = ioctl(vd->fd, VIDIOC_REQBUFS, &vd->rb);
     if (ret < 0) {
-	printf("Unable to allocate buffers: %d.\n", errno);
+	perror("Unable to allocate buffers");
         return -1;
     }
     /* map the buffers */
@@ -426,7 +426,7 @@
 	vd->buf.memory = V4L2_MEMORY_MMAP;
 	ret = ioctl(vd->fd, VIDIOC_QUERYBUF, &vd->buf);
 	if (ret < 0) {
-	    printf("Unable to query buffer (%d).\n", errno);
+	    perror("Unable to query buffer");
             return -1;
 	}
 	if (debug)
@@ -436,7 +436,7 @@
 			  vd->buf.length, PROT_READ, MAP_SHARED, vd->fd,
 			  vd->buf.m.offset);
 	if (vd->mem[i] == MAP_FAILED) {
-	    printf("Unable to map buffer (%d)\n", errno);
+	    perror("Unable to map buffer");
             return -1;
 	}
 	if (debug)
@@ -450,7 +450,7 @@
 	vd->buf.memory = V4L2_MEMORY_MMAP;
 	ret = ioctl(vd->fd, VIDIOC_QBUF, &vd->buf);
 	if (ret < 0) {
-	    printf("Unable to queue buffer (%d).\n", errno);
+	    perror("Unable to queue buffer");
             return -1;
 	}
     }
@@ -464,7 +464,7 @@
 
     ret = ioctl(vd->fd, VIDIOC_STREAMON, &type);
     if (ret < 0) {
-	printf("Unable to %s capture: %d.\n", "start", errno);
+	perror("Unable to start capture");
 	return ret;
     }
     vd->isstreaming = 1;
@@ -478,7 +478,7 @@
 
     ret = ioctl(vd->fd, VIDIOC_STREAMOFF, &type);
     if (ret < 0) {
-	printf("Unable to %s capture: %d.\n", "stop", errno);
+	perror("Unable to stop capture");
 	return ret;
     }
     vd->isstreaming = 0;
@@ -499,7 +499,7 @@
     vd->buf.memory = V4L2_MEMORY_MMAP;
     ret = ioctl(vd->fd, VIDIOC_DQBUF, &vd->buf);
     if (ret < 0) {
-	printf("Unable to dequeue buffer (%d).\n", errno);
+	perror("Unable to dequeue buffer");
 	goto err;
     }
 
@@ -614,7 +614,7 @@
     }
     ret = ioctl(vd->fd, VIDIOC_QBUF, &vd->buf);
     if (ret < 0) {
-	printf("Unable to requeue buffer (%d).\n", errno);
+	perror("Unable to requeue buffer");
 	goto err;
     }
 
@@ -647,7 +647,7 @@
 int err =0;
     queryctrl->id = control;
     if ((err= ioctl(vd->fd, VIDIOC_QUERYCTRL, queryctrl)) < 0) {
-	printf("ioctl querycontrol error %d \n",errno);
+	perror("ioctl querycontrol error");
     } else if (queryctrl->flags & V4L2_CTRL_FLAG_DISABLED) {
 	printf("control %s disabled \n", (char *) queryctrl->name);
     } else if (queryctrl->flags & V4L2_CTRL_TYPE_BOOLEAN) {
@@ -977,7 +977,7 @@
 	}
 	printf("\n");
 	if (ret != 0 && errno != EINVAL) {
-		printf("ERROR enumerating frame intervals: %d\n", errno);
+		perror("ERROR enumerating frame intervals");
 		return errno;
 	}
 
@@ -1019,7 +1019,7 @@
 		fsize.index++;
 	}
 	if (ret != 0 && errno != EINVAL) {
-		printf("ERROR enumerating frame sizes: %d\n", errno);
+		perror("ERROR enumerating frame sizes");
 		return errno;
 	}
 
@@ -1045,7 +1045,7 @@
 			printf("  Unable to enumerate frame sizes.\n");
 	}
 	if (errno != EINVAL) {
-		printf("ERROR enumerating frame formats: %d\n", errno);
+		perror("ERROR enumerating frame formats");
 		return errno;
 	}
 

From barsnick at gmx.net  Tue Mar 18 10:17:32 2008
From: barsnick at gmx.net (Moritz Barsnick)
Date: Tue, 18 Mar 2008 10:17:32 +0100
Subject: [Linux-uvc-devel] luvcview code enhancements
In-Reply-To: <20080318090927.GB7268@sunshine.barsnick.net>
References: <d03812580803160730q386a805eocf06dea1aee53cb8@mail.gmail.com>
	<20080316191031.GB11048@sunshine.barsnick.net>
	<200803171328.50668.mxhaard@magic.fr>
	<20080318090927.GB7268@sunshine.barsnick.net>
Message-ID: <20080318091732.GB8076@sunshine.barsnick.net>

On Tue, Mar 18, 2008 at 10:09:27 +0100, Moritz Barsnick wrote:
> See if you can make any use of this. I find it quite practical.

By the way, I was wondering why luvcview is luvcview and not v4l2view,
with the linux-uvc driver alledgedly being so very V4L2 compliant.
Well, I guess I figured it out with my TV card: It's just about the
supported image formats. Fair enough.

Nevertheless, luvcview is indeed at least in detection mode (-L) very
practical for any V4L2 device. That's basically why I started enhancing
it a little. [*]

My next attempt will be to make it initialize SDL (and X11) only if it
actually needs to display a window, not in detection mode (such as -L).

Thanks, Michel, for the great tool, helping us all bring up our UVC
devices (and helps us proving that some other SW isn't really
compliant)!

Regards,
Moritz

[*] I am aware of v4lctl and v4l-info, as delivered e.g. by the
    "reference suite" xawtv. But luvcview's info is very much more
    concise.


From laurent.pinchart at skynet.be  Tue Mar 18 21:25:54 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 18 Mar 2008 21:25:54 +0100
Subject: [Linux-uvc-devel] UVC & Panasonic NV-GS230
In-Reply-To: <004b01c888f1$098e5d80$1cab1880$@com>
References: <004b01c888f1$098e5d80$1cab1880$@com>
Message-ID: <200803182125.54389.laurent.pinchart@skynet.be>

Hi Vlad,

On Tuesday 18 March 2008, Vlad Danciu wrote:
> Hi Laurent,
>
> I am trying to use my camcorder on Ubuntu over USB and tried UVC but it
> doesn't work. I have compiled the latest version from Berlios and tried
> with dvgrab, luvcview, kino, Cinelerra but nothing worked. I am interested
> in the DV mode as I want to capture my tapes on files.
>
> Do you have any advice for me? I know UVC is supposed to work with this
> camera according to the project's web page.

Please post such requests to the linux-uvc-devel mailing list where lots of 
talented users will see your message.

Most applications don't support DV mode. You should start with luvcview and 
the camera in webcam mode to make sure there is no deep issue. Then try DV 
mode with DV applications that support v4l2. A quick look at dvgrab shows it 
should work.

If you run into problems please post detailed descriptions including complete 
error messages as well as related kernel log messages.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Mar 18 21:29:11 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 18 Mar 2008 21:29:11 +0100
Subject: [Linux-uvc-devel] luvcview code enhancements
In-Reply-To: <20080318091732.GB8076@sunshine.barsnick.net>
References: <d03812580803160730q386a805eocf06dea1aee53cb8@mail.gmail.com>
	<20080318090927.GB7268@sunshine.barsnick.net>
	<20080318091732.GB8076@sunshine.barsnick.net>
Message-ID: <200803182129.11464.laurent.pinchart@skynet.be>

On Tuesday 18 March 2008, Moritz Barsnick wrote:
> On Tue, Mar 18, 2008 at 10:09:27 +0100, Moritz Barsnick wrote:
> > See if you can make any use of this. I find it quite practical.
>
> By the way, I was wondering why luvcview is luvcview and not v4l2view,
> with the linux-uvc driver alledgedly being so very V4L2 compliant.
> Well, I guess I figured it out with my TV card: It's just about the
> supported image formats. Fair enough.

luvcview started out as a test application for the UVC driver. Thanks to the 
v4l2 API it also works for other video sources :-)

> Nevertheless, luvcview is indeed at least in detection mode (-L) very
> practical for any V4L2 device. That's basically why I started enhancing
> it a little. [*]
>
> My next attempt will be to make it initialize SDL (and X11) only if it
> actually needs to display a window, not in detection mode (such as -L).

A very interesting enhancement would be to fall back to YUV if MJPEG is not 
supported. It currently exits with an error code when the camera supports YUV 
only. Many users have been bitten by this.

> Thanks, Michel, for the great tool, helping us all bring up our UVC
> devices (and helps us proving that some other SW isn't really
> compliant)!
>
> Regards,
> Moritz
>
> [*] I am aware of v4lctl and v4l-info, as delivered e.g. by the
>     "reference suite" xawtv. But luvcview's info is very much more
>     concise.

Best regards,

Laurent Pinchart


From fragabr at gmail.com  Tue Mar 18 19:57:06 2008
From: fragabr at gmail.com (=?ISO-8859-1?Q?D=E2niel?= Fraga)
Date: Tue, 18 Mar 2008 15:57:06 -0300
Subject: [Linux-uvc-devel] Logitech: Quickcam Pro 9000 x Orbit AF
References: <20080314075155.GA30893@sdg.at>
	<200803180125.29343.laurent.pinchart@skynet.be>
Message-ID: <20080318155706.1466ddb2@tux.abusar.org.br>

On Tue, 18 Mar 2008 01:25:29 +0100
Laurent Pinchart <laurent.pinchart at skynet.be> wrote:

> API in V4L2, but in the end it wouldn't help much. Forwarding the button 
> press event to userspace would in my opinion be more useful.

	As Mauro Chehab suggested, couldn't we just use evdev, just
like it's used by remote controller code?

-- 
Linux 2.6.24: Arr Matey! A Hairy Bilge Rat!
http://u-br.net http://www.abusar.org/FELIZ_2008.html




From rasasi78 at gmail.com  Wed Mar 19 18:35:09 2008
From: rasasi78 at gmail.com (=?UTF-8?B?UmHDumwgU8OhbmNoZXogU2lsZXM=?=)
Date: Wed, 19 Mar 2008 18:35:09 +0100
Subject: [Linux-uvc-devel] Black image on videoconferencing apps.
References: <fqmuds$e3c$1@ger.gmane.org> <fqrunc$sqq$1@ger.gmane.org>
	<fr839n$o77$1@ger.gmane.org> <fr9j8j$gfv$1@ger.gmane.org>
Message-ID: <frritd$4ci$1@ger.gmane.org>

  Hello:

  Basically same story but with some more appreciations.

Ra?l S?nchez Siles wrote:

>>> Ra?l S?nchez Siles wrote:
>>> 
>>>>   Hello All:
>>>> 
>>>>   On skype I had the same problem and is this: I can start my video and
>>>>   the
>>>> other end will see it, but after a randon time ranging from little
>>>> seconds to little minutes, the image I sent (and that I'm able to see)
>>>> goes to black unconditionally.
>>>> 
>>>>   After this, same as before the video was working at this point, but
>>>>   stops
>>>> working after some time. Along the video conference skype seems to try
>>>> to reinitialize webcam, it starts working again, but then it goes to
>>>> black again.
>>>> 
>> [...]
> 
>   Now I got to reproduce the problem. I think it's related to
>   environmental
> light somehow. I had some trouble to reproduce problem in the mornings
> because I had a lot of natural light, but it was at evening that I was
> trying to use the camera. So to test it out I turned on a lighter lamp.
> This way it was harder to get the problem, and I only got it when I
> covered the camera focus totally, after that, just a black image like the
> one I used to see remained there. The only difference was a small whitish
> point.
> 
>   After this I think there's some problem in the light/bright regulation
> mechanish. I think next step is starting to look at the code and see where
> some of this regulation happen, any pointer would be appreciated.
> 

  Now I'm more certain that this is a trouble in the light regulation
mechanism, but I don't know how to get more information from the driver. I
don't know even where the light regulation happens. Is it on driver, on
hardware or in the userspace application by chance (doubtfully this last)?

  My most reliable method to reproduce up to know is being on a very soft
light environment, for example: night with a dim indirect light(12W low
consumption lamp). In this situation you will see the image, but not very
well defined using a regular videoconferencing resolution and frame rate.
Now cover the camera focus completely using your hand, the image will
become totally black and, if the light is not clear enough it will remain
in that state unless you reinitialise the video streaming or use a light
enough light so the brightness regulates automatically to a useful value.

  Thanks for your patience, and I still appreciate help and/or pointers.

  Regards,

-- 
     Ra?l S?nchez Siles
----->Proud Debian user<-----
Linux registered user #416098



From dark.shoyu at gmail.com  Thu Mar 20 05:29:06 2008
From: dark.shoyu at gmail.com (Dark Shoyu)
Date: Thu, 20 Mar 2008 01:29:06 -0300
Subject: [Linux-uvc-devel] Unsupported webcam
In-Reply-To: <200803030111.06648.laurent.pinchart@skynet.be>
References: <bcbba7190803010903q6198a1fbh82595a797ff26d0e@mail.gmail.com>
	<bcbba7190803010916s565836a5o5563e1a6d6111dd1@mail.gmail.com>
	<200803030111.06648.laurent.pinchart@skynet.be>
Message-ID: <bcbba7190803192129x6c06c36dh3295e7973af5ff3a@mail.gmail.com>

Hey Laurent,

I've figured out that it might not be the driver. dmesg doesn't show any
error or warning message. The error I got when I try to use any program to
access my webcam is that there is a wrong parameter. When trying to use
mplayer, I got the following message:

*$ mplayer tv:// -tv driver=v4l2

* Playing tv://.
TV file format detected.
Selected driver: v4l2
 name: Video 4 Linux 2 input
 author: Martin Olschewski <olschewski at zpr.uni-koeln.de>
 comment: first try, more to come ;-)
v4l2: ioctl get standard failed: Invalid argument
Selected device: Vega USB 2.0 Camera.
 Capabilites:  video capture  streaming
 supported norms:
 inputs: 0 = Camera 1;
 Current input: 0
 Current format: YUYV
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
tv.c: norm_from_string(pal): Bogus norm parameter, setting default.
v4l2: ioctl enum norm failed: Invalid argument
Error: Cannot set norm!
Selected input hasn't got a tuner!
v4l2: ioctl set mute failed: Invalid argument
FPS not specified in the header or invalid, use the -fps option.
No stream found.

v4l2: ioctl set mute failed: Invalid argument
v4l2: 0 frames successfully processed, 0 frames dropped.


So I put the fps parameter with a value (30, for example) and it worked!
The problem now is that I can't make it work in a streaming program, but
it's not problem from the driver as I first thought.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080320/8fcc9181/attachment.html>

From tompoe at fngi.net  Fri Mar 21 02:08:21 2008
From: tompoe at fngi.net (Tom Poe)
Date: Thu, 20 Mar 2008 20:08:21 -0500
Subject: [Linux-uvc-devel] Pro9000 video and audio working!
Message-ID: <47E30A85.8020106@fngi.net>

$ ffmpeg -f video4linux2 -s 320x240 -i /dev/video0 -f oss -ac 2 -i 
/dev/dsp1 -f mp4 test.mp4

I'm running FC8 with Dell Optiplexgx260 (Intel card), and Linksys Pro 
9000 webcam.  My test.mp4 returned both video and audio.  If this is of 
interest, and more info needed, let me know what commands to run, and 
I'll forward results.
Thanks, Tom



From trigger at space-based.de  Fri Mar 21 02:37:55 2008
From: trigger at space-based.de (Armin Berres)
Date: Fri, 21 Mar 2008 02:37:55 +0100
Subject: [Linux-uvc-devel] Unable to set auto exposure and white balance
	with svn revision 193
Message-ID: <20080321013755.GB5031@bluemoon>

Hi!

I just updated the uvc driver to the latest version available in Debian
(r193) in the hope to be able to set the red and blue component of the
white balance when using a Philips SPC1300NC.
After noticing that the private controls are gone and updating some
keys everything but one thing works again: I can't set the auto exposure
any more. When I query V4L2_CID_EXPOSURE_AUTO it is set to 3.
V4L2_EXPOSURE_AUTO and V4L2_EXPOSURE_MANUAL at the same time?
Setting it to V4L2_EXPOSURE_AUTO or V4L2_EXPOSURE_MANUAL doesn't work, I
just get the error code 5, Input/output error. When loadng the uvc module
with 'trace=0x004' I find the following in the syslog:
| uvcvideo: Failed to query (1) UVC control 2 (unit 1) : -32 (exp. 1).
| uvcvideo: usb_control_msg was delayed
The svn revision 120 worked just fine.

Now my other problem: When reading r187 I hoped to be able to manually
set the white balance, but it doesn't seem to be possible.
Setting V4L2_CID_AUTO_WHITE_BALANCE to 0 doesn't seem to have an effect.
The control seems to be neither V4L2_CTRL_TYPE_BOOLEAN nor
V4L2_CTRL_TYPE_INTEGER, so what else it is?
When trying to get V4L2_CID_RED_BALANCE or V4L2_CID_BLUE_BALANCE I get
the error code 22, Invalid argument. In the syslog I find
| uvcvideo: Control 0x0098090e not found.
| uvcvideo: Control 0x0098090f not found.
Is this expected to work, or can't this work? It is quite important for
me, to get the manual white balance running.

Any help is welcome :)

Greetings,
Armin

PS: Maybe these lines from the syslog are helpful:
uvcvideo: Adding mapping Brightness to control 00000000-0000-0000-0000-000000000101/2.
uvcvideo: Adding mapping Contrast to control 00000000-0000-0000-0000-000000000101/3.
uvcvideo: Adding mapping Hue to control 00000000-0000-0000-0000-000000000101/6.
uvcvideo: Adding mapping Saturation to control 00000000-0000-0000-0000-000000000101/7.
uvcvideo: Adding mapping Sharpness to control 00000000-0000-0000-0000-000000000101/8.
uvcvideo: Adding mapping Gamma to control 00000000-0000-0000-0000-000000000101/9.
uvcvideo: Adding mapping Backlight Compensation to control 00000000-0000-0000-0000-000000000101/1.
uvcvideo: Adding mapping Gain to control 00000000-0000-0000-0000-000000000101/4.
uvcvideo: Adding mapping Power Line Frequency to control 00000000-0000-0000-0000-000000000101/5.
uvcvideo: Adding mapping Hue, Auto to control 00000000-0000-0000-0000-000000000101/16.
uvcvideo: Adding mapping Exposure, Auto to control 00000000-0000-0000-0000-000000000001/2.
uvcvideo: Adding mapping Exposure, Auto Priority to control 00000000-0000-0000-0000-000000000001/3.
uvcvideo: Adding mapping Exposure (Absolute) to control 00000000-0000-0000-0000-000000000001/4.
uvcvideo: Adding mapping White Balance Temperature, Auto to control 00000000-0000-0000-0000-000000000101/11.
uvcvideo: Adding mapping White Balance Temperature to control 00000000-0000-0000-0000-000000000101/10.
uvcvideo: Adding mapping White Balance Blue Component to control 00000000-0000-0000-0000-000000000101/12.
uvcvideo: Adding mapping White Balance Red Component to control 00000000-0000-0000-0000-000000000101/12.
uvcvideo: Adding mapping Focus (absolute) to control 00000000-0000-0000-0000-000000000001/6.
uvcvideo: Adding mapping Focus, Auto to control 00000000-0000-0000-0000-000000000001/8.
uvcvideo: Found UVC 1.00 device Philips SPC 1300NC Webcam (0471:0331)


From malte.gell at gmx.de  Sat Mar 22 23:22:46 2008
From: malte.gell at gmx.de (Malte Gell)
Date: Sat, 22 Mar 2008 23:22:46 +0100
Subject: [Linux-uvc-devel] Philips SPC 620 NC webcam works partially
Message-ID: <200803222322.46238.malte.gell@gmx.de>

I just bought a Philips SPC 620 NC (44 EUR at Mediamarkt) and it works 
with the uvcvideo module, but is not listed on your website.

Device ID:
Bus 003 Device 028: ID 0471:0333 Philips

There is only one bug: when using it with Skype after a few minutes the 
cam just stops to deliver any more picture. I remove the cable, remove 
the kernel module, load the module again, start Skype again. This is 
pretty nasty. So I would say this cam works only partially.

It would be nice, if you had any advice, or should I better return it 
and get one that is better supported?

Malte



From malte.gell at gmx.de  Sun Mar 23 00:31:22 2008
From: malte.gell at gmx.de (Malte Gell)
Date: Sun, 23 Mar 2008 00:31:22 +0100
Subject: [Linux-uvc-devel] Philips SPC 620 NC webcam works partially
In-Reply-To: <200803222322.46238.malte.gell@gmx.de>
References: <200803222322.46238.malte.gell@gmx.de>
Message-ID: <200803230031.22500.malte.gell@gmx.de>

On Samstag, 22. M?rz 2008, Malte Gell wrote:
> I just bought a Philips SPC 620 NC (44 EUR at Mediamarkt) and it
> works with the uvcvideo module, but is not listed on your website.
>
> Device ID:
> Bus 003 Device 028: ID 0471:0333 Philips
>
> There is only one bug: when using it with Skype after a few minutes
> the cam just stops to deliver any more picture. I remove the cable,
> remove the kernel module, load the module again, start Skype again.
> This is pretty nasty. So I would say this cam works only partially.

I see, this issue is known:

http://www.quickcamteam.net/documentation/faq/logitech-webcam-linux-usb-incompatibilities



From malte.gell at gmx.de  Sun Mar 23 03:23:45 2008
From: malte.gell at gmx.de (Malte Gell)
Date: Sun, 23 Mar 2008 03:23:45 +0100
Subject: [Linux-uvc-devel] cannot start any webcam application
Message-ID: <200803230323.45750.malte.gell@gmx.de>

I know this is not a support forum, please forgive, but maybe this issue 
is driver related and may deserve further investigation.

Cam is a Philips SPC 620 NC which is not (yet) officially supported, but 
does work, though a bit unstable.

I am not able to run any webcam application, be it xawtv, gqcam or 
wxcam. None of them starts. xawtv with -nodga or -noxv or -noxv-video 
does not work as well.

xawtv -nodga -c /dev/video0 for example gives this:

xinerama 0: 1152x864+0+0
X Error of failed request:  XF86DGANoDirectVideoMode
  Major opcode of failed request:  137 (XFree86-DGA)
  Minor opcode of failed request:  1 (XF86DGAGetVideoLL)
  Serial number of failed request:  13
  Current serial number in output stream:  13
v4l-conf had some trouble, trying to continue anyway

The interesting thing is, that Skype 2.0.x DOES work! Kopete also 
detects the cam and shows a picture. Only drawback is, the camere 
freezes once in a while.

So, why does Skype run, but no other application? Is this driver 
related? 

Thanx
Malte


From barsnick at gmx.net  Sun Mar 23 18:56:45 2008
From: barsnick at gmx.net (Moritz Barsnick)
Date: Sun, 23 Mar 2008 18:56:45 +0100
Subject: [Linux-uvc-devel] cannot start any webcam application
In-Reply-To: <200803230323.45750.malte.gell@gmx.de>
References: <200803230323.45750.malte.gell@gmx.de>
Message-ID: <20080323175645.GA27206@sunshine.barsnick.net>

Moin Malte,

On Sun, Mar 23, 2008 at 03:23:45 +0100, Malte Gell wrote:

> xinerama 0: 1152x864+0+0
> X Error of failed request:  XF86DGANoDirectVideoMode

This looks like xawtv has a problem with your Xinerama configuration.
Have you tried disabling Xinerama (i.e. using a single screen), just to
go sure? I'm afraid there are quite a few apps out there which have
(minor) issues with Xinerama.

> I am not able to run any webcam application, be it xawtv, gqcam or 
> wxcam.

Do they all fail with the same error? That would be peculiar, they are
somewhat differently implemented, I think.


Firstly, you should try the reference UVC Linux implementation:
luvcview.

Secondly, you should try any app which accesses the webcam but doesn't
use X11. "luvcview -L", v4l-info, and others come to mind. (xawtv has
quite a few more or less useless V4L apps.)

> The interesting thing is, that Skype 2.0.x DOES work! Kopete also 
> detects the cam and shows a picture.

See, they probably implement their X11 stuff differently. So you're
probably just out of luck with the apps you tried.[*] What's more,
xawtv(-3.x) and gqcam are quite unmaintained, nobody is fixing any
errors popping up with recent innovations such as new drivers or new
X11 configurations (though they shouldn't be buggy as is).

Hope this helps,
frohe Ostern,
Moritz

[*] camorama is another app to try. ;-) "mplayer tv://" works nicely
    for me as well.


From laurent.pinchart at skynet.be  Sun Mar 23 21:09:33 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 23 Mar 2008 21:09:33 +0100
Subject: [Linux-uvc-devel] Philips SPC 620 NC webcam works partially
In-Reply-To: <200803230031.22500.malte.gell@gmx.de>
References: <200803222322.46238.malte.gell@gmx.de>
	<200803230031.22500.malte.gell@gmx.de>
Message-ID: <200803232109.33979.laurent.pinchart@skynet.be>

On Sunday 23 March 2008, Malte Gell wrote:
> On Samstag, 22. M?rz 2008, Malte Gell wrote:
> > I just bought a Philips SPC 620 NC (44 EUR at Mediamarkt) and it
> > works with the uvcvideo module, but is not listed on your website.
> >
> > Device ID:
> > Bus 003 Device 028: ID 0471:0333 Philips
> >
> > There is only one bug: when using it with Skype after a few minutes
> > the cam just stops to deliver any more picture. I remove the cable,
> > remove the kernel module, load the module again, start Skype again.
> > This is pretty nasty. So I would say this cam works only partially.
>
> I see, this issue is known:
>
> http://www.quickcamteam.net/documentation/faq/logitech-webcam-linux-usb-inc
>ompatibilities

The SPC620NC is not a Logitech camera so it shouldn't be affected by the bug 
you reference. There might be other bugs in the hardware/firmware though :-)

Could you please post the output of

lsusb -v -d 0471:0333

(using usbutils 0.72 or newer - 0.73+ preferred) as well as any kernel log 
message related to the webcam that might get printed during your Skype run 
and after the freeze ?

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Mar 23 21:26:07 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 23 Mar 2008 21:26:07 +0100
Subject: [Linux-uvc-devel] Unable to set auto exposure and white balance
	with svn revision 193
In-Reply-To: <20080321013755.GB5031@bluemoon>
References: <20080321013755.GB5031@bluemoon>
Message-ID: <200803232126.07988.laurent.pinchart@skynet.be>

Hi Armin,

On Friday 21 March 2008, Armin Berres wrote:
> Hi!
>
> I just updated the uvc driver to the latest version available in Debian
> (r193) in the hope to be able to set the red and blue component of the
> white balance when using a Philips SPC1300NC.
> After noticing that the private controls are gone and updating some
> keys everything but one thing works again: I can't set the auto exposure
> any more. When I query V4L2_CID_EXPOSURE_AUTO it is set to 3.
> V4L2_EXPOSURE_AUTO and V4L2_EXPOSURE_MANUAL at the same time?

3 is actually supposed to mean V4L2_EXPOSURE_APERTURE_PRIORITY. The control 
values were not properly defined in uvc_compat.h, I've just committed a fix 
to SVN.

> Setting it to V4L2_EXPOSURE_AUTO or V4L2_EXPOSURE_MANUAL doesn't work, I
> just get the error code 5, Input/output error. When loadng the uvc module
>
> with 'trace=0x004' I find the following in the syslog:
> | uvcvideo: Failed to query (1) UVC control 2 (unit 1) : -32 (exp. 1).
> | uvcvideo: usb_control_msg was delayed
>
> The svn revision 120 worked just fine.

Please try to recompile your userspace application using uvc_compat.h from 
r196 or videodev2.h from the linux-next git tree. You can also modify your 
header files manually with the following definition of the 
v4l2_exposure_auto_type enumeration:

enum  v4l2_exposure_auto_type {
        V4L2_EXPOSURE_MANUAL = 0,
        V4L2_EXPOSURE_AUTO = 1,
        V4L2_EXPOSURE_SHUTTER_PRIORITY = 2,
        V4L2_EXPOSURE_APERTURE_PRIORITY = 3
};

> Now my other problem: When reading r187 I hoped to be able to manually
> set the white balance, but it doesn't seem to be possible.
> Setting V4L2_CID_AUTO_WHITE_BALANCE to 0 doesn't seem to have an effect.
> The control seems to be neither V4L2_CTRL_TYPE_BOOLEAN nor
> V4L2_CTRL_TYPE_INTEGER, so what else it is?

The control is boolean, and is supposed to work. Do you get an error when you 
try to modify it ? Is anything printed to the kernel log ? Do you get the 
previously written value when you read the control back ?

> When trying to get V4L2_CID_RED_BALANCE or V4L2_CID_BLUE_BALANCE I get
> the error code 22, Invalid argument. In the syslog I find
>
> | uvcvideo: Control 0x0098090e not found.
> | uvcvideo: Control 0x0098090f not found.
>
> Is this expected to work, or can't this work? It is quite important for
> me, to get the manual white balance running.

The SPC1300NC has a white balance temperature control, you should use 
V4L2_CID_WHITE_BALANCE_TEMPERATURE instead of V4L2_CID_RED_BALANCE and 
V4L2_CID_BLUE_BALANCE.

> Any help is welcome :)

Hope this helped :-)

> Greetings,
> Armin

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Mar 23 21:26:38 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 23 Mar 2008 21:26:38 +0100
Subject: [Linux-uvc-devel] Pro9000 video and audio working!
In-Reply-To: <47E30A85.8020106@fngi.net>
References: <47E30A85.8020106@fngi.net>
Message-ID: <200803232126.38472.laurent.pinchart@skynet.be>

Hi Tom,

On Friday 21 March 2008, Tom Poe wrote:
> $ ffmpeg -f video4linux2 -s 320x240 -i /dev/video0 -f oss -ac 2 -i
> /dev/dsp1 -f mp4 test.mp4
>
> I'm running FC8 with Dell Optiplexgx260 (Intel card), and Linksys Pro
> 9000 webcam.  My test.mp4 returned both video and audio.  If this is of
> interest, and more info needed, let me know what commands to run, and
> I'll forward results.
> Thanks, Tom

Thanks for the information.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Mar 23 22:16:33 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 23 Mar 2008 22:16:33 +0100
Subject: [Linux-uvc-devel] Unsupported webcam
In-Reply-To: <bcbba7190803192129x6c06c36dh3295e7973af5ff3a@mail.gmail.com>
References: <bcbba7190803010903q6198a1fbh82595a797ff26d0e@mail.gmail.com>
	<200803030111.06648.laurent.pinchart@skynet.be>
	<bcbba7190803192129x6c06c36dh3295e7973af5ff3a@mail.gmail.com>
Message-ID: <200803232216.34119.laurent.pinchart@skynet.be>

Hi,

On Thursday 20 March 2008, Dark Shoyu wrote:
> Hey Laurent,
>
> I've figured out that it might not be the driver. dmesg doesn't show any
> error or warning message. The error I got when I try to use any program to
> access my webcam is that there is a wrong parameter. When trying to use
> mplayer, I got the following message:
>
> *$ mplayer tv:// -tv driver=v4l2
>
> * Playing tv://.
> TV file format detected.
> Selected driver: v4l2
>  name: Video 4 Linux 2 input
>  author: Martin Olschewski <olschewski at zpr.uni-koeln.de>
>  comment: first try, more to come ;-)
> v4l2: ioctl get standard failed: Invalid argument
> Selected device: Vega USB 2.0 Camera.
>  Capabilites:  video capture  streaming
>  supported norms:
>  inputs: 0 = Camera 1;
>  Current input: 0
>  Current format: YUYV
> v4l2: ioctl set format failed: Invalid argument
> v4l2: ioctl set format failed: Invalid argument
> v4l2: ioctl set format failed: Invalid argument
> tv.c: norm_from_string(pal): Bogus norm parameter, setting default.
> v4l2: ioctl enum norm failed: Invalid argument
> Error: Cannot set norm!
> Selected input hasn't got a tuner!
> v4l2: ioctl set mute failed: Invalid argument
> FPS not specified in the header or invalid, use the -fps option.
> No stream found.
>
> v4l2: ioctl set mute failed: Invalid argument
> v4l2: 0 frames successfully processed, 0 frames dropped.
>
>
> So I put the fps parameter with a value (30, for example) and it worked!
> The problem now is that I can't make it work in a streaming program, but
> it's not problem from the driver as I first thought.

Many software unfortunately still have minor v4l2-related bugs that prevent 
them from working with the Linux UVC driver. Worse, some others only support 
v4l1. The situation is slowly improving but it will take some time until all 
applications can be fixed and/or ported to v4l2. If you feel brave enough (or 
just adventurous :-)) feel free to fix your favourite software. It's usually 
not very difficult, and I can provide you with help regarding the v4l2 
interface.

Have a look at http://www.quickcamteam.net/software/linux/v4l2-software/ for 
software suggestions.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Mar 23 22:33:39 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 23 Mar 2008 22:33:39 +0100
Subject: [Linux-uvc-devel] Logitech: Quickcam Pro 9000 x Orbit AF
In-Reply-To: <20080318155706.1466ddb2@tux.abusar.org.br>
References: <20080314075155.GA30893@sdg.at>
	<200803180125.29343.laurent.pinchart@skynet.be>
	<20080318155706.1466ddb2@tux.abusar.org.br>
Message-ID: <200803232233.39396.laurent.pinchart@skynet.be>

On Tuesday 18 March 2008, D?niel Fraga wrote:
> On Tue, 18 Mar 2008 01:25:29 +0100
>
> Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > API in V4L2, but in the end it wouldn't help much. Forwarding the button
> > press event to userspace would in my opinion be more useful.
>
> 	As Mauro Chehab suggested, couldn't we just use evdev, just
> like it's used by remote controller code?

That's on my TODO list :-)

Best regards,

Laurent Pinchart


From barsnick at gmx.net  Sun Mar 23 23:38:32 2008
From: barsnick at gmx.net (Moritz Barsnick)
Date: Sun, 23 Mar 2008 23:38:32 +0100
Subject: [Linux-uvc-devel] linux-uvc is now packed with Fedora
Message-ID: <20080323223832.GB8394@sunshine.barsnick.net>

Hi Laurent, UVCers,

while you're working on getting linux-uvc integrated into the kernel
(I'm aware you're waiting for some V4L2 API changes), let me tell you
that Fedora has recently integrated the linux-uvc driver into their
kernel packages. (Fedora are not keen on separate kernel-module
packages. Policy is: If it's worth delivering, push it upstream.)
Possibly it is therefore also packaged with RHEL, the commercial branch
of the distribution. Just to let you know.

As of kernel package 2.6.24.2-3 of Feb 15 2008, linux-uvc is
integrated, albeit as a patch(!).

But while this is the case, I think it's time to hurry up and clean up
the code. :-) E.g. the module (in Fedora) isn't telling me, what
version it is! I will follow up with some suggestions I think are
useful.

Best regards,
Moritz


From fragabr at gmail.com  Sun Mar 23 23:44:54 2008
From: fragabr at gmail.com (=?ISO-8859-1?Q?D=E2niel?= Fraga)
Date: Sun, 23 Mar 2008 19:44:54 -0300
Subject: [Linux-uvc-devel] Logitech: Quickcam Pro 9000 x Orbit AF
In-Reply-To: <200803232233.39396.laurent.pinchart@skynet.be>
References: <20080314075155.GA30893@sdg.at>
	<200803180125.29343.laurent.pinchart@skynet.be>
	<20080318155706.1466ddb2@tux.abusar.org.br>
	<200803232233.39396.laurent.pinchart@skynet.be>
Message-ID: <20080323194454.1a98ebd6@tux.abusar.org.br>

On Sun, 23 Mar 2008 22:33:39 +0100
Laurent Pinchart <laurent.pinchart at skynet.be> wrote:

> That's on my TODO list :-)

	thank you very much. As soon as it's done, I want to be the
first one to test ;)


-- 


From barsnick at gmx.net  Mon Mar 24 00:01:20 2008
From: barsnick at gmx.net (Moritz Barsnick)
Date: Mon, 24 Mar 2008 00:01:20 +0100
Subject: [Linux-uvc-devel] Driver improvement suggestion: Prefer device node,
	and more	consistant messaging
Message-ID: <20080323230120.GC8394@sunshine.barsnick.net>

Hi Laurent, UVCers,

I have a small suggestion for the linux-uvc driver. Currently, the
driver lets V4L2 automatically select the device node (/dev/videoX).
But we all know that order of loading modules, init times, et.al. may
influence the order, therefore I thought it might by practical to
introduce a module option to request a specific device node.

Caveat: My implementation is by all means incomplete. It will only work
for one device (and actually fail for any subsequent ones AFAICT,
unless you reset the parameter in /sys/), and is totally unflexible. On
the other hand. it doesn't intrude if you don't provide a parameter.

I forsee flexible functionality as you can find e.g. in the pwc webcam
driver[*]. Their implementation also fails if the requested node is not
available, but it provides a type and serial number dependant
selection.


Furthermore, while quick-hacking this code, I noticed that linux-uvc
a) doesn't report its version -> use macro MODULE_VERSION()
b) doesn't provide parameter descriptions (which can be queried with
   "modinfo uvcvideo") -> use macro MODULE_PARM_DESC()
c) doesn't report which device node it actually assigns to the device,
   which is very useful in dmesg (and which other drivers tend to do).

So please consider the attached patch two seperate suggestions:
- general messaging and API documentation improvements
- a stub for requesting a particular device node.

Please let me know if you consider it useful, or have something better
to suggest.

Thanks for listening, and thanks for the ever so valuable driver!

Patch is against SVN r195.
I've tested with Logitech QuickCam Fusion on two machines.

Kind regards,
Moritz

[*] called device hints in pwc-if.c
-------------- next part --------------
diff -ur linux-uvc-trunk-r195/uvc_driver.c linux-uvc-trunk-r195-device_request/uvc_driver.c
--- linux-uvc-trunk-r195/uvc_driver.c	2008-03-20 10:59:20.000000000 +0100
+++ linux-uvc-trunk-r195-device_request/uvc_driver.c	2008-03-20 19:47:41.000000000 +0100
@@ -52,6 +52,7 @@
 #endif
 
 static unsigned int uvc_quirks_param = 0;
+static unsigned int uvc_dev_req_param = -1;
 unsigned int uvc_trace_param = 0;
 
 /* ------------------------------------------------------------------------
@@ -1470,11 +1471,16 @@
 	dev->video.vdev = vdev;
 	video_set_drvdata(vdev, &dev->video);
 
-	if (video_register_device(vdev, VFL_TYPE_GRABBER, -1) < 0) {
+	if (uvc_dev_req_param != -1) {
+		uvc_printk(KERN_INFO, "Explicitly requesting device /dev/video%d.\n", uvc_dev_req_param);
+	}
+
+	if (video_register_device(vdev, VFL_TYPE_GRABBER, uvc_dev_req_param) < 0) {
 		dev->video.vdev = NULL;
 		video_device_release(vdev);
 		return -1;
 	}
+	uvc_printk(KERN_INFO, "Registered as /dev/video%d.\n", vdev->minor & 0x3F);
 
 	return 0;
 }
@@ -1902,15 +1908,20 @@
 static void __exit uvc_cleanup(void)
 {
 	usb_deregister(&uvc_driver.driver);
+	uvc_printk(KERN_INFO, "Deregistered driver.\n");
 }
 
 module_init(uvc_init);
 module_exit(uvc_cleanup);
 
 module_param_named(quirks, uvc_quirks_param, uint, S_IRUGO|S_IWUSR);
+MODULE_PARM_DESC(quirks, "Forced quirks mask");
 module_param_named(trace, uvc_trace_param, uint, S_IRUGO|S_IWUSR);
+MODULE_PARM_DESC(trace, "Trace level mask");
+module_param_named(dev_req, uvc_dev_req_param, int, S_IRUGO|S_IWUSR);
+MODULE_PARM_DESC(dev_req, "Requested device /dev/videoX instead of automatic selection");
 
 MODULE_AUTHOR(DRIVER_AUTHOR);
 MODULE_DESCRIPTION(DRIVER_DESC);
 MODULE_LICENSE("GPL");
-
+MODULE_VERSION(DRIVER_VERSION);

From laurent.pinchart at skynet.be  Mon Mar 24 00:12:24 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 24 Mar 2008 00:12:24 +0100
Subject: [Linux-uvc-devel] Logitech: Quickcam Pro 9000 x Orbit AF
In-Reply-To: <20080318155706.1466ddb2@tux.abusar.org.br>
References: <20080314075155.GA30893@sdg.at>
	<200803180125.29343.laurent.pinchart@skynet.be>
	<20080318155706.1466ddb2@tux.abusar.org.br>
Message-ID: <200803240012.25061.laurent.pinchart@skynet.be>

On Tuesday 18 March 2008, D?niel Fraga wrote:
> On Tue, 18 Mar 2008 01:25:29 +0100
>
> Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > API in V4L2, but in the end it wouldn't help much. Forwarding the button
> > press event to userspace would in my opinion be more useful.
>
> 	As Mauro Chehab suggested, couldn't we just use evdev, just
> like it's used by remote controller code?

Could you please test the latest SVN revision (r197) ? I've just committed 
evdev support.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Mar 24 00:38:01 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 24 Mar 2008 00:38:01 +0100
Subject: [Linux-uvc-devel] Philips SPC 1000NC Webcam and VideoLan v4l2
In-Reply-To: <47D3CCA1.3000007@it-sudparis.eu>
References: <47D3CCA1.3000007@it-sudparis.eu>
Message-ID: <200803240038.01839.laurent.pinchart@skynet.be>

On Sunday 09 March 2008, jehan procaccia wrote:
> Hello,
>
> I cannot get videolan (vlc) capture from my philips SPC 1000NC Webcam.
> I did install fom atrpms repo uvcvideo drivers which seems to load fine,
> and do works fine in the ekiga application :-) . I can see the captured
> video in ekiga by selectin v4l2 manager (not v4l !) . I suspect thet vlc
> isn't loading v4l2 or is searching for capabilities not defined ? If
> anyone did capture video from videolan with that webcam, or have an idao
> on my problem, please let me know.

Try upgrading vlc to the development branch (0.9). It should then support 
v4l2.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Mar 24 01:04:14 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 24 Mar 2008 01:04:14 +0100
Subject: [Linux-uvc-devel] Black image on videoconferencing apps.
In-Reply-To: <frritd$4ci$1@ger.gmane.org>
References: <fqmuds$e3c$1@ger.gmane.org> <fr9j8j$gfv$1@ger.gmane.org>
	<frritd$4ci$1@ger.gmane.org>
Message-ID: <200803240104.14866.laurent.pinchart@skynet.be>

Hi Ra?l,

sorry for the late reply, and thanks for the very detailled description of 
your problem.

On Wednesday 19 March 2008, Ra?l S?nchez Siles wrote:
>   Hello:
>
>   Basically same story but with some more appreciations.
>
> Ra?l S?nchez Siles wrote:
> >>> Ra?l S?nchez Siles wrote:
> >>>>   Hello All:
> >>>>
> >>>>   On skype I had the same problem and is this: I can start my video
> >>>> and the
> >>>> other end will see it, but after a randon time ranging from little
> >>>> seconds to little minutes, the image I sent (and that I'm able to see)
> >>>> goes to black unconditionally.
> >>>>
> >>>>   After this, same as before the video was working at this point, but
> >>>>   stops
> >>>> working after some time. Along the video conference skype seems to try
> >>>> to reinitialize webcam, it starts working again, but then it goes to
> >>>> black again.
> >>
> >> [...]
> >
> >   Now I got to reproduce the problem. I think it's related to
> >   environmental
> > light somehow. I had some trouble to reproduce problem in the mornings
> > because I had a lot of natural light, but it was at evening that I was
> > trying to use the camera. So to test it out I turned on a lighter lamp.
> > This way it was harder to get the problem, and I only got it when I
> > covered the camera focus totally, after that, just a black image like the
> > one I used to see remained there. The only difference was a small whitish
> > point.
> >
> >   After this I think there's some problem in the light/bright regulation
> > mechanish. I think next step is starting to look at the code and see
> > where some of this regulation happen, any pointer would be appreciated.
>
>   Now I'm more certain that this is a trouble in the light regulation
> mechanism, but I don't know how to get more information from the driver. I
> don't know even where the light regulation happens. Is it on driver, on
> hardware or in the userspace application by chance (doubtfully this last)?

The driver doesn't perform any image processing. What you call light 
regulation is mostly auto-exposure (and maybe to a lesser extent auto white 
balance). Your camera doesn't report any exposure-related control in its USB 
descriptors, so it's not clear if the camera doesn't do any exposure control 
or if it doesn't allow exposure parameters to be changed. I'd vote for the 
second option.

Userspace applications can also implement all kind of image enhancement 
algorithms. That's up to the application, and there's no easy way to know 
what skype does due to its closed-source nature.

>   My most reliable method to reproduce up to know is being on a very soft
> light environment, for example: night with a dim indirect light(12W low
> consumption lamp). In this situation you will see the image, but not very
> well defined using a regular videoconferencing resolution and frame rate.
> Now cover the camera focus completely using your hand, the image will
> become totally black and, if the light is not clear enough it will remain
> in that state unless you reinitialise the video streaming or use a light
> enough light so the brightness regulates automatically to a useful value.

That seems to be a bug either in the camera hardware/firmware or in the 
application. I'd try using the camera with luvcview. If you can reproduce the 
problem the hardware will be to blame. Otherwise skype will be at fault.

>   Thanks for your patience, and I still appreciate help and/or pointers.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Mar 24 01:08:04 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 24 Mar 2008 01:08:04 +0100
Subject: [Linux-uvc-devel] linux-uvc is now packed with Fedora
In-Reply-To: <20080323223832.GB8394@sunshine.barsnick.net>
References: <20080323223832.GB8394@sunshine.barsnick.net>
Message-ID: <200803240108.04877.laurent.pinchart@skynet.be>

Hi Moritz,

On Sunday 23 March 2008, Moritz Barsnick wrote:
> Hi Laurent, UVCers,
>
> while you're working on getting linux-uvc integrated into the kernel
> (I'm aware you're waiting for some V4L2 API changes), let me tell you
> that Fedora has recently integrated the linux-uvc driver into their
> kernel packages. (Fedora are not keen on separate kernel-module
> packages. Policy is: If it's worth delivering, push it upstream.)
> Possibly it is therefore also packaged with RHEL, the commercial branch
> of the distribution. Just to let you know.

Thanks for the information.

> As of kernel package 2.6.24.2-3 of Feb 15 2008, linux-uvc is
> integrated, albeit as a patch(!).
>
> But while this is the case, I think it's time to hurry up and clean up
> the code. :-) E.g. the module (in Fedora) isn't telling me, what
> version it is! I will follow up with some suggestions I think are
> useful.

We're getting there, some required additions are now in the linux-next v4l/dvb 
tree.

Best regards,

Laurent Pinchart


From barsnick at gmx.net  Mon Mar 24 01:13:38 2008
From: barsnick at gmx.net (Moritz Barsnick)
Date: Mon, 24 Mar 2008 01:13:38 +0100
Subject: [Linux-uvc-devel] Driver improvement suggestion: Use quirks
	parameter to mask unsafe	code, reset patch
Message-ID: <20080324001338.GD8394@sunshine.barsnick.net>

Hi Laurent, UVCers,

the quirks parameter was recently introduced to the linux-uvc module,
and is very practical to knowingly force certain behavior.

While I was and am fighting with the ?%&#! behavior of the SPCA525 ASIC
in my Logitech QuickCam Fusion 046d:08c1, I luckily came across the
"reset" patches, kindly linked from the QC Team site[*]. And the
patches seem to have helped me, but I'll follow up with more info once
I'm sure whether it works.

I understand why you don't want to make the hacked fixes default in the
code (it has been stressed many times on the list), but while Logitech
try to come up with a solution, perhaps a quirks based integration
would allow many users not to have to patch the driver. The code would
only become active if explicitly selected with a module parameter. I
believe that this is what the quirks parameter is perfectly made for,
and I consider it non-intrusive for the unknowing user.

I have ported the two relevant patches:
a) the reset patch as found in
   http://lists.berlios.de/pipermail/linux-uvc-devel/2007-March/001476.html
b) the reset + resubmit urb patch, probably by Evgeny, found in
   https://lists.berlios.de/pipermail/linux-uvc-devel/2008-January/002830.html
   which adds a second mechanism to the first patch.
Instead of making the code changes "absolute"/"final" or #ifdef'd, I
made the sections depend on a corresponding quirks mask setting. (Note:
these are new quirks only defined by module parameter, not the kind
defined by default by the device model.)

The patch is attached. It introduces two new quirks UVC_QUIRK_RESET
(0x20, I would write it (1<<5)), and UVC_QUIRK_RESUBMIT_URB (0x40,
better (1<<6)). The functionality is separated.

The parameter quirks=32 has consistantly helped the initialization of
my Logitech QuickCam (incl. safe behavior through plug/unplug,
load/unload, start/stop of apps) on both my machines, and quirks=96 has
helped on my laptop through consistent failures (to be confirmed). I'm
not sure the reset urb section is needed on my desktop, I think that
machine has always behaved fine once the UVC device could init itself.
But activating the reset urb code via the quirk has not hurt either, as
far as I can tell. Sorry, I don't want to sound like I want this code
as default behavior - the opposite is the case! :-)

Your opinion is welcomed.

Patch is against SVN r195.
I've tested with Logitech QuickCam Fusion on two machines, both USB 1.1
and USB 2.0.

Kind regards,
and many thanks, especially to Laurent, Evgeny, and Michel,
Moritz

[*]
http://www.quickcamteam.net/documentation/faq/logitech-webcam-linux-usb-incompatibilities
-------------- next part --------------
diff -ur linux-uvc-trunk-r195/uvc_driver.c linux-uvc-trunk-r195-reset_quirk_resubmit_urb/uvc_driver.c
--- linux-uvc-trunk-r195/uvc_driver.c	2008-03-20 10:59:20.000000000 +0100
+++ linux-uvc-trunk-r195-reset_quirk_resubmit_urb/uvc_driver.c	2008-03-20 14:49:03.000000000 +0100
@@ -1431,9 +1431,26 @@
 	 * parameters.
 	 */
 	if ((ret = uvc_video_init(&dev->video)) < 0) {
-		uvc_printk(KERN_ERR, "Failed to initialize the device "
-			"(%d).\n", ret);
-		return ret;
+		if (dev->quirks & UVC_QUIRK_RESET) {
+			uvc_printk(KERN_ERR, "Failed to initialize the device "
+				   "(%d), trying to reset ...\n", ret);
+
+			if ((ret = uvc_usb_reset(dev)))
+				return ret;
+
+			if ((ret = uvc_video_init(&dev->video)) < 0) {
+				uvc_printk(KERN_ERR, "Failed to initialize the device "
+					   "(%d).\n", ret);
+				return ret;
+			}
+		}
+		else {
+			uvc_printk(KERN_ERR, "Failed to initialize the device "
+				"(%d).\n", ret);
+			return ret;
+
+		}
+		
 	}
 
 	/* Register the device with V4L. */
@@ -1552,6 +1569,7 @@
 	dev->udev = usb_get_dev(udev);
 	dev->intf = usb_get_intf(intf);
 	dev->intfnum = intf->cur_altsetting->desc.bInterfaceNumber;
+	dev->last_urb = 0;
 	dev->quirks = id->driver_info | uvc_quirks_param;
 
 	/* Parse the Video Class control descriptor */
diff -ur linux-uvc-trunk-r195/uvc_status.c linux-uvc-trunk-r195-reset_quirk_resubmit_urb/uvc_status.c
--- linux-uvc-trunk-r195/uvc_status.c	2008-02-10 22:53:53.000000000 +0100
+++ linux-uvc-trunk-r195-reset_quirk_resubmit_urb/uvc_status.c	2008-03-20 15:08:02.000000000 +0100
@@ -96,9 +96,20 @@
 	/* Resubmit the URB. */
 	urb->interval = dev->int_ep->desc.bInterval;
 	if ((ret = usb_submit_urb(urb, GFP_ATOMIC)) < 0) {
-		uvc_printk(KERN_ERR, "Failed to resubmit status URB (%d).\n",
-			ret);
+		if (dev->quirks & UVC_QUIRK_RESUBMIT_URB) {
+			if (ret == -EL2NSYNC) {
+				if ((ret = usb_submit_urb(urb, GFP_ATOMIC)) < 0) {
+					uvc_printk(KERN_ERR, "Failed to resubmit status URB (%d).\n",
+						ret);
+				}
+			}
+			else {
+				uvc_printk(KERN_ERR, "Failed to resubmit status URB (%d).\n",
+					ret);
+			}
+		}
 	}
+	dev->last_urb = jiffies;
 }
 
 int uvc_status_init(struct uvc_device *dev)
@@ -106,6 +117,7 @@
 	struct usb_host_endpoint *ep = dev->int_ep;
 	unsigned int pipe;
 	int interval;
+	int ret = 0;
 
 	if (ep == NULL)
 		return 0;
@@ -128,7 +140,21 @@
 		dev->status, sizeof dev->status, uvc_status_complete,
 		dev, interval);
 
-	return usb_submit_urb(dev->int_urb, GFP_KERNEL);
+	if (dev->quirks & UVC_QUIRK_RESUBMIT_URB) {
+		if ((ret = usb_submit_urb(dev->int_urb, GFP_KERNEL)) < 0) {
+			if (ret == -EL2NSYNC) {
+				if ((ret = usb_submit_urb(dev->int_urb, GFP_KERNEL)) < 0) {
+					uvc_printk(KERN_ERR, "Failed to resubmit status URB (%d).\n",
+						ret);
+				}
+			}
+		}
+		dev->last_urb = jiffies;
+		return ret;
+	}
+	else {
+		return usb_submit_urb(dev->int_urb, GFP_KERNEL);
+	}
 }
 
 void uvc_status_cleanup(struct uvc_device *dev)
@@ -145,9 +171,24 @@
 
 int uvc_status_resume(struct uvc_device *dev)
 {
+	int ret = 0;
 	if (dev->int_urb == NULL)
 		return 0;
 
-	return usb_submit_urb(dev->int_urb, GFP_KERNEL);
+	if (dev->quirks & UVC_QUIRK_RESUBMIT_URB) {
+		if ((ret = usb_submit_urb(dev->int_urb, GFP_KERNEL)) < 0) {
+			if (ret == -EL2NSYNC) {
+				if ((ret = usb_submit_urb(dev->int_urb, GFP_KERNEL)) < 0) {
+					uvc_printk(KERN_ERR, "Failed to resubmit status URB (%d).\n",
+						ret);
+				}
+			}
+		}
+		dev->last_urb = jiffies;
+		return ret;
+	}
+	else {
+		return usb_submit_urb(dev->int_urb, GFP_KERNEL);
+	}
 }
 
diff -ur linux-uvc-trunk-r195/uvc_v4l2.c linux-uvc-trunk-r195-reset_quirk_resubmit_urb/uvc_v4l2.c
--- linux-uvc-trunk-r195/uvc_v4l2.c	2008-03-20 10:59:20.000000000 +0100
+++ linux-uvc-trunk-r195-reset_quirk_resubmit_urb/uvc_v4l2.c	2008-03-20 11:04:04.000000000 +0100
@@ -456,6 +456,12 @@
 		mutex_unlock(&video->queue.mutex);
 	}
 
+	if (video->dev->quirks & UVC_QUIRK_RESET) {
+		/* leave usb device in a clean state */
+		if (video->dev->state & UVC_DEV_IOERROR)
+			uvc_video_reinit(video);
+	}
+
 	/* Release the file handle. */
 	uvc_dismiss_privileges(handle);
 	kfree(handle);
diff -ur linux-uvc-trunk-r195/uvc_video.c linux-uvc-trunk-r195-reset_quirk_resubmit_urb/uvc_video.c
--- linux-uvc-trunk-r195/uvc_video.c	2008-03-20 10:59:20.000000000 +0100
+++ linux-uvc-trunk-r195-reset_quirk_resubmit_urb/uvc_video.c	2008-03-20 14:41:40.000000000 +0100
@@ -39,24 +39,69 @@
 	__u8 type = USB_TYPE_CLASS | USB_RECIP_INTERFACE;
 	unsigned int pipe;
 	int ret;
+	int delayed = 0;
 
 	pipe = (query & 0x80) ? usb_rcvctrlpipe(dev->udev, 0)
 			      : usb_sndctrlpipe(dev->udev, 0);
 	type |= (query & 0x80) ? USB_DIR_IN : USB_DIR_OUT;
 
+	if (dev->quirks & UVC_QUIRK_RESUBMIT_URB) {
+		if (dev->last_urb) {
+			while (time_before(jiffies, dev->last_urb + 2)) {
+				schedule();		
+				delayed = 1;
+			}
+		}
+	}
+
 	ret = usb_control_msg(dev->udev, pipe, query, type, cs << 8,
 			unit << 8 | intfnum, data, size, timeout);
+	dev->last_urb = jiffies;
 
 	if (ret != size) {
 		uvc_printk(KERN_ERR, "Failed to query (%u) UVC control %u "
 			"(unit %u) : %d (exp. %u).\n", query, cs, unit, ret,
 			size);
+		if (dev->quirks & UVC_QUIRK_RESUBMIT_URB) {
+			if (delayed) {
+				uvc_printk(KERN_ERR,"usb_control_msg was delayed\n");
+			} else {
+				uvc_printk(KERN_ERR,"usb_control_msg was NOT delayed\n");
+			}
+		}
+		if (ret == -ETIMEDOUT) // reset the device in case of -110 error
+			dev->state |= UVC_DEV_IOERROR;
+
+		dev->state |= UVC_DEV_IOERROR;
 		return -EIO;
 	}
 
 	return 0;
 }
 
+int uvc_usb_reset(struct uvc_device *dev)
+{
+	int l, ret;
+
+	l = usb_lock_device_for_reset(dev->udev, dev->intf);
+
+	if (l >= 0) {
+		ret = usb_reset_device(dev->udev);
+		if (l)
+			usb_unlock_device(dev->udev);
+	}
+	else
+		ret = -EBUSY;
+
+	if (ret)
+		uvc_printk(KERN_DEBUG, "uvc_usb_reset: Unable to reset usb device"
+			   "(%d).\n", ret);
+	else
+		dev->state &= ~UVC_DEV_IOERROR;
+
+	return ret;
+}
+
 int uvc_query_ctrl(struct uvc_device *dev, __u8 query, __u8 unit,
 			__u8 intfnum, __u8 cs, void *data, __u16 size)
 {
@@ -535,9 +580,20 @@
 	video->decode(urb, video, buf);
 
 	if ((ret = usb_submit_urb(urb, GFP_ATOMIC)) < 0) {
-		uvc_printk(KERN_ERR, "Failed to resubmit video URB (%d).\n",
-			ret);
-        }
+		if (video->dev->quirks & UVC_QUIRK_RESUBMIT_URB) {
+			if (ret == -EL2NSYNC) {
+				if ((ret = usb_submit_urb(urb, GFP_ATOMIC)) < 0) {
+					uvc_printk(KERN_ERR, "Failed to resubmit video URB (%d).\n",
+						ret);
+				}
+			}
+		}
+		else {
+			uvc_printk(KERN_ERR, "Failed to resubmit video URB (%d).\n",
+				ret);
+		}
+	}
+	video->dev->last_urb = jiffies;
 }
 
 /*
@@ -684,6 +740,25 @@
 	return 0;
 }
 
+/* 
+ * Reset and Re-Initialize video device
+ */
+int uvc_video_reinit(struct uvc_video_device *video)
+{
+	int ret;
+
+	if ((ret = uvc_usb_reset(video->dev)) < 0)
+		return ret;
+
+	if ((ret = uvc_set_video_ctrl(video, &video->streaming->ctrl, 0)) < 0) {
+		uvc_printk(KERN_DEBUG, "uvc_video_reinit: Unable to commit format "
+			   "(%d).\n", ret);
+		return ret;
+	}
+
+	return 0;
+}
+
 /*
  * Initialize isochronous/bulk URBs and allocate transfer buffers.
  */
@@ -755,6 +830,7 @@
 			return ret;
 		}
 	}
+	video->dev->last_urb = jiffies;
 
 	return 0;
 }
diff -ur linux-uvc-trunk-r195/uvcvideo.h linux-uvc-trunk-r195-reset_quirk_resubmit_urb/uvcvideo.h
--- linux-uvc-trunk-r195/uvcvideo.h	2008-03-20 10:59:20.000000000 +0100
+++ linux-uvc-trunk-r195-reset_quirk_resubmit_urb/uvcvideo.h	2008-03-20 14:33:51.000000000 +0100
@@ -299,6 +299,8 @@
 #define UVC_QUIRK_PROBE_EXTRAFIELDS	0x00000004
 #define UVC_QUIRK_BUILTIN_ISIGHT	0x00000008
 #define UVC_QUIRK_STREAM_NO_FID		0x00000010
+#define UVC_QUIRK_RESET			0x00000020
+#define UVC_QUIRK_RESUBMIT_URB		0x00000040
 
 /* Format flags */
 #define UVC_FMT_FLAG_COMPRESSED		0x00000001
@@ -588,6 +590,7 @@
 
 enum uvc_device_state {
 	UVC_DEV_DISCONNECTED = 1,
+	UVC_DEV_IOERROR = 2,
 };
 
 struct uvc_device {
@@ -597,6 +600,7 @@
 	int intfnum;
 
 	enum uvc_device_state state;
+	unsigned long last_urb;
 	struct kref kref;
 	struct list_head list;
 
@@ -702,6 +706,8 @@
 extern struct file_operations uvc_fops;
 
 /* Video */
+extern int uvc_usb_reset(struct uvc_device *dev);
+extern int uvc_video_reinit(struct uvc_video_device *video);
 extern int uvc_video_init(struct uvc_video_device *video);
 extern int uvc_video_suspend(struct uvc_video_device *video);
 extern int uvc_video_resume(struct uvc_video_device *video);

From fragabr at gmail.com  Mon Mar 24 01:37:31 2008
From: fragabr at gmail.com (=?ISO-8859-1?Q?D=E2niel?= Fraga)
Date: Sun, 23 Mar 2008 21:37:31 -0300
Subject: [Linux-uvc-devel] Logitech: Quickcam Pro 9000 x Orbit AF
In-Reply-To: <200803240012.25061.laurent.pinchart@skynet.be>
References: <20080314075155.GA30893@sdg.at>
	<200803180125.29343.laurent.pinchart@skynet.be>
	<20080318155706.1466ddb2@tux.abusar.org.br>
	<200803240012.25061.laurent.pinchart@skynet.be>
Message-ID: <20080323213731.322e35c5@tux.abusar.org.br>

On Mon, 24 Mar 2008 00:12:24 +0100
Laurent Pinchart <laurent.pinchart at skynet.be> wrote:

> Could you please test the latest SVN revision (r197) ? I've just committed 
> evdev support.

	A quick test (everything perfect!):

I: Bus=0003 Vendor=046d Product=0990 Version=0005
N: Name="UVC Camera (046d:0990)"
P: Phys=usb-0000:00:02.1-3
S: Sysfs=/devices/pci0000:00/0000:00:02.1/usb2/2-3/2-3:1.0/input/input6
U: Uniq=
H: Handlers=
B: EV=3
B: KEY=1 0 0 0 0

fraga at tux ~/src$ sudo modprobe evdev
fraga at tux ~/src$ sudo cat /dev/event6
???G*????G????G? ???G?

	It seems ok for me (I pressed the button 3 times ;).

	Thank you very much!
	
	Ps: now I just need to configure it to monitor /dev/event6 and
to grab a snapshot when the event happens. Very nice!

-- 


From malte.gell at gmx.de  Mon Mar 24 10:19:48 2008
From: malte.gell at gmx.de (Malte Gell)
Date: Mon, 24 Mar 2008 10:19:48 +0100
Subject: [Linux-uvc-devel] cannot start any webcam application
In-Reply-To: <20080323175645.GA27206@sunshine.barsnick.net>
References: <200803230323.45750.malte.gell@gmx.de>
	<20080323175645.GA27206@sunshine.barsnick.net>
Message-ID: <200803241019.49287.malte.gell@gmx.de>

On Sonntag, 23. M?rz 2008, Moritz Barsnick wrote:

> On Sun, Mar 23, 2008 at 03:23:45 +0100, Malte Gell wrote:
> > xinerama 0: 1152x864+0+0
> > X Error of failed request:  XF86DGANoDirectVideoMode
>
> This looks like xawtv has a problem with your Xinerama configuration.
> Have you tried disabling Xinerama (i.e. using a single screen), just
> to go sure? 

Yep, disabled. Problem persists. I am using an nVidia based card and the 
latest closed source driver if that matters.

> > I am not able to run any webcam application, be it xawtv, gqcam or
> > wxcam.
>
> Do they all fail with the same error? 

Yes, I could send error messages, but would do this in another reply to 
your message to make it read better.

Is the output of v4l-info of any interest? If it is, thats what it say 
and thanx for the efforts!

### v4l2 device info [/dev/video0] ###
general info
    VIDIOC_QUERYCAP
        driver                  : "uvcvideo"
        card                    : "USB Video Camera"
        bus_info                : "0000:00:13.0"
        version                 : 0.1.0
        capabilities            : 0x4000001 [VIDEO_CAPTURE,STREAMING]

standards

inputs
    VIDIOC_ENUMINPUT(0)
        index                   : 0
        name                    : "Camera 1"
        type                    : CAMERA
        audioset                : 0
        tuner                   : 0
        std                     : 0x0 []
        status                  : 0x0 []

video capture
    VIDIOC_ENUM_FMT(0,VIDEO_CAPTURE)
        index                   : 0
        type                    : VIDEO_CAPTURE
        flags                   : 0
        description             : "YUV 4:2:2 (YUYV)"
        pixelformat             : 0x56595559 [YUYV]
    VIDIOC_G_FMT(VIDEO_CAPTURE)
        type                    : VIDEO_CAPTURE
        fmt.pix.width           : 160
        fmt.pix.height          : 120
        fmt.pix.pixelformat     : 0x56595559 [YUYV]
        fmt.pix.field           : NONE
        fmt.pix.bytesperline    : 320
        fmt.pix.sizeimage       : 38400
        fmt.pix.colorspace      : unknown
        fmt.pix.priv            : 0

controls
    VIDIOC_QUERYCTRL(BASE+0)
        id                      : 9963776
        type                    : INTEGER
        name                    : "Brightness"
        minimum                 : 0
        maximum                 : 37
        step                    : 1
        default_value           : 24
        flags                   : 0
    VIDIOC_QUERYCTRL(BASE+1)
        id                      : 9963777
        type                    : INTEGER
        name                    : "Contrast"
        minimum                 : 0
        maximum                 : 200
        step                    : 1
        default_value           : 124
        flags                   : 0
    VIDIOC_QUERYCTRL(BASE+2)
        id                      : 9963778
        type                    : INTEGER
        name                    : "Saturation"
        minimum                 : 0
        maximum                 : 200
        step                    : 1
        default_value           : 121
        flags                   : 0
    VIDIOC_QUERYCTRL(PRIVATE_BASE+0)
        id                      : 134217728
        type                    : INTEGER
        name                    : "Backlight Compensation"
        minimum                 : 0
        maximum                 : 2
        step                    : 1
        default_value           : 0
        flags                   : 0
    VIDIOC_QUERYCTRL(PRIVATE_BASE+1)
        id                      : 134217729
        type                    : MENU
        name                    : "Power Line Frequency"
        minimum                 : 0
        maximum                 : 2
        step                    : 1
        default_value           : 0
        flags                   : 0
    VIDIOC_QUERYCTRL(PRIVATE_BASE+2)
        id                      : 134217730
        type                    : INTEGER
        name                    : "Sharpness"
        minimum                 : 0
        maximum                 : 63
        step                    : 1
        default_value           : 15
        flags                   : 0
    VIDIOC_QUERYCTRL(PRIVATE_BASE+12)
        id                      : 134217740
        type                    : BOOLEAN
        name                    : "White Balance Temperature, Auto"
        minimum                 : 0
        maximum                 : 0
        step                    : 0
        default_value           : 1
        flags                   : 0
    VIDIOC_QUERYCTRL(PRIVATE_BASE+13)
        id                      : 134217741
        type                    : INTEGER
        name                    : "White Balance Temperature"
        minimum                 : 2800
        maximum                 : 6800
        step                    : 100
        default_value           : 6600
        flags                   : 0

### video4linux device info [/dev/video0] ###
general info
    VIDIOCGCAP
        name                    : "USB Video Camera"
        type                    : 0x1 [CAPTURE]
        channels                : 1
        audios                  : 0
        maxwidth                : 160
        maxheight               : 120
        minwidth                : 48
        minheight               : 32

channels
ioctl VIDIOCGCHAN: Invalid argument

tuner
ioctl VIDIOCGTUNER: Invalid argument

audio
ioctl VIDIOCGAUDIO: Invalid argument

picture
    VIDIOCGPICT
        brightness              : 42509
        hue                     : 0
        colour                  : 39649
        contrast                : 40632
        whiteness               : 37137
        depth                   : 16
        palette                 : YUYV

buffer
ioctl VIDIOCGFBUF: Invalid argument

window
    VIDIOCGWIN
        x                       : 0
        y                       : 0
        width                   : 160
        height                  : 120
        chromakey               : 0
        flags                   : 0


From malte.gell at gmx.de  Mon Mar 24 10:23:44 2008
From: malte.gell at gmx.de (Malte Gell)
Date: Mon, 24 Mar 2008 10:23:44 +0100
Subject: [Linux-uvc-devel] cannot start any webcam application
In-Reply-To: <20080323175645.GA27206@sunshine.barsnick.net>
References: <200803230323.45750.malte.gell@gmx.de>
	<20080323175645.GA27206@sunshine.barsnick.net>
Message-ID: <200803241023.44707.malte.gell@gmx.de>

On Sonntag, 23. M?rz 2008, Moritz Barsnick wrote:
> Moin Malte,
>
> On Sun, Mar 23, 2008 at 03:23:45 +0100, Malte Gell wrote:
> > xinerama 0: 1152x864+0+0
> > X Error of failed request:  XF86DGANoDirectVideoMode
>
> This looks like xawtv has a problem with your Xinerama configuration.
> Have you tried disabling Xinerama (i.e. using a single screen), just
> to go sure?

Yes, disabled.

> Do they all fail with the same error? That would be peculiar, they
> are somewhat differently implemented, I think.

xawtv -nodga (nVidia users need -nodga otherwise it wouldnt fire up at 
all):

1[malte_gell at linuxbox][45639][10:20:01]~> xawtv -nodga
This is xawtv-3.95, running on Linux/i686 (2.6.22.17-0.1-athlon)
xinerama 0: 1152x864+0+0
X Error of failed request:  XF86DGANoDirectVideoMode
  Major opcode of failed request:  137 (XFree86-DGA)
  Minor opcode of failed request:  1 (XF86DGAGetVideoLL)
  Serial number of failed request:  13
  Current serial number in output stream:  13
v4l-conf had some trouble, trying to continue anyway
ioctl: VIDIOC_G_STD(std=0xb7f1e5dfbfad8b60 
[PAL_D,PAL_D1,PAL_M,PAL_N,PAL_60,?,SECAM_B,SECAM_G,SECAM_H,SECAM_K1,?ATSC_8_VSB,ATSC_16_VSB,
(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),
(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),
(null),(null),(null),(null),(null),(null),(null),(null),(null)]): Das 
Argument ist ung?ltig
config: invalid value for norm: (null)
valid choices for "norm":
ioctl: VIDIOC_S_STD(std=0x0 []): Das Argument ist ung?ltig
ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0 
[];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.seconds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0;memory=unknown): 
Das Argument ist ung?ltig
ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0 
[];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.seconds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0;memory=unknown): 
Das Argument ist ung?ltig
X Error of failed request:  BadWindow (invalid Window parameter)
  Major opcode of failed request:  2 (X_ChangeWindowAttributes)
  Resource id in failed request:  0x400004e
  Serial number of failed request:  592
  Current serial number in output stream:  592
libxcb: WARNING! Program tries to lock an already locked connection,
        which indicates a programming error.
        There will be no further warnings about this issue.


This is wxcam's output:

1[malte_gell at linuxbox][45641][10:22:07]~> wxcam
Determining video4linux API version...
Using video4linux 2 API
V4L2_CID_BRIGHTNESS is not supported
V4L2_CID_CONTRAST is not supported
V4L2_CID_GAMMA is not supported
V4L2_CID_SATURATION is not supported
Determining pixel format...
Could not determine pixel format
VIDIOC_DQBUF: Das Argument ist ung?ltig


As mentioned, Skype and Kopete do show a picture! It is so strange....
Haven't built luvcview yet, 1st need to solve the dependencies....


From malte.gell at gmx.de  Mon Mar 24 10:38:12 2008
From: malte.gell at gmx.de (Malte Gell)
Date: Mon, 24 Mar 2008 10:38:12 +0100
Subject: [Linux-uvc-devel] Philips SPC 620 NC webcam works partially
In-Reply-To: <200803232109.33979.laurent.pinchart@skynet.be>
References: <200803222322.46238.malte.gell@gmx.de>
	<200803230031.22500.malte.gell@gmx.de>
	<200803232109.33979.laurent.pinchart@skynet.be>
Message-ID: <200803241038.13112.malte.gell@gmx.de>

On Sonntag, 23. M?rz 2008, Laurent Pinchart wrote:
> Could you please post the output of
>
> lsusb -v -d 0471:0333
>
> (using usbutils 0.72 or newer - 0.73+ preferred) as well as any
> kernel log message related to the webcam that might get printed
> during your Skype run and after the freeze ?

Thanx a lot for helping, I've put the output of lsusb ver. 0.72 from 
openSUSE 10.3 to the attached .txt file, so it may be better to read.

I just used grep uvcvideo /var/log/messages and put the output into the 
attached file, so you can see every message the module has produced.

The funny thing is, there is one tip I found somewhere: unload the 
ehci_hcd module and load the uvc again, so I did this:

rmmod ehci_hcd
modprobe uvcvideo

and this totally improves stability! So I could use the cam for hours, 
but, without the fast USB2 support, the cam only works with a smaller 
resolution.

Regards and happy easter
Malte
-------------- next part --------------

Bus 003 Device 003: ID 0471:0333 Philips 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x0471 Philips
  idProduct          0x0333 
  bcdDevice            0.00
  iManufacturer           0 
  iProduct                1 USB Video Camera
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          336
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower               98mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0 
      iFunction               1 USB Video Camera
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0 
      iInterface              1 USB Video Camera
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           77
        dwClockFrequency       48.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0 
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000000
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000157b
          Brightness
          Contrast
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Power Line Frequency
          White Balance Temperature, Auto
        iProcessing           255 
        bmVideoStandards     0x1a
          NTSC - 525/60
          SECAM - 625/50
          NTSC - 625/50
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 6
        guidExtensionCode         {d2090058-6fe7-2446-8512-76cdd8dda14e}
        bNumControl             2
        bNrPins                 1
        baSourceID( 0)          3
        bControlSize            1
        bmControls( 0)       0x03
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               3
        iTerminal               0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              16
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormarts                        1
        wTotalLength                    33536
        bEndPointAddress                    0
        bmInfo                              2
        bTerminalLink                       1
        bStillCaptureMethod                 1
        bTriggerSupport                     0
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                1
        guidFormat                            {59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x01
          Still image supported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                  4608000
        dwMaxBitRate                  4608000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval        1333332
        bFrameIntervalType                  1
        dwFrameInterval( 0)           1333332
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0294  1x 660 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       1 Control Device
      bFunctionProtocol       0 
      iFunction               1 USB Video Camera
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0 
      iInterface              1 USB Video Camera
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           38
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0 
        iTerminal               0 
      AudioControl Interface Descriptor:
        bLength                 8
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 5
        bSourceID               3
        bControlSize            1
        bmaControls( 0)      0x43
          Mute
          Volume
          Automatic Gain
        iFeature                0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             4
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               5
        iTerminal               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           4
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                29
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            7 Discrete
        tSamFreq[ 0]         8000
        tSamFreq[ 1]        11025
        tSamFreq[ 2]        16000
        tSamFreq[ 3]        22050
        tSamFreq[ 4]        32000
        tSamFreq[ 5]        44100
        tSamFreq[ 6]        48000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0064  1x 100 bytes
        bInterval               1
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x00
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Status:     0x0000
  (Bus Powered)
-------------- next part --------------
Mar 22 16:39:47 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 16:39:47 linuxbox kernel: usbcore: registered new interface driver uvcvideo
Mar 22 16:41:52 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 16:43:40 linuxbox kernel: usbcore: deregistering interface driver uvcvideo
Mar 22 16:43:49 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 16:43:49 linuxbox kernel: usbcore: registered new interface driver uvcvideo
Mar 22 16:44:59 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 16:47:00 linuxbox kernel: usbcore: deregistering interface driver uvcvideo
Mar 22 16:47:05 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 16:47:05 linuxbox kernel: usbcore: registered new interface driver uvcvideo
Mar 22 16:50:38 linuxbox kernel: usbcore: deregistering interface driver uvcvideo
Mar 22 16:51:18 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 16:51:18 linuxbox kernel: usbcore: registered new interface driver uvcvideo
Mar 22 16:58:39 linuxbox kernel: usbcore: deregistering interface driver uvcvideo
Mar 22 16:59:27 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 16:59:27 linuxbox kernel: usbcore: registered new interface driver uvcvideo
Mar 22 17:18:01 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 2 (unit 3) : -32 (exp. 2).
Mar 22 17:47:25 linuxbox kernel: usbcore: deregistering interface driver uvcvideo
Mar 22 17:47:38 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 17:47:38 linuxbox kernel: usbcore: registered new interface driver uvcvideo
Mar 22 17:48:33 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
Mar 22 17:52:35 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
Mar 22 17:53:18 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
Mar 22 17:53:18 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
Mar 22 17:55:29 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 18:03:34 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 18:12:00 linuxbox kernel: usbcore: deregistering interface driver uvcvideo
Mar 22 18:17:49 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 18:17:49 linuxbox kernel: usbcore: registered new interface driver uvcvideo
Mar 22 18:18:32 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
Mar 22 18:18:32 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
Mar 22 18:18:52 linuxbox kernel: uvcvideo: Failed to resubmit video URB (-45).
Mar 22 18:23:50 linuxbox kernel: usbcore: deregistering interface driver uvcvideo
Mar 22 18:25:15 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 18:25:15 linuxbox kernel: usbcore: registered new interface driver uvcvideo
Mar 22 18:27:55 linuxbox kernel: usbcore: deregistering interface driver uvcvideo
Mar 22 18:30:52 linuxbox kernel: usbcore: registered new interface driver uvcvideo
Mar 22 18:31:01 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 18:53:07 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 18:54:19 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 18:55:32 linuxbox kernel: usbcore: deregistering interface driver uvcvideo
Mar 22 18:55:46 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 18:55:46 linuxbox kernel: usbcore: registered new interface driver uvcvideo
Mar 22 19:15:17 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 19:16:04 linuxbox kernel: usbcore: deregistering interface driver uvcvideo
Mar 22 19:16:17 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 19:16:17 linuxbox kernel: usbcore: registered new interface driver uvcvideo
Mar 22 19:34:38 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 19:40:23 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 19:40:36 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 19:41:04 linuxbox kernel: usbcore: deregistering interface driver uvcvideo
Mar 22 19:41:13 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 19:41:13 linuxbox kernel: usbcore: registered new interface driver uvcvideo
Mar 22 20:17:24 linuxbox kernel: uvcvideo: Failed to resubmit video URB (-45).
Mar 22 20:17:59 linuxbox kernel: usbcore: deregistering interface driver uvcvideo
Mar 22 20:18:05 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 20:18:05 linuxbox kernel: usbcore: registered new interface driver uvcvideo
Mar 22 20:38:40 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 20:41:14 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 20:41:56 linuxbox kernel: usbcore: deregistering interface driver uvcvideo
Mar 22 20:42:00 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 20:42:00 linuxbox kernel: usbcore: registered new interface driver uvcvideo
Mar 22 21:07:46 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 21:09:11 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 21:10:15 linuxbox kernel: usbcore: deregistering interface driver uvcvideo
Mar 22 21:10:19 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 21:10:19 linuxbox kernel: usbcore: registered new interface driver uvcvideo
Mar 22 21:15:40 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 21:20:05 linuxbox kernel: usbcore: deregistering interface driver uvcvideo
Mar 22 21:20:08 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 22 21:20:08 linuxbox kernel: usbcore: registered new interface driver uvcvideo
Mar 22 23:12:34 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 23 00:32:42 linuxbox kernel: usbcore: deregistering interface driver uvcvideo
Mar 23 00:33:07 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 23 00:33:07 linuxbox kernel: usbcore: registered new interface driver uvcvideo
Mar 23 00:36:57 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 23 00:38:48 linuxbox kernel: usbcore: deregistering interface driver uvcvideo
Mar 23 00:38:53 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 23 00:38:53 linuxbox kernel: usbcore: registered new interface driver uvcvideo
Mar 23 00:41:02 linuxbox kernel: uvcvideo: Non-zero status (-84) in status completion handler.
Mar 23 00:41:02 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 23 00:41:29 linuxbox kernel: usbcore: deregistering interface driver uvcvideo
Mar 23 00:41:33 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 23 00:41:33 linuxbox kernel: usbcore: registered new interface driver uvcvideo
Mar 23 00:46:56 linuxbox kernel: uvcvideo: Failed to resubmit video URB (-45).
Mar 23 01:08:23 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
Mar 23 01:08:47 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
Mar 23 01:37:15 linuxbox kernel: usbcore: deregistering interface driver uvcvideo
Mar 23 01:37:28 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 23 01:37:28 linuxbox kernel: usbcore: registered new interface driver uvcvideo
Mar 23 02:44:49 linuxbox kernel: usbcore: deregistering interface driver uvcvideo
Mar 23 02:45:04 linuxbox kernel: uvcvideo: Unknown parameter `force_palette'
Mar 23 03:07:39 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
Mar 23 04:36:04 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 10 (unit 3) : -32 (exp. 2).
Mar 23 04:36:04 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 10 (unit 3) : -32 (exp. 2).
Mar 23 04:40:51 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 2 (unit 3) : -32 (exp. 2).
Mar 23 04:40:55 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 3 (unit 3) : -32 (exp. 2).
Mar 23 22:33:35 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 23 22:33:35 linuxbox kernel: usbcore: registered new interface driver uvcvideo
Mar 23 23:18:28 linuxbox kernel: uvcvideo: Failed to resubmit video URB (-45).
Mar 23 23:33:34 linuxbox kernel: uvcvideo: Failed to resubmit video URB (-45).
Mar 23 23:33:34 linuxbox kernel: uvcvideo: Failed to resubmit video URB (-45).
Mar 24 00:07:53 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 24 00:07:57 linuxbox kernel: usbcore: deregistering interface driver uvcvideo
Mar 24 00:08:06 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 24 00:08:06 linuxbox kernel: usbcore: registered new interface driver uvcvideo
Mar 24 02:33:08 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
Mar 24 02:33:08 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
Mar 24 02:33:08 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
Mar 24 02:34:39 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
Mar 24 02:44:47 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
Mar 24 02:50:28 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
Mar 24 02:50:28 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
Mar 24 02:51:16 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
Mar 24 02:51:16 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
Mar 24 04:09:45 linuxbox kernel: uvcvideo: Failed to query (1) UVC control 9 (unit 3) : -32 (exp. 2).
Mar 24 08:59:29 linuxbox kernel: uvcvideo: Non-zero status (-84) in status completion handler.
Mar 24 10:03:30 linuxbox kernel: uvcvideo: Found UVC 1.00 device USB Video Camera (0471:0333)
Mar 24 10:05:54 linuxbox kernel: uvcvideo: Non-zero status (-84) in video completion handler.

From francois.valenduc at tvcablenet.be  Mon Mar 24 10:48:09 2008
From: francois.valenduc at tvcablenet.be (=?ISO-8859-1?Q?Fran=E7ois_Valenduc?=)
Date: Mon, 24 Mar 2008 10:48:09 +0100
Subject: [Linux-uvc-devel] What about Chicony 04f2:b024 support ?
Message-ID: <47E778D9.10701@tvcablenet.be>

Hello everybody,
I have recently bought a packard bell computer with an integrated 
webcam. It's identified as a Chicony device (04f2:b024) by lsusb. In the 
list of supported devices, I have noticed that several chicony webcam 
are supported, but unfortunately for me, the Chicony 04f2:b024 is not. 
The output of lsusb -v is in the attachment. I tried to use it with the 
uvcvideo driver but I only get a black screen when I use camstream, even 
if it's recognized by the driver. Is there any hope to use this webcam 
under Linux ?

Thanks for your help.
Fran?ois Valenduc


-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: chicony-webcam
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080324/8bceb081/attachment.ksh>

From malte.gell at gmx.de  Mon Mar 24 11:01:07 2008
From: malte.gell at gmx.de (Malte Gell)
Date: Mon, 24 Mar 2008 11:01:07 +0100
Subject: [Linux-uvc-devel] cannot start any webcam application
In-Reply-To: <20080323175645.GA27206@sunshine.barsnick.net>
References: <200803230323.45750.malte.gell@gmx.de>
	<20080323175645.GA27206@sunshine.barsnick.net>
Message-ID: <200803241101.07554.malte.gell@gmx.de>

On Sonntag, 23. M?rz 2008, Moritz Barsnick wrote:

> Firstly, you should try the reference UVC Linux implementation:
> luvcview.

sh /tmp/luvcview/luvcview

luvcview version 0.2.3
Video driver: x11
A window manager is available
video /dev/video0
Unable to set format: Invalid argument
 Init v4L2 failed !! exit fatal


And now with the -L option:

][10:55:20]~/download/src/luvcview> /tmp/luvcview/luvcview -L
luvcview version 0.2.3
Video driver: x11
A window manager is available
video /dev/video0
/dev/video0 does not support read i/o
{ pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
{ discrete: width = 160, height = 120 }
  Time interval between frame: 2/15,

Does libwebcam need to be installed? I just copied the header files that 
are needed to the luvcview as mentioned in the README of luvcview.

Malte


From barsnick at gmx.net  Mon Mar 24 11:32:07 2008
From: barsnick at gmx.net (Moritz Barsnick)
Date: Mon, 24 Mar 2008 11:32:07 +0100
Subject: [Linux-uvc-devel] cannot start any webcam application
In-Reply-To: <200803241101.07554.malte.gell@gmx.de>
References: <200803230323.45750.malte.gell@gmx.de>
	<20080323175645.GA27206@sunshine.barsnick.net>
	<200803241101.07554.malte.gell@gmx.de>
Message-ID: <20080324103207.GA3568@sunshine.barsnick.net>

Moin Malte,

On Mon, Mar 24, 2008 at 11:01:07 +0100, Malte Gell wrote:

> On Sonntag, 23. M?rz 2008, Moritz Barsnick wrote:
> > Firstly, you should try the reference UVC Linux implementation:
> > luvcview.

> Does libwebcam need to be installed?

No, luvcview is currently independent from libwebcam.

> I just copied the header files that are needed to the luvcview as
> mentioned in the README of luvcview.

Header files? All you should need on OpenSuSE are the packages SDL and
SDL-devel. But if you can build and execute it, you're fine! :-)

> sh /tmp/luvcview/luvcview
> 
> luvcview version 0.2.3
> Video driver: x11
> A window manager is available
> video /dev/video0
> Unable to set format: Invalid argument
>  Init v4L2 failed !! exit fatal

It's not accepting the default MJPEG format. You should use "-f yuv".
Yes, this is a little bit confusing. I promised Michel and Laurent a
patch for this. :-(

> And now with the -L option:
> 
> ][10:55:20]~/download/src/luvcview> /tmp/luvcview/luvcview -L
> luvcview version 0.2.3
> Video driver: x11
> A window manager is available
> video /dev/video0
> /dev/video0 does not support read i/o
> { pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
> { discrete: width = 160, height = 120 }
>   Time interval between frame: 2/15,

Are you sure the output ends here? This is where the interesting stuff
begins! Google tells me your cam should support up to 640x480.

You should be able to display one of the 'YUYV' formats with
> luvcview -f yuv
and select a different size with
> luvcview -f yuv -s 160x120 # or whatever

Hope this helps,
Moritz


From barsnick at gmx.net  Mon Mar 24 11:34:02 2008
From: barsnick at gmx.net (Moritz Barsnick)
Date: Mon, 24 Mar 2008 11:34:02 +0100
Subject: [Linux-uvc-devel] cannot start any webcam application
In-Reply-To: <200803241019.49287.malte.gell@gmx.de>
References: <200803230323.45750.malte.gell@gmx.de>
	<20080323175645.GA27206@sunshine.barsnick.net>
	<200803241019.49287.malte.gell@gmx.de>
Message-ID: <20080324103402.GB3568@sunshine.barsnick.net>

Hi Malte,

On Mon, Mar 24, 2008 at 10:19:48 +0100, Malte Gell wrote:

> Is the output of v4l-info of any interest? If it is, thats what it say 
> and thanx for the efforts!

Yes and no. Yes to show developers what your cam is capable of. No,
because I believe it already works with several apps, and therefore cam
and driver are probably fine. The applications have some problems,
either with your X11 or with certain details of the cam.

Moritz


From laurent.pinchart at skynet.be  Mon Mar 24 11:50:28 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 24 Mar 2008 11:50:28 +0100
Subject: [Linux-uvc-devel] Philips SPC 620 NC webcam works partially
In-Reply-To: <200803241038.13112.malte.gell@gmx.de>
References: <200803222322.46238.malte.gell@gmx.de>
	<200803232109.33979.laurent.pinchart@skynet.be>
	<200803241038.13112.malte.gell@gmx.de>
Message-ID: <200803241150.28445.laurent.pinchart@skynet.be>

Hi Malte,

On Monday 24 March 2008, Malte Gell wrote:
> On Sonntag, 23. M?rz 2008, Laurent Pinchart wrote:
> > Could you please post the output of
> >
> > lsusb -v -d 0471:0333
> >
> > (using usbutils 0.72 or newer - 0.73+ preferred) as well as any
> > kernel log message related to the webcam that might get printed
> > during your Skype run and after the freeze ?
>
> Thanx a lot for helping, I've put the output of lsusb ver. 0.72 from
> openSUSE 10.3 to the attached .txt file, so it may be better to read.

Thanks.

> I just used grep uvcvideo /var/log/messages and put the output into the
> attached file, so you can see every message the module has produced.
>
> The funny thing is, there is one tip I found somewhere: unload the
> ehci_hcd module and load the uvc again, so I did this:
>
> rmmod ehci_hcd
> modprobe uvcvideo
>
> and this totally improves stability! So I could use the cam for hours,
> but, without the fast USB2 support, the cam only works with a smaller
> resolution.

Here's the most annoying part in the kernel log:

Mar 23 23:18:28 linuxbox kernel: uvcvideo: Failed to resubmit video URB (-45).
Mar 23 23:33:34 linuxbox kernel: uvcvideo: Failed to resubmit video URB (-45).
Mar 23 23:33:34 linuxbox kernel: uvcvideo: Failed to resubmit video URB (-45).

-45 is -EL2NSYNC. In a nutshell the EHCI scheduler tells that the timeslot for 
the URB the driver tried to submit (if you're not familiar with URBs, thing 
about them as data packets on the USB) has already elapsed. This should not 
happen, as the Linux UVC driver just requests the URB to be sent ASAP and 
doesn't request any specific timeslot. There is clearly a bug in the EHCI 
scheduler.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Mar 24 11:55:20 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 24 Mar 2008 11:55:20 +0100
Subject: [Linux-uvc-devel] cannot start any webcam application
In-Reply-To: <200803241101.07554.malte.gell@gmx.de>
References: <200803230323.45750.malte.gell@gmx.de>
	<20080323175645.GA27206@sunshine.barsnick.net>
	<200803241101.07554.malte.gell@gmx.de>
Message-ID: <200803241155.20512.laurent.pinchart@skynet.be>

Hi Malte,

On Monday 24 March 2008, Malte Gell wrote:
> On Sonntag, 23. M?rz 2008, Moritz Barsnick wrote:
> > Firstly, you should try the reference UVC Linux implementation:
> > luvcview.
>
> sh /tmp/luvcview/luvcview
>
> luvcview version 0.2.3
> Video driver: x11
> A window manager is available
> video /dev/video0
> Unable to set format: Invalid argument
>  Init v4L2 failed !! exit fatal

Your camera doesn't support MJPEG, try

luvcview -f yuv

> And now with the -L option:
>
> ][10:55:20]~/download/src/luvcview> /tmp/luvcview/luvcview -L
> luvcview version 0.2.3
> Video driver: x11
> A window manager is available
> video /dev/video0
> /dev/video0 does not support read i/o
> { pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
> { discrete: width = 160, height = 120 }
>   Time interval between frame: 2/15,
>
> Does libwebcam need to be installed? I just copied the header files that
> are needed to the luvcview as mentioned in the README of luvcview.

No, libwebcam is a totally unrelated project.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Mar 24 11:59:52 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 24 Mar 2008 11:59:52 +0100
Subject: [Linux-uvc-devel] What about Chicony 04f2:b024 support ?
In-Reply-To: <47E778D9.10701@tvcablenet.be>
References: <47E778D9.10701@tvcablenet.be>
Message-ID: <200803241159.52534.laurent.pinchart@skynet.be>

Hi Fran?ois,

On Monday 24 March 2008, Fran?ois Valenduc wrote:
> Hello everybody,
> I have recently bought a packard bell computer with an integrated
> webcam. It's identified as a Chicony device (04f2:b024) by lsusb. In the
> list of supported devices, I have noticed that several chicony webcam
> are supported, but unfortunately for me, the Chicony 04f2:b024 is not.
> The output of lsusb -v is in the attachment. I tried to use it with the
> uvcvideo driver but I only get a black screen when I use camstream, even
> if it's recognized by the driver. Is there any hope to use this webcam
> under Linux ?

camstream doesn't support v4l2. Could you please try one of the software 
listed in http://www.quickcamteam.net/software/linux/v4l2-software/ ?

Best regards,

Laurent Pinchart



From malte.gell at gmx.de  Mon Mar 24 11:58:14 2008
From: malte.gell at gmx.de (Malte Gell)
Date: Mon, 24 Mar 2008 11:58:14 +0100
Subject: [Linux-uvc-devel] Philips SPC 620 NC webcam works partially
In-Reply-To: <200803241150.28445.laurent.pinchart@skynet.be>
References: <200803222322.46238.malte.gell@gmx.de>
	<200803241038.13112.malte.gell@gmx.de>
	<200803241150.28445.laurent.pinchart@skynet.be>
Message-ID: <200803241158.14598.malte.gell@gmx.de>

On Montag, 24. M?rz 2008, Laurent Pinchart wrote:

> -45 is -EL2NSYNC. In a nutshell the EHCI scheduler tells that the
> timeslot for the URB the driver tried to submit (if you're not
> familiar with URBs, thing about them as data packets on the USB) has
> already elapsed. This should not happen, as the Linux UVC driver just
> requests the URB to be sent ASAP and doesn't request any specific
> timeslot. There is clearly a bug in the EHCI scheduler.

Thanx for figuring out. So the whole mess is a Linux kernel issue? Maybe 
the folks at the kernel mailing list should look at this. Though, they 
may not be familiar with the webcam stuff....

Regards
Malte


From malte.gell at gmx.de  Mon Mar 24 12:08:06 2008
From: malte.gell at gmx.de (Malte Gell)
Date: Mon, 24 Mar 2008 12:08:06 +0100
Subject: [Linux-uvc-devel] cannot start any webcam application
In-Reply-To: <20080324103207.GA3568@sunshine.barsnick.net>
References: <200803230323.45750.malte.gell@gmx.de>
	<200803241101.07554.malte.gell@gmx.de>
	<20080324103207.GA3568@sunshine.barsnick.net>
Message-ID: <200803241208.06879.malte.gell@gmx.de>

On Montag, 24. M?rz 2008, Moritz Barsnick wrote:
> -f yuv -s 160x120

Yeah, that did it now! The cam supprts up to 640x480, but i cannot use 
it, cause i cant use the USB2 ehci driver. Just wrote to Laurent, he 
has bad news, there seems to be a bug in the ehci kernel driver that 
may be triggered by my cam...
So i can only use luvcview with -f yuv and Skype with low resolution. 
Its a pain in the ass, I consider to return this cam. But, what cam 
should I get instead.... which works flawlessly... i just spent 44 EUR 
(Mediamarkt) for this Philips...

Malte


From malte.gell at gmx.de  Mon Mar 24 12:16:51 2008
From: malte.gell at gmx.de (Malte Gell)
Date: Mon, 24 Mar 2008 12:16:51 +0100
Subject: [Linux-uvc-devel] Philips SPC 620 NC webcam works partially
In-Reply-To: <200803241150.28445.laurent.pinchart@skynet.be>
References: <200803222322.46238.malte.gell@gmx.de>
	<200803241038.13112.malte.gell@gmx.de>
	<200803241150.28445.laurent.pinchart@skynet.be>
Message-ID: <200803241216.51699.malte.gell@gmx.de>

On Montag, 24. M?rz 2008, Laurent Pinchart wrote:

> Here's the most annoying part in the kernel log:
> -45 is -EL2NSYNC. In a nutshell the EHCI scheduler tells that the
> timeslot for the URB the driver tried to submit (if you're not
> familiar with URBs, thing about them as data packets on the USB) has
> already elapsed. This should not happen, as the Linux UVC driver just
> requests the URB to be sent ASAP and doesn't request any specific
> timeslot. There is clearly a bug in the EHCI scheduler.

I have an idea, is there any option that i might pass to the ehci kernel 
module? Invoking modinfo ehci-hcd gives this:

parm:           log2_irq_thresh:log2 IRQ latency, 1-64 microframes (int)
parm:           park:park setting; 1-3 back-to-back async packets (uint)
parm:           ignore_oc:ignore bogus hardware overcurrent indications 
(bool)

Is there a paramater among the above that could improbe this timer 
issue?

Regards
Malte


From laurent.pinchart at skynet.be  Mon Mar 24 20:51:14 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 24 Mar 2008 20:51:14 +0100
Subject: [Linux-uvc-devel] Philips SPC 620 NC webcam works partially
In-Reply-To: <200803241158.14598.malte.gell@gmx.de>
References: <200803222322.46238.malte.gell@gmx.de>
	<200803241150.28445.laurent.pinchart@skynet.be>
	<200803241158.14598.malte.gell@gmx.de>
Message-ID: <200803242051.14581.laurent.pinchart@skynet.be>

On Monday 24 March 2008, Malte Gell wrote:
> On Montag, 24. M?rz 2008, Laurent Pinchart wrote:
> > -45 is -EL2NSYNC. In a nutshell the EHCI scheduler tells that the
> > timeslot for the URB the driver tried to submit (if you're not
> > familiar with URBs, thing about them as data packets on the USB) has
> > already elapsed. This should not happen, as the Linux UVC driver just
> > requests the URB to be sent ASAP and doesn't request any specific
> > timeslot. There is clearly a bug in the EHCI scheduler.
>
> Thanx for figuring out. So the whole mess is a Linux kernel issue? Maybe
> the folks at the kernel mailing list should look at this. Though, they
> may not be familiar with the webcam stuff....

The linux-usb mailing list seems to be the best place to discuss the problem.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Mar 24 20:51:37 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 24 Mar 2008 20:51:37 +0100
Subject: [Linux-uvc-devel] Philips SPC 620 NC webcam works partially
In-Reply-To: <200803241216.51699.malte.gell@gmx.de>
References: <200803222322.46238.malte.gell@gmx.de>
	<200803241150.28445.laurent.pinchart@skynet.be>
	<200803241216.51699.malte.gell@gmx.de>
Message-ID: <200803242051.37954.laurent.pinchart@skynet.be>

On Monday 24 March 2008, Malte Gell wrote:
> On Montag, 24. M?rz 2008, Laurent Pinchart wrote:
> > Here's the most annoying part in the kernel log:
> > -45 is -EL2NSYNC. In a nutshell the EHCI scheduler tells that the
> > timeslot for the URB the driver tried to submit (if you're not
> > familiar with URBs, thing about them as data packets on the USB) has
> > already elapsed. This should not happen, as the Linux UVC driver just
> > requests the URB to be sent ASAP and doesn't request any specific
> > timeslot. There is clearly a bug in the EHCI scheduler.
>
> I have an idea, is there any option that i might pass to the ehci kernel
> module? Invoking modinfo ehci-hcd gives this:
>
> parm:           log2_irq_thresh:log2 IRQ latency, 1-64 microframes (int)
> parm:           park:park setting; 1-3 back-to-back async packets (uint)
> parm:           ignore_oc:ignore bogus hardware overcurrent indications
> (bool)
>
> Is there a paramater among the above that could improbe this timer
> issue?

No that I know of, sorry.

Best regards,

Laurent Pinchart


From trigger at space-based.de  Mon Mar 24 22:04:05 2008
From: trigger at space-based.de (Armin Berres)
Date: Mon, 24 Mar 2008 22:04:05 +0100
Subject: [Linux-uvc-devel] Unable to set auto exposure and white balance
	with svn revision 193
In-Reply-To: <200803232126.07988.laurent.pinchart@skynet.be>
References: <20080321013755.GB5031@bluemoon>
	<200803232126.07988.laurent.pinchart@skynet.be>
Message-ID: <200803242204.06143.trigger@space-based.de>

Hi Laurent,

thanks for the answer!

On Sunday 23 March 2008 21:26:07 Laurent Pinchart wrote:
> > After noticing that the private controls are gone and updating some
> > keys everything but one thing works again: I can't set the auto exposure
> > any more. When I query V4L2_CID_EXPOSURE_AUTO it is set to 3.
> > V4L2_EXPOSURE_AUTO and V4L2_EXPOSURE_MANUAL at the same time?
>
> 3 is actually supposed to mean V4L2_EXPOSURE_APERTURE_PRIORITY. The control
> values were not properly defined in uvc_compat.h, I've just committed a fix
> to SVN.

Ah, ok. great. Problem seems to be gone :)

> > Now my other problem: When reading r187 I hoped to be able to manually
> > set the white balance, but it doesn't seem to be possible.
> > Setting V4L2_CID_AUTO_WHITE_BALANCE to 0 doesn't seem to have an effect.
> > The control seems to be neither V4L2_CTRL_TYPE_BOOLEAN nor
> > V4L2_CTRL_TYPE_INTEGER, so what else it is?
>
> The control is boolean, and is supposed to work. Do you get an error when
> you try to modify it ? Is anything printed to the kernel log ? Do you get
> the previously written value when you read the control back ?

Hehe, indeed, it is boolean. I had a typo in my code.
>
> > When trying to get V4L2_CID_RED_BALANCE or V4L2_CID_BLUE_BALANCE I get
> > the error code 22, Invalid argument. In the syslog I find
> >
> > | uvcvideo: Control 0x0098090e not found.
> > | uvcvideo: Control 0x0098090f not found.
> >
> > Is this expected to work, or can't this work? It is quite important for
> > me, to get the manual white balance running.
>
> The SPC1300NC has a white balance temperature control, you should use
> V4L2_CID_WHITE_BALANCE_TEMPERATURE instead of V4L2_CID_RED_BALANCE and
> V4L2_CID_BLUE_BALANCE.

Hm, ok.
Setting V4L2_CID_WHITE_BALANCE_TEMPERATURE seems to work, but the image has a 
red cast. The closer the value is to 2800 (6500 seems to be the default), the 
better the image looks, but even at 2800 Kelvin the red cast is not gone. In 
my use case a red cast is the worst case (blue would be much better)...
I think I once tried the camera with Windows and I could adjust the red and 
blue temperature -- any idea how this is possible? Maybe Philips implemented 
this part somewhere in their driver/user space tool?
What is even worse: The white balance doesn't seem to be fixed if 
V4L2_CID_AUTO_WHITE_BALANCE  is set. The camera still changes the colour 
temperature, when the lighting conditions change. Weird, isn't it? If you 
want I can make a little video to show the effect.

> > Any help is welcome :)
>
> Hope this helped :-)

Definitely :-)

Greetings,
Armin


From trigger at space-based.de  Mon Mar 24 22:53:51 2008
From: trigger at space-based.de (Armin Berres)
Date: Mon, 24 Mar 2008 22:53:51 +0100
Subject: [Linux-uvc-devel] Unable to set auto exposure and white balance
	with svn revision 193
In-Reply-To: <200803242204.06143.trigger@space-based.de>
References: <20080321013755.GB5031@bluemoon>
	<200803232126.07988.laurent.pinchart@skynet.be>
	<200803242204.06143.trigger@space-based.de>
Message-ID: <200803242253.52988.trigger@space-based.de>

On Monday 24 March 2008 22:04:05 Armin Berres wrote:
> better)... I think I once tried the camera with Windows and I could adjust
> the red and blue temperature -- any idea how this is possible? Maybe
> Philips implemented this part somewhere in their driver/user space tool?

So, I was a brave guy and started Windows to check this out.  Indeed one has 
the possibility to change the red and the blue balance independently.
Actually I am very disappointed if Philips implemented this in a way which is 
not usable via UVC...

Bye,
Armin


From trigger at space-based.de  Mon Mar 24 23:40:48 2008
From: trigger at space-based.de (Armin Berres)
Date: Mon, 24 Mar 2008 23:40:48 +0100
Subject: [Linux-uvc-devel] Philips SPC 620 NC webcam works partially
In-Reply-To: <200803241150.28445.laurent.pinchart@skynet.be>
Message-ID: <4851403.zonVb2iUcr@space-based.de>

At Monday 24 March 2008 11:50, you wrote:
> Here's the most annoying part in the kernel log:
> 
> Mar 23 23:18:28 linuxbox kernel: uvcvideo: Failed to resubmit video URB (-45).
> Mar 23 23:33:34 linuxbox kernel: uvcvideo: Failed to resubmit video URB (-45).
> Mar 23 23:33:34 linuxbox kernel: uvcvideo: Failed to resubmit video URB (-45).

Just for the reference:
I now and then have the same problem with a Philips SPC1300NC. Luckily reinitializing the camera solves the issue, but it is still nasty. So if someone finds a solution: Tell me ;-)

Greetings,
Armin

From francois.valenduc at tvcablenet.be  Mon Mar 24 23:41:58 2008
From: francois.valenduc at tvcablenet.be (=?UTF-8?B?RnJhbsOnb2lzIFZhbGVuZHVj?=)
Date: Mon, 24 Mar 2008 23:41:58 +0100
Subject: [Linux-uvc-devel] What about Chicony 04f2:b024 support ?
In-Reply-To: <200803241159.52534.laurent.pinchart@skynet.be>
References: <47E778D9.10701@tvcablenet.be>
	<200803241159.52534.laurent.pinchart@skynet.be>
Message-ID: <47E82E36.2080609@tvcablenet.be>

Laurent Pinchart a ?crit :
> Hi Fran?ois,
>
> On Monday 24 March 2008, Fran?ois Valenduc wrote:
>   
>> Hello everybody,
>> I have recently bought a packard bell computer with an integrated
>> webcam. It's identified as a Chicony device (04f2:b024) by lsusb. In the
>> list of supported devices, I have noticed that several chicony webcam
>> are supported, but unfortunately for me, the Chicony 04f2:b024 is not.
>> The output of lsusb -v is in the attachment. I tried to use it with the
>> uvcvideo driver but I only get a black screen when I use camstream, even
>> if it's recognized by the driver. Is there any hope to use this webcam
>> under Linux ?
>>     
>
> camstream doesn't support v4l2. Could you please try one of the software 
> listed in http://www.quickcamteam.net/software/linux/v4l2-software/ ?
>
> Best regards,
>
> Laurent Pinchart
>
>
>
>   
Thanks for the information. I have tried to build ucview but it doesn't 
work. I am running gentoo and it seems there is no ebuild for ucview. I 
have first compiled and installed successfully unicap but when I run 
configure for ucview, it fails with the following error:
checking for GLIB... yes
checking for DBUS... yes
checking for UCVIEW... configure: error: Package requirements 
(libunicapgtk >= 0.2.2 gtk+-2.0 >= 2.8.0 gthread-2.0 >= 2.8.0 gconf-2.0 
libucil >= 0.2.2  libglade-2.0 ) were not met:

No package 'libunicapgtk' found
No package 'libucil' found

Consider adjusting the PKG_CONFIG_PATH environment variable if you
installed software in a non-standard prefix.

Alternatively, you may set the environment variables UCVIEW_CFLAGS
and UCVIEW_LIBS to avoid the need to call pkg-config.
See the pkg-config man page for more details.

zsh: exit 1     ./configure

However, it seems that the headers for unicap and ucil are installed in 
/usr/local/include/unicap.

Do you have any idea about this problem ?
Fran?ois Valenduc


From malte.gell at gmx.de  Tue Mar 25 00:09:45 2008
From: malte.gell at gmx.de (Malte Gell)
Date: Tue, 25 Mar 2008 00:09:45 +0100
Subject: [Linux-uvc-devel] Philips SPC 620 NC webcam works partially
In-Reply-To: <4851403.zonVb2iUcr@space-based.de>
References: <4851403.zonVb2iUcr@space-based.de>
Message-ID: <200803250009.45624.malte.gell@gmx.de>

On Montag, 24. M?rz 2008, Armin Berres wrote:
> At Monday 24 March 2008 11:50, you wrote:
> > Here's the most annoying part in the kernel log:
> >
> > Mar 23 23:18:28 linuxbox kernel: uvcvideo: Failed to resubmit video
> > URB (-45). Mar 23 23:33:34 linuxbox kernel: uvcvideo: Failed to
> > resubmit video URB (-45). Mar 23 23:33:34 linuxbox kernel:
> > uvcvideo: Failed to resubmit video URB (-45).
>
> Just for the reference:
> I now and then have the same problem with a Philips SPC1300NC.
> Luckily reinitializing the camera solves the issue, but it is still
> nasty. So if someone finds a solution: Tell me ;-)

rmmod ehci_hcd helps a bit to improve stability, this command removes 
the USB2 kernel module. Afterwards my cam (SPC620NC) does not freeze 
any longer, though without USB2 support, the resolution is a bit 
smaller.
Does Skype work for your? You can also use mplayer and mencoder to watch 
your webcam and to save a stream, the commands are the following:

this saves a stream from your webcam, you may want to adjust the fps and 
width and heigth:

mencoder tv:// -tv 
driver=v4l2:width=60:height=40:fps=60:device=/dev/video0 -nosound -ovc 
lavc -lavcopts vcodec=mjpeg -o test.avi

this is to watch your webcam:

mplayer tv:// -tv 
driver=v4l2:width=60:height=40:fps=90:device=/dev/video0 -nosound 

You just need mplayer with v4l2 support compiled in.

Hope it helps
Malte


From expose at luftgetrock.net  Tue Mar 25 12:21:03 2008
From: expose at luftgetrock.net (expose at luftgetrock.net)
Date: Tue, 25 Mar 2008 12:21:03 +0100
Subject: [Linux-uvc-devel] PROBLEM: Briefly suspending Philips SPC1000NC on
	recognition needed.
Message-ID: <200803251221.03824.expose@luftgetrock.net>

Hello Everybody,

[1.] One line summary of the problem:
Briefly suspending Philips SPC1000NC on recognition needed.

[2.] Full description of the problem/report:
The webcam's integrated microphone captures one small sound distortion per 
video frame captured.
The distortion itself is depending on the video settings.
No video capture --> No distortion.

[3.] Keywords (i.e., modules, networking, kernel):
uvcvideo, snd_usb_audio, likewise any kernel

[4.] Kernel information
a) 2.6.24.3, tp_smapi 0.36, uvcvideo rev195
b) 2.6.25-rc6, uvcvideo rev195

[4.1.] Kernel version (from /proc/version):
Linux version 2.6.24.3 (foo at bar) (gcc version 4.2.3 (Debian 4.2.3-2)) #19 SMP 
Sat Mar 22 19:49:35 CET 2008

[7.] A small shell script or example program which triggers the
     problem (if possible)
arecord and luvcview, simultaniously.

[8.] Environment
Debian Lenny

[8.1.] Software (add the output of the ver_linux script here)
Gnu C                  4.2.3
Gnu make               3.81
binutils               2.18.0.20080103
util-linux             2.13.1
mount                  2.13.1
module-init-tools      3.3-pre11
e2fsprogs              1.40.6
pcmciautils            014
Linux C Library        2.7
Dynamic linker (ldd)   2.7
Procps                 3.2.7
Net-tools              1.60
Console-tools          0.2.3
Sh-utils               5.97
udev                   114
wireless-tools         29

[8.3.] Module information (from /proc/modules):
snd_usb_audio 74208 0 - Live 0xf8ba9000
snd_usb_lib 14720 1 snd_usb_audio, Live 0xf8afa000
snd_rawmidi 16896 1 snd_usb_lib, Live 0xf8af4000
snd_hwdep 6404 1 snd_usb_audio, Live 0xf8aea000
uvcvideo 51848 0 - Live 0xf8b9b000
iwl4965 100968 0 - Live 0xf8b81000

[8.7.] USB device information:
"lsusb -v -d 0471:0332" attached as lsusb_spc1000nc

[9.] Workaround:
Suspend the device via sysfs before usage. Afterwards, the "Recording 
now!"-LED will stay off, and the distortions will be gone.
Alternatively, the whole computer may be suspended to ram.
It does not matter wether drivers were loaded or wether the device was used 
before suspending.

[10.] Why not a driver problem:
Suspending makes the LED and distortions stay off even when the drivers are 
loaded only afterwards. Thus, something done during the generic suspend 
causes this effect, if not even the very suspending itself.
Adding the workaround in either alsa or uvc driver seems a bad idea because 
suspending the device while one of the drivers is actively capturing already 
might cause unexpected crashes of userspace applications (i.e., adding video 
to an already running phone call).

[11.] Suggestion:
Adding an option to the kernel, off by default.
If enabled, it checks the vid and pid of each device upon recognition, 
suspending the matching one briefly.
It may be that a full suspend is not needed, but only some specific actions.


Bye,

Daniel Herzog
-------------- next part --------------
#
# Automatically generated make config: don't edit
# Linux kernel version: 2.6.24.3
# Sat Mar 22 20:16:20 2008
#
# CONFIG_64BIT is not set
CONFIG_X86_32=y
# CONFIG_X86_64 is not set
CONFIG_X86=y
CONFIG_GENERIC_TIME=y
CONFIG_GENERIC_CMOS_UPDATE=y
CONFIG_CLOCKSOURCE_WATCHDOG=y
CONFIG_GENERIC_CLOCKEVENTS=y
CONFIG_GENERIC_CLOCKEVENTS_BROADCAST=y
CONFIG_LOCKDEP_SUPPORT=y
CONFIG_STACKTRACE_SUPPORT=y
CONFIG_SEMAPHORE_SLEEPERS=y
CONFIG_MMU=y
CONFIG_ZONE_DMA=y
CONFIG_QUICKLIST=y
CONFIG_GENERIC_ISA_DMA=y
CONFIG_GENERIC_IOMAP=y
CONFIG_GENERIC_BUG=y
CONFIG_GENERIC_HWEIGHT=y
CONFIG_ARCH_MAY_HAVE_PC_FDC=y
CONFIG_DMI=y
# CONFIG_RWSEM_GENERIC_SPINLOCK is not set
CONFIG_RWSEM_XCHGADD_ALGORITHM=y
# CONFIG_ARCH_HAS_ILOG2_U32 is not set
# CONFIG_ARCH_HAS_ILOG2_U64 is not set
CONFIG_GENERIC_CALIBRATE_DELAY=y
# CONFIG_GENERIC_TIME_VSYSCALL is not set
CONFIG_ARCH_SUPPORTS_OPROFILE=y
# CONFIG_ZONE_DMA32 is not set
CONFIG_ARCH_POPULATES_NODE_MAP=y
# CONFIG_AUDIT_ARCH is not set
CONFIG_GENERIC_HARDIRQS=y
CONFIG_GENERIC_IRQ_PROBE=y
CONFIG_GENERIC_PENDING_IRQ=y
CONFIG_X86_SMP=y
CONFIG_X86_HT=y
CONFIG_X86_BIOS_REBOOT=y
CONFIG_X86_TRAMPOLINE=y
CONFIG_KTIME_SCALAR=y
CONFIG_DEFCONFIG_LIST="/lib/modules/$UNAME_RELEASE/.config"

#
# General setup
#
CONFIG_EXPERIMENTAL=y
CONFIG_LOCK_KERNEL=y
CONFIG_INIT_ENV_ARG_LIMIT=32
CONFIG_LOCALVERSION=""
CONFIG_LOCALVERSION_AUTO=y
CONFIG_SWAP=y
CONFIG_SYSVIPC=y
CONFIG_SYSVIPC_SYSCTL=y
CONFIG_POSIX_MQUEUE=y
CONFIG_BSD_PROCESS_ACCT=y
CONFIG_BSD_PROCESS_ACCT_V3=y
# CONFIG_TASKSTATS is not set
# CONFIG_USER_NS is not set
# CONFIG_PID_NS is not set
# CONFIG_AUDIT is not set
CONFIG_IKCONFIG=y
CONFIG_IKCONFIG_PROC=y
CONFIG_LOG_BUF_SHIFT=15
# CONFIG_CGROUPS is not set
CONFIG_FAIR_GROUP_SCHED=y
CONFIG_FAIR_USER_SCHED=y
# CONFIG_FAIR_CGROUP_SCHED is not set
# CONFIG_SYSFS_DEPRECATED is not set
# CONFIG_RELAY is not set
# CONFIG_BLK_DEV_INITRD is not set
# CONFIG_CC_OPTIMIZE_FOR_SIZE is not set
CONFIG_SYSCTL=y
# CONFIG_EMBEDDED is not set
CONFIG_UID16=y
CONFIG_SYSCTL_SYSCALL=y
CONFIG_KALLSYMS=y
# CONFIG_KALLSYMS_ALL is not set
# CONFIG_KALLSYMS_EXTRA_PASS is not set
CONFIG_HOTPLUG=y
CONFIG_PRINTK=y
CONFIG_BUG=y
CONFIG_ELF_CORE=y
CONFIG_BASE_FULL=y
CONFIG_FUTEX=y
CONFIG_ANON_INODES=y
CONFIG_EPOLL=y
CONFIG_SIGNALFD=y
CONFIG_EVENTFD=y
CONFIG_SHMEM=y
CONFIG_VM_EVENT_COUNTERS=y
CONFIG_SLUB_DEBUG=y
# CONFIG_SLAB is not set
CONFIG_SLUB=y
# CONFIG_SLOB is not set
CONFIG_SLABINFO=y
CONFIG_RT_MUTEXES=y
# CONFIG_TINY_SHMEM is not set
CONFIG_BASE_SMALL=0
CONFIG_MODULES=y
CONFIG_MODULE_UNLOAD=y
# CONFIG_MODULE_FORCE_UNLOAD is not set
# CONFIG_MODVERSIONS is not set
# CONFIG_MODULE_SRCVERSION_ALL is not set
CONFIG_KMOD=y
CONFIG_STOP_MACHINE=y
CONFIG_BLOCK=y
# CONFIG_LBD is not set
# CONFIG_BLK_DEV_IO_TRACE is not set
# CONFIG_LSF is not set
CONFIG_BLK_DEV_BSG=y

#
# IO Schedulers
#
CONFIG_IOSCHED_NOOP=y
# CONFIG_IOSCHED_AS is not set
# CONFIG_IOSCHED_DEADLINE is not set
CONFIG_IOSCHED_CFQ=y
# CONFIG_DEFAULT_AS is not set
# CONFIG_DEFAULT_DEADLINE is not set
CONFIG_DEFAULT_CFQ=y
# CONFIG_DEFAULT_NOOP is not set
CONFIG_DEFAULT_IOSCHED="cfq"

#
# Processor type and features
#
CONFIG_TICK_ONESHOT=y
CONFIG_NO_HZ=y
CONFIG_HIGH_RES_TIMERS=y
CONFIG_GENERIC_CLOCKEVENTS_BUILD=y
CONFIG_SMP=y
CONFIG_X86_PC=y
# CONFIG_X86_ELAN is not set
# CONFIG_X86_VOYAGER is not set
# CONFIG_X86_NUMAQ is not set
# CONFIG_X86_SUMMIT is not set
# CONFIG_X86_BIGSMP is not set
# CONFIG_X86_VISWS is not set
# CONFIG_X86_GENERICARCH is not set
# CONFIG_X86_ES7000 is not set
# CONFIG_X86_VSMP is not set
CONFIG_SCHED_NO_NO_OMIT_FRAME_POINTER=y
# CONFIG_PARAVIRT_GUEST is not set
# CONFIG_M386 is not set
# CONFIG_M486 is not set
# CONFIG_M586 is not set
# CONFIG_M586TSC is not set
# CONFIG_M586MMX is not set
# CONFIG_M686 is not set
# CONFIG_MPENTIUMII is not set
# CONFIG_MPENTIUMIII is not set
# CONFIG_MPENTIUMM is not set
# CONFIG_MPENTIUM4 is not set
# CONFIG_MK6 is not set
# CONFIG_MK7 is not set
# CONFIG_MK8 is not set
# CONFIG_MCRUSOE is not set
# CONFIG_MEFFICEON is not set
# CONFIG_MWINCHIPC6 is not set
# CONFIG_MWINCHIP2 is not set
# CONFIG_MWINCHIP3D is not set
# CONFIG_MGEODEGX1 is not set
# CONFIG_MGEODE_LX is not set
# CONFIG_MCYRIXIII is not set
# CONFIG_MVIAC3_2 is not set
# CONFIG_MVIAC7 is not set
# CONFIG_MPSC is not set
CONFIG_MCORE2=y
# CONFIG_GENERIC_CPU is not set
CONFIG_X86_GENERIC=y
CONFIG_X86_CMPXCHG=y
CONFIG_X86_L1_CACHE_SHIFT=7
CONFIG_X86_XADD=y
CONFIG_X86_WP_WORKS_OK=y
CONFIG_X86_INVLPG=y
CONFIG_X86_BSWAP=y
CONFIG_X86_POPAD_OK=y
CONFIG_X86_GOOD_APIC=y
CONFIG_X86_INTEL_USERCOPY=y
CONFIG_X86_USE_PPRO_CHECKSUM=y
CONFIG_X86_TSC=y
CONFIG_X86_MINIMUM_CPU_FAMILY=4
CONFIG_HPET_TIMER=y
CONFIG_HPET_EMULATE_RTC=y
CONFIG_NR_CPUS=2
# CONFIG_SCHED_SMT is not set
CONFIG_SCHED_MC=y
# CONFIG_PREEMPT_NONE is not set
CONFIG_PREEMPT_VOLUNTARY=y
# CONFIG_PREEMPT is not set
CONFIG_PREEMPT_BKL=y
CONFIG_X86_LOCAL_APIC=y
CONFIG_X86_IO_APIC=y
CONFIG_X86_MCE=y
# CONFIG_X86_MCE_NONFATAL is not set
# CONFIG_X86_MCE_P4THERMAL is not set
CONFIG_VM86=y
# CONFIG_TOSHIBA is not set
# CONFIG_I8K is not set
# CONFIG_X86_REBOOTFIXUPS is not set
CONFIG_MICROCODE=y
CONFIG_MICROCODE_OLD_INTERFACE=y
CONFIG_X86_MSR=y
CONFIG_X86_CPUID=y
# CONFIG_NOHIGHMEM is not set
CONFIG_HIGHMEM4G=y
# CONFIG_HIGHMEM64G is not set
CONFIG_PAGE_OFFSET=0xC0000000
CONFIG_HIGHMEM=y
CONFIG_ARCH_FLATMEM_ENABLE=y
CONFIG_ARCH_SPARSEMEM_ENABLE=y
CONFIG_ARCH_SELECT_MEMORY_MODEL=y
CONFIG_SELECT_MEMORY_MODEL=y
CONFIG_FLATMEM_MANUAL=y
# CONFIG_DISCONTIGMEM_MANUAL is not set
# CONFIG_SPARSEMEM_MANUAL is not set
CONFIG_FLATMEM=y
CONFIG_FLAT_NODE_MEM_MAP=y
CONFIG_SPARSEMEM_STATIC=y
# CONFIG_SPARSEMEM_VMEMMAP_ENABLE is not set
CONFIG_SPLIT_PTLOCK_CPUS=4
CONFIG_RESOURCES_64BIT=y
CONFIG_ZONE_DMA_FLAG=1
CONFIG_BOUNCE=y
CONFIG_NR_QUICK=1
CONFIG_VIRT_TO_BUS=y
# CONFIG_HIGHPTE is not set
# CONFIG_MATH_EMULATION is not set
CONFIG_MTRR=y
# CONFIG_EFI is not set
# CONFIG_IRQBALANCE is not set
CONFIG_SECCOMP=y
# CONFIG_HZ_100 is not set
# CONFIG_HZ_250 is not set
# CONFIG_HZ_300 is not set
CONFIG_HZ_1000=y
CONFIG_HZ=1000
# CONFIG_KEXEC is not set
# CONFIG_CRASH_DUMP is not set
CONFIG_PHYSICAL_START=0x100000
# CONFIG_RELOCATABLE is not set
CONFIG_PHYSICAL_ALIGN=0x100000
CONFIG_HOTPLUG_CPU=y
CONFIG_COMPAT_VDSO=y
CONFIG_ARCH_ENABLE_MEMORY_HOTPLUG=y

#
# Power management options
#
CONFIG_PM=y
# CONFIG_PM_LEGACY is not set
# CONFIG_PM_DEBUG is not set
CONFIG_PM_SLEEP_SMP=y
CONFIG_PM_SLEEP=y
CONFIG_SUSPEND_SMP_POSSIBLE=y
CONFIG_SUSPEND=y
CONFIG_HIBERNATION_SMP_POSSIBLE=y
# CONFIG_HIBERNATION is not set
CONFIG_ACPI=y
CONFIG_ACPI_SLEEP=y
# CONFIG_ACPI_PROCFS is not set
# CONFIG_ACPI_PROCFS_POWER is not set
CONFIG_ACPI_SYSFS_POWER=y
# CONFIG_ACPI_PROC_EVENT is not set
CONFIG_ACPI_AC=y
CONFIG_ACPI_BATTERY=y
CONFIG_ACPI_BUTTON=y
CONFIG_ACPI_VIDEO=y
CONFIG_ACPI_FAN=y
CONFIG_ACPI_DOCK=y
CONFIG_ACPI_BAY=y
CONFIG_ACPI_PROCESSOR=y
CONFIG_ACPI_HOTPLUG_CPU=y
CONFIG_ACPI_THERMAL=y
# CONFIG_ACPI_ASUS is not set
# CONFIG_ACPI_TOSHIBA is not set
# CONFIG_ACPI_CUSTOM_DSDT is not set
CONFIG_ACPI_BLACKLIST_YEAR=2001
# CONFIG_ACPI_DEBUG is not set
CONFIG_ACPI_EC=y
CONFIG_ACPI_POWER=y
CONFIG_ACPI_SYSTEM=y
CONFIG_X86_PM_TIMER=y
CONFIG_ACPI_CONTAINER=y
# CONFIG_ACPI_SBS is not set
# CONFIG_APM is not set

#
# CPU Frequency scaling
#
CONFIG_CPU_FREQ=y
CONFIG_CPU_FREQ_TABLE=y
# CONFIG_CPU_FREQ_DEBUG is not set
CONFIG_CPU_FREQ_STAT=y
# CONFIG_CPU_FREQ_STAT_DETAILS is not set
# CONFIG_CPU_FREQ_DEFAULT_GOV_PERFORMANCE is not set
# CONFIG_CPU_FREQ_DEFAULT_GOV_USERSPACE is not set
CONFIG_CPU_FREQ_DEFAULT_GOV_ONDEMAND=y
# CONFIG_CPU_FREQ_DEFAULT_GOV_CONSERVATIVE is not set
CONFIG_CPU_FREQ_GOV_PERFORMANCE=y
# CONFIG_CPU_FREQ_GOV_POWERSAVE is not set
CONFIG_CPU_FREQ_GOV_USERSPACE=y
CONFIG_CPU_FREQ_GOV_ONDEMAND=y
CONFIG_CPU_FREQ_GOV_CONSERVATIVE=y

#
# CPUFreq processor drivers
#
CONFIG_X86_ACPI_CPUFREQ=y
# CONFIG_X86_POWERNOW_K6 is not set
# CONFIG_X86_POWERNOW_K7 is not set
# CONFIG_X86_POWERNOW_K8 is not set
# CONFIG_X86_GX_SUSPMOD is not set
# CONFIG_X86_SPEEDSTEP_CENTRINO is not set
# CONFIG_X86_SPEEDSTEP_ICH is not set
# CONFIG_X86_SPEEDSTEP_SMI is not set
# CONFIG_X86_P4_CLOCKMOD is not set
# CONFIG_X86_CPUFREQ_NFORCE2 is not set
# CONFIG_X86_LONGRUN is not set
# CONFIG_X86_LONGHAUL is not set
# CONFIG_X86_E_POWERSAVER is not set

#
# shared options
#
# CONFIG_X86_ACPI_CPUFREQ_PROC_INTF is not set
# CONFIG_X86_SPEEDSTEP_LIB is not set
CONFIG_CPU_IDLE=y
CONFIG_CPU_IDLE_GOV_LADDER=y
CONFIG_CPU_IDLE_GOV_MENU=y

#
# Bus options (PCI etc.)
#
CONFIG_PCI=y
# CONFIG_PCI_GOBIOS is not set
# CONFIG_PCI_GOMMCONFIG is not set
# CONFIG_PCI_GODIRECT is not set
CONFIG_PCI_GOANY=y
CONFIG_PCI_BIOS=y
CONFIG_PCI_DIRECT=y
CONFIG_PCI_MMCONFIG=y
CONFIG_PCI_DOMAINS=y
# CONFIG_PCIEPORTBUS is not set
CONFIG_ARCH_SUPPORTS_MSI=y
CONFIG_PCI_MSI=y
CONFIG_PCI_LEGACY=y
# CONFIG_PCI_DEBUG is not set
# CONFIG_HT_IRQ is not set
CONFIG_ISA_DMA_API=y
# CONFIG_ISA is not set
# CONFIG_MCA is not set
# CONFIG_SCx200 is not set
# CONFIG_PCCARD is not set
# CONFIG_HOTPLUG_PCI is not set

#
# Executable file formats / Emulations
#
CONFIG_BINFMT_ELF=y
# CONFIG_BINFMT_AOUT is not set
# CONFIG_BINFMT_MISC is not set

#
# Networking
#
CONFIG_NET=y

#
# Networking options
#
CONFIG_PACKET=y
# CONFIG_PACKET_MMAP is not set
CONFIG_UNIX=y
CONFIG_XFRM=y
# CONFIG_XFRM_USER is not set
# CONFIG_XFRM_SUB_POLICY is not set
# CONFIG_XFRM_MIGRATE is not set
# CONFIG_NET_KEY is not set
CONFIG_INET=y
CONFIG_IP_MULTICAST=y
# CONFIG_IP_ADVANCED_ROUTER is not set
CONFIG_IP_FIB_HASH=y
CONFIG_IP_PNP=y
CONFIG_IP_PNP_DHCP=y
# CONFIG_IP_PNP_BOOTP is not set
# CONFIG_IP_PNP_RARP is not set
# CONFIG_NET_IPIP is not set
# CONFIG_NET_IPGRE is not set
# CONFIG_IP_MROUTE is not set
# CONFIG_ARPD is not set
# CONFIG_SYN_COOKIES is not set
# CONFIG_INET_AH is not set
# CONFIG_INET_ESP is not set
# CONFIG_INET_IPCOMP is not set
# CONFIG_INET_XFRM_TUNNEL is not set
# CONFIG_INET_TUNNEL is not set
CONFIG_INET_XFRM_MODE_TRANSPORT=y
CONFIG_INET_XFRM_MODE_TUNNEL=y
# CONFIG_INET_XFRM_MODE_BEET is not set
# CONFIG_INET_LRO is not set
CONFIG_INET_DIAG=y
CONFIG_INET_TCP_DIAG=y
# CONFIG_TCP_CONG_ADVANCED is not set
CONFIG_TCP_CONG_CUBIC=y
CONFIG_DEFAULT_TCP_CONG="cubic"
# CONFIG_TCP_MD5SIG is not set
# CONFIG_IPV6 is not set
# CONFIG_INET6_XFRM_TUNNEL is not set
# CONFIG_INET6_TUNNEL is not set
# CONFIG_NETWORK_SECMARK is not set
# CONFIG_NETFILTER is not set
# CONFIG_IP_DCCP is not set
# CONFIG_IP_SCTP is not set
# CONFIG_TIPC is not set
# CONFIG_ATM is not set
# CONFIG_BRIDGE is not set
# CONFIG_VLAN_8021Q is not set
# CONFIG_DECNET is not set
# CONFIG_LLC2 is not set
# CONFIG_IPX is not set
# CONFIG_ATALK is not set
# CONFIG_X25 is not set
# CONFIG_LAPB is not set
# CONFIG_ECONET is not set
# CONFIG_WAN_ROUTER is not set
# CONFIG_NET_SCHED is not set
CONFIG_NET_SCH_FIFO=y

#
# Network testing
#
# CONFIG_NET_PKTGEN is not set
# CONFIG_HAMRADIO is not set
# CONFIG_IRDA is not set
# CONFIG_BT is not set
# CONFIG_AF_RXRPC is not set

#
# Wireless
#
CONFIG_CFG80211=y
# CONFIG_NL80211 is not set
CONFIG_WIRELESS_EXT=y
CONFIG_MAC80211=y
CONFIG_MAC80211_RCSIMPLE=y
# CONFIG_MAC80211_DEBUG is not set
# CONFIG_IEEE80211 is not set
# CONFIG_RFKILL is not set
# CONFIG_NET_9P is not set

#
# Device Drivers
#

#
# Generic Driver Options
#
CONFIG_UEVENT_HELPER_PATH="/sbin/hotplug"
# CONFIG_STANDALONE is not set
CONFIG_PREVENT_FIRMWARE_BUILD=y
CONFIG_FW_LOADER=y
# CONFIG_DEBUG_DRIVER is not set
# CONFIG_DEBUG_DEVRES is not set
# CONFIG_SYS_HYPERVISOR is not set
# CONFIG_CONNECTOR is not set
# CONFIG_MTD is not set
# CONFIG_PARPORT is not set
CONFIG_PNP=y
# CONFIG_PNP_DEBUG is not set

#
# Protocols
#
CONFIG_PNPACPI=y
CONFIG_BLK_DEV=y
CONFIG_BLK_DEV_FD=y
# CONFIG_BLK_CPQ_DA is not set
# CONFIG_BLK_CPQ_CISS_DA is not set
# CONFIG_BLK_DEV_DAC960 is not set
# CONFIG_BLK_DEV_UMEM is not set
# CONFIG_BLK_DEV_COW_COMMON is not set
CONFIG_BLK_DEV_LOOP=y
# CONFIG_BLK_DEV_CRYPTOLOOP is not set
# CONFIG_BLK_DEV_NBD is not set
# CONFIG_BLK_DEV_SX8 is not set
# CONFIG_BLK_DEV_UB is not set
CONFIG_BLK_DEV_RAM=y
CONFIG_BLK_DEV_RAM_COUNT=16
CONFIG_BLK_DEV_RAM_SIZE=4096
CONFIG_BLK_DEV_RAM_BLOCKSIZE=1024
# CONFIG_CDROM_PKTCDVD is not set
# CONFIG_ATA_OVER_ETH is not set
CONFIG_MISC_DEVICES=y
# CONFIG_IBM_ASM is not set
# CONFIG_PHANTOM is not set
# CONFIG_EEPROM_93CX6 is not set
# CONFIG_SGI_IOC4 is not set
# CONFIG_TIFM_CORE is not set
# CONFIG_FUJITSU_LAPTOP is not set
# CONFIG_MSI_LAPTOP is not set
# CONFIG_SONY_LAPTOP is not set
CONFIG_THINKPAD_ACPI=y
# CONFIG_THINKPAD_ACPI_DEBUG is not set
# CONFIG_THINKPAD_ACPI_BAY is not set
CONFIG_THINKPAD_EC=y
CONFIG_TP_SMAPI=y
# CONFIG_IDE is not set

#
# SCSI device support
#
# CONFIG_RAID_ATTRS is not set
CONFIG_SCSI=y
CONFIG_SCSI_DMA=y
# CONFIG_SCSI_TGT is not set
# CONFIG_SCSI_NETLINK is not set
# CONFIG_SCSI_PROC_FS is not set

#
# SCSI support type (disk, tape, CD-ROM)
#
CONFIG_BLK_DEV_SD=y
# CONFIG_CHR_DEV_ST is not set
# CONFIG_CHR_DEV_OSST is not set
CONFIG_BLK_DEV_SR=y
# CONFIG_BLK_DEV_SR_VENDOR is not set
CONFIG_CHR_DEV_SG=y
# CONFIG_CHR_DEV_SCH is not set

#
# Some SCSI devices (e.g. CD jukebox) support multiple LUNs
#
# CONFIG_SCSI_MULTI_LUN is not set
# CONFIG_SCSI_CONSTANTS is not set
# CONFIG_SCSI_LOGGING is not set
CONFIG_SCSI_SCAN_ASYNC=y
CONFIG_SCSI_WAIT_SCAN=m

#
# SCSI Transports
#
# CONFIG_SCSI_SPI_ATTRS is not set
# CONFIG_SCSI_FC_ATTRS is not set
# CONFIG_SCSI_ISCSI_ATTRS is not set
# CONFIG_SCSI_SAS_ATTRS is not set
# CONFIG_SCSI_SAS_LIBSAS is not set
# CONFIG_SCSI_SRP_ATTRS is not set
# CONFIG_SCSI_LOWLEVEL is not set
CONFIG_ATA=y
# CONFIG_ATA_NONSTANDARD is not set
CONFIG_ATA_ACPI=y
CONFIG_SATA_AHCI=y
# CONFIG_SATA_SVW is not set
CONFIG_ATA_PIIX=y
# CONFIG_SATA_MV is not set
# CONFIG_SATA_NV is not set
# CONFIG_PDC_ADMA is not set
# CONFIG_SATA_QSTOR is not set
# CONFIG_SATA_PROMISE is not set
# CONFIG_SATA_SX4 is not set
# CONFIG_SATA_SIL is not set
# CONFIG_SATA_SIL24 is not set
# CONFIG_SATA_SIS is not set
# CONFIG_SATA_ULI is not set
# CONFIG_SATA_VIA is not set
# CONFIG_SATA_VITESSE is not set
# CONFIG_SATA_INIC162X is not set
# CONFIG_PATA_ACPI is not set
# CONFIG_PATA_ALI is not set
# CONFIG_PATA_AMD is not set
# CONFIG_PATA_ARTOP is not set
# CONFIG_PATA_ATIIXP is not set
# CONFIG_PATA_CMD640_PCI is not set
# CONFIG_PATA_CMD64X is not set
# CONFIG_PATA_CS5520 is not set
# CONFIG_PATA_CS5530 is not set
# CONFIG_PATA_CS5535 is not set
# CONFIG_PATA_CS5536 is not set
# CONFIG_PATA_CYPRESS is not set
# CONFIG_PATA_EFAR is not set
# CONFIG_ATA_GENERIC is not set
# CONFIG_PATA_HPT366 is not set
# CONFIG_PATA_HPT37X is not set
# CONFIG_PATA_HPT3X2N is not set
# CONFIG_PATA_HPT3X3 is not set
# CONFIG_PATA_IT821X is not set
# CONFIG_PATA_IT8213 is not set
# CONFIG_PATA_JMICRON is not set
# CONFIG_PATA_TRIFLEX is not set
# CONFIG_PATA_MARVELL is not set
# CONFIG_PATA_MPIIX is not set
# CONFIG_PATA_OLDPIIX is not set
# CONFIG_PATA_NETCELL is not set
# CONFIG_PATA_NS87410 is not set
# CONFIG_PATA_NS87415 is not set
# CONFIG_PATA_OPTI is not set
# CONFIG_PATA_OPTIDMA is not set
# CONFIG_PATA_PDC_OLD is not set
# CONFIG_PATA_RADISYS is not set
# CONFIG_PATA_RZ1000 is not set
# CONFIG_PATA_SC1200 is not set
# CONFIG_PATA_SERVERWORKS is not set
# CONFIG_PATA_PDC2027X is not set
# CONFIG_PATA_SIL680 is not set
# CONFIG_PATA_SIS is not set
# CONFIG_PATA_VIA is not set
# CONFIG_PATA_WINBOND is not set
CONFIG_MD=y
# CONFIG_BLK_DEV_MD is not set
CONFIG_BLK_DEV_DM=y
# CONFIG_DM_DEBUG is not set
CONFIG_DM_CRYPT=y
# CONFIG_DM_SNAPSHOT is not set
# CONFIG_DM_MIRROR is not set
# CONFIG_DM_ZERO is not set
# CONFIG_DM_MULTIPATH is not set
# CONFIG_DM_DELAY is not set
CONFIG_DM_UEVENT=y
# CONFIG_FUSION is not set

#
# IEEE 1394 (FireWire) support
#
# CONFIG_FIREWIRE is not set
# CONFIG_IEEE1394 is not set
# CONFIG_I2O is not set
# CONFIG_MACINTOSH_DRIVERS is not set
CONFIG_NETDEVICES=y
# CONFIG_NETDEVICES_MULTIQUEUE is not set
# CONFIG_DUMMY is not set
# CONFIG_BONDING is not set
# CONFIG_MACVLAN is not set
# CONFIG_EQUALIZER is not set
CONFIG_TUN=y
# CONFIG_VETH is not set
# CONFIG_NET_SB1000 is not set
# CONFIG_ARCNET is not set
# CONFIG_NET_ETHERNET is not set
CONFIG_NETDEV_1000=y
# CONFIG_ACENIC is not set
# CONFIG_DL2K is not set
CONFIG_E1000=y
CONFIG_E1000_NAPI=y
# CONFIG_E1000_DISABLE_PACKET_SPLIT is not set
# CONFIG_E1000E is not set
# CONFIG_IP1000 is not set
# CONFIG_NS83820 is not set
# CONFIG_HAMACHI is not set
# CONFIG_YELLOWFIN is not set
# CONFIG_R8169 is not set
# CONFIG_SIS190 is not set
# CONFIG_SKGE is not set
# CONFIG_SKY2 is not set
# CONFIG_SK98LIN is not set
# CONFIG_VIA_VELOCITY is not set
# CONFIG_TIGON3 is not set
# CONFIG_BNX2 is not set
# CONFIG_QLA3XXX is not set
# CONFIG_ATL1 is not set
# CONFIG_NETDEV_10000 is not set
# CONFIG_TR is not set

#
# Wireless LAN
#
# CONFIG_WLAN_PRE80211 is not set
CONFIG_WLAN_80211=y
# CONFIG_IPW2100 is not set
# CONFIG_IPW2200 is not set
# CONFIG_LIBERTAS is not set
# CONFIG_AIRO is not set
# CONFIG_HERMES is not set
# CONFIG_ATMEL is not set
# CONFIG_PRISM54 is not set
# CONFIG_USB_ZD1201 is not set
# CONFIG_RTL8187 is not set
# CONFIG_ADM8211 is not set
# CONFIG_P54_COMMON is not set
CONFIG_IWLWIFI=y
# CONFIG_IWLWIFI_DEBUG is not set
CONFIG_IWLWIFI_SENSITIVITY=y
CONFIG_IWLWIFI_SPECTRUM_MEASUREMENT=y
CONFIG_IWLWIFI_QOS=y
CONFIG_IWL4965=m
# CONFIG_IWL3945 is not set
# CONFIG_HOSTAP is not set
# CONFIG_B43 is not set
# CONFIG_B43LEGACY is not set
# CONFIG_RT2X00 is not set

#
# USB Network Adapters
#
# CONFIG_USB_CATC is not set
# CONFIG_USB_KAWETH is not set
# CONFIG_USB_PEGASUS is not set
# CONFIG_USB_RTL8150 is not set
# CONFIG_USB_USBNET is not set
# CONFIG_WAN is not set
# CONFIG_FDDI is not set
# CONFIG_HIPPI is not set
# CONFIG_PPP is not set
# CONFIG_SLIP is not set
# CONFIG_NET_FC is not set
# CONFIG_SHAPER is not set
# CONFIG_NETCONSOLE is not set
# CONFIG_NETPOLL is not set
# CONFIG_NET_POLL_CONTROLLER is not set
# CONFIG_ISDN is not set
# CONFIG_PHONE is not set

#
# Input device support
#
CONFIG_INPUT=y
# CONFIG_INPUT_FF_MEMLESS is not set
CONFIG_INPUT_POLLDEV=y

#
# Userland interfaces
#
CONFIG_INPUT_MOUSEDEV=y
CONFIG_INPUT_MOUSEDEV_PSAUX=y
CONFIG_INPUT_MOUSEDEV_SCREEN_X=1024
CONFIG_INPUT_MOUSEDEV_SCREEN_Y=768
# CONFIG_INPUT_JOYDEV is not set
CONFIG_INPUT_EVDEV=y
# CONFIG_INPUT_EVBUG is not set

#
# Input Device Drivers
#
CONFIG_INPUT_KEYBOARD=y
CONFIG_KEYBOARD_ATKBD=y
# CONFIG_KEYBOARD_SUNKBD is not set
# CONFIG_KEYBOARD_LKKBD is not set
# CONFIG_KEYBOARD_XTKBD is not set
# CONFIG_KEYBOARD_NEWTON is not set
# CONFIG_KEYBOARD_STOWAWAY is not set
CONFIG_INPUT_MOUSE=y
CONFIG_MOUSE_PS2=y
CONFIG_MOUSE_PS2_ALPS=y
CONFIG_MOUSE_PS2_LOGIPS2PP=y
CONFIG_MOUSE_PS2_SYNAPTICS=y
CONFIG_MOUSE_PS2_LIFEBOOK=y
CONFIG_MOUSE_PS2_TRACKPOINT=y
# CONFIG_MOUSE_PS2_TOUCHKIT is not set
# CONFIG_MOUSE_SERIAL is not set
# CONFIG_MOUSE_APPLETOUCH is not set
# CONFIG_MOUSE_VSXXXAA is not set
# CONFIG_INPUT_JOYSTICK is not set
# CONFIG_INPUT_TABLET is not set
# CONFIG_INPUT_TOUCHSCREEN is not set
# CONFIG_INPUT_MISC is not set

#
# Hardware I/O ports
#
CONFIG_SERIO=y
CONFIG_SERIO_I8042=y
# CONFIG_SERIO_SERPORT is not set
# CONFIG_SERIO_CT82C710 is not set
# CONFIG_SERIO_PCIPS2 is not set
CONFIG_SERIO_LIBPS2=y
# CONFIG_SERIO_RAW is not set
# CONFIG_GAMEPORT is not set

#
# Character devices
#
CONFIG_VT=y
CONFIG_VT_CONSOLE=y
CONFIG_HW_CONSOLE=y
# CONFIG_VT_HW_CONSOLE_BINDING is not set
# CONFIG_SERIAL_NONSTANDARD is not set

#
# Serial drivers
#
CONFIG_SERIAL_8250=y
CONFIG_SERIAL_8250_CONSOLE=y
CONFIG_FIX_EARLYCON_MEM=y
CONFIG_SERIAL_8250_PCI=y
CONFIG_SERIAL_8250_PNP=y
CONFIG_SERIAL_8250_NR_UARTS=4
CONFIG_SERIAL_8250_RUNTIME_UARTS=4
# CONFIG_SERIAL_8250_EXTENDED is not set

#
# Non-8250 serial port support
#
CONFIG_SERIAL_CORE=y
CONFIG_SERIAL_CORE_CONSOLE=y
# CONFIG_SERIAL_JSM is not set
CONFIG_UNIX98_PTYS=y
CONFIG_LEGACY_PTYS=y
CONFIG_LEGACY_PTY_COUNT=256
# CONFIG_IPMI_HANDLER is not set
# CONFIG_HW_RANDOM is not set
CONFIG_NVRAM=y
CONFIG_RTC=y
# CONFIG_R3964 is not set
# CONFIG_APPLICOM is not set
# CONFIG_SONYPI is not set
# CONFIG_MWAVE is not set
# CONFIG_PC8736x_GPIO is not set
# CONFIG_NSC_GPIO is not set
# CONFIG_CS5535_GPIO is not set
CONFIG_RAW_DRIVER=y
CONFIG_MAX_RAW_DEVS=256
CONFIG_HPET=y
# CONFIG_HPET_RTC_IRQ is not set
CONFIG_HPET_MMAP=y
# CONFIG_HANGCHECK_TIMER is not set
# CONFIG_TCG_TPM is not set
# CONFIG_TELCLOCK is not set
CONFIG_DEVPORT=y
CONFIG_I2C=y
CONFIG_I2C_BOARDINFO=y
# CONFIG_I2C_CHARDEV is not set

#
# I2C Algorithms
#
CONFIG_I2C_ALGOBIT=y
# CONFIG_I2C_ALGOPCF is not set
# CONFIG_I2C_ALGOPCA is not set

#
# I2C Hardware Bus support
#
# CONFIG_I2C_ALI1535 is not set
# CONFIG_I2C_ALI1563 is not set
# CONFIG_I2C_ALI15X3 is not set
# CONFIG_I2C_AMD756 is not set
# CONFIG_I2C_AMD8111 is not set
CONFIG_I2C_I801=y
# CONFIG_I2C_I810 is not set
# CONFIG_I2C_PIIX4 is not set
# CONFIG_I2C_NFORCE2 is not set
# CONFIG_I2C_OCORES is not set
# CONFIG_I2C_PARPORT_LIGHT is not set
# CONFIG_I2C_PROSAVAGE is not set
# CONFIG_I2C_SAVAGE4 is not set
# CONFIG_I2C_SIMTEC is not set
# CONFIG_SCx200_ACB is not set
# CONFIG_I2C_SIS5595 is not set
# CONFIG_I2C_SIS630 is not set
# CONFIG_I2C_SIS96X is not set
# CONFIG_I2C_TAOS_EVM is not set
# CONFIG_I2C_STUB is not set
# CONFIG_I2C_TINY_USB is not set
# CONFIG_I2C_VIA is not set
# CONFIG_I2C_VIAPRO is not set
# CONFIG_I2C_VOODOO3 is not set

#
# Miscellaneous I2C Chip support
#
# CONFIG_SENSORS_DS1337 is not set
# CONFIG_SENSORS_DS1374 is not set
# CONFIG_DS1682 is not set
CONFIG_SENSORS_EEPROM=y
# CONFIG_SENSORS_PCF8574 is not set
# CONFIG_SENSORS_PCA9539 is not set
# CONFIG_SENSORS_PCF8591 is not set
# CONFIG_SENSORS_MAX6875 is not set
# CONFIG_SENSORS_TSL2550 is not set
# CONFIG_I2C_DEBUG_CORE is not set
# CONFIG_I2C_DEBUG_ALGO is not set
# CONFIG_I2C_DEBUG_BUS is not set
# CONFIG_I2C_DEBUG_CHIP is not set

#
# SPI support
#
# CONFIG_SPI is not set
# CONFIG_SPI_MASTER is not set
# CONFIG_W1 is not set
CONFIG_POWER_SUPPLY=y
# CONFIG_POWER_SUPPLY_DEBUG is not set
# CONFIG_PDA_POWER is not set
# CONFIG_BATTERY_DS2760 is not set
CONFIG_HWMON=y
# CONFIG_HWMON_VID is not set
# CONFIG_SENSORS_ABITUGURU is not set
# CONFIG_SENSORS_ABITUGURU3 is not set
# CONFIG_SENSORS_AD7418 is not set
# CONFIG_SENSORS_ADM1021 is not set
# CONFIG_SENSORS_ADM1025 is not set
# CONFIG_SENSORS_ADM1026 is not set
# CONFIG_SENSORS_ADM1029 is not set
# CONFIG_SENSORS_ADM1031 is not set
# CONFIG_SENSORS_ADM9240 is not set
# CONFIG_SENSORS_ADT7470 is not set
# CONFIG_SENSORS_K8TEMP is not set
# CONFIG_SENSORS_ASB100 is not set
# CONFIG_SENSORS_ATXP1 is not set
# CONFIG_SENSORS_DS1621 is not set
# CONFIG_SENSORS_I5K_AMB is not set
# CONFIG_SENSORS_F71805F is not set
# CONFIG_SENSORS_F71882FG is not set
# CONFIG_SENSORS_F75375S is not set
# CONFIG_SENSORS_FSCHER is not set
# CONFIG_SENSORS_FSCPOS is not set
# CONFIG_SENSORS_FSCHMD is not set
# CONFIG_SENSORS_GL518SM is not set
# CONFIG_SENSORS_GL520SM is not set
CONFIG_SENSORS_CORETEMP=y
# CONFIG_SENSORS_IT87 is not set
# CONFIG_SENSORS_LM63 is not set
# CONFIG_SENSORS_LM75 is not set
# CONFIG_SENSORS_LM77 is not set
# CONFIG_SENSORS_LM78 is not set
# CONFIG_SENSORS_LM80 is not set
# CONFIG_SENSORS_LM83 is not set
# CONFIG_SENSORS_LM85 is not set
# CONFIG_SENSORS_LM87 is not set
# CONFIG_SENSORS_LM90 is not set
# CONFIG_SENSORS_LM92 is not set
# CONFIG_SENSORS_LM93 is not set
# CONFIG_SENSORS_MAX1619 is not set
# CONFIG_SENSORS_MAX6650 is not set
# CONFIG_SENSORS_PC87360 is not set
# CONFIG_SENSORS_PC87427 is not set
# CONFIG_SENSORS_SIS5595 is not set
# CONFIG_SENSORS_DME1737 is not set
# CONFIG_SENSORS_SMSC47M1 is not set
# CONFIG_SENSORS_SMSC47M192 is not set
# CONFIG_SENSORS_SMSC47B397 is not set
# CONFIG_SENSORS_THMC50 is not set
# CONFIG_SENSORS_VIA686A is not set
# CONFIG_SENSORS_VT1211 is not set
# CONFIG_SENSORS_VT8231 is not set
# CONFIG_SENSORS_W83781D is not set
# CONFIG_SENSORS_W83791D is not set
# CONFIG_SENSORS_W83792D is not set
# CONFIG_SENSORS_W83793 is not set
# CONFIG_SENSORS_W83L785TS is not set
# CONFIG_SENSORS_W83627HF is not set
# CONFIG_SENSORS_W83627EHF is not set
CONFIG_SENSORS_HDAPS=y
# CONFIG_SENSORS_APPLESMC is not set
# CONFIG_HWMON_DEBUG_CHIP is not set
# CONFIG_WATCHDOG is not set

#
# Sonics Silicon Backplane
#
CONFIG_SSB_POSSIBLE=y
CONFIG_SSB=y
CONFIG_SSB_PCIHOST_POSSIBLE=y
CONFIG_SSB_PCIHOST=y
# CONFIG_SSB_DEBUG is not set
CONFIG_SSB_DRIVER_PCICORE_POSSIBLE=y
CONFIG_SSB_DRIVER_PCICORE=y

#
# Multifunction device drivers
#
# CONFIG_MFD_SM501 is not set

#
# Multimedia devices
#
CONFIG_VIDEO_DEV=y
# CONFIG_VIDEO_V4L1 is not set
# CONFIG_VIDEO_V4L1_COMPAT is not set
CONFIG_VIDEO_V4L2=y
CONFIG_VIDEO_CAPTURE_DRIVERS=y
CONFIG_VIDEO_ADV_DEBUG=y
CONFIG_VIDEO_HELPER_CHIPS_AUTO=y
# CONFIG_VIDEO_VIVI is not set
# CONFIG_VIDEO_SAA5246A is not set
# CONFIG_VIDEO_SAA5249 is not set
# CONFIG_VIDEO_SAA7134 is not set
# CONFIG_VIDEO_HEXIUM_ORION is not set
# CONFIG_VIDEO_HEXIUM_GEMINI is not set
# CONFIG_VIDEO_CX88 is not set
# CONFIG_VIDEO_CAFE_CCIC is not set
CONFIG_V4L_USB_DRIVERS=y
# CONFIG_VIDEO_PVRUSB2 is not set
# CONFIG_VIDEO_USBVISION is not set
# CONFIG_USB_ET61X251 is not set
# CONFIG_USB_SN9C102 is not set
# CONFIG_USB_ZC0301 is not set
# CONFIG_USB_ZR364XX is not set
# CONFIG_RADIO_ADAPTERS is not set
# CONFIG_DVB_CORE is not set
# CONFIG_DAB is not set

#
# Graphics support
#
CONFIG_AGP=y
# CONFIG_AGP_ALI is not set
# CONFIG_AGP_ATI is not set
# CONFIG_AGP_AMD is not set
# CONFIG_AGP_AMD64 is not set
CONFIG_AGP_INTEL=y
# CONFIG_AGP_NVIDIA is not set
# CONFIG_AGP_SIS is not set
# CONFIG_AGP_SWORKS is not set
# CONFIG_AGP_VIA is not set
# CONFIG_AGP_EFFICEON is not set
CONFIG_DRM=y
# CONFIG_DRM_TDFX is not set
# CONFIG_DRM_R128 is not set
# CONFIG_DRM_RADEON is not set
# CONFIG_DRM_I810 is not set
# CONFIG_DRM_I830 is not set
CONFIG_DRM_I915=y
# CONFIG_DRM_MGA is not set
# CONFIG_DRM_SIS is not set
# CONFIG_DRM_VIA is not set
# CONFIG_DRM_SAVAGE is not set
# CONFIG_VGASTATE is not set
CONFIG_VIDEO_OUTPUT_CONTROL=y
CONFIG_FB=y
# CONFIG_FIRMWARE_EDID is not set
# CONFIG_FB_DDC is not set
CONFIG_FB_CFB_FILLRECT=y
CONFIG_FB_CFB_COPYAREA=y
CONFIG_FB_CFB_IMAGEBLIT=y
# CONFIG_FB_CFB_REV_PIXELS_IN_BYTE is not set
# CONFIG_FB_SYS_FILLRECT is not set
# CONFIG_FB_SYS_COPYAREA is not set
# CONFIG_FB_SYS_IMAGEBLIT is not set
# CONFIG_FB_SYS_FOPS is not set
CONFIG_FB_DEFERRED_IO=y
# CONFIG_FB_SVGALIB is not set
# CONFIG_FB_MACMODES is not set
# CONFIG_FB_BACKLIGHT is not set
# CONFIG_FB_MODE_HELPERS is not set
# CONFIG_FB_TILEBLITTING is not set

#
# Frame buffer hardware drivers
#
# CONFIG_FB_CIRRUS is not set
# CONFIG_FB_PM2 is not set
# CONFIG_FB_CYBER2000 is not set
# CONFIG_FB_ARC is not set
# CONFIG_FB_ASILIANT is not set
# CONFIG_FB_IMSTT is not set
# CONFIG_FB_VGA16 is not set
CONFIG_FB_VESA=y
# CONFIG_FB_EFI is not set
# CONFIG_FB_HECUBA is not set
# CONFIG_FB_HGA is not set
# CONFIG_FB_S1D13XXX is not set
# CONFIG_FB_NVIDIA is not set
# CONFIG_FB_RIVA is not set
# CONFIG_FB_I810 is not set
# CONFIG_FB_LE80578 is not set
# CONFIG_FB_INTEL is not set
# CONFIG_FB_MATROX is not set
# CONFIG_FB_RADEON is not set
# CONFIG_FB_ATY128 is not set
# CONFIG_FB_ATY is not set
# CONFIG_FB_S3 is not set
# CONFIG_FB_SAVAGE is not set
# CONFIG_FB_SIS is not set
# CONFIG_FB_NEOMAGIC is not set
# CONFIG_FB_KYRO is not set
# CONFIG_FB_3DFX is not set
# CONFIG_FB_VOODOO1 is not set
# CONFIG_FB_VT8623 is not set
# CONFIG_FB_CYBLA is not set
# CONFIG_FB_TRIDENT is not set
# CONFIG_FB_ARK is not set
# CONFIG_FB_PM3 is not set
# CONFIG_FB_GEODE is not set
# CONFIG_FB_VIRTUAL is not set
# CONFIG_BACKLIGHT_LCD_SUPPORT is not set
CONFIG_BACKLIGHT_CLASS_DEVICE=y
# CONFIG_BACKLIGHT_CORGI is not set
# CONFIG_BACKLIGHT_PROGEAR is not set

#
# Display device support
#
# CONFIG_DISPLAY_SUPPORT is not set

#
# Console display driver support
#
CONFIG_VGA_CONSOLE=y
CONFIG_VGACON_SOFT_SCROLLBACK=y
CONFIG_VGACON_SOFT_SCROLLBACK_SIZE=128
CONFIG_VIDEO_SELECT=y
CONFIG_DUMMY_CONSOLE=y
CONFIG_FRAMEBUFFER_CONSOLE=y
# CONFIG_FRAMEBUFFER_CONSOLE_DETECT_PRIMARY is not set
# CONFIG_FRAMEBUFFER_CONSOLE_ROTATION is not set
# CONFIG_FONTS is not set
CONFIG_FONT_8x8=y
CONFIG_FONT_8x16=y
CONFIG_LOGO=y
# CONFIG_LOGO_LINUX_MONO is not set
# CONFIG_LOGO_LINUX_VGA16 is not set
CONFIG_LOGO_LINUX_CLUT224=y

#
# Sound
#
CONFIG_SOUND=y

#
# Advanced Linux Sound Architecture
#
CONFIG_SND=y
CONFIG_SND_TIMER=y
CONFIG_SND_PCM=y
CONFIG_SND_HWDEP=m
CONFIG_SND_RAWMIDI=m
# CONFIG_SND_SEQUENCER is not set
# CONFIG_SND_MIXER_OSS is not set
# CONFIG_SND_PCM_OSS is not set
# CONFIG_SND_RTCTIMER is not set
# CONFIG_SND_DYNAMIC_MINORS is not set
# CONFIG_SND_SUPPORT_OLD_API is not set
# CONFIG_SND_VERBOSE_PROCFS is not set
# CONFIG_SND_VERBOSE_PRINTK is not set
# CONFIG_SND_DEBUG is not set

#
# Generic devices
#
# CONFIG_SND_DUMMY is not set
# CONFIG_SND_MTPAV is not set
# CONFIG_SND_SERIAL_U16550 is not set
# CONFIG_SND_MPU401 is not set

#
# PCI devices
#
# CONFIG_SND_AD1889 is not set
# CONFIG_SND_ALS300 is not set
# CONFIG_SND_ALS4000 is not set
# CONFIG_SND_ALI5451 is not set
# CONFIG_SND_ATIIXP is not set
# CONFIG_SND_ATIIXP_MODEM is not set
# CONFIG_SND_AU8810 is not set
# CONFIG_SND_AU8820 is not set
# CONFIG_SND_AU8830 is not set
# CONFIG_SND_AZT3328 is not set
# CONFIG_SND_BT87X is not set
# CONFIG_SND_CA0106 is not set
# CONFIG_SND_CMIPCI is not set
# CONFIG_SND_CS4281 is not set
# CONFIG_SND_CS46XX is not set
# CONFIG_SND_CS5530 is not set
# CONFIG_SND_CS5535AUDIO is not set
# CONFIG_SND_DARLA20 is not set
# CONFIG_SND_GINA20 is not set
# CONFIG_SND_LAYLA20 is not set
# CONFIG_SND_DARLA24 is not set
# CONFIG_SND_GINA24 is not set
# CONFIG_SND_LAYLA24 is not set
# CONFIG_SND_MONA is not set
# CONFIG_SND_MIA is not set
# CONFIG_SND_ECHO3G is not set
# CONFIG_SND_INDIGO is not set
# CONFIG_SND_INDIGOIO is not set
# CONFIG_SND_INDIGODJ is not set
# CONFIG_SND_EMU10K1 is not set
# CONFIG_SND_EMU10K1X is not set
# CONFIG_SND_ENS1370 is not set
# CONFIG_SND_ENS1371 is not set
# CONFIG_SND_ES1938 is not set
# CONFIG_SND_ES1968 is not set
# CONFIG_SND_FM801 is not set
CONFIG_SND_HDA_INTEL=y
# CONFIG_SND_HDA_HWDEP is not set
# CONFIG_SND_HDA_CODEC_REALTEK is not set
CONFIG_SND_HDA_CODEC_ANALOG=y
# CONFIG_SND_HDA_CODEC_SIGMATEL is not set
# CONFIG_SND_HDA_CODEC_VIA is not set
# CONFIG_SND_HDA_CODEC_ATIHDMI is not set
# CONFIG_SND_HDA_CODEC_CONEXANT is not set
# CONFIG_SND_HDA_CODEC_CMEDIA is not set
# CONFIG_SND_HDA_CODEC_SI3054 is not set
# CONFIG_SND_HDA_GENERIC is not set
CONFIG_SND_HDA_POWER_SAVE=y
CONFIG_SND_HDA_POWER_SAVE_DEFAULT=15
# CONFIG_SND_HDSP is not set
# CONFIG_SND_HDSPM is not set
# CONFIG_SND_ICE1712 is not set
# CONFIG_SND_ICE1724 is not set
# CONFIG_SND_INTEL8X0 is not set
# CONFIG_SND_INTEL8X0M is not set
# CONFIG_SND_KORG1212 is not set
# CONFIG_SND_MAESTRO3 is not set
# CONFIG_SND_MIXART is not set
# CONFIG_SND_NM256 is not set
# CONFIG_SND_PCXHR is not set
# CONFIG_SND_RIPTIDE is not set
# CONFIG_SND_RME32 is not set
# CONFIG_SND_RME96 is not set
# CONFIG_SND_RME9652 is not set
# CONFIG_SND_SONICVIBES is not set
# CONFIG_SND_TRIDENT is not set
# CONFIG_SND_VIA82XX is not set
# CONFIG_SND_VIA82XX_MODEM is not set
# CONFIG_SND_VX222 is not set
# CONFIG_SND_YMFPCI is not set

#
# USB devices
#
CONFIG_SND_USB_AUDIO=m
# CONFIG_SND_USB_USX2Y is not set
# CONFIG_SND_USB_CAIAQ is not set

#
# System on Chip audio support
#
# CONFIG_SND_SOC is not set

#
# SoC Audio support for SuperH
#

#
# Open Sound System
#
CONFIG_SOUND_PRIME=y
# CONFIG_SOUND_TRIDENT is not set
# CONFIG_SOUND_MSNDCLAS is not set
# CONFIG_SOUND_MSNDPIN is not set
# CONFIG_SOUND_OSS is not set
# CONFIG_HID_SUPPORT is not set
CONFIG_USB_SUPPORT=y
CONFIG_USB_ARCH_HAS_HCD=y
CONFIG_USB_ARCH_HAS_OHCI=y
CONFIG_USB_ARCH_HAS_EHCI=y
CONFIG_USB=y
CONFIG_USB_DEBUG=y

#
# Miscellaneous USB options
#
# CONFIG_USB_DEVICEFS is not set
# CONFIG_USB_DEVICE_CLASS is not set
# CONFIG_USB_DYNAMIC_MINORS is not set
CONFIG_USB_SUSPEND=y
# CONFIG_USB_PERSIST is not set
# CONFIG_USB_OTG is not set

#
# USB Host Controller Drivers
#
CONFIG_USB_EHCI_HCD=y
CONFIG_USB_EHCI_SPLIT_ISO=y
CONFIG_USB_EHCI_ROOT_HUB_TT=y
CONFIG_USB_EHCI_TT_NEWSCHED=y
# CONFIG_USB_ISP116X_HCD is not set
# CONFIG_USB_OHCI_HCD is not set
CONFIG_USB_UHCI_HCD=y
# CONFIG_USB_SL811_HCD is not set
# CONFIG_USB_R8A66597_HCD is not set

#
# USB Device Class drivers
#
# CONFIG_USB_ACM is not set
# CONFIG_USB_PRINTER is not set

#
# NOTE: USB_STORAGE enables SCSI, and 'SCSI disk support'
#

#
# may also be needed; see USB_STORAGE Help for more information
#
CONFIG_USB_STORAGE=y
# CONFIG_USB_STORAGE_DEBUG is not set
# CONFIG_USB_STORAGE_DATAFAB is not set
# CONFIG_USB_STORAGE_FREECOM is not set
# CONFIG_USB_STORAGE_ISD200 is not set
# CONFIG_USB_STORAGE_DPCM is not set
# CONFIG_USB_STORAGE_USBAT is not set
# CONFIG_USB_STORAGE_SDDR09 is not set
# CONFIG_USB_STORAGE_SDDR55 is not set
# CONFIG_USB_STORAGE_JUMPSHOT is not set
# CONFIG_USB_STORAGE_ALAUDA is not set
# CONFIG_USB_STORAGE_KARMA is not set
# CONFIG_USB_LIBUSUAL is not set

#
# USB Imaging devices
#
# CONFIG_USB_MDC800 is not set
# CONFIG_USB_MICROTEK is not set
# CONFIG_USB_MON is not set

#
# USB port drivers
#

#
# USB Serial Converter support
#
# CONFIG_USB_SERIAL is not set

#
# USB Miscellaneous drivers
#
# CONFIG_USB_EMI62 is not set
# CONFIG_USB_EMI26 is not set
# CONFIG_USB_ADUTUX is not set
# CONFIG_USB_AUERSWALD is not set
# CONFIG_USB_RIO500 is not set
# CONFIG_USB_LEGOTOWER is not set
# CONFIG_USB_LCD is not set
# CONFIG_USB_BERRY_CHARGE is not set
# CONFIG_USB_LED is not set
# CONFIG_USB_CYPRESS_CY7C63 is not set
# CONFIG_USB_CYTHERM is not set
# CONFIG_USB_PHIDGET is not set
# CONFIG_USB_IDMOUSE is not set
# CONFIG_USB_FTDI_ELAN is not set
# CONFIG_USB_APPLEDISPLAY is not set
# CONFIG_USB_SISUSBVGA is not set
# CONFIG_USB_LD is not set
# CONFIG_USB_TRANCEVIBRATOR is not set
# CONFIG_USB_IOWARRIOR is not set

#
# USB DSL modem support
#

#
# USB Gadget Support
#
# CONFIG_USB_GADGET is not set
# CONFIG_MMC is not set
# CONFIG_NEW_LEDS is not set
# CONFIG_INFINIBAND is not set
# CONFIG_EDAC is not set
# CONFIG_RTC_CLASS is not set
# CONFIG_DMADEVICES is not set
# CONFIG_VIRTUALIZATION is not set

#
# Userspace I/O
#
# CONFIG_UIO is not set

#
# Firmware Drivers
#
CONFIG_EDD=y
# CONFIG_DELL_RBU is not set
# CONFIG_DCDBAS is not set
CONFIG_DMIID=y

#
# File systems
#
# CONFIG_EXT2_FS is not set
CONFIG_EXT3_FS=y
# CONFIG_EXT3_FS_XATTR is not set
# CONFIG_EXT4DEV_FS is not set
CONFIG_JBD=y
# CONFIG_REISERFS_FS is not set
# CONFIG_JFS_FS is not set
# CONFIG_FS_POSIX_ACL is not set
# CONFIG_XFS_FS is not set
# CONFIG_GFS2_FS is not set
# CONFIG_OCFS2_FS is not set
# CONFIG_MINIX_FS is not set
# CONFIG_ROMFS_FS is not set
CONFIG_INOTIFY=y
CONFIG_INOTIFY_USER=y
# CONFIG_QUOTA is not set
# CONFIG_DNOTIFY is not set
# CONFIG_AUTOFS_FS is not set
# CONFIG_AUTOFS4_FS is not set
# CONFIG_FUSE_FS is not set

#
# CD-ROM/DVD Filesystems
#
CONFIG_ISO9660_FS=y
CONFIG_JOLIET=y
CONFIG_ZISOFS=y
CONFIG_UDF_FS=y
CONFIG_UDF_NLS=y

#
# DOS/FAT/NT Filesystems
#
CONFIG_FAT_FS=y
CONFIG_MSDOS_FS=y
CONFIG_VFAT_FS=y
CONFIG_FAT_DEFAULT_CODEPAGE=437
CONFIG_FAT_DEFAULT_IOCHARSET="iso8859-1"
# CONFIG_NTFS_FS is not set

#
# Pseudo filesystems
#
CONFIG_PROC_FS=y
# CONFIG_PROC_KCORE is not set
CONFIG_PROC_SYSCTL=y
CONFIG_SYSFS=y
CONFIG_TMPFS=y
# CONFIG_TMPFS_POSIX_ACL is not set
# CONFIG_HUGETLBFS is not set
# CONFIG_HUGETLB_PAGE is not set
# CONFIG_CONFIGFS_FS is not set

#
# Miscellaneous filesystems
#
# CONFIG_ADFS_FS is not set
# CONFIG_AFFS_FS is not set
# CONFIG_HFS_FS is not set
# CONFIG_HFSPLUS_FS is not set
# CONFIG_BEFS_FS is not set
# CONFIG_BFS_FS is not set
# CONFIG_EFS_FS is not set
# CONFIG_CRAMFS is not set
# CONFIG_VXFS_FS is not set
# CONFIG_HPFS_FS is not set
# CONFIG_QNX4FS_FS is not set
# CONFIG_SYSV_FS is not set
# CONFIG_UFS_FS is not set
# CONFIG_NETWORK_FILESYSTEMS is not set

#
# Partition Types
#
# CONFIG_PARTITION_ADVANCED is not set
CONFIG_MSDOS_PARTITION=y
CONFIG_NLS=y
CONFIG_NLS_DEFAULT="utf8"
CONFIG_NLS_CODEPAGE_437=y
# CONFIG_NLS_CODEPAGE_737 is not set
# CONFIG_NLS_CODEPAGE_775 is not set
CONFIG_NLS_CODEPAGE_850=y
CONFIG_NLS_CODEPAGE_852=y
# CONFIG_NLS_CODEPAGE_855 is not set
# CONFIG_NLS_CODEPAGE_857 is not set
# CONFIG_NLS_CODEPAGE_860 is not set
# CONFIG_NLS_CODEPAGE_861 is not set
# CONFIG_NLS_CODEPAGE_862 is not set
# CONFIG_NLS_CODEPAGE_863 is not set
# CONFIG_NLS_CODEPAGE_864 is not set
# CONFIG_NLS_CODEPAGE_865 is not set
# CONFIG_NLS_CODEPAGE_866 is not set
# CONFIG_NLS_CODEPAGE_869 is not set
# CONFIG_NLS_CODEPAGE_936 is not set
# CONFIG_NLS_CODEPAGE_950 is not set
# CONFIG_NLS_CODEPAGE_932 is not set
# CONFIG_NLS_CODEPAGE_949 is not set
# CONFIG_NLS_CODEPAGE_874 is not set
# CONFIG_NLS_ISO8859_8 is not set
CONFIG_NLS_CODEPAGE_1250=y
# CONFIG_NLS_CODEPAGE_1251 is not set
CONFIG_NLS_ASCII=y
CONFIG_NLS_ISO8859_1=y
CONFIG_NLS_ISO8859_2=y
# CONFIG_NLS_ISO8859_3 is not set
# CONFIG_NLS_ISO8859_4 is not set
# CONFIG_NLS_ISO8859_5 is not set
# CONFIG_NLS_ISO8859_6 is not set
# CONFIG_NLS_ISO8859_7 is not set
# CONFIG_NLS_ISO8859_9 is not set
# CONFIG_NLS_ISO8859_13 is not set
# CONFIG_NLS_ISO8859_14 is not set
CONFIG_NLS_ISO8859_15=y
# CONFIG_NLS_KOI8_R is not set
# CONFIG_NLS_KOI8_U is not set
CONFIG_NLS_UTF8=y
# CONFIG_DLM is not set
# CONFIG_INSTRUMENTATION is not set

#
# Kernel hacking
#
CONFIG_TRACE_IRQFLAGS_SUPPORT=y
# CONFIG_PRINTK_TIME is not set
# CONFIG_ENABLE_WARN_DEPRECATED is not set
# CONFIG_ENABLE_MUST_CHECK is not set
# CONFIG_MAGIC_SYSRQ is not set
# CONFIG_UNUSED_SYMBOLS is not set
# CONFIG_DEBUG_FS is not set
# CONFIG_HEADERS_CHECK is not set
CONFIG_DEBUG_KERNEL=y
# CONFIG_DEBUG_SHIRQ is not set
# CONFIG_DETECT_SOFTLOCKUP is not set
# CONFIG_SCHED_DEBUG is not set
# CONFIG_SCHEDSTATS is not set
CONFIG_TIMER_STATS=y
# CONFIG_SLUB_DEBUG_ON is not set
# CONFIG_DEBUG_RT_MUTEXES is not set
# CONFIG_RT_MUTEX_TESTER is not set
# CONFIG_DEBUG_SPINLOCK is not set
# CONFIG_DEBUG_MUTEXES is not set
# CONFIG_DEBUG_LOCK_ALLOC is not set
# CONFIG_PROVE_LOCKING is not set
# CONFIG_LOCK_STAT is not set
# CONFIG_DEBUG_SPINLOCK_SLEEP is not set
# CONFIG_DEBUG_LOCKING_API_SELFTESTS is not set
# CONFIG_DEBUG_KOBJECT is not set
# CONFIG_DEBUG_HIGHMEM is not set
CONFIG_DEBUG_BUGVERBOSE=y
# CONFIG_DEBUG_INFO is not set
# CONFIG_DEBUG_VM is not set
# CONFIG_DEBUG_LIST is not set
# CONFIG_DEBUG_SG is not set
# CONFIG_FRAME_POINTER is not set
# CONFIG_FORCED_INLINING is not set
# CONFIG_BOOT_PRINTK_DELAY is not set
# CONFIG_RCU_TORTURE_TEST is not set
# CONFIG_FAULT_INJECTION is not set
# CONFIG_SAMPLES is not set
CONFIG_EARLY_PRINTK=y
# CONFIG_DEBUG_STACKOVERFLOW is not set
# CONFIG_DEBUG_STACK_USAGE is not set
# CONFIG_DEBUG_PAGEALLOC is not set
# CONFIG_DEBUG_RODATA is not set
# CONFIG_4KSTACKS is not set
CONFIG_X86_FIND_SMP_CONFIG=y
CONFIG_X86_MPPARSE=y
CONFIG_DOUBLEFAULT=y

#
# Security options
#
# CONFIG_KEYS is not set
# CONFIG_SECURITY is not set
# CONFIG_SECURITY_FILE_CAPABILITIES is not set
CONFIG_CRYPTO=y
CONFIG_CRYPTO_ALGAPI=y
CONFIG_CRYPTO_BLKCIPHER=y
CONFIG_CRYPTO_MANAGER=y
# CONFIG_CRYPTO_HMAC is not set
# CONFIG_CRYPTO_XCBC is not set
# CONFIG_CRYPTO_NULL is not set
# CONFIG_CRYPTO_MD4 is not set
# CONFIG_CRYPTO_MD5 is not set
# CONFIG_CRYPTO_SHA1 is not set
CONFIG_CRYPTO_SHA256=y
# CONFIG_CRYPTO_SHA512 is not set
# CONFIG_CRYPTO_WP512 is not set
# CONFIG_CRYPTO_TGR192 is not set
# CONFIG_CRYPTO_GF128MUL is not set
CONFIG_CRYPTO_ECB=y
CONFIG_CRYPTO_CBC=y
# CONFIG_CRYPTO_PCBC is not set
# CONFIG_CRYPTO_LRW is not set
# CONFIG_CRYPTO_XTS is not set
# CONFIG_CRYPTO_CRYPTD is not set
# CONFIG_CRYPTO_DES is not set
# CONFIG_CRYPTO_FCRYPT is not set
# CONFIG_CRYPTO_BLOWFISH is not set
# CONFIG_CRYPTO_TWOFISH is not set
# CONFIG_CRYPTO_TWOFISH_586 is not set
# CONFIG_CRYPTO_SERPENT is not set
CONFIG_CRYPTO_AES=y
# CONFIG_CRYPTO_AES_586 is not set
# CONFIG_CRYPTO_CAST5 is not set
# CONFIG_CRYPTO_CAST6 is not set
# CONFIG_CRYPTO_TEA is not set
CONFIG_CRYPTO_ARC4=y
# CONFIG_CRYPTO_KHAZAD is not set
# CONFIG_CRYPTO_ANUBIS is not set
# CONFIG_CRYPTO_SEED is not set
# CONFIG_CRYPTO_DEFLATE is not set
# CONFIG_CRYPTO_MICHAEL_MIC is not set
# CONFIG_CRYPTO_CRC32C is not set
# CONFIG_CRYPTO_CAMELLIA is not set
# CONFIG_CRYPTO_TEST is not set
# CONFIG_CRYPTO_AUTHENC is not set
# CONFIG_CRYPTO_HW is not set

#
# Library routines
#
CONFIG_BITREVERSE=y
# CONFIG_CRC_CCITT is not set
# CONFIG_CRC16 is not set
# CONFIG_CRC_ITU_T is not set
CONFIG_CRC32=y
# CONFIG_CRC7 is not set
# CONFIG_LIBCRC32C is not set
CONFIG_ZLIB_INFLATE=y
CONFIG_PLIST=y
CONFIG_HAS_IOMEM=y
CONFIG_HAS_IOPORT=y
CONFIG_HAS_DMA=y
-------------- next part --------------
processor	: 0
vendor_id	: GenuineIntel
cpu family	: 6
model		: 15
model name	: Intel(R) Core(TM)2 Duo CPU     T7300  @ 2.00GHz
stepping	: 10
cpu MHz		: 800.000
cache size	: 4096 KB
physical id	: 0
siblings	: 2
core id		: 0
cpu cores	: 2
fdiv_bug	: no
hlt_bug		: no
f00f_bug	: no
coma_bug	: no
fpu		: yes
fpu_exception	: yes
cpuid level	: 10
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe nx lm constant_tsc arch_perfmon pebs bts pni monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr lahf_lm ida
bogomips	: 3996.90
clflush size	: 64

processor	: 1
vendor_id	: GenuineIntel
cpu family	: 6
model		: 15
model name	: Intel(R) Core(TM)2 Duo CPU     T7300  @ 2.00GHz
stepping	: 10
cpu MHz		: 800.000
cache size	: 4096 KB
physical id	: 0
siblings	: 2
core id		: 1
cpu cores	: 2
fdiv_bug	: no
hlt_bug		: no
f00f_bug	: no
coma_bug	: no
fpu		: yes
fpu_exception	: yes
cpuid level	: 10
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe nx lm constant_tsc arch_perfmon pebs bts pni monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr lahf_lm ida
bogomips	: 3990.88
clflush size	: 64

-------------- next part --------------

Bus 001 Device 002: ID 0471:0332 Philips 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x0471 Philips
  idProduct          0x0332 
  bcdDevice            1.00
  iManufacturer           2 Philips CE
  iProduct                1 Philips SPC 1000NC Webcam
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength         1066
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              168mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0 
      iFunction               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0 
      iInterface              0 
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength          103
        dwClockFrequency       15.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               5
        iTerminal               0 
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {7033f028-1163-2e4a-ba2c-6890eb334016}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          3
        bControlSize            1
        bmControls( 0)       0x1f
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 5
        guidExtensionCode         {3fae1228-d7bc-114e-a357-6f1edef7d61d}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          4
        bControlSize            1
        bmControls( 0)       0x00
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0 
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000a0e
          Auto-Exposure Mode
          Auto-Exposure Priority
          Exposure Time (Absolute)
          Zoom (Absolute)
          PanTilt (Absolute)
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000177f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Gain
          Power Line Frequency
          White Balance Temperature, Auto
        iProcessing             0 
        bmVideoStandards     0x 0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      VideoStreaming Interface Descriptor:
        bLength                            15
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                        2
        wTotalLength                      692
        bEndPointAddress                  129
        bmInfo                              0
        bTerminalLink                       2
        bStillCaptureMethod                 2
        bTriggerSupport                     1
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    27
        bmaControls( 1)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                6
        guidFormat                            {59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                  3072000
        dwMaxBitRate                 18432000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                  1013760
        dwMaxBitRate                  6082560
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   768000
        dwMaxBitRate                  4608000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                   253440
        dwMaxBitRate                  1520640
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   192000
        dwMaxBitRate                  1152000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                 13107200
        dwMaxBitRate                 23592960
        dwMaxVideoFrameBufferSize     2621440
        dwDefaultFrameInterval        1111111
        bFrameIntervalType                  2
        dwFrameInterval( 0)           1111111
        dwFrameInterval( 1)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               6
        wWidth( 0)                       1280
        wHeight( 0)                       960
        wWidth( 1)                        640
        wHeight( 1)                       480
        wWidth( 2)                        352
        wHeight( 2)                       288
        wWidth( 3)                        320
        wHeight( 3)                       240
        wWidth( 4)                        176
        wHeight( 4)                       144
        wWidth( 5)                        160
        wHeight( 5)                       120
        bNumCompressionPatterns             6
      VideoStreaming Interface Descriptor:
        bLength                            11
        bDescriptorType                    36
        bDescriptorSubtype                  6 (FORMAT_MJPEG)
        bFormatIndex                        2
        bNumFrameDescriptors                6
        bFlags                              0
          Fixed-size samples: No
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   384000
        dwMaxBitRate                  2304000
        dwMaxVideoFrameBufferSize       76800
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   126720
        dwMaxBitRate                   760320
        dwMaxVideoFrameBufferSize       25344
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                    96000
        dwMaxBitRate                   576000
        dwMaxVideoFrameBufferSize       19200
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                    31680
        dwMaxBitRate                   190080
        dwMaxVideoFrameBufferSize        6336
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                    24000
        dwMaxBitRate                   144000
        dwMaxVideoFrameBufferSize        4800
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                  1638400
        dwMaxBitRate                  4915200
        dwMaxVideoFrameBufferSize      327680
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  3
        dwFrameInterval( 0)            666666
        dwFrameInterval( 1)           1000000
        dwFrameInterval( 2)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            31
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               6
        wWidth( 0)                       1280
        wHeight( 0)                       960
        wWidth( 1)                        640
        wHeight( 1)                       480
        wWidth( 2)                        352
        wHeight( 2)                       288
        wWidth( 3)                        320
        wHeight( 3)                       240
        wWidth( 4)                        176
        wHeight( 4)                       144
        wWidth( 5)                        160
        wHeight( 5)                       120
        bNumCompressionPatterns             6
        bCompression( 0)                    0
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b20  2x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1320  3x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 1024 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       0 
      bFunctionProtocol       0 
      iFunction               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0 
      iInterface              0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           41
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0 
        iTerminal               0 
      AudioControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 2
        bSourceID               1
        bControlSize            2
        bmaControls( 0)      0x01
        bmaControls( 0)      0x00
          Mute
        bmaControls( 1)      0x02
        bmaControls( 1)      0x00
          Volume
        iFeature                0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               2
        iTerminal               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                29
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            7 Discrete
        tSamFreq[ 0]         8000
        tSamFreq[ 1]        11025
        tSamFreq[ 2]        16000
        tSamFreq[ 3]        22050
        tSamFreq[ 4]        24000
        tSamFreq[ 5]        44100
        tSamFreq[ 6]        48000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x84  EP 4 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0190  1x 400 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0002
  (Bus Powered)
  Remote Wakeup Enabled
-------------- next part --------------
00:1a.0 USB Controller: Intel Corporation 82801H (ICH8 Family) USB UHCI Contoller #4 (rev 03) (prog-if 00 [UHCI])
	Subsystem: Lenovo ThinkPad T61
	Control: I/O+ Mem- BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx-
	Status: Cap- 66MHz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx-
	Latency: 0
	Interrupt: pin A routed to IRQ 16
	Region 4: I/O ports at 1860 [size=32]
	Kernel driver in use: uhci_hcd

00:1a.1 USB Controller: Intel Corporation 82801H (ICH8 Family) USB UHCI Controller #5 (rev 03) (prog-if 00 [UHCI])
	Subsystem: Lenovo ThinkPad T60
	Control: I/O+ Mem- BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx-
	Status: Cap- 66MHz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx-
	Latency: 0
	Interrupt: pin B routed to IRQ 17
	Region 4: I/O ports at 1880 [size=32]
	Kernel driver in use: uhci_hcd

00:1a.7 USB Controller: Intel Corporation 82801H (ICH8 Family) USB2 EHCI Controller #2 (rev 03) (prog-if 20 [EHCI])
	Subsystem: Lenovo ThinkPad T61
	Control: I/O- Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx-
	Status: Cap+ 66MHz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx-
	Latency: 0
	Interrupt: pin C routed to IRQ 18
	Region 0: Memory at f8426c00 (32-bit, non-prefetchable) [size=1K]
	Capabilities: [50] Power Management version 2
		Flags: PMEClk- DSI- D1- D2- AuxCurrent=375mA PME(D0+,D1-,D2-,D3hot+,D3cold+)
		Status: D0 PME-Enable- DSel=0 DScale=0 PME+
	Kernel driver in use: ehci_hcd

00:1d.0 USB Controller: Intel Corporation 82801H (ICH8 Family) USB UHCI Controller #1 (rev 03) (prog-if 00 [UHCI])
	Subsystem: Lenovo ThinkPad T61
	Control: I/O+ Mem- BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx-
	Status: Cap- 66MHz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx-
	Latency: 0
	Interrupt: pin A routed to IRQ 20
	Region 4: I/O ports at 18a0 [size=32]
	Kernel driver in use: uhci_hcd

00:1d.1 USB Controller: Intel Corporation 82801H (ICH8 Family) USB UHCI Controller #2 (rev 03) (prog-if 00 [UHCI])
	Subsystem: Lenovo ThinkPad T61
	Control: I/O+ Mem- BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx-
	Status: Cap- 66MHz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx-
	Latency: 0
	Interrupt: pin B routed to IRQ 22
	Region 4: I/O ports at 18c0 [size=32]
	Kernel driver in use: uhci_hcd

00:1d.2 USB Controller: Intel Corporation 82801H (ICH8 Family) USB UHCI Controller #3 (rev 03) (prog-if 00 [UHCI])
	Subsystem: Lenovo ThinkPad T61
	Control: I/O+ Mem- BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx-
	Status: Cap- 66MHz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx-
	Latency: 0
	Interrupt: pin C routed to IRQ 23
	Region 4: I/O ports at 18e0 [size=32]
	Kernel driver in use: uhci_hcd

00:1d.7 USB Controller: Intel Corporation 82801H (ICH8 Family) USB2 EHCI Controller #1 (rev 03) (prog-if 20 [EHCI])
	Subsystem: Lenovo ThinkPad T61
	Control: I/O- Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx-
	Status: Cap+ 66MHz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx-
	Latency: 0
	Interrupt: pin D routed to IRQ 21
	Region 0: Memory at f8427000 (32-bit, non-prefetchable) [size=1K]
	Capabilities: [50] Power Management version 2
		Flags: PMEClk- DSI- D1- D2- AuxCurrent=375mA PME(D0+,D1-,D2-,D3hot+,D3cold+)
		Status: D0 PME-Enable- DSel=0 DScale=0 PME-
	Capabilities: [58] Debug port: BAR=1 offset=00a0
	Kernel driver in use: ehci_hcd

From asmo.koskinen at arkki.info  Tue Mar 25 16:02:40 2008
From: asmo.koskinen at arkki.info (Asmo Koskinen)
Date: Tue, 25 Mar 2008 17:02:40 +0200
Subject: [Linux-uvc-devel] I just tested GUVCViewer
Message-ID: <47E91410.3050704@arkki.info>


GUVCViewer works just fine (video and audio) with Ubuntu 7.10 and 
Logitech Pro 9000.

Screenshot:

http://www.arkki.info/howto/LogitechPro9000/GUVCViewer_01.png

AVI-file (download it, it will not work over Net):

http://www.arkki.info/howto/LogitechPro9000/GUVCViewer.avi

asmok at edubuntu:~$ ls -al GUVCViewer.avi
-rw------- 1 asmok asmok 739376 2008-03-25 16:40 GUVCViewer.avi
asmok at edubuntu:~$

asmok at edubuntu:~$ file GUVCViewer.avi
GUVCViewer.avi: RIFF (little-endian) data, AVI, 320 x 240, video: Motion 
JPEG, audio: uncompressed PCM (mono, 16000 Hz)
asmok at edubuntu:~$

Read more about program:

http://forums.quickcamteam.net/showthread.php?tid=226

Best Regards Asmo Koskinen.


From laurent.pinchart at skynet.be  Tue Mar 25 21:43:19 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 25 Mar 2008 21:43:19 +0100
Subject: [Linux-uvc-devel] Unable to set auto exposure and white balance
	with svn revision 193
In-Reply-To: <200803242253.52988.trigger@space-based.de>
References: <20080321013755.GB5031@bluemoon>
	<200803242204.06143.trigger@space-based.de>
	<200803242253.52988.trigger@space-based.de>
Message-ID: <200803252143.19992.laurent.pinchart@skynet.be>

On Monday 24 March 2008, Armin Berres wrote:
> On Monday 24 March 2008 22:04:05 Armin Berres wrote:
> > better)... I think I once tried the camera with Windows and I could
> > adjust the red and blue temperature -- any idea how this is possible?
> > Maybe Philips implemented this part somewhere in their driver/user space
> > tool?
>
> So, I was a brave guy and started Windows to check this out.  Indeed one
> has the possibility to change the red and the blue balance independently.
> Actually I am very disappointed if Philips implemented this in a way which
> is not usable via UVC...

You can easily check the controls supported by your camera with lsusb. The 
SPC1300NC should support the following control (that is if Philips hasn't 
changed the device capabilities without changing the model name):

          Auto-Exposure Mode
          Auto-Exposure Priority
          Exposure Time (Absolute)
          Zoom (Absolute)
          PanTilt (Absolute)
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Gain
          Power Line Frequency
          White Balance Temperature, Auto

You can also use uvcdynctrl to see which controls have been detected by the 
driver:

$ uvcdynctrl -c -d /dev/video0 -v

The Linux UVC driver doesn't do much beside exposing controls to userspace. If 
the device doesn't have a white balance component control the driver won't 
expose one. You'll have to compute the appropriate white balance temperature 
value from the desired red and blue components.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Mar 25 21:45:39 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 25 Mar 2008 21:45:39 +0100
Subject: [Linux-uvc-devel] What about Chicony 04f2:b024 support ?
In-Reply-To: <47E82E36.2080609@tvcablenet.be>
References: <47E778D9.10701@tvcablenet.be>
	<200803241159.52534.laurent.pinchart@skynet.be>
	<47E82E36.2080609@tvcablenet.be>
Message-ID: <200803252145.39537.laurent.pinchart@skynet.be>

Hi Fran?ois,

On Monday 24 March 2008, Fran?ois Valenduc wrote:
> Laurent Pinchart a ?crit :
> > On Monday 24 March 2008, Fran?ois Valenduc wrote:
> >> Hello everybody,
> >> I have recently bought a packard bell computer with an integrated
> >> webcam. It's identified as a Chicony device (04f2:b024) by lsusb. In the
> >> list of supported devices, I have noticed that several chicony webcam
> >> are supported, but unfortunately for me, the Chicony 04f2:b024 is not.
> >> The output of lsusb -v is in the attachment. I tried to use it with the
> >> uvcvideo driver but I only get a black screen when I use camstream, even
> >> if it's recognized by the driver. Is there any hope to use this webcam
> >> under Linux ?
> >
> > camstream doesn't support v4l2. Could you please try one of the software
> > listed in http://www.quickcamteam.net/software/linux/v4l2-software/ ?
> >
>
> Thanks for the information. I have tried to build ucview but it doesn't
> work. I am running gentoo and it seems there is no ebuild for ucview. I
> have first compiled and installed successfully unicap but when I run
> configure for ucview, it fails with the following error:
> checking for GLIB... yes
> checking for DBUS... yes
> checking for UCVIEW... configure: error: Package requirements
> (libunicapgtk >= 0.2.2 gtk+-2.0 >= 2.8.0 gthread-2.0 >= 2.8.0 gconf-2.0
> libucil >= 0.2.2  libglade-2.0 ) were not met:
>
> No package 'libunicapgtk' found
> No package 'libucil' found
>
> Consider adjusting the PKG_CONFIG_PATH environment variable if you
> installed software in a non-standard prefix.
>
> Alternatively, you may set the environment variables UCVIEW_CFLAGS
> and UCVIEW_LIBS to avoid the need to call pkg-config.
> See the pkg-config man page for more details.
>
> zsh: exit 1     ./configure
>
> However, it seems that the headers for unicap and ucil are installed in
> /usr/local/include/unicap.
>
> Do you have any idea about this problem ?

Follow the advices. Either adjust the PKG_CONFIG_PATH environment variable so 
that the unicap pkgconfig file is correctly referenced, or set UVCIEW_CFLAGS 
and UCVIEW_LIBS manually.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Mar 25 21:54:58 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 25 Mar 2008 21:54:58 +0100
Subject: [Linux-uvc-devel] Please test this USB EHCI patch
Message-ID: <200803252154.58492.laurent.pinchart@skynet.be>

Hi everybody,

some people have run into EHCI-related issue where the video would freeze and 
the Linux UVC driver would print "uvcvideo: Failed to resubmit video URB 
(-45)" errors after a while.

Alan Stern was kind enough to write a quick patch to try to solve the issue. 
Could you please test it and report the results ? I'm particularly interested 
in hearing from people who ran into the -45 error frequently. Please retest 
your camera without the patch, make sure you can reproduce the problem 
accurately, and try to recompile your kernel with the patch applied.

Thanks in advance for your help.

Best regards,

Laurent Pinchart

----------  Forwarded Message  ----------

Subject: Re: ehci-hcd issue with webcam / uvcvideo driver
Date: Tuesday 25 March 2008
From: Alan Stern <stern at rowland.harvard.edu>
To: Malte Gell <malte.gell at gmx.de>, Laurent Pinchart 
<laurent.pinchart at skynet.be>

On Tue, 25 Mar 2008, Laurent Pinchart wrote:

> Regardless of the userspace application and the kind of USB device, I don't 
> think the EHCI driver should return -EL2NSYNC upon URB submission when the 
> URB_ISO_ASAP is set in the transfer_flags field.

You're right; it shouldn't.  Here's a patch that attempts to fix the 
bug.  Let me know how it behaves.

Alan Stern


Index: usb-2.6/drivers/usb/host/ehci-sched.c
===================================================================
--- usb-2.6.orig/drivers/usb/host/ehci-sched.c
+++ usb-2.6/drivers/usb/host/ehci-sched.c
@@ -1349,18 +1349,27 @@ iso_stream_schedule (
 	/* when's the last uframe this urb could start? */
 	max = now + mod;
 
-	/* typical case: reuse current schedule. stream is still active,
-	 * and no gaps from host falling behind (irq delays etc)
+	/* Typical case: reuse current schedule, stream is still active.
+	 * Hopefully there are no gaps from the host falling behind
+	 * (irq delays etc), but if there are we'll take the next
+	 * slot in the schedule, implicitly assuming URB_ISO_ASAP.
 	 */
 	if (likely (!list_empty (&stream->td_list))) {
 		start = stream->next_uframe;
 		if (start < now)
 			start += mod;
-		if (likely ((start + sched->span) < max))
-			goto ready;
-		/* else fell behind; someday, try to reschedule */
-		status = -EL2NSYNC;
-		goto fail;
+
+		/* Fell behind (by up to twice the slop amount)? */
+		if (start >= max - 2 * 8 * SCHEDULE_SLOP)
+			start += stream->interval * DIV_ROUND_UP(
+					max - start, stream->interval) - mod;
+
+		/* Tried to schedule too far into the future? */
+		if (unlikely((start + sched->span) >= max)) {
+			status = -EFBIG;
+			goto fail;
+		}
+		goto ready;
 	}
 
 	/* need to schedule; when's the next (u)frame we could start?

--


From rasasi78 at gmail.com  Tue Mar 25 21:46:48 2008
From: rasasi78 at gmail.com (=?UTF-8?B?UmHDumwgU8OhbmNoZXogU2lsZXM=?=)
Date: Tue, 25 Mar 2008 21:46:48 +0100
Subject: [Linux-uvc-devel] Black image on videoconferencing apps.
References: <fqmuds$e3c$1@ger.gmane.org> <fr9j8j$gfv$1@ger.gmane.org>
	<frritd$4ci$1@ger.gmane.org>
	<200803240104.14866.laurent.pinchart@skynet.be>
Message-ID: <fsbocs$86p$1@ger.gmane.org>

Laurent Pinchart wrote:

> Hi Ra?l,
> 
> sorry for the late reply, and thanks for the very detailled description of
> your problem.
> 
  No, that's ok. We are all quite busy, specially if you are doing some
important development like it is this driver.

>>   Now I'm more certain that this is a trouble in the light regulation
>> mechanism, but I don't know how to get more information from the driver.
>> I don't know even where the light regulation happens. Is it on driver, on
>> hardware or in the userspace application by chance (doubtfully this
>> last)?
> 
> The driver doesn't perform any image processing. What you call light
> regulation is mostly auto-exposure (and maybe to a lesser extent auto
> white balance). Your camera doesn't report any exposure-related control in
> its USB descriptors, so it's not clear if the camera doesn't do any
> exposure control or if it doesn't allow exposure parameters to be changed.
> I'd vote for the second option.

  I can't be sure about this as well, even more when I haven't tried with
another drivers (BillyOS). But I think it would be odd that having the
possibility of running into this trouble the camera doesn't provide this
controls.

> 
> Userspace applications can also implement all kind of image enhancement
> algorithms. That's up to the application, and there's no easy way to know
> what skype does due to its closed-source nature.

  Well, skype is one case more. As I mentioned the problem also raised with
kopete.

> 
>>   My most reliable method to reproduce up to know is being on a very soft
>> light environment, for example: night with a dim indirect light(12W low
>> consumption lamp). In this situation you will see the image, but not very
>> well defined using a regular videoconferencing resolution and frame rate.
>> Now cover the camera focus completely using your hand, the image will
>> become totally black and, if the light is not clear enough it will remain
>> in that state unless you reinitialise the video streaming or use a light
>> enough light so the brightness regulates automatically to a useful value.
> 
> That seems to be a bug either in the camera hardware/firmware or in the
> application. I'd try using the camera with luvcview. If you can reproduce
> the problem the hardware will be to blame. Otherwise skype will be at
> fault.

  Now that I know how to reproduce the problem and provided your information
I've tried with luvcview and well, I got to reproduce it as well. So this
could be a better starting or (maybe unhopefully) ending point.

  In summary turn on the video streaming where there's very little light, in
the end the camera stream will turn black.
> 
> Best regards,
> 
> Laurent Pinchart

  Thanks a lot for your comments,

-- 
     Ra?l S?nchez Siles
----->Proud Debian user<-----
Linux registered user #416098



From francois.valenduc at tvcablenet.be  Tue Mar 25 21:48:10 2008
From: francois.valenduc at tvcablenet.be (=?UTF-8?B?RnJhbsOnb2lzIFZhbGVuZHVj?=)
Date: Tue, 25 Mar 2008 21:48:10 +0100
Subject: [Linux-uvc-devel] What about Chicony 04f2:b024 support ?
In-Reply-To: <200803252145.39537.laurent.pinchart@skynet.be>
References: <47E778D9.10701@tvcablenet.be>
	<200803241159.52534.laurent.pinchart@skynet.be>
	<47E82E36.2080609@tvcablenet.be>
	<200803252145.39537.laurent.pinchart@skynet.be>
Message-ID: <47E9650A.504@tvcablenet.be>

Laurent Pinchart a ?crit :
> Hi Fran?ois,
>
> On Monday 24 March 2008, Fran?ois Valenduc wrote:
>   
>> Laurent Pinchart a ?crit :
>>     
>>> On Monday 24 March 2008, Fran?ois Valenduc wrote:
>>>       
>>>> Hello everybody,
>>>> I have recently bought a packard bell computer with an integrated
>>>> webcam. It's identified as a Chicony device (04f2:b024) by lsusb. In the
>>>> list of supported devices, I have noticed that several chicony webcam
>>>> are supported, but unfortunately for me, the Chicony 04f2:b024 is not.
>>>> The output of lsusb -v is in the attachment. I tried to use it with the
>>>> uvcvideo driver but I only get a black screen when I use camstream, even
>>>> if it's recognized by the driver. Is there any hope to use this webcam
>>>> under Linux ?
>>>>         
>>> camstream doesn't support v4l2. Could you please try one of the software
>>> listed in http://www.quickcamteam.net/software/linux/v4l2-software/ ?
>>>
>>>       
>> Thanks for the information. I have tried to build ucview but it doesn't
>> work. I am running gentoo and it seems there is no ebuild for ucview. I
>> have first compiled and installed successfully unicap but when I run
>> configure for ucview, it fails with the following error:
>> checking for GLIB... yes
>> checking for DBUS... yes
>> checking for UCVIEW... configure: error: Package requirements
>> (libunicapgtk >= 0.2.2 gtk+-2.0 >= 2.8.0 gthread-2.0 >= 2.8.0 gconf-2.0
>> libucil >= 0.2.2  libglade-2.0 ) were not met:
>>
>> No package 'libunicapgtk' found
>> No package 'libucil' found
>>
>> Consider adjusting the PKG_CONFIG_PATH environment variable if you
>> installed software in a non-standard prefix.
>>
>> Alternatively, you may set the environment variables UCVIEW_CFLAGS
>> and UCVIEW_LIBS to avoid the need to call pkg-config.
>> See the pkg-config man page for more details.
>>
>> zsh: exit 1     ./configure
>>
>> However, it seems that the headers for unicap and ucil are installed in
>> /usr/local/include/unicap.
>>
>> Do you have any idea about this problem ?
>>     
>
> Follow the advices. Either adjust the PKG_CONFIG_PATH environment variable so 
> that the unicap pkgconfig file is correctly referenced, or set UVCIEW_CFLAGS 
> and UCVIEW_LIBS manually.
>
> Best regards,
>
> Laurent Pinchart
>
>
>   
I have already tried setting th UCVIEW_LIBS variable but the way to do 
it is not very well documented in my opinion. I set these variable to 
/usr/local/include/, /usr/local/include/unicap or /usr/local and it 
always fails in the same way. Can you explain how I need to set these 2 
variables ?

Thanks and best regards,
Fran?ois Valenduc


From laurent.pinchart at skynet.be  Tue Mar 25 21:57:26 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 25 Mar 2008 21:57:26 +0100
Subject: [Linux-uvc-devel] What about Chicony 04f2:b024 support ?
In-Reply-To: <47E9650A.504@tvcablenet.be>
References: <47E778D9.10701@tvcablenet.be>
	<200803252145.39537.laurent.pinchart@skynet.be>
	<47E9650A.504@tvcablenet.be>
Message-ID: <200803252157.26936.laurent.pinchart@skynet.be>

On Tuesday 25 March 2008, Fran?ois Valenduc wrote:
> Laurent Pinchart a ?crit :
> > Hi Fran?ois,
> >
> > On Monday 24 March 2008, Fran?ois Valenduc wrote:
> >> Laurent Pinchart a ?crit :
> >>> On Monday 24 March 2008, Fran?ois Valenduc wrote:
> >>>> Hello everybody,
> >>>> I have recently bought a packard bell computer with an integrated
> >>>> webcam. It's identified as a Chicony device (04f2:b024) by lsusb. In
> >>>> the list of supported devices, I have noticed that several chicony
> >>>> webcam are supported, but unfortunately for me, the Chicony 04f2:b024
> >>>> is not. The output of lsusb -v is in the attachment. I tried to use it
> >>>> with the uvcvideo driver but I only get a black screen when I use
> >>>> camstream, even if it's recognized by the driver. Is there any hope to
> >>>> use this webcam under Linux ?
> >>>
> >>> camstream doesn't support v4l2. Could you please try one of the
> >>> software listed in
> >>> http://www.quickcamteam.net/software/linux/v4l2-software/ ?
> >>
> >> Thanks for the information. I have tried to build ucview but it doesn't
> >> work. I am running gentoo and it seems there is no ebuild for ucview. I
> >> have first compiled and installed successfully unicap but when I run
> >> configure for ucview, it fails with the following error:
> >> checking for GLIB... yes
> >> checking for DBUS... yes
> >> checking for UCVIEW... configure: error: Package requirements
> >> (libunicapgtk >= 0.2.2 gtk+-2.0 >= 2.8.0 gthread-2.0 >= 2.8.0 gconf-2.0
> >> libucil >= 0.2.2  libglade-2.0 ) were not met:
> >>
> >> No package 'libunicapgtk' found
> >> No package 'libucil' found
> >>
> >> Consider adjusting the PKG_CONFIG_PATH environment variable if you
> >> installed software in a non-standard prefix.
> >>
> >> Alternatively, you may set the environment variables UCVIEW_CFLAGS
> >> and UCVIEW_LIBS to avoid the need to call pkg-config.
> >> See the pkg-config man page for more details.
> >>
> >> zsh: exit 1     ./configure
> >>
> >> However, it seems that the headers for unicap and ucil are installed in
> >> /usr/local/include/unicap.
> >>
> >> Do you have any idea about this problem ?
> >
> > Follow the advices. Either adjust the PKG_CONFIG_PATH environment
> > variable so that the unicap pkgconfig file is correctly referenced, or
> > set UVCIEW_CFLAGS and UCVIEW_LIBS manually.
> >
> > Best regards,
> >
> > Laurent Pinchart
>
> I have already tried setting th UCVIEW_LIBS variable but the way to do
> it is not very well documented in my opinion. I set these variable to
> /usr/local/include/, /usr/local/include/unicap or /usr/local and it
> always fails in the same way. Can you explain how I need to set these 2
> variables ?

Try to set PKG_CONFIG_PATH to /usr/local/lib/pkgconfig:$PKG_CONFIG_PATH

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Mar 25 22:24:39 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 25 Mar 2008 22:24:39 +0100
Subject: [Linux-uvc-devel] Black image on videoconferencing apps.
In-Reply-To: <fsbocs$86p$1@ger.gmane.org>
References: <fqmuds$e3c$1@ger.gmane.org>
	<200803240104.14866.laurent.pinchart@skynet.be>
	<fsbocs$86p$1@ger.gmane.org>
Message-ID: <200803252224.39945.laurent.pinchart@skynet.be>

Hi Ra?l,

On Tuesday 25 March 2008, Ra?l S?nchez Siles wrote:
> Laurent Pinchart wrote:
> > Hi Ra?l,
> >
> > sorry for the late reply, and thanks for the very detailled description
> > of your problem.
>
>   No, that's ok. We are all quite busy, specially if you are doing some
> important development like it is this driver.
>
> >>   Now I'm more certain that this is a trouble in the light regulation
> >> mechanism, but I don't know how to get more information from the driver.
> >> I don't know even where the light regulation happens. Is it on driver,
> >> on hardware or in the userspace application by chance (doubtfully this
> >> last)?
> >
> > The driver doesn't perform any image processing. What you call light
> > regulation is mostly auto-exposure (and maybe to a lesser extent auto
> > white balance). Your camera doesn't report any exposure-related control
> > in its USB descriptors, so it's not clear if the camera doesn't do any
> > exposure control or if it doesn't allow exposure parameters to be
> > changed. I'd vote for the second option.
>
>   I can't be sure about this as well, even more when I haven't tried with
> another drivers (BillyOS). But I think it would be odd that having the
> possibility of running into this trouble the camera doesn't provide this
> controls.
>
> > Userspace applications can also implement all kind of image enhancement
> > algorithms. That's up to the application, and there's no easy way to know
> > what skype does due to its closed-source nature.
>
>   Well, skype is one case more. As I mentioned the problem also raised with
> kopete.
>
> >>   My most reliable method to reproduce up to know is being on a very
> >> soft light environment, for example: night with a dim indirect light(12W
> >> low consumption lamp). In this situation you will see the image, but not
> >> very well defined using a regular videoconferencing resolution and frame
> >> rate. Now cover the camera focus completely using your hand, the image
> >> will become totally black and, if the light is not clear enough it will
> >> remain in that state unless you reinitialise the video streaming or use
> >> a light enough light so the brightness regulates automatically to a
> >> useful value.
> >
> > That seems to be a bug either in the camera hardware/firmware or in the
> > application. I'd try using the camera with luvcview. If you can reproduce
> > the problem the hardware will be to blame. Otherwise skype will be at
> > fault.
>
>   Now that I know how to reproduce the problem and provided your
> information I've tried with luvcview and well, I got to reproduce it as
> well. So this could be a better starting or (maybe unhopefully) ending
> point.

If Skype, Kopete and luvcview are all affected I'm afraid the problem is at 
the camera level.

>   In summary turn on the video streaming where there's very little light,
> in the end the camera stream will turn black.

If your camera exposed exposure-related controls I'd advice you to play with 
them, but as this isn't the case I'm afraid there's not much you can do 
beside restarting the video stream. Sorry. Buggy devices seem to be way too 
common.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Mar 25 22:58:44 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 25 Mar 2008 22:58:44 +0100
Subject: [Linux-uvc-devel]
	=?utf-8?q?Driver_improvement_suggestion=3A_Pref?=
	=?utf-8?q?er_device_node=2C_and_more=09consistant_messaging?=
In-Reply-To: <20080323230120.GC8394@sunshine.barsnick.net>
References: <20080323230120.GC8394@sunshine.barsnick.net>
Message-ID: <200803252258.44612.laurent.pinchart@skynet.be>

Hi Moritz,

On Monday 24 March 2008, Moritz Barsnick wrote:
> Hi Laurent, UVCers,
>
> I have a small suggestion for the linux-uvc driver. Currently, the
> driver lets V4L2 automatically select the device node (/dev/videoX).
> But we all know that order of loading modules, init times, et.al. may
> influence the order, therefore I thought it might by practical to
> introduce a module option to request a specific device node.
>
> Caveat: My implementation is by all means incomplete. It will only work
> for one device (and actually fail for any subsequent ones AFAICT,
> unless you reset the parameter in /sys/), and is totally unflexible. On
> the other hand. it doesn't intrude if you don't provide a parameter.
>
> I forsee flexible functionality as you can find e.g. in the pwc webcam
> driver[*]. Their implementation also fails if the requested node is not
> available, but it provides a type and serial number dependant
> selection.

This should be done using udev rules. You can then assign a device node to a 
camera based on various parameters such as the device serial number, its 
VID/PID or the module name. This is much more flexible than forcing a 
specific minor with a module parameter.

> Furthermore, while quick-hacking this code, I noticed that linux-uvc
> a) doesn't report its version -> use macro MODULE_VERSION()
> b) doesn't provide parameter descriptions (which can be queried with
>    "modinfo uvcvideo") -> use macro MODULE_PARM_DESC()

I've committed a fix for a) and b). Thanks for reporting them.

> c) doesn't report which device node it actually assigns to the device,
>    which is very useful in dmesg (and which other drivers tend to do).

The device minor can be useful, but the message in your patch can be 
misleading as well. The video0 device node doesn't have to be 
called /dev/video0. Some distributions name the device node /dev/v4l/video0. 
The allocated device minor can easily be found using sysfs and I'm a bit 
scared an incorrect /dev/videoX reference in the kernel log messages might 
confuse users.

> So please consider the attached patch two seperate suggestions:
> - general messaging and API documentation improvements
> - a stub for requesting a particular device node.
>
> Please let me know if you consider it useful, or have something better
> to suggest.

As stated above, I think device node naming should be handled by udev.

> Thanks for listening, and thanks for the ever so valuable driver!
>
> Patch is against SVN r195.
> I've tested with Logitech QuickCam Fusion on two machines.
>
> Kind regards,
> Moritz
>
> [*] called device hints in pwc-if.c

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Mar 25 23:13:17 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 25 Mar 2008 23:13:17 +0100
Subject: [Linux-uvc-devel]
	=?utf-8?q?Driver_improvement_suggestion=3A_Use_?=
	=?utf-8?q?quirks_parameter_to_mask_unsafe=09code_=2C_reset_patch?=
In-Reply-To: <20080324001338.GD8394@sunshine.barsnick.net>
References: <20080324001338.GD8394@sunshine.barsnick.net>
Message-ID: <200803252313.17310.laurent.pinchart@skynet.be>

Hi Moritz,

On Monday 24 March 2008, Moritz Barsnick wrote:
> Hi Laurent, UVCers,
>
> the quirks parameter was recently introduced to the linux-uvc module,
> and is very practical to knowingly force certain behavior.
>
> While I was and am fighting with the ?%&#! behavior of the SPCA525 ASIC
> in my Logitech QuickCam Fusion 046d:08c1, I luckily came across the
> "reset" patches, kindly linked from the QC Team site[*]. And the
> patches seem to have helped me, but I'll follow up with more info once
> I'm sure whether it works.
>
> I understand why you don't want to make the hacked fixes default in the
> code (it has been stressed many times on the list), but while Logitech
> try to come up with a solution, perhaps a quirks based integration
> would allow many users not to have to patch the driver. The code would
> only become active if explicitly selected with a module parameter. I
> believe that this is what the quirks parameter is perfectly made for,
> and I consider it non-intrusive for the unknowing user.
>
> I have ported the two relevant patches:
> a) the reset patch as found in
>    http://lists.berlios.de/pipermail/linux-uvc-devel/2007-March/001476.html
>
> b) the reset + resubmit urb patch, probably by Evgeny, found in
>   
> https://lists.berlios.de/pipermail/linux-uvc-devel/2008-January/002830.html
> which adds a second mechanism to the first patch.

Resubmitting URBs should hopefully not be necessary anymore (and it didn't 
work most of the time anyway). Alan Stern wrote a patch for the EHCI 
scheduler that I posted to the list a bit earlier. Please test it if you run 
into -EN2LSYNC (-45) issues.

> Instead of making the code changes "absolute"/"final" or #ifdef'd, I
> made the sections depend on a corresponding quirks mask setting. (Note:
> these are new quirks only defined by module parameter, not the kind
> defined by default by the device model.)
>
> The patch is attached. It introduces two new quirks UVC_QUIRK_RESET
> (0x20, I would write it (1<<5)), and UVC_QUIRK_RESUBMIT_URB (0x40,
> better (1<<6)). The functionality is separated.
>
> The parameter quirks=32 has consistantly helped the initialization of
> my Logitech QuickCam (incl. safe behavior through plug/unplug,
> load/unload, start/stop of apps) on both my machines, and quirks=96 has
> helped on my laptop through consistent failures (to be confirmed). I'm
> not sure the reset urb section is needed on my desktop, I think that
> machine has always behaved fine once the UVC device could init itself.
> But activating the reset urb code via the quirk has not hurt either, as
> far as I can tell. Sorry, I don't want to sound like I want this code
> as default behavior - the opposite is the case! :-)
>
> Your opinion is welcomed.
>
> Patch is against SVN r195.
> I've tested with Logitech QuickCam Fusion on two machines, both USB 1.1
> and USB 2.0.
>
> Kind regards,
> and many thanks, especially to Laurent, Evgeny, and Michel,
> Moritz
>
> [*]
> http://www.quickcamteam.net/documentation/faq/logitech-webcam-linux-usb-inc
>ompatibilities

Harold Wheaton posted a patch similar to yours to the mailing list on March 
the 19th. Search the archives for a thread named "UVC patch update and 
results".

Could you please have a look at Harold's patch and at his latest message in 
the thread ? He proposed a simpler approach that seems to work for him. Could 
you test it on your systems ?

Best regards,

Laurent Pinchart


From malte.gell at gmx.de  Tue Mar 25 23:43:06 2008
From: malte.gell at gmx.de (Malte Gell)
Date: Tue, 25 Mar 2008 23:43:06 +0100
Subject: [Linux-uvc-devel] Please test this USB EHCI patch
In-Reply-To: <200803252154.58492.laurent.pinchart@skynet.be>
References: <200803252154.58492.laurent.pinchart@skynet.be>
Message-ID: <200803252343.07905.malte.gell@gmx.de>

On Dienstag, 25. M?rz 2008, Laurent Pinchart wrote:

> some people have run into EHCI-related issue where the video would
> freeze and the Linux UVC driver would print "uvcvideo: Failed to
> resubmit video URB (-45)" errors after a while.

Thank you so much and thanks to Alan Stern. I'll applied the patch and 
will test it for the next 24 hours thoroughly. This bug with the 
freezing cam often appears just after many minutes of using the cam, 
so, to be sure the bug is fixed I'll best test it for hours. I'll let 
you know tomorrow.

Regards
Malte


From barsnick at gmx.net  Wed Mar 26 00:29:00 2008
From: barsnick at gmx.net (Moritz Barsnick)
Date: Wed, 26 Mar 2008 00:29:00 +0100
Subject: [Linux-uvc-devel] Driver improvement suggestion: Prefer
	device	node, and more?consistant messaging
In-Reply-To: <200803252258.44612.laurent.pinchart@skynet.be>
References: <20080323230120.GC8394@sunshine.barsnick.net>
	<200803252258.44612.laurent.pinchart@skynet.be>
Message-ID: <20080325232900.GA7405@sunshine.barsnick.net>

Hi Laurent,

On Tue, Mar 25, 2008 at 22:58:44 +0100, Laurent Pinchart wrote:

> > I have a small suggestion for the linux-uvc driver. Currently, the
> > driver lets V4L2 automatically select the device node (/dev/videoX).
> > But we all know that order of loading modules, init times, et.al. may
> > influence the order, therefore I thought it might by practical to
> > introduce a module option to request a specific device node.
[...]
> This should be done using udev rules. You can then assign a device node to a 
> camera based on various parameters such as the device serial number, its 
> VID/PID or the module name. This is much more flexible than forcing a 
> specific minor with a module parameter.

I wasn't aware that udev could do that. I'll dive into its docs (have
to search first ;->). This totally obsoletes my method (albeit only for
udev based systems, but are any systems without udev supported
nowadays?).

> The device minor can be useful, but the message in your patch can be 
> misleading as well. The video0 device node doesn't have to be 
> called /dev/video0. Some distributions name the device node /dev/v4l/video0. 
> The allocated device minor can easily be found using sysfs and I'm a bit 
> scared an incorrect /dev/videoX reference in the kernel log messages might 
> confuse users.

Again, I wasn't aware. Correct, I only see minor. So, first
observation, other kernel modules are reporting incorrectly. ;)
Am I right in assuming that only the higher layers (or even udev)
actually know the proper name of the assigned device node? To me, it's
still a reporting problem. "Oops, where has my TV card landed?
/dev/v4l/video1? Ah, there it is!" (Unfortunately, very few apps
actually detect available V4L devices.)

So currently, I think at least the minor number should be reported. But
I'll have another think about it.

Merci beaucoup,
Moritz


From barsnick at gmx.net  Wed Mar 26 00:29:25 2008
From: barsnick at gmx.net (Moritz Barsnick)
Date: Wed, 26 Mar 2008 00:29:25 +0100
Subject: [Linux-uvc-devel] Driver improvement suggestion: Use
	quirks	parameter to mask unsafe code, reset patch
In-Reply-To: <200803252313.17310.laurent.pinchart@skynet.be>
References: <20080324001338.GD8394@sunshine.barsnick.net>
	<200803252313.17310.laurent.pinchart@skynet.be>
Message-ID: <20080325232925.GB7405@sunshine.barsnick.net>

Bon soir Laurent,

On Tue, Mar 25, 2008 at 23:13:17 +0100, Laurent Pinchart wrote:
> Harold Wheaton posted a patch similar to yours to the mailing list on March 
> the 19th. Search the archives for a thread named "UVC patch update and 
> results".

I've been subscribed to this list since Feb 27, and can find no such
thread. Neither can Google find any common reference of that name with
UVC at all. (I even checked other spellings.)

Are you sure it wasn't a private discussion?

Feel free to forward me Harold's patch privately. :)

Regards,
Moritz


From bnc at astronomicalresearchaustralia.org  Wed Mar 26 12:24:50 2008
From: bnc at astronomicalresearchaustralia.org (Brian)
Date: Wed, 26 Mar 2008 21:24:50 +1000
Subject: [Linux-uvc-devel] I just tested GUVCViewer
In-Reply-To: <47E91410.3050704@arkki.info>
References: <47E91410.3050704@arkki.info>
Message-ID: <47EA3282.1070301@astronomicalresearchaustralia.org>

Asmo,
Thanks for the heads up.
Just tested this on my quickcam fusion on a SUSE 10.3 machine and it
works fine.
The only install problem I had was I had to upgrade to the latest portaudio.

So at long last we have an application that does video and audio.
Creates a .avi file and the synchronisation appears to be good.

Brian

Asmo Koskinen wrote:
> GUVCViewer works just fine (video and audio) with Ubuntu 7.10 and 
> Logitech Pro 9000.
> 
> Screenshot:
> 
> http://www.arkki.info/howto/LogitechPro9000/GUVCViewer_01.png
> 
> AVI-file (download it, it will not work over Net):
> 
> http://www.arkki.info/howto/LogitechPro9000/GUVCViewer.avi
> 
> asmok at edubuntu:~$ ls -al GUVCViewer.avi
> -rw------- 1 asmok asmok 739376 2008-03-25 16:40 GUVCViewer.avi
> asmok at edubuntu:~$
> 
> asmok at edubuntu:~$ file GUVCViewer.avi
> GUVCViewer.avi: RIFF (little-endian) data, AVI, 320 x 240, video: Motion 
> JPEG, audio: uncompressed PCM (mono, 16000 Hz)
> asmok at edubuntu:~$
> 
> Read more about program:
> 
> http://forums.quickcamteam.net/showthread.php?tid=226
> 
> Best Regards Asmo Koskinen.
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel


From francois.valenduc at tvcablenet.be  Wed Mar 26 20:25:29 2008
From: francois.valenduc at tvcablenet.be (=?UTF-8?B?RnJhbsOnb2lzIFZhbGVuZHVj?=)
Date: Wed, 26 Mar 2008 20:25:29 +0100
Subject: [Linux-uvc-devel] What about Chicony 04f2:b024 support ?
In-Reply-To: <200803252157.26936.laurent.pinchart@skynet.be>
References: <47E778D9.10701@tvcablenet.be>
	<200803252145.39537.laurent.pinchart@skynet.be>
	<47E9650A.504@tvcablenet.be>
	<200803252157.26936.laurent.pinchart@skynet.be>
Message-ID: <47EAA329.2050805@tvcablenet.be>

Laurent Pinchart a ?crit :
> On Tuesday 25 March 2008, Fran?ois Valenduc wrote:
>   
>> Laurent Pinchart a ?crit :
>>     
>>> Hi Fran?ois,
>>>
>>> On Monday 24 March 2008, Fran?ois Valenduc wrote:
>>>       
>>>> Laurent Pinchart a ?crit :
>>>>         
>>>>> On Monday 24 March 2008, Fran?ois Valenduc wrote:
>>>>>           
>>>>>> Hello everybody,
>>>>>> I have recently bought a packard bell computer with an integrated
>>>>>> webcam. It's identified as a Chicony device (04f2:b024) by lsusb. In
>>>>>> the list of supported devices, I have noticed that several chicony
>>>>>> webcam are supported, but unfortunately for me, the Chicony 04f2:b024
>>>>>> is not. The output of lsusb -v is in the attachment. I tried to use it
>>>>>> with the uvcvideo driver but I only get a black screen when I use
>>>>>> camstream, even if it's recognized by the driver. Is there any hope to
>>>>>> use this webcam under Linux ?
>>>>>>             
>>>>> camstream doesn't support v4l2. Could you please try one of the
>>>>> software listed in
>>>>> http://www.quickcamteam.net/software/linux/v4l2-software/ ?
>>>>>           
>>>> Thanks for the information. I have tried to build ucview but it doesn't
>>>> work. I am running gentoo and it seems there is no ebuild for ucview. I
>>>> have first compiled and installed successfully unicap but when I run
>>>> configure for ucview, it fails with the following error:
>>>> checking for GLIB... yes
>>>> checking for DBUS... yes
>>>> checking for UCVIEW... configure: error: Package requirements
>>>> (libunicapgtk >= 0.2.2 gtk+-2.0 >= 2.8.0 gthread-2.0 >= 2.8.0 gconf-2.0
>>>> libucil >= 0.2.2  libglade-2.0 ) were not met:
>>>>
>>>> No package 'libunicapgtk' found
>>>> No package 'libucil' found
>>>>
>>>> Consider adjusting the PKG_CONFIG_PATH environment variable if you
>>>> installed software in a non-standard prefix.
>>>>
>>>> Alternatively, you may set the environment variables UCVIEW_CFLAGS
>>>> and UCVIEW_LIBS to avoid the need to call pkg-config.
>>>> See the pkg-config man page for more details.
>>>>
>>>> zsh: exit 1     ./configure
>>>>
>>>> However, it seems that the headers for unicap and ucil are installed in
>>>> /usr/local/include/unicap.
>>>>
>>>> Do you have any idea about this problem ?
>>>>         
>>> Follow the advices. Either adjust the PKG_CONFIG_PATH environment
>>> variable so that the unicap pkgconfig file is correctly referenced, or
>>> set UVCIEW_CFLAGS and UCVIEW_LIBS manually.
>>>
>>> Best regards,
>>>
>>> Laurent Pinchart
>>>       
>> I have already tried setting th UCVIEW_LIBS variable but the way to do
>> it is not very well documented in my opinion. I set these variable to
>> /usr/local/include/, /usr/local/include/unicap or /usr/local and it
>> always fails in the same way. Can you explain how I need to set these 2
>> variables ?
>>     
>
> Try to set PKG_CONFIG_PATH to /usr/local/lib/pkgconfig:$PKG_CONFIG_PATH
>
> Best regards,
>
> Laurent Pinchart
>
>
>   
I finally managed to compile ucview and my webcam works ! If I run 
PKG_CONFIG_PATH=/usr/local/lib/pkgconfig:$PKG_CONFIG_PATH ./configure, 
it doesn't work. I must use export to set the PKG_CONFIG_PATH variable 
and run "configure" after that. I find that a bit strange. In fact, it 
also works with Kopete, so it was not really needed to use ucview.

Thanks for your help,
Fran?ois Valenduc


From trigger at space-based.de  Thu Mar 27 01:05:29 2008
From: trigger at space-based.de (Armin Berres)
Date: Thu, 27 Mar 2008 01:05:29 +0100
Subject: [Linux-uvc-devel] Unable to set auto exposure and white balance
	with svn revision 193
In-Reply-To: <200803252143.19992.laurent.pinchart@skynet.be>
Message-ID: <11412326.pNhAdLGFVn@space-based.de>

Hi Laurent!

At Tuesday 25 March 2008 21:43, you wrote:
> On Monday 24 March 2008, Armin Berres wrote:
> > So, I was a brave guy and started Windows to check this out.  Indeed one
> > has the possibility to change the red and the blue balance independently.
> > Actually I am very disappointed if Philips implemented this in a way which
> > is not usable via UVC...
> 
> You can easily check the controls supported by your camera with lsusb. The 
> SPC1300NC should support the following control (that is if Philips hasn't 
> changed the device capabilities without changing the model name):

>           White Balance Temperature

You are completely right, the SPC1300NC just supports to change the temperature. With a sensible light source this doesn't look to bad, so I can live with this behavior.

WRT the EHCI patch: I will test it ASAP, but as I have the problem only on a board with a Geode LX and not on my notebook I have to see, when I find some time in university.

Thank you so much for your help!

Regards,
Armin

From risturiz at gusl.org.ve  Fri Mar 28 05:48:55 2008
From: risturiz at gusl.org.ve (Rafael Isturiz)
Date: Fri, 28 Mar 2008 00:18:55 -0430
Subject: [Linux-uvc-devel] Supported webcam
Message-ID: <47EC78B7.9080809@gusl.org.ve>

Hi,

     I have a laptop (VIT D2010 / www.vit.com.ve)... The webcam is 
supported :) , thx for the great job!... Actually i'm using the SVN 
r195... "lsusb -v -d" in .txt (the list support attach?)

P.D. usbutils Version: 0.73-7 (Debian lenny)
P.D. The video is little slow

Bye.

-- 
a.k.a. pelox (Debian Powered) | JID:risturiz at gusl.org.ve
Barquisimeto [VE] | LinuxUser [238188]
http://pelox.gusl.org.ve

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: vitwebcam.txt
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080328/01c3e53d/attachment.txt>

From expose at luftgetrock.net  Fri Mar 28 18:32:40 2008
From: expose at luftgetrock.net (expose at luftgetrock.net)
Date: Fri, 28 Mar 2008 18:32:40 +0100
Subject: [Linux-uvc-devel] PROBLEM: Briefly suspending Philips SPC1000NC
	on recognition needed.
In-Reply-To: <200803232231.23519.expose@luftgetrock.net>
References: <200803232231.23519.expose@luftgetrock.net>
Message-ID: <200803281832.40476.expose@luftgetrock.net>

P.S.: The same problem occurs with Windows XP and official Philips drivers. 
The difference is: Suspending and resuming doesn't make either the LED or 
distortions stay off.

Daniel

> Hello Everybody,
>
> [1.] One line summary of the problem:
> Briefly suspending Philips SPC1000NC on recognition needed.
>
> [2.] Full description of the problem/report:
> The webcam's integrated microphone captures one small sound distortion per
> video frame captured.
> The distortion itself is depending on the video settings.
> No video capture --> No distortion.
>
> [3.] Keywords (i.e., modules, networking, kernel):
> uvcvideo, snd_usb_audio, likewise any kernel
>
> [4.] Kernel information
> a) 2.6.24.3, tp_smapi 0.36, uvcvideo rev195
> b) 2.6.25-rc6, uvcvideo rev195
>
> [4.1.] Kernel version (from /proc/version):
> Linux version 2.6.24.3 (foo at bar) (gcc version 4.2.3 (Debian 4.2.3-2)) #19
> SMP Sat Mar 22 19:49:35 CET 2008
>
> [7.] A small shell script or example program which triggers the
>      problem (if possible)
> arecord and luvcview, simultaniously.
>
> [8.] Environment
> Debian Lenny
>
> [8.1.] Software (add the output of the ver_linux script here)
> Gnu C                  4.2.3
> Gnu make               3.81
> binutils               2.18.0.20080103
> util-linux             2.13.1
> mount                  2.13.1
> module-init-tools      3.3-pre11
> e2fsprogs              1.40.6
> pcmciautils            014
> Linux C Library        2.7
> Dynamic linker (ldd)   2.7
> Procps                 3.2.7
> Net-tools              1.60
> Console-tools          0.2.3
> Sh-utils               5.97
> udev                   114
> wireless-tools         29
>
> [8.3.] Module information (from /proc/modules):
> snd_usb_audio 74208 0 - Live 0xf8ba9000
> snd_usb_lib 14720 1 snd_usb_audio, Live 0xf8afa000
> snd_rawmidi 16896 1 snd_usb_lib, Live 0xf8af4000
> snd_hwdep 6404 1 snd_usb_audio, Live 0xf8aea000
> uvcvideo 51848 0 - Live 0xf8b9b000
> iwl4965 100968 0 - Live 0xf8b81000
>
> [8.7.] USB device information:
> "lsusb -v -d 0471:0332" attached as lsusb_spc1000nc
>
> [9.] Workaround:
> Suspend the device via sysfs before usage. Afterwards, the "Recording
> now!"-LED will stay off, and the distortions will be gone.
> Alternatively, the whole computer may be suspended to ram.
> It does not matter wether drivers were loaded or wether the device was used
> before suspending.
>
> [10.] Why not a driver problem:
> Suspending makes the LED and distortions stay off even when the drivers are
> loaded only afterwards. Thus, something done during the generic suspend
> causes this effect, if not even the very suspending itself.
> Adding the workaround in either alsa or uvc driver seems a bad idea because
> suspending the device while one of the drivers is actively capturing
> already might cause unexpected crashes of userspace applications (i.e.,
> adding video to an already running phone call).
>
> [11.] Suggestion:
> Adding an option to the kernel, off by default.
> If enabled, it checks the vid and pid of each device upon recognition,
> suspending the matching one briefly.
> It may be that a full suspend is not needed, but only some specific
> actions.
>
>
> Bye,
>
> Daniel Herzog
-------------- next part --------------

Bus 001 Device 002: ID 0471:0332 Philips 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x0471 Philips
  idProduct          0x0332 
  bcdDevice            1.00
  iManufacturer           2 Philips CE
  iProduct                1 Philips SPC 1000NC Webcam
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength         1066
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              168mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0 
      iFunction               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0 
      iInterface              0 
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength          103
        dwClockFrequency       15.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               5
        iTerminal               0 
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {7033f028-1163-2e4a-ba2c-6890eb334016}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          3
        bControlSize            1
        bmControls( 0)       0x1f
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 5
        guidExtensionCode         {3fae1228-d7bc-114e-a357-6f1edef7d61d}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          4
        bControlSize            1
        bmControls( 0)       0x00
        iExtension              0 
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0 
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000a0e
          Auto-Exposure Mode
          Auto-Exposure Priority
          Exposure Time (Absolute)
          Zoom (Absolute)
          PanTilt (Absolute)
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000177f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Gain
          Power Line Frequency
          White Balance Temperature, Auto
        iProcessing             0 
        bmVideoStandards     0x 0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      VideoStreaming Interface Descriptor:
        bLength                            15
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                        2
        wTotalLength                      692
        bEndPointAddress                  129
        bmInfo                              0
        bTerminalLink                       2
        bStillCaptureMethod                 2
        bTriggerSupport                     1
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    27
        bmaControls( 1)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                6
        guidFormat                            {59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                  3072000
        dwMaxBitRate                 18432000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                  1013760
        dwMaxBitRate                  6082560
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   768000
        dwMaxBitRate                  4608000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                   253440
        dwMaxBitRate                  1520640
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   192000
        dwMaxBitRate                  1152000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                 13107200
        dwMaxBitRate                 23592960
        dwMaxVideoFrameBufferSize     2621440
        dwDefaultFrameInterval        1111111
        bFrameIntervalType                  2
        dwFrameInterval( 0)           1111111
        dwFrameInterval( 1)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               6
        wWidth( 0)                       1280
        wHeight( 0)                       960
        wWidth( 1)                        640
        wHeight( 1)                       480
        wWidth( 2)                        352
        wHeight( 2)                       288
        wWidth( 3)                        320
        wHeight( 3)                       240
        wWidth( 4)                        176
        wHeight( 4)                       144
        wWidth( 5)                        160
        wHeight( 5)                       120
        bNumCompressionPatterns             6
      VideoStreaming Interface Descriptor:
        bLength                            11
        bDescriptorType                    36
        bDescriptorSubtype                  6 (FORMAT_MJPEG)
        bFormatIndex                        2
        bNumFrameDescriptors                6
        bFlags                              0
          Fixed-size samples: No
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   384000
        dwMaxBitRate                  2304000
        dwMaxVideoFrameBufferSize       76800
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   126720
        dwMaxBitRate                   760320
        dwMaxVideoFrameBufferSize       25344
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                    96000
        dwMaxBitRate                   576000
        dwMaxVideoFrameBufferSize       19200
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                    31680
        dwMaxBitRate                   190080
        dwMaxVideoFrameBufferSize        6336
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                    24000
        dwMaxBitRate                   144000
        dwMaxVideoFrameBufferSize        4800
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                  1638400
        dwMaxBitRate                  4915200
        dwMaxVideoFrameBufferSize      327680
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  3
        dwFrameInterval( 0)            666666
        dwFrameInterval( 1)           1000000
        dwFrameInterval( 2)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            31
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               6
        wWidth( 0)                       1280
        wHeight( 0)                       960
        wWidth( 1)                        640
        wHeight( 1)                       480
        wWidth( 2)                        352
        wHeight( 2)                       288
        wWidth( 3)                        320
        wHeight( 3)                       240
        wWidth( 4)                        176
        wHeight( 4)                       144
        wWidth( 5)                        160
        wHeight( 5)                       120
        bNumCompressionPatterns             6
        bCompression( 0)                    0
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b20  2x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1320  3x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 1024 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       0 
      bFunctionProtocol       0 
      iFunction               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0 
      iInterface              0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           41
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0 
        iTerminal               0 
      AudioControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 2
        bSourceID               1
        bControlSize            2
        bmaControls( 0)      0x01
        bmaControls( 0)      0x00
          Mute
        bmaControls( 1)      0x02
        bmaControls( 1)      0x00
          Volume
        iFeature                0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               2
        iTerminal               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                29
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            7 Discrete
        tSamFreq[ 0]         8000
        tSamFreq[ 1]        11025
        tSamFreq[ 2]        16000
        tSamFreq[ 3]        22050
        tSamFreq[ 4]        24000
        tSamFreq[ 5]        44100
        tSamFreq[ 6]        48000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x84  EP 4 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0190  1x 400 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0002
  (Bus Powered)
  Remote Wakeup Enabled

From jm.barbier at solidev.org  Fri Mar 28 20:40:25 2008
From: jm.barbier at solidev.org (BARBIER Jean-Matthieu)
Date: Fri, 28 Mar 2008 20:40:25 +0100
Subject: [Linux-uvc-devel] Chicony on Toshiba A210 : unable to set format: 16
Message-ID: <200803282040.31851.jm.barbier@solidev.org>

Hello

the camera on my laptop (Toshiba Satellite A210-B1H) is a Chicony Electronics 
1,3M, using ubuntu 8.04 beta. The webcam fails to work... i've searched, but 
no way to make it work...

if i can help with some testing, tell me

thank you for your job..

JMB

$ luvcview -t yuv
luvcview version 0.2.1
Video driver: x11
A window manager is available
video /dev/video0
Unable to set format: 16.
 Init v4L2 failed !! exit fatal


The camera is recognized :
** lspci gives : 
Bus 001 Device 002: ID 04f2:b008 Chicony Electronics Co., Ltd 

** dmesg gives : 
[   32.997337] Linux video capture interface: v2.00
[   33.073694] uvcvideo: Found UVC 1.00 device Chicony USB 2.0 Camera 
(04f2:b008)
[   33.076205] usbcore: registered new interface driver uvcvideo
[   33.076210] USB Video Class driver (v0.1.0)

** uvcvideo module :
$ modinfo uvcvideo
filename:       /lib/modules/2.6.24-12-generic/ubuntu/media/usbvideo/uvcvideo.ko
license:        GPL
description:    USB Video Class driver
author:         Laurent Pinchart <laurent.pinchart at skynet.be>
srcversion:     31237F4DA231287CA3B3698

and the lsusb -v -d : 
$ lsusb -v -d 04f2:b008
Bus 001 Device 002: ID 04f2:b008 Chicony Electronics Co., Ltd
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x04f2 Chicony Electronics Co., Ltd
  idProduct          0xb008
  bcdDevice            3.35
  iManufacturer           2 Chicony Electronics Co., Ltd.
  iProduct                1 Chicony USB 2.0 Camera
  iSerial                 3 SN0001
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          593
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               1 Chicony USB 2.0 Camera
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              1 Chicony USB 2.0 Camera
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           77
        dwClockFrequency       15.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               4
        iTerminal               0
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {7033f028-1163-2e4a-ba2c-6890eb334016}
        bNumControl             1
        bNrPins                 1
        baSourceID( 0)          3
        bControlSize            1
        bmControls( 0)       0x01
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000000
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000053f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          Backlight Compensation
          Power Line Frequency
        iProcessing             0
        bmVideoStandards     0x 0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                        1
        wTotalLength                      373
        bEndPointAddress                  129
        bmInfo                              0
        bTerminalLink                       2
        bStillCaptureMethod                 0
        bTriggerSupport                     1
        bTriggerUsage                       0
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                7
        guidFormat                            
{59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   614400
        dwMaxBitRate                 18432000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
        dwFrameInterval( 5)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   202752
        dwMaxBitRate                  6082560
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
        dwFrameInterval( 5)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   153600
        dwMaxBitRate                  4608000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
        dwFrameInterval( 5)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                    50688
        dwMaxBitRate                  1520640
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
        dwFrameInterval( 5)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                    38400
        dwMaxBitRate                  1152000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
        dwFrameInterval( 5)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                           800
        dwMinBitRate                  2048000
        dwMaxBitRate                 18432000
        dwMaxVideoFrameBufferSize     2048000
        dwDefaultFrameInterval        1333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)           1333333
        dwFrameInterval( 1)           2000000
        dwFrameInterval( 2)          10000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         7
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                  2621440
        dwMaxBitRate                 23592960
        dwMaxVideoFrameBufferSize     2621440
        dwDefaultFrameInterval        1333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)           1333333
        dwFrameInterval( 1)           2000000
        dwFrameInterval( 2)          10000000
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b20  2x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1320  3x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x13e8  3x 1000 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)




-- 
JM Barbier - Solidev.org
tel : +33 (0) 6 86 14 77 29
-- 
JM Barbier - Solidev.org
tel : +33 (0) 6 86 14 77 29
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part.
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080328/c256c20c/attachment.pgp>

From laurent.pinchart at skynet.be  Sat Mar 29 17:11:09 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 29 Mar 2008 17:11:09 +0100
Subject: [Linux-uvc-devel] Chicony on Toshiba A210 : unable to set
	format: 16
In-Reply-To: <200803282040.31851.jm.barbier@solidev.org>
References: <200803282040.31851.jm.barbier@solidev.org>
Message-ID: <200803291711.09723.laurent.pinchart@skynet.be>

Hi Jean-Matthieu,

On Friday 28 March 2008, BARBIER Jean-Matthieu wrote:
> Hello
>
> the camera on my laptop (Toshiba Satellite A210-B1H) is a Chicony
> Electronics 1,3M, using ubuntu 8.04 beta. The webcam fails to work... i've
> searched, but no way to make it work...
>
> if i can help with some testing, tell me
>
> thank you for your job..
>
> JMB
>
> $ luvcview -t yuv

That should be

luvcview -f yuv

> luvcview version 0.2.1
> Video driver: x11
> A window manager is available
> video /dev/video0
> Unable to set format: 16.
>  Init v4L2 failed !! exit fatal

16 is EBUSY. This means your camera is already in use. Is there any other 
application accessing it ?

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Mar 29 17:20:25 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 29 Mar 2008 17:20:25 +0100
Subject: [Linux-uvc-devel] Supported webcam
In-Reply-To: <47EC78B7.9080809@gusl.org.ve>
References: <47EC78B7.9080809@gusl.org.ve>
Message-ID: <200803291720.26043.laurent.pinchart@skynet.be>

Hi Rafael,

On Friday 28 March 2008, Rafael Isturiz wrote:
> Hi,
>
>      I have a laptop (VIT D2010 / www.vit.com.ve)... The webcam is
> supported :) , thx for the great job!... Actually i'm using the SVN
> r195... "lsusb -v -d" in .txt (the list support attach?)
>
> P.D. usbutils Version: 0.73-7 (Debian lenny)
> P.D. The video is little slow

Thanks a lot for the information. I updated the supported devices list.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat Mar 29 17:50:29 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 29 Mar 2008 17:50:29 +0100
Subject: [Linux-uvc-devel] What about Chicony 04f2:b024 support ?
In-Reply-To: <47EAA329.2050805@tvcablenet.be>
References: <47E778D9.10701@tvcablenet.be>
	<200803252157.26936.laurent.pinchart@skynet.be>
	<47EAA329.2050805@tvcablenet.be>
Message-ID: <200803291750.29570.laurent.pinchart@skynet.be>

Hi Fran?ois,

On Wednesday 26 March 2008, Fran?ois Valenduc wrote:

> I finally managed to compile ucview and my webcam works ! If I run
> PKG_CONFIG_PATH=/usr/local/lib/pkgconfig:$PKG_CONFIG_PATH ./configure,
> it doesn't work. I must use export to set the PKG_CONFIG_PATH variable
> and run "configure" after that. I find that a bit strange. In fact, it
> also works with Kopete, so it was not really needed to use ucview.

I updated the supported devices list.

Best regards,

Laurent Pinchart


From gijoprems at gmail.com  Mon Mar 31 12:52:54 2008
From: gijoprems at gmail.com (Gijo Prems)
Date: Mon, 31 Mar 2008 12:52:54 +0200
Subject: [Linux-uvc-devel] UVC Gadget
Message-ID: <75026db30803310352w6912e9d5qe4da09f5430ed82b@mail.gmail.com>

Hi,

Are there any UVC gadget drivers available for linux? From the mail archive,
it's seen that there was an initiative from someone for the linux UVC gadget
driver, though I couldn't find the source code. It would be of great help,
if anyone could guide me on finding out/developing a UVC gadget driver.

Regards,
Gijo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080331/2e174e0b/attachment.html>

From kyle at mcmartin.ca  Mon Mar 31 18:01:14 2008
From: kyle at mcmartin.ca (Kyle McMartin)
Date: Mon, 31 Mar 2008 12:01:14 -0400
Subject: [Linux-uvc-devel] linux-uvc is now packed with Fedora
In-Reply-To: <200803240108.04877.laurent.pinchart@skynet.be>
References: <20080323223832.GB8394@sunshine.barsnick.net>
	<200803240108.04877.laurent.pinchart@skynet.be>
Message-ID: <20080331160114.GB3688@phobos.i.cabal.ca>

On Mon, Mar 24, 2008 at 01:08:04AM +0100, Laurent Pinchart wrote:
> Thanks for the information.
> 

Thanks for writing a good driver. :)

> > As of kernel package 2.6.24.2-3 of Feb 15 2008, linux-uvc is
> > integrated, albeit as a patch(!).
> >
> > But while this is the case, I think it's time to hurry up and clean up
> > the code. :-) E.g. the module (in Fedora) isn't telling me, what
> > version it is! I will follow up with some suggestions I think are
> > useful.
> 

Moritz, I'll make sure that next time I update from SVN, I put in the
svn revision.

cheers, Kyle

> We're getting there, some required additions are now in the linux-next v4l/dvb 
> tree.
>


