From vergata at fbihome.de  Tue Apr  1 14:36:36 2008
From: vergata at fbihome.de (Sergio Vergata)
Date: Tue, 1 Apr 2008 14:36:36 +0200
Subject: [Linux-uvc-devel] New Device 1871:0306 Strange work and Picture
Message-ID: <200804011436.36856.vergata@fbihome.de>

Hi all,
Im new here, and how could it be different :-) need your help, im getting mad 
with a new Toy.

I own a CMOS Module 
... From Spec sheet ...
1. Description of Camera Module
ESM13218 is all USB 2.0 CMOS sensor camera module that supports SXGA
resolution(1280 x 1024). This module integrates Omni Vision OV9655 CMOS
sensor, Aveo AV301V high-integrate SOC controller and Largan 903Y Lens
assembly.
.. ...

When i connect to /dev/video0 with luvcview -f yuv
luvcview version 0.2.1
Video driver: x11
A window manager is available
video /dev/video0

the image i attached.

Does anyone know wat's wrong? 

THX to all


The modversion:  ist the today svn co SVN r198

Here is my dmesg
[ 5405.763870] uvcvideo: Found UVC 1.00 device USB2.0 Camera (1871:0306)
[ 5405.767702] input: USB2.0 Camera 
as /devices/pci0000:00/0000:00:1d.3/usb4/4-1/4-1:1.0/input/input10
[ 5405.781964] usbcore: registered new interface driver uvcvideo
[ 5405.781971] USB Video Class driver (SVN r198)

and  lsusb -v -d 1871:0306

Bus 004 Device 002: ID 1871:0306
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x1871
  idProduct          0x0306
  bcdDevice            9.11
  iManufacturer           1 AVEO Technology Corp.
  iProduct                2 USB2.0 Camera
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          311
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               2 USB2.0 Camera
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              2 USB2.0 Camera
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           77
        dwClockFrequency       12.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000000
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               4
        iTerminal               0
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000053f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          Backlight Compensation
          Power Line Frequency
        iProcessing             0
        bmVideoStandards     0x1a
          NTSC - 525/60
          SECAM - 625/50
          NTSC - 625/50
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {52f2b8aa-d18e-7249-8ced-96b17f04408b}
        bNumControl             1
        bNrPins                 1
        baSourceID( 0)          3
        bControlSize            1
        bmControls( 0)       0x01
        iExtension              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x85  EP 5 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                        1
        wTotalLength                      107
        bEndPointAddress                  131
        bmInfo                              0
        bTerminalLink                       2
        bStillCaptureMethod                 0
        bTriggerSupport                     0
        bTriggerUsage                       0
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                2
        guidFormat                            
{59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  2
        bAspectRatioX                       4
        bAspectRatioY                       3
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                  1536000
        dwMaxBitRate                  1536000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval        2000000
        bFrameIntervalType                  1
        dwFrameInterval( 0)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                  1228800
        dwMaxBitRate                  1228800
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval       10000000
        bFrameIntervalType                  1
        dwFrameInterval( 0)          10000000
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0104  1x 260 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0184  1x 388 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0204  1x 516 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0304  1x 772 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x03f4  1x 1012 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)
-------------- next part --------------
A non-text attachment was scrubbed...
Name: P-04_01_2008-09_02_17.jpg
Type: image/jpeg
Size: 4304 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080401/66b07d0b/attachment.jpg>

From wahjava.ml at gmail.com  Tue Apr  1 22:45:03 2008
From: wahjava.ml at gmail.com (Ashish Shukla =?utf-8?B?4KSG4KS24KWA4KS3IA==?=
	=?utf-8?B?4KS24KWB4KSV4KWN4KSy?=)
Date: Wed, 02 Apr 2008 02:15:03 +0530
Subject: [Linux-uvc-devel] Integrated webcam (174F:5212) in HP Compaq A920EE
	notebook is not working
Message-ID: <871w5pl2y8.fsf@chateau.d.lf>

Hi list,

My webcam (174F:5212) is listed at http://linux-uvc.berlios.de/ as
supported. So I checked out trunk of linux-uvc, compiled and built the
module. But after 'insmod uvcvideo.ko', I get following in my dmesg
output.

---->8---->8----
uvcvideo: Found UVC 1.00 device USB2.0 UVC PC Camera (174f:5212)
uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -32 (exp. 26).
usbcore: registered new interface driver uvcvideo
USB Video Class driver (SVN r198)
----8<----8<----

The /dev/video0 appeared, but its not working with luvcview. Following
is the output of luvcview:

---->8---->8-----
abbe at monte-cristo:~/uvc$ DISPLAY=:0 luvcview
luvcview version 0.2.1
Video driver: x11
A window manager is available
video /dev/video0
Unable to set format: 22.
 Init v4L2 failed !! exit fatal
----8<----8<----

I'm running Debian Lenny (Linux kernel version 2.6.24-1-amd64 #1 SMP).

Is there anything which I'm missing or doing wrong ? If any more
information is required, I'll post that.

TIA
-- 
Ashish Shukla ???? ?????                      http://wahjava.wordpress.com/
?-- ?- ???? ?--- ?- ???- ?- ?--?-? --? -- ?- ?? ?-?? ?-?-?- -?-? --- --
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 188 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080402/1542c172/attachment.pgp>

From laurent.pinchart at skynet.be  Wed Apr  2 00:50:38 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 2 Apr 2008 00:50:38 +0200
Subject: [Linux-uvc-devel] New Device 1871:0306 Strange work and Picture
In-Reply-To: <200804011436.36856.vergata@fbihome.de>
References: <200804011436.36856.vergata@fbihome.de>
Message-ID: <200804020050.38922.laurent.pinchart@skynet.be>

Hi Sergio,

On Tuesday 01 April 2008, Sergio Vergata wrote:
> Hi all,
> Im new here, and how could it be different :-) need your help, im getting
> mad with a new Toy.
>
> I own a CMOS Module
> ... From Spec sheet ...
> 1. Description of Camera Module
> ESM13218 is all USB 2.0 CMOS sensor camera module that supports SXGA
> resolution(1280 x 1024). This module integrates Omni Vision OV9655 CMOS
> sensor, Aveo AV301V high-integrate SOC controller and Largan 903Y Lens
> assembly.
> .. ...
>
> When i connect to /dev/video0 with luvcview -f yuv
> luvcview version 0.2.1
> Video driver: x11
> A window manager is available
> video /dev/video0
>
> the image i attached.
>
> Does anyone know wat's wrong?

It looks like most USB data packets are dropped. Please check the cables and 
try plugging the module in another port and/or another computer.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Apr  2 00:52:33 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 2 Apr 2008 00:52:33 +0200
Subject: [Linux-uvc-devel] Integrated webcam (174F:5212) in HP Compaq
	A920EE notebook is not working
In-Reply-To: <871w5pl2y8.fsf@chateau.d.lf>
References: <871w5pl2y8.fsf@chateau.d.lf>
Message-ID: <200804020052.33192.laurent.pinchart@skynet.be>

Hi Ashish,

On Tuesday 01 April 2008, Ashish Shukla ???? ????? wrote:
> Hi list,
>
> My webcam (174F:5212) is listed at http://linux-uvc.berlios.de/ as
> supported. So I checked out trunk of linux-uvc, compiled and built the
> module. But after 'insmod uvcvideo.ko', I get following in my dmesg
> output.
>
> ---->8---->8----
> uvcvideo: Found UVC 1.00 device USB2.0 UVC PC Camera (174f:5212)
> uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -32 (exp. 26).
> usbcore: registered new interface driver uvcvideo
> USB Video Class driver (SVN r198)
> ----8<----8<----
>
> The /dev/video0 appeared, but its not working with luvcview. Following
> is the output of luvcview:
>
> ---->8---->8-----
> abbe at monte-cristo:~/uvc$ DISPLAY=:0 luvcview
> luvcview version 0.2.1
> Video driver: x11
> A window manager is available
> video /dev/video0
> Unable to set format: 22.
>  Init v4L2 failed !! exit fatal
> ----8<----8<----

Please try

$ DISPLAY=:0 luvcview -f yuv

> I'm running Debian Lenny (Linux kernel version 2.6.24-1-amd64 #1 SMP).
>
> Is there anything which I'm missing or doing wrong ? If any more
> information is required, I'll post that.

Best regards,

Laurent Pinchart


From wahjava.ml at gmail.com  Wed Apr  2 10:53:19 2008
From: wahjava.ml at gmail.com (Ashish Shukla =?utf-8?B?4KSG4KS24KWA4KS3IA==?=
	=?utf-8?B?4KS24KWB4KSV4KWN4KSy?=)
Date: Wed, 02 Apr 2008 14:23:19 +0530
Subject: [Linux-uvc-devel] Integrated webcam (174F:5212) in HP Compaq
	A920EE notebook is not working
In-Reply-To: <200804020052.33192.laurent.pinchart@skynet.be> (Laurent
	Pinchart's message of "Wed, 2 Apr 2008 00:52:33 +0200")
References: <871w5pl2y8.fsf@chateau.d.lf>
	<200804020052.33192.laurent.pinchart@skynet.be>
Message-ID: <871w5o7i4g.fsf@chateau.d.lf>

>>>>> Laurent Pinchart writes:
    Laurent> Hi Ashish,

Hi Laurent,


[...]

    Laurent> Please try

    Laurent> $ DISPLAY=:0 luvcview -f yuv

I tried above command, and I can see the luvcview window capturing
From my webcam. But Brightness, Contrast controls aren't working, is
this expected, hmm...? I've also tried capturing using gst-launch-0.10
with following command:

abbe at monte-cristo:~$ gst-launch-0.10 v4l2src \! xvimagesink

And that is also working :) . Ekiga (2.0.11-2) is not working, it says "Could not
open the chosen channel with the chosen video format".

Thanks for the help.
-- 
Ashish Shukla ???? ?????                      http://wahjava.wordpress.com/
?-- ?- ???? ?--- ?- ???- ?- ?--?-? --? -- ?- ?? ?-?? ?-?-?- -?-? --- --
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 188 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080402/d408cdfb/attachment.pgp>

From daniel.pastrana at gmail.com  Wed Apr  2 13:10:08 2008
From: daniel.pastrana at gmail.com (Daniel CABRERA)
Date: Wed, 2 Apr 2008 13:10:08 +0200
Subject: [Linux-uvc-devel] Logitech Quickcame deluxe for notebooks
	(046d:09c1) UNSTABLE error -84
Message-ID: <d59b0cd40804020410h5ba385e8lb2d6ee1cf8c15ffa@mail.gmail.com>

Hi,

I try the latest SVN version 198. The webcam works just fine only for few
minutes, before dies. I attached the lcpi,lspci,dmesg when I pluged the
webcam, and the dmesg when the webcam crashed.

I tested with the latest Skype version and the latest verion of luvcview. I
also tried one of the unsuported patches (
https://lists.berlios.de/pipermail/linux-uvc-devel/2008-January/002830.html)
and  it did not work :(

Please let me know what else can I do from my end inorder to make it work?

Do you have any recomendation, workaround  or something else to try ?

thx

uname -r
========
2.6.22-14-generic

Distro
======
UBUNTU ver 7.10

lspci
=======
00:00.0 Host bridge: Intel Corporation 82815 815
Chipset Host Bridge and Memory Controller Hub (rev 11)
00:02.0 VGA compatible controller: Intel Corporation
82815 Chipset Graphics Controller (CGC) (rev 11)
00:1e.0 PCI bridge: Intel Corporation 82801 Mobile PCI
Bridge (rev 03)
00:1f.0 ISA bridge: Intel Corporation 82801BAM ISA
Bridge (LPC) (rev 03)
00:1f.1 IDE interface: Intel Corporation 82801BAM IDE
U100 Controller (rev 03)
00:1f.2 USB Controller: Intel Corporation 82801BA/BAM
USB Controller #1 (rev 03)
00:1f.3 SMBus: Intel Corporation 82801BA/BAM SMBus
Controller (rev 03)
00:1f.4 USB Controller: Intel Corporation 82801BA/BAM
USB Controller #1 (rev 03)
00:1f.5 Multimedia audio controller: Intel Corporation
82801BA/BAM AC'97 Audio Controller (rev 03)
00:1f.6 Modem: Intel Corporation 82801BA/BAM AC'97
Modem Controller (rev 03)
01:00.0 FireWire (IEEE 1394): Texas Instruments
TSB43AA22 IEEE-1394 Controller (PHY/Link Integrated)
(rev 02)
01:02.0 CardBus bridge: Ricoh Co Ltd RL5c475 (rev 80)
01:05.0 CardBus bridge: Texas Instruments PCI1410 PC
card Cardbus Controller (rev 01)
01:08.0 Ethernet controller: Intel Corporation
82801BA/BAM/CA/CAM Ethernet Controller (rev 03)
02:00.0 Ethernet controller: Atheros Communications,
Inc. AR5212/AR5213 Multiprotocol MAC/baseband
processor (rev 01)


PLUGIN_WEBCAM
==============
[44716.004000] usb 1-1: new full speed USB device
using uhci_hcd and address 2
[44716.372000] usb 1-1: configuration #1 chosen from 1
choice
[44720.104000] Linux video capture interface: v2.00
[44720.120000] usbcore: registered new interface
driver snd-usb-audio
[44720.380000] uvcvideo: Found UVC 1.00 device
<unnamed> (046d:09c1)
[44720.408000] input: UVC Camera (046d:09c1) as
/class/input/input11
[44720.408000] usbcore: registered new interface
driver uvcvideo
[44720.408000] USB Video Class driver (SVN r198)

CRASH
=====
[45796.780000] uvcvideo: Non-zero status (c) in
video completion handler.

lsusb
=====


Bus 001 Device 003: ID 046d:09c1 Logitech, Inc.
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x046d Logitech, Inc.
  idProduct          0x09c1
  bcdDevice            0.05
  iManufacturer           0
  iProduct                0
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength         1001
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface
Collection
      bFunctionProtocol       0
      iFunction               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              0
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength          133
        dwClockFrequency       48.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x0000000e
          Auto-Exposure Mode
          Auto-Exposure Priority
          Exposure Time (Absolute)
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 2
        bSourceID               1
        wMaxMultiplier      16384
        bControlSize            2
        bmControls     0x0000175b
          Brightness
          Contrast
          Saturation
          Sharpness
          White Balance Temperature
          Backlight Compensation
          Gain
          Power Line Frequency
          White Balance Temperature, Auto
        iProcessing             0
        bmVideoStandards     0x1c
          PAL - 625/50
          SECAM - 625/50
          NTSC - 625/50
      VideoControl Interface Descriptor:
        bLength                28
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 3
        guidExtensionCode
{63610682-5070-49ab-b8cc-b3855e8d221d}
        bNumControl            22
        bNrPins                 1
        baSourceID( 0)          2
        bControlSize            3
        bmControls( 0)       0xfe
        bmControls( 1)       0xff
        bmControls( 2)       0xdf
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                27
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode
{63610682-5070-49ab-b8cc-b3855e8d221e}
        bNumControl            10
        bNrPins                 1
        baSourceID( 0)          3
        bControlSize            2
        bmControls( 0)       0xff
        bmControls( 1)       0x03
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                27
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                13
        guidExtensionCode
{63610682-5070-49ab-b8cc-b3855e8d221f}
        bNumControl             7
        bNrPins                 1
        baSourceID( 0)          3
        bControlSize            2
        bmControls( 0)       0xff
        bmControls( 1)       0x01
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             5
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               4
        iTerminal               0
      UNRECOGNIZED:  20 41 01 0c 82 06 61 63 70 50 ab
49 b8 cc b3 85 5e 8d 22 50 0e 01 04 03 fe 7f 00 00 00
00 00 00
      UNRECOGNIZED:  20 41 01 08 82 06 61 63 70 50 ab
49 b8 cc b3 85 5e 8d 22 51 03 01 04 03 19 00 00 00 00
00 01 00
      UNRECOGNIZED:  22 41 01 0a 82 06 61 63 70 50 ab
49 b8 cc b3 85 5e 8d 22 52 20 01 04 04 ff ff ff ff 00
00 00 00 01 00
      UNRECOGNIZED:  20 41 01 0b 82 06 61 63 70 50 ab
49 b8 cc b3 85 5e 8d 22 55 01 01 04 03 01 00 00 00 00
00 00 00
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x87  EP 7 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval              16
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            16
        bDescriptorType                    36
        bDescriptorSubtype                  1
(INPUT_HEADER)
        bNumFormarts                        3
        wTotalLength                    33025
        bEndPointAddress                    0
        bmInfo                              5
        bTerminalLink                       2
        bStillCaptureMethod                 1
        bTriggerSupport                     0
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    11
        bmaControls( 1)                    11
        bmaControls( 2)                    11
      VideoStreaming Interface Descriptor:
        bLength                            11
        bDescriptorType                    36
        bDescriptorSubtype                  6
(FORMAT_MJPEG)
        bFormatIndex                        1
        bNumFrameDescriptors                5
        bFlags                              1
          Fixed-size samples: Yes
        bDefaultFrameIndex                  3
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7
(FRAME_MJPEG)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                  1536000
        dwMaxBitRate                  9216000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7
(FRAME_MJPEG)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                  2027520
        dwMaxBitRate                 12165120
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7
(FRAME_MJPEG)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                  6144000
        dwMaxBitRate                 36864000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7
(FRAME_MJPEG)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                  8110080
        dwMaxBitRate                 48660480
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            50
        bDescriptorType                    36
        bDescriptorSubtype                  7
(FRAME_MJPEG)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                 24576000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  6
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)           1000000
        dwFrameInterval( 5)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            31
        bDescriptorType                    36
        bDescriptorSubtype                  3
(STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               5
        wWidth( 0)                        160
        wHeight( 0)                       120
        wWidth( 1)                        176
        wHeight( 1)                       144
        wWidth( 2)                        320
        wHeight( 2)                       240
        wWidth( 3)                        352
        wHeight( 3)                       288
        wWidth( 4)                        640
        wHeight( 4)                       480
        bNumCompressionPatterns             5
        bCompression( 0)                    5
        bCompression( 1)                   10
        bCompression( 2)                   15
        bCompression( 3)                   20
        bCompression( 4)                   25
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13
(COLORFORMAT)
        bColorPrimaries                     1
(BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE
170M (BT.601))
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4
(FORMAT_UNCOMPRESSED)
        bFormatIndex                        2
        bNumFrameDescriptors                2
        guidFormat
{32595559-0000-0010-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5
(FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                  1536000
        dwMaxBitRate                  4608000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  3
        dwFrameInterval( 0)            666666
        dwFrameInterval( 1)           1000000
        dwFrameInterval( 2)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5
(FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                  2027520
        dwMaxBitRate                  6082560
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  3
        dwFrameInterval( 0)            666666
        dwFrameInterval( 1)           1000000
        dwFrameInterval( 2)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            15
        bDescriptorType                    36
        bDescriptorSubtype                  3
(STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               2
        wWidth( 0)                        160
        wHeight( 0)                       120
        wWidth( 1)                        176
        wHeight( 1)                       144
        bNumCompressionPatterns             2
        bCompression( 0)                    5
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13
(COLORFORMAT)
        bColorPrimaries                     1
(BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE
170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x00c0  1x 192 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0180  1x 384 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0280  1x 640 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x03b0  1x 944 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       2 Streaming
      bFunctionProtocol       0
      iFunction               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0
      iInterface              0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           38
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0
        iTerminal               0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               5
        iTerminal               0
      AudioControl Interface Descriptor:
        bLength                 8
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 5
        bSourceID               1
        bControlSize            1
        bmaControls( 0)      0x03
          Mute
          Volume
        iFeature                0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            1 Discrete
        tSamFreq[ 0]        16000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0030  1x 48 bytes
        bInterval               1
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Status:     0x0000
  (Bus Powered)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080402/03c4df34/attachment.html>

From cmsj at tenshu.net  Wed Apr  2 15:31:55 2008
From: cmsj at tenshu.net (Chris Jones)
Date: Wed, 02 Apr 2008 14:31:55 +0100
Subject: [Linux-uvc-devel] laptop webcam OOPS
Message-ID: <47F38ACB.3010601@tenshu.net>

Hi

I have a Lenovo Thinkpad X300, which has a camera built into the lid:

Bus 007 Device 013: ID 17ef:4807 ChipsBnk

UVC claims it:

[  645.960406] Linux video capture interface: v2.00
[  645.979595] uvcvideo: Found UVC 1.00 device <unnamed> (17ef:4807)
[  645.981414] usbcore: registered new interface driver uvcvideo
[  645.981427] USB Video Class driver (v0.1.0)

However, accessing the device causes the kernel to oops (see attached).

I've tried the version in Ubuntu Hardy and UVC SVN, and they both seem 
to oops in uvc_get_video_ctrl.

What can I do to help debug this so my camera works? :)

Cheers,
-- 
Chris Jones
   cmsj at tenshu.net
    www.tenshu.net
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: uvcoops.txt
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080402/85e5d80c/attachment.txt>

From laurent.pinchart at skynet.be  Wed Apr  2 17:06:18 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 2 Apr 2008 17:06:18 +0200
Subject: [Linux-uvc-devel] laptop webcam OOPS
In-Reply-To: <47F38ACB.3010601@tenshu.net>
References: <47F38ACB.3010601@tenshu.net>
Message-ID: <200804021706.19123.laurent.pinchart@skynet.be>

Hi Chris,

On Wednesday 02 April 2008 15:31, Chris Jones wrote:
> Hi
> 
> I have a Lenovo Thinkpad X300, which has a camera built into the lid:
> 
> Bus 007 Device 013: ID 17ef:4807 ChipsBnk
> 
> UVC claims it:
> 
> [  645.960406] Linux video capture interface: v2.00
> [  645.979595] uvcvideo: Found UVC 1.00 device <unnamed> (17ef:4807)
> [  645.981414] usbcore: registered new interface driver uvcvideo
> [  645.981427] USB Video Class driver (v0.1.0)
> 
> However, accessing the device causes the kernel to oops (see attached).

Oopses are a top priority. I'll try to fix this tonight.

> I've tried the version in Ubuntu Hardy and UVC SVN, and they both seem 
> to oops in uvc_get_video_ctrl.
> 
> What can I do to help debug this so my camera works? :)

I will need the output of

lsusb -v -d 17ef:4807

using usbutils 0.72 or newer (0.73+ if possible), as well as a disassembled 
uvcvideo.ko module (objdump -d should do the trick).

The disassembled uvcvideo.ko might be large so feel free to compress it or 
send it by private e-mail.

Best regards,

Laurent Pinchart


From darren.longhorn at redembedded.com  Wed Apr  2 20:22:44 2008
From: darren.longhorn at redembedded.com (Darren Longhorn)
Date: Wed, 02 Apr 2008 19:22:44 +0100
Subject: [Linux-uvc-devel] Frame rate with Logitech QuickCam Pro 9000
Message-ID: <47F3CEF4.3080907@redembedded.com>

Hi,

is it possible to set the frame rate via v4l2 for this camera? The 
camera is reputed to do 30f/s, but by default the frame rate seems to be 
set to 15f/s, which as reported by VIDIOC_G_PARM. I tried changing it 
using VIDIOC_S_PARM, but it made no difference to the actual frame rate.

I'm using svn 148, which I realise is quite old, but I can't get 198 to 
build for my ti-davinci montavista kernel 2.6.10

Thanks in advance for any info.

Cheers

Darren


From fragabr at gmail.com  Wed Apr  2 22:07:19 2008
From: fragabr at gmail.com (=?ISO-8859-1?Q?D=E2niel?= Fraga)
Date: Wed, 2 Apr 2008 17:07:19 -0300
Subject: [Linux-uvc-devel] Frame rate with Logitech QuickCam Pro 9000
References: <47F3CEF4.3080907@redembedded.com>
Message-ID: <20080402170719.7bceef88@tux.abusar.org.br>

On Wed, 02 Apr 2008 19:22:44 +0100
Darren Longhorn <darren.longhorn at redembedded.com> wrote:

> Hi,
> 
> is it possible to set the frame rate via v4l2 for this camera? The 
> camera is reputed to do 30f/s, but by default the frame rate seems to be 
> set to 15f/s, which as reported by VIDIOC_G_PARM. I tried changing it 
> using VIDIOC_S_PARM, but it made no difference to the actual frame rate.

	Try to change the exposure value.

-- 
Linux 2.6.24: Arr Matey! A Hairy Bilge Rat!
http://u-br.net http://www.abusar.org/FELIZ_2008.html
Joe Satriani - "Out of The Sunrise" (Professor Satchafunkilus and the
musterion of rock - 2008)




From dsant69 at yahoo.fr  Sat Apr  5 15:52:53 2008
From: dsant69 at yahoo.fr (ds ds)
Date: Sat, 5 Apr 2008 15:52:53 +0200 (CEST)
Subject: [Linux-uvc-devel] bug in uvc_status.c ? dev.parent
Message-ID: <952374.12249.qm@web28005.mail.ukl.yahoo.com>

Hi, in uvc_status.c line 46, we have :
input->dev.parent = something...
"dev" is a pointer on "struct uvc_device" defined in
file uvcvideo.h line 593
but no "parent" here...
I don't think "parent" is a C reserved word.

Here is my output :
$ make
Building USB Video Class driver...
make[1]: Entering directory
`/usr/src/linux-2.6.17-16mdv'

WARNING: Symbol version dump
/usr/src/linux-2.6.17-16mdv/Module.symvers is missing;
modules will have no dependencies and modversions.

  CC [M]  /home/ds/tmp/uvc/trunk/uvc_driver.o
  CC [M]  /home/ds/tmp/uvc/trunk/uvc_status.o
/home/ds/tmp/uvc/trunk/uvc_status.c: In function
&#8216;uvc_input_init&#8217;:
/home/ds/tmp/uvc/trunk/uvc_status.c:46: error: request
for member &#8216;parent&#8217; in something not a
structure or union
make[2]: *** [/home/ds/tmp/uvc/trunk/uvc_status.o]
Error 1
make[1]: *** [_module_/home/ds/tmp/uvc/trunk] Error 2
make[1]: Leaving directory
`/usr/src/linux-2.6.17-16mdv'
make: *** [uvcvideo] Error 2



      _____________________________________________________________________________ 
Envoyez avec Yahoo! Mail. Une boite mail plus intelligente http://mail.yahoo.fr


From barsnick at gmx.net  Sat Apr  5 20:40:18 2008
From: barsnick at gmx.net (Moritz Barsnick)
Date: Sat, 5 Apr 2008 20:40:18 +0200
Subject: [Linux-uvc-devel] bug in uvc_status.c ? dev.parent
In-Reply-To: <952374.12249.qm@web28005.mail.ukl.yahoo.com>
References: <952374.12249.qm@web28005.mail.ukl.yahoo.com>
Message-ID: <20080405184018.GA14593@sunshine.barsnick.net>

Hi dsds,

On Sat, Apr 05, 2008 at 15:52:53 +0200, ds ds wrote:
> Hi, in uvc_status.c line 46, we have :
> input->dev.parent = something...
> "dev" is a pointer on "struct uvc_device" defined in
> file uvcvideo.h line 593
> but no "parent" here...

That's wrongly interpreted.

- At the top of that function (uvc_input_init()), input is declared as
  a "struct input_dev *".
- Within that struct input_dev, dev is declared as a "struct device"
  (in linux/input.h).
- Within that struct device, parent is again declared as a "struct
  device *" (in linux/device.h).

This is for my current kernel 2.6.24.4.

> make[1]: Leaving directory
> `/usr/src/linux-2.6.17-16mdv'

Hmm. Perhaps the driver has a slight incompatibility with 2.6.17,
perhaps recently introduced? As far as I can see, 2.6.17 has the same
declarations[*].

Does your Mandriva provide a newer kernel, and do you have the
possibility of upgrading?

Moritz

[*] http://lxr.linux.no/linux+v2.6.17/include/linux/


From laurent.pinchart at skynet.be  Sun Apr  6 19:03:27 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 6 Apr 2008 19:03:27 +0200
Subject: [Linux-uvc-devel] laptop webcam OOPS
In-Reply-To: <47F38ACB.3010601@tenshu.net>
References: <47F38ACB.3010601@tenshu.net>
Message-ID: <200804061903.28075.laurent.pinchart@skynet.be>

On Wednesday 02 April 2008, Chris Jones wrote:
> Hi
>
> I have a Lenovo Thinkpad X300, which has a camera built into the lid:
>
> Bus 007 Device 013: ID 17ef:4807 ChipsBnk
>
> UVC claims it:
>
> [  645.960406] Linux video capture interface: v2.00
> [  645.979595] uvcvideo: Found UVC 1.00 device <unnamed> (17ef:4807)
> [  645.981414] usbcore: registered new interface driver uvcvideo
> [  645.981427] USB Video Class driver (v0.1.0)
>
> However, accessing the device causes the kernel to oops (see attached).
>
> I've tried the version in Ubuntu Hardy and UVC SVN, and they both seem
> to oops in uvc_get_video_ctrl.

The bug has been fixed in the latest SVN revision. Thanks for reporting it.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Apr  6 19:16:54 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 6 Apr 2008 19:16:54 +0200
Subject: [Linux-uvc-devel] bug in uvc_status.c ? dev.parent
In-Reply-To: <952374.12249.qm@web28005.mail.ukl.yahoo.com>
References: <952374.12249.qm@web28005.mail.ukl.yahoo.com>
Message-ID: <200804061916.54485.laurent.pinchart@skynet.be>

Hi,

On Saturday 05 April 2008, ds ds wrote:
> Hi, in uvc_status.c line 46, we have :
> input->dev.parent = something...
> "dev" is a pointer on "struct uvc_device" defined in
> file uvcvideo.h line 593
> but no "parent" here...
> I don't think "parent" is a C reserved word.
>
> Here is my output :
> $ make
> Building USB Video Class driver...
> make[1]: Entering directory
> `/usr/src/linux-2.6.17-16mdv'
>
> WARNING: Symbol version dump
> /usr/src/linux-2.6.17-16mdv/Module.symvers is missing;
> modules will have no dependencies and modversions.
>
>   CC [M]  /home/ds/tmp/uvc/trunk/uvc_driver.o
>   CC [M]  /home/ds/tmp/uvc/trunk/uvc_status.o
> /home/ds/tmp/uvc/trunk/uvc_status.c: In function
> &#8216;uvc_input_init&#8217;:
> /home/ds/tmp/uvc/trunk/uvc_status.c:46: error: request
> for member &#8216;parent&#8217; in something not a
> structure or union
> make[2]: *** [/home/ds/tmp/uvc/trunk/uvc_status.o]
> Error 1
> make[1]: *** [_module_/home/ds/tmp/uvc/trunk] Error 2
> make[1]: Leaving directory
> `/usr/src/linux-2.6.17-16mdv'
> make: *** [uvcvideo] Error 2

Could you please test the attached patch and tell me if it helps ?

Best regards,

Laurent Pinchart
-------------- next part --------------
A non-text attachment was scrubbed...
Name: input-parent.patch
Type: text/x-diff
Size: 466 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080406/9189114a/attachment.patch>

From laurent.pinchart at skynet.be  Sun Apr  6 19:23:23 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 6 Apr 2008 19:23:23 +0200
Subject: [Linux-uvc-devel] uvcvideo webcam support - HP dv9700
In-Reply-To: <op.t86rq5zqobic9n@dv9000.mydomain>
References: <op.t86rq5zqobic9n@dv9000.mydomain>
Message-ID: <200804061923.23583.laurent.pinchart@skynet.be>

Hi Greg,

On Sunday 06 April 2008, Greg Gambrill wrote:
> Laurent
>
> I guess you are aware of the uvc/usb module conflict on dv9700 laptops. I
> cannot have usb mass storage device support unless the uvcvideo module is
> blacklisted.

I might have been aware of the issue at some point, but then I've forgotten 
about it.

> Just wondering if there is any light at the end of the tunnel?
>
> I am experiencing this problem on openSUSE 10.3 2.6.22.17.0.1 kernel and
> the r171_2.6.22.17.0.1-3.4 uvcvideo module.

I would need more information to investigate. Kernel logs, links to bur 
reports, ...

Please send your reply to the linux-uvc-devel mailing list. Some subscribers 
might have encountered the problem in the past and could be able to help you.

Best regards,

Laurent Pinchart


From cmsj at tenshu.net  Mon Apr  7 00:11:33 2008
From: cmsj at tenshu.net (Chris Jones)
Date: Sun, 06 Apr 2008 23:11:33 +0100
Subject: [Linux-uvc-devel] laptop webcam OOPS
In-Reply-To: <200804061903.28075.laurent.pinchart@skynet.be>
References: <47F38ACB.3010601@tenshu.net>
	<200804061903.28075.laurent.pinchart@skynet.be>
Message-ID: <47F94A95.1030701@tenshu.net>

Hi

Laurent Pinchart wrote:
> The bug has been fixed in the latest SVN revision. Thanks for reporting it.

Thank you for the fast reply and patch!

Out of interest, did you change the fix at all from the patch you sent 
me to test?
I managed to get that patch included in the latest Ubuntu development 
kernel, so the good news is that these cameras should work fine with the 
release of Hardy!

Cheers,
-- 
Chris Jones
   cmsj at tenshu.net
    www.tenshu.net


From dsant69 at yahoo.fr  Mon Apr  7 08:59:22 2008
From: dsant69 at yahoo.fr (ds ds)
Date: Mon, 7 Apr 2008 08:59:22 +0200 (CEST)
Subject: [Linux-uvc-devel] RE : Re:  bug in uvc_status.c ? dev.parent
In-Reply-To: <200804061916.54485.laurent.pinchart@skynet.be>
Message-ID: <119604.69005.qm@web28009.mail.ukl.yahoo.com>


--- Laurent Pinchart <laurent.pinchart at skynet.be> a
?crit?:

> Hi,
> 
> On Saturday 05 April 2008, ds ds wrote:
> > Hi, in uvc_status.c line 46, we have :
> > input->dev.parent = something...
> > "dev" is a pointer on "struct uvc_device" defined
> in
> > file uvcvideo.h line 593
> > but no "parent" here...
> > I don't think "parent" is a C reserved word.
> >
> > Here is my output :
> > $ make
> > Building USB Video Class driver...
> > make[1]: Entering directory
> > `/usr/src/linux-2.6.17-16mdv'
> >
> > WARNING: Symbol version dump
> > /usr/src/linux-2.6.17-16mdv/Module.symvers is
> missing;
> > modules will have no dependencies and modversions.
> >
> >   CC [M]  /home/ds/tmp/uvc/trunk/uvc_driver.o
> >   CC [M]  /home/ds/tmp/uvc/trunk/uvc_status.o
> > /home/ds/tmp/uvc/trunk/uvc_status.c: In function
> > &#8216;uvc_input_init&#8217;:
> > /home/ds/tmp/uvc/trunk/uvc_status.c:46: error:
> request
> > for member &#8216;parent&#8217; in something not a
> > structure or union
> > make[2]: *** [/home/ds/tmp/uvc/trunk/uvc_status.o]
> > Error 1
> > make[1]: *** [_module_/home/ds/tmp/uvc/trunk]
> Error 2
> > make[1]: Leaving directory
> > `/usr/src/linux-2.6.17-16mdv'
> > make: *** [uvcvideo] Error 2
> 
> Could you please test the attached patch and tell me
> if it helps ?
> 
> Best regards,
> 
> Laurent Pinchart
> > Index: uvc_status.c
>
===================================================================
> --- uvc_status.c	(revision 198)
> +++ uvc_status.c	(working copy)
> @@ -43,7 +43,11 @@
>  	input->name = dev->name;
>  	input->phys = phys;
>  	usb_to_input_id(udev, &input->id);
> +#if LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,22)
>  	input->dev.parent = &dev->intf->dev;
> +#else
> +	input->cdev.dev = &dev->intf->dev;
> +#endif
>  
>  	set_bit(EV_KEY, input->evbit);
>  	set_bit(BTN_0, input->keybit);
> 

It seems to compile ok ! 
just a warning on usb_to_input_id :
In function 'uvc_input_init':
uvc_status.c:47: warning: implicit declaration of
function 'usb_to_input_id'
Warning: "usb_to_input_id"
[/mnt/sda2/temp/uvc1/trunk/uvcvideo.ko] undefined!

The uvcvideo.ko is made. I still have no image, but it
must be my fault now. I continue.
Dsant


      _____________________________________________________________________________ 
Envoyez avec Yahoo! Mail. Une boite mail plus intelligente http://mail.yahoo.fr


From laurent.pinchart at skynet.be  Mon Apr  7 16:33:28 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 7 Apr 2008 16:33:28 +0200
Subject: [Linux-uvc-devel] RE : Re:  bug in uvc_status.c ? dev.parent
In-Reply-To: <119604.69005.qm@web28009.mail.ukl.yahoo.com>
References: <119604.69005.qm@web28009.mail.ukl.yahoo.com>
Message-ID: <200804071633.28825.laurent.pinchart@skynet.be>

Hi,

> It seems to compile ok ! 
> just a warning on usb_to_input_id :
> In function 'uvc_input_init':
> uvc_status.c:47: warning: implicit declaration of
> function 'usb_to_input_id'
> Warning: "usb_to_input_id"
> [/mnt/sda2/temp/uvc1/trunk/uvcvideo.ko] undefined!
> 
> The uvcvideo.ko is made. I still have no image, but it
> must be my fault now. I continue.

Here's an updated patch. Could you please try it ?

Best regards,

Laurent Pinchart
-------------- next part --------------
A non-text attachment was scrubbed...
Name: input.diff
Type: text/x-diff
Size: 713 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080407/8f08d7a0/attachment.diff>

From laurent.pinchart at skynet.be  Mon Apr  7 23:28:38 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 7 Apr 2008 23:28:38 +0200
Subject: [Linux-uvc-devel] laptop webcam OOPS
In-Reply-To: <47F94A95.1030701@tenshu.net>
References: <47F38ACB.3010601@tenshu.net>
	<200804061903.28075.laurent.pinchart@skynet.be>
	<47F94A95.1030701@tenshu.net>
Message-ID: <200804072328.38465.laurent.pinchart@skynet.be>

Hi Chris,

On Monday 07 April 2008, Chris Jones wrote:
> Hi
>
> Laurent Pinchart wrote:
> > The bug has been fixed in the latest SVN revision. Thanks for reporting
> > it.
>
> Thank you for the fast reply and patch!
>
> Out of interest, did you change the fix at all from the patch you sent
> me to test?

There was a minor change that shouldn't have any impact.

> I managed to get that patch included in the latest Ubuntu development
> kernel, so the good news is that these cameras should work fine with the
> release of Hardy!

It would be even better if you could get Ubuntu Hardy to pick the latest SVN 
version of the Linux UVC driver :-)

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Apr  7 23:47:31 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 7 Apr 2008 23:47:31 +0200
Subject: [Linux-uvc-devel] Logitech Quickcame deluxe for notebooks
	(046d:09c1) UNSTABLE error -84
In-Reply-To: <d59b0cd40804020410h5ba385e8lb2d6ee1cf8c15ffa@mail.gmail.com>
References: <d59b0cd40804020410h5ba385e8lb2d6ee1cf8c15ffa@mail.gmail.com>
Message-ID: <200804072347.31644.laurent.pinchart@skynet.be>

Hi Daniel,

On Wednesday 02 April 2008, Daniel CABRERA wrote:
> Hi,
>
> I try the latest SVN version 198. The webcam works just fine only for few
> minutes, before dies. I attached the lcpi,lspci,dmesg when I pluged the
> webcam, and the dmesg when the webcam crashed.
>
> I tested with the latest Skype version and the latest verion of luvcview. I
> also tried one of the unsuported patches (
> https://lists.berlios.de/pipermail/linux-uvc-devel/2008-January/002830.html
>) and  it did not work :(
>
> Please let me know what else can I do from my end inorder to make it work?
>
> Do you have any recomendation, workaround  or something else to try ?

The error code returned by the USB stack indicates a low-level problem. This 
can be caused by a faulty device (either hardware or software), a bad cable, 
a noisy electrical environment, ...

Try plugging the device in another USB port. Try the camera on another 
computer if possible to compare the results. Make sure the camera and USB 
cable aren't too close to an electro-magnetic noise source.

Best regards,

Laurent Pinchart


From dsant69 at yahoo.fr  Tue Apr  8 11:50:34 2008
From: dsant69 at yahoo.fr (ds ds)
Date: Tue, 8 Apr 2008 11:50:34 +0200 (CEST)
Subject: [Linux-uvc-devel] RE : Re: RE : Re: bug in uvc_status.c ? dev.parent
In-Reply-To: <200804071633.28825.laurent.pinchart@skynet.be>
Message-ID: <367533.91206.qm@web28008.mail.ukl.yahoo.com>


--- Laurent Pinchart <laurent.pinchart at skynet.be> a
?crit?:

> Hi,
> 
> > It seems to compile ok ! 
> > just a warning on usb_to_input_id :
> > In function 'uvc_input_init':
> > uvc_status.c:47: warning: implicit declaration of
> > function 'usb_to_input_id'
> > Warning: "usb_to_input_id"
> > [/mnt/sda2/temp/uvc1/trunk/uvcvideo.ko] undefined!
> > 
> > The uvcvideo.ko is made. I still have no image,
> but it
> > must be my fault now. I continue.
> 
> Here's an updated patch. Could you please try it ?
> 
> Best regards,
> 
> Laurent Pinchart
> > Index: uvc_status.c
>
===================================================================
> --- uvc_status.c	(revision 199)
> +++ uvc_status.c	(working copy)
> @@ -14,7 +14,11 @@
>  #include <linux/kernel.h>
>  #include <linux/input.h>
>  #include <linux/usb.h>
> +#if LINUX_VERSION_CODE < KERNEL_VERSION(2,6,18)
> +#include <linux/usb_input.h>
> +#else
>  #include <linux/usb/input.h>
> +#endif
>  
>  #include "uvcvideo.h"
>  
> @@ -43,7 +47,11 @@
>  	input->name = dev->name;
>  	input->phys = phys;
>  	usb_to_input_id(udev, &input->id);
> +#if LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,22)
>  	input->dev.parent = &dev->intf->dev;
> +#else
> +	input->cdev.dev = &dev->intf->dev;
> +#endif
>  
>  	set_bit(EV_KEY, input->evbit);
>  	set_bit(BTN_0, input->keybit);
> 

There is a problem : it compile if I don't use the 2
macros (that is, put the lines you gave directly) :
uvc_status.c:18:5: warning: "LINUX_VERSION_CODE" is
not defined
uvc_status.c:18:26: warning: "KERNEL_VERSION" is not
defined
then compilation fails of course.
Are they supposed to be known in bash ?
echo $KERNEL_VERSION
-> gives nothing
I use Mandriva 2007.0


      _____________________________________________________________________________ 
Envoyez avec Yahoo! Mail. Une boite mail plus intelligente http://mail.yahoo.fr


From laurent.pinchart at skynet.be  Tue Apr  8 12:03:08 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 8 Apr 2008 12:03:08 +0200
Subject: [Linux-uvc-devel] RE : Re: RE : Re: bug in uvc_status.c ?
	dev.parent
In-Reply-To: <367533.91206.qm@web28008.mail.ukl.yahoo.com>
References: <367533.91206.qm@web28008.mail.ukl.yahoo.com>
Message-ID: <200804081203.08768.laurent.pinchart@skynet.be>

On Tuesday 08 April 2008 11:50, ds ds wrote:
> 
> --- Laurent Pinchart <laurent.pinchart at skynet.be> a
> ?crit?:
> 
> > Hi,
> > 
> > > It seems to compile ok ! 
> > > just a warning on usb_to_input_id :
> > > In function 'uvc_input_init':
> > > uvc_status.c:47: warning: implicit declaration of
> > > function 'usb_to_input_id'
> > > Warning: "usb_to_input_id"
> > > [/mnt/sda2/temp/uvc1/trunk/uvcvideo.ko] undefined!
> > > 
> > > The uvcvideo.ko is made. I still have no image,
> > but it
> > > must be my fault now. I continue.
> > 
> > Here's an updated patch. Could you please try it ?
> > 
> > Best regards,
> > 
> > Laurent Pinchart
> > > Index: uvc_status.c
> >
> ===================================================================
> > --- uvc_status.c	(revision 199)
> > +++ uvc_status.c	(working copy)
> > @@ -14,7 +14,11 @@
> >  #include <linux/kernel.h>
> >  #include <linux/input.h>
> >  #include <linux/usb.h>
> > +#if LINUX_VERSION_CODE < KERNEL_VERSION(2,6,18)
> > +#include <linux/usb_input.h>
> > +#else
> >  #include <linux/usb/input.h>
> > +#endif
> >  
> >  #include "uvcvideo.h"
> >  
> > @@ -43,7 +47,11 @@
> >  	input->name = dev->name;
> >  	input->phys = phys;
> >  	usb_to_input_id(udev, &input->id);
> > +#if LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,22)
> >  	input->dev.parent = &dev->intf->dev;
> > +#else
> > +	input->cdev.dev = &dev->intf->dev;
> > +#endif
> >  
> >  	set_bit(EV_KEY, input->evbit);
> >  	set_bit(BTN_0, input->keybit);
> > 
> 
> There is a problem : it compile if I don't use the 2
> macros (that is, put the lines you gave directly) :
> uvc_status.c:18:5: warning: "LINUX_VERSION_CODE" is
> not defined
> uvc_status.c:18:26: warning: "KERNEL_VERSION" is not
> defined
> then compilation fails of course.
> Are they supposed to be known in bash ?
> echo $KERNEL_VERSION
> -> gives nothing
> I use Mandriva 2007.0

My bad. Here's an updated patch.

Best regards,

Laurent Pinchart
-------------- next part --------------
A non-text attachment was scrubbed...
Name: input.diff
Type: text/x-diff
Size: 748 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080408/0c0eb99e/attachment.diff>

From dsant69 at yahoo.fr  Tue Apr  8 12:13:22 2008
From: dsant69 at yahoo.fr (ds ds)
Date: Tue, 8 Apr 2008 12:13:22 +0200 (CEST)
Subject: [Linux-uvc-devel] Phillips SPC1300NC on Mandriva 2007.0 kernel
	2.6.17-11mdv
In-Reply-To: <200804071633.28825.laurent.pinchart@skynet.be>
Message-ID: <450365.6643.qm@web28009.mail.ukl.yahoo.com>

> Here's an updated patch. Could you please try it ?
> 
> Best regards,
> 
> Laurent Pinchart
> > Index: uvc_status.c
>
===================================================================
> --- uvc_status.c	(revision 199)
> +++ uvc_status.c	(working copy)
> @@ -14,7 +14,11 @@
>  #include <linux/kernel.h>
>  #include <linux/input.h>
>  #include <linux/usb.h>
> +#if LINUX_VERSION_CODE < KERNEL_VERSION(2,6,18)
> +#include <linux/usb_input.h>
> +#else
>  #include <linux/usb/input.h>
> +#endif
>  
>  #include "uvcvideo.h"
>  
> @@ -43,7 +47,11 @@
>  	input->name = dev->name;
>  	input->phys = phys;
>  	usb_to_input_id(udev, &input->id);
> +#if LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,22)
>  	input->dev.parent = &dev->intf->dev;
> +#else
> +	input->cdev.dev = &dev->intf->dev;
> +#endif
>  
>  	set_bit(EV_KEY, input->evbit);
>  	set_bit(BTN_0, input->keybit);
> 

There seems to be a problem :
Apr  8 13:01:21 ibm kernel: usb 1-1: new full speed
USB device using uhci_hcd and address 5
Apr  8 13:01:21 ibm kernel: usb 1-1: config 1 has an
invalid descriptor of length 7, skipping remainder of
the config
Apr  8 13:01:21 ibm kernel: usb 1-1: configuration #1
chosen from 1 choice
Apr  8 13:01:21 ibm kernel: uvcvideo: Found UVC 1.00
device Philips SPC 1300NC Webcam (0471:0331)
Apr  8 13:01:21 ibm kernel: input: Philips SPC 1300NC
Webcam as /class/input/input2
Apr  8 13:01:24 ibm kernel: 5:3:1 : no or invalid
class specific endpoint descriptor
Apr  8 13:01:24 ibm kernel: usbcore: registered new
driver snd-usb-audio



      _____________________________________________________________________________ 
Envoyez avec Yahoo! Mail. Une boite mail plus intelligente http://mail.yahoo.fr


From dsant69 at yahoo.fr  Tue Apr  8 12:20:25 2008
From: dsant69 at yahoo.fr (ds ds)
Date: Tue, 8 Apr 2008 12:20:25 +0200 (CEST)
Subject: [Linux-uvc-devel] RE : Re: RE : Re: RE : Re: bug in uvc_status.c ?
	dev.parent
In-Reply-To: <200804081203.08768.laurent.pinchart@skynet.be>
Message-ID: <782737.8522.qm@web28008.mail.ukl.yahoo.com>

> > 
> > There is a problem : it compile if I don't use the
> 2
> > macros (that is, put the lines you gave directly)
> :
> > uvc_status.c:18:5: warning: "LINUX_VERSION_CODE"
> is
> > not defined
> > uvc_status.c:18:26: warning: "KERNEL_VERSION" is
> not
> > defined
> > then compilation fails of course.
> > Are they supposed to be known in bash ?
> > echo $KERNEL_VERSION
> > -> gives nothing
> > I use Mandriva 2007.0
> 
> My bad. Here's an updated patch.
> 
> Best regards,
> 
> Laurent Pinchart
> > Index: uvc_status.c
>
===================================================================
> --- uvc_status.c	(revision 199)
> +++ uvc_status.c	(working copy)
> @@ -12,9 +12,14 @@
>   */
>  
>  #include <linux/kernel.h>
> +#include <linux/version.h>
>  #include <linux/input.h>
>  #include <linux/usb.h>
> +#if LINUX_VERSION_CODE < KERNEL_VERSION(2,6,18)
> +#include <linux/usb_input.h>
> +#else
>  #include <linux/usb/input.h>
> +#endif
>  
>  #include "uvcvideo.h"
>  
> @@ -43,7 +48,11 @@
>  	input->name = dev->name;
>  	input->phys = phys;
>  	usb_to_input_id(udev, &input->id);
> +#if LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,22)
>  	input->dev.parent = &dev->intf->dev;
> +#else
> +	input->cdev.dev = &dev->intf->dev;
> +#endif
>  
>  	set_bit(EV_KEY, input->evbit);
>  	set_bit(BTN_0, input->keybit);
> 

It compiles ok now. And I have learn a few things :)


      _____________________________________________________________________________ 
Envoyez avec Yahoo! Mail. Une boite mail plus intelligente http://mail.yahoo.fr


From mythtv at email.it  Tue Apr  8 21:58:33 2008
From: mythtv at email.it (Franco)
Date: Tue, 08 Apr 2008 21:58:33 +0200
Subject: [Linux-uvc-devel] SPC1300NC : better, but still troubles
In-Reply-To: <20080214073139.GA19113@plankton.ifup.org>
References: <47B31BAC.8030905@gmail.com>
	<47B31CA7.5000100@tiscali.it>	<20080214073139.GA19113@plankton.ifup.org>
Message-ID: <47FBCE69.1010400@email.it>

Hi,

I just downloaded, compiled and installed the latest uvcvideo on both 
computers (two identical installs, Fedora Core 8 + SPC1300NC, on a LAN)

Now, when I try to videoconference with skype, video does not hang 
everything like before, it "just" stops the audio on both computers;
if I then stop video transmission on BOTH computers, audio trasmission 
restarts. This is considerably better than before (PCs were jammed till 
next reboot)

Franco




From jan at willies.info  Thu Apr 10 19:55:46 2008
From: jan at willies.info (Jan Willies)
Date: Thu, 10 Apr 2008 10:55:46 -0700
Subject: [Linux-uvc-devel] success: Chicony Electronics USB2.0 1.3M UVC
	WebCam (Asus F6S)
Message-ID: <47FE54A2.1020401@willies.info>

Hi,

I want to report success with linux-uvc and the webcam in my new Asus 
F6S laptop:

Apr  9 23:47:50 jan Linux video capture interface: v2.00
Apr  9 23:47:50 jan uvcvideo: Found UVC 1.00 device USB2.0 1.3M UVC 
WebCam (04f2:b029)
Apr  9 23:47:50 jan input: USB2.0 1.3M UVC WebCam as /class/input/input10
Apr  9 23:47:50 jan usbcore: registered new interface driver uvcvideo
Apr  9 23:47:50 jan USB Video Class driver (SVN r200)

Bus 002 Device 002: ID 04f2:b029 Chicony Electronics Co., Ltd


Is there a chance to get the full 1.3MP sometime? The quick test with 
mplayer just reports 640x480:

jan at jan ~ $ mplayer -fps 30 tv://
MPlayer 1.0rc2-4.2.3 (C) 2000-2007 MPlayer Team
CPU: Intel(R) Core(TM)2 Duo CPU     T8300  @ 2.40GHz (Family: 6, Model: 
23, Stepping: 6)
CPUflags:  MMX: 1 MMX2: 1 3DNow: 0 3DNow2: 0 SSE: 1 SSE2: 1
Compiled with runtime CPU detection.
115 audio & 237 video codecs

Playing tv://.
TV file format detected.
Selected driver: v4l2
 name: Video 4 Linux 2 input
 author: Martin Olschewski <olschewski at zpr.uni-koeln.de>
 comment: first try, more to come ;-)
v4l2: ioctl get standard failed: Invalid argument
Selected device: USB2.0 1.3M UVC WebCam
 Capabilites:  video capture  streaming
 supported norms:
 inputs: 0 = Camera 1;
 Current input: 0
 Current format: YUYV
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
tv.c: norm_from_string(pal): Bogus norm parameter, setting default.
v4l2: ioctl enum norm failed: Invalid argument
Error: Cannot set norm!
Selected input hasn't got a tuner!
v4l2: ioctl set mute failed: Invalid argument
==========================================================================
Opening video decoder: [raw] RAW Uncompressed Video
VDec: vo config request - 640 x 480 (preferred colorspace: Packed YUY2)
VDec: using Packed YUY2 as output csp (no 0)
Movie-Aspect is undefined - no prescaling applied.
VO: [xv] 640x480 => 640x480 Packed YUY2
Selected video codec: [rawyuy2] vfm: raw (RAW YUY2)
==========================================================================
Audio: no sound
FPS forced to be 30.000  (ftime: 0.033).
Starting playback...
v4l2: select timeout ??% ??,?% 0 0
V:   0.0 124/124  0%  0%  0.0% 0 0


BTW, it even works with Skype. I didn't do any calls, but the test in 
options was working without crashing Skype (the wiki mentioned it might 
be a little unstable).


Keep up the great work

- Jan


From laurent.pinchart at skynet.be  Thu Apr 10 11:33:31 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 10 Apr 2008 11:33:31 +0200
Subject: [Linux-uvc-devel] success: Chicony Electronics USB2.0 1.3M UVC
	WebCam (Asus F6S)
In-Reply-To: <47FE54A2.1020401@willies.info>
References: <47FE54A2.1020401@willies.info>
Message-ID: <200804101133.31205.laurent.pinchart@skynet.be>

Hi Jan,

On Thursday 10 April 2008 19:55, Jan Willies wrote:
> Hi,
> 
> I want to report success with linux-uvc and the webcam in my new Asus 
> F6S laptop:
> 
> Apr  9 23:47:50 jan Linux video capture interface: v2.00
> Apr  9 23:47:50 jan uvcvideo: Found UVC 1.00 device USB2.0 1.3M UVC 
> WebCam (04f2:b029)
> Apr  9 23:47:50 jan input: USB2.0 1.3M UVC WebCam as /class/input/input10
> Apr  9 23:47:50 jan usbcore: registered new interface driver uvcvideo
> Apr  9 23:47:50 jan USB Video Class driver (SVN r200)
> 
> Bus 002 Device 002: ID 04f2:b029 Chicony Electronics Co., Ltd

Thanks for the report. Could you please send me the output of

lsusb -v -d 04f2:b029

with usbutils 0.72 or newer (0.73+ preferred) ?

> Is there a chance to get the full 1.3MP sometime? The quick test with 
> mplayer just reports 640x480:

I'd like to see the lsusb output to answer that :-)

Best regards,

Laurent Pinchart


From jan at willies.info  Thu Apr 10 20:40:39 2008
From: jan at willies.info (Jan Willies)
Date: Thu, 10 Apr 2008 11:40:39 -0700
Subject: [Linux-uvc-devel] success: Chicony Electronics USB2.0 1.3M UVC
 WebCam (Asus F6S)
In-Reply-To: <200804101133.31205.laurent.pinchart@skynet.be>
References: <47FE54A2.1020401@willies.info>
	<200804101133.31205.laurent.pinchart@skynet.be>
Message-ID: <47FE5F27.10805@willies.info>

Hi Laurent,

Laurent Pinchart wrote:
> On Thursday 10 April 2008 19:55, Jan Willies wrote:
>   
>> Hi,
>>
>> I want to report success with linux-uvc and the webcam in my new Asus 
>> F6S laptop:
>>
>> Apr  9 23:47:50 jan Linux video capture interface: v2.00
>> Apr  9 23:47:50 jan uvcvideo: Found UVC 1.00 device USB2.0 1.3M UVC 
>> WebCam (04f2:b029)
>> Apr  9 23:47:50 jan input: USB2.0 1.3M UVC WebCam as /class/input/input10
>> Apr  9 23:47:50 jan usbcore: registered new interface driver uvcvideo
>> Apr  9 23:47:50 jan USB Video Class driver (SVN r200)
>>
>> Bus 002 Device 002: ID 04f2:b029 Chicony Electronics Co., Ltd
>>     
>
> Thanks for the report. Could you please send me the output of
>
> lsusb -v -d 04f2:b029
>
> with usbutils 0.72 or newer (0.73+ preferred) ?
>   
root at jan ~ # lsusb -V
lsusb (usbutils) 0.73
root at jan ~ # lsusb -v -d 04f2:b029

Bus 002 Device 002: ID 04f2:b029 Chicony Electronics Co., Ltd
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x04f2 Chicony Electronics Co., Ltd
  idProduct          0xb029
  bcdDevice           51.66
  iManufacturer           2 Chicony Electronics Co., Ltd.
  iProduct                1 USB2.0 1.3M UVC WebCam
  iSerial                 3 SN0001
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          591
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower               98mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               1 USB2.0 1.3M UVC WebCam
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              1 USB2.0 1.3M UVC WebCam
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength          103
        dwClockFrequency       15.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               5
        iTerminal               0
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {7033f028-1163-2e4a-ba2c-6890eb334016}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          3
        bControlSize            1
        bmControls( 0)       0x0f
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 5
        guidExtensionCode         {3fae1228-d7bc-114e-a357-6f1edef7d61d}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          4
        bControlSize            1
        bmControls( 0)       0x00
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000000
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000053f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          Backlight Compensation
          Power Line Frequency
        iProcessing             0
        bmVideoStandards     0x 0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                        1
        wTotalLength                      345
        bEndPointAddress                  129
        bmInfo                              0
        bTerminalLink                       2
        bStillCaptureMethod                 0
        bTriggerSupport                     1
        bTriggerUsage                       0
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                7
        guidFormat                            
{59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            46
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   614400
        dwMaxBitRate                 18432000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  5
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            46
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   202752
        dwMaxBitRate                  6082560
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  5
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            46
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   153600
        dwMaxBitRate                  4608000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  5
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            46
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                    50688
        dwMaxBitRate                  1520640
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  5
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            46
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                    38400
        dwMaxBitRate                  1152000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  5
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            500000
        dwFrameInterval( 2)            666666
        dwFrameInterval( 3)           1000000
        dwFrameInterval( 4)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                           960
        dwMinBitRate                  2457600
        dwMaxBitRate                 19660800
        dwMaxVideoFrameBufferSize     2457600
        dwDefaultFrameInterval        1333333
        bFrameIntervalType                  2
        dwFrameInterval( 0)           1333333
        dwFrameInterval( 1)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         7
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                  2621440
        dwMaxBitRate                 19660800
        dwMaxVideoFrameBufferSize     2621440
        dwDefaultFrameInterval        1333333
        bFrameIntervalType                  2
        dwFrameInterval( 0)           1333333
        dwFrameInterval( 1)           2000000
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b20  2x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1320  3x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 1024 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)

>> Is there a chance to get the full 1.3MP sometime? The quick test with 
>> mplayer just reports 640x480:
>>     
>
> I'd like to see the lsusb output to answer that :-)
>   
- Jan


From silvan.calarco at mambasoft.it  Thu Apr 10 21:31:45 2008
From: silvan.calarco at mambasoft.it (Silvan Calarco)
Date: Thu, 10 Apr 2008 21:31:45 +0200
Subject: [Linux-uvc-devel] isight patch against rev. 200 for MacBookPro1,1
Message-ID: <200804102131.45766.silvan.calarco@mambasoft.it>

Hello,
the simple attached patch fixes support for isight cam on my MacBookPro 1.1 
against today's svn release (200).

Another little thing: there is a small error on the supported devices list at 
http://linux-uvc.berlios.de/, the iSight Device ID reported is 05ac:8502 but 
the correct one is 05ac:8501

Thank you for your attention.

Cheers,
Silvan

-- 
mambaSoft
Via Barletta 90 - 10136 Torino
E-mail: silvan.calarco at mambasoft.it
Web: http://www.mambasoft.it

openmamba GNU/Linux development @ http://www.openmamba.org
-------------- next part --------------
A non-text attachment was scrubbed...
Name: linux-uvc-0.1.0.svn20080410-isight.patch
Type: text/x-diff
Size: 1288 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080410/31f112b4/attachment.patch>

From l.schimmer at cgv.tugraz.at  Fri Apr 11 13:44:24 2008
From: l.schimmer at cgv.tugraz.at (Lars Schimmer)
Date: Fri, 11 Apr 2008 13:44:24 +0200
Subject: [Linux-uvc-devel] Microsoft VX 7000?
Message-ID: <47FF4F18.90101@cgv.tugraz.at>

Hi!

Any chance for MS VX7000 webcam?
Attached lspci output.

Cya
Lars Schimmer
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: lsusb.txt
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080411/bf65deec/attachment.txt>

From admin at tinypad.net  Fri Apr 11 19:16:51 2008
From: admin at tinypad.net (tinypad.net)
Date: Fri, 11 Apr 2008 13:16:51 -0400
Subject: [Linux-uvc-devel] HP Webcam
In-Reply-To: <ef69c11a0804111012v7a479152g3124cd1415216af2@mail.gmail.com>
References: <ef69c11a0804111012v7a479152g3124cd1415216af2@mail.gmail.com>
Message-ID: <ef69c11a0804111016h312bcf7at1fa5e1165a164def@mail.gmail.com>

The HP Webcam on the HP Pavilion DV9500 works with the UVC driver. It's
vendor is listed as SuYin.

Bus 002 Device 002: ID 064e:a101 Suyin Corp.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080411/d24b4349/attachment.html>

From herton at mandriva.com.br  Fri Apr 11 20:09:21 2008
From: herton at mandriva.com.br (Herton Ronaldo Krzesinski)
Date: Fri, 11 Apr 2008 15:09:21 -0300
Subject: [Linux-uvc-devel] Please test this USB EHCI patch
In-Reply-To: <200803252154.58492.laurent.pinchart@skynet.be>
References: <200803252154.58492.laurent.pinchart@skynet.be>
Message-ID: <200804111509.21952.herton@mandriva.com.br>

Em Tuesday 25 March 2008 17:54:58 Laurent Pinchart escreveu:
> Hi everybody,
> 
> some people have run into EHCI-related issue where the video would freeze and 
> the Linux UVC driver would print "uvcvideo: Failed to resubmit video URB 
> (-45)" errors after a while.
> 
> Alan Stern was kind enough to write a quick patch to try to solve the issue. 
> Could you please test it and report the results ? I'm particularly interested 
> in hearing from people who ran into the -45 error frequently. Please retest 
> your camera without the patch, make sure you can reproduce the problem 
> accurately, and try to recompile your kernel with the patch applied.
> 
> Thanks in advance for your help.

I'm testing the patch here now, until now no problems, I have one laptop here
where this occurs:
- Before Alan's patch: -45 errors in less than 10 minutes of streaming.
- After the patch: already running for at least 1 hour and no problems.

Sorry that I may be reporting this too late, may be the patch is already
included or scheduled for inclusion.

Thanks a lot to you and Alan.

> 
> Best regards,
> 
> Laurent Pinchart
> 
> ----------  Forwarded Message  ----------
> 
> Subject: Re: ehci-hcd issue with webcam / uvcvideo driver
> Date: Tuesday 25 March 2008
> From: Alan Stern <stern at rowland.harvard.edu>
> To: Malte Gell <malte.gell at gmx.de>, Laurent Pinchart 
> <laurent.pinchart at skynet.be>
> 
> On Tue, 25 Mar 2008, Laurent Pinchart wrote:
> 
> > Regardless of the userspace application and the kind of USB device, I don't 
> > think the EHCI driver should return -EL2NSYNC upon URB submission when the 
> > URB_ISO_ASAP is set in the transfer_flags field.
> 
> You're right; it shouldn't.  Here's a patch that attempts to fix the 
> bug.  Let me know how it behaves.
> 
> Alan Stern

--
[]'s
Herton


From julian at selectparks.net  Sat Apr 12 02:41:25 2008
From: julian at selectparks.net (Julian Oliver)
Date: Sat, 12 Apr 2008 02:41:25 +0200
Subject: [Linux-uvc-devel] // Quickcam Pro 9000 and uvcdynctrl woes //
In-Reply-To: <ef69c11a0804111016h312bcf7at1fa5e1165a164def@mail.gmail.com>
References: <ef69c11a0804111012v7a479152g3124cd1415216af2@mail.gmail.com>
	<ef69c11a0804111016h312bcf7at1fa5e1165a164def@mail.gmail.com>
Message-ID: <20080412004125.GE20097@selectparks.net>

hi,

i have a Quickcam Pro 9000 and will be using it in an electronic art
exhibition in the computer vision component. while the driver
performance under is certainly great - even at 960x720 - i've had little
luck using uvcdynctrl-0.2 (latest svn). i would like to use it so that i
can turn off autoexposure when the gallery assistants reboot the machine
as luvcview is not an option for them. no module params seem to be
exposed either, at least from modinfo's perspective.

this is the output i'm getting:

    $ uvcdynctrl -l
    [libwebcam] Unknown V4L2 control ID encountered: 10094849
    [libwebcam] Unknown V4L2 control ID encountered: 10094850
    [libwebcam] Unknown V4L2 control ID encountered: 10094851
    Listing available devices:  video0   UVC Camera (046d:0990)

while i can set some controls using uvcdynctrl, like Sharpness, i cannot
get or set others (like 'Exposure, Auto'):

    $ uvcdynctrl-0.2 -v --get="Exposure, Auto"
    [libwebcam] Unknown V4L2 control ID encountered: 10094849
    [libwebcam] Unknown V4L2 control ID encountered: 10094850
    [libwebcam] Unknown V4L2 control ID encountered: 10094851
    ERROR: Unknown control specified.

despite this control appearing in --clist output.

any tips here? something i'm missing?

i'm building against:

    2.6.24-1-686

cheers!

-- 
julian oliver
http://julianoliver.com
http://selectparks.net
messages containing HTML will not be read.


From richard at 2008.atterer.net  Sat Apr 12 13:07:33 2008
From: richard at 2008.atterer.net (Richard Atterer)
Date: Sat, 12 Apr 2008 13:07:33 +0200
Subject: [Linux-uvc-devel] // Quickcam Pro 9000 and uvcdynctrl woes //
In-Reply-To: <20080412004125.GE20097@selectparks.net>
References: <ef69c11a0804111012v7a479152g3124cd1415216af2@mail.gmail.com>
	<ef69c11a0804111016h312bcf7at1fa5e1165a164def@mail.gmail.com>
	<20080412004125.GE20097@selectparks.net>
Message-ID: <20080412110733.GA3172@vilya>

The userspace side of dynamic controls can be really irritating. Wouldn't 
it be possible to have a sysfs-based interface, so that when you know that 
"Exposure, Auto Priority" has the ID 0x0000200e, you can set/get it with an 
echo/cat command?

IMHO, the kernel driver could even provide the mapping 0x0000200e => 
"Exposure, Auto Priority" without any maintenance problems. Laurent, 
pleeease! ;-)

On Sat, Apr 12, 2008 at 02:41:25AM +0200, Julian Oliver wrote:
> i have a Quickcam Pro 9000 [...]
> i would like to use it so that i can turn off autoexposure when the 
> gallery assistants reboot the machine as luvcview is not an option for 
> them. no module params seem to be exposed either, at least from modinfo's 
> perspective.

Try with an older version of the kernel driver, the current one breaks 
uvcdynctrl. Unfortunately, I don't know which one my partially working 
kernel module was built from... Various uvcdynctrl commands fail, but what 
I could still change yesterday was this:
uvcdynctrl-0.2 -s 'Exposure, Auto Priority' 0
(Today, it doesn't work. Grrr.)

After that, e.g. mplayer and gstreamer could set the fps:
mplayer -tv driver=v4l2:width=640:height=480:device=/dev/video0:fps=30:outfmt=yuy2 tv://
gst-launch v4l2src ! video/x-raw-yuv, width=640, height=480, framerate=\(fraction\)30/1 ! autovideosink

Cheers,

  Richard

-- 
  __   _
  |_) /|  Richard Atterer     |  GnuPG key: 888354F7
  | \/?|  http://atterer.net  |  08A9 7B7D 3D13 3EF2 3D25  D157 79E6 F6DC 8883 54F7
  ? '` ?


From fragabr at gmail.com  Sun Apr 13 16:20:13 2008
From: fragabr at gmail.com (=?ISO-8859-1?Q?D=E2niel?= Fraga)
Date: Sun, 13 Apr 2008 11:20:13 -0300
Subject: [Linux-uvc-devel] Linux Driver Project status report and V4L
Message-ID: <20080413112013.4eee3d6f@tux.abusar.org.br>

http://lwn.net/Articles/276973/

	An interesting excerpt:

"As for video input devices, there is an active Linux developer
community in this area, but they seem to be hampered by a different
development model (Mecurial trees outside of the main kernel source),
and a lack of full-time developers, not to mention a high degree of
inter-personal conflicts that seem quite strange to outsiders.  Support
for a large majority of these devices is slowly trickling into the main
kernel tree, the most important being the USB Video class driver, which
will support almost all new USB video devices in the future, thereby
removing the major problem most users will face when purchasing a new
video device".

	***

	I agree. With the future inclusion of USB Video class driver,
V4L will get a boost by supporting many yet not officialy supported
devices (lots of webcams for instance). Of course they bring new
challenges, but it will be a good thing, I think.

	Thanks everybody for the great work.

-- 
Linux 2.6.24: Arr Matey! A Hairy Bilge Rat!
http://u-br.net
 - "The Future Sound Of London - Cascade" (Groove Salad: a nicely
chilled plate of ambient beats and grooves. [SomaFM])




From conrad_videokonferenz at gmx.de  Sun Apr 13 17:11:40 2008
From: conrad_videokonferenz at gmx.de (Conrad Beckert)
Date: Sun, 13 Apr 2008 17:11:40 +0200
Subject: [Linux-uvc-devel] uvc - cam on Linphone and Ekiga?
Message-ID: <20080413151140.232570@gmx.net>

Hi,

has anyone successfully tried to run Linphone and/or Ekga with an Acer Travelmate's 064e:a101 Suyin Corp. cam.

I only get a black (linphone) or green (Ekiga) image. 

Thank you for help

Conrad

PS: This is what my syslog says:
Apr 13 15:10:49 becconmobil kernel: [  130.864603] uvcvideo: Found UVC 1.00 device Acer CrystalEye webcam (064e:a101)
Apr 13 15:10:49 becconmobil kernel: [  464.354228] uvcvideo: Failed to query (1) UVC control 2 (unit 0) : -71 (exp. 26).
Apr 13 15:10:49 becconmobil kernel: [  464.354231] uvcvideo 6-1:1.1: resume error -5
 


From laurent.pinchart at skynet.be  Sun Apr 13 21:38:52 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 13 Apr 2008 21:38:52 +0200
Subject: [Linux-uvc-devel] Microsoft VX 7000?
In-Reply-To: <47FF4F18.90101@cgv.tugraz.at>
References: <47FF4F18.90101@cgv.tugraz.at>
Message-ID: <200804132138.52574.laurent.pinchart@skynet.be>

Hi Lars,

On Friday 11 April 2008, Lars Schimmer wrote:
> Hi!
>
> Any chance for MS VX7000 webcam?

The camera seems UVC compatible. It should work with the driver. If it 
doesn't, please provide error messages and kernel log dumps.

> Attached lspci output.

That was lsusb :-)

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Apr 13 22:34:16 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 13 Apr 2008 22:34:16 +0200
Subject: [Linux-uvc-devel] isight patch against rev. 200 for MacBookPro1,
	1
In-Reply-To: <200804102131.45766.silvan.calarco@mambasoft.it>
References: <200804102131.45766.silvan.calarco@mambasoft.it>
Message-ID: <200804132234.16887.laurent.pinchart@skynet.be>

Hi Silvan,

On Thursday 10 April 2008, Silvan Calarco wrote:
> Hello,
> the simple attached patch fixes support for isight cam on my MacBookPro 1.1
> against today's svn release (200).

Thanks for the patch. As the frame format GUID reported by your firmware 
version is incorrect, I'm not sure if the fix belongs to the UVC driver or to 
the ift-extract tool. I'll discuss the issue with Etienne and we'll keep you 
informed.

> Another little thing: there is a small error on the supported devices list
> at http://linux-uvc.berlios.de/, the iSight Device ID reported is 05ac:8502
> but the correct one is 05ac:8501

05ac:8501 is supposed to be the device ID before loading the firmware, and 
05ac:8502 after loading the firmware. Could you double-check ?

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Apr 13 23:17:48 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 13 Apr 2008 23:17:48 +0200
Subject: [Linux-uvc-devel] // Quickcam Pro 9000 and uvcdynctrl woes //
In-Reply-To: <20080412004125.GE20097@selectparks.net>
References: <ef69c11a0804111012v7a479152g3124cd1415216af2@mail.gmail.com>
	<ef69c11a0804111016h312bcf7at1fa5e1165a164def@mail.gmail.com>
	<20080412004125.GE20097@selectparks.net>
Message-ID: <200804132317.48618.laurent.pinchart@skynet.be>

Hi Julian,

On Saturday 12 April 2008, Julian Oliver wrote:
> hi,
>
> i have a Quickcam Pro 9000 and will be using it in an electronic art
> exhibition in the computer vision component. while the driver
> performance under is certainly great - even at 960x720 - i've had little
> luck using uvcdynctrl-0.2 (latest svn). i would like to use it so that i
> can turn off autoexposure when the gallery assistants reboot the machine
> as luvcview is not an option for them. no module params seem to be
> exposed either, at least from modinfo's perspective.
>
> this is the output i'm getting:
>
>     $ uvcdynctrl -l
>     [libwebcam] Unknown V4L2 control ID encountered: 10094849
>     [libwebcam] Unknown V4L2 control ID encountered: 10094850
>     [libwebcam] Unknown V4L2 control ID encountered: 10094851
>     Listing available devices:  video0   UVC Camera (046d:0990)
>
> while i can set some controls using uvcdynctrl, like Sharpness, i cannot
> get or set others (like 'Exposure, Auto'):
>
>     $ uvcdynctrl-0.2 -v --get="Exposure, Auto"
>     [libwebcam] Unknown V4L2 control ID encountered: 10094849
>     [libwebcam] Unknown V4L2 control ID encountered: 10094850
>     [libwebcam] Unknown V4L2 control ID encountered: 10094851
>     ERROR: Unknown control specified.
>
> despite this control appearing in --clist output.
>
> any tips here? something i'm missing?
>
> i'm building against:
>
>     2.6.24-1-686

This is a known problem:

"Important note: libwebcam 0.1.1 is not fully compatible with revisions of the 
UVC driver later than 178. Until libwebcam 0.1.2 is available, users are 
advised to use uvcvideo r178."

(http://www.quickcamteam.net/software/libwebcam/)

Control IDs have recently changed in the driver to match new controls 
introduced in the V4L2 API. Now that the UVC standard controls are part of 
the official V4L2 API, they shouldn't change anymore.

As a quick & dirty workaround, try to recompile libwebcam (0.1.1) with 
uvcvideo.h and uvc_compat.h from the driver sources. You will run into 
compilation issues in libwebcam.c. Commenting the 2 faulty lines should work 
around the problem.

For uvcdynctrl and libwebcam issues, you might get more help in the 
quickcamteam.net forums.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Apr 13 23:25:38 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 13 Apr 2008 23:25:38 +0200
Subject: [Linux-uvc-devel] // Quickcam Pro 9000 and uvcdynctrl woes //
In-Reply-To: <20080412110733.GA3172@vilya>
References: <ef69c11a0804111012v7a479152g3124cd1415216af2@mail.gmail.com>
	<20080412004125.GE20097@selectparks.net>
	<20080412110733.GA3172@vilya>
Message-ID: <200804132325.38556.laurent.pinchart@skynet.be>

Hi Richard,

On Saturday 12 April 2008, Richard Atterer wrote:
> The userspace side of dynamic controls can be really irritating. Wouldn't
> it be possible to have a sysfs-based interface, so that when you know that
> "Exposure, Auto Priority" has the ID 0x0000200e, you can set/get it with an
> echo/cat command?
>
> IMHO, the kernel driver could even provide the mapping 0x0000200e =>
> "Exposure, Auto Priority" without any maintenance problems. Laurent,
> pleeease! ;-)

This is not a dynamic control issue.

New controls have recently been added to the V4L2 API. This resulted in a 
binary compatibility problem for application compiled against the uvcvideo.h 
and uvc_compat.h header files. Those application will unfortunately have to 
be recompiled if they reference controls by their ID.

The sysfs interface is a good idea and something I might implement in the 
future. There have been discussions about how to implement that in a generic 
way at the videodev level.

I'm not sure what you mean by a "mapping 0x0000200e => Exposure, Auto 
Priority". The driver can be queried to enumerate controls. For each of them 
it will return the control ID and name. This is part of the V4L2 API.

Best regards,

Laurent Pinchart



From laurent.pinchart at skynet.be  Sun Apr 13 23:35:18 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 13 Apr 2008 23:35:18 +0200
Subject: [Linux-uvc-devel] Please test this USB EHCI patch
In-Reply-To: <200804111509.21952.herton@mandriva.com.br>
References: <200803252154.58492.laurent.pinchart@skynet.be>
	<200804111509.21952.herton@mandriva.com.br>
Message-ID: <200804132335.19052.laurent.pinchart@skynet.be>

Hi Herton,

On Friday 11 April 2008, Herton Ronaldo Krzesinski wrote:
> Em Tuesday 25 March 2008 17:54:58 Laurent Pinchart escreveu:
> > Hi everybody,
> >
> > some people have run into EHCI-related issue where the video would freeze
> > and the Linux UVC driver would print "uvcvideo: Failed to resubmit video
> > URB (-45)" errors after a while.
> >
> > Alan Stern was kind enough to write a quick patch to try to solve the
> > issue. Could you please test it and report the results ? I'm particularly
> > interested in hearing from people who ran into the -45 error frequently.
> > Please retest your camera without the patch, make sure you can reproduce
> > the problem accurately, and try to recompile your kernel with the patch
> > applied.
> >
> > Thanks in advance for your help.
>
> I'm testing the patch here now, until now no problems, I have one laptop
> here where this occurs:
> - Before Alan's patch: -45 errors in less than 10 minutes of streaming.
> - After the patch: already running for at least 1 hour and no problems.
>
> Sorry that I may be reporting this too late, may be the patch is already
> included or scheduled for inclusion.

Thanks for the report. The patch will hopefully make it in 2.6.26.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun Apr 13 23:51:43 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 13 Apr 2008 23:51:43 +0200
Subject: [Linux-uvc-devel] Linux Driver Project status report and V4L
In-Reply-To: <20080413112013.4eee3d6f@tux.abusar.org.br>
References: <20080413112013.4eee3d6f@tux.abusar.org.br>
Message-ID: <200804132351.43265.laurent.pinchart@skynet.be>

Hi D?niel,

On Sunday 13 April 2008, D?niel Fraga wrote:
> http://lwn.net/Articles/276973/
>
> 	An interesting excerpt:
>
> "As for video input devices, there is an active Linux developer
> community in this area, but they seem to be hampered by a different
> development model (Mecurial trees outside of the main kernel source),
> and a lack of full-time developers, not to mention a high degree of
> inter-personal conflicts that seem quite strange to outsiders.  Support
> for a large majority of these devices is slowly trickling into the main
> kernel tree, the most important being the USB Video class driver, which
> will support almost all new USB video devices in the future, thereby
> removing the major problem most users will face when purchasing a new
> video device".
>
> 	***

Thanks for the link.

> 	I agree. With the future inclusion of USB Video class driver,
> V4L will get a boost by supporting many yet not officialy supported
> devices (lots of webcams for instance). Of course they bring new
> challenges, but it will be a good thing, I think.

I wouldn't be working on the driver if there were no challenges :-)

> 	Thanks everybody for the great work.

You're welcome.

Best regards,

Laurent Pinchart


From silvan.calarco at mambasoft.it  Mon Apr 14 05:29:48 2008
From: silvan.calarco at mambasoft.it (Silvan Calarco)
Date: Mon, 14 Apr 2008 05:29:48 +0200
Subject: [Linux-uvc-devel] isight patch against rev. 200 for MacBookPro1,
	1
In-Reply-To: <200804132234.16887.laurent.pinchart@skynet.be>
References: <200804102131.45766.silvan.calarco@mambasoft.it>
	<200804132234.16887.laurent.pinchart@skynet.be>
Message-ID: <200804140529.48834.silvan.calarco@mambasoft.it>

Hi Laurent,
here the device ID before loading the firmware is:

Bus 005 Device 003: ID 05ac:8300 Apple Computer, Inc. Built-in iSight (no 
firmware loaded)

and after it is:

Bus 005 Device 007: ID 05ac:8501 Apple Computer, Inc. Built-in iSight 
[Micron]. 

Current uvc_driver.c refers just to 05ac:8501 as well.

About the patch, thanks for the hint: I had an old isight firmware file 
in /lib/firmware so I've extracted it again using the latest ift-extract and 
I got the driver work without my patch. 

Cheers,
Silvan

> Hi Silvan,
>
> On Thursday 10 April 2008, Silvan Calarco wrote:
> > Hello,
> > the simple attached patch fixes support for isight cam on my MacBookPro
> > 1.1 against today's svn release (200).
>
> Thanks for the patch. As the frame format GUID reported by your firmware
> version is incorrect, I'm not sure if the fix belongs to the UVC driver or
> to the ift-extract tool. I'll discuss the issue with Etienne and we'll keep
> you informed.
>
> > Another little thing: there is a small error on the supported devices
> > list at http://linux-uvc.berlios.de/, the iSight Device ID reported is
> > 05ac:8502 but the correct one is 05ac:8501
>
> 05ac:8501 is supposed to be the device ID before loading the firmware, and
> 05ac:8502 after loading the firmware. Could you double-check ?
>
> Cheers,
>
> Laurent Pinchart



-- 
mambaSoft di Calarco Silvan
Tel: +39 011 5694078
Fax: +39 011 19790084
Web: http://www.mambasoft.it

mambaSoft Store @ http://shop.mambasoft.it
openmamba GNU/Linux development @ http://www.openmamba.org


From richard at 2008.atterer.net  Mon Apr 14 11:10:38 2008
From: richard at 2008.atterer.net (Richard Atterer)
Date: Mon, 14 Apr 2008 11:10:38 +0200
Subject: [Linux-uvc-devel] // Quickcam Pro 9000 and uvcdynctrl woes //
In-Reply-To: <200804132325.38556.laurent.pinchart@skynet.be>
References: <ef69c11a0804111012v7a479152g3124cd1415216af2@mail.gmail.com>
	<20080412004125.GE20097@selectparks.net>
	<20080412110733.GA3172@vilya>
	<200804132325.38556.laurent.pinchart@skynet.be>
Message-ID: <20080414091038.GA5197@fluff.lan>

Hello,

On Sun, Apr 13, 2008 at 11:25:38PM +0200, Laurent Pinchart wrote:
> On Saturday 12 April 2008, Richard Atterer wrote:
> > IMHO, the kernel driver could even provide the mapping 0x0000200e => 
> > "Exposure, Auto Priority" without any maintenance problems.
[...]
> I'm not sure what you mean by a "mapping 0x0000200e => Exposure, Auto 
> Priority". The driver can be queried to enumerate controls. For each of 
> them it will return the control ID and name. This is part of the V4L2 API.

I was thinking of additional, vendor-specific controls that are not part of 
V4L2 (pan/tilt etc.) and how the driver makes them available.

Basically, I'm not a fan of the concept of having a userspace tool set up 
the mapping. From the experiences of the last months, I think it might be 
less hassle to maintain extra controls in the driver.

The userspace solution requires Linux distributions to ensure their 
uvcdynctrl setups work with multiple kernel driver versions, and it also 
means that if two different vendors implement e.g. pan/tilt differently, 
the application will have to know about which IDs correspond to which 
control - but the driver should abstract away from this and provide a 
generic pan/tilt API.

Hmm, if it really *has* to be a userspace solution, the still-non-existent 
generic v4l2 userspace library would be the place to set up the controls. 
:-/

In <http://lists.berlios.de/pipermail/linux-uvc-devel/2007-October/002257.html>, you wrote:
> Hardcoding all vendor-specific controls in the driver would soon become a 
> maintenance nightmare. As most controls are quite simple, I decided to go 
> for a userspace API that allows vendors to register new controls are 
> runtime.

This is what my "pleeease" was referring to - please change your mind, I 
don't want to live with focus etc. controls on my Quickcam 9000 which break 
at regular intervals! ;)

Cheers,

  Richard

-- 
  __   _
  |_) /|  Richard Atterer     |  GnuPG key: 888354F7
  | \/?|  http://atterer.net  |  08A9 7B7D 3D13 3EF2 3D25  D157 79E6 F6DC 8883 54F7
  ? '` ?


From l.schimmer at cgv.tugraz.at  Mon Apr 14 12:21:32 2008
From: l.schimmer at cgv.tugraz.at (Lars Schimmer)
Date: Mon, 14 Apr 2008 12:21:32 +0200
Subject: [Linux-uvc-devel] Microsoft VX 7000?
In-Reply-To: <200804132138.52574.laurent.pinchart@skynet.be>
References: <47FF4F18.90101@cgv.tugraz.at>
	<200804132138.52574.laurent.pinchart@skynet.be>
Message-ID: <4803302C.4080905@cgv.tugraz.at>

Laurent Pinchart schrieb:
> Hi Lars,
> 
> On Friday 11 April 2008, Lars Schimmer wrote:
>> Hi!
>>
>> Any chance for MS VX7000 webcam?
> 
> The camera seems UVC compatible. It should work with the driver. If it 
> doesn't, please provide error messages and kernel log dumps.

Here is dmesg output:
usb 5-2: new high speed USB device using ehci_hcd and address 3
usb 5-2: configuration #1 chosen from 1 choice
Linux video capture interface: v2.00
uvcvideo: Found UVC 1.00 device Microsoft? LifeCam VX-7000 (045e:0723)
uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -32 (exp. 26).
uvcvideo: usb_control_msg was NOT delayed
usbcore: registered new interface driver uvcvideo
USB Video Class driver (v0.1.0)
usbcore: registered new interface driver snd-usb-audio

Running luvcview tells me:
luvcview
luvcview version 0.2.1
Error: video format not unspecified

Module version 1.0.svn193

To old? Was the debian src.

Luvcview version 20070512-4

>> Attached lspci output.
> 
> That was lsusb :-)

Ok, but it should help a bit ;-)

> Best regards,
> 
> Laurent Pinchart

Lars Schimmer


From darren.longhorn at redembedded.com  Mon Apr 14 18:10:25 2008
From: darren.longhorn at redembedded.com (Darren Longhorn)
Date: Mon, 14 Apr 2008 17:10:25 +0100
Subject: [Linux-uvc-devel] svn 200 on 2.6.10 kernel
Message-ID: <480381F1.3090607@redembedded.com>

Hi,

I've been trying to build svn 200 with a 2.6.10 kernel. Here is my result:

guest at UbuntuBuildVM:~/fp/ext/lib/driver/linux/webcam/uvc$ make 
CROSS_COMPILE=arm_v5t_le-  uvcvideo
Building USB Video Class driver...
make[1]: Entering directory 
`/home/guest/fp/ext/lib/kernel/linux/montavista/lsp/ti-davinci'
  CC [M]  /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.o
In file included from 
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvcvideo.h:8,
                 from 
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c:45:
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_compat.h:194: error: 
parse error before "gfp_flags"
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_compat.h:195: 
warning: static declaration of 'kzalloc' follows non-static declaration
include/linux/slab.h:108: warning: 'kzalloc' declared inline after being 
called
include/linux/slab.h:108: warning: previous declaration of 'kzalloc' was 
here
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_compat.h: In function 
`kzalloc':
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_compat.h:195: error: 
number of arguments doesn't match prototype
include/linux/slab.h:108: error: prototype declaration
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_compat.h:196: error: 
`size' undeclared (first use in this function)
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_compat.h:196: error: 
(Each undeclared identifier is reported only once
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_compat.h:196: error: 
for each function it appears in.)
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_compat.h:196: error: 
`gfp_flags' undeclared (first use in this function)
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c:46:21: 
version.h: No such file or directory
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c: In function 
`uvc_probe':
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c:1550: error: 
structure has no member named `product'
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c:1551: error: 
structure has no member named `product'
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c:1564: error: 
structure has no member named `product'
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c:1564: error: 
structure has no member named `product'
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c: At top level:
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c:1633: error: 
parse error before "pm_message_t"
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c:1634: 
warning: function declaration isn't a prototype
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c: In function 
`uvc_suspend':
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c:1635: error: 
`intf' undeclared (first use in this function)
make[2]: *** 
[/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.o] Error 1
make[1]: *** [_module_/home/guest/fp/ext/lib/driver/linux/webcam/uvc] 
Error 2
make[1]: Leaving directory 
`/home/guest/fp/ext/lib/kernel/linux/montavista/lsp/ti-davinci'
make: *** [uvcvideo] Error 2

I realise that 2.6.10 is quite old now, but I don't really have the 
choice to upgrade it right now.
The first problem appears to be that I have another definition of 
kzalloc, so I guess I could just remove the one in uvc_driver.c ?

Cheers

Darren




From laurent.pinchart at skynet.be  Mon Apr 14 20:19:53 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 14 Apr 2008 20:19:53 +0200
Subject: [Linux-uvc-devel] svn 200 on 2.6.10 kernel
In-Reply-To: <480381F1.3090607@redembedded.com>
References: <480381F1.3090607@redembedded.com>
Message-ID: <200804142019.54016.laurent.pinchart@skynet.be>

Hi Darren,

On Monday 14 April 2008, Darren Longhorn wrote:
> Hi,
>
> I've been trying to build svn 200 with a 2.6.10 kernel. Here is my result:
>
> guest at UbuntuBuildVM:~/fp/ext/lib/driver/linux/webcam/uvc$ make
> CROSS_COMPILE=arm_v5t_le-  uvcvideo
> Building USB Video Class driver...
> make[1]: Entering directory
> `/home/guest/fp/ext/lib/kernel/linux/montavista/lsp/ti-davinci'
>   CC [M]  /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.o
> In file included from
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvcvideo.h:8,
>                  from
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c:45:
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_compat.h:194: error:
> parse error before "gfp_flags"
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_compat.h:195:
> warning: static declaration of 'kzalloc' follows non-static declaration
> include/linux/slab.h:108: warning: 'kzalloc' declared inline after being
> called
> include/linux/slab.h:108: warning: previous declaration of 'kzalloc' was
> here
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_compat.h: In function
> `kzalloc':
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_compat.h:195: error:
> number of arguments doesn't match prototype
> include/linux/slab.h:108: error: prototype declaration
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_compat.h:196: error:
> `size' undeclared (first use in this function)
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_compat.h:196: error:
> (Each undeclared identifier is reported only once
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_compat.h:196: error:
> for each function it appears in.)
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_compat.h:196: error:
> `gfp_flags' undeclared (first use in this function)
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c:46:21:
> version.h: No such file or directory
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c: In function
> `uvc_probe':
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c:1550: error:
> structure has no member named `product'
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c:1551: error:
> structure has no member named `product'
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c:1564: error:
> structure has no member named `product'
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c:1564: error:
> structure has no member named `product'
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c: At top level:
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c:1633: error:
> parse error before "pm_message_t"
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c:1634:
> warning: function declaration isn't a prototype
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c: In function
> `uvc_suspend':
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.c:1635: error:
> `intf' undeclared (first use in this function)
> make[2]: ***
> [/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.o] Error 1
> make[1]: *** [_module_/home/guest/fp/ext/lib/driver/linux/webcam/uvc]
> Error 2
> make[1]: Leaving directory
> `/home/guest/fp/ext/lib/kernel/linux/montavista/lsp/ti-davinci'
> make: *** [uvcvideo] Error 2
>
> I realise that 2.6.10 is quite old now, but I don't really have the
> choice to upgrade it right now.

2.6.10 is indeed quite old, and definitely unsupported by the Linux UVC 
driver. You might be able to make it work, but I can't guarantee anything.

> The first problem appears to be that I have another definition of
> kzalloc, so I guess I could just remove the one in uvc_driver.c ?

This is strange, as kzalloc has been introduced in 2.6.14. Are you using a 
patched version of the 2.6.10 kernel ?

If the kzalloc implementation in your kernel sources is compatible with what 
the Linux UVC driver expects it should be safe to remove it from 
uvc_compat.h.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Apr 14 20:29:02 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 14 Apr 2008 20:29:02 +0200
Subject: [Linux-uvc-devel] Microsoft VX 7000?
In-Reply-To: <4803302C.4080905@cgv.tugraz.at>
References: <47FF4F18.90101@cgv.tugraz.at>
	<200804132138.52574.laurent.pinchart@skynet.be>
	<4803302C.4080905@cgv.tugraz.at>
Message-ID: <200804142029.02418.laurent.pinchart@skynet.be>

Hi Lars,

On Monday 14 April 2008, Lars Schimmer wrote:
> Laurent Pinchart schrieb:
> > Hi Lars,
> >
> > On Friday 11 April 2008, Lars Schimmer wrote:
> >> Hi!
> >>
> >> Any chance for MS VX7000 webcam?
> >
> > The camera seems UVC compatible. It should work with the driver. If it
> > doesn't, please provide error messages and kernel log dumps.
>
> Here is dmesg output:
> usb 5-2: new high speed USB device using ehci_hcd and address 3
> usb 5-2: configuration #1 chosen from 1 choice
> Linux video capture interface: v2.00
> uvcvideo: Found UVC 1.00 device Microsoft? LifeCam VX-7000 (045e:0723)
> uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -32 (exp. 26).
> uvcvideo: usb_control_msg was NOT delayed
> usbcore: registered new interface driver uvcvideo
> USB Video Class driver (v0.1.0)
> usbcore: registered new interface driver snd-usb-audio
>
> Running luvcview tells me:
> luvcview
> luvcview version 0.2.1
> Error: video format not unspecified
>
> Module version 1.0.svn193
>
> To old? Was the debian src.
>
> Luvcview version 20070512-4

Could you please try the attached patch ?

Best regards,

Laurent Pinchart
-------------- next part --------------
A non-text attachment was scrubbed...
Name: vx-7000.patch
Type: text/x-diff
Size: 709 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080414/bbb66d29/attachment.patch>

From laurent.pinchart at skynet.be  Mon Apr 14 22:48:55 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 14 Apr 2008 22:48:55 +0200
Subject: [Linux-uvc-devel] // Quickcam Pro 9000 and uvcdynctrl woes //
In-Reply-To: <20080414091038.GA5197@fluff.lan>
References: <ef69c11a0804111012v7a479152g3124cd1415216af2@mail.gmail.com>
	<200804132325.38556.laurent.pinchart@skynet.be>
	<20080414091038.GA5197@fluff.lan>
Message-ID: <200804142248.55610.laurent.pinchart@skynet.be>

Hi Richard,

On Monday 14 April 2008, Richard Atterer wrote:
> Hello,
>
> On Sun, Apr 13, 2008 at 11:25:38PM +0200, Laurent Pinchart wrote:
> > On Saturday 12 April 2008, Richard Atterer wrote:
> > > IMHO, the kernel driver could even provide the mapping 0x0000200e =>
> > > "Exposure, Auto Priority" without any maintenance problems.
>
> [...]
>
> > I'm not sure what you mean by a "mapping 0x0000200e => Exposure, Auto
> > Priority". The driver can be queried to enumerate controls. For each of
> > them it will return the control ID and name. This is part of the V4L2
> > API.
>
> I was thinking of additional, vendor-specific controls that are not part of
> V4L2 (pan/tilt etc.) and how the driver makes them available.
>
> Basically, I'm not a fan of the concept of having a userspace tool set up
> the mapping. From the experiences of the last months, I think it might be
> less hassle to maintain extra controls in the driver.
>
> The userspace solution requires Linux distributions to ensure their
> uvcdynctrl setups work with multiple kernel driver versions, and it also
> means that if two different vendors implement e.g. pan/tilt differently,
> the application will have to know about which IDs correspond to which
> control - but the driver should abstract away from this and provide a
> generic pan/tilt API.

The Linux UVC driver will map UVC controls to standard V4L2 controls when 
possible. As the UVC standard allows vendor-defined controls, the driver will 
sooner or later run into controls that have no corresponding V4L2 control ID. 
For those UVC controls the driver will have to use private V4L2 controls. 
Several vendor-defined UVC controls will be mapped to the same private V4L2 
control when possible.

Those mappings can either be hardcoded in the driver or provided by userspace 
tools. The first solution would be hard to maintain and would require 
frequent changes to the driver. This is why we went for the second solution.

I'm sorry that recent versions of the driver had to break binary 
compatibility. This was unfortunately unavoidable, as V4L2 IDs for many 
controls were temporary and changed when we got them standardised in V4L2. 
This shouldn't happen anymore as those controls are now part of the V4L2 API.

> Hmm, if it really *has* to be a userspace solution, the still-non-existent
> generic v4l2 userspace library would be the place to set up the controls.
>
> :-/
>
> In 
<http://lists.berlios.de/pipermail/linux-uvc-devel/2007-October/002257.html>, 
you wrote:
> > Hardcoding all vendor-specific controls in the driver would soon become a
> > maintenance nightmare. As most controls are quite simple, I decided to go
> > for a userspace API that allows vendors to register new controls are
> > runtime.
>
> This is what my "pleeease" was referring to - please change your mind, I
> don't want to live with focus etc. controls on my Quickcam 9000 which break
> at regular intervals! ;)

They are not supposed to break at regular intervals :-)

Binary incompatibilities are caused by the driver changing V4L2 control IDs 
combined with an application that hardcodes control IDs. The control mapping 
implementation (kernelspace vs. userspace) is irrelevant.

To avoid breakages applications should avoid hardcoding private controls IDs 
when possible, and the control mapper should avoid changing control IDs for 
no reason. Now that the infrastructure is getting more stable there should be 
less binary compatibility issues.

Best regards,

Laurent Pinchart


From rcolenbrander at strukton.com  Tue Apr 15 12:54:43 2008
From: rcolenbrander at strukton.com (Colenbrander, Roderick)
Date: Tue, 15 Apr 2008 12:54:43 +0200
Subject: [Linux-uvc-devel] High resolution webcam + USB 1.1 (LX832)
Message-ID: <9F7D9FC63DF0DE4EBDC4786B61A1AB9F55AD83@hglmail.strukton.org>

Hi,

We plan to use a webcam in an embedded project for building a sort of surveillance camera system. In short we take a few pictures an hour and submit those using GPRS or UMTS. The embedded system consists of an embedded linux board (Fox board lx832) build around a ARM9 cpu. The board contains two USB 1.1 ports and to one of those the webcam will be connected.

First of all not much webcams offer high resolutions. Logitech has a bunch of those (e.g. QPC 9000 Pro / Sphere AF) and most others I found from Trust, Hercules seem to use the Microdia chipset which doesn't have an opensource driver yet. Does someone have other suggestions for webcams that offer good image quality and if possible a high resolution?

Another issue is of course that I'm limited to USB 1.1. I don't think the bandwidth is much of a problem as I don't need much images and don't need them frequently either. Second jpeg compression is fine by me (but I would like to be able to adjust the compression parameters). Does USB 1.1 somehow limit the resolution of the pictures I can take? I can imagine that the buffer size is smaller than the max image it can take and that USB2 is fast enough to empty it before data gets overwritten.

Thanks in advance,
Roderick Colenbrander
#####################################################################################
Disclaimer

Deze email en alle hiermee verzonden bestanden zijn vertrouwelijk 
en alleen bestemd voor diegene aan wie de e-mail is geadresseerd. 
Indien u ten onrechte deze email heeft ontvangen waarschuw dan de 
systeembeheerder. (Postmaster at Strukton.com) Deze voetnoot 
bevestigt dat deze email is gecontroleerd op aanwezigheid van 
computer virussen. 

Disclaimer

This email and any files transmitted with it are confidential and 
intended solely for the use of the individual or entity to whom 
they are addressed. If you have received this email in error please 
notify the system manager (Postmaster at Strukton.com) This footnote 
also confirms that this email message has been swept for the 
presence of computer virusses. 

#####################################################################################

#####################################################################################
This e-mail message has been scanned for Viruses and Content and cleared 
by MailMarshal
#####################################################################################


From Charlie.Wyse at pdi.dreamworks.com  Tue Apr 15 21:33:58 2008
From: Charlie.Wyse at pdi.dreamworks.com (Charlie Wyse)
Date: Tue, 15 Apr 2008 12:33:58 -0700
Subject: [Linux-uvc-devel] Version.h?
Message-ID: <48050326.40408@pdi.com>

Whenever I run a make on the uvcvideo directory I get an error about the 
version.h file.  If I look at the file itself it is a 0 length file.  
This file is removed with a make clean, so it looks like something in 
the make process isn't working.  My QC 9000 works most of the time, but 
I figure this might be why all my devices come up as <unnamed>, even if 
I put the vender/product id into the uvc_driver.c file before running a 
make.  Any one know what is going on with that file?

I'm trying to prevent this:
uvcvideo: Found UVC 1.00 device <unnamed> (046d:08ce)      It would be 
nice if it said something like "Logitech Quickcam Pro 9000"

Here is the output of me simply running the make command. cwyse at magic 
[:~/UVC] % 
make                                                                                                                       
[11:41:49]
Building USB Video Class driver...
make[1]: Entering directory 
`/usr/src/kernels/2.6.18-53.1.14.el5-xen-x86_64'
CC [M]  /home/cwyse/UVC/uvc_driver.o
LD [M]  /home/cwyse/UVC/uvcvideo.o
Building modules, stage 2.
MODPOST
WARNING: could not open /home/cwyse/UVC/version.h: Invalid argument
LD [M]  /home/cwyse/UVC/uvcvideo.ko
make[1]: Leaving directory `/usr/src/kernels/2.6.18-53.1.14.el5-xen-x86_64'
cwyse at magic [:~/UVC] % ls -l 
version.h                                                                                                            
[11:44:04]
-rw-r--r-- 1 cwyse user 0 Apr 15 11:44 version.h


From brandon at ifup.org  Tue Apr 15 22:37:19 2008
From: brandon at ifup.org (Brandon Philips)
Date: Tue, 15 Apr 2008 13:37:19 -0700
Subject: [Linux-uvc-devel] High resolution webcam + USB 1.1 (LX832)
In-Reply-To: <9F7D9FC63DF0DE4EBDC4786B61A1AB9F55AD83@hglmail.strukton.org>
References: <9F7D9FC63DF0DE4EBDC4786B61A1AB9F55AD83@hglmail.strukton.org>
Message-ID: <20080415203719.GA1086@plankton.ifup.org>

On 12:54 Tue 15 Apr 2008, Colenbrander, Roderick wrote:
> First of all not much webcams offer high resolutions. Logitech has a
> bunch of those (e.g. QPC 9000 Pro / Sphere AF) and most others I found
> from Trust, Hercules seem to use the Microdia chipset which doesn't
> have an opensource driver yet. Does someone have other suggestions for
> webcams that offer good image quality and if possible a high
> resolution?

I can't make any specific recommendations but the Logitech cameras seem
to perform well.

> Another issue is of course that I'm limited to USB 1.1. I don't think
> the bandwidth is much of a problem as I don't need much images and
> don't need them frequently either. Second jpeg compression is fine by
> me (but I would like to be able to adjust the compression parameters).
> Does USB 1.1 somehow limit the resolution of the pictures I can take?
> I can imagine that the buffer size is smaller than the max image it
> can take and that USB2 is fast enough to empty it before data gets
> overwritten.

All of the Logitech cameras I own can do up to 800x600 on USB 1.1.  You
probably won't do much better than that without going to a Hi-Speed bus.

It could be possible to get a higher resolution on 1.1 by using the
STILL_IMAGE_FRAME mode of UVC depending on the camera you use but that
isn't implemented in the Linux UVC driver yet.  If you want to implement
it that would be great :)

Cheers,

	Brandon


From brandon at ifup.org  Tue Apr 15 22:51:50 2008
From: brandon at ifup.org (Brandon Philips)
Date: Tue, 15 Apr 2008 13:51:50 -0700
Subject: [Linux-uvc-devel] Version.h?
In-Reply-To: <48050326.40408@pdi.com>
References: <48050326.40408@pdi.com>
Message-ID: <20080415205150.GB1086@plankton.ifup.org>

On 12:33 Tue 15 Apr 2008, Charlie Wyse wrote:
> Whenever I run a make on the uvcvideo directory I get an error about
> the version.h file.  If I look at the file itself it is a 0 length
> file.  This file is removed with a make clean, so it looks like
> something in the make process isn't working.  

If you aren't using a SVN checkout or don't have svn installed the
version.h generation won't work.  The driver will still build however.

Relevant source entries.

Makefile:
<snip>
        @sh svn-version.sh > version.h 2>/dev/null

uvc_driver.c:
<snip>
#ifndef DRIVER_VERSION
#define DRIVER_VERSION          "v0.1.0"
#endif


> My QC 9000 works most of the time, but I figure this might be why all
> my devices come up as <unnamed>, even if I put the vender/product id
> into the uvc_driver.c file before running a make.  Any one know what
> is going on with that file?

Your device comes up as <unnamed> because the device vendor didn't
include the optional string descriptor for it.  It shouldn't effect the
device functioning.

What functional problems are you having with the device?

Cheers,

	Brandon


From Charlie.Wyse at pdi.dreamworks.com  Tue Apr 15 23:52:55 2008
From: Charlie.Wyse at pdi.dreamworks.com (Charlie Wyse)
Date: Tue, 15 Apr 2008 14:52:55 -0700
Subject: [Linux-uvc-devel] Version.h?
In-Reply-To: <20080415205150.GB1086@plankton.ifup.org>
References: <48050326.40408@pdi.com> <20080415205150.GB1086@plankton.ifup.org>
Message-ID: <480523B7.7090907@pdi.com>

Brandon Philips wrote:
> On 12:33 Tue 15 Apr 2008, Charlie Wyse wrote:
>   
>> Whenever I run a make on the uvcvideo directory I get an error about
>> the version.h file.  If I look at the file itself it is a 0 length
>> file.  This file is removed with a make clean, so it looks like
>> something in the make process isn't working.  
>>     
>
> If you aren't using a SVN checkout or don't have svn installed the
> version.h generation won't work.  The driver will still build however.
>
> Relevant source entries.
>
> Makefile:
> <snip>
>         @sh svn-version.sh > version.h 2>/dev/null
>
> uvc_driver.c:
> <snip>
> #ifndef DRIVER_VERSION
> #define DRIVER_VERSION          "v0.1.0"
> #endif
>
>
>   
>> My QC 9000 works most of the time, but I figure this might be why all
>> my devices come up as <unnamed>, even if I put the vender/product id
>> into the uvc_driver.c file before running a make.  Any one know what
>> is going on with that file?
>>     
>
> Your device comes up as <unnamed> because the device vendor didn't
> include the optional string descriptor for it.  It shouldn't effect the
> device functioning.
>
> What functional problems are you having with the device?
>
> Cheers,
>
> 	Brandon
>   
Good to know about the version.h thing, I was afraid that was the 
problem as the 08ce was no in the uvc_driver.c file until I added it.  
We are having problems with some of our Logitech QC 5000's.  When we 
create the module on the same kernel we keep getting things in dmesg 
like the following:
uvcvideo: Found UVC 1.00 device <unnamed> (046d:08ce)
uvcvideo: Failed to query (1) UVC control 2 (unit 0) : -71 (exp. 26).
uvcvideo: Failed to initialize the device (-5).

This prevents us from seeing any video and causes ekiga to crash with 
the following error in dmesg logs:
Apr 15 10:51:39 duel kernel: uvcvideo: Failed to query (132) UVC control 
4 (unit 2) : -32 (exp. 2).

On my other machine  I am getting past the dmesg part with both the QC 
5000 and 9000, ekiga still doesn't want to switch video with whomever I 
call, but I believe that might be an ekiga problem.  I can still look at 
gstreamer-properties and see video without errors.  I was afraid this 
was just due to vendor ids not being listed, but it looks like I was 
troubleshooting down the wrong path.  Any ideas what could case those 
issues?


From Charlie.Wyse at pdi.dreamworks.com  Tue Apr 15 23:58:14 2008
From: Charlie.Wyse at pdi.dreamworks.com (Charlie Wyse)
Date: Tue, 15 Apr 2008 14:58:14 -0700
Subject: [Linux-uvc-devel] usb_endpoints.
Message-ID: <480524F6.1080109@pdi.com>

Greetings,

I'm working with RedHat to get the uvcvideo module in the kernel. We are 
having some success with RHEL4.4 - RHEL5.1 However with the new kernel 
in RHEL5.2 Currently around 2.6.18-86 and counting I am running into a 
usb_endpoint issue. There seems to be a conflict with the 
/include/linux/usb.h file in the kernel devel. I guess my question is 
simply, is this an issue I should report to the kernel maintainers as a 
conflict with use of the usb_endpoints. Or is this something uvcvideo 
should take into account with newer kernels in RHEL?

Building USB Video Class driver...
make[1]: Entering directory `/usr/src/kernels/2.6.18-86.el5-xen-x86_64'
CC [M] /home/cwyse/UVC/uvc_driver.o
In file included from /home/cwyse/UVC/uvcvideo.h:8,
from /home/cwyse/UVC/uvc_driver.c:45:
/home/cwyse/UVC/uvc_compat.h:265: error: redefinition of 
?usb_endpoint_dir_in?
include/linux/usb.h:474: error: previous definition of 
?usb_endpoint_dir_in? was here
/home/cwyse/UVC/uvc_compat.h:270: error: redefinition of 
?usb_endpoint_xfer_int?
include/linux/usb.h:521: error: previous definition of 
?usb_endpoint_xfer_int? was here
/home/cwyse/UVC/uvc_compat.h:276: error: redefinition of 
?usb_endpoint_xfer_isoc?
include/linux/usb.h:534: error: previous definition of 
?usb_endpoint_xfer_isoc? was here
/home/cwyse/UVC/uvc_compat.h:282: error: redefinition of 
?usb_endpoint_xfer_bulk?
include/linux/usb.h:496: error: previous definition of 
?usb_endpoint_xfer_bulk? was here
/home/cwyse/UVC/uvc_compat.h:288: error: redefinition of 
?usb_endpoint_is_int_in?
include/linux/usb.h:571: error: previous definition of 
?usb_endpoint_is_int_in? was here
make[2]: *** [/home/cwyse/UVC/uvc_driver.o] Error 1
make[1]: *** [_module_/home/cwyse/UVC] Error 2
make[1]: Leaving directory `/usr/src/kernels/2.6.18-86.el5-xen-x86_64'
make: *** [uvcvideo] Error 2



From philipp at kolmann.at  Wed Apr 16 07:42:10 2008
From: philipp at kolmann.at (Philipp Kolmann)
Date: Wed, 16 Apr 2008 07:42:10 +0200
Subject: [Linux-uvc-devel] Version.h?
In-Reply-To: <480523B7.7090907@pdi.com>
References: <48050326.40408@pdi.com> <20080415205150.GB1086@plankton.ifup.org>
	<480523B7.7090907@pdi.com>
Message-ID: <20080416054210.GA5825@kolmann.at>

On Tue, Apr 15, 2008 at 02:52:55PM -0700, Charlie Wyse wrote:
> We are having problems with some of our Logitech QC 5000's.  When we 
> create the module on the same kernel we keep getting things in dmesg 
> like the following:
> uvcvideo: Found UVC 1.00 device <unnamed> (046d:08ce)
> uvcvideo: Failed to query (1) UVC control 2 (unit 0) : -71 (exp. 26).
> uvcvideo: Failed to initialize the device (-5).
> 
> This prevents us from seeing any video and causes ekiga to crash with 
> the following error in dmesg logs:
> Apr 15 10:51:39 duel kernel: uvcvideo: Failed to query (132) UVC control 
> 4 (unit 2) : -32 (exp. 2).

Could you try to plug the cam into another USB Port. I am not sure but there
were some issues with USB Ports. Just give it a try. Might be completely
unrelated tough.

Philipp

-- 
The more I learn about people, the more I like my dog!


From l.schimmer at cgv.tugraz.at  Wed Apr 16 10:08:57 2008
From: l.schimmer at cgv.tugraz.at (Lars Schimmer)
Date: Wed, 16 Apr 2008 10:08:57 +0200
Subject: [Linux-uvc-devel] Microsoft VX 7000?
In-Reply-To: <200804142029.02418.laurent.pinchart@skynet.be>
References: <47FF4F18.90101@cgv.tugraz.at>
	<200804132138.52574.laurent.pinchart@skynet.be>
	<4803302C.4080905@cgv.tugraz.at>
	<200804142029.02418.laurent.pinchart@skynet.be>
Message-ID: <4805B419.8080807@cgv.tugraz.at>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

(sry, posted private)

Laurent Pinchart wrote:

>> Luvcview version 20070512-4
>
> Could you please try the attached patch ?

Build on my debian amd64 system and got a stream. Woks, thank you.

> Best regards,
>
> Laurent Pinchart
>


MfG,
Lars Schimmer
- --
- -------------------------------------------------------------
TU Graz, Institut f?r ComputerGraphik & WissensVisualisierung
Tel: +43 316 873-5405       E-Mail: l.schimmer at cgv.tugraz.at
Fax: +43 316 873-5402       PGP-Key-ID: 0x4A9B1723
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFIBbQZmWhuE0qbFyMRAjZAAJ0W7aqywpHh8Xwqj8WhRiX94U3K2ACglMfr
d+hKaVute35N2pgLwr4e0Gw=
=OBH0
-----END PGP SIGNATURE-----


From rcolenbrander at strukton.com  Wed Apr 16 14:16:29 2008
From: rcolenbrander at strukton.com (Colenbrander, Roderick)
Date: Wed, 16 Apr 2008 14:16:29 +0200
Subject: [Linux-uvc-devel] High resolution webcam + USB 1.1 (LX832)
References: <9F7D9FC63DF0DE4EBDC4786B61A1AB9F55AD83@hglmail.strukton.org>
	<20080415203719.GA1086@plankton.ifup.org>
Message-ID: <9F7D9FC63DF0DE4EBDC4786B61A1AB9F55AD86@hglmail.strukton.org>

I read about the still image mode before but is it really anything special? Some sources indicate that it just grabs a frame from the video stream. The request is either made by the webcam software or by pressing a snapshot button. Sure I can program but is it worth all the troubles? The main advantage would be improved image quality.

Thanks,
Roderick

-----Original Message-----
From:	Brandon Philips [mailto:brandon at ifup.org]
Sent:	Tue 4/15/2008 10:37 PM
To:	Colenbrander, Roderick
Cc:	linux-uvc-devel at lists.berlios.de
Subject:	Re: [Linux-uvc-devel] High resolution webcam + USB 1.1 (LX832)

On 12:54 Tue 15 Apr 2008, Colenbrander, Roderick wrote:
> First of all not much webcams offer high resolutions. Logitech has a
> bunch of those (e.g. QPC 9000 Pro / Sphere AF) and most others I found
> from Trust, Hercules seem to use the Microdia chipset which doesn't
> have an opensource driver yet. Does someone have other suggestions for
> webcams that offer good image quality and if possible a high
> resolution?

I can't make any specific recommendations but the Logitech cameras seem
to perform well.

> Another issue is of course that I'm limited to USB 1.1. I don't think
> the bandwidth is much of a problem as I don't need much images and
> don't need them frequently either. Second jpeg compression is fine by
> me (but I would like to be able to adjust the compression parameters).
> Does USB 1.1 somehow limit the resolution of the pictures I can take?
> I can imagine that the buffer size is smaller than the max image it
> can take and that USB2 is fast enough to empty it before data gets
> overwritten.

All of the Logitech cameras I own can do up to 800x600 on USB 1.1.  You
probably won't do much better than that without going to a Hi-Speed bus.

It could be possible to get a higher resolution on 1.1 by using the
STILL_IMAGE_FRAME mode of UVC depending on the camera you use but that
isn't implemented in the Linux UVC driver yet.  If you want to implement
it that would be great :)

Cheers,

	Brandon



#####################################################################################
Disclaimer

Deze email en alle hiermee verzonden bestanden zijn vertrouwelijk 
en alleen bestemd voor diegene aan wie de e-mail is geadresseerd. 
Indien u ten onrechte deze email heeft ontvangen waarschuw dan de 
systeembeheerder. (Postmaster at Strukton.com) Deze voetnoot 
bevestigt dat deze email is gecontroleerd op aanwezigheid van 
computer virussen. 

Disclaimer

This email and any files transmitted with it are confidential and 
intended solely for the use of the individual or entity to whom 
they are addressed. If you have received this email in error please 
notify the system manager (Postmaster at Strukton.com) This footnote 
also confirms that this email message has been swept for the 
presence of computer virusses. 

#####################################################################################

#####################################################################################
This e-mail message has been scanned for Viruses and Content and cleared 
by MailMarshal
#####################################################################################


From gob937 at gmail.com  Wed Apr 16 17:28:47 2008
From: gob937 at gmail.com (=?UTF-8?B?0J3QuNC60L7Qu9Cw0Lkg0KjQtdC70LXRhdC+0LI=?=)
Date: Wed, 16 Apr 2008 19:28:47 +0400
Subject: [Linux-uvc-devel] Panasonic nv-gs11
Message-ID: <88a3ffd40804160828l5ced6172qc5706c4f7a5205cb@mail.gmail.com>

Hello everybody.
I've got a problem with Panasonic NV-GS11 camera using DV-mode.
(Webcam mode works)

What we got on your site:
04da:2318 Panasonic Camcorder NV-GS11/230/250 (webcam mode) Panasonic
04da:231a Panasonic Camcorder NV-GS11/230/250 (DV mode) Panasonic
But when I try to attach my camera in DV mode - nothing happen.

~/source/linux-uvc$ lsusb
..
Bus 004 Device 011: ID 04da:2317 Panasonic (Matsushita)
..

Any ideas?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080416/17ce78c8/attachment.html>

From darren.longhorn at redembedded.com  Wed Apr 16 19:10:34 2008
From: darren.longhorn at redembedded.com (Darren Longhorn)
Date: Wed, 16 Apr 2008 18:10:34 +0100
Subject: [Linux-uvc-devel] svn 200 on 2.6.10 kernel
In-Reply-To: <200804142019.54016.laurent.pinchart@skynet.be>
References: <480381F1.3090607@redembedded.com>
	<200804142019.54016.laurent.pinchart@skynet.be>
Message-ID: <4806330A.9070402@redembedded.com>

Hi Laurent,

Laurent Pinchart wrote:
> 2.6.10 is indeed quite old, and definitely unsupported by the Linux UVC 
> driver. You might be able to make it work, but I can't guarantee anything.
>
>   
OK, I'll try and make it work. I understand when you say such an old 
kernel is unsupported, but I will continue to ask questions as I address 
problems if I may.
>> The first problem appears to be that I have another definition of
>> kzalloc, so I guess I could just remove the one in uvc_driver.c ?
>>     
>
> This is strange, as kzalloc has been introduced in 2.6.14. Are you using a 
> patched version of the 2.6.10 kernel ?
>
>   
Yes, I am. It's the Texas Instruments version of the Monta Visyta 
distribution. I have previoulsy had a patched version of uvc svn 148 
that worked with one web cam, but I have had little success with others. 
I want to try and move to the latest svn to be able to support a better 
range of cameras.
> If the kzalloc implementation in your kernel sources is compatible with what 
> the Linux UVC driver expects it should be safe to remove it from 
> uvc_compat.h.
>
>   
It looks like that is the case.

My next issue was that back in 2.6.10 'struct usb_device' defined in 
linux/usb.h does not have a field named 'product'. It seemed harmless to 
me to simply remove the use of that field.

The final issue I saw in uvc_driver.c is unknown type for pm_message_t 
used as a parameter in uvc_suspend(). As the parameter isn't used I just 
#defined it as u32.


So now I have moced on to uvc_status.c where I get the following errors:

guest at UbuntuBuildVM:~/fp/ext/lib/driver/linux/webcam/uvc$ make 
CROSS_COMPILE=arm_v5t_le-  uvcvideo
Building USB Video Class driver...
make[1]: Entering directory 
`/home/guest/fp/ext/lib/kernel/linux/montavista/lsp/ti-davinci'
  CC [M]  /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.o
  CC [M]  /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_status.o
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_status.c:19:29: 
linux/usb_input.h: No such file or directory
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_status.c: In function 
`uvc_input_init':
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_status.c:36: warning: 
implicit declaration of function `input_allocate_device'
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_status.c:36: warning: 
assignment makes pointer from integer without a cast
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_status.c:50: warning: 
implicit declaration of function `usb_to_input_id'
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_status.c:54: error: 
structure has no member named `cdev'
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_status.c:60: error: 
void value not ignored as it ought to be
/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_status.c:67: warning: 
implicit declaration of function `input_free_device'
make[2]: *** 
[/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_status.o] Error 1
make[1]: *** [_module_/home/guest/fp/ext/lib/driver/linux/webcam/uvc] 
Error 2
make[1]: Leaving directory 
`/home/guest/fp/ext/lib/kernel/linux/montavista/lsp/ti-davinci'
make: *** [uvcvideo] Error 2

I have neither <linux/usb_input.h> nor implementations of 
input_allocate_device(), usb_to_input() or input_free_device(). What is 
the purpose of these functions and do you think it would be posible to 
provide local implementations?

Thanks in advance for any suggestions.

Darren

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080416/bc84210c/attachment.html>

From sriramsista at gmail.com  Wed Apr 16 19:17:55 2008
From: sriramsista at gmail.com (sriram sista)
Date: Wed, 16 Apr 2008 22:47:55 +0530
Subject: [Linux-uvc-devel] UVC client driver????
Message-ID: <14dad1070804161017s3abf8febh421fec69852e9a8e@mail.gmail.com>

Dear friends,
              I urgently require a UVC client as well as host side drivers.
I could not find client side driver at all!!!! where as host side drivers
are plenty.

Requirement:
1.I have a small mother board with memory. I have a video file in memory.
This file should be streamed to HOST(assume PC) over USB interface.
2.We have chosen video streaming over USB interface.
3.I have video driver for host available.
4.please help me in providing both client and host drivers.
5. I am having LINUX 2.6.18 installed on my mother board(PXA255 based).

Thanks and regards
sriram
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080416/7b03328a/attachment.html>

From julian at selectparks.net  Wed Apr 16 19:55:44 2008
From: julian at selectparks.net (Julian Oliver)
Date: Wed, 16 Apr 2008 19:55:44 +0200
Subject: [Linux-uvc-devel] // Quickcam Pro 9000 and uvcdynctrl woes //
In-Reply-To: <200804132317.48618.laurent.pinchart@skynet.be>
References: <ef69c11a0804111012v7a479152g3124cd1415216af2@mail.gmail.com>
	<ef69c11a0804111016h312bcf7at1fa5e1165a164def@mail.gmail.com>
	<20080412004125.GE20097@selectparks.net>
	<200804132317.48618.laurent.pinchart@skynet.be>
Message-ID: <20080416175544.GA11706@selectparks.net>


..on or around Sun, Apr 13, 2008 at 11:17:48PM +0200, Laurent Pinchart said:
> 
> "Important note: libwebcam 0.1.1 is not fully compatible with revisions of the 
> UVC driver later than 178. Until libwebcam 0.1.2 is available, users are 
> advised to use uvcvideo r178."
> 
> (http://www.quickcamteam.net/software/libwebcam/)

ugh.. thanks alot. i didn't read that line in your webpage.

sadly i can't use an older version of the driver as it has compatibility
problems with the gstreamer-dependent computer vision application on this system.
it seems to have to do with the speed at which the driver can provide
properties about the camera. with a newer version of the driver it works
fine.

cheers!

-- 
julian oliver
http://julianoliver.com
http://selectparks.net
messages containing HTML will not be read.


From laurent.pinchart at skynet.be  Wed Apr 16 19:40:29 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 16 Apr 2008 19:40:29 +0200
Subject: [Linux-uvc-devel] UVC client driver????
In-Reply-To: <14dad1070804161017s3abf8febh421fec69852e9a8e@mail.gmail.com>
References: <14dad1070804161017s3abf8febh421fec69852e9a8e@mail.gmail.com>
Message-ID: <200804161940.29604.laurent.pinchart@skynet.be>

Hi Sriram,

On Wednesday 16 April 2008, sriram sista wrote:
> Dear friends,
>               I urgently require a UVC client as well as host side drivers.
> I could not find client side driver at all!!!! where as host side drivers
> are plenty.
>
> Requirement:
> 1.I have a small mother board with memory. I have a video file in memory.
> This file should be streamed to HOST(assume PC) over USB interface.
> 2.We have chosen video streaming over USB interface.
> 3.I have video driver for host available.
> 4.please help me in providing both client and host drivers.
> 5. I am having LINUX 2.6.18 installed on my mother board(PXA255 based).

What you are looking for is called a UVC Linux 'Gadget' driver. A few people 
have asked for the availability of such a driver, but I'm not aware of any 
ongoing project to implement one.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Apr 16 20:40:17 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 16 Apr 2008 20:40:17 +0200
Subject: [Linux-uvc-devel] svn 200 on 2.6.10 kernel
In-Reply-To: <4806330A.9070402@redembedded.com>
References: <480381F1.3090607@redembedded.com>
	<200804142019.54016.laurent.pinchart@skynet.be>
	<4806330A.9070402@redembedded.com>
Message-ID: <200804162040.17810.laurent.pinchart@skynet.be>

Hi Darren,

On Wednesday 16 April 2008, Darren Longhorn wrote:
> Hi Laurent,
>
> Laurent Pinchart wrote:
> > 2.6.10 is indeed quite old, and definitely unsupported by the Linux UVC
> > driver. You might be able to make it work, but I can't guarantee
> > anything.
>
> OK, I'll try and make it work. I understand when you say such an old
> kernel is unsupported, but I will continue to ask questions as I address
> problems if I may.

Sure, no problem.

> >> The first problem appears to be that I have another definition of
> >> kzalloc, so I guess I could just remove the one in uvc_driver.c ?
> >
> > This is strange, as kzalloc has been introduced in 2.6.14. Are you using
> > a patched version of the 2.6.10 kernel ?
>
> Yes, I am. It's the Texas Instruments version of the Monta Visyta
> distribution. I have previoulsy had a patched version of uvc svn 148
> that worked with one web cam, but I have had little success with others.
> I want to try and move to the latest svn to be able to support a better
> range of cameras.
>
> > If the kzalloc implementation in your kernel sources is compatible with
> > what the Linux UVC driver expects it should be safe to remove it from
> > uvc_compat.h.
>
> It looks like that is the case.
>
> My next issue was that back in 2.6.10 'struct usb_device' defined in
> linux/usb.h does not have a field named 'product'. It seemed harmless to
> me to simply remove the use of that field.

usb_device.product is a string filled by USB core with the product name as 
retrieved from the device. You can leave it out if you don't care about the 
product name returned by the device.

> The final issue I saw in uvc_driver.c is unknown type for pm_message_t
> used as a parameter in uvc_suspend(). As the parameter isn't used I just
> #defined it as u32.

You should instead look at your kernel sources, check what parameters the 
uvc_suspend function expects, and modify it accordingly.

> So now I have moced on to uvc_status.c where I get the following errors:
>
> guest at UbuntuBuildVM:~/fp/ext/lib/driver/linux/webcam/uvc$ make
> CROSS_COMPILE=arm_v5t_le-  uvcvideo
> Building USB Video Class driver...
> make[1]: Entering directory
> `/home/guest/fp/ext/lib/kernel/linux/montavista/lsp/ti-davinci'
>   CC [M]  /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_driver.o
>   CC [M]  /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_status.o
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_status.c:19:29:
> linux/usb_input.h: No such file or directory
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_status.c: In function
> `uvc_input_init':
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_status.c:36: warning:
> implicit declaration of function `input_allocate_device'
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_status.c:36: warning:
> assignment makes pointer from integer without a cast
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_status.c:50: warning:
> implicit declaration of function `usb_to_input_id'
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_status.c:54: error:
> structure has no member named `cdev'
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_status.c:60: error:
> void value not ignored as it ought to be
> /home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_status.c:67: warning:
> implicit declaration of function `input_free_device'
> make[2]: ***
> [/home/guest/fp/ext/lib/driver/linux/webcam/uvc/uvc_status.o] Error 1
> make[1]: *** [_module_/home/guest/fp/ext/lib/driver/linux/webcam/uvc]
> Error 2
> make[1]: Leaving directory
> `/home/guest/fp/ext/lib/kernel/linux/montavista/lsp/ti-davinci'
> make: *** [uvcvideo] Error 2
>
> I have neither <linux/usb_input.h> nor implementations of
> input_allocate_device(), usb_to_input() or input_free_device(). What is
> the purpose of these functions and do you think it would be posible to
> provide local implementations?

The input layer is used to report button events to userspace. If you don't 
care about camera buttons you can remove uvc_status.c completely.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Apr 16 21:51:35 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 16 Apr 2008 21:51:35 +0200
Subject: [Linux-uvc-devel] Version.h?
In-Reply-To: <480523B7.7090907@pdi.com>
References: <48050326.40408@pdi.com> <20080415205150.GB1086@plankton.ifup.org>
	<480523B7.7090907@pdi.com>
Message-ID: <200804162151.35875.laurent.pinchart@skynet.be>

Hi Charlie,

On Tuesday 15 April 2008, Charlie Wyse wrote:
> Brandon Philips wrote:
> > On 12:33 Tue 15 Apr 2008, Charlie Wyse wrote:
> >> Whenever I run a make on the uvcvideo directory I get an error about
> >> the version.h file.  If I look at the file itself it is a 0 length
> >> file.  This file is removed with a make clean, so it looks like
> >> something in the make process isn't working.
> >
> > If you aren't using a SVN checkout or don't have svn installed the
> > version.h generation won't work.  The driver will still build however.
> >
> > Relevant source entries.
> >
> > Makefile:
> > <snip>
> >         @sh svn-version.sh > version.h 2>/dev/null
> >
> > uvc_driver.c:
> > <snip>
> > #ifndef DRIVER_VERSION
> > #define DRIVER_VERSION          "v0.1.0"
> > #endif
> >
> >> My QC 9000 works most of the time, but I figure this might be why all
> >> my devices come up as <unnamed>, even if I put the vender/product id
> >> into the uvc_driver.c file before running a make.  Any one know what
> >> is going on with that file?
> >
> > Your device comes up as <unnamed> because the device vendor didn't
> > include the optional string descriptor for it.  It shouldn't effect the
> > device functioning.
> >
> > What functional problems are you having with the device?
> >
> > Cheers,
> >
> > 	Brandon
>
> Good to know about the version.h thing, I was afraid that was the
> problem as the 08ce was no in the uvc_driver.c file until I added it.
> We are having problems with some of our Logitech QC 5000's.  When we
> create the module on the same kernel we keep getting things in dmesg
> like the following:
> uvcvideo: Found UVC 1.00 device <unnamed> (046d:08ce)
> uvcvideo: Failed to query (1) UVC control 2 (unit 0) : -71 (exp. 26).
> uvcvideo: Failed to initialize the device (-5).

-71 is -EPROTO. This is a low level error that can be caused either by 
electrical issues (noisy environment, bad cables, bad USB ports, ...) or a 
buggy device (firmware and/or hardware).

The Logitech QC 5000 is known to be buggy. Sad but true. There are lots of 
timing issues that are usually not triggered when using the webcam under 
Windows. Linux has different timings, and things sometimes break depending on 
your kernel version, on the USB controller, on the CPU speed, ...

Plugging the camera into another USB port might help. If it doesn't I'm afraid 
there's not much I can do.

> This prevents us from seeing any video and causes ekiga to crash with
> the following error in dmesg logs:
> Apr 15 10:51:39 duel kernel: uvcvideo: Failed to query (132) UVC control
> 4 (unit 2) : -32 (exp. 2).

That's a non-fatal error that you will see quite often when you run into 
timing issues. It basically means Ekiga tried to modify a control (probably 
brightness in this case) and the device didn't answer the request because of 
timings issues caused by a firmware bug.

> On my other machine  I am getting past the dmesg part with both the QC
> 5000 and 9000, ekiga still doesn't want to switch video with whomever I
> call, but I believe that might be an ekiga problem.  I can still look at
> gstreamer-properties and see video without errors.  I was afraid this
> was just due to vendor ids not being listed, but it looks like I was
> troubleshooting down the wrong path.  Any ideas what could case those
> issues?

Webcam bugs unfortunately :-( There might be a way to work around them in 
software, but that would require in-depth analysis with a USB 2.0 analyser, 
comparing traces captured using Windows and Linux, ...

Best regards,

Laurent Pinchart


From philipp at kolmann.at  Wed Apr 16 21:44:01 2008
From: philipp at kolmann.at (Philipp Kolmann)
Date: Wed, 16 Apr 2008 21:44:01 +0200
Subject: [Linux-uvc-devel] // Quickcam Pro 9000 and uvcdynctrl woes //
In-Reply-To: <20080416175544.GA11706@selectparks.net>
References: <ef69c11a0804111012v7a479152g3124cd1415216af2@mail.gmail.com>
	<ef69c11a0804111016h312bcf7at1fa5e1165a164def@mail.gmail.com>
	<20080412004125.GE20097@selectparks.net>
	<200804132317.48618.laurent.pinchart@skynet.be>
	<20080416175544.GA11706@selectparks.net>
Message-ID: <20080416194401.GA1327@kolmann.at>

On Wed, Apr 16, 2008 at 07:55:44PM +0200, Julian Oliver wrote:
> 
> ..on or around Sun, Apr 13, 2008 at 11:17:48PM +0200, Laurent Pinchart said:
> > 
> > "Important note: libwebcam 0.1.1 is not fully compatible with revisions of the 
> > UVC driver later than 178. Until libwebcam 0.1.2 is available, users are 
> > advised to use uvcvideo r178."
> > 
> > (http://www.quickcamteam.net/software/libwebcam/)
> 
> ugh.. thanks alot. i didn't read that line in your webpage.
> 
> sadly i can't use an older version of the driver as it has compatibility
> problems with the gstreamer-dependent computer vision application on this
> system.
> it seems to have to do with the speed at which the driver can provide
> properties about the camera. with a newer version of the driver it works
> fine.


there is a libwecam svn repo out there now. This works also with last uvcvideo
revisions:

http://forums.quickcamteam.net/showthread.php?tid=214

http://svn.quickcamteam.net/svn/qct/Linux/

hth,
Philipp

-- 
The more I learn about people, the more I like my dog!


From Charlie.Wyse at pdi.dreamworks.com  Wed Apr 16 22:31:18 2008
From: Charlie.Wyse at pdi.dreamworks.com (Charlie Wyse)
Date: Wed, 16 Apr 2008 13:31:18 -0700
Subject: [Linux-uvc-devel] Version.h?
In-Reply-To: <200804162151.35875.laurent.pinchart@skynet.be>
References: <48050326.40408@pdi.com> <20080415205150.GB1086@plankton.ifup.org>
	<480523B7.7090907@pdi.com>
	<200804162151.35875.laurent.pinchart@skynet.be>
Message-ID: <48066216.1010707@pdi.com>

Laurent Pinchart wrote:
> Hi Charlie,
>
> On Tuesday 15 April 2008, Charlie Wyse wrote:
>   
>> Brandon Philips wrote:
>>     
>>> On 12:33 Tue 15 Apr 2008, Charlie Wyse wrote:
>>>       
>>>> Whenever I run a make on the uvcvideo directory I get an error about
>>>> the version.h file.  If I look at the file itself it is a 0 length
>>>> file.  This file is removed with a make clean, so it looks like
>>>> something in the make process isn't working.
>>>>         
>>> If you aren't using a SVN checkout or don't have svn installed the
>>> version.h generation won't work.  The driver will still build however.
>>>
>>> Relevant source entries.
>>>
>>> Makefile:
>>> <snip>
>>>         @sh svn-version.sh > version.h 2>/dev/null
>>>
>>> uvc_driver.c:
>>> <snip>
>>> #ifndef DRIVER_VERSION
>>> #define DRIVER_VERSION          "v0.1.0"
>>> #endif
>>>
>>>       
>>>> My QC 9000 works most of the time, but I figure this might be why all
>>>> my devices come up as <unnamed>, even if I put the vender/product id
>>>> into the uvc_driver.c file before running a make.  Any one know what
>>>> is going on with that file?
>>>>         
>>> Your device comes up as <unnamed> because the device vendor didn't
>>> include the optional string descriptor for it.  It shouldn't effect the
>>> device functioning.
>>>
>>> What functional problems are you having with the device?
>>>
>>> Cheers,
>>>
>>> 	Brandon
>>>       
>> Good to know about the version.h thing, I was afraid that was the
>> problem as the 08ce was no in the uvc_driver.c file until I added it.
>> We are having problems with some of our Logitech QC 5000's.  When we
>> create the module on the same kernel we keep getting things in dmesg
>> like the following:
>> uvcvideo: Found UVC 1.00 device <unnamed> (046d:08ce)
>> uvcvideo: Failed to query (1) UVC control 2 (unit 0) : -71 (exp. 26).
>> uvcvideo: Failed to initialize the device (-5).
>>     
>
> -71 is -EPROTO. This is a low level error that can be caused either by 
> electrical issues (noisy environment, bad cables, bad USB ports, ...) or a 
> buggy device (firmware and/or hardware).
>
> The Logitech QC 5000 is known to be buggy. Sad but true. There are lots of 
> timing issues that are usually not triggered when using the webcam under 
> Windows. Linux has different timings, and things sometimes break depending on 
> your kernel version, on the USB controller, on the CPU speed, ...
>
> Plugging the camera into another USB port might help. If it doesn't I'm afraid 
> there's not much I can do.
>
>   
>> This prevents us from seeing any video and causes ekiga to crash with
>> the following error in dmesg logs:
>> Apr 15 10:51:39 duel kernel: uvcvideo: Failed to query (132) UVC control
>> 4 (unit 2) : -32 (exp. 2).
>>     
>
> That's a non-fatal error that you will see quite often when you run into 
> timing issues. It basically means Ekiga tried to modify a control (probably 
> brightness in this case) and the device didn't answer the request because of 
> timings issues caused by a firmware bug.
>
>   
>> On my other machine  I am getting past the dmesg part with both the QC
>> 5000 and 9000, ekiga still doesn't want to switch video with whomever I
>> call, but I believe that might be an ekiga problem.  I can still look at
>> gstreamer-properties and see video without errors.  I was afraid this
>> was just due to vendor ids not being listed, but it looks like I was
>> troubleshooting down the wrong path.  Any ideas what could case those
>> issues?
>>     
>
> Webcam bugs unfortunately :-( There might be a way to work around them in 
> software, but that would require in-depth analysis with a USB 2.0 analyser, 
> comparing traces captured using Windows and Linux, ...
>
> Best regards,
>
> Laurent Pinchart
>   
Taht is unfortunate.  Laurent, do you have a recommended UVC camera?  We 
bought a bunch of 5000's and are pretty much getting what you said, most 
of them work, some just simply don't.  We are looking at the Quickcam 
9000 and so far our tests are positive, do you think that might be a 
better option?


From laurent.pinchart at skynet.be  Wed Apr 16 22:42:45 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 16 Apr 2008 22:42:45 +0200
Subject: [Linux-uvc-devel] High resolution webcam + USB 1.1 (LX832)
In-Reply-To: <9F7D9FC63DF0DE4EBDC4786B61A1AB9F55AD86@hglmail.strukton.org>
References: <9F7D9FC63DF0DE4EBDC4786B61A1AB9F55AD83@hglmail.strukton.org>
	<20080415203719.GA1086@plankton.ifup.org>
	<9F7D9FC63DF0DE4EBDC4786B61A1AB9F55AD86@hglmail.strukton.org>
Message-ID: <200804162242.45541.laurent.pinchart@skynet.be>

On Wednesday 16 April 2008, Colenbrander, Roderick wrote:
> I read about the still image mode before but is it really anything special?
> Some sources indicate that it just grabs a frame from the video stream. The
> request is either made by the webcam software or by pressing a snapshot
> button. Sure I can program but is it worth all the troubles? The main
> advantage would be improved image quality.

It all depends on the hardware. The UVC spec defines several method to capture 
still images. The most common one, implemented by all the webcams I've tested 
so far, is to take the next image from the video stream. This won't help 
improving image quality.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Apr 16 23:32:51 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 16 Apr 2008 23:32:51 +0200
Subject: [Linux-uvc-devel] Panasonic nv-gs11
In-Reply-To: <88a3ffd40804160828l5ced6172qc5706c4f7a5205cb@mail.gmail.com>
References: <88a3ffd40804160828l5ced6172qc5706c4f7a5205cb@mail.gmail.com>
Message-ID: <200804162332.51421.laurent.pinchart@skynet.be>

On Wednesday 16 April 2008, ??????? ??????? wrote:
> Hello everybody.
> I've got a problem with Panasonic NV-GS11 camera using DV-mode.
> (Webcam mode works)
>
> What we got on your site:
> 04da:2318 Panasonic Camcorder NV-GS11/230/250 (webcam mode) Panasonic
> 04da:231a Panasonic Camcorder NV-GS11/230/250 (DV mode) Panasonic
> But when I try to attach my camera in DV mode - nothing happen.
>
> ~/source/linux-uvc$ lsusb
> ..
> Bus 004 Device 011: ID 04da:2317 Panasonic (Matsushita)
> ..
>
> Any ideas?

What do you expect to happen exactly ? Have you tried running a DV-enabled 
video application such as mplayer ?

Best regards,

Laurent Pinchart


From lambros at lambrou.net  Wed Apr 16 23:26:33 2008
From: lambros at lambrou.net (Lambros Lambrou)
Date: Wed, 16 Apr 2008 22:26:33 +0100
Subject: [Linux-uvc-devel] Please test this USB EHCI patch
In-Reply-To: <mailman.1779.1207962811.19897.linux-uvc-devel@lists.berlios.de>
References: <mailman.1779.1207962811.19897.linux-uvc-devel@lists.berlios.de>
Message-ID: <1208381193.8438.24.camel@ll-laptop>

On Sat, 2008-04-12 at 03:13 +0200,
linux-uvc-devel-request at lists.berlios.de wrote:

> Date: Fri, 11 Apr 2008 15:09:21 -0300
> From: Herton Ronaldo Krzesinski <herton at mandriva.com.br>
> Subject: Re: [Linux-uvc-devel] Please test this USB EHCI patch
> To: linux-uvc-devel at lists.berlios.de
> Cc: Laurent Pinchart <laurent.pinchart at skynet.be>
> Message-ID: <200804111509.21952.herton at mandriva.com.br>
> Content-Type: text/plain;  charset="iso-8859-1"
> 
> Em Tuesday 25 March 2008 17:54:58 Laurent Pinchart escreveu:
> > Hi everybody,
> > 
> > some people have run into EHCI-related issue where the video would freeze and 
> > the Linux UVC driver would print "uvcvideo: Failed to resubmit video URB 
> > (-45)" errors after a while.
> > 
> > Alan Stern was kind enough to write a quick patch to try to solve the issue. 
> > Could you please test it and report the results ? I'm particularly interested 
> > in hearing from people who ran into the -45 error frequently. Please retest 
> > your camera without the patch, make sure you can reproduce the problem 
> > accurately, and try to recompile your kernel with the patch applied.
> > 
> > Thanks in advance for your help.

I'm very happy to report success with this patch.  I was having constant
problems with my Webcam video locking up with this exact error.  After
compiling a kernel with this patch, the camera now works perfectly!

For some reason, I was having difficulties actually locating and
applying the patch.  I eventually found it here:
http://permalink.gmane.org/gmane.linux.usb.general/2929

I tried to apply this against my current Ubuntu kernel sources
(2.6.24-16.30).  Unfortunately, a couple of hunks failed to apply, and
it became clear the patch wouldn't work against this kernel version.

I didn't really want to download and install a "vanilla" kernel, for
fear of breaking a lot of other stuff that might need repairing (nVidia
drivers, Wifi drivers, other Ubuntu-specific stuff etc).  So I
downloaded a patch file from kernel.org for version 2.6.25.  Then I
edited the patch file to isolate just the changes that affected the file
ehci_sched.c .  I applied this patch to my Ubuntu kernel source tree.
Then I applied Alan Stern's webcam patch (from the URL above), which
worked correctly (no missing hunks).  I built the resulting kernel, and
it worked flawlessly with no breakages whatsoever, which was great news!

I don't know if this patch will ever make it into Ubuntu Hardy, but I
hope it will be accepted into the mainline kernel in time for hardy+1.

Thankyou to Alan Stern for his patch that has finally fixed my system,
and to everyone else who has worked on this problem.  Hope others find
this information useful.

Regards,
Lambros




From laurent.pinchart at skynet.be  Thu Apr 17 00:32:32 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 17 Apr 2008 00:32:32 +0200
Subject: [Linux-uvc-devel] usb_endpoints.
In-Reply-To: <480524F6.1080109@pdi.com>
References: <480524F6.1080109@pdi.com>
Message-ID: <200804170032.32717.laurent.pinchart@skynet.be>

Hi Charlie,

On Tuesday 15 April 2008, Charlie Wyse wrote:
> Greetings,
>
> I'm working with RedHat to get the uvcvideo module in the kernel. We are
> having some success with RHEL4.4 - RHEL5.1 However with the new kernel
> in RHEL5.2 Currently around 2.6.18-86 and counting I am running into a
> usb_endpoint issue. There seems to be a conflict with the
> /include/linux/usb.h file in the kernel devel. I guess my question is
> simply, is this an issue I should report to the kernel maintainers as a
> conflict with use of the usb_endpoints. Or is this something uvcvideo
> should take into account with newer kernels in RHEL?
>
> Building USB Video Class driver...
> make[1]: Entering directory `/usr/src/kernels/2.6.18-86.el5-xen-x86_64'
> CC [M] /home/cwyse/UVC/uvc_driver.o
> In file included from /home/cwyse/UVC/uvcvideo.h:8,
> from /home/cwyse/UVC/uvc_driver.c:45:
> /home/cwyse/UVC/uvc_compat.h:265: error: redefinition of
> ?usb_endpoint_dir_in?
> include/linux/usb.h:474: error: previous definition of
> ?usb_endpoint_dir_in? was here
> /home/cwyse/UVC/uvc_compat.h:270: error: redefinition of
> ?usb_endpoint_xfer_int?
> include/linux/usb.h:521: error: previous definition of
> ?usb_endpoint_xfer_int? was here
> /home/cwyse/UVC/uvc_compat.h:276: error: redefinition of
> ?usb_endpoint_xfer_isoc?
> include/linux/usb.h:534: error: previous definition of
> ?usb_endpoint_xfer_isoc? was here
> /home/cwyse/UVC/uvc_compat.h:282: error: redefinition of
> ?usb_endpoint_xfer_bulk?
> include/linux/usb.h:496: error: previous definition of
> ?usb_endpoint_xfer_bulk? was here
> /home/cwyse/UVC/uvc_compat.h:288: error: redefinition of
> ?usb_endpoint_is_int_in?
> include/linux/usb.h:571: error: previous definition of
> ?usb_endpoint_is_int_in? was here
> make[2]: *** [/home/cwyse/UVC/uvc_driver.o] Error 1
> make[1]: *** [_module_/home/cwyse/UVC] Error 2
> make[1]: Leaving directory `/usr/src/kernels/2.6.18-86.el5-xen-x86_64'
> make: *** [uvcvideo] Error 2

To make the Linux UVC driver compilable against all kernel versions starting 
at 2.6.15, the source code uses conditional compilation directives based on 
the kernel version number.

RHEL ships patched kernels with new features without incrementing the version 
number. The uvcvideo driver gets confused and won't compile.

To fix this, you should edit uvc_compat.h and remove redundant 
function/variables/macros definitions.

Best regards,

Laurent Pinchart


From rcolenbrander at strukton.com  Fri Apr 18 10:19:49 2008
From: rcolenbrander at strukton.com (Colenbrander, Roderick)
Date: Fri, 18 Apr 2008 10:19:49 +0200
Subject: [Linux-uvc-devel] High resolution webcam + USB 1.1 (LX832)
References: <9F7D9FC63DF0DE4EBDC4786B61A1AB9F55AD83@hglmail.strukton.org>
	<20080415203719.GA1086@plankton.ifup.org>
	<9F7D9FC63DF0DE4EBDC4786B61A1AB9F55AD86@hglmail.strukton.org>
	<200804162242.45541.laurent.pinchart@skynet.be>
Message-ID: <9F7D9FC63DF0DE4EBDC4786B61A1AB9F55AD8B@hglmail.strukton.org>

As I mentioned my platform is limited to USB 1.1. I'm now using a Logitech Quickcam Pro 9000 and like most webcams it offers less functionality in USB 1.1 mode. It only offers 160x120 in YUV mode and upto 800x600 in MJPG mode. The image quality appears to scale with the max requested framerate. 800x600 @ 5fps produces reasonable images but if possible I like to get better image quality. Increasing the fps reduces image quality as more compression is used to squeeze all the data over the bus.

If I would use still image the timing / buffering constraints would get relaxed, would I able to reach a higher resolution that way?

Roderick

-----Original Message-----
From:	Laurent Pinchart [mailto:laurent.pinchart at skynet.be]
Sent:	Wed 4/16/2008 10:42 PM
To:	linux-uvc-devel at lists.berlios.de
Cc:	Colenbrander, Roderick; Brandon Philips
Subject:	Re: [Linux-uvc-devel] High resolution webcam + USB 1.1 (LX832)

On Wednesday 16 April 2008, Colenbrander, Roderick wrote:
> I read about the still image mode before but is it really anything special?
> Some sources indicate that it just grabs a frame from the video stream. The
> request is either made by the webcam software or by pressing a snapshot
> button. Sure I can program but is it worth all the troubles? The main
> advantage would be improved image quality.

It all depends on the hardware. The UVC spec defines several method to capture 
still images. The most common one, implemented by all the webcams I've tested 
so far, is to take the next image from the video stream. This won't help 
improving image quality.

Best regards,

Laurent Pinchart



#####################################################################################
Disclaimer

Deze email en alle hiermee verzonden bestanden zijn vertrouwelijk 
en alleen bestemd voor diegene aan wie de e-mail is geadresseerd. 
Indien u ten onrechte deze email heeft ontvangen waarschuw dan de 
systeembeheerder. (Postmaster at Strukton.com) Deze voetnoot 
bevestigt dat deze email is gecontroleerd op aanwezigheid van 
computer virussen. 

Disclaimer

This email and any files transmitted with it are confidential and 
intended solely for the use of the individual or entity to whom 
they are addressed. If you have received this email in error please 
notify the system manager (Postmaster at Strukton.com) This footnote 
also confirms that this email message has been swept for the 
presence of computer virusses. 

#####################################################################################

#####################################################################################
This e-mail message has been scanned for Viruses and Content and cleared 
by MailMarshal
#####################################################################################


From fred at lea-linux.org  Sat Apr 19 11:05:53 2008
From: fred at lea-linux.org (=?utf-8?q?Fr=C3=A9d=C3=A9ric_Bonnaud?=)
Date: Sat, 19 Apr 2008 11:05:53 +0200
Subject: [Linux-uvc-devel] Creative Live!(R) Cam Video IM Pro
Message-ID: <200804191105.53642.fred@lea-linux.org>

Here : http://linux-uvc.berlios.de/ 
The "Creative Live!(R) Cam Video IM Pro" is report to work, but i've got this 
model and it didn't work
The device id is not the same as reported on this page.
My device id is : 
Bus 002 Device 013: ID 041e:4055 Creative Technology, Ltd

Here's what say lsusb -v :
======================================
Bus 002 Device 014: ID 041e:4055 Creative Technology, Ltd 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  idVendor           0x041e Creative Technology, Ltd
  idProduct          0x4055 
  bcdDevice            1.02
  iManufacturer           0 
  iProduct                1 Live! Cam Video IM Pro
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          101
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               4
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       1
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 1024 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               4
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       2
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x1380  3x 896 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               4
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       3
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x1300  3x 768 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               4
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)
======================================

on [uvc_driver.c] in [uvc_ids struct] i add this :
======================================
        /* Creative Live! Cam Video IM Pro */
        { .match_flags          = USB_DEVICE_ID_MATCH_DEVICE
                                | USB_DEVICE_ID_MATCH_INT_INFO,
          .idVendor             = 0x041e,
          .idProduct            = 0x4055,
          .bInterfaceClass      = USB_CLASS_VIDEO,
          .bInterfaceSubClass   = 1,
          .bInterfaceProtocol   = 0,
          .driver_info          = UVC_QUIRK_PROBE_MINMAX },
======================================

But it didn't work as well.

Here's what say my mandriva kernel :
======================================
Apr 19 10:58:58 gandalf kernel: usbcore: registered new interface driver 
uvcvideo
Apr 19 10:58:58 gandalf kernel: USB Video Class driver (SVN r202)
======================================
And, when i plug the cam it says : 
======================================
Apr 19 11:00:12 gandalf kernel: usb 2-9: new high speed USB device using 
ehci_hcd and address 18
Apr 19 11:00:12 gandalf kernel: usb 2-9: configuration #1 chosen from 1 choice
======================================

On many web site this webcam is claimed to be "uvc", but is it ?
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 197 bytes
Desc: This is a digitally signed message part.
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080419/99d3fdb1/attachment.pgp>

From reimer.christopher at freenet.de  Sat Apr 19 12:02:57 2008
From: reimer.christopher at freenet.de (Christopher Reimer)
Date: Sat, 19 Apr 2008 12:02:57 +0200
Subject: [Linux-uvc-devel] Only get black screen with Logitech QuickCam Pro
	5000
Message-ID: <4809C351.80803@freenet.de>

Hello,

I've checked out the latest uvc driver from SVN, compiled and installed 
it and was able to successfully load the module.

With "xawtv -c /dev/video1" I just get a black image. I also get this 
black image if I select my cam in amsn.

Can someone please help me with getting my cam to work?

I've attached some info below and may post more info as required

Yours

Christopher


# uname -a
Linux chrissispc 2.6.21.5 #1 Mon Feb 11 16:50:19 CST 2008 i686 AMD 
Athlon(tm) 64 Processor 3700+ AuthenticAMD GNU/Linux

# lsub
Bus 2 Device 2: ID 046d:c50e Logitech, Inc. MX-1000 Cordless Mouse Receiver
Bus 2 Device 1: ID 0000:0000
Bus 1 Device 3: ID 046d:08ce Logitech, Inc.
Bus 1 Device 1: ID 0000:0000

# dmesg (only parts related to my cam)
uvcvideo: Found UVC 1.00 device <unnamed> (046d:08ce)
input: UVC Camera (046d:08ce) as /class/input/input3
usbcore: registered new interface driver uvcvideo
USB Video Class driver (SVN r202)
usbcore: registered new interface driver snd-usb-audio


From gob937 at gmail.com  Sun Apr 20 14:07:02 2008
From: gob937 at gmail.com (=?UTF-8?B?0J3QuNC60L7Qu9Cw0Lkg0KjQtdC70LXRhdC+0LI=?=)
Date: Sun, 20 Apr 2008 16:07:02 +0400
Subject: [Linux-uvc-devel] Panasonic nv-gs11
In-Reply-To: <200804162332.51421.laurent.pinchart@skynet.be>
References: <88a3ffd40804160828l5ced6172qc5706c4f7a5205cb@mail.gmail.com>
	<200804162332.51421.laurent.pinchart@skynet.be>
Message-ID: <88a3ffd40804200507o3ef925fbw46097f88de435b61@mail.gmail.com>

I expected some output in dmesg and /dev/video0 creation. But nothing
happens.

2008/4/17 Laurent Pinchart <laurent.pinchart at skynet.be>:

> On Wednesday 16 April 2008, ??????? ??????? wrote:
> > Hello everybody.
> > I've got a problem with Panasonic NV-GS11 camera using DV-mode.
> > (Webcam mode works)
> >
> > What we got on your site:
> > 04da:2318 Panasonic Camcorder NV-GS11/230/250 (webcam mode) Panasonic
> > 04da:231a Panasonic Camcorder NV-GS11/230/250 (DV mode) Panasonic
> > But when I try to attach my camera in DV mode - nothing happen.
> >
> > ~/source/linux-uvc$ lsusb
> > ..
> > Bus 004 Device 011: ID 04da:2317 Panasonic (Matsushita)
> > ..
> >
> > Any ideas?
>
> What do you expect to happen exactly ? Have you tried running a DV-enabled
> video application such as mplayer ?
>
> Best regards,
>
> Laurent Pinchart
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080420/b266c8ac/attachment.html>

From mdoyle at mdoyle.org  Sun Apr 20 15:32:36 2008
From: mdoyle at mdoyle.org (Michael Doyle)
Date: Sun, 20 Apr 2008 14:32:36 +0100
Subject: [Linux-uvc-devel] make problem:implicit declaration of function
	'v4l_printk_ioctl'
Message-ID: <340f8a7f0804200632j709ca44dj4f0fdf0011f36963@mail.gmail.com>

Hi,

When i run make i get:

CC [M]  /home/micky/uvc/trunk/uvc_v4l2.o
/home/micky/uvc/trunk/uvc_v4l2.c: In function 'uvc_v4l2_do_ioctl':
/home/micky/uvc/trunk/uvc_v4l2.c:480: warning: implicit declaration of
function 'v4l_printk_ioctl'


When i run modprobe uvcvideo in the logfile i get:
Apr 20 13:42:35 micky-desktop kernel: [ 1976.991020] uvcvideo: disagrees
about version of symbol video_device_release
Apr 20 13:42:35 micky-desktop kernel: [ 1976.991021] uvcvideo: Unknown
symbol video_device_release

I have recently compiled and installed v4l-dvb, could this be the cause of
the problem?

Any help would be appreciated.

Micky


-- 
_________________________________
Michael Doyle
Mobile (UK): 0798-3415687
Email: mdoyle at mdoyle.org / micky.doyle at gmail.com
__________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080420/3368dfb7/attachment.html>

From darren.longhorn at redembedded.com  Mon Apr 21 14:47:15 2008
From: darren.longhorn at redembedded.com (Darren Longhorn)
Date: Mon, 21 Apr 2008 13:47:15 +0100
Subject: [Linux-uvc-devel] svn 200 on 2.6.10 kernel
In-Reply-To: <200804162040.17810.laurent.pinchart@skynet.be>
References: <480381F1.3090607@redembedded.com>
	<200804142019.54016.laurent.pinchart@skynet.be>
	<4806330A.9070402@redembedded.com>
	<200804162040.17810.laurent.pinchart@skynet.be>
Message-ID: <480C8CD3.8060806@redembedded.com>

Laurent Pinchart wrote:
> Hi Darren,
>
> On Wednesday 16 April 2008, Darren Longhorn wrote:
>   
>> Hi Laurent,
>>
>> Laurent Pinchart wrote:
>>     
>>> 2.6.10 is indeed quite old, and definitely unsupported by the Linux UVC
>>> driver. You might be able to make it work, but I can't guarantee
>>> anything.
>>>       
>> OK, I'll try and make it work. I understand when you say such an old
>> kernel is unsupported, but I will continue to ask questions as I address
>> problems if I may.
>>     
>
> Sure, no problem.
>   

Thank you very much.

<snip>
>> The final issue I saw in uvc_driver.c is unknown type for pm_message_t
>> used as a parameter in uvc_suspend(). As the parameter isn't used I just
>> #defined it as u32.
>>     
>
> You should instead look at your kernel sources, check what parameters the 
> uvc_suspend function expects, and modify it accordingly.
>
>   
I did that, and it turned out to b u32.
>> So now I have moced on to uvc_status.c where I get the following errors:
<snip>

> The input layer is used to report button events to userspace. If you don't 
> care about camera buttons you can remove uvc_status.c completely.
>
>   
I don't, particularly, so I removed uvc_status.c from Makefile and 
addressed the subsequent unresloved externals.
I also had to export a few functions from my usb drivers and everything 
compiled and insmoded  ok.  

I'm now hoping to get a few more cameras working on my target platform - 
at present only the Logitech 9000 is recognised.

Thank you very much for your help.

Cheers

Darren

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080421/82a6f73a/attachment.html>

From laurent.pinchart at skynet.be  Mon Apr 21 21:18:01 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 21 Apr 2008 21:18:01 +0200
Subject: [Linux-uvc-devel] Panasonic nv-gs11
In-Reply-To: <88a3ffd40804200507o3ef925fbw46097f88de435b61@mail.gmail.com>
References: <88a3ffd40804160828l5ced6172qc5706c4f7a5205cb@mail.gmail.com>
	<200804162332.51421.laurent.pinchart@skynet.be>
	<88a3ffd40804200507o3ef925fbw46097f88de435b61@mail.gmail.com>
Message-ID: <200804212118.02464.laurent.pinchart@skynet.be>

On Sunday 20 April 2008, ??????? ??????? wrote:
> I expected some output in dmesg and /dev/video0 creation. But nothing
> happens.

Could you please post the output of

lsusb -d 04da:2317 -v

using usbutils 0.72 or newer (0.73+ preferred) ?

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Apr 21 21:19:54 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 21 Apr 2008 21:19:54 +0200
Subject: [Linux-uvc-devel] High resolution webcam + USB 1.1 (LX832)
In-Reply-To: <9F7D9FC63DF0DE4EBDC4786B61A1AB9F55AD8B@hglmail.strukton.org>
References: <9F7D9FC63DF0DE4EBDC4786B61A1AB9F55AD83@hglmail.strukton.org>
	<200804162242.45541.laurent.pinchart@skynet.be>
	<9F7D9FC63DF0DE4EBDC4786B61A1AB9F55AD8B@hglmail.strukton.org>
Message-ID: <200804212119.54284.laurent.pinchart@skynet.be>

On Friday 18 April 2008, Colenbrander, Roderick wrote:
> As I mentioned my platform is limited to USB 1.1. I'm now using a Logitech
> Quickcam Pro 9000 and like most webcams it offers less functionality in USB
> 1.1 mode. It only offers 160x120 in YUV mode and upto 800x600 in MJPG mode.
> The image quality appears to scale with the max requested framerate.
> 800x600 @ 5fps produces reasonable images but if possible I like to get
> better image quality. Increasing the fps reduces image quality as more
> compression is used to squeeze all the data over the bus.
>
> If I would use still image the timing / buffering constraints would get
> relaxed, would I able to reach a higher resolution that way?

No with that camera. The Logitech Quickcams use a very straightforward 
approach to still image capture. Nothing is implemented in the camera, and 
the host driver takes a picture from the video stream to serve it as a still 
image. This will unfortunately not lead to relaxed timing/buffering 
constraints.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Apr 21 21:24:41 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 21 Apr 2008 21:24:41 +0200
Subject: [Linux-uvc-devel] Creative Live!(R) Cam Video IM Pro
In-Reply-To: <200804191105.53642.fred@lea-linux.org>
References: <200804191105.53642.fred@lea-linux.org>
Message-ID: <200804212124.41841.laurent.pinchart@skynet.be>

Hi Fr?d?ric,

On Saturday 19 April 2008, Fr?d?ric Bonnaud wrote:
> Here : http://linux-uvc.berlios.de/
> The "Creative Live!(R) Cam Video IM Pro" is report to work, but i've got
> this model and it didn't work
> The device id is not the same as reported on this page.
> My device id is :
> Bus 002 Device 013: ID 041e:4055 Creative Technology, Ltd
>
> Here's what say lsusb -v :
> ======================================
> Bus 002 Device 014: ID 041e:4055 Creative Technology, Ltd
> Device Descriptor:
>   bLength                18
>   bDescriptorType         1
>   bcdUSB               2.00
>   bDeviceClass            0 (Defined at Interface level)
>   bDeviceSubClass         0
>   bDeviceProtocol         0
>   bMaxPacketSize0        64
>   idVendor           0x041e Creative Technology, Ltd
>   idProduct          0x4055
>   bcdDevice            1.02
>   iManufacturer           0
>   iProduct                1 Live! Cam Video IM Pro
>   iSerial                 0
>   bNumConfigurations      1
>   Configuration Descriptor:
>     bLength                 9
>     bDescriptorType         2
>     wTotalLength          101
>     bNumInterfaces          1
>     bConfigurationValue     1
>     iConfiguration          0
>     bmAttributes         0x80
>       (Bus Powered)
>     MaxPower              500mA
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       0
>       bNumEndpoints           2
>       bInterfaceClass       255 Vendor Specific Class
>       bInterfaceSubClass    255 Vendor Specific Subclass
>       bInterfaceProtocol    255 Vendor Specific Protocol
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            1
>           Transfer Type            Isochronous
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0000  1x 0 bytes
>         bInterval               1
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x82  EP 2 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0000  1x 0 bytes
>         bInterval               4
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       1
>       bNumEndpoints           2
>       bInterfaceClass       255 Vendor Specific Class
>       bInterfaceSubClass    255 Vendor Specific Subclass
>       bInterfaceProtocol    255 Vendor Specific Protocol
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            1
>           Transfer Type            Isochronous
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x1400  3x 1024 bytes
>         bInterval               1
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x82  EP 2 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0010  1x 16 bytes
>         bInterval               4
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       2
>       bNumEndpoints           2
>       bInterfaceClass       255 Vendor Specific Class
>       bInterfaceSubClass    255 Vendor Specific Subclass
>       bInterfaceProtocol    255 Vendor Specific Protocol
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            1
>           Transfer Type            Isochronous
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x1380  3x 896 bytes
>         bInterval               1
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x82  EP 2 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0010  1x 16 bytes
>         bInterval               4
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       3
>       bNumEndpoints           2
>       bInterfaceClass       255 Vendor Specific Class
>       bInterfaceSubClass    255 Vendor Specific Subclass
>       bInterfaceProtocol    255 Vendor Specific Protocol
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            1
>           Transfer Type            Isochronous
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x1300  3x 768 bytes
>         bInterval               1
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x82  EP 2 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0010  1x 16 bytes
>         bInterval               4
> Device Qualifier (for other device speed):
>   bLength                10
>   bDescriptorType         6
>   bcdUSB               2.00
>   bDeviceClass            0 (Defined at Interface level)
>   bDeviceSubClass         0
>   bDeviceProtocol         0
>   bMaxPacketSize0        64
>   bNumConfigurations      1
> Device Status:     0x0000
>   (Bus Powered)
> ======================================
>
> on [uvc_driver.c] in [uvc_ids struct] i add this :
> ======================================
>         /* Creative Live! Cam Video IM Pro */
>         { .match_flags          = USB_DEVICE_ID_MATCH_DEVICE
>
>                                 | USB_DEVICE_ID_MATCH_INT_INFO,
>
>           .idVendor             = 0x041e,
>           .idProduct            = 0x4055,
>           .bInterfaceClass      = USB_CLASS_VIDEO,
>           .bInterfaceSubClass   = 1,
>           .bInterfaceProtocol   = 0,
>           .driver_info          = UVC_QUIRK_PROBE_MINMAX },
> ======================================
>
> But it didn't work as well.
>
> Here's what say my mandriva kernel :
> ======================================
> Apr 19 10:58:58 gandalf kernel: usbcore: registered new interface driver
> uvcvideo
> Apr 19 10:58:58 gandalf kernel: USB Video Class driver (SVN r202)
> ======================================
> And, when i plug the cam it says :
> ======================================
> Apr 19 11:00:12 gandalf kernel: usb 2-9: new high speed USB device using
> ehci_hcd and address 18
> Apr 19 11:00:12 gandalf kernel: usb 2-9: configuration #1 chosen from 1
> choice ======================================
>
> On many web site this webcam is claimed to be "uvc", but is it ?

I'm afraid your webcam isn't UVC compatible. Many webcam vendors sell 
different hardware under the same, usually when they want to reduce the cost 
of a working product.

You should try your luck with the gspca driver, maybe it will support your 
camera.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Apr 21 21:26:36 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 21 Apr 2008 21:26:36 +0200
Subject: [Linux-uvc-devel] Only get black screen with Logitech QuickCam
	Pro 5000
In-Reply-To: <4809C351.80803@freenet.de>
References: <4809C351.80803@freenet.de>
Message-ID: <200804212126.36365.laurent.pinchart@skynet.be>

Hi Christopher,

On Saturday 19 April 2008, Christopher Reimer wrote:
> Hello,
>
> I've checked out the latest uvc driver from SVN, compiled and installed
> it and was able to successfully load the module.
>
> With "xawtv -c /dev/video1" I just get a black image. I also get this
> black image if I select my cam in amsn.
>
> Can someone please help me with getting my cam to work?
>
> I've attached some info below and may post more info as required

Could you please try luvcview ? xawtv 3.95 has a known bug and I've never 
tested aMsn myself (although other people reported it to work some time ago).

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Apr 21 21:28:19 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 21 Apr 2008 21:28:19 +0200
Subject: [Linux-uvc-devel] make problem:implicit declaration of function
	'v4l_printk_ioctl'
In-Reply-To: <340f8a7f0804200632j709ca44dj4f0fdf0011f36963@mail.gmail.com>
References: <340f8a7f0804200632j709ca44dj4f0fdf0011f36963@mail.gmail.com>
Message-ID: <200804212128.19190.laurent.pinchart@skynet.be>

Hi Michael,

On Sunday 20 April 2008, Michael Doyle wrote:
> Hi,
>
> When i run make i get:
>
> CC [M]  /home/micky/uvc/trunk/uvc_v4l2.o
> /home/micky/uvc/trunk/uvc_v4l2.c: In function 'uvc_v4l2_do_ioctl':
> /home/micky/uvc/trunk/uvc_v4l2.c:480: warning: implicit declaration of
> function 'v4l_printk_ioctl'
>
>
> When i run modprobe uvcvideo in the logfile i get:
> Apr 20 13:42:35 micky-desktop kernel: [ 1976.991020] uvcvideo: disagrees
> about version of symbol video_device_release
> Apr 20 13:42:35 micky-desktop kernel: [ 1976.991021] uvcvideo: Unknown
> symbol video_device_release
>
> I have recently compiled and installed v4l-dvb, could this be the cause of
> the problem?

I'm glad you mentioned this, it will save us some work as v4l-dvb is probably 
the cause of your problems.

Several people ran into the same issue. A fix/workaround has been posted to 
the list some time ago. Could you please search the archives ?

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Apr 21 21:30:28 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 21 Apr 2008 21:30:28 +0200
Subject: [Linux-uvc-devel] svn 200 on 2.6.10 kernel
In-Reply-To: <480C8CD3.8060806@redembedded.com>
References: <480381F1.3090607@redembedded.com>
	<200804162040.17810.laurent.pinchart@skynet.be>
	<480C8CD3.8060806@redembedded.com>
Message-ID: <200804212130.28790.laurent.pinchart@skynet.be>

Hi Daniel,

On Monday 21 April 2008, Darren Longhorn wrote:
> Laurent Pinchart wrote:
> > Hi Darren,
> >
> > On Wednesday 16 April 2008, Darren Longhorn wrote:
> >> Hi Laurent,
> >>
> >> Laurent Pinchart wrote:
> >>> 2.6.10 is indeed quite old, and definitely unsupported by the Linux UVC
> >>> driver. You might be able to make it work, but I can't guarantee
> >>> anything.
> >>
> >> OK, I'll try and make it work. I understand when you say such an old
> >> kernel is unsupported, but I will continue to ask questions as I address
> >> problems if I may.
> >
> > Sure, no problem.
>
> Thank you very much.
>
> <snip>
>
> >> The final issue I saw in uvc_driver.c is unknown type for pm_message_t
> >> used as a parameter in uvc_suspend(). As the parameter isn't used I just
> >> #defined it as u32.
> >
> > You should instead look at your kernel sources, check what parameters the
> > uvc_suspend function expects, and modify it accordingly.
>
> I did that, and it turned out to b u32.
>
> >> So now I have moced on to uvc_status.c where I get the following errors:
>
> <snip>
>
> > The input layer is used to report button events to userspace. If you
> > don't care about camera buttons you can remove uvc_status.c completely.
>
> I don't, particularly, so I removed uvc_status.c from Makefile and
> addressed the subsequent unresloved externals.
> I also had to export a few functions from my usb drivers and everything
> compiled and insmoded  ok.
>
> I'm now hoping to get a few more cameras working on my target platform -
> at present only the Logitech 9000 is recognised.

In theory all webcams supported by the driver should be recognised. In 
practice some will probably not work. I'll be interested to hear about your 
experimentation and results.

> Thank you very much for your help.

You're welcome.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon Apr 21 23:14:52 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 21 Apr 2008 23:14:52 +0200
Subject: [Linux-uvc-devel] Fwd: Re: ehci-hcd issue with webcam / uvcvideo
	driver
Message-ID: <200804212314.53053.laurent.pinchart@skynet.be>

Hi everybody,

Alan Stern was kind enough to write a fix a few weeks ago for a video 
streaming issue that some of you encountered.

In order to get the fix included in 2.6.26, David Brownell would like to know 
if the Linux UVC driver still suffers from the problem when used with 2.6.25 
*without* the patch.

Could you please be kind enough to test 2.6.25 and report results ?

Best regards,

Laurent Pinchart

----------  Forwarded Message  ----------

Subject: Re: ehci-hcd issue with webcam / uvcvideo driver
Date: Monday 21 April 2008
From: Alan Stern <stern at rowland.harvard.edu>
To: Laurent Pinchart <laurent.pinchart at skynet.be>

On Mon, 21 Apr 2008, Laurent Pinchart wrote:

> > Below is an updated version of the patch.  If you can, replace the
> > earlier version with this one and give it some good stress testing.
> > If everything works okay, I'll submit it for inclusion in the official
> > kernel.
> 
> I've received several reports from people who tested your patch with the
> Linux UVC driver. They were all positive, the patch fixed their problem and 
> introduced no regression they noticed. Could the patch be scheduled for 
> 2.6.26 ?

Dave had some questions, in particular, whether your testers still 
encounter problems when running 2.6.25 without the patch.  It would be 
nice to know the answer, either way.

(IMO the patch ought to be merged even if the problems are no longer
present, because what it does is basically correct.  There may be a
detail or two I missed -- it always helps to have someone else review
changes like this -- but on the whole the idea is right.)

For reference, the current version of the patch is below.

Alan Stern


No Changelog comment yet...  The ideas are:

    (1) Never return -EL2NSYNC if URB_ISO_ASAP is set -- there's
	no reason to do so.  And ehci-hcd always assumes ISO_ASAP.

    (2) If the CPU is delayed by IRQ latency, advance to the next
	available schedule slot.

    (3) Return the correct status (-EXDEV) for Iso slots which were 
	submitted too late to get used.

    (4) Don't check for liveness of Iso slots whose frames are already
	over.


Index: usb-2.6/drivers/usb/host/ehci-sched.c
===================================================================
--- usb-2.6.orig/drivers/usb/host/ehci-sched.c
+++ usb-2.6/drivers/usb/host/ehci-sched.c
@@ -1349,18 +1349,27 @@ iso_stream_schedule (
 	/* when's the last uframe this urb could start? */
 	max = now + mod;
 
-	/* typical case: reuse current schedule. stream is still active,
-	 * and no gaps from host falling behind (irq delays etc)
+	/* Typical case: reuse current schedule, stream is still active.
+	 * Hopefully there are no gaps from the host falling behind
+	 * (irq delays etc), but if there are we'll take the next
+	 * slot in the schedule, implicitly assuming URB_ISO_ASAP.
 	 */
 	if (likely (!list_empty (&stream->td_list))) {
 		start = stream->next_uframe;
 		if (start < now)
 			start += mod;
-		if (likely ((start + sched->span) < max))
-			goto ready;
-		/* else fell behind; someday, try to reschedule */
-		status = -EL2NSYNC;
-		goto fail;
+
+		/* Fell behind (by up to twice the slop amount)? */
+		if (start >= max - 2 * 8 * SCHEDULE_SLOP)
+			start += stream->interval * DIV_ROUND_UP(
+					max - start, stream->interval) - mod;
+
+		/* Tried to schedule too far into the future? */
+		if (unlikely((start + sched->span) >= max)) {
+			status = -EFBIG;
+			goto fail;
+		}
+		goto ready;
 	}
 
 	/* need to schedule; when's the next (u)frame we could start?
@@ -1613,6 +1622,9 @@ itd_complete (
 		} else if (likely ((t & EHCI_ISOC_ACTIVE) == 0)) {
 			desc->status = 0;
 			desc->actual_length = EHCI_ITD_LENGTH (t);
+		} else {
+			/* URB was too late */
+			desc->status = -EXDEV;
 		}
 	}
 
@@ -2095,7 +2107,7 @@ done:
 static void
 scan_periodic (struct ehci_hcd *ehci)
 {
-	unsigned	frame, clock, now_uframe, mod;
+	unsigned	now_uframe, frame, clock, clock_frame, mod;
 	unsigned	modified;
 
 	mod = ehci->periodic_size << 3;
@@ -2111,6 +2123,7 @@ scan_periodic (struct ehci_hcd *ehci)
 	else
 		clock = now_uframe + mod - 1;
 	clock %= mod;
+	clock_frame = clock >> 3;
 
 	for (;;) {
 		union ehci_shadow	q, *q_p;
@@ -2157,22 +2170,26 @@ restart:
 			case Q_TYPE_ITD:
 				/* If this ITD is still active, leave it for
 				 * later processing ... check the next entry.
+				 * No need to check for activity unless the
+				 * frame is current.
 				 */
-				rmb ();
-				for (uf = 0; uf < 8 && live; uf++) {
-					if (0 == (q.itd->hw_transaction [uf]
-							& ITD_ACTIVE(ehci)))
-						continue;
-					incomplete = true;
-					q_p = &q.itd->itd_next;
-					hw_p = &q.itd->hw_next;
-					type = Q_NEXT_TYPE(ehci,
+				if (frame == clock_frame && live) {
+					rmb();
+					for (uf = 0; uf < 8; uf++) {
+						if (q.itd->hw_transaction[uf] &
+							    ITD_ACTIVE(ehci))
+							break;
+					}
+					if (uf < 8) {
+						incomplete = true;
+						q_p = &q.itd->itd_next;
+						hw_p = &q.itd->hw_next;
+						type = Q_NEXT_TYPE(ehci,
 							q.itd->hw_next);
-					q = *q_p;
-					break;
+						q = *q_p;
+						break;
+					}
 				}
-				if (uf < 8 && live)
-					break;
 
 				/* Take finished ITDs out of the schedule
 				 * and process them:  recycle, maybe report
@@ -2189,9 +2206,12 @@ restart:
 			case Q_TYPE_SITD:
 				/* If this SITD is still active, leave it for
 				 * later processing ... check the next entry.
+				 * No need to check for activity unless the
+				 * frame is current.
 				 */
-				if ((q.sitd->hw_results & SITD_ACTIVE(ehci))
-						&& live) {
+				if (frame == clock_frame && live &&
+						(q.sitd->hw_results &
+							SITD_ACTIVE(ehci))) {
 					incomplete = true;
 					q_p = &q.sitd->sitd_next;
 					hw_p = &q.sitd->hw_next;
@@ -2260,6 +2280,7 @@ restart:
 
 			/* rescan the rest of this frame, then ... */
 			clock = now;
+			clock_frame = clock >> 3;
 		} else {
 			now_uframe++;
 			now_uframe %= mod;


-------------------------------------------------------


From gob937 at gmail.com  Tue Apr 22 08:04:44 2008
From: gob937 at gmail.com (=?UTF-8?B?0J3QuNC60L7Qu9Cw0Lkg0KjQtdC70LXRhdC+0LI=?=)
Date: Tue, 22 Apr 2008 10:04:44 +0400
Subject: [Linux-uvc-devel] Panasonic nv-gs11
In-Reply-To: <200804212118.02464.laurent.pinchart@skynet.be>
References: <88a3ffd40804160828l5ced6172qc5706c4f7a5205cb@mail.gmail.com>
	<200804162332.51421.laurent.pinchart@skynet.be>
	<88a3ffd40804200507o3ef925fbw46097f88de435b61@mail.gmail.com>
	<200804212118.02464.laurent.pinchart@skynet.be>
Message-ID: <88a3ffd40804212304t4c1e1b1fyb252ab4b3514d8ac@mail.gmail.com>

Thank you for your response.
Of course, here you are, hope it will be helpful:

Bus 004 Device 004: ID 04da:2317 Panasonic (Matsushita)
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0         8
  idVendor           0x04da Panasonic (Matsushita)
  idProduct          0x2317
  bcdDevice            1.00
  iManufacturer           1 Panasonic
  iProduct                2 DVC
  iSerial                 3 b137413f
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           39
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0xc0
      Self Powered
    MaxPower                2mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x01  EP 1 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval               1
Device Status:     0x0001
  Self Powered




2008/4/21 Laurent Pinchart <laurent.pinchart at skynet.be>:

> On Sunday 20 April 2008, ??????? ??????? wrote:
> > I expected some output in dmesg and /dev/video0 creation. But nothing
> > happens.
>
> Could you please post the output of
>
> lsusb -d 04da:2317 -v
>
> using usbutils 0.72 or newer (0.73+ preferred) ?
>
> Best regards,
>
> Laurent Pinchart
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080422/b7932cc5/attachment.html>

From daniel.pastrana at gmail.com  Tue Apr 22 09:32:08 2008
From: daniel.pastrana at gmail.com (Daniel CABRERA)
Date: Tue, 22 Apr 2008 09:32:08 +0200
Subject: [Linux-uvc-devel] Logitech Quickcame deluxe for notebooks
	(046d:09c1) UNSTABLE error -84
In-Reply-To: <200804072347.31644.laurent.pinchart@skynet.be>
References: <d59b0cd40804020410h5ba385e8lb2d6ee1cf8c15ffa@mail.gmail.com>
	<200804072347.31644.laurent.pinchart@skynet.be>
Message-ID: <d59b0cd40804220032j157255d9re491681676414993@mail.gmail.com>

Laurent,

I was wondering if you need more info  from my side, before getting the
patch ready :b) ?.

On Mon, Apr 7, 2008 at 11:47 PM, Laurent Pinchart <
laurent.pinchart at skynet.be> wrote:

> Hi Daniel,
>
> On Wednesday 02 April 2008, Daniel CABRERA wrote:
> > Hi,
> >
> > I try the latest SVN version 198. The webcam works just fine only for
> few
> > minutes, before dies. I attached the lcpi,lspci,dmesg when I pluged the
> > webcam, and the dmesg when the webcam crashed.
> >
> > I tested with the latest Skype version and the latest verion of
> luvcview. I
> > also tried one of the unsuported patches (
> >
> https://lists.berlios.de/pipermail/linux-uvc-devel/2008-January/002830.html
> >) and  it did not work :(
> >
> > Please let me know what else can I do from my end inorder to make it
> work?
> >
> > Do you have any recomendation, workaround  or something else to try ?
>
> The error code returned by the USB stack indicates a low-level problem.
> This
> can be caused by a faulty device (either hardware or software), a bad
> cable,
> a noisy electrical environment, ...
>
> Try plugging the device in another USB port. Try the camera on another
> computer if possible to compare the results. Make sure the camera and USB
> cable aren't too close to an electro-magnetic noise source.
>
> Best regards,
>
> Laurent Pinchart
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080422/8073c1f5/attachment.html>

From evgeny at indent.ru  Tue Apr 22 12:34:43 2008
From: evgeny at indent.ru (Evgeny A. Marchenko)
Date: Tue, 22 Apr 2008 14:34:43 +0400
Subject: [Linux-uvc-devel] Fwd: Re: ehci-hcd issue with webcam /
	uvcvideo driver
In-Reply-To: <200804212314.53053.laurent.pinchart@skynet.be>
References: <200804212314.53053.laurent.pinchart@skynet.be>
Message-ID: <200804221434.43234.evgeny@indent.ru>

Hi, Laurent

For several reasons it's difficult to apply patch to 2.6.25. I had to modify 
ehci-sched.c by hand. I think, it's mainly because of extra whitespaces in 
patch. Clean version attached.

Regards, Evgeny Marchenko

> Hi everybody,
>
> Alan Stern was kind enough to write a fix a few weeks ago for a video
> streaming issue that some of you encountered.
>
> In order to get the fix included in 2.6.26, David Brownell would like to
> know if the Linux UVC driver still suffers from the problem when used with
> 2.6.25 *without* the patch.
>
> Could you please be kind enough to test 2.6.25 and report results ?
>
> Best regards,
>
> Laurent Pinchart
>
> ----------  Forwarded Message  ----------
>
> Subject: Re: ehci-hcd issue with webcam / uvcvideo driver
> Date: Monday 21 April 2008
> From: Alan Stern <stern at rowland.harvard.edu>
> To: Laurent Pinchart <laurent.pinchart at skynet.be>
>
> On Mon, 21 Apr 2008, Laurent Pinchart wrote:
> > > Below is an updated version of the patch.  If you can, replace the
> > > earlier version with this one and give it some good stress testing.
> > > If everything works okay, I'll submit it for inclusion in the official
> > > kernel.
> >
> > I've received several reports from people who tested your patch with the
> > Linux UVC driver. They were all positive, the patch fixed their problem
> > and introduced no regression they noticed. Could the patch be scheduled
> > for 2.6.26 ?
>
> Dave had some questions, in particular, whether your testers still
> encounter problems when running 2.6.25 without the patch.  It would be
> nice to know the answer, either way.
>
> (IMO the patch ought to be merged even if the problems are no longer
> present, because what it does is basically correct.  There may be a
> detail or two I missed -- it always helps to have someone else review
> changes like this -- but on the whole the idea is right.)
>
> For reference, the current version of the patch is below.
>
> Alan Stern
>
>
> No Changelog comment yet...  The ideas are:
>
>     (1) Never return -EL2NSYNC if URB_ISO_ASAP is set -- there's
> 	no reason to do so.  And ehci-hcd always assumes ISO_ASAP.
>
>     (2) If the CPU is delayed by IRQ latency, advance to the next
> 	available schedule slot.
>
>     (3) Return the correct status (-EXDEV) for Iso slots which were
> 	submitted too late to get used.
>
>     (4) Don't check for liveness of Iso slots whose frames are already
> 	over.
>
>
> Index: usb-2.6/drivers/usb/host/ehci-sched.c
> ===================================================================
> --- usb-2.6.orig/drivers/usb/host/ehci-sched.c
> +++ usb-2.6/drivers/usb/host/ehci-sched.c
> @@ -1349,18 +1349,27 @@ iso_stream_schedule (
>  	/* when's the last uframe this urb could start? */
>  	max = now + mod;
>
> -	/* typical case: reuse current schedule. stream is still active,
> -	 * and no gaps from host falling behind (irq delays etc)
> +	/* Typical case: reuse current schedule, stream is still active.
> +	 * Hopefully there are no gaps from the host falling behind
> +	 * (irq delays etc), but if there are we'll take the next
> +	 * slot in the schedule, implicitly assuming URB_ISO_ASAP.
>  	 */
>  	if (likely (!list_empty (&stream->td_list))) {
>  		start = stream->next_uframe;
>  		if (start < now)
>  			start += mod;
> -		if (likely ((start + sched->span) < max))
> -			goto ready;
> -		/* else fell behind; someday, try to reschedule */
> -		status = -EL2NSYNC;
> -		goto fail;
> +
> +		/* Fell behind (by up to twice the slop amount)? */
> +		if (start >= max - 2 * 8 * SCHEDULE_SLOP)
> +			start += stream->interval * DIV_ROUND_UP(
> +					max - start, stream->interval) - mod;
> +
> +		/* Tried to schedule too far into the future? */
> +		if (unlikely((start + sched->span) >= max)) {
> +			status = -EFBIG;
> +			goto fail;
> +		}
> +		goto ready;
>  	}
>
>  	/* need to schedule; when's the next (u)frame we could start?
> @@ -1613,6 +1622,9 @@ itd_complete (
>  		} else if (likely ((t & EHCI_ISOC_ACTIVE) == 0)) {
>  			desc->status = 0;
>  			desc->actual_length = EHCI_ITD_LENGTH (t);
> +		} else {
> +			/* URB was too late */
> +			desc->status = -EXDEV;
>  		}
>  	}
>
> @@ -2095,7 +2107,7 @@ done:
>  static void
>  scan_periodic (struct ehci_hcd *ehci)
>  {
> -	unsigned	frame, clock, now_uframe, mod;
> +	unsigned	now_uframe, frame, clock, clock_frame, mod;
>  	unsigned	modified;
>
>  	mod = ehci->periodic_size << 3;
> @@ -2111,6 +2123,7 @@ scan_periodic (struct ehci_hcd *ehci)
>  	else
>  		clock = now_uframe + mod - 1;
>  	clock %= mod;
> +	clock_frame = clock >> 3;
>
>  	for (;;) {
>  		union ehci_shadow	q, *q_p;
> @@ -2157,22 +2170,26 @@ restart:
>  			case Q_TYPE_ITD:
>  				/* If this ITD is still active, leave it for
>  				 * later processing ... check the next entry.
> +				 * No need to check for activity unless the
> +				 * frame is current.
>  				 */
> -				rmb ();
> -				for (uf = 0; uf < 8 && live; uf++) {
> -					if (0 == (q.itd->hw_transaction [uf]
> -							& ITD_ACTIVE(ehci)))
> -						continue;
> -					incomplete = true;
> -					q_p = &q.itd->itd_next;
> -					hw_p = &q.itd->hw_next;
> -					type = Q_NEXT_TYPE(ehci,
> +				if (frame == clock_frame && live) {
> +					rmb();
> +					for (uf = 0; uf < 8; uf++) {
> +						if (q.itd->hw_transaction[uf] &
> +							    ITD_ACTIVE(ehci))
> +							break;
> +					}
> +					if (uf < 8) {
> +						incomplete = true;
> +						q_p = &q.itd->itd_next;
> +						hw_p = &q.itd->hw_next;
> +						type = Q_NEXT_TYPE(ehci,
>  							q.itd->hw_next);
> -					q = *q_p;
> -					break;
> +						q = *q_p;
> +						break;
> +					}
>  				}
> -				if (uf < 8 && live)
> -					break;
>
>  				/* Take finished ITDs out of the schedule
>  				 * and process them:  recycle, maybe report
> @@ -2189,9 +2206,12 @@ restart:
>  			case Q_TYPE_SITD:
>  				/* If this SITD is still active, leave it for
>  				 * later processing ... check the next entry.
> +				 * No need to check for activity unless the
> +				 * frame is current.
>  				 */
> -				if ((q.sitd->hw_results & SITD_ACTIVE(ehci))
> -						&& live) {
> +				if (frame == clock_frame && live &&
> +						(q.sitd->hw_results &
> +							SITD_ACTIVE(ehci))) {
>  					incomplete = true;
>  					q_p = &q.sitd->sitd_next;
>  					hw_p = &q.sitd->hw_next;
> @@ -2260,6 +2280,7 @@ restart:
>
>  			/* rescan the rest of this frame, then ... */
>  			clock = now;
> +			clock_frame = clock >> 3;
>  		} else {
>  			now_uframe++;
>  			now_uframe %= mod;
>
>
> -------------------------------------------------------
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel

-------------- next part --------------
A non-text attachment was scrubbed...
Name: uvc-ehci.patch
Type: text/x-diff
Size: 3690 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080422/e16dfaa5/attachment.patch>

From darren.longhorn at redembedded.com  Tue Apr 22 12:58:30 2008
From: darren.longhorn at redembedded.com (Darren Longhorn)
Date: Tue, 22 Apr 2008 11:58:30 +0100
Subject: [Linux-uvc-devel] svn 200 on 2.6.10 kernel
In-Reply-To: <200804212130.28790.laurent.pinchart@skynet.be>
References: <480381F1.3090607@redembedded.com>
	<200804162040.17810.laurent.pinchart@skynet.be>
	<480C8CD3.8060806@redembedded.com>
	<200804212130.28790.laurent.pinchart@skynet.be>
Message-ID: <480DC4D6.40100@redembedded.com>

Laurent Pinchart wrote:
> In theory all webcams supported by the driver should be recognised. In 
> practice some will probably not work. I'll be interested to hear about your 
> experimentation and results.
>   
So far I have found two additional cameras that seem to work using 
luvcview on ubuntu.
They are:

ID 0c45:62e0 Microdia
(the package says "Advent 1.3MP Interchangeable webcam")

ID 0ac8:0332 Z-Star Microelectronics Corp.
(the package says "Targus USB 2.0 micro webcam")

However, I can get neither to work using my own testapp.
I can open the device, create and mmap buffers, set the format, but I 
get "Device or resource busy" in response to VIDIOC_STREAMON.
This points to an issue with my test app, but it does work OK with the 
Logitech 9000. Any ideas?

Cheers

Darren


From daniel.pastrana at gmail.com  Tue Apr 22 13:15:21 2008
From: daniel.pastrana at gmail.com (Daniel CABRERA)
Date: Tue, 22 Apr 2008 13:15:21 +0200
Subject: [Linux-uvc-devel] Logitech Quickcame deluxe for notebooks
	(046d:09c1) UNSTABLE error -84
Message-ID: <d59b0cd40804220415m3cf8242bjfea6c7a990e4c51f@mail.gmail.com>

Laurent,

I tested the latest uvcvideo driver (SVN 200) in my laptop(Ubuntu 7.10
kernel 2.6.22-14) and in a PC running (RH Enterprise with kernel
2.6.20)
I have the same behavior error -84 after running either Skype or
luvcview. Looks to me that is the same failure mode.


I this is a crappy webcaqm for sure windows driver is hides this bug.

If you can have a patch ready I will be MORE THAN HAPPY to tested :) .

Please let me know if you need further info.
Thx
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080422/7487735f/attachment.html>

From philipp at kolmann.at  Tue Apr 22 13:33:49 2008
From: philipp at kolmann.at (Philipp Kolmann)
Date: Tue, 22 Apr 2008 13:33:49 +0200
Subject: [Linux-uvc-devel] Fwd: Re: ehci-hcd issue with webcam /
	uvcvideo driver
In-Reply-To: <200804221434.43234.evgeny@indent.ru>
References: <200804212314.53053.laurent.pinchart@skynet.be>
	<200804221434.43234.evgeny@indent.ru>
Message-ID: <20080422113349.GB28195@kolmann.at>

On Tue, Apr 22, 2008 at 02:34:43PM +0400, Evgeny A. Marchenko wrote:
> For several reasons it's difficult to apply patch to 2.6.25. I had to modify 
> ehci-sched.c by hand. I think, it's mainly because of extra whitespaces in 
> patch. Clean version attached.

> > In order to get the fix included in 2.6.26, David Brownell would like to
> > know if the Linux UVC driver still suffers from the problem when used with
> > 2.6.25 *without* the patch.
           ^^^^^^^^^

It was requested to test without the patch. The question is, if this patch is
still needed ;)

Philipp


-- 
The more I learn about people, the more I like my dog!


From darren.longhorn at redembedded.com  Tue Apr 22 16:10:18 2008
From: darren.longhorn at redembedded.com (Darren Longhorn)
Date: Tue, 22 Apr 2008 15:10:18 +0100
Subject: [Linux-uvc-devel] svn 200 on 2.6.10 kernel
In-Reply-To: <480DC4D6.40100@redembedded.com>
References: <480381F1.3090607@redembedded.com>	<200804162040.17810.laurent.pinchart@skynet.be>	<480C8CD3.8060806@redembedded.com>	<200804212130.28790.laurent.pinchart@skynet.be>
	<480DC4D6.40100@redembedded.com>
Message-ID: <480DF1CA.2040209@redembedded.com>

Darren Longhorn wrote:
> Laurent Pinchart wrote:
>   
>> In theory all webcams supported by the driver should be recognised. In 
>> practice some will probably not work. I'll be interested to hear about your 
>> experimentation and results.
>>   
>>     
> So far I have found two additional cameras that seem to work using 
> luvcview on ubuntu.
> They are:
>
> ID 0c45:62e0 Microdia
> (the package says "Advent 1.3MP Interchangeable webcam")
>
> ID 0ac8:0332 Z-Star Microelectronics Corp.
> (the package says "Targus USB 2.0 micro webcam")
>
> However, I can get neither to work using my own testapp.
> I can open the device, create and mmap buffers, set the format, but I 
> get "Device or resource busy" in response to VIDIOC_STREAMON.
> This points to an issue with my test app, but it does work OK with the 
> Logitech 9000. Any ideas?
>   
Replying to my own post, but I noticed that when I call the 
VIDIOC_STREAMON ioctl, uvc prints "uvcvideo: Failed to submit URB 0 (-16)."



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080422/86221b34/attachment.html>

From barsnick at gmx.net  Tue Apr 22 22:15:08 2008
From: barsnick at gmx.net (Moritz Barsnick)
Date: Tue, 22 Apr 2008 22:15:08 +0200
Subject: [Linux-uvc-devel] Only get black screen with Logitech
	QuickCam	Pro 5000
In-Reply-To: <200804212126.36365.laurent.pinchart@skynet.be>
References: <4809C351.80803@freenet.de>
	<200804212126.36365.laurent.pinchart@skynet.be>
Message-ID: <20080422201508.GC17064@sunshine.barsnick.net>

Hi list,

On Mon, Apr 21, 2008 at 21:26:36 +0200, Laurent Pinchart wrote:
> Could you please try luvcview ? xawtv 3.95 has a known bug and I've never 

Is the xawtv patch in the linux-uvc SVN repository a cure for this, or
does it have a different purpose?

Just asking. While xawtv 3.x isn't being maintained anymore, it might
be a good idea to push this patch (or any other) to distributors, if we
can prove it helps.

Moritz


From gonzcolm at yahoo.com  Tue Apr 22 23:05:17 2008
From: gonzcolm at yahoo.com (gonzalo colmenarejo)
Date: Tue, 22 Apr 2008 14:05:17 -0700 (PDT)
Subject: [Linux-uvc-devel] uvcvideo with Fedora Core 5
Message-ID: <612264.53056.qm@web37107.mail.mud.yahoo.com>

Hi,
I'm new to the Linux world (but extemely excited about it!), and I'm trying to run a Logitech QuickCam Pro 9000 in my Fedora Core 5 box. I run the steps described in the list for a similar Fedora 6 problem to compile the uvcvideo driver, but I get the following error:

[root at kolmogorov02 /]# rpm -qa | grep kernel
kernel-2.6.20-1.2320.fc5
kernel-2.6.15-1.2054_FC5
[root at kolmogorov02 /]# svn checkout svn://svn.berlios.de/linux-uvc/linux-uvc/trunk
A    trunk/uvc_status.c
A    trunk/svn-version.sh
A    trunk/uvc_ctrl.c
A    trunk/uvc_queue.c
A    trunk/uvc_video.c
A    trunk/uvc_isight.c
A    trunk/uvc_v4l2.c
A    trunk/uvc_compat.h
A    trunk/uvc_driver.c
A    trunk/uvcvideo.h
A    trunk/Makefile
A    trunk/dynctrl.txt
Checked out revision 204.
[root at kolmogorov02 /]# cd trunk/
[root at kolmogorov02 trunk]# ls
dynctrl.txt  svn-version.sh  uvc_ctrl.c    uvc_isight.c  uvc_status.c  uvc_video.c
Makefile     uvc_compat.h    uvc_driver.c  uvc_queue.c   uvc_v4l2.c    uvcvideo.h
[root at kolmogorov02 trunk]# make
Building USB Video Class driver...
/bin/sh: line 0: cd: /lib/modules/2.6.20-1.2320.fc5/build: No such file or directory
make: *** [uvcvideo] Error 1

Looking at /lib/modules/2.6.20-1.2320.fc5/, I see there a file called "build". But it is a file, not a directory! So I don't know why the Makefile is trying to cd to /lib/modules/2.6.20-1.2320.fc5/build (if I understand the Makefile correctly). I ensured I have module-init-tools-3.2.2-0.FC5.3 installed.

Do you know what's going on and how to fix this problem? 
Thanks a lot,
Gonzalo

       
---------------------------------
Be a better friend, newshound, and know-it-all with Yahoo! Mobile.  Try it now.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080422/8ec6624a/attachment.html>

From richard at rsk.demon.co.uk  Tue Apr 22 23:32:02 2008
From: richard at rsk.demon.co.uk (Richard Kennedy)
Date: Tue, 22 Apr 2008 22:32:02 +0100
Subject: [Linux-uvc-devel] uvcvideo with Fedora Core 5
In-Reply-To: <612264.53056.qm@web37107.mail.mud.yahoo.com>
References: <612264.53056.qm@web37107.mail.mud.yahoo.com>
Message-ID: <1208899922.2994.2.camel@castor.localdomain>


On Tue, 2008-04-22 at 14:05 -0700, gonzalo colmenarejo wrote:
> Hi,
> I'm new to the Linux world (but extemely excited about it!), and I'm
> trying to run a Logitech QuickCam Pro 9000 in my Fedora Core 5 box. I
> run the steps described in the list for a similar Fedora 6 problem to
> compile the uvcvideo driver, but I get the following error:
> 
> [root at kolmogorov02 /]# rpm -qa | grep kernel
> kernel-2.6.20-1.2320.fc5
> kernel-2.6.15-1.2054_FC5
> [root at kolmogorov02 /]# svn checkout
> svn://svn.berlios.de/linux-uvc/linux-uvc/trunk
> A    trunk/uvc_status.c
> A    trunk/svn-version.sh
> A    trunk/uvc_ctrl.c
> A    trunk/uvc_queue.c
> A    trunk/uvc_video.c
> A    trunk/uvc_isight.c
> A    trunk/uvc_v4l2.c
> A    trunk/uvc_compat.h
> A    trunk/uvc_driver.c
> A    trunk/uvcvideo.h
> A    trunk/Makefile
> A    trunk/dynctrl.txt
> Checked out revision 204.
> [root at kolmogorov02 /]# cd trunk/
> [root at kolmogorov02 trunk]# ls
> dynctrl.txt  svn-version.sh  uvc_ctrl.c    uvc_isight.c  uvc_status.c
> uvc_video.c
> Makefile     uvc_compat.h    uvc_driver.c  uvc_queue.c   uvc_v4l2.c
> uvcvideo.h
> [root at kolmogorov02 trunk]# make
> Building USB Video Class driver...
> /bin/sh: line 0: cd: /lib/modules/2.6.20-1.2320.fc5/build: No such
> file or directory
> make: *** [uvcvideo] Error 1
> 
> Looking at /lib/modules/2.6.20-1.2320.fc5/, I see there a file called
> "build". But it is a file, not a directory! So I don't know why the
> Makefile is trying to cd to /lib/modules/2.6.20-1.2320.fc5/build (if I
> understand the Makefile correctly). I ensured I have
> module-init-tools-3.2.2-0.FC5.3 installed.
> 
> Do you know what's going on and how to fix this problem? 
> Thanks a lot,
> Gonzalo

Hi,
You haven't got the kernel-devel package installed, which you need to
build a kernel module.
HTH
cheers
Richard



From laurent.pinchart at skynet.be  Tue Apr 22 23:53:41 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 22 Apr 2008 23:53:41 +0200
Subject: [Linux-uvc-devel] Panasonic nv-gs11
In-Reply-To: <88a3ffd40804212304t4c1e1b1fyb252ab4b3514d8ac@mail.gmail.com>
References: <88a3ffd40804160828l5ced6172qc5706c4f7a5205cb@mail.gmail.com>
	<200804212118.02464.laurent.pinchart@skynet.be>
	<88a3ffd40804212304t4c1e1b1fyb252ab4b3514d8ac@mail.gmail.com>
Message-ID: <200804222353.43657.laurent.pinchart@skynet.be>

Hi,

On Tuesday 22 April 2008, ??????? ??????? wrote:
> Thank you for your response.
> Of course, here you are, hope it will be helpful:
>
> Bus 004 Device 004: ID 04da:2317 Panasonic (Matsushita)
> Device Descriptor:
>   bLength                18
>   bDescriptorType         1
>   bcdUSB               1.10
>   bDeviceClass            0 (Defined at Interface level)
>   bDeviceSubClass         0
>   bDeviceProtocol         0
>   bMaxPacketSize0         8
>   idVendor           0x04da Panasonic (Matsushita)
>   idProduct          0x2317
>   bcdDevice            1.00
>   iManufacturer           1 Panasonic
>   iProduct                2 DVC
>   iSerial                 3 b137413f
>   bNumConfigurations      1
>   Configuration Descriptor:
>     bLength                 9
>     bDescriptorType         2
>     wTotalLength           39
>     bNumInterfaces          1
>     bConfigurationValue     1
>     iConfiguration          0
>     bmAttributes         0xc0
>       Self Powered
>     MaxPower                2mA
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       0
>       bNumEndpoints           3
>       bInterfaceClass       255 Vendor Specific Class
>       bInterfaceSubClass      0
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x01  EP 1 OUT
>         bmAttributes            2
>           Transfer Type            Bulk
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0040  1x 64 bytes
>         bInterval               0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x82  EP 2 IN
>         bmAttributes            2
>           Transfer Type            Bulk
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0040  1x 64 bytes
>         bInterval               0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x86  EP 6 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0002  1x 2 bytes
>         bInterval               1
> Device Status:     0x0001
>   Self Powered

I'm afraid your camera is not UVC compatible. It will not work with the Linux 
UVC driver.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Apr 22 23:56:35 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 22 Apr 2008 23:56:35 +0200
Subject: [Linux-uvc-devel] svn 200 on 2.6.10 kernel
In-Reply-To: <480DF1CA.2040209@redembedded.com>
References: <480381F1.3090607@redembedded.com> <480DC4D6.40100@redembedded.com>
	<480DF1CA.2040209@redembedded.com>
Message-ID: <200804222356.36732.laurent.pinchart@skynet.be>

On Tuesday 22 April 2008, Darren Longhorn wrote:
> Darren Longhorn wrote:
> > Laurent Pinchart wrote:
> >> In theory all webcams supported by the driver should be recognised. In
> >> practice some will probably not work. I'll be interested to hear about
> >> your experimentation and results.
> >
> > So far I have found two additional cameras that seem to work using
> > luvcview on ubuntu.
> > They are:
> >
> > ID 0c45:62e0 Microdia
> > (the package says "Advent 1.3MP Interchangeable webcam")
> >
> > ID 0ac8:0332 Z-Star Microelectronics Corp.
> > (the package says "Targus USB 2.0 micro webcam")
> >
> > However, I can get neither to work using my own testapp.
> > I can open the device, create and mmap buffers, set the format, but I
> > get "Device or resource busy" in response to VIDIOC_STREAMON.
> > This points to an issue with my test app, but it does work OK with the
> > Logitech 9000. Any ideas?
>
> Replying to my own post, but I noticed that when I call the
> VIDIOC_STREAMON ioctl, uvc prints "uvcvideo: Failed to submit URB 0 (-16)."

The USB stack returned -EBUSY for some reason. That's an issue with the 2.6.10 
USB stack that you will have to investigate. I'm afraid I can't help you with 
that.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue Apr 22 23:58:29 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 22 Apr 2008 23:58:29 +0200
Subject: [Linux-uvc-devel] Version.h?
In-Reply-To: <48066216.1010707@pdi.com>
References: <48050326.40408@pdi.com>
	<200804162151.35875.laurent.pinchart@skynet.be>
	<48066216.1010707@pdi.com>
Message-ID: <200804222358.29633.laurent.pinchart@skynet.be>

Hi Charlie,

On Wednesday 16 April 2008, Charlie Wyse wrote:
> Laurent Pinchart wrote:
> > On Tuesday 15 April 2008, Charlie Wyse wrote:
> >> Brandon Philips wrote:
> >>> On 12:33 Tue 15 Apr 2008, Charlie Wyse wrote:
> >>>> Whenever I run a make on the uvcvideo directory I get an error about
> >>>> the version.h file.  If I look at the file itself it is a 0 length
> >>>> file.  This file is removed with a make clean, so it looks like
> >>>> something in the make process isn't working.
> >>>
> >>> If you aren't using a SVN checkout or don't have svn installed the
> >>> version.h generation won't work.  The driver will still build however.
> >>>
> >>> Relevant source entries.
> >>>
> >>> Makefile:
> >>> <snip>
> >>>         @sh svn-version.sh > version.h 2>/dev/null
> >>>
> >>> uvc_driver.c:
> >>> <snip>
> >>> #ifndef DRIVER_VERSION
> >>> #define DRIVER_VERSION          "v0.1.0"
> >>> #endif
> >>>
> >>>> My QC 9000 works most of the time, but I figure this might be why all
> >>>> my devices come up as <unnamed>, even if I put the vender/product id
> >>>> into the uvc_driver.c file before running a make.  Any one know what
> >>>> is going on with that file?
> >>>
> >>> Your device comes up as <unnamed> because the device vendor didn't
> >>> include the optional string descriptor for it.  It shouldn't effect the
> >>> device functioning.
> >>>
> >>> What functional problems are you having with the device?
> >>>
> >>> Cheers,
> >>>
> >>> 	Brandon
> >>
> >> Good to know about the version.h thing, I was afraid that was the
> >> problem as the 08ce was no in the uvc_driver.c file until I added it.
> >> We are having problems with some of our Logitech QC 5000's.  When we
> >> create the module on the same kernel we keep getting things in dmesg
> >> like the following:
> >> uvcvideo: Found UVC 1.00 device <unnamed> (046d:08ce)
> >> uvcvideo: Failed to query (1) UVC control 2 (unit 0) : -71 (exp. 26).
> >> uvcvideo: Failed to initialize the device (-5).
> >
> > -71 is -EPROTO. This is a low level error that can be caused either by
> > electrical issues (noisy environment, bad cables, bad USB ports, ...) or
> > a buggy device (firmware and/or hardware).
> >
> > The Logitech QC 5000 is known to be buggy. Sad but true. There are lots
> > of timing issues that are usually not triggered when using the webcam
> > under Windows. Linux has different timings, and things sometimes break
> > depending on your kernel version, on the USB controller, on the CPU
> > speed, ...
> >
> > Plugging the camera into another USB port might help. If it doesn't I'm
> > afraid there's not much I can do.
> >
> >> This prevents us from seeing any video and causes ekiga to crash with
> >> the following error in dmesg logs:
> >> Apr 15 10:51:39 duel kernel: uvcvideo: Failed to query (132) UVC control
> >> 4 (unit 2) : -32 (exp. 2).
> >
> > That's a non-fatal error that you will see quite often when you run into
> > timing issues. It basically means Ekiga tried to modify a control
> > (probably brightness in this case) and the device didn't answer the
> > request because of timings issues caused by a firmware bug.
> >
> >> On my other machine  I am getting past the dmesg part with both the QC
> >> 5000 and 9000, ekiga still doesn't want to switch video with whomever I
> >> call, but I believe that might be an ekiga problem.  I can still look at
> >> gstreamer-properties and see video without errors.  I was afraid this
> >> was just due to vendor ids not being listed, but it looks like I was
> >> troubleshooting down the wrong path.  Any ideas what could case those
> >> issues?
> >
> > Webcam bugs unfortunately :-( There might be a way to work around them in
> > software, but that would require in-depth analysis with a USB 2.0
> > analyser, comparing traces captured using Windows and Linux, ...
> >
> > Best regards,
> >
> > Laurent Pinchart
>
> Taht is unfortunate.  Laurent, do you have a recommended UVC camera?  We
> bought a bunch of 5000's and are pretty much getting what you said, most
> of them work, some just simply don't.  We are looking at the Quickcam
> 9000 and so far our tests are positive, do you think that might be a
> better option?

It should be. The current version of the QC Pro 9000 is based on a less-buggy 
chipset.

Best regards,

Laurent Pinchart


From asergiu at yahoo.co.uk  Wed Apr 23 00:45:50 2008
From: asergiu at yahoo.co.uk (Adrian Sergiu Darabant)
Date: Tue, 22 Apr 2008 22:45:50 +0000 (GMT)
Subject: [Linux-uvc-devel] Syntek UvcVideo
Message-ID: <282318.1329.qm@web27703.mail.ukl.yahoo.com>

Sorry for multiple postings ...

<!-- DIV {margin:0px;}-->Hi
  I've got this uvcvideo camera that does not work.
Bus 005 Device 009: ID 174f:8a51

Iguess it is made by syntek ?!?! but not covered by their drivers ? Itis a 2 MP camera. It works perfectly with Windows XP without driversbut not in Linux. Are there any hopes to make it work ?
No device is created as it is not recognized correctly
pr 23 01:24:33 core2 kernel: usb 5-5: USB disconnect, address 9
Apr 23 01:24:35 core2 kernel: usb 5-5: new high speed USB device using ehci_hcd and address 10
Apr 23 01:24:35 core2 kernel: usb 5-5: new device found, idVendor=174f, idProduct=8a51
Apr 23 01:24:35 core2 kernel: usb 5-5: new device strings: Mfr=2, Product=3, SerialNumber=4
Apr 23 01:24:35 core2 kernel: usb 5-5: Product: USB2.0 UVC PC Camera
Apr 23 01:24:35 core2 kernel: usb 5-5: Manufacturer: Syntek
Apr 23 01:24:35 core2 kernel: usb 5-5: SerialNumber: 0001
Apr 23 01:24:35 core2 kernel: usb 5-5: configuration #1 chosen from 1 choice
Apr 23 01:24:35 core2 kernel: uvcvideo: Found UVC 1.00 device USB2.0 UVC PC Camera (174f:8a51)
Apr 23 01:24:35 core2 kernel: uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -32 (exp. 26).
Apr 23 01:24:36 core2 kernel: uvcvideo: Failed to query (1) UVC control 2 (unit 0) : -110 (exp. 26).
Apr 23 01:24:36 core2 kernel: uvcvideo: Failed to initialize the device (-5).

Sincerely
Adrian Darabant

lsusb -v -s 5:9 yields:
Bus 005 Device 009: ID 174f:8a51
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x174f
  idProduct          0x8a51
  bcdDevice            7.13
  iManufacturer           2
  iProduct                3
  iSerial                 4
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          489
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              0
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           51
        dwClockFrequency        3.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             4
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               3
        iTerminal               0
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000000
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000001b
          Brightness
          Contrast
          Saturation
          Sharpness
        iProcessing             0
        bmVideoStandards     0x 0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0004  1x 4 bytes
        bInterval               6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormarts                        1
        wTotalLength                    33025
        bEndPointAddress                    0
        bmInfo                              4
        bTerminalLink                       2
        bStillCaptureMethod                 1
        bTriggerSupport                     1
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                9
        guidFormat                            {59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                 18432000
        dwMaxBitRate                 18432000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                  1152000
        dwMaxBitRate                  1152000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                  1520640
        dwMaxBitRate                  1520640
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                  4608000
        dwMaxBitRate                  4608000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                  6082560
        dwMaxBitRate                  6082560
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            800
        wHeight                           600
        dwMinBitRate                  8640000
        dwMaxBitRate                  8640000
        dwMaxVideoFrameBufferSize      960000
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  1
        dwFrameInterval( 0)            666666
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         7
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1024
        wHeight                           768
        dwMinBitRate                 14155776
        dwMaxBitRate                 14155776
        dwMaxVideoFrameBufferSize     1572864
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  1
        dwFrameInterval( 0)            666666
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         8
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                 23592960
        dwMaxBitRate                 23592960
        dwMaxVideoFrameBufferSize     2621440
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  1
        dwFrameInterval( 0)            666666
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         9
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1600
        wHeight                          1200
        dwMinBitRate                 34560000
        dwMaxBitRate                 34560000
        dwMaxVideoFrameBufferSize     3840000
        dwDefaultFrameInterval        1000000
        bFrameIntervalType                  1
        dwFrameInterval( 0)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            10
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               1
        wWidth( 0)                       1280
        wHeight( 0)                      1024
        bNumCompressionPatterns             1
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     0 (Unspecified)
        bTransferCharacteristics            0 (Unspecified)
        bMatrixCoefficients                 0 (Unspecified)
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0400  1x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0c00  2x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
can't get device qualifier: Connection timed out
can't get debug descriptor: Connection timed out
cannot read device status, Connection timed out (110)






      Sent from Yahoo! Mail.
A Smarter Email.
<!-- DIV {margin:0px;}-->Hi
  I've got this uvcvideo camera that does not work.
Bus 005 Device 009: ID 174f:8a51

Iguess it is made by syntek ?!?! but not covered by their drivers ? Itis a 2 MP camera. It works perfectly with Windows XP without driversbut not in Linux. Are there any hopes to make it work ?
No device is created as it is not recognized correctly
pr 23 01:24:33 core2 kernel: usb 5-5: USB disconnect, address 9
Apr 23 01:24:35 core2 kernel: usb 5-5: new high speed USB device using ehci_hcd and address 10
Apr 23 01:24:35 core2 kernel: usb 5-5: new device found, idVendor=174f, idProduct=8a51
Apr 23 01:24:35 core2 kernel: usb 5-5: new device strings: Mfr=2, Product=3, SerialNumber=4
Apr 23 01:24:35 core2 kernel: usb 5-5: Product: USB2.0 UVC PC Camera
Apr 23 01:24:35 core2 kernel: usb 5-5: Manufacturer: Syntek
Apr 23 01:24:35 core2 kernel: usb 5-5: SerialNumber: 0001
Apr 23 01:24:35 core2 kernel: usb 5-5: configuration #1 chosen from 1 choice
Apr 23 01:24:35 core2 kernel: uvcvideo: Found UVC 1.00 device USB2.0 UVC PC Camera (174f:8a51)
Apr 23 01:24:35 core2 kernel: uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -32 (exp. 26).
Apr 23 01:24:36 core2 kernel: uvcvideo: Failed to query (1) UVC control 2 (unit 0) : -110 (exp. 26).
Apr 23 01:24:36 core2 kernel: uvcvideo: Failed to initialize the device (-5).

Sincerely
Adrian Darabant

lsusb -v -s 5:9 yields:
Bus 005 Device 009: ID 174f:8a51
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x174f
  idProduct          0x8a51
  bcdDevice            7.13
  iManufacturer           2
  iProduct                3
  iSerial                 4
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          489
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              0
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           51
        dwClockFrequency        3.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             4
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               3
        iTerminal               0
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x00000000
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000001b
          Brightness
          Contrast
          Saturation
          Sharpness
        iProcessing             0
        bmVideoStandards     0x 0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0004  1x 4 bytes
        bInterval               6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormarts                        1
        wTotalLength                    33025
        bEndPointAddress                    0
        bmInfo                              4
        bTerminalLink                       2
        bStillCaptureMethod                 1
        bTriggerSupport                     1
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                9
        guidFormat                            {59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                 18432000
        dwMaxBitRate                 18432000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                  1152000
        dwMaxBitRate                  1152000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                  1520640
        dwMaxBitRate                  1520640
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                  4608000
        dwMaxBitRate                  4608000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                  6082560
        dwMaxBitRate                  6082560
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            800
        wHeight                           600
        dwMinBitRate                  8640000
        dwMaxBitRate                  8640000
        dwMaxVideoFrameBufferSize      960000
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  1
        dwFrameInterval( 0)            666666
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         7
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1024
        wHeight                           768
        dwMinBitRate                 14155776
        dwMaxBitRate                 14155776
        dwMaxVideoFrameBufferSize     1572864
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  1
        dwFrameInterval( 0)            666666
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         8
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                 23592960
        dwMaxBitRate                 23592960
        dwMaxVideoFrameBufferSize     2621440
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  1
        dwFrameInterval( 0)            666666
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         9
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1600
        wHeight                          1200
        dwMinBitRate                 34560000
        dwMaxBitRate                 34560000
        dwMaxVideoFrameBufferSize     3840000
        dwDefaultFrameInterval        1000000
        bFrameIntervalType                  1
        dwFrameInterval( 0)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            10
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               1
        wWidth( 0)                       1280
        wHeight( 0)                      1024
        bNumCompressionPatterns             1
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     0 (Unspecified)
        bTransferCharacteristics            0 (Unspecified)
        bMatrixCoefficients                 0 (Unspecified)
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0400  1x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0c00  2x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
can't get device qualifier: Connection timed out
can't get debug descriptor: Connection timed out
cannot read device status, Connection timed out (110)






      Sent from Yahoo! Mail.
A Smarter Email.



      __________________________________________________________
Sent from Yahoo! Mail.
A Smarter Email http://uk.docs.yahoo.com/nowyoucan.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080422/fba36d5b/attachment.html>

From laurent.pinchart at skynet.be  Wed Apr 23 01:45:10 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 23 Apr 2008 01:45:10 +0200
Subject: [Linux-uvc-devel] Logitech Quickcame deluxe for notebooks
	(046d:09c1) UNSTABLE error -84
In-Reply-To: <d59b0cd40804220415m3cf8242bjfea6c7a990e4c51f@mail.gmail.com>
References: <d59b0cd40804220415m3cf8242bjfea6c7a990e4c51f@mail.gmail.com>
Message-ID: <200804230145.10277.laurent.pinchart@skynet.be>

Hi Daniel,

sorry for the late reply. I've been quite busy getting the driver in shape for 
submission to the kernel.

On Tuesday 22 April 2008, Daniel CABRERA wrote:
> Laurent,
>
> I tested the latest uvcvideo driver (SVN 200) in my laptop(Ubuntu 7.10
> kernel 2.6.22-14) and in a PC running (RH Enterprise with kernel
> 2.6.20)
> I have the same behavior error -84 after running either Skype or
> luvcview. Looks to me that is the same failure mode.
>
>
> I this is a crappy webcaqm for sure windows driver is hides this bug.
>
> If you can have a patch ready I will be MORE THAN HAPPY to tested :) .
>
> Please let me know if you need further info.
> Thx

Could you please test the attached patch ? It will still print an error 
message to the kernel log, but it will retry the URB. Depending on how the 
device reacts, you might get tons of retries after the first error which will 
flood your kernel log and slow down your computer. Nothing unusual :-)

Best regards,

Laurent Pinchart
-------------- next part --------------
A non-text attachment was scrubbed...
Name: eilseq.patch
Type: text/x-diff
Size: 581 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080423/1ccb6366/attachment.patch>

From laurent.pinchart at skynet.be  Wed Apr 23 02:30:16 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 23 Apr 2008 02:30:16 +0200
Subject: [Linux-uvc-devel]
	=?iso-8859-1?q?Only_get_black_screen_with_Logit?=
	=?iso-8859-1?q?ech_QuickCam=09Pro_5000?=
In-Reply-To: <20080422201508.GC17064@sunshine.barsnick.net>
References: <4809C351.80803@freenet.de>
	<200804212126.36365.laurent.pinchart@skynet.be>
	<20080422201508.GC17064@sunshine.barsnick.net>
Message-ID: <200804230230.16512.laurent.pinchart@skynet.be>

Hi Moritz,

On Tuesday 22 April 2008, Moritz Barsnick wrote:
> Hi list,
>
> On Mon, Apr 21, 2008 at 21:26:36 +0200, Laurent Pinchart wrote:
> > Could you please try luvcview ? xawtv 3.95 has a known bug and I've never
>
> Is the xawtv patch in the linux-uvc SVN repository a cure for this, or
> does it have a different purpose?

Yes, the patch should fix the issue.

> Just asking. While xawtv 3.x isn't being maintained anymore, it might
> be a good idea to push this patch (or any other) to distributors, if we
> can prove it helps.

I think it has been integrated into xawtv 4.0 (which is not out yet).

If someone wants to test the patch and/or push it to distributors, feel free 
to do so.

Best regards,

Laurent Pinchart


From lambros at lambrou.net  Wed Apr 23 02:30:56 2008
From: lambros at lambrou.net (Lambros Lambrou)
Date: Wed, 23 Apr 2008 01:30:56 +0100
Subject: [Linux-uvc-devel] ehci-hcd issue with webcam / uvcvideo driver
In-Reply-To: <200804212314.53053.laurent.pinchart@skynet.be>
References: <200804212314.53053.laurent.pinchart@skynet.be>
Message-ID: <1208910656.8412.11.camel@ll-laptop>

Hi,

I can confirm the patch is definitely required.  I compiled and booted a
vanilla 2.6.25 kernel (from kernel.org), and then compiled and installed
the latest uvcvideo driver (my webcam requires this module).  The
problem was easily repeatable using Ekiga (the specific "-45" errors
showed up in dmesg within 60 seconds).  Interestingly, I couldn't get
Skype to work at all in this configuration - it kept crashing every time
I pressed the "Test" button.

Then I applied Alan Stern's patch, and everything (Skype and Ekiga)
worked perfectly.

Lambros


On Mon, 2008-04-21 at 23:14 +0200, Laurent Pinchart wrote:
> Hi everybody,
> 
> Alan Stern was kind enough to write a fix a few weeks ago for a video 
> streaming issue that some of you encountered.
> 
> In order to get the fix included in 2.6.26, David Brownell would like to know 
> if the Linux UVC driver still suffers from the problem when used with 2.6.25 
> *without* the patch.
> 
> Could you please be kind enough to test 2.6.25 and report results ?
> 
> Best regards,
> 
> Laurent Pinchart
> 
> ----------  Forwarded Message  ----------
> 
> Subject: Re: ehci-hcd issue with webcam / uvcvideo driver
> Date: Monday 21 April 2008
> From: Alan Stern <stern at rowland.harvard.edu>
> To: Laurent Pinchart <laurent.pinchart at skynet.be>
> 
> On Mon, 21 Apr 2008, Laurent Pinchart wrote:
> 
> > > Below is an updated version of the patch.  If you can, replace the
> > > earlier version with this one and give it some good stress testing.
> > > If everything works okay, I'll submit it for inclusion in the official
> > > kernel.
> > 
> > I've received several reports from people who tested your patch with the
> > Linux UVC driver. They were all positive, the patch fixed their problem and 
> > introduced no regression they noticed. Could the patch be scheduled for 
> > 2.6.26 ?
> 
> Dave had some questions, in particular, whether your testers still 
> encounter problems when running 2.6.25 without the patch.  It would be 
> nice to know the answer, either way.
> 
> (IMO the patch ought to be merged even if the problems are no longer
> present, because what it does is basically correct.  There may be a
> detail or two I missed -- it always helps to have someone else review
> changes like this -- but on the whole the idea is right.)
> 
> For reference, the current version of the patch is below.
> 
> Alan Stern
> 
> 
> No Changelog comment yet...  The ideas are:
> 
>     (1) Never return -EL2NSYNC if URB_ISO_ASAP is set -- there's
> 	no reason to do so.  And ehci-hcd always assumes ISO_ASAP.
> 
>     (2) If the CPU is delayed by IRQ latency, advance to the next
> 	available schedule slot.
> 
>     (3) Return the correct status (-EXDEV) for Iso slots which were 
> 	submitted too late to get used.
> 
>     (4) Don't check for liveness of Iso slots whose frames are already
> 	over.
> 
> 
> Index: usb-2.6/drivers/usb/host/ehci-sched.c
> ===================================================================
> --- usb-2.6.orig/drivers/usb/host/ehci-sched.c
> +++ usb-2.6/drivers/usb/host/ehci-sched.c
> @@ -1349,18 +1349,27 @@ iso_stream_schedule (
>  	/* when's the last uframe this urb could start? */
>  	max = now + mod;
>  
> -	/* typical case: reuse current schedule. stream is still active,
> -	 * and no gaps from host falling behind (irq delays etc)
> +	/* Typical case: reuse current schedule, stream is still active.
> +	 * Hopefully there are no gaps from the host falling behind
> +	 * (irq delays etc), but if there are we'll take the next
> +	 * slot in the schedule, implicitly assuming URB_ISO_ASAP.
>  	 */
>  	if (likely (!list_empty (&stream->td_list))) {
>  		start = stream->next_uframe;
>  		if (start < now)
>  			start += mod;
> -		if (likely ((start + sched->span) < max))
> -			goto ready;
> -		/* else fell behind; someday, try to reschedule */
> -		status = -EL2NSYNC;
> -		goto fail;
> +
> +		/* Fell behind (by up to twice the slop amount)? */
> +		if (start >= max - 2 * 8 * SCHEDULE_SLOP)
> +			start += stream->interval * DIV_ROUND_UP(
> +					max - start, stream->interval) - mod;
> +
> +		/* Tried to schedule too far into the future? */
> +		if (unlikely((start + sched->span) >= max)) {
> +			status = -EFBIG;
> +			goto fail;
> +		}
> +		goto ready;
>  	}
>  
>  	/* need to schedule; when's the next (u)frame we could start?
> @@ -1613,6 +1622,9 @@ itd_complete (
>  		} else if (likely ((t & EHCI_ISOC_ACTIVE) == 0)) {
>  			desc->status = 0;
>  			desc->actual_length = EHCI_ITD_LENGTH (t);
> +		} else {
> +			/* URB was too late */
> +			desc->status = -EXDEV;
>  		}
>  	}
>  
> @@ -2095,7 +2107,7 @@ done:
>  static void
>  scan_periodic (struct ehci_hcd *ehci)
>  {
> -	unsigned	frame, clock, now_uframe, mod;
> +	unsigned	now_uframe, frame, clock, clock_frame, mod;
>  	unsigned	modified;
>  
>  	mod = ehci->periodic_size << 3;
> @@ -2111,6 +2123,7 @@ scan_periodic (struct ehci_hcd *ehci)
>  	else
>  		clock = now_uframe + mod - 1;
>  	clock %= mod;
> +	clock_frame = clock >> 3;
>  
>  	for (;;) {
>  		union ehci_shadow	q, *q_p;
> @@ -2157,22 +2170,26 @@ restart:
>  			case Q_TYPE_ITD:
>  				/* If this ITD is still active, leave it for
>  				 * later processing ... check the next entry.
> +				 * No need to check for activity unless the
> +				 * frame is current.
>  				 */
> -				rmb ();
> -				for (uf = 0; uf < 8 && live; uf++) {
> -					if (0 == (q.itd->hw_transaction [uf]
> -							& ITD_ACTIVE(ehci)))
> -						continue;
> -					incomplete = true;
> -					q_p = &q.itd->itd_next;
> -					hw_p = &q.itd->hw_next;
> -					type = Q_NEXT_TYPE(ehci,
> +				if (frame == clock_frame && live) {
> +					rmb();
> +					for (uf = 0; uf < 8; uf++) {
> +						if (q.itd->hw_transaction[uf] &
> +							    ITD_ACTIVE(ehci))
> +							break;
> +					}
> +					if (uf < 8) {
> +						incomplete = true;
> +						q_p = &q.itd->itd_next;
> +						hw_p = &q.itd->hw_next;
> +						type = Q_NEXT_TYPE(ehci,
>  							q.itd->hw_next);
> -					q = *q_p;
> -					break;
> +						q = *q_p;
> +						break;
> +					}
>  				}
> -				if (uf < 8 && live)
> -					break;
>  
>  				/* Take finished ITDs out of the schedule
>  				 * and process them:  recycle, maybe report
> @@ -2189,9 +2206,12 @@ restart:
>  			case Q_TYPE_SITD:
>  				/* If this SITD is still active, leave it for
>  				 * later processing ... check the next entry.
> +				 * No need to check for activity unless the
> +				 * frame is current.
>  				 */
> -				if ((q.sitd->hw_results & SITD_ACTIVE(ehci))
> -						&& live) {
> +				if (frame == clock_frame && live &&
> +						(q.sitd->hw_results &
> +							SITD_ACTIVE(ehci))) {
>  					incomplete = true;
>  					q_p = &q.sitd->sitd_next;
>  					hw_p = &q.sitd->hw_next;
> @@ -2260,6 +2280,7 @@ restart:
>  
>  			/* rescan the rest of this frame, then ... */
>  			clock = now;
> +			clock_frame = clock >> 3;
>  		} else {
>  			now_uframe++;
>  			now_uframe %= mod;
> 
> 
> -------------------------------------------------------



From herton at mandriva.com.br  Wed Apr 23 05:01:14 2008
From: herton at mandriva.com.br (Herton Ronaldo Krzesinski)
Date: Wed, 23 Apr 2008 00:01:14 -0300
Subject: [Linux-uvc-devel] Fwd: Re: ehci-hcd issue with webcam /
	uvcvideo driver
In-Reply-To: <200804212314.53053.laurent.pinchart@skynet.be>
References: <200804212314.53053.laurent.pinchart@skynet.be>
Message-ID: <200804230001.14389.herton@mandriva.com.br>

Em Monday 21 April 2008 18:14:52 Laurent Pinchart escreveu:
> Hi everybody,
> 
> Alan Stern was kind enough to write a fix a few weeks ago for a video 
> streaming issue that some of you encountered.
> 
> In order to get the fix included in 2.6.26, David Brownell would like to know 
> if the Linux UVC driver still suffers from the problem when used with 2.6.25 
> *without* the patch.
> 
> Could you please be kind enough to test 2.6.25 and report results ?

I was testing today with a stock 2.6.25 without the patch and got no
problems. So may be another thing fixed it. If I encounter any problem I'll
report.

> 
> Best regards,
> 
> Laurent Pinchart
> 
> ----------  Forwarded Message  ----------
> 
> Subject: Re: ehci-hcd issue with webcam / uvcvideo driver
> Date: Monday 21 April 2008
> From: Alan Stern <stern at rowland.harvard.edu>
> To: Laurent Pinchart <laurent.pinchart at skynet.be>
> 
> On Mon, 21 Apr 2008, Laurent Pinchart wrote:
> 
> > > Below is an updated version of the patch.  If you can, replace the
> > > earlier version with this one and give it some good stress testing.
> > > If everything works okay, I'll submit it for inclusion in the official
> > > kernel.
> > 
> > I've received several reports from people who tested your patch with the
> > Linux UVC driver. They were all positive, the patch fixed their problem and 
> > introduced no regression they noticed. Could the patch be scheduled for 
> > 2.6.26 ?
> 
> Dave had some questions, in particular, whether your testers still 
> encounter problems when running 2.6.25 without the patch.  It would be 
> nice to know the answer, either way.
> 
> (IMO the patch ought to be merged even if the problems are no longer
> present, because what it does is basically correct.  There may be a
> detail or two I missed -- it always helps to have someone else review
> changes like this -- but on the whole the idea is right.)
> 
> For reference, the current version of the patch is below.
> 
> Alan Stern

--
[]'s
Herton


From darren.longhorn at redembedded.com  Wed Apr 23 10:08:49 2008
From: darren.longhorn at redembedded.com (Darren Longhorn)
Date: Wed, 23 Apr 2008 09:08:49 +0100
Subject: [Linux-uvc-devel] svn 200 on 2.6.10 kernel
In-Reply-To: <200804222356.36732.laurent.pinchart@skynet.be>
References: <480381F1.3090607@redembedded.com> <480DC4D6.40100@redembedded.com>
	<480DF1CA.2040209@redembedded.com>
	<200804222356.36732.laurent.pinchart@skynet.be>
Message-ID: <480EEE91.9050907@redembedded.com>

Laurent Pinchart wrote:
> On Tuesday 22 April 2008, Darren Longhorn wrote:
>   
>> Replying to my own post, but I noticed that when I call the
>> VIDIOC_STREAMON ioctl, uvc prints "uvcvideo: Failed to submit URB 0 (-16)."
>>     
>
> The USB stack returned -EBUSY for some reason. That's an issue with the 2.6.10 
> USB stack that you will have to investigate. I'm afraid I can't help you with 
> that.
>   
OK, thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080423/f39ef6bb/attachment.html>

From darren.longhorn at redembedded.com  Wed Apr 23 11:41:07 2008
From: darren.longhorn at redembedded.com (Darren Longhorn)
Date: Wed, 23 Apr 2008 10:41:07 +0100
Subject: [Linux-uvc-devel] PC Line webcam 300K
Message-ID: <480F0433.8070700@redembedded.com>

I have several cameras that I have tried with uvc, which do not work. 
Cameras do not seem to reoutinely advertysied uvc compatibility on the 
box. I did read somewhere that "vista certified" was a good indication 
that a camera supported UVC, but I have tried several and it doesn't 
seem to be the case. Is there anyway of determining compatibility 
without physical access to a camera? I've seen people providing the 
output of lsusb and asking if a particular camera is uvc compatible, and 
so I will do the same, but I would be interested to know what particular 
part of the output is relevant.

Bus 001 Device 016: ID 093a:2600 Pixart Imaging, Inc.
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0         8
  idVendor           0x093a Pixart Imaging, Inc.
  idProduct          0x2600
  bcdDevice            1.00
  iManufacturer           0
  iProduct                0
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          468
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              100mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           6
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x02  EP 2 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              50
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x04  EP 4 OUT
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              50
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x85  EP 5 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x06  EP 6 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       1
      bNumEndpoints           6
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x02  EP 2 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              50
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x04  EP 4 OUT
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              50
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x85  EP 5 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x06  EP 6 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       2
      bNumEndpoints           6
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x02  EP 2 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              50
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x04  EP 4 OUT
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              50
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x85  EP 5 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x06  EP 6 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       3
      bNumEndpoints           6
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x02  EP 2 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              50
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x04  EP 4 OUT
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              50
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x85  EP 5 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0180  1x 384 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x06  EP 6 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       4
      bNumEndpoints           6
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x02  EP 2 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              50
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x04  EP 4 OUT
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              50
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x85  EP 5 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x06  EP 6 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       5
      bNumEndpoints           6
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x02  EP 2 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              50
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x04  EP 4 OUT
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              50
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x85  EP 5 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0280  1x 640 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x06  EP 6 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       6
      bNumEndpoints           6
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x02  EP 2 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              50
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x04  EP 4 OUT
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              50
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x85  EP 5 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0300  1x 768 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x06  EP 6 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       7
      bNumEndpoints           6
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x02  EP 2 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              50
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x04  EP 4 OUT
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              50
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x85  EP 5 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0380  1x 896 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x06  EP 6 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       8
      bNumEndpoints           6
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x02  EP 2 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              50
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x04  EP 4 OUT
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              50
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x85  EP 5 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x03ff  1x 1023 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x06  EP 6 OUT
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
cannot read device status, Operation not permitted (1)






From jargon at molb.org  Wed Apr 23 10:16:25 2008
From: jargon at molb.org (Johannes =?utf-8?B?V2Vpw59s?=)
Date: Wed, 23 Apr 2008 10:16:25 +0200
Subject: [Linux-uvc-devel] kernel Ooops after replugging (NULL pointer
	dereference)
Message-ID: <20080423081625.GA4207@darkstar.molb.org>

Hello,

I have a Creative Live! Cam Optia and it is working fine with kernel 2.6.24.4
and uvc svn203. But after unplugging (and plug in again) the webcam, as soon as
I start an application that uses the webcam, I get a kernel Oops and the webcam
is unusable until reboot.

My system is a IBM Thinkpad T42p, with Debian Lenny. I also postet a bug
report, but the mailing list seems to be the prefered way. Useful
information (as requested in a post earlier) is attached.

dmesg output:

uvcvideo: Found UVC 1.00 device Live! Cam Optia (041e:4057)
videodev: "" has no release callback. Please fix your driver for proper sysfs support, see http://lwn.net/Articles/36850/
input: Live! Cam Optia as /class/input/input9
BUG: unable to handle kernel NULL pointer dereference at virtual address 00000030
printing eip: f9e050a5 *pde = 00000000
Oops: 0000 [#1] PREEMPT
Modules linked in: michael_mic arc4 ieee80211_crypt_tkip uvcvideo compat_ioctl32 videodev v4l1_compat v4l2_common radeon drm binfmt_misc rfcomm l2cap bluetooth nfsd exportfs uinput ppdev lp ipv6 xt_tcpudp xt_state iptable_filter nf_conntrack_ftp nf_conntrack_ipv4 nf_conntrack ip_tables x_tables acpi_cpufreq cpufreq_userspace cpufreq_stats cpufreq_ondemand cpufreq_conservative cpufreq_powersave freq_table rpcsec_gss_krb5 auth_rpcgss nfs lockd sunrpc deflate zlib_deflate twofish twofish_common camellia serpent blowfish des_generic ecb xcbc sha1_generic crypto_null af_key fuse snd_seq_oss snd_seq_midi_event snd_seq snd_seq_device loop fbcon font bitblit softcursor radeonfb fb_ddc i2c_algo_bit cfbcopyarea i2c_core cfbimgblt cfbfillrect irtty_sir sir_dev 8250_pci joydev 8250_pnp pcmcia irda crc_ccitt parport_pc parport 8250 serial_core snd_intel8x0 snd_pcm_oss snd_mixer_oss snd_intel8x0m snd_ac97_codec ac97_bus snd_pcm snd_timer rtc psmouse snd soundcore snd_page_alloc ipw2200 ieee80211 ieee80211_crypt firmware_class yenta_socket rsrc_nonstatic pcmcia_core rng_core battery ac video output thinkpad_acpi hwmon intel_agp agpgart evdev button nvram sha256_generic aes_generic aes_i586 cbc blkcipher dm_crypt dm_mod e1000 ehci_hcd uhci_hcd usbcore thermal processor fan

Pid: 3268, comm: mplayer Not tainted (2.6.24.4 #1)
EIP: 0060:[<f9e050a5>] EFLAGS: 00010246 CPU: 0
EIP is at video_open+0xc5/0x1d0 [videodev]
EAX: 00000000 EBX: f9e05640 ECX: f9e05640 EDX: f6b78b80
ESI: 00000000 EDI: f6b78b80 EBP: f69b169c ESP: dfab5ec0
DS: 007b ES: 007b FS: 0000 GS: 0033 SS: 0068
Process mplayer (pid: 3268, ti=dfab4000 task=f6b2c540 task.ti=dfab4000)
Stack: dfad4ec0 c023844f 00000000 c0172bb2 dfad4ec0 f9e04fe0 00000000 f69b169c
c017323c f6b78b80 00008003 f6b78b80 00000000 f69b169c f7bb9400 c016e473
f7f47a80 f6b78b80 00008002 dfab5f30 f751c000 c016e635 f6b78b80 c0173140
Call Trace:
[<c023844f>] kobject_get+0xf/0x20
[<c0172bb2>] cdev_get+0x22/0x90
[<f9e04fe0>] video_open+0x0/0x1d0 [videodev]
[<c017323c>] chrdev_open+0xfc/0x1e0
[<c016e473>] __dentry_open+0xd3/0x1e0
[<c016e635>] nameidata_to_filp+0x35/0x40
[<c0173140>] chrdev_open+0x0/0x1e0
[<c016e68b>] do_filp_open+0x4b/0x60
[<c016e302>] get_unused_fd_flags+0x52/0xe0
[<c016e6ec>] do_sys_open+0x4c/0xe0
[<c016e7bc>] sys_open+0x1c/0x20
[<c010425e>] sysenter_past_esp+0x5f/0x85
=======================
Code: 40 08 a8 04 0f 85 03 01 00 00 8b 54 24 0c 31 c0 85 d2 0f 85 9e 00 00 00 8d b4 26 00 00 00 00 8d bc 27 00 00 00 00 89 47 10 31 f6 <8b> 48 30 85 c9 74 64 89 fa 89 e8 ff d1 85 c0 89 c6 74 58 8b 47
EIP: [<f9e050a5>] video_open+0xc5/0x1d0 [videodev] SS:ESP 0068:dfab5ec0
---[ end trace 37b498d85eb51687 ]---

-- 
Greetings,
Johannes Wei?l
-------------- next part --------------

Bus 004 Device 002: ID 041e:4057 Creative Technology, Ltd 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x041e Creative Technology, Ltd
  idProduct          0x4057 
  bcdDevice            1.00
  iManufacturer           2 Creative Labs
  iProduct                1 Live! Cam Optia
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          632
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0 
      iFunction               1 Live! Cam Optia
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0 
      iInterface              1 Live! Cam Optia
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           84
        dwClockFrequency       30.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                17
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0 
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  2
        bmControls           0x0000000e
          Auto-Exposure Mode
          Auto-Exposure Priority
          Exposure Time (Absolute)
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               6
        iTerminal               0 
      VideoControl Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      4 (SELECTOR_UNIT)
        bUnitID                 4
        bNrInPins               1
        baSource( 0)            1
        iSelector               0 
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 5
        bSourceID               4
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000043f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          Power Line Frequency
        iProcessing             0 
        bmVideoStandards     0x1b
          None
          NTSC - 525/60
          SECAM - 625/50
          NTSC - 625/50
      VideoControl Interface Descriptor:
        bLength                27
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 6
        guidExtensionCode         {564c97a7-7ea7-904b-8cbf-1c71ec303000}
        bNumControl            16
        bNrPins                 1
        baSourceID( 0)          5
        bControlSize            2
        bmControls( 0)       0xff
        bmControls( 1)       0xff
        iExtension              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              15
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      VideoStreaming Interface Descriptor:
        bLength                            15
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                        2
        wTotalLength                      485
        bEndPointAddress                  129
        bmInfo                              0
        bTerminalLink                       3
        bStillCaptureMethod                 2
        bTriggerSupport                     1
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    11
        bmaControls( 1)                    11
      VideoStreaming Interface Descriptor:
        bLength                            11
        bDescriptorType                    36
        bDescriptorSubtype                  6 (FORMAT_MJPEG)
        bFormatIndex                        1
        bNumFrameDescriptors                5
        bFlags                              1
          Fixed-size samples: Yes
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         1
        bmCapabilities                   0x01
          Still image supported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      921600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         2
        bmCapabilities                   0x01
          Still image supported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      230400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         3
        bmCapabilities                   0x01
          Still image supported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize       57600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         4
        bmCapabilities                   0x01
          Still image supported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      304128
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         5
        bmCapabilities                   0x01
          Still image supported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize       76032
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            26
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               5
        wWidth( 0)                        640
        wHeight( 0)                       480
        wWidth( 1)                        320
        wHeight( 1)                       240
        wWidth( 2)                        160
        wHeight( 2)                       120
        wWidth( 3)                        352
        wHeight( 3)                       288
        wWidth( 4)                        176
        wHeight( 4)                       144
        bNumCompressionPatterns             5
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        2
        bNumFrameDescriptors                5
        guidFormat                            {59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x01
          Still image supported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x01
          Still image supported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      230400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x01
          Still image supported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize       57600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x01
          Still image supported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      304128
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x01
          Still image supported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize       76032
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            26
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               5
        wWidth( 0)                        640
        wHeight( 0)                       480
        wWidth( 1)                        320
        wHeight( 1)                       240
        wWidth( 2)                        160
        wHeight( 2)                       120
        wWidth( 3)                        352
        wHeight( 3)                       288
        wWidth( 4)                        176
        wHeight( 4)                       144
        bNumCompressionPatterns             5
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 1024 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)
-------------- next part --------------
A non-text attachment was scrubbed...
Name: uvcvideo.ko_objdump.gz
Type: application/octet-stream
Size: 82218 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080423/b8187c2d/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 1874 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080423/b8187c2d/attachment.bin>

From darren.longhorn at redembedded.com  Wed Apr 23 11:46:28 2008
From: darren.longhorn at redembedded.com (Darren Longhorn)
Date: Wed, 23 Apr 2008 10:46:28 +0100
Subject: [Linux-uvc-devel] Creative Live! Cam Video IM
Message-ID: <480F0574.3050305@redembedded.com>


Bus 001 Device 017: ID 041e:4067 Creative Technology, Ltd
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0         8
  idVendor           0x041e Creative Technology, Ltd
  idProduct          0x4067
  bcdDevice            1.00
  iManufacturer           1
  iProduct                2
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          180
    bNumInterfaces          3
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              100mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0180  1x 384 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0300  1x 768 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0380  1x 896 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0
      iInterface              0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           30
        bInCollection           1
        baInterfaceNr( 0)       2
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0
        iTerminal               0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               1
        iTerminal               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           2
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            1 Discrete
        tSamFreq[ 0]        16000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0028  1x 40 bytes
        bInterval               1
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x00
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
cannot read device status, Operation not permitted (1)



From darren.longhorn at redembedded.com  Wed Apr 23 11:49:34 2008
From: darren.longhorn at redembedded.com (Darren Longhorn)
Date: Wed, 23 Apr 2008 10:49:34 +0100
Subject: [Linux-uvc-devel] Microsoft LifeCam NX-3000 for Notebooks
Message-ID: <480F062E.7090607@redembedded.com>


Bus 002 Device 021: ID 045e:0721 Microsoft Corp.
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x045e Microsoft Corp.
  idProduct          0x0721
  bcdDevice            1.00
  iManufacturer           1
  iProduct                2
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          611
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               2
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              2
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           57
        dwClockFrequency       30.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                17
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  2
        bmControls           0x00000a00
          Zoom (Absolute)
          PanTilt (Absolute)
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               5
        iTerminal               0
      VideoControl Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      4 (SELECTOR_UNIT)
        bUnitID                 4
        bNrInPins               1
        baSource( 0)            1
        iSelector               0
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 5
        bSourceID               4
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000557f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Power Line Frequency
          White Balance Temperature, Auto
          Digital Multiplier
        iProcessing             0
        bmVideoStandards     0x 0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              16
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            15
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormarts                        2
        wTotalLength                    33025
        bEndPointAddress                    0
        bmInfo                              3
        bTerminalLink                       0
        bStillCaptureMethod                 0
        bTriggerSupport                     0
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    11
        bmaControls( 1)                    11
      VideoStreaming Interface Descriptor:
        bLength                            11
        bDescriptorType                    36
        bDescriptorSubtype                  6 (FORMAT_MJPEG)
        bFormatIndex                        1
        bNumFrameDescriptors                5
        bFlags                              1
          Fixed-size samples: Yes
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                 48660480
        dwMaxBitRate                 48660480
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                147456000
        dwMaxBitRate                147456000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                 36864000
        dwMaxBitRate                 36864000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                 12165120
        dwMaxBitRate                 12165120
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                  9216000
        dwMaxBitRate                  9216000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        2
        bNumFrameDescriptors                5
        guidFormat                            
{32595559-0000-0010-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  2
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                 48660480
        dwMaxBitRate                 48660480
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                 36864000
        dwMaxBitRate                 36864000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval        1333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)           1333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                 36864000
        dwMaxBitRate                 36864000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                 12165120
        dwMaxBitRate                 12165120
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                  9216000
        dwMaxBitRate                  9216000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  1
        dwFrameInterval( 0)            333333
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0180  1x 384 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x03fc  1x 1020 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       1 Control Device
      bFunctionProtocol       0
      iFunction               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0
      iInterface              0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           41
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0
        iTerminal               0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               3
        iTerminal               0
      AudioControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 3
        bSourceID               1
        bControlSize            2
        bmaControls( 0)      0x00
        bmaControls( 0)      0x00
        bmaControls( 1)      0x43
        bmaControls( 1)      0x00
          Mute
          Volume
          Automatic Gain
        iFeature                0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           2
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            1 Discrete
        tSamFreq[ 0]        48000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x84  EP 4 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
can't get device qualifier: Operation not permitted
can't get debug descriptor: Operation not permitted
cannot read device status, Operation not permitted (1)



From darren.longhorn at redembedded.com  Wed Apr 23 11:52:40 2008
From: darren.longhorn at redembedded.com (Darren Longhorn)
Date: Wed, 23 Apr 2008 10:52:40 +0100
Subject: [Linux-uvc-devel] HP 'basic starter pack' ebcam
Message-ID: <480F06E8.2040809@redembedded.com>


Bus 001 Device 018: ID 0c45:613e Microdia
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0        64
  idVendor           0x0c45 Microdia
  idProduct          0x613e
  bcdDevice            1.01
  iManufacturer           0
  iProduct                1
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          279
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              100mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval             100
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       1
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval             100
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       2
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval             100
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       3
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0180  1x 384 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval             100
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       4
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval             100
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       5
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x02a8  1x 680 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval             100
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       6
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval             100
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       7
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0384  1x 900 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval             100
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       8
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x03ff  1x 1023 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0001  1x 1 bytes
        bInterval             100
cannot read device status, Operation not permitted (1)



From darren.longhorn at redembedded.com  Wed Apr 23 11:56:19 2008
From: darren.longhorn at redembedded.com (Darren Longhorn)
Date: Wed, 23 Apr 2008 10:56:19 +0100
Subject: [Linux-uvc-devel] Logitech QuickCam Communicate STX Plus
Message-ID: <480F07C3.50208@redembedded.com>

Bus 001 Device 019: ID 046d:08d7 Logitech, Inc.
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0         8
  idVendor           0x046d Logitech, Inc.
  idProduct          0x08d7
  bcdDevice            1.00
  iManufacturer           0
  iProduct                0
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          336
    bNumInterfaces          3
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0xa0
      (Bus Powered)
      Remote Wakeup
    MaxPower              100mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       1
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       2
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x00c0  1x 192 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       3
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       4
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0180  1x 384 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       5
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       6
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0300  1x 768 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       7
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x03ff  1x 1023 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0
      iInterface              0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           39
        bInCollection           1
        baInterfaceNr( 0)       2
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0
        iTerminal               0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 2
        bSourceID               1
        bControlSize            2
        bmaControls( 0)      0x43
        bmaControls( 0)      0x00
          Mute
          Volume
          Automatic Gain
        iFeature                0
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               2
        iTerminal               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            1 Discrete
        tSamFreq[ 0]         8000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               1
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x00
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0
      iInterface              0
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            1 Discrete
        tSamFreq[ 0]        16000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0020  1x 32 bytes
        bInterval               1
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x00
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
cannot read device status, Operation not permitted (1)



From rcolenbrander at strukton.com  Wed Apr 23 12:36:38 2008
From: rcolenbrander at strukton.com (Colenbrander, Roderick)
Date: Wed, 23 Apr 2008 12:36:38 +0200
Subject: [Linux-uvc-devel] Embedded board + Kernel 2.6.15 + Quickcam pro 9000
Message-ID: <9F7D9FC63DF0DE4EBDC4786B61A1AB9F55AD8C@hglmail.strukton.org>

Hi,

I'm using a foxboard lx832 board with a small linux distribution using a 2.6.15 kernel. I compiled uvcvideo for it and it loads and finds my Quickcam pro 9000.

I wrote a small v4l2 app based on luvcview to query device capabilities and dump a frame. This worked properly on a pc running ubuntu (kernel 2.6.22) in cobination with this webcam in USB 1.1 mode. For some reason the app fails on the lx832. Enumerating the formats and so works fine but when I try to set the format or perform other actions I receive EBUSY. I don't understand why it happens as I'm certain no other application is accessing the webcam at that time.

Does anyone have an idea?

Thanks in advance,
Roderick Colenbrander
#####################################################################################
Disclaimer

Deze email en alle hiermee verzonden bestanden zijn vertrouwelijk 
en alleen bestemd voor diegene aan wie de e-mail is geadresseerd. 
Indien u ten onrechte deze email heeft ontvangen waarschuw dan de 
systeembeheerder. (Postmaster at Strukton.com) Deze voetnoot 
bevestigt dat deze email is gecontroleerd op aanwezigheid van 
computer virussen. 

Disclaimer

This email and any files transmitted with it are confidential and 
intended solely for the use of the individual or entity to whom 
they are addressed. If you have received this email in error please 
notify the system manager (Postmaster at Strukton.com) This footnote 
also confirms that this email message has been swept for the 
presence of computer virusses. 

#####################################################################################

#####################################################################################
This e-mail message has been scanned for Viruses and Content and cleared 
by MailMarshal
#####################################################################################


From laurent.pinchart at skynet.be  Wed Apr 23 16:00:48 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 23 Apr 2008 16:00:48 +0200
Subject: [Linux-uvc-devel] PC Line webcam 300K
In-Reply-To: <480F0433.8070700@redembedded.com>
References: <480F0433.8070700@redembedded.com>
Message-ID: <200804231600.48691.laurent.pinchart@skynet.be>

Hi Darren,

On Wednesday 23 April 2008 11:41, Darren Longhorn wrote:
> I have several cameras that I have tried with uvc, which do not work. 
> Cameras do not seem to reoutinely advertysied uvc compatibility on the 
> box. I did read somewhere that "vista certified" was a good indication 
> that a camera supported UVC, but I have tried several and it doesn't 
> seem to be the case. Is there anyway of determining compatibility 
> without physical access to a camera?

Looking at the Windows driver might help. If the INF file references UVC, 
there are good chances the camera is UVC compatible. Most Windows drivers can 
be downloaded free of charge on the net.

> I've seen people providing the output of lsusb and asking if a particular
> camera is uvc compatible, and so I will do the same, but I would be
> interested to know what particular part of the output is relevant.

Have a look at http://linux-uvc.berlios.de/faq/

There are some exceptions though (namely the first generation of Logitech UVC 
cameras), but you can rely on the rule explained in the FAQ for most new 
webcams.

Among the cameras for which you posted the USB descriptors, only the Microsoft 
LifeCam NX-3000 for Notebooks is UVC compatible. If you can test it I'll add 
it to the supported devices list. It might required the following entry in 
the uvc_ids table at the end of uvc_driver.c.

        /* Microsoft Lifecam NX-3000 */
        { .match_flags          = USB_DEVICE_ID_MATCH_DEVICE
                                | USB_DEVICE_ID_MATCH_INT_INFO,
          .idVendor             = 0x045e,
          .idProduct            = 0x0721,
          .bInterfaceClass      = USB_CLASS_VIDEO,
          .bInterfaceSubClass   = 1,
          .bInterfaceProtocol   = 0,
          .driver_info          = UVC_QUIRK_PROBE_MINMAX },

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Wed Apr 23 16:18:37 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Wed, 23 Apr 2008 16:18:37 +0200
Subject: [Linux-uvc-devel] kernel Ooops after replugging (NULL pointer
	dereference)
In-Reply-To: <20080423081625.GA4207@darkstar.molb.org>
References: <20080423081625.GA4207@darkstar.molb.org>
Message-ID: <200804231618.37614.laurent.pinchart@skynet.be>

Hi Johannes,

On Wednesday 23 April 2008 10:16, Johannes Wei?l wrote:
> Hello,
> 
> I have a Creative Live! Cam Optia and it is working fine with kernel
> 2.6.24.4 and uvc svn203. But after unplugging (and plug in again) the
> webcam, as soon as I start an application that uses the webcam, I get a
> kernel Oops and the webcam is unusable until reboot.
> 
> My system is a IBM Thinkpad T42p, with Debian Lenny. I also postet a bug
> report, but the mailing list seems to be the prefered way. Useful
> information (as requested in a post earlier) is attached.
> 
> dmesg output:
> 
> uvcvideo: Found UVC 1.00 device Live! Cam Optia (041e:4057)
> videodev: "" has no release callback. Please fix your driver for proper 
sysfs support, see http://lwn.net/Articles/36850/

That's very strange. Are you sure you're using svn203 and not a driver 
installed by your distribution ? Could you please post more of the kernel 
log ? I need all messages related to the UVC driver, including messages 
printed when the driver is loaded and messages related to the first 
plug/unplug of the camera.

> input: Live! Cam Optia as /class/input/input9
> BUG: unable to handle kernel NULL pointer dereference at virtual address 
00000030
> printing eip: f9e050a5 *pde = 00000000
> Oops: 0000 [#1] PREEMPT
> Modules linked in: michael_mic arc4 ieee80211_crypt_tkip uvcvideo 
compat_ioctl32 videodev v4l1_compat v4l2_common radeon drm binfmt_misc rfcomm 
l2cap bluetooth nfsd exportfs uinput ppdev lp ipv6 xt_tcpudp xt_state 
iptable_filter nf_conntrack_ftp nf_conntrack_ipv4 nf_conntrack ip_tables 
x_tables acpi_cpufreq cpufreq_userspace cpufreq_stats cpufreq_ondemand 
cpufreq_conservative cpufreq_powersave freq_table rpcsec_gss_krb5 auth_rpcgss 
nfs lockd sunrpc deflate zlib_deflate twofish twofish_common camellia serpent 
blowfish des_generic ecb xcbc sha1_generic crypto_null af_key fuse 
snd_seq_oss snd_seq_midi_event snd_seq snd_seq_device loop fbcon font bitblit 
softcursor radeonfb fb_ddc i2c_algo_bit cfbcopyarea i2c_core cfbimgblt 
cfbfillrect irtty_sir sir_dev 8250_pci joydev 8250_pnp pcmcia irda crc_ccitt 
parport_pc parport 8250 serial_core snd_intel8x0 snd_pcm_oss snd_mixer_oss 
snd_intel8x0m snd_ac97_codec ac97_bus snd_pcm snd_timer rtc psmouse snd 
soundcore snd_page_alloc ipw2200 ieee80211 ieee80211_crypt firmware_class 
yenta_socket rsrc_nonstatic pcmcia_core rng_core battery ac video output 
thinkpad_acpi hwmon intel_agp agpgart evdev button nvram sha256_generic 
aes_generic aes_i586 cbc blkcipher dm_crypt dm_mod e1000 ehci_hcd uhci_hcd 
usbcore thermal processor fan
> 
> Pid: 3268, comm: mplayer Not tainted (2.6.24.4 #1)
> EIP: 0060:[<f9e050a5>] EFLAGS: 00010246 CPU: 0
> EIP is at video_open+0xc5/0x1d0 [videodev]
> EAX: 00000000 EBX: f9e05640 ECX: f9e05640 EDX: f6b78b80
> ESI: 00000000 EDI: f6b78b80 EBP: f69b169c ESP: dfab5ec0
> DS: 007b ES: 007b FS: 0000 GS: 0033 SS: 0068
> Process mplayer (pid: 3268, ti=dfab4000 task=f6b2c540 task.ti=dfab4000)
> Stack: dfad4ec0 c023844f 00000000 c0172bb2 dfad4ec0 f9e04fe0 00000000 
f69b169c
> c017323c f6b78b80 00008003 f6b78b80 00000000 f69b169c f7bb9400 c016e473
> f7f47a80 f6b78b80 00008002 dfab5f30 f751c000 c016e635 f6b78b80 c0173140
> Call Trace:
> [<c023844f>] kobject_get+0xf/0x20
> [<c0172bb2>] cdev_get+0x22/0x90
> [<f9e04fe0>] video_open+0x0/0x1d0 [videodev]
> [<c017323c>] chrdev_open+0xfc/0x1e0
> [<c016e473>] __dentry_open+0xd3/0x1e0
> [<c016e635>] nameidata_to_filp+0x35/0x40
> [<c0173140>] chrdev_open+0x0/0x1e0
> [<c016e68b>] do_filp_open+0x4b/0x60
> [<c016e302>] get_unused_fd_flags+0x52/0xe0
> [<c016e6ec>] do_sys_open+0x4c/0xe0
> [<c016e7bc>] sys_open+0x1c/0x20
> [<c010425e>] sysenter_past_esp+0x5f/0x85
> =======================
> Code: 40 08 a8 04 0f 85 03 01 00 00 8b 54 24 0c 31 c0 85 d2 0f 85 9e 00 00 
00 8d b4 26 00 00 00 00 8d bc 27 00 00 00 00 89 47 10 31 f6 <8b> 48 30 85 c9 
74 64 89 fa 89 e8 ff d1 85 c0 89 c6 74 58 8b 47
> EIP: [<f9e050a5>] video_open+0xc5/0x1d0 [videodev] SS:ESP 0068:dfab5ec0
> ---[ end trace 37b498d85eb51687 ]---
> 
Best regards,

Laurent Pinchart


From daniel.pastrana at gmail.com  Wed Apr 23 20:58:03 2008
From: daniel.pastrana at gmail.com (Daniel CABRERA)
Date: Wed, 23 Apr 2008 20:58:03 +0200
Subject: [Linux-uvc-devel] Logitech Quickcame deluxe for notebooks
	(046d:09c1) UNSTABLE error -84
In-Reply-To: <200804230145.10277.laurent.pinchart@skynet.be>
References: <d59b0cd40804220415m3cf8242bjfea6c7a990e4c51f@mail.gmail.com>
	<200804230145.10277.laurent.pinchart@skynet.be>
Message-ID: <d59b0cd40804231158v5a732d80n683571b498578a61@mail.gmail.com>

Laurent,

I just tested your patch with the SVN 205  and its able to recover. I
tried with luvcview and Skype with the same results.


I recompiled without the printk ;) but I noticed that as soon as plug
my webcam and the uvcvideo  driver is loaded the performance of my
laptop is going down down down. In a couple words is running slower.
Any idea why?

This is what I got from dmesg:

[40979.612000] usb 1-1: new full speed USB device using uhci_hcd and address 4
[40979.980000] usb 1-1: configuration #1 chosen from 1 choice
[40980.904000] Linux video capture interface: v2.00
[40981.176000] uvcvideo: Found UVC 1.00 device <unnamed> (046d:09c1)
[40981.196000] input: UVC Camera (046d:09c1) as /class/input/input13
[40981.196000] usbcore: registered new interface driver uvcvideo
[40981.196000] USB Video Class driver (SVN r205)
[41198.716000] uvcvideo: Non-zero status (-84) in video completion
handler, retrying.
[41386.168000] uvcvideo: Non-zero status (-84) in video completion
handler, retrying.
[41537.464000] uvcvideo: Non-zero status (-84) in video completion
handler, retrying.
[41648.048000] uvcvideo: Non-zero status (-84) in video completion
handler, retrying.
[41695.720000] uvcvideo: Non-zero status (-84) in video completion
handler, retrying.
[41744.872000] uvcvideo: Non-zero status (-84) in video completion
handler, retrying.
[41799.584000] uvcvideo: Non-zero status (-84) in video completion
handler, retrying.
[41934.364000] uvcvideo: Non-zero status (-84) in video completion
handler, retrying.
[41978.436000] uvcvideo: Non-zero status (-84) in video completion
handler, retrying.
[42068.664000] uvcvideo: Non-zero status (-84) in video completion
handler, retrying.
[42213.120000] uvcvideo: Non-zero status (-84) in video completion
handler, retrying.



Thx again for you help :)

On Wed, Apr 23, 2008 at 1:45 AM, Laurent Pinchart
<laurent.pinchart at skynet.be> wrote:
> Hi Daniel,
>
> sorry for the late reply. I've been quite busy getting the driver in shape for
> submission to the kernel.
>
>
>
>
> On Tuesday 22 April 2008, Daniel CABRERA wrote:
> > Laurent,
> >
> > I tested the latest uvcvideo driver (SVN 200) in my laptop(Ubuntu 7.10
> > kernel 2.6.22-14) and in a PC running (RH Enterprise with kernel
> > 2.6.20)
> > I have the same behavior error -84 after running either Skype or
> > luvcview. Looks to me that is the same failure mode.
> >
> >
> > I this is a crappy webcaqm for sure windows driver is hides this bug.
> >
> > If you can have a patch ready I will be MORE THAN HAPPY to tested :) .
> >
> > Please let me know if you need further info.
> > Thx
>
> Could you please test the attached patch ? It will still print an error
> message to the kernel log, but it will retry the URB. Depending on how the
> device reacts, you might get tons of retries after the first error which will
> flood your kernel log and slow down your computer. Nothing unusual :-)
>
> Best regards,
>
> Laurent Pinchart
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>


From bmurawski at mitre.org  Thu Apr 24 05:30:16 2008
From: bmurawski at mitre.org (Bryan Murawski)
Date: Wed, 23 Apr 2008 23:30:16 -0400
Subject: [Linux-uvc-devel] Image Capture Issues
Message-ID: <480FFEC8.1060108@mitre.org>

Hi all, I'm trying to write a simple application to capture images from 
my uvc supported camera (an Imaging Source DFK-21BU04), but I've run 
into some problems with the images tearing.  I need to capture an image, 
do some processing on that image, and then repeat that process after a 
delay of around 1 second.  I tried to do this using the capture.c 
example from the V4L2 documentation, but noticed that sometimes the 
image I got back was torn horizontally.  Due to these issues I thought 
that I should try to use some other example code so I downloaded the 
guvcview application source code.  This viewer seemed to run fine out of 
the box, but it was running much faster than my application is going 
to.  To emulate some of the delays in my system I added a sleep(2) 
command on line 526 of v4l2uvc.c in guvcview.  Sure enough, adding this 
delay caused the image tearing to happen on almost every frame.  Usually 
the image was torn horizontally, but sometimes it was torn vertically or 
colored neon green/pink.  After playing around with some sleeps it seems 
that once streaming is turned on, the larger the delay between calls to 
DQBUF the more likely it is that the image will be corrupted.  Is this a 
function of my camera or is this something common across all UVC 
cameras?  Also, is there a different way I should be capturing images 
since I'm not really looking for a stream just individual frames?  I 
really need to find a way to get good images reliably from my camera so 
if anyone has any other ideas I'd really appreciate it.  Thanks

-- 
Bryan Murawski

Senior Software Systems Engineer
The MITRE Corporation



From darren.longhorn at redembedded.com  Thu Apr 24 10:43:56 2008
From: darren.longhorn at redembedded.com (Darren Longhorn)
Date: Thu, 24 Apr 2008 09:43:56 +0100
Subject: [Linux-uvc-devel] PC Line webcam 300K
In-Reply-To: <200804231600.48691.laurent.pinchart@skynet.be>
References: <480F0433.8070700@redembedded.com>
	<200804231600.48691.laurent.pinchart@skynet.be>
Message-ID: <4810484C.8030802@redembedded.com>

Laurent Pinchart wrote:

<snip>
> Looking at the Windows driver might help. If the INF file references UVC, 
> there are good chances the camera is UVC compatible. Most Windows drivers can 
> be downloaded free of charge on the net.
>
>   
<snip>
> Have a look at http://linux-uvc.berlios.de/faq/
>
>   
Thanks for the info.
> There are some exceptions though (namely the first generation of Logitech UVC 
> cameras), but you can rely on the rule explained in the FAQ for most new 
> webcams.
>
> Among the cameras for which you posted the USB descriptors, only the Microsoft 
> LifeCam NX-3000 for Notebooks is UVC compatible. If you can test it I'll add 
> it to the supported devices list. It might required the following entry in 
> the uvc_ids table at the end of uvc_driver.c.
>
>         /* Microsoft Lifecam NX-3000 */
>         { .match_flags          = USB_DEVICE_ID_MATCH_DEVICE
>                                 | USB_DEVICE_ID_MATCH_INT_INFO,
>           .idVendor             = 0x045e,
>           .idProduct            = 0x0721,
>           .bInterfaceClass      = USB_CLASS_VIDEO,
>           .bInterfaceSubClass   = 1,
>           .bInterfaceProtocol   = 0,
>           .driver_info          = UVC_QUIRK_PROBE_MINMAX },
>
>   
I'm afraid that made no diference. Is there any more debug I could collect?

Cheers

Darren


From NathanaelGalpin at smarttech.com  Thu Apr 24 18:24:15 2008
From: NathanaelGalpin at smarttech.com (Nathanael Galpin)
Date: Thu, 24 Apr 2008 10:24:15 -0600
Subject: [Linux-uvc-devel] Hardware Timestamps
Message-ID: <8FF3AEDFC5ABAE42A50A92DBBFD702EF02C11423@calmail1.smarttech.inc>

Hi all, 

 

I have a webcam that supports Presentation Time Stamps (PTS) & Source
Clock Reference Time Stamps (SCR). From the information on the UVC
driver's main page I gather that the driver does not yet support these.

 

Both these fields are part of the stream header. At some point the UVC
driver must strip these headers off when it builds the image buffer to
be pushed out. My question is where should I be looking in the UVC
driver source code for this? I'd like to take a look at these fields on
my camera by writing a quick customization of the driver to log these
values. (Even just using the trace function to dump them into the kernel
logs would be a good start for me.)

 

Thanks!

 

Nathanael 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080424/d5d3d6c8/attachment.html>

From NathanaelGalpin at smarttech.com  Thu Apr 24 19:00:10 2008
From: NathanaelGalpin at smarttech.com (Nathanael Galpin)
Date: Thu, 24 Apr 2008 11:00:10 -0600
Subject: [Linux-uvc-devel] Hardware Timestamps
References: <8FF3AEDFC5ABAE42A50A92DBBFD702EF02C11423@calmail1.smarttech.inc>
Message-ID: <8FF3AEDFC5ABAE42A50A92DBBFD702EF02C1E5DD@calmail1.smarttech.inc>

So I answered my own question. I missed the uvc_video_decode_start function and the comments associated with it when I was searching last night.

Sorry for the noise increase.

Thanks,

Nathanael


-----Original Message-----
From: linux-uvc-devel-bounces at lists.berlios.de on behalf of Nathanael Galpin
Sent: Thu 4/24/2008 10:24 AM
To: linux-uvc-devel at lists.berlios.de
Subject: [Linux-uvc-devel] Hardware Timestamps
 
Hi all, 

 

I have a webcam that supports Presentation Time Stamps (PTS) & Source
Clock Reference Time Stamps (SCR). From the information on the UVC
driver's main page I gather that the driver does not yet support these.

 

Both these fields are part of the stream header. At some point the UVC
driver must strip these headers off when it builds the image buffer to
be pushed out. My question is where should I be looking in the UVC
driver source code for this? I'd like to take a look at these fields on
my camera by writing a quick customization of the driver to log these
values. (Even just using the trace function to dump them into the kernel
logs would be a good start for me.)

 

Thanks!

 

Nathanael 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080424/ff535554/attachment.html>

From herton at mandriva.com.br  Thu Apr 24 19:17:10 2008
From: herton at mandriva.com.br (Herton Ronaldo Krzesinski)
Date: Thu, 24 Apr 2008 14:17:10 -0300
Subject: [Linux-uvc-devel] Fwd: Re: ehci-hcd issue with webcam /
	uvcvideo driver
In-Reply-To: <200804230001.14389.herton@mandriva.com.br>
References: <200804212314.53053.laurent.pinchart@skynet.be>
	<200804230001.14389.herton@mandriva.com.br>
Message-ID: <200804241417.10957.herton@mandriva.com.br>

Em Wednesday 23 April 2008 00:01:14 Herton Ronaldo Krzesinski escreveu:
> Em Monday 21 April 2008 18:14:52 Laurent Pinchart escreveu:
> > Hi everybody,
> >
> > Alan Stern was kind enough to write a fix a few weeks ago for a video
> > streaming issue that some of you encountered.
> >
> > In order to get the fix included in 2.6.26, David Brownell would like to
> > know if the Linux UVC driver still suffers from the problem when used
> > with 2.6.25 *without* the patch.
> >
> > Could you please be kind enough to test 2.6.25 and report results ?
>
> I was testing today with a stock 2.6.25 without the patch and got no
> problems. So may be another thing fixed it. If I encounter any problem I'll
> report.

Hmm, I got the same problem now with stock 2.6.25. I discovered that the 
problem is only reproducible when you lower UVC_MAX_ISO_PACKETS in the 
sources, at least here. I was trying to avoid page allocation failures in 
another machine lowering from 40 to 8 (after reading 
http://article.gmane.org/gmane.linux.drivers.uvc.devel/1956), I didn't had 
time to investigate more so was forgotten:

uvcvideo: device USB2.0 Camera requested null bandwidth, defaulting to lowest.
kopete: page allocation failure. order:5, mode:0x0
Pid: 6996, comm: kopete Not tainted 2.6.24.4-desktop-2mdvoem #1
 [<c010645a>] show_trace_log_lvl+0x1a/0x30
 [<c0106ec2>] show_trace+0x12/0x20
 [<c010794c>] dump_stack+0x6c/0x80
 [<c016e5a8>] __alloc_pages+0x278/0x360
 [<c016e6df>] __get_free_pages+0x4f/0x60
 [<c010a25a>] dma_alloc_coherent+0xba/0x110
 [<ccdd7a17>] hcd_buffer_alloc+0x47/0x80 [usbcore]
 [<ccdcd335>] usb_buffer_alloc+0x25/0x30 [usbcore]
 [<ccf59bf8>] uvc_init_video+0x158/0x3b0 [uvcvideo]
 [<ccf59e9a>] uvc_video_enable+0x4a/0x50 [uvcvideo]
 [<ccf59229>] uvc_v4l2_do_ioctl+0x999/0xfb0 [uvcvideo]
 [<ccf40283>] video_usercopy+0xc3/0x230 [videodev]
 [<ccf58263>] uvc_v4l2_ioctl+0x43/0x50 [uvcvideo]
 [<c019a578>] do_ioctl+0x88/0xa0
 [<c019a7af>] vfs_ioctl+0x21f/0x2a0
 [<c019a883>] sys_ioctl+0x53/0x70
 [<c010532e>] sysenter_past_esp+0x6b/0xa1
 =======================
Mem-info:
DMA per-cpu:
CPU    0: Hot: hi:    0, btch:   1 usd:   0   Cold: hi:    0, btch:   1 usd:   
0
CPU    1: Hot: hi:    0, btch:   1 usd:   0   Cold: hi:    0, btch:   1 usd:   
0
Normal per-cpu:
CPU    0: Hot: hi:   42, btch:   7 usd:  33   Cold: hi:   14, btch:   3 usd:  
13
CPU    1: Hot: hi:   42, btch:   7 usd:  40   Cold: hi:   14, btch:   3 usd:  
12
Active:30836 inactive:8955 dirty:0 writeback:0 unstable:0
 free:528 slab:3006 mapped:12950 pagetables:371 bounce:0
DMA free:836kB min:144kB low:180kB high:216kB active:9980kB inactive:1260kB 
present:16256kB pages_scanned:65 all_unreclaimable? no
lowmem_reserve[]: 0 173 173 173
Normal free:1276kB min:1608kB low:2008kB high:2412kB active:113364kB 
inactive:34560kB present:177292kB pages_scanned:0 all_unreclaimable? no
lowmem_reserve[]: 0 0 0 0
DMA: 9*4kB 0*8kB 1*16kB 1*32kB 0*64kB 0*128kB 1*256kB 1*512kB 0*1024kB 
0*2048kB 0*4096kB = 852kB
Normal: 30*4kB 4*8kB 0*16kB 0*32kB 0*64kB 1*128kB 0*256kB 0*512kB 1*1024kB 
0*2048kB 0*4096kB = 1304kB
Swap cache: add 0, delete 0, find 0/0, race 0+0
Free swap  = 1084348kB
Total swap = 1084348kB
Free swap:       1084348kB
48768 pages of RAM
0 pages of HIGHMEM
1454 reserved pages
58649 pages shared
0 pages swap cached
0 pages dirty
0 pages writeback
12950 pages mapped
3006 pages slab
371 pages pagetableS

Without lowering UVC_MAX_ISO_PACKETS I get the above in one machine (it has 
indeed not much main memory, it's a notebook where free reports 184MB, main 
memory is shared with onboard video it seems). But recently I saw streaming 
issues after lowering it in another webcam, so I'm not using this anymore for 
every machine, then I didn't catch too the -45 errors anymore, now I finally 
discovered what was happening.

So may be we have two bugs here then:
- Memory allocation in uvcvideo doesn't work for all cases, urb allocation 
should be revisited or is it ok?
- -45 errors are hidden and only reproducible in some hardware or when 
lowering UVC_MAX_ISO_PACKETS with some hardware combination (here only one 
machine showed -45 errors with UVC_MAX_ISO_PACKETS lowered until now).

>
> > Best regards,
> >
> > Laurent Pinchart
> >
> > ----------  Forwarded Message  ----------
> >
> > Subject: Re: ehci-hcd issue with webcam / uvcvideo driver
> > Date: Monday 21 April 2008
> > From: Alan Stern <stern at rowland.harvard.edu>
> > To: Laurent Pinchart <laurent.pinchart at skynet.be>
> >
> > On Mon, 21 Apr 2008, Laurent Pinchart wrote:
> > > > Below is an updated version of the patch.  If you can, replace the
> > > > earlier version with this one and give it some good stress testing.
> > > > If everything works okay, I'll submit it for inclusion in the
> > > > official kernel.
> > >
> > > I've received several reports from people who tested your patch with
> > > the Linux UVC driver. They were all positive, the patch fixed their
> > > problem and introduced no regression they noticed. Could the patch be
> > > scheduled for 2.6.26 ?
> >
> > Dave had some questions, in particular, whether your testers still
> > encounter problems when running 2.6.25 without the patch.  It would be
> > nice to know the answer, either way.
> >
> > (IMO the patch ought to be merged even if the problems are no longer
> > present, because what it does is basically correct.  There may be a
> > detail or two I missed -- it always helps to have someone else review
> > changes like this -- but on the whole the idea is right.)
> >
> > For reference, the current version of the patch is below.
> >
> > Alan Stern
>
> --
> []'s
> Herton

-- 
[]'s
Herton


From laurent.pinchart at skynet.be  Fri Apr 25 00:12:41 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 25 Apr 2008 00:12:41 +0200
Subject: [Linux-uvc-devel] Syntek UvcVideo
In-Reply-To: <282318.1329.qm@web27703.mail.ukl.yahoo.com>
References: <282318.1329.qm@web27703.mail.ukl.yahoo.com>
Message-ID: <200804250012.41534.laurent.pinchart@skynet.be>

Hi Adrian,

On Wednesday 23 April 2008, Adrian Sergiu Darabant wrote:
> Sorry for multiple postings ...
>
> <!-- DIV {margin:0px;}-->Hi
>   I've got this uvcvideo camera that does not work.
> Bus 005 Device 009: ID 174f:8a51
>
> Iguess it is made by syntek ?!?! but not covered by their drivers ? Itis a
> 2 MP camera. It works perfectly with Windows XP without driversbut not in
> Linux. Are there any hopes to make it work ? No device is created as it is
> not recognized correctly
> usb 5-5: USB disconnect, address 9
> usb 5-5: new high speed USB device using ehci_hcd and address 10
> usb 5-5: new device found, idVendor=174f, idProduct=8a51
> usb 5-5: new device strings: Mfr=2, Product=3, SerialNumber=4
> usb 5-5: Product: USB2.0 UVC PC Camera Apr 23 01:24:35 core2
> usb 5-5: Manufacturer: Syntek
> usb 5-5: SerialNumber: 0001
> usb 5-5: configuration #1 chosen from 1
> uvcvideo: Found UVC 1.00 device USB2.0 UVC PC Camera (174f:8a51)
> uvcvideo: Failed to query (135) UVC control 1 (unit 0) : -32 (exp. 26).

This error is not fatal and can probably be ignored.

> uvcvideo: Failed to query (1) UVC control 2 (unit 0) : -110 (exp. 26).

For some reason the device didn't answer a request and the driver timed out. 
Either the device got confused or crashed from a previous request, or the 
request comes too fast after the previous one.

> uvcvideo: Failed to initialize the device (-5).
>
> Sincerely
> Adrian Darabant
>
> lsusb -v -s 5:9 yields:
> Bus 005 Device 009: ID 174f:8a51
> Device Descriptor:
>   bLength                18
>   bDescriptorType         1
>   bcdUSB               2.00
>   bDeviceClass          239 Miscellaneous Device
>   bDeviceSubClass         2 Common Class
>   bDeviceProtocol         1 Interface Association
>   bMaxPacketSize0        64
>   idVendor           0x174f
>   idProduct          0x8a51
>   bcdDevice            7.13
>   iManufacturer           2
>   iProduct                3
>   iSerial                 4
>   bNumConfigurations      1
[snip]
> can't get device qualifier: Connection timed out
> can't get debug descriptor: Connection timed out
> cannot read device status, Connection timed out (110)

This is quite interesting as well. Even standard requests to read the 
descriptors time out.

Your camera seems really buggy. It might be possible to work around the 
problem by adding delays. Could you please add a msleep(1000) at the end of 
__uvc_query_ctrl in uvc_ctrl.c and see if it helps (you will have to include 
linux/delay.h) ? If it doesn't try to increase the sleep time up to 5000 by 
1000 steps.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Apr 25 00:17:36 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 25 Apr 2008 00:17:36 +0200
Subject: [Linux-uvc-devel] Fwd: Re: ehci-hcd issue with webcam /
	uvcvideo driver
In-Reply-To: <200804241417.10957.herton@mandriva.com.br>
References: <200804212314.53053.laurent.pinchart@skynet.be>
	<200804230001.14389.herton@mandriva.com.br>
	<200804241417.10957.herton@mandriva.com.br>
Message-ID: <200804250017.37103.laurent.pinchart@skynet.be>

Hi Herton,

On Thursday 24 April 2008, Herton Ronaldo Krzesinski wrote:
> Em Wednesday 23 April 2008 00:01:14 Herton Ronaldo Krzesinski escreveu:
> > Em Monday 21 April 2008 18:14:52 Laurent Pinchart escreveu:
> > > Hi everybody,
> > >
> > > Alan Stern was kind enough to write a fix a few weeks ago for a video
> > > streaming issue that some of you encountered.
> > >
> > > In order to get the fix included in 2.6.26, David Brownell would like
> > > to know if the Linux UVC driver still suffers from the problem when
> > > used with 2.6.25 *without* the patch.
> > >
> > > Could you please be kind enough to test 2.6.25 and report results ?
> >
> > I was testing today with a stock 2.6.25 without the patch and got no
> > problems. So may be another thing fixed it. If I encounter any problem
> > I'll report.
>
> Hmm, I got the same problem now with stock 2.6.25. I discovered that the
> problem is only reproducible when you lower UVC_MAX_ISO_PACKETS in the
> sources, at least here. I was trying to avoid page allocation failures in
> another machine lowering from 40 to 8 (after reading
> http://article.gmane.org/gmane.linux.drivers.uvc.devel/1956), I didn't had
> time to investigate more so was forgotten:
>
> uvcvideo: device USB2.0 Camera requested null bandwidth, defaulting to
> lowest. kopete: page allocation failure. order:5, mode:0x0
> Pid: 6996, comm: kopete Not tainted 2.6.24.4-desktop-2mdvoem #1
>  [<c010645a>] show_trace_log_lvl+0x1a/0x30
>  [<c0106ec2>] show_trace+0x12/0x20
>  [<c010794c>] dump_stack+0x6c/0x80
>  [<c016e5a8>] __alloc_pages+0x278/0x360
>  [<c016e6df>] __get_free_pages+0x4f/0x60
>  [<c010a25a>] dma_alloc_coherent+0xba/0x110
>  [<ccdd7a17>] hcd_buffer_alloc+0x47/0x80 [usbcore]
>  [<ccdcd335>] usb_buffer_alloc+0x25/0x30 [usbcore]
>  [<ccf59bf8>] uvc_init_video+0x158/0x3b0 [uvcvideo]
>  [<ccf59e9a>] uvc_video_enable+0x4a/0x50 [uvcvideo]
>  [<ccf59229>] uvc_v4l2_do_ioctl+0x999/0xfb0 [uvcvideo]
>  [<ccf40283>] video_usercopy+0xc3/0x230 [videodev]
>  [<ccf58263>] uvc_v4l2_ioctl+0x43/0x50 [uvcvideo]
>  [<c019a578>] do_ioctl+0x88/0xa0
>  [<c019a7af>] vfs_ioctl+0x21f/0x2a0
>  [<c019a883>] sys_ioctl+0x53/0x70
>  [<c010532e>] sysenter_past_esp+0x6b/0xa1
>  =======================
> Mem-info:
> DMA per-cpu:
> CPU    0: Hot: hi:    0, btch:   1 usd:   0   Cold: hi:    0, btch:   1
> usd: 0
> CPU    1: Hot: hi:    0, btch:   1 usd:   0   Cold: hi:    0, btch:   1
> usd: 0
> Normal per-cpu:
> CPU    0: Hot: hi:   42, btch:   7 usd:  33   Cold: hi:   14, btch:   3
> usd: 13
> CPU    1: Hot: hi:   42, btch:   7 usd:  40   Cold: hi:   14, btch:   3
> usd: 12
> Active:30836 inactive:8955 dirty:0 writeback:0 unstable:0
>  free:528 slab:3006 mapped:12950 pagetables:371 bounce:0
> DMA free:836kB min:144kB low:180kB high:216kB active:9980kB inactive:1260kB
> present:16256kB pages_scanned:65 all_unreclaimable? no
> lowmem_reserve[]: 0 173 173 173
> Normal free:1276kB min:1608kB low:2008kB high:2412kB active:113364kB
> inactive:34560kB present:177292kB pages_scanned:0 all_unreclaimable? no
> lowmem_reserve[]: 0 0 0 0
> DMA: 9*4kB 0*8kB 1*16kB 1*32kB 0*64kB 0*128kB 1*256kB 1*512kB 0*1024kB
> 0*2048kB 0*4096kB = 852kB
> Normal: 30*4kB 4*8kB 0*16kB 0*32kB 0*64kB 1*128kB 0*256kB 0*512kB 1*1024kB
> 0*2048kB 0*4096kB = 1304kB
> Swap cache: add 0, delete 0, find 0/0, race 0+0
> Free swap  = 1084348kB
> Total swap = 1084348kB
> Free swap:       1084348kB
> 48768 pages of RAM
> 0 pages of HIGHMEM
> 1454 reserved pages
> 58649 pages shared
> 0 pages swap cached
> 0 pages dirty
> 0 pages writeback
> 12950 pages mapped
> 3006 pages slab
> 371 pages pagetableS
>
> Without lowering UVC_MAX_ISO_PACKETS I get the above in one machine (it has
> indeed not much main memory, it's a notebook where free reports 184MB, main
> memory is shared with onboard video it seems). But recently I saw streaming
> issues after lowering it in another webcam, so I'm not using this anymore
> for every machine, then I didn't catch too the -45 errors anymore, now I
> finally discovered what was happening.
>
> So may be we have two bugs here then:
> - Memory allocation in uvcvideo doesn't work for all cases, urb allocation
> should be revisited or is it ok?

The only sensible option I can think of would be to lower UVC_MAX_ISO_PACKETS. 
The UVC driver tries not to put too much pressure on system memory but it 
still needs URB buffers. Lowering UVC_MAX_ISO_PACKETS will decrease memory 
pressure but will increase CPU usage, so it's a tradeoff, like always.

> - -45 errors are hidden and only reproducible in some hardware or when
> lowering UVC_MAX_ISO_PACKETS with some hardware combination (here only one
> machine showed -45 errors with UVC_MAX_ISO_PACKETS lowered until now).

Thanks for the report.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Apr 25 00:23:38 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 25 Apr 2008 00:23:38 +0200
Subject: [Linux-uvc-devel] PC Line webcam 300K
In-Reply-To: <4810484C.8030802@redembedded.com>
References: <480F0433.8070700@redembedded.com>
	<200804231600.48691.laurent.pinchart@skynet.be>
	<4810484C.8030802@redembedded.com>
Message-ID: <200804250023.38572.laurent.pinchart@skynet.be>

On Thursday 24 April 2008, Darren Longhorn wrote:
> Laurent Pinchart wrote:
>
> <snip>
>
> > Looking at the Windows driver might help. If the INF file references UVC,
> > there are good chances the camera is UVC compatible. Most Windows drivers
> > can be downloaded free of charge on the net.
>
> <snip>
>
> > Have a look at http://linux-uvc.berlios.de/faq/
>
> Thanks for the info.
>
> > There are some exceptions though (namely the first generation of Logitech
> > UVC cameras), but you can rely on the rule explained in the FAQ for most
> > new webcams.
> >
> > Among the cameras for which you posted the USB descriptors, only the
> > Microsoft LifeCam NX-3000 for Notebooks is UVC compatible. If you can
> > test it I'll add it to the supported devices list. It might required the
> > following entry in the uvc_ids table at the end of uvc_driver.c.
> >
> >         /* Microsoft Lifecam NX-3000 */
> >         { .match_flags          = USB_DEVICE_ID_MATCH_DEVICE
> >
> >                                 | USB_DEVICE_ID_MATCH_INT_INFO,
> >
> >           .idVendor             = 0x045e,
> >           .idProduct            = 0x0721,
> >           .bInterfaceClass      = USB_CLASS_VIDEO,
> >           .bInterfaceSubClass   = 1,
> >           .bInterfaceProtocol   = 0,
> >           .driver_info          = UVC_QUIRK_PROBE_MINMAX },
>
> I'm afraid that made no diference. Is there any more debug I could collect?

Could you have a look in the kernel log to see if the driver prints any 
message when you plug the webcam ? Please post all the messages related to 
uvcvideo that you find.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Apr 25 00:38:56 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 25 Apr 2008 00:38:56 +0200
Subject: [Linux-uvc-devel] Embedded board + Kernel 2.6.15 + Quickcam pro
	9000
In-Reply-To: <9F7D9FC63DF0DE4EBDC4786B61A1AB9F55AD8C@hglmail.strukton.org>
References: <9F7D9FC63DF0DE4EBDC4786B61A1AB9F55AD8C@hglmail.strukton.org>
Message-ID: <200804250038.56481.laurent.pinchart@skynet.be>

Hi Roderick,

On Wednesday 23 April 2008, Colenbrander, Roderick wrote:
> Hi,
>
> I'm using a foxboard lx832 board with a small linux distribution using a
> 2.6.15 kernel. I compiled uvcvideo for it and it loads and finds my
> Quickcam pro 9000.
>
> I wrote a small v4l2 app based on luvcview to query device capabilities and
> dump a frame. This worked properly on a pc running ubuntu (kernel 2.6.22)
> in cobination with this webcam in USB 1.1 mode. For some reason the app
> fails on the lx832. Enumerating the formats and so works fine but when I
> try to set the format or perform other actions I receive EBUSY. I don't
> understand why it happens as I'm certain no other application is accessing
> the webcam at that time.
>
> Does anyone have an idea?

-EBUSY when calling VIDIOC_S_FMT really sounds like another application is 
using the camera. As you're a developer, could you add a few print messages 
to the driver to see if -EBUSY is returned by the driver itself or by a USB 
core function is calls ?

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Apr 25 00:50:36 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 25 Apr 2008 00:50:36 +0200
Subject: [Linux-uvc-devel] Logitech Quickcame deluxe for notebooks
	(046d:09c1) UNSTABLE error -84
In-Reply-To: <d59b0cd40804231158v5a732d80n683571b498578a61@mail.gmail.com>
References: <d59b0cd40804220415m3cf8242bjfea6c7a990e4c51f@mail.gmail.com>
	<200804230145.10277.laurent.pinchart@skynet.be>
	<d59b0cd40804231158v5a732d80n683571b498578a61@mail.gmail.com>
Message-ID: <200804250050.36500.laurent.pinchart@skynet.be>

Hi Daniel,

On Wednesday 23 April 2008, Daniel CABRERA wrote:
> Laurent,
>
> I just tested your patch with the SVN 205  and its able to recover. I
> tried with luvcview and Skype with the same results.

Ok. I'll try to come up with a cleaner patch and I'll then ask you to test it.

> I recompiled without the printk ;) but I noticed that as soon as plug
> my webcam and the uvcvideo  driver is loaded the performance of my
> laptop is going down down down. In a couple words is running slower.
> Any idea why?

Maybe because the -84 error keeps getting generated. The UVC driver will then 
resubmit URBs without any delay, which will use quite a lot of CPU time. Of 
course, without the printk, it's quite difficult to tell.

I'll try to address that in a new patch, printing a message when too many -84 
errors are generated.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Apr 25 00:48:13 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 25 Apr 2008 00:48:13 +0200
Subject: [Linux-uvc-devel] kernel Ooops after replugging (NULL pointer
	dereference)
In-Reply-To: <20080423162148.GA4113@darkstar.molb.org>
References: <20080423081625.GA4207@darkstar.molb.org>
	<200804231618.37614.laurent.pinchart@skynet.be>
	<20080423162148.GA4113@darkstar.molb.org>
Message-ID: <200804250048.13706.laurent.pinchart@skynet.be>

On Wednesday 23 April 2008, Johannes Wei?l wrote:
> Hello Laurent,
>
> On Wed, Apr 23, 2008 at 04:18:37PM +0200, Laurent Pinchart wrote:
> > That's very strange. Are you sure you're using svn203 and not a driver
> > installed by your distribution ? Could you please post more of the kernel
> > log ? I need all messages related to the UVC driver, including messages
> > printed when the driver is loaded and messages related to the first
> > plug/unplug of the camera.
>
> Thanks for your fast reply. I'm pretty sure:
>
>  # modinfo uvcvideo
>  filename:       /lib/modules/2.6.24.4/usb/media/uvcvideo.ko
>  version:        SVN r203
>  [...]
>
> Messages when connecting the webcam:
>
>  usb 4-3: new high speed USB device using ehci_hcd and address 2
>  usb 4-3: configuration #1 chosen from 1 choice
>  Linux video capture interface: v2.00
>  uvcvideo: Found UVC 1.00 device Live! Cam Optia (041e:4057)
>  videodev: "" has no release callback. Please fix your driver for proper
> sysfs support, see http://lwn.net/Articles/36850/ input: Live! Cam Optia as
> /class/input/input8

This is definitely not normal. The above message is printed by videodev when a 
driver registers a device without setting a release callback. It looks like 
something gets corrupted somewhere, as the message should also print the 
device's name insted of "".

Could you please set the trace parameter to 15 when loading the module and try 
again to see if the driver prints additional information that could help us 
diagnose the problem ?

>  usbcore: registered new interface driver uvcvideo
>  USB Video Class driver (SVN r203)
>
> first time "luvcview -d /dev/video0 -f jpg -i 25 -s 640x480":
>
>  uvcvideo: device Live! Cam Optia requested null bandwidth, defaulting to
> lowest.
>
> Replugging:
>
>  usb 4-3: USB disconnect, address 2
>  usb 4-3: new high speed USB device using ehci_hcd and address 3
>  usb 4-3: configuration #1 chosen from 1 choice
>  uvcvideo: Found UVC 1.00 device Live! Cam Optia (041e:4057)
>  videodev: "" has no release callback. Please fix your driver for proper
> sysfs support, see http://lwn.net/Articles/36850/ input: Live! Cam Optia as
> /class/input/input9
>
> second time "luvcview -d /dev/video0 -f jpg -i 25 -s 640x480":
>
>  BUG: unable to handle kernel NULL pointer dereference at virtual address
> 00000030 printing eip: f9e0e0a5 *pde = 00000000
>  Oops: 0000 [#1] PREEMPT
>  [...]
>
>  Pid: 4366, comm: luvcview Not tainted (2.6.24.4 #1)
>  [...]
>
>
> I just found out something that might help:
>
> After replugging, a second device /dev/video1 is created (/dev/video0
> still exists). Reading from /dev/video0 causes the Oops. If I unload all
> uvc-related drivers (uvcvideo, v4l1_compat, ...), and manually remove
> all /dev/video* files, I can reconnect the webcam safely.

I'm not too surprised that /dev/video0 doesn't disappear as videodev 
complained about no release callback.

I really doubt the problem comes from the UVC driver only. Could you add a few 
printk's in video_register_device to see what happens there ? I would expect 
the structure pointed by the vfd parameter to be modified at some point. 
Printing the release and name fields at various points in the function might 
give us some clues.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Fri Apr 25 00:59:00 2008
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Fri, 25 Apr 2008 00:59:00 +0200
Subject: [Linux-uvc-devel] Hardware Timestamps
In-Reply-To: <8FF3AEDFC5ABAE42A50A92DBBFD702EF02C11423@calmail1.smarttech.inc>
References: <8FF3AEDFC5ABAE42A50A92DBBFD702EF02C11423@calmail1.smarttech.inc>
Message-ID: <200804250059.00725.laurent.pinchart@skynet.be>

Hi Nathanael,

On Thursday 24 April 2008, Nathanael Galpin wrote:
> Hi all,
>
> I have a webcam that supports Presentation Time Stamps (PTS) & Source
> Clock Reference Time Stamps (SCR). From the information on the UVC
> driver's main page I gather that the driver does not yet support these.
>
> Both these fields are part of the stream header. At some point the UVC
> driver must strip these headers off when it builds the image buffer to
> be pushed out. My question is where should I be looking in the UVC
> driver source code for this? I'd like to take a look at these fields on
> my camera by writing a quick customization of the driver to log these
> values. (Even just using the trace function to dump them into the kernel
> logs would be a good start for me.)

I see you found the answer yourself. Congratulations ;-)

Now, as you're playing with PTS and SCR, I would be very grateful if you could 
come up with a way to use those fields to populate the v4l2_buffer timestamp 
member. That has been on my todo list for a long time and I've never got 
around to implement it.

Best regards,

Laurent Pinchart


From daniel.pastrana at gmail.com  Fri Apr 25 10:06:07 2008
From: daniel.pastrana at gmail.com (Daniel CABRERA)
Date: Fri, 25 Apr 2008 10:06:07 +0200
Subject: [Linux-uvc-devel] Logitech Quickcame deluxe for notebooks
	(046d:09c1) UNSTABLE error -84
In-Reply-To: <200804250050.36500.laurent.pinchart@skynet.be>
References: <d59b0cd40804220415m3cf8242bjfea6c7a990e4c51f@mail.gmail.com>
	<200804230145.10277.laurent.pinchart@skynet.be>
	<d59b0cd40804231158v5a732d80n683571b498578a61@mail.gmail.com>
	<200804250050.36500.laurent.pinchart@skynet.be>
Message-ID: <d59b0cd40804250106mf5a16e3j1f2f2218ba084574@mail.gmail.com>

Laurent,

I am not sure if the issue is 10% related to the -84 error, because as
you can see on the following log msgs. the interval is kind of high,
which made me think that this is only part of the issue. This log was
dumped during the execution of luvcview (2007/05/12).

Thx again for your support and in the name of some lost souls like me thx ;).

Please let me know if you need me to test or evaluate anything else.

A+

[41198.716000] uvcvideo: Non-zero status (-84) in video completion
handler, retrying.
[41386.168000] uvcvideo: Non-zero status (-84) in video completion
handler, retrying.
[41537.464000] uvcvideo: Non-zero status (-84) in video completion
handler, retrying.
[41648.048000] uvcvideo: Non-zero status (-84) in video completion
handler, retrying.
[41695.720000] uvcvideo: Non-zero status (-84) in video completion
handler, retrying.
[41744.872000] uvcvideo: Non-zero status (-84) in video completion
handler, retrying.
[41799.584000] uvcvideo: Non-zero status (-84) in video completion
handler, retrying.
[41934.364000] uvcvideo: Non-zero status (-84) in video completion
handler, retrying.
[41978.436000] uvcvideo: Non-zero status (-84) in video completion
handler, retrying.
[42068.664000] uvcvideo: Non-zero status (-84) in video completion
handler, retrying.
[42213.120000] uvcvideo: Non-zero status (-84) in video completion
handler, retrying.

On Fri, Apr 25, 2008 at 12:50 AM, Laurent Pinchart
<laurent.pinchart at skynet.be> wrote:
> Hi Daniel,
>
>
>  On Wednesday 23 April 2008, Daniel CABRERA wrote:
>  > Laurent,
>  >
>
> > I just tested your patch with the SVN 205  and its able to recover. I
>  > tried with luvcview and Skype with the same results.
>
>  Ok. I'll try to come up with a cleaner patch and I'll then ask you to test it.
>
>
>  > I recompiled without the printk ;) but I noticed that as soon as plug
>  > my webcam and the uvcvideo  driver is loaded the performance of my
>  > laptop is going down down down. In a couple words is running slower.
>  > Any idea why?
>
>  Maybe because the -84 error keeps getting generated. The UVC driver will then
>  resubmit URBs without any delay, which will use quite a lot of CPU time. Of
>  course, without the printk, it's quite difficult to tell.
>
>  I'll try to address that in a new patch, printing a message when too many -84
>  errors are generated.
>
>
>
>  Best regards,
>
>  Laurent Pinchart
>  _______________________________________________
>  Linux-uvc-devel mailing list
>  Linux-uvc-devel at lists.berlios.de
>  https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From sevmek at free.fr  Fri Apr 25 16:45:40 2008
From: sevmek at free.fr (yannick)
Date: Fri, 25 Apr 2008 16:45:40 +0200
Subject: [Linux-uvc-devel] creative live! cam optia AF at 30 fps?
Message-ID: <1209134740.13944.30.camel@achille>

Hi,

I lately buy the creative live! cam optia AF. Despite all my efforts I
can't get more than 5~10 fps (usualy 5).

I compiled latest uvc driver trunk and latest luvcview trunk too.

It seems, after some searchs, if I could turn off autoexposure i'll get
more fps but this doesn't work using luvcview :(

/usr/local/bin/luvcview -i 30
luvcview 0.2.4

SDL information:
  Video driver: x11
  A window manager is available
Device information:
  Device path:  /dev/video0
Stream settings:
  Frame format: MJPG
  Frame size:   640x480
  Frame rate:   30 fps
Set Auto Exposure off error
Cleanup done. Exiting ...

I'm a regular tester for the VoIP software Ekiga and I contribute
writing the software documentation (including this page:
http://wiki.ekiga.org/index.php/Tested_hardware ). In our latest trunk
we have code to use webcams at 30fps using the H.264 video codec.

We also had people with disabilities hoping some VoIP software able to
do 30fps with nice resolution (seems 320x240 will be ok, but our Ekiga
trunk can do 640x480, or even more) to do speech recognition (lips
reading).

For all the reasons above, i'm looking for a solution to get 30 fps with
this webcam.

Thank you for paying attention,
Best regards,
Yannick
-- 
Me joindre en t?l?phonie IP / vid?oconf?rence ?
sip:yannick at ekiga.net
Logiciel de VoIP Ekiga : http://www.ekiga.org
http://wiki.ekiga.org/index.php/Which_programs_work_with_Ekiga_%3F



From NathanaelGalpin at smarttech.com  Fri Apr 25 17:51:03 2008
From: NathanaelGalpin at smarttech.com (Nathanael Galpin)
Date: Fri, 25 Apr 2008 09:51:03 -0600
Subject: [Linux-uvc-devel] Hardware Timestamps
References: <8FF3AEDFC5ABAE42A50A92DBBFD702EF02C11423@calmail1.smarttech.inc>
	<200804250059.00725.laurent.pinchart@skynet.be>
Message-ID: <8FF3AEDFC5ABAE42A50A92DBBFD702EF02C1E5E1@calmail1.smarttech.inc>

> I see you found the answer yourself. Congratulations ;-)

Yeah, that was a little embarrassing, especially
with the 40 line comment before it :-)

> Now, as you're playing with PTS and SCR, I would be very grateful if you could 
> come up with a way to use those fields to populate the v4l2_buffer timestamp 
> member. That has been on my todo list for a long time and I've never got 
> around to implement it.

I'll give it some thought. I was originally hoping to pass both values, 
but there doesn't seem to be enough room in the v4l2_buffer struct for that.

> Best regards,

> Laurent Pinchart

Nathanael Galpin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080425/c74dfff8/attachment.html>

From reimer.christopher at freenet.de  Sat Apr 26 13:40:08 2008
From: reimer.christopher at freenet.de (Christopher Reimer)
Date: Sat, 26 Apr 2008 13:40:08 +0200
Subject: [Linux-uvc-devel] Only get black screen with Logitech QuickCam
 Pro 5000
In-Reply-To: <200804212126.36365.laurent.pinchart@skynet.be>
References: <4809C351.80803@freenet.de>
	<200804212126.36365.laurent.pinchart@skynet.be>
Message-ID: <48131498.9020104@freenet.de>

Laurent Pinchart wrote:
> Could you please try luvcview ? xawtv 3.95 has a known bug and I've never
> tested aMsn myself (although other people reported it to work some time ago).

Thanks for the hint with luvcview. This program is able to get a nice 
picture from my cam. For some reason after first getting a connection 
with luvcview, aMSN is also able to get picture from my webcam. Did 
luvcview some type of "configuration" which made aMSN work well now?

Yours

Christopher


From sevmek at free.fr  Sat Apr 26 15:53:36 2008
From: sevmek at free.fr (yannick)
Date: Sat, 26 Apr 2008 15:53:36 +0200
Subject: [Linux-uvc-devel] creative live! cam optia AF at 30 fps?
In-Reply-To: <1209134740.13944.30.camel@achille>
References: <1209134740.13944.30.camel@achille>
Message-ID: <1209218016.13944.113.camel@achille>

I did more testing:
$ modinfo uvcvideo
filename:       /lib/modules/2.6.24-16-generic/ubuntu/media/usbvideo/uvcvideo.ko
version:        SVN r205

$ uvcdynctrl -V
uvcdynctrl 0.2 (SVN Revision : 21)

$ uvcdynctrl -cv
Listing available controls for device video0:
  Focus, Auto
    ID      : 0x00000013,
    Type    : Boolean,
    Flags   : { CAN_READ, CAN_WRITE },
    Values  : [ 70 .. 2875, step size: 187 ],
    Default : 1
  Focus (absolute)
    ID      : 0x00000014,
    Type    : Dword,
    Flags   : { CAN_READ, CAN_WRITE },
    Values  : [ 70 .. 2875, step size: 187 ],
    Default : 70
  Exposure (Absolute)
    ID      : 0x00000011,
    Type    : Dword,
    Flags   : { CAN_READ, CAN_WRITE },
    Values  : [ 100 .. 2400, step size: 100 ],
    Default : 300
  Exposure, Auto
    ID      : 0x0000000f,
    Type    : Choice,
    Flags   : { CAN_READ, CAN_WRITE },
    Values  : { 'Manual Mode'[0], 'Auto Mode'[1], 'Shutter Priority
Mode'[2], 'Aperture Priority Mode'[3] },
    Default : 3
  Backlight Compensation
    ID      : 0x0000000c,
    Type    : Dword,
    Flags   : { CAN_READ, CAN_WRITE },
    Values  : [ 0 .. 1, step size: 1 ],
    Default : 0
  Sharpness
    ID      : 0x00000007,
    Type    : Dword,
    Flags   : { CAN_READ, CAN_WRITE },
    Values  : [ 0 .. 9, step size: 1 ],
    Default : 0
  White Balance Temperature
    ID      : 0x00000008,
    Type    : Dword,
    Flags   : { CAN_READ, CAN_WRITE },
    Values  : [ 2800 .. 6500, step size: 1850 ],
    Default : 6500
  Power Line Frequency
    ID      : 0x0000000d,
    Type    : Choice,
    Flags   : { CAN_READ, CAN_WRITE },
    Values  : { 'Disabled'[0], '50 Hz'[1], '60 Hz'[2] },
    Default : 2
  Gamma
    ID      : 0x00000006,
    Type    : Dword,
    Flags   : { CAN_READ, CAN_WRITE },
    Values  : [ 25 .. 125, step size: 25 ],
    Default : 50
  White Balance Temperature, Auto
    ID      : 0x00000009,
    Type    : Boolean,
    Flags   : { CAN_READ, CAN_WRITE },
    Values  : [ -30 .. 30, step size: 1 ],
    Default : 1
  Hue
    ID      : 0x00000005,
    Type    : Dword,
    Flags   : { CAN_READ, CAN_WRITE },
    Values  : [ -30 .. 30, step size: 1 ],
    Default : 0
  Saturation
    ID      : 0x00000004,
    Type    : Dword,
    Flags   : { CAN_READ, CAN_WRITE },
    Values  : [ 0 .. 19, step size: 1 ],
    Default : 5
  Contrast
    ID      : 0x00000002,
    Type    : Dword,
    Flags   : { CAN_READ, CAN_WRITE },
    Values  : [ 0 .. 3, step size: 1 ],
    Default : 1
  Brightness
    ID      : 0x00000001,
    Type    : Dword,
    Flags   : { CAN_READ, CAN_WRITE },
    Values  : [ 0 .. 31, step size: 1 ],
    Default : 0

$ uvcdynctrl -g 'Exposure, Auto'
3

$ uvcdynctrl -s 'Exposure, Auto' -- 0

$ uvcdynctrl -g 'Exposure, Auto'
0

$ uvcdynctrl -g 'Exposure (Absolute)'
1500

/usr/local/bin/luvcview -i 30 -f yuv
There I get 10~15fps


The weird thing is I *must* follow this order to be able to set 
'Exposure (Absolute)' and 'Focus (absolute)':
1- get the Auto value,
2- set the auto value,
3- get the absolute value
4- set the absolute value

or I get this error:
$ uvcdynctrl -s 'Exposure (Absolute)' 2400
ERROR: Unable to set new control value: A Video4Linux2 API call returned
an unexpected error 5. (Code: 12)

This works:
$ uvcdynctrl -g 'Exposure, Auto'
0
$ uvcdynctrl -s 'Exposure, Auto' -- 0
$ uvcdynctrl -g 'Exposure (Absolute)'
300
$ uvcdynctrl -s 'Exposure (Absolute)' 100
$ uvcdynctrl -g 'Exposure (Absolute)'
100

This works too:
$ uvcdynctrl -g 'Focus, Auto'
0
$ uvcdynctrl -s 'Focus, Auto' 0
$ uvcdynctrl -g 'Focus (absolute)'
1566
$ uvcdynctrl -s 'Focus (absolute)' 70
$ uvcdynctrl -g 'Focus (absolute)'
70

But what ever I tried, I'm not able to have 30fps :(

It seems if there is more light in the room, the fps increase a bit.

Regards,
Yannick

Le vendredi 25 avril 2008 ? 16:45 +0200, yannick a ?crit :
> Hi,
> 
> I lately buy the creative live! cam optia AF. Despite all my efforts I
> can't get more than 5~10 fps (usualy 5).
> 
> I compiled latest uvc driver trunk and latest luvcview trunk too.
> 
> It seems, after some searchs, if I could turn off autoexposure i'll get
> more fps but this doesn't work using luvcview :(
> 
> /usr/local/bin/luvcview -i 30
> luvcview 0.2.4
> 
> SDL information:
>   Video driver: x11
>   A window manager is available
> Device information:
>   Device path:  /dev/video0
> Stream settings:
>   Frame format: MJPG
>   Frame size:   640x480
>   Frame rate:   30 fps
> Set Auto Exposure off error
> Cleanup done. Exiting ...
> 
> I'm a regular tester for the VoIP software Ekiga and I contribute
> writing the software documentation (including this page:
> http://wiki.ekiga.org/index.php/Tested_hardware ). In our latest trunk
> we have code to use webcams at 30fps using the H.264 video codec.
> 
> We also had people with disabilities hoping some VoIP software able to
> do 30fps with nice resolution (seems 320x240 will be ok, but our Ekiga
> trunk can do 640x480, or even more) to do speech recognition (lips
> reading).
> 
> For all the reasons above, i'm looking for a solution to get 30 fps with
> this webcam.
> 
> Thank you for paying attention,
> Best regards,
> Yannick
-- 
Me joindre en t?l?phonie IP / vid?oconf?rence ?
sip:yannick at ekiga.net
Logiciel de VoIP Ekiga : http://www.ekiga.org
http://wiki.ekiga.org/index.php/Which_programs_work_with_Ekiga_%3F



From NathanaelGalpin at smarttech.com  Sat Apr 26 19:43:56 2008
From: NathanaelGalpin at smarttech.com (Nathanael Galpin)
Date: Sat, 26 Apr 2008 11:43:56 -0600
Subject: [Linux-uvc-devel] creative live! cam optia AF at 30 fps?
Message-ID: <8FF3AEDFC5ABAE42A50A92DBBFD702EF02C1E5E7@calmail1.smarttech.inc>

Hi Yannick,
 
> I did more testing:

<snip...>

> But what ever I tried, I'm not able to have 30fps :(
> It seems if there is more light in the room, the fps increase a bit.

I've run into similar issues on this camera myself, though I do remember that I could get more than 5-10 fps. I'll play around with the one I have at work on Monday and see if I can give you more detailed advice.

You mentioned that there was a sequence of commands that would let you set the exposure to an absolute value.

> This works:
> $ uvcdynctrl -g 'Exposure, Auto'
> 0
> $ uvcdynctrl -s 'Exposure, Auto' -- 0
> $ uvcdynctrl -g 'Exposure (Absolute)'
> 300
> $ uvcdynctrl -s 'Exposure (Absolute)' 100
> $ uvcdynctrl -g 'Exposure (Absolute)'
> 100

Did you observe a change in the image when you set the exposure higher and lower? Setting the exposure to a very high and then a very low value should produce a noticabley different image. (High exposure bright image low frame rate, low exposure, dark image, high frame rate.) 

In the mean time, I suggest dissabling auto white-balance. You might find that after turning this off, you're able to set the exposure manually.


> Regards,
> Yannick

Good luck!
 
Nathanael
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080426/12057bb8/attachment.html>

From sevmek at free.fr  Sat Apr 26 21:17:21 2008
From: sevmek at free.fr (yannick)
Date: Sat, 26 Apr 2008 21:17:21 +0200
Subject: [Linux-uvc-devel] creative live! cam optia AF at 30 fps?
In-Reply-To: <8FF3AEDFC5ABAE42A50A92DBBFD702EF02C1E5E7@calmail1.smarttech.inc>
References: <8FF3AEDFC5ABAE42A50A92DBBFD702EF02C1E5E7@calmail1.smarttech.inc>
Message-ID: <1209237441.24289.1.camel@achille>

Le samedi 26 avril 2008 ? 11:43 -0600, Nathanael Galpin a ?crit :
> Did you observe a change in the image when you set the exposure higher
> and lower? Setting the exposure to a very high and then a very low
> value should produce a noticabley different image. (High exposure
> bright image low frame rate, low exposure, dark image, high frame
> rate.) 

No, setting it to 100 or 2400 makes no difference :(

> 
> In the mean time, I suggest dissabling auto white-balance. You might
> find that after turning this off, you're able to set the exposure
> manually.

This do not change anything...

Thanks for your support. I'm out of ideas...

Best regards,
Yannick

-- 
Me joindre en t?l?phonie IP / vid?oconf?rence ?
sip:yannick at ekiga.net
Logiciel de VoIP Ekiga : http://www.ekiga.org
http://wiki.ekiga.org/index.php/Which_programs_work_with_Ekiga_%3F



From sboyce at blueyonder.co.uk  Sun Apr 27 13:48:51 2008
From: sboyce at blueyonder.co.uk (Sid Boyce)
Date: Sun, 27 Apr 2008 12:48:51 +0100
Subject: [Linux-uvc-devel] Building under latest 2.6.25-git kernels
Message-ID: <48146823.3040405@blueyonder.co.uk>

I've seen some references to the driver being included in the mainline 
kernel as part of v4l2, but I am not clear on the present situation with 
the merge. I have gone back as far as rev 190 and I get these errors on 
all up to latest rev 205. The mainline kernel doesn't build uvcvideo.ko 
either.
  # make clean && make && make install
rm -f *.o *.ko .*.cmd .*.flags *.mod.c Module.symvers version.h
rm -rf .tmp_versions
Building USB Video Class driver...
make[1]: Entering directory `/usr/src/linux-2.6.25-git10'
   CC [M]  /usr/src/uvc_svn/trunk/uvc_driver.o
In file included from /usr/src/uvc_svn/trunk/uvcvideo.h:7,
                  from /usr/src/uvc_svn/trunk/uvc_driver.c:40:
/usr/src/uvc_svn/trunk/uvc_compat.h:137:1: warning: 
"V4L2_CTRL_CLASS_CAMERA" redefined
In file included from include/linux/videodev.h:16,
                  from /usr/src/uvc_svn/trunk/uvc_driver.c:31:
include/linux/videodev2.h:798:1: warning: this is the location of the 
previous definition
In file included from /usr/src/uvc_svn/trunk/uvcvideo.h:7,
                  from /usr/src/uvc_svn/trunk/uvc_driver.c:40:
/usr/src/uvc_svn/trunk/uvc_compat.h:140: error: nested redefinition of 
?enum v4l2_power_line_frequency?
/usr/src/uvc_svn/trunk/uvc_compat.h:140: error: redeclaration of ?enum 
v4l2_power_line_frequency?
/usr/src/uvc_svn/trunk/uvc_compat.h:141: error: redeclaration of 
enumerator ?V4L2_CID_POWER_LINE_FREQUENCY_DISABLED?
include/linux/videodev2.h:874: error: previous definition of 
?V4L2_CID_POWER_LINE_FREQUENCY_DISABLED? was here
/usr/src/uvc_svn/trunk/uvc_compat.h:142: error: redeclaration of 
enumerator ?V4L2_CID_POWER_LINE_FREQUENCY_50HZ?
include/linux/videodev2.h:875: error: previous definition of 
?V4L2_CID_POWER_LINE_FREQUENCY_50HZ? was here
/usr/src/uvc_svn/trunk/uvc_compat.h:143: error: redeclaration of 
enumerator ?V4L2_CID_POWER_LINE_FREQUENCY_60HZ?
include/linux/videodev2.h:876: error: previous definition of 
?V4L2_CID_POWER_LINE_FREQUENCY_60HZ? was here
/usr/src/uvc_svn/trunk/uvc_compat.h:155: error: nested redefinition of 
?enum v4l2_exposure_auto_type?
/usr/src/uvc_svn/trunk/uvc_compat.h:155: error: redeclaration of ?enum 
v4l2_exposure_auto_type?
/usr/src/uvc_svn/trunk/uvc_compat.h:156: error: redeclaration of 
enumerator ?V4L2_EXPOSURE_MANUAL?
include/linux/videodev2.h:1080: error: previous definition of 
?V4L2_EXPOSURE_MANUAL? was here
/usr/src/uvc_svn/trunk/uvc_compat.h:157: error: redeclaration of 
enumerator ?V4L2_EXPOSURE_AUTO?
include/linux/videodev2.h:1079: error: previous definition of 
?V4L2_EXPOSURE_AUTO? was here
/usr/src/uvc_svn/trunk/uvc_compat.h:158: error: redeclaration of 
enumerator ?V4L2_EXPOSURE_SHUTTER_PRIORITY?
include/linux/videodev2.h:1081: error: previous definition of 
?V4L2_EXPOSURE_SHUTTER_PRIORITY? was here
/usr/src/uvc_svn/trunk/uvc_compat.h:160: error: redeclaration of 
enumerator ?V4L2_EXPOSURE_APERTURE_PRIORITY?
include/linux/videodev2.h:1083: error: previous definition of 
?V4L2_EXPOSURE_APERTURE_PRIORITY? was here
make[2]: *** [/usr/src/uvc_svn/trunk/uvc_driver.o] Error 1
make[1]: *** [_module_/usr/src/uvc_svn/trunk] Error 2
make[1]: Leaving directory `/usr/src/linux-2.6.25-git10'
make: *** [uvcvideo] Error 2

Regards
Sid.
-- 
Sid Boyce ... Hamradio License G3VBV, Licensed Private Pilot
Emeritus IBM/Amdahl Mainframes and Sun/Fujitsu Servers Tech Support 
Specialist, Cricket Coach
Microsoft Windows Free Zone - Linux used for all Computing Tasks



From dpsaxena at hotmail.com  Sun Apr 27 20:09:29 2008
From: dpsaxena at hotmail.com (D saxena)
Date: Sun, 27 Apr 2008 23:39:29 +0530
Subject: [Linux-uvc-devel] copy of uvc driver
Message-ID: <BLU138-W43A7787C0FD473A95AB2BDBDF0@phx.gbl>

Dear all,
     I am working on a wireless sensor node , project.In which i am using a device called Imote2.this is based on PXA271 processor, and i have loaded it with linux 2.6.14 kernel , bootloader and file system.
 
Now I need to integrate a logitech quickcam communicate deluxe (046d:0992) webcam with it. but I am unable to find a suitable uvc-driver for this webcam.can you all please help to me, by sending me a weblink or directly a copy of uvc_driver as an attachment.
 
 
thaks, 
dharm......
_________________________________________________________________
Video: Get a glimpse of the latest in Cricket, Bollywood, News and Fashion. Only on MSN videos.
http://video.msn.com/?mkt=en-in
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080427/b0e32b1c/attachment.html>

From sboyce at blueyonder.co.uk  Mon Apr 28 03:57:00 2008
From: sboyce at blueyonder.co.uk (Sid Boyce)
Date: Mon, 28 Apr 2008 02:57:00 +0100
Subject: [Linux-uvc-devel] Building under latest 2.6.25-git kernels
In-Reply-To: <48146823.3040405@blueyonder.co.uk>
References: <48146823.3040405@blueyonder.co.uk>
Message-ID: <48152EEC.7060509@blueyonder.co.uk>

Sid Boyce wrote:
> I've seen some references to the driver being included in the mainline 
> kernel as part of v4l2, but I am not clear on the present situation with 
> the merge. I have gone back as far as rev 190 and I get these errors on 
> all up to latest rev 205. The mainline kernel doesn't build uvcvideo.ko 
> either.
> # make clean && make && make install
> rm -f *.o *.ko .*.cmd .*.flags *.mod.c Module.symvers version.h
> rm -rf .tmp_versions
> Building USB Video Class driver...
> make[1]: Entering directory `/usr/src/linux-2.6.25-git10'
> CC [M] /usr/src/uvc_svn/trunk/uvc_driver.o
> In file included from /usr/src/uvc_svn/trunk/uvcvideo.h:7,
> from /usr/src/uvc_svn/trunk/uvc_driver.c:40:
> /usr/src/uvc_svn/trunk/uvc_compat.h:137:1: warning: 
> "V4L2_CTRL_CLASS_CAMERA" redefined
> In file included from include/linux/videodev.h:16,
> from /usr/src/uvc_svn/trunk/uvc_driver.c:31:
> include/linux/videodev2.h:798:1: warning: this is the location of the 
> previous definition
> In file included from /usr/src/uvc_svn/trunk/uvcvideo.h:7,
> from /usr/src/uvc_svn/trunk/uvc_driver.c:40:
> /usr/src/uvc_svn/trunk/uvc_compat.h:140: error: nested redefinition of 
> ?enum v4l2_power_line_frequency?
> /usr/src/uvc_svn/trunk/uvc_compat.h:140: error: redeclaration of ?enum 
> v4l2_power_line_frequency?
> /usr/src/uvc_svn/trunk/uvc_compat.h:141: error: redeclaration of 
> enumerator ?V4L2_CID_POWER_LINE_FREQUENCY_DISABLED?
> include/linux/videodev2.h:874: error: previous definition of 
> ?V4L2_CID_POWER_LINE_FREQUENCY_DISABLED? was here
> /usr/src/uvc_svn/trunk/uvc_compat.h:142: error: redeclaration of 
> enumerator ?V4L2_CID_POWER_LINE_FREQUENCY_50HZ?
> include/linux/videodev2.h:875: error: previous definition of 
> ?V4L2_CID_POWER_LINE_FREQUENCY_50HZ? was here
> /usr/src/uvc_svn/trunk/uvc_compat.h:143: error: redeclaration of 
> enumerator ?V4L2_CID_POWER_LINE_FREQUENCY_60HZ?
> include/linux/videodev2.h:876: error: previous definition of 
> ?V4L2_CID_POWER_LINE_FREQUENCY_60HZ? was here
> /usr/src/uvc_svn/trunk/uvc_compat.h:155: error: nested redefinition of 
> ?enum v4l2_exposure_auto_type?
> /usr/src/uvc_svn/trunk/uvc_compat.h:155: error: redeclaration of ?enum 
> v4l2_exposure_auto_type?
> /usr/src/uvc_svn/trunk/uvc_compat.h:156: error: redeclaration of 
> enumerator ?V4L2_EXPOSURE_MANUAL?
> include/linux/videodev2.h:1080: error: previous definition of 
> ?V4L2_EXPOSURE_MANUAL? was here
> /usr/src/uvc_svn/trunk/uvc_compat.h:157: error: redeclaration of 
> enumerator ?V4L2_EXPOSURE_AUTO?
> include/linux/videodev2.h:1079: error: previous definition of 
> ?V4L2_EXPOSURE_AUTO? was here
> /usr/src/uvc_svn/trunk/uvc_compat.h:158: error: redeclaration of 
> enumerator ?V4L2_EXPOSURE_SHUTTER_PRIORITY?
> include/linux/videodev2.h:1081: error: previous definition of 
> ?V4L2_EXPOSURE_SHUTTER_PRIORITY? was here
> /usr/src/uvc_svn/trunk/uvc_compat.h:160: error: redeclaration of 
> enumerator ?V4L2_EXPOSURE_APERTURE_PRIORITY?
> include/linux/videodev2.h:1083: error: previous definition of 
> ?V4L2_EXPOSURE_APERTURE_PRIORITY? was here
> make[2]: *** [/usr/src/uvc_svn/trunk/uvc_driver.o] Error 1
> make[1]: *** [_module_/usr/src/uvc_svn/trunk] Error 2
> make[1]: Leaving directory `/usr/src/linux-2.6.25-git10'
> make: *** [uvcvideo] Error 2
> 
> Regards
> Sid.

 From rev 205 I removed uvc_compat.h and commented out #include 
"uvc_compat.h" in uvcvideo.h. Driver builds and installs, but I haven't 
got the camera on that box. Shall try on another one perhaps tomorrow, 
see if it works. Kernel is 2.6.25-git11.
Regards
Sid.

-- 
Sid Boyce ... Hamradio License G3VBV, Licensed Private Pilot
Emeritus IBM/Amdahl Mainframes and Sun/Fujitsu Servers Tech Support 
Specialist, Cricket Coach
Microsoft Windows Free Zone - Linux used for all Computing Tasks



From cclaus at gmail.com  Mon Apr 28 12:31:15 2008
From: cclaus at gmail.com (Claudiu Constantinescu)
Date: Mon, 28 Apr 2008 13:31:15 +0300
Subject: [Linux-uvc-devel] asus x55 video upside down
Message-ID: <c49cf9640804280331p1050f160l3eaeebc9f94665b5@mail.gmail.com>

Dear All,

     I have the problem of a camera mounted upside-down in an Asus x55
(Bus 007 Device 003: ID 04f2:b012 Chicony Electronics Co., Ltd).
luvcview -f yuv works and displays the image bottom side up. I think
there is no way that the uvc driver can vertically flip the image
(correct me if I'm wrong).
     I don't know if this is the correct place to ask for this, but
does anyone know of any userspace or kernel implementations, or a
patch to the uvc driver, that would duplicate the video device and
flip it upside down?

Regards,
Claudiu


From sboyce at blueyonder.co.uk  Mon Apr 28 12:45:09 2008
From: sboyce at blueyonder.co.uk (Sid Boyce)
Date: Mon, 28 Apr 2008 11:45:09 +0100
Subject: [Linux-uvc-devel] Building under latest 2.6.25-git kernels
In-Reply-To: <48152EEC.7060509@blueyonder.co.uk>
References: <48146823.3040405@blueyonder.co.uk>
	<48152EEC.7060509@blueyonder.co.uk>
Message-ID: <4815AAB5.7040304@blueyonder.co.uk>

Sid Boyce wrote:
> Sid Boyce wrote:
>> I've seen some references to the driver being included in the mainline 
>> kernel as part of v4l2, but I am not clear on the present situation 
>> with the merge. I have gone back as far as rev 190 and I get these 
>> errors on all up to latest rev 205. The mainline kernel doesn't build 
>> uvcvideo.ko either.
>> # make clean && make && make install
>> rm -f *.o *.ko .*.cmd .*.flags *.mod.c Module.symvers version.h
>> rm -rf .tmp_versions
>> Building USB Video Class driver...
>> make[1]: Entering directory `/usr/src/linux-2.6.25-git10'
>> CC [M] /usr/src/uvc_svn/trunk/uvc_driver.o
>> In file included from /usr/src/uvc_svn/trunk/uvcvideo.h:7,
>> from /usr/src/uvc_svn/trunk/uvc_driver.c:40:
>> /usr/src/uvc_svn/trunk/uvc_compat.h:137:1: warning: 
>> "V4L2_CTRL_CLASS_CAMERA" redefined
>> In file included from include/linux/videodev.h:16,
>> from /usr/src/uvc_svn/trunk/uvc_driver.c:31:
>> include/linux/videodev2.h:798:1: warning: this is the location of the 
>> previous definition
>> In file included from /usr/src/uvc_svn/trunk/uvcvideo.h:7,
>> from /usr/src/uvc_svn/trunk/uvc_driver.c:40:
>> /usr/src/uvc_svn/trunk/uvc_compat.h:140: error: nested redefinition of 
>> ?enum v4l2_power_line_frequency?
>> /usr/src/uvc_svn/trunk/uvc_compat.h:140: error: redeclaration of ?enum 
>> v4l2_power_line_frequency?
>> /usr/src/uvc_svn/trunk/uvc_compat.h:141: error: redeclaration of 
>> enumerator ?V4L2_CID_POWER_LINE_FREQUENCY_DISABLED?
>> include/linux/videodev2.h:874: error: previous definition of 
>> ?V4L2_CID_POWER_LINE_FREQUENCY_DISABLED? was here
>> /usr/src/uvc_svn/trunk/uvc_compat.h:142: error: redeclaration of 
>> enumerator ?V4L2_CID_POWER_LINE_FREQUENCY_50HZ?
>> include/linux/videodev2.h:875: error: previous definition of 
>> ?V4L2_CID_POWER_LINE_FREQUENCY_50HZ? was here
>> /usr/src/uvc_svn/trunk/uvc_compat.h:143: error: redeclaration of 
>> enumerator ?V4L2_CID_POWER_LINE_FREQUENCY_60HZ?
>> include/linux/videodev2.h:876: error: previous definition of 
>> ?V4L2_CID_POWER_LINE_FREQUENCY_60HZ? was here
>> /usr/src/uvc_svn/trunk/uvc_compat.h:155: error: nested redefinition of 
>> ?enum v4l2_exposure_auto_type?
>> /usr/src/uvc_svn/trunk/uvc_compat.h:155: error: redeclaration of ?enum 
>> v4l2_exposure_auto_type?
>> /usr/src/uvc_svn/trunk/uvc_compat.h:156: error: redeclaration of 
>> enumerator ?V4L2_EXPOSURE_MANUAL?
>> include/linux/videodev2.h:1080: error: previous definition of 
>> ?V4L2_EXPOSURE_MANUAL? was here
>> /usr/src/uvc_svn/trunk/uvc_compat.h:157: error: redeclaration of 
>> enumerator ?V4L2_EXPOSURE_AUTO?
>> include/linux/videodev2.h:1079: error: previous definition of 
>> ?V4L2_EXPOSURE_AUTO? was here
>> /usr/src/uvc_svn/trunk/uvc_compat.h:158: error: redeclaration of 
>> enumerator ?V4L2_EXPOSURE_SHUTTER_PRIORITY?
>> include/linux/videodev2.h:1081: error: previous definition of 
>> ?V4L2_EXPOSURE_SHUTTER_PRIORITY? was here
>> /usr/src/uvc_svn/trunk/uvc_compat.h:160: error: redeclaration of 
>> enumerator ?V4L2_EXPOSURE_APERTURE_PRIORITY?
>> include/linux/videodev2.h:1083: error: previous definition of 
>> ?V4L2_EXPOSURE_APERTURE_PRIORITY? was here
>> make[2]: *** [/usr/src/uvc_svn/trunk/uvc_driver.o] Error 1
>> make[1]: *** [_module_/usr/src/uvc_svn/trunk] Error 2
>> make[1]: Leaving directory `/usr/src/linux-2.6.25-git10'
>> make: *** [uvcvideo] Error 2
>>
>> Regards
>> Sid.
> 
>  From rev 205 I removed uvc_compat.h and commented out #include 
> "uvc_compat.h" in uvcvideo.h. Driver builds and installs, but I haven't 
> got the camera on that box. Shall try on another one perhaps tomorrow, 
> see if it works. Kernel is 2.6.25-git11.
> Regards
> Sid.
> 

Tested on my laptop's Acer Crystal Eye webcam with skype, it works.
Regards
Sid.

-- 
Sid Boyce ... Hamradio License G3VBV, Licensed Private Pilot
Emeritus IBM/Amdahl Mainframes and Sun/Fujitsu Servers Tech Support 
Specialist, Cricket Coach
Microsoft Windows Free Zone - Linux used for all Computing Tasks



From jan at willies.info  Mon Apr 28 13:39:22 2008
From: jan at willies.info (Jan Willies)
Date: Mon, 28 Apr 2008 13:39:22 +0200
Subject: [Linux-uvc-devel] success: Chicony Electronics USB2.0 1.3M UVC
 WebCam (Asus F6S)
In-Reply-To: <47FE5F27.10805@willies.info>
References: <47FE54A2.1020401@willies.info>	<200804101133.31205.laurent.pinchart@skynet.be>
	<47FE5F27.10805@willies.info>
Message-ID: <4815B76A.5090907@willies.info>

Jan Willies wrote:
> Laurent Pinchart wrote:
 >> Thanks for the report. Could you please send me the output of
>>
>> lsusb -v -d 04f2:b029
>>
>> with usbutils 0.72 or newer (0.73+ preferred) ?
>>   
> root at jan ~ # lsusb -V
> lsusb (usbutils) 0.73
> root at jan ~ # lsusb -v -d 04f2:b029
> 
> Bus 002 Device 002: ID 04f2:b029 Chicony Electronics Co., Ltd
> Device Descriptor:
>   bLength                18
>   bDescriptorType         1
>   bcdUSB               2.00
>   bDeviceClass          239 Miscellaneous Device
>   bDeviceSubClass         2 ?
>   bDeviceProtocol         1 Interface Association
>   bMaxPacketSize0        64
>   idVendor           0x04f2 Chicony Electronics Co., Ltd
>   idProduct          0xb029
>   bcdDevice           51.66
>   iManufacturer           2 Chicony Electronics Co., Ltd.
>   iProduct                1 USB2.0 1.3M UVC WebCam
>   iSerial                 3 SN0001
>   bNumConfigurations      1
>   Configuration Descriptor:
>     bLength                 9
>     bDescriptorType         2
>     wTotalLength          591
>     bNumInterfaces          2
>     bConfigurationValue     1
>     iConfiguration          0
>     bmAttributes         0x80
>       (Bus Powered)
>     MaxPower               98mA
>     Interface Association:
>       bLength                 8
>       bDescriptorType        11
>       bFirstInterface         0
>       bInterfaceCount         2
>       bFunctionClass         14 Video
>       bFunctionSubClass       3 Video Interface Collection
>       bFunctionProtocol       0
>       iFunction               1 USB2.0 1.3M UVC WebCam
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       0
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      1 Video Control
>       bInterfaceProtocol      0
>       iInterface              1 USB2.0 1.3M UVC WebCam
>       VideoControl Interface Descriptor:
>         bLength                13
>         bDescriptorType        36
>         bDescriptorSubtype      1 (HEADER)
>         bcdUVC               1.00
>         wTotalLength          103
>         dwClockFrequency       15.000000MHz
>         bInCollection           1
>         baInterfaceNr( 0)       1
>       VideoControl Interface Descriptor:
>         bLength                 9
>         bDescriptorType        36
>         bDescriptorSubtype      3 (OUTPUT_TERMINAL)
>         bTerminalID             2
>         wTerminalType      0x0101 USB Streaming
>         bAssocTerminal          0
>         bSourceID               5
>         iTerminal               0
>       VideoControl Interface Descriptor:
>         bLength                26
>         bDescriptorType        36
>         bDescriptorSubtype      6 (EXTENSION_UNIT)
>         bUnitID                 4
>         guidExtensionCode         {7033f028-1163-2e4a-ba2c-6890eb334016}
>         bNumControl             8
>         bNrPins                 1
>         baSourceID( 0)          3
>         bControlSize            1
>         bmControls( 0)       0x0f
>         iExtension              0
>       VideoControl Interface Descriptor:
>         bLength                26
>         bDescriptorType        36
>         bDescriptorSubtype      6 (EXTENSION_UNIT)
>         bUnitID                 5
>         guidExtensionCode         {3fae1228-d7bc-114e-a357-6f1edef7d61d}
>         bNumControl             8
>         bNrPins                 1
>         baSourceID( 0)          4
>         bControlSize            1
>         bmControls( 0)       0x00
>         iExtension              0
>       VideoControl Interface Descriptor:
>         bLength                18
>         bDescriptorType        36
>         bDescriptorSubtype      2 (INPUT_TERMINAL)
>         bTerminalID             1
>         wTerminalType      0x0201 Camera Sensor
>         bAssocTerminal          0
>         iTerminal               0
>         wObjectiveFocalLengthMin      0
>         wObjectiveFocalLengthMax      0
>         wOcularFocalLength            0
>         bControlSize                  3
>         bmControls           0x00000000
>       VideoControl Interface Descriptor:
>         bLength                11
>         bDescriptorType        36
>         bDescriptorSubtype      5 (PROCESSING_UNIT)
>       Warning: Descriptor too short
>         bUnitID                 3
>         bSourceID               1
>         wMaxMultiplier          0
>         bControlSize            2
>         bmControls     0x0000053f
>           Brightness
>           Contrast
>           Hue
>           Saturation
>           Sharpness
>           Gamma
>           Backlight Compensation
>           Power Line Frequency
>         iProcessing             0
>         bmVideoStandards     0x 0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x83  EP 3 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0010  1x 16 bytes
>         bInterval               6
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       0
>       bNumEndpoints           0
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       VideoStreaming Interface Descriptor:
>         bLength                            14
>         bDescriptorType                    36
>         bDescriptorSubtype                  1 (INPUT_HEADER)
>         bNumFormats                        1
>         wTotalLength                      345
>         bEndPointAddress                  129
>         bmInfo                              0
>         bTerminalLink                       2
>         bStillCaptureMethod                 0
>         bTriggerSupport                     1
>         bTriggerUsage                       0
>         bControlSize                        1
>         bmaControls( 0)                    27
>       VideoStreaming Interface Descriptor:
>         bLength                            27
>         bDescriptorType                    36
>         bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
>         bFormatIndex                        1
>         bNumFrameDescriptors                7
>         guidFormat                            
> {59555932-0000-1000-8000-00aa00389b71}
>         bBitsPerPixel                      16
>         bDefaultFrameIndex                  1
>         bAspectRatioX                       0
>         bAspectRatioY                       0
>         bmInterlaceFlags                 0x00
>           Interlaced stream or variable: No
>           Fields per frame: 1 fields
>           Field 1 first: No
>           Field pattern: Field 1 only
>           bCopyProtect                      0
>       VideoStreaming Interface Descriptor:
>         bLength                            46
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         1
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                            640
>         wHeight                           480
>         dwMinBitRate                   614400
>         dwMaxBitRate                 18432000
>         dwMaxVideoFrameBufferSize      614400
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  5
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            500000
>         dwFrameInterval( 2)            666666
>         dwFrameInterval( 3)           1000000
>         dwFrameInterval( 4)           2000000
>       VideoStreaming Interface Descriptor:
>         bLength                            46
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         2
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                            352
>         wHeight                           288
>         dwMinBitRate                   202752
>         dwMaxBitRate                  6082560
>         dwMaxVideoFrameBufferSize      202752
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  5
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            500000
>         dwFrameInterval( 2)            666666
>         dwFrameInterval( 3)           1000000
>         dwFrameInterval( 4)           2000000
>       VideoStreaming Interface Descriptor:
>         bLength                            46
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         3
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                            320
>         wHeight                           240
>         dwMinBitRate                   153600
>         dwMaxBitRate                  4608000
>         dwMaxVideoFrameBufferSize      153600
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  5
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            500000
>         dwFrameInterval( 2)            666666
>         dwFrameInterval( 3)           1000000
>         dwFrameInterval( 4)           2000000
>       VideoStreaming Interface Descriptor:
>         bLength                            46
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         4
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                            176
>         wHeight                           144
>         dwMinBitRate                    50688
>         dwMaxBitRate                  1520640
>         dwMaxVideoFrameBufferSize       50688
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  5
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            500000
>         dwFrameInterval( 2)            666666
>         dwFrameInterval( 3)           1000000
>         dwFrameInterval( 4)           2000000
>       VideoStreaming Interface Descriptor:
>         bLength                            46
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         5
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                            160
>         wHeight                           120
>         dwMinBitRate                    38400
>         dwMaxBitRate                  1152000
>         dwMaxVideoFrameBufferSize       38400
>         dwDefaultFrameInterval         333333
>         bFrameIntervalType                  5
>         dwFrameInterval( 0)            333333
>         dwFrameInterval( 1)            500000
>         dwFrameInterval( 2)            666666
>         dwFrameInterval( 3)           1000000
>         dwFrameInterval( 4)           2000000
>       VideoStreaming Interface Descriptor:
>         bLength                            34
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         6
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                           1280
>         wHeight                           960
>         dwMinBitRate                  2457600
>         dwMaxBitRate                 19660800
>         dwMaxVideoFrameBufferSize     2457600
>         dwDefaultFrameInterval        1333333
>         bFrameIntervalType                  2
>         dwFrameInterval( 0)           1333333
>         dwFrameInterval( 1)           2000000
>       VideoStreaming Interface Descriptor:
>         bLength                            34
>         bDescriptorType                    36
>         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
>         bFrameIndex                         7
>         bmCapabilities                   0x00
>           Still image unsupported
>         wWidth                           1280
>         wHeight                          1024
>         dwMinBitRate                  2621440
>         dwMaxBitRate                 19660800
>         dwMaxVideoFrameBufferSize     2621440
>         dwDefaultFrameInterval        1333333
>         bFrameIntervalType                  2
>         dwFrameInterval( 0)           1333333
>         dwFrameInterval( 1)           2000000
>       VideoStreaming Interface Descriptor:
>         bLength                             6
>         bDescriptorType                    36
>         bDescriptorSubtype                 13 (COLORFORMAT)
>         bColorPrimaries                     1 (BT.709,sRGB)
>         bTransferCharacteristics            1 (BT.709)
>         bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       1
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0080  1x 128 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       2
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0100  1x 256 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       3
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0320  1x 800 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       4
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0b20  2x 800 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       5
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x1320  3x 800 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       6
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x1400  3x 1024 bytes
>         bInterval               1
> Device Qualifier (for other device speed):
>   bLength                10
>   bDescriptorType         6
>   bcdUSB               2.00
>   bDeviceClass          239 Miscellaneous Device
>   bDeviceSubClass         2 ?
>   bDeviceProtocol         1 Interface Association
>   bMaxPacketSize0        64
>   bNumConfigurations      1
> Device Status:     0x0000
>   (Bus Powered)
> 
>>> Is there a chance to get the full 1.3MP sometime? The quick test with 
>>> mplayer just reports 640x480:
>>>     
>> I'd like to see the lsusb output to answer that :-)

Did the lsusb-output help?


cheers

- Jan


From brandon at ifup.org  Tue Apr 29 04:13:47 2008
From: brandon at ifup.org (Brandon Philips)
Date: Mon, 28 Apr 2008 19:13:47 -0700
Subject: [Linux-uvc-devel] copy of uvc driver
In-Reply-To: <BLU138-W43A7787C0FD473A95AB2BDBDF0@phx.gbl>
References: <BLU138-W43A7787C0FD473A95AB2BDBDF0@phx.gbl>
Message-ID: <20080429021347.GA25683@plankton.ifup.org>

On 23:39 Sun 27 Apr 2008, D saxena wrote:
> Now I need to integrate a logitech quickcam communicate deluxe
> (046d:0992) webcam with it. but I am unable to find a suitable
> uvc-driver for this webcam.can you all please help to me, by sending
> me a weblink or directly a copy of uvc_driver as an attachment.

Huh? The linux-uvc driver should work with your device:
  http://linux-uvc.berlios.de/

Have you tried it?

Confused,

	Brandon


From brandon at ifup.org  Tue Apr 29 04:23:55 2008
From: brandon at ifup.org (Brandon Philips)
Date: Mon, 28 Apr 2008 19:23:55 -0700
Subject: [Linux-uvc-devel] Building under latest 2.6.25-git kernels
In-Reply-To: <48146823.3040405@blueyonder.co.uk>
References: <48146823.3040405@blueyonder.co.uk>
Message-ID: <20080429022355.GC25683@plankton.ifup.org>

On 12:48 Sun 27 Apr 2008, Sid Boyce wrote:
> I've seen some references to the driver being included in the mainline 
> kernel as part of v4l2, but I am not clear on the present situation with 
> the merge. I have gone back as far as rev 190 and I get these errors on 
> all up to latest rev 205. The mainline kernel doesn't build uvcvideo.ko 
> either.

The Makefile SUBLEVEL doesn't change to .26 until the first release
candidate and the conflicts you are seeing are protected by:

 #if LINUX_VERSION_CODE < KERNEL_VERSION(2,6,26)

But, hopefully the UVC driver will be merged by the first rc :D

Cheers,

	Brandon



From brandon at ifup.org  Tue Apr 29 04:20:07 2008
From: brandon at ifup.org (Brandon Philips)
Date: Mon, 28 Apr 2008 19:20:07 -0700
Subject: [Linux-uvc-devel] asus x55 video upside down
In-Reply-To: <c49cf9640804280331p1050f160l3eaeebc9f94665b5@mail.gmail.com>
References: <c49cf9640804280331p1050f160l3eaeebc9f94665b5@mail.gmail.com>
Message-ID: <20080429022007.GB25683@plankton.ifup.org>

On 13:31 Mon 28 Apr 2008, Claudiu Constantinescu wrote:
>      I have the problem of a camera mounted upside-down in an Asus x55
> (Bus 007 Device 003: ID 04f2:b012 Chicony Electronics Co., Ltd).
> luvcview -f yuv works and displays the image bottom side up. I think
> there is no way that the uvc driver can vertically flip the image
> (correct me if I'm wrong).
>      I don't know if this is the correct place to ask for this, but
> does anyone know of any userspace or kernel implementations, or a
> patch to the uvc driver, that would duplicate the video device and
> flip it upside down?

There is some work going on to pull frames from the Kernel, munge them
(such as decode, flip), and push them back into the Kernel on a
different device node: http://linuxtv.org/hg/~tmerle/v4l2_extension

However, ideally there would be a standard V4L2 library that all
applications would build upon that would provide a simple flip operation
and possibly a config file like ALSA.  But, in our current state every
application needs to be modified to allow for a flip option.

Cheers,

	Brandon


From lsmithso at hare.demon.co.uk  Tue Apr 29 14:55:49 2008
From: lsmithso at hare.demon.co.uk (Les Smithson)
Date: Tue, 29 Apr 2008 13:55:49 +0100 (BST)
Subject: [Linux-uvc-devel] eeepc webcam noise
Message-ID: <7371.80.254.146.4.1209473749.squirrel@hare.demon.co.uk>

I'm trying to use motion
(http://www.lavrsen.dk/twiki/bin/view/Motion/WebHome) with a uvcvideo
driver on an Asus eeepc. The webcam is USB ID eb1a:2761 eMPIA Technology,
Inc. It mostly works, but every now and then motion captures a noise
frame. These look as though a green/yellow is missing, and have the
picture offset in both the X+Y positions. The problem is noticeably worse
under the strip lighting at work. I think the problem is also present on
uvcview as every now and then the picture flashes for no reason.

I've tried with both the stock driver and the latest svn (r205) and it
behaves the same way. Is this a driver bug? Is there anything I can do to
try and debug it?









From cvaldess at gmail.com  Tue Apr 29 21:42:03 2008
From: cvaldess at gmail.com (Carlos Valdes)
Date: Tue, 29 Apr 2008 21:42:03 +0200
Subject: [Linux-uvc-devel] 04f2:b013 Chicony Electronics Co., Ltd
Message-ID: <f8a142b00804291242l50b8af5fwc2af33f1d3a20740@mail.gmail.com>

Hi all,

there any support for  "04f2:b013 Chicony Electronics Co., Ltd" webcam??

come at lenovo 3000 n200 type: 0769-BCG

running Ubuntu 8.04 LTS Desktop Edition

have time to run some test.

thanks,
Carlos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080429/b18f1115/attachment.html>

From carlosjordao at gmail.com  Tue Apr 29 22:26:15 2008
From: carlosjordao at gmail.com (=?ISO-8859-1?Q?Carlos_Jord=E3o?=)
Date: Tue, 29 Apr 2008 17:26:15 -0300
Subject: [Linux-uvc-devel] Support to a new USB Camera
Message-ID: <7c59c7520804291326g8c90b7yeb8e62db393cfd3a@mail.gmail.com>

Hi,
  I'm newbie, but I have a web cam which doesn't work today either
with uvc driver, either with the gspca driver.
  It is a Sonix webcam (SN9C110).
  However, I want to make it work, I don't know if it is possible.
What should I do to start? Where to look out?
  I have looked into the code and I have seen few specifics hacks for
some webcam. There is any way to identify if this webcam needs some
hacks too?
  Thanks in advance,
                           Jordao


From nick at datacall.net.au  Wed Apr 30 01:34:40 2008
From: nick at datacall.net.au (Nick Sonneveld)
Date: Wed, 30 Apr 2008 09:34:40 +1000
Subject: [Linux-uvc-devel] Support to a new USB Camera
References: <7c59c7520804291326g8c90b7yeb8e62db393cfd3a@mail.gmail.com>
Message-ID: <B10472081C389346A5EDD5CC436762BA4269F2@fulgur.POWERCOM.local>

We've noticed similar problems with Creative Optia AF camera.  Usually it's the first 1 or 2 frames from when capturing begins but I've noticed it can happen from the 10th frame.  (We were trying single frame captures from the mjpeg stream, capturing 10 frames and saving the last)   Either the start of the mjpeg frame was missing (I think from different offsets) or frame was truncated.

The best thing we could do was to check for a valid jpeg header before saving the frame.  (although sometimes the tail image data was incorrect, that was harder to diagnose without parsing the entire mjpeg frame)

Assuming the drivers are correct, I suspect maybe the camera starts dumping to a frame buffer without checking for errors.

We were using revision 189 of the drivers, which was fairly recent at the time.

- Nick

-----Original Message-----
From: linux-uvc-devel-bounces at lists.berlios.de on behalf of Carlos Jord?o
Sent: Wed 4/30/2008 6:26 AM
To: linux-uvc-devel at lists.berlios.de
Subject: [Linux-uvc-devel] Support to a new USB Camera
 
Hi,
  I'm newbie, but I have a web cam which doesn't work today either
with uvc driver, either with the gspca driver.
  It is a Sonix webcam (SN9C110).
  However, I want to make it work, I don't know if it is possible.
What should I do to start? Where to look out?
  I have looked into the code and I have seen few specifics hacks for
some webcam. There is any way to identify if this webcam needs some
hacks too?
  Thanks in advance,
                           Jordao
_______________________________________________
Linux-uvc-devel mailing list
Linux-uvc-devel at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/linux-uvc-devel



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080430/6b77dd12/attachment.html>

From nick at datacall.net.au  Wed Apr 30 01:53:22 2008
From: nick at datacall.net.au (Nick Sonneveld)
Date: Wed, 30 Apr 2008 09:53:22 +1000
Subject: [Linux-uvc-devel] eeepc webcam noise
References: <7c59c7520804291326g8c90b7yeb8e62db393cfd3a@mail.gmail.com>
	<B10472081C389346A5EDD5CC436762BA4269F2@fulgur.POWERCOM.local>
Message-ID: <B10472081C389346A5EDD5CC436762BA4269F3@fulgur.POWERCOM.local>

Whoops, I meant to reply to the eeepc webcam noise email.

- Nick


-----Original Message-----
From: linux-uvc-devel-bounces at lists.berlios.de on behalf of Nick Sonneveld
Sent: Wed 4/30/2008 9:34 AM
To: linux-uvc-devel at lists.berlios.de
Subject: Re: [Linux-uvc-devel] Support to a new USB Camera
 
We've noticed similar problems with Creative Optia AF camera.  Usually it's the first 1 or 2 frames from when capturing begins but I've noticed it can happen from the 10th frame.  (We were trying single frame captures from the mjpeg stream, capturing 10 frames and saving the last)   Either the start of the mjpeg frame was missing (I think from different offsets) or frame was truncated.

The best thing we could do was to check for a valid jpeg header before saving the frame.  (although sometimes the tail image data was incorrect, that was harder to diagnose without parsing the entire mjpeg frame)

Assuming the drivers are correct, I suspect maybe the camera starts dumping to a frame buffer without checking for errors.

We were using revision 189 of the drivers, which was fairly recent at the time.

- Nick

-----Original Message-----
From: linux-uvc-devel-bounces at lists.berlios.de on behalf of Carlos Jord?o
Sent: Wed 4/30/2008 6:26 AM
To: linux-uvc-devel at lists.berlios.de
Subject: [Linux-uvc-devel] Support to a new USB Camera
 
Hi,
  I'm newbie, but I have a web cam which doesn't work today either
with uvc driver, either with the gspca driver.
  It is a Sonix webcam (SN9C110).
  However, I want to make it work, I don't know if it is possible.
What should I do to start? Where to look out?
  I have looked into the code and I have seen few specifics hacks for
some webcam. There is any way to identify if this webcam needs some
hacks too?
  Thanks in advance,
                           Jordao
_______________________________________________
Linux-uvc-devel mailing list
Linux-uvc-devel at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/linux-uvc-devel





-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080430/96a899e9/attachment.html>

From lsmithso at hare.demon.co.uk  Wed Apr 30 12:37:42 2008
From: lsmithso at hare.demon.co.uk (Les Smithson)
Date: Wed, 30 Apr 2008 11:37:42 +0100 (BST)
Subject: [Linux-uvc-devel] eeepc webcam noise
Message-ID: <50641.80.254.146.4.1209551862.squirrel@hare.demon.co.uk>

Is it significant that the problem is much worse under fluorescent light?
They flicker at 100Hz, where incandescents don't.


From brandon at ifup.org  Wed Apr 30 18:15:36 2008
From: brandon at ifup.org (Brandon Philips)
Date: Wed, 30 Apr 2008 09:15:36 -0700
Subject: [Linux-uvc-devel] 04f2:b013 Chicony Electronics Co., Ltd
In-Reply-To: <f8a142b00804291242l50b8af5fwc2af33f1d3a20740@mail.gmail.com>
References: <f8a142b00804291242l50b8af5fwc2af33f1d3a20740@mail.gmail.com>
Message-ID: <20080430161536.GD25683@plankton.ifup.org>

On 21:42 Tue 29 Apr 2008, Carlos Valdes wrote:
> there any support for  "04f2:b013 Chicony Electronics Co., Ltd" webcam??
> 
> come at lenovo 3000 n200 type: 0769-BCG
> 
> running Ubuntu 8.04 LTS Desktop Edition
> 
> have time to run some test.

Have you tried using the camera?  I am pretty shure Ubuntu ships the UVC
driver.

Can you provide the output from this command:

  lsusb -d 04f2:b013 -v 

Thanks,

	Brandon


From brandon at ifup.org  Wed Apr 30 18:31:02 2008
From: brandon at ifup.org (Brandon Philips)
Date: Wed, 30 Apr 2008 09:31:02 -0700
Subject: [Linux-uvc-devel] Support to a new USB Camera
In-Reply-To: <7c59c7520804291326g8c90b7yeb8e62db393cfd3a@mail.gmail.com>
References: <7c59c7520804291326g8c90b7yeb8e62db393cfd3a@mail.gmail.com>
Message-ID: <20080430163102.GE25683@plankton.ifup.org>

On 17:26 Tue 29 Apr 2008, Carlos Jord?o wrote:
> I'm newbie, but I have a web cam which doesn't work today either with
> uvc driver, either with the gspca driver.
>
> It is a Sonix webcam (SN9C110).

This devices is not UVC.  Maybe it is supported by this driver?

  http://groups.google.com/group/microdia?lnk=srg

Hope that helps.

Cheers,

	Brandon


From herton at mandriva.com.br  Wed Apr 30 20:42:03 2008
From: herton at mandriva.com.br (Herton Ronaldo Krzesinski)
Date: Wed, 30 Apr 2008 15:42:03 -0300
Subject: [Linux-uvc-devel] Fwd: Re: ehci-hcd issue with webcam /
	uvcvideo driver
In-Reply-To: <200804250017.37103.laurent.pinchart@skynet.be>
References: <200804212314.53053.laurent.pinchart@skynet.be>
	<200804241417.10957.herton@mandriva.com.br>
	<200804250017.37103.laurent.pinchart@skynet.be>
Message-ID: <200804301542.03606.herton@mandriva.com.br>

Em Thursday 24 April 2008 19:17:36 Laurent Pinchart escreveu:
> Hi Herton,
>
> On Thursday 24 April 2008, Herton Ronaldo Krzesinski wrote:
> > Em Wednesday 23 April 2008 00:01:14 Herton Ronaldo Krzesinski escreveu:
> > uvcvideo: device USB2.0 Camera requested null bandwidth, defaulting to
> > lowest. kopete: page allocation failure. order:5, mode:0x0
> > Pid: 6996, comm: kopete Not tainted 2.6.24.4-desktop-2mdvoem #1
> >  [<c010645a>] show_trace_log_lvl+0x1a/0x30
> >  [<c0106ec2>] show_trace+0x12/0x20
> >  [<c010794c>] dump_stack+0x6c/0x80
> >  [<c016e5a8>] __alloc_pages+0x278/0x360
> >  [<c016e6df>] __get_free_pages+0x4f/0x60
> >  [<c010a25a>] dma_alloc_coherent+0xba/0x110
> >  [<ccdd7a17>] hcd_buffer_alloc+0x47/0x80 [usbcore]
> >  [<ccdcd335>] usb_buffer_alloc+0x25/0x30 [usbcore]
> >  [<ccf59bf8>] uvc_init_video+0x158/0x3b0 [uvcvideo]
> >  [<ccf59e9a>] uvc_video_enable+0x4a/0x50 [uvcvideo]
> >  [<ccf59229>] uvc_v4l2_do_ioctl+0x999/0xfb0 [uvcvideo]
> >  [<ccf40283>] video_usercopy+0xc3/0x230 [videodev]
> >  [<ccf58263>] uvc_v4l2_ioctl+0x43/0x50 [uvcvideo]
> >  [<c019a578>] do_ioctl+0x88/0xa0
> >  [<c019a7af>] vfs_ioctl+0x21f/0x2a0
> >  [<c019a883>] sys_ioctl+0x53/0x70
> >  [<c010532e>] sysenter_past_esp+0x6b/0xa1
> >  =======================
> > Mem-info:
> > DMA per-cpu:
> > CPU    0: Hot: hi:    0, btch:   1 usd:   0   Cold: hi:    0, btch:   1
> > usd: 0
> > CPU    1: Hot: hi:    0, btch:   1 usd:   0   Cold: hi:    0, btch:   1
> > usd: 0
> > Normal per-cpu:
> > CPU    0: Hot: hi:   42, btch:   7 usd:  33   Cold: hi:   14, btch:   3
> > usd: 13
> > CPU    1: Hot: hi:   42, btch:   7 usd:  40   Cold: hi:   14, btch:   3
> > usd: 12
> > Active:30836 inactive:8955 dirty:0 writeback:0 unstable:0
> >  free:528 slab:3006 mapped:12950 pagetables:371 bounce:0
> > DMA free:836kB min:144kB low:180kB high:216kB active:9980kB
> > inactive:1260kB present:16256kB pages_scanned:65 all_unreclaimable? no
> > lowmem_reserve[]: 0 173 173 173
> > Normal free:1276kB min:1608kB low:2008kB high:2412kB active:113364kB
> > inactive:34560kB present:177292kB pages_scanned:0 all_unreclaimable? no
> > lowmem_reserve[]: 0 0 0 0
> > DMA: 9*4kB 0*8kB 1*16kB 1*32kB 0*64kB 0*128kB 1*256kB 1*512kB 0*1024kB
> > 0*2048kB 0*4096kB = 852kB
> > Normal: 30*4kB 4*8kB 0*16kB 0*32kB 0*64kB 1*128kB 0*256kB 0*512kB
> > 1*1024kB 0*2048kB 0*4096kB = 1304kB
> > Swap cache: add 0, delete 0, find 0/0, race 0+0
> > Free swap  = 1084348kB
> > Total swap = 1084348kB
> > Free swap:       1084348kB
> > 48768 pages of RAM
> > 0 pages of HIGHMEM
> > 1454 reserved pages
> > 58649 pages shared
> > 0 pages swap cached
> > 0 pages dirty
> > 0 pages writeback
> > 12950 pages mapped
> > 3006 pages slab
> > 371 pages pagetableS
> >
> > Without lowering UVC_MAX_ISO_PACKETS I get the above in one machine (it
> > has indeed not much main memory, it's a notebook where free reports
> > 184MB, main memory is shared with onboard video it seems). But recently I
> > saw streaming issues after lowering it in another webcam, so I'm not
> > using this anymore for every machine, then I didn't catch too the -45
> > errors anymore, now I finally discovered what was happening.
> >
> > So may be we have two bugs here then:
> > - Memory allocation in uvcvideo doesn't work for all cases, urb
> > allocation should be revisited or is it ok?
>
> The only sensible option I can think of would be to lower
> UVC_MAX_ISO_PACKETS. The UVC driver tries not to put too much pressure on
> system memory but it still needs URB buffers. Lowering UVC_MAX_ISO_PACKETS
> will decrease memory pressure but will increase CPU usage, so it's a
> tradeoff, like always.

If anyone needs I made the following patch to change UVC_MAX_ISO_PACKETS as a 
module parameter:

--- linux-2.6.24/3rdparty/uvc/uvc_video.c.orig	2008-04-29 13:59:23.000000000 -0300
+++ linux-2.6.24/3rdparty/uvc/uvc_video.c	2008-04-29 14:20:42.000000000 -0300
@@ -594,7 +594,7 @@ static int uvc_init_video_isoc(struct uv
 
 	/* Compute the number of isochronous packets to allocate by dividing
 	 * the maximum video frame size by the packet size. Limit the result
-	 * to UVC_MAX_ISO_PACKETS.
+	 * to uvc_max_iso_pkts.
 	 */
 	psize = le16_to_cpu(ep->desc.wMaxPacketSize);
 	psize = (psize & 0x07ff) * (1 + ((psize >> 11) & 3));
@@ -604,8 +604,8 @@ static int uvc_init_video_isoc(struct uv
 		return -EINVAL;
 
 	npackets = (size + psize - 1) / psize;
-	if (npackets > UVC_MAX_ISO_PACKETS)
-		npackets = UVC_MAX_ISO_PACKETS;
+	if (npackets > uvc_max_iso_pkts)
+		npackets = uvc_max_iso_pkts;
 
 	size = npackets * psize;
 
@@ -661,14 +661,14 @@ static int uvc_init_video_bulk(struct uv
 	/* Compute the bulk URB size. Some devices set the maximum payload
 	 * size to a value too high for memory-constrained devices. We must
 	 * then transfer the payload accross multiple URBs. To be consistant
-	 * with isochronous mode, allocate maximum UVC_MAX_ISO_PACKETS per bulk
+	 * with isochronous mode, allocate maximum uvc_max_iso_pkts per bulk
 	 * URB.
 	 */
 	psize = le16_to_cpu(ep->desc.wMaxPacketSize) & 0x07ff;
 	size = video->streaming->ctrl.dwMaxPayloadTransferSize;
 	video->bulk.max_payload_size = size;
-	if (size > psize * UVC_MAX_ISO_PACKETS)
-		size = psize * UVC_MAX_ISO_PACKETS;
+	if (size > psize * uvc_max_iso_pkts)
+		size = psize * uvc_max_iso_pkts;
 
 	pipe = usb_rcvbulkpipe(video->dev->udev, ep->desc.bEndpointAddress);
 
--- linux-2.6.24/3rdparty/uvc/uvcvideo.h.orig	2008-04-29 14:01:21.000000000 -0300
+++ linux-2.6.24/3rdparty/uvc/uvcvideo.h	2008-04-29 14:02:07.000000000 -0300
@@ -673,6 +673,7 @@ struct uvc_driver {
 #define UVC_TRACE_SUSPEND	(1 << 8)
 #define UVC_TRACE_STATUS	(1 << 9)
 
+extern unsigned int uvc_max_iso_pkts;
 extern unsigned int uvc_trace_param;
 
 #define uvc_trace(flag, msg...) \
--- linux-2.6.24/3rdparty/uvc/uvc_driver.c.orig	2008-04-29 13:45:18.000000000 -0300
+++ linux-2.6.24/3rdparty/uvc/uvc_driver.c	2008-04-29 14:19:27.000000000 -0300
@@ -51,6 +51,7 @@
 #define DRIVER_VERSION		"v0.1.0"
 #endif
 
+unsigned int uvc_max_iso_pkts = UVC_MAX_ISO_PACKETS;
 static unsigned int uvc_quirks_param;
 unsigned int uvc_trace_param;
 
@@ -1581,6 +1582,17 @@ static int uvc_probe(struct usb_interfac
 			"linux-uvc-devel mailing list.\n");
 	}
 
+	if (uvc_max_iso_pkts > UVC_MAX_ISO_PACKETS) {
+		uvc_printk(KERN_INFO, "Given max_iso_pkts greater then the "
+			"maximum allowed\n");
+		uvc_printk(KERN_INFO, "Limiting max_iso_pkts to "
+			"UVC_MAX_ISO_PACKETS=%u\n", UVC_MAX_ISO_PACKETS);
+		uvc_max_iso_pkts = UVC_MAX_ISO_PACKETS;
+	} else {
+		uvc_printk(KERN_INFO, "Using UVC_MAX_ISO_PACKETS=%u\n",
+			uvc_max_iso_pkts);
+	}
+
 	/* Initialize controls */
 	if (uvc_ctrl_init_device(dev) < 0)
 		goto error;
@@ -1925,6 +1937,8 @@ static void __exit uvc_cleanup(void)
 module_init(uvc_init);
 module_exit(uvc_cleanup);
 
+module_param_named(max_iso_pkts, uvc_max_iso_pkts, uint, S_IRUGO|S_IWUSR);
+MODULE_PARM_DESC(max_iso_pkts, "Maximum isochronous packets limit");
 module_param_named(quirks, uvc_quirks_param, uint, S_IRUGO|S_IWUSR);
 MODULE_PARM_DESC(quirks, "Forced device quirks");
 module_param_named(trace, uvc_trace_param, uint, S_IRUGO|S_IWUSR);


>
> Thanks for the report.
>
> Best regards,
>
> Laurent Pinchart

-- 
[]'s
Herton


