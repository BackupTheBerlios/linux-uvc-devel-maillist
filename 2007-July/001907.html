<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] Patch: Read support
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2007-July/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Patch%3A%20Read%20support&In-Reply-To=%3C200707211558.03979.chris.horler%40clara.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001899.html">
   <LINK REL="Next"  HREF="001908.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] Patch: Read support</H1>
    <B>Christopher HORLER</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Patch%3A%20Read%20support&In-Reply-To=%3C200707211558.03979.chris.horler%40clara.co.uk%3E"
       TITLE="[Linux-uvc-devel] Patch: Read support">chris.horler at clara.co.uk
       </A><BR>
    <I>Sat Jul 21 16:58:03 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="001899.html">[Linux-uvc-devel] Patch: Read support
</A></li>
        <LI>Next message: <A HREF="001908.html">[Linux-uvc-devel] Patch: Read support - Update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1907">[ date ]</a>
              <a href="thread.html#1907">[ thread ]</a>
              <a href="subject.html#1907">[ subject ]</a>
              <a href="author.html#1907">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Laurent,

I've made adjustments, but I still think there maybe some problems.

1. I included the G_STD ioctl (but I've #if 0 it out - I was testing against 
an application that uses it, feel free to remove it).

2. Detecting if the stream is on - not sure I'm doing this right (see the read 
function).

3.  I've several static variables - perhaps this isn't the best solution.  See 
the beginning of the function read definition.

4.  I've rearranged some of the queue and dequeue buffer memory checks into 
the ioctls so they won't affect the read function.  I hope this is OK - it 
seemed better than removing the check altogether.

5.  I've added a variable into uvc_streaming to store the S_PARM setting of 
readbuffers.  I'm not sure it's in the 'right' place - but at the time I 
needed it to ensure that if REQBUFS is called, the value is correct 
(otherwise I would have directly used queue.count).

I tried to take into account everyones comments, but it's possible I've missed 
things - hopefully it's better than the first attempt.

Chris



On Thursday 19 July 2007 19:30, Laurent Pinchart wrote:
&gt;<i> Hi Chris,
</I>&gt;<i>
</I>&gt;<i> please keep the list CC'ed.
</I>&gt;<i>
</I>-------------- next part --------------
A non-text attachment was scrubbed...
Name: svndiff21Jul2007
Type: text/x-diff
Size: 7673 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070721/f094fdb4/attachment.diff">https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070721/f094fdb4/attachment.diff</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001899.html">[Linux-uvc-devel] Patch: Read support
</A></li>
	<LI>Next message: <A HREF="001908.html">[Linux-uvc-devel] Patch: Read support - Update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1907">[ date ]</a>
              <a href="thread.html#1907">[ thread ]</a>
              <a href="subject.html#1907">[ subject ]</a>
              <a href="author.html#1907">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
