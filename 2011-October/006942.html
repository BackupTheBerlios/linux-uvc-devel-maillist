<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] MS LifeCam Cinema and Studio have no usb bandwidth issue under Windows
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2011-October/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20MS%20LifeCam%20Cinema%20and%20Studio%20have%20no%20usb%0A%20bandwidth%20issue%20under%20Windows&In-Reply-To=%3C4E8EC995.9080603%40fisher-privat.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006941.html">
   <LINK REL="Next"  HREF="006943.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] MS LifeCam Cinema and Studio have no usb bandwidth issue under Windows</H1>
    <B>Alexey Fisher</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20MS%20LifeCam%20Cinema%20and%20Studio%20have%20no%20usb%0A%20bandwidth%20issue%20under%20Windows&In-Reply-To=%3C4E8EC995.9080603%40fisher-privat.net%3E"
       TITLE="[Linux-uvc-devel] MS LifeCam Cinema and Studio have no usb bandwidth issue under Windows">bug-track at fisher-privat.net
       </A><BR>
    <I>Fri Oct  7 11:42:45 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="006941.html">[Linux-uvc-devel] MS LifeCam Cinema and Studio have no usb bandwidth issue under Windows
</A></li>
        <LI>Next message: <A HREF="006943.html">[Linux-uvc-devel] MS LifeCam Cinema and Studio have no usb bandwidth issue under Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6942">[ date ]</a>
              <a href="thread.html#6942">[ thread ]</a>
              <a href="subject.html#6942">[ subject ]</a>
              <a href="author.html#6942">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Am 07.10.2011 10:59, schrieb Sebastian Arcus:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 06/10/11 17:28, Alexey Fisher wrote:
</I>&gt;&gt;<i> On 06.10.2011 18:16, Sebastian Arcus wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On 06/10/11 15:59, Alexey Fisher wrote:
</I>&gt;&gt;&gt;&gt;<i> On 06.10.2011 14:32, Sebastian Arcus wrote:
</I>&gt;&gt;&gt;&gt;&gt;<i> Hello list,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> The above two cameras, which have the well known usb bandwidth bug
</I>&gt;&gt;&gt;&gt;&gt;<i> under
</I>&gt;&gt;&gt;&gt;&gt;<i> Linux don't seem to display the same problems under Windows. I've
</I>&gt;&gt;&gt;&gt;&gt;<i> tried
</I>&gt;&gt;&gt;&gt;&gt;<i> them under Windows Vista and Windows 7 32bit. I've managed to
</I>&gt;&gt;&gt;&gt;&gt;<i> display a
</I>&gt;&gt;&gt;&gt;&gt;<i> LifeCam Studio and LifeCam Cinema at the same time through separate
</I>&gt;&gt;&gt;&gt;&gt;<i> instances of VLC all the way to 1920x1080 for LifeCam Studio and
</I>&gt;&gt;&gt;&gt;&gt;<i> 1280x720 for the LifeCam Cinema - which I believe are the maximum
</I>&gt;&gt;&gt;&gt;&gt;<i> video
</I>&gt;&gt;&gt;&gt;&gt;<i> resolutions for both cameras. I've forced VLC on 25fps - and the
</I>&gt;&gt;&gt;&gt;&gt;<i> Cinema
</I>&gt;&gt;&gt;&gt;&gt;<i> seems to do that. However, looking at the footage from the Studio at
</I>&gt;&gt;&gt;&gt;&gt;<i> maximum resolution - it looks more like 5fps.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> However, what all the above means is that these cameras don't seem to
</I>&gt;&gt;&gt;&gt;&gt;<i> suffer from the usb bandwidth bug under Windows. I've input &quot;mjpg&quot;
</I>&gt;&gt;&gt;&gt;&gt;<i> under
</I>&gt;&gt;&gt;&gt;&gt;<i> chroma settings for VLC - but I can't find a way to tell for sure
</I>&gt;&gt;&gt;&gt;&gt;<i> if VLC
</I>&gt;&gt;&gt;&gt;&gt;<i> is using the mjpeg stream from the camera, or raw.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Can someone here help me push this further? Is there any way of
</I>&gt;&gt;&gt;&gt;&gt;<i> debugging what is happening under Windows - so that maybe the Linux
</I>&gt;&gt;&gt;&gt;&gt;<i> uvc
</I>&gt;&gt;&gt;&gt;&gt;<i> driver can be modified to get these cameras to work properly?
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Any suggestions much appreciated.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Sebastian
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Hi Sebastian,
</I>&gt;&gt;&gt;&gt;<i> Probably usb sniffing will be most correct option, but currently i'll
</I>&gt;&gt;&gt;&gt;<i> would not interpret usb dump.
</I>&gt;&gt;&gt;&gt;<i> Other option is visual test:
</I>&gt;&gt;&gt;&gt;<i> - Jpeg stream has lower quality, try it under linux and you will see
</I>&gt;&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;&gt;<i> difference.
</I>&gt;&gt;&gt;&gt;<i> - according to frame rate the webcam controller will change demosaicing
</I>&gt;&gt;&gt;&gt;<i> algorithm. Simple alorithm produce pure qualithy, and image looks like
</I>&gt;&gt;&gt;&gt;<i> up scaled image from smaller image. Logitech webcams use better
</I>&gt;&gt;&gt;&gt;<i> algorithm before 15 fps and pure after 15 fps.
</I>&gt;&gt;&gt;&gt;<i> - you can check frame rate by capturing some timer with milliseconds:
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://tools.arantius.com/stopwatch">http://tools.arantius.com/stopwatch</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thank you Alexey. Looking at the quality of the footage - I would guess
</I>&gt;&gt;&gt;<i> it is not mjpeg. However, it still means that the camera is not grabbing
</I>&gt;&gt;&gt;<i> all the available usb bandwidth like it does under Linux - which is good
</I>&gt;&gt;&gt;<i> news.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Sebastian
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Then try bandwidth quirk:
</I>&gt;&gt;<i> sudo rmmod&amp;&amp; sudo modprobe uvcvideo quirks=0x80
</I>&gt;&gt;<i> But reduce frame rate, 1280x720 at 30 fps will take complete bindwidth,
</I>&gt;&gt;<i> try 10fps if you wont to use two webcams.
</I>&gt;&gt;<i>
</I>&gt;<i> Thanks Alexey.
</I>&gt;<i>
</I>&gt;<i> Anybody knows if I can use VLC or some other software under windows to
</I>&gt;<i> view the mjpeg stream? I could then test how many cameras I can use at
</I>&gt;<i> the same time under Windows with mjpeg. This should tell us if the
</I>&gt;<i> Windows driver doesn't have any of the usb bandwidth problems which
</I>&gt;<i> exist under Linux for these cameras.
</I>&gt;<i>
</I>&gt;<i> Sebastian
</I>
It is not a driver problem,

the webcam tell how match it need, the driver will give it. If cam tell 
it need every thing we have, the driver will give it. It is defined 
behavior of UVC, if device is broken, there is nothing driver can do. I 
will not wonder if Microsoft will have quirks for devices it produce.
For some time i send here some jpeg patches, you can test it on your own 
risk and force the bandwidth. But this patches will probably never go to 
upstream.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006941.html">[Linux-uvc-devel] MS LifeCam Cinema and Studio have no usb bandwidth issue under Windows
</A></li>
	<LI>Next message: <A HREF="006943.html">[Linux-uvc-devel] MS LifeCam Cinema and Studio have no usb bandwidth issue under Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6942">[ date ]</a>
              <a href="thread.html#6942">[ thread ]</a>
              <a href="subject.html#6942">[ subject ]</a>
              <a href="author.html#6942">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
