<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] select() problems with uvc drivers.
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2008-February/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20select%28%29%20problems%20with%20uvc%20drivers.&In-Reply-To=%3C47AFA0C5.6050307%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003035.html">
   <LINK REL="Next"  HREF="002964.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] select() problems with uvc drivers.</H1>
    <B>Christopher Harvey</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20select%28%29%20problems%20with%20uvc%20drivers.&In-Reply-To=%3C47AFA0C5.6050307%40gmail.com%3E"
       TITLE="[Linux-uvc-devel] select() problems with uvc drivers.">arbuckle911 at gmail.com
       </A><BR>
    <I>Mon Feb 11 02:11:33 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003035.html">[Linux-uvc-devel] En:Re:  Acer Crystal Eye
</A></li>
        <LI>Next message: <A HREF="002964.html">[Linux-uvc-devel] select() problems with uvc drivers.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2963">[ date ]</a>
              <a href="thread.html#2963">[ thread ]</a>
              <a href="subject.html#2963">[ subject ]</a>
              <a href="author.html#2963">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,
I sent this to the video 4 linux mailing list earlier, but perhaps it's
more appropriate here since the code is very uvc specific.
I've created a small c program that uses pure v4l2 code to read from a
webcam on a uvc driver then copy that data into an SDL overlay. I've
posted the code here:
<A HREF="http://basementcode.com/serverMain.html">http://basementcode.com/serverMain.html</A>
and I've attached a log file I created from the output of that program.
Overall the program works great except that after a few frames, about 35
(varies each run) in my case, the select() function that is supposed to
block until new data from the webcam is available stops working and
returns right away. This isn't a huge problem because the following
ioctl(fd, VIDIOC_DQBUF, &amp;buf)
call simply fails and sets errno to EAGAIN, then my app simply tries
again and again until it works. I'd rather select worked for the entire
duration of the capture to save cpu time and make sure that I read the
frame asap each time. The relevant function in the code I posted above
is &quot;mainLoop&quot;, however I can't be sure the error is actually in that
function. I hope I've posted enough information.
Thanks in advance,
Chris.

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: log
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080210/6c09874f/attachment.ksh">https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20080210/6c09874f/attachment.ksh</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003035.html">[Linux-uvc-devel] En:Re:  Acer Crystal Eye
</A></li>
	<LI>Next message: <A HREF="002964.html">[Linux-uvc-devel] select() problems with uvc drivers.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2963">[ date ]</a>
              <a href="thread.html#2963">[ thread ]</a>
              <a href="subject.html#2963">[ subject ]</a>
              <a href="author.html#2963">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
