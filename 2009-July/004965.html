<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] Multiple streaming interface and MPEG2-TS	support?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2009-July/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Multiple%20streaming%20interface%20and%20MPEG2-TS%0A%09support%3F&In-Reply-To=%3C200907110014.21974.laurent.pinchart%40skynet.be%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004964.html">
   <LINK REL="Next"  HREF="005007.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] Multiple streaming interface and MPEG2-TS	support?</H1>
    <B>Laurent Pinchart</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Multiple%20streaming%20interface%20and%20MPEG2-TS%0A%09support%3F&In-Reply-To=%3C200907110014.21974.laurent.pinchart%40skynet.be%3E"
       TITLE="[Linux-uvc-devel] Multiple streaming interface and MPEG2-TS	support?">laurent.pinchart at skynet.be
       </A><BR>
    <I>Sat Jul 11 00:14:21 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004964.html">[Linux-uvc-devel] Multiple streaming interface and MPEG2-TS	support?
</A></li>
        <LI>Next message: <A HREF="005007.html">[Linux-uvc-devel] Multiple streaming interface and MPEG2-TS	support?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4965">[ date ]</a>
              <a href="thread.html#4965">[ thread ]</a>
              <a href="subject.html#4965">[ subject ]</a>
              <a href="author.html#4965">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Vivek,

On Thursday 09 July 2009 09:19:39 Vivek Bardia wrote:
&gt;<i> Hi Laurent,
</I>&gt;<i>
</I>&gt;<i> On Thu, Jul 2, 2009 at 5:03 AM, Laurent
</I>&gt;<i>
</I>&gt;<i> Pinchart&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">laurent.pinchart at skynet.be</A>&gt; wrote:
</I>&gt;<i> &gt; Hi Vivek,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Friday 26 June 2009 10:26:07 Vivek Bardia wrote:
</I>&gt;<i> &gt;&gt; On Fri, Jun 26, 2009 at 1:26 AM, Laurent Pinchart wrote
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; On Monday 22 June 2009 14:23:21 Vivek Bardia wrote:
</I>&gt;<i> &gt;&gt; &gt; &gt; Hello Laurent,
</I>&gt;<i> &gt;&gt; &gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; &gt; With respect to the mail chain below,
</I>&gt;<i> &gt;&gt; &gt; &gt; Would you be able to help me with regards to Multiple streaming
</I>&gt;<i> &gt;&gt; &gt; &gt; interfaces.
</I>&gt;<i> &gt;&gt; &gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; &gt; Firstly how much effort could be required to bring up the UVC driver
</I>&gt;<i> &gt;&gt; &gt; &gt; to support multiple streaming interfaces and MPEG2-TS support ? In
</I>&gt;<i> &gt;&gt; &gt; &gt; case it is simple and already available, will you be able to provide
</I>&gt;<i> &gt;&gt; &gt; &gt; that patch so that I am able to test it with the hardware and get
</I>&gt;<i> &gt;&gt; &gt; &gt; back about the same ?
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Multiple streaming interfaces and MPEG2-TS are different requirements.
</I>&gt;<i> &gt;&gt; &gt; Supporting multiple interfaces will require restructuring a good deal
</I>&gt;<i> &gt;&gt; &gt; of the driver. I started working on that a week or two ago but had to
</I>&gt;<i> &gt;&gt; &gt; stop for a moment (if you can send me a few hours of free time by
</I>&gt;<i> &gt;&gt; &gt; e-mail I'll appreciate that). I should have some time this weekend or
</I>&gt;<i> &gt;&gt; &gt; early next week to prepare a patch.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Although I cannot send you free time by email, but can help you in
</I>&gt;<i> &gt;&gt; this regard in case you need help. I do not want to add more overhead
</I>&gt;<i> &gt;&gt; and confusion in case you are already working on it.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; I haven't really looked into what needs to be changed for MPEG2-TS
</I>&gt;<i> &gt;&gt; &gt; support. I don't expect it to be very difficult. I'll probably work on
</I>&gt;<i> &gt;&gt; &gt; that over the weekend.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Just one more thing, With regards to MPEG2-TS its just adding the
</I>&gt;<i> &gt;&gt; parsing support, if I am not wrong?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Some changes might be required on the video streaming code as well.
</I>&gt;<i> &gt; Streaming parameters negotiation will have to be modified too to support
</I>&gt;<i> &gt; MPEG2-specific. parameters.
</I>&gt;<i>
</I>&gt;<i> Thank you for the quick response from your end for adding support for
</I>&gt;<i> Multiple streaming interfaces.
</I>
You're welcome.

&gt;<i> Due to some unexpected delay at my end in getting the device, I have
</I>&gt;<i> not been able to test the patch you had sent.
</I>&gt;<i>
</I>&gt;<i> Meanwhile I am trying to emulate such a device by duplicating
</I>&gt;<i> descriptors of a available normal UVC device. I will share the details
</I>&gt;<i> once I am done.
</I>
Ok.

&gt;<i> Meanwhile I am also trying to add support for MPEG2 - TS, Here are the
</I>&gt;<i> few places which I thought would require update in the UVC driver code
</I>&gt;<i>
</I>&gt;<i> a.) uvc_driver.c - Format parsing support for Stream based payloads,
</I>&gt;<i> MPEG2-TS payload
</I>
That should be easy. You will have to modify the uvc_format structure to add 
MPEG2-TS specific fields (rearrange the existing fields using unions like in 
uvc_entity).

As stream-based formats don't have frame descriptors, you will also have to 
walk through the driver and modify code that assumes each format has at least 
one frame descriptor. You could work around that by creating a dummy frame 
descriptor, like for the DV format, but I think it's now time to get rid of 
the &quot;at least one frame per format&quot; requirement.

&gt;<i> b.) uvc_video.c - parameters negotiation, VS Interface Control
</I>&gt;<i> Selectors support.
</I>
VS controls (I suppose you're talking about the &quot;generate key frame&quot; and 
&quot;update frame segment&quot; controls) should be easy to support. They might require 
new V4L2 controls though. Parameters negotiation will be handled through V4L2 
controls, so that might require a rework of the current control handling code.

&gt;<i> c.) video streaming code to handle MaxVideoFrameSize, BmFramingInfo ?
</I>&gt;<i> this is the part I am bit jittery about.
</I>
I don't think that will be too difficult. Or maybe I don't see the difficulty 
yet :-)

Best regards,

Laurent Pinchart


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004964.html">[Linux-uvc-devel] Multiple streaming interface and MPEG2-TS	support?
</A></li>
	<LI>Next message: <A HREF="005007.html">[Linux-uvc-devel] Multiple streaming interface and MPEG2-TS	support?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4965">[ date ]</a>
              <a href="thread.html#4965">[ thread ]</a>
              <a href="subject.html#4965">[ subject ]</a>
              <a href="author.html#4965">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
