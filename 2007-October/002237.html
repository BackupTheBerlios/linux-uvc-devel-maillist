<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] Thoughts on software autofocus
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2007-October/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Thoughts%20on%20software%20autofocus&In-Reply-To=%3C20071005164904.GA9717%40vilya%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002231.html">
   <LINK REL="Next"  HREF="002248.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] Thoughts on software autofocus</H1>
    <B>Richard Atterer</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Thoughts%20on%20software%20autofocus&In-Reply-To=%3C20071005164904.GA9717%40vilya%3E"
       TITLE="[Linux-uvc-devel] Thoughts on software autofocus">richard at 2007.atterer.net
       </A><BR>
    <I>Fri Oct  5 18:49:05 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002231.html">[Linux-uvc-devel] Fwd: Re:  kopete
</A></li>
        <LI>Next message: <A HREF="002248.html">[Linux-uvc-devel] Software autofocus via dynamic controls API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2237">[ date ]</a>
              <a href="thread.html#2237">[ thread ]</a>
              <a href="subject.html#2237">[ subject ]</a>
              <a href="author.html#2237">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I bought a Logitech Quickcam Pro 9000 a couple of days ago and have been 
playing around with it. It works beautifully - many thanks indeed for your 
great work on the driver!! :-) I have had it running with motion for many 
hours without any major problems.

[BTW, is support planned for its &quot;software zoom&quot; capability? Under Windows, 
it looks like the camera is able to e.g. run at 960x720, but then only to 
transmit a 320x240-sized chunk of the image data to the computer. This 
could also be implemented entirely in the Windows driver, I don't know.]

One thing I've been wondering about is its software-controlled focus 
feature. From the message 
&lt;<A HREF="https://lists.berlios.de/pipermail/linux-uvc-devel/2007-August/002074.html">https://lists.berlios.de/pipermail/linux-uvc-devel/2007-August/002074.html</A>&gt; 
I gather that software-controlled focus should be possible, but looking at 
the driver and the output of &quot;luvcview -l&quot;, there is no trace of any focus 
controls - am I getting something wrong? I tried hacking luvcview and 
replacing the gamma control's V4L2_CID_GAMMA with V4L2_CID_FOCUS_ABSOLUTE, 
as described in the message after the one mentioned above, but only got an 
error when trying to change the setting.

I have been wondering how software autofocus could be implemented. A clean 
implementation would require the following:

1) An autofocus userspace program would need to access the image data 
alongside any program(s) which make use of the camera, in order to analyse 
it. But ATM, it seems that only one program can open the device at a time! 
:<i>-/
</I>
2) The autofocus program needs to be notified whenever any application 
accesses the camera. Otherwise, it would have to somehow poll for programs 
which actively use the camera (bad style nowadays), or even continuously 
perform autofocus all the time (even worse!).
Hmm, with the Quickcam 9000's type of focus, setting the focus to infinity 
whenever the camera is unused would also save power AIUI! The camera is 
rated for a full 500mA, it would be interesting to find out how much of 
this can be due to the autofocus.

Are there any easy answers to these two problems?

BTW, at the moment I doubt I can find the time to actually implement 
autofocus (as much fun as it'd be...)

Cheers,

  Richard

-- 
  __   _
  |_) /|  Richard Atterer     |  GnuPG key: 888354F7
  | \/&#175;|  <A HREF="http://atterer.net">http://atterer.net</A>  |  08A9 7B7D 3D13 3EF2 3D25  D157 79E6 F6DC 8883 54F7
  &#175; '` &#175;

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002231.html">[Linux-uvc-devel] Fwd: Re:  kopete
</A></li>
	<LI>Next message: <A HREF="002248.html">[Linux-uvc-devel] Software autofocus via dynamic controls API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2237">[ date ]</a>
              <a href="thread.html#2237">[ thread ]</a>
              <a href="subject.html#2237">[ subject ]</a>
              <a href="author.html#2237">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
