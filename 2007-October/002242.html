<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] How to record audio and video from a webcam?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2007-October/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20How%20to%20record%20audio%20and%20video%20from%20a%20webcam%3F&In-Reply-To=%3C344b9a2f0710061958y10bc4d28o2e759e99539e994d%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002252.html">
   <LINK REL="Next"  HREF="002244.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] How to record audio and video from a webcam?</H1>
    <B>Monkey D Luffy</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20How%20to%20record%20audio%20and%20video%20from%20a%20webcam%3F&In-Reply-To=%3C344b9a2f0710061958y10bc4d28o2e759e99539e994d%40mail.gmail.com%3E"
       TITLE="[Linux-uvc-devel] How to record audio and video from a webcam?">the.real.monkey.d.luffy at gmail.com
       </A><BR>
    <I>Sun Oct  7 04:58:41 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002252.html">[Linux-uvc-devel] Thoughts on software autofocus
</A></li>
        <LI>Next message: <A HREF="002244.html">[Linux-uvc-devel] How to record audio and video from a webcam?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2242">[ date ]</a>
              <a href="thread.html#2242">[ thread ]</a>
              <a href="subject.html#2242">[ subject ]</a>
              <a href="author.html#2242">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I would like to know how can I record audio and video simultaneously
from my Logitech QuickCam Fusion (046d:08ca), while the application
displays what is being recorded.
*exhales*
I've spent too many hours on this and still don't have things working.
I've tried a lot of programs but they're not working for me.

I have my webcam working with aMSN just fine, I have audio and video working.
I can also record video using luvcview, but it doesn't support audio.

---------------------------------------
xawtv - Doesn't work!
---------------------------------------
xawtv -v -c /dev/video1 -C /dev/dsp2 -nodga

/usr/bin/xawtv: line 10: [: (opcode:: binary operator expected
This is xawtv-3.95.dfsg.1, running on Linux/x86_64 (2.6.21-2-amd64)
Warning: Cannot convert string &quot;-c&quot; to type Int
X Error of failed request:  XF86DGANoDirectVideoMode
  Major opcode of failed request:  136 (XFree86-DGA)
  Minor opcode of failed request:  1 (XF86DGAGetVideoLL)
  Serial number of failed request:  13
  Current serial number in output stream:  13
v4l-conf had some trouble, trying to continue anyway
v4l2: WARNING: framebuffer size mismatch
v4l2: me=1280x1024 v4l=0x0
station &quot;/dev/video1&quot; not found


---------------------------------------
mencoder - Doesn't work!
---------------------------------------
mencoder -v -tv
device=/dev/video1:driver=v4l2:outfmt=yuy2:adevice=/dev/dsp2:forceaudio
-vc rawyuy2 -ovc lavc -lavcopts vcodec=mpeg4:vbitrate=320 -oac mp3lame
-lameopts cbr:br=128:mode=0 -o 3.avi <A HREF="tv://">tv://</A>

MEncoder dev-SVN-rUNKNOWN-4.2.1 (C) 2000-2007 MPlayer Team
CPU: Intel(R) Core(TM)2 CPU          6420  @ 2.13GHz (Family: 6,
Model: 15, Stepping: 6)
CPUflags: Type: 6 MMX: 1 MMX2: 1 3DNow: 0 3DNow2: 0 SSE: 1 SSE2: 1
Compiled for x86 CPU with extensions: MMX MMX2 SSE SSE2

Configuration: --prefix=/usr --confdir=/etc/mplayer
--datadir=/usr/share/mplayer --enable-xmga --enable-mga
--enable-joystick --enable-faad-external --disable-tremor-internal
--enable-libamr_nb --enable-libamr_wb --language=all
--enable-largefiles --enable-menu
--with-extraincdir=/usr/include/ffmpeg -I./libavformat -I./libswscale
-I./libavutil -I./libpostproc -I./libavcodec --enable-radio
--disable-libdvdcss-internal --enable-lirc --enable-radio-capture
--enable-png --enable-xvmc --with-xvmclib=XvMCW --enable-fbdev
--enable-directfb --enable-tdfxfb --enable-s3fb
init_freetype
get_path('font/font.desc') -&gt; '/home/kaizoku/.mplayer/font/font.desc'
font: can't open file: /home/kaizoku/.mplayer/font/font.desc
font: can't open file: /usr/share/mplayer/font/font.desc
Using MMX (with tiny bit MMX2) Optimized OnScreenDisplay
STREAM: [tv] <A HREF="tv://">tv://</A>
STREAM: Description: TV Input
STREAM: Author: Benjamin Zores, Albeu
STREAM: Comment:
success: format: 9  data: 0x0 - 0x0
TV file format detected.
Selected driver: v4l2
 name: Video 4 Linux 2 input
 author: Martin Olschewski &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">olschewski at zpr.uni-koeln.de</A>&gt;
 comment: first try, more to come ;-)
v4l2: ioctl get standard failed: Invalid argument
Selected device: UVC Camera (046d:08ca)
 Capabilites:  video capture  streaming
 supported norms:
 inputs: 0 = Camera 1;
 Current input: 0
 Format MJPEG  ( 0 bits, MJPEG): Unknown 0x47504a4d
 Format YUYV   (16 bits, YUV 4:2:2 (YUYV)): Packed YUY2
 Current format: YUYV
v4l2: set format: YUYV
v4l2: set input: 0
tv.c: norm_from_string(pal): Bogus norm parameter, setting default.
Selected norm : pal
v4l2: ioctl enum norm failed: Invalid argument
Error: Cannot set norm!
Selected input hasn't got a tuner!
==&gt; Found video stream: 0
v4l2: get format: YUYV
v4l2: get fps: nan
v4l2: get width: 640
v4l2: get height: 480
ioctl dsp getfmt: 0
Supported formats: 1f9
ioctl dsp setfmt: 0
ioctl dsp stereo: 0 (req: 1)
ioctl dsp speed: 0
ioctl dsp trigger: 0
trigger: 1
ioctl dsp trigger: 0
ioctl dsp getblocksize: 0
blocksize: 16384
v4l2: set audio samplerate: 44100
v4l2: get audio format: 9
==&gt; Found audio stream: 0
v4l2: get audio samplerate: 44100
v4l2: get audio samplesize: 2
v4l2: get audio channels: 2
  TV audio: 2 channels, 16 bits, 44100 Hz
Audio capture - buffer 256 blocks of 16384 bytes, skew average from 16 meas.
Floating point exception



---------------------------------------
vlc - Doesn't work!
---------------------------------------
[00000378] v4l demuxer error: cannot get channel infos (Invalid argument)

(.:1949): Gtk-CRITICAL **: gtk_container_remove: assertion
`GTK_IS_TOOLBAR (container) || widget-&gt;parent == GTK_WIDGET
(container)' failed
(.:1949): Gtk-CRITICAL **: gtk_container_remove: assertion
`GTK_IS_TOOLBAR (container) || widget-&gt;parent == GTK_WIDGET
(container)' failed
(.:1949): Gtk-CRITICAL **: gtk_container_remove: assertion
`GTK_IS_TOOLBAR (container) || widget-&gt;parent == GTK_WIDGET
(container)' failed
(.:1949): Gtk-CRITICAL **: gtk_container_remove: assertion
`GTK_IS_TOOLBAR (container) || widget-&gt;parent == GTK_WIDGET
(container)' failed
(.:1949): Gtk-CRITICAL **: gtk_container_remove: assertion
`GTK_IS_TOOLBAR (container) || widget-&gt;parent == GTK_WIDGET
(container)' failed
(.:1949): Gtk-CRITICAL **: gtk_container_remove: assertion
`GTK_IS_TOOLBAR (container) || widget-&gt;parent == GTK_WIDGET
(container)' failed
[00000287] main playlist: stopping playback
[00000287] main playlist error: refcount is -1, delaying again (id=287,type=-5)
[00000287] main playlist error: waited too long, cancelling
destruction (id=287,type=-5)



---------------------------------------
ffmpeg - Can't get audio and doesn't display what is being captured.
---------------------------------------
ffmpeg -v 100 -f oss -i /dev/dsp2  -f video4linux2 -s 320x240 -i
/dev/video1  -f m4v test.m4v




I've so many things that I lost track of it.
The bottom line is that I'm unable to capture audio+video from my webcam.

Any help is greatly appreciated.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002252.html">[Linux-uvc-devel] Thoughts on software autofocus
</A></li>
	<LI>Next message: <A HREF="002244.html">[Linux-uvc-devel] How to record audio and video from a webcam?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2242">[ date ]</a>
              <a href="thread.html#2242">[ thread ]</a>
              <a href="subject.html#2242">[ subject ]</a>
              <a href="author.html#2242">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
