From bug-track at fisher-privat.net  Thu Sep  1 08:34:07 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Thu, 01 Sep 2011 08:34:07 +0200
Subject: [Linux-uvc-devel] question about bayer sensors
In-Reply-To: <CAGGh5h3=ynNz++tqAM8g8P5orS7AoQbt5u2926fuNDmtGxVqqA@mail.gmail.com>
References: <4E5B3739.8050909@fisher-privat.net>
	<CAGGh5h3=ynNz++tqAM8g8P5orS7AoQbt5u2926fuNDmtGxVqqA@mail.gmail.com>
Message-ID: <4E5F275F.9030509@fisher-privat.net>

Thank you for your response,
i still have one more question. I found my webcam do some strange scale 
work. For example the image detalisation of 640x480 is equal to the 
image with 400x300 resolution. If i grab 800x600 and downscale it to 
640x480 i get better result.

Do you know how scale logic is done on webcams? Or probably where i can 
read about it?

Am 29.08.2011 09:58, schrieb jean-philippe francois:
> 2011/8/29 Alexey Fisher <bug-track at fisher-privat.net
> <mailto:bug-track at fisher-privat.net>>
>
>     Hallo all,
>     i know some people here was working with bayer raw data. I just
>     discovered this word for me, so i need some help to understand it
>     correctly.
>
>     Normal bayer based image sensor have separate pixel for each color.
>     Usually it made in 4 pixel squares, 1 - blue, 1 - red, 2 - green.
>     There are different ways to precess this data but most easiest one
>     will get one image pixel out of 4 physical pixels.
>     This also mean, if my (for example) webcam has physical sensor size
>     of 2MP, the real, not interpolated image data is MP*0.25.
>
>     1600x1200 (claimed resolution(2MP)) /2 = 800x600 (real/perfect image
>     resolution(0,5MP))
>
>     Is this correct?
>
>
> I don't think the word 'real' is useful here.
> If you treat pixel data as black and white data,
> you can see pixel size details. Of course this black
> and white image is polluted  by the fact that for a given
> visible light quantity, a green pixel won't give you the
> same value as a blue pixel, and the resulting image
> will look like a mozaic.
>
> If you take 4 pixels to make a half-sized image, you will
> miss some details. Not doing interpolation does not mean
> your image is more perfect or more real. It is just a suboptimal
> usage of data at your disposal.
>
> Let's suppose you could have three monochrome sensor with
> the same resolution as your webcam each taking the exact
> same image.
>
>  From this image, you can construct a subsampled image
> at half the resolution.
>
> With bayer data,  smaller details than in  the subsampled
> 'perfect' image are available, yet you can only have and
> approximation of the full resolution image.
>
> The better your interpolation, the closer you are from
> the 'perfect' image, for some definition of perfect.
>
>     Regards,
>             Alexey.
>     _________________________________________________
>     Linux-uvc-devel mailing list
>     Linux-uvc-devel at lists.berlios.__de
>     <mailto:Linux-uvc-devel at lists.berlios.de>
>     https://lists.berlios.de/__mailman/listinfo/linux-uvc-__devel
>     <https://lists.berlios.de/mailman/listinfo/linux-uvc-devel>
>
>



From bug-track at fisher-privat.net  Fri Sep  2 08:52:59 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Fri, 02 Sep 2011 08:52:59 +0200
Subject: [Linux-uvc-devel] question about bayer sensors
In-Reply-To: <CAGGh5h3=ynNz++tqAM8g8P5orS7AoQbt5u2926fuNDmtGxVqqA@mail.gmail.com>
References: <4E5B3739.8050909@fisher-privat.net>
	<CAGGh5h3=ynNz++tqAM8g8P5orS7AoQbt5u2926fuNDmtGxVqqA@mail.gmail.com>
Message-ID: <4E607D4B.9010705@fisher-privat.net>

Am 29.08.2011 09:58, schrieb jean-philippe francois:
> 2011/8/29 Alexey Fisher <bug-track at fisher-privat.net
> <mailto:bug-track at fisher-privat.net>>
>
>     Hallo all,
>     i know some people here was working with bayer raw data. I just
>     discovered this word for me, so i need some help to understand it
>     correctly.
>
>     Normal bayer based image sensor have separate pixel for each color.
>     Usually it made in 4 pixel squares, 1 - blue, 1 - red, 2 - green.
>     There are different ways to precess this data but most easiest one
>     will get one image pixel out of 4 physical pixels.
>     This also mean, if my (for example) webcam has physical sensor size
>     of 2MP, the real, not interpolated image data is MP*0.25.
>
>     1600x1200 (claimed resolution(2MP)) /2 = 800x600 (real/perfect image
>     resolution(0,5MP))
>
>     Is this correct?
>
>
> I don't think the word 'real' is useful here.
> If you treat pixel data as black and white data,
> you can see pixel size details. Of course this black
> and white image is polluted  by the fact that for a given
> visible light quantity, a green pixel won't give you the
> same value as a blue pixel, and the resulting image
> will look like a mozaic.
>
> If you take 4 pixels to make a half-sized image, you will
> miss some details. Not doing interpolation does not mean
> your image is more perfect or more real. It is just a suboptimal
> usage of data at your disposal.
>
> Let's suppose you could have three monochrome sensor with
> the same resolution as your webcam each taking the exact
> same image.
>
>  From this image, you can construct a subsampled image
> at half the resolution.
>
> With bayer data,  smaller details than in  the subsampled
> 'perfect' image are available, yet you can only have and
> approximation of the full resolution image.
>
> The better your interpolation, the closer you are from
> the 'perfect' image, for some definition of perfect.

Just to confirm that i understood, (i hope)
the method i described before called "Pixel Doubling Interpolation" - 
the worst what i can do we bayer data :). Bilinear Interpolation, 
Gradient Based Interpolation.. and more - are other methods ...




From mhenriquezs at terra.cl  Fri Sep  2 19:59:38 2011
From: mhenriquezs at terra.cl (mhenriquezs at terra.cl)
Date: Fri, 2 Sep 2011 13:59:38 -0400
Subject: [Linux-uvc-devel] spca1528 device..libv4l2: error turning on
	stream: Timer expired issue
Message-ID: <4DE2FA3000009D17@ms7.isc.cl>

Hi guys,

Not sure if is the right place to ask since this device use a gspca driver
and not sure if that driver is related to uvc or not, if not please point
me to the right place...

Recently I'm trying to make work a Sunplus crappy mini HD USB camera, lsusb
list this info related to the device:

Picture Transfer Protocol (PIMA 15470)
Bus 001 Device 015: ID 04fc:1528 Sunplus Technology Co., Ltd

 idVendor           0x04fc Sunplus Technology Co., Ltd
  idProduct          0x1528
  bcdDevice            1.00
  iManufacturer           1 Sunplus Co Ltd
  iProduct                2 General Image Devic
  iSerial                 0
...

Using the gspca-2.13.6 on my Fed12 (2.6.31.6-166.fc12.i686.PAE kernel), the
device is listed as /dev/video1 and no error doing a dmesg...but trying to
make it work, let say with xawtv, I get:

This is xawtv-3.95, running on Linux/i686 (2.6.31.6-166.fc12.i686.PAE)
xinerama 0: 1600x900+0+0
WARNING: No DGA direct video mode for this display.
/dev/video1 [v4l2]: no overlay support
v4l-conf had some trouble, trying to continue anyway
Warning: Missing charsets in String to FontSet conversion
Warning: Missing charsets in String to FontSet conversion
libv4l2: error turning on stream: Timer expired
ioctl: VIDIOC_STREAMON(int=1): Timer expired
ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument
v4l2: oops: select timeout

..or doing:
xawtv -c /dev/video1 -nodga -novm -norandr -noxv -noxv-video

I get:
ioctl: VIDIOC_STREAMON(int=1): Timer expired
ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument
v4l2: oops: select timeout
libv4l2: error turning on stream: Timer expired
libv4l2: error reading: Invalid argument


vlc, cheese, etc give me simillar "Timeout" related messages...

I read some post about simillar devices (but ID 12 or 14) that successfully
works with gspca, so it seems that this one is close to work but may be need
a fix on some timeout or something simillar on the driver...

Any clue of what can be done?..any sugestions or right place to ask?, do
you need any other info to help to digg into the problem?

Thanks a lot.

Mauricio





From uhkeller at googlemail.com  Sat Sep  3 15:00:37 2011
From: uhkeller at googlemail.com (Ulrich Keller)
Date: Sat, 03 Sep 2011 15:00:37 +0200
Subject: [Linux-uvc-devel] 145f:015b no longer working
Message-ID: <1315054839.2892.6.camel@localhost.localdomain>

Hello,

I have a Trust-branded webcam (device ID 145f:015b) that used to work
perfectly with kernels up to 2.6.38 (I think), but now it doesn't even
show up in lsusb after plugging it in. The webcam still works with a
Windows XP system without problems.

Here's what appears in dmesg after plugging it in:

[  109.820062] usb 1-5: new high speed USB device number 2 using
ehci_hcd
[  110.246197] Linux media interface: v0.10
[  110.337144] Linux video capture interface: v2.00
[  111.753921] uvcvideo: Found UVC 1.00 device Trust 2MP Auto Focus
Webcam  (145f:015b)
[  111.754046] usbcore: registered new interface driver snd-usb-audio
[  112.116121] input: Trust 2MP Auto Focus Webcam
as /devices/pci0000:00/0000:00:1d.7/usb1/1-5/1-5:1.0/input/input9
[  112.116257] usbcore: registered new interface driver uvcvideo
[  112.116262] USB Video Class driver (v1.1.0)
[  112.594799] usb 1-5: USB disconnect, device number 2
[  112.598627] uvcvideo: Failed to set UVC commit control : -71 (exp.
26).
[  112.598637] uvcvideo 1-5:1.1: resume error -5
[  112.598924] 2:3:7: usb_set_interface failed
[  112.599043] 2:3:7: usb_set_interface failed
[  112.599184] 2:3:7: usb_set_interface failed
[  112.599783] 2:3:7: usb_set_interface failed
[  112.600995] 2:3:7: usb_set_interface failed
[  112.601650] 2:3:7: usb_set_interface failed
[  112.601765] 2:3:7: usb_set_interface failed
[  112.601903] 2:3:7: usb_set_interface failed
[  112.602387] 2:3:7: usb_set_interface failed
[  112.602899] 2:3:7: usb_set_interface failed
[  112.603783] 2:3:7: usb_set_interface failed
[  112.603944] 2:3:7: usb_set_interface failed
[  112.604245] 2:3:7: usb_set_interface failed
[  112.604845] 2:3:7: usb_set_interface failed
[  112.605496] 2:3:7: usb_set_interface failed
[  112.606821] 2:3:7: usb_set_interface failed
[  112.606987] 2:3:7: usb_set_interface failed
[  112.607308] 2:3:7: usb_set_interface failed
[  112.607919] 2:3:7: usb_set_interface failed
[  112.608585] 2:3:7: usb_set_interface failed

I'm using Arch Linux 32-bit, Kernel 3.0.4.

Kind regards,

Uli



From bug-track at fisher-privat.net  Sat Sep  3 16:14:35 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Sat, 03 Sep 2011 16:14:35 +0200
Subject: [Linux-uvc-devel] 145f:015b no longer working
In-Reply-To: <1315054839.2892.6.camel@localhost.localdomain>
References: <1315054839.2892.6.camel@localhost.localdomain>
Message-ID: <4E62364B.6080906@fisher-privat.net>

Hi,
if it's and regression then it will be better to bisect it. Use:
git bisect start

for more informateion reed:
man git bisect

The reason for your error can be anything, inclusive usb subsystem. How 
about disabling usbsuspend for this device?


Am 03.09.2011 15:00, schrieb Ulrich Keller:
> Hello,
>
> I have a Trust-branded webcam (device ID 145f:015b) that used to work
> perfectly with kernels up to 2.6.38 (I think), but now it doesn't even
> show up in lsusb after plugging it in. The webcam still works with a
> Windows XP system without problems.
>
> Here's what appears in dmesg after plugging it in:
>
> [  109.820062] usb 1-5: new high speed USB device number 2 using
> ehci_hcd
> [  110.246197] Linux media interface: v0.10
> [  110.337144] Linux video capture interface: v2.00
> [  111.753921] uvcvideo: Found UVC 1.00 device Trust 2MP Auto Focus
> Webcam  (145f:015b)
> [  111.754046] usbcore: registered new interface driver snd-usb-audio
> [  112.116121] input: Trust 2MP Auto Focus Webcam
> as /devices/pci0000:00/0000:00:1d.7/usb1/1-5/1-5:1.0/input/input9
> [  112.116257] usbcore: registered new interface driver uvcvideo
> [  112.116262] USB Video Class driver (v1.1.0)
> [  112.594799] usb 1-5: USB disconnect, device number 2
> [  112.598627] uvcvideo: Failed to set UVC commit control : -71 (exp.
> 26).
> [  112.598637] uvcvideo 1-5:1.1: resume error -5
> [  112.598924] 2:3:7: usb_set_interface failed
> [  112.599043] 2:3:7: usb_set_interface failed
> [  112.599184] 2:3:7: usb_set_interface failed
> [  112.599783] 2:3:7: usb_set_interface failed
> [  112.600995] 2:3:7: usb_set_interface failed
> [  112.601650] 2:3:7: usb_set_interface failed
> [  112.601765] 2:3:7: usb_set_interface failed
> [  112.601903] 2:3:7: usb_set_interface failed
> [  112.602387] 2:3:7: usb_set_interface failed
> [  112.602899] 2:3:7: usb_set_interface failed
> [  112.603783] 2:3:7: usb_set_interface failed
> [  112.603944] 2:3:7: usb_set_interface failed
> [  112.604245] 2:3:7: usb_set_interface failed
> [  112.604845] 2:3:7: usb_set_interface failed
> [  112.605496] 2:3:7: usb_set_interface failed
> [  112.606821] 2:3:7: usb_set_interface failed
> [  112.606987] 2:3:7: usb_set_interface failed
> [  112.607308] 2:3:7: usb_set_interface failed
> [  112.607919] 2:3:7: usb_set_interface failed
> [  112.608585] 2:3:7: usb_set_interface failed
>
> I'm using Arch Linux 32-bit, Kernel 3.0.4.
>
> Kind regards,
>
> Uli
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel



From michaeltandy at gmail.com  Mon Sep  5 16:19:00 2011
From: michaeltandy at gmail.com (Michael Tandy)
Date: Mon, 5 Sep 2011 15:19:00 +0100
Subject: [Linux-uvc-devel] Sweex WC061 HD Webcam Sliver
Message-ID: <CAHGSkqgyRgbt_G5MB6DewazJML8B1OkGyF0yP=qqKoRm28FapQ@mail.gmail.com>

Hi Linux-uvc-devel!

I have a Sweex WC061 UVC webcam [1] I'm looking to capture mjpeg video
from; the camera reports it supports MJPEG, but I'm having trouble
with it.

According to VIDIOC_ENUM_FMT it supports YUV 4:2:2 (0x56595559, YUYV)
and MJPEG (0x47504a4d MJPG) and according to the manufacturer's spec
sheet [2] the camera supports MJPEG.

When I use YUV capture the camera works OK, but when I use MJPEG the
V4L2 video capture example program [3] reports a select timeout. If I
set the select timeout to 30 seconds or so I get some MJPEG-like data
from the camera, but nothing that seems to make sense; I get some JPEG
headers, but no end-of-file marker, and what data is present doesn't
properly decode as MJPEG.

On the other hand I have a Microsoft Lifecam Cinema HD that streams
MJPEG just fine so if there's an error on my end I'm not sure what it
is.

Can anyone advise me on what the problem might be, or is there anyone
who would be able to diagnose the problem in exchange for a free
webcam?

Thanks,

Michael Tandy

[1] VID 0x177f, PID 0x0060
[2] http://www.sweex.com/en/assortiment/sound-vision/webcams/WC061/specificaties/
[3] http://v4l2spec.bytesex.org/spec/capture-example.html


From bug-track at fisher-privat.net  Mon Sep  5 17:31:09 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Mon, 05 Sep 2011 17:31:09 +0200
Subject: [Linux-uvc-devel] spca1528 device..libv4l2: error turning on
 stream: Timer expired issue
In-Reply-To: <4DE2FA3000009D17@ms7.isc.cl>
References: <4DE2FA3000009D17@ms7.isc.cl>
Message-ID: <4E64EB3D.8020205@fisher-privat.net>

According to this post you have no luck:
http://www.spinics.net/lists/linux-media/msg19737.html

> Bad news, the images are compressed by an unknown algorithm (unknown
> from Linux point of vue). The decompression function could be found in
> some part of the ms-win driver, but:
> - first, I have no time to search and disassemble this function,
> - then, I did have this problem with an other webcam (17a1:0118), and
>   after searching for a long time, nobody could find the function, and
>   the driver is in stand-by since 2 years,
> - eventually, is this legal?
>
> All I can do is to code the driver and let you or anyone find the
> decompression function...
>
> Best regards.



Am 02.09.2011 19:59, schrieb mhenriquezs at terra.cl:
> Hi guys,
>
> Not sure if is the right place to ask since this device use a gspca driver
> and not sure if that driver is related to uvc or not, if not please point
> me to the right place...
>
> Recently I'm trying to make work a Sunplus crappy mini HD USB camera, lsusb
> list this info related to the device:
>
> Picture Transfer Protocol (PIMA 15470)
> Bus 001 Device 015: ID 04fc:1528 Sunplus Technology Co., Ltd
>
>   idVendor           0x04fc Sunplus Technology Co., Ltd
>    idProduct          0x1528
>    bcdDevice            1.00
>    iManufacturer           1 Sunplus Co Ltd
>    iProduct                2 General Image Devic
>    iSerial                 0
> ...
>
> Using the gspca-2.13.6 on my Fed12 (2.6.31.6-166.fc12.i686.PAE kernel), the
> device is listed as /dev/video1 and no error doing a dmesg...but trying to
> make it work, let say with xawtv, I get:
>
> This is xawtv-3.95, running on Linux/i686 (2.6.31.6-166.fc12.i686.PAE)
> xinerama 0: 1600x900+0+0
> WARNING: No DGA direct video mode for this display.
> /dev/video1 [v4l2]: no overlay support
> v4l-conf had some trouble, trying to continue anyway
> Warning: Missing charsets in String to FontSet conversion
> Warning: Missing charsets in String to FontSet conversion
> libv4l2: error turning on stream: Timer expired
> ioctl: VIDIOC_STREAMON(int=1): Timer expired
> ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument
> v4l2: oops: select timeout
>
> ..or doing:
> xawtv -c /dev/video1 -nodga -novm -norandr -noxv -noxv-video
>
> I get:
> ioctl: VIDIOC_STREAMON(int=1): Timer expired
> ioctl: VIDIOC_S_STD(std=0x0 []): Invalid argument
> v4l2: oops: select timeout
> libv4l2: error turning on stream: Timer expired
> libv4l2: error reading: Invalid argument
>
>
> vlc, cheese, etc give me simillar "Timeout" related messages...
>
> I read some post about simillar devices (but ID 12 or 14) that successfully
> works with gspca, so it seems that this one is close to work but may be need
> a fix on some timeout or something simillar on the driver...
>
> Any clue of what can be done?..any sugestions or right place to ask?, do
> you need any other info to help to digg into the problem?
>
> Thanks a lot.
>
> Mauricio
>
>
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel



From bug-track at fisher-privat.net  Mon Sep  5 17:48:42 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Mon, 05 Sep 2011 17:48:42 +0200
Subject: [Linux-uvc-devel] uvc header question
In-Reply-To: <201108310032.51561.laurent.pinchart@ideasonboard.com>
References: <4E55FD4A.9080906@fisher-privat.net>
	<201108310032.51561.laurent.pinchart@ideasonboard.com>
Message-ID: <4E64EF5A.4050608@fisher-privat.net>

Am 31.08.2011 00:32, schrieb Laurent Pinchart:
> Hi Alexey,
>
> On Thursday 25 August 2011 09:44:10 Alexey Fisher wrote:
>> Hi Laurent,
>>
>> are there any reason why uvc_video_decode_start do not do precise header
>> size checks? Are there many cameras with broken header size too?
>
> How precise do you mean ? The driver currently doesn't use much of the header,
> so it just makes sure that the header size is smaller than or equal to the
> packet size, and that it's at least 2 bytes long.
>
>> I send you patch on what i work now to catch streams with fragmented
>> packets.. what do you think about it? Will you apply some thing like this?
>
> I'm not sure about that. Webcams that would require something like that are so
> broken that I'm tempted to consider them as not UVC-compliant. They should be
> returned to vendors with a loud complaint.
>
> Your patch might help, but the sad story is that it can't completely fix the
> streams. There's always a chance that fragmented packets that contains no
> header will start with data that looks like a header. You won't be able to
> find a buller-proof solution.

You are right,
the idea is not to show definitely broken frames. If there is some thing 
what we can't filter, is ok. we did our best.

I just thinking about build in uvc compliance tester insight of the 
module. Some thing what users can use right in shop or at home before 14 
day return guarantee.
You enables compliance test and it print results in in dmesg.  One of 
test should be header check, error/drop rate, and so on.



From bug-track at fisher-privat.net  Mon Sep  5 20:53:39 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Mon, 05 Sep 2011 20:53:39 +0200
Subject: [Linux-uvc-devel] Sweex WC061 HD Webcam Sliver
In-Reply-To: <CAHGSkqgyRgbt_G5MB6DewazJML8B1OkGyF0yP=qqKoRm28FapQ@mail.gmail.com>
References: <CAHGSkqgyRgbt_G5MB6DewazJML8B1OkGyF0yP=qqKoRm28FapQ@mail.gmail.com>
Message-ID: <4E651AB3.1040100@fisher-privat.net>

Hi,

you do not need to send any webcams, (but if you will, i'll accept it :D)
better attach output of lsusb -vd 177f:0060

, also enable trace for uvc module, reporoduce this error and attach the 
dmesg as well:
sudo rmmod uvcvideo && sudo modprobe uvcvideo trace=0xfff

Am 05.09.2011 16:19, schrieb Michael Tandy:
> Hi Linux-uvc-devel!
>
> I have a Sweex WC061 UVC webcam [1] I'm looking to capture mjpeg video
> from; the camera reports it supports MJPEG, but I'm having trouble
> with it.
>
> According to VIDIOC_ENUM_FMT it supports YUV 4:2:2 (0x56595559, YUYV)
> and MJPEG (0x47504a4d MJPG) and according to the manufacturer's spec
> sheet [2] the camera supports MJPEG.
>
> When I use YUV capture the camera works OK, but when I use MJPEG the
> V4L2 video capture example program [3] reports a select timeout. If I
> set the select timeout to 30 seconds or so I get some MJPEG-like data
> from the camera, but nothing that seems to make sense; I get some JPEG
> headers, but no end-of-file marker, and what data is present doesn't
> properly decode as MJPEG.
>
> On the other hand I have a Microsoft Lifecam Cinema HD that streams
> MJPEG just fine so if there's an error on my end I'm not sure what it
> is.
>
> Can anyone advise me on what the problem might be, or is there anyone
> who would be able to diagnose the problem in exchange for a free
> webcam?
>
> Thanks,
>
> Michael Tandy
>
> [1] VID 0x177f, PID 0x0060
> [2] http://www.sweex.com/en/assortiment/sound-vision/webcams/WC061/specificaties/
> [3] http://v4l2spec.bytesex.org/spec/capture-example.html
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel



From michaeltandy at gmail.com  Tue Sep  6 12:53:04 2011
From: michaeltandy at gmail.com (Michael Tandy)
Date: Tue, 6 Sep 2011 11:53:04 +0100
Subject: [Linux-uvc-devel] Sweex WC061 HD Webcam Sliver
In-Reply-To: <4E651AB3.1040100@fisher-privat.net>
References: <CAHGSkqgyRgbt_G5MB6DewazJML8B1OkGyF0yP=qqKoRm28FapQ@mail.gmail.com>
	<4E651AB3.1040100@fisher-privat.net>
Message-ID: <CAHGSkqjee4DbDMnOKsrfp1Haih_bybkGSvWhPi_2YmraDa4rpQ@mail.gmail.com>

Hi Alexey!

More detail: Once in a while the select succeeds within 2 seconds, in
which case I get JPEG data that makes sense. In other cases, select
takes more like 30 seconds and the data is nonsense. It seemed to me
like it worked right more often once I turned on debug messages for
the kernel module, but that might just be my perception.

As suggested, I've attached the lsusb output.

The dmesg output upon connection of the webcam is as follows:

[96957.382850] usbcore: deregistering interface driver uvcvideo
[96957.395821] usbcore: registered new interface driver uvcvideo
[96957.397064] USB Video Class driver (v0.1.0)
[96965.996805] usb 2-1.4: new high speed USB device using ehci_hcd and address 8
[96966.150169] usb 2-1.4: configuration #1 chosen from 1 choice
[96966.151211] uvcvideo: Found UVC 1.00 device WC060 Series HD Webcam
(177f:0060)
[96966.153319] input: WC060 Series HD Webcam as
/devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.4/2-1.4:1.0/input/input10
[97150.896506] usb 2-1.4: USB disconnect, address 8
[99301.000494] usbcore: deregistering interface driver uvcvideo
[99301.013736] uvcvideo: Adding mapping Brightness to control
00000000-0000-0000-0000-000000000101/2.
[99301.013744] uvcvideo: Adding mapping Contrast to control
00000000-0000-0000-0000-000000000101/3.
[99301.013750] uvcvideo: Adding mapping Hue to control
00000000-0000-0000-0000-000000000101/6.
[99301.013755] uvcvideo: Adding mapping Saturation to control
00000000-0000-0000-0000-000000000101/7.
[99301.013761] uvcvideo: Adding mapping Sharpness to control
00000000-0000-0000-0000-000000000101/8.
[99301.013767] uvcvideo: Adding mapping Gamma to control
00000000-0000-0000-0000-000000000101/9.
[99301.013773] uvcvideo: Adding mapping Backlight Compensation to
control 00000000-0000-0000-0000-000000000101/1.
[99301.013779] uvcvideo: Adding mapping Gain to control
00000000-0000-0000-0000-000000000101/4.
[99301.013785] uvcvideo: Adding mapping Power Line Frequency to
control 00000000-0000-0000-0000-000000000101/5.
[99301.013791] uvcvideo: Adding mapping Hue, Auto to control
00000000-0000-0000-0000-000000000101/16.
[99301.013798] uvcvideo: Adding mapping Exposure, Auto to control
00000000-0000-0000-0000-000000000001/2.
[99301.013804] uvcvideo: Adding mapping Exposure, Auto Priority to
control 00000000-0000-0000-0000-000000000001/3.
[99301.013811] uvcvideo: Adding mapping Exposure (Absolute) to control
00000000-0000-0000-0000-000000000001/4.
[99301.013818] uvcvideo: Adding mapping White Balance Temperature,
Auto to control 00000000-0000-0000-0000-000000000101/11.
[99301.013824] uvcvideo: Adding mapping White Balance Temperature to
control 00000000-0000-0000-0000-000000000101/10.
[99301.013830] uvcvideo: Adding mapping White Balance Component, Auto
to control 00000000-0000-0000-0000-000000000101/13.
[99301.013837] uvcvideo: Adding mapping White Balance Blue Component
to control 00000000-0000-0000-0000-000000000101/12.
[99301.013843] uvcvideo: Adding mapping White Balance Red Component to
control 00000000-0000-0000-0000-000000000101/12.
[99301.013850] uvcvideo: Adding mapping Focus (absolute) to control
00000000-0000-0000-0000-000000000001/6.
[99301.013858] uvcvideo: Adding mapping Focus, Auto to control
00000000-0000-0000-0000-000000000001/8.
[99301.013865] uvcvideo: Adding mapping Zoom, Absolute to control
00000000-0000-0000-0000-000000000001/11.
[99301.013872] uvcvideo: Adding mapping Zoom, Continuous to control
00000000-0000-0000-0000-000000000001/12.
[99301.013881] uvcvideo: Adding mapping Privacy to control
00000000-0000-0000-0000-000000000001/17.
[99301.013937] usbcore: registered new interface driver uvcvideo
[99301.013943] USB Video Class driver (v0.1.0)
[99305.593793] usb 2-1.4: new high speed USB device using ehci_hcd and address 9
[99305.747501] usb 2-1.4: configuration #1 chosen from 1 choice
[99305.748419] uvcvideo: Probing generic UVC device 1.4
[99305.748432] uvcvideo: Found format YUV 4:2:2 (YUYV).
[99305.748436] uvcvideo: - 640x480 (30.0 fps)
[99305.748439] uvcvideo: - 352x288 (30.0 fps)
[99305.748443] uvcvideo: - 320x240 (30.0 fps)
[99305.748517] uvcvideo: - 176x144 (30.0 fps)
[99305.748520] uvcvideo: - 160x120 (30.0 fps)
[99305.748523] uvcvideo: - 800x600 (10.0 fps)
[99305.748526] uvcvideo: - 1280x960 (7.5 fps)
[99305.748529] uvcvideo: - 1280x1024 (7.5 fps)
[99305.748533] uvcvideo: - 1600x1200 (5.0 fps)
[99305.748536] uvcvideo: Found format MJPEG.
[99305.748540] uvcvideo: - 640x480 (14.9 fps)
[99305.748544] uvcvideo: - 352x288 (14.9 fps)
[99305.748547] uvcvideo: - 320x240 (14.9 fps)
[99305.748551] uvcvideo: - 176x144 (14.9 fps)
[99305.748555] uvcvideo: - 160x120 (14.9 fps)
[99305.748559] uvcvideo: - 800x600 (14.9 fps)
[99305.748562] uvcvideo: - 1280x960 (14.9 fps)
[99305.748566] uvcvideo: - 1280x1024 (14.9 fps)
[99305.748570] uvcvideo: - 1600x1200 (14.9 fps)
[99305.748577] uvcvideo: Found a Status endpoint (addr 81).
[99305.748582] uvcvideo: Found UVC 1.00 device WC060 Series HD Webcam
(177f:0060)
[99305.748592] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/2 to device 1.4 entity 2
[99305.748599] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/3 to device 1.4 entity 2
[99305.748605] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/7 to device 1.4 entity 2
[99305.748612] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/8 to device 1.4 entity 2
[99305.748619] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/9 to device 1.4 entity 2
[99305.748625] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/10 to device 1.4 entity 2
[99305.748632] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/1 to device 1.4 entity 2
[99305.748638] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/4 to device 1.4 entity 2
[99305.748645] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/5 to device 1.4 entity 2
[99305.748652] uvcvideo: Added control
00000000-0000-0000-0000-000000000101/11 to device 1.4 entity 2
[99305.748660] uvcvideo: Added control
00000000-0000-0000-0000-000000000001/2 to device 1.4 entity 1
[99305.748666] uvcvideo: Added control
00000000-0000-0000-0000-000000000001/4 to device 1.4 entity 1
[99305.748674] uvcvideo: Scanning UVC chain: OT 3 <- PU 2 <- IT 1
[99305.748680]  (-> XU 4)
[99305.748685] uvcvideo: Found a valid video chain (1 -> 3).
[99305.750665] input: WC060 Series HD Webcam as
/devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.4/2-1.4:1.0/input/input11
[99305.750733] uvcvideo: UVC device initialized.
[99305.754524] uvcvideo: uvc_v4l2_open
[99305.754561] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCAP)
[99305.754611] uvcvideo: uvc_v4l2_release
[99305.767071] uvcvideo: uvc_v4l2_open
[99305.767107] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCAP)
[99305.768164] uvcvideo: uvc_v4l2_release

Here is the dmesg output when the select fails and the data is nonsense:

[99317.533906] uvcvideo: uvc_v4l2_open
[99317.533960] uvcvideo: uvc_v4l2_ioctl(VIDIOC_ENUM_FMT)
[99317.533989] uvcvideo: uvc_v4l2_ioctl(VIDIOC_ENUM_FMT)
[99317.533997] uvcvideo: uvc_v4l2_ioctl(VIDIOC_ENUM_FMT)
[99317.534007] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCAP)
[99317.534025] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.535758] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.537286] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.538789] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.538796] uvcvideo: Control 0x00980903 not found.
[99317.538799] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.538803] uvcvideo: Control 0x00980904 not found.
[99317.538805] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.538808] uvcvideo: Control 0x00980905 not found.
[99317.538810] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.538814] uvcvideo: Control 0x00980906 not found.
[99317.538816] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.538819] uvcvideo: Control 0x00980907 not found.
[99317.538821] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.538824] uvcvideo: Control 0x00980908 not found.
[99317.538826] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.538830] uvcvideo: Control 0x00980909 not found.
[99317.538832] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.538835] uvcvideo: Control 0x0098090a not found.
[99317.538837] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.538840] uvcvideo: Control 0x0098090b not found.
[99317.538842] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.539284] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.539291] uvcvideo: Control 0x0098090d not found.
[99317.539294] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.539298] uvcvideo: Control 0x0098090e not found.
[99317.539300] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.539303] uvcvideo: Control 0x0098090f not found.
[99317.539305] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.540778] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.540785] uvcvideo: Control 0x00980911 not found.
[99317.540787] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.540791] uvcvideo: Control 0x00980912 not found.
[99317.540793] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.542278] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.542285] uvcvideo: Control 0x00980914 not found.
[99317.542287] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.542291] uvcvideo: Control 0x00980915 not found.
[99317.542293] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.542296] uvcvideo: Control 0x00980916 not found.
[99317.542298] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.542302] uvcvideo: Control 0x00980917 not found.
[99317.542304] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.542631] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.542637] uvcvideo: Control 0x00980919 not found.
[99317.542640] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.546515] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.548013] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.549510] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.549517] uvcvideo: Control 0x0098091d not found.
[99317.549519] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.549523] uvcvideo: Control 0x0098091e not found.
[99317.549525] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.549529] uvcvideo: Control 0x0098091f not found.
[99317.549531] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.549534] uvcvideo: Control 0x00980920 not found.
[99317.549536] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99317.549539] uvcvideo: Control 0x00980921 not found.
[99317.549545] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCAP)
[99317.549550] uvcvideo: uvc_v4l2_ioctl(VIDIOC_CROPCAP)
[99317.549554] uvcvideo: uvc_v4l2_ioctl(VIDIOC_S_CROP)
[99317.549557] uvcvideo: uvc_v4l2_ioctl(VIDIOC_S_FMT)
[99317.549563] uvcvideo: Trying format 0x47504a4d (MJPG): 640x480.
[99317.549567] uvcvideo: Using default frame interval 66666.7 us (14.9 fps).
[99317.552592] uvcvideo: uvc_v4l2_ioctl(VIDIOC_REQBUFS)
[99317.552968] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYBUF)
[99317.552981] uvcvideo: uvc_v4l2_mmap
[99317.553031] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYBUF)
[99317.553038] uvcvideo: uvc_v4l2_mmap
[99317.553107] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYBUF)
[99317.553115] uvcvideo: uvc_v4l2_mmap
[99317.553157] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYBUF)
[99317.553164] uvcvideo: uvc_v4l2_mmap
[99317.553205] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99317.553210] uvcvideo: Queuing buffer 0.
[99317.553214] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99317.553218] uvcvideo: Queuing buffer 1.
[99317.553222] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99317.553227] uvcvideo: Queuing buffer 2.
[99317.553230] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99317.553234] uvcvideo: Queuing buffer 3.
[99317.553237] uvcvideo: uvc_v4l2_ioctl(VIDIOC_STREAMON)
[99317.554747] uvcvideo: uvc_v4l2_poll
[99333.472385] uvcvideo: Dropping payload (error bit set).
[99333.472389] uvcvideo: Frame complete (EOF found).
[99333.472391] uvcvideo: EOF in empty payload.
[99333.472429] uvcvideo: uvc_v4l2_poll
[99333.472438] uvcvideo: uvc_v4l2_ioctl(VIDIOC_DQBUF)
[99333.472447] uvcvideo: Dequeuing buffer 0 (3, 2676 bytes).
[99333.507755] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99333.507760] uvcvideo: Queuing buffer 0.
[99333.507763] uvcvideo: uvc_v4l2_poll
[99333.623956] uvcvideo: Dropping payload (error bit set).
[99333.623959] uvcvideo: Frame complete (EOF found).
[99333.623961] uvcvideo: EOF in empty payload.
[99333.623984] uvcvideo: uvc_v4l2_poll
[99333.623991] uvcvideo: uvc_v4l2_ioctl(VIDIOC_DQBUF)
[99333.623997] uvcvideo: Dequeuing buffer 1 (3, 5352 bytes).
[99333.653368] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99333.653374] uvcvideo: Queuing buffer 1.
[99333.653378] uvcvideo: uvc_v4l2_poll
[99333.727576] uvcvideo: Dropping payload (error bit set).
[99333.727580] uvcvideo: Frame complete (EOF found).
[99333.727582] uvcvideo: EOF in empty payload.
[99333.727608] uvcvideo: uvc_v4l2_poll
[99333.727616] uvcvideo: uvc_v4l2_ioctl(VIDIOC_DQBUF)
[99333.727622] uvcvideo: Dequeuing buffer 2 (3, 3560 bytes).
[99333.757079] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99333.757086] uvcvideo: Queuing buffer 2.
[99333.757089] uvcvideo: uvc_v4l2_poll
[99333.827467] uvcvideo: Dropping payload (error bit set).
[99333.827472] uvcvideo: Frame complete (EOF found).
[99333.827474] uvcvideo: EOF in empty payload.
[99333.827495] uvcvideo: uvc_v4l2_poll
[99333.827502] uvcvideo: uvc_v4l2_ioctl(VIDIOC_DQBUF)
[99333.827508] uvcvideo: Dequeuing buffer 3 (3, 5352 bytes).
[99333.852693] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99333.852698] uvcvideo: Queuing buffer 3.
[99333.852701] uvcvideo: uvc_v4l2_poll
[99333.931169] uvcvideo: Dropping payload (error bit set).
[99333.931174] uvcvideo: Frame complete (EOF found).
[99333.931177] uvcvideo: EOF in empty payload.
[99333.931201] uvcvideo: uvc_v4l2_poll
[99333.931208] uvcvideo: uvc_v4l2_ioctl(VIDIOC_DQBUF)
[99333.931214] uvcvideo: Dequeuing buffer 0 (3, 3560 bytes).
[99333.954077] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99333.954083] uvcvideo: Queuing buffer 0.
[99333.954086] uvcvideo: uvc_v4l2_poll
[99334.030983] uvcvideo: Dropping payload (error bit set).
[99334.030987] uvcvideo: Frame complete (EOF found).
[99334.030990] uvcvideo: EOF in empty payload.
[99334.031017] uvcvideo: uvc_v4l2_poll
[99334.031025] uvcvideo: uvc_v4l2_ioctl(VIDIOC_DQBUF)
[99334.031032] uvcvideo: Dequeuing buffer 1 (3, 5352 bytes).
[99334.055627] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99334.055634] uvcvideo: Queuing buffer 1.
[99334.055637] uvcvideo: uvc_v4l2_poll
[99334.134694] uvcvideo: Dropping payload (error bit set).
[99334.134699] uvcvideo: Frame complete (EOF found).
[99334.134701] uvcvideo: EOF in empty payload.
[99334.134725] uvcvideo: uvc_v4l2_poll
[99334.134733] uvcvideo: uvc_v4l2_ioctl(VIDIOC_DQBUF)
[99334.134739] uvcvideo: Dequeuing buffer 2 (3, 3560 bytes).
[99334.162382] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99334.162388] uvcvideo: Queuing buffer 2.
[99334.162391] uvcvideo: uvc_v4l2_poll
[99334.234421] uvcvideo: Dropping payload (error bit set).
[99334.234425] uvcvideo: Frame complete (EOF found).
[99334.234426] uvcvideo: EOF in empty payload.
[99334.234439] uvcvideo: uvc_v4l2_poll
[99334.234446] uvcvideo: uvc_v4l2_ioctl(VIDIOC_DQBUF)
[99334.234451] uvcvideo: Dequeuing buffer 3 (3, 5352 bytes).
[99334.258289] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99334.258295] uvcvideo: Queuing buffer 3.
[99334.258298] uvcvideo: uvc_v4l2_poll
[99334.338160] uvcvideo: Dropping payload (error bit set).
[99334.338166] uvcvideo: Frame complete (EOF found).
[99334.338168] uvcvideo: EOF in empty payload.
[99334.338190] uvcvideo: uvc_v4l2_poll
[99334.338198] uvcvideo: uvc_v4l2_ioctl(VIDIOC_DQBUF)
[99334.338205] uvcvideo: Dequeuing buffer 0 (3, 3560 bytes).
[99334.361821] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99334.361827] uvcvideo: Queuing buffer 0.
[99334.361830] uvcvideo: uvc_v4l2_poll
[99334.437932] uvcvideo: Dropping payload (error bit set).
[99334.437936] uvcvideo: Frame complete (EOF found).
[99334.437938] uvcvideo: EOF in empty payload.
[99334.437958] uvcvideo: uvc_v4l2_poll
[99334.437965] uvcvideo: uvc_v4l2_ioctl(VIDIOC_DQBUF)
[99334.437971] uvcvideo: Dequeuing buffer 1 (3, 5352 bytes).
[99334.463043] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99334.463049] uvcvideo: Queuing buffer 1.
[99334.463051] uvcvideo: uvc_v4l2_ioctl(VIDIOC_STREAMOFF)
[99334.482327] uvcvideo: uvc_v4l2_release

On the other hand when the select succeeds within 2 seconds and the
data makes sense, the dmesg output is:

[99479.052781] uvcvideo: uvc_v4l2_open
[99479.052833] uvcvideo: uvc_v4l2_ioctl(VIDIOC_ENUM_FMT)
[99479.052863] uvcvideo: uvc_v4l2_ioctl(VIDIOC_ENUM_FMT)
[99479.052871] uvcvideo: uvc_v4l2_ioctl(VIDIOC_ENUM_FMT)
[99479.052880] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCAP)
[99479.052899] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.054493] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.055989] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.057481] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.057488] uvcvideo: Control 0x00980903 not found.
[99479.057491] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.057495] uvcvideo: Control 0x00980904 not found.
[99479.057497] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.057500] uvcvideo: Control 0x00980905 not found.
[99479.057502] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.057506] uvcvideo: Control 0x00980906 not found.
[99479.057508] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.057511] uvcvideo: Control 0x00980907 not found.
[99479.057513] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.057516] uvcvideo: Control 0x00980908 not found.
[99479.057518] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.057521] uvcvideo: Control 0x00980909 not found.
[99479.057523] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.057527] uvcvideo: Control 0x0098090a not found.
[99479.057529] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.057532] uvcvideo: Control 0x0098090b not found.
[99479.057534] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.057985] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.057992] uvcvideo: Control 0x0098090d not found.
[99479.057994] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.057998] uvcvideo: Control 0x0098090e not found.
[99479.058000] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.058003] uvcvideo: Control 0x0098090f not found.
[99479.058006] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.059498] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.059505] uvcvideo: Control 0x00980911 not found.
[99479.059507] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.059511] uvcvideo: Control 0x00980912 not found.
[99479.059513] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.060877] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.060883] uvcvideo: Control 0x00980914 not found.
[99479.060886] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.060890] uvcvideo: Control 0x00980915 not found.
[99479.060892] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.060895] uvcvideo: Control 0x00980916 not found.
[99479.060897] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.060900] uvcvideo: Control 0x00980917 not found.
[99479.060903] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.061215] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.061222] uvcvideo: Control 0x00980919 not found.
[99479.061225] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.062699] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.063935] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.064969] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.064976] uvcvideo: Control 0x0098091d not found.
[99479.064979] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.064984] uvcvideo: Control 0x0098091e not found.
[99479.064986] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.064990] uvcvideo: Control 0x0098091f not found.
[99479.064993] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.064997] uvcvideo: Control 0x00980920 not found.
[99479.064999] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCTRL)
[99479.065003] uvcvideo: Control 0x00980921 not found.
[99479.065010] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYCAP)
[99479.065016] uvcvideo: uvc_v4l2_ioctl(VIDIOC_CROPCAP)
[99479.065021] uvcvideo: uvc_v4l2_ioctl(VIDIOC_S_CROP)
[99479.065025] uvcvideo: uvc_v4l2_ioctl(VIDIOC_S_FMT)
[99479.065032] uvcvideo: Trying format 0x47504a4d (MJPG): 640x480.
[99479.065036] uvcvideo: Using default frame interval 66666.7 us (14.9 fps).
[99479.068073] uvcvideo: uvc_v4l2_ioctl(VIDIOC_REQBUFS)
[99479.068382] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYBUF)
[99479.068390] uvcvideo: uvc_v4l2_mmap
[99479.068425] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYBUF)
[99479.068429] uvcvideo: uvc_v4l2_mmap
[99479.068458] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYBUF)
[99479.068462] uvcvideo: uvc_v4l2_mmap
[99479.068487] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QUERYBUF)
[99479.068492] uvcvideo: uvc_v4l2_mmap
[99479.068518] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99479.068522] uvcvideo: Queuing buffer 0.
[99479.068524] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99479.068527] uvcvideo: Queuing buffer 1.
[99479.068529] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99479.068532] uvcvideo: Queuing buffer 2.
[99479.068534] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99479.068536] uvcvideo: Queuing buffer 3.
[99479.068538] uvcvideo: uvc_v4l2_ioctl(VIDIOC_STREAMON)
[99479.069917] uvcvideo: uvc_v4l2_poll
[99480.088937] uvcvideo: Frame complete (EOF found).
[99480.088943] uvcvideo: EOF in empty payload.
[99480.088969] uvcvideo: uvc_v4l2_poll
[99480.088979] uvcvideo: uvc_v4l2_ioctl(VIDIOC_DQBUF)
[99480.088987] uvcvideo: Dequeuing buffer 0 (3, 79048 bytes).
[99480.111106] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99480.111112] uvcvideo: Queuing buffer 0.
[99480.111115] uvcvideo: uvc_v4l2_poll
[99480.208730] uvcvideo: Frame complete (EOF found).
[99480.208734] uvcvideo: EOF in empty payload.
[99480.208757] uvcvideo: uvc_v4l2_poll
[99480.208764] uvcvideo: uvc_v4l2_ioctl(VIDIOC_DQBUF)
[99480.208770] uvcvideo: Dequeuing buffer 1 (3, 82248 bytes).
[99480.232463] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99480.232469] uvcvideo: Queuing buffer 1.
[99480.232472] uvcvideo: uvc_v4l2_poll
[99480.332385] uvcvideo: Frame complete (EOF found).
[99480.332389] uvcvideo: EOF in empty payload.
[99480.332411] uvcvideo: uvc_v4l2_poll
[99480.332418] uvcvideo: uvc_v4l2_ioctl(VIDIOC_DQBUF)
[99480.332424] uvcvideo: Dequeuing buffer 2 (3, 88648 bytes).
[99480.359604] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99480.359610] uvcvideo: Queuing buffer 2.
[99480.359613] uvcvideo: uvc_v4l2_poll
[99480.452082] uvcvideo: Frame complete (EOF found).
[99480.452087] uvcvideo: EOF in empty payload.
[99480.452108] uvcvideo: uvc_v4l2_poll
[99480.452115] uvcvideo: uvc_v4l2_ioctl(VIDIOC_DQBUF)
[99480.452120] uvcvideo: Dequeuing buffer 3 (3, 88648 bytes).
[99480.479215] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99480.479220] uvcvideo: Queuing buffer 3.
[99480.479223] uvcvideo: uvc_v4l2_poll
[99480.515926] uvcvideo: Frame complete (EOF found).
[99480.515930] uvcvideo: EOF in empty payload.
[99480.515950] uvcvideo: uvc_v4l2_poll
[99480.515957] uvcvideo: uvc_v4l2_ioctl(VIDIOC_DQBUF)
[99480.515962] uvcvideo: Dequeuing buffer 0 (3, 82248 bytes).
[99480.538937] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99480.538942] uvcvideo: Queuing buffer 0.
[99480.538945] uvcvideo: uvc_v4l2_poll
[99480.583755] uvcvideo: Frame complete (EOF found).
[99480.583759] uvcvideo: EOF in empty payload.
[99480.583780] uvcvideo: uvc_v4l2_poll
[99480.583787] uvcvideo: uvc_v4l2_ioctl(VIDIOC_DQBUF)
[99480.583792] uvcvideo: Dequeuing buffer 1 (3, 82248 bytes).
[99480.609362] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99480.609367] uvcvideo: Queuing buffer 1.
[99480.609370] uvcvideo: uvc_v4l2_poll
[99480.651583] uvcvideo: Frame complete (EOF found).
[99480.651587] uvcvideo: EOF in empty payload.
[99480.651609] uvcvideo: uvc_v4l2_poll
[99480.651615] uvcvideo: uvc_v4l2_ioctl(VIDIOC_DQBUF)
[99480.651621] uvcvideo: Dequeuing buffer 2 (3, 80648 bytes).
[99480.678935] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99480.678940] uvcvideo: Queuing buffer 2.
[99480.678942] uvcvideo: uvc_v4l2_poll
[99480.715425] uvcvideo: Frame complete (EOF found).
[99480.715429] uvcvideo: EOF in empty payload.
[99480.715448] uvcvideo: uvc_v4l2_poll
[99480.715455] uvcvideo: uvc_v4l2_ioctl(VIDIOC_DQBUF)
[99480.715460] uvcvideo: Dequeuing buffer 3 (3, 80648 bytes).
[99480.740122] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99480.740127] uvcvideo: Queuing buffer 3.
[99480.740131] uvcvideo: uvc_v4l2_poll
[99480.783196] uvcvideo: Frame complete (EOF found).
[99480.783200] uvcvideo: EOF in empty payload.
[99480.783222] uvcvideo: uvc_v4l2_poll
[99480.783228] uvcvideo: uvc_v4l2_ioctl(VIDIOC_DQBUF)
[99480.783234] uvcvideo: Dequeuing buffer 0 (3, 80648 bytes).
[99480.808346] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99480.808353] uvcvideo: Queuing buffer 0.
[99480.808356] uvcvideo: uvc_v4l2_poll
[99480.851066] uvcvideo: Frame complete (EOF found).
[99480.851070] uvcvideo: EOF in empty payload.
[99480.851091] uvcvideo: uvc_v4l2_poll
[99480.851097] uvcvideo: uvc_v4l2_ioctl(VIDIOC_DQBUF)
[99480.851103] uvcvideo: Dequeuing buffer 1 (3, 80648 bytes).
[99480.877297] uvcvideo: uvc_v4l2_ioctl(VIDIOC_QBUF)
[99480.877303] uvcvideo: Queuing buffer 1.
[99480.877305] uvcvideo: uvc_v4l2_ioctl(VIDIOC_STREAMOFF)
[99480.895509] uvcvideo: uvc_v4l2_release


Here's the bit where the two logs diverge:
When broken:
[99317.553237] uvcvideo: uvc_v4l2_ioctl(VIDIOC_STREAMON)
[99317.554747] uvcvideo: uvc_v4l2_poll
[99333.472385] uvcvideo: Dropping payload (error bit set).
[99333.472389] uvcvideo: Frame complete (EOF found).
[99333.472391] uvcvideo: EOF in empty payload.
[99333.472429] uvcvideo: uvc_v4l2_poll
[99333.472438] uvcvideo: uvc_v4l2_ioctl(VIDIOC_DQBUF)
[99333.472447] uvcvideo: Dequeuing buffer 0 (3, 2676 bytes).

When not broken:
[99479.068538] uvcvideo: uvc_v4l2_ioctl(VIDIOC_STREAMON)
[99479.069917] uvcvideo: uvc_v4l2_poll
[99480.088937] uvcvideo: Frame complete (EOF found).
[99480.088943] uvcvideo: EOF in empty payload.
[99480.088969] uvcvideo: uvc_v4l2_poll
[99480.088979] uvcvideo: uvc_v4l2_ioctl(VIDIOC_DQBUF)
[99480.088987] uvcvideo: Dequeuing buffer 0 (3, 79048 bytes).

In the meantime, as I've noticed it succeeds occasionally, I might
just respond to the select timeout by re-initialising the camera.
Although I'd much prefer a proper solution!

Thanks,

Michael Tandy


On 5 September 2011 19:53, Alexey Fisher <bug-track at fisher-privat.net> wrote:
> Hi,
>
> you do not need to send any webcams, (but if you will, i'll accept it :D)
> better attach output of lsusb -vd 177f:0060
>
> , also enable trace for uvc module, reporoduce this error and attach the
> dmesg as well:
> sudo rmmod uvcvideo && sudo modprobe uvcvideo trace=0xfff
>
> Am 05.09.2011 16:19, schrieb Michael Tandy:
>>
>> Hi Linux-uvc-devel!
>>
>> I have a Sweex WC061 UVC webcam [1] I'm looking to capture mjpeg video
>> from; the camera reports it supports MJPEG, but I'm having trouble
>> with it.
>>
>> According to VIDIOC_ENUM_FMT it supports YUV 4:2:2 (0x56595559, YUYV)
>> and MJPEG (0x47504a4d MJPG) and according to the manufacturer's spec
>> sheet [2] the camera supports MJPEG.
>>
>> When I use YUV capture the camera works OK, but when I use MJPEG the
>> V4L2 video capture example program [3] reports a select timeout. If I
>> set the select timeout to 30 seconds or so I get some MJPEG-like data
>> from the camera, but nothing that seems to make sense; I get some JPEG
>> headers, but no end-of-file marker, and what data is present doesn't
>> properly decode as MJPEG.
>>
>> On the other hand I have a Microsoft Lifecam Cinema HD that streams
>> MJPEG just fine so if there's an error on my end I'm not sure what it
>> is.
>>
>> Can anyone advise me on what the problem might be, or is there anyone
>> who would be able to diagnose the problem in exchange for a free
>> webcam?
>>
>> Thanks,
>>
>> Michael Tandy
>>
>> [1] VID 0x177f, PID 0x0060
>> [2]
>> http://www.sweex.com/en/assortiment/sound-vision/webcams/WC061/specificaties/
>> [3] http://v4l2spec.bytesex.org/spec/capture-example.html
>> _______________________________________________
>> Linux-uvc-devel mailing list
>> Linux-uvc-devel at lists.berlios.de
>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>
-------------- next part --------------

Bus 002 Device 009: ID 177f:0060  
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x177f 
  idProduct          0x0060 
  bcdDevice            1.00
  iManufacturer           1 Sweex
  iProduct                2 WC060 Series HD Webcam
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength         1125
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              128mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0 
      iFunction               2 WC060 Series HD Webcam
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0 
      iInterface              2 WC060 Series HD Webcam
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           79
        dwClockFrequency       30.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0 
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x0000000a
          Auto-Exposure Mode
          Exposure Time (Absolute)
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 2
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000177b
          Brightness
          Contrast
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Gain
          Power Line Frequency
          White Balance Temperature, Auto
        iProcessing             0 
        bmVideoStandards     0x 9
          None
          SECAM - 625/50
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               2
        iTerminal               0 
      VideoControl Interface Descriptor:
        bLength                28
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {e3deaebb-c2ec-4d42-802c-72f2eb3dfb57}
        bNumControl             8
        bNrPins                 1
        baSourceID( 0)          1
        bControlSize            3
        bmControls( 0)       0x59
        bmControls( 1)       0x80
        bmControls( 2)       0x80
        iExtension              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x000a  1x 10 bytes
        bInterval               5
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      VideoStreaming Interface Descriptor:
        bLength                            15
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                         2
        wTotalLength                      761
        bEndPointAddress                  130
        bmInfo                              0
        bTerminalLink                       3
        bStillCaptureMethod                 2
        bTriggerSupport                     1
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    27
        bmaControls( 1)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                9
        guidFormat                            {59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   768000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  2
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666667
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   768000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  2
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666667
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   768000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  2
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666667
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                   768000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  2
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666667
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   768000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  2
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666667
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            800
        wHeight                           600
        dwMinBitRate                   768000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize      960000
        dwDefaultFrameInterval        1000000
        bFrameIntervalType                  2
        dwFrameInterval( 0)           1000000
        dwFrameInterval( 1)           1333333
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         7
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                           960
        dwMinBitRate                   768000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize     2457600
        dwDefaultFrameInterval        1333333
        bFrameIntervalType                  2
        dwFrameInterval( 0)           1333333
        dwFrameInterval( 1)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         8
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                   768000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize     2621440
        dwDefaultFrameInterval        1333333
        bFrameIntervalType                  2
        dwFrameInterval( 0)           1333333
        dwFrameInterval( 1)           2000000
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         9
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1600
        wHeight                          1200
        dwMinBitRate                   768000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize     3840000
        dwDefaultFrameInterval        2000000
        bFrameIntervalType                  2
        dwFrameInterval( 0)           2000000
        dwFrameInterval( 1)           4000000
      VideoStreaming Interface Descriptor:
        bLength                            42
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               9
        wWidth( 0)                        640
        wHeight( 0)                       480
        wWidth( 1)                        352
        wHeight( 1)                       288
        wWidth( 2)                        320
        wHeight( 2)                       240
        wWidth( 3)                        176
        wHeight( 3)                       144
        wWidth( 4)                        160
        wHeight( 4)                       120
        wWidth( 5)                        800
        wHeight( 5)                       600
        wWidth( 6)                       1280
        wHeight( 6)                       960
        wWidth( 7)                       1280
        wHeight( 7)                      1024
        wWidth( 8)                       1600
        wHeight( 8)                      1200
        bNumCompressionPatterns             9
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
      VideoStreaming Interface Descriptor:
        bLength                            11
        bDescriptorType                    36
        bDescriptorSubtype                  6 (FORMAT_MJPEG)
        bFormatIndex                        2
        bNumFrameDescriptors                9
        bFlags                              1
          Fixed-size samples: Yes
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   768000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         666667
        bFrameIntervalType                  2
        dwFrameInterval( 0)            666667
        dwFrameInterval( 1)           1333333
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   768000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         666667
        bFrameIntervalType                  2
        dwFrameInterval( 0)            666667
        dwFrameInterval( 1)           1333333
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   768000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         666667
        bFrameIntervalType                  2
        dwFrameInterval( 0)            666667
        dwFrameInterval( 1)           1333333
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                   768000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         666667
        bFrameIntervalType                  2
        dwFrameInterval( 0)            666667
        dwFrameInterval( 1)           1333333
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   768000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         666667
        bFrameIntervalType                  2
        dwFrameInterval( 0)            666667
        dwFrameInterval( 1)           1333333
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            800
        wHeight                           600
        dwMinBitRate                   768000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize      960000
        dwDefaultFrameInterval         666667
        bFrameIntervalType                  2
        dwFrameInterval( 0)            666667
        dwFrameInterval( 1)           1333333
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         7
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                           960
        dwMinBitRate                   768000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize     2457600
        dwDefaultFrameInterval         666667
        bFrameIntervalType                  2
        dwFrameInterval( 0)            666667
        dwFrameInterval( 1)           1333333
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         8
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                   768000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize     2621440
        dwDefaultFrameInterval         666667
        bFrameIntervalType                  2
        dwFrameInterval( 0)            666667
        dwFrameInterval( 1)           1333333
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         9
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1600
        wHeight                          1200
        dwMinBitRate                   768000
        dwMaxBitRate                196608000
        dwMaxVideoFrameBufferSize     3840000
        dwDefaultFrameInterval         666667
        bFrameIntervalType                  2
        dwFrameInterval( 0)            666667
        dwFrameInterval( 1)           1333333
      VideoStreaming Interface Descriptor:
        bLength                            42
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               9
        wWidth( 0)                        640
        wHeight( 0)                       480
        wWidth( 1)                        352
        wHeight( 1)                       288
        wWidth( 2)                        320
        wHeight( 2)                       240
        wWidth( 3)                        176
        wHeight( 3)                       144
        wWidth( 4)                        160
        wHeight( 4)                       120
        wWidth( 5)                        800
        wHeight( 5)                       600
        wWidth( 6)                       1280
        wHeight( 6)                       960
        wWidth( 7)                       1280
        wHeight( 7)                      1024
        wWidth( 8)                       1600
        wHeight( 8)                      1200
        bNumCompressionPatterns             9
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0400  1x 1024 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b00  2x 768 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0c00  2x 1024 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1380  3x 896 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       7
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 1024 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       2 Streaming
      bFunctionProtocol       0 
      iFunction               3 WC060 Series HD Webcam (Audio)
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0 
      iInterface              3 WC060 Series HD Webcam (Audio)
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           39
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0 
        iTerminal               0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 2
        bSourceID               1
        bControlSize            1
        bmaControls( 0)      0x00
        bmaControls( 1)      0x03
          Mute
          Volume
        iFeature                0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          1
        bSourceID               2
        iTerminal               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                29
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            7 Discrete
        tSamFreq[ 0]         8000
        tSamFreq[ 1]        11025
        tSamFreq[ 2]        16000
        tSamFreq[ 3]        22050
        tSamFreq[ 4]        32000
        tSamFreq[ 5]        44100
        tSamFreq[ 6]        48000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0062  1x 98 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)

From laurent.pinchart at ideasonboard.com  Tue Sep  6 17:24:13 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Tue, 6 Sep 2011 17:24:13 +0200
Subject: [Linux-uvc-devel] uvc header question
In-Reply-To: <4E64EF5A.4050608@fisher-privat.net>
References: <4E55FD4A.9080906@fisher-privat.net>
	<201108310032.51561.laurent.pinchart@ideasonboard.com>
	<4E64EF5A.4050608@fisher-privat.net>
Message-ID: <201109061724.14008.laurent.pinchart@ideasonboard.com>

Hi Alexey,

On Monday 05 September 2011 17:48:42 Alexey Fisher wrote:
> Am 31.08.2011 00:32, schrieb Laurent Pinchart:
> > On Thursday 25 August 2011 09:44:10 Alexey Fisher wrote:
> >> Hi Laurent,
> >> 
> >> are there any reason why uvc_video_decode_start do not do precise header
> >> size checks? Are there many cameras with broken header size too?
> > 
> > How precise do you mean ? The driver currently doesn't use much of the
> > header, so it just makes sure that the header size is smaller than or
> > equal to the packet size, and that it's at least 2 bytes long.
> > 
> >> I send you patch on what i work now to catch streams with fragmented
> >> packets.. what do you think about it? Will you apply some thing like
> >> this?
> > 
> > I'm not sure about that. Webcams that would require something like that
> > are so broken that I'm tempted to consider them as not UVC-compliant.
> > They should be returned to vendors with a loud complaint.
> > 
> > Your patch might help, but the sad story is that it can't completely fix
> > the streams. There's always a chance that fragmented packets that
> > contains no header will start with data that looks like a header. You
> > won't be able to find a buller-proof solution.
> 
> You are right,
> the idea is not to show definitely broken frames. If there is some thing
> what we can't filter, is ok. we did our best.

I understand. I'm not sure if this should be included in the mainline uvcvideo 
driver though. It makes the code more complex to support a couple of 
completely broken devices, and doesn't guarantee that those devices will work 
correctly.

> I just thinking about build in uvc compliance tester insight of the module.
> Some thing what users can use right in shop or at home before 14 day return
> guarantee.
> You enables compliance test and it print results in in dmesg.  One of
> test should be header check, error/drop rate, and so on.

That's an interesting idea. It should probably come with a userspace stress 
test software as well.

-- 
Regards,

Laurent Pinchart


From bug-track at fisher-privat.net  Wed Sep  7 08:11:48 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Wed, 07 Sep 2011 08:11:48 +0200
Subject: [Linux-uvc-devel] Sweex WC061 HD Webcam Sliver
In-Reply-To: <CAHGSkqjee4DbDMnOKsrfp1Haih_bybkGSvWhPi_2YmraDa4rpQ@mail.gmail.com>
References: <CAHGSkqgyRgbt_G5MB6DewazJML8B1OkGyF0yP=qqKoRm28FapQ@mail.gmail.com>
	<4E651AB3.1040100@fisher-privat.net>
	<CAHGSkqjee4DbDMnOKsrfp1Haih_bybkGSvWhPi_2YmraDa4rpQ@mail.gmail.com>
Message-ID: <4E670B24.1040504@fisher-privat.net>

Am 06.09.2011 12:53, schrieb Michael Tandy:
> [99317.553237] uvcvideo: uvc_v4l2_ioctl(VIDIOC_STREAMON)
> [99317.554747] uvcvideo: uvc_v4l2_poll
> [99333.472385] uvcvideo: Dropping payload (error bit set).
> [99333.472389] uvcvideo: Frame complete (EOF found).
> [99333.472391] uvcvideo: EOF in empty payload.
> [99333.472429] uvcvideo: uvc_v4l2_poll
> [99333.472438] uvcvideo: uvc_v4l2_ioctl(VIDIOC_DQBUF)
> [99333.472447] uvcvideo: Dequeuing buffer 0 (3, 2676 bytes).

hmm... the camera notify us about with error bit set, but current driver 
will just drop it and mark the buffer as faulty.

According to uvc specification v1.1 in "4.3.1.7 Stream Error Code 
Control" we can/should check the error reason:
-------------------------------------------------------------------
The host software should send a GET_CUR request to this control to 
determine the error when one of the following events occurs:
- The Error bit in the video or still image payload header is set by the 
device
....
For scenarios where the host is transmitting video data to the device, 
the host can not use the Error bit in the payload header to detect a 
device error. Therefore, in order to determine when a streaming error 
occurs, the host must rely on either a Control Change interrupt from the 
device or a bulk endpoint stall.
--------------------------------------------------------------------

I'm suddenly not so good to implement ne things without testing and 
probing. May be Laurent can do this? Or i need access to the webcam.

Regards,
	Alexey.


From bug-track at fisher-privat.net  Wed Sep  7 08:14:45 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Wed, 07 Sep 2011 08:14:45 +0200
Subject: [Linux-uvc-devel] uvc header question
In-Reply-To: <201109061724.14008.laurent.pinchart@ideasonboard.com>
References: <4E55FD4A.9080906@fisher-privat.net>
	<201108310032.51561.laurent.pinchart@ideasonboard.com>
	<4E64EF5A.4050608@fisher-privat.net>
	<201109061724.14008.laurent.pinchart@ideasonboard.com>
Message-ID: <4E670BD5.30208@fisher-privat.net>

Hi Laurent,

Am 06.09.2011 17:24, schrieb Laurent Pinchart:
> Hi Alexey,
>
> On Monday 05 September 2011 17:48:42 Alexey Fisher wrote:
>> Am 31.08.2011 00:32, schrieb Laurent Pinchart:
>>> On Thursday 25 August 2011 09:44:10 Alexey Fisher wrote:
>>>> Hi Laurent,
>>>>
>>>> are there any reason why uvc_video_decode_start do not do precise header
>>>> size checks? Are there many cameras with broken header size too?
>>>
>>> How precise do you mean ? The driver currently doesn't use much of the
>>> header, so it just makes sure that the header size is smaller than or
>>> equal to the packet size, and that it's at least 2 bytes long.
>>>
>>>> I send you patch on what i work now to catch streams with fragmented
>>>> packets.. what do you think about it? Will you apply some thing like
>>>> this?
>>>
>>> I'm not sure about that. Webcams that would require something like that
>>> are so broken that I'm tempted to consider them as not UVC-compliant.
>>> They should be returned to vendors with a loud complaint.
>>>
>>> Your patch might help, but the sad story is that it can't completely fix
>>> the streams. There's always a chance that fragmented packets that
>>> contains no header will start with data that looks like a header. You
>>> won't be able to find a buller-proof solution.
>>
>> You are right,
>> the idea is not to show definitely broken frames. If there is some thing
>> what we can't filter, is ok. we did our best.
>
> I understand. I'm not sure if this should be included in the mainline uvcvideo
> driver though. It makes the code more complex to support a couple of
> completely broken devices, and doesn't guarantee that those devices will work
> correctly.

ok, i give up.

>> I just thinking about build in uvc compliance tester insight of the module.
>> Some thing what users can use right in shop or at home before 14 day return
>> guarantee.
>> You enables compliance test and it print results in in dmesg.  One of
>> test should be header check, error/drop rate, and so on.
>
> That's an interesting idea. It should probably come with a userspace stress
> test software as well.

you mean luvcview or some thing other?



From stesind at googlemail.com  Wed Sep  7 08:32:04 2011
From: stesind at googlemail.com (Steffen)
Date: Wed, 07 Sep 2011 08:32:04 +0200
Subject: [Linux-uvc-devel] Microsoft Lifecam Cinema
Message-ID: <1315377124.2569.6.camel@steffen-MS-7588>

Hello,

I am testing Microsoft Lifecam Cinema now, but I am not able to record
audio and video syncronusely with that cam and guvcview. The Logitech
C525 works but has a crappy image. Also cheese works with both cams but
has a little frame rate. Skype works for both.

Do you have any ideas? I have already installed that medibuild version
of uvc and the latest guvcview from the ppa. But the same result even
with the old ubuntu natty versions.

Steffen



-------------- next part --------------

steffen at steffen-MS-7588:~$ guvcview --verbose
guvcview 1.5.0
video_device: /dev/video0
vid_sleep: 0
cap_meth: 1
resolution: 1280 x 720
windowsize: 830 x 700
vert pane: 578
spin behavior: 0
mode: mjpg
fps: 1/30
Display Fps: 0
bpp: 32
hwaccel: 1
avi_format: 6
sound: 1
sound Device: 2
sound samp rate: 0
sound Channels: 0
Sound delay: 0 nanosec
Sound Format: 80 
Pan Step: 2 degrees
Tilt Step: 2 degrees
Video Filter Flags: 0
image inc: 4
profile(default):/home/steffen/default.gpfl
starting portaudio...
ALSA lib pcm.c:2212:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear
ALSA lib pcm.c:2212:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe
ALSA lib pcm.c:2212:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side
bt_audio_service_open: connect() failed: Verbindungsaufbau abgelehnt (111)
bt_audio_service_open: connect() failed: Verbindungsaufbau abgelehnt (111)
bt_audio_service_open: connect() failed: Verbindungsaufbau abgelehnt (111)
bt_audio_service_open: connect() failed: Verbindungsaufbau abgelehnt (111)
ALSA lib pcm_dmix.c:957:(snd_pcm_dmix_open) The dmix plugin supports only playback stream
ALSA lib pcm_dmix.c:1018:(snd_pcm_dmix_open) unable to open slave
Cannot connect to server socket err = Datei oder Verzeichnis nicht gefunden
Cannot connect to server socket
jack server is not running or cannot be started
language catalog=> dir:/usr/share/locale type:UTF-8 lang:de_DE cat:guvcview.mo
mjpg: setting format to 1196444237
capture method = 1
video device: /dev/video0 
Device Node Path: /dev/video0
  VID/PID: 045e 075d
  Microsoft
  Microsoft? LifeCam Cinema(TM)
  serial: (null)
Init. Microsoft? LifeCam Cinema(TM) (location: usb-0000:00:1d.0-1.2)
{ pixelformat = 'YUYV', description = 'YUV 4:2:2 (YUYV)' }
{ discrete: width = 640, height = 480 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 1280, height = 720 }
	Time interval between frame: 1/10, 2/15, 
{ discrete: width = 960, height = 544 }
	Time interval between frame: 1/15, 1/10, 2/15, 
{ discrete: width = 800, height = 448 }
	Time interval between frame: 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 640, height = 360 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 424, height = 240 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 352, height = 288 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 320, height = 240 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 800, height = 600 }
	Time interval between frame: 1/15, 1/10, 2/15, 
{ discrete: width = 176, height = 144 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 160, height = 120 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 1280, height = 800 }
	Time interval between frame: 1/10, 
{ pixelformat = 'MJPG', description = 'MJPEG' }
{ discrete: width = 640, height = 480 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 1280, height = 720 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 960, height = 544 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 800, height = 448 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 640, height = 360 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 800, height = 600 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 416, height = 240 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 352, height = 288 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 176, height = 144 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 320, height = 240 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 160, height = 120 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ pixelformat = 'RGB3', description = 'RGB3' }
{ discrete: width = 640, height = 480 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 1280, height = 720 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 960, height = 544 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 800, height = 448 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 640, height = 360 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 424, height = 240 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 352, height = 288 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 320, height = 240 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 800, height = 600 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 176, height = 144 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 160, height = 120 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 1280, height = 800 }
	Time interval between frame: 1/10, 
{ discrete: width = 416, height = 240 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ pixelformat = 'BGR3', description = 'BGR3' }
{ discrete: width = 640, height = 480 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 1280, height = 720 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 960, height = 544 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 800, height = 448 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 640, height = 360 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 424, height = 240 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 352, height = 288 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 320, height = 240 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 800, height = 600 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 176, height = 144 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 160, height = 120 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 1280, height = 800 }
	Time interval between frame: 1/10, 
{ discrete: width = 416, height = 240 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ pixelformat = 'YU12', description = 'YU12' }
{ discrete: width = 640, height = 480 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 1280, height = 720 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 960, height = 544 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 800, height = 448 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 640, height = 360 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 424, height = 240 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 352, height = 288 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 320, height = 240 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 800, height = 600 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 176, height = 144 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 160, height = 120 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 1280, height = 800 }
	Time interval between frame: 1/10, 
{ discrete: width = 416, height = 240 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ pixelformat = 'YV12', description = 'YV12' }
{ discrete: width = 640, height = 480 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 1280, height = 720 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 960, height = 544 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 800, height = 448 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 640, height = 360 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 424, height = 240 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 352, height = 288 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 320, height = 240 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 800, height = 600 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 176, height = 144 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 160, height = 120 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
{ discrete: width = 1280, height = 800 }
	Time interval between frame: 1/10, 
{ discrete: width = 416, height = 240 }
	Time interval between frame: 1/30, 1/20, 1/15, 1/10, 2/15, 
vid:045e 
pid:075d 
driver:uvcvideo
checking format: 1196444237
VIDIOC_G_COMP:: Das Argument ist ung?ltig
   compression control not supported
fps is set to 1/30
drawing controls

control[0]: 0x980900  Brightness, 30:255:1, default 133
control[0]: 0x980901  Contrast, 0:10:1, default 5
control[0]: 0x980902  Saturation, 0:200:1, default 83
control[0]: 0x98090c  White Balance Temperature, Auto, 0:1:1, default 1
control[0]: 0x980918  Power Line Frequency, 0:2:1, default 2
adding menu entry 0: 0, Disabled
adding menu entry 1: 1, 50 Hz
adding menu entry 2: 2, 60 Hz
control[0]: 0x98091a  White Balance Temperature, 2800:10000:1, default 4500
control[0]: 0x98091b  Sharpness, 0:50:1, default 25
control[0]: 0x98091c  Backlight Compensation, 0:10:1, default 0
control[0]: 0x9a0901  Exposure, Auto, 0:3:1, default 1
adding menu entry 0: 1, Manual Mode
adding menu entry 1: 3, Aperture Priority Mode
control[0]: 0x9a0902  Exposure (Absolute), 5:20000:1, default 156
control[0]: 0x9a0908  Pan (Absolute), -201600:201600:3600, default 0
control[0]: 0x9a0909  Tilt (Absolute), -201600:201600:3600, default 0
control[0]: 0x9a090a  Focus (absolute), 0:40:1, default 0
control[0]: 0x9a090c  Focus, Auto, 0:1:1, default 0
control[0]: 0x9a090d  Zoom, Absolute, 0:10:1, default 0
resolutions of format(2) = 11 
frame rates of 2? resolution=5 
fps is set to 1/30
Def. Res: 1  numb. fps:5
--------------------------------------- device #0
Name                     = HDA Intel: ALC889 Analog (hw:0,0)
Host API                 = ALSA
Max inputs = 2, Max outputs = 0
Def. low input latency   =    0,012
Def. low output latency  =   -1,000
Def. high input latency  =    0,046
Def. high output latency =   -1,000
Def. sample rate         = 44100,00
--------------------------------------- device #1
Name                     = HDA Intel: ALC889 Digital (hw:0,1)
Host API                 = ALSA
Max inputs = 0, Max outputs = 2
Def. low input latency   =   -1,000
Def. low output latency  =    0,012
Def. high input latency  =   -1,000
Def. high output latency =    0,046
Def. sample rate         = 44100,00
--------------------------------------- device #2
Name                     = HDA Intel: ALC889 Analog (hw:0,2)
Host API                 = ALSA
Max inputs = 2, Max outputs = 0
Def. low input latency   =    0,012
Def. low output latency  =   -1,000
Def. high input latency  =    0,046
Def. high output latency =   -1,000
Def. sample rate         = 44100,00
--------------------------------------- device #3
Name                     = Microsoft? LifeCam Cinema(TM): USB Audio (hw:1,0)
Host API                 = ALSA
Max inputs = 1, Max outputs = 0
Def. low input latency   =    0,012
Def. low output latency  =   -1,000
Def. high input latency  =    0,046
Def. high output latency =   -1,000
Def. sample rate         = 44100,00
--------------------------------------- device #4
Name                     = HD-Audio Generic: HDMI 0 (hw:2,3)
Host API                 = ALSA
Max inputs = 0, Max outputs = 2
Def. low input latency   =   -1,000
Def. low output latency  =    0,012
Def. high input latency  =   -1,000
Def. high output latency =    0,046
Def. sample rate         = 44100,00
--------------------------------------- device #5
Name                     = iec958
Host API                 = ALSA
Max inputs = 0, Max outputs = 2
Def. low input latency   =   -1,000
Def. low output latency  =    0,012
Def. high input latency  =   -1,000
Def. high output latency =    0,046
Def. sample rate         = 44100,00
--------------------------------------- device #6
Name                     = spdif
Host API                 = ALSA
Max inputs = 0, Max outputs = 2
Def. low input latency   =   -1,000
Def. low output latency  =    0,012
Def. high input latency  =   -1,000
Def. high output latency =    0,046
Def. sample rate         = 44100,00
--------------------------------------- device #7
Name                     = pulse
Host API                 = ALSA
Max inputs = 32, Max outputs = 32
Def. low input latency   =    0,012
Def. low output latency  =    0,012
Def. high input latency  =    0,046
Def. high output latency =    0,046
Def. sample rate         = 44100,00
--------------------------------------- device #8
[ Default Input, Default Output ]
Name                     = default
Host API                 = ALSA
Max inputs = 32, Max outputs = 32
Def. low input latency   =    0,012
Def. low output latency  =    0,012
Def. high input latency  =    0,046
Def. high output latency =    0,046
Def. sample rate         = 44100,00
----------------------------------------------
SampleRate:0 Channels:0
Video driver: x11
A window manager is available
(Desktop resolution = 1920x1080)
Checking video mode 1280x720 at 32bpp : OK 
hmm FW error,not seq DCT ??
Cap Video toggled: 1
(/home/steffen) 176671132K bytes free on a total of 790297256K (used: 77 %) treshold=51200K
using audio codec: 0x0050
Audio frame size is 1152 samples for selected codec
IO thread started...OK
audio drift: duplicating/shifting frame
audio drift: duplicating/shifting frame
audio drift: duplicating/shifting frame
audio drift: duplicating/shifting frame
audio drift: duplicating/shifting frame
audio drift: duplicating/shifting frame
audio drift: duplicating/shifting frame
audio drift: duplicating/shifting frame
audio drift: duplicating/shifting frame
audio drift: duplicating/shifting frame
audio drift: duplicating/shifting frame
audio drift: duplicating/shifting frame
audio drift: duplicating/shifting frame
audio drift: duplicating/shifting frame
audio drift: duplicating/shifting frame
shift sound by 1012 ms
audio drift: duplicating/shifting frame
audio drift: duplicating/shifting frame
audio drift: duplicating/shifting frame
audio drift: duplicating/shifting frame
audio drift: duplicating/shifting frame
audio drift: dropping/shifting frame
audio drift: dropping/shifting frame
audio drift: dropping/shifting frame
audio drift: dropping/shifting frame
audio drift: dropping/shifting frame
audio drift: dropping/shifting frame
audio drift: dropping/shifting frame
audio drift: dropping/shifting frame
audio drift: dropping/shifting frame
audio drift: dropping/shifting frame
audio drift: dropping/shifting frame
audio drift: dropping/shifting frame
audio drift: dropping/shifting frame
audio drift: dropping/shifting frame
audio drift: dropping/shifting frame
audio drift: dropping/shifting frame
audio drift: dropping/shifting frame
Cap Video toggled: 0
Shuting Down IO Thread
stop= 1011178406000 start=1006310220000 
VIDEO: 74 frames in 4868,000000 ms = 15,201315 fps
Stoping audio stream
Closing audio stream...
close avi
IO thread finished...OK
IO Thread finished
enabling controls
 Could not grab image (select timeout): Die Ressource ist zur Zeit nicht verf?gbar
 Could not grab image (select timeout): Die Ressource ist zur Zeit nicht verf?gbar
 Could not grab image (select timeout): Die Ressource ist zur Zeit nicht verf?gbar
 Could not grab image (select timeout): Die Ressource ist zur Zeit nicht verf?gbar
 Could not grab image (select timeout): Die Ressource ist zur Zeit nicht verf?gbar
 Could not grab image (select timeout): Die Ressource ist zur Zeit nicht verf?gbar
 Could not grab image (select timeout): Die Ressource ist zur Zeit nicht verf?gbar
 Could not grab image (select timeout): Die Ressource ist zur Zeit nicht verf?gbar
 Could not grab image (select timeout): Die Ressource ist zur Zeit nicht verf?gbar
 Could not grab image (select timeout): Die Ressource ist zur Zeit nicht verf?gbar
^CShuting Down Thread
 Could not grab image (select timeout): Die Ressource ist zur Zeit nicht verf?gbar
 Could not grab image (select timeout): Die Ressource ist zur Zeit nicht verf?gbar
Thread terminated...
cleaning Thread allocations: 100%
Video thread completed
Video Thread finished
write /home/steffen/.guvcviewrc OK
free audio mutex
closed v4l2 strutures
free controls
free controls - vidState
cleaned allocations - 100%
Closing portaudio ...OK
Closing GTK... OK
steffen at steffen-MS-7588:~$ 


From laurent.pinchart at ideasonboard.com  Wed Sep  7 10:05:44 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Wed, 7 Sep 2011 10:05:44 +0200
Subject: [Linux-uvc-devel] uvc header question
In-Reply-To: <4E670BD5.30208@fisher-privat.net>
References: <4E55FD4A.9080906@fisher-privat.net>
	<201109061724.14008.laurent.pinchart@ideasonboard.com>
	<4E670BD5.30208@fisher-privat.net>
Message-ID: <201109071005.44868.laurent.pinchart@ideasonboard.com>

Hi Alexey,

On Wednesday 07 September 2011 08:14:45 Alexey Fisher wrote:
> Am 06.09.2011 17:24, schrieb Laurent Pinchart:
> > On Monday 05 September 2011 17:48:42 Alexey Fisher wrote:
> >> Am 31.08.2011 00:32, schrieb Laurent Pinchart:
> >>> On Thursday 25 August 2011 09:44:10 Alexey Fisher wrote:
> >>>> Hi Laurent,
> >>>> 
> >>>> are there any reason why uvc_video_decode_start do not do precise
> >>>> header size checks? Are there many cameras with broken header size
> >>>> too?
> >>> 
> >>> How precise do you mean ? The driver currently doesn't use much of the
> >>> header, so it just makes sure that the header size is smaller than or
> >>> equal to the packet size, and that it's at least 2 bytes long.
> >>> 
> >>>> I send you patch on what i work now to catch streams with fragmented
> >>>> packets.. what do you think about it? Will you apply some thing like
> >>>> this?
> >>> 
> >>> I'm not sure about that. Webcams that would require something like that
> >>> are so broken that I'm tempted to consider them as not UVC-compliant.
> >>> They should be returned to vendors with a loud complaint.
> >>> 
> >>> Your patch might help, but the sad story is that it can't completely
> >>> fix the streams. There's always a chance that fragmented packets that
> >>> contains no header will start with data that looks like a header. You
> >>> won't be able to find a buller-proof solution.
> >> 
> >> You are right,
> >> the idea is not to show definitely broken frames. If there is some thing
> >> what we can't filter, is ok. we did our best.
> > 
> > I understand. I'm not sure if this should be included in the mainline
> > uvcvideo driver though. It makes the code more complex to support a
> > couple of completely broken devices, and doesn't guarantee that those
> > devices will work correctly.
> 
> ok, i give up.

I'm sorry about that. I definitely appreciate the work you've done on this, 
but as I said I don't think we should cripple the driver with complex code 
just to try to support a bit better a webcam that is completely broken anyway.

> >> I just thinking about build in uvc compliance tester insight of the
> >> module. Some thing what users can use right in shop or at home before
> >> 14 day return guarantee.
> >> You enables compliance test and it print results in in dmesg.  One of
> >> test should be header check, error/drop rate, and so on.
> > 
> > That's an interesting idea. It should probably come with a userspace
> > stress test software as well.
> 
> you mean luvcview or some thing other?

I'm thinking about a new command line software that would get/set controls at 
high speed for instance, verify that all controls reported by the device are 
actually supported, start/stop streaming multiple times, ... Something that 
would stress the device and try to crash it (which is unfortunately often 
quite easy :-)).

-- 
Regards,

Laurent Pinchart


From pj.assis at gmail.com  Wed Sep  7 10:35:21 2011
From: pj.assis at gmail.com (Paulo Assis)
Date: Wed, 7 Sep 2011 09:35:21 +0100
Subject: [Linux-uvc-devel] Microsoft Lifecam Cinema
In-Reply-To: <1315377124.2569.6.camel@steffen-MS-7588>
References: <1315377124.2569.6.camel@steffen-MS-7588>
Message-ID: <CAPueXH4HHb9mk1YLCDzsOXp-+Y93HbC487dHW--NyCQACNkLhg@mail.gmail.com>

Hi,
guvcview detects some sync issues, it seems although you select 30
fps, for that resolution (1280x720) your hardware is just not powerful
enough to decode the MJPG stream and re-encode it with whatever coded
you are using.
Some solutions:
-reduce the fps
-reduce the resolution
-try using a less resource demanding video codec (MJPG will save the
video stream directly to disk, no compression is done in this case,
but it generates a huge file if compared with any of the mpeg codecs)
-use the matroska container instead of avi, it is much better since
individual frames are timed stamped. Avi only sets a average fps (15
according to your log)

Regards,
Paulo

2011/9/7 Steffen <stesind at googlemail.com>:
> Hello,
>
> I am testing Microsoft Lifecam Cinema now, but I am not able to record
> audio and video syncronusely with that cam and guvcview. The Logitech
> C525 works but has a crappy image. Also cheese works with both cams but
> has a little frame rate. Skype works for both.
>
> Do you have any ideas? I have already installed that medibuild version
> of uvc and the latest guvcview from the ppa. But the same result even
> with the old ubuntu natty versions.
>
> Steffen
>
>
>
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>


From bug-track at fisher-privat.net  Wed Sep  7 10:46:41 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Wed, 07 Sep 2011 10:46:41 +0200
Subject: [Linux-uvc-devel] uvc header question
In-Reply-To: <201109071005.44868.laurent.pinchart@ideasonboard.com>
References: <4E55FD4A.9080906@fisher-privat.net>
	<201109061724.14008.laurent.pinchart@ideasonboard.com>
	<4E670BD5.30208@fisher-privat.net>
	<201109071005.44868.laurent.pinchart@ideasonboard.com>
Message-ID: <4E672F71.7070306@fisher-privat.net>

On 07.09.2011 10:05, Laurent Pinchart wrote:
> Hi Alexey,
> 
> On Wednesday 07 September 2011 08:14:45 Alexey Fisher wrote:
>> Am 06.09.2011 17:24, schrieb Laurent Pinchart:
>>> On Monday 05 September 2011 17:48:42 Alexey Fisher wrote:
>>>> Am 31.08.2011 00:32, schrieb Laurent Pinchart:
>>>>> On Thursday 25 August 2011 09:44:10 Alexey Fisher wrote:
>>>>>> Hi Laurent,
>>>>>>
>>>>>> are there any reason why uvc_video_decode_start do not do precise
>>>>>> header size checks? Are there many cameras with broken header size
>>>>>> too?
>>>>>
>>>>> How precise do you mean ? The driver currently doesn't use much of the
>>>>> header, so it just makes sure that the header size is smaller than or
>>>>> equal to the packet size, and that it's at least 2 bytes long.
>>>>>
>>>>>> I send you patch on what i work now to catch streams with fragmented
>>>>>> packets.. what do you think about it? Will you apply some thing like
>>>>>> this?
>>>>>
>>>>> I'm not sure about that. Webcams that would require something like that
>>>>> are so broken that I'm tempted to consider them as not UVC-compliant.
>>>>> They should be returned to vendors with a loud complaint.
>>>>>
>>>>> Your patch might help, but the sad story is that it can't completely
>>>>> fix the streams. There's always a chance that fragmented packets that
>>>>> contains no header will start with data that looks like a header. You
>>>>> won't be able to find a buller-proof solution.
>>>>
>>>> You are right,
>>>> the idea is not to show definitely broken frames. If there is some thing
>>>> what we can't filter, is ok. we did our best.
>>>
>>> I understand. I'm not sure if this should be included in the mainline
>>> uvcvideo driver though. It makes the code more complex to support a
>>> couple of completely broken devices, and doesn't guarantee that those
>>> devices will work correctly.
>>
>> ok, i give up.
> 
> I'm sorry about that. I definitely appreciate the work you've done on this, 
> but as I said I don't think we should cripple the driver with complex code 
> just to try to support a bit better a webcam that is completely broken anyway.
> 
>>>> I just thinking about build in uvc compliance tester insight of the
>>>> module. Some thing what users can use right in shop or at home before
>>>> 14 day return guarantee.
>>>> You enables compliance test and it print results in in dmesg.  One of
>>>> test should be header check, error/drop rate, and so on.
>>>
>>> That's an interesting idea. It should probably come with a userspace
>>> stress test software as well.
>>
>> you mean luvcview or some thing other?
> 
> I'm thinking about a new command line software that would get/set controls at 
> high speed for instance, verify that all controls reported by the device are 
> actually supported, start/stop streaming multiple times, ... Something that 
> would stress the device and try to crash it (which is unfortunately often 
> quite easy :-)).

That's nice :)
and on kernel should provide file with statistics. Some thing like:
/sys/kernel/debug/uvcvideo/stats
It should have
- packet count
- frame count
- payloads with error bit
- empthy payloads
- overruns, and underruns (for row)
- jpeg completation (SOI - EOI)

Any thing else?


From stesind at googlemail.com  Wed Sep  7 11:08:42 2011
From: stesind at googlemail.com (Steffen)
Date: Wed, 07 Sep 2011 11:08:42 +0200
Subject: [Linux-uvc-devel] Microsoft Lifecam Cinema
In-Reply-To: <CAPueXH4HHb9mk1YLCDzsOXp-+Y93HbC487dHW--NyCQACNkLhg@mail.gmail.com>
References: <1315377124.2569.6.camel@steffen-MS-7588>
	<CAPueXH4HHb9mk1YLCDzsOXp-+Y93HbC487dHW--NyCQACNkLhg@mail.gmail.com>
Message-ID: <1315386522.2489.1.camel@steffen-MS-7588>

Hi Paolo,

Thank you for your answer!

I reduced the frame rate, resolution and changed the video codec. But
still the same. Sound and audio is still unsyncron in guvcview. Cheese
records all well but in 15 fps. 

Steffen


Am Mittwoch, den 07.09.2011, 09:35 +0100 schrieb Paulo Assis:
> Hi,
> guvcview detects some sync issues, it seems although you select 30
> fps, for that resolution (1280x720) your hardware is just not powerful
> enough to decode the MJPG stream and re-encode it with whatever coded
> you are using.
> Some solutions:
> -reduce the fps
> -reduce the resolution
> -try using a less resource demanding video codec (MJPG will save the
> video stream directly to disk, no compression is done in this case,
> but it generates a huge file if compared with any of the mpeg codecs)
> -use the matroska container instead of avi, it is much better since
> individual frames are timed stamped. Avi only sets a average fps (15
> according to your log)
> 
> Regards,
> Paulo
> 
> 2011/9/7 Steffen <stesind at googlemail.com>:
> > Hello,
> >
> > I am testing Microsoft Lifecam Cinema now, but I am not able to record
> > audio and video syncronusely with that cam and guvcview. The Logitech
> > C525 works but has a crappy image. Also cheese works with both cams but
> > has a little frame rate. Skype works for both.
> >
> > Do you have any ideas? I have already installed that medibuild version
> > of uvc and the latest guvcview from the ppa. But the same result even
> > with the old ubuntu natty versions.
> >
> > Steffen
> >
> >
> >
> >
> > _______________________________________________
> > Linux-uvc-devel mailing list
> > Linux-uvc-devel at lists.berlios.de
> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> >
> >




From pj.assis at gmail.com  Wed Sep  7 17:58:47 2011
From: pj.assis at gmail.com (Paulo Assis)
Date: Wed, 7 Sep 2011 16:58:47 +0100
Subject: [Linux-uvc-devel] Microsoft Lifecam Cinema
In-Reply-To: <1315386522.2489.1.camel@steffen-MS-7588>
References: <1315377124.2569.6.camel@steffen-MS-7588>
	<CAPueXH4HHb9mk1YLCDzsOXp-+Y93HbC487dHW--NyCQACNkLhg@mail.gmail.com>
	<1315386522.2489.1.camel@steffen-MS-7588>
Message-ID: <CAPueXH6iH_ZazfuU34J9LFEjjsLoRQDmYmvw=BvizvyybwbJrA@mail.gmail.com>

Hi,
if you are using any of the mpeg4 codecs, you will need a rather
powerful cpu for encoding at high frame rates, specially at any decent
resolution.
As an example I don't have any special problems with the following
configuration:

device input: MJPEG 800x600 at 25 fps
video codec - mpeg 4 - avc (h264)
audio codec - mpeg2
container - matroska

2.8.38 - 64bit kernel
hardware: intel QuadCore 2,8 Ghz (45nm), 4 GB ram

but if I increase the input to 30 fps I'll only get about 28 when encoding.

If you changed the codec to MJPEG, and still have issues then there
could be something wrong with your setup, is the audio OK except for
the sync issues? As for the sync issues, do you get the audio before
the video or vice versa ?

Regards,
Paulo


2011/9/7 Steffen <stesind at googlemail.com>:
> Hi Paolo,
>
> Thank you for your answer!
>
> I reduced the frame rate, resolution and changed the video codec. But
> still the same. Sound and audio is still unsyncron in guvcview. Cheese
> records all well but in 15 fps.
>
> Steffen
>
>
> Am Mittwoch, den 07.09.2011, 09:35 +0100 schrieb Paulo Assis:
>> Hi,
>> guvcview detects some sync issues, it seems although you select 30
>> fps, for that resolution (1280x720) your hardware is just not powerful
>> enough to decode the MJPG stream and re-encode it with whatever coded
>> you are using.
>> Some solutions:
>> -reduce the fps
>> -reduce the resolution
>> -try using a less resource demanding video codec (MJPG will save the
>> video stream directly to disk, no compression is done in this case,
>> but it generates a huge file if compared with any of the mpeg codecs)
>> -use the matroska container instead of avi, it is much better since
>> individual frames are timed stamped. Avi only sets a average fps (15
>> according to your log)
>>
>> Regards,
>> Paulo
>>
>> 2011/9/7 Steffen <stesind at googlemail.com>:
>> > Hello,
>> >
>> > I am testing Microsoft Lifecam Cinema now, but I am not able to record
>> > audio and video syncronusely with that cam and guvcview. The Logitech
>> > C525 works but has a crappy image. Also cheese works with both cams but
>> > has a little frame rate. Skype works for both.
>> >
>> > Do you have any ideas? I have already installed that medibuild version
>> > of uvc and the latest guvcview from the ppa. But the same result even
>> > with the old ubuntu natty versions.
>> >
>> > Steffen
>> >
>> >
>> >
>> >
>> > _______________________________________________
>> > Linux-uvc-devel mailing list
>> > Linux-uvc-devel at lists.berlios.de
>> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>> >
>> >
>
>
>


From stesind at googlemail.com  Wed Sep  7 18:14:18 2011
From: stesind at googlemail.com (Steffen)
Date: Wed, 07 Sep 2011 18:14:18 +0200
Subject: [Linux-uvc-devel] Microsoft Lifecam Cinema
In-Reply-To: <CAPueXH6iH_ZazfuU34J9LFEjjsLoRQDmYmvw=BvizvyybwbJrA@mail.gmail.com>
References: <1315377124.2569.6.camel@steffen-MS-7588>
	<CAPueXH4HHb9mk1YLCDzsOXp-+Y93HbC487dHW--NyCQACNkLhg@mail.gmail.com>
	<1315386522.2489.1.camel@steffen-MS-7588>
	<CAPueXH6iH_ZazfuU34J9LFEjjsLoRQDmYmvw=BvizvyybwbJrA@mail.gmail.com>
Message-ID: <1315412058.2466.4.camel@steffen-MS-7588>

Hi Paulo,

I am using a quite powerful PC i5 2.8 8 Gig RAM, ... and even with
lowest settings, 640 x 480 the result is the same. The audio always
comes out first. If I choose a different audio source like my other
Logitech C525 or Lifecam VX-2000 the recording of the Lifecam Cinema is
fine and even syncron to audio. So I think it is a guvcview - uvc
problem. In cheese it is also ok but cheese unfortunately records in low
frame rates.

Steffen




Am Mittwoch, den 07.09.2011, 16:58 +0100 schrieb Paulo Assis:
> Hi,
> if you are using any of the mpeg4 codecs, you will need a rather
> powerful cpu for encoding at high frame rates, specially at any decent
> resolution.
> As an example I don't have any special problems with the following
> configuration:
> 
> device input: MJPEG 800x600 at 25 fps
> video codec - mpeg 4 - avc (h264)
> audio codec - mpeg2
> container - matroska
> 
> 2.8.38 - 64bit kernel
> hardware: intel QuadCore 2,8 Ghz (45nm), 4 GB ram
> 
> but if I increase the input to 30 fps I'll only get about 28 when encoding.
> 
> If you changed the codec to MJPEG, and still have issues then there
> could be something wrong with your setup, is the audio OK except for
> the sync issues? As for the sync issues, do you get the audio before
> the video or vice versa ?
> 
> Regards,
> Paulo
> 
> 
> 2011/9/7 Steffen <stesind at googlemail.com>:
> > Hi Paolo,
> >
> > Thank you for your answer!
> >
> > I reduced the frame rate, resolution and changed the video codec. But
> > still the same. Sound and audio is still unsyncron in guvcview. Cheese
> > records all well but in 15 fps.
> >
> > Steffen
> >
> >
> > Am Mittwoch, den 07.09.2011, 09:35 +0100 schrieb Paulo Assis:
> >> Hi,
> >> guvcview detects some sync issues, it seems although you select 30
> >> fps, for that resolution (1280x720) your hardware is just not powerful
> >> enough to decode the MJPG stream and re-encode it with whatever coded
> >> you are using.
> >> Some solutions:
> >> -reduce the fps
> >> -reduce the resolution
> >> -try using a less resource demanding video codec (MJPG will save the
> >> video stream directly to disk, no compression is done in this case,
> >> but it generates a huge file if compared with any of the mpeg codecs)
> >> -use the matroska container instead of avi, it is much better since
> >> individual frames are timed stamped. Avi only sets a average fps (15
> >> according to your log)
> >>
> >> Regards,
> >> Paulo
> >>
> >> 2011/9/7 Steffen <stesind at googlemail.com>:
> >> > Hello,
> >> >
> >> > I am testing Microsoft Lifecam Cinema now, but I am not able to record
> >> > audio and video syncronusely with that cam and guvcview. The Logitech
> >> > C525 works but has a crappy image. Also cheese works with both cams but
> >> > has a little frame rate. Skype works for both.
> >> >
> >> > Do you have any ideas? I have already installed that medibuild version
> >> > of uvc and the latest guvcview from the ppa. But the same result even
> >> > with the old ubuntu natty versions.
> >> >
> >> > Steffen
> >> >
> >> >
> >> >
> >> >
> >> > _______________________________________________
> >> > Linux-uvc-devel mailing list
> >> > Linux-uvc-devel at lists.berlios.de
> >> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> >> >
> >> >
> >
> >
> >




From pj.assis at gmail.com  Thu Sep  8 00:15:19 2011
From: pj.assis at gmail.com (Paulo Assis)
Date: Wed, 7 Sep 2011 23:15:19 +0100
Subject: [Linux-uvc-devel] Microsoft Lifecam Cinema
In-Reply-To: <1315412058.2466.4.camel@steffen-MS-7588>
References: <1315377124.2569.6.camel@steffen-MS-7588>
	<CAPueXH4HHb9mk1YLCDzsOXp-+Y93HbC487dHW--NyCQACNkLhg@mail.gmail.com>
	<1315386522.2489.1.camel@steffen-MS-7588>
	<CAPueXH6iH_ZazfuU34J9LFEjjsLoRQDmYmvw=BvizvyybwbJrA@mail.gmail.com>
	<1315412058.2466.4.camel@steffen-MS-7588>
Message-ID: <CAPueXH689LpM2rPZx6n8_4Loqn0xJ4z8TXf4B9vV4v--Q2wZ6A@mail.gmail.com>

Hi,
Well if the audio comes first it means you are dropping audio frames
making audio capture shorter than video, this usually means issues
with the audio source, you seem to have confirmed this by changing to
another mic and verifying that the recorded video works fine in that
case.
There could be several reasons to why these audio frames are dropped,
from hardware/firmware to low level usb issues, does your dmesg output
prints anything related to  snd_usb_audio module?

Also are you sure cheese is using your camera mic? For what I
understand it always uses the system default audio input (in your case
is the pulse server virtual alsa device).

Regards,
Paulo


2011/9/7 Steffen <stesind at googlemail.com>:
> Hi Paulo,
>
> I am using a quite powerful PC i5 2.8 8 Gig RAM, ... and even with
> lowest settings, 640 x 480 the result is the same. The audio always
> comes out first. If I choose a different audio source like my other
> Logitech C525 or Lifecam VX-2000 the recording of the Lifecam Cinema is
> fine and even syncron to audio. So I think it is a guvcview - uvc
> problem. In cheese it is also ok but cheese unfortunately records in low
> frame rates.
>
> Steffen
>
>
>
>
> Am Mittwoch, den 07.09.2011, 16:58 +0100 schrieb Paulo Assis:
>> Hi,
>> if you are using any of the mpeg4 codecs, you will need a rather
>> powerful cpu for encoding at high frame rates, specially at any decent
>> resolution.
>> As an example I don't have any special problems with the following
>> configuration:
>>
>> device input: MJPEG 800x600 at 25 fps
>> video codec - mpeg 4 - avc (h264)
>> audio codec - mpeg2
>> container - matroska
>>
>> 2.8.38 - 64bit kernel
>> hardware: intel QuadCore 2,8 Ghz (45nm), 4 GB ram
>>
>> but if I increase the input to 30 fps I'll only get about 28 when encoding.
>>
>> If you changed the codec to MJPEG, and still have issues then there
>> could be something wrong with your setup, is the audio OK except for
>> the sync issues? As for the sync issues, do you get the audio before
>> the video or vice versa ?
>>
>> Regards,
>> Paulo
>>
>>
>> 2011/9/7 Steffen <stesind at googlemail.com>:
>> > Hi Paolo,
>> >
>> > Thank you for your answer!
>> >
>> > I reduced the frame rate, resolution and changed the video codec. But
>> > still the same. Sound and audio is still unsyncron in guvcview. Cheese
>> > records all well but in 15 fps.
>> >
>> > Steffen
>> >
>> >
>> > Am Mittwoch, den 07.09.2011, 09:35 +0100 schrieb Paulo Assis:
>> >> Hi,
>> >> guvcview detects some sync issues, it seems although you select 30
>> >> fps, for that resolution (1280x720) your hardware is just not powerful
>> >> enough to decode the MJPG stream and re-encode it with whatever coded
>> >> you are using.
>> >> Some solutions:
>> >> -reduce the fps
>> >> -reduce the resolution
>> >> -try using a less resource demanding video codec (MJPG will save the
>> >> video stream directly to disk, no compression is done in this case,
>> >> but it generates a huge file if compared with any of the mpeg codecs)
>> >> -use the matroska container instead of avi, it is much better since
>> >> individual frames are timed stamped. Avi only sets a average fps (15
>> >> according to your log)
>> >>
>> >> Regards,
>> >> Paulo
>> >>
>> >> 2011/9/7 Steffen <stesind at googlemail.com>:
>> >> > Hello,
>> >> >
>> >> > I am testing Microsoft Lifecam Cinema now, but I am not able to record
>> >> > audio and video syncronusely with that cam and guvcview. The Logitech
>> >> > C525 works but has a crappy image. Also cheese works with both cams but
>> >> > has a little frame rate. Skype works for both.
>> >> >
>> >> > Do you have any ideas? I have already installed that medibuild version
>> >> > of uvc and the latest guvcview from the ppa. But the same result even
>> >> > with the old ubuntu natty versions.
>> >> >
>> >> > Steffen
>> >> >
>> >> >
>> >> >
>> >> >
>> >> > _______________________________________________
>> >> > Linux-uvc-devel mailing list
>> >> > Linux-uvc-devel at lists.berlios.de
>> >> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>> >> >
>> >> >
>> >
>> >
>> >
>
>
>


From remco at webconquest.com  Thu Sep  8 07:31:53 2011
From: remco at webconquest.com (Remco Rijnders)
Date: Thu, 8 Sep 2011 07:31:53 +0200
Subject: [Linux-uvc-devel] Problem booting with kernel 3.0 and ASUS UVC
	webcams
Message-ID: <F$.DQC@r78.nl>

Hi all,

I'm not sure if this is the appropiate place and if this is a known issue 
or not, but one of our users as well as I myself ran into an issue where 
the combination of the webcam in an ASUS notebook and recent kernels 
result in the system not booting. See the report at 
https://bugs.mageia.org/show_bug.cgi?id=2425

I was hoping to have a look into this myself and see if I can find more 
information on the changes that would have caused this, but the 
instructions on the webpage for using git currently do not work due to the 
unavailability of git.kernel.org.

For what it's worth, kernel 2.6.38 worked without issues.

Any pointers or ideas are appreciated.

Kind regards,

Remco Rijnders
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 836 bytes
Desc: Digital signature
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110908/f1be6f12/attachment.pgp>

From bug-track at fisher-privat.net  Thu Sep  8 07:49:00 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Thu, 08 Sep 2011 07:49:00 +0200
Subject: [Linux-uvc-devel] Problem booting with kernel 3.0 and ASUS UVC
 webcams
In-Reply-To: <F$.DQC@r78.nl>
References: <F$.DQC@r78.nl>
Message-ID: <4E68574C.6020908@fisher-privat.net>

Hi,

to get the idea of what is wrong here, we need at least dmesg. If you 
can't provide dmesg, but you can compile kernel, do git bisect.
There is lots of howtos in internet about git bisect:

http://ivanz.com/2009/03/27/git-bisect-the-awesome-way-to-find-the-mr-bug-commit/


or read:
man git-bisect

if you have questions, ask :)

Regards,
	Alexey

Am 08.09.2011 07:31, schrieb Remco Rijnders:
> Hi all,
>
> I'm not sure if this is the appropiate place and if this is a known
> issue or not, but one of our users as well as I myself ran into an issue
> where the combination of the webcam in an ASUS notebook and recent
> kernels result in the system not booting. See the report at
> https://bugs.mageia.org/show_bug.cgi?id=2425
>
> I was hoping to have a look into this myself and see if I can find more
> information on the changes that would have caused this, but the
> instructions on the webpage for using git currently do not work due to
> the unavailability of git.kernel.org.
>
> For what it's worth, kernel 2.6.38 worked without issues.
>
> Any pointers or ideas are appreciated.
>
> Kind regards,
>
> Remco Rijnders
>
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel



From remco at webconquest.com  Thu Sep  8 08:07:30 2011
From: remco at webconquest.com (Remco Rijnders)
Date: Thu, 8 Sep 2011 08:07:30 +0200
Subject: [Linux-uvc-devel] Problem booting with kernel 3.0 and ASUS UVC
 webcams
In-Reply-To: <4E68574C.6020908@fisher-privat.net>
References: <F$.DQC@r78.nl>
 <4E68574C.6020908@fisher-privat.net>
Message-ID: <F&.OZO@r78.nl>

On Thu, Sep 08, 2011 at 07:49:00AM +0200, Alexey wrote in 
<4E68574C.6020908 at fisher-privat.net>:
>Hi,
>
>to get the idea of what is wrong here, we need at least dmesg. If you 
>can't provide dmesg, but you can compile kernel, do git bisect.

Hi Alexey,

I'll look into this further tonight when at home again.

A quick question which a quick google search did not answer for me: Is it 
possible to save the dmesg log when the system fails to boot? That is, is 
there a way to make it survive a reboot into a working kernel 
configuration?

Thanks and regards,

Remco
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 836 bytes
Desc: Digital signature
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110908/dbffbf36/attachment.pgp>

From bug-track at fisher-privat.net  Thu Sep  8 08:53:19 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Thu, 08 Sep 2011 08:53:19 +0200
Subject: [Linux-uvc-devel] Problem booting with kernel 3.0 and ASUS UVC
 webcams
In-Reply-To: <F&.OZO@r78.nl>
References: <F$.DQC@r78.nl> <4E68574C.6020908@fisher-privat.net>
	<F&.OZO@r78.nl>
Message-ID: <4E68665F.3090200@fisher-privat.net>

Am 08.09.2011 08:07, schrieb Remco Rijnders:
> On Thu, Sep 08, 2011 at 07:49:00AM +0200, Alexey wrote in
> <4E68574C.6020908 at fisher-privat.net>:
>> Hi,
>>
>> to get the idea of what is wrong here, we need at least dmesg. If you
>> can't provide dmesg, but you can compile kernel, do git bisect.
>
> Hi Alexey,
>
> I'll look into this further tonight when at home again.
>
> A quick question which a quick google search did not answer for me: Is
> it possible to save the dmesg log when the system fails to boot? That
> is, is there a way to make it survive a reboot into a working kernel
> configuration?
>
> Thanks and regards,

You can use netconsole:
http://www.tocpcs.com/howto-log-a-kernel-panic-it-can-be-done/

or attach usb-serial adapter and log the dmegs over serial on other computer
For both his methods you need  second computer.

or boot in verbose mode, no splash screen or so, and make a photo of log 
from display.  Here you will need only one computer.


From laurent.pinchart at ideasonboard.com  Thu Sep  8 10:32:37 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Thu, 8 Sep 2011 10:32:37 +0200
Subject: [Linux-uvc-devel] uvc header question
In-Reply-To: <4E672F71.7070306@fisher-privat.net>
References: <4E55FD4A.9080906@fisher-privat.net>
	<201109071005.44868.laurent.pinchart@ideasonboard.com>
	<4E672F71.7070306@fisher-privat.net>
Message-ID: <201109081032.38179.laurent.pinchart@ideasonboard.com>

Hi Alexey,

On Wednesday 07 September 2011 10:46:41 Alexey Fisher wrote:
> On 07.09.2011 10:05, Laurent Pinchart wrote:
> > On Wednesday 07 September 2011 08:14:45 Alexey Fisher wrote:
> >> Am 06.09.2011 17:24, schrieb Laurent Pinchart:
> >>> On Monday 05 September 2011 17:48:42 Alexey Fisher wrote:
> >>>> Am 31.08.2011 00:32, schrieb Laurent Pinchart:
> >>>>> On Thursday 25 August 2011 09:44:10 Alexey Fisher wrote:
> >>>>>> Hi Laurent,
> >>>>>> 
> >>>>>> are there any reason why uvc_video_decode_start do not do precise
> >>>>>> header size checks? Are there many cameras with broken header size
> >>>>>> too?
> >>>>> 
> >>>>> How precise do you mean ? The driver currently doesn't use much of
> >>>>> the header, so it just makes sure that the header size is smaller
> >>>>> than or equal to the packet size, and that it's at least 2 bytes
> >>>>> long.
> >>>>> 
> >>>>>> I send you patch on what i work now to catch streams with fragmented
> >>>>>> packets.. what do you think about it? Will you apply some thing like
> >>>>>> this?
> >>>>> 
> >>>>> I'm not sure about that. Webcams that would require something like
> >>>>> that are so broken that I'm tempted to consider them as not
> >>>>> UVC-compliant. They should be returned to vendors with a loud
> >>>>> complaint.
> >>>>> 
> >>>>> Your patch might help, but the sad story is that it can't completely
> >>>>> fix the streams. There's always a chance that fragmented packets that
> >>>>> contains no header will start with data that looks like a header. You
> >>>>> won't be able to find a buller-proof solution.
> >>>> 
> >>>> You are right,
> >>>> the idea is not to show definitely broken frames. If there is some
> >>>> thing what we can't filter, is ok. we did our best.
> >>> 
> >>> I understand. I'm not sure if this should be included in the mainline
> >>> uvcvideo driver though. It makes the code more complex to support a
> >>> couple of completely broken devices, and doesn't guarantee that those
> >>> devices will work correctly.
> >> 
> >> ok, i give up.
> > 
> > I'm sorry about that. I definitely appreciate the work you've done on
> > this, but as I said I don't think we should cripple the driver with
> > complex code just to try to support a bit better a webcam that is
> > completely broken anyway.
> > 
> >>>> I just thinking about build in uvc compliance tester insight of the
> >>>> module. Some thing what users can use right in shop or at home before
> >>>> 14 day return guarantee.
> >>>> You enables compliance test and it print results in in dmesg.  One of
> >>>> test should be header check, error/drop rate, and so on.
> >>> 
> >>> That's an interesting idea. It should probably come with a userspace
> >>> stress test software as well.
> >> 
> >> you mean luvcview or some thing other?
> > 
> > I'm thinking about a new command line software that would get/set
> > controls at high speed for instance, verify that all controls reported
> > by the device are actually supported, start/stop streaming multiple
> > times, ... Something that would stress the device and try to crash it
> > (which is unfortunately often quite easy :-)).
> 
> That's nice :)
> and on kernel should provide file with statistics. Some thing like:
> /sys/kernel/debug/uvcvideo/stats
> It should have
> - packet count
> - frame count
> - payloads with error bit
> - empthy payloads
> - overruns, and underruns (for row)
> - jpeg completation (SOI - EOI)

I don't think the driver should parse MJPEG data to extract markers. This can 
be done by the userspace application.

> Any thing else?

The number of failed and total control requests would also be interesting. 
Statistics about the status endpoint would also be interesting, to verify that 
the device correctly sends control change events for instance (although those 
are not properly supported in the driver yet).

-- 
Regards,

Laurent Pinchart


From katerina1248 at gmail.com  Thu Sep  8 22:59:17 2011
From: katerina1248 at gmail.com (Kate Shiffer)
Date: Thu, 8 Sep 2011 20:59:17 +0000 (UTC)
Subject: [Linux-uvc-devel] Webcam with H264 encoder not in Devicelist
References: <804463466.358092.1308200212914.JavaMail.root@ahm.einfochips.com>
	<1308206162.4182.2.camel@mini>
	<loom.20110826T203852-192@post.gmane.org>
Message-ID: <loom.20110908T224605-988@post.gmane.org>


Robert Krakora <rob.krakora <at> messagenetsystems.com> writes:

> 
> Hello,
> 
> I just mentioned in a previous post that I have the B990 streaming H.264 with
> Stephan's patches for v4l2 and some patches to GStreamer plugins-good for the
> v4l2src element.  There were two additional changes I made beyond Stephan's 
that
> I believe are necessary.  I have this running on CentOS 6.0 with GStreamer
> 0.10.35 and GStreamer plugins-good 0.10.30 (patched).  Logitech does NOT 
follow
> the specification that they co-authored and submitted to USB-IF where H.264
> content is multiplexed in the Motion JPEG container.  It is merely exposed as
> another interface in the one and only configuration identified by the H.264
> GUID.  I posted a question to Logitech about how to gain access to the 
encoder
> controls via the XUs but have heard nothing back yet.
> 
> Best Regards,
> 
> Rob Krakora
> 



rob,

i just acquired the B990 as well.  would you mind posting links to the patches 
you mentioned and the additional changes you made?  i'm trying to get the B990 
running with GStreamer (ultimately on windows, but i think looking at the 
linux code will help).

if i understand you correctly, the B990 delivers the H.264 stream (identified 
by the H.264 GUID) separately from the MJPG stream?  they are not muxed 
together?  so it can deliver either H.264 or MJPG stream, but not both at the 
same time?

thanks,
kate




From srinivas.mandavilli at lucivid.com  Fri Sep  9 08:42:03 2011
From: srinivas.mandavilli at lucivid.com (Srinivas Mandavilli)
Date: Thu, 8 Sep 2011 23:42:03 -0700 (PDT)
Subject: [Linux-uvc-devel] Webcam with H264 encoder not in Devicelist
In-Reply-To: <871992206.15615.1314796333706.JavaMail.root@ahm.einfochips.com>
Message-ID: <1315550523.13517.YahooMailClassic@web2814.biz.mail.ne1.yahoo.com>

Hi Robert,
Can you please share you plugins-good? patch?

Thanks and Regards,
Srini



--- On Wed, 31/8/11, Ajay Bhargav <ajay.bhargav at einfochips.com> wrote:

From: Ajay Bhargav <ajay.bhargav at einfochips.com>
Subject: Re: [Linux-uvc-devel] Webcam with H264 encoder not in Devicelist
To: "Robert Krakora" <rob.krakora at messagenetsystems.com>
Cc: linux-uvc-devel at lists.berlios.de
Date: Wednesday, 31 August, 2011, 6:42 PM

#yiv172975403 p {margin:0;}
----- "Robert Krakora" <rob.krakora at messagenetsystems.com> wrote:

Hi All,

So, to test H.264, I used GStreamer 0.10.35 (+plugins-base 0.10.35) and plugins-good 0.10.30 with the attached patch applied.? I also attached the previous patch that I sent you for uvc_video.c for v4l2.? Also, I have the Fluendo Codec Bundle installed (www.fluendo.com).? GStreamer is available at www.gstreamer.net.


To test H.264 from the B990 I used this command line:

gst-launch -vvv v4l2src device=/dev/video0 ! video/x-h264, width=1280, height=720, framerate=30/1 ! fluh264dec ! xvimagesink sync=false

To test MPEG2 TS from the FaceVsion Touchcam E1 I used this command line:


gst-launch -vvv v4l2src device=/dev/video0 ! video/mpegts ! mpegtsdemux ! fluh264dec ! xvimagesink sync=false

Best Regards,

-- 
Rob Krakora

MessageNet Systems


101 East Carmel Dr. Suite 105


Carmel, IN 46032


(317)566-1677 Ext 212

(317)663-0808 Fax




Hi Rob,

Thank you so so much I will test and let you know. 

Regards,
Ajay Bhargav

-----Inline Attachment Follows-----

_______________________________________________
Linux-uvc-devel mailing list
Linux-uvc-devel at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110908/29fbca77/attachment.html>

From ajay.bhargav at einfochips.com  Fri Sep  9 08:44:22 2011
From: ajay.bhargav at einfochips.com (Ajay Bhargav)
Date: Fri, 9 Sep 2011 12:14:22 +0530 (IST)
Subject: [Linux-uvc-devel] Webcam with H264 encoder not in Devicelist
In-Reply-To: <75907433.52624.1315550561738.JavaMail.root@ahm.einfochips.com>
Message-ID: <1453703659.52628.1315550662003.JavaMail.root@ahm.einfochips.com>

Hi Srinivas, 

Patches are attached here... There are more modifications I did to uvc_video to set size of buffer + fid bit toggle after 44 MPEG2-TS packets. What kind of camera are you using? 

Regards, 
Ajay Bhargav 

----- "Srinivas Mandavilli" <srinivas.mandavilli at lucivid.com> wrote: 


Hi Robert, 
Can you please share you plugins-good patch? 

Thanks and Regards, 
Srini 



--- On Wed, 31/8/11, Ajay Bhargav <ajay.bhargav at einfochips.com> wrote: 



From: Ajay Bhargav <ajay.bhargav at einfochips.com> 
Subject: Re: [Linux-uvc-devel] Webcam with H264 encoder not in Devicelist 
To: "Robert Krakora" <rob.krakora at messagenetsystems.com> 
Cc: linux-uvc-devel at lists.berlios.de 
Date: Wednesday, 31 August, 2011, 6:42 PM 




----- "Robert Krakora" <rob.krakora at messagenetsystems.com> wrote: 


Hi All, 

So, to test H.264, I used GStreamer 0.10.35 (+plugins-base 0.10.35) and plugins-good 0.10.30 with the attached patch applied. I also attached the previous patch that I sent you for uvc_video.c for v4l2. Also, I have the Fluendo Codec Bundle installed ( www.fluendo.com ). GStreamer is available at www.gstreamer.net . 

To test H.264 from the B990 I used this command line: 

gst-launch -vvv v4l2src device=/dev/video0 ! video/x-h264, width=1280, height=720, framerate=30/1 ! fluh264dec ! xvimagesink sync=false 

To test MPEG2 TS from the FaceVsion Touchcam E1 I used this command line: 

gst-launch -vvv v4l2src device=/dev/video0 ! video/mpegts ! mpegtsdemux ! fluh264dec ! xvimagesink sync=false 

Best Regards, 

-- 
Rob Krakora 
MessageNet Systems 
101 East Carmel Dr. Suite 105 
Carmel, IN 46032 
(317)566-1677 Ext 212 
(317)663-0808 Fax 

Hi Rob, 

Thank you so so much I will test and let you know. 

Regards, 
Ajay Bhargav 

-----Inline Attachment Follows----- 


_______________________________________________ 
Linux-uvc-devel mailing list 
Linux-uvc-devel at lists.berlios.de 
https://lists.berlios.de/mailman/listinfo/linux-uvc-devel 

-- 
This message has been scanned for viruses and 
dangerous content by Clean Mail Gateway , and is 
believed to be clean. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110909/e902b39b/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gst-plugins-good-0.10.30.patch
Type: text/x-patch
Size: 3999 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110909/e902b39b/attachment.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: uvc_video.patch
Type: text/x-patch
Size: 1752 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110909/e902b39b/attachment-0001.bin>

From srinivas.mandavilli at lucivid.com  Fri Sep  9 09:01:58 2011
From: srinivas.mandavilli at lucivid.com (Srinivas Mandavilli)
Date: Fri, 9 Sep 2011 00:01:58 -0700 (PDT)
Subject: [Linux-uvc-devel] Webcam with H264 encoder not in Devicelist
In-Reply-To: <1453703659.52628.1315550662003.JavaMail.root@ahm.einfochips.com>
Message-ID: <1315551718.35833.YahooMailClassic@web2814.biz.mail.ne1.yahoo.com>

Thanks Ajay! I just got a B990, and am trying to stream out H264.

Srini


--- On Fri, 9/9/11, Ajay Bhargav <ajay.bhargav at einfochips.com> wrote:

From: Ajay Bhargav <ajay.bhargav at einfochips.com>
Subject: Re: [Linux-uvc-devel] Webcam with H264 encoder not in Devicelist
To: "Srinivas Mandavilli" <srinivas.mandavilli at lucivid.com>
Cc: linux-uvc-devel at lists.berlios.de, "Robert Krakora" <rob.krakora at messagenetsystems.com>
Date: Friday, 9 September, 2011, 12:14 PM

#yiv1264946079 p {margin:0;}Hi Srinivas,

Patches are attached here... There are more modifications I did to uvc_video to set size of buffer + fid bit toggle after 44 MPEG2-TS packets. What kind of camera are you using?

Regards,
Ajay Bhargav

----- "Srinivas Mandavilli" <srinivas.mandavilli at lucivid.com> wrote:

Hi Robert,
Can you please share you plugins-good? patch?

Thanks and Regards,
Srini



--- On Wed, 31/8/11, Ajay Bhargav <ajay.bhargav at einfochips.com> wrote:

From: Ajay Bhargav <ajay.bhargav at einfochips.com>
Subject: Re: [Linux-uvc-devel] Webcam with H264 encoder not in Devicelist
To: "Robert Krakora" <rob.krakora at messagenetsystems.com>
Cc: linux-uvc-devel at lists.berlios.de
Date: Wednesday, 31 August, 2011, 6:42 PM

#yiv1264946079  p {margin:0;}
----- "Robert Krakora" <rob.krakora at messagenetsystems.com> wrote:

Hi All,

So, to test H.264, I used GStreamer 0.10.35 (+plugins-base 0.10.35) and plugins-good 0.10.30 with the attached patch applied.? I also attached the previous patch that I sent you for uvc_video.c for v4l2.? Also, I have the Fluendo Codec Bundle installed (www.fluendo.com).? GStreamer is available at www.gstreamer.net.


To test H.264 from the B990 I used this command line:

gst-launch -vvv v4l2src device=/dev/video0 ! video/x-h264, width=1280, height=720, framerate=30/1 ! fluh264dec ! xvimagesink sync=false

To test MPEG2 TS from the FaceVsion Touchcam E1 I used this command line:


gst-launch -vvv v4l2src device=/dev/video0 ! video/mpegts ! mpegtsdemux ! fluh264dec ! xvimagesink sync=false

Best Regards,

-- 
Rob Krakora

MessageNet Systems


101 East Carmel Dr. Suite 105


Carmel, IN 46032


(317)566-1677 Ext 212

(317)663-0808 Fax




Hi Rob,

Thank you so so much I will test and let you know. 

Regards,
Ajay Bhargav

-----Inline Attachment Follows-----

_______________________________________________
Linux-uvc-devel mailing list
Linux-uvc-devel at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/linux-uvc-devel

-- 

This message has been scanned for viruses and

dangerous content by
Clean Mail Gateway, and is

believed to be clean.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110909/ced37de5/attachment.html>

From max.lapshin at gmail.com  Fri Sep  9 09:06:42 2011
From: max.lapshin at gmail.com (Max Lapshin)
Date: Fri, 9 Sep 2011 11:06:42 +0400
Subject: [Linux-uvc-devel] Webcam with H264 encoder not in Devicelist
In-Reply-To: <1315551718.35833.YahooMailClassic@web2814.biz.mail.ne1.yahoo.com>
References: <1453703659.52628.1315550662003.JavaMail.root@ahm.einfochips.com>
	<1315551718.35833.YahooMailClassic@web2814.biz.mail.ne1.yahoo.com>
Message-ID: <CAMxVRxDsLsbj4Pp3eEj0vuXJSjRBsWUG=oYGFrKU_1OOETiBRg@mail.gmail.com>

On Fri, Sep 9, 2011 at 11:01 AM, Srinivas Mandavilli <
srinivas.mandavilli at lucivid.com> wrote:

> Thanks Ajay! I just got a B990, and am trying to stream out H264.
>
> Hi, Srinivas. Be so kind: if you will have success with it, write an email:
what kernel version are you using?

I failed to do it with kernel 3.0.0
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110909/10ac56bb/attachment.html>

From ajay.bhargav at einfochips.com  Fri Sep  9 08:57:44 2011
From: ajay.bhargav at einfochips.com (Ajay Bhargav)
Date: Fri, 9 Sep 2011 12:27:44 +0530 (IST)
Subject: [Linux-uvc-devel] Webcam with H264 encoder not in Devicelist
In-Reply-To: <CAMxVRxDsLsbj4Pp3eEj0vuXJSjRBsWUG=oYGFrKU_1OOETiBRg@mail.gmail.com>
Message-ID: <2023972154.52739.1315551464463.JavaMail.root@ahm.einfochips.com>

Hi Srinivas, 

UVC fixes wont be needed for you to get your cam output.. 

You can build gstreamer0.10-ffmpeg to decode H.264 stream, Robert has used fluendo package for decoding. 

--Ajay 

----- "Max Lapshin" <max.lapshin at gmail.com> wrote: 





On Fri, Sep 9, 2011 at 11:01 AM, Srinivas Mandavilli < srinivas.mandavilli at lucivid.com > wrote: 


Thanks Ajay! I just got a B990, and am trying to stream out H264. 


Hi, Srinivas. Be so kind: if you will have success with it, write an email: what kernel version are you using? 

I failed to do it with kernel 3.0.0 

-- 
This message has been scanned for viruses and 
dangerous content by Clean Mail Gateway , and is 
believed to be clean. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110909/09aabcb6/attachment.html>

From pj.assis at gmail.com  Fri Sep  9 10:43:04 2011
From: pj.assis at gmail.com (Paulo Assis)
Date: Fri, 9 Sep 2011 09:43:04 +0100
Subject: [Linux-uvc-devel] Webcam with H264 encoder not in Devicelist
In-Reply-To: <2023972154.52739.1315551464463.JavaMail.root@ahm.einfochips.com>
References: <CAMxVRxDsLsbj4Pp3eEj0vuXJSjRBsWUG=oYGFrKU_1OOETiBRg@mail.gmail.com>
	<2023972154.52739.1315551464463.JavaMail.root@ahm.einfochips.com>
Message-ID: <CAPueXH5BuPjX9+=r4mPV_sHyRzEWLQJzcsXSe6Xdcdy_x3m5GQ@mail.gmail.com>

Hi,
I would like to add support for H.264 stream format in guvcview, Could you
post some stream info, or even better an example of raw data output (does
the capture buffer contains an exact frame like in MJPEG ?)

Regards,
Paulo

2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com>

> Hi Srinivas,
>
> UVC fixes wont be needed for you to get your cam output..
>
> You can build gstreamer0.10-ffmpeg to decode H.264 stream, Robert has used
> fluendo package for decoding.
>
> --Ajay
>
>
> ----- "Max Lapshin" <max.lapshin at gmail.com> wrote:
>
>
>
> On Fri, Sep 9, 2011 at 11:01 AM, Srinivas Mandavilli <
> srinivas.mandavilli at lucivid.com> wrote:
>
>> Thanks Ajay! I just got a B990, and am trying to stream out H264.
>>
>> Hi, Srinivas. Be so kind: if you will have success with it, write an
> email: what kernel version are you using?
>
> I failed to do it with kernel 3.0.0
>
> --
> This message has been scanned for viruses and
> dangerous content by *Clean Mail Gateway*<http://www.CleanMailGateway.com/>,
> and is
> believed to be clean.
>
>
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110909/d9d07ae6/attachment.html>

From ajay.bhargav at einfochips.com  Fri Sep  9 10:46:16 2011
From: ajay.bhargav at einfochips.com (Ajay Bhargav)
Date: Fri, 9 Sep 2011 14:16:16 +0530 (IST)
Subject: [Linux-uvc-devel] Webcam with H264 encoder not in Devicelist
In-Reply-To: <1654863996.53145.1315557743166.JavaMail.root@ahm.einfochips.com>
Message-ID: <739004922.53186.1315557975986.JavaMail.root@ahm.einfochips.com>

Hi Paulo, 

I am not having H.264 camera, My camera is similar to Facevision's Touchcam E1. It sends out MPEG2-TS stream encoded with H.264. I have recorded some videos during my testing if that is fine for you I can send across... it would be great if guvcview can show compressed streams :) we can make use of gstreamer to achieve this.. 

-- Ajay Bhargav 

----- "Paulo Assis" <pj.assis at gmail.com> wrote: 


Hi, 
I would like to add support for H.264 stream format in guvcview, Could you post some stream info, or even better an example of raw data output (does the capture buffer contains an exact frame like in MJPEG ?) 

Regards, 
Paulo 


2011/9/9 Ajay Bhargav < ajay.bhargav at einfochips.com > 




Hi Srinivas, 

UVC fixes wont be needed for you to get your cam output.. 

You can build gstreamer0.10-ffmpeg to decode H.264 stream, Robert has used fluendo package for decoding. 

--Ajay 




----- "Max Lapshin" < max.lapshin at gmail.com > wrote: 








On Fri, Sep 9, 2011 at 11:01 AM, Srinivas Mandavilli < srinivas.mandavilli at lucivid.com > wrote: 


Thanks Ajay! I just got a B990, and am trying to stream out H264. 


Hi, Srinivas. Be so kind: if you will have success with it, write an email: what kernel version are you using? 

I failed to do it with kernel 3.0.0 


-- 
This message has been scanned for viruses and 
dangerous content by Clean Mail Gateway , and is 
believed to be clean. 

_______________________________________________ 
Linux-uvc-devel mailing list 
Linux-uvc-devel at lists.berlios.de 
https://lists.berlios.de/mailman/listinfo/linux-uvc-devel 



-- 
This message has been scanned for viruses and 
dangerous content by Clean Mail Gateway , and is 
believed to be clean. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110909/11ef0517/attachment.html>

From pj.assis at gmail.com  Fri Sep  9 13:23:14 2011
From: pj.assis at gmail.com (Paulo Assis)
Date: Fri, 9 Sep 2011 12:23:14 +0100
Subject: [Linux-uvc-devel] Webcam with H264 encoder not in Devicelist
In-Reply-To: <739004922.53186.1315557975986.JavaMail.root@ahm.einfochips.com>
References: <1654863996.53145.1315557743166.JavaMail.root@ahm.einfochips.com>
	<739004922.53186.1315557975986.JavaMail.root@ahm.einfochips.com>
Message-ID: <CAPueXH6f6A594ynxtC=nDENU-M51N4tTW7KTXXRkGDusxThJqw@mail.gmail.com>

Hi,
I was thinking on using ffmpeg (libavcodec) since this is already a guvcview
dependency for enconding the streams, decoding them shouldn't be to hard, I
just need to understand how they are handled by the driver.
This is the reason I need the raw data, you should be able to use the v4l2
capture example to store the buffer data as delivered by the driver
(something like buffer-1.raw,...,buffer-n.raw would be nice), or I can send
you some code for doing this if you prefer.

Regards,
Paulo

2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com>

> Hi Paulo,
>
> I am not having H.264 camera, My camera is similar to Facevision's Touchcam
> E1. It sends out MPEG2-TS stream encoded with H.264. I have recorded some
> videos during my testing if that is fine for you I can send across... it
> would be great if guvcview can show compressed streams :) we can make use of
> gstreamer to achieve this..
>
> -- Ajay Bhargav
>
>
> ----- "Paulo Assis" <pj.assis at gmail.com> wrote:
>
> Hi,
> I would like to add support for H.264 stream format in guvcview, Could you
> post some stream info, or even better an example of raw data output (does
> the capture buffer contains an exact frame like in MJPEG ?)
>
> Regards,
> Paulo
>
> 2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com>
>
>> Hi Srinivas,
>>
>> UVC fixes wont be needed for you to get your cam output..
>>
>> You can build gstreamer0.10-ffmpeg to decode H.264 stream, Robert has used
>> fluendo package for decoding.
>>
>> --Ajay
>>
>>
>> ----- "Max Lapshin" <max.lapshin at gmail.com> wrote:
>>
>>
>>
>> On Fri, Sep 9, 2011 at 11:01 AM, Srinivas Mandavilli <
>> srinivas.mandavilli at lucivid.com> wrote:
>>
>>> Thanks Ajay! I just got a B990, and am trying to stream out H264.
>>>
>>> Hi, Srinivas. Be so kind: if you will have success with it, write an
>> email: what kernel version are you using?
>>
>> I failed to do it with kernel 3.0.0
>>
>> --
>> This message has been scanned for viruses and
>> dangerous content by *Clean Mail Gateway*<http://www.CleanMailGateway.com/>,
>> and is
>> believed to be clean.
>>
>>
>>
>> _______________________________________________
>> Linux-uvc-devel mailing list
>> Linux-uvc-devel at lists.berlios.de
>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>
>>
>
> --
> This message has been scanned for viruses and
> dangerous content by *Clean Mail Gateway*<http://www.CleanMailGateway.com/>,
> and is
> believed to be clean.
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110909/2e034f24/attachment.html>

From bug-track at fisher-privat.net  Fri Sep  9 13:41:36 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Fri, 09 Sep 2011 13:41:36 +0200
Subject: [Linux-uvc-devel] Webcam with H264 encoder not in Devicelist
In-Reply-To: <CAPueXH6f6A594ynxtC=nDENU-M51N4tTW7KTXXRkGDusxThJqw@mail.gmail.com>
References: <1654863996.53145.1315557743166.JavaMail.root@ahm.einfochips.com>
	<739004922.53186.1315557975986.JavaMail.root@ahm.einfochips.com>
	<CAPueXH6f6A594ynxtC=nDENU-M51N4tTW7KTXXRkGDusxThJqw@mail.gmail.com>
Message-ID: <4E69FB70.4000406@fisher-privat.net>

Hi Paulo,

i have video dump from Robert, not v4l2... The problem with it is codec. 
It seems to be some SVC variant of h264 and ffmpeg can't play it 
correctly. Robert say, currently only fluh264dec (flyendo plugin for 
gstreamer) can play it.

Am 09.09.2011 13:23, schrieb Paulo Assis:
> Hi,
> I was thinking on using ffmpeg (libavcodec) since this is already a
> guvcview dependency for enconding the streams, decoding them shouldn't
> be to hard, I just need to understand how they are handled by the driver.
> This is the reason I need the raw data, you should be able to use the
> v4l2 capture example to store the buffer data as delivered by the driver
> (something like buffer-1.raw,...,buffer-n.raw would be nice), or I can
> send you some code for doing this if you prefer.
>
> Regards,
> Paulo
>
> 2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com
> <mailto:ajay.bhargav at einfochips.com>>
>
>     Hi Paulo,
>
>     I am not having H.264 camera, My camera is similar to Facevision's
>     Touchcam E1. It sends out MPEG2-TS stream encoded with H.264. I have
>     recorded some videos during my testing if that is fine for you I can
>     send across... it would be great if guvcview can show compressed
>     streams :) we can make use of gstreamer to achieve this..
>
>     -- Ajay Bhargav
>
>
>     ----- "Paulo Assis" <pj.assis at gmail.com <mailto:pj.assis at gmail.com>>
>     wrote:
>
>         Hi,
>         I would like to add support for H.264 stream format in guvcview,
>         Could you post some stream info, or even better an example of
>         raw data output (does the capture buffer contains an exact frame
>         like in MJPEG ?)
>
>         Regards,
>         Paulo
>
>         2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com
>         <mailto:ajay.bhargav at einfochips.com>>
>
>             Hi Srinivas,
>
>             UVC fixes wont be needed for you to get your cam output..
>
>             You can build gstreamer0.10-ffmpeg to decode H.264 stream,
>             Robert has used fluendo package for decoding.
>
>             --Ajay
>
>
>             ----- "Max Lapshin" <max.lapshin at gmail.com
>             <mailto:max.lapshin at gmail.com>> wrote:
>
>
>
>                 On Fri, Sep 9, 2011 at 11:01 AM, Srinivas Mandavilli
>                 <srinivas.mandavilli at lucivid.com
>                 <mailto:srinivas.mandavilli at lucivid.com>> wrote:
>
>                     Thanks Ajay! I just got a B990, and am trying to
>                     stream out H264.
>
>                 Hi, Srinivas. Be so kind: if you will have success with
>                 it, write an email: what kernel version are you using?
>
>                 I failed to do it with kernel 3.0.0
>
>                 --
>                 This message has been scanned for viruses and
>                 dangerous content by *Clean Mail Gateway*
>                 <http://www.CleanMailGateway.com/>, and is
>                 believed to be clean.
>
>
>
>             _______________________________________________
>             Linux-uvc-devel mailing list
>             Linux-uvc-devel at lists.berlios.de
>             <mailto:Linux-uvc-devel at lists.berlios.de>
>             https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>
>
>         --
>         This message has been scanned for viruses and
>         dangerous content by *Clean Mail Gateway*
>         <http://www.CleanMailGateway.com/>, and is
>         believed to be clean.
>
>
>
>
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel



From pj.assis at gmail.com  Fri Sep  9 15:19:51 2011
From: pj.assis at gmail.com (Paulo Assis)
Date: Fri, 9 Sep 2011 14:19:51 +0100
Subject: [Linux-uvc-devel] Webcam with H264 encoder not in Devicelist
In-Reply-To: <4E69FB70.4000406@fisher-privat.net>
References: <1654863996.53145.1315557743166.JavaMail.root@ahm.einfochips.com>
	<739004922.53186.1315557975986.JavaMail.root@ahm.einfochips.com>
	<CAPueXH6f6A594ynxtC=nDENU-M51N4tTW7KTXXRkGDusxThJqw@mail.gmail.com>
	<4E69FB70.4000406@fisher-privat.net>
Message-ID: <CAPueXH6i=gJpBnH675yRvsi732nFjTjCUm0FJoKawUmYwrETRA@mail.gmail.com>

Hi,
have you tried the open svc decoder (
http://sourceforge.net/projects/opensvcdecoder/ ) ?

It would probably be easier to add as dependency.

Regards,
Paulo

2011/9/9 Alexey Fisher <bug-track at fisher-privat.net>:
> Hi Paulo,
>
> i have video dump from Robert, not v4l2... The problem with it is codec. It
> seems to be some SVC variant of h264 and ffmpeg can't play it correctly.
> Robert say, currently only fluh264dec (flyendo plugin for gstreamer) can
> play it.
>
> Am 09.09.2011 13:23, schrieb Paulo Assis:
>>
>> Hi,
>> I was thinking on using ffmpeg (libavcodec) since this is already a
>> guvcview dependency for enconding the streams, decoding them shouldn't
>> be to hard, I just need to understand how they are handled by the driver.
>> This is the reason I need the raw data, you should be able to use the
>> v4l2 capture example to store the buffer data as delivered by the driver
>> (something like buffer-1.raw,...,buffer-n.raw would be nice), or I can
>> send you some code for doing this if you prefer.
>>
>> Regards,
>> Paulo
>>
>> 2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com
>> <mailto:ajay.bhargav at einfochips.com>>
>>
>> ? ?Hi Paulo,
>>
>> ? ?I am not having H.264 camera, My camera is similar to Facevision's
>> ? ?Touchcam E1. It sends out MPEG2-TS stream encoded with H.264. I have
>> ? ?recorded some videos during my testing if that is fine for you I can
>> ? ?send across... it would be great if guvcview can show compressed
>> ? ?streams :) we can make use of gstreamer to achieve this..
>>
>> ? ?-- Ajay Bhargav
>>
>>
>> ? ?----- "Paulo Assis" <pj.assis at gmail.com <mailto:pj.assis at gmail.com>>
>> ? ?wrote:
>>
>> ? ? ? ?Hi,
>> ? ? ? ?I would like to add support for H.264 stream format in guvcview,
>> ? ? ? ?Could you post some stream info, or even better an example of
>> ? ? ? ?raw data output (does the capture buffer contains an exact frame
>> ? ? ? ?like in MJPEG ?)
>>
>> ? ? ? ?Regards,
>> ? ? ? ?Paulo
>>
>> ? ? ? ?2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com
>> ? ? ? ?<mailto:ajay.bhargav at einfochips.com>>
>>
>> ? ? ? ? ? ?Hi Srinivas,
>>
>> ? ? ? ? ? ?UVC fixes wont be needed for you to get your cam output..
>>
>> ? ? ? ? ? ?You can build gstreamer0.10-ffmpeg to decode H.264 stream,
>> ? ? ? ? ? ?Robert has used fluendo package for decoding.
>>
>> ? ? ? ? ? ?--Ajay
>>
>>
>> ? ? ? ? ? ?----- "Max Lapshin" <max.lapshin at gmail.com
>> ? ? ? ? ? ?<mailto:max.lapshin at gmail.com>> wrote:
>>
>>
>>
>> ? ? ? ? ? ? ? ?On Fri, Sep 9, 2011 at 11:01 AM, Srinivas Mandavilli
>> ? ? ? ? ? ? ? ?<srinivas.mandavilli at lucivid.com
>> ? ? ? ? ? ? ? ?<mailto:srinivas.mandavilli at lucivid.com>> wrote:
>>
>> ? ? ? ? ? ? ? ? ? ?Thanks Ajay! I just got a B990, and am trying to
>> ? ? ? ? ? ? ? ? ? ?stream out H264.
>>
>> ? ? ? ? ? ? ? ?Hi, Srinivas. Be so kind: if you will have success with
>> ? ? ? ? ? ? ? ?it, write an email: what kernel version are you using?
>>
>> ? ? ? ? ? ? ? ?I failed to do it with kernel 3.0.0
>>
>> ? ? ? ? ? ? ? ?--
>> ? ? ? ? ? ? ? ?This message has been scanned for viruses and
>> ? ? ? ? ? ? ? ?dangerous content by *Clean Mail Gateway*
>> ? ? ? ? ? ? ? ?<http://www.CleanMailGateway.com/>, and is
>> ? ? ? ? ? ? ? ?believed to be clean.
>>
>>
>>
>> ? ? ? ? ? ?_______________________________________________
>> ? ? ? ? ? ?Linux-uvc-devel mailing list
>> ? ? ? ? ? ?Linux-uvc-devel at lists.berlios.de
>> ? ? ? ? ? ?<mailto:Linux-uvc-devel at lists.berlios.de>
>> ? ? ? ? ? ?https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>>
>>
>>
>> ? ? ? ?--
>> ? ? ? ?This message has been scanned for viruses and
>> ? ? ? ?dangerous content by *Clean Mail Gateway*
>> ? ? ? ?<http://www.CleanMailGateway.com/>, and is
>> ? ? ? ?believed to be clean.
>>
>>
>>
>>
>>
>> _______________________________________________
>> Linux-uvc-devel mailing list
>> Linux-uvc-devel at lists.berlios.de
>> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>


From ajay.bhargav at einfochips.com  Fri Sep  9 15:18:43 2011
From: ajay.bhargav at einfochips.com (Ajay Bhargav)
Date: Fri, 9 Sep 2011 18:48:43 +0530 (IST)
Subject: [Linux-uvc-devel] Webcam with H264 encoder not in Devicelist
In-Reply-To: <374331551.55051.1315574319103.JavaMail.root@ahm.einfochips.com>
Message-ID: <1315049248.55053.1315574323644.JavaMail.root@ahm.einfochips.com>

Hi Paulo,

for me ffdec_h264 worked perfectly... I used current stable release of gstreamer-ffmpeg. It has many more formats...

--Ajay Bhargav


----- "Paulo Assis" <pj.assis at gmail.com> wrote:

> Hi,
> have you tried the open svc decoder (
> http://sourceforge.net/projects/opensvcdecoder/ ) ?
> 
> It would probably be easier to add as dependency.
> 
> Regards,
> Paulo
> 
> 2011/9/9 Alexey Fisher <bug-track at fisher-privat.net>:
> > Hi Paulo,
> >
> > i have video dump from Robert, not v4l2... The problem with it is
> codec. It
> > seems to be some SVC variant of h264 and ffmpeg can't play it
> correctly.
> > Robert say, currently only fluh264dec (flyendo plugin for gstreamer)
> can
> > play it.
> >
> > Am 09.09.2011 13:23, schrieb Paulo Assis:
> >>
> >> Hi,
> >> I was thinking on using ffmpeg (libavcodec) since this is already
> a
> >> guvcview dependency for enconding the streams, decoding them
> shouldn't
> >> be to hard, I just need to understand how they are handled by the
> driver.
> >> This is the reason I need the raw data, you should be able to use
> the
> >> v4l2 capture example to store the buffer data as delivered by the
> driver
> >> (something like buffer-1.raw,...,buffer-n.raw would be nice), or I
> can
> >> send you some code for doing this if you prefer.
> >>
> >> Regards,
> >> Paulo
> >>
> >> 2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com
> >> <mailto:ajay.bhargav at einfochips.com>>
> >>
> >> ? ?Hi Paulo,
> >>
> >> ? ?I am not having H.264 camera, My camera is similar to
> Facevision's
> >> ? ?Touchcam E1. It sends out MPEG2-TS stream encoded with H.264. I
> have
> >> ? ?recorded some videos during my testing if that is fine for you I
> can
> >> ? ?send across... it would be great if guvcview can show
> compressed
> >> ? ?streams :) we can make use of gstreamer to achieve this..
> >>
> >> ? ?-- Ajay Bhargav
> >>
> >>
> >> ? ?----- "Paulo Assis" <pj.assis at gmail.com
> <mailto:pj.assis at gmail.com>>
> >> ? ?wrote:
> >>
> >> ? ? ? ?Hi,
> >> ? ? ? ?I would like to add support for H.264 stream format in
> guvcview,
> >> ? ? ? ?Could you post some stream info, or even better an example
> of
> >> ? ? ? ?raw data output (does the capture buffer contains an exact
> frame
> >> ? ? ? ?like in MJPEG ?)
> >>
> >> ? ? ? ?Regards,
> >> ? ? ? ?Paulo
> >>
> >> ? ? ? ?2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com
> >> ? ? ? ?<mailto:ajay.bhargav at einfochips.com>>
> >>
> >> ? ? ? ? ? ?Hi Srinivas,
> >>
> >> ? ? ? ? ? ?UVC fixes wont be needed for you to get your cam
> output..
> >>
> >> ? ? ? ? ? ?You can build gstreamer0.10-ffmpeg to decode H.264
> stream,
> >> ? ? ? ? ? ?Robert has used fluendo package for decoding.
> >>
> >> ? ? ? ? ? ?--Ajay
> >>
> >>
> >> ? ? ? ? ? ?----- "Max Lapshin" <max.lapshin at gmail.com
> >> ? ? ? ? ? ?<mailto:max.lapshin at gmail.com>> wrote:
> >>
> >>
> >>
> >> ? ? ? ? ? ? ? ?On Fri, Sep 9, 2011 at 11:01 AM, Srinivas
> Mandavilli
> >> ? ? ? ? ? ? ? ?<srinivas.mandavilli at lucivid.com
> >> ? ? ? ? ? ? ? ?<mailto:srinivas.mandavilli at lucivid.com>> wrote:
> >>
> >> ? ? ? ? ? ? ? ? ? ?Thanks Ajay! I just got a B990, and am trying
> to
> >> ? ? ? ? ? ? ? ? ? ?stream out H264.
> >>
> >> ? ? ? ? ? ? ? ?Hi, Srinivas. Be so kind: if you will have success
> with
> >> ? ? ? ? ? ? ? ?it, write an email: what kernel version are you
> using?
> >>
> >> ? ? ? ? ? ? ? ?I failed to do it with kernel 3.0.0
> >>
> >> ? ? ? ? ? ? ? ?--
> >> ? ? ? ? ? ? ? ?This message has been scanned for viruses and
> >> ? ? ? ? ? ? ? ?dangerous content by *Clean Mail Gateway*
> >> ? ? ? ? ? ? ? ?<http://www.CleanMailGateway.com/>, and is
> >> ? ? ? ? ? ? ? ?believed to be clean.
> >>
> >>
> >>
> >> ? ? ? ? ? ?_______________________________________________
> >> ? ? ? ? ? ?Linux-uvc-devel mailing list
> >> ? ? ? ? ? ?Linux-uvc-devel at lists.berlios.de
> >> ? ? ? ? ? ?<mailto:Linux-uvc-devel at lists.berlios.de>
> >> ? ? ? ? ?
> ?https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> >>
> >>
> >>
> >> ? ? ? ?--
> >> ? ? ? ?This message has been scanned for viruses and
> >> ? ? ? ?dangerous content by *Clean Mail Gateway*
> >> ? ? ? ?<http://www.CleanMailGateway.com/>, and is
> >> ? ? ? ?believed to be clean.
> >>
> >>
> >>
> >>
> >>
> >> _______________________________________________
> >> Linux-uvc-devel mailing list
> >> Linux-uvc-devel at lists.berlios.de
> >> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> >
> >
> 
> -- 
> This message has been scanned for viruses and
> dangerous content by Clean Mail Gateway, and is
> believed to be clean.
> 
> *************************************************************************************************************************************************************
> einfochips Business Disclaimer : This e-mail message and all
> attachments transmitted with it are intended solely for the use of the
> addressee and may contain legally privileged and confidential
> information. If the reader of this message is not the intended
> recipient, or an employee or agent responsible for delivering this
> message to the intended recipient, you are hereby notified that any
> dissemination, distribution, copying, or other use of this message or
> its attachments is strictly prohibited. If you have received this
> message in error, please notify the sender immediately by replying to
> this message and please delete it from your computer. Any views
> expressed in this message are those of the individual sender unless
> otherwise stated. Company has taken enough precautions to prevent the
> spread of viruses. However the company accepts no liability for any
> damage caused by any virus transmitted by this email.
> *************************************************************************************************************************************************************


From ajay.bhargav at einfochips.com  Fri Sep  9 15:40:08 2011
From: ajay.bhargav at einfochips.com (Ajay Bhargav)
Date: Fri, 9 Sep 2011 19:10:08 +0530 (IST)
Subject: [Linux-uvc-devel] Webcam with H264 encoder not in Devicelist
In-Reply-To: <CA+DpathzsChYjjV_rTk3uwH8_4XnM1W0gQz+yAoZ8zZKgjmNkg@mail.gmail.com>
Message-ID: <291712423.55129.1315575608085.JavaMail.root@ahm.einfochips.com>

Hi Robert, 

As you know its a development camera... I think my camera need some fixing.. my hardware decoder does not work with H.264 stream directly... I added h264parse element before h264 decoder in gstreamer pipeline to make it work. 

Regards, 
Ajay Bhargav 

----- "Robert Krakora" <rob.krakora at messagenetsystems.com> wrote: 


Hi Ajay, 

The encoder in your camera may be different and produce H.264 AVC instead of SVC. The latest gstreamer-ffmpeg did not work for me for the FaceVsion Touchcam E1. 

Best Regards, 

Rob Krakora 


On Fri, Sep 9, 2011 at 9:18 AM, Ajay Bhargav < ajay.bhargav at einfochips.com > wrote: 


Hi Paulo, 

for me ffdec_h264 worked perfectly... I used current stable release of gstreamer-ffmpeg. It has many more formats... 

--Ajay Bhargav 


----- "Paulo Assis" < pj.assis at gmail.com > wrote: 

> Hi, 
> have you tried the open svc decoder ( 
> http://sourceforge.net/projects/opensvcdecoder/ ) ? 
> 
> It would probably be easier to add as dependency. 
> 
> Regards, 
> Paulo 
> 
> 2011/9/9 Alexey Fisher < bug-track at fisher-privat.net >: 
> > Hi Paulo, 
> > 
> > i have video dump from Robert, not v4l2... The problem with it is 
> codec. It 
> > seems to be some SVC variant of h264 and ffmpeg can't play it 
> correctly. 
> > Robert say, currently only fluh264dec (flyendo plugin for gstreamer) 
> can 
> > play it. 
> > 
> > Am 09.09.2011 13:23, schrieb Paulo Assis: 
> >> 
> >> Hi, 
> >> I was thinking on using ffmpeg (libavcodec) since this is already 
> a 
> >> guvcview dependency for enconding the streams, decoding them 
> shouldn't 
> >> be to hard, I just need to understand how they are handled by the 
> driver. 
> >> This is the reason I need the raw data, you should be able to use 
> the 
> >> v4l2 capture example to store the buffer data as delivered by the 
> driver 
> >> (something like buffer-1.raw,...,buffer-n.raw would be nice), or I 
> can 
> >> send you some code for doing this if you prefer. 
> >> 
> >> Regards, 
> >> Paulo 
> >> 
> >> 2011/9/9 Ajay Bhargav < ajay.bhargav at einfochips.com 
> >> <mailto: ajay.bhargav at einfochips.com >> 
> >> 
> >> Hi Paulo, 
> >> 
> >> I am not having H.264 camera, My camera is similar to 
> Facevision's 
> >> Touchcam E1. It sends out MPEG2-TS stream encoded with H.264. I 
> have 
> >> recorded some videos during my testing if that is fine for you I 
> can 
> >> send across... it would be great if guvcview can show 
> compressed 
> >> streams :) we can make use of gstreamer to achieve this.. 
> >> 
> >> -- Ajay Bhargav 
> >> 
> >> 
> >> ----- "Paulo Assis" < pj.assis at gmail.com 
> <mailto: pj.assis at gmail.com >> 
> >> wrote: 
> >> 
> >> Hi, 
> >> I would like to add support for H.264 stream format in 
> guvcview, 
> >> Could you post some stream info, or even better an example 
> of 
> >> raw data output (does the capture buffer contains an exact 
> frame 
> >> like in MJPEG ?) 
> >> 
> >> Regards, 
> >> Paulo 
> >> 
> >> 2011/9/9 Ajay Bhargav < ajay.bhargav at einfochips.com 
> >> <mailto: ajay.bhargav at einfochips.com >> 
> >> 
> >> Hi Srinivas, 
> >> 
> >> UVC fixes wont be needed for you to get your cam 
> output.. 
> >> 
> >> You can build gstreamer0.10-ffmpeg to decode H.264 
> stream, 
> >> Robert has used fluendo package for decoding. 
> >> 
> >> --Ajay 
> >> 
> >> 
> >> ----- "Max Lapshin" < max.lapshin at gmail.com 
> >> <mailto: max.lapshin at gmail.com >> wrote: 
> >> 
> >> 
> >> 
> >> On Fri, Sep 9, 2011 at 11:01 AM, Srinivas 
> Mandavilli 
> >> < srinivas.mandavilli at lucivid.com 
> >> <mailto: srinivas.mandavilli at lucivid.com >> wrote: 
> >> 
> >> Thanks Ajay! I just got a B990, and am trying 
> to 
> >> stream out H264. 
> >> 
> >> Hi, Srinivas. Be so kind: if you will have success 
> with 
> >> it, write an email: what kernel version are you 
> using? 
> >> 
> >> I failed to do it with kernel 3.0.0 
> >> 
> >> -- 
> >> This message has been scanned for viruses and 
> >> dangerous content by *Clean Mail Gateway* 
> >> < http://www.CleanMailGateway.com/ >, and is 
> >> believed to be clean. 
> >> 
> >> 
> >> 
> >> _______________________________________________ 
> >> Linux-uvc-devel mailing list 
> >> Linux-uvc-devel at lists.berlios.de 
> >> <mailto: Linux-uvc-devel at lists.berlios.de > 
> >> 
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel 
> >> 
> >> 
> >> 
> >> -- 
> >> This message has been scanned for viruses and 
> >> dangerous content by *Clean Mail Gateway* 
> >> < http://www.CleanMailGateway.com/ >, and is 
> >> believed to be clean. 
> >> 
> >> 
> >> 
> >> 
> >> 
> >> _______________________________________________ 
> >> Linux-uvc-devel mailing list 
> >> Linux-uvc-devel at lists.berlios.de 
> >> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel 
> > 
> > 
> 
> -- 
> This message has been scanned for viruses and 
> dangerous content by Clean Mail Gateway, and is 
> believed to be clean. 
> 
> ************************************************************************************************************************************************************* 
> einfochips Business Disclaimer : This e-mail message and all 
> attachments transmitted with it are intended solely for the use of the 
> addressee and may contain legally privileged and confidential 
> information. If the reader of this message is not the intended 
> recipient, or an employee or agent responsible for delivering this 
> message to the intended recipient, you are hereby notified that any 
> dissemination, distribution, copying, or other use of this message or 
> its attachments is strictly prohibited. If you have received this 
> message in error, please notify the sender immediately by replying to 
> this message and please delete it from your computer. Any views 
> expressed in this message are those of the individual sender unless 
> otherwise stated. Company has taken enough precautions to prevent the 
> spread of viruses. However the company accepts no liability for any 
> damage caused by any virus transmitted by this email. 
> ************************************************************************************************************************************************************* 



-- 
Rob Krakora 
MessageNet Systems 
101 East Carmel Dr. Suite 105 
Carmel, IN 46032 
(317)566-1677 Ext 212 
(317)663-0808 Fax 

-- 
This message has been scanned for viruses and 
dangerous content by Clean Mail Gateway , and is 
believed to be clean. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110909/618d71ba/attachment.html>

From pj.assis at gmail.com  Fri Sep  9 16:05:24 2011
From: pj.assis at gmail.com (Paulo Assis)
Date: Fri, 9 Sep 2011 15:05:24 +0100
Subject: [Linux-uvc-devel] Webcam with H264 encoder not in Devicelist
In-Reply-To: <291712423.55129.1315575608085.JavaMail.root@ahm.einfochips.com>
References: <CA+DpathzsChYjjV_rTk3uwH8_4XnM1W0gQz+yAoZ8zZKgjmNkg@mail.gmail.com>
	<291712423.55129.1315575608085.JavaMail.root@ahm.einfochips.com>
Message-ID: <CAPueXH5ZyMzfY=0va4cF9vircdvZPZjLNKOSDttosjP8boS2JQ@mail.gmail.com>

Well one important thing to notice is the pixel format returned by the
driver, will it differentiate between avc and svc streams, or even
mpeg2 ?
If not maybe then it becomes harder for generic apps to decode it,
unless we use a bunch of switch cases for the different cameras
(something like this would be best implemented in the driver though)

Regards,
Paulo

2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com>:
> Hi Robert,
>
> As you know its a development camera... I think my camera need some fixing..
> my hardware decoder does not work with H.264 stream directly... I added
> h264parse element before h264 decoder in gstreamer pipeline to make it work.
>
> Regards,
> Ajay Bhargav
>
> ----- "Robert Krakora" <rob.krakora at messagenetsystems.com> wrote:
>
> Hi Ajay,
>
> The encoder in your camera may be different and produce H.264 AVC instead of
> SVC.? The latest gstreamer-ffmpeg did not work for me for the FaceVsion
> Touchcam E1.
>
> Best Regards,
>
> Rob Krakora
>
> On Fri, Sep 9, 2011 at 9:18 AM, Ajay Bhargav <ajay.bhargav at einfochips.com>
> wrote:
>>
>> Hi Paulo,
>>
>> for me ffdec_h264 worked perfectly... I used current stable release of
>> gstreamer-ffmpeg. It has many more formats...
>>
>> --Ajay Bhargav
>>
>>
>> ----- "Paulo Assis" <pj.assis at gmail.com> wrote:
>>
>> > Hi,
>> > have you tried the open svc decoder (
>> > http://sourceforge.net/projects/opensvcdecoder/ ) ?
>> >
>> > It would probably be easier to add as dependency.
>> >
>> > Regards,
>> > Paulo
>> >
>> > 2011/9/9 Alexey Fisher <bug-track at fisher-privat.net>:
>> > > Hi Paulo,
>> > >
>> > > i have video dump from Robert, not v4l2... The problem with it is
>> > codec. It
>> > > seems to be some SVC variant of h264 and ffmpeg can't play it
>> > correctly.
>> > > Robert say, currently only fluh264dec (flyendo plugin for gstreamer)
>> > can
>> > > play it.
>> > >
>> > > Am 09.09.2011 13:23, schrieb Paulo Assis:
>> > >>
>> > >> Hi,
>> > >> I was thinking on using ffmpeg (libavcodec) since this is already
>> > a
>> > >> guvcview dependency for enconding the streams, decoding them
>> > shouldn't
>> > >> be to hard, I just need to understand how they are handled by the
>> > driver.
>> > >> This is the reason I need the raw data, you should be able to use
>> > the
>> > >> v4l2 capture example to store the buffer data as delivered by the
>> > driver
>> > >> (something like buffer-1.raw,...,buffer-n.raw would be nice), or I
>> > can
>> > >> send you some code for doing this if you prefer.
>> > >>
>> > >> Regards,
>> > >> Paulo
>> > >>
>> > >> 2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com
>> > >> <mailto:ajay.bhargav at einfochips.com>>
>> > >>
>> > >> ? ?Hi Paulo,
>> > >>
>> > >> ? ?I am not having H.264 camera, My camera is similar to
>> > Facevision's
>> > >> ? ?Touchcam E1. It sends out MPEG2-TS stream encoded with H.264. I
>> > have
>> > >> ? ?recorded some videos during my testing if that is fine for you I
>> > can
>> > >> ? ?send across... it would be great if guvcview can show
>> > compressed
>> > >> ? ?streams :) we can make use of gstreamer to achieve this..
>> > >>
>> > >> ? ?-- Ajay Bhargav
>> > >>
>> > >>
>> > >> ? ?----- "Paulo Assis" <pj.assis at gmail.com
>> > <mailto:pj.assis at gmail.com>>
>> > >> ? ?wrote:
>> > >>
>> > >> ? ? ? ?Hi,
>> > >> ? ? ? ?I would like to add support for H.264 stream format in
>> > guvcview,
>> > >> ? ? ? ?Could you post some stream info, or even better an example
>> > of
>> > >> ? ? ? ?raw data output (does the capture buffer contains an exact
>> > frame
>> > >> ? ? ? ?like in MJPEG ?)
>> > >>
>> > >> ? ? ? ?Regards,
>> > >> ? ? ? ?Paulo
>> > >>
>> > >> ? ? ? ?2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com
>> > >> ? ? ? ?<mailto:ajay.bhargav at einfochips.com>>
>> > >>
>> > >> ? ? ? ? ? ?Hi Srinivas,
>> > >>
>> > >> ? ? ? ? ? ?UVC fixes wont be needed for you to get your cam
>> > output..
>> > >>
>> > >> ? ? ? ? ? ?You can build gstreamer0.10-ffmpeg to decode H.264
>> > stream,
>> > >> ? ? ? ? ? ?Robert has used fluendo package for decoding.
>> > >>
>> > >> ? ? ? ? ? ?--Ajay
>> > >>
>> > >>
>> > >> ? ? ? ? ? ?----- "Max Lapshin" <max.lapshin at gmail.com
>> > >> ? ? ? ? ? ?<mailto:max.lapshin at gmail.com>> wrote:
>> > >>
>> > >>
>> > >>
>> > >> ? ? ? ? ? ? ? ?On Fri, Sep 9, 2011 at 11:01 AM, Srinivas
>> > Mandavilli
>> > >> ? ? ? ? ? ? ? ?<srinivas.mandavilli at lucivid.com
>> > >> ? ? ? ? ? ? ? ?<mailto:srinivas.mandavilli at lucivid.com>> wrote:
>> > >>
>> > >> ? ? ? ? ? ? ? ? ? ?Thanks Ajay! I just got a B990, and am trying
>> > to
>> > >> ? ? ? ? ? ? ? ? ? ?stream out H264.
>> > >>
>> > >> ? ? ? ? ? ? ? ?Hi, Srinivas. Be so kind: if you will have success
>> > with
>> > >> ? ? ? ? ? ? ? ?it, write an email: what kernel version are you
>> > using?
>> > >>
>> > >> ? ? ? ? ? ? ? ?I failed to do it with kernel 3.0.0
>> > >>
>> > >> ? ? ? ? ? ? ? ?--
>> > >> ? ? ? ? ? ? ? ?This message has been scanned for viruses and
>> > >> ? ? ? ? ? ? ? ?dangerous content by *Clean Mail Gateway*
>> > >> ? ? ? ? ? ? ? ?<http://www.CleanMailGateway.com/>, and is
>> > >> ? ? ? ? ? ? ? ?believed to be clean.
>> > >>
>> > >>
>> > >>
>> > >> ? ? ? ? ? ?_______________________________________________
>> > >> ? ? ? ? ? ?Linux-uvc-devel mailing list
>> > >> ? ? ? ? ? ?Linux-uvc-devel at lists.berlios.de
>> > >> ? ? ? ? ? ?<mailto:Linux-uvc-devel at lists.berlios.de>
>> > >>
>> > ?https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>> > >>
>> > >>
>> > >>
>> > >> ? ? ? ?--
>> > >> ? ? ? ?This message has been scanned for viruses and
>> > >> ? ? ? ?dangerous content by *Clean Mail Gateway*
>> > >> ? ? ? ?<http://www.CleanMailGateway.com/>, and is
>> > >> ? ? ? ?believed to be clean.
>> > >>
>> > >>
>> > >>
>> > >>
>> > >>
>> > >> _______________________________________________
>> > >> Linux-uvc-devel mailing list
>> > >> Linux-uvc-devel at lists.berlios.de
>> > >> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>> > >
>> > >
>> >
>> > --
>> > This message has been scanned for viruses and
>> > dangerous content by Clean Mail Gateway, and is
>> > believed to be clean.
>> >
>> >
>> > *************************************************************************************************************************************************************
>> > einfochips Business Disclaimer : This e-mail message and all
>> > attachments transmitted with it are intended solely for the use of the
>> > addressee and may contain legally privileged and confidential
>> > information. If the reader of this message is not the intended
>> > recipient, or an employee or agent responsible for delivering this
>> > message to the intended recipient, you are hereby notified that any
>> > dissemination, distribution, copying, or other use of this message or
>> > its attachments is strictly prohibited. If you have received this
>> > message in error, please notify the sender immediately by replying to
>> > this message and please delete it from your computer. Any views
>> > expressed in this message are those of the individual sender unless
>> > otherwise stated. Company has taken enough precautions to prevent the
>> > spread of viruses. However the company accepts no liability for any
>> > damage caused by any virus transmitted by this email.
>> >
>> > *************************************************************************************************************************************************************
>
>
>
> --
> Rob Krakora
> MessageNet Systems
> 101 East Carmel Dr. Suite 105
> Carmel, IN 46032
> (317)566-1677 Ext 212
> (317)663-0808 Fax
>
> --
> This message has been scanned for viruses and
> dangerous content by Clean Mail Gateway, and is
> believed to be clean.
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
>


From pj.assis at gmail.com  Fri Sep  9 16:50:41 2011
From: pj.assis at gmail.com (Paulo Assis)
Date: Fri, 9 Sep 2011 15:50:41 +0100
Subject: [Linux-uvc-devel] Webcam with H264 encoder not in Devicelist
In-Reply-To: <CA+DpathJRdNZCXkq+XRkH3u66Snk40R-d1dFS1z4g8ad+uTafQ@mail.gmail.com>
References: <CA+DpathzsChYjjV_rTk3uwH8_4XnM1W0gQz+yAoZ8zZKgjmNkg@mail.gmail.com>
	<291712423.55129.1315575608085.JavaMail.root@ahm.einfochips.com>
	<CAPueXH5ZyMzfY=0va4cF9vircdvZPZjLNKOSDttosjP8boS2JQ@mail.gmail.com>
	<CA+DpathJRdNZCXkq+XRkH3u66Snk40R-d1dFS1z4g8ad+uTafQ@mail.gmail.com>
Message-ID: <CAPueXH56Ke2qr-cwce4G_VgTrde0fGG9TWW2nBmN7yAdXLuSVA@mail.gmail.com>

Hi,
see attached a patched capture example, for saving the driver output
buffer into raw files (200).
I haven't been able to test build it, but the changes are minimal so
it should work.

You just need to change the resolution, and maybe the pixel format to
whatever the driver expects.
see lines 495-497.

Regards,
Paulo

2011/9/9 Robert Krakora <rob.krakora at messagenetsystems.com>:
> All,
>
> I forgot to tell you that I came up with one more patch for the UVC source
> in v4l2 to get MPEG2 transport streams to behave correctly.? I have attached
> it to this e-mail.? My sincerest apologies.
>
> Best Regards,
>
> --
> Rob Krakora
> MessageNet Systems
> 101 East Carmel Dr. Suite 105
> Carmel, IN 46032
> (317)566-1677 Ext 212
> (317)663-0808 Fax
>
> On Fri, Sep 9, 2011 at 10:05 AM, Paulo Assis <pj.assis at gmail.com> wrote:
>>
>> Well one important thing to notice is the pixel format returned by the
>> driver, will it differentiate between avc and svc streams, or even
>> mpeg2 ?
>> If not maybe then it becomes harder for generic apps to decode it,
>> unless we use a bunch of switch cases for the different cameras
>> (something like this would be best implemented in the driver though)
>>
>> Regards,
>> Paulo
>>
>> 2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com>:
>> > Hi Robert,
>> >
>> > As you know its a development camera... I think my camera need some
>> > fixing..
>> > my hardware decoder does not work with H.264 stream directly... I added
>> > h264parse element before h264 decoder in gstreamer pipeline to make it
>> > work.
>> >
>> > Regards,
>> > Ajay Bhargav
>> >
>> > ----- "Robert Krakora" <rob.krakora at messagenetsystems.com> wrote:
>> >
>> > Hi Ajay,
>> >
>> > The encoder in your camera may be different and produce H.264 AVC
>> > instead of
>> > SVC.? The latest gstreamer-ffmpeg did not work for me for the FaceVsion
>> > Touchcam E1.
>> >
>> > Best Regards,
>> >
>> > Rob Krakora
>> >
>> > On Fri, Sep 9, 2011 at 9:18 AM, Ajay Bhargav
>> > <ajay.bhargav at einfochips.com>
>> > wrote:
>> >>
>> >> Hi Paulo,
>> >>
>> >> for me ffdec_h264 worked perfectly... I used current stable release of
>> >> gstreamer-ffmpeg. It has many more formats...
>> >>
>> >> --Ajay Bhargav
>> >>
>> >>
>> >> ----- "Paulo Assis" <pj.assis at gmail.com> wrote:
>> >>
>> >> > Hi,
>> >> > have you tried the open svc decoder (
>> >> > http://sourceforge.net/projects/opensvcdecoder/ ) ?
>> >> >
>> >> > It would probably be easier to add as dependency.
>> >> >
>> >> > Regards,
>> >> > Paulo
>> >> >
>> >> > 2011/9/9 Alexey Fisher <bug-track at fisher-privat.net>:
>> >> > > Hi Paulo,
>> >> > >
>> >> > > i have video dump from Robert, not v4l2... The problem with it is
>> >> > codec. It
>> >> > > seems to be some SVC variant of h264 and ffmpeg can't play it
>> >> > correctly.
>> >> > > Robert say, currently only fluh264dec (flyendo plugin for
>> >> > > gstreamer)
>> >> > can
>> >> > > play it.
>> >> > >
>> >> > > Am 09.09.2011 13:23, schrieb Paulo Assis:
>> >> > >>
>> >> > >> Hi,
>> >> > >> I was thinking on using ffmpeg (libavcodec) since this is already
>> >> > a
>> >> > >> guvcview dependency for enconding the streams, decoding them
>> >> > shouldn't
>> >> > >> be to hard, I just need to understand how they are handled by the
>> >> > driver.
>> >> > >> This is the reason I need the raw data, you should be able to use
>> >> > the
>> >> > >> v4l2 capture example to store the buffer data as delivered by the
>> >> > driver
>> >> > >> (something like buffer-1.raw,...,buffer-n.raw would be nice), or I
>> >> > can
>> >> > >> send you some code for doing this if you prefer.
>> >> > >>
>> >> > >> Regards,
>> >> > >> Paulo
>> >> > >>
>> >> > >> 2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com
>> >> > >> <mailto:ajay.bhargav at einfochips.com>>
>> >> > >>
>> >> > >> ? ?Hi Paulo,
>> >> > >>
>> >> > >> ? ?I am not having H.264 camera, My camera is similar to
>> >> > Facevision's
>> >> > >> ? ?Touchcam E1. It sends out MPEG2-TS stream encoded with H.264. I
>> >> > have
>> >> > >> ? ?recorded some videos during my testing if that is fine for you
>> >> > >> I
>> >> > can
>> >> > >> ? ?send across... it would be great if guvcview can show
>> >> > compressed
>> >> > >> ? ?streams :) we can make use of gstreamer to achieve this..
>> >> > >>
>> >> > >> ? ?-- Ajay Bhargav
>> >> > >>
>> >> > >>
>> >> > >> ? ?----- "Paulo Assis" <pj.assis at gmail.com
>> >> > <mailto:pj.assis at gmail.com>>
>> >> > >> ? ?wrote:
>> >> > >>
>> >> > >> ? ? ? ?Hi,
>> >> > >> ? ? ? ?I would like to add support for H.264 stream format in
>> >> > guvcview,
>> >> > >> ? ? ? ?Could you post some stream info, or even better an example
>> >> > of
>> >> > >> ? ? ? ?raw data output (does the capture buffer contains an exact
>> >> > frame
>> >> > >> ? ? ? ?like in MJPEG ?)
>> >> > >>
>> >> > >> ? ? ? ?Regards,
>> >> > >> ? ? ? ?Paulo
>> >> > >>
>> >> > >> ? ? ? ?2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com
>> >> > >> ? ? ? ?<mailto:ajay.bhargav at einfochips.com>>
>> >> > >>
>> >> > >> ? ? ? ? ? ?Hi Srinivas,
>> >> > >>
>> >> > >> ? ? ? ? ? ?UVC fixes wont be needed for you to get your cam
>> >> > output..
>> >> > >>
>> >> > >> ? ? ? ? ? ?You can build gstreamer0.10-ffmpeg to decode H.264
>> >> > stream,
>> >> > >> ? ? ? ? ? ?Robert has used fluendo package for decoding.
>> >> > >>
>> >> > >> ? ? ? ? ? ?--Ajay
>> >> > >>
>> >> > >>
>> >> > >> ? ? ? ? ? ?----- "Max Lapshin" <max.lapshin at gmail.com
>> >> > >> ? ? ? ? ? ?<mailto:max.lapshin at gmail.com>> wrote:
>> >> > >>
>> >> > >>
>> >> > >>
>> >> > >> ? ? ? ? ? ? ? ?On Fri, Sep 9, 2011 at 11:01 AM, Srinivas
>> >> > Mandavilli
>> >> > >> ? ? ? ? ? ? ? ?<srinivas.mandavilli at lucivid.com
>> >> > >> ? ? ? ? ? ? ? ?<mailto:srinivas.mandavilli at lucivid.com>> wrote:
>> >> > >>
>> >> > >> ? ? ? ? ? ? ? ? ? ?Thanks Ajay! I just got a B990, and am trying
>> >> > to
>> >> > >> ? ? ? ? ? ? ? ? ? ?stream out H264.
>> >> > >>
>> >> > >> ? ? ? ? ? ? ? ?Hi, Srinivas. Be so kind: if you will have success
>> >> > with
>> >> > >> ? ? ? ? ? ? ? ?it, write an email: what kernel version are you
>> >> > using?
>> >> > >>
>> >> > >> ? ? ? ? ? ? ? ?I failed to do it with kernel 3.0.0
>> >> > >>
>> >> > >> ? ? ? ? ? ? ? ?--
>> >> > >> ? ? ? ? ? ? ? ?This message has been scanned for viruses and
>> >> > >> ? ? ? ? ? ? ? ?dangerous content by *Clean Mail Gateway*
>> >> > >> ? ? ? ? ? ? ? ?<http://www.CleanMailGateway.com/>, and is
>> >> > >> ? ? ? ? ? ? ? ?believed to be clean.
>> >> > >>
>> >> > >>
>> >> > >>
>> >> > >> ? ? ? ? ? ?_______________________________________________
>> >> > >> ? ? ? ? ? ?Linux-uvc-devel mailing list
>> >> > >> ? ? ? ? ? ?Linux-uvc-devel at lists.berlios.de
>> >> > >> ? ? ? ? ? ?<mailto:Linux-uvc-devel at lists.berlios.de>
>> >> > >>
>> >> > ?https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>> >> > >>
>> >> > >>
>> >> > >>
>> >> > >> ? ? ? ?--
>> >> > >> ? ? ? ?This message has been scanned for viruses and
>> >> > >> ? ? ? ?dangerous content by *Clean Mail Gateway*
>> >> > >> ? ? ? ?<http://www.CleanMailGateway.com/>, and is
>> >> > >> ? ? ? ?believed to be clean.
>> >> > >>
>> >> > >>
>> >> > >>
>> >> > >>
>> >> > >>
>> >> > >> _______________________________________________
>> >> > >> Linux-uvc-devel mailing list
>> >> > >> Linux-uvc-devel at lists.berlios.de
>> >> > >> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>> >> > >
>> >> > >
>> >> >
>> >> > --
>> >> > This message has been scanned for viruses and
>> >> > dangerous content by Clean Mail Gateway, and is
>> >> > believed to be clean.
>> >> >
>> >> >
>> >> >
>> >> > *************************************************************************************************************************************************************
>> >> > einfochips Business Disclaimer : This e-mail message and all
>> >> > attachments transmitted with it are intended solely for the use of
>> >> > the
>> >> > addressee and may contain legally privileged and confidential
>> >> > information. If the reader of this message is not the intended
>> >> > recipient, or an employee or agent responsible for delivering this
>> >> > message to the intended recipient, you are hereby notified that any
>> >> > dissemination, distribution, copying, or other use of this message or
>> >> > its attachments is strictly prohibited. If you have received this
>> >> > message in error, please notify the sender immediately by replying to
>> >> > this message and please delete it from your computer. Any views
>> >> > expressed in this message are those of the individual sender unless
>> >> > otherwise stated. Company has taken enough precautions to prevent the
>> >> > spread of viruses. However the company accepts no liability for any
>> >> > damage caused by any virus transmitted by this email.
>> >> >
>> >> >
>> >> > *************************************************************************************************************************************************************
>> >
>> >
>> >
>> > --
>> > Rob Krakora
>> > MessageNet Systems
>> > 101 East Carmel Dr. Suite 105
>> > Carmel, IN 46032
>> > (317)566-1677 Ext 212
>> > (317)663-0808 Fax
>> >
>> > --
>> > This message has been scanned for viruses and
>> > dangerous content by Clean Mail Gateway, and is
>> > believed to be clean.
>> >
>> > _______________________________________________
>> > Linux-uvc-devel mailing list
>> > Linux-uvc-devel at lists.berlios.de
>> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>> >
>> >
>
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: capture_raw_frames.c
Type: text/x-csrc
Size: 19399 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110909/e419ed4f/attachment.c>

From pj.assis at gmail.com  Sat Sep 10 00:40:42 2011
From: pj.assis at gmail.com (Paulo Assis)
Date: Fri, 9 Sep 2011 23:40:42 +0100
Subject: [Linux-uvc-devel] Webcam with H264 encoder not in Devicelist
In-Reply-To: <CA+DpatgO+X91Puj5Bw+vgMuXhUTQkZWXm46Qi0A-ji7YZS=Wkw@mail.gmail.com>
References: <CA+DpathzsChYjjV_rTk3uwH8_4XnM1W0gQz+yAoZ8zZKgjmNkg@mail.gmail.com>
	<291712423.55129.1315575608085.JavaMail.root@ahm.einfochips.com>
	<CAPueXH5ZyMzfY=0va4cF9vircdvZPZjLNKOSDttosjP8boS2JQ@mail.gmail.com>
	<CA+DpathJRdNZCXkq+XRkH3u66Snk40R-d1dFS1z4g8ad+uTafQ@mail.gmail.com>
	<CAPueXH56Ke2qr-cwce4G_VgTrde0fGG9TWW2nBmN7yAdXLuSVA@mail.gmail.com>
	<CA+DpatgO+X91Puj5Bw+vgMuXhUTQkZWXm46Qi0A-ji7YZS=Wkw@mail.gmail.com>
Message-ID: <CAPueXH6S-PtB2QhX4zJOOCuP5FvsztVs4KRxhJey_csKtgDc=A@mail.gmail.com>

Just remember to set the -o option when grabbing the frames (the
output will be redirected to the files and not stdout as displayed in
the help message)

These files should allow me to add support for the camera in guvcview.

Regards,
Paulo

2011/9/9 Robert Krakora <rob.krakora at messagenetsystems.com>:
> Thanks Paulo!
>
> On Fri, Sep 9, 2011 at 10:50 AM, Paulo Assis <pj.assis at gmail.com> wrote:
>>
>> Hi,
>> see attached a patched capture example, for saving the driver output
>> buffer into raw files (200).
>> I haven't been able to test build it, but the changes are minimal so
>> it should work.
>>
>> You just need to change the resolution, and maybe the pixel format to
>> whatever the driver expects.
>> see lines 495-497.
>>
>> Regards,
>> Paulo
>>
>> 2011/9/9 Robert Krakora <rob.krakora at messagenetsystems.com>:
>> > All,
>> >
>> > I forgot to tell you that I came up with one more patch for the UVC
>> > source
>> > in v4l2 to get MPEG2 transport streams to behave correctly.? I have
>> > attached
>> > it to this e-mail.? My sincerest apologies.
>> >
>> > Best Regards,
>> >
>> > --
>> > Rob Krakora
>> > MessageNet Systems
>> > 101 East Carmel Dr. Suite 105
>> > Carmel, IN 46032
>> > (317)566-1677 Ext 212
>> > (317)663-0808 Fax
>> >
>> > On Fri, Sep 9, 2011 at 10:05 AM, Paulo Assis <pj.assis at gmail.com> wrote:
>> >>
>> >> Well one important thing to notice is the pixel format returned by the
>> >> driver, will it differentiate between avc and svc streams, or even
>> >> mpeg2 ?
>> >> If not maybe then it becomes harder for generic apps to decode it,
>> >> unless we use a bunch of switch cases for the different cameras
>> >> (something like this would be best implemented in the driver though)
>> >>
>> >> Regards,
>> >> Paulo
>> >>
>> >> 2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com>:
>> >> > Hi Robert,
>> >> >
>> >> > As you know its a development camera... I think my camera need some
>> >> > fixing..
>> >> > my hardware decoder does not work with H.264 stream directly... I
>> >> > added
>> >> > h264parse element before h264 decoder in gstreamer pipeline to make
>> >> > it
>> >> > work.
>> >> >
>> >> > Regards,
>> >> > Ajay Bhargav
>> >> >
>> >> > ----- "Robert Krakora" <rob.krakora at messagenetsystems.com> wrote:
>> >> >
>> >> > Hi Ajay,
>> >> >
>> >> > The encoder in your camera may be different and produce H.264 AVC
>> >> > instead of
>> >> > SVC.? The latest gstreamer-ffmpeg did not work for me for the
>> >> > FaceVsion
>> >> > Touchcam E1.
>> >> >
>> >> > Best Regards,
>> >> >
>> >> > Rob Krakora
>> >> >
>> >> > On Fri, Sep 9, 2011 at 9:18 AM, Ajay Bhargav
>> >> > <ajay.bhargav at einfochips.com>
>> >> > wrote:
>> >> >>
>> >> >> Hi Paulo,
>> >> >>
>> >> >> for me ffdec_h264 worked perfectly... I used current stable release
>> >> >> of
>> >> >> gstreamer-ffmpeg. It has many more formats...
>> >> >>
>> >> >> --Ajay Bhargav
>> >> >>
>> >> >>
>> >> >> ----- "Paulo Assis" <pj.assis at gmail.com> wrote:
>> >> >>
>> >> >> > Hi,
>> >> >> > have you tried the open svc decoder (
>> >> >> > http://sourceforge.net/projects/opensvcdecoder/ ) ?
>> >> >> >
>> >> >> > It would probably be easier to add as dependency.
>> >> >> >
>> >> >> > Regards,
>> >> >> > Paulo
>> >> >> >
>> >> >> > 2011/9/9 Alexey Fisher <bug-track at fisher-privat.net>:
>> >> >> > > Hi Paulo,
>> >> >> > >
>> >> >> > > i have video dump from Robert, not v4l2... The problem with it
>> >> >> > > is
>> >> >> > codec. It
>> >> >> > > seems to be some SVC variant of h264 and ffmpeg can't play it
>> >> >> > correctly.
>> >> >> > > Robert say, currently only fluh264dec (flyendo plugin for
>> >> >> > > gstreamer)
>> >> >> > can
>> >> >> > > play it.
>> >> >> > >
>> >> >> > > Am 09.09.2011 13:23, schrieb Paulo Assis:
>> >> >> > >>
>> >> >> > >> Hi,
>> >> >> > >> I was thinking on using ffmpeg (libavcodec) since this is
>> >> >> > >> already
>> >> >> > a
>> >> >> > >> guvcview dependency for enconding the streams, decoding them
>> >> >> > shouldn't
>> >> >> > >> be to hard, I just need to understand how they are handled by
>> >> >> > >> the
>> >> >> > driver.
>> >> >> > >> This is the reason I need the raw data, you should be able to
>> >> >> > >> use
>> >> >> > the
>> >> >> > >> v4l2 capture example to store the buffer data as delivered by
>> >> >> > >> the
>> >> >> > driver
>> >> >> > >> (something like buffer-1.raw,...,buffer-n.raw would be nice),
>> >> >> > >> or I
>> >> >> > can
>> >> >> > >> send you some code for doing this if you prefer.
>> >> >> > >>
>> >> >> > >> Regards,
>> >> >> > >> Paulo
>> >> >> > >>
>> >> >> > >> 2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com
>> >> >> > >> <mailto:ajay.bhargav at einfochips.com>>
>> >> >> > >>
>> >> >> > >> ? ?Hi Paulo,
>> >> >> > >>
>> >> >> > >> ? ?I am not having H.264 camera, My camera is similar to
>> >> >> > Facevision's
>> >> >> > >> ? ?Touchcam E1. It sends out MPEG2-TS stream encoded with
>> >> >> > >> H.264. I
>> >> >> > have
>> >> >> > >> ? ?recorded some videos during my testing if that is fine for
>> >> >> > >> you
>> >> >> > >> I
>> >> >> > can
>> >> >> > >> ? ?send across... it would be great if guvcview can show
>> >> >> > compressed
>> >> >> > >> ? ?streams :) we can make use of gstreamer to achieve this..
>> >> >> > >>
>> >> >> > >> ? ?-- Ajay Bhargav
>> >> >> > >>
>> >> >> > >>
>> >> >> > >> ? ?----- "Paulo Assis" <pj.assis at gmail.com
>> >> >> > <mailto:pj.assis at gmail.com>>
>> >> >> > >> ? ?wrote:
>> >> >> > >>
>> >> >> > >> ? ? ? ?Hi,
>> >> >> > >> ? ? ? ?I would like to add support for H.264 stream format in
>> >> >> > guvcview,
>> >> >> > >> ? ? ? ?Could you post some stream info, or even better an
>> >> >> > >> example
>> >> >> > of
>> >> >> > >> ? ? ? ?raw data output (does the capture buffer contains an
>> >> >> > >> exact
>> >> >> > frame
>> >> >> > >> ? ? ? ?like in MJPEG ?)
>> >> >> > >>
>> >> >> > >> ? ? ? ?Regards,
>> >> >> > >> ? ? ? ?Paulo
>> >> >> > >>
>> >> >> > >> ? ? ? ?2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com
>> >> >> > >> ? ? ? ?<mailto:ajay.bhargav at einfochips.com>>
>> >> >> > >>
>> >> >> > >> ? ? ? ? ? ?Hi Srinivas,
>> >> >> > >>
>> >> >> > >> ? ? ? ? ? ?UVC fixes wont be needed for you to get your cam
>> >> >> > output..
>> >> >> > >>
>> >> >> > >> ? ? ? ? ? ?You can build gstreamer0.10-ffmpeg to decode H.264
>> >> >> > stream,
>> >> >> > >> ? ? ? ? ? ?Robert has used fluendo package for decoding.
>> >> >> > >>
>> >> >> > >> ? ? ? ? ? ?--Ajay
>> >> >> > >>
>> >> >> > >>
>> >> >> > >> ? ? ? ? ? ?----- "Max Lapshin" <max.lapshin at gmail.com
>> >> >> > >> ? ? ? ? ? ?<mailto:max.lapshin at gmail.com>> wrote:
>> >> >> > >>
>> >> >> > >>
>> >> >> > >>
>> >> >> > >> ? ? ? ? ? ? ? ?On Fri, Sep 9, 2011 at 11:01 AM, Srinivas
>> >> >> > Mandavilli
>> >> >> > >> ? ? ? ? ? ? ? ?<srinivas.mandavilli at lucivid.com
>> >> >> > >> ? ? ? ? ? ? ? ?<mailto:srinivas.mandavilli at lucivid.com>> wrote:
>> >> >> > >>
>> >> >> > >> ? ? ? ? ? ? ? ? ? ?Thanks Ajay! I just got a B990, and am
>> >> >> > >> trying
>> >> >> > to
>> >> >> > >> ? ? ? ? ? ? ? ? ? ?stream out H264.
>> >> >> > >>
>> >> >> > >> ? ? ? ? ? ? ? ?Hi, Srinivas. Be so kind: if you will have
>> >> >> > >> success
>> >> >> > with
>> >> >> > >> ? ? ? ? ? ? ? ?it, write an email: what kernel version are you
>> >> >> > using?
>> >> >> > >>
>> >> >> > >> ? ? ? ? ? ? ? ?I failed to do it with kernel 3.0.0
>> >> >> > >>
>> >> >> > >> ? ? ? ? ? ? ? ?--
>> >> >> > >> ? ? ? ? ? ? ? ?This message has been scanned for viruses and
>> >> >> > >> ? ? ? ? ? ? ? ?dangerous content by *Clean Mail Gateway*
>> >> >> > >> ? ? ? ? ? ? ? ?<http://www.CleanMailGateway.com/>, and is
>> >> >> > >> ? ? ? ? ? ? ? ?believed to be clean.
>> >> >> > >>
>> >> >> > >>
>> >> >> > >>
>> >> >> > >> ? ? ? ? ? ?_______________________________________________
>> >> >> > >> ? ? ? ? ? ?Linux-uvc-devel mailing list
>> >> >> > >> ? ? ? ? ? ?Linux-uvc-devel at lists.berlios.de
>> >> >> > >> ? ? ? ? ? ?<mailto:Linux-uvc-devel at lists.berlios.de>
>> >> >> > >>
>> >> >> > ?https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>> >> >> > >>
>> >> >> > >>
>> >> >> > >>
>> >> >> > >> ? ? ? ?--
>> >> >> > >> ? ? ? ?This message has been scanned for viruses and
>> >> >> > >> ? ? ? ?dangerous content by *Clean Mail Gateway*
>> >> >> > >> ? ? ? ?<http://www.CleanMailGateway.com/>, and is
>> >> >> > >> ? ? ? ?believed to be clean.
>> >> >> > >>
>> >> >> > >>
>> >> >> > >>
>> >> >> > >>
>> >> >> > >>
>> >> >> > >> _______________________________________________
>> >> >> > >> Linux-uvc-devel mailing list
>> >> >> > >> Linux-uvc-devel at lists.berlios.de
>> >> >> > >> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>> >> >> > >
>> >> >> > >
>> >> >> >
>> >> >> > --
>> >> >> > This message has been scanned for viruses and
>> >> >> > dangerous content by Clean Mail Gateway, and is
>> >> >> > believed to be clean.
>> >> >> >
>> >> >> >
>> >> >> >
>> >> >> >
>> >> >> > *************************************************************************************************************************************************************
>> >> >> > einfochips Business Disclaimer : This e-mail message and all
>> >> >> > attachments transmitted with it are intended solely for the use of
>> >> >> > the
>> >> >> > addressee and may contain legally privileged and confidential
>> >> >> > information. If the reader of this message is not the intended
>> >> >> > recipient, or an employee or agent responsible for delivering this
>> >> >> > message to the intended recipient, you are hereby notified that
>> >> >> > any
>> >> >> > dissemination, distribution, copying, or other use of this message
>> >> >> > or
>> >> >> > its attachments is strictly prohibited. If you have received this
>> >> >> > message in error, please notify the sender immediately by replying
>> >> >> > to
>> >> >> > this message and please delete it from your computer. Any views
>> >> >> > expressed in this message are those of the individual sender
>> >> >> > unless
>> >> >> > otherwise stated. Company has taken enough precautions to prevent
>> >> >> > the
>> >> >> > spread of viruses. However the company accepts no liability for
>> >> >> > any
>> >> >> > damage caused by any virus transmitted by this email.
>> >> >> >
>> >> >> >
>> >> >> >
>> >> >> > *************************************************************************************************************************************************************
>> >> >
>> >> >
>> >> >
>> >> > --
>> >> > Rob Krakora
>> >> > MessageNet Systems
>> >> > 101 East Carmel Dr. Suite 105
>> >> > Carmel, IN 46032
>> >> > (317)566-1677 Ext 212
>> >> > (317)663-0808 Fax
>> >> >
>> >> > --
>> >> > This message has been scanned for viruses and
>> >> > dangerous content by Clean Mail Gateway, and is
>> >> > believed to be clean.
>> >> >
>> >> > _______________________________________________
>> >> > Linux-uvc-devel mailing list
>> >> > Linux-uvc-devel at lists.berlios.de
>> >> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>> >> >
>> >> >
>> >
>> >
>
>
>
> --
> Rob Krakora
> MessageNet Systems
> 101 East Carmel Dr. Suite 105
> Carmel, IN 46032
> (317)566-1677 Ext 212
> (317)663-0808 Fax
>


From gudvinr at gmail.com  Sun Sep 11 15:46:55 2011
From: gudvinr at gmail.com (gudvinr at gmail.com)
Date: Sun, 11 Sep 2011 17:46:55 +0400
Subject: [Linux-uvc-devel] New unsupported UVC WebCam
Message-ID: <op.v1nckhnmg2xmj0@localhost.localdomain>

Hi, I bought a laptop ASUS U31SD with "USB2.0 UVC VGA WebCam" webcam, that  
doesn't work with uvcvideo driver.

See info from lsusb:
Bus 001 Device 004: ID 13d3:5710 IMC Networks

And dmesg log:

[ 9984.306595] ------------[ cut here ]------------
[ 9984.306614] WARNING: at drivers/tty/tty_ldisc.c:766  
tty_ldisc_reinit+0x7e/0x90()
[ 9984.306619] Hardware name: U31SD
[ 9984.306622] Modules linked in: fuse cryptd aes_i586 aes_generic rfcomm  
bnep ipv6 joydev snd_hda_codec_realtek snd_hda_intel arc4 snd_hda_codec  
snd_hwdep snd_pcm snd_timer snd ath9k mac80211 ath9k_common ath9k_hw  
soundcore ath atl1c snd_page_alloc btusb bluetooth cfg80211 i915 nouveau  
mei(C) intel_agp intel_gtt i2c_i801 iTCO_wdt iTCO_vendor_support sg pcspkr  
ttm drm_kms_helper psmouse serio_raw evdev drm asus_nb_wmi asus_wmi  
sparse_keymap agpgart i2c_algo_bit i2c_core rfkill pci_hotplug mxm_wmi  
battery ac thermal wmi video button cpufreq_powersave cpufreq_ondemand  
acpi_cpufreq freq_table processor mperf acpi_call usbhid hid ext4 mbcache  
jbd2 crc16 sd_mod ahci libahci libata scsi_mod ehci_hcd usbcore
[ 9984.306742] Pid: 17692, comm: fgetty Tainted: G C 3.0-ARCH #1
[ 9984.306747] Call Trace:
[ 9984.306758] [<c044c6d1>] ? printk+0x1d/0x1f
[ 9984.306770] [<c0146762>] warn_slowpath_common+0x72/0xa0
[ 9984.306778] [<c034996e>] ? tty_ldisc_reinit+0x7e/0x90
[ 9984.306785] [<c034996e>] ? tty_ldisc_reinit+0x7e/0x90
[ 9984.306793] [<c01467b2>] warn_slowpath_null+0x22/0x30
[ 9984.306800] [<c034996e>] tty_ldisc_reinit+0x7e/0x90
[ 9984.306808] [<c0349eb4>] tty_ldisc_hangup+0xe4/0x200
[ 9984.306815] [<c0342684>] __tty_hangup+0xe4/0x350
[ 9984.306821] [<c0342939>] tty_vhangup_self+0x19/0x30
[ 9984.306831] [<c0219190>] sys_vhangup+0x20/0x30
[ 9984.306839] [<c0454bdf>] sysenter_do_call+0x12/0x28
[ 9984.306845] ---[ end trace 5e1469f1eb3bb199 ]---
[10013.473205] Linux media interface: v0.10
[10013.484540] Linux video capture interface: v2.00
[10013.487086] uvcvideo: Found UVC 1.00 device USB 2.0 UVC VGA WebCam  
(13d3:5710)
[10013.494083] ------------[ cut here ]------------
[10013.494171] kernel BUG at drivers/media/media-entity.c:346!
[10013.494259] invalid opcode: 0000 [#1] PREEMPT SMP
[10013.494362] Modules linked in: uvcvideo(+) videodev media fuse cryptd  
aes_i586 aes_generic rfcomm bnep ipv6 joydev snd_hda_codec_realtek  
snd_hda_intel arc4 snd_hda_codec snd_hwdep snd_pcm snd_timer snd ath9k  
mac80211 ath9k_common ath9k_hw soundcore ath atl1c snd_page_alloc btusb  
bluetooth cfg80211 i915 nouveau mei(C) intel_agp intel_gtt i2c_i801  
iTCO_wdt iTCO_vendor_support sg pcspkr ttm drm_kms_helper psmouse  
serio_raw evdev drm asus_nb_wmi asus_wmi sparse_keymap agpgart  
i2c_algo_bit i2c_core rfkill pci_hotplug mxm_wmi battery ac thermal wmi  
video button cpufreq_powersave cpufreq_ondemand acpi_cpufreq freq_table  
processor mperf acpi_call usbhid hid ext4 mbcache jbd2 crc16 sd_mod ahci  
libahci libata scsi_mod ehci_hcd usbcore
[10013.495957]
[10013.495991] Pid: 17764, comm: modprobe Tainted: G WC 3.0-ARCH #1  
ASUSTeK Computer Inc. U31SD/U31SD
[10013.496164] EIP: 0060:[<f9518ebf>] EFLAGS: 00010246 CPU: 0
[10013.496256] EIP is at media_entity_create_link+0xcf/0xe0 [media]
[10013.496351] EAX: f382c058 EBX: f382c058 ECX: 00000000 EDX: 00000000
[10013.496449] ESI: f3828058 EDI: 00000000 EBP: f191bd00 ESP: f191bce8
[10013.496547] DS: 007b ES: 007b FS: 00d8 GS: 00e0 SS: 0068
[10013.496633] Process modprobe (pid: 17764, ti=f191a000 task=ed13ea80  
task.ti=f191a000)
[10013.496752] Stack:
[10013.496789] f9519140 00000002 00000002 f3828000 00000000 00000000  
f191bd2c f956e33e
[10013.496973] 00000000 00000003 f95455ae f458470c f4584700 f3828058  
f4584704 f43e0000
[10013.497155] f382f800 f191bdd0 f9565b30 00000001 f9572080 00000000  
f44c77e0 000013d3
[10013.501445] Call Trace:
[10013.505627] [<f9519140>] ? media_entity_init+0x30/0x90 [media]
[10013.509855] [<f956e33e>] uvc_mc_register_entities+0x17e/0x234 [uvcvideo]
[10013.514121] [<f9565b30>] uvc_probe+0x590/0x2220 [uvcvideo]
[10013.518417] [<f820ccdc>] usb_probe_interface+0xac/0x1a0 [usbcore]
[10013.522724] [<c036cf48>] driver_probe_device+0x68/0x170
[10013.526956] [<c036d0e1>] __driver_attach+0x91/0xa0
[10013.531174] [<c036d050>] ? driver_probe_device+0x170/0x170
[10013.535375] [<c036c1a9>] bus_for_each_dev+0x49/0x70
[10013.539539] [<c036cc61>] driver_attach+0x21/0x30
[10013.543647] [<c036d050>] ? driver_probe_device+0x170/0x170
[10013.547763] [<c036c93f>] bus_add_driver+0x17f/0x260
[10013.551855] [<c036d596>] driver_register+0x66/0x110
[10013.555935] [<c0452bcd>] ? mutex_unlock+0xd/0x10
[10013.560042] [<c01be8ff>] ? trace_module_notify+0x2f/0x260
[10013.564078] [<f820bcfd>] usb_register_driver+0x6d/0x160 [usbcore]
[10013.568061] [<f9565004>] ? uvc_clock_param_set+0x4/0x80 [uvcvideo]
[10013.572046] [<c01a7124>] ? tracepoint_module_notify+0x24/0x30
[10013.576009] [<f9575019>] uvc_init+0x19/0x31 [uvcvideo]
[10013.579936] [<c0101125>] do_one_initcall+0x35/0x170
[10013.583841] [<f9575000>] ? 0xf9574fff
[10013.587732] [<c0180332>] sys_init_module+0xd92/0x19c0
[10013.591660] [<c0454bdf>] sysenter_do_call+0x12/0x28
[10013.595536] Code: 31 c0 66 83 46 28 01 83 c4 0c 5b 5e 5f 5d c3 90 8d 74  
26 00 b8 f4 ff ff ff eb ec 66 83 6b 26 01 b8 f4 ff ff ff eb e0 0f 0b 0f 0b  
<0f> 0b eb 0d 90 90 90 90 90 90 90 90 90 90 90 90 90 55 89 e5 3e
[10013.604471] EIP: [<f9518ebf>] media_entity_create_link+0xcf/0xe0  
[media] SS:ESP 0068:f191bce8
[10013.610588] ---[ end trace 5e1469f1eb3bb19a ]---
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110911/0b675c96/attachment.html>

From ajay.bhargav at einfochips.com  Mon Sep 12 06:56:38 2011
From: ajay.bhargav at einfochips.com (Ajay Bhargav)
Date: Mon, 12 Sep 2011 10:26:38 +0530 (IST)
Subject: [Linux-uvc-devel] Webcam with H264 encoder not in Devicelist
In-Reply-To: <CAPueXH56Ke2qr-cwce4G_VgTrde0fGG9TWW2nBmN7yAdXLuSVA@mail.gmail.com>
Message-ID: <144030712.58484.1315803398086.JavaMail.root@ahm.einfochips.com>

Hi Paulo,

This is good.. thanks I will test it with my camera too..

Regards,
Ajay Bhargav

----- "Paulo Assis" <pj.assis at gmail.com> wrote:

> Hi,
> see attached a patched capture example, for saving the driver output
> buffer into raw files (200).
> I haven't been able to test build it, but the changes are minimal so
> it should work.
> 
> You just need to change the resolution, and maybe the pixel format to
> whatever the driver expects.
> see lines 495-497.
> 
> Regards,
> Paulo
> 
> 2011/9/9 Robert Krakora <rob.krakora at messagenetsystems.com>:
> > All,
> >
> > I forgot to tell you that I came up with one more patch for the UVC
> source
> > in v4l2 to get MPEG2 transport streams to behave correctly.? I have
> attached
> > it to this e-mail.? My sincerest apologies.
> >
> > Best Regards,
> >
> > --
> > Rob Krakora
> > MessageNet Systems
> > 101 East Carmel Dr. Suite 105
> > Carmel, IN 46032
> > (317)566-1677 Ext 212
> > (317)663-0808 Fax
> >
> > On Fri, Sep 9, 2011 at 10:05 AM, Paulo Assis <pj.assis at gmail.com>
> wrote:
> >>
> >> Well one important thing to notice is the pixel format returned by
> the
> >> driver, will it differentiate between avc and svc streams, or even
> >> mpeg2 ?
> >> If not maybe then it becomes harder for generic apps to decode it,
> >> unless we use a bunch of switch cases for the different cameras
> >> (something like this would be best implemented in the driver
> though)
> >>
> >> Regards,
> >> Paulo
> >>
> >> 2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com>:
> >> > Hi Robert,
> >> >
> >> > As you know its a development camera... I think my camera need
> some
> >> > fixing..
> >> > my hardware decoder does not work with H.264 stream directly... I
> added
> >> > h264parse element before h264 decoder in gstreamer pipeline to
> make it
> >> > work.
> >> >
> >> > Regards,
> >> > Ajay Bhargav
> >> >
> >> > ----- "Robert Krakora" <rob.krakora at messagenetsystems.com>
> wrote:
> >> >
> >> > Hi Ajay,
> >> >
> >> > The encoder in your camera may be different and produce H.264
> AVC
> >> > instead of
> >> > SVC.? The latest gstreamer-ffmpeg did not work for me for the
> FaceVsion
> >> > Touchcam E1.
> >> >
> >> > Best Regards,
> >> >
> >> > Rob Krakora
> >> >
> >> > On Fri, Sep 9, 2011 at 9:18 AM, Ajay Bhargav
> >> > <ajay.bhargav at einfochips.com>
> >> > wrote:
> >> >>
> >> >> Hi Paulo,
> >> >>
> >> >> for me ffdec_h264 worked perfectly... I used current stable
> release of
> >> >> gstreamer-ffmpeg. It has many more formats...
> >> >>
> >> >> --Ajay Bhargav
> >> >>
> >> >>
> >> >> ----- "Paulo Assis" <pj.assis at gmail.com> wrote:
> >> >>
> >> >> > Hi,
> >> >> > have you tried the open svc decoder (
> >> >> > http://sourceforge.net/projects/opensvcdecoder/ ) ?
> >> >> >
> >> >> > It would probably be easier to add as dependency.
> >> >> >
> >> >> > Regards,
> >> >> > Paulo
> >> >> >
> >> >> > 2011/9/9 Alexey Fisher <bug-track at fisher-privat.net>:
> >> >> > > Hi Paulo,
> >> >> > >
> >> >> > > i have video dump from Robert, not v4l2... The problem with
> it is
> >> >> > codec. It
> >> >> > > seems to be some SVC variant of h264 and ffmpeg can't play
> it
> >> >> > correctly.
> >> >> > > Robert say, currently only fluh264dec (flyendo plugin for
> >> >> > > gstreamer)
> >> >> > can
> >> >> > > play it.
> >> >> > >
> >> >> > > Am 09.09.2011 13:23, schrieb Paulo Assis:
> >> >> > >>
> >> >> > >> Hi,
> >> >> > >> I was thinking on using ffmpeg (libavcodec) since this is
> already
> >> >> > a
> >> >> > >> guvcview dependency for enconding the streams, decoding
> them
> >> >> > shouldn't
> >> >> > >> be to hard, I just need to understand how they are handled
> by the
> >> >> > driver.
> >> >> > >> This is the reason I need the raw data, you should be able
> to use
> >> >> > the
> >> >> > >> v4l2 capture example to store the buffer data as delivered
> by the
> >> >> > driver
> >> >> > >> (something like buffer-1.raw,...,buffer-n.raw would be
> nice), or I
> >> >> > can
> >> >> > >> send you some code for doing this if you prefer.
> >> >> > >>
> >> >> > >> Regards,
> >> >> > >> Paulo
> >> >> > >>
> >> >> > >> 2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com
> >> >> > >> <mailto:ajay.bhargav at einfochips.com>>
> >> >> > >>
> >> >> > >> ? ?Hi Paulo,
> >> >> > >>
> >> >> > >> ? ?I am not having H.264 camera, My camera is similar to
> >> >> > Facevision's
> >> >> > >> ? ?Touchcam E1. It sends out MPEG2-TS stream encoded with
> H.264. I
> >> >> > have
> >> >> > >> ? ?recorded some videos during my testing if that is fine
> for you
> >> >> > >> I
> >> >> > can
> >> >> > >> ? ?send across... it would be great if guvcview can show
> >> >> > compressed
> >> >> > >> ? ?streams :) we can make use of gstreamer to achieve
> this..
> >> >> > >>
> >> >> > >> ? ?-- Ajay Bhargav
> >> >> > >>
> >> >> > >>
> >> >> > >> ? ?----- "Paulo Assis" <pj.assis at gmail.com
> >> >> > <mailto:pj.assis at gmail.com>>
> >> >> > >> ? ?wrote:
> >> >> > >>
> >> >> > >> ? ? ? ?Hi,
> >> >> > >> ? ? ? ?I would like to add support for H.264 stream format
> in
> >> >> > guvcview,
> >> >> > >> ? ? ? ?Could you post some stream info, or even better an
> example
> >> >> > of
> >> >> > >> ? ? ? ?raw data output (does the capture buffer contains an
> exact
> >> >> > frame
> >> >> > >> ? ? ? ?like in MJPEG ?)
> >> >> > >>
> >> >> > >> ? ? ? ?Regards,
> >> >> > >> ? ? ? ?Paulo
> >> >> > >>
> >> >> > >> ? ? ? ?2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com
> >> >> > >> ? ? ? ?<mailto:ajay.bhargav at einfochips.com>>
> >> >> > >>
> >> >> > >> ? ? ? ? ? ?Hi Srinivas,
> >> >> > >>
> >> >> > >> ? ? ? ? ? ?UVC fixes wont be needed for you to get your
> cam
> >> >> > output..
> >> >> > >>
> >> >> > >> ? ? ? ? ? ?You can build gstreamer0.10-ffmpeg to decode
> H.264
> >> >> > stream,
> >> >> > >> ? ? ? ? ? ?Robert has used fluendo package for decoding.
> >> >> > >>
> >> >> > >> ? ? ? ? ? ?--Ajay
> >> >> > >>
> >> >> > >>
> >> >> > >> ? ? ? ? ? ?----- "Max Lapshin" <max.lapshin at gmail.com
> >> >> > >> ? ? ? ? ? ?<mailto:max.lapshin at gmail.com>> wrote:
> >> >> > >>
> >> >> > >>
> >> >> > >>
> >> >> > >> ? ? ? ? ? ? ? ?On Fri, Sep 9, 2011 at 11:01 AM, Srinivas
> >> >> > Mandavilli
> >> >> > >> ? ? ? ? ? ? ? ?<srinivas.mandavilli at lucivid.com
> >> >> > >> ? ? ? ? ? ? ? ?<mailto:srinivas.mandavilli at lucivid.com>>
> wrote:
> >> >> > >>
> >> >> > >> ? ? ? ? ? ? ? ? ? ?Thanks Ajay! I just got a B990, and am
> trying
> >> >> > to
> >> >> > >> ? ? ? ? ? ? ? ? ? ?stream out H264.
> >> >> > >>
> >> >> > >> ? ? ? ? ? ? ? ?Hi, Srinivas. Be so kind: if you will have
> success
> >> >> > with
> >> >> > >> ? ? ? ? ? ? ? ?it, write an email: what kernel version are
> you
> >> >> > using?
> >> >> > >>
> >> >> > >> ? ? ? ? ? ? ? ?I failed to do it with kernel 3.0.0
> >> >> > >>
> >> >> > >> ? ? ? ? ? ? ? ?--
> >> >> > >> ? ? ? ? ? ? ? ?This message has been scanned for viruses
> and
> >> >> > >> ? ? ? ? ? ? ? ?dangerous content by *Clean Mail Gateway*
> >> >> > >> ? ? ? ? ? ? ? ?<http://www.CleanMailGateway.com/>, and is
> >> >> > >> ? ? ? ? ? ? ? ?believed to be clean.
> >> >> > >>
> >> >> > >>
> >> >> > >>
> >> >> > >> ? ? ? ? ? ?_______________________________________________
> >> >> > >> ? ? ? ? ? ?Linux-uvc-devel mailing list
> >> >> > >> ? ? ? ? ? ?Linux-uvc-devel at lists.berlios.de
> >> >> > >> ? ? ? ? ? ?<mailto:Linux-uvc-devel at lists.berlios.de>
> >> >> > >>
> >> >> > ?https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> >> >> > >>
> >> >> > >>
> >> >> > >>
> >> >> > >> ? ? ? ?--
> >> >> > >> ? ? ? ?This message has been scanned for viruses and
> >> >> > >> ? ? ? ?dangerous content by *Clean Mail Gateway*
> >> >> > >> ? ? ? ?<http://www.CleanMailGateway.com/>, and is
> >> >> > >> ? ? ? ?believed to be clean.
> >> >> > >>
> >> >> > >>
> >> >> > >>
> >> >> > >>
> >> >> > >>
> >> >> > >> _______________________________________________
> >> >> > >> Linux-uvc-devel mailing list
> >> >> > >> Linux-uvc-devel at lists.berlios.de
> >> >> > >> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> >> >> > >
> >> >> > >
> >> >> >
> >> >> > --
> >> >> > This message has been scanned for viruses and
> >> >> > dangerous content by Clean Mail Gateway, and is
> >> >> > believed to be clean.
> >> >> >
> >> >> >
> >> >> >
> >> >> >
> *************************************************************************************************************************************************************
> >> >> > einfochips Business Disclaimer : This e-mail message and all
> >> >> > attachments transmitted with it are intended solely for the
> use of
> >> >> > the
> >> >> > addressee and may contain legally privileged and confidential
> >> >> > information. If the reader of this message is not the
> intended
> >> >> > recipient, or an employee or agent responsible for delivering
> this
> >> >> > message to the intended recipient, you are hereby notified
> that any
> >> >> > dissemination, distribution, copying, or other use of this
> message or
> >> >> > its attachments is strictly prohibited. If you have received
> this
> >> >> > message in error, please notify the sender immediately by
> replying to
> >> >> > this message and please delete it from your computer. Any
> views
> >> >> > expressed in this message are those of the individual sender
> unless
> >> >> > otherwise stated. Company has taken enough precautions to
> prevent the
> >> >> > spread of viruses. However the company accepts no liability
> for any
> >> >> > damage caused by any virus transmitted by this email.
> >> >> >
> >> >> >
> >> >> >
> *************************************************************************************************************************************************************
> >> >
> >> >
> >> >
> >> > --
> >> > Rob Krakora
> >> > MessageNet Systems
> >> > 101 East Carmel Dr. Suite 105
> >> > Carmel, IN 46032
> >> > (317)566-1677 Ext 212
> >> > (317)663-0808 Fax
> >> >
> >> > --
> >> > This message has been scanned for viruses and
> >> > dangerous content by Clean Mail Gateway, and is
> >> > believed to be clean.
> >> >
> >> > _______________________________________________
> >> > Linux-uvc-devel mailing list
> >> > Linux-uvc-devel at lists.berlios.de
> >> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> >> >
> >> >
> >
> >
> 
> -- 
> This message has been scanned for viruses and
> dangerous content by Clean Mail Gateway, and is
> believed to be clean.
> 
> 
> *************************************************************************************************************************************************************
> einfochips Business Disclaimer : This e-mail message and all
> attachments transmitted with it are intended solely for the use of the
> addressee and may contain legally privileged and confidential
> information. If the reader of this message is not the intended
> recipient, or an employee or agent responsible for delivering this
> message to the intended recipient, you are hereby notified that any
> dissemination, distribution, copying, or other use of this message or
> its attachments is strictly prohibited. If you have received this
> message in error, please notify the sender immediately by replying to
> this message and please delete it from your computer. Any views
> expressed in this message are those of the individual sender unless
> otherwise stated. Company has taken enough precautions to prevent the
> spread of viruses. However the
>   company accepts no liability for any damage caused by any virus
> transmitted by this email.
> *************************************************************************************************************************************************************


From pj.assis at gmail.com  Mon Sep 12 10:32:35 2011
From: pj.assis at gmail.com (Paulo Assis)
Date: Mon, 12 Sep 2011 09:32:35 +0100
Subject: [Linux-uvc-devel] Webcam with H264 encoder not in Devicelist
In-Reply-To: <144030712.58484.1315803398086.JavaMail.root@ahm.einfochips.com>
References: <CAPueXH56Ke2qr-cwce4G_VgTrde0fGG9TWW2nBmN7yAdXLuSVA@mail.gmail.com>
	<144030712.58484.1315803398086.JavaMail.root@ahm.einfochips.com>
Message-ID: <CAPueXH4Ga8aLwL6F7YacQ1aOqVOw4mG9kd5MQCaePyemOK12bg@mail.gmail.com>

Hi,
just remember to also set the -f option to force the use of the
specified pixel format (otherwise the camera default one is used).
So the two options that need to be set are: -o -f

regards,
Paulo

2011/9/12 Ajay Bhargav <ajay.bhargav at einfochips.com>:
> Hi Paulo,
>
> This is good.. thanks I will test it with my camera too..
>
> Regards,
> Ajay Bhargav
>
> ----- "Paulo Assis" <pj.assis at gmail.com> wrote:
>
>> Hi,
>> see attached a patched capture example, for saving the driver output
>> buffer into raw files (200).
>> I haven't been able to test build it, but the changes are minimal so
>> it should work.
>>
>> You just need to change the resolution, and maybe the pixel format to
>> whatever the driver expects.
>> see lines 495-497.
>>
>> Regards,
>> Paulo
>>
>> 2011/9/9 Robert Krakora <rob.krakora at messagenetsystems.com>:
>> > All,
>> >
>> > I forgot to tell you that I came up with one more patch for the UVC
>> source
>> > in v4l2 to get MPEG2 transport streams to behave correctly.? I have
>> attached
>> > it to this e-mail.? My sincerest apologies.
>> >
>> > Best Regards,
>> >
>> > --
>> > Rob Krakora
>> > MessageNet Systems
>> > 101 East Carmel Dr. Suite 105
>> > Carmel, IN 46032
>> > (317)566-1677 Ext 212
>> > (317)663-0808 Fax
>> >
>> > On Fri, Sep 9, 2011 at 10:05 AM, Paulo Assis <pj.assis at gmail.com>
>> wrote:
>> >>
>> >> Well one important thing to notice is the pixel format returned by
>> the
>> >> driver, will it differentiate between avc and svc streams, or even
>> >> mpeg2 ?
>> >> If not maybe then it becomes harder for generic apps to decode it,
>> >> unless we use a bunch of switch cases for the different cameras
>> >> (something like this would be best implemented in the driver
>> though)
>> >>
>> >> Regards,
>> >> Paulo
>> >>
>> >> 2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com>:
>> >> > Hi Robert,
>> >> >
>> >> > As you know its a development camera... I think my camera need
>> some
>> >> > fixing..
>> >> > my hardware decoder does not work with H.264 stream directly... I
>> added
>> >> > h264parse element before h264 decoder in gstreamer pipeline to
>> make it
>> >> > work.
>> >> >
>> >> > Regards,
>> >> > Ajay Bhargav
>> >> >
>> >> > ----- "Robert Krakora" <rob.krakora at messagenetsystems.com>
>> wrote:
>> >> >
>> >> > Hi Ajay,
>> >> >
>> >> > The encoder in your camera may be different and produce H.264
>> AVC
>> >> > instead of
>> >> > SVC.? The latest gstreamer-ffmpeg did not work for me for the
>> FaceVsion
>> >> > Touchcam E1.
>> >> >
>> >> > Best Regards,
>> >> >
>> >> > Rob Krakora
>> >> >
>> >> > On Fri, Sep 9, 2011 at 9:18 AM, Ajay Bhargav
>> >> > <ajay.bhargav at einfochips.com>
>> >> > wrote:
>> >> >>
>> >> >> Hi Paulo,
>> >> >>
>> >> >> for me ffdec_h264 worked perfectly... I used current stable
>> release of
>> >> >> gstreamer-ffmpeg. It has many more formats...
>> >> >>
>> >> >> --Ajay Bhargav
>> >> >>
>> >> >>
>> >> >> ----- "Paulo Assis" <pj.assis at gmail.com> wrote:
>> >> >>
>> >> >> > Hi,
>> >> >> > have you tried the open svc decoder (
>> >> >> > http://sourceforge.net/projects/opensvcdecoder/ ) ?
>> >> >> >
>> >> >> > It would probably be easier to add as dependency.
>> >> >> >
>> >> >> > Regards,
>> >> >> > Paulo
>> >> >> >
>> >> >> > 2011/9/9 Alexey Fisher <bug-track at fisher-privat.net>:
>> >> >> > > Hi Paulo,
>> >> >> > >
>> >> >> > > i have video dump from Robert, not v4l2... The problem with
>> it is
>> >> >> > codec. It
>> >> >> > > seems to be some SVC variant of h264 and ffmpeg can't play
>> it
>> >> >> > correctly.
>> >> >> > > Robert say, currently only fluh264dec (flyendo plugin for
>> >> >> > > gstreamer)
>> >> >> > can
>> >> >> > > play it.
>> >> >> > >
>> >> >> > > Am 09.09.2011 13:23, schrieb Paulo Assis:
>> >> >> > >>
>> >> >> > >> Hi,
>> >> >> > >> I was thinking on using ffmpeg (libavcodec) since this is
>> already
>> >> >> > a
>> >> >> > >> guvcview dependency for enconding the streams, decoding
>> them
>> >> >> > shouldn't
>> >> >> > >> be to hard, I just need to understand how they are handled
>> by the
>> >> >> > driver.
>> >> >> > >> This is the reason I need the raw data, you should be able
>> to use
>> >> >> > the
>> >> >> > >> v4l2 capture example to store the buffer data as delivered
>> by the
>> >> >> > driver
>> >> >> > >> (something like buffer-1.raw,...,buffer-n.raw would be
>> nice), or I
>> >> >> > can
>> >> >> > >> send you some code for doing this if you prefer.
>> >> >> > >>
>> >> >> > >> Regards,
>> >> >> > >> Paulo
>> >> >> > >>
>> >> >> > >> 2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com
>> >> >> > >> <mailto:ajay.bhargav at einfochips.com>>
>> >> >> > >>
>> >> >> > >> ? ?Hi Paulo,
>> >> >> > >>
>> >> >> > >> ? ?I am not having H.264 camera, My camera is similar to
>> >> >> > Facevision's
>> >> >> > >> ? ?Touchcam E1. It sends out MPEG2-TS stream encoded with
>> H.264. I
>> >> >> > have
>> >> >> > >> ? ?recorded some videos during my testing if that is fine
>> for you
>> >> >> > >> I
>> >> >> > can
>> >> >> > >> ? ?send across... it would be great if guvcview can show
>> >> >> > compressed
>> >> >> > >> ? ?streams :) we can make use of gstreamer to achieve
>> this..
>> >> >> > >>
>> >> >> > >> ? ?-- Ajay Bhargav
>> >> >> > >>
>> >> >> > >>
>> >> >> > >> ? ?----- "Paulo Assis" <pj.assis at gmail.com
>> >> >> > <mailto:pj.assis at gmail.com>>
>> >> >> > >> ? ?wrote:
>> >> >> > >>
>> >> >> > >> ? ? ? ?Hi,
>> >> >> > >> ? ? ? ?I would like to add support for H.264 stream format
>> in
>> >> >> > guvcview,
>> >> >> > >> ? ? ? ?Could you post some stream info, or even better an
>> example
>> >> >> > of
>> >> >> > >> ? ? ? ?raw data output (does the capture buffer contains an
>> exact
>> >> >> > frame
>> >> >> > >> ? ? ? ?like in MJPEG ?)
>> >> >> > >>
>> >> >> > >> ? ? ? ?Regards,
>> >> >> > >> ? ? ? ?Paulo
>> >> >> > >>
>> >> >> > >> ? ? ? ?2011/9/9 Ajay Bhargav <ajay.bhargav at einfochips.com
>> >> >> > >> ? ? ? ?<mailto:ajay.bhargav at einfochips.com>>
>> >> >> > >>
>> >> >> > >> ? ? ? ? ? ?Hi Srinivas,
>> >> >> > >>
>> >> >> > >> ? ? ? ? ? ?UVC fixes wont be needed for you to get your
>> cam
>> >> >> > output..
>> >> >> > >>
>> >> >> > >> ? ? ? ? ? ?You can build gstreamer0.10-ffmpeg to decode
>> H.264
>> >> >> > stream,
>> >> >> > >> ? ? ? ? ? ?Robert has used fluendo package for decoding.
>> >> >> > >>
>> >> >> > >> ? ? ? ? ? ?--Ajay
>> >> >> > >>
>> >> >> > >>
>> >> >> > >> ? ? ? ? ? ?----- "Max Lapshin" <max.lapshin at gmail.com
>> >> >> > >> ? ? ? ? ? ?<mailto:max.lapshin at gmail.com>> wrote:
>> >> >> > >>
>> >> >> > >>
>> >> >> > >>
>> >> >> > >> ? ? ? ? ? ? ? ?On Fri, Sep 9, 2011 at 11:01 AM, Srinivas
>> >> >> > Mandavilli
>> >> >> > >> ? ? ? ? ? ? ? ?<srinivas.mandavilli at lucivid.com
>> >> >> > >> ? ? ? ? ? ? ? ?<mailto:srinivas.mandavilli at lucivid.com>>
>> wrote:
>> >> >> > >>
>> >> >> > >> ? ? ? ? ? ? ? ? ? ?Thanks Ajay! I just got a B990, and am
>> trying
>> >> >> > to
>> >> >> > >> ? ? ? ? ? ? ? ? ? ?stream out H264.
>> >> >> > >>
>> >> >> > >> ? ? ? ? ? ? ? ?Hi, Srinivas. Be so kind: if you will have
>> success
>> >> >> > with
>> >> >> > >> ? ? ? ? ? ? ? ?it, write an email: what kernel version are
>> you
>> >> >> > using?
>> >> >> > >>
>> >> >> > >> ? ? ? ? ? ? ? ?I failed to do it with kernel 3.0.0
>> >> >> > >>
>> >> >> > >> ? ? ? ? ? ? ? ?--
>> >> >> > >> ? ? ? ? ? ? ? ?This message has been scanned for viruses
>> and
>> >> >> > >> ? ? ? ? ? ? ? ?dangerous content by *Clean Mail Gateway*
>> >> >> > >> ? ? ? ? ? ? ? ?<http://www.CleanMailGateway.com/>, and is
>> >> >> > >> ? ? ? ? ? ? ? ?believed to be clean.
>> >> >> > >>
>> >> >> > >>
>> >> >> > >>
>> >> >> > >> ? ? ? ? ? ?_______________________________________________
>> >> >> > >> ? ? ? ? ? ?Linux-uvc-devel mailing list
>> >> >> > >> ? ? ? ? ? ?Linux-uvc-devel at lists.berlios.de
>> >> >> > >> ? ? ? ? ? ?<mailto:Linux-uvc-devel at lists.berlios.de>
>> >> >> > >>
>> >> >> > ?https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>> >> >> > >>
>> >> >> > >>
>> >> >> > >>
>> >> >> > >> ? ? ? ?--
>> >> >> > >> ? ? ? ?This message has been scanned for viruses and
>> >> >> > >> ? ? ? ?dangerous content by *Clean Mail Gateway*
>> >> >> > >> ? ? ? ?<http://www.CleanMailGateway.com/>, and is
>> >> >> > >> ? ? ? ?believed to be clean.
>> >> >> > >>
>> >> >> > >>
>> >> >> > >>
>> >> >> > >>
>> >> >> > >>
>> >> >> > >> _______________________________________________
>> >> >> > >> Linux-uvc-devel mailing list
>> >> >> > >> Linux-uvc-devel at lists.berlios.de
>> >> >> > >> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>> >> >> > >
>> >> >> > >
>> >> >> >
>> >> >> > --
>> >> >> > This message has been scanned for viruses and
>> >> >> > dangerous content by Clean Mail Gateway, and is
>> >> >> > believed to be clean.
>> >> >> >
>> >> >> >
>> >> >> >
>> >> >> >
>> *************************************************************************************************************************************************************
>> >> >> > einfochips Business Disclaimer : This e-mail message and all
>> >> >> > attachments transmitted with it are intended solely for the
>> use of
>> >> >> > the
>> >> >> > addressee and may contain legally privileged and confidential
>> >> >> > information. If the reader of this message is not the
>> intended
>> >> >> > recipient, or an employee or agent responsible for delivering
>> this
>> >> >> > message to the intended recipient, you are hereby notified
>> that any
>> >> >> > dissemination, distribution, copying, or other use of this
>> message or
>> >> >> > its attachments is strictly prohibited. If you have received
>> this
>> >> >> > message in error, please notify the sender immediately by
>> replying to
>> >> >> > this message and please delete it from your computer. Any
>> views
>> >> >> > expressed in this message are those of the individual sender
>> unless
>> >> >> > otherwise stated. Company has taken enough precautions to
>> prevent the
>> >> >> > spread of viruses. However the company accepts no liability
>> for any
>> >> >> > damage caused by any virus transmitted by this email.
>> >> >> >
>> >> >> >
>> >> >> >
>> *************************************************************************************************************************************************************
>> >> >
>> >> >
>> >> >
>> >> > --
>> >> > Rob Krakora
>> >> > MessageNet Systems
>> >> > 101 East Carmel Dr. Suite 105
>> >> > Carmel, IN 46032
>> >> > (317)566-1677 Ext 212
>> >> > (317)663-0808 Fax
>> >> >
>> >> > --
>> >> > This message has been scanned for viruses and
>> >> > dangerous content by Clean Mail Gateway, and is
>> >> > believed to be clean.
>> >> >
>> >> > _______________________________________________
>> >> > Linux-uvc-devel mailing list
>> >> > Linux-uvc-devel at lists.berlios.de
>> >> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>> >> >
>> >> >
>> >
>> >
>>
>> --
>> This message has been scanned for viruses and
>> dangerous content by Clean Mail Gateway, and is
>> believed to be clean.
>>
>>
>> *************************************************************************************************************************************************************
>> einfochips Business Disclaimer : This e-mail message and all
>> attachments transmitted with it are intended solely for the use of the
>> addressee and may contain legally privileged and confidential
>> information. If the reader of this message is not the intended
>> recipient, or an employee or agent responsible for delivering this
>> message to the intended recipient, you are hereby notified that any
>> dissemination, distribution, copying, or other use of this message or
>> its attachments is strictly prohibited. If you have received this
>> message in error, please notify the sender immediately by replying to
>> this message and please delete it from your computer. Any views
>> expressed in this message are those of the individual sender unless
>> otherwise stated. Company has taken enough precautions to prevent the
>> spread of viruses. However the
>> ? company accepts no liability for any damage caused by any virus
>> transmitted by this email.
>> *************************************************************************************************************************************************************
>


From figlideifioritalia at gmail.com  Wed Sep 14 11:02:31 2011
From: figlideifioritalia at gmail.com (Cesario Lorenzo Habib)
Date: Wed, 14 Sep 2011 11:02:31 +0200
Subject: [Linux-uvc-devel] Looking for upside down uvc cams
In-Reply-To: <4A39F219.10301@redhat.com>
References: <4A39F219.10301@redhat.com>
Message-ID: <4E706DA7.40704@gmail.com>

Hi Hans,

I'm Lorenzo Habib from Italy,
I bought just few days this Laptop Asus K52F
and I have installed on Ubuntu 11.04 last release.
When I use Skype and V4l2ucp (Video4Linux)
I look upside down myself,
with  incorporated webcam.
But when I use Camorama and Guvcview software,
the webcam working very well.

lsusb>  lsusb.log

Bus 002 Device 003: ID 046d:c05b Logitech, Inc.
Bus 002 Device 002: ID 8087:0020 Intel Corp. Integrated Rate Matching Hub
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 001 Device 003: ID 13d3:5130 IMC Networks  (This is WebCam)
Bus 001 Device 002: ID 8087:0020 Intel Corp. Integrated Rate Matching Hub
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub

dmidecode>  dmi.log



Handle 0x0001, DMI type 1, 27 bytes
System Information
Manufacturer: ASUSTeK Computer Inc.
Product Name: K52F
Version: 1.0
Serial Number: B5N0BC07666019
UUID: 0A121300-0104-1980-FFFF-F46D04BFB139
Wake-up Type: Power Switch
SKU Number:
Family:

I hope that this problem can be solved.

Regards
Habib
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110914/63a4058e/attachment.html>

From remco at webconquest.com  Tue Sep 20 03:29:20 2011
From: remco at webconquest.com (Remco Rijnders)
Date: Tue, 20 Sep 2011 03:29:20 +0200
Subject: [Linux-uvc-devel] Problem booting with kernel 3.0 and ASUS UVC
 webcams
In-Reply-To: <4E68665F.3090200@fisher-privat.net>
References: <F$.DQC@r78.nl> <4E68574C.6020908@fisher-privat.net>
	<F&.OZO@r78.nl> <4E68665F.3090200@fisher-privat.net>
Message-ID: <Go.bDL@r78.nl>

On Thu, Sep 08, 2011 at 08:53:19AM +0200, Alexey wrote in 
<4E68665F.3090200 at fisher-privat.net>:
>Am 08.09.2011 08:07, schrieb Remco Rijnders:
>>On Thu, Sep 08, 2011 at 07:49:00AM +0200, Alexey wrote in
>><4E68574C.6020908 at fisher-privat.net>:
>>>Hi,
>>>
>>>to get the idea of what is wrong here, we need at least dmesg. If you
>>>can't provide dmesg, but you can compile kernel, do git bisect.
>>
>
>You can use netconsole:
>http://www.tocpcs.com/howto-log-a-kernel-panic-it-can-be-done/
>
>or attach usb-serial adapter and log the dmegs over serial on other computer
>For both his methods you need  second computer.
>
>or boot in verbose mode, no splash screen or so, and make a photo of 
>log from display.  Here you will need only one computer.

Hi,

Apologies for the late revert. I've been busy with other things and spent 
too much time on trying to get netconsole working without luck. Anyways, 
using git bisect I came to the following result:

[remmy at ketelbinkie uvcvideo]$ git bisect bad
a96aa5342d575980e5b572cde88036f3a878ebee is the first bad commit                                                                                                                                                   
commit a96aa5342d575980e5b572cde88036f3a878ebee                                                                                                                                                                    
Author: Laurent Pinchart <laurent.pinchart at ideasonboard.com>                                                                                                                                                       
Date:   Tue Jun 28 18:17:48 2011 -0300                                                                                                                                                                             
                                                                                                                                                                                                                    
     [media] uvcvideo: Ignore entities for terminals with no supported 
format                                                                                                                                       
                                                                                                                                                                                                                    
     If a streaming interface has no supported format, the driver won't                                                                                                                                             
     create a video device for the associated terminal. Fix an oops by                                                                                                                                              
     ignoring that terminal when creating links between entities.                                                                                                                                                   
                                                                                                                                                                                                                    
     Signed-off-by: Laurent Pinchart <laurent.pinchart at ideasonboard.com>                                                                                                                                            
     Signed-off-by: Mauro Carvalho Chehab <mchehab at redhat.com>                                                                                                                                                      
                                                                                                                                                                                                                    
:040000 040000 0296cc04d3923f1f93205ac6164802b514ad3162 
b4753a4e36122dc9605bcb44caa4aa1328146d0d M      drivers   


I'm not 100% sure that this is the proper commit as the kernel crashes at 
a later point (at the KDM login screen) than in my initial observation 
where it would not even complete booting.

Furthermore, while doing the git bisect good thing, at the last point I 
had to do "make CONFIG_DEBUG_SECTION_MISMATCH=y" as the kernel would not 
compile without it anymore.

That said, I notice that the kernel panic this kernel resulted in is very 
similar to that which gudvinr reported on the 11th, also with an ASUS 
system so I am beginning to see a pattern there.

Some fuzzy screenshots:

http://milkzilla.webconquest.com/~remmy/UVC/1.jpg
http://milkzilla.webconquest.com/~remmy/UVC/2.jpg

Please let me know if I can do anything further to help debug this. For 
now I have disabled the camera in the bios which allows me to otherwise 
use the computer as normal but I suspect there are quite a few people out 
there who bump into similar issues.

Thanks and regards,

Remco
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 836 bytes
Desc: Digital signature
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110920/0fa255af/attachment.pgp>

From jpitt at fhcrc.org  Tue Sep 20 22:34:13 2011
From: jpitt at fhcrc.org (Pitt, Jason N)
Date: Tue, 20 Sep 2011 13:34:13 -0700 (PDT)
Subject: [Linux-uvc-devel] uvcvideo: Failed to resubmit video URB (-27)
In-Reply-To: <1105060648.5892.1316549373915.JavaMail.root@zimbra2.fhcrc.org>
Message-ID: <1662794915.5996.1316550853140.JavaMail.root@zimbra2.fhcrc.org>

Hi-

I have a ubuntu 11.04 machine that I'm trying to capture 12 usb webcam feeds on.  The webcams are split over 3 pcie usb cards and the motherboards's usb controller.  I'm encountering instability using both streamer and guvcview.  I can get all 12 streams running but eventually one dies (in a minute or so) and then about 3 more die as well...leaving me with 7 or 8 stable streams.  What is the limitation?  The guvcview error is:

Could not grab image (select timeout): Resource temporarily unavailable


which is repeated repeatedly....


the streamer error is:
v4l2: oops: select timeouts

this usually only effects one or two cameras



with both programs dmesg yields:

[ 5330.048166] uvcvideo: Failed to resubmit video URB (-27).
[ 5330.048174] uvcvideo: Failed to resubmit video URB (-27).
[ 5330.048178] uvcvideo: Failed to resubmit video URB (-27).
[ 5330.048183] uvcvideo: Failed to resubmit video URB (-27).
[ 5330.048188] uvcvideo: Failed to resubmit video URB (-27).


I only need to capture an image from every camera every 2.4 seconds, if someone can provide me a good work-around I'd appreciate it!

-cheers
jason



-- 
/*
Jason Pitt PhD                                   206.667.5603
Roth Lab                                      jpitt at fhcrc.org
Basic Sciences Division 
Fred Hutchinson Cancer Research Center
1100 Fairview Ave N A3-135
Seattle, WA 98109
*/


From bug-track at fisher-privat.net  Wed Sep 21 08:27:06 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Wed, 21 Sep 2011 08:27:06 +0200
Subject: [Linux-uvc-devel] [RFC PATCH]  uvc debugfs interface, initial patch
In-Reply-To: <201109081032.38179.laurent.pinchart@ideasonboard.com>
References: <4E55FD4A.9080906@fisher-privat.net>
	<201109071005.44868.laurent.pinchart@ideasonboard.com>
	<4E672F71.7070306@fisher-privat.net>
	<201109081032.38179.laurent.pinchart@ideasonboard.com>
Message-ID: <4E7983BA.7010103@fisher-privat.net>

Hi Laurent,

Am 08.09.2011 10:32, schrieb Laurent Pinchart:
> Hi Alexey,
> On Wednesday 07 September 2011 10:46:41 Alexey Fisher wrote:
>> On 07.09.2011 10:05, Laurent Pinchart wrote:
>>> On Wednesday 07 September 2011 08:14:45 Alexey Fisher wrote:
>>>> Am 06.09.2011 17:24, schrieb Laurent Pinchart:
>>>>> On Monday 05 September 2011 17:48:42 Alexey Fisher wrote:
>>>>>> Am 31.08.2011 00:32, schrieb Laurent Pinchart:
>>>>>>> On Thursday 25 August 2011 09:44:10 Alexey Fisher wrote:
>>>>>>>> Hi Laurent,
>>>>>>>>
>>>>>>>> are there any reason why uvc_video_decode_start do not do precise
>>>>>>>> header size checks? Are there many cameras with broken header size
>>>>>>>> too?
>>>>>>>
>>>>>>> How precise do you mean ? The driver currently doesn't use much of
>>>>>>> the header, so it just makes sure that the header size is smaller
>>>>>>> than or equal to the packet size, and that it's at least 2 bytes
>>>>>>> long.
>>>>>>>
>>>>>>>> I send you patch on what i work now to catch streams with fragmented
>>>>>>>> packets.. what do you think about it? Will you apply some thing like
>>>>>>>> this?
>>>>>>>
>>>>>>> I'm not sure about that. Webcams that would require something like
>>>>>>> that are so broken that I'm tempted to consider them as not
>>>>>>> UVC-compliant. They should be returned to vendors with a loud
>>>>>>> complaint.
>>>>>>>
>>>>>>> Your patch might help, but the sad story is that it can't completely
>>>>>>> fix the streams. There's always a chance that fragmented packets that
>>>>>>> contains no header will start with data that looks like a header. You
>>>>>>> won't be able to find a buller-proof solution.
>>>>>>
>>>>>> You are right,
>>>>>> the idea is not to show definitely broken frames. If there is some
>>>>>> thing what we can't filter, is ok. we did our best.
>>>>>
>>>>> I understand. I'm not sure if this should be included in the mainline
>>>>> uvcvideo driver though. It makes the code more complex to support a
>>>>> couple of completely broken devices, and doesn't guarantee that those
>>>>> devices will work correctly.
>>>>
>>>> ok, i give up.
>>>
>>> I'm sorry about that. I definitely appreciate the work you've done on
>>> this, but as I said I don't think we should cripple the driver with
>>> complex code just to try to support a bit better a webcam that is
>>> completely broken anyway.
>>>
>>>>>> I just thinking about build in uvc compliance tester insight of the
>>>>>> module. Some thing what users can use right in shop or at home before
>>>>>> 14 day return guarantee.
>>>>>> You enables compliance test and it print results in in dmesg.  One of
>>>>>> test should be header check, error/drop rate, and so on.
>>>>>
>>>>> That's an interesting idea. It should probably come with a userspace
>>>>> stress test software as well.
>>>>
>>>> you mean luvcview or some thing other?
>>>
>>> I'm thinking about a new command line software that would get/set
>>> controls at high speed for instance, verify that all controls reported
>>> by the device are actually supported, start/stop streaming multiple
>>> times, ... Something that would stress the device and try to crash it
>>> (which is unfortunately often quite easy :-)).
>>
>> That's nice :)
>> and on kernel should provide file with statistics. Some thing like:
>> /sys/kernel/debug/uvcvideo/stats
>> It should have
>> - packet count
>> - frame count
>> - payloads with error bit
>> - empthy payloads
>> - overruns, and underruns (for row)
>> - jpeg completation (SOI - EOI)
>
> I don't think the driver should parse MJPEG data to extract markers. This can
> be done by the userspace application.
>
>> Any thing else?
>
> The number of failed and total control requests would also be interesting.
> Statistics about the status endpoint would also be interesting, to verify that
> the device correctly sends control change events for instance (although those
> are not properly supported in the driver yet).


this is initial patch for debugfs interface. I didn't implemented all 
requests, i think the size of this patch is any way too big now.

Here is how it's working. After driver is loaded it create 
debugfs/usb/uvcvideo directory. If some device is attached it create 
device dir like this: 001.007_046d.0991 (first part is usb bus, second 
is usb id). In this directory it create file called stats. Here is the 
content of this file:

usb id: 046d:0991, usb bus: 001:007
packet size: 944(6)
state: idle  <-- show the state of device. capture or idle
start time: 1316585466 <- unix epoch time in seconds.
capture time: 106   <- capture time in seconds.
format: YUV 4:2:2 (YUYV)
resolution: 320x240 @ 30
decode_start: 846880  <- this show how many payloads we started to decoding.
bad_header: 0 <-- haw many payloads was dropped, because of bad header
uvc_empty: 604160  <-- correct uvc payloads without video data
uvc_stream_err: 0  <-- count of payloads with err bit set
sequence: 955  <-- count of fid switches
out_of_sync: 0  <-- out of sync calls
-------------- next part --------------
A non-text attachment was scrubbed...
Name: uvc_debugfs.diff
Type: text/x-patch
Size: 13350 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110921/e9b5b327/attachment.bin>

From bug-track at fisher-privat.net  Thu Sep 22 16:29:57 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Thu, 22 Sep 2011 16:29:57 +0200
Subject: [Linux-uvc-devel] uvcvideo: Failed to resubmit video URB (-27)
In-Reply-To: <1662794915.5996.1316550853140.JavaMail.root@zimbra2.fhcrc.org>
References: <1662794915.5996.1316550853140.JavaMail.root@zimbra2.fhcrc.org>
Message-ID: <4E7B4665.1080903@fisher-privat.net>

On 20.09.2011 22:34, Pitt, Jason N wrote:
> Hi-
> 
> I have a ubuntu 11.04 machine that I'm trying to capture 12 usb webcam feeds on.  The webcams are split over 3 pcie usb cards and the motherboards's usb controller.  I'm encountering instability using both streamer and guvcview.  I can get all 12 streams running but eventually one dies (in a minute or so) and then about 3 more die as well...leaving me with 7 or 8 stable streams.  What is the limitation?  The guvcview error is:
> 
> Could not grab image (select timeout): Resource temporarily unavailable
> 
> 
> which is repeated repeatedly....
> 
> 
> the streamer error is:
> v4l2: oops: select timeouts
> 
> this usually only effects one or two cameras
> 
> 
> 
> with both programs dmesg yields:
> 
> [ 5330.048166] uvcvideo: Failed to resubmit video URB (-27).
> [ 5330.048174] uvcvideo: Failed to resubmit video URB (-27).
> [ 5330.048178] uvcvideo: Failed to resubmit video URB (-27).
> [ 5330.048183] uvcvideo: Failed to resubmit video URB (-27).
> [ 5330.048188] uvcvideo: Failed to resubmit video URB (-27).
> 
> 
> I only need to capture an image from every camera every 2.4 seconds, if someone can provide me a good work-around I'd appreciate it!
> 

Hi,
usb controller or usb device is usually responsible URB errors.
-27 is th error number. You can find it in
include/asm-generic/errno-base.h
27 is EFBIG in this case,
then in Documentation/usb/error-codes.txt
you can find description of this error.
"-EFBIG  Host controller driver can't schedule that many ISO frames."

I currently do not know if usbcore itself do not allow so many ISO
frames, or only one controller can't handle it. Are there any system in
this error? I mean do cams day on one controller or only one per controller?

Regards,
Alexey


From bug-track at fisher-privat.net  Thu Sep 22 17:04:12 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Thu, 22 Sep 2011 17:04:12 +0200
Subject: [Linux-uvc-devel] Problem booting with kernel 3.0 and ASUS UVC
 webcams
In-Reply-To: <Go.bDL@r78.nl>
References: <F$.DQC@r78.nl> <4E68574C.6020908@fisher-privat.net>
	<F&.OZO@r78.nl> <4E68665F.3090200@fisher-privat.net>
	<Go.bDL@r78.nl>
Message-ID: <4E7B4E6C.9050002@fisher-privat.net>

On 20.09.2011 03:29, Remco Rijnders wrote:
> On Thu, Sep 08, 2011 at 08:53:19AM +0200, Alexey wrote in
> <4E68665F.3090200 at fisher-privat.net>:
>> Am 08.09.2011 08:07, schrieb Remco Rijnders:
>>> On Thu, Sep 08, 2011 at 07:49:00AM +0200, Alexey wrote in
>>> <4E68574C.6020908 at fisher-privat.net>:
>>>> Hi,
>>>>
>>>> to get the idea of what is wrong here, we need at least dmesg. If you
>>>> can't provide dmesg, but you can compile kernel, do git bisect.
>>>
>>
>> You can use netconsole:
>> http://www.tocpcs.com/howto-log-a-kernel-panic-it-can-be-done/
>>
>> or attach usb-serial adapter and log the dmegs over serial on other
>> computer
>> For both his methods you need  second computer.
>>
>> or boot in verbose mode, no splash screen or so, and make a photo of
>> log from display.  Here you will need only one computer.
> 
> Hi,
> 
> Apologies for the late revert. I've been busy with other things and
> spent too much time on trying to get netconsole working without luck.
> Anyways, using git bisect I came to the following result:
> 
> [remmy at ketelbinkie uvcvideo]$ git bisect bad
> a96aa5342d575980e5b572cde88036f3a878ebee is the first bad
> commit                                                                                                                                                  
> commit
> a96aa5342d575980e5b572cde88036f3a878ebee                                                                                                                                                                   
> Author: Laurent Pinchart
> <laurent.pinchart at ideasonboard.com>                                                                                                                                                      
> Date:   Tue Jun 28 18:17:48 2011
> -0300                                                                                                                                                                            
>                                                                                                                                                                                                                   
>     [media] uvcvideo: Ignore entities for terminals with no supported
> format                                                                                                                                      
>                                                                                                                                                                                                                   
>     If a streaming interface has no supported format, the driver
> won't                                                                                                                                            
>     create a video device for the associated terminal. Fix an oops
> by                                                                                                                                             
>     ignoring that terminal when creating links between
> entities.                                                                                                                                                  
>                                                                                                                                                                                                                   
>     Signed-off-by: Laurent Pinchart
> <laurent.pinchart at ideasonboard.com>                                                                                                                                           
>     Signed-off-by: Mauro Carvalho Chehab
> <mchehab at redhat.com>                                                                                                                                                     
>                                                                                                                                                                                                                   
> :040000 040000 0296cc04d3923f1f93205ac6164802b514ad3162
> b4753a4e36122dc9605bcb44caa4aa1328146d0d M      drivers  
> 
> I'm not 100% sure that this is the proper commit as the kernel crashes
> at a later point (at the KDM login screen) than in my initial
> observation where it would not even complete booting.
> 
> Furthermore, while doing the git bisect good thing, at the last point I
> had to do "make CONFIG_DEBUG_SECTION_MISMATCH=y" as the kernel would not
> compile without it anymore.
> 
> That said, I notice that the kernel panic this kernel resulted in is
> very similar to that which gudvinr reported on the 11th, also with an
> ASUS system so I am beginning to see a pattern there.
> 
> Some fuzzy screenshots:
> 
> http://milkzilla.webconquest.com/~remmy/UVC/1.jpg
> http://milkzilla.webconquest.com/~remmy/UVC/2.jpg
> 
> Please let me know if I can do anything further to help debug this. For
> now I have disabled the camera in the bios which allows me to otherwise
> use the computer as normal but I suspect there are quite a few people
> out there who bump into similar issues.
> 
> Thanks and regards,


Can you please try this patch?

Regards,
Alexey
-------------- next part --------------
A non-text attachment was scrubbed...
Name: uvc_bug.diff
Type: text/x-patch
Size: 566 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110922/7ba15d57/attachment.bin>

From aab at cichlid.com  Thu Sep 22 17:10:30 2011
From: aab at cichlid.com (Andrew Burgess)
Date: Thu, 22 Sep 2011 08:10:30 -0700
Subject: [Linux-uvc-devel] uvcvideo: Failed to resubmit video URB (-27)
In-Reply-To: <4E7B4665.1080903@fisher-privat.net> (from
	bug-track@fisher-privat.net on Thu Sep 22 07:29:57 2011)
Message-ID: <1316704230.13952.0@hogo>

On 09/22/2011 07:29:57 AM, Alexey Fisher wrote:
> On 20.09.2011 22:34, Pitt, Jason N wrote:

> > I have a ubuntu 11.04 machine that I'm trying to capture 12 usb  
> webcam feeds on.
...
> > I only need to capture an image from every camera every 2.4 seconds,
> > if someone can provide me a good work-around I'd appreciate it!

do you capture from all 12 at the same moment?
maybe spread them around, a different one every 200 msec

> usb controller or usb device is usually responsible URB errors.
...
> 27 is EFBIG in this case,

in 2.6.39.3 there are 5 references to EFBIG in drivers/usb. the three in
drivers/usb/host/ehci-sched.c are associated with debug messages so if  
you
activate the messages (google, i don't remember how) you'll narrow it  
down
a bit. while you're at it you might want to add debug messages to the  
other
two references in drivers/usb/host/uhci-q.c

this is all modulo which kernel version you are running (and can
get pretty hairy). the usb devel mailing list might be helpful.

hth


From jpitt at fhcrc.org  Thu Sep 22 23:23:58 2011
From: jpitt at fhcrc.org (Pitt, Jason N)
Date: Thu, 22 Sep 2011 14:23:58 -0700 (PDT)
Subject: [Linux-uvc-devel] uvcvideo: Failed to resubmit video URB (-27)
In-Reply-To: <1316704230.13952.0@hogo>
Message-ID: <577925193.13142.1316726638527.JavaMail.root@zimbra2.fhcrc.org>


do you capture from all 12 at the same moment?
maybe spread them around, a different one every 200 msec

-They do not have to be synchronous, but the interval needs to be precise, ie. low jitter.  I've tried repeatedly opening and closing the streams every 2.4 seconds and that almost works....it was stable for about 5 or six minutes before I started loosing streams...interestingly after about 10 hours of opening and closing all of the cameras "died" and I had to unplug the to get them working again.


> usb controller or usb device is usually responsible URB errors.
...
> 27 is EFBIG in this case,

in 2.6.39.3 there are 5 references to EFBIG in drivers/usb. the three in
drivers/usb/host/ehci-sched.c are associated with debug messages so if  
you
activate the messages (google, i don't remember how) you'll narrow it  
down
a bit. while you're at it you might want to add debug messages to the  
other
two references in drivers/usb/host/uhci-q.c

this is all modulo which kernel version you are running (and can
get pretty hairy). the usb devel mailing list might be helpful.



I've been talking to people on the linux-usb list and they're being very helpful.  Thanks!











hth
_______________________________________________
Linux-uvc-devel mailing list
Linux-uvc-devel at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/linux-uvc-devel

-- 
/*
Jason Pitt PhD                                   206.667.5603
Roth Lab                                      jpitt at fhcrc.org
Basic Sciences Division
Fred Hutchinson Cancer Research Center
1100 Fairview Ave N A3-135
Seattle, WA 98109
*/


From jpitt at fhcrc.org  Thu Sep 22 23:29:41 2011
From: jpitt at fhcrc.org (Pitt, Jason N)
Date: Thu, 22 Sep 2011 14:29:41 -0700 (PDT)
Subject: [Linux-uvc-devel] uvcvideo: Failed to resubmit video URB (-27)
In-Reply-To: <4E7B4665.1080903@fisher-privat.net>
Message-ID: <633454205.13148.1316726981908.JavaMail.root@zimbra2.fhcrc.org>


I currently do not know if usbcore itself do not allow so many ISO
frames, or only one controller can't handle it. Are there any system in
this error? I mean do cams day on one controller or only one per controller?

Regards,
Alexey


It seems as if it is the usbcore itself, the 3 pcie cards I have are supposed to have 4 controllers per card and so I should have 1 camera per controller....in the past I've found it is only possible to run two usb2 cameras per controller.  

The threshold really seems to be around 8 cameras....is there a way I could decrease the bit depth to gray_scale to increase the throughput?  I only need gray_scale.  Would decreasing the frame size help?


-- 
/*
Jason Pitt PhD                                   206.667.5603
Roth Lab                                      jpitt at fhcrc.org
Basic Sciences Division 
Fred Hutchinson Cancer Research Center
1100 Fairview Ave N A3-135
Seattle, WA 98109
*/


From remco at webconquest.com  Fri Sep 23 06:52:46 2011
From: remco at webconquest.com (Remco Rijnders)
Date: Fri, 23 Sep 2011 06:52:46 +0200
Subject: [Linux-uvc-devel] Problem booting with kernel 3.0 and ASUS UVC
 webcams
In-Reply-To: <4E7B4E6C.9050002@fisher-privat.net>
References: <F$.DQC@r78.nl> <4E68574C.6020908@fisher-privat.net>
	<F&.OZO@r78.nl> <4E68665F.3090200@fisher-privat.net>
	<Go.bDL@r78.nl> <4E7B4E6C.9050002@fisher-privat.net>
Message-ID: <G$.zYw@r78.nl>

On Thu, Sep 22, 2011 at 05:04:12PM +0200, Alexey wrote in 
<4E7B4E6C.9050002 at fisher-privat.net>:
>Can you please try this patch?
>
>Regards,
>Alexey

>diff --git a/drivers/media/video/uvc/uvc_entity.c b/drivers/media/video/uvc/uvc_entity.c
>index 48fea37..29e2399 100644
>--- a/drivers/media/video/uvc/uvc_entity.c
>+++ b/drivers/media/video/uvc/uvc_entity.c
>@@ -49,7 +49,7 @@ static int uvc_mc_register_entity(struct uvc_video_chain *chain,
> 		if (remote == NULL)
> 			return -EINVAL;
> 
>-		source = (UVC_ENTITY_TYPE(remote) != UVC_TT_STREAMING)
>+		source = (UVC_ENTITY_TYPE(remote) == UVC_TT_STREAMING)
> 		       ? (remote->vdev ? &remote->vdev->entity : NULL)
> 		       : &remote->subdev.entity;
> 		if (source == NULL)

Hi Alexey,

With this patch the kernel panic has disappeared completely and the built 
in webcam works! Most excellent! Thank you!

Remco
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 836 bytes
Desc: Digital signature
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110923/da3a9de5/attachment.pgp>

From bug-track at fisher-privat.net  Fri Sep 23 07:51:24 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Fri, 23 Sep 2011 07:51:24 +0200
Subject: [Linux-uvc-devel] [PATCH] uvcvideo: fix UVC_ENTITY_TYPE check.
In-Reply-To: <G$.zYw@r78.nl>
References: <G$.zYw@r78.nl>
Message-ID: <1316757084-7375-1-git-send-email-bug-track@fisher-privat.net>

This patch fix small regression cousing crashe after device was
detected.  In case of buildin webcam it prevented laptop to boot.

This regression was introduced by patch a96aa5342:
uvcvideo: Ignore entities for terminals with no supported format

Bug-reported-by: Remco Rijnders <remco at webconquest.com>
Signed-off-by: Alexey Fisher <bug-track at fisher-privat.net>
---
 drivers/media/video/uvc/uvc_entity.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/media/video/uvc/uvc_entity.c b/drivers/media/video/uvc/uvc_entity.c
index 48fea37..29e2399 100644
--- a/drivers/media/video/uvc/uvc_entity.c
+++ b/drivers/media/video/uvc/uvc_entity.c
@@ -49,7 +49,7 @@ static int uvc_mc_register_entity(struct uvc_video_chain *chain,
 		if (remote == NULL)
 			return -EINVAL;
 
-		source = (UVC_ENTITY_TYPE(remote) != UVC_TT_STREAMING)
+		source = (UVC_ENTITY_TYPE(remote) == UVC_TT_STREAMING)
 		       ? (remote->vdev ? &remote->vdev->entity : NULL)
 		       : &remote->subdev.entity;
 		if (source == NULL)
-- 
1.7.5.4



From laurent.pinchart at ideasonboard.com  Fri Sep 23 10:19:00 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 23 Sep 2011 10:19:00 +0200
Subject: [Linux-uvc-devel] [PATCH] uvcvideo: fix UVC_ENTITY_TYPE check.
In-Reply-To: <1316757084-7375-1-git-send-email-bug-track@fisher-privat.net>
References: <G$.zYw@r78.nl>
	<1316757084-7375-1-git-send-email-bug-track@fisher-privat.net>
Message-ID: <201109231019.00410.laurent.pinchart@ideasonboard.com>

Hi Alexey,

On Friday 23 September 2011 07:51:24 Alexey Fisher wrote:
> This patch fix small regression cousing crashe after device was
> detected.  In case of buildin webcam it prevented laptop to boot.
> 
> This regression was introduced by patch a96aa5342:
> uvcvideo: Ignore entities for terminals with no supported format

Thanks for the patch.

I've already fixed the bug in my stable branch 
(http://git.linuxtv.org/pinchartl/uvcvideo.git/shortlog/refs/heads/uvcvideo-
stable) and Mauro said he would pull that for v3.1.

> Bug-reported-by: Remco Rijnders <remco at webconquest.com>
> Signed-off-by: Alexey Fisher <bug-track at fisher-privat.net>
> ---
>  drivers/media/video/uvc/uvc_entity.c |    2 +-
>  1 files changed, 1 insertions(+), 1 deletions(-)
> 
> diff --git a/drivers/media/video/uvc/uvc_entity.c
> b/drivers/media/video/uvc/uvc_entity.c index 48fea37..29e2399 100644
> --- a/drivers/media/video/uvc/uvc_entity.c
> +++ b/drivers/media/video/uvc/uvc_entity.c
> @@ -49,7 +49,7 @@ static int uvc_mc_register_entity(struct uvc_video_chain
> *chain, if (remote == NULL)
>  			return -EINVAL;
> 
> -		source = (UVC_ENTITY_TYPE(remote) != UVC_TT_STREAMING)
> +		source = (UVC_ENTITY_TYPE(remote) == UVC_TT_STREAMING)
>  		       ? (remote->vdev ? &remote->vdev->entity : NULL)
> 
>  		       : &remote->subdev.entity;
> 
>  		if (source == NULL)

-- 
Regards,

Laurent Pinchart


From bug-track at fisher-privat.net  Fri Sep 23 12:49:01 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Fri, 23 Sep 2011 12:49:01 +0200
Subject: [Linux-uvc-devel] [PATCH] uvcvideo: fix UVC_ENTITY_TYPE check.
In-Reply-To: <201109231019.00410.laurent.pinchart@ideasonboard.com>
References: <G$.zYw@r78.nl>
	<1316757084-7375-1-git-send-email-bug-track@fisher-privat.net>
	<201109231019.00410.laurent.pinchart@ideasonboard.com>
Message-ID: <4E7C641D.1060604@fisher-privat.net>

Am 23.09.2011 10:19, schrieb Laurent Pinchart:
> Hi Alexey,
>
> On Friday 23 September 2011 07:51:24 Alexey Fisher wrote:
>> This patch fix small regression cousing crashe after device was
>> detected.  In case of buildin webcam it prevented laptop to boot.
>>
>> This regression was introduced by patch a96aa5342:
>> uvcvideo: Ignore entities for terminals with no supported format
>
> Thanks for the patch.
>
> I've already fixed the bug in my stable branch
> (http://git.linuxtv.org/pinchartl/uvcvideo.git/shortlog/refs/heads/uvcvideo-
> stable) and Mauro said he would pull that for v3.1.

ouch.... :)
can you please take a look on my debugfs patch.


From laurent.pinchart at ideasonboard.com  Fri Sep 23 12:51:43 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 23 Sep 2011 12:51:43 +0200
Subject: [Linux-uvc-devel] [PATCH] uvcvideo: fix UVC_ENTITY_TYPE check.
In-Reply-To: <4E7C641D.1060604@fisher-privat.net>
References: <G$.zYw@r78.nl>
	<201109231019.00410.laurent.pinchart@ideasonboard.com>
	<4E7C641D.1060604@fisher-privat.net>
Message-ID: <201109231251.44331.laurent.pinchart@ideasonboard.com>

Hi Alexey,

On Friday 23 September 2011 12:49:01 Alexey Fisher wrote:
> Am 23.09.2011 10:19, schrieb Laurent Pinchart:
> > Hi Alexey,
> > 
> > On Friday 23 September 2011 07:51:24 Alexey Fisher wrote:
> >> This patch fix small regression cousing crashe after device was
> >> detected.  In case of buildin webcam it prevented laptop to boot.
> >> 
> >> This regression was introduced by patch a96aa5342:
> >> uvcvideo: Ignore entities for terminals with no supported format
> > 
> > Thanks for the patch.
> > 
> > I've already fixed the bug in my stable branch
> > (http://git.linuxtv.org/pinchartl/uvcvideo.git/shortlog/refs/heads/uvcvid
> > eo- stable) and Mauro said he would pull that for v3.1.
> 
> ouch.... :)

Sorry for the duplicate work.

> can you please take a look on my debugfs patch.

Sure. Thanks for spending time on it. I've already had a quick look, the 
approach looks good. I'll try to review it in depth during the weekend, but 
I'm very busy at the moment.

-- 
Regards,

Laurent Pinchart


From bug-track at fisher-privat.net  Fri Sep 23 13:08:38 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Fri, 23 Sep 2011 13:08:38 +0200
Subject: [Linux-uvc-devel] uvcvideo: Failed to resubmit video URB (-27)
In-Reply-To: <633454205.13148.1316726981908.JavaMail.root@zimbra2.fhcrc.org>
References: <633454205.13148.1316726981908.JavaMail.root@zimbra2.fhcrc.org>
Message-ID: <4E7C68B6.5050900@fisher-privat.net>

Am 22.09.2011 23:29, schrieb Pitt, Jason N:
>>
>> I currently do not know if usbcore itself do not allow so many ISO
>> frames, or only one controller can't handle it. Are there any system in
>> this error? I mean do cams day on one controller or only one per controller?
>>
>> Regards,
>> Alexey
>>
>>

> It seems as if it is the usbcore itself, the 3 pcie cards I have
 > are supposed to have 4 controllers per card and so I should have 1 camera
> per controller....in the past I've found it is only possible to run two usb2 cameras per controller.
>
> The threshold really seems to be around 8 cameras....
> is there a way I could decrease the bit depth to gray_scale to increase the throughput?

Short answer, no. Longer answer, if you have color image sensor, then it 
is probably bayer sensor. each pixel has only one color. There are 
different algorithms to reconstruct or predict what collor each pixel 
may have (demosaicing). So it looks like this:
Image sensor -> Preprocessor (demosaicing)/ Bayer converted to YUV -> 
other processors (jpeg compression,...) -> usb -> pc

Currently i do not know any color camera which do Bayer to gray scale. 
But if you will find some camera what has 2 MP monochrome sensore, it 
will be really good :). You will get best quality will less data.

> I only need gray_scale.  Would decreasing the frame size help?

You can reduce frame rate, or frame size or use compressed stream, for 
example jpeg. But i have some doubt concerning this problem. If you use 
less cams from the start, do they work ok?
I ask because, some webcams (like my logitech notebook pro) will freeze 
if you start and stop it before it start to send image. This web cam 
need about 10 seconds to start. So if you start your cam with interval 
of 2 seconds, then may be you triggered this bug.




From rhuskjr at gmail.com  Fri Sep 23 18:36:02 2011
From: rhuskjr at gmail.com (Raymond Husk)
Date: Fri, 23 Sep 2011 11:36:02 -0500
Subject: [Linux-uvc-devel] Upside down camera Fujitsu Lifebook T-series
Message-ID: <CAPP9mvgrnHC=kZEoGgM55+tgvzHub5PSFuP9aw53wNXFwi_UAg@mail.gmail.com>

I have attached the two files that you asked for, hope it helps.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110923/5b33b4bf/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lsusb.log
Type: text/x-log
Size: 447 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110923/5b33b4bf/attachment.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: dmi.log
Type: text/x-log
Size: 11530 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110923/5b33b4bf/attachment-0001.bin>

From riccardo.magliocchetti at gmail.com  Sun Sep 25 16:06:53 2011
From: riccardo.magliocchetti at gmail.com (Riccardo Magliocchetti)
Date: Sun, 25 Sep 2011 16:06:53 +0200
Subject: [Linux-uvc-devel] compat_ioctl32 errors while poking
Message-ID: <4E7F357D.8020804@gmail.com>

Hello,

i've started playing with opencv but the inlined python script does not 
work and these messages are shown in dmesg:

[32452.730023] compat_ioctl32: unknown ioctl 'v', dir=1, #10 (0x4020760a)
[32452.730043] ioctl32(python:10359): Unknown cmd fd(3) 
cmd(4020760a){t:'v';sz:32} arg(09f57f48) on /dev/video0

This may well be an opencv issue.

$ cat cvtest.py
import cv

capture = cv.CreateCameraCapture(0)

cv.SetCaptureProperty(capture,cv.CV_CAP_PROP_FRAME_WIDTH, 640.0)
cv.SetCaptureProperty(capture,cv.CV_CAP_PROP_FRAME_HEIGHT, 480.0)

while True:
     img = cv.QueryFrame(capture)
     cv.ShowImage("camera", img)
     cv.WaitKey(10)

kernel is 3.0 64 bit on 32 bit userspace, camera is 174f:5931, the 
camera works fine with luvcview.

thanks,
riccardo


From laurent.pinchart at ideasonboard.com  Mon Sep 26 18:15:40 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Mon, 26 Sep 2011 18:15:40 +0200
Subject: [Linux-uvc-devel] compat_ioctl32 errors while poking
In-Reply-To: <4E7F357D.8020804@gmail.com>
References: <4E7F357D.8020804@gmail.com>
Message-ID: <201109261815.40708.laurent.pinchart@ideasonboard.com>

Hi Riccardo,

On Sunday 25 September 2011 16:06:53 Riccardo Magliocchetti wrote:
> Hello,
> 
> i've started playing with opencv but the inlined python script does not
> work and these messages are shown in dmesg:
> 
> [32452.730023] compat_ioctl32: unknown ioctl 'v', dir=1, #10 (0x4020760a)
> [32452.730043] ioctl32(python:10359): Unknown cmd fd(3)
> cmd(4020760a){t:'v';sz:32} arg(09f57f48) on /dev/video0

This is a V4L1 ioctl and the uvcvideo driver supports V4L2 only. V4L1 is 
deprecated and has been removed from the kernel.

> This may well be an opencv issue.
> 
> $ cat cvtest.py
> import cv
> 
> capture = cv.CreateCameraCapture(0)
> 
> cv.SetCaptureProperty(capture,cv.CV_CAP_PROP_FRAME_WIDTH, 640.0)
> cv.SetCaptureProperty(capture,cv.CV_CAP_PROP_FRAME_HEIGHT, 480.0)
> 
> while True:
>      img = cv.QueryFrame(capture)
>      cv.ShowImage("camera", img)
>      cv.WaitKey(10)
> 
> kernel is 3.0 64 bit on 32 bit userspace, camera is 174f:5931, the
> camera works fine with luvcview.

-- 
Regards,

Laurent Pinchart


From riccardo.magliocchetti at gmail.com  Mon Sep 26 18:36:46 2011
From: riccardo.magliocchetti at gmail.com (Riccardo Magliocchetti)
Date: Mon, 26 Sep 2011 18:36:46 +0200
Subject: [Linux-uvc-devel] compat_ioctl32 errors while poking
In-Reply-To: <201109261815.40708.laurent.pinchart@ideasonboard.com>
References: <4E7F357D.8020804@gmail.com>
	<201109261815.40708.laurent.pinchart@ideasonboard.com>
Message-ID: <4E80AA1E.7050209@gmail.com>

Hi Laurent,

Il 26/09/2011 18:15, Laurent Pinchart ha scritto:
> Hi Riccardo,
>
> On Sunday 25 September 2011 16:06:53 Riccardo Magliocchetti wrote:
>> Hello,
>>
>> i've started playing with opencv but the inlined python script does not
>> work and these messages are shown in dmesg:
>>
>> [32452.730023] compat_ioctl32: unknown ioctl 'v', dir=1, #10 (0x4020760a)
>> [32452.730043] ioctl32(python:10359): Unknown cmd fd(3)
>> cmd(4020760a){t:'v';sz:32} arg(09f57f48) on /dev/video0
>
> This is a V4L1 ioctl and the uvcvideo driver supports V4L2 only. V4L1 is
> deprecated and has been removed from the kernel.

Thanks for the quick response! Will upgrade opencv then.

cheers,
riccardo


From kaz at kylheku.com  Fri Sep 30 04:24:02 2011
From: kaz at kylheku.com (Kaz Kylheku)
Date: Thu, 29 Sep 2011 19:24:02 -0700
Subject: [Linux-uvc-devel] H.264 camera options.
Message-ID: <ba7a791d03f0c0bf7965c9e75274d682@127.0.0.1>


Hi All,

I'm searching for a suitable H.264 camera to use as a "reference 
hardware"
for a a Linux-based embedded platform.

I've seen references to the B990 from Logitech, so that looks like a 
good candidate.

Is there anything out there which goes above 720p, maybe as high as 
1080p?

This is not a hard requirement, but a "nice to have".

It would be nice to have as capable a H.264 camera as possible for the 
reference.

An important requirement is that the un-encoded video stream is 
available from
the camera, not only the coded stream. It should be possible to loop 
back
the picture without decoding anything, since decoding resources are 
limited
on the platform, especially when we get into higher resolutions.

Thanks for any advice.



From kaz at kylheku.com  Fri Sep 30 22:41:29 2011
From: kaz at kylheku.com (Kaz Kylheku)
Date: Fri, 30 Sep 2011 13:41:29 -0700
Subject: [Linux-uvc-devel] Annoying HTTPS in link to list archive.
Message-ID: <ffa655691f67087dd7a952861430987b@127.0.0.1>


Hi all,

If you view this list's page (note the HTTP here)

http://lists.berlios.de/mailman/listinfo/linux-uvc-devel

the link which it gives to the list archives is HTTPS!

Because of this stupidity, Google has indexed this list using HTTPS 
URLs.
You have to accept the self-signed security certificate when you 
navigate
to the archive pages from a Google search result.

Can someone fix that?



