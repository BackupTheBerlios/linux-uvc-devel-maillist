From lists at brachttal.net  Tue May  1 01:11:50 2007
From: lists at brachttal.net (Andreas Volz)
Date: Tue, 1 May 2007 01:11:50 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS 37
Message-ID: <20070501011150.01e3bf43@frodo.mittelerde>

Hello,

I've a Panasonic NV-GS 37 camera with Firewire and USB connector. Until
I wait on my new Firewire card I like to get the USB connection working.

I read on this list that Panasonic NV-GS 27 works. So I hope the
Panasonic NV-GS 37 works also or is easy to port. I tried UVC, but
failed. Here are my results:

Attach the device to the computer:

May  1 00:51:15 frodo usb 3-1.3: new high speed USB device using
ehci_hcd and address 13
May  1 00:51:15 frodo usb 3-1.3: configuration #1 chosen from 1 choice
May  1 00:51:15 frodo uvcvideo: Found UVC 1.00 device DVC (04da:231e)
May  1 00:51:15 frodo uvcvideo: No valid video chain found.
May  1 00:52:24 frodo su(pam_unix)[9484]: session closed for user root

> lsmod
Module                  Size  Used by
uvcvideo               38532  0 
compat_ioctl32          1344  1 uvcvideo
videodev               26048  1 uvcvideo
v4l1_compat            12420  2 uvcvideo,videodev
v4l2_common            22784  2 uvcvideo,videodev
nvidia               4548308  12 
w83627hf               22800  0 
hwmon_vid               2688  1 w83627hf
hwmon                   3476  1 w83627hf
i2c_isa                 5184  1 w83627hf
bnep                   13568  2 
hidp                   15616  2 
snd_seq_midi            8160  0 
snd_emu10k1_synth       7104  0 
snd_emux_synth         31872  1 snd_emu10k1_synth
snd_seq_virmidi         6976  1 snd_emux_synth
snd_seq_midi_emul       5888  1 snd_emux_synth
snd_pcm_oss            39648  0 
snd_mixer_oss          15936  1 snd_pcm_oss
snd_seq_oss            29376  0 
snd_seq_midi_event      7232  3 snd_seq_midi,snd_seq_virmidi,snd_seq_oss
snd_seq                45584  8
snd_seq_midi,snd_emux_synth,snd_seq_virmidi,snd_seq_midi_emul,snd_seq_oss,snd_seq_midi_event
uhci_hcd               22156  0 rfcomm                 35548  3 
l2cap                  22596  14 bnep,hidp,rfcomm
bluetooth              48292  6 bnep,hidp,rfcomm,l2cap
rtc                    13040  0 
vfat                   12480  0 
fat                    49116  1 vfat
usb_storage            35012  0 
snd_ens1371            24544  0 
gameport               14920  1 snd_ens1371
usbhid                 16004  0 
usblp                  13056  0 
snd_emu10k1           109888  1 snd_emu10k1_synth
snd_rawmidi            23136  4
snd_seq_midi,snd_seq_virmidi,snd_ens1371,snd_emu10k1
snd_ac97_codec         87904  2 snd_ens1371,snd_emu10k1
ac97_bus                2240  1 snd_ac97_codec snd_pcm
72392  4 snd_pcm_oss,snd_ens1371,snd_emu10k1,snd_ac97_codec
snd_seq_device          7628  7
snd_seq_midi,snd_emu10k1_synth,snd_emux_synth,snd_seq_oss,snd_seq,snd_emu10k1,snd_rawmidi
snd_timer              21252  3 snd_seq,snd_emu10k1,snd_pcm
snd_page_alloc          9608  2 snd_emu10k1,snd_pcm
snd_util_mem            4544  2 snd_emux_synth,snd_emu10k1
snd_hwdep               9028  2 snd_emux_synth,snd_emu10k1
snd                    48356  14
snd_emux_synth,snd_seq_virmidi,snd_pcm_oss,snd_mixer_oss,snd_seq_oss,snd_seq,snd_ens1371,snd_emu10k1,snd_rawmidi,snd_ac97_codec,snd_pcm,snd_seq_device,snd_timer,snd_hwdep
soundcore               8032  1 snd i2c_sis96x              5316  0
i2c_core               21200  4 nvidia,w83627hf,i2c_isa,i2c_sis96x
sis_agp                 8324  1 agpgart                30160  2
nvidia,sis_agp 3c59x                  40552  0 ohci1394
33136  0 ieee1394               89140  1 ohci1394
ehci_hcd               27404  0 
ohci_hcd               19204  0 
usbcore               119640  8
uvcvideo,uhci_hcd,usb_storage,usbhid,usblp,ehci_hcd,ohci_hcd

> lsusb
Bus 003 Device 013: ID 04da:231e Panasonic (Matsushita) 
Bus 003 Device 002: ID 04b4:6560 Cypress Semiconductor Corp. CY7C65640
USB-2.0 "TetraHub" Bus 003 Device 001: ID 0000:0000  
Bus 002 Device 002: ID 046d:c032 Logitech, Inc. MouseMan iFeel
Bus 002 Device 001: ID 0000:0000  
Bus 001 Device 003: ID 03f0:8204 Hewlett-Packard 
Bus 001 Device 001: ID 0000:0000 

> ./luvcview 
luvcview version 0.2.0 
Video driver: x11
A window manager is available
video /dev/video0 
ERROR opening V4L interface 
: No such file or directory

There're no /dev/video* devices. Any ideas?

regards
Andreas


From pundiramit at gmail.com  Tue May  1 11:21:04 2007
From: pundiramit at gmail.com (amit pundir)
Date: Tue, 1 May 2007 14:51:04 +0530
Subject: [Linux-uvc-devel] compile time error
In-Reply-To: <200704302222.18449.laurent.pinchart@skynet.be>
References: <52c7556c0704290622s446d48c6x5e76b29a533e4441@mail.gmail.com>
	<200704302222.18449.laurent.pinchart@skynet.be>
Message-ID: <52c7556c0705010221t29b90359ue8ece02272fbf91f@mail.gmail.com>

hey thanks..
it worked...
its working perfectly...
and its resolution is way far better than what i have experienced on M$
Vista..

On 5/1/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
>
> Hi Amit,
> You're using a waaaaaaaaaaaaay old driver version. Please checkout the
> latest
> driver from SVN as explained on http://linux-uvc.berlios.de.
>
> Best regards,
>
> Laurent Pinchart
>



-- 
Thanks and Regards
Amit Pundir

"Disclaimer: The opinions expressed herein are not necessarily those of my
employer, not necessarily mine, and probably not necessary."
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070501/c94ba2fc/attachment.html>

From laurent.pinchart at skynet.be  Tue May  1 11:27:00 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 1 May 2007 11:27:00 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS 37
In-Reply-To: <20070501011150.01e3bf43@frodo.mittelerde>
References: <20070501011150.01e3bf43@frodo.mittelerde>
Message-ID: <200705011127.00975.laurent.pinchart@skynet.be>

Hi Andreas,

> I've a Panasonic NV-GS 37 camera with Firewire and USB connector. Until
> I wait on my new Firewire card I like to get the USB connection working.
>
> I read on this list that Panasonic NV-GS 27 works. So I hope the
> Panasonic NV-GS 37 works also or is easy to port. I tried UVC, but
> failed. Here are my results:
>
> Attach the device to the computer:
>
> May  1 00:51:15 frodo usb 3-1.3: new high speed USB device using
> ehci_hcd and address 13
> May  1 00:51:15 frodo usb 3-1.3: configuration #1 chosen from 1 choice
> May  1 00:51:15 frodo uvcvideo: Found UVC 1.00 device DVC (04da:231e)
> May  1 00:51:15 frodo uvcvideo: No valid video chain found.
> May  1 00:52:24 frodo su(pam_unix)[9484]: session closed for user root
>
> > lsmod
>
> Module                  Size  Used by
> uvcvideo               38532  0
> compat_ioctl32          1344  1 uvcvideo
> videodev               26048  1 uvcvideo
> v4l1_compat            12420  2 uvcvideo,videodev
> v4l2_common            22784  2 uvcvideo,videodev
> nvidia               4548308  12
> w83627hf               22800  0
> hwmon_vid               2688  1 w83627hf
> hwmon                   3476  1 w83627hf
> i2c_isa                 5184  1 w83627hf
> bnep                   13568  2
> hidp                   15616  2
> snd_seq_midi            8160  0
> snd_emu10k1_synth       7104  0
> snd_emux_synth         31872  1 snd_emu10k1_synth
> snd_seq_virmidi         6976  1 snd_emux_synth
> snd_seq_midi_emul       5888  1 snd_emux_synth
> snd_pcm_oss            39648  0
> snd_mixer_oss          15936  1 snd_pcm_oss
> snd_seq_oss            29376  0
> snd_seq_midi_event      7232  3 snd_seq_midi,snd_seq_virmidi,snd_seq_oss
> snd_seq                45584  8
> snd_seq_midi,snd_emux_synth,snd_seq_virmidi,snd_seq_midi_emul,snd_seq_oss,s
>nd_seq_midi_event uhci_hcd               22156  0 rfcomm                
> 35548  3
> l2cap                  22596  14 bnep,hidp,rfcomm
> bluetooth              48292  6 bnep,hidp,rfcomm,l2cap
> rtc                    13040  0
> vfat                   12480  0
> fat                    49116  1 vfat
> usb_storage            35012  0
> snd_ens1371            24544  0
> gameport               14920  1 snd_ens1371
> usbhid                 16004  0
> usblp                  13056  0
> snd_emu10k1           109888  1 snd_emu10k1_synth
> snd_rawmidi            23136  4
> snd_seq_midi,snd_seq_virmidi,snd_ens1371,snd_emu10k1
> snd_ac97_codec         87904  2 snd_ens1371,snd_emu10k1
> ac97_bus                2240  1 snd_ac97_codec snd_pcm
> 72392  4 snd_pcm_oss,snd_ens1371,snd_emu10k1,snd_ac97_codec
> snd_seq_device          7628  7
> snd_seq_midi,snd_emu10k1_synth,snd_emux_synth,snd_seq_oss,snd_seq,snd_emu10
>k1,snd_rawmidi snd_timer              21252  3 snd_seq,snd_emu10k1,snd_pcm
> snd_page_alloc          9608  2 snd_emu10k1,snd_pcm
> snd_util_mem            4544  2 snd_emux_synth,snd_emu10k1
> snd_hwdep               9028  2 snd_emux_synth,snd_emu10k1
> snd                    48356  14
> snd_emux_synth,snd_seq_virmidi,snd_pcm_oss,snd_mixer_oss,snd_seq_oss,snd_se
>q,snd_ens1371,snd_emu10k1,snd_rawmidi,snd_ac97_codec,snd_pcm,snd_seq_device,
>snd_timer,snd_hwdep soundcore               8032  1 snd i2c_sis96x          
>    5316  0 i2c_core               21200  4
> nvidia,w83627hf,i2c_isa,i2c_sis96x sis_agp                 8324  1 agpgart 
>               30160  2
> nvidia,sis_agp 3c59x                  40552  0 ohci1394
> 33136  0 ieee1394               89140  1 ohci1394
> ehci_hcd               27404  0
> ohci_hcd               19204  0
> usbcore               119640  8
> uvcvideo,uhci_hcd,usb_storage,usbhid,usblp,ehci_hcd,ohci_hcd
>
> > lsusb
>
> Bus 003 Device 013: ID 04da:231e Panasonic (Matsushita)
> Bus 003 Device 002: ID 04b4:6560 Cypress Semiconductor Corp. CY7C65640
> USB-2.0 "TetraHub" Bus 003 Device 001: ID 0000:0000
> Bus 002 Device 002: ID 046d:c032 Logitech, Inc. MouseMan iFeel
> Bus 002 Device 001: ID 0000:0000
> Bus 001 Device 003: ID 03f0:8204 Hewlett-Packard
> Bus 001 Device 001: ID 0000:0000
>
> > ./luvcview
>
> luvcview version 0.2.0
> Video driver: x11
> A window manager is available
> video /dev/video0
> ERROR opening V4L interface
>
> : No such file or directory
>
> There're no /dev/video* devices. Any ideas?

Please post the output of

lsusb -d 04da:231e -v

with usbutils 0.72 or newer.

Best regards,

Laurent Pinchart


From lists at brachttal.net  Tue May  1 12:17:15 2007
From: lists at brachttal.net (Andreas Volz)
Date: Tue, 1 May 2007 12:17:15 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS 37
In-Reply-To: <200705011127.00975.laurent.pinchart@skynet.be>
References: <20070501011150.01e3bf43@frodo.mittelerde>
	<200705011127.00975.laurent.pinchart@skynet.be>
Message-ID: <20070501121715.32f87e62@frodo.mittelerde>

Am Tue, 1 May 2007 11:27:00 +0200 schrieb Laurent Pinchart:

> Hi Andreas,
> 
> > I've a Panasonic NV-GS 37 camera with Firewire and USB connector.
> > Until I wait on my new Firewire card I like to get the USB
> > connection working.
> > ...

> 
> Please post the output of
> 
> lsusb -d 04da:231e -v

Bus 003 Device 005: ID 04da:231e Panasonic (Matsushita) 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x04da Panasonic (Matsushita)
  idProduct          0x231e 
  bcdDevice            1.00
  iManufacturer           1 Panasonic
  iProduct                2 DVC
  iSerial                 3 0000c174732e
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          175
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xc0
      Self Powered
    MaxPower                2mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0 
      iFunction               4 Video Edit
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0 
      iInterface              4 Video Edit
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           89
        dwClockFrequency       13.500000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                17
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               6 Camera
        wObjectiveFocalLengthMin    100
        wObjectiveFocalLengthMax   1200
        wOcularFocalLength          100
        bControlSize                  2
        bmControls           0x00000000
      VideoControl Interface Descriptor:
        bLength                16
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0202 Sequential Media
        bAssocTerminal          0
        iTerminal               7 MTIT
        junk at descriptor end: 01 0f 05 af ff ff 7f 02
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               5
        iTerminal               8 OT
      VideoControl Interface Descriptor:
        bLength                 8
        bDescriptorType        36
        bDescriptorSubtype      4 (SELECTOR_UNIT)
        bUnitID                 4
        bNrInPins               2
        baSource( 0)            1
        baSource( 1)            2
        iSelector               9 SU
      VideoControl Interface Descriptor:
        bLength                26
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 5
        guidExtensionCode         {6f04be00-b9e8-4b11-8fa2-a5b99e5a7698}
        bNumControl             3
        bNrPins                 1
        baSourceID( 0)          4
        bControlSize            1
        bmControls( 0)       0x07
        iExtension             10 XU
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface             11 DV IN
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormarts                        1
        wTotalLength                    33024
        bEndPointAddress                    0
        bmInfo                              3
        bTerminalLink                       0
        bStillCaptureMethod                 0
        bTriggerSupport                     0
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                     9
      VideoStreaming Interface Descriptor:
        bLength                             9
        bDescriptorType                    36
        bDescriptorSubtype                 12         Invalid desc
subtype: 01 80 32 02 00 00 Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface             11 DV IN
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x01ec  1x 492 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0         8
  bNumConfigurations      1
Device Status:     0x0001
  Self Powered


> with usbutils 0.72 or newer.

usbutils-0.72 is installed

regards
Andreas


From laurent.pinchart at skynet.be  Thu May  3 00:11:01 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 3 May 2007 00:11:01 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS 37
In-Reply-To: <20070501121715.32f87e62@frodo.mittelerde>
References: <20070501011150.01e3bf43@frodo.mittelerde>
	<200705011127.00975.laurent.pinchart@skynet.be>
	<20070501121715.32f87e62@frodo.mittelerde>
Message-ID: <200705030011.02063.laurent.pinchart@skynet.be>

Hi Andreas,

> > > I've a Panasonic NV-GS 37 camera with Firewire and USB connector.
> > > Until I wait on my new Firewire card I like to get the USB
> > > connection working.
> > > ...
> >
> > Please post the output of
> >
> > lsusb -d 04da:231e -v
>
> Bus 003 Device 005: ID 04da:231e Panasonic (Matsushita)
> Device Descriptor:
>   bLength                18
>   bDescriptorType         1
>   bcdUSB               2.00
>   bDeviceClass          239 Miscellaneous Device
>   bDeviceSubClass         2 Common Class
>   bDeviceProtocol         1 Interface Association
>   bMaxPacketSize0        64
>   idVendor           0x04da Panasonic (Matsushita)
>   idProduct          0x231e
>   bcdDevice            1.00
>   iManufacturer           1 Panasonic
>   iProduct                2 DVC
>   iSerial                 3 0000c174732e
>   bNumConfigurations      1
>   Configuration Descriptor:
>     bLength                 9
>     bDescriptorType         2
>     wTotalLength          175
>     bNumInterfaces          2
>     bConfigurationValue     1
>     iConfiguration          0
>     bmAttributes         0xc0
>       Self Powered
>     MaxPower                2mA
>     Interface Association:
>       bLength                 8
>       bDescriptorType        11
>       bFirstInterface         0
>       bInterfaceCount         2
>       bFunctionClass         14 Video
>       bFunctionSubClass       3 Video Interface Collection
>       bFunctionProtocol       0
>       iFunction               4 Video Edit
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       0
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      1 Video Control
>       bInterfaceProtocol      0
>       iInterface              4 Video Edit
>       VideoControl Interface Descriptor:
>         bLength                13
>         bDescriptorType        36
>         bDescriptorSubtype      1 (HEADER)
>         bcdUVC               1.00
>         wTotalLength           89
>         dwClockFrequency       13.500000MHz
>         bInCollection           1
>         baInterfaceNr( 0)       1
>       VideoControl Interface Descriptor:
>         bLength                17
>         bDescriptorType        36
>         bDescriptorSubtype      2 (INPUT_TERMINAL)
>         bTerminalID             1
>         wTerminalType      0x0201 Camera Sensor
>         bAssocTerminal          0
>         iTerminal               6 Camera
>         wObjectiveFocalLengthMin    100
>         wObjectiveFocalLengthMax   1200
>         wOcularFocalLength          100
>         bControlSize                  2
>         bmControls           0x00000000
>       VideoControl Interface Descriptor:
>         bLength                16
>         bDescriptorType        36
>         bDescriptorSubtype      2 (INPUT_TERMINAL)
>         bTerminalID             2
>         wTerminalType      0x0202 Sequential Media
>         bAssocTerminal          0
>         iTerminal               7 MTIT
>         junk at descriptor end: 01 0f 05 af ff ff 7f 02
>       VideoControl Interface Descriptor:
>         bLength                 9
>         bDescriptorType        36
>         bDescriptorSubtype      3 (OUTPUT_TERMINAL)
>         bTerminalID             3
>         wTerminalType      0x0101 USB Streaming
>         bAssocTerminal          0
>         bSourceID               5
>         iTerminal               8 OT
>       VideoControl Interface Descriptor:
>         bLength                 8
>         bDescriptorType        36
>         bDescriptorSubtype      4 (SELECTOR_UNIT)
>         bUnitID                 4
>         bNrInPins               2
>         baSource( 0)            1
>         baSource( 1)            2
>         iSelector               9 SU
>       VideoControl Interface Descriptor:
>         bLength                26
>         bDescriptorType        36
>         bDescriptorSubtype      6 (EXTENSION_UNIT)
>         bUnitID                 5
>         guidExtensionCode         {6f04be00-b9e8-4b11-8fa2-a5b99e5a7698}
>         bNumControl             3
>         bNrPins                 1
>         baSourceID( 0)          4
>         bControlSize            1
>         bmControls( 0)       0x07
>         iExtension             10 XU
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x86  EP 6 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0040  1x 64 bytes
>         bInterval              10
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       0
>       bNumEndpoints           0
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface             11 DV IN
>       VideoStreaming Interface Descriptor:
>         bLength                            14
>         bDescriptorType                    36
>         bDescriptorSubtype                  1 (INPUT_HEADER)
>         bNumFormarts                        1
>         wTotalLength                    33024
>         bEndPointAddress                    0
>         bmInfo                              3
>         bTerminalLink                       0
>         bStillCaptureMethod                 0
>         bTriggerSupport                     0
>         bTriggerUsage                       1
>         bControlSize                        1
>         bmaControls( 0)                     9
>       VideoStreaming Interface Descriptor:
>         bLength                             9
>         bDescriptorType                    36
>         bDescriptorSubtype                 12         Invalid desc
> subtype: 01 80 32 02 00 00 Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       1
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface             11 DV IN
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x01ec  1x 492 bytes
>         bInterval               1
> Device Qualifier (for other device speed):
>   bLength                10
>   bDescriptorType         6
>   bcdUSB               2.00
>   bDeviceClass          239 Miscellaneous Device
>   bDeviceSubClass         2 Common Class
>   bDeviceProtocol         1 Interface Association
>   bMaxPacketSize0         8
>   bNumConfigurations      1
> Device Status:     0x0001
>   Self Powered
>
> > with usbutils 0.72 or newer.
>
> usbutils-0.72 is installed

Thanks for the information. Your camera implements a few features not 
supported by the Linux UVC driver yet. I will try to add support for at least 
live video streaming (the camera also supports playback through the USB 
interface). I might ask you to test a few patches, as I can't test them 
without the necessary hardware. Please also note that the camera supports DV 
format only, and most Linux webcam-related applications can't handle that.

Best regards,

Laurent Pinchart


From lists at brachttal.net  Thu May  3 19:35:24 2007
From: lists at brachttal.net (Andreas Volz)
Date: Thu, 3 May 2007 19:35:24 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS 37
In-Reply-To: <200705030011.02063.laurent.pinchart@skynet.be>
References: <20070501011150.01e3bf43@frodo.mittelerde>
	<200705011127.00975.laurent.pinchart@skynet.be>
	<20070501121715.32f87e62@frodo.mittelerde>
	<200705030011.02063.laurent.pinchart@skynet.be>
Message-ID: <20070503193524.7afe5beb@frodo.mittelerde>

Am Thu, 3 May 2007 00:11:01 +0200 schrieb Laurent Pinchart:

> Thanks for the information. Your camera implements a few features not 
> supported by the Linux UVC driver yet. I will try to add support for
> at least live video streaming (the camera also supports playback
> through the USB interface). I might ask you to test a few patches, as
> I can't test them without the necessary hardware. Please also note

Thanks for your answer. I'm very motivated to help you testing patches.
Currently I run the linux-uvc module compiled from CVS.

> that the camera supports DV format only, and most Linux
> webcam-related applications can't handle that.

Until now I'm not (yet) experienced with video and USB at kernel module
level. But if basic support video works and the only problem are user
application that I'm able to write my own application.


BTW: The camera is has a setting for "webcam" and "motion dv". Here is
a lsusb with the other setting active. Perhaps something changed...

> lsusb -d 04da:231d -v

Bus 003 Device 008: ID 04da:231d Panasonic (Matsushita) 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x04da Panasonic (Matsushita)
  idProduct          0x231d 
  bcdDevice            1.00
  iManufacturer           1 Panasonic
  iProduct                2 DVC
  iSerial                 3 0000c174732e
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          286
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xc0
      Self Powered
    MaxPower                2mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0 
      iFunction               4 Web-Camera
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0 
      iInterface              4 Web-Camera
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           63
        dwClockFrequency       13.500000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                17
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               5 Camera
        wObjectiveFocalLengthMin    100
        wObjectiveFocalLengthMax   1200
        wOcularFocalLength          100
        bControlSize                  2
        bmControls           0x00000200
          Zoom (Absolute)
      VideoControl Interface Descriptor:
        bLength                16
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0202 Sequential Media
        bAssocTerminal          0
        iTerminal               6 MTIT
        junk at descriptor end: 01 0f 05 af ff ff 7f 02
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               4
        iTerminal               7 OT
      VideoControl Interface Descriptor:
        bLength                 8
        bDescriptorType        36
        bDescriptorSubtype      4 (SELECTOR_UNIT)
        bUnitID                 4
        bNrInPins               2
        baSource( 0)            1
        baSource( 1)            2
        iSelector               8 SU
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval              10
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              9 VideoStreamingInterface
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormarts                        1
        wTotalLength                    33024
        bEndPointAddress                    0
        bmInfo                              3
        bTerminalLink                       0
        bStillCaptureMethod                 0
        bTriggerSupport                     0
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    11
      VideoStreaming Interface Descriptor:
        bLength                            11
        bDescriptorType                    36
        bDescriptorSubtype                  6 (FORMAT_MJPEG)
        bFormatIndex                        1
        bNumFrameDescriptors                1
        bFlags                              0
          Fixed-size samples: No
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x02
          Interlaced stream or variable: No
          Fields per frame: 2 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   655360
        dwMaxBitRate                  3276800
        dwMaxVideoFrameBufferSize       32768
        dwDefaultFrameInterval         800000
        bFrameIntervalType                  1
        dwFrameInterval( 0)            800000
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     0 (Unspecified)
        bTransferCharacteristics            0 (Unspecified)
        bMatrixCoefficients                 0 (Unspecified)
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              9 VideoStreamingInterface
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         2
      bInterfaceCount         2
      bFunctionClass          1 Audio
      bFunctionSubClass       1 Control Device
      bFunctionProtocol       0 
      iFunction               2 DVC
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0 
      iInterface              0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           30
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             2
        wChannelConfig     0x0003
          Left Front (L)
          Right Front (R)
        iChannelNames           0 
        iTerminal               0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               1
        iTerminal               0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           2
        bDelay                  2 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             2
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            1 Discrete
        tSamFreq[ 0]        16000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               1
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x00
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Status:     0x0001
  Self Powered


regards
Andreas


From lists at brachttal.net  Thu May  3 20:27:26 2007
From: lists at brachttal.net (Andreas Volz)
Date: Thu, 3 May 2007 20:27:26 +0200
Subject: [Linux-uvc-devel] Fujifim FinePix A210
Message-ID: <20070503202726.40907c11@frodo.mittelerde>

Hello,

I've also another digital photo with webcam functionality. It doesn't
work too. Here is the result:

> lsusb -d 04cb:0127 -v

Bus 003 Device 010: ID 04cb:0127 Fuji Photo Film Co., Ltd 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  idVendor           0x04cb Fuji Photo Film Co., Ltd
  idProduct          0x0127 
  bcdDevice            1.00
  iManufacturer           0 
  iProduct                2 USB PC Camera
  iSerial                 3 Y-513^^^^^031010XFPX0003013410
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           39
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xc0
      Self Powered
    MaxPower               50mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass     33 
      bInterfaceProtocol    255 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x02  EP 2 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               1
Device Status:     0x0001
  Self Powered

regards
Andreas


From laurent.pinchart at skynet.be  Thu May  3 22:50:30 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 3 May 2007 22:50:30 +0200
Subject: [Linux-uvc-devel] Fujifim FinePix A210
In-Reply-To: <20070503202726.40907c11@frodo.mittelerde>
References: <20070503202726.40907c11@frodo.mittelerde>
Message-ID: <200705032250.31255.laurent.pinchart@skynet.be>

Hi Andreas,

> I've also another digital photo with webcam functionality. It doesn't
> work too. Here is the result:

That's pretty normal, as that device is not UVC compliant. You might have more 
luck with the finepix v4l beta driver available at 
http://finepix.sourceforge.net/.

Regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu May  3 23:00:14 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 3 May 2007 23:00:14 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS 37
In-Reply-To: <20070503193524.7afe5beb@frodo.mittelerde>
References: <20070501011150.01e3bf43@frodo.mittelerde>
	<200705030011.02063.laurent.pinchart@skynet.be>
	<20070503193524.7afe5beb@frodo.mittelerde>
Message-ID: <200705032300.14675.laurent.pinchart@skynet.be>

Hi Andreas,

On Thursday 03 May 2007, Andreas Volz wrote:
> Am Thu, 3 May 2007 00:11:01 +0200 schrieb Laurent Pinchart:
> > Thanks for the information. Your camera implements a few features not
> > supported by the Linux UVC driver yet. I will try to add support for
> > at least live video streaming (the camera also supports playback
> > through the USB interface). I might ask you to test a few patches, as
> > I can't test them without the necessary hardware. Please also note
>
> Thanks for your answer. I'm very motivated to help you testing patches.
> Currently I run the linux-uvc module compiled from CVS.
>
> > that the camera supports DV format only, and most Linux
> > webcam-related applications can't handle that.
>
> Until now I'm not (yet) experienced with video and USB at kernel module
> level. But if basic support video works and the only problem are user
> application that I'm able to write my own application.
>
>
> BTW: The camera is has a setting for "webcam" and "motion dv". Here is
> a lsusb with the other setting active. Perhaps something changed...

The main differences between the two modes seems to be

- zoom support in webcam mode
- additional extension unit in motion dv mode (unknown purpose)
- mjpeg format in webcam mode, dv format in motion dv mode
- audio support in webcam mode

I'll first try to add support for selector units and media transport input 
terminals, which are needed by both modes. When done, it should be possible 
to use the camera in webcam mode. We will then focus on supporting dv format.

Regards,

Laurent Pinchart


From nijusan at utdallas.edu  Fri May  4 03:36:43 2007
From: nijusan at utdallas.edu (Brandon Drummond)
Date: Thu, 03 May 2007 18:36:43 -0700
Subject: [Linux-uvc-devel] program compatibilty
Message-ID: <1178242603.23487.24.camel@bbr-utd2>

An application that I use frequently has just added v4l2 support and
sent me an alpha version to test. I'm using the latest svn version of
the driver and a logitech quickcam for notebooks pro. The camera is
recognized by the application and some video is displayed. However, the
image is just a bunch of garbled grey and color lines. I'm assuming this
is due to the application not supporting an mjpeg stream. Could someone
point me to some source code from a project that supports mjpeg. I won't
be able to add support myself as this project is closed source, but I'm
hoping to pass the info along to the developers in the hopes they'll
think it simple enough to add themselves.

Cheers,
Brandon

FYI - it's a video conferencing client from Caltech called evo.
http://nextgen-caltech.cern.ch/evoGate/



From laurent.pinchart at skynet.be  Sat May  5 17:45:08 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 5 May 2007 17:45:08 +0200
Subject: [Linux-uvc-devel] program compatibilty
In-Reply-To: <1178242603.23487.24.camel@bbr-utd2>
References: <1178242603.23487.24.camel@bbr-utd2>
Message-ID: <200705051745.08413.laurent.pinchart@skynet.be>

Hi Brandon,

> An application that I use frequently has just added v4l2 support and
> sent me an alpha version to test. I'm using the latest svn version of
> the driver and a logitech quickcam for notebooks pro. The camera is
> recognized by the application and some video is displayed. However, the
> image is just a bunch of garbled grey and color lines. I'm assuming this
> is due to the application not supporting an mjpeg stream.

Your webcam supports both MJPEG and a 4:2:2 packed YUV format (YUY2). 
Depending on your needs, the application can requests either of them (YUY2 
requires a higher USB bandwidth, MJPEG is not available for the highest 
resolutions). It then has to decode the data into whatever format it uses to 
display video.

> Could someone point me to some source code from a project that supports
> mjpeg. I won't be able to add support myself as this project is closed
> source, but I'm hoping to pass the info along to the developers in the hopes
> they'll think it simple enough to add themselves.

You could have a look at luvcview which includes an MJPEG decoder. Please note 
that luvcview is licensed under the GPL, so no code can be copied to your 
closed-source application. However, it wouldn't be very difficult to use the 
closed-source compatible jpeg6b library to decode mjpeg data.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sat May  5 21:22:22 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sat, 5 May 2007 21:22:22 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS 37
In-Reply-To: <200705032300.14675.laurent.pinchart@skynet.be>
References: <20070501011150.01e3bf43@frodo.mittelerde>
	<20070503193524.7afe5beb@frodo.mittelerde>
	<200705032300.14675.laurent.pinchart@skynet.be>
Message-ID: <200705052122.22796.laurent.pinchart@skynet.be>

Hi Andreas,

could you please set the trace parameter to 65535 with

modprobe uvcvideo trace=65535

or

echo 65535 > /sys/modules/uvcvideo/parameters/trace

then plug your camcorder and send me the dmesg output ?

Thanks.

Laurent Pinchart


From lists at brachttal.net  Sat May  5 21:51:15 2007
From: lists at brachttal.net (Andreas Volz)
Date: Sat, 5 May 2007 21:51:15 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS 37
In-Reply-To: <200705052122.22796.laurent.pinchart@skynet.be>
References: <20070501011150.01e3bf43@frodo.mittelerde>
	<20070503193524.7afe5beb@frodo.mittelerde>
	<200705032300.14675.laurent.pinchart@skynet.be>
	<200705052122.22796.laurent.pinchart@skynet.be>
Message-ID: <20070505215115.4db5dcc9@frodo.mittelerde>

Am Sat, 5 May 2007 21:22:22 +0200 schrieb Laurent Pinchart:

> Hi Andreas,
> 
> could you please set the trace parameter to 65535 with
> 
> modprobe uvcvideo trace=65535
> 
> or
> 
> echo 65535 > /sys/modules/uvcvideo/parameters/trace
> 
> then plug your camcorder and send me the dmesg output ?

I know berlios often delete attachments. So I put it there:

http://tux-style.de/tmp/dmesg_uvc.txt

I did several plug/unplug actions in DV and webcam mode.

regards
Andreas


From laurent.pinchart at skynet.be  Sun May  6 12:18:12 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 6 May 2007 12:18:12 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS 37
In-Reply-To: <20070505215115.4db5dcc9@frodo.mittelerde>
References: <20070501011150.01e3bf43@frodo.mittelerde>
	<200705052122.22796.laurent.pinchart@skynet.be>
	<20070505215115.4db5dcc9@frodo.mittelerde>
Message-ID: <200705061218.12887.laurent.pinchart@skynet.be>

Hi Andreas,

On Saturday 05 May 2007, Andreas Volz wrote:
> Am Sat, 5 May 2007 21:22:22 +0200 schrieb Laurent Pinchart:
> > could you please set the trace parameter to 65535 with
> >
> > modprobe uvcvideo trace=65535
> >
> > or
> >
> > echo 65535 > /sys/modules/uvcvideo/parameters/trace
> >
> > then plug your camcorder and send me the dmesg output ?
>
> I know berlios often delete attachments. So I put it there:
>
> http://tux-style.de/tmp/dmesg_uvc.txt
>
> I did several plug/unplug actions in DV and webcam mode.

Thanks a lot. Could you perform the same operation after applying the attached 
patch to the latest driver (revision 102) ?

Best regards,

Laurent Pinchart
-------------- next part --------------
A non-text attachment was scrubbed...
Name: panasonic.diff
Type: text/x-diff
Size: 14429 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070506/a099d30e/attachment.diff>

From laurent.pinchart at skynet.be  Sun May  6 13:08:16 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 6 May 2007 13:08:16 +0200
Subject: [Linux-uvc-devel] Issues with the Linux UVC driver (Was "Where is
	V4L headed ?")
In-Reply-To: <d9def9db0705051226n498ddf43ua7c0d9c89f653ddd@mail.gmail.com>
References: <200705041501.16398.laurent.pinchart@skynet.be>
	<200705051948.59791.laurent.pinchart@skynet.be>
	<d9def9db0705051226n498ddf43ua7c0d9c89f653ddd@mail.gmail.com>
Message-ID: <200705061308.16859.laurent.pinchart@skynet.be>

Let's move this discussion to the linux-uvc-devel list. I CCed 
video4linux-list for reference, please reply to linux-uvc-devel only to avoid 
flooding the video4linux list.

On Saturday 05 May 2007, Markus Rechberger wrote:

[snip non-uvc issues]
> I'll just write all my considerations here, you can put the ML into CC 
> and/or split up the topics:
>
> 1.)
> May  5 20:14:19 debian kernel: ekiga: page allocation failure.
> order:10, mode:0x0
> May  5 20:14:19 debian kernel:  [__alloc_pages+629/646]
> __alloc_pages+0x275/0x286
> May  5 20:14:19 debian kernel:  [__get_free_pages+26/51]
> __get_free_pages+0x1a/0x33
> May  5 20:14:19 debian kernel:  [dma_alloc_coherent+170/222]
> dma_alloc_coherent+0xaa/0xde
> May  5 20:14:19 debian kernel:  [pg0+513461816/1069679616]
> uvc_init_video_bulk+0xb7/0x143 [uvcvideo]
> May  5 20:14:19 debian kernel:  [pg0+513462425/1069679616]
> uvc_video_enable+0xfe/0x121 [uvcvideo]
> May  5 20:14:19 debian kernel:  [pg0+513458219/1069679616]
> uvc_v4l2_do_ioctl+0x830/0x8bf [uvcvideo]
> May  5 20:14:19 debian kernel:  [dput+24/373] dput+0x18/0x175
> May  5 20:14:19 debian kernel:  [__link_path_walk+2824/3148]
> __link_path_walk+0xb08/0xc4c
> May  5 20:14:19 debian kernel:  [n_tty_receive_buf+3303/3378]
> n_tty_receive_buf+0xce7/0xd32
> May  5 20:14:19 debian kernel:  [get_page_from_freelist+635/798]
> get_page_from_freelist+0x27b/0x31e
> May  5 20:14:19 debian kernel:  [wakeup_kswapd+45/104]
> wakeup_kswapd+0x2d/0x68 May  5 20:14:19 debian kernel: 
> [pg0+511673193/1069679616]
> video_usercopy+0x112/0x1a3 [videodev]
> May  5 20:14:19 debian kernel:  [vma_prio_tree_insert+23/42]
> vma_prio_tree_insert+0x17/0x2a
> May  5 20:14:19 debian kernel:  [vma_link+218/247] vma_link+0xda/0xf7
> May  5 20:14:19 debian kernel:  [pg0+513458420/1069679616]
> uvc_v4l2_ioctl+0x3a/0x40 [uvcvideo]
> May  5 20:14:19 debian kernel:  [pg0+513456123/1069679616]
> uvc_v4l2_do_ioctl+0x0/0x8bf [uvcvideo]
> May  5 20:14:19 debian kernel:  [do_ioctl+76/98] do_ioctl+0x4c/0x62
> May  5 20:14:19 debian kernel:  [vfs_ioctl+583/602] vfs_ioctl+0x247/0x25a
> May  5 20:14:19 debian kernel:  [sys_ioctl+51/76] sys_ioctl+0x33/0x4c
> May  5 20:14:19 debian kernel:  [syscall_call+7/11] syscall_call+0x7/0xb
> May  5 20:14:19 debian kernel:  =======================
> May  5 20:14:19 debian kernel: Mem-info:
> May  5 20:14:19 debian kernel: DMA per-cpu:
> May  5 20:14:19 debian kernel: CPU    0: Hot: hi:    0, btch:   1 usd:
>   0   Cold: hi:    0, btch:   1 usd:   0
> May  5 20:14:19 debian kernel: Normal per-cpu:
> May  5 20:14:19 debian kernel: CPU    0: Hot: hi:  186, btch:  31 usd:
>  13   Cold: hi:   62, btch:  15 usd:  51
> May  5 20:14:19 debian kernel: Active:93485 inactive:7268 dirty:0
> writeback:0 unstable:0 free:1171 slab:5255 mapped:15182 pagetables:980
> May  5 20:14:19 debian kernel: DMA free:1928kB min:92kB low:112kB
> high:136kB active:10716kB inactive:0kB present:16256kB
> pages_scanned:429 all_unreclaimable? no
> May  5 20:14:19 debian kernel: lowmem_reserve[]: 0 459
> May  5 20:14:19 debian kernel: Normal free:2756kB min:2692kB
> low:3364kB high:4036kB active:363224kB inactive:29072kB
> present:470284kB pages_scanned:291 all_unreclaimable? no
> May  5 20:14:19 debian kernel: lowmem_reserve[]: 0 0
> May  5 20:14:19 debian kernel: DMA: 4*4kB 1*8kB 1*16kB 1*32kB 1*64kB
> 0*128kB 1*256kB 1*512kB 1*1024kB 0*2048kB 0*4096kB = 1928kB
> May  5 20:14:19 debian kernel: Normal: 47*4kB 5*8kB 12*16kB 3*32kB
> 1*64kB 1*128kB 0*256kB 0*512kB 0*1024kB 1*2048kB 0*4096kB = 2756kB
> May  5 20:14:19 debian kernel: Swap cache: add 440134, delete 421407,
> find 136779/175577, race 0+0
> May  5 20:14:19 debian kernel: Free swap  = 455676kB
> May  5 20:14:19 debian kernel: Total swap = 976888kB
> May  5 20:14:19 debian kernel: Free swap:       455676kB
> May  5 20:14:19 debian kernel: 122592 pages of RAM
> May  5 20:14:19 debian kernel: 0 pages of HIGHMEM
> May  5 20:14:19 debian kernel: 1844 reserved pages
> May  5 20:14:19 debian kernel: 70305 pages shared
> May  5 20:14:19 debian kernel: 18727 pages swap cached
> May  5 20:14:19 debian kernel: 0 pages dirty
> May  5 20:14:19 debian kernel: 0 pages writeback
> May  5 20:14:19 debian kernel: 15182 pages mapped
> May  5 20:14:19 debian kernel: 5253 pages slab
> May  5 20:14:19 debian kernel: 980 pages pagetables
>
> This happens either if a box has 256 mb ram, or is almost out of
> physical memory.
> The other driver I have works properly with it. After a fresh reboot
> the uvcvideo driver seems to work for a while.

Oh, an OOM issue.

The driver allocates memory for bulk/isochronous transfers based on two 
parameters. The first one is the maximum payload transfer size, as reported 
by the device. I can't do much about that one. The second one is the number 
of URBs allocated by the driver. This is currently hardcoded to 5, but could 
be made configurable or could be computed based on the maximum payload 
transfer size. I'll look into this issue.

Could you please post the output of lsusb -v (with usbutils 0.72 or later) ? 
Thanks.

> 2.) No v4l1 support using the compat layer
>
> I read some discussions about not supporting v4l1, as a point from the
> userside it simply has to work and there are still applications out
> there which only support v4l1, I read that a compat version of that
> driver is available but you don't want it in the main driver.

The Linux UVC driver calls v4l_compat_translate_ioctl() for all non-handled 
ioctls. The compat layer is thus used. It seems the problem comes from a 
required v4l1 ioctl not handled properly by the compat layer. I haven't 
looked into that issue, as I don't plan to support v4l1 explicitly in the 
driver.

> 3.) Some controls are missing, for example mplayer isn't supported by
> just running
> mplayer -tv driver=v4l2 tv://

mplayer is buggy. It doesn't set the v4l2_buffer.memory field prior to 
dequeuing buffers, as required by the v4l2 specification. I think a patch has 
been applied to the mplayer repository to fix this issue.

> 4.) read() isn't supported

That's right, and this is definitely a shortcomming. I plan to support read(), 
but this hasn't been done yet. If you need read() support for a specific 
application, we could work together to add it to the driver as quickly as 
possible.

> 5.) I'd like to share common code between usb video devices, the
> em28xx driver supports slicing the video and piping a part of the
> video to /dev/vbi for example (raw vbi).
> 6.) Mauro also wrote some ideas about having a general usb framework
> since all devices share common parts.
>
> these points would be part of the agenda which I'd like to discuss
> with you and Mauro actually.

I plan to see if I can use video-buf in the Linux UVC driver. However, this 
might not be beneficial to all users. The buffer queue code in the UVC driver 
is USB-specific, and is thus smaller than video-buf. Users who currently 
don't use video-buf would see their memory usage grow.

Laurent Pinchart


From lists at brachttal.net  Sun May  6 13:31:07 2007
From: lists at brachttal.net (Andreas Volz)
Date: Sun, 6 May 2007 13:31:07 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS 37
In-Reply-To: <200705061218.12887.laurent.pinchart@skynet.be>
References: <20070501011150.01e3bf43@frodo.mittelerde>
	<200705052122.22796.laurent.pinchart@skynet.be>
	<20070505215115.4db5dcc9@frodo.mittelerde>
	<200705061218.12887.laurent.pinchart@skynet.be>
Message-ID: <20070506133107.36a5a5a9@frodo.mittelerde>

Am Sun, 6 May 2007 12:18:12 +0200 schrieb Laurent Pinchart:

> Hi Andreas,
> 
> On Saturday 05 May 2007, Andreas Volz wrote:
> > Am Sat, 5 May 2007 21:22:22 +0200 schrieb Laurent Pinchart:
> > > could you please set the trace parameter to 65535 with
> > >
> > > modprobe uvcvideo trace=65535
> > >
> > > or
> > >
> > > echo 65535 > /sys/modules/uvcvideo/parameters/trace
> > >
> > > then plug your camcorder and send me the dmesg output ?
> >
> > I know berlios often delete attachments. So I put it there:
> >
> > http://tux-style.de/tmp/dmesg_uvc.txt
> >
> > I did several plug/unplug actions in DV and webcam mode.
> 
> Thanks a lot. Could you perform the same operation after applying the
> attached patch to the latest driver (revision 102) ?

Cool, you're really fast!

Here is the new dmesg:

http://tux-style.de/tmp/dmesg_patch_applied.txt

Now in webcam mode the lucview tool found a /dev/video0 device, but
exits just after showing a window for a second.

Here is the output:

luvcview version 0.2.0 
Video driver: x11
A window manager is available
video /dev/video0 
Unable to start capture: 38.
Error grabbing 
 Clean Up done Quit 

Here is the strace output:

http://tux-style.de/tmp/lucview.strace

regards
Andreas


From mrechberger at gmail.com  Sun May  6 15:08:46 2007
From: mrechberger at gmail.com (Markus Rechberger)
Date: Sun, 6 May 2007 15:08:46 +0200
Subject: [Linux-uvc-devel] Issues with the Linux UVC driver (Was "Where
	is V4L headed ?")
In-Reply-To: <d9def9db0705060601y3b5d82do89f95bc26a0ece3d@mail.gmail.com>
References: <200705041501.16398.laurent.pinchart@skynet.be>
	<200705051948.59791.laurent.pinchart@skynet.be>
	<d9def9db0705051226n498ddf43ua7c0d9c89f653ddd@mail.gmail.com>
	<200705061308.16859.laurent.pinchart@skynet.be>
	<d9def9db0705060601y3b5d82do89f95bc26a0ece3d@mail.gmail.com>
Message-ID: <d9def9db0705060608u55546191l199c91813f397d56@mail.gmail.com>

On 5/6/07, Markus Rechberger <mrechberger at gmail.com> wrote:
> On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > Let's move this discussion to the linux-uvc-devel list. I CCed
> > video4linux-list for reference, please reply to linux-uvc-devel only to
> > avoid
> > flooding the video4linux list.
> >
> > On Saturday 05 May 2007, Markus Rechberger wrote:
> >
> > [snip non-uvc issues]
> > > I'll just write all my considerations here, you can put the ML into CC
> > > and/or split up the topics:
> > >
> > > 1.)
> > > May  5 20:14:19 debian kernel: ekiga: page allocation failure.
> > > order:10, mode:0x0
> > > May  5 20:14:19 debian kernel:  [__alloc_pages+629/646]
> > > __alloc_pages+0x275/0x286
> > > May  5 20:14:19 debian kernel:  [__get_free_pages+26/51]
> > > __get_free_pages+0x1a/0x33
> > > May  5 20:14:19 debian kernel:  [dma_alloc_coherent+170/222]
> > > dma_alloc_coherent+0xaa/0xde
> > > May  5 20:14:19 debian kernel:  [pg0+513461816/1069679616]
> > > uvc_init_video_bulk+0xb7/0x143 [uvcvideo]
> > > May  5 20:14:19 debian kernel:  [pg0+513462425/1069679616]
> > > uvc_video_enable+0xfe/0x121 [uvcvideo]
> > > May  5 20:14:19 debian kernel:  [pg0+513458219/1069679616]
> > > uvc_v4l2_do_ioctl+0x830/0x8bf [uvcvideo]
> > > May  5 20:14:19 debian kernel:  [dput+24/373] dput+0x18/0x175
> > > May  5 20:14:19 debian kernel:  [__link_path_walk+2824/3148]
> > > __link_path_walk+0xb08/0xc4c
> > > May  5 20:14:19 debian kernel:  [n_tty_receive_buf+3303/3378]
> > > n_tty_receive_buf+0xce7/0xd32
> > > May  5 20:14:19 debian kernel:  [get_page_from_freelist+635/798]
> > > get_page_from_freelist+0x27b/0x31e
> > > May  5 20:14:19 debian kernel:  [wakeup_kswapd+45/104]
> > > wakeup_kswapd+0x2d/0x68 May  5 20:14:19 debian kernel:
> > > [pg0+511673193/1069679616]
> > > video_usercopy+0x112/0x1a3 [videodev]
> > > May  5 20:14:19 debian kernel:  [vma_prio_tree_insert+23/42]
> > > vma_prio_tree_insert+0x17/0x2a
> > > May  5 20:14:19 debian kernel:  [vma_link+218/247] vma_link+0xda/0xf7
> > > May  5 20:14:19 debian kernel:  [pg0+513458420/1069679616]
> > > uvc_v4l2_ioctl+0x3a/0x40 [uvcvideo]
> > > May  5 20:14:19 debian kernel:  [pg0+513456123/1069679616]
> > > uvc_v4l2_do_ioctl+0x0/0x8bf [uvcvideo]
> > > May  5 20:14:19 debian kernel:  [do_ioctl+76/98] do_ioctl+0x4c/0x62
> > > May  5 20:14:19 debian kernel:  [vfs_ioctl+583/602]
> vfs_ioctl+0x247/0x25a
> > > May  5 20:14:19 debian kernel:  [sys_ioctl+51/76] sys_ioctl+0x33/0x4c
> > > May  5 20:14:19 debian kernel:  [syscall_call+7/11] syscall_call+0x7/0xb
> > > May  5 20:14:19 debian kernel:  =======================
> > > May  5 20:14:19 debian kernel: Mem-info:
> > > May  5 20:14:19 debian kernel: DMA per-cpu:
> > > May  5 20:14:19 debian kernel: CPU    0: Hot: hi:    0, btch:   1 usd:
> > >   0   Cold: hi:    0, btch:   1 usd:   0
> > > May  5 20:14:19 debian kernel: Normal per-cpu:
> > > May  5 20:14:19 debian kernel: CPU    0: Hot: hi:  186, btch:  31 usd:
> > >  13   Cold: hi:   62, btch:  15 usd:  51
> > > May  5 20:14:19 debian kernel: Active:93485 inactive:7268 dirty:0
> > > writeback:0 unstable:0 free:1171 slab:5255 mapped:15182 pagetables:980
> > > May  5 20:14:19 debian kernel: DMA free:1928kB min:92kB low:112kB
> > > high:136kB active:10716kB inactive:0kB present:16256kB
> > > pages_scanned:429 all_unreclaimable? no
> > > May  5 20:14:19 debian kernel: lowmem_reserve[]: 0 459
> > > May  5 20:14:19 debian kernel: Normal free:2756kB min:2692kB
> > > low:3364kB high:4036kB active:363224kB inactive:29072kB
> > > present:470284kB pages_scanned:291 all_unreclaimable? no
> > > May  5 20:14:19 debian kernel: lowmem_reserve[]: 0 0
> > > May  5 20:14:19 debian kernel: DMA: 4*4kB 1*8kB 1*16kB 1*32kB 1*64kB
> > > 0*128kB 1*256kB 1*512kB 1*1024kB 0*2048kB 0*4096kB = 1928kB
> > > May  5 20:14:19 debian kernel: Normal: 47*4kB 5*8kB 12*16kB 3*32kB
> > > 1*64kB 1*128kB 0*256kB 0*512kB 0*1024kB 1*2048kB 0*4096kB = 2756kB
> > > May  5 20:14:19 debian kernel: Swap cache: add 440134, delete 421407,
> > > find 136779/175577, race 0+0
> > > May  5 20:14:19 debian kernel: Free swap  = 455676kB
> > > May  5 20:14:19 debian kernel: Total swap = 976888kB
> > > May  5 20:14:19 debian kernel: Free swap:       455676kB
> > > May  5 20:14:19 debian kernel: 122592 pages of RAM
> > > May  5 20:14:19 debian kernel: 0 pages of HIGHMEM
> > > May  5 20:14:19 debian kernel: 1844 reserved pages
> > > May  5 20:14:19 debian kernel: 70305 pages shared
> > > May  5 20:14:19 debian kernel: 18727 pages swap cached
> > > May  5 20:14:19 debian kernel: 0 pages dirty
> > > May  5 20:14:19 debian kernel: 0 pages writeback
> > > May  5 20:14:19 debian kernel: 15182 pages mapped
> > > May  5 20:14:19 debian kernel: 5253 pages slab
> > > May  5 20:14:19 debian kernel: 980 pages pagetables
> > >
> > > This happens either if a box has 256 mb ram, or is almost out of
> > > physical memory.
> > > The other driver I have works properly with it. After a fresh reboot
> > > the uvcvideo driver seems to work for a while.
> >
> > Oh, an OOM issue.
> >
> > The driver allocates memory for bulk/isochronous transfers based on two
> > parameters. The first one is the maximum payload transfer size, as
> reported
> > by the device. I can't do much about that one. The second one is the
> number
> > of URBs allocated by the driver. This is currently hardcoded to 5, but
> could
> > be made configurable or could be computed based on the maximum payload
> > transfer size. I'll look into this issue.
> >
>
> this really seems to be an issue with usb_buffer_alloc() after that
> call fails the whole memory management goes dizzy.
> It tries to swap out almost all the physical memory hangs for a while
> and copies the swapped memory back to physical memory till it becomes
> normal again.
> I also see that more than half of the system memory is used as cache,
> since usb_buffer_alloc is called with GFP_KERNEL it might wait until
> some cache memory gets released for it. I added Greg to that mail
> since I think that he knows alot about the usb framework itself.
>
>  dwMaxVideoFrameBufferSize     2752512 (which is used for
> usb_buffer_alloc, seems to be too much already)
>
> I don't have a problem with that in my uvc driver since I only
> allocate memory for max. 640x480 and do not support a higher mode.
>
> > Could you please post the output of lsusb -v (with usbutils 0.72 or later)
> ?
> > Thanks.
> >
>
> (think that value was what you were looking for)
>
> > > 2.) No v4l1 support using the compat layer
> > >
> > > I read some discussions about not supporting v4l1, as a point from the
> > > userside it simply has to work and there are still applications out
> > > there which only support v4l1, I read that a compat version of that
> > > driver is available but you don't want it in the main driver.
> >
> > The Linux UVC driver calls v4l_compat_translate_ioctl() for all
> non-handled
> > ioctls. The compat layer is thus used. It seems the problem comes from a
> > required v4l1 ioctl not handled properly by the compat layer. I haven't
> > looked into that issue, as I don't plan to support v4l1 explicitly in the
> > driver.
> >
>
> as for my drivers I always saw this as an open issue too, there is no
> reason to not add support for it at least, it just requires a few more
> ioctl controls.
>
> > > 3.) Some controls are missing, for example mplayer isn't supported by
> > > just running
> > > mplayer -tv driver=v4l2 tv://
> >
> > mplayer is buggy. It doesn't set the v4l2_buffer.memory field prior to
> > dequeuing buffers, as required by the v4l2 specification. I think a patch
> > has
> > been applied to the mplayer repository to fix this issue.
> >
>
> I see xawtv doesn't work either here, the em28xx driver works with
> both without the need of any patches. xawtv is used as a reference for
> some other userspace applications since it has been available for a
> very long time already.
>

just tested mplayer (latest svn) it doesn't work either

> > > 4.) read() isn't supported
> >
> > That's right, and this is definitely a shortcomming. I plan to support
> > read(),
> > but this hasn't been done yet. If you need read() support for a specific
> > application, we could work together to add it to the driver as quickly as
> > possible.
> >
> > > 5.) I'd like to share common code between usb video devices, the
> > > em28xx driver supports slicing the video and piping a part of the
> > > video to /dev/vbi for example (raw vbi).
> > > 6.) Mauro also wrote some ideas about having a general usb framework
> > > since all devices share common parts.
> > >
> > > these points would be part of the agenda which I'd like to discuss
> > > with you and Mauro actually.
> >
> > I plan to see if I can use video-buf in the Linux UVC driver. However,
> this
> > might not be beneficial to all users. The buffer queue code in the UVC
> > driver
> > is USB-specific, and is thus smaller than video-buf. Users who currently
> > don't use video-buf would see their memory usage grow.
> >
> > Laurent Pinchart
> >
>
> (I'll answer the other issues later)
>
> Markus
>


-- 
Markus Rechberger


From mrechberger at gmail.com  Sun May  6 16:13:17 2007
From: mrechberger at gmail.com (Markus Rechberger)
Date: Sun, 6 May 2007 16:13:17 +0200
Subject: [Linux-uvc-devel] Issues with the Linux UVC driver (Was "Where
	is V4L headed ?")
In-Reply-To: <d9def9db0705060608u55546191l199c91813f397d56@mail.gmail.com>
References: <200705041501.16398.laurent.pinchart@skynet.be>
	<200705051948.59791.laurent.pinchart@skynet.be>
	<d9def9db0705051226n498ddf43ua7c0d9c89f653ddd@mail.gmail.com>
	<200705061308.16859.laurent.pinchart@skynet.be>
	<d9def9db0705060601y3b5d82do89f95bc26a0ece3d@mail.gmail.com>
	<d9def9db0705060608u55546191l199c91813f397d56@mail.gmail.com>
Message-ID: <d9def9db0705060713y7d24810dm2db24ce856344541@mail.gmail.com>

On 5/6/07, Markus Rechberger <mrechberger at gmail.com> wrote:
> On 5/6/07, Markus Rechberger <mrechberger at gmail.com> wrote:
> > On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > > Let's move this discussion to the linux-uvc-devel list. I CCed
> > > video4linux-list for reference, please reply to linux-uvc-devel only to
> > > avoid
> > > flooding the video4linux list.
> > >
> > > On Saturday 05 May 2007, Markus Rechberger wrote:
> > >
> > > [snip non-uvc issues]
> > > > I'll just write all my considerations here, you can put the ML into CC
> > > > and/or split up the topics:
> > > >
> > > > 1.)
> > > > May  5 20:14:19 debian kernel: ekiga: page allocation failure.
> > > > order:10, mode:0x0
> > > > May  5 20:14:19 debian kernel:  [__alloc_pages+629/646]
> > > > __alloc_pages+0x275/0x286
> > > > May  5 20:14:19 debian kernel:  [__get_free_pages+26/51]
> > > > __get_free_pages+0x1a/0x33
> > > > May  5 20:14:19 debian kernel:  [dma_alloc_coherent+170/222]
> > > > dma_alloc_coherent+0xaa/0xde
> > > > May  5 20:14:19 debian kernel:  [pg0+513461816/1069679616]
> > > > uvc_init_video_bulk+0xb7/0x143 [uvcvideo]
> > > > May  5 20:14:19 debian kernel:  [pg0+513462425/1069679616]
> > > > uvc_video_enable+0xfe/0x121 [uvcvideo]
> > > > May  5 20:14:19 debian kernel:  [pg0+513458219/1069679616]
> > > > uvc_v4l2_do_ioctl+0x830/0x8bf [uvcvideo]
> > > > May  5 20:14:19 debian kernel:  [dput+24/373] dput+0x18/0x175
> > > > May  5 20:14:19 debian kernel:  [__link_path_walk+2824/3148]
> > > > __link_path_walk+0xb08/0xc4c
> > > > May  5 20:14:19 debian kernel:  [n_tty_receive_buf+3303/3378]
> > > > n_tty_receive_buf+0xce7/0xd32
> > > > May  5 20:14:19 debian kernel:  [get_page_from_freelist+635/798]
> > > > get_page_from_freelist+0x27b/0x31e
> > > > May  5 20:14:19 debian kernel:  [wakeup_kswapd+45/104]
> > > > wakeup_kswapd+0x2d/0x68 May  5 20:14:19 debian kernel:
> > > > [pg0+511673193/1069679616]
> > > > video_usercopy+0x112/0x1a3 [videodev]
> > > > May  5 20:14:19 debian kernel:  [vma_prio_tree_insert+23/42]
> > > > vma_prio_tree_insert+0x17/0x2a
> > > > May  5 20:14:19 debian kernel:  [vma_link+218/247] vma_link+0xda/0xf7
> > > > May  5 20:14:19 debian kernel:  [pg0+513458420/1069679616]
> > > > uvc_v4l2_ioctl+0x3a/0x40 [uvcvideo]
> > > > May  5 20:14:19 debian kernel:  [pg0+513456123/1069679616]
> > > > uvc_v4l2_do_ioctl+0x0/0x8bf [uvcvideo]
> > > > May  5 20:14:19 debian kernel:  [do_ioctl+76/98] do_ioctl+0x4c/0x62
> > > > May  5 20:14:19 debian kernel:  [vfs_ioctl+583/602]
> > vfs_ioctl+0x247/0x25a
> > > > May  5 20:14:19 debian kernel:  [sys_ioctl+51/76] sys_ioctl+0x33/0x4c
> > > > May  5 20:14:19 debian kernel:  [syscall_call+7/11]
> syscall_call+0x7/0xb
> > > > May  5 20:14:19 debian kernel:  =======================
> > > > May  5 20:14:19 debian kernel: Mem-info:
> > > > May  5 20:14:19 debian kernel: DMA per-cpu:
> > > > May  5 20:14:19 debian kernel: CPU    0: Hot: hi:    0, btch:   1 usd:
> > > >   0   Cold: hi:    0, btch:   1 usd:   0
> > > > May  5 20:14:19 debian kernel: Normal per-cpu:
> > > > May  5 20:14:19 debian kernel: CPU    0: Hot: hi:  186, btch:  31 usd:
> > > >  13   Cold: hi:   62, btch:  15 usd:  51
> > > > May  5 20:14:19 debian kernel: Active:93485 inactive:7268 dirty:0
> > > > writeback:0 unstable:0 free:1171 slab:5255 mapped:15182 pagetables:980
> > > > May  5 20:14:19 debian kernel: DMA free:1928kB min:92kB low:112kB
> > > > high:136kB active:10716kB inactive:0kB present:16256kB
> > > > pages_scanned:429 all_unreclaimable? no
> > > > May  5 20:14:19 debian kernel: lowmem_reserve[]: 0 459
> > > > May  5 20:14:19 debian kernel: Normal free:2756kB min:2692kB
> > > > low:3364kB high:4036kB active:363224kB inactive:29072kB
> > > > present:470284kB pages_scanned:291 all_unreclaimable? no
> > > > May  5 20:14:19 debian kernel: lowmem_reserve[]: 0 0
> > > > May  5 20:14:19 debian kernel: DMA: 4*4kB 1*8kB 1*16kB 1*32kB 1*64kB
> > > > 0*128kB 1*256kB 1*512kB 1*1024kB 0*2048kB 0*4096kB = 1928kB
> > > > May  5 20:14:19 debian kernel: Normal: 47*4kB 5*8kB 12*16kB 3*32kB
> > > > 1*64kB 1*128kB 0*256kB 0*512kB 0*1024kB 1*2048kB 0*4096kB = 2756kB
> > > > May  5 20:14:19 debian kernel: Swap cache: add 440134, delete 421407,
> > > > find 136779/175577, race 0+0
> > > > May  5 20:14:19 debian kernel: Free swap  = 455676kB
> > > > May  5 20:14:19 debian kernel: Total swap = 976888kB
> > > > May  5 20:14:19 debian kernel: Free swap:       455676kB
> > > > May  5 20:14:19 debian kernel: 122592 pages of RAM
> > > > May  5 20:14:19 debian kernel: 0 pages of HIGHMEM
> > > > May  5 20:14:19 debian kernel: 1844 reserved pages
> > > > May  5 20:14:19 debian kernel: 70305 pages shared
> > > > May  5 20:14:19 debian kernel: 18727 pages swap cached
> > > > May  5 20:14:19 debian kernel: 0 pages dirty
> > > > May  5 20:14:19 debian kernel: 0 pages writeback
> > > > May  5 20:14:19 debian kernel: 15182 pages mapped
> > > > May  5 20:14:19 debian kernel: 5253 pages slab
> > > > May  5 20:14:19 debian kernel: 980 pages pagetables
> > > >
> > > > This happens either if a box has 256 mb ram, or is almost out of
> > > > physical memory.
> > > > The other driver I have works properly with it. After a fresh reboot
> > > > the uvcvideo driver seems to work for a while.
> > >
> > > Oh, an OOM issue.
> > >
> > > The driver allocates memory for bulk/isochronous transfers based on two
> > > parameters. The first one is the maximum payload transfer size, as
> > reported
> > > by the device. I can't do much about that one. The second one is the
> > number
> > > of URBs allocated by the driver. This is currently hardcoded to 5, but
> > could
> > > be made configurable or could be computed based on the maximum payload
> > > transfer size. I'll look into this issue.
> > >
> >
> > this really seems to be an issue with usb_buffer_alloc() after that
> > call fails the whole memory management goes dizzy.
> > It tries to swap out almost all the physical memory hangs for a while
> > and copies the swapped memory back to physical memory till it becomes
> > normal again.
> > I also see that more than half of the system memory is used as cache,
> > since usb_buffer_alloc is called with GFP_KERNEL it might wait until
> > some cache memory gets released for it. I added Greg to that mail
> > since I think that he knows alot about the usb framework itself.
> >
> >  dwMaxVideoFrameBufferSize     2752512 (which is used for
> > usb_buffer_alloc, seems to be too much already)
> >
> > I don't have a problem with that in my uvc driver since I only
> > allocate memory for max. 640x480 and do not support a higher mode.
> >
> > > Could you please post the output of lsusb -v (with usbutils 0.72 or
> later)
> > ?
> > > Thanks.
> > >
> >
> > (think that value was what you were looking for)
> >
> > > > 2.) No v4l1 support using the compat layer
> > > >
> > > > I read some discussions about not supporting v4l1, as a point from the
> > > > userside it simply has to work and there are still applications out
> > > > there which only support v4l1, I read that a compat version of that
> > > > driver is available but you don't want it in the main driver.
> > >
> > > The Linux UVC driver calls v4l_compat_translate_ioctl() for all
> > non-handled
> > > ioctls. The compat layer is thus used. It seems the problem comes from a
> > > required v4l1 ioctl not handled properly by the compat layer. I haven't
> > > looked into that issue, as I don't plan to support v4l1 explicitly in
> the
> > > driver.
> > >
> >
> > as for my drivers I always saw this as an open issue too, there is no
> > reason to not add support for it at least, it just requires a few more
> > ioctl controls.
> >
> > > > 3.) Some controls are missing, for example mplayer isn't supported by
> > > > just running
> > > > mplayer -tv driver=v4l2 tv://
> > >
> > > mplayer is buggy. It doesn't set the v4l2_buffer.memory field prior to
> > > dequeuing buffers, as required by the v4l2 specification. I think a
> patch
> > > has
> > > been applied to the mplayer repository to fix this issue.
> > >
> >
> > I see xawtv doesn't work either here, the em28xx driver works with
> > both without the need of any patches. xawtv is used as a reference for
> > some other userspace applications since it has been available for a
> > very long time already.
> >
>
> just tested mplayer (latest svn) it doesn't work either
>

Seems like I got something wrong, I do not allocate that much memory
at all for any URBs in the em28xx driver, in case of the uvcvideo
driver it allocates 2.7 MB continuous memory per URB for my device.
The em28xx driver allocates 40*(max packet size) bytes for each urb
which never got reported to fail, afterwards it copies the chunks into
a framebuffer.
DOS attacks are even possible with lower memory allocations
(640x480x2) with the uvcvideo driver.

Markus

> > > > 4.) read() isn't supported
> > >
> > > That's right, and this is definitely a shortcomming. I plan to support
> > > read(),
> > > but this hasn't been done yet. If you need read() support for a specific
> > > application, we could work together to add it to the driver as quickly
> as
> > > possible.
> > >
> > > > 5.) I'd like to share common code between usb video devices, the
> > > > em28xx driver supports slicing the video and piping a part of the
> > > > video to /dev/vbi for example (raw vbi).
> > > > 6.) Mauro also wrote some ideas about having a general usb framework
> > > > since all devices share common parts.
> > > >
> > > > these points would be part of the agenda which I'd like to discuss
> > > > with you and Mauro actually.
> > >
> > > I plan to see if I can use video-buf in the Linux UVC driver. However,
> > this
> > > might not be beneficial to all users. The buffer queue code in the UVC
> > > driver
> > > is USB-specific, and is thus smaller than video-buf. Users who currently
> > > don't use video-buf would see their memory usage grow.
> > >
> > > Laurent Pinchart
> > >
> >
> > (I'll answer the other issues later)
> >
> > Markus
> >
>


From domijor at gmail.com  Sun May  6 17:44:57 2007
From: domijor at gmail.com (Domijor)
Date: Sun, 6 May 2007 16:44:57 +0100
Subject: [Linux-uvc-devel] Fwd: Orbicam - 046d:09b0 Logitech, Inc
In-Reply-To: <mailman.5541.1178465928.5173.linux-uvc-devel@lists.berlios.de>
References: <mailman.5541.1178465928.5173.linux-uvc-devel@lists.berlios.de>
Message-ID: <565389770705060844hde8f58v13ba7e8adbeba7b3@mail.gmail.com>

Hello, I have Acer Aspire 5635 WLMI with webcam Orbicam.

This model is 046d:09b0 Logitech, Inc.
This model not support for gspca driver.
I have tried to use uvcvideo driver but it produce segment fail

Can you help me?

Thanks.

Domi
BLOG: http://debiantotal.blogspot.com

---------- Forwarded message ----------
From: Michel Xhaard <mxhaard at free.fr>
Date: 06-may-2007 12:25
Subject: Re: Orbicam - 046d:09b0 Logitech, Inc
To: Domijor <domijor at gmail.com >

Le Dimanche 6 Mai 2007 08:25, vous avez ?crit:
> Hello. I'm spanish. My english is very bad.
>
> I have Acer Aspire 5635 WLMI with webcam Orbicam.
>
> This Orbicam model is 046d:09b0 Logitech, Inc. and I think this model not
> support for gspca driver.
>
> Can you help me?
>
> Thanks.
>
> Domi
> BLOG: http://debiantotal.blogspot.com

This webcam seem uvcvideo look here:
http://linux-uvc.berlios.de/
if that works mail to this list
linux-uvc-devel at lists.berlios.de
regards
--
Michel Xhaard
http://mxhaard.free.fr
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070506/c9dff2dd/attachment.html>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: lsusb2.txt
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070506/c9dff2dd/attachment.txt>

From laurent.pinchart at skynet.be  Sun May  6 17:59:44 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 6 May 2007 17:59:44 +0200
Subject: [Linux-uvc-devel] Issues with the Linux UVC driver (Was "Where
	is V4L headed ?")
In-Reply-To: <d9def9db0705060601y3b5d82do89f95bc26a0ece3d@mail.gmail.com>
References: <200705041501.16398.laurent.pinchart@skynet.be>
	<200705061308.16859.laurent.pinchart@skynet.be>
	<d9def9db0705060601y3b5d82do89f95bc26a0ece3d@mail.gmail.com>
Message-ID: <200705061759.45265.laurent.pinchart@skynet.be>

On Sunday 06 May 2007, Markus Rechberger wrote:
> On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > Let's move this discussion to the linux-uvc-devel list. I CCed
> > video4linux-list for reference, please reply to linux-uvc-devel only to
> > avoid
> > flooding the video4linux list.
> >
> > On Saturday 05 May 2007, Markus Rechberger wrote:
> >
> > [snip non-uvc issues]
> >
> > > I'll just write all my considerations here, you can put the ML into CC
> > > and/or split up the topics:
> > >
> > > 1.)
> > > May  5 20:14:19 debian kernel: ekiga: page allocation failure.
> > > order:10, mode:0x0
> > > May  5 20:14:19 debian kernel:  [__alloc_pages+629/646]
> > > __alloc_pages+0x275/0x286
> > > May  5 20:14:19 debian kernel:  [__get_free_pages+26/51]
> > > __get_free_pages+0x1a/0x33
> > > May  5 20:14:19 debian kernel:  [dma_alloc_coherent+170/222]
> > > dma_alloc_coherent+0xaa/0xde
> > > May  5 20:14:19 debian kernel:  [pg0+513461816/1069679616]
> > > uvc_init_video_bulk+0xb7/0x143 [uvcvideo]
> > > May  5 20:14:19 debian kernel:  [pg0+513462425/1069679616]
> > > uvc_video_enable+0xfe/0x121 [uvcvideo]
> > > May  5 20:14:19 debian kernel:  [pg0+513458219/1069679616]
> > > uvc_v4l2_do_ioctl+0x830/0x8bf [uvcvideo]
> > > May  5 20:14:19 debian kernel:  [dput+24/373] dput+0x18/0x175
> > > May  5 20:14:19 debian kernel:  [__link_path_walk+2824/3148]
> > > __link_path_walk+0xb08/0xc4c
> > > May  5 20:14:19 debian kernel:  [n_tty_receive_buf+3303/3378]
> > > n_tty_receive_buf+0xce7/0xd32
> > > May  5 20:14:19 debian kernel:  [get_page_from_freelist+635/798]
> > > get_page_from_freelist+0x27b/0x31e
> > > May  5 20:14:19 debian kernel:  [wakeup_kswapd+45/104]
> > > wakeup_kswapd+0x2d/0x68 May  5 20:14:19 debian kernel:
> > > [pg0+511673193/1069679616]
> > > video_usercopy+0x112/0x1a3 [videodev]
> > > May  5 20:14:19 debian kernel:  [vma_prio_tree_insert+23/42]
> > > vma_prio_tree_insert+0x17/0x2a
> > > May  5 20:14:19 debian kernel:  [vma_link+218/247] vma_link+0xda/0xf7
> > > May  5 20:14:19 debian kernel:  [pg0+513458420/1069679616]
> > > uvc_v4l2_ioctl+0x3a/0x40 [uvcvideo]
> > > May  5 20:14:19 debian kernel:  [pg0+513456123/1069679616]
> > > uvc_v4l2_do_ioctl+0x0/0x8bf [uvcvideo]
> > > May  5 20:14:19 debian kernel:  [do_ioctl+76/98] do_ioctl+0x4c/0x62
> > > May  5 20:14:19 debian kernel:  [vfs_ioctl+583/602]
> > > vfs_ioctl+0x247/0x25a May  5 20:14:19 debian kernel:  [sys_ioctl+51/76]
> > > sys_ioctl+0x33/0x4c May  5 20:14:19 debian kernel:  [syscall_call+7/11]
> > > syscall_call+0x7/0xb May  5 20:14:19 debian kernel: 
> > > =======================
> > > May  5 20:14:19 debian kernel: Mem-info:
> > > May  5 20:14:19 debian kernel: DMA per-cpu:
> > > May  5 20:14:19 debian kernel: CPU    0: Hot: hi:    0, btch:   1 usd:
> > >   0   Cold: hi:    0, btch:   1 usd:   0
> > > May  5 20:14:19 debian kernel: Normal per-cpu:
> > > May  5 20:14:19 debian kernel: CPU    0: Hot: hi:  186, btch:  31 usd:
> > >  13   Cold: hi:   62, btch:  15 usd:  51
> > > May  5 20:14:19 debian kernel: Active:93485 inactive:7268 dirty:0
> > > writeback:0 unstable:0 free:1171 slab:5255 mapped:15182 pagetables:980
> > > May  5 20:14:19 debian kernel: DMA free:1928kB min:92kB low:112kB
> > > high:136kB active:10716kB inactive:0kB present:16256kB
> > > pages_scanned:429 all_unreclaimable? no
> > > May  5 20:14:19 debian kernel: lowmem_reserve[]: 0 459
> > > May  5 20:14:19 debian kernel: Normal free:2756kB min:2692kB
> > > low:3364kB high:4036kB active:363224kB inactive:29072kB
> > > present:470284kB pages_scanned:291 all_unreclaimable? no
> > > May  5 20:14:19 debian kernel: lowmem_reserve[]: 0 0
> > > May  5 20:14:19 debian kernel: DMA: 4*4kB 1*8kB 1*16kB 1*32kB 1*64kB
> > > 0*128kB 1*256kB 1*512kB 1*1024kB 0*2048kB 0*4096kB = 1928kB
> > > May  5 20:14:19 debian kernel: Normal: 47*4kB 5*8kB 12*16kB 3*32kB
> > > 1*64kB 1*128kB 0*256kB 0*512kB 0*1024kB 1*2048kB 0*4096kB = 2756kB
> > > May  5 20:14:19 debian kernel: Swap cache: add 440134, delete 421407,
> > > find 136779/175577, race 0+0
> > > May  5 20:14:19 debian kernel: Free swap  = 455676kB
> > > May  5 20:14:19 debian kernel: Total swap = 976888kB
> > > May  5 20:14:19 debian kernel: Free swap:       455676kB
> > > May  5 20:14:19 debian kernel: 122592 pages of RAM
> > > May  5 20:14:19 debian kernel: 0 pages of HIGHMEM
> > > May  5 20:14:19 debian kernel: 1844 reserved pages
> > > May  5 20:14:19 debian kernel: 70305 pages shared
> > > May  5 20:14:19 debian kernel: 18727 pages swap cached
> > > May  5 20:14:19 debian kernel: 0 pages dirty
> > > May  5 20:14:19 debian kernel: 0 pages writeback
> > > May  5 20:14:19 debian kernel: 15182 pages mapped
> > > May  5 20:14:19 debian kernel: 5253 pages slab
> > > May  5 20:14:19 debian kernel: 980 pages pagetables
> > >
> > > This happens either if a box has 256 mb ram, or is almost out of
> > > physical memory.
> > > The other driver I have works properly with it. After a fresh reboot
> > > the uvcvideo driver seems to work for a while.
> >
> > Oh, an OOM issue.
> >
> > The driver allocates memory for bulk/isochronous transfers based on two
> > parameters. The first one is the maximum payload transfer size, as
> > reported by the device. I can't do much about that one. The second one is
> > the number of URBs allocated by the driver. This is currently hardcoded
> > to 5, but could be made configurable or could be computed based on the
> > maximum payload transfer size. I'll look into this issue.
>
> this really seems to be an issue with usb_buffer_alloc() after that
> call fails the whole memory management goes dizzy.
> It tries to swap out almost all the physical memory hangs for a while
> and copies the swapped memory back to physical memory till it becomes
> normal again.
> I also see that more than half of the system memory is used as cache,
> since usb_buffer_alloc is called with GFP_KERNEL it might wait until
> some cache memory gets released for it. I added Greg to that mail
> since I think that he knows alot about the usb framework itself.

If the system goes unstable when I try to request more than the available 
memory, there's not much I can do about it. The driver fails gracefully when 
memory allocation fails. I seriously doubt that the kernel memory manager 
makes the system unstable when a driver tries to allocate a usb buffer bigger 
than the available memory. Maybe you have an issue specific to your system ? 
I'm not familiar with the memory allocator internals, maybe Greg will be able 
to help.

>  dwMaxVideoFrameBufferSize     2752512 (which is used for
> usb_buffer_alloc, seems to be too much already)

The bulk buffers are allocated using dwMaxPayloadTransferSize. Isochronous 
buffers are allocated using dwMaxVideoFrameSize, which is clearly a bug. I'm 
working on a fix.

The stack trace you posted shows your device uses bulk transfers. Could you 
tell me how big dwMaxPayloadTransferSize is ? If the devices insists on using 
huge buffers, there's not much I can do about it.

> I don't have a problem with that in my uvc driver since I only
> allocate memory for max. 640x480 and do not support a higher mode.

The comparison is thus not fair, is it ?

> > Could you please post the output of lsusb -v (with usbutils 0.72 or
> > later) ? Thanks.
>
> (think that value was what you were looking for)

I'm interested in the lsusb output as well (the dwMaxPayloadTransferSize value 
is also interesting and not reported by the usb descriptors).

> > > 2.) No v4l1 support using the compat layer
> > >
> > > I read some discussions about not supporting v4l1, as a point from the
> > > userside it simply has to work and there are still applications out
> > > there which only support v4l1, I read that a compat version of that
> > > driver is available but you don't want it in the main driver.
> >
> > The Linux UVC driver calls v4l_compat_translate_ioctl() for all
> > non-handled ioctls. The compat layer is thus used. It seems the problem
> > comes from a required v4l1 ioctl not handled properly by the compat
> > layer. I haven't looked into that issue, as I don't plan to support v4l1
> > explicitly in the driver.
>
> as for my drivers I always saw this as an open issue too, there is no
> reason to not add support for it at least, it just requires a few more
> ioctl controls.

Applications should be ported to v4l2. It's difficult to push application 
developers to port their software if everything is still completely v4l1 
compatible.

> > > 3.) Some controls are missing, for example mplayer isn't supported by
> > > just running
> > > mplayer -tv driver=v4l2 tv://
> >
> > mplayer is buggy. It doesn't set the v4l2_buffer.memory field prior to
> > dequeuing buffers, as required by the v4l2 specification. I think a patch
> > has
> > been applied to the mplayer repository to fix this issue.
>
> I see xawtv doesn't work either here, the em28xx driver works with
> both without the need of any patches. xawtv is used as a reference for
> some other userspace applications since it has been available for a
> very long time already.

xawtv is buggy too, unfortunately. Many drivers don't check the 
v4l2_buffer.memory field when handling VIDIOC_DQBUF, which leads to buggy 
applications being undetected. We should either fix all drivers to check the 
memory field, or change the v4l2 spec to remove the requirement.

> > > 4.) read() isn't supported
> >
> > That's right, and this is definitely a shortcomming. I plan to support
> > read(),
> > but this hasn't been done yet. If you need read() support for a specific
> > application, we could work together to add it to the driver as quickly as
> > possible.
> >
> > > 5.) I'd like to share common code between usb video devices, the
> > > em28xx driver supports slicing the video and piping a part of the
> > > video to /dev/vbi for example (raw vbi).
> > > 6.) Mauro also wrote some ideas about having a general usb framework
> > > since all devices share common parts.
> > >
> > > these points would be part of the agenda which I'd like to discuss
> > > with you and Mauro actually.
> >
> > I plan to see if I can use video-buf in the Linux UVC driver. However,
> > this might not be beneficial to all users. The buffer queue code in the
> > UVC driver
> > is USB-specific, and is thus smaller than video-buf. Users who currently
> > don't use video-buf would see their memory usage grow.
> >
> > Laurent Pinchart
>
> (I'll answer the other issues later)

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun May  6 18:02:28 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 6 May 2007 18:02:28 +0200
Subject: [Linux-uvc-devel] Issues with the Linux UVC driver (Was "Where
	is V4L headed ?")
In-Reply-To: <d9def9db0705060608u55546191l199c91813f397d56@mail.gmail.com>
References: <200705041501.16398.laurent.pinchart@skynet.be>
	<d9def9db0705060601y3b5d82do89f95bc26a0ece3d@mail.gmail.com>
	<d9def9db0705060608u55546191l199c91813f397d56@mail.gmail.com>
Message-ID: <200705061802.29129.laurent.pinchart@skynet.be>

On Sunday 06 May 2007, Markus Rechberger wrote:
> On 5/6/07, Markus Rechberger <mrechberger at gmail.com> wrote:
> > On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
[snip]

> > > > 3.) Some controls are missing, for example mplayer isn't supported by
> > > > just running
> > > > mplayer -tv driver=v4l2 tv://
> > >
> > > mplayer is buggy. It doesn't set the v4l2_buffer.memory field prior to
> > > dequeuing buffers, as required by the v4l2 specification. I think a
> > > patch has
> > > been applied to the mplayer repository to fix this issue.
> >
> > I see xawtv doesn't work either here, the em28xx driver works with
> > both without the need of any patches. xawtv is used as a reference for
> > some other userspace applications since it has been available for a
> > very long time already.
>
> just tested mplayer (latest svn) it doesn't work either

Try to specify the frame rate using the -fps option.

mplayer -fps 25 -tv driver=v4l2 tv://

There was a discussion on the v4l mailing list a while ago about the tv 
standard ioctls and if webcam and other purely digital device drivers should 
support them. As usual, the issue hasn't been resolved.

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun May  6 18:05:22 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 6 May 2007 18:05:22 +0200
Subject: [Linux-uvc-devel] Issues with the Linux UVC driver (Was "Where
	is V4L headed ?")
In-Reply-To: <d9def9db0705060713y7d24810dm2db24ce856344541@mail.gmail.com>
References: <200705041501.16398.laurent.pinchart@skynet.be>
	<d9def9db0705060608u55546191l199c91813f397d56@mail.gmail.com>
	<d9def9db0705060713y7d24810dm2db24ce856344541@mail.gmail.com>
Message-ID: <200705061805.23239.laurent.pinchart@skynet.be>

On Sunday 06 May 2007, Markus Rechberger wrote:
> On 5/6/07, Markus Rechberger <mrechberger at gmail.com> wrote:
> > On 5/6/07, Markus Rechberger <mrechberger at gmail.com> wrote:
> > > On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
[snip]

> Seems like I got something wrong, I do not allocate that much memory
> at all for any URBs in the em28xx driver, in case of the uvcvideo
> driver it allocates 2.7 MB continuous memory per URB for my device.
> The em28xx driver allocates 40*(max packet size) bytes for each urb
> which never got reported to fail, afterwards it copies the chunks into
> a framebuffer.
> DOS attacks are even possible with lower memory allocations
> (640x480x2) with the uvcvideo driver.

Please post the output os lsusb -v as well as the dwMaxPayloadTransferSize. 
Those information are required to properly discuss this issue.

Laurent Pinchart


From domijor at gmail.com  Sun May  6 17:51:07 2007
From: domijor at gmail.com (Domijor)
Date: Sun, 6 May 2007 16:51:07 +0100
Subject: [Linux-uvc-devel] Orbicam - 046d:09b0 Logitech, Inc
Message-ID: <565389770705060851g3f212c73k840881f526efea95@mail.gmail.com>

# lsusb -v

Bus 005 Device 002: ID 046d:09b0 Logitech, Inc.
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x046d Logitech, Inc.
  idProduct          0x09b0
  bcdDevice            0.06
  iManufacturer           0
  iProduct                0
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          773
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              0
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength          163
        dwClockFrequency        6.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x0000000e
          Auto-Exposure Mode
          Auto-Exposure Priority
          Exposure Time (Absolute)
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000177b
          Brightness
          Contrast
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Gain
          Power Line Frequency
          White Balance Temperature, Auto
        iProcessing             0
        bmVideoStandards     0x1b
          None
          NTSC - 525/60
          SECAM - 625/50
          NTSC - 625/50
      VideoControl Interface Descriptor:
        bLength                27
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {69678ee4-410f-40db-a850-7420d7d8240e}
        bNumControl             7
        bNrPins                 1
        baSourceID( 0)          1
        bControlSize            2
        bmControls( 0)       0x7f
        bmControls( 1)       0x00
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                27
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                13
        guidExtensionCode         {22c6cd0a-95b4-413a-a485-42248d7864b4}
        bNumControl             2
        bNrPins                 1
        baSourceID( 0)          1
        bControlSize            2
        bmControls( 0)       0x41
        bmControls( 1)       0x00
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                28
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                12
        guidExtensionCode         {b6e97e81-be4d-4d4d-8aa7-7fef390fc6ef}
        bNumControl             9
        bNrPins                 1
        baSourceID( 0)          1
        bControlSize            3
        bmControls( 0)       0xff
        bmControls( 1)       0x10
        bmControls( 2)       0x00
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                30
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                10
        guidExtensionCode         {84e38178-8614-48c4-bf3d-d77dd8c8e5d5}
        bNumControl             9
        bNrPins                 1
        baSourceID( 0)          1
        bControlSize            5
        bmControls( 0)       0x33
        bmControls( 1)       0x80
        bmControls( 2)       0x0f
        bmControls( 3)       0x00
        bmControls( 4)       0x00
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               3
        iTerminal               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormarts                        1
        wTotalLength                    33025
        bEndPointAddress                    0
        bmInfo                              2
        bTerminalLink                       2
        bStillCaptureMethod                 1
        bTriggerSupport                     0
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                7
        guidFormat
{32595559-0000-0010-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            62
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   614400
        dwMaxBitRate                 18432000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  9
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)            800000
        dwFrameInterval( 5)           1000000
        dwFrameInterval( 6)           1333333
        dwFrameInterval( 7)           2000000
        dwFrameInterval( 8)           3333333
      VideoStreaming Interface Descriptor:
        bLength                            62
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   202752
        dwMaxBitRate                  6082560
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  9
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)            800000
        dwFrameInterval( 5)           1000000
        dwFrameInterval( 6)           1333333
        dwFrameInterval( 7)           2000000
        dwFrameInterval( 8)           3333333
      VideoStreaming Interface Descriptor:
        bLength                            62
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   153600
        dwMaxBitRate                  4608000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  9
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)            800000
        dwFrameInterval( 5)           1000000
        dwFrameInterval( 6)           1333333
        dwFrameInterval( 7)           2000000
        dwFrameInterval( 8)           3333333
      VideoStreaming Interface Descriptor:
        bLength                            62
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                    50688
        dwMaxBitRate                  1520640
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  9
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)            800000
        dwFrameInterval( 5)           1000000
        dwFrameInterval( 6)           1333333
        dwFrameInterval( 7)           2000000
        dwFrameInterval( 8)           3333333
      VideoStreaming Interface Descriptor:
        bLength                            62
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                    38400
        dwMaxBitRate                  1152000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  9
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)            800000
        dwFrameInterval( 5)           1000000
        dwFrameInterval( 6)           1333333
        dwFrameInterval( 7)           2000000
        dwFrameInterval( 8)           3333333
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                           960
        dwMinBitRate                  2457600
        dwMaxBitRate                 22118400
        dwMaxVideoFrameBufferSize     2457600
        dwDefaultFrameInterval        1250000
        bFrameIntervalType                  3
        dwFrameInterval( 0)           1250000
        dwFrameInterval( 1)           2000000
        dwFrameInterval( 2)           3333333
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         7
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                  2621440
        dwMaxBitRate                 23592960
        dwMaxVideoFrameBufferSize     2621440
        dwDefaultFrameInterval        1250000
        bFrameIntervalType                  3
        dwFrameInterval( 0)           1250000
        dwFrameInterval( 1)           2000000
        dwFrameInterval( 2)           3333333
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               7
        wWidth( 0)                       1280
        wHeight( 0)                      1024
        wWidth( 1)                        640
        wHeight( 1)                       480
        wWidth( 2)                        352
        wHeight( 2)                       288
        wWidth( 3)                        320
        wHeight( 3)                       240
        wWidth( 4)                        176
        wHeight( 4)                       144
        wWidth( 5)                        160
        wHeight( 5)                       120
        wWidth( 6)                       1280
        wHeight( 6)                       960
        bNumCompressionPatterns             7
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 (BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b20  2x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1320  3x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x13e8  3x 1000 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)

DEBIAN ETCH 4.0:
Download:
http://svn.berlios.de/svnroot/repos/linux-uvc/linux-uvc/branches/dynctrl/

# ll
-rw-r--r-- 1 domi domi   639 2007-05-06 15:57 Makefile
-rw-r--r-- 1 domi domi  5759 2007-05-06 15:57 uvc_compat.h
-rw-r--r-- 1 domi domi 26939 2007-05-06 15:59 uvc_ctrl.c
-rw-r--r-- 1 domi domi 41917 2007-05-06 15:59 uvc_driver.c
-rw-r--r-- 1 domi domi 11307 2007-05-06 15:59 uvc_queue.c
-rw-r--r-- 1 domi domi 26621 2007-05-06 15:59 uvc_v4l2.c
-rw-r--r-- 1 domi domi 21806 2007-05-06 15:59 uvc_video.c
-rw-r--r-- 1 domi domi 20440 2007-05-06 16:00 uvcvideo.h

# make
Building USB Video Class driver...
make[1]: se ingresa al directorio `/usr/src/linux-headers-2.6.18-4-686'
  CC [M]  /home/domi/linux-uvc/uvc_driver.o
  CC [M]  /home/domi/linux-uvc/uvc_queue.o
  CC [M]  /home/domi/linux-uvc/uvc_v4l2.o
  CC [M]  /home/domi/linux-uvc/uvc_video.o
  CC [M]  /home/domi/linux-uvc/uvc_ctrl.o
  LD [M]  /home/domi/linux-uvc/uvcvideo.o
  Building modules, stage 2.
  MODPOST
  CC      /home/domi/linux-uvc/uvcvideo.mod.o
  LD [M]  /home/domi/linux-uvc/uvcvideo.ko
make[1]: se sale del directorio `/usr/src/linux-headers-2.6.18-4-686'

# ll
total 324
-rw-r--r-- 1 domi domi   639 2007-05-06 15:57 Makefile
-rw-r--r-- 1 domi domi     0 2007-05-06 16:00 Module.symvers
-rw-r--r-- 1 domi domi  5759 2007-05-06 15:57 uvc_compat.h
-rw-r--r-- 1 domi domi 26939 2007-05-06 15:59 uvc_ctrl.c
-rw-r--r-- 1 domi domi 11192 2007-05-06 16:00 uvc_ctrl.o
-rw-r--r-- 1 domi domi 41917 2007-05-06 15:59 uvc_driver.c
-rw-r--r-- 1 domi domi 15260 2007-05-06 16:00 uvc_driver.o
-rw-r--r-- 1 domi domi 11307 2007-05-06 15:59 uvc_queue.c
-rw-r--r-- 1 domi domi  4076 2007-05-06 16:00 uvc_queue.o
-rw-r--r-- 1 domi domi 26621 2007-05-06 15:59 uvc_v4l2.c
-rw-r--r-- 1 domi domi  9184 2007-05-06 16:00 uvc_v4l2.o
-rw-r--r-- 1 domi domi 21806 2007-05-06 15:59 uvc_video.c
-rw-r--r-- 1 domi domi 20440 2007-05-06 16:00 uvcvideo.h
-rw-r--r-- 1 domi domi 47265 2007-05-06 16:00 uvcvideo.ko
-rw-r--r-- 1 domi domi  3350 2007-05-06 16:00 uvcvideo.mod.c
-rw-r--r-- 1 domi domi  6848 2007-05-06 16:00 uvcvideo.mod.o
-rw-r--r-- 1 domi domi  6272 2007-05-06 16:00 uvc_video.o
-rw-r--r-- 1 domi domi 41128 2007-05-06 16:00 uvcvideo.o

# make install
Installing USB Video Class driver...
make[1]: se ingresa al directorio `/usr/src/linux-headers-2.6.18-4-686'
  INSTALL /home/domi/linux-uvc/uvcvideo.ko
  DEPMOD  2.6.18-4-686
make[1]: se sale del directorio `/usr/src/linux-headers-2.6.18-4-686'
depmod -ae

# modprobe uvcvideo

# dmesg | tail
uvcvideo: Found UVC 1.00 device <unnamed> (046d:09b0)
usbcore: registered new driver uvcvideo
USB Video Class driver (v0.1.0)

# lsmod | grep uvcvideo
uvcvideo               39300  0
compat_ioctl32          1472  1 uvcvideo
videodev               21120  1 uvcvideo
v4l1_compat            12036  2 uvcvideo,videodev
v4l2_common            20448  2 uvcvideo,videodev
usbcore               112644  5 uvcvideo,usbhid,ehci_hcd,uhci_hcd

# ll /dev/vi*
crw-rw---- 1 root video 81, 0 2007-05-06 16:04 /dev/video0

# chmod a+r /dev/video0

$ camorama
violaci?n de segmento

# dmesg | tail
BUG: unable to handle kernel NULL pointer dereference at virtual address
0000000d
 printing eip:
f91e6d99
*pde = 00000000
Oops: 0000 [#4]
SMP
Modules linked in: uvcvideo compat_ioctl32 videodev v4l1_compat v4l2_common
nvidia rfcomm l2cap bluetooth ppdev parport_pc lp parport button ac battery
ipv6 xt_tcpudp ipt_TOS ipt_tos ipt_TCPMSS xt_tcpmss ipt_LOG ipt_REJECT
iptable_nat ip_nat iptable_mangle iptable_filter xt_multiport xt_state
xt_limit xt_conntrack ip_conntrack_ftp ip_conntrack nfnetlink ip_tables
x_tables fuse dm_snapshot dm_mirror dm_mod eeprom loop joydev pcmcia
snd_hda_intel snd_hda_codec snd_pcm_oss snd_mixer_oss snd_pcm snd_timer rtc
yenta_socket rsrc_nonstatic snd ipw3945 sg pcmcia_core soundcore intel_agp
psmouse serio_raw sdhci mmc_core i2c_i801 snd_page_alloc ieee80211
ieee80211_crypt pcspkr i2c_core firmware_class agpgart sr_mod evdev tsdev
cdrom ext3 jbd mbcache usbhid sd_mod ata_piix libata scsi_mod ehci_hcd
generic uhci_hcd b44 mii ide_core usbcore thermal processor fan
CPU:    0
EIP:    0060:[<f91e6d99>]    Tainted: P      VLI
EFLAGS: 00010202   (2.6.18-4-686 #1)
EIP is at __uvc_find_control+0x4e/0x90 [uvcvideo]
eax: 00000001   ebx: f7454840   ecx: 00980900   edx: f91ec200
esi: f7e92540   edi: f62cf7e8   ebp: 00000000   esp: f62cf79c
ds: 007b   es: 007b   ss: 0068
Process camorama (pid: 4427, ti=f62ce000 task=f72c2aa0 task.ti=f62ce000)
Stack: 00980903 00000000 f62cf7cc c0445624 00000000 00980903 f91e6fb3
f62cf7cc
       00000000 f62cf7e8 f6b22030 f7454840 00000000 f62cf888 c0445624
f616c880
       f6b22030 f91e7072 00000003 00000001 f6b22030 c0445624 f616c880
f62cf888
Call Trace:
 [<f91e6fb3>] uvc_find_control+0x3a/0xe3 [uvcvideo]
 [<f91e7072>] uvc_query_v4l2_ctrl+0x16/0x189 [uvcvideo]
 [<f91e5614>] uvc_v4l2_do_ioctl+0x2da/0xbd9 [uvcvideo]
 [<f91e564d>] uvc_v4l2_do_ioctl+0x313/0xbd9 [uvcvideo]
 [<f91e699c>] uvc_set_video_ctrl+0xd4/0xdc [uvcvideo]
 [<f91e533a>] uvc_v4l2_do_ioctl+0x0/0xbd9 [uvcvideo]
 [<f900e0f4>] get_v4l_control+0x20/0xa8 [v4l1_compat]
 [<f900ec38>] v4l_compat_translate_ioctl+0xabc/0x1a84 [v4l1_compat]
 [<f91e533a>] uvc_v4l2_do_ioctl+0x0/0xbd9 [uvcvideo]
 [<f91e533a>] uvc_v4l2_do_ioctl+0x0/0xbd9 [uvcvideo]
 [<f94d7101>] _nv002668rm+0x1d/0x2c [nvidia]
 [<f94d7101>] _nv002668rm+0x1d/0x2c [nvidia]
 [<c01b7438>] __next_cpu+0x12/0x21
 [<c0116d0a>] find_busiest_group+0x177/0x46a
 [<c027fc22>] schedule+0x84e/0x8fe
 [<f94d710a>] _nv002668rm+0x26/0x2c [nvidia]
 [<f94d710a>] _nv002668rm+0x26/0x2c [nvidia]
 [<c012da87>] remove_wait_queue+0xf/0x34
 [<c0117778>] default_wake_function+0x0/0xc
 [<c0117778>] default_wake_function+0x0/0xc
 [<c0117778>] default_wake_function+0x0/0xc
 [<c0117778>] default_wake_function+0x0/0xc
 [<f8c334cf>] __ext3_get_inode_loc+0x109/0x2b9 [ext3]
 [<c011776e>] try_to_wake_up+0x355/0x35f
 [<c011776e>] try_to_wake_up+0x355/0x35f
 [<c011624d>] __wake_up_common+0x2f/0x53
 [<c016d7fe>] __d_lookup+0x98/0xdb
 [<f91e5e7f>] uvc_v4l2_do_ioctl+0xb45/0xbd9 [uvcvideo]
 [<f91e533a>] uvc_v4l2_do_ioctl+0x0/0xbd9 [uvcvideo]
 [<c017122a>] mntput_no_expire+0x11/0x6a
 [<c01674b0>] link_path_walk+0xb3/0xbd
 [<c014f2ba>] do_mmap_pgoff+0x347/0x629
 [<f90eb649>] video_usercopy+0x175/0x23b [videodev]
 [<c0161777>] chrdev_open+0x0/0x141
 [<c0158b8c>] __dentry_open+0xeb/0x1ac
 [<c0158cb1>] nameidata_to_filp+0x19/0x28
 [<c0158ceb>] do_filp_open+0x2b/0x31
 [<f91e4f69>] uvc_v4l2_ioctl+0x31/0x37 [uvcvideo]
 [<f91e533a>] uvc_v4l2_do_ioctl+0x0/0xbd9 [uvcvideo]
 [<c0169273>] do_ioctl+0x47/0x5d
 [<c01694d3>] vfs_ioctl+0x24a/0x25c
 [<c016952d>] sys_ioctl+0x48/0x5f
 [<c0102c11>] sysenter_past_esp+0x56/0x79
Code: 8b 43 04 85 c0 74 4f 8b 50 08 eb 3a 8b 4a 0c 3b 0c 24 75 11 83 7c 24
20 00 75 0a 8b 44 24 1c 89 18 89 17 eb 41 8b 07 85 c0 74 05 <39> 48 0c 73 14
3b 0c 24 76 0f 83 7c 24 20 00 74 08 8b 44 24 1c
EIP: [<f91e6d99>] __uvc_find_control+0x4e/0x90 [uvcvideo] SS:ESP
0068:f62cf79c
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070506/9357f1c1/attachment.html>

From domijor at gmail.com  Sun May  6 17:53:51 2007
From: domijor at gmail.com (Domijor)
Date: Sun, 6 May 2007 16:53:51 +0100
Subject: [Linux-uvc-devel] Fwd: Orbicam - 046d:09b0 Logitech, Inc
In-Reply-To: <565389770705060851g3f212c73k840881f526efea95@mail.gmail.com>
References: <565389770705060851g3f212c73k840881f526efea95@mail.gmail.com>
Message-ID: <565389770705060853y555fea4fpcd1d86e9512f0f24@mail.gmail.com>

# lsusb -v

Bus 005 Device 002: ID 046d:09b0 Logitech, Inc.
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x046d Logitech, Inc.
  idProduct          0x09b0
  bcdDevice            0.06
  iManufacturer           0
  iProduct                0
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          773
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              0
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength          163
        dwClockFrequency        6.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                18
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  3
        bmControls           0x0000000e
          Auto-Exposure Mode
          Auto-Exposure Priority
          Exposure Time (Absolute)
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 3
        bSourceID               1
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000177b
          Brightness
          Contrast
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Gain
          Power Line Frequency
          White Balance Temperature, Auto
        iProcessing             0
        bmVideoStandards     0x1b
          None
          NTSC - 525/60
          SECAM - 625/50
          NTSC - 625/50
      VideoControl Interface Descriptor:
        bLength                27
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 4
        guidExtensionCode         {69678ee4-410f-40db-a850-7420d7d8240e}
        bNumControl             7
        bNrPins                 1
        baSourceID( 0)          1
        bControlSize            2
        bmControls( 0)       0x7f
        bmControls( 1)       0x00
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                27
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                13
        guidExtensionCode         {22c6cd0a-95b4-413a-a485-42248d7864b4}
        bNumControl             2
        bNrPins                 1
        baSourceID( 0)          1
        bControlSize            2
        bmControls( 0)       0x41
        bmControls( 1)       0x00
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                28
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                12
        guidExtensionCode         {b6e97e81-be4d-4d4d-8aa7-7fef390fc6ef}
        bNumControl             9
        bNrPins                 1
        baSourceID( 0)          1
        bControlSize            3
        bmControls( 0)       0xff
        bmControls( 1)       0x10
        bmControls( 2)       0x00
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                30
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                10
        guidExtensionCode         {84e38178-8614-48c4-bf3d-d77dd8c8e5d5}
        bNumControl             9
        bNrPins                 1
        baSourceID( 0)          1
        bControlSize            5
        bmControls( 0)       0x33
        bmControls( 1)       0x80
        bmControls( 2)       0x0f
        bmControls( 3)       0x00
        bmControls( 4)       0x00
        iExtension              0
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             2
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               3
        iTerminal               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            14
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormarts                        1
        wTotalLength                    33025
        bEndPointAddress                    0
        bmInfo                              2
        bTerminalLink                       2
        bStillCaptureMethod                 1
        bTriggerSupport                     0
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    27
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        1
        bNumFrameDescriptors                7
        guidFormat
{32595559-0000-0010-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            62
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   614400
        dwMaxBitRate                 18432000
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  9
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)            800000
        dwFrameInterval( 5)           1000000
        dwFrameInterval( 6)           1333333
        dwFrameInterval( 7)           2000000
        dwFrameInterval( 8)           3333333
      VideoStreaming Interface Descriptor:
        bLength                            62
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   202752
        dwMaxBitRate                  6082560
        dwMaxVideoFrameBufferSize      202752
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  9
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)            800000
        dwFrameInterval( 5)           1000000
        dwFrameInterval( 6)           1333333
        dwFrameInterval( 7)           2000000
        dwFrameInterval( 8)           3333333
      VideoStreaming Interface Descriptor:
        bLength                            62
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   153600
        dwMaxBitRate                  4608000
        dwMaxVideoFrameBufferSize      153600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  9
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)            800000
        dwFrameInterval( 5)           1000000
        dwFrameInterval( 6)           1333333
        dwFrameInterval( 7)           2000000
        dwFrameInterval( 8)           3333333
      VideoStreaming Interface Descriptor:
        bLength                            62
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                    50688
        dwMaxBitRate                  1520640
        dwMaxVideoFrameBufferSize       50688
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  9
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)            800000
        dwFrameInterval( 5)           1000000
        dwFrameInterval( 6)           1333333
        dwFrameInterval( 7)           2000000
        dwFrameInterval( 8)           3333333
      VideoStreaming Interface Descriptor:
        bLength                            62
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                    38400
        dwMaxBitRate                  1152000
        dwMaxVideoFrameBufferSize       38400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  9
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            400000
        dwFrameInterval( 2)            500000
        dwFrameInterval( 3)            666666
        dwFrameInterval( 4)            800000
        dwFrameInterval( 5)           1000000
        dwFrameInterval( 6)           1333333
        dwFrameInterval( 7)           2000000
        dwFrameInterval( 8)           3333333
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                           960
        dwMinBitRate                  2457600
        dwMaxBitRate                 22118400
        dwMaxVideoFrameBufferSize     2457600
        dwDefaultFrameInterval        1250000
        bFrameIntervalType                  3
        dwFrameInterval( 0)           1250000
        dwFrameInterval( 1)           2000000
        dwFrameInterval( 2)           3333333
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         7
        bmCapabilities                   0x00
          Still image unsupported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                  2621440
        dwMaxBitRate                 23592960
        dwMaxVideoFrameBufferSize     2621440
        dwDefaultFrameInterval        1250000
        bFrameIntervalType                  3
        dwFrameInterval( 0)           1250000
        dwFrameInterval( 1)           2000000
        dwFrameInterval( 2)           3333333
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               7
        wWidth( 0)                       1280
        wHeight( 0)                      1024
        wWidth( 1)                        640
        wHeight( 1)                       480
        wWidth( 2)                        352
        wHeight( 2)                       288
        wWidth( 3)                        320
        wHeight( 3)                       240
        wWidth( 4)                        176
        wHeight( 4)                       144
        wWidth( 5)                        160
        wHeight( 5)                       120
        wWidth( 6)                       1280
        wHeight( 6)                       960
        bNumCompressionPatterns             7
      VideoStreaming Interface Descriptor:
        bLength                             6
        bDescriptorType                    36
        bDescriptorSubtype                 13 (COLORFORMAT)
        bColorPrimaries                     1 ( BT.709,sRGB)
        bTransferCharacteristics            1 (BT.709)
        bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0080  1x 128 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b20  2x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1320  3x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x13e8  3x 1000 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)

DEBIAN ETCH 4.0:
Download:
http://svn.berlios.de/svnroot/repos/linux-uvc/linux-uvc/branches/dynctrl/

# ll
-rw-r--r-- 1 domi domi   639 2007-05-06 15:57 Makefile
-rw-r--r-- 1 domi domi  5759 2007-05-06 15:57 uvc_compat.h
-rw-r--r-- 1 domi domi 26939 2007-05-06 15:59 uvc_ctrl.c
-rw-r--r-- 1 domi domi 41917 2007-05-06 15:59 uvc_driver.c
-rw-r--r-- 1 domi domi 11307 2007-05-06 15:59 uvc_queue.c
-rw-r--r-- 1 domi domi 26621 2007-05-06 15:59 uvc_v4l2.c
-rw-r--r-- 1 domi domi 21806 2007-05-06 15:59 uvc_video.c
-rw-r--r-- 1 domi domi 20440 2007-05-06 16:00 uvcvideo.h

# make
Building USB Video Class driver...
make[1]: se ingresa al directorio `/usr/src/linux-headers-2.6.18-4-686'
  CC [M]  /home/domi/linux-uvc/uvc_driver.o
  CC [M]  /home/domi/linux-uvc/uvc_queue.o
  CC [M]  /home/domi/linux-uvc/uvc_v4l2.o
  CC [M]  /home/domi/linux-uvc/uvc_video.o
  CC [M]  /home/domi/linux-uvc/uvc_ctrl.o
  LD [M]  /home/domi/linux-uvc/uvcvideo.o
  Building modules, stage 2.
  MODPOST
  CC      /home/domi/linux-uvc/uvcvideo.mod.o
  LD [M]  /home/domi/linux-uvc/uvcvideo.ko
make[1]: se sale del directorio `/usr/src/linux-headers-2.6.18-4-686'

# ll
total 324
-rw-r--r-- 1 domi domi   639 2007-05-06 15:57 Makefile
-rw-r--r-- 1 domi domi     0 2007-05-06 16:00 Module.symvers
-rw-r--r-- 1 domi domi  5759 2007-05-06 15:57 uvc_compat.h
-rw-r--r-- 1 domi domi 26939 2007-05-06 15:59 uvc_ctrl.c
-rw-r--r-- 1 domi domi 11192 2007-05-06 16:00 uvc_ctrl.o
-rw-r--r-- 1 domi domi 41917 2007-05-06 15:59 uvc_driver.c
-rw-r--r-- 1 domi domi 15260 2007-05-06 16:00 uvc_driver.o
-rw-r--r-- 1 domi domi 11307 2007-05-06 15:59 uvc_queue.c
-rw-r--r-- 1 domi domi  4076 2007-05-06 16:00 uvc_queue.o
-rw-r--r-- 1 domi domi 26621 2007-05-06 15:59 uvc_v4l2.c
-rw-r--r-- 1 domi domi  9184 2007-05-06 16:00 uvc_v4l2.o
-rw-r--r-- 1 domi domi 21806 2007-05-06 15:59 uvc_video.c
-rw-r--r-- 1 domi domi 20440 2007-05-06 16:00 uvcvideo.h
-rw-r--r-- 1 domi domi 47265 2007-05-06 16:00 uvcvideo.ko
-rw-r--r-- 1 domi domi  3350 2007-05-06 16:00 uvcvideo.mod.c
-rw-r--r-- 1 domi domi  6848 2007-05-06 16:00 uvcvideo.mod.o
-rw-r--r-- 1 domi domi  6272 2007-05-06 16:00 uvc_video.o
-rw-r--r-- 1 domi domi 41128 2007-05-06 16:00 uvcvideo.o

# make install
Installing USB Video Class driver...
make[1]: se ingresa al directorio `/usr/src/linux- headers-2.6.18-4-686'
  INSTALL /home/domi/linux-uvc/uvcvideo.ko
  DEPMOD  2.6.18-4-686
make[1]: se sale del directorio `/usr/src/linux-headers-2.6.18-4-686'
depmod -ae

# modprobe uvcvideo

# dmesg | tail
uvcvideo: Found UVC 1.00 device <unnamed> (046d:09b0)
usbcore: registered new driver uvcvideo
USB Video Class driver (v0.1.0)

# lsmod | grep uvcvideo
uvcvideo               39300  0
compat_ioctl32          1472  1 uvcvideo
videodev               21120  1 uvcvideo
v4l1_compat            12036  2 uvcvideo,videodev
v4l2_common            20448  2 uvcvideo,videodev
usbcore               112644  5 uvcvideo,usbhid,ehci_hcd,uhci_hcd

# ll /dev/vi*
crw-rw---- 1 root video 81, 0 2007-05-06 16:04 /dev/video0

# chmod a+r /dev/video0

$ camorama
violaci?n de segmento

# dmesg | tail
BUG: unable to handle kernel NULL pointer dereference at virtual address
0000000d
 printing eip:
f91e6d99
*pde = 00000000
Oops: 0000 [#4]
SMP
Modules linked in: uvcvideo compat_ioctl32 videodev v4l1_compat v4l2_common
nvidia rfcomm l2cap bluetooth ppdev parport_pc lp parport button ac battery
ipv6 xt_tcpudp ipt_TOS ipt_tos ipt_TCPMSS xt_tcpmss ipt_LOG ipt_REJECT
iptable_nat ip_nat iptable_mangle iptable_filter xt_multiport xt_state
xt_limit xt_conntrack ip_conntrack_ftp ip_conntrack nfnetlink ip_tables
x_tables fuse dm_snapshot dm_mirror dm_mod eeprom loop joydev pcmcia
snd_hda_intel snd_hda_codec snd_pcm_oss snd_mixer_oss snd_pcm snd_timer rtc
yenta_socket rsrc_nonstatic snd ipw3945 sg pcmcia_core soundcore intel_agp
psmouse serio_raw sdhci mmc_core i2c_i801 snd_page_alloc ieee80211
ieee80211_crypt pcspkr i2c_core firmware_class agpgart sr_mod evdev tsdev
cdrom ext3 jbd mbcache usbhid sd_mod ata_piix libata scsi_mod ehci_hcd
generic uhci_hcd b44 mii ide_core usbcore thermal processor fan
CPU:    0
EIP:    0060:[<f91e6d99>]    Tainted: P      VLI
EFLAGS: 00010202   (2.6.18-4-686 #1)
EIP is at __uvc_find_control+0x4e/0x90 [uvcvideo]
eax: 00000001   ebx: f7454840   ecx: 00980900   edx: f91ec200
esi: f7e92540   edi: f62cf7e8   ebp: 00000000   esp: f62cf79c
ds: 007b   es: 007b   ss: 0068
Process camorama (pid: 4427, ti=f62ce000 task=f72c2aa0 task.ti=f62ce000)
Stack: 00980903 00000000 f62cf7cc c0445624 00000000 00980903 f91e6fb3
f62cf7cc
       00000000 f62cf7e8 f6b22030 f7454840 00000000 f62cf888 c0445624
f616c880
       f6b22030 f91e7072 00000003 00000001 f6b22030 c0445624 f616c880
f62cf888
Call Trace:
 [<f91e6fb3>] uvc_find_control+0x3a/0xe3 [uvcvideo]
 [<f91e7072>] uvc_query_v4l2_ctrl+0x16/0x189 [uvcvideo]
 [<f91e5614>] uvc_v4l2_do_ioctl+0x2da/0xbd9 [uvcvideo]
 [<f91e564d>] uvc_v4l2_do_ioctl+0x313/0xbd9 [uvcvideo]
 [<f91e699c>] uvc_set_video_ctrl+0xd4/0xdc [uvcvideo]
 [<f91e533a>] uvc_v4l2_do_ioctl+0x0/0xbd9 [uvcvideo]
 [<f900e0f4>] get_v4l_control+0x20/0xa8 [v4l1_compat]
 [<f900ec38>] v4l_compat_translate_ioctl+0xabc/0x1a84 [v4l1_compat]
 [<f91e533a>] uvc_v4l2_do_ioctl+0x0/0xbd9 [uvcvideo]
 [<f91e533a>] uvc_v4l2_do_ioctl+0x0/0xbd9 [uvcvideo]
 [<f94d7101>] _nv002668rm+0x1d/0x2c [nvidia]
 [<f94d7101>] _nv002668rm+0x1d/0x2c [nvidia]
 [<c01b7438>] __next_cpu+0x12/0x21
 [<c0116d0a>] find_busiest_group+0x177/0x46a
 [<c027fc22>] schedule+0x84e/0x8fe
 [<f94d710a>] _nv002668rm+0x26/0x2c [nvidia]
 [<f94d710a>] _nv002668rm+0x26/0x2c [nvidia]
 [<c012da87>] remove_wait_queue+0xf/0x34
 [<c0117778>] default_wake_function+0x0/0xc
 [<c0117778>] default_wake_function+0x0/0xc
 [<c0117778>] default_wake_function+0x0/0xc
 [<c0117778>] default_wake_function+0x0/0xc
 [<f8c334cf>] __ext3_get_inode_loc+0x109/0x2b9 [ext3]
 [<c011776e>] try_to_wake_up+0x355/0x35f
 [<c011776e>] try_to_wake_up+0x355/0x35f
 [<c011624d>] __wake_up_common+0x2f/0x53
 [<c016d7fe>] __d_lookup+0x98/0xdb
 [<f91e5e7f>] uvc_v4l2_do_ioctl+0xb45/0xbd9 [uvcvideo]
 [<f91e533a>] uvc_v4l2_do_ioctl+0x0/0xbd9 [uvcvideo]
 [<c017122a>] mntput_no_expire+0x11/0x6a
 [<c01674b0>] link_path_walk+0xb3/0xbd
 [<c014f2ba>] do_mmap_pgoff+0x347/0x629
 [<f90eb649>] video_usercopy+0x175/0x23b [videodev]
 [<c0161777>] chrdev_open+0x0/0x141
 [<c0158b8c>] __dentry_open+0xeb/0x1ac
 [<c0158cb1>] nameidata_to_filp+0x19/0x28
 [<c0158ceb>] do_filp_open+0x2b/0x31
 [<f91e4f69>] uvc_v4l2_ioctl+0x31/0x37 [uvcvideo]
 [<f91e533a>] uvc_v4l2_do_ioctl+0x0/0xbd9 [uvcvideo]
 [<c0169273>] do_ioctl+0x47/0x5d
 [<c01694d3>] vfs_ioctl+0x24a/0x25c
 [<c016952d>] sys_ioctl+0x48/0x5f
 [<c0102c11>] sysenter_past_esp+0x56/0x79
Code: 8b 43 04 85 c0 74 4f 8b 50 08 eb 3a 8b 4a 0c 3b 0c 24 75 11 83 7c 24
20 00 75 0a 8b 44 24 1c 89 18 89 17 eb 41 8b 07 85 c0 74 05 <39> 48 0c 73 14
3b 0c 24 76 0f 83 7c 24 20 00 74 08 8b 44 24 1c
EIP: [<f91e6d99>] __uvc_find_control+0x4e/0x90 [uvcvideo] SS:ESP
0068:f62cf79c
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070506/8aca3f62/attachment.html>

From mrechberger at gmail.com  Sun May  6 18:30:40 2007
From: mrechberger at gmail.com (Markus Rechberger)
Date: Sun, 6 May 2007 18:30:40 +0200
Subject: [Linux-uvc-devel] Issues with the Linux UVC driver (Was "Where
	is V4L headed ?")
In-Reply-To: <200705061759.45265.laurent.pinchart@skynet.be>
References: <200705041501.16398.laurent.pinchart@skynet.be>
	<200705061308.16859.laurent.pinchart@skynet.be>
	<d9def9db0705060601y3b5d82do89f95bc26a0ece3d@mail.gmail.com>
	<200705061759.45265.laurent.pinchart@skynet.be>
Message-ID: <d9def9db0705060930u6b4213b7q9c9c4e4ff0c6d78a@mail.gmail.com>

On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> On Sunday 06 May 2007, Markus Rechberger wrote:
> > On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > > Let's move this discussion to the linux-uvc-devel list. I CCed
> > > video4linux-list for reference, please reply to linux-uvc-devel only to
> > > avoid
> > > flooding the video4linux list.
> > >
> > > On Saturday 05 May 2007, Markus Rechberger wrote:
> > >
> > > [snip non-uvc issues]
> > >
> > > > I'll just write all my considerations here, you can put the ML into CC
> > > > and/or split up the topics:
> > > >
> > > > 1.)
> > > > May  5 20:14:19 debian kernel: ekiga: page allocation failure.
> > > > order:10, mode:0x0
> > > > May  5 20:14:19 debian kernel:  [__alloc_pages+629/646]
> > > > __alloc_pages+0x275/0x286
> > > > May  5 20:14:19 debian kernel:  [__get_free_pages+26/51]
> > > > __get_free_pages+0x1a/0x33
> > > > May  5 20:14:19 debian kernel:  [dma_alloc_coherent+170/222]
> > > > dma_alloc_coherent+0xaa/0xde
> > > > May  5 20:14:19 debian kernel:  [pg0+513461816/1069679616]
> > > > uvc_init_video_bulk+0xb7/0x143 [uvcvideo]
> > > > May  5 20:14:19 debian kernel:  [pg0+513462425/1069679616]
> > > > uvc_video_enable+0xfe/0x121 [uvcvideo]
> > > > May  5 20:14:19 debian kernel:  [pg0+513458219/1069679616]
> > > > uvc_v4l2_do_ioctl+0x830/0x8bf [uvcvideo]
> > > > May  5 20:14:19 debian kernel:  [dput+24/373] dput+0x18/0x175
> > > > May  5 20:14:19 debian kernel:  [__link_path_walk+2824/3148]
> > > > __link_path_walk+0xb08/0xc4c
> > > > May  5 20:14:19 debian kernel:  [n_tty_receive_buf+3303/3378]
> > > > n_tty_receive_buf+0xce7/0xd32
> > > > May  5 20:14:19 debian kernel:  [get_page_from_freelist+635/798]
> > > > get_page_from_freelist+0x27b/0x31e
> > > > May  5 20:14:19 debian kernel:  [wakeup_kswapd+45/104]
> > > > wakeup_kswapd+0x2d/0x68 May  5 20:14:19 debian kernel:
> > > > [pg0+511673193/1069679616]
> > > > video_usercopy+0x112/0x1a3 [videodev]
> > > > May  5 20:14:19 debian kernel:  [vma_prio_tree_insert+23/42]
> > > > vma_prio_tree_insert+0x17/0x2a
> > > > May  5 20:14:19 debian kernel:  [vma_link+218/247] vma_link+0xda/0xf7
> > > > May  5 20:14:19 debian kernel:  [pg0+513458420/1069679616]
> > > > uvc_v4l2_ioctl+0x3a/0x40 [uvcvideo]
> > > > May  5 20:14:19 debian kernel:  [pg0+513456123/1069679616]
> > > > uvc_v4l2_do_ioctl+0x0/0x8bf [uvcvideo]
> > > > May  5 20:14:19 debian kernel:  [do_ioctl+76/98] do_ioctl+0x4c/0x62
> > > > May  5 20:14:19 debian kernel:  [vfs_ioctl+583/602]
> > > > vfs_ioctl+0x247/0x25a May  5 20:14:19 debian kernel:
> [sys_ioctl+51/76]
> > > > sys_ioctl+0x33/0x4c May  5 20:14:19 debian kernel:
> [syscall_call+7/11]
> > > > syscall_call+0x7/0xb May  5 20:14:19 debian kernel:
> > > > =======================
> > > > May  5 20:14:19 debian kernel: Mem-info:
> > > > May  5 20:14:19 debian kernel: DMA per-cpu:
> > > > May  5 20:14:19 debian kernel: CPU    0: Hot: hi:    0, btch:   1 usd:
> > > >   0   Cold: hi:    0, btch:   1 usd:   0
> > > > May  5 20:14:19 debian kernel: Normal per-cpu:
> > > > May  5 20:14:19 debian kernel: CPU    0: Hot: hi:  186, btch:  31 usd:
> > > >  13   Cold: hi:   62, btch:  15 usd:  51
> > > > May  5 20:14:19 debian kernel: Active:93485 inactive:7268 dirty:0
> > > > writeback:0 unstable:0 free:1171 slab:5255 mapped:15182 pagetables:980
> > > > May  5 20:14:19 debian kernel: DMA free:1928kB min:92kB low:112kB
> > > > high:136kB active:10716kB inactive:0kB present:16256kB
> > > > pages_scanned:429 all_unreclaimable? no
> > > > May  5 20:14:19 debian kernel: lowmem_reserve[]: 0 459
> > > > May  5 20:14:19 debian kernel: Normal free:2756kB min:2692kB
> > > > low:3364kB high:4036kB active:363224kB inactive:29072kB
> > > > present:470284kB pages_scanned:291 all_unreclaimable? no
> > > > May  5 20:14:19 debian kernel: lowmem_reserve[]: 0 0
> > > > May  5 20:14:19 debian kernel: DMA: 4*4kB 1*8kB 1*16kB 1*32kB 1*64kB
> > > > 0*128kB 1*256kB 1*512kB 1*1024kB 0*2048kB 0*4096kB = 1928kB
> > > > May  5 20:14:19 debian kernel: Normal: 47*4kB 5*8kB 12*16kB 3*32kB
> > > > 1*64kB 1*128kB 0*256kB 0*512kB 0*1024kB 1*2048kB 0*4096kB = 2756kB
> > > > May  5 20:14:19 debian kernel: Swap cache: add 440134, delete 421407,
> > > > find 136779/175577, race 0+0
> > > > May  5 20:14:19 debian kernel: Free swap  = 455676kB
> > > > May  5 20:14:19 debian kernel: Total swap = 976888kB
> > > > May  5 20:14:19 debian kernel: Free swap:       455676kB
> > > > May  5 20:14:19 debian kernel: 122592 pages of RAM
> > > > May  5 20:14:19 debian kernel: 0 pages of HIGHMEM
> > > > May  5 20:14:19 debian kernel: 1844 reserved pages
> > > > May  5 20:14:19 debian kernel: 70305 pages shared
> > > > May  5 20:14:19 debian kernel: 18727 pages swap cached
> > > > May  5 20:14:19 debian kernel: 0 pages dirty
> > > > May  5 20:14:19 debian kernel: 0 pages writeback
> > > > May  5 20:14:19 debian kernel: 15182 pages mapped
> > > > May  5 20:14:19 debian kernel: 5253 pages slab
> > > > May  5 20:14:19 debian kernel: 980 pages pagetables
> > > >
> > > > This happens either if a box has 256 mb ram, or is almost out of
> > > > physical memory.
> > > > The other driver I have works properly with it. After a fresh reboot
> > > > the uvcvideo driver seems to work for a while.
> > >
> > > Oh, an OOM issue.
> > >
> > > The driver allocates memory for bulk/isochronous transfers based on two
> > > parameters. The first one is the maximum payload transfer size, as
> > > reported by the device. I can't do much about that one. The second one
> is
> > > the number of URBs allocated by the driver. This is currently hardcoded
> > > to 5, but could be made configurable or could be computed based on the
> > > maximum payload transfer size. I'll look into this issue.
> >
> > this really seems to be an issue with usb_buffer_alloc() after that
> > call fails the whole memory management goes dizzy.
> > It tries to swap out almost all the physical memory hangs for a while
> > and copies the swapped memory back to physical memory till it becomes
> > normal again.
> > I also see that more than half of the system memory is used as cache,
> > since usb_buffer_alloc is called with GFP_KERNEL it might wait until
> > some cache memory gets released for it. I added Greg to that mail
> > since I think that he knows alot about the usb framework itself.
>
> If the system goes unstable when I try to request more than the available
> memory, there's not much I can do about it. The driver fails gracefully when
> memory allocation fails. I seriously doubt that the kernel memory manager
> makes the system unstable when a driver tries to allocate a usb buffer
> bigger
> than the available memory. Maybe you have an issue specific to your system ?
> I'm not familiar with the memory allocator internals, maybe Greg will be
> able
> to help.

It is like I explained it above. The system becomes very slow because
of moving almost everything to swap and copying it back to memory
again.

>
> >  dwMaxVideoFrameBufferSize     2752512 (which is used for
> > usb_buffer_alloc, seems to be too much already)
>
> The bulk buffers are allocated using dwMaxPayloadTransferSize. Isochronous
> buffers are allocated using dwMaxVideoFrameSize, which is clearly a bug. I'm
> working on a fix.
>
> The stack trace you posted shows your device uses bulk transfers. Could you
> tell me how big dwMaxPayloadTransferSize is ? If the devices insists on
> using
> huge buffers, there's not much I can do about it.
>

I simply wouldn't allocate that much memory for the urbs, this way
seems to work reliable with the driver I have.
I added some debug at the allocation it is 2.7 MB/URB

> > I don't have a problem with that in my uvc driver since I only
> > allocate memory for max. 640x480 and do not support a higher mode.
>
> The comparison is thus not fair, is it ?
>

I explained it the wrong way, my driver allocates much less than your
one for the URBs and it also works reliable when all the system memory
is in use (system + cache)

> > > Could you please post the output of lsusb -v (with usbutils 0.72 or
> > > later) ? Thanks.
> >
> > (think that value was what you were looking for)
>
> I'm interested in the lsusb output as well (the dwMaxPayloadTransferSize
> value
> is also interesting and not reported by the usb descriptors).
>

attached the uvc log.

> > > > 2.) No v4l1 support using the compat layer
> > > >
> > > > I read some discussions about not supporting v4l1, as a point from the
> > > > userside it simply has to work and there are still applications out
> > > > there which only support v4l1, I read that a compat version of that
> > > > driver is available but you don't want it in the main driver.
> > >
> > > The Linux UVC driver calls v4l_compat_translate_ioctl() for all
> > > non-handled ioctls. The compat layer is thus used. It seems the problem
> > > comes from a required v4l1 ioctl not handled properly by the compat
> > > layer. I haven't looked into that issue, as I don't plan to support v4l1
> > > explicitly in the driver.
> >
> > as for my drivers I always saw this as an open issue too, there is no
> > reason to not add support for it at least, it just requires a few more
> > ioctl controls.
>
> Applications should be ported to v4l2. It's difficult to push application
> developers to port their software if everything is still completely v4l1
> compatible.
>

should yes but it's not so much work to add v4l1 compatibilty support

> > > > 3.) Some controls are missing, for example mplayer isn't supported by
> > > > just running
> > > > mplayer -tv driver=v4l2 tv://
> > >
> > > mplayer is buggy. It doesn't set the v4l2_buffer.memory field prior to
> > > dequeuing buffers, as required by the v4l2 specification. I think a
> patch
> > > has
> > > been applied to the mplayer repository to fix this issue.
> >
> > I see xawtv doesn't work either here, the em28xx driver works with
> > both without the need of any patches. xawtv is used as a reference for
> > some other userspace applications since it has been available for a
> > very long time already.
>
> xawtv is buggy too, unfortunately. Many drivers don't check the
> v4l2_buffer.memory field when handling VIDIOC_DQBUF, which leads to buggy
> applications being undetected. We should either fix all drivers to check the
> memory field, or change the v4l2 spec to remove the requirement.
>

The v4l2 specs are drafted, in that case it's better to fix the
uvcvideo driver and correct the specs if you want to get it work.
If you see a serious problem in that i'd be curious to know about it,
I haven't experienced any problems with the em28xx nor other drivers.

> > > > 4.) read() isn't supported
> > >
> > > That's right, and this is definitely a shortcomming. I plan to support
> > > read(),
> > > but this hasn't been done yet. If you need read() support for a specific
> > > application, we could work together to add it to the driver as quickly
> as
> > > possible.
> > >
> > > > 5.) I'd like to share common code between usb video devices, the
> > > > em28xx driver supports slicing the video and piping a part of the
> > > > video to /dev/vbi for example (raw vbi).
> > > > 6.) Mauro also wrote some ideas about having a general usb framework
> > > > since all devices share common parts.
> > > >
> > > > these points would be part of the agenda which I'd like to discuss
> > > > with you and Mauro actually.
> > >
> > > I plan to see if I can use video-buf in the Linux UVC driver. However,
> > > this might not be beneficial to all users. The buffer queue code in the
> > > UVC driver
> > > is USB-specific, and is thus smaller than video-buf. Users who currently
> > > don't use video-buf would see their memory usage grow.
> > >
> > > Laurent Pinchart
> >
> > (I'll answer the other issues later)
>
> Laurent Pinchart
>


-- 
Markus Rechberger
-------------- next part --------------
A non-text attachment was scrubbed...
Name: uvc.log
Type: text/x-log
Size: 17386 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070506/bbc64481/attachment.bin>

From laurent.pinchart at skynet.be  Sun May  6 18:33:04 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 6 May 2007 18:33:04 +0200
Subject: [Linux-uvc-devel] Fwd: Orbicam - 046d:09b0 Logitech, Inc
In-Reply-To: <565389770705060844hde8f58v13ba7e8adbeba7b3@mail.gmail.com>
References: <mailman.5541.1178465928.5173.linux-uvc-devel@lists.berlios.de>
	<565389770705060844hde8f58v13ba7e8adbeba7b3@mail.gmail.com>
Message-ID: <200705061833.04844.laurent.pinchart@skynet.be>

Hi Domi,

> Hello, I have Acer Aspire 5635 WLMI with webcam Orbicam.
>
> This model is 046d:09b0 Logitech, Inc.
> This model not support for gspca driver.
> I have tried to use uvcvideo driver but it produce segment fail
>
> Can you help me?

You downloaded an experimental driver version which is not stable yet. Please 
get the driver code from the SVN trunk at

http://svn.berlios.de/svnroot/repos/linux-uvc/linux-uvc/trunk/

If it still crashes, I'll look into the issue.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun May  6 18:53:34 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 6 May 2007 18:53:34 +0200
Subject: [Linux-uvc-devel] Issues with the Linux UVC driver (Was "Where
	is V4L headed ?")
In-Reply-To: <d9def9db0705060930u6b4213b7q9c9c4e4ff0c6d78a@mail.gmail.com>
References: <200705041501.16398.laurent.pinchart@skynet.be>
	<200705061759.45265.laurent.pinchart@skynet.be>
	<d9def9db0705060930u6b4213b7q9c9c4e4ff0c6d78a@mail.gmail.com>
Message-ID: <200705061853.34557.laurent.pinchart@skynet.be>

On Sunday 06 May 2007, Markus Rechberger wrote:
> On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > On Sunday 06 May 2007, Markus Rechberger wrote:
> > > On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > > > Let's move this discussion to the linux-uvc-devel list. I CCed
> > > > video4linux-list for reference, please reply to linux-uvc-devel only
> > > > to avoid
> > > > flooding the video4linux list.
> > > >
> > > > On Saturday 05 May 2007, Markus Rechberger wrote:
> > > >
> > > > [snip non-uvc issues]
> > > >
> > > > > I'll just write all my considerations here, you can put the ML into
> > > > > CC and/or split up the topics:
> > > > >
> > > > > 1.)
> > > > > May  5 20:14:19 debian kernel: ekiga: page allocation failure.
> > > > > order:10, mode:0x0
> > > > > May  5 20:14:19 debian kernel:  [__alloc_pages+629/646]
> > > > > __alloc_pages+0x275/0x286
> > > > > May  5 20:14:19 debian kernel:  [__get_free_pages+26/51]
> > > > > __get_free_pages+0x1a/0x33
> > > > > May  5 20:14:19 debian kernel:  [dma_alloc_coherent+170/222]
> > > > > dma_alloc_coherent+0xaa/0xde
> > > > > May  5 20:14:19 debian kernel:  [pg0+513461816/1069679616]
> > > > > uvc_init_video_bulk+0xb7/0x143 [uvcvideo]
> > > > > May  5 20:14:19 debian kernel:  [pg0+513462425/1069679616]
> > > > > uvc_video_enable+0xfe/0x121 [uvcvideo]
> > > > > May  5 20:14:19 debian kernel:  [pg0+513458219/1069679616]
> > > > > uvc_v4l2_do_ioctl+0x830/0x8bf [uvcvideo]
> > > > > May  5 20:14:19 debian kernel:  [dput+24/373] dput+0x18/0x175
> > > > > May  5 20:14:19 debian kernel:  [__link_path_walk+2824/3148]
> > > > > __link_path_walk+0xb08/0xc4c
> > > > > May  5 20:14:19 debian kernel:  [n_tty_receive_buf+3303/3378]
> > > > > n_tty_receive_buf+0xce7/0xd32
> > > > > May  5 20:14:19 debian kernel:  [get_page_from_freelist+635/798]
> > > > > get_page_from_freelist+0x27b/0x31e
> > > > > May  5 20:14:19 debian kernel:  [wakeup_kswapd+45/104]
> > > > > wakeup_kswapd+0x2d/0x68 May  5 20:14:19 debian kernel:
> > > > > [pg0+511673193/1069679616]
> > > > > video_usercopy+0x112/0x1a3 [videodev]
> > > > > May  5 20:14:19 debian kernel:  [vma_prio_tree_insert+23/42]
> > > > > vma_prio_tree_insert+0x17/0x2a
> > > > > May  5 20:14:19 debian kernel:  [vma_link+218/247]
> > > > > vma_link+0xda/0xf7 May  5 20:14:19 debian kernel: 
> > > > > [pg0+513458420/1069679616] uvc_v4l2_ioctl+0x3a/0x40 [uvcvideo]
> > > > > May  5 20:14:19 debian kernel:  [pg0+513456123/1069679616]
> > > > > uvc_v4l2_do_ioctl+0x0/0x8bf [uvcvideo]
> > > > > May  5 20:14:19 debian kernel:  [do_ioctl+76/98] do_ioctl+0x4c/0x62
> > > > > May  5 20:14:19 debian kernel:  [vfs_ioctl+583/602]
> > > > > vfs_ioctl+0x247/0x25a May  5 20:14:19 debian kernel:
> >
> > [sys_ioctl+51/76]
> >
> > > > > sys_ioctl+0x33/0x4c May  5 20:14:19 debian kernel:
> >
> > [syscall_call+7/11]
> >
> > > > > syscall_call+0x7/0xb May  5 20:14:19 debian kernel:
> > > > > =======================
> > > > > May  5 20:14:19 debian kernel: Mem-info:
> > > > > May  5 20:14:19 debian kernel: DMA per-cpu:
> > > > > May  5 20:14:19 debian kernel: CPU    0: Hot: hi:    0, btch:   1
> > > > > usd: 0   Cold: hi:    0, btch:   1 usd:   0
> > > > > May  5 20:14:19 debian kernel: Normal per-cpu:
> > > > > May  5 20:14:19 debian kernel: CPU    0: Hot: hi:  186, btch:  31
> > > > > usd: 13   Cold: hi:   62, btch:  15 usd:  51
> > > > > May  5 20:14:19 debian kernel: Active:93485 inactive:7268 dirty:0
> > > > > writeback:0 unstable:0 free:1171 slab:5255 mapped:15182
> > > > > pagetables:980 May  5 20:14:19 debian kernel: DMA free:1928kB
> > > > > min:92kB low:112kB high:136kB active:10716kB inactive:0kB
> > > > > present:16256kB
> > > > > pages_scanned:429 all_unreclaimable? no
> > > > > May  5 20:14:19 debian kernel: lowmem_reserve[]: 0 459
> > > > > May  5 20:14:19 debian kernel: Normal free:2756kB min:2692kB
> > > > > low:3364kB high:4036kB active:363224kB inactive:29072kB
> > > > > present:470284kB pages_scanned:291 all_unreclaimable? no
> > > > > May  5 20:14:19 debian kernel: lowmem_reserve[]: 0 0
> > > > > May  5 20:14:19 debian kernel: DMA: 4*4kB 1*8kB 1*16kB 1*32kB
> > > > > 1*64kB 0*128kB 1*256kB 1*512kB 1*1024kB 0*2048kB 0*4096kB = 1928kB
> > > > > May  5 20:14:19 debian kernel: Normal: 47*4kB 5*8kB 12*16kB 3*32kB
> > > > > 1*64kB 1*128kB 0*256kB 0*512kB 0*1024kB 1*2048kB 0*4096kB = 2756kB
> > > > > May  5 20:14:19 debian kernel: Swap cache: add 440134, delete
> > > > > 421407, find 136779/175577, race 0+0
> > > > > May  5 20:14:19 debian kernel: Free swap  = 455676kB
> > > > > May  5 20:14:19 debian kernel: Total swap = 976888kB
> > > > > May  5 20:14:19 debian kernel: Free swap:       455676kB
> > > > > May  5 20:14:19 debian kernel: 122592 pages of RAM
> > > > > May  5 20:14:19 debian kernel: 0 pages of HIGHMEM
> > > > > May  5 20:14:19 debian kernel: 1844 reserved pages
> > > > > May  5 20:14:19 debian kernel: 70305 pages shared
> > > > > May  5 20:14:19 debian kernel: 18727 pages swap cached
> > > > > May  5 20:14:19 debian kernel: 0 pages dirty
> > > > > May  5 20:14:19 debian kernel: 0 pages writeback
> > > > > May  5 20:14:19 debian kernel: 15182 pages mapped
> > > > > May  5 20:14:19 debian kernel: 5253 pages slab
> > > > > May  5 20:14:19 debian kernel: 980 pages pagetables
> > > > >
> > > > > This happens either if a box has 256 mb ram, or is almost out of
> > > > > physical memory.
> > > > > The other driver I have works properly with it. After a fresh
> > > > > reboot the uvcvideo driver seems to work for a while.
> > > >
> > > > Oh, an OOM issue.
> > > >
> > > > The driver allocates memory for bulk/isochronous transfers based on
> > > > two parameters. The first one is the maximum payload transfer size,
> > > > as reported by the device. I can't do much about that one. The second
> > > > one is the number of URBs allocated by the driver. This is currently
> > > > hardcoded to 5, but could be made configurable or could be computed
> > > > based on the maximum payload transfer size. I'll look into this
> > > > issue.
> > >
> > > this really seems to be an issue with usb_buffer_alloc() after that
> > > call fails the whole memory management goes dizzy.
> > > It tries to swap out almost all the physical memory hangs for a while
> > > and copies the swapped memory back to physical memory till it becomes
> > > normal again.
> > > I also see that more than half of the system memory is used as cache,
> > > since usb_buffer_alloc is called with GFP_KERNEL it might wait until
> > > some cache memory gets released for it. I added Greg to that mail
> > > since I think that he knows alot about the usb framework itself.
> >
> > If the system goes unstable when I try to request more than the available
> > memory, there's not much I can do about it. The driver fails gracefully
> > when memory allocation fails. I seriously doubt that the kernel memory
> > manager makes the system unstable when a driver tries to allocate a usb
> > buffer bigger than the available memory. Maybe you have an issue specific
> > to your system ? I'm not familiar with the memory allocator internals,
> > maybe Greg will be able to help.
>
> It is like I explained it above. The system becomes very slow because
> of moving almost everything to swap and copying it back to memory
> again.

Ok.

> > >  dwMaxVideoFrameBufferSize     2752512 (which is used for
> > > usb_buffer_alloc, seems to be too much already)
> >
> > The bulk buffers are allocated using dwMaxPayloadTransferSize.
> > Isochronous buffers are allocated using dwMaxVideoFrameSize, which is
> > clearly a bug. I'm working on a fix.
> >
> > The stack trace you posted shows your device uses bulk transfers. Could
> > you tell me how big dwMaxPayloadTransferSize is ? If the devices insists
> > on using
> > huge buffers, there's not much I can do about it.
>
> I simply wouldn't allocate that much memory for the urbs, this way
> seems to work reliable with the driver I have.
> I added some debug at the allocation it is 2.7 MB/URB

I suspect that the dwMaxPayloadTransferSize value is thus equal to 2752512 as 
well.

For bulk transfers, you are right, I could allocate smaller URBs. As bulk 
transfers are guaranteed, I can split payloads across multiple URBs. For 
isochronous transfers that won't be possible.

Thanks for reporting the problem, I can now work on a fix.

> > > I don't have a problem with that in my uvc driver since I only
> > > allocate memory for max. 640x480 and do not support a higher mode.
> >
> > The comparison is thus not fair, is it ?
>
> I explained it the wrong way, my driver allocates much less than your
> one for the URBs and it also works reliable when all the system memory
> is in use (system + cache)

OK.

> > > > Could you please post the output of lsusb -v (with usbutils 0.72 or
> > > > later) ? Thanks.
> > >
> > > (think that value was what you were looking for)
> >
> > I'm interested in the lsusb output as well (the dwMaxPayloadTransferSize
> > value
> > is also interesting and not reported by the usb descriptors).
>
> attached the uvc log.

Thanks.

> > > > > 2.) No v4l1 support using the compat layer
> > > > >
> > > > > I read some discussions about not supporting v4l1, as a point from
> > > > > the userside it simply has to work and there are still applications
> > > > > out there which only support v4l1, I read that a compat version of
> > > > > that driver is available but you don't want it in the main driver.
> > > >
> > > > The Linux UVC driver calls v4l_compat_translate_ioctl() for all
> > > > non-handled ioctls. The compat layer is thus used. It seems the
> > > > problem comes from a required v4l1 ioctl not handled properly by the
> > > > compat layer. I haven't looked into that issue, as I don't plan to
> > > > support v4l1 explicitly in the driver.
> > >
> > > as for my drivers I always saw this as an open issue too, there is no
> > > reason to not add support for it at least, it just requires a few more
> > > ioctl controls.
> >
> > Applications should be ported to v4l2. It's difficult to push application
> > developers to port their software if everything is still completely v4l1
> > compatible.
>
> should yes but it's not so much work to add v4l1 compatibilty support
>
> > > > > 3.) Some controls are missing, for example mplayer isn't supported
> > > > > by just running
> > > > > mplayer -tv driver=v4l2 tv://
> > > >
> > > > mplayer is buggy. It doesn't set the v4l2_buffer.memory field prior
> > > > to dequeuing buffers, as required by the v4l2 specification. I think
> > > > a patch has been applied to the mplayer repository to fix this issue.
> > >
> > > I see xawtv doesn't work either here, the em28xx driver works with
> > > both without the need of any patches. xawtv is used as a reference for
> > > some other userspace applications since it has been available for a
> > > very long time already.
> >
> > xawtv is buggy too, unfortunately. Many drivers don't check the
> > v4l2_buffer.memory field when handling VIDIOC_DQBUF, which leads to buggy
> > applications being undetected. We should either fix all drivers to check
> > the memory field, or change the v4l2 spec to remove the requirement.
>
> The v4l2 specs are drafted, in that case it's better to fix the
> uvcvideo driver and correct the specs if you want to get it work.
> If you see a serious problem in that i'd be curious to know about it,
> I haven't experienced any problems with the em28xx nor other drivers.

Sam Revitch e-mailed the video4linux-list on May the 1st ("VIDIOC_DQBUF and 
v4l2_buffer.memory"). He explained the issue quite clearly, but nobody 
answered him.

> > > > > 4.) read() isn't supported
> > > >
> > > > That's right, and this is definitely a shortcomming. I plan to
> > > > support read(),
> > > > but this hasn't been done yet. If you need read() support for a
> > > > specific application, we could work together to add it to the driver
> > > > as quickly as possible.
> > > >
> > > > > 5.) I'd like to share common code between usb video devices, the
> > > > > em28xx driver supports slicing the video and piping a part of the
> > > > > video to /dev/vbi for example (raw vbi).
> > > > > 6.) Mauro also wrote some ideas about having a general usb
> > > > > framework since all devices share common parts.
> > > > >
> > > > > these points would be part of the agenda which I'd like to discuss
> > > > > with you and Mauro actually.
> > > >
> > > > I plan to see if I can use video-buf in the Linux UVC driver.
> > > > However, this might not be beneficial to all users. The buffer queue
> > > > code in the UVC driver
> > > > is USB-specific, and is thus smaller than video-buf. Users who
> > > > currently don't use video-buf would see their memory usage grow.
> > > >
> > > > Laurent Pinchart
> > >
> > > (I'll answer the other issues later)

Laurent Pinchart


From mrechberger at gmail.com  Sun May  6 19:26:13 2007
From: mrechberger at gmail.com (Markus Rechberger)
Date: Sun, 6 May 2007 19:26:13 +0200
Subject: [Linux-uvc-devel] Issues with the Linux UVC driver (Was "Where
	is V4L headed ?")
In-Reply-To: <200705061853.34557.laurent.pinchart@skynet.be>
References: <200705041501.16398.laurent.pinchart@skynet.be>
	<200705061759.45265.laurent.pinchart@skynet.be>
	<d9def9db0705060930u6b4213b7q9c9c4e4ff0c6d78a@mail.gmail.com>
	<200705061853.34557.laurent.pinchart@skynet.be>
Message-ID: <d9def9db0705061026y3b560bf9t3828043758d38acf@mail.gmail.com>

On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> On Sunday 06 May 2007, Markus Rechberger wrote:
> > On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > > On Sunday 06 May 2007, Markus Rechberger wrote:
> > > > On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > > > > Let's move this discussion to the linux-uvc-devel list. I CCed
> > > > > video4linux-list for reference, please reply to linux-uvc-devel only
> > > > > to avoid
> > > > > flooding the video4linux list.
> > > > >
> > > > > On Saturday 05 May 2007, Markus Rechberger wrote:
> > > > >
> > > > > [snip non-uvc issues]
> > > > >
> > > > > > I'll just write all my considerations here, you can put the ML
> into
> > > > > > CC and/or split up the topics:
> > > > > >
> > > > > > 1.)
> > > > > > May  5 20:14:19 debian kernel: ekiga: page allocation failure.
> > > > > > order:10, mode:0x0
> > > > > > May  5 20:14:19 debian kernel:  [__alloc_pages+629/646]
> > > > > > __alloc_pages+0x275/0x286
> > > > > > May  5 20:14:19 debian kernel:  [__get_free_pages+26/51]
> > > > > > __get_free_pages+0x1a/0x33
> > > > > > May  5 20:14:19 debian kernel:  [dma_alloc_coherent+170/222]
> > > > > > dma_alloc_coherent+0xaa/0xde
> > > > > > May  5 20:14:19 debian kernel:  [pg0+513461816/1069679616]
> > > > > > uvc_init_video_bulk+0xb7/0x143 [uvcvideo]
> > > > > > May  5 20:14:19 debian kernel:  [pg0+513462425/1069679616]
> > > > > > uvc_video_enable+0xfe/0x121 [uvcvideo]
> > > > > > May  5 20:14:19 debian kernel:  [pg0+513458219/1069679616]
> > > > > > uvc_v4l2_do_ioctl+0x830/0x8bf [uvcvideo]
> > > > > > May  5 20:14:19 debian kernel:  [dput+24/373] dput+0x18/0x175
> > > > > > May  5 20:14:19 debian kernel:  [__link_path_walk+2824/3148]
> > > > > > __link_path_walk+0xb08/0xc4c
> > > > > > May  5 20:14:19 debian kernel:  [n_tty_receive_buf+3303/3378]
> > > > > > n_tty_receive_buf+0xce7/0xd32
> > > > > > May  5 20:14:19 debian kernel:  [get_page_from_freelist+635/798]
> > > > > > get_page_from_freelist+0x27b/0x31e
> > > > > > May  5 20:14:19 debian kernel:  [wakeup_kswapd+45/104]
> > > > > > wakeup_kswapd+0x2d/0x68 May  5 20:14:19 debian kernel:
> > > > > > [pg0+511673193/1069679616]
> > > > > > video_usercopy+0x112/0x1a3 [videodev]
> > > > > > May  5 20:14:19 debian kernel:  [vma_prio_tree_insert+23/42]
> > > > > > vma_prio_tree_insert+0x17/0x2a
> > > > > > May  5 20:14:19 debian kernel:  [vma_link+218/247]
> > > > > > vma_link+0xda/0xf7 May  5 20:14:19 debian kernel:
> > > > > > [pg0+513458420/1069679616] uvc_v4l2_ioctl+0x3a/0x40 [uvcvideo]
> > > > > > May  5 20:14:19 debian kernel:  [pg0+513456123/1069679616]
> > > > > > uvc_v4l2_do_ioctl+0x0/0x8bf [uvcvideo]
> > > > > > May  5 20:14:19 debian kernel:  [do_ioctl+76/98]
> do_ioctl+0x4c/0x62
> > > > > > May  5 20:14:19 debian kernel:  [vfs_ioctl+583/602]
> > > > > > vfs_ioctl+0x247/0x25a May  5 20:14:19 debian kernel:
> > >
> > > [sys_ioctl+51/76]
> > >
> > > > > > sys_ioctl+0x33/0x4c May  5 20:14:19 debian kernel:
> > >
> > > [syscall_call+7/11]
> > >
> > > > > > syscall_call+0x7/0xb May  5 20:14:19 debian kernel:
> > > > > > =======================
> > > > > > May  5 20:14:19 debian kernel: Mem-info:
> > > > > > May  5 20:14:19 debian kernel: DMA per-cpu:
> > > > > > May  5 20:14:19 debian kernel: CPU    0: Hot: hi:    0, btch:   1
> > > > > > usd: 0   Cold: hi:    0, btch:   1 usd:   0
> > > > > > May  5 20:14:19 debian kernel: Normal per-cpu:
> > > > > > May  5 20:14:19 debian kernel: CPU    0: Hot: hi:  186, btch:  31
> > > > > > usd: 13   Cold: hi:   62, btch:  15 usd:  51
> > > > > > May  5 20:14:19 debian kernel: Active:93485 inactive:7268 dirty:0
> > > > > > writeback:0 unstable:0 free:1171 slab:5255 mapped:15182
> > > > > > pagetables:980 May  5 20:14:19 debian kernel: DMA free:1928kB
> > > > > > min:92kB low:112kB high:136kB active:10716kB inactive:0kB
> > > > > > present:16256kB
> > > > > > pages_scanned:429 all_unreclaimable? no
> > > > > > May  5 20:14:19 debian kernel: lowmem_reserve[]: 0 459
> > > > > > May  5 20:14:19 debian kernel: Normal free:2756kB min:2692kB
> > > > > > low:3364kB high:4036kB active:363224kB inactive:29072kB
> > > > > > present:470284kB pages_scanned:291 all_unreclaimable? no
> > > > > > May  5 20:14:19 debian kernel: lowmem_reserve[]: 0 0
> > > > > > May  5 20:14:19 debian kernel: DMA: 4*4kB 1*8kB 1*16kB 1*32kB
> > > > > > 1*64kB 0*128kB 1*256kB 1*512kB 1*1024kB 0*2048kB 0*4096kB = 1928kB
> > > > > > May  5 20:14:19 debian kernel: Normal: 47*4kB 5*8kB 12*16kB 3*32kB
> > > > > > 1*64kB 1*128kB 0*256kB 0*512kB 0*1024kB 1*2048kB 0*4096kB = 2756kB
> > > > > > May  5 20:14:19 debian kernel: Swap cache: add 440134, delete
> > > > > > 421407, find 136779/175577, race 0+0
> > > > > > May  5 20:14:19 debian kernel: Free swap  = 455676kB
> > > > > > May  5 20:14:19 debian kernel: Total swap = 976888kB
> > > > > > May  5 20:14:19 debian kernel: Free swap:       455676kB
> > > > > > May  5 20:14:19 debian kernel: 122592 pages of RAM
> > > > > > May  5 20:14:19 debian kernel: 0 pages of HIGHMEM
> > > > > > May  5 20:14:19 debian kernel: 1844 reserved pages
> > > > > > May  5 20:14:19 debian kernel: 70305 pages shared
> > > > > > May  5 20:14:19 debian kernel: 18727 pages swap cached
> > > > > > May  5 20:14:19 debian kernel: 0 pages dirty
> > > > > > May  5 20:14:19 debian kernel: 0 pages writeback
> > > > > > May  5 20:14:19 debian kernel: 15182 pages mapped
> > > > > > May  5 20:14:19 debian kernel: 5253 pages slab
> > > > > > May  5 20:14:19 debian kernel: 980 pages pagetables
> > > > > >
> > > > > > This happens either if a box has 256 mb ram, or is almost out of
> > > > > > physical memory.
> > > > > > The other driver I have works properly with it. After a fresh
> > > > > > reboot the uvcvideo driver seems to work for a while.
> > > > >
> > > > > Oh, an OOM issue.
> > > > >
> > > > > The driver allocates memory for bulk/isochronous transfers based on
> > > > > two parameters. The first one is the maximum payload transfer size,
> > > > > as reported by the device. I can't do much about that one. The
> second
> > > > > one is the number of URBs allocated by the driver. This is currently
> > > > > hardcoded to 5, but could be made configurable or could be computed
> > > > > based on the maximum payload transfer size. I'll look into this
> > > > > issue.
> > > >
> > > > this really seems to be an issue with usb_buffer_alloc() after that
> > > > call fails the whole memory management goes dizzy.
> > > > It tries to swap out almost all the physical memory hangs for a while
> > > > and copies the swapped memory back to physical memory till it becomes
> > > > normal again.
> > > > I also see that more than half of the system memory is used as cache,
> > > > since usb_buffer_alloc is called with GFP_KERNEL it might wait until
> > > > some cache memory gets released for it. I added Greg to that mail
> > > > since I think that he knows alot about the usb framework itself.
> > >
> > > If the system goes unstable when I try to request more than the
> available
> > > memory, there's not much I can do about it. The driver fails gracefully
> > > when memory allocation fails. I seriously doubt that the kernel memory
> > > manager makes the system unstable when a driver tries to allocate a usb
> > > buffer bigger than the available memory. Maybe you have an issue
> specific
> > > to your system ? I'm not familiar with the memory allocator internals,
> > > maybe Greg will be able to help.
> >
> > It is like I explained it above. The system becomes very slow because
> > of moving almost everything to swap and copying it back to memory
> > again.
>
> Ok.
>
> > > >  dwMaxVideoFrameBufferSize     2752512 (which is used for
> > > > usb_buffer_alloc, seems to be too much already)
> > >
> > > The bulk buffers are allocated using dwMaxPayloadTransferSize.
> > > Isochronous buffers are allocated using dwMaxVideoFrameSize, which is
> > > clearly a bug. I'm working on a fix.
> > >
> > > The stack trace you posted shows your device uses bulk transfers. Could
> > > you tell me how big dwMaxPayloadTransferSize is ? If the devices insists
> > > on using
> > > huge buffers, there's not much I can do about it.
> >
> > I simply wouldn't allocate that much memory for the urbs, this way
> > seems to work reliable with the driver I have.
> > I added some debug at the allocation it is 2.7 MB/URB
>
> I suspect that the dwMaxPayloadTransferSize value is thus equal to 2752512
> as
> well.
>
> For bulk transfers, you are right, I could allocate smaller URBs. As bulk
> transfers are guaranteed, I can split payloads across multiple URBs. For
> isochronous transfers that won't be possible.
>

it is also possible for isochronous transfers, if the framebuffer
doesn't get fully filled just drop the frame.
By experience this works very well with em28xx based devices.

> Thanks for reporting the problem, I can now work on a fix.
>
> > > > I don't have a problem with that in my uvc driver since I only
> > > > allocate memory for max. 640x480 and do not support a higher mode.
> > >
> > > The comparison is thus not fair, is it ?
> >
> > I explained it the wrong way, my driver allocates much less than your
> > one for the URBs and it also works reliable when all the system memory
> > is in use (system + cache)
>
> OK.
>
> > > > > Could you please post the output of lsusb -v (with usbutils 0.72 or
> > > > > later) ? Thanks.
> > > >
> > > > (think that value was what you were looking for)
> > >
> > > I'm interested in the lsusb output as well (the dwMaxPayloadTransferSize
> > > value
> > > is also interesting and not reported by the usb descriptors).
> >
> > attached the uvc log.
>
> Thanks.
>
> > > > > > 2.) No v4l1 support using the compat layer
> > > > > >
> > > > > > I read some discussions about not supporting v4l1, as a point from
> > > > > > the userside it simply has to work and there are still
> applications
> > > > > > out there which only support v4l1, I read that a compat version of
> > > > > > that driver is available but you don't want it in the main driver.
> > > > >
> > > > > The Linux UVC driver calls v4l_compat_translate_ioctl() for all
> > > > > non-handled ioctls. The compat layer is thus used. It seems the
> > > > > problem comes from a required v4l1 ioctl not handled properly by the
> > > > > compat layer. I haven't looked into that issue, as I don't plan to
> > > > > support v4l1 explicitly in the driver.
> > > >
> > > > as for my drivers I always saw this as an open issue too, there is no
> > > > reason to not add support for it at least, it just requires a few more
> > > > ioctl controls.
> > >
> > > Applications should be ported to v4l2. It's difficult to push
> application
> > > developers to port their software if everything is still completely v4l1
> > > compatible.
> >
> > should yes but it's not so much work to add v4l1 compatibilty support
> >
> > > > > > 3.) Some controls are missing, for example mplayer isn't supported
> > > > > > by just running
> > > > > > mplayer -tv driver=v4l2 tv://
> > > > >
> > > > > mplayer is buggy. It doesn't set the v4l2_buffer.memory field prior
> > > > > to dequeuing buffers, as required by the v4l2 specification. I think
> > > > > a patch has been applied to the mplayer repository to fix this
> issue.
> > > >
> > > > I see xawtv doesn't work either here, the em28xx driver works with
> > > > both without the need of any patches. xawtv is used as a reference for
> > > > some other userspace applications since it has been available for a
> > > > very long time already.
> > >
> > > xawtv is buggy too, unfortunately. Many drivers don't check the
> > > v4l2_buffer.memory field when handling VIDIOC_DQBUF, which leads to
> buggy
> > > applications being undetected. We should either fix all drivers to check
> > > the memory field, or change the v4l2 spec to remove the requirement.
> >
> > The v4l2 specs are drafted, in that case it's better to fix the
> > uvcvideo driver and correct the specs if you want to get it work.
> > If you see a serious problem in that i'd be curious to know about it,
> > I haven't experienced any problems with the em28xx nor other drivers.
>
> Sam Revitch e-mailed the video4linux-list on May the 1st ("VIDIOC_DQBUF and
> v4l2_buffer.memory"). He explained the issue quite clearly, but nobody
> answered him.
>

ah fine I'll read it when I'm back

Markus

> > > > > > 4.) read() isn't supported
> > > > >
> > > > > That's right, and this is definitely a shortcomming. I plan to
> > > > > support read(),
> > > > > but this hasn't been done yet. If you need read() support for a
> > > > > specific application, we could work together to add it to the driver
> > > > > as quickly as possible.
> > > > >
> > > > > > 5.) I'd like to share common code between usb video devices, the
> > > > > > em28xx driver supports slicing the video and piping a part of the
> > > > > > video to /dev/vbi for example (raw vbi).
> > > > > > 6.) Mauro also wrote some ideas about having a general usb
> > > > > > framework since all devices share common parts.
> > > > > >
> > > > > > these points would be part of the agenda which I'd like to discuss
> > > > > > with you and Mauro actually.
> > > > >
> > > > > I plan to see if I can use video-buf in the Linux UVC driver.
> > > > > However, this might not be beneficial to all users. The buffer queue
> > > > > code in the UVC driver
> > > > > is USB-specific, and is thus smaller than video-buf. Users who
> > > > > currently don't use video-buf would see their memory usage grow.
> > > > >
> > > > > Laurent Pinchart
> > > >
> > > > (I'll answer the other issues later)
>
> Laurent Pinchart
>


-- 
Markus Rechberger


From laurent.pinchart at skynet.be  Sun May  6 21:59:33 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 6 May 2007 21:59:33 +0200
Subject: [Linux-uvc-devel] Issues with the Linux UVC driver (Was "Where
	is V4L headed ?")
In-Reply-To: <d9def9db0705061026y3b560bf9t3828043758d38acf@mail.gmail.com>
References: <200705041501.16398.laurent.pinchart@skynet.be>
	<200705061853.34557.laurent.pinchart@skynet.be>
	<d9def9db0705061026y3b560bf9t3828043758d38acf@mail.gmail.com>
Message-ID: <200705062159.34917.laurent.pinchart@skynet.be>

On Sunday 06 May 2007, Markus Rechberger wrote:
[snip]
> On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > On Sunday 06 May 2007, Markus Rechberger wrote:
> > > On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > > > On Sunday 06 May 2007, Markus Rechberger wrote:
> > > > > On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > > > >  dwMaxVideoFrameBufferSize     2752512 (which is used for
> > > > > usb_buffer_alloc, seems to be too much already)
> > > >
> > > > The bulk buffers are allocated using dwMaxPayloadTransferSize.
> > > > Isochronous buffers are allocated using dwMaxVideoFrameSize, which is
> > > > clearly a bug. I'm working on a fix.
> > > >
> > > > The stack trace you posted shows your device uses bulk transfers.
> > > > Could you tell me how big dwMaxPayloadTransferSize is ? If the
> > > > devices insists on using
> > > > huge buffers, there's not much I can do about it.
> > >
> > > I simply wouldn't allocate that much memory for the urbs, this way
> > > seems to work reliable with the driver I have.
> > > I added some debug at the allocation it is 2.7 MB/URB
> >
> > I suspect that the dwMaxPayloadTransferSize value is thus equal to
> > 2752512 as
> > well.
> >
> > For bulk transfers, you are right, I could allocate smaller URBs. As bulk
> > transfers are guaranteed, I can split payloads across multiple URBs. For
> > isochronous transfers that won't be possible.
>
> it is also possible for isochronous transfers, if the framebuffer
> doesn't get fully filled just drop the frame. By experience this works very
> well with em28xx based devices. 

After having a closer look at the spec, isochronous transfers won't be an 
issue. Each isochronous packet starts with a UVC header. I already submit 
isochronous URBs of no more than 40 packets.

For bulk transfers, the situation seems a little more complex than I thought. 
Bulk payloads can be made of lots of packets, up to a whole frame per 
payload. The maximum payload size is reported by the device. As the device 
sends a header for each payload and not for each URB, I have to find a way 
detect payload boundaries (keep in mind that payloads can have a variable 
size).

When using payload-sized URBs, each URB will contain a single payload. This is 
what the Linux UVC driver currently does, and it works fine as long as the 
device doesn't have a payload size bigger than what the host can allocate.

When splitting payloads across multiple URBs, I need another way to detect 
payload boundaries. As the payload size isn't known in advance (only the 
maximum size is known), I can't rely on a byte count. A possible solution 
would have been to detect URBs with an actual length smaller than the 
transfer buffer length, as such URBs should indicate the end of a payload. 
Unfortunately, this won't work as the payload size can be an exact multiple 
of the URB size.

Can you think of a way to detect payload boundaries properly when splitting 
payloads across multiple URBs ?

[snip]

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun May  6 22:10:25 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 6 May 2007 22:10:25 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS 37
In-Reply-To: <20070506133107.36a5a5a9@frodo.mittelerde>
References: <20070501011150.01e3bf43@frodo.mittelerde>
	<200705061218.12887.laurent.pinchart@skynet.be>
	<20070506133107.36a5a5a9@frodo.mittelerde>
Message-ID: <200705062210.25238.laurent.pinchart@skynet.be>

Hi Andreas,

On Sunday 06 May 2007, Andreas Volz wrote:
> Am Sun, 6 May 2007 12:18:12 +0200 schrieb Laurent Pinchart:
> > On Saturday 05 May 2007, Andreas Volz wrote:
> > > Am Sat, 5 May 2007 21:22:22 +0200 schrieb Laurent Pinchart:
> > > > could you please set the trace parameter to 65535 with
> > > >
> > > > modprobe uvcvideo trace=65535
> > > >
> > > > or
> > > >
> > > > echo 65535 > /sys/modules/uvcvideo/parameters/trace
> > > >
> > > > then plug your camcorder and send me the dmesg output ?
> > >
> > > I know berlios often delete attachments. So I put it there:
> > >
> > > http://tux-style.de/tmp/dmesg_uvc.txt
> > >
> > > I did several plug/unplug actions in DV and webcam mode.
> >
> > Thanks a lot. Could you perform the same operation after applying the
> > attached patch to the latest driver (revision 102) ?
>
> Cool, you're really fast!

I would have been even faster if the sunny weather hadn't convinced me to go 
biking today :-)

> Here is the new dmesg:
>
> http://tux-style.de/tmp/dmesg_patch_applied.txt
>
> Now in webcam mode the lucview tool found a /dev/video0 device, but
> exits just after showing a window for a second.
>
> Here is the output:
>
> luvcview version 0.2.0
> Video driver: x11
> A window manager is available
> video /dev/video0
> Unable to start capture: 38.
> Error grabbing
>  Clean Up done Quit
>
> Here is the strace output:
>
> http://tux-style.de/tmp/lucview.strace

Are you using a USB 1.1 device behind a hub ? Error 38 is ENOSYS, and the only 
occurrence of that error in the USB stack code seems to be related to split 
isochronous transfers. Can you connect the camera directly to the computer if 
you're using a hub, or turn on CONFIG_USB_EHCI_SPLIT_ISO ("Full speed ISO 
transactions") in your kernel ?

There is no point in testing dv mode, only webcam mode will work for now. We 
will try dv mode after being done with webcam mode.

Best regards,

Laurent Pinchart


From domijor at gmail.com  Sun May  6 23:28:27 2007
From: domijor at gmail.com (Domijor)
Date: Sun, 6 May 2007 22:28:27 +0100
Subject: [Linux-uvc-devel] Fwd: Orbicam - 046d:09b0 Logitech, Inc
Message-ID: <565389770705061428i354af273qcffa3e6fd4cc33d8@mail.gmail.com>

I downloaded driver trunk.

# make
Building USB Video Class driver...
make[1]: se ingresa al directorio `/usr/src/linux-headers-2.6.18-4-686'
  Building modules, stage 2.
  MODPOST
make[1]: se sale del directorio `/usr/src/linux-headers-2.6.18-4-686'

# make install
Installing USB Video Class driver...
make[1]: se ingresa al directorio `/usr/src/linux-headers-2.6.18-4-686'
  INSTALL /home/domi/Desktop/webcam/linux-uvc-trunk/uvcvideo.ko
  DEPMOD  2.6.18-4-686
make[1]: se sale del directorio `/usr/src/linux-headers-2.6.18-4-686'
depmod -ae

# modprobe uvcvideo

# lsmod |grep uvcvideo
uvcvideo               37156  0
compat_ioctl32          1472  1 uvcvideo
videodev               21120  1 uvcvideo
v4l1_compat            12036  2 uvcvideo,videodev
v4l2_common            20448  2 uvcvideo,videodev
usbcore               112644  5 uvcvideo,usbhid,ehci_hcd,uhci_hcd

# dmesg | tail
Nothing new.

The experimental driver showed:
uvcvideo: Found UVC 1.00 device <unnamed> (046d:09b0)
usbcore: registered new driver uvcvideo
USB Video Class driver (v0.1.0)

Trunk driver Nothing show.


# ll /dev/video0
crw-rw---- 1 root video 81, 0 2007-05-06 22:43 /dev/video0

# chmod a+r /dev/video0

# ll /dev/video0
crw-rw-r-- 1 root video 81, 0 2007-05-06 22:43 /dev/video0

$ camorama

Windows error: Could not connect to video device (/dev/video0). Please check
connection.

My english is bad. Sorry.

Any idea?

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070506/ed0472b2/attachment.html>

From laurent.pinchart at skynet.be  Sun May  6 23:33:53 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 6 May 2007 23:33:53 +0200
Subject: [Linux-uvc-devel] Issues with the Linux UVC driver (Was "Where
	is V4L headed ?")
In-Reply-To: <200705062159.34917.laurent.pinchart@skynet.be>
References: <200705041501.16398.laurent.pinchart@skynet.be>
	<d9def9db0705061026y3b560bf9t3828043758d38acf@mail.gmail.com>
	<200705062159.34917.laurent.pinchart@skynet.be>
Message-ID: <200705062333.53813.laurent.pinchart@skynet.be>

On Sunday 06 May 2007, Laurent Pinchart wrote:
> On Sunday 06 May 2007, Markus Rechberger wrote:
> [snip]
>
> > On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > > On Sunday 06 May 2007, Markus Rechberger wrote:
> > > > On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > > > > On Sunday 06 May 2007, Markus Rechberger wrote:
> > > > > > On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > > > > >  dwMaxVideoFrameBufferSize     2752512 (which is used for
> > > > > > usb_buffer_alloc, seems to be too much already)
> > > > >
> > > > > The bulk buffers are allocated using dwMaxPayloadTransferSize.
> > > > > Isochronous buffers are allocated using dwMaxVideoFrameSize, which
> > > > > is clearly a bug. I'm working on a fix.
> > > > >
> > > > > The stack trace you posted shows your device uses bulk transfers.
> > > > > Could you tell me how big dwMaxPayloadTransferSize is ? If the
> > > > > devices insists on using
> > > > > huge buffers, there's not much I can do about it.
> > > >
> > > > I simply wouldn't allocate that much memory for the urbs, this way
> > > > seems to work reliable with the driver I have.
> > > > I added some debug at the allocation it is 2.7 MB/URB
> > >
> > > I suspect that the dwMaxPayloadTransferSize value is thus equal to
> > > 2752512 as
> > > well.
> > >
> > > For bulk transfers, you are right, I could allocate smaller URBs. As
> > > bulk transfers are guaranteed, I can split payloads across multiple
> > > URBs. For isochronous transfers that won't be possible.
> >
> > it is also possible for isochronous transfers, if the framebuffer
> > doesn't get fully filled just drop the frame. By experience this works
> > very well with em28xx based devices.
>
> After having a closer look at the spec, isochronous transfers won't be an
> issue. Each isochronous packet starts with a UVC header. I already submit
> isochronous URBs of no more than 40 packets.
>
> For bulk transfers, the situation seems a little more complex than I
> thought. Bulk payloads can be made of lots of packets, up to a whole frame
> per payload. The maximum payload size is reported by the device. As the
> device sends a header for each payload and not for each URB, I have to find
> a way detect payload boundaries (keep in mind that payloads can have a
> variable size).
>
> When using payload-sized URBs, each URB will contain a single payload. This
> is what the Linux UVC driver currently does, and it works fine as long as
> the device doesn't have a payload size bigger than what the host can
> allocate.
>
> When splitting payloads across multiple URBs, I need another way to detect
> payload boundaries. As the payload size isn't known in advance (only the
> maximum size is known), I can't rely on a byte count. A possible solution
> would have been to detect URBs with an actual length smaller than the
> transfer buffer length, as such URBs should indicate the end of a payload.
> Unfortunately, this won't work as the payload size can be an exact multiple
> of the URB size.
>
> Can you think of a way to detect payload boundaries properly when splitting
> payloads across multiple URBs ?

Maybe I overlooked the problem. The device will send a zero-byte data packet 
to indicate the end of the payload. I somehow thought this wouldn't show in 
the URBs, but I'm not so sure about it. I know Linux will use the zero-byte 
data packet to detect the end of the bulk transfer, but will the USB stack 
return a zero-sized URB if the bulk transfer ends on a URB boundary ? I can't 
test that on the bulk device I have, as its payload size is not a multiple of 
the bulk packet size.

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun May  6 23:37:34 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 6 May 2007 23:37:34 +0200
Subject: [Linux-uvc-devel] Fwd: Orbicam - 046d:09b0 Logitech, Inc
In-Reply-To: <565389770705061428i354af273qcffa3e6fd4cc33d8@mail.gmail.com>
References: <565389770705061428i354af273qcffa3e6fd4cc33d8@mail.gmail.com>
Message-ID: <200705062337.34639.laurent.pinchart@skynet.be>

Hi Domi,

> I downloaded driver trunk.
>
> # make
> Building USB Video Class driver...
> make[1]: se ingresa al directorio `/usr/src/linux-headers-2.6.18-4-686'
>   Building modules, stage 2.
>   MODPOST
> make[1]: se sale del directorio `/usr/src/linux-headers-2.6.18-4-686'
>
> # make install
> Installing USB Video Class driver...
> make[1]: se ingresa al directorio `/usr/src/linux-headers-2.6.18-4-686'
>   INSTALL /home/domi/Desktop/webcam/linux-uvc-trunk/uvcvideo.ko
>   DEPMOD  2.6.18-4-686
> make[1]: se sale del directorio `/usr/src/linux-headers-2.6.18-4-686'
> depmod -ae
>
> # modprobe uvcvideo
>
> # lsmod |grep uvcvideo
> uvcvideo               37156  0
> compat_ioctl32          1472  1 uvcvideo
> videodev               21120  1 uvcvideo
> v4l1_compat            12036  2 uvcvideo,videodev
> v4l2_common            20448  2 uvcvideo,videodev
> usbcore               112644  5 uvcvideo,usbhid,ehci_hcd,uhci_hcd
>
> # dmesg | tail
> Nothing new.
>
> The experimental driver showed:
> uvcvideo: Found UVC 1.00 device <unnamed> (046d:09b0)
> usbcore: registered new driver uvcvideo
> USB Video Class driver (v0.1.0)
>
> Trunk driver Nothing show.


It should print a message. Make sure you removed the old driver before loading 
the new one. You can raise the debug level with

modprobe uvcvideo trace=255

> # ll /dev/video0
> crw-rw---- 1 root video 81, 0 2007-05-06 22:43 /dev/video0
>
> # chmod a+r /dev/video0
>
> # ll /dev/video0
> crw-rw-r-- 1 root video 81, 0 2007-05-06 22:43 /dev/video0
>
> $ camorama
>
> Windows error: Could not connect to video device (/dev/video0). Please
> check connection.
>
> My english is bad. Sorry.
>
> Any idea?
>
> Thanks.

Cheers,

Laurent Pinchart


From mrechberger at gmail.com  Sun May  6 23:39:34 2007
From: mrechberger at gmail.com (Markus Rechberger)
Date: Sun, 6 May 2007 23:39:34 +0200
Subject: [Linux-uvc-devel] Issues with the Linux UVC driver (Was "Where
	is V4L headed ?")
In-Reply-To: <200705062333.53813.laurent.pinchart@skynet.be>
References: <200705041501.16398.laurent.pinchart@skynet.be>
	<d9def9db0705061026y3b560bf9t3828043758d38acf@mail.gmail.com>
	<200705062159.34917.laurent.pinchart@skynet.be>
	<200705062333.53813.laurent.pinchart@skynet.be>
Message-ID: <d9def9db0705061439u3a55edbn2dcbc7fd45d445ed@mail.gmail.com>

On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> On Sunday 06 May 2007, Laurent Pinchart wrote:
> > On Sunday 06 May 2007, Markus Rechberger wrote:
> > [snip]
> >
> > > On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > > > On Sunday 06 May 2007, Markus Rechberger wrote:
> > > > > On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > > > > > On Sunday 06 May 2007, Markus Rechberger wrote:
> > > > > > > On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > > > > > >  dwMaxVideoFrameBufferSize     2752512 (which is used for
> > > > > > > usb_buffer_alloc, seems to be too much already)
> > > > > >
> > > > > > The bulk buffers are allocated using dwMaxPayloadTransferSize.
> > > > > > Isochronous buffers are allocated using dwMaxVideoFrameSize, which
> > > > > > is clearly a bug. I'm working on a fix.
> > > > > >
> > > > > > The stack trace you posted shows your device uses bulk transfers.
> > > > > > Could you tell me how big dwMaxPayloadTransferSize is ? If the
> > > > > > devices insists on using
> > > > > > huge buffers, there's not much I can do about it.
> > > > >
> > > > > I simply wouldn't allocate that much memory for the urbs, this way
> > > > > seems to work reliable with the driver I have.
> > > > > I added some debug at the allocation it is 2.7 MB/URB
> > > >
> > > > I suspect that the dwMaxPayloadTransferSize value is thus equal to
> > > > 2752512 as
> > > > well.
> > > >
> > > > For bulk transfers, you are right, I could allocate smaller URBs. As
> > > > bulk transfers are guaranteed, I can split payloads across multiple
> > > > URBs. For isochronous transfers that won't be possible.
> > >
> > > it is also possible for isochronous transfers, if the framebuffer
> > > doesn't get fully filled just drop the frame. By experience this works
> > > very well with em28xx based devices.
> >
> > After having a closer look at the spec, isochronous transfers won't be an
> > issue. Each isochronous packet starts with a UVC header. I already submit
> > isochronous URBs of no more than 40 packets.
> >
> > For bulk transfers, the situation seems a little more complex than I
> > thought. Bulk payloads can be made of lots of packets, up to a whole frame
> > per payload. The maximum payload size is reported by the device. As the
> > device sends a header for each payload and not for each URB, I have to
> find
> > a way detect payload boundaries (keep in mind that payloads can have a
> > variable size).
> >
> > When using payload-sized URBs, each URB will contain a single payload.
> This
> > is what the Linux UVC driver currently does, and it works fine as long as
> > the device doesn't have a payload size bigger than what the host can
> > allocate.
> >
> > When splitting payloads across multiple URBs, I need another way to detect
> > payload boundaries. As the payload size isn't known in advance (only the
> > maximum size is known), I can't rely on a byte count. A possible solution
> > would have been to detect URBs with an actual length smaller than the
> > transfer buffer length, as such URBs should indicate the end of a payload.
> > Unfortunately, this won't work as the payload size can be an exact
> multiple
> > of the URB size.
> >
> > Can you think of a way to detect payload boundaries properly when
> splitting
> > payloads across multiple URBs ?
>
> Maybe I overlooked the problem. The device will send a zero-byte data packet
> to indicate the end of the payload. I somehow thought this wouldn't show in
> the URBs, but I'm not so sure about it. I know Linux will use the zero-byte
> data packet to detect the end of the bulk transfer, but will the USB stack
> return a zero-sized URB if the bulk transfer ends on a URB boundary ? I
> can't
> test that on the bulk device I have, as its payload size is not a multiple
> of
> the bulk packet size.

If possible if you redo that part, please try to reuse the code of the
data transfer code of the em28xx (or at least consider a similar way)
so that we can merge that codepart.

I defined the boundaries by looking at the packet size, there was no
packet which had the length 0, since I had to do a fast solution I
just looked at the packet size which was smaller than the average
packets, this indicated a new frame for me.
However this doesn't work well with 176x144 the driver cuts around 20
lines ontop of the video.
I'll also have a closer look at it tomorrow.
Regarding the specs every frame should start with some frameheaders.

Markus


From domijor at gmail.com  Mon May  7 00:30:05 2007
From: domijor at gmail.com (Domijor)
Date: Sun, 6 May 2007 23:30:05 +0100
Subject: [Linux-uvc-devel] Fwd: Orbicam - 046d:09b0 Logitech, Inc
In-Reply-To: <565389770705061502h6b8fe1a2o9505c6616e1157e5@mail.gmail.com>
References: <565389770705061428i354af273qcffa3e6fd4cc33d8@mail.gmail.com>
	<200705062337.34639.laurent.pinchart@skynet.be>
	<565389770705061502h6b8fe1a2o9505c6616e1157e5@mail.gmail.com>
Message-ID: <565389770705061530w2ef97b10p99cc87d470ec052e@mail.gmail.com>

Always I remove the old driver.
# rm /lib/modules/2.6.18-4-686/usb/media/uvcvideo.ko

Now show:

# rmmod uvcvideo
Show dmesg:  usbcore: deregistering driver uvcvideo

# modprobe uvcvideo trace=255

# dmesg | tail
uvcvideo: Adding mapping Brightness to control
00000000-0000-0000-0000-000000000101/2.
uvcvideo: Adding mapping Contrast to control
00000000-0000-0000-0000-000000000101/3.
uvcvideo: Adding mapping Hue to control
00000000-0000-0000-0000-000000000101/6.
uvcvideo: Adding mapping Saturation to control
00000000-0000-0000-0000-000000000101/7.
uvcvideo: Adding mapping Sharpness to control
00000000-0000-0000-0000-000000000101/8.
uvcvideo: Adding mapping Gamma to control
00000000-0000-0000-0000-000000000101/9.
uvcvideo: Adding mapping Backlight Compensation to control
00000000-0000-0000-0000-000000000101/1.
uvcvideo: Adding mapping Gain to control
00000000-0000-0000-0000-000000000101/4.
uvcvideo: Adding mapping Power Line Frequency to control
00000000-0000-0000-0000-000000000101/5.
uvcvideo: Adding mapping Hue, Auto to control
00000000-0000-0000-0000-000000000101/16.
uvcvideo: Adding mapping Pan (relative) to control
63610682-5070-49ab-b8cc-b3855e8d2256/1.
uvcvideo: Adding mapping Tilt (relative) to control
63610682-5070-49ab-b8cc-b3855e8d2256/1.
uvcvideo: Adding mapping Pan/Tilt (reset) to control
63610682-5070-49ab-b8cc-b3855e8d2256/2.
uvcvideo: Adding mapping Exposure, Auto to control
00000000-0000-0000-0000-000000000001/2.
uvcvideo: Adding mapping Exposure (Absolute) to control
00000000-0000-0000-0000-000000000001/4.
uvcvideo: Adding mapping White Balance Temperature, Auto to control
00000000-0000-0000-0000-000000000101/11.
uvcvideo: Adding mapping White Balance Temperature to control
00000000-0000-0000-0000-000000000101/10.
uvcvideo: Probing generic UVC device 4
uvcvideo: Found format Uncompressed.
uvcvideo: - 640x480 (15.0 fps)
uvcvideo: - 352x288 (30.0 fps)
uvcvideo: - 320x240 (30.0 fps)
uvcvideo: - 176x144 (30.0 fps)
uvcvideo: - 160x120 ( 30.0 fps)
uvcvideo: - 1280x960 (8.0 fps)
uvcvideo: - 1280x1024 (8.0 fps)
uvcvideo: Found a Status endpoint (addr 83).
uvcvideo: Found UVC 1.00 device <unnamed> (046d:09b0)
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/2 to device 4
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/3 to device 4
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/7 to device 4
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/8 to device 4
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/9 to device 4
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/1 to device 4
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/4 to device 4
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/5 to device 4
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/2 to device 4
entity 1
uvcvideo: Added control 00000000-0000-0000-0000-000000000001/4 to device 4
entity 1
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/11 to device 4
entity 3
uvcvideo: Added control 00000000-0000-0000-0000-000000000101/10 to device 4
entity 3
uvcvideo: Scanning UVC chain: OT 2 <- Unit 3 (-> 4 13 12 10) <- IT 1
uvcvideo: Found a valid video chain (1 -> 2).
uvcvideo: UVC device initialized.
usbcore: registered new driver uvcvideo
USB Video Class driver (v0.1.0)

# lsmod | grep uvcvideo
uvcvideo               37156  0
compat_ioctl32          1472  1 uvcvideo
videodev               21120  1 uvcvideo
v4l1_compat            12036  2 uvcvideo,videodev
v4l2_common            20448  2 uvcvideo,videodev
usbcore               112644  5 uvcvideo,usbhid,ehci_hcd,uhci_hcd

# ll /dev/vid*
crw-rw---- 1 root video 81, 0 2007-05-06 22:46 /dev/video0

# chmod a+r /dev/video0

# ll /dev/vid*
crw-rw-r-- 1 root video 81, 0 2007-05-06 22:46 /dev/video0

$ camorama
Windows error: Could not connect to video device (/dev/video0). Please check
connection

# dmesg | tail
uvcvideo: uvc_v4l2_open
uvcvideo: uvc_v4l2_ioctl
v4l1 ioctl VIDIOCGCAP, dir=r- (0x803c7601)
v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
v4l2 ioctl VIDIOC_ENUM_FMT, dir=rw (0xc0405602)
v4l2 ioctl VIDIOC_TRY_FMT, dir=rw (0xc0cc5640)
uvcvideo: Trying format 0x56595559 (YUYV): 10000x10000.
uvcvideo: Using default frame interval 125000.0 us (8.0 fps).
uvcvideo: uvc_v4l2_ioctl
v4l1 ioctl VIDIOCGWIN, dir=r- (0x80207609)
v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
uvcvideo: uvc_v4l2_ioctl
v4l1 ioctl VIDIOCSWIN, dir=-w (0x4020760a)
v4l2 ioctl VIDIOC_STREAMOFF, dir=-w (0x40045613)
v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
uvcvideo: Trying format 0x56595559 (YUYV): 640x512.
uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
uvcvideo: uvc_v4l2_ioctl
v4l1 ioctl VIDIOCGWIN, dir=r- (0x80207609)
v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
uvcvideo: uvc_v4l2_ioctl
v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
uvcvideo: Control 0x00980903 not found.
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
uvcvideo: uvc_v4l2_ioctl
v4l1 ioctl VIDIOCGMBUF, dir=r- (0x80887614)
uvcvideo: Unknown ioctl 0x80887614
uvcvideo: uvc_v4l2_release

Thanks for your answer.
Domi

2007/5/6, Laurent Pinchart <laurent.pinchart at skynet.be>:
>
> Hi Domi,
>
> > I downloaded driver trunk.
> >
> > # make
> > Building USB Video Class driver...
> > make[1]: se ingresa al directorio `/usr/src/linux-headers-2.6.18-4-686'
> >   Building modules, stage 2.
> >   MODPOST
> > make[1]: se sale del directorio `/usr/src/linux-headers-2.6.18-4-686'
> >
> > # make install
> > Installing USB Video Class driver...
> > make[1]: se ingresa al directorio `/usr/src/linux- headers-2.6.18-4-686'
> >   INSTALL /home/domi/Desktop/webcam/linux-uvc-trunk/uvcvideo.ko
> >   DEPMOD  2.6.18-4-686
> > make[1]: se sale del directorio `/usr/src/linux-headers-2.6.18-4-686'
> > depmod -ae
> >
> > # modprobe uvcvideo
> >
> > # lsmod |grep uvcvideo
> > uvcvideo               37156  0
> > compat_ioctl32          1472  1 uvcvideo
> > videodev               21120  1 uvcvideo
> > v4l1_compat            12036  2 uvcvideo,videodev
> > v4l2_common            20448  2 uvcvideo,videodev
> > usbcore               112644  5 uvcvideo,usbhid,ehci_hcd,uhci_hcd
> >
> > # dmesg | tail
> > Nothing new.
> >
> > The experimental driver showed:
> > uvcvideo: Found UVC 1.00 device <unnamed> (046d:09b0)
> > usbcore: registered new driver uvcvideo
> > USB Video Class driver (v0.1.0)
> >
> > Trunk driver Nothing show.
>
>
> It should print a message. Make sure you removed the old driver before
> loading
> the new one. You can raise the debug level with
>
> modprobe uvcvideo trace=255
>
> > # ll /dev/video0
> > crw-rw---- 1 root video 81, 0 2007-05-06 22:43 /dev/video0
> >
> > # chmod a+r /dev/video0
> >
> > # ll /dev/video0
> > crw-rw-r-- 1 root video 81, 0 2007-05-06 22:43 /dev/video0
> >
> > $ camorama
> >
> > Windows error: Could not connect to video device (/dev/video0). Please
> > check connection.
> >
> > My english is bad. Sorry.
> >
> > Any idea?
> >
> > Thanks.
>
> Cheers,
>
> Laurent Pinchart
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070506/78e9a76a/attachment.html>

From lists at brachttal.net  Mon May  7 07:42:20 2007
From: lists at brachttal.net (Andreas Volz)
Date: Mon, 7 May 2007 07:42:20 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS 37
In-Reply-To: <200705062210.25238.laurent.pinchart@skynet.be>
References: <20070501011150.01e3bf43@frodo.mittelerde>
	<200705061218.12887.laurent.pinchart@skynet.be>
	<20070506133107.36a5a5a9@frodo.mittelerde>
	<200705062210.25238.laurent.pinchart@skynet.be>
Message-ID: <20070507074220.5b5a046c@frodo.mittelerde>

Am Sun, 6 May 2007 22:10:25 +0200 schrieb Laurent Pinchart:

e/tmp/lucview.strace
> 
> Are you using a USB 1.1 device behind a hub ? Error 38 is ENOSYS, and

On the hub is a big "USB 2.0" sign.

> the only occurrence of that error in the USB stack code seems to be
> related to split isochronous transfers. Can you connect the camera
> directly to the computer if you're using a hub, or turn on
> CONFIG_USB_EHCI_SPLIT_ISO ("Full speed ISO transactions") in your
> kernel ?

I compiled the kernel with the option, but it doesn't work. Hm, I did
only make modules_install because ehci is compiled as module. Do I've
also to install the new kernel?

It works only if I connect the camera direct to the computer.

> There is no point in testing dv mode, only webcam mode will work for
> now. We will try dv mode after being done with webcam mode.

However, it works! I get a video with lucview. The resolution looks
like 320x200. Is this normal? And the control buttons doesn't work. But
I'm very happy to see this fast progress! :-)

regards
Andreas


From cristiane.koda at gmail.com  Mon May  7 09:29:55 2007
From: cristiane.koda at gmail.com (Cristiane koda)
Date: Mon, 7 May 2007 09:29:55 +0200
Subject: [Linux-uvc-devel] Help, V4l2 java applet
Message-ID: <e47b5af60705070029r5d09527ev49f8433aa2c7e503@mail.gmail.com>

Hello all,

   Does anybody would like to share a v4l2 java applet?

Thanks,
cristiane
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070507/6efbca7c/attachment.html>

From laurent.pinchart at skynet.be  Mon May  7 09:53:18 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 7 May 2007 09:53:18 +0200
Subject: [Linux-uvc-devel] Issues with the Linux UVC driver (Was "Where
	is V4L headed ?")
In-Reply-To: <d9def9db0705061439u3a55edbn2dcbc7fd45d445ed@mail.gmail.com>
References: <200705041501.16398.laurent.pinchart@skynet.be>
	<200705062333.53813.laurent.pinchart@skynet.be>
	<d9def9db0705061439u3a55edbn2dcbc7fd45d445ed@mail.gmail.com>
Message-ID: <200705070953.18938.laurent.pinchart@skynet.be>

On Sunday 06 May 2007, Markus Rechberger wrote:
> On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > On Sunday 06 May 2007, Laurent Pinchart wrote:
> > > On Sunday 06 May 2007, Markus Rechberger wrote:
> > > [snip]
> > >
> > > > On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > > > > On Sunday 06 May 2007, Markus Rechberger wrote:
> > > > > > On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > > > > > > On Sunday 06 May 2007, Markus Rechberger wrote:
> > > > > > > > On 5/6/07, Laurent Pinchart <laurent.pinchart at skynet.be>
> > > > > > > > wrote: dwMaxVideoFrameBufferSize     2752512 (which is used
> > > > > > > > for usb_buffer_alloc, seems to be too much already)
> > > > > > >
> > > > > > > The bulk buffers are allocated using dwMaxPayloadTransferSize.
> > > > > > > Isochronous buffers are allocated using dwMaxVideoFrameSize,
> > > > > > > which is clearly a bug. I'm working on a fix.
> > > > > > >
> > > > > > > The stack trace you posted shows your device uses bulk
> > > > > > > transfers. Could you tell me how big dwMaxPayloadTransferSize
> > > > > > > is ? If the devices insists on using
> > > > > > > huge buffers, there's not much I can do about it.
> > > > > >
> > > > > > I simply wouldn't allocate that much memory for the urbs, this
> > > > > > way seems to work reliable with the driver I have.
> > > > > > I added some debug at the allocation it is 2.7 MB/URB
> > > > >
> > > > > I suspect that the dwMaxPayloadTransferSize value is thus equal to
> > > > > 2752512 as
> > > > > well.
> > > > >
> > > > > For bulk transfers, you are right, I could allocate smaller URBs.
> > > > > As bulk transfers are guaranteed, I can split payloads across
> > > > > multiple URBs. For isochronous transfers that won't be possible.
> > > >
> > > > it is also possible for isochronous transfers, if the framebuffer
> > > > doesn't get fully filled just drop the frame. By experience this
> > > > works very well with em28xx based devices.
> > >
> > > After having a closer look at the spec, isochronous transfers won't be
> > > an issue. Each isochronous packet starts with a UVC header. I already
> > > submit isochronous URBs of no more than 40 packets.
> > >
> > > For bulk transfers, the situation seems a little more complex than I
> > > thought. Bulk payloads can be made of lots of packets, up to a whole
> > > frame per payload. The maximum payload size is reported by the device.
> > > As the device sends a header for each payload and not for each URB, I
> > > have to
> >
> > find
> >
> > > a way detect payload boundaries (keep in mind that payloads can have a
> > > variable size).
> > >
> > > When using payload-sized URBs, each URB will contain a single payload.
> >
> > This
> >
> > > is what the Linux UVC driver currently does, and it works fine as long
> > > as the device doesn't have a payload size bigger than what the host can
> > > allocate.
> > >
> > > When splitting payloads across multiple URBs, I need another way to
> > > detect payload boundaries. As the payload size isn't known in advance
> > > (only the maximum size is known), I can't rely on a byte count. A
> > > possible solution would have been to detect URBs with an actual length
> > > smaller than the transfer buffer length, as such URBs should indicate
> > > the end of a payload. Unfortunately, this won't work as the payload
> > > size can be an exact
> >
> > multiple
> >
> > > of the URB size.
> > >
> > > Can you think of a way to detect payload boundaries properly when
> >
> > splitting
> >
> > > payloads across multiple URBs ?
> >
> > Maybe I overlooked the problem. The device will send a zero-byte data
> > packet to indicate the end of the payload. I somehow thought this
> > wouldn't show in the URBs, but I'm not so sure about it. I know Linux
> > will use the zero-byte data packet to detect the end of the bulk
> > transfer, but will the USB stack return a zero-sized URB if the bulk
> > transfer ends on a URB boundary ? I can't
> > test that on the bulk device I have, as its payload size is not a
> > multiple of
> > the bulk packet size.
>
> If possible if you redo that part, please try to reuse the code of the
> data transfer code of the em28xx (or at least consider a similar way)
> so that we can merge that codepart.

Or you could try to reuse the uvcvideo code in em28xx (or at least consider a 
similar way) so that we can merge that codepart.

Seriously speaking, apart from the isochronous allocation code which is 
already very similar to the uvcvideo code, I don't see much data transfer 
code in the em28xx driver that I could reuse.

I'm also trying to solve issues with bulk transfers that the em28xx driver 
doesn't have to support.

> I defined the boundaries by looking at the packet size, there was no
> packet which had the length 0, since I had to do a fast solution I
> just looked at the packet size which was smaller than the average
> packets, this indicated a new frame for me.

I don't like heuristics. This is certainly not a proper solution. Either all 
URBs except the last one are full (with possibly a zero sized URB if the 
payload size is a multiple of the URB size), or they are not. According to 
the USB 2.0 specification this should be the case. I'll test this on the only 
bulk device I own.

> However this doesn't work well with 176x144 the driver cuts around 20
> lines ontop of the video.
> I'll also have a closer look at it tomorrow.
> Regarding the specs every frame should start with some frameheaders.

Every payload starts with a payload header. This is why I need a reliable way 
to detect payload boundaries.

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon May  7 10:02:22 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 7 May 2007 10:02:22 +0200
Subject: [Linux-uvc-devel] Fwd: Orbicam - 046d:09b0 Logitech, Inc
In-Reply-To: <565389770705061530w2ef97b10p99cc87d470ec052e@mail.gmail.com>
References: <565389770705061428i354af273qcffa3e6fd4cc33d8@mail.gmail.com>
	<565389770705061502h6b8fe1a2o9505c6616e1157e5@mail.gmail.com>
	<565389770705061530w2ef97b10p99cc87d470ec052e@mail.gmail.com>
Message-ID: <200705071002.22435.laurent.pinchart@skynet.be>

Hi Domi,

[snip]

> $ camorama
> Windows error: Could not connect to video device (/dev/video0). Please
> check connection
>
> # dmesg | tail
> uvcvideo: uvc_v4l2_open
> uvcvideo: uvc_v4l2_ioctl
> v4l1 ioctl VIDIOCGCAP, dir=r- (0x803c7601)
> v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
> v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
> v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
> v4l2 ioctl VIDIOC_ENUM_FMT, dir=rw (0xc0405602)
> v4l2 ioctl VIDIOC_TRY_FMT, dir=rw (0xc0cc5640)
> uvcvideo: Trying format 0x56595559 (YUYV): 10000x10000.
> uvcvideo: Using default frame interval 125000.0 us (8.0 fps).
> uvcvideo: uvc_v4l2_ioctl
> v4l1 ioctl VIDIOCGWIN, dir=r- (0x80207609)
> v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
> v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
> uvcvideo: uvc_v4l2_ioctl
> v4l1 ioctl VIDIOCSWIN, dir=-w (0x4020760a)
> v4l2 ioctl VIDIOC_STREAMOFF, dir=-w (0x40045613)
> v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
> v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
> uvcvideo: Trying format 0x56595559 (YUYV): 640x512.
> uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
> v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
> uvcvideo: uvc_v4l2_ioctl
> v4l1 ioctl VIDIOCGWIN, dir=r- (0x80207609)
> v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
> v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
> uvcvideo: uvc_v4l2_ioctl
> v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
> v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
> v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
> v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
> uvcvideo: Control 0x00980903 not found.
> v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
> v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
> v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
> v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
> v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
> v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
> v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
> uvcvideo: uvc_v4l2_ioctl
> v4l1 ioctl VIDIOCGMBUF, dir=r- (0x80887614)
> uvcvideo: Unknown ioctl 0x80887614
> uvcvideo: uvc_v4l2_release

Camorama is a v4l1 application, and the uvcvideo driver explicitly supports 
v4l2 only. v4l1 is officially deprecated. You will need a v4l2 application 
such as Ekiga to use the uvcvideo driver. You can use luvcview (available at 
http://mxhaard.free.fr/spca50x/Investigation/uvc/luvcview-20070107.tar.gz) to 
test your webcam.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon May  7 10:12:14 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 7 May 2007 10:12:14 +0200
Subject: [Linux-uvc-devel] Help, V4l2 java applet
In-Reply-To: <e47b5af60705070029r5d09527ev49f8433aa2c7e503@mail.gmail.com>
References: <e47b5af60705070029r5d09527ev49f8433aa2c7e503@mail.gmail.com>
Message-ID: <200705071012.15048.laurent.pinchart@skynet.be>

Hi Cristiane,

> Does anybody would like to share a v4l2 java applet?

Do you mean you have a v4l2 java applet to share, or are you looking for 
one ? :-)

As this is not UVC related, you should probably post the question on the 
video4linux mailing list where you will have a broader audience.

Regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon May  7 10:25:48 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 7 May 2007 10:25:48 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS 37
In-Reply-To: <20070507074220.5b5a046c@frodo.mittelerde>
References: <20070501011150.01e3bf43@frodo.mittelerde>
	<200705062210.25238.laurent.pinchart@skynet.be>
	<20070507074220.5b5a046c@frodo.mittelerde>
Message-ID: <200705071025.48613.laurent.pinchart@skynet.be>

On Monday 07 May 2007, Andreas Volz wrote:
> Am Sun, 6 May 2007 22:10:25 +0200 schrieb Laurent Pinchart:
>
> > Are you using a USB 1.1 device behind a hub ? Error 38 is ENOSYS, and
>
> On the hub is a big "USB 2.0" sign.

Problems arise (if I'm not mistaken) when you use a USB 1.1 device with a USB 
2.0 hub. Protocol handling becomes much more complex for the Linux USB stack, 
and that code is still experimental.

> > the only occurrence of that error in the USB stack code seems to be
> > related to split isochronous transfers. Can you connect the camera
> > directly to the computer if you're using a hub, or turn on
> > CONFIG_USB_EHCI_SPLIT_ISO ("Full speed ISO transactions") in your
> > kernel ?
>
> I compiled the kernel with the option, but it doesn't work. Hm, I did
> only make modules_install because ehci is compiled as module. Do I've
> also to install the new kernel?

Probably not. If the driver still returns error 38, you might have made a 
mistake somewhere. Maybe your kernel doesn't use the correct modules. It 
wouldn't hurt trying the new kernel to check if it works.

> It works only if I connect the camera direct to the computer.

So it works :-)

> > There is no point in testing dv mode, only webcam mode will work for
> > now. We will try dv mode after being done with webcam mode.
>
> However, it works! I get a video with lucview. The resolution looks
> like 320x200. Is this normal?

Yes it is. The device only supports 320x240 in webcam mode.

> And the control buttons doesn't work.

The camera has no processing unit to handle brightness & co. In webcam mode 
the camera has a zoom control, but that's not supported by the driver yet 
(nor by luvcview). It also has media transport controls (play/stop/pause/...) 
which are not supported yet either.

> But I'm very happy to see this fast progress! :-)

So am I :-) There is still work to be done though. I have to implement

- selector unit support to select video input (camera or tape)
- DV format support
- new controls (transport & zoom)

all of those will require changes in the userspace application. Are you 
familiar with C programming ? Could you hack luvcview to test the new 
features ? DV format might be a little more complex, but new controls 
(including input selection) are easy.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Mon May  7 10:44:22 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 7 May 2007 10:44:22 +0200
Subject: [Linux-uvc-devel] [SVN] Limited support for multiple inputs
	selector units & other features
Message-ID: <200705071044.22544.laurent.pinchart@skynet.be>

Hi everybody,

the last SVN announcement is already nearly 4 months old. Not that nothing 
happened in the meantime, but lots of development has gone behind the scene.

I just committed limited support for multiple inputs selector units. This 
involved a few changes in the descriptor parsing code, so I'd like everybody 
to test the new driver with their device(s) and report new problems. An added 
benefit of those changes is that the driver will not crash for devices with 
more than 8 extension units (I haven't seen any of those but they will 
probably come some day).

Note that selector units can't be controlled from userspace (using VIDIOC_G|
S_INPUT ioctls) yet. I'm working on this.

The driver now also supports the Panasonic GS-37 camcorder in webcam mode. DV 
mode should follow. Other newly supported devices include the Ecamm Pico 
iMage.

I would like to thank Paul Jurczak for providing me with a V-Gear TalkCam MX6 
AF. Video streaming works fine but controls don't seem to have any effect on 
the image. I'm still investigating this issue.

That's all for today. Happy testing, and fingers crossed :-)

Cheers,

Laurent Pinchart


From cass at skynet.be  Mon May  7 11:05:00 2007
From: cass at skynet.be (Guillaume Desmottes)
Date: Mon, 07 May 2007 11:05:00 +0200
Subject: [Linux-uvc-devel] soft lockup
Message-ID: <1178528700.5601.5.camel@cass-wks>

Hey,

I'm using the latest uvc driver from SVN (patched with the well know
"reset patch") on Ubuntu Feisty (2.6.20-15-generic) and got this error
after the boot:

[   49.853285] usbcore: registered new interface driver snd-usb-audio
[   49.861202] uvcvideo: Found UVC 1.00 device <unnamed> (046d:08ce)
[   59.384003] BUG: soft lockup detected on CPU#0!
[   59.384013]  [<c015353c>] softlockup_tick+0x9c/0xf0
[   59.384029]  [<c0130633>] update_process_times+0x33/0x80
[   59.384037]  [<c01154b0>] smp_apic_timer_interrupt+0x70/0x80
[   59.384043]  [<c01042f8>] apic_timer_interrupt+0x28/0x30
[   59.384062]  [<c011c110>] native_read_tsc+0x0/0x10
[   59.384069]  [<c01f17d8>] delay_tsc+0x18/0x30
[   59.384075]  [<c01f1836>] __delay+0x6/0x10
[   59.384078]  [<f8b7977f>] uvc_query_ctrl+0x5f/0x170 [uvcvideo]
[   59.384089]  [<c01f1084>] vsnprintf+0x2f4/0x5f0
[   59.384111]  [<f8b79a11>] uvc_get_video_ctrl+0x61/0x170 [uvcvideo]
[   59.384142]  [<f8b79b43>] uvc_video_init+0x23/0xe0 [uvcvideo]
[   59.384151]  [<f8b75754>] uvc_register_video+0x524/0x640 [uvcvideo]
[   59.384179]  [<f8b75bcb>] uvc_probe+0x2ab/0x1720 [uvcvideo]
[   59.384260]  [<f8884c86>] usb_probe_interface+0x96/0xe0 [usbcore]
[   59.384284]  [<c0257a66>] really_probe+0x66/0x190
[   59.384290]  [<c0257bd9>] driver_probe_device+0x49/0xc0
[   59.384302]  [<c0257dae>] __driver_attach+0x9e/0xa0
[   59.384310]  [<c0256f3b>] bus_for_each_dev+0x3b/0x60
[   59.384322]  [<c0257904>] driver_attach+0x24/0x30
[   59.384325]  [<c0257d10>] __driver_attach+0x0/0xa0
[   59.384328]  [<c02572cb>] bus_add_driver+0x7b/0x1a0
[   59.384342]  [<f888472b>] usb_register_driver+0x7b/0x100 [usbcore]
[   59.384366]  [<f8a85068>] uvc_init+0x68/0x81 [uvcvideo]
[   59.384373]  [<c014421d>] sys_init_module+0x15d/0x1ba0
[   59.384436]  [<c0107a5d>] sys_mmap2+0xcd/0xd0
[   59.384450]  [<c01031f0>] sysenter_past_esp+0x69/0xa9
[   59.384475]  =======================


Is it a known bug?

	G.

-- 
Guillaume Desmottes <cass at skynet.be>
Jabber <cassidy at jabber.belnet.be>
GPG 1024D/711E31B1 | 1B5A 1BA8 11AA F0F1 2169  E28A AC55 8671 711E 31B1



From pmarques at grupopie.com  Mon May  7 13:43:09 2007
From: pmarques at grupopie.com (Paulo Marques)
Date: Mon, 07 May 2007 12:43:09 +0100
Subject: [Linux-uvc-devel] Panasonic NV-GS 37
In-Reply-To: <200705071025.48613.laurent.pinchart@skynet.be>
References: <20070501011150.01e3bf43@frodo.mittelerde>	<200705062210.25238.laurent.pinchart@skynet.be>	<20070507074220.5b5a046c@frodo.mittelerde>
	<200705071025.48613.laurent.pinchart@skynet.be>
Message-ID: <463F10CD.6060002@grupopie.com>

Laurent Pinchart wrote:
> On Monday 07 May 2007, Andreas Volz wrote:
>> Am Sun, 6 May 2007 22:10:25 +0200 schrieb Laurent Pinchart:
>>
>>> Are you using a USB 1.1 device behind a hub ? Error 38 is ENOSYS, and
>> On the hub is a big "USB 2.0" sign.
> 
> Problems arise (if I'm not mistaken) when you use a USB 1.1 device with a USB 
> 2.0 hub. Protocol handling becomes much more complex for the Linux USB stack, 
> and that code is still experimental.

You're not mistaken :)

It is even worse for isochronous transfers which video devices usually 
use. It gets even worse if you connect _multiple_ usb 1.1 devices to 
your usb 2.0 hub.

Andreas, if you're compiling your own kernel, you can try to set 
USB_EHCI_SPLIT_ISO and USB_EHCI_TT_NEWSCHED to see if that helps. Please 
note that these are experimental features and haven't been through a lot 
of debug time yet.

The simplest solution, however, is to connect the camera directly to the 
PC... :(

-- 
Paulo Marques
Software Development Department - Grupo PIE, S.A.
Phone: +351 252 290600, Fax: +351 252 290601
Web: www.grupopie.com

"God is love. Love is blind. Ray Charles is blind. Ray Charles is God."


From laurent.pinchart at skynet.be  Mon May  7 15:32:58 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 7 May 2007 15:32:58 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS 37
In-Reply-To: <200705071025.48613.laurent.pinchart@skynet.be>
References: <20070501011150.01e3bf43@frodo.mittelerde>
	<20070507074220.5b5a046c@frodo.mittelerde>
	<200705071025.48613.laurent.pinchart@skynet.be>
Message-ID: <200705071532.58682.laurent.pinchart@skynet.be>

On Monday 07 May 2007, Laurent Pinchart wrote:
> On Monday 07 May 2007, Andreas Volz wrote:
> > Am Sun, 6 May 2007 22:10:25 +0200 schrieb Laurent Pinchart:
[snip]
> > > There is no point in testing dv mode, only webcam mode will work for
> > > now. We will try dv mode after being done with webcam mode.

Now that webcam mode somehow works, could you test the following patch with DV 
mode ? The driver should detect and initialise the camera, but luvcview will 
probably not work. Please post the kernel log (at trace=255) after plugging 
the device.

Cheers,

Laurent Pinchart
-------------- next part --------------
A non-text attachment was scrubbed...
Name: panasonic.diff
Type: text/x-diff
Size: 1205 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070507/454a1b19/attachment.diff>

From domijor at gmail.com  Mon May  7 22:59:39 2007
From: domijor at gmail.com (Domijor)
Date: Mon, 7 May 2007 21:59:39 +0100
Subject: [Linux-uvc-devel] Fwd: Orbicam - 046d:09b0 Logitech, Inc
In-Reply-To: <200705071002.22435.laurent.pinchart@skynet.be>
References: <565389770705061428i354af273qcffa3e6fd4cc33d8@mail.gmail.com>
	<565389770705061502h6b8fe1a2o9505c6616e1157e5@mail.gmail.com>
	<565389770705061530w2ef97b10p99cc87d470ec052e@mail.gmail.com>
	<200705071002.22435.laurent.pinchart@skynet.be>
Message-ID: <565389770705071359r26edd940u84eaf88ee4ce6ab6@mail.gmail.com>

Hi Laurent

I install luvcview. It's the fail.

$  # /usr/local/bin/luvcview
luvcview version 0.2.0
Video driver: x11
A window manager is available
video /dev/video0
Unable to set format: 22.
 Init v4L2 failed !! exit fatal

# lsmod |grep uvcvideo
uvcvideo               37156  0
compat_ioctl32          1472  1 uvcvideo
videodev               21120  1 uvcvideo
v4l1_compat            12036  2 uvcvideo,videodev
v4l2_common            20448  2 uvcvideo,videodev
usbcore               112644  5 uvcvideo,usbhid,ehci_hcd,uhci_hcd

# tail -f /var/log/messages
May  7 21:41:39 portatil kernel: v4l2 ioctl VIDIOC_QUERYCAP, dir=r-
(0x80685600)
May  7 21:41:39 portatil kernel: v4l2 ioctl VIDIOC_S_FMT, dir=rw
(0xc0cc5605)

# ll /dev/video0
crw-rw-r-- 1 root video 81, 0 2007-05-07 21:08 /dev/video0

Thanks for your answer.
Domi.

2007/5/7, Laurent Pinchart <laurent.pinchart at skynet.be>:
>
> Hi Domi,
>
> [snip]
>
> > $ camorama
> > Windows error: Could not connect to video device (/dev/video0). Please
> > check connection
> >
> > # dmesg | tail
> > uvcvideo: uvc_v4l2_open
> > uvcvideo: uvc_v4l2_ioctl
> > v4l1 ioctl VIDIOCGCAP, dir=r- (0x803c7601)
> > v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
> > v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
> > v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
> > v4l2 ioctl VIDIOC_ENUM_FMT, dir=rw (0xc0405602)
> > v4l2 ioctl VIDIOC_TRY_FMT, dir=rw (0xc0cc5640)
> > uvcvideo: Trying format 0x56595559 (YUYV): 10000x10000.
> > uvcvideo: Using default frame interval 125000.0 us (8.0 fps).
> > uvcvideo: uvc_v4l2_ioctl
> > v4l1 ioctl VIDIOCGWIN, dir=r- (0x80207609)
> > v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
> > v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
> > uvcvideo: uvc_v4l2_ioctl
> > v4l1 ioctl VIDIOCSWIN, dir=-w (0x4020760a)
> > v4l2 ioctl VIDIOC_STREAMOFF, dir=-w (0x40045613)
> > v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
> > v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
> > uvcvideo: Trying format 0x56595559 (YUYV): 640x512.
> > uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
> > v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
> > uvcvideo: uvc_v4l2_ioctl
> > v4l1 ioctl VIDIOCGWIN, dir=r- (0x80207609)
> > v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
> > v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
> > uvcvideo: uvc_v4l2_ioctl
> > v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
> > v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
> > v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
> > v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
> > uvcvideo: Control 0x00980903 not found.
> > v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
> > v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
> > v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
> > v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
> > v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
> > v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
> > v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
> > uvcvideo: uvc_v4l2_ioctl
> > v4l1 ioctl VIDIOCGMBUF, dir=r- (0x80887614)
> > uvcvideo: Unknown ioctl 0x80887614
> > uvcvideo: uvc_v4l2_release
>
> Camorama is a v4l1 application, and the uvcvideo driver explicitly
> supports
> v4l2 only. v4l1 is officially deprecated. You will need a v4l2 application
> such as Ekiga to use the uvcvideo driver. You can use luvcview (available
> at
> http://mxhaard.free.fr/spca50x/Investigation/uvc/luvcview-20070107.tar.gz)
> to
> test your webcam.
>
> Best regards,
>
> Laurent Pinchart
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070507/bd5ec39b/attachment.html>

From lists at brachttal.net  Mon May  7 23:39:46 2007
From: lists at brachttal.net (Andreas Volz)
Date: Mon, 7 May 2007 23:39:46 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS 37
In-Reply-To: <200705071532.58682.laurent.pinchart@skynet.be>
References: <20070501011150.01e3bf43@frodo.mittelerde>
	<20070507074220.5b5a046c@frodo.mittelerde>
	<200705071025.48613.laurent.pinchart@skynet.be>
	<200705071532.58682.laurent.pinchart@skynet.be>
Message-ID: <20070507233946.4713a6f7@frodo.mittelerde>

Am Mon, 7 May 2007 15:32:58 +0200 schrieb Laurent Pinchart:

> On Monday 07 May 2007, Laurent Pinchart wrote:
> > On Monday 07 May 2007, Andreas Volz wrote:
> > > Am Sun, 6 May 2007 22:10:25 +0200 schrieb Laurent Pinchart:
> [snip]
> > > > There is no point in testing dv mode, only webcam mode will
> > > > work for now. We will try dv mode after being done with webcam
> > > > mode.
> 
> Now that webcam mode somehow works, could you test the following
> patch with DV mode ? The driver should detect and initialise the
> camera, but luvcview will probably not work. Please post the kernel
> log (at trace=255) after plugging the device.

I applied the patch. I tried it with trace=255 and trace=65535. Here is
the result:

http://tux-style.de/tmp/dmesg2.txt

regards
Andreas


From lists at brachttal.net  Mon May  7 23:48:40 2007
From: lists at brachttal.net (Andreas Volz)
Date: Mon, 7 May 2007 23:48:40 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS 37
In-Reply-To: <200705071025.48613.laurent.pinchart@skynet.be>
References: <20070501011150.01e3bf43@frodo.mittelerde>
	<200705062210.25238.laurent.pinchart@skynet.be>
	<20070507074220.5b5a046c@frodo.mittelerde>
	<200705071025.48613.laurent.pinchart@skynet.be>
Message-ID: <20070507234840.46c77ed1@frodo.mittelerde>

Am Mon, 7 May 2007 10:25:48 +0200 schrieb Laurent Pinchart:

Hello Laurent,

> The camera has no processing unit to handle brightness & co. In
> webcam mode the camera has a zoom control, but that's not supported
> by the driver yet (nor by luvcview). It also has media transport
> controls (play/stop/pause/...) which are not supported yet either.

I tested the driver with ekiga and it works nice. I didn't test a
online session, but the video shows in the offline window.

> > But I'm very happy to see this fast progress! :-)
> 
> So am I :-) There is still work to be done though. I have to implement
> 
> - selector unit support to select video input (camera or tape)
> - DV format support
> - new controls (transport & zoom)
> 
> all of those will require changes in the userspace application. Are
> you familiar with C programming ? Could you hack luvcview to test the
> new features ? DV format might be a little more complex, but new
> controls (including input selection) are easy.

Yes, I'm familiar with C programming. If you tell me which features I
should work on I'll do my best. But you should know that I'm not
familiar with video programming.

regards
Andreas


From Cato_Minor at arcor.de  Mon May  7 23:58:43 2007
From: Cato_Minor at arcor.de (Viktor)
Date: Mon, 07 May 2007 23:58:43 +0200
Subject: [Linux-uvc-devel] Some success with a Fujifilm FinePix A330
Message-ID: <1178575123.16552.16.camel@localhost.localdomain>

Hello everyone,

I never thought that one day I would be able to use the webcam part of
this digital camera, thanks a lot for your efforts!

I can report semi-success: using the uvcvideo driver (svn revision 101,
self-compiled kernel 2.6.18.6 on Debian unstable), I get an image stream
with luvcview (2007-01-07). But neither VLC nor mplayer are able to show
or stream the video. I guess that this device is extremely simple,
providing only 352x288, 10fps, with no other controls, and that VLC or
mplayer are trying to access additional controls. In particular, both
are trying to do something with the audio, although in both cases I'm
specifying that no audio should be used.

Below are four outputs. If I should supply some other information,
please tell me. Or, of course, it might be that only VLC and mplayer
have to be improved :-)

Have a nice day,
Viktor.



kernel:
<---
usb 1-2: new full speed USB device using uhci_hcd and address 10
usb 1-2: configuration #1 chosen from 1 choice
uvcvideo: Found UVC 1.00 device USB Web Camera (04cb:0149)
--->

luvcview:
<---
$ ../luvcview-20070107/luvcview -d /dev/video1 -L
luvcview version 0.2.0 
Video driver: x11
A window manager is available
video /dev/video1 
/dev/video1 does not support read i/o
{ pixelformat = 'MJPG', description = 'MJPEG' }
{ discrete: width = 352, height = 288 }
        Time interval between frame: {min { 1/10 } .. max { 1/10 } /
stepsize { 1/10000000 } }, 
--->

vlc 0.8.6.a.debian-6:
<---
main debug: adding playlist item `v4l://' ( v4l:// )
main debug: creating new input thread
main debug: waiting for thread completion
main debug: thread 2746964880 (input) created at priority 0
(input/input.c:265)
main debug: stream=`duplicate'
main debug: looking for sout stream module: 1 candidate
stream_out_duplicate debug: creating 'duplicate'
stream_out_duplicate debug:  * adding `display'
main debug: stream=`display'
main debug: looking for sout stream module: 1 candidate
main debug: using sout stream module "stream_out_display"
main debug: using sout stream module "stream_out_duplicate"
main debug: `v4l://' gives access `v4l' demux `' path `'
main debug: creating demux: access='v4l' demux='' path=''
main debug: looking for access_demux module: 1 candidate
v4l debug: V4L device USB Web Camera 1 channels 0 audios 48 < w < 352 32
< h < 288
v4l error: cannot get channel infos (Invalid argument)
v4l debug: openened adev=`/dev/dsp' mono 1000Hz
v4l debug: v4l grabbing started
v4l debug: new audio es 1 channels 1000Hz
main debug: selecting program id=0
main debug: using access_demux module "v4l"
main debug: looking for packetizer module: 17 candidates
main debug: using packetizer module "packetizer_copy"
main debug: thread 2719005584 (decoder) created at priority 0
(input/decoder.c:159)
main debug: starting in sync mode
main debug: `v4l://' successfully opened
main debug: adding a new input
stream_out_duplicate debug: duplicated a new stream codec=s16l (es=0
group=0)
main debug: looking for decoder module: 25 candidates
araw debug: samplerate:1000Hz channels:1 bits/sample:16
main debug: using decoder module "araw"
main debug: thread 2737994640 (decoder) created at priority 0
(input/decoder.c:159)
stream_out_duplicate debug:     - added for output 0
main debug: looking for audio output module: 3 candidates
alsa debug: opening ALSA device `default'
alsa warning: The rate 1000 Hz is not supported by your hardware. Using
4000 Hz instead.
main debug: thread 2729405328 (aout) created at priority 0 (alsa.c:662)
main debug: using audio output module "alsa"
main debug: output 'fl32' 4000 Hz Mono frame=1 samples/4 bytes
main debug: mixer 'fl32' 4000 Hz Mono frame=1 samples/4 bytes
main debug: no need for any filter
main debug: looking for audio mixer module: 3 candidates
main debug: using audio mixer module "float32_mixer"
main debug: input 's16l' 1000 Hz Mono frame=1 samples/2 bytes
main debug: filter(s) 's16l'->'fl32' 1000 Hz->1000 Hz Mono->Mono
main debug: looking for audio filter module: 24 candidates
main debug: using audio filter module "s16tofloat32"
main debug: found a filter for the whole conversion
main debug: filter(s) 'fl32'->'fl32' 4400 Hz->4000 Hz Mono->Mono
main debug: looking for audio filter module: 24 candidates
main debug: using audio filter module "bandlimited_resampler"
main debug: found a filter for the whole conversion
main warning: PTS is out of range (121476), dropping buffer
main warning: PTS is out of range (102662), dropping buffer
main warning: PTS is out of range (107937), dropping buffer
[many lines like the three above following, until "playing" is stopped]
main debug: control type=0
main debug: control: stopping input
main debug: closing input
main debug: removing module "v4l"
main debug: removing module "packetizer_copy"
main debug: thread 2719005584 joined (input/decoder.c:191)
main debug: killing decoder fourcc `araw', 0 PES in FIFO
main debug: removing an input
main debug: removing module "araw"
main debug: thread 2737994640 joined (input/decoder.c:191)
main debug: killing decoder fourcc `s16l', 0 PES in FIFO
main debug: removing module "s16tofloat32"
main debug: removing module "bandlimited_resampler"
main debug: thread 2729405328 joined (alsa.c:714)
main debug: removing module "alsa"
main debug: removing module "float32_mixer"
main debug: destroying sout
main debug: destroying chain... (name=duplicate)
stream_out_duplicate debug: closing a duplication
main debug: destroying chain... (name=display)
main debug: removing module "stream_out_display"
main debug: destroying chain done
main debug: removing module "stream_out_duplicate"
main debug: destroying chain done
main debug: thread 2746964880 joined (input/input.c:412)

mplayer 1:1.0-rc1svn20070501-0.0:
<---
$ mplayer -tv
driver=v4l2:device=/dev/video1:noaudio:width=352:height=288:fps=10:mjpeg
tv://
mplayer: /usr/lib/libtheora.so.0: no version information available
(required by mplayer)
mplayer: /usr/lib/libtheora.so.0: no version information available
(required by /usr/lib/libavcodec.so.51)
MPlayer dev-SVN-rUNKNOWN-4.1.3 (C) 2000-2007 MPlayer Team
CPU: AMD Athlon(tm) processor (Family: 6, Model: 4, Stepping: 2)
CPUflags:  MMX: 1 MMX2: 1 3DNow: 1 3DNow2: 1 SSE: 0 SSE2: 0
Compiled with runtime CPU detection.
This codecs.conf is too old and incompatible with this MPlayer release!
at line 6
Can't open joystick device /dev/input/js0: No such file or directory
Can't init input joystick
mplayer: could not connect to socket
mplayer: No such file or directory
Failed to open LIRC support. You will not be able to use your remote
control.
Playing tv://.
TV file format detected.
Selected driver: v4l2
 name: Video 4 Linux 2 input
 author: Martin Olschewski <olschewski at zpr.uni-koeln.de>
 comment: first try, more to come ;-)
v4l2: ioctl get standard failed: Invalid argument
Selected device: USB Web Camera
 Capabilites:  video capture  streaming
 supported norms:
 inputs: 0 = Camera;
 Current input: 0
 Current format: unknown (0x47504a4d)
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
v4l2: ioctl set format failed: Invalid argument
tv.c: norm_from_string(pal): Bogus norm parameter, setting default.
v4l2: ioctl enum norm failed: Invalid argument
Error: Cannot set norm!
  MJP: width 352 height 288
Selected input hasn't got a tuner!
v4l2: ioctl set mute failed: Invalid argument
v4l2: ioctl query control failed: Invalid argument
v4l2: ioctl query control failed: Invalid argument
v4l2: ioctl query control failed: Invalid argument
v4l2: ioctl query control failed: Invalid argument
==========================================================================
Opening video decoder: [ffmpeg] FFmpeg's libavcodec codec family
Selected video codec: [ffmjpeg] vfm: ffmpeg (FFmpeg MJPEG decoder)
==========================================================================
Audio: no sound
Starting playback...
V:   0.0 115/115 ??% ??% ??,?% 0 0 

[here it starts counting, but no image is shown. When ctrl-c is
pressed:]

MPlayer interrupted by signal 8 in module: free_demuxer
- MPlayer crashed by bad usage of CPU/FPU/RAM.
  Recompile MPlayer with --enable-debug and make a 'gdb' backtrace and
  disassembly. Details in
DOCS/HTML/en/bugreports_what.html#bugreports_crash.
- MPlayer crashed. This shouldn't happen.
  It can be a bug in the MPlayer code _or_ in your drivers _or_ in your
  gcc version. If you think it's MPlayer's fault, please read
  DOCS/HTML/en/bugreports.html and follow the instructions there. We
can't and
  won't help unless you provide this information when reporting a
possible bug.
--->



From laurent.pinchart at skynet.be  Tue May  8 10:49:30 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 8 May 2007 10:49:30 +0200
Subject: [Linux-uvc-devel] Issues with the Linux UVC driver (Was "Where
	is V4L headed ?")
In-Reply-To: <20070508002209.GA31675@suse.de>
References: <200705041501.16398.laurent.pinchart@skynet.be>
	<200705070953.18938.laurent.pinchart@skynet.be>
	<20070508002209.GA31675@suse.de>
Message-ID: <200705081049.30654.laurent.pinchart@skynet.be>

Hi Greg,

On Tuesday 08 May 2007, Greg KH wrote:
> On Mon, May 07, 2007 at 09:53:18AM +0200, Laurent Pinchart wrote:
> > On Sunday 06 May 2007, Markus Rechberger wrote:
> > > I defined the boundaries by looking at the packet size, there was no
> > > packet which had the length 0, since I had to do a fast solution I
> > > just looked at the packet size which was smaller than the average
> > > packets, this indicated a new frame for me.
> >
> > I don't like heuristics. This is certainly not a proper solution. Either
> > all URBs except the last one are full (with possibly a zero sized URB if
> > the payload size is a multiple of the URB size), or they are not.
> > According to the USB 2.0 specification this should be the case. I'll test
> > this on the only bulk device I own.
> >
> > > However this doesn't work well with 176x144 the driver cuts around 20
> > > lines ontop of the video.
> > > I'll also have a closer look at it tomorrow.
> > > Regarding the specs every frame should start with some frameheaders.
> >
> > Every payload starts with a payload header. This is why I need a reliable
> > way to detect payload boundaries.
>
> I don't understand why you need to know this.  The USB host controller
> will handle the zero length packets for you, if needed, and it will also
> divide up your bulk urb into the proper sizes for you, depending on the
> hardware size of the endpoint.
>
> And you also already know the size of the bulk endpoint in your driver,
> if you want to restrict your urb size to that, however, for decent
> speeds, I would not recommend doing this, but instead, letting the
> hardware divide up the urb for you into smaller pieces, filling the
> hardware pipeline up properly.

The issue here is memory usage. The device which triggered all this discussion 
is a webcam using bulk payloads of 2.7MB, which is quite a lot for memory 
constrained hosts. Instead of submitting a 2.7MB URB which would then be 
divided in 512 bytes packets by the USB host controller, Markus adviced to 
use smaller URBs (a few tens or hundreds of kilobytes). Those URBs would also 
be divided in 512 bytes packets by the USB host controller.

When submitting URBs smaller than the maximum payload size, the problem that 
arises is that I need a way to detect payload boundaries. This was easy with 
payload-sized URBs, as a complete payload would be containted in a single 
URB, but becomes a bit more complex for smaller URBs. If the payload actual 
size (which can be smaller than the payload maximum size reported by the 
device for variable size payloads) is not a multiple of the URB size, the 
last URB of a payload will have a smaller size. In the other case, I was 
wondering if the driver we would receive an empty URB at the end of the 
payload.

I know that drivers usually submit URBs big enough to contain a single 
payload. However, with this buggy device, the payload size is too big for 
some memory constrained hosts.

Do you think the device should be considered broken in that it does require 
lots of memory, or is the "split bulk URB" approach viable ?

Best regards,

Laurent Pinchart


From mrechberger at gmail.com  Tue May  8 11:07:43 2007
From: mrechberger at gmail.com (Markus Rechberger)
Date: Tue, 8 May 2007 11:07:43 +0200
Subject: [Linux-uvc-devel] Issues with the Linux UVC driver (Was "Where
	is V4L headed ?")
In-Reply-To: <200705081049.30654.laurent.pinchart@skynet.be>
References: <200705041501.16398.laurent.pinchart@skynet.be>
	<200705070953.18938.laurent.pinchart@skynet.be>
	<20070508002209.GA31675@suse.de>
	<200705081049.30654.laurent.pinchart@skynet.be>
Message-ID: <d9def9db0705080207v6d4b05bfn7c18da1df9850884@mail.gmail.com>

On 5/8/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> Hi Greg,
>
> On Tuesday 08 May 2007, Greg KH wrote:
> > On Mon, May 07, 2007 at 09:53:18AM +0200, Laurent Pinchart wrote:
> > > On Sunday 06 May 2007, Markus Rechberger wrote:
> > > > I defined the boundaries by looking at the packet size, there was no
> > > > packet which had the length 0, since I had to do a fast solution I
> > > > just looked at the packet size which was smaller than the average
> > > > packets, this indicated a new frame for me.
> > >
> > > I don't like heuristics. This is certainly not a proper solution. Either
> > > all URBs except the last one are full (with possibly a zero sized URB if
> > > the payload size is a multiple of the URB size), or they are not.
> > > According to the USB 2.0 specification this should be the case. I'll test
> > > this on the only bulk device I own.
> > >
> > > > However this doesn't work well with 176x144 the driver cuts around 20
> > > > lines ontop of the video.
> > > > I'll also have a closer look at it tomorrow.
> > > > Regarding the specs every frame should start with some frameheaders.
> > >
> > > Every payload starts with a payload header. This is why I need a reliable
> > > way to detect payload boundaries.
> >
> > I don't understand why you need to know this.  The USB host controller
> > will handle the zero length packets for you, if needed, and it will also
> > divide up your bulk urb into the proper sizes for you, depending on the
> > hardware size of the endpoint.
> >
> > And you also already know the size of the bulk endpoint in your driver,
> > if you want to restrict your urb size to that, however, for decent
> > speeds, I would not recommend doing this, but instead, letting the
> > hardware divide up the urb for you into smaller pieces, filling the
> > hardware pipeline up properly.
>
> The issue here is memory usage. The device which triggered all this discussion
> is a webcam using bulk payloads of 2.7MB, which is quite a lot for memory
> constrained hosts. Instead of submitting a 2.7MB URB which would then be
> divided in 512 bytes packets by the USB host controller, Markus adviced to
> use smaller URBs (a few tens or hundreds of kilobytes). Those URBs would also
> be divided in 512 bytes packets by the USB host controller.
>
> When submitting URBs smaller than the maximum payload size, the problem that
> arises is that I need a way to detect payload boundaries. This was easy with
> payload-sized URBs, as a complete payload would be containted in a single
> URB, but becomes a bit more complex for smaller URBs. If the payload actual
> size (which can be smaller than the payload maximum size reported by the
> device for variable size payloads) is not a multiple of the URB size, the
> last URB of a payload will have a smaller size. In the other case, I was
> wondering if the driver we would receive an empty URB at the end of the
> payload.
>
> I know that drivers usually submit URBs big enough to contain a single
> payload. However, with this buggy device, the payload size is too big for
> some memory constrained hosts.
>
> Do you think the device should be considered broken in that it does require
> lots of memory, or is the "split bulk URB" approach viable ?
>

Hi Laurent,

I wouldn't consider it as broken since that device works with vmware
in windows, any time.
As far as I captured the usbbus in windows the Urbs are also smaller in windows.
The 2.7 MB constraint is a result of 1280x1024x2 (YUY2), so the
payload would be 2.7 MB according to how it was done initially.
Even though, the requested videosize in any case was 176x144x2, so
only 50688 bytes would effectivly be used.
The 2.7 mb constraint was read from the uvc config space, so there's
very likely a way to do it right by allocating NR packets * max packet
size for each urb. MS uvc driver works with that device in USB 1.1 and
USB 2.0 mode, where USB 1.1 introduces mjpeg interfaces.

(beside that I haven't tested the latest patch yet, but will do today)

thanks,
Markus


> Best regards,
>
> Laurent Pinchart
>


-- 
Markus Rechberger


From laurent.pinchart at skynet.be  Tue May  8 11:20:41 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 8 May 2007 11:20:41 +0200
Subject: [Linux-uvc-devel] Issues with the Linux UVC driver (Was "Where
	is V4L headed ?")
In-Reply-To: <d9def9db0705080207v6d4b05bfn7c18da1df9850884@mail.gmail.com>
References: <200705041501.16398.laurent.pinchart@skynet.be>
	<200705081049.30654.laurent.pinchart@skynet.be>
	<d9def9db0705080207v6d4b05bfn7c18da1df9850884@mail.gmail.com>
Message-ID: <200705081120.41896.laurent.pinchart@skynet.be>

On Tuesday 08 May 2007, Markus Rechberger wrote:
> On 5/8/07, Laurent Pinchart <laurent.pinchart at skynet.be> wrote:
> > Hi Greg,
> >
> > On Tuesday 08 May 2007, Greg KH wrote:
> > > On Mon, May 07, 2007 at 09:53:18AM +0200, Laurent Pinchart wrote:
> > > > On Sunday 06 May 2007, Markus Rechberger wrote:
> > > > > I defined the boundaries by looking at the packet size, there was
> > > > > no packet which had the length 0, since I had to do a fast solution
> > > > > I just looked at the packet size which was smaller than the average
> > > > > packets, this indicated a new frame for me.
> > > >
> > > > I don't like heuristics. This is certainly not a proper solution.
> > > > Either all URBs except the last one are full (with possibly a zero
> > > > sized URB if the payload size is a multiple of the URB size), or they
> > > > are not. According to the USB 2.0 specification this should be the
> > > > case. I'll test this on the only bulk device I own.
> > > >
> > > > > However this doesn't work well with 176x144 the driver cuts around
> > > > > 20 lines ontop of the video.
> > > > > I'll also have a closer look at it tomorrow.
> > > > > Regarding the specs every frame should start with some
> > > > > frameheaders.
> > > >
> > > > Every payload starts with a payload header. This is why I need a
> > > > reliable way to detect payload boundaries.
> > >
> > > I don't understand why you need to know this.  The USB host controller
> > > will handle the zero length packets for you, if needed, and it will
> > > also divide up your bulk urb into the proper sizes for you, depending
> > > on the hardware size of the endpoint.
> > >
> > > And you also already know the size of the bulk endpoint in your driver,
> > > if you want to restrict your urb size to that, however, for decent
> > > speeds, I would not recommend doing this, but instead, letting the
> > > hardware divide up the urb for you into smaller pieces, filling the
> > > hardware pipeline up properly.
> >
> > The issue here is memory usage. The device which triggered all this
> > discussion is a webcam using bulk payloads of 2.7MB, which is quite a lot
> > for memory constrained hosts. Instead of submitting a 2.7MB URB which
> > would then be divided in 512 bytes packets by the USB host controller,
> > Markus adviced to use smaller URBs (a few tens or hundreds of kilobytes).
> > Those URBs would also be divided in 512 bytes packets by the USB host
> > controller.
> >
> > When submitting URBs smaller than the maximum payload size, the problem
> > that arises is that I need a way to detect payload boundaries. This was
> > easy with payload-sized URBs, as a complete payload would be containted
> > in a single URB, but becomes a bit more complex for smaller URBs. If the
> > payload actual size (which can be smaller than the payload maximum size
> > reported by the device for variable size payloads) is not a multiple of
> > the URB size, the last URB of a payload will have a smaller size. In the
> > other case, I was wondering if the driver we would receive an empty URB
> > at the end of the payload.
> >
> > I know that drivers usually submit URBs big enough to contain a single
> > payload. However, with this buggy device, the payload size is too big for
> > some memory constrained hosts.
> >
> > Do you think the device should be considered broken in that it does
> > require lots of memory, or is the "split bulk URB" approach viable ?
>
> Hi Laurent,
>
> I wouldn't consider it as broken since that device works with vmware
> in windows, any time.
> As far as I captured the usbbus in windows the Urbs are also smaller in
> windows. The 2.7 MB constraint is a result of 1280x1024x2 (YUY2), so the
> payload would be 2.7 MB according to how it was done initially.

It doesn't have to be. I have a bulk camera which supports 1280x1024 images in 
YUY2 format with 160kB payloads. The video frame is just divided in several 
payloads, each of them starting with a header.

> Even though, the requested videosize in any case was 176x144x2, so
> only 50688 bytes would effectivly be used.
> The 2.7 mb constraint was read from the uvc config space, so there's
> very likely a way to do it right by allocating NR packets * max packet
> size for each urb. MS uvc driver works with that device in USB 1.1 and
> USB 2.0 mode, where USB 1.1 introduces mjpeg interfaces.

I don't know what the Windows driver does, so I can't really comment on that.

My point is that the device developers have overlooked the payload size issue. 
They should have used smaller payloads. This is why the device is 
bad/buggy/whatever we want to call this. Now, if the Linux USB stack should 
support split bulk transfers to work around those kind of devices is another 
issue. This is possible in the Linux UVC driver as long as the USB stack 
returns a "short (or zero) URB" at the end of the payload, much like the USB 
device returns a short (or zero) packet. Short URBs seem not to be an issue, 
but "zero URBs" might be.

> (beside that I haven't tested the latest patch yet, but will do today)

Let me know how it works.

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue May  8 11:25:11 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 8 May 2007 11:25:11 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS 37
In-Reply-To: <20070507233946.4713a6f7@frodo.mittelerde>
References: <20070501011150.01e3bf43@frodo.mittelerde>
	<200705071532.58682.laurent.pinchart@skynet.be>
	<20070507233946.4713a6f7@frodo.mittelerde>
Message-ID: <200705081125.11927.laurent.pinchart@skynet.be>

On Monday 07 May 2007, Andreas Volz wrote:
> Am Mon, 7 May 2007 15:32:58 +0200 schrieb Laurent Pinchart:
> > On Monday 07 May 2007, Laurent Pinchart wrote:
> > > On Monday 07 May 2007, Andreas Volz wrote:
> > > > Am Sun, 6 May 2007 22:10:25 +0200 schrieb Laurent Pinchart:
> >
> > [snip]
> >
> > > > > There is no point in testing dv mode, only webcam mode will
> > > > > work for now. We will try dv mode after being done with webcam
> > > > > mode.
> >
> > Now that webcam mode somehow works, could you test the following
> > patch with DV mode ? The driver should detect and initialise the
> > camera, but luvcview will probably not work. Please post the kernel
> > log (at trace=255) after plugging the device.
>
> I applied the patch. I tried it with trace=255 and trace=65535. Here is
> the result:
>
> http://tux-style.de/tmp/dmesg2.txt

My bad, I forgot part of the patch :-/ Could you please try again with this 
one ? Thanks.

Best regards,

Laurent Pinchart
-------------- next part --------------
A non-text attachment was scrubbed...
Name: panasonic.diff
Type: text/x-diff
Size: 1531 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070508/9bbfb904/attachment.diff>

From laurent.pinchart at skynet.be  Tue May  8 11:42:14 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 8 May 2007 11:42:14 +0200
Subject: [Linux-uvc-devel] soft lockup
In-Reply-To: <1178528700.5601.5.camel@cass-wks>
References: <1178528700.5601.5.camel@cass-wks>
Message-ID: <200705081142.14723.laurent.pinchart@skynet.be>

Hi Guillaume,

> I'm using the latest uvc driver from SVN (patched with the well know
> "reset patch") on Ubuntu Feisty (2.6.20-15-generic) and got this error
> after the boot:
>
> [   49.853285] usbcore: registered new interface driver snd-usb-audio
> [   49.861202] uvcvideo: Found UVC 1.00 device <unnamed> (046d:08ce)
> [   59.384003] BUG: soft lockup detected on CPU#0!
> [   59.384013]  [<c015353c>] softlockup_tick+0x9c/0xf0
> [   59.384029]  [<c0130633>] update_process_times+0x33/0x80
> [   59.384037]  [<c01154b0>] smp_apic_timer_interrupt+0x70/0x80
> [   59.384043]  [<c01042f8>] apic_timer_interrupt+0x28/0x30
> [   59.384062]  [<c011c110>] native_read_tsc+0x0/0x10
> [   59.384069]  [<c01f17d8>] delay_tsc+0x18/0x30
> [   59.384075]  [<c01f1836>] __delay+0x6/0x10
> [   59.384078]  [<f8b7977f>] uvc_query_ctrl+0x5f/0x170 [uvcvideo]
> [   59.384089]  [<c01f1084>] vsnprintf+0x2f4/0x5f0
> [   59.384111]  [<f8b79a11>] uvc_get_video_ctrl+0x61/0x170 [uvcvideo]
> [   59.384142]  [<f8b79b43>] uvc_video_init+0x23/0xe0 [uvcvideo]
> [   59.384151]  [<f8b75754>] uvc_register_video+0x524/0x640 [uvcvideo]
> [   59.384179]  [<f8b75bcb>] uvc_probe+0x2ab/0x1720 [uvcvideo]
> [   59.384260]  [<f8884c86>] usb_probe_interface+0x96/0xe0 [usbcore]
> [   59.384284]  [<c0257a66>] really_probe+0x66/0x190
> [   59.384290]  [<c0257bd9>] driver_probe_device+0x49/0xc0
> [   59.384302]  [<c0257dae>] __driver_attach+0x9e/0xa0
> [   59.384310]  [<c0256f3b>] bus_for_each_dev+0x3b/0x60
> [   59.384322]  [<c0257904>] driver_attach+0x24/0x30
> [   59.384325]  [<c0257d10>] __driver_attach+0x0/0xa0
> [   59.384328]  [<c02572cb>] bus_add_driver+0x7b/0x1a0
> [   59.384342]  [<f888472b>] usb_register_driver+0x7b/0x100 [usbcore]
> [   59.384366]  [<f8a85068>] uvc_init+0x68/0x81 [uvcvideo]
> [   59.384373]  [<c014421d>] sys_init_module+0x15d/0x1ba0
> [   59.384436]  [<c0107a5d>] sys_mmap2+0xcd/0xd0
> [   59.384450]  [<c01031f0>] sysenter_past_esp+0x69/0xa9
> [   59.384475]  =======================
>
>
> Is it a known bug?

No this isn't. The bug is caused by the "reset patch". I'm no expert there, 
but you might be using an old version of the patch. Please make sure you're 
using 
http://www.mail-archive.com/linux-uvc-devel%40lists.berlios.de/msg00386.html 
or newer. There should be no call to delay(), which is what caused the soft 
lockup.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue May  8 11:44:23 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 8 May 2007 11:44:23 +0200
Subject: [Linux-uvc-devel] Fwd: Orbicam - 046d:09b0 Logitech, Inc
In-Reply-To: <565389770705071359r26edd940u84eaf88ee4ce6ab6@mail.gmail.com>
References: <565389770705061428i354af273qcffa3e6fd4cc33d8@mail.gmail.com>
	<200705071002.22435.laurent.pinchart@skynet.be>
	<565389770705071359r26edd940u84eaf88ee4ce6ab6@mail.gmail.com>
Message-ID: <200705081144.23291.laurent.pinchart@skynet.be>

Hi Domi,

> I install luvcview. It's the fail.
>
> $  # /usr/local/bin/luvcview
> luvcview version 0.2.0
> Video driver: x11
> A window manager is available
> video /dev/video0
> Unable to set format: 22.
>  Init v4L2 failed !! exit fatal

The webcam doesn't support MJPEG format which luvcview uses by default. Please 
try

luvcview -f yuv

Cheers,

Laurent Pinchart


From linux at rubli.info  Tue May  8 16:24:10 2007
From: linux at rubli.info (Martin Rubli)
Date: Tue, 08 May 2007 22:24:10 +0800
Subject: [Linux-uvc-devel] Fwd: Orbicam - 046d:09b0 Logitech, Inc
In-Reply-To: <565389770705061530w2ef97b10p99cc87d470ec052e@mail.gmail.com>
References: <565389770705061428i354af273qcffa3e6fd4cc33d8@mail.gmail.com>
	<200705062337.34639.laurent.pinchart@skynet.be>
	<565389770705061502h6b8fe1a2o9505c6616e1157e5@mail.gmail.com>
	<565389770705061530w2ef97b10p99cc87d470ec052e@mail.gmail.com>
Message-ID: <op.trxrqlod42iof8@nb-mrublixp.am.logitech.com>

Last time I checked Camorama was a V4L1-only application. Have you tried  
with luvcview? If you do, remember to use the "-f yuv" switch as your  
camera does not support the MJPEG format, which is luvcview's default.

I tested your Orbicam with both, the main trunk and the dynctrls branch,  
and both of them work fine. No crash, even when trying to launch Camorama.

Cheers,
Martin


On Mon, 07 May 2007 06:30:05 +0800, Domijor <domijor at gmail.com> wrote:

> Always I remove the old driver.
> # rm /lib/modules/2.6.18-4-686/usb/media/uvcvideo.ko
>
> Now show:
>
> # rmmod uvcvideo
> Show dmesg:  usbcore: deregistering driver uvcvideo
>
> # modprobe uvcvideo trace=255
>
> # dmesg | tail
> uvcvideo: Adding mapping Brightness to control
> 00000000-0000-0000-0000-000000000101/2.
> uvcvideo: Adding mapping Contrast to control
> 00000000-0000-0000-0000-000000000101/3.
> uvcvideo: Adding mapping Hue to control
> 00000000-0000-0000-0000-000000000101/6.
> uvcvideo: Adding mapping Saturation to control
> 00000000-0000-0000-0000-000000000101/7.
> uvcvideo: Adding mapping Sharpness to control
> 00000000-0000-0000-0000-000000000101/8.
> uvcvideo: Adding mapping Gamma to control
> 00000000-0000-0000-0000-000000000101/9.
> uvcvideo: Adding mapping Backlight Compensation to control
> 00000000-0000-0000-0000-000000000101/1.
> uvcvideo: Adding mapping Gain to control
> 00000000-0000-0000-0000-000000000101/4.
> uvcvideo: Adding mapping Power Line Frequency to control
> 00000000-0000-0000-0000-000000000101/5.
> uvcvideo: Adding mapping Hue, Auto to control
> 00000000-0000-0000-0000-000000000101/16.
> uvcvideo: Adding mapping Pan (relative) to control
> 63610682-5070-49ab-b8cc-b3855e8d2256/1.
> uvcvideo: Adding mapping Tilt (relative) to control
> 63610682-5070-49ab-b8cc-b3855e8d2256/1.
> uvcvideo: Adding mapping Pan/Tilt (reset) to control
> 63610682-5070-49ab-b8cc-b3855e8d2256/2.
> uvcvideo: Adding mapping Exposure, Auto to control
> 00000000-0000-0000-0000-000000000001/2.
> uvcvideo: Adding mapping Exposure (Absolute) to control
> 00000000-0000-0000-0000-000000000001/4.
> uvcvideo: Adding mapping White Balance Temperature, Auto to control
> 00000000-0000-0000-0000-000000000101/11.
> uvcvideo: Adding mapping White Balance Temperature to control
> 00000000-0000-0000-0000-000000000101/10.
> uvcvideo: Probing generic UVC device 4
> uvcvideo: Found format Uncompressed.
> uvcvideo: - 640x480 (15.0 fps)
> uvcvideo: - 352x288 (30.0 fps)
> uvcvideo: - 320x240 (30.0 fps)
> uvcvideo: - 176x144 (30.0 fps)
> uvcvideo: - 160x120 ( 30.0 fps)
> uvcvideo: - 1280x960 (8.0 fps)
> uvcvideo: - 1280x1024 (8.0 fps)
> uvcvideo: Found a Status endpoint (addr 83).
> uvcvideo: Found UVC 1.00 device <unnamed> (046d:09b0)
> uvcvideo: Added control 00000000-0000-0000-0000-000000000101/2 to device  
> 4
> entity 3
> uvcvideo: Added control 00000000-0000-0000-0000-000000000101/3 to device  
> 4
> entity 3
> uvcvideo: Added control 00000000-0000-0000-0000-000000000101/7 to device  
> 4
> entity 3
> uvcvideo: Added control 00000000-0000-0000-0000-000000000101/8 to device  
> 4
> entity 3
> uvcvideo: Added control 00000000-0000-0000-0000-000000000101/9 to device  
> 4
> entity 3
> uvcvideo: Added control 00000000-0000-0000-0000-000000000101/1 to device  
> 4
> entity 3
> uvcvideo: Added control 00000000-0000-0000-0000-000000000101/4 to device  
> 4
> entity 3
> uvcvideo: Added control 00000000-0000-0000-0000-000000000101/5 to device  
> 4
> entity 3
> uvcvideo: Added control 00000000-0000-0000-0000-000000000001/2 to device  
> 4
> entity 1
> uvcvideo: Added control 00000000-0000-0000-0000-000000000001/4 to device  
> 4
> entity 1
> uvcvideo: Added control 00000000-0000-0000-0000-000000000101/11 to  
> device 4
> entity 3
> uvcvideo: Added control 00000000-0000-0000-0000-000000000101/10 to  
> device 4
> entity 3
> uvcvideo: Scanning UVC chain: OT 2 <- Unit 3 (-> 4 13 12 10) <- IT 1
> uvcvideo: Found a valid video chain (1 -> 2).
> uvcvideo: UVC device initialized.
> usbcore: registered new driver uvcvideo
> USB Video Class driver (v0.1.0)
>
> # lsmod | grep uvcvideo
> uvcvideo               37156  0
> compat_ioctl32          1472  1 uvcvideo
> videodev               21120  1 uvcvideo
> v4l1_compat            12036  2 uvcvideo,videodev
> v4l2_common            20448  2 uvcvideo,videodev
> usbcore               112644  5 uvcvideo,usbhid,ehci_hcd,uhci_hcd
>
> # ll /dev/vid*
> crw-rw---- 1 root video 81, 0 2007-05-06 22:46 /dev/video0
>
> # chmod a+r /dev/video0
>
> # ll /dev/vid*
> crw-rw-r-- 1 root video 81, 0 2007-05-06 22:46 /dev/video0
>
> $ camorama
> Windows error: Could not connect to video device (/dev/video0). Please  
> check
> connection
>
> # dmesg | tail
> uvcvideo: uvc_v4l2_open
> uvcvideo: uvc_v4l2_ioctl
> v4l1 ioctl VIDIOCGCAP, dir=r- (0x803c7601)
> v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
> v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
> v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
> v4l2 ioctl VIDIOC_ENUM_FMT, dir=rw (0xc0405602)
> v4l2 ioctl VIDIOC_TRY_FMT, dir=rw (0xc0cc5640)
> uvcvideo: Trying format 0x56595559 (YUYV): 10000x10000.
> uvcvideo: Using default frame interval 125000.0 us (8.0 fps).
> uvcvideo: uvc_v4l2_ioctl
> v4l1 ioctl VIDIOCGWIN, dir=r- (0x80207609)
> v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
> v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
> uvcvideo: uvc_v4l2_ioctl
> v4l1 ioctl VIDIOCSWIN, dir=-w (0x4020760a)
> v4l2 ioctl VIDIOC_STREAMOFF, dir=-w (0x40045613)
> v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
> v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
> uvcvideo: Trying format 0x56595559 (YUYV): 640x512.
> uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
> v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
> uvcvideo: uvc_v4l2_ioctl
> v4l1 ioctl VIDIOCGWIN, dir=r- (0x80207609)
> v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
> v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
> uvcvideo: uvc_v4l2_ioctl
> v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
> v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
> v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
> v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
> uvcvideo: Control 0x00980903 not found.
> v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
> v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
> v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
> v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
> v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
> v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
> v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
> uvcvideo: uvc_v4l2_ioctl
> v4l1 ioctl VIDIOCGMBUF, dir=r- (0x80887614)
> uvcvideo: Unknown ioctl 0x80887614
> uvcvideo: uvc_v4l2_release
>
> Thanks for your answer.
> Domi
>
> 2007/5/6, Laurent Pinchart <laurent.pinchart at skynet.be>:
>>
>> Hi Domi,
>>
>> > I downloaded driver trunk.
>> >
>> > # make
>> > Building USB Video Class driver...
>> > make[1]: se ingresa al directorio  
>> `/usr/src/linux-headers-2.6.18-4-686'
>> >   Building modules, stage 2.
>> >   MODPOST
>> > make[1]: se sale del directorio `/usr/src/linux-headers-2.6.18-4-686'
>> >
>> > # make install
>> > Installing USB Video Class driver...
>> > make[1]: se ingresa al directorio `/usr/src/linux-  
>> headers-2.6.18-4-686'
>> >   INSTALL /home/domi/Desktop/webcam/linux-uvc-trunk/uvcvideo.ko
>> >   DEPMOD  2.6.18-4-686
>> > make[1]: se sale del directorio `/usr/src/linux-headers-2.6.18-4-686'
>> > depmod -ae
>> >
>> > # modprobe uvcvideo
>> >
>> > # lsmod |grep uvcvideo
>> > uvcvideo               37156  0
>> > compat_ioctl32          1472  1 uvcvideo
>> > videodev               21120  1 uvcvideo
>> > v4l1_compat            12036  2 uvcvideo,videodev
>> > v4l2_common            20448  2 uvcvideo,videodev
>> > usbcore               112644  5 uvcvideo,usbhid,ehci_hcd,uhci_hcd
>> >
>> > # dmesg | tail
>> > Nothing new.
>> >
>> > The experimental driver showed:
>> > uvcvideo: Found UVC 1.00 device <unnamed> (046d:09b0)
>> > usbcore: registered new driver uvcvideo
>> > USB Video Class driver (v0.1.0)
>> >
>> > Trunk driver Nothing show.
>>
>>
>> It should print a message. Make sure you removed the old driver before
>> loading
>> the new one. You can raise the debug level with
>>
>> modprobe uvcvideo trace=255
>>
>> > # ll /dev/video0
>> > crw-rw---- 1 root video 81, 0 2007-05-06 22:43 /dev/video0
>> >
>> > # chmod a+r /dev/video0
>> >
>> > # ll /dev/video0
>> > crw-rw-r-- 1 root video 81, 0 2007-05-06 22:43 /dev/video0
>> >
>> > $ camorama
>> >
>> > Windows error: Could not connect to video device (/dev/video0). Please
>> > check connection.
>> >
>> > My english is bad. Sorry.
>> >
>> > Any idea?
>> >
>> > Thanks.
>>
>> Cheers,
>>
>> Laurent Pinchart
>>



From domijor at gmail.com  Tue May  8 21:34:16 2007
From: domijor at gmail.com (Domijor)
Date: Tue, 8 May 2007 20:34:16 +0100
Subject: [Linux-uvc-devel] Fwd: Orbicam - 046d:09b0 Logitech, Inc
In-Reply-To: <200705081144.23291.laurent.pinchart@skynet.be>
References: <565389770705061428i354af273qcffa3e6fd4cc33d8@mail.gmail.com>
	<200705071002.22435.laurent.pinchart@skynet.be>
	<565389770705071359r26edd940u84eaf88ee4ce6ab6@mail.gmail.com>
	<200705081144.23291.laurent.pinchart@skynet.be>
Message-ID: <565389770705081234y55060109hbfc00755237c3390@mail.gmail.com>

Thank you very much for your help.
The camera work fine.

I execute the command "$ ./luvcview -f yuv"

One last question. What program of video conference can I use with my cam?
Ekiga and camorama don't work.

Thanks. :-D
Domi

2007/5/8, Laurent Pinchart <laurent.pinchart at skynet.be>:
>
> Hi Domi,
>
> > I install luvcview. It's the fail.
> >
> > $  # /usr/local/bin/luvcview
> > luvcview version 0.2.0
> > Video driver: x11
> > A window manager is available
> > video /dev/video0
> > Unable to set format: 22.
> >  Init v4L2 failed !! exit fatal
>
> The webcam doesn't support MJPEG format which luvcview uses by default.
> Please
> try
>
> luvcview -f yuv
>
> Cheers,
>
> Laurent Pinchart
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070508/857027c2/attachment.html>

From lists at brachttal.net  Tue May  8 23:10:13 2007
From: lists at brachttal.net (Andreas Volz)
Date: Tue, 8 May 2007 23:10:13 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS 37
In-Reply-To: <200705081125.11927.laurent.pinchart@skynet.be>
References: <20070501011150.01e3bf43@frodo.mittelerde>
	<200705071532.58682.laurent.pinchart@skynet.be>
	<20070507233946.4713a6f7@frodo.mittelerde>
	<200705081125.11927.laurent.pinchart@skynet.be>
Message-ID: <20070508231013.0d7990e4@frodo.mittelerde>

Am Tue, 8 May 2007 11:25:11 +0200 schrieb Laurent Pinchart:

> On Monday 07 May 2007, Andreas Volz wrote:
> > Am Mon, 7 May 2007 15:32:58 +0200 schrieb Laurent Pinchart:
> > > On Monday 07 May 2007, Laurent Pinchart wrote:
> > > > On Monday 07 May 2007, Andreas Volz wrote:
> > > > > Am Sun, 6 May 2007 22:10:25 +0200 schrieb Laurent Pinchart:
> > >
> > > [snip]
> > >
> > > > > > There is no point in testing dv mode, only webcam mode will
> > > > > > work for now. We will try dv mode after being done with
> > > > > > webcam mode.
> > >
> > > Now that webcam mode somehow works, could you test the following
> > > patch with DV mode ? The driver should detect and initialise the
> > > camera, but luvcview will probably not work. Please post the
> > > kernel log (at trace=255) after plugging the device.
> >
> > I applied the patch. I tried it with trace=255 and trace=65535.
> > Here is the result:
> >
> > http://tux-style.de/tmp/dmesg2.txt
> 
> My bad, I forgot part of the patch :-/ Could you please try again
> with this one ? Thanks.

Great work! The DV source works now. I could start lucview and if I
play the video on the camera it shows in the window. I don't think it
has the same resolution as with the firewire connector. Is this a
limitation?

Here is a dmesg. I played the video and connected it again at the end
because there're many messages in the dmesg log.

http://tux-style.de/tmp/dmesg_dv_works.txt

BTW: I got today my firewire card. The camera has also an firewire
connector. I worked "just out of the box". But I'm still interested to
get all done with USB. I like to have my hardware fully supported. Why
should one buy 100% hardware, but use only 80%? :-)

regards
Andreas


From laurent.pinchart at skynet.be  Tue May  8 23:31:33 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 8 May 2007 23:31:33 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS 37
In-Reply-To: <20070508231013.0d7990e4@frodo.mittelerde>
References: <20070501011150.01e3bf43@frodo.mittelerde>
	<200705081125.11927.laurent.pinchart@skynet.be>
	<20070508231013.0d7990e4@frodo.mittelerde>
Message-ID: <200705082331.33423.laurent.pinchart@skynet.be>

Hi Andreas,

On Tuesday 08 May 2007, Andreas Volz wrote:
> Am Tue, 8 May 2007 11:25:11 +0200 schrieb Laurent Pinchart:
> > On Monday 07 May 2007, Andreas Volz wrote:
> > > Am Mon, 7 May 2007 15:32:58 +0200 schrieb Laurent Pinchart:
> > > > On Monday 07 May 2007, Laurent Pinchart wrote:
> > > > > On Monday 07 May 2007, Andreas Volz wrote:
> > > > > > Am Sun, 6 May 2007 22:10:25 +0200 schrieb Laurent Pinchart:
> > > >
> > > > [snip]
> > > >
> > > > > > > There is no point in testing dv mode, only webcam mode will
> > > > > > > work for now. We will try dv mode after being done with
> > > > > > > webcam mode.
> > > >
> > > > Now that webcam mode somehow works, could you test the following
> > > > patch with DV mode ? The driver should detect and initialise the
> > > > camera, but luvcview will probably not work. Please post the
> > > > kernel log (at trace=255) after plugging the device.
> > >
> > > I applied the patch. I tried it with trace=255 and trace=65535.
> > > Here is the result:
> > >
> > > http://tux-style.de/tmp/dmesg2.txt
> >
> > My bad, I forgot part of the patch :-/ Could you please try again
> > with this one ? Thanks.
>
> Great work! The DV source works now. I could start lucview and if I
> play the video on the camera it shows in the window.

Really ? Haven't you forgotten to switch the camera back to DV mode ? It seems 
to be in webcam mode.

> I don't think it has the same resolution as with the firewire connector. Is
> this a limitation?

If the camera is indeed in webcam mode, that should explain why :-)

> Here is a dmesg. I played the video and connected it again at the end
> because there're many messages in the dmesg log.
>
> http://tux-style.de/tmp/dmesg_dv_works.txt

Seems to be in webcam mode.

> BTW: I got today my firewire card. The camera has also an firewire
> connector. I worked "just out of the box". But I'm still interested to
> get all done with USB. I like to have my hardware fully supported. Why
> should one buy 100% hardware, but use only 80%? :-)

Let's try to get DV mode working then :-) Try to switch your camera to DV 
mode. It should be properly detected by the driver, but luvcview should not 
work. Once we get that done, I'll send you a small test application to 
capture DV data to disk.

Laurent Pinchart


From lists at brachttal.net  Wed May  9 00:06:34 2007
From: lists at brachttal.net (Andreas Volz)
Date: Wed, 9 May 2007 00:06:34 +0200
Subject: [Linux-uvc-devel] Panasonic NV-GS 37
In-Reply-To: <200705082331.33423.laurent.pinchart@skynet.be>
References: <20070501011150.01e3bf43@frodo.mittelerde>
	<200705081125.11927.laurent.pinchart@skynet.be>
	<20070508231013.0d7990e4@frodo.mittelerde>
	<200705082331.33423.laurent.pinchart@skynet.be>
Message-ID: <20070509000634.6542732f@frodo.mittelerde>

Am Tue, 8 May 2007 23:31:33 +0200 schrieb Laurent Pinchart:

> Hi Andreas,
> 
> On Tuesday 08 May 2007, Andreas Volz wrote:
> > Am Tue, 8 May 2007 11:25:11 +0200 schrieb Laurent Pinchart:
> > > On Monday 07 May 2007, Andreas Volz wrote:
> > > > Am Mon, 7 May 2007 15:32:58 +0200 schrieb Laurent Pinchart:
> > > > > On Monday 07 May 2007, Laurent Pinchart wrote:
> > > > > > On Monday 07 May 2007, Andreas Volz wrote:
> > > > > > > Am Sun, 6 May 2007 22:10:25 +0200 schrieb Laurent
> > > > > > > Pinchart:
> > > > >
> > > > > [snip]
> > > > >
> > > > > > > > There is no point in testing dv mode, only webcam mode
> > > > > > > > will work for now. We will try dv mode after being done
> > > > > > > > with webcam mode.
> > > > >
> > > > > Now that webcam mode somehow works, could you test the
> > > > > following patch with DV mode ? The driver should detect and
> > > > > initialise the camera, but luvcview will probably not work.
> > > > > Please post the kernel log (at trace=255) after plugging the
> > > > > device.
> > > >
> > > > I applied the patch. I tried it with trace=255 and trace=65535.
> > > > Here is the result:
> > > >
> > > > http://tux-style.de/tmp/dmesg2.txt
> > >
> > > My bad, I forgot part of the patch :-/ Could you please try again
> > > with this one ? Thanks.
> >
> > Great work! The DV source works now. I could start lucview and if I
> > play the video on the camera it shows in the window.
> 
> Really ? Haven't you forgotten to switch the camera back to DV mode ?
> It seems to be in webcam mode.

Yes it was in webcam mode.

> > I don't think it has the same resolution as with the firewire
> > connector. Is this a limitation?
> 
> If the camera is indeed in webcam mode, that should explain why :-)
> 
> > Here is a dmesg. I played the video and connected it again at the
> > end because there're many messages in the dmesg log.
> >
> > http://tux-style.de/tmp/dmesg_dv_works.txt
> 
> Seems to be in webcam mode.
> 
> > BTW: I got today my firewire card. The camera has also an firewire
> > connector. I worked "just out of the box". But I'm still interested
> > to get all done with USB. I like to have my hardware fully
> > supported. Why should one buy 100% hardware, but use only 80%? :-)
> 
> Let's try to get DV mode working then :-) Try to switch your camera
> to DV mode. It should be properly detected by the driver, but
> luvcview should not work. Once we get that done, I'll send you a
> small test application to capture DV data to disk.

Here again with dv mode:

http://tux-style.de/tmp/dv_mode.txt

No video shows as you expected.

I tested it again in webcam mode. I could switch at the camera from
record to playback setting. Then I could play the yet recorded video and
see this though the webcam mode in lucview. So I thought DV mode was
working...

regards
Andreas


From gbell_spamless at yahoo.com  Wed May  9 00:07:23 2007
From: gbell_spamless at yahoo.com (Greg Bell)
Date: Wed, 9 May 2007 08:07:23 +1000 (EST)
Subject: [Linux-uvc-devel] Basic capture?
Message-ID: <648900.45554.qm@web33201.mail.mud.yahoo.com>

Hi UVC Developers,

First, thank you so much for the UVC driver... I'm happy to not need
windows!

Second, luvcview works great for me, but I'd like a way to capture a
single jpg image then quit.  The -c option captures "raw" then runs the
GUI.

The webcam tool from the xawtv project does this:

$ webcam
reading config file: /home/gbell2/.webcamrc
video4linux webcam v1.5 - (c) 1998-2002 Gerd Knorr
grabber config:
  size 1024x576 [16 bit YUV 4:2:2 (packed, YUYV)]
  input (null), norm (null), jpeg quality 75
  rotate=0, top=0, left=0, bottom=480, right=640
ioctl: VIDIOC_REQBUFS(count=1;type=VIDEO_CAPTURE;memory=MMAP): Invalid
argument
ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0
[];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.secon$
Invalid argument
capturing image failed


Since those are "ioctl" errors I thought they might be from the driver and
that I should post here...

Thanks for the time.

Greg Bell
Sydney, Australia


 Send instant messages to your online friends http://au.messenger.yahoo.com 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070509/90923a86/attachment.html>

From jq03 at tid.es  Wed May  9 16:27:33 2007
From: jq03 at tid.es (julien quelen)
Date: Wed, 09 May 2007 16:27:33 +0200
Subject: [Linux-uvc-devel] Max number of packets in an isochronous URB
Message-ID: <1178720853.22050.17.camel@altrandsd>

Hello,

I am working on video capture with several cameras.
I have Logitech QuickCam UltraVision webcams.

Is it possible to reduce the number of packets per isochronous URB in
uvcvideo driver?
By default, UVC_MAX_ISO_PACKETS is egual to 40.

When I change this value to 10 for example, image capture with 1 cam
works fine. However, as soon as i add and capture from a second camera,
images on both cams appear wrong (bad colours, image cut)..

Does somebody knows about this problem?

Thank you for any help!

Julien






From laurent.pinchart at skynet.be  Thu May 10 00:12:36 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 10 May 2007 00:12:36 +0200
Subject: [Linux-uvc-devel] [SVN] DV format support
Message-ID: <200705100012.36626.laurent.pinchart@skynet.be>

Hi everybody.

You hardly had time to recover from the previous SVN announcement, and here is 
already another news report that won't change the face of the world, but 
should help a few of you to enjoy their UVC cameras.

I just committed support for DV format. As DV is mostly found in camcorders, 
webcam users will not benefit from added functionalities. They will, however, 
have the chance to chase new bugs :-) The new code has of course been tested 
with various webcams, but I'll ask you as usual to stress test the driver 
like you have done until today.

I would like to thank Andreas Volz for letting me crash his kernel a few 
times, and all uvcvideo users for helping me to make the Linux UVC driver 
what it is today.

Cheers,

Laurent Pinchart


From ace at staticwave.ca  Thu May 10 03:09:19 2007
From: ace at staticwave.ca (Gabriel A. Devenyi)
Date: Wed, 9 May 2007 21:09:19 -0400
Subject: [Linux-uvc-devel] Basic capture?
In-Reply-To: <648900.45554.qm@web33201.mail.mud.yahoo.com>
References: <648900.45554.qm@web33201.mail.mud.yahoo.com>
Message-ID: <200705092109.19305.ace@staticwave.ca>

On May 08, 2007, Greg Bell wrote:
> Hi UVC Developers,
>
> First, thank you so much for the UVC driver... I'm happy to not need
> windows!
>
> Second, luvcview works great for me, but I'd like a way to capture a
> single jpg image then quit.  The -c option captures "raw" then runs the
> GUI.

Both uvccapture (http://staticwave.ca/source/uvccapture/) and fswebcam 
(http://www.firestorm.cx/fswebcam/) can capture individual frames from uvc 
devices into jpeg images, with optional post processing.


-- 
Gabriel A. Devenyi
ace at staticwave.ca


From bnc at astronomicalresearchaustralia.org  Thu May 10 03:26:18 2007
From: bnc at astronomicalresearchaustralia.org (Brian)
Date: Thu, 10 May 2007 11:26:18 +1000
Subject: [Linux-uvc-devel] Capture video/sound
In-Reply-To: <200705092109.19305.ace@staticwave.ca>
References: <648900.45554.qm@web33201.mail.mud.yahoo.com>
	<200705092109.19305.ace@staticwave.ca>
Message-ID: <464274BA.4060707@astronomicalresearchaustralia.org>

Hi,
Recently got my Logitech fusion working fine with uvc applications
including Motion.
However, I have not been able to capture the sound and video together.

Kmix(running suse linux10.1) has the capture turned on.
lsusb gives Bus 001 Device 002: ID 046d:08c1 Logitech, Inc.
xawtv -hwscan gives

/dev/video1: OK                         [ -device /dev/video1 ]
    type : v4l2
    name : USB Video Class device
    flags:  capture

usbview gives the info below.

So the sound should be available, how do I point an application at it?

Thanks,
Brian


uvcvideo / snd-usb-audio
Serial Number: AA2BCC92
Speed: 480Mb/s (high)
USB Version:  2.00
Device Class: 00(>ifc )
Device Subclass: 00
Device Protocol: 01
Maximum Default Endpoint Size: 64
Number of Configurations: 1
Vendor Id: 046d
Product Id: 08c1
Revision Number:  0.05

Config Number: 1
	Number of Interfaces: 4
	Attributes: 80
	MaxPower Needed: 500mA

	Interface Number: 0
		Name: uvcvideo
		Alternate Number: 0
		Class: ff(vend.)
		Sub Class: 1
		Protocol: 0
		Number of Endpoints: 1

			Endpoint Address: 87
			Direction: in
			Attribute: 3
			Type: Int.
			Max Packet Size: 16
			Interval: 16ms

	Interface Number: 2
		Name: snd-usb-audio
		Alternate Number: 0
		Class: 01(audio)
		Sub Class: 1
		Protocol: 0
		Number of Endpoints: 0

	Interface Number: 3
		Name: snd-usb-audio
		Alternate Number: 0
		Class: 01(audio)
		Sub Class: 2
		Protocol: 0
		Number of Endpoints: 0
-------------- next part --------------
A non-text attachment was scrubbed...
Name: bnc.vcf
Type: text/x-vcard
Size: 172 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070510/0913f0f0/attachment.vcf>

From laurent.pinchart at skynet.be  Thu May 10 10:54:24 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 10 May 2007 10:54:24 +0200
Subject: [Linux-uvc-devel] Some success with a Fujifilm FinePix A330
In-Reply-To: <1178575123.16552.16.camel@localhost.localdomain>
References: <1178575123.16552.16.camel@localhost.localdomain>
Message-ID: <200705101054.24811.laurent.pinchart@skynet.be>

Hi Viktor,

> I never thought that one day I would be able to use the webcam part of
> this digital camera, thanks a lot for your efforts!

You're welcome.

> I can report semi-success: using the uvcvideo driver (svn revision 101,
> self-compiled kernel 2.6.18.6 on Debian unstable), I get an image stream
> with luvcview (2007-01-07). But neither VLC nor mplayer are able to show
> or stream the video. I guess that this device is extremely simple,
> providing only 352x288, 10fps, with no other controls, and that VLC or
> mplayer are trying to access additional controls. In particular, both
> are trying to do something with the audio, although in both cases I'm
> specifying that no audio should be used.

Mplayer had a bug which prevented it from working with the Linux UVC driver. 
The fix has been committed to their SVN repository, but I'm not sure if it 
has been shipped by Debian yet.

Last time I checked, VLC had no proper V4L2 support. As the Linux UVC driver 
doesn't support the deprecated V4L1 interface, this explains why VLC doesn't 
work. Try bugging the developers to implement V4L2 :-)

> Below are four outputs. If I should supply some other information,
> please tell me. Or, of course, it might be that only VLC and mplayer
> have to be improved :-)

This seems to be the case :-) Could you try the latest MPlayer and see if it 
works ?

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu May 10 10:55:40 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 10 May 2007 10:55:40 +0200
Subject: [Linux-uvc-devel] Some success with a Fujifilm FinePix A330
In-Reply-To: <1178575123.16552.16.camel@localhost.localdomain>
References: <1178575123.16552.16.camel@localhost.localdomain>
Message-ID: <200705101055.40430.laurent.pinchart@skynet.be>

Hi again,

I forgot to ask you to post the lsusb -v output (using usbutils 0.72 or 
newer). I try to keep USB descriptors for all supported devices.

Cheers,

Laurent Pinchart


From laurent.pinchart at skynet.be  Thu May 10 10:56:35 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 10 May 2007 10:56:35 +0200
Subject: [Linux-uvc-devel] Max number of packets in an isochronous URB
In-Reply-To: <1178720853.22050.17.camel@altrandsd>
References: <1178720853.22050.17.camel@altrandsd>
Message-ID: <200705101056.35634.laurent.pinchart@skynet.be>

Hi Julien,

> I am working on video capture with several cameras.
> I have Logitech QuickCam UltraVision webcams.
>
> Is it possible to reduce the number of packets per isochronous URB in
> uvcvideo driver?
> By default, UVC_MAX_ISO_PACKETS is egual to 40.

Yes that should be possible. I'm curious, why do you want to do that ?

> When I change this value to 10 for example, image capture with 1 cam
> works fine. However, as soon as i add and capture from a second camera,
> images on both cams appear wrong (bad colours, image cut)..

Does it work with 40 packets ?

Cheers,

Laurent Pinchart


From jq03 at tid.es  Thu May 10 12:50:23 2007
From: jq03 at tid.es (julien quelen)
Date: Thu, 10 May 2007 12:50:23 +0200
Subject: [Linux-uvc-devel] Max number of packets in an isochronous URB
In-Reply-To: <200705101056.35634.laurent.pinchart@skynet.be>
References: <1178720853.22050.17.camel@altrandsd>
	<200705101056.35634.laurent.pinchart@skynet.be>
Message-ID: <1178794223.2966.46.camel@altrandsd>

Hi Laurent,

On Thu, 2007-05-10 at 10:56 +0200, Laurent Pinchart wrote:
> Hi Julien,
> 
> > I am working on video capture with several cameras.
> > I have Logitech QuickCam UltraVision webcams.
> >
> > Is it possible to reduce the number of packets per isochronous URB in
> > uvcvideo driver?
> > By default, UVC_MAX_ISO_PACKETS is egual to 40.
> 
> Yes that should be possible. I'm curious, why do you want to do that ?

I try to capture images with several synchronized cameras. I started
with 2.
In the configuration I use my cams, (2 captures at JPEG VGA 30fps), I
observe:
- An image output period granularity of 5ms for each camera (difference
between 2 consecutive images queued in the same cam is either 30ms or
35ms). This comes from the fact that an URB is received in uvc driver
every 5ms (40 packets of 125us). So as the real period of the streaming
emitted by the camera is 30fps (I verified with packets PTS and SCR
fields), an EOF is detected (and the corresponding image is queued) by
uvc after 30ms, or 35 ms sometimes.

- A image synchronisation jump between 2 cameras. When my 2 cameras are
synchronized more or less, I still observe some delay jumps of 35ms
immediately recovered on the next frame. My explication is: Let's
suppose my 2 cameras are synchronized.The 5ms period granularity makes
that potentially 1 image can be queued in one driver 5 ms after the
corresponding synchro image on the other driver. During these 5ms, if I
dequeue an image (VIDIOC_DQBUF) on the 2 driver, I put the 2 queues in
a different state.=>one frame desynchro

That why I would like to minimize this 5ms time..

> 
> > When I change this value to 10 for example, image capture with 1 cam
> > works fine. However, as soon as i add and capture from a second camera,
> > images on both cams appear wrong (bad colours, image cut)..
> 
> Does it work with 40 packets ?

Yes 2 cams capture works fine with 40 packets. For info, it works also
for any higher multiple of 40 (80, 120, 160 ..packets), but not for any
other value.. I can't explain why..

Thanks for reading and your help!

Regards,

Julien
> 
> Cheers,
> 
> Laurent Pinchart



From laurent.pinchart at skynet.be  Thu May 10 13:21:54 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 10 May 2007 13:21:54 +0200
Subject: [Linux-uvc-devel] Max number of packets in an isochronous URB
In-Reply-To: <1178794223.2966.46.camel@altrandsd>
References: <1178720853.22050.17.camel@altrandsd>
	<200705101056.35634.laurent.pinchart@skynet.be>
	<1178794223.2966.46.camel@altrandsd>
Message-ID: <200705101321.54916.laurent.pinchart@skynet.be>

Hi Julien,

> On Thu, 2007-05-10 at 10:56 +0200, Laurent Pinchart wrote:
> > Hi Julien,
> >
> > > I am working on video capture with several cameras.
> > > I have Logitech QuickCam UltraVision webcams.
> > >
> > > Is it possible to reduce the number of packets per isochronous URB in
> > > uvcvideo driver?
> > > By default, UVC_MAX_ISO_PACKETS is egual to 40.
> >
> > Yes that should be possible. I'm curious, why do you want to do that ?
>
> I try to capture images with several synchronized cameras. I started
> with 2.
> In the configuration I use my cams, (2 captures at JPEG VGA 30fps), I
> observe:
> - An image output period granularity of 5ms for each camera (difference
> between 2 consecutive images queued in the same cam is either 30ms or
> 35ms). This comes from the fact that an URB is received in uvc driver
> every 5ms (40 packets of 125us). So as the real period of the streaming
> emitted by the camera is 30fps (I verified with packets PTS and SCR
> fields), an EOF is detected (and the corresponding image is queued) by
> uvc after 30ms, or 35 ms sometimes.
>
> - A image synchronisation jump between 2 cameras. When my 2 cameras are
> synchronized more or less, I still observe some delay jumps of 35ms
> immediately recovered on the next frame. My explication is: Let's
> suppose my 2 cameras are synchronized.The 5ms period granularity makes
> that potentially 1 image can be queued in one driver 5 ms after the
> corresponding synchro image on the other driver. During these 5ms, if I
> dequeue an image (VIDIOC_DQBUF) on the 2 driver, I put the 2 queues in
> a different state.=>one frame desynchro
>
> That why I would like to minimize this 5ms time..
>
> > > When I change this value to 10 for example, image capture with 1 cam
> > > works fine. However, as soon as i add and capture from a second camera,
> > > images on both cams appear wrong (bad colours, image cut)..
> >
> > Does it work with 40 packets ?
>
> Yes 2 cams capture works fine with 40 packets. For info, it works also
> for any higher multiple of 40 (80, 120, 160 ..packets), but not for any
> other value.. I can't explain why..

Could you try lowering the number of packets per URB to 20, and allocating 
twice as much URBs ? If it still works, you could try 10 packets per URBs 
with 4 times as much URBs.

Laurent Pinchart


From jq03 at tid.es  Thu May 10 15:19:31 2007
From: jq03 at tid.es (julien quelen)
Date: Thu, 10 May 2007 15:19:31 +0200
Subject: [Linux-uvc-devel] Max number of packets in an isochronous URB
In-Reply-To: <200705101321.54916.laurent.pinchart@skynet.be>
References: <1178720853.22050.17.camel@altrandsd>
	<200705101056.35634.laurent.pinchart@skynet.be>
	<1178794223.2966.46.camel@altrandsd>
	<200705101321.54916.laurent.pinchart@skynet.be>
Message-ID: <1178803172.2966.50.camel@altrandsd>

I just tried:

#define UVC_URBS		10
#define UVC_MAX_ISO_PACKETS     20
in uvcvideo.h

and I have the same problem...

Regards,

Julien Quelen


On Thu, 2007-05-10 at 13:21 +0200, Laurent Pinchart wrote:
> Hi Julien,
> 
> > On Thu, 2007-05-10 at 10:56 +0200, Laurent Pinchart wrote:
> > > Hi Julien,
> > >
> > > > I am working on video capture with several cameras.
> > > > I have Logitech QuickCam UltraVision webcams.
> > > >
> > > > Is it possible to reduce the number of packets per isochronous URB in
> > > > uvcvideo driver?
> > > > By default, UVC_MAX_ISO_PACKETS is egual to 40.
> > >
> > > Yes that should be possible. I'm curious, why do you want to do that ?
> >
> > I try to capture images with several synchronized cameras. I started
> > with 2.
> > In the configuration I use my cams, (2 captures at JPEG VGA 30fps), I
> > observe:
> > - An image output period granularity of 5ms for each camera (difference
> > between 2 consecutive images queued in the same cam is either 30ms or
> > 35ms). This comes from the fact that an URB is received in uvc driver
> > every 5ms (40 packets of 125us). So as the real period of the streaming
> > emitted by the camera is 30fps (I verified with packets PTS and SCR
> > fields), an EOF is detected (and the corresponding image is queued) by
> > uvc after 30ms, or 35 ms sometimes.
> >
> > - A image synchronisation jump between 2 cameras. When my 2 cameras are
> > synchronized more or less, I still observe some delay jumps of 35ms
> > immediately recovered on the next frame. My explication is: Let's
> > suppose my 2 cameras are synchronized.The 5ms period granularity makes
> > that potentially 1 image can be queued in one driver 5 ms after the
> > corresponding synchro image on the other driver. During these 5ms, if I
> > dequeue an image (VIDIOC_DQBUF) on the 2 driver, I put the 2 queues in
> > a different state.=>one frame desynchro
> >
> > That why I would like to minimize this 5ms time..
> >
> > > > When I change this value to 10 for example, image capture with 1 cam
> > > > works fine. However, as soon as i add and capture from a second camera,
> > > > images on both cams appear wrong (bad colours, image cut)..
> > >
> > > Does it work with 40 packets ?
> >
> > Yes 2 cams capture works fine with 40 packets. For info, it works also
> > for any higher multiple of 40 (80, 120, 160 ..packets), but not for any
> > other value.. I can't explain why..
> 
> Could you try lowering the number of packets per URB to 20, and allocating 
> twice as much URBs ? If it still works, you could try 10 packets per URBs 
> with 4 times as much URBs.
> 
> Laurent Pinchart



From ag at computer.org  Thu May 10 22:12:17 2007
From: ag at computer.org (Andrew Gaylard)
Date: Thu, 10 May 2007 22:12:17 +0200
Subject: [Linux-uvc-devel] Fix for cross-compiling
Message-ID: <9df6f3ea0705101312j6f17dfb6r8baf475881191d78@mail.gmail.com>

Hi linux-uvc people,

Here's a small fix to enable cross-compiling the linux-uvc driver.
I used it to build and install linux-uvc for an ARM9 kernel cross-compiled
on an Alpha.

Thanks,
Andrew

PS: apologies in advance if gmail wraps the lines...

apg at supper ~/linux-uvc/trunk $ svn diff
Index: Makefile
===================================================================
--- Makefile    (revision 106)
+++ Makefile    (working copy)
@@ -15,7 +15,7 @@

 install:
        @echo "Installing USB Video Class driver..."
-       @(cd $(KERNEL_DIR) && make -C $(KERNEL_DIR) SUBDIRS=$(PWD)
INSTALL_MOD_DIR=$(INSTALL_MOD_DIR) modules_install)
+       @(cd $(KERNEL_DIR) && make -C $(KERNEL_DIR) SUBDIRS=$(PWD)
INSTALL_MOD_DIR=$(INSTALL_MOD_DIR) CROSS_COMPILE=$(CROSS_COMPILE)
INSTALL_MOD_PATH=$(INSTALL_MOD_PATH) modules_install)
        depmod -ae

 clean:
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070510/e86b2d2c/attachment.html>

From gbell_spamless at yahoo.com  Thu May 10 23:36:24 2007
From: gbell_spamless at yahoo.com (Greg Bell)
Date: Fri, 11 May 2007 07:36:24 +1000 (EST)
Subject: [Linux-uvc-devel] App hangs driver
Message-ID: <575242.30311.qm@web33203.mail.mud.yahoo.com>

This works for awhile:

$ while true ; do uvccapture -d/dev/video1  ; sleep 10 ; done

But errors eventually happen:

width 320
height 240
format 1196444237
width 320
height 240
format 1196444237
width 320
height 240
format 1196444237
width 320
height 240
format 1196444237
Unable to set format: 5.
 Init v4L2 failed !! exit fatal
width 320
height 240
format 1196444237
Unable to set format: 5.
 Init v4L2 failed !! exit fatal

After this, luvcvideo doesn't work either:

$ luvcview -d /dev/video1
luvcview version 0.2.0
Video driver: x11
A window manager is available
video /dev/video1
Unable to set format: 5.
 Init v4L2 failed !! exit fatal

dmesg shows:

May 10 06:39:33 server kernel: uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c1)
May 10 06:39:33 server kernel: uvcvideo: Found a valid video chain (1 -> 5).
May 10 06:39:33 server kernel: usbcore: registered new driver uvcvideo
May 10 06:39:33 server kernel: USB Video Class driver (v0.1.0)
May 10 06:40:16 server kernel: uvcvideo: Failed to query (1) UVC control 2 (unit 0) : -32 (exp. 26).
May 10 06:40:26 server kernel: uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32 (exp. 26).
May 10 06:40:36 server kernel: uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110 (exp. 26).
May 10 06:41:07 server last message repeated 3 times

rmmod and modprobing uvcvideo restores it to working order.


 Send instant messages to your online friends http://au.messenger.yahoo.com 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070511/83cffcf7/attachment.html>

From dfgweb at dfg.homedns.org  Fri May 11 00:29:38 2007
From: dfgweb at dfg.homedns.org (David Girault)
Date: Fri, 11 May 2007 00:29:38 +0200
Subject: [Linux-uvc-devel] App hangs driver
In-Reply-To: <575242.30311.qm@web33203.mail.mud.yahoo.com>
References: <575242.30311.qm@web33203.mail.mud.yahoo.com>
Message-ID: <46439CD2.3080103@dfg.homedns.org>

Hi,

According to the first line of dmesg log, you seem to have the Logitech
Fusion.

I also have this cam (I have the same VID:PID) and I need the reset
patch because my webcam is buggy!

I think this is not a driver problem! Laurent, tell me if I'm wrong!

Search in the archive for this patch and apply it to last driver source.

This work great for me!

Regards,
David

PS: Laurent, could this patch be added in SVN with just a define to
activate it?


Greg Bell a ?crit :
> This works for awhile:
>
> $ while true ; do uvccapture -d/dev/video1  ; sleep 10 ; done
>
> But errors eventually happen:
>
> width 320
> height 240
> format 1196444237
> width 320
> height 240
> format 1196444237
> width 320
> height 240
> format 1196444237
> width 320
> height 240
> format 1196444237
> Unable to set format: 5.
>  Init v4L2 failed !! exit fatal
> width 320
> height 240
> format 1196444237
> Unable to set format: 5.
>  Init v4L2 failed !! exit fatal
>
> After this, luvcvideo doesn't work either:
>
> $ luvcview -d /dev/video1
> luvcview version 0.2.0
> Video driver: x11
> A window manager is available
> video /dev/video1
> Unable to set format: 5.
>  Init v4L2 failed !! exit fatal
>
> dmesg shows:
>
> May 10 06:39:33 server kernel: uvcvideo: Found UVC 1.00 device
> <unnamed> (046d:08c1)
> May 10 06:39:33 server kernel: uvcvideo: Found a valid video chain (1
> -> 5).
> May 10 06:39:33 server kernel: usbcore: registered new driver uvcvideo
> May 10 06:39:33 server kernel: USB Video Class driver (v0.1.0)
> May 10 06:40:16 server kernel: uvcvideo: Failed to query (1) UVC
> control 2 (unit 0) : -32 (exp. 26).
> May 10 06:40:26 server kernel: uvcvideo: Failed to query (1) UVC
> control 1 (unit 0) : -32 (exp. 26).
> May 10 06:40:36 server kernel: uvcvideo: Failed to query (1) UVC
> control 1 (unit 0) : -110 (exp. 26).
> May 10 06:41:07 server last message repeated 3 times
>
> rmmod and modprobing uvcvideo restores it to working order.
>
> Send instant messages to your online friends
> http://au.messenger.yahoo.com
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>   






From bnc at astronomicalresearchaustralia.org  Fri May 11 01:11:23 2007
From: bnc at astronomicalresearchaustralia.org (Brian)
Date: Fri, 11 May 2007 09:11:23 +1000
Subject: [Linux-uvc-devel] App hangs driver
In-Reply-To: <575242.30311.qm@web33203.mail.mud.yahoo.com>
References: <575242.30311.qm@web33203.mail.mud.yahoo.com>
Message-ID: <4643A69B.1090300@astronomicalresearchaustralia.org>

Greg,
Search in this archive for an email about 25/4;

Re: [Linux-uvc-devel] Motion Beta release supports V4L2

I got an email from Josh with the patch attached plus the directions on
what to do. My Fusion works perfectly.
I wanted to get Motion going but the steps up to that should work for
any application.

SVN versions I used;
UVC 96
ffmpeg 8802
motion 180

Brian


Greg Bell wrote:
> This works for awhile:
> 
> $ while true ; do uvccapture -d/dev/video1  ; sleep 10 ; done
> 
> But errors eventually happen:
> 
> width 320
> height 240
> format 1196444237
> width 320
> height 240
> format 1196444237
> width 320
> height 240
> format 1196444237
> width 320
> height 240
> format 1196444237
> Unable to set format: 5.
>  Init v4L2 failed !! exit fatal
> width 320
> height 240
> format 1196444237
> Unable to set format: 5.
>  Init v4L2 failed !! exit fatal
> 
> After this, luvcvideo doesn't work either:
> 
> $ luvcview -d /dev/video1
> luvcview version 0.2.0
> Video driver: x11
> A window manager is available
> video /dev/video1
> Unable to set format: 5.
>  Init v4L2 failed !! exit fatal
> 
> dmesg shows:
> 
> May 10 06:39:33 server kernel: uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c1)
> May 10 06:39:33 server kernel: uvcvideo: Found a valid video chain (1 -> 5).
> May 10 06:39:33 server kernel: usbcore: registered new driver uvcvideo
> May 10 06:39:33 server kernel: USB Video Class driver (v0.1.0)
> May 10 06:40:16 server kernel: uvcvideo: Failed to query (1) UVC control 2 (unit 0) : -32 (exp. 26).
> May 10 06:40:26 server kernel: uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32 (exp. 26).
> May 10 06:40:36 server kernel: uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -110 (exp. 26).
> May 10 06:41:07 server last message repeated 3 times
> 
> rmmod and modprobing uvcvideo restores it to working order.
> 
> 
>  Send instant messages to your online friends http://au.messenger.yahoo.com 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel

-------------- next part --------------
A non-text attachment was scrubbed...
Name: bnc.vcf
Type: text/x-vcard
Size: 172 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070511/63812d38/attachment.vcf>

From jq03 at tid.es  Fri May 11 11:44:59 2007
From: jq03 at tid.es (julien quelen)
Date: Fri, 11 May 2007 11:44:59 +0200
Subject: [Linux-uvc-devel] Multi cameras synchronization
Message-ID: <1178876699.22875.28.camel@altrandsd>

Hi all,

I am trying to build a synchronized multiple cameras capture.
I started with 2 Logitech QuickCam UltraVision USB webcams.

I have difficulties synchronizing them.

In my tests, I manage to extract the exact timestamp of each captured
frame. So then the synchronization can be made by sofware (comparing
timestamps). But I would prefer the cameras to be directly synchronized
at the source (shot on each camera is taken at the same time).

The only way I found to do that for the moment is starting the 2 cameras
at the same time (simultaneous call of VIDIOC_STREAMON for the 2 cams. I
use mmap method, USB isochronous transferts). Frames appear to be more
or less synchronized. However sometimes, the 2 cameras start totally
dephased.

Is there a way to be more precise in the image capture start?

Thanks in advance for any help!

Julien Quelen



From Cato_Minor at arcor.de  Fri May 11 22:02:32 2007
From: Cato_Minor at arcor.de (Viktor)
Date: Fri, 11 May 2007 22:02:32 +0200
Subject: [Linux-uvc-devel] Some success with a Fujifilm FinePix A330
In-Reply-To: <200705101054.24811.laurent.pinchart@skynet.be>
References: <1178575123.16552.16.camel@localhost.localdomain>
	<200705101054.24811.laurent.pinchart@skynet.be>
Message-ID: <1178913752.32728.9.camel@localhost.localdomain>

Salut Laurent,

thank you for your kind answer! I attach complete output of lsusb (the
camera is Bus 001 Device 018) and ekiga 2.0.3-6+b1, which manages to
show one still picture before crashing with a glibc error.

At this moment, I don't dare to compile mplayer on my own, but I keep
downloading the newest releases of Christian Marillat. They are quite
recent, my current one is based on the 01/05/2007 svn.

Have a nice week-end,
Viktor.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lsusb-uvc-fuji.txt.bz2
Type: application/x-bzip
Size: 2908 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070511/208bc55c/attachment.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ekiga-uvc-fuji.txt.bz2
Type: application/x-bzip
Size: 6001 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070511/208bc55c/attachment-0001.bin>

From cass at skynet.be  Sun May 13 01:18:50 2007
From: cass at skynet.be (Guillaume Desmottes)
Date: Sun, 13 May 2007 01:18:50 +0200
Subject: [Linux-uvc-devel] soft lockup
In-Reply-To: <200705081142.14723.laurent.pinchart@skynet.be>
References: <1178528700.5601.5.camel@cass-wks>
	<200705081142.14723.laurent.pinchart@skynet.be>
Message-ID: <1179011930.28629.0.camel@cass-wks>

Le mardi 08 mai 2007 ? 11:42 +0200, Laurent Pinchart a ?crit :
> Hi Guillaume,
> 
> > I'm using the latest uvc driver from SVN (patched with the well know
> > "reset patch") on Ubuntu Feisty (2.6.20-15-generic) and got this error
> > after the boot:
> >
> > [   49.853285] usbcore: registered new interface driver snd-usb-audio
> > [   49.861202] uvcvideo: Found UVC 1.00 device <unnamed> (046d:08ce)
> > [   59.384003] BUG: soft lockup detected on CPU#0!
> > [   59.384013]  [<c015353c>] softlockup_tick+0x9c/0xf0
> > [   59.384029]  [<c0130633>] update_process_times+0x33/0x80
> > [   59.384037]  [<c01154b0>] smp_apic_timer_interrupt+0x70/0x80
> > [   59.384043]  [<c01042f8>] apic_timer_interrupt+0x28/0x30
> > [   59.384062]  [<c011c110>] native_read_tsc+0x0/0x10
> > [   59.384069]  [<c01f17d8>] delay_tsc+0x18/0x30
> > [   59.384075]  [<c01f1836>] __delay+0x6/0x10
> > [   59.384078]  [<f8b7977f>] uvc_query_ctrl+0x5f/0x170 [uvcvideo]
> > [   59.384089]  [<c01f1084>] vsnprintf+0x2f4/0x5f0
> > [   59.384111]  [<f8b79a11>] uvc_get_video_ctrl+0x61/0x170 [uvcvideo]
> > [   59.384142]  [<f8b79b43>] uvc_video_init+0x23/0xe0 [uvcvideo]
> > [   59.384151]  [<f8b75754>] uvc_register_video+0x524/0x640 [uvcvideo]
> > [   59.384179]  [<f8b75bcb>] uvc_probe+0x2ab/0x1720 [uvcvideo]
> > [   59.384260]  [<f8884c86>] usb_probe_interface+0x96/0xe0 [usbcore]
> > [   59.384284]  [<c0257a66>] really_probe+0x66/0x190
> > [   59.384290]  [<c0257bd9>] driver_probe_device+0x49/0xc0
> > [   59.384302]  [<c0257dae>] __driver_attach+0x9e/0xa0
> > [   59.384310]  [<c0256f3b>] bus_for_each_dev+0x3b/0x60
> > [   59.384322]  [<c0257904>] driver_attach+0x24/0x30
> > [   59.384325]  [<c0257d10>] __driver_attach+0x0/0xa0
> > [   59.384328]  [<c02572cb>] bus_add_driver+0x7b/0x1a0
> > [   59.384342]  [<f888472b>] usb_register_driver+0x7b/0x100 [usbcore]
> > [   59.384366]  [<f8a85068>] uvc_init+0x68/0x81 [uvcvideo]
> > [   59.384373]  [<c014421d>] sys_init_module+0x15d/0x1ba0
> > [   59.384436]  [<c0107a5d>] sys_mmap2+0xcd/0xd0
> > [   59.384450]  [<c01031f0>] sysenter_past_esp+0x69/0xa9
> > [   59.384475]  =======================
> >
> >
> > Is it a known bug?
> 
> No this isn't. The bug is caused by the "reset patch". I'm no expert there, 
> but you might be using an old version of the patch. Please make sure you're 
> using 
> http://www.mail-archive.com/linux-uvc-devel%40lists.berlios.de/msg00386.html 
> or newer. There should be no call to delay(), which is what caused the soft 
> lockup.
> 

Thanks, I applied this patch instead of the old one and everything works
fine now.

	G.

-- 
Guillaume Desmottes <cass at skynet.be>
Jabber <cassidy at jabber.belnet.be>
GPG 1024D/711E31B1 | 1B5A 1BA8 11AA F0F1 2169  E28A AC55 8671 711E 31B1



From laurent.pinchart at skynet.be  Sun May 13 22:20:26 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 13 May 2007 22:20:26 +0200
Subject: [Linux-uvc-devel] Fix for cross-compiling
In-Reply-To: <9df6f3ea0705101312j6f17dfb6r8baf475881191d78@mail.gmail.com>
References: <9df6f3ea0705101312j6f17dfb6r8baf475881191d78@mail.gmail.com>
Message-ID: <200705132220.27337.laurent.pinchart@skynet.be>

Hi Andrew,

> Here's a small fix to enable cross-compiling the linux-uvc driver.
> I used it to build and install linux-uvc for an ARM9 kernel cross-compiled
> on an Alpha.

Thanks for the patch. I committed a slightly different version. Could you test 
it ?

Regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun May 13 22:47:29 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 13 May 2007 22:47:29 +0200
Subject: [Linux-uvc-devel] Some success with a Fujifilm FinePix A330
In-Reply-To: <1178913752.32728.9.camel@localhost.localdomain>
References: <1178575123.16552.16.camel@localhost.localdomain>
	<200705101054.24811.laurent.pinchart@skynet.be>
	<1178913752.32728.9.camel@localhost.localdomain>
Message-ID: <200705132247.30031.laurent.pinchart@skynet.be>

Salut Viktor,

> thank you for your kind answer! I attach complete output of lsusb (the
> camera is Bus 001 Device 018) and ekiga 2.0.3-6+b1, which manages to
> show one still picture before crashing with a glibc error.

Ekiga shouldn't crash. Could you report the bug to the Ekiga developers team ?

> At this moment, I don't dare to compile mplayer on my own, but I keep
> downloading the newest releases of Christian Marillat. They are quite
> recent, my current one is based on the 01/05/2007 svn.

That should be recent enough. Try to add the -fps option to the command line.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun May 13 23:14:50 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 13 May 2007 23:14:50 +0200
Subject: [Linux-uvc-devel] Multi cameras synchronization
In-Reply-To: <1178876699.22875.28.camel@altrandsd>
References: <1178876699.22875.28.camel@altrandsd>
Message-ID: <200705132314.50325.laurent.pinchart@skynet.be>

Hi Julien,


On Friday 11 May 2007, julien quelen wrote:
> Hi all,
>
> I am trying to build a synchronized multiple cameras capture.
> I started with 2 Logitech QuickCam UltraVision USB webcams.
>
> I have difficulties synchronizing them.
>
> In my tests, I manage to extract the exact timestamp of each captured
> frame.

I'm curious, how did you do that ? Which time source did you use ?

> So then the synchronization can be made by sofware (comparing 
> timestamps). But I would prefer the cameras to be directly synchronized
> at the source (shot on each camera is taken at the same time).

That's an interesting idea. Both cameras have a common time source (the USB 
SOF tokens), so they could in theory start streaming at the same time. In 
practice, the feature will have to be implemented in the camera.

> The only way I found to do that for the moment is starting the 2 cameras
> at the same time (simultaneous call of VIDIOC_STREAMON for the 2 cams. I
> use mmap method, USB isochronous transferts). Frames appear to be more
> or less synchronized. However sometimes, the 2 cameras start totally
> dephased.
>
> Is there a way to be more precise in the image capture start?

I don't think there's currently a way to synchronise acquisition on several 
cameras. I'll pass the idea to Logitech, they might add the feature to future 
models.

Best regards,

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun May 13 23:16:06 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 13 May 2007 23:16:06 +0200
Subject: [Linux-uvc-devel] Max number of packets in an isochronous URB
In-Reply-To: <1178803172.2966.50.camel@altrandsd>
References: <1178720853.22050.17.camel@altrandsd>
	<200705101321.54916.laurent.pinchart@skynet.be>
	<1178803172.2966.50.camel@altrandsd>
Message-ID: <200705132316.06324.laurent.pinchart@skynet.be>

Hi Julien

> I just tried:
>
> #define UVC_URBS		10
> #define UVC_MAX_ISO_PACKETS     20
> in uvcvideo.h
>
> and I have the same problem...

I can't really help you there. I'll try to test multiple cameras with smaller 
URBs, but I won't have time to do that soon, sorry.

Laurent Pinchart


From emil at nishra.com  Mon May 14 00:53:58 2007
From: emil at nishra.com (Emil Soleyman)
Date: Sun, 13 May 2007 18:53:58 -0400
Subject: [Linux-uvc-devel] Renaming USB devices
Message-ID: <1179096839.30907.0.camel@shamash>

Hello Laurent,
        
When opening a Logitech Ultra Vision web came through ekiga, the device
name that I can choose is marked as "046d:08c9". Is it possible to
rename such a device through the linux-uvc driver to instead read
"Logitech Ultra Vision"?
        
If not, then how can one make this happen?

-- 
Emil Soleyman <emil at nishra.com>



From mxhaard at magic.fr  Mon May 14 09:08:39 2007
From: mxhaard at magic.fr (Michel Xhaard)
Date: Mon, 14 May 2007 09:08:39 +0200
Subject: [Linux-uvc-devel] Renaming USB devices
In-Reply-To: <1179096839.30907.0.camel@shamash>
References: <1179096839.30907.0.camel@shamash>
Message-ID: <200705140908.39118.mxhaard@magic.fr>

Le Lundi 14 Mai 2007 00:53, Emil Soleyman a ?crit?:
> Hello Laurent,
>
> When opening a Logitech Ultra Vision web came through ekiga, the device
> name that I can choose is marked as "046d:08c9". Is it possible to
> rename such a device through the linux-uvc driver to instead read
> "Logitech Ultra Vision"?
In my opinion, only the Usb vendor product ID is relevant to the hardware, 
commercial name can be changed, for example there are many different 
"Logitech QC express"  :)
>
> If not, then how can one make this happen?
Regards
-- 
Michel Xhaard
http://mxhaard.free.fr


From jq03 at tid.es  Mon May 14 16:21:36 2007
From: jq03 at tid.es (julien quelen)
Date: Mon, 14 May 2007 16:21:36 +0200
Subject: [Linux-uvc-devel] Multi cameras synchronization
In-Reply-To: <200705132314.50325.laurent.pinchart@skynet.be>
References: <1178876699.22875.28.camel@altrandsd>
	<200705132314.50325.laurent.pinchart@skynet.be>
Message-ID: <1179152496.5110.52.camel@altrandsd>

Hi Laurent,


On Sun, 2007-05-13 at 23:14 +0200, Laurent Pinchart wrote:
> Hi Julien,
> 
> 
> On Friday 11 May 2007, julien quelen wrote:
> > Hi all,
> >
> > I am trying to build a synchronized multiple cameras capture.
> > I started with 2 Logitech QuickCam UltraVision USB webcams.
> >
> > I have difficulties synchronizing them.
> >
> > In my tests, I manage to extract the exact timestamp of each captured
> > frame.
> 
> I'm curious, how did you do that ? Which time source did you use ?
> 

On the one hand we have in all USB packets:
- PTS field containing the device clock time when the current video
frame capture began.
- SCR field containing the device clock time sampled at USB packet
emission.

On the other hand we have the host clock time when we received an
complete URB.

What I need is: the host clock when a new video frame capture begins.

To know that, I assume the following approximation: For one URB
received, the SCR time of the URB's last packet and the host time when
this URB was received complete correspond to the same real time.

So at each complete URB, I store last packet's SCR (Tscr) and host time
(Thost) with do_gettimeofday.

When uvc receives a URB containing a packet with a video EOF, I take
packet PTS (Tpts), I take last stored host time (Thost) and I substract
to it the time (in us) that separate last URB completion and current
video SOF time.

Thost(Video SOF) = Thost - ((Tscr - Tpts) / dwClockFrequency * 1000000))


I agree that this calculation starts from an approximation, however I
guess the time error should be less than 500us..

Then I can compare video SOF times of several usbcams and the results
look coherent.

Please let me know your opinion on this calculation.. I am open to any
comment!..

> > So then the synchronization can be made by sofware (comparing 
> > timestamps). But I would prefer the cameras to be directly synchronized
> > at the source (shot on each camera is taken at the same time).
> 
> That's an interesting idea. Both cameras have a common time source (the USB 
> SOF tokens), so they could in theory start streaming at the same time. In 
> practice, the feature will have to be implemented in the camera.
> 
> > The only way I found to do that for the moment is starting the 2 cameras
> > at the same time (simultaneous call of VIDIOC_STREAMON for the 2 cams. I
> > use mmap method, USB isochronous transferts). Frames appear to be more
> > or less synchronized. However sometimes, the 2 cameras start totally
> > dephased.
> >
> > Is there a way to be more precise in the image capture start?
> 
> I don't think there's currently a way to synchronise acquisition on several 
> cameras. I'll pass the idea to Logitech, they might add the feature to future 
> models.
> 
> Best regards,
> 
> Laurent Pinchart

Best regards,

Julien Quelen



From laurent.pinchart at skynet.be  Mon May 14 23:05:51 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Mon, 14 May 2007 23:05:51 +0200
Subject: [Linux-uvc-devel] Renaming USB devices
In-Reply-To: <1179096839.30907.0.camel@shamash>
References: <1179096839.30907.0.camel@shamash>
Message-ID: <200705142305.51326.laurent.pinchart@skynet.be>

Hi Emil,

On Monday 14 May 2007, Emil Soleyman wrote:
> Hello Laurent,
>
> When opening a Logitech Ultra Vision web came through ekiga, the device
> name that I can choose is marked as "046d:08c9".

I'm curious, where does Ekiga show "046d:08c9" ? The preference dialog should 
show "UVC Video Class device" for the Ultra Vision.

> Is it possible to rename such a device through the linux-uvc driver to
> instead read "Logitech Ultra Vision"?

The driver uses the product name provided by the camera, or the harcoded 
string "UVC Video Class device" if the camera doesn't provide a product name. 
Logitech devices provide no product name, so I have no way to guess it.

> If not, then how can one make this happen?

I'm sorry this is not possible with Logitech devices, as they don't have 
string descriptors with the product name.

Laurent Pinchart


From laurent.pinchart at skynet.be  Tue May 15 23:15:21 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Tue, 15 May 2007 23:15:21 +0200
Subject: [Linux-uvc-devel] Multi cameras synchronization
In-Reply-To: <1179152496.5110.52.camel@altrandsd>
References: <1178876699.22875.28.camel@altrandsd>
	<200705132314.50325.laurent.pinchart@skynet.be>
	<1179152496.5110.52.camel@altrandsd>
Message-ID: <200705152315.21822.laurent.pinchart@skynet.be>

Hi Julien,

On Monday 14 May 2007, julien quelen wrote:
> On Sun, 2007-05-13 at 23:14 +0200, Laurent Pinchart wrote:
> > On Friday 11 May 2007, julien quelen wrote:
> > > Hi all,
> > >
> > > I am trying to build a synchronized multiple cameras capture.
> > > I started with 2 Logitech QuickCam UltraVision USB webcams.
> > >
> > > I have difficulties synchronizing them.
> > >
> > > In my tests, I manage to extract the exact timestamp of each captured
> > > frame.
> >
> > I'm curious, how did you do that ? Which time source did you use ?
>
> On the one hand we have in all USB packets:
> - PTS field containing the device clock time when the current video
> frame capture began.
> - SCR field containing the device clock time sampled at USB packet
> emission.
>
> On the other hand we have the host clock time when we received an
> complete URB.
>
> What I need is: the host clock when a new video frame capture begins.
>
> To know that, I assume the following approximation: For one URB
> received, the SCR time of the URB's last packet and the host time when
> this URB was received complete correspond to the same real time.
>
> So at each complete URB, I store last packet's SCR (Tscr) and host time
> (Thost) with do_gettimeofday.
>
> When uvc receives a URB containing a packet with a video EOF, I take
> packet PTS (Tpts), I take last stored host time (Thost) and I substract
> to it the time (in us) that separate last URB completion and current
> video SOF time.
>
> Thost(Video SOF) = Thost - ((Tscr - Tpts) / dwClockFrequency * 1000000))
>
>
> I agree that this calculation starts from an approximation, however I
> guess the time error should be less than 500us..
>
> Then I can compare video SOF times of several usbcams and the results
> look coherent.
>
> Please let me know your opinion on this calculation.. I am open to any
> comment!..

This seems quite coherent for a first try. It should be possible to get rid of 
the approximation if we can find the relationship between the host time and 
the SOF time. From what I've heard, a patch is being written to access the 
SOF counter value. Using that, we could sample the SOF counter at regular 
intervals (at URB completion time) and try to correlate that with the host 
time. Some statistical processing would be needed, but I'm not too familiar 
with that.

Best regards,

Laurent Pinchart


From sudhi.vm at gmail.com  Tue May 22 01:59:10 2007
From: sudhi.vm at gmail.com (Sudhi)
Date: Mon, 21 May 2007 16:59:10 -0700
Subject: [Linux-uvc-devel] Streaming through Digital Camcorder on Linux
Message-ID: <f344c1330705211659r2c73cba0u4161645184c25038@mail.gmail.com>

Hi all,

I am trying to find a camcorder that supports streaming (usb or firewire
streaming) on Linux. None of the sony usb-streaming camcorders (dcr-hc96,
dcrtv240, etc.) seem to have any Linux support. The Linux UVC driver
supports (http://linux-uvc.berlios.de/) two Panasonic camcorders - NV-GS11
and NV-GS27EG, but, these cameras are not available in the US. Does anyone
know of any Linux driver that supports streaming with digital camcorder ?

Thanks in advance for the reply.

Sudhi.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070521/2b36cb95/attachment.html>

From jennytharayil at gmail.com  Tue May 22 14:16:48 2007
From: jennytharayil at gmail.com (jenny tc)
Date: Tue, 22 May 2007 17:46:48 +0530
Subject: [Linux-uvc-devel] usb frame grabber device
Message-ID: <47b5508f0705220516h296eaf2fnde13213324d86212@mail.gmail.com>

Hi all,
    I'm searching for a usb frame  capture device with linux support.  Video
Input can be composite or  S-Video and Output should be in RGB
(uncompressed) format . I'll be very much thankful if you can suggest some
devices with the above features

- Jenny
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070522/ad16f69c/attachment.html>

From Glenn.West at aarcorp.com  Wed May 23 01:21:23 2007
From: Glenn.West at aarcorp.com (Glenn West)
Date: Wed, 23 May 2007 07:21:23 +0800
Subject: [Linux-uvc-devel] Linux-uvc-devel Digest, Vol 11, Issue 26
Message-ID: <0D7DB474101986479884361BBE91929F01251443@sinsiw2k1.aarcorp.com>



--------------------------
Sent from my BlackBerry Wireless Handheld


----- Original Message -----
From: linux-uvc-devel-bounces at lists.berlios.de <linux-uvc-devel-bounces at lists.berlios.de>
To: linux-uvc-devel at lists.berlios.de <linux-uvc-devel at lists.berlios.de>
Sent: Tue May 22 05:01:58 2007
Subject: Linux-uvc-devel Digest, Vol 11, Issue 26

Send Linux-uvc-devel mailing list submissions to
	linux-uvc-devel at lists.berlios.de

To subscribe or unsubscribe via the World Wide Web, visit
	https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
or, via email, send a message with subject or body 'help' to
	linux-uvc-devel-request at lists.berlios.de

You can reach the person managing the list at
	linux-uvc-devel-owner at lists.berlios.de

When replying, please edit your Subject line so it is more specific
than "Re: Contents of Linux-uvc-devel digest..."


Today's Topics:

   1. Streaming through Digital Camcorder on Linux (Sudhi)


----------------------------------------------------------------------

Message: 1
Date: Mon, 21 May 2007 16:59:10 -0700
From: Sudhi <sudhi.vm at gmail.com>
Subject: [Linux-uvc-devel] Streaming through Digital Camcorder on
	Linux
To: linux-uvc-devel at lists.berlios.de
Message-ID:
	<f344c1330705211659r2c73cba0u4161645184c25038 at mail.gmail.com>
Content-Type: text/plain; charset="iso-8859-1"

Hi all,

I am trying to find a camcorder that supports streaming (usb or firewire
streaming) on Linux. None of the sony usb-streaming camcorders (dcr-hc96,
dcrtv240, etc.) seem to have any Linux support. The Linux UVC driver
supports (http://linux-uvc.berlios.de/) two Panasonic camcorders - NV-GS11
and NV-GS27EG, but, these cameras are not available in the US. Does anyone
know of any Linux driver that supports streaming with digital camcorder ?

Thanks in advance for the reply.

Sudhi.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070521/2b36cb95/attachment-0001.html 

------------------------------

_______________________________________________
Linux-uvc-devel mailing list
Linux-uvc-devel at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/linux-uvc-devel


End of Linux-uvc-devel Digest, Vol 11, Issue 26
***********************************************


DISCLAIMER:
IMPORTANT - This E-Mail is intended for the use of the individual or entity to which it is addressed, and may contain information that is privileged, confidential and exempt from disclosure under applicable law. If the reader of this E-mail is not the intended recipient, or the employee or agent responsible to deliver it to the  intended recipient, you are hereby notified that reading, disseminating, distributing or copying this communication is strictly  PROHIBITED. If you have received this communication in error, please immediately notify AAR CORP by e-mail and return  the original message to us by e-mail. THANK YOU.


From Glenn.West at aarcorp.com  Wed May 23 01:31:24 2007
From: Glenn.West at aarcorp.com (Glenn West)
Date: Wed, 23 May 2007 07:31:24 +0800
Subject: [Linux-uvc-devel] Linux-uvc-devel Digest, Vol 11, Issue 26
Message-ID: <0D7DB474101986479884361BBE91929F01251444@sinsiw2k1.aarcorp.com>



--------------------------
Sent from my BlackBerry Wireless Handheld


----- Original Message -----
From: linux-uvc-devel-bounces at lists.berlios.de <linux-uvc-devel-bounces at lists.berlios.de>
To: linux-uvc-devel at lists.berlios.de <linux-uvc-devel at lists.berlios.de>
Sent: Tue May 22 05:01:58 2007
Subject: Linux-uvc-devel Digest, Vol 11, Issue 26

Send Linux-uvc-devel mailing list submissions to
	linux-uvc-devel at lists.berlios.de

To subscribe or unsubscribe via the World Wide Web, visit
	https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
or, via email, send a message with subject or body 'help' to
	linux-uvc-devel-request at lists.berlios.de

You can reach the person managing the list at
	linux-uvc-devel-owner at lists.berlios.de

When replying, please edit your Subject line so it is more specific
than "Re: Contents of Linux-uvc-devel digest..."


Today's Topics:

   1. Streaming through Digital Camcorder on Linux (Sudhi)


----------------------------------------------------------------------

Message: 1
Date: Mon, 21 May 2007 16:59:10 -0700
From: Sudhi <sudhi.vm at gmail.com>
Subject: [Linux-uvc-devel] Streaming through Digital Camcorder on
	Linux
To: linux-uvc-devel at lists.berlios.de
Message-ID:
	<f344c1330705211659r2c73cba0u4161645184c25038 at mail.gmail.com>
Content-Type: text/plain; charset="iso-8859-1"

Hi all,

I am trying to find a camcorder that supports streaming (usb or firewire
streaming) on Linux. None of the sony usb-streaming camcorders (dcr-hc96,
dcrtv240, etc.) seem to have any Linux support. The Linux UVC driver
supports (http://linux-uvc.berlios.de/) two Panasonic camcorders - NV-GS11
and NV-GS27EG, but, these cameras are not available in the US. Does anyone
know of any Linux driver that supports streaming with digital camcorder ?

Thanks in advance for the reply.

Sudhi.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070521/2b36cb95/attachment-0001.html 

------------------------------

_______________________________________________
Linux-uvc-devel mailing list
Linux-uvc-devel at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/linux-uvc-devel


End of Linux-uvc-devel Digest, Vol 11, Issue 26
***********************************************


DISCLAIMER:
IMPORTANT - This E-Mail is intended for the use of the individual or entity to which it is addressed, and may contain information that is privileged, confidential and exempt from disclosure under applicable law. If the reader of this E-mail is not the intended recipient, or the employee or agent responsible to deliver it to the  intended recipient, you are hereby notified that reading, disseminating, distributing or copying this communication is strictly  PROHIBITED. If you have received this communication in error, please immediately notify AAR CORP by e-mail and return  the original message to us by e-mail. THANK YOU.


From Serge.A.S at tochka.ru  Wed May 23 09:35:14 2007
From: Serge.A.S at tochka.ru (Serge A. Suchkov)
Date: Wed, 23 May 2007 11:35:14 +0400
Subject: [Linux-uvc-devel] Linux-uvc-devel Digest, Vol 11, Issue 26
In-Reply-To: <0D7DB474101986479884361BBE91929F01251443@sinsiw2k1.aarcorp.com>
References: <0D7DB474101986479884361BBE91929F01251443@sinsiw2k1.aarcorp.com>
Message-ID: <200705231135.14106.Serge.A.S@tochka.ru>

 
> Hi all,
> 
> I am trying to find a camcorder that supports streaming (usb or firewire
> streaming) on Linux. None of the sony usb-streaming camcorders (dcr-hc96,
> dcrtv240, etc.) seem to have any Linux support. The Linux UVC driver
> supports (http://linux-uvc.berlios.de/) two Panasonic camcorders - NV-GS11
> and NV-GS27EG, but, these cameras are not available in the US. Does anyone
> know of any Linux driver that supports streaming with digital camcorder ?
> 
> Thanks in advance for the reply.
> 
> Sudhi.

You have a look kino or dvgrab in this case

http://www.kinodv.org/



-- 
Regards,
Serge A. Suchkov
--
"APL is a write-only language.  I can write programs in APL, but I
can't read any of them."
		-- Roy Keir


From linux-uvc-devel.1179961798 at micled.com  Thu May 24 01:35:18 2007
From: linux-uvc-devel.1179961798 at micled.com (=?iso-8859-1?Q?Micka=EBl?=)
Date: Thu, 24 May 2007 01:35:18 +0200
Subject: [Linux-uvc-devel] UVC device is not listed and Found UVC 1.00
	device <unnamed>	(046d:08c9)
Message-ID: <20070523233518.GC17090@micled.com>

Hello,

I have a Logitech QuickCam Ultra Vision
and the module uvcvideo work fine.



This is my dmesg the device is <unnamed>

uvcvideo 2-9.2:1.0: usb_probe_interface
uvcvideo 2-9.2:1.0: usb_probe_interface - got id
uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c9)
usb 2-9.2: link qh16-0001/c04f4200 start 15 [1/0 us]
usbcore: registered new interface driver uvcvideo
USB Video Class driver (v0.1.0)



lsusb -v

Bus 002 Device 007: ID 046d:08c9 Logitech, Inc. 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x046d Logitech, Inc.
  idProduct          0x08c9 
  bcdDevice            0.05
  iManufacturer           0 
  iProduct                0 
  iSerial                 2 XXXXXXXX
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength         1385
    bNumInterfaces          4
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
    MaxPower              500mA
    UNRECOGNIZED:  08 0b 00 02 0e 03 00 00
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0 
      iInterface              0 
      UNRECOGNIZED:  20 41 01 0c 82 06 61 63 70 50 ab 49 b8 cc b3 85 5e 8d 22 50 13 01 04 03 fe ff 0f 00 00 00 00 00
      UNRECOGNIZED:  20 41 01 08 82 06 61 63 70 50 ab 49 b8 cc b3 85 5e 8d 22 51 03 01 04 03 19 00 00 00 00 00 01 00
      UNRECOGNIZED:  22 41 01 0a 82 06 61 63 70 50 ab 49 b8 cc b3 85 5e 8d 22 52 20 01 04 04 ff ff ff ff 00 00 00 00 01 00
      UNRECOGNIZED:  20 41 01 0b 82 06 61 63 70 50 ab 49 b8 cc b3 85 5e 8d 22 55 01 01 04 03 01 00 00 00 00 00 00 00
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x87  EP 7 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               8
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x00c0  1x 192 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0180  1x 384 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       4
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0280  1x 640 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       5
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0320  1x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       6
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x03b0  1x 944 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       7
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0a80  2x 640 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       8
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0b20  2x 800 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       9
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0be0  2x 992 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting      10
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1380  3x 896 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting      11
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x13fc  3x 1020 bytes
        bInterval               1
        UNRECOGNIZED:  08 0b 02 02 01 02 00 00
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      1 Control Device
      bInterfaceProtocol      0 
      iInterface              0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdADC               1.00
        wTotalLength           38
        bInCollection           1
        baInterfaceNr( 0)       3
      AudioControl Interface Descriptor:
        bLength                12
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Microphone
        bAssocTerminal          0
        bNrChannels             1
        wChannelConfig     0x0000
        iChannelNames           0 
        iTerminal               0 
      AudioControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               5
        iTerminal               0 
      AudioControl Interface Descriptor:
        bLength                 8
        bDescriptorType        36
        bDescriptorSubtype      6 (FEATURE_UNIT)
        bUnitID                 5
        bSourceID               1
        bControlSize            1
        bmaControls( 0)      0x03
          Mute
          Volume
        iFeature                0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       2
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        3
      bAlternateSetting       3
      bNumEndpoints           1
      bInterfaceClass         1 Audio
      bInterfaceSubClass      2 Streaming
      bInterfaceProtocol      0 
      iInterface              0 
      AudioStreaming Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      1 (AS_GENERAL)
        bTerminalLink           3
        bDelay                  1 frames
        wFormatTag              1 PCM
      AudioStreaming Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      2 (FORMAT_TYPE)
        bFormatType             1 (FORMAT_TYPE_I)
        bNrChannels             1
        bSubframeSize           2
        bBitResolution         16
        bSamFreqType            1 Discrete
        tSamFreq[ 0]        16000
      Endpoint Descriptor:
        bLength                 9
        bDescriptorType         5
        bEndpointAddress     0x86  EP 6 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x0030  1x 48 bytes
        bInterval               4
        bRefresh                0
        bSynchAddress           0
        AudioControl Endpoint Descriptor:
          bLength                 7
          bDescriptorType        37
          bDescriptorSubtype      1 (EP_GENERAL)
          bmAttributes         0x01
            Sampling Frequency
          bLockDelayUnits         0 Undefined
          wLockDelay              0 Undefined
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 Common Class
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  bNumConfigurations      1



i can send other result of command.

Thank for your work...

Mickael

PS : excuse for my english, i am french :)



From laurent.pinchart at skynet.be  Thu May 24 10:04:48 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Thu, 24 May 2007 10:04:48 +0200
Subject: [Linux-uvc-devel]
	=?iso-8859-1?q?UVC_device_is_not_listed_and_Fou?=
	=?iso-8859-1?q?nd_UVC_1=2E00_device_=3Cunnamed=3E__=28046d=3A08c9?=
	=?iso-8859-1?q?=29?=
In-Reply-To: <20070523233518.GC17090@micled.com>
References: <20070523233518.GC17090@micled.com>
Message-ID: <200705241004.48404.laurent.pinchart@skynet.be>

Hi Micka?l,

> I have a Logitech QuickCam Ultra Vision
> and the module uvcvideo work fine.
>
> This is my dmesg the device is <unnamed>

The driver uses the product name provided by the device. If no product name is 
provided, it defaults to <unnamed>.

> uvcvideo 2-9.2:1.0: usb_probe_interface
> uvcvideo 2-9.2:1.0: usb_probe_interface - got id
> uvcvideo: Found UVC 1.00 device <unnamed> (046d:08c9)
> usb 2-9.2: link qh16-0001/c04f4200 start 15 [1/0 us]
> usbcore: registered new interface driver uvcvideo
> USB Video Class driver (v0.1.0)
>
> lsusb -v
>
> Bus 002 Device 007: ID 046d:08c9 Logitech, Inc.
> Device Descriptor:
>   bLength                18
>   bDescriptorType         1
>   bcdUSB               2.00
>   bDeviceClass          239 Miscellaneous Device
>   bDeviceSubClass         2 Common Class
>   bDeviceProtocol         1 Interface Association
>   bMaxPacketSize0        64
>   idVendor           0x046d Logitech, Inc.
>   idProduct          0x08c9
>   bcdDevice            0.05
>   iManufacturer           0
>   iProduct                0

iProduct is 0, thus no product name is provided by the device.

>   iSerial                 2 XXXXXXXX
>   bNumConfigurations      1
>   Configuration Descriptor:
>     bLength                 9
>     bDescriptorType         2
>     wTotalLength         1385
>     bNumInterfaces          4
>     bConfigurationValue     1
>     iConfiguration          0
>     bmAttributes         0x80
>     MaxPower              500mA
>     UNRECOGNIZED:  08 0b 00 02 0e 03 00 00
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       0
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      1 Video Control
>       bInterfaceProtocol      0
>       iInterface              0
>       UNRECOGNIZED:  20 41 01 0c 82 06 61 63 70 50 ab 49 b8 cc b3 85 5e 8d
> 22 50 13 01 04 03 fe ff 0f 00 00 00 00 00 UNRECOGNIZED:  20 41 01 08 82 06
> 61 63 70 50 ab 49 b8 cc b3 85 5e 8d 22 51 03 01 04 03 19 00 00 00 00 00 01
> 00 UNRECOGNIZED:  22 41 01 0a 82 06 61 63 70 50 ab 49 b8 cc b3 85 5e 8d 22
> 52 20 01 04 04 ff ff ff ff 00 00 00 00 01 00 UNRECOGNIZED:  20 41 01 0b 82
> 06 61 63 70 50 ab 49 b8 cc b3 85 5e 8d 22 55 01 01 04 03 01 00 00 00 00 00
> 00 00 Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x87  EP 7 IN
>         bmAttributes            3
>           Transfer Type            Interrupt
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0010  1x 16 bytes
>         bInterval               8
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       0
>       bNumEndpoints           0
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       1
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x00c0  1x 192 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       2
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0180  1x 384 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       3
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0200  1x 512 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       4
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0280  1x 640 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       5
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0320  1x 800 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       6
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x03b0  1x 944 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       7
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0a80  2x 640 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       8
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0b20  2x 800 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting       9
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0be0  2x 992 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting      10
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x1380  3x 896 bytes
>         bInterval               1
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        1
>       bAlternateSetting      11
>       bNumEndpoints           1
>       bInterfaceClass        14 Video
>       bInterfaceSubClass      2 Video Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x13fc  3x 1020 bytes
>         bInterval               1
>         UNRECOGNIZED:  08 0b 02 02 01 02 00 00
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        2
>       bAlternateSetting       0
>       bNumEndpoints           0
>       bInterfaceClass         1 Audio
>       bInterfaceSubClass      1 Control Device
>       bInterfaceProtocol      0
>       iInterface              0
>       AudioControl Interface Descriptor:
>         bLength                 9
>         bDescriptorType        36
>         bDescriptorSubtype      1 (HEADER)
>         bcdADC               1.00
>         wTotalLength           38
>         bInCollection           1
>         baInterfaceNr( 0)       3
>       AudioControl Interface Descriptor:
>         bLength                12
>         bDescriptorType        36
>         bDescriptorSubtype      2 (INPUT_TERMINAL)
>         bTerminalID             1
>         wTerminalType      0x0201 Microphone
>         bAssocTerminal          0
>         bNrChannels             1
>         wChannelConfig     0x0000
>         iChannelNames           0
>         iTerminal               0
>       AudioControl Interface Descriptor:
>         bLength                 9
>         bDescriptorType        36
>         bDescriptorSubtype      3 (OUTPUT_TERMINAL)
>         bTerminalID             3
>         wTerminalType      0x0101 USB Streaming
>         bAssocTerminal          0
>         bSourceID               5
>         iTerminal               0
>       AudioControl Interface Descriptor:
>         bLength                 8
>         bDescriptorType        36
>         bDescriptorSubtype      6 (FEATURE_UNIT)
>         bUnitID                 5
>         bSourceID               1
>         bControlSize            1
>         bmaControls( 0)      0x03
>           Mute
>           Volume
>         iFeature                0
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        3
>       bAlternateSetting       0
>       bNumEndpoints           0
>       bInterfaceClass         1 Audio
>       bInterfaceSubClass      2 Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        3
>       bAlternateSetting       1
>       bNumEndpoints           1
>       bInterfaceClass         1 Audio
>       bInterfaceSubClass      2 Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 9
>         bDescriptorType         5
>         bEndpointAddress     0x86  EP 6 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0000  1x 0 bytes
>         bInterval               4
>         bRefresh                0
>         bSynchAddress           0
>         AudioControl Endpoint Descriptor:
>           bLength                 7
>           bDescriptorType        37
>           bDescriptorSubtype      1 (EP_GENERAL)
>           bmAttributes         0x01
>             Sampling Frequency
>           bLockDelayUnits         0 Undefined
>           wLockDelay              0 Undefined
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        3
>       bAlternateSetting       2
>       bNumEndpoints           1
>       bInterfaceClass         1 Audio
>       bInterfaceSubClass      2 Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 9
>         bDescriptorType         5
>         bEndpointAddress     0x86  EP 6 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0000  1x 0 bytes
>         bInterval               4
>         bRefresh                0
>         bSynchAddress           0
>         AudioControl Endpoint Descriptor:
>           bLength                 7
>           bDescriptorType        37
>           bDescriptorSubtype      1 (EP_GENERAL)
>           bmAttributes         0x01
>             Sampling Frequency
>           bLockDelayUnits         0 Undefined
>           wLockDelay              0 Undefined
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        3
>       bAlternateSetting       3
>       bNumEndpoints           1
>       bInterfaceClass         1 Audio
>       bInterfaceSubClass      2 Streaming
>       bInterfaceProtocol      0
>       iInterface              0
>       AudioStreaming Interface Descriptor:
>         bLength                 7
>         bDescriptorType        36
>         bDescriptorSubtype      1 (AS_GENERAL)
>         bTerminalLink           3
>         bDelay                  1 frames
>         wFormatTag              1 PCM
>       AudioStreaming Interface Descriptor:
>         bLength                11
>         bDescriptorType        36
>         bDescriptorSubtype      2 (FORMAT_TYPE)
>         bFormatType             1 (FORMAT_TYPE_I)
>         bNrChannels             1
>         bSubframeSize           2
>         bBitResolution         16
>         bSamFreqType            1 Discrete
>         tSamFreq[ 0]        16000
>       Endpoint Descriptor:
>         bLength                 9
>         bDescriptorType         5
>         bEndpointAddress     0x86  EP 6 IN
>         bmAttributes            5
>           Transfer Type            Isochronous
>           Synch Type               Asynchronous
>           Usage Type               Data
>         wMaxPacketSize     0x0030  1x 48 bytes
>         bInterval               4
>         bRefresh                0
>         bSynchAddress           0
>         AudioControl Endpoint Descriptor:
>           bLength                 7
>           bDescriptorType        37
>           bDescriptorSubtype      1 (EP_GENERAL)
>           bmAttributes         0x01
>             Sampling Frequency
>           bLockDelayUnits         0 Undefined
>           wLockDelay              0 Undefined
> Device Qualifier (for other device speed):
>   bLength                10
>   bDescriptorType         6
>   bcdUSB               2.00
>   bDeviceClass          239 Miscellaneous Device
>   bDeviceSubClass         2 Common Class
>   bDeviceProtocol         1 Interface Association
>   bMaxPacketSize0        64
>   bNumConfigurations      1
>
> i can send other result of command.
>
> Thank for your work...

You're welcome.

Laurent Pinchart


From linux-uvc-devel at sf.ecog.de  Thu May 24 23:54:17 2007
From: linux-uvc-devel at sf.ecog.de (Stefan Fuhrmann)
Date: Thu, 24 May 2007 22:54:17 +0100
Subject: [Linux-uvc-devel] Logitech Quickcam Pro 5000 (again)
Message-ID: <20070524225417.o59gzyvan8kgwso0@webmail.df.eu>

Hi,

I am struggling to get my Logitech QuickCam Pro 5000 (046d:08ce) to  
work properly.
I tried several versions of uvcvideo, for example revision 108. I  
tried with and without the 'reset patch', no change there. I am using  
Ubuntu Feisty Fawn with kernel 2.6.20-15-generic.

Using Ekiga shows a moving image, however the software I really want  
to use (zoneminder) does not. Xawtv doesn't work either. I presume  
Ekiga and Xawtv use different modes to get the picture (streaming vs.  
capture?), hence the different results.

The error messages dmesg is showing look like that:

uvcvideo: Failed to query (1) UVC control 2 (unit 0) : -32 (exp. 26).
uvcvideo: Failed to query (135) UVC control 2 (unit 2) : -32 (exp. 2).
uvcvideo: Failed to query (135) UVC control 3 (unit 2) : -110 (exp. 2).
uvcvideo: Failed to query (135) UVC control 7 (unit 2) : -75 (exp. 2).
uvcvideo: Failed to query (130) UVC control 7 (unit 2) : -32 (exp. 2).

Basically my results look similar to those of other people:
http://article.gmane.org/gmane.linux.drivers.uvc.devel/834
http://developer.berlios.de/bugs/?func=detailbug&bug_id=7605&group_id=5681

Using Xawtv, the webcam's LED lights up briefly 3 times. Format  
negotiation seems to work, but the following ioctl calls fail with  
Invalid argument:

ioctl: VIDIOC_REQBUFS(count=2;type=VIDEO_CAPTURE;memory=MMAP)

ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0  
[];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.seconds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0;memory=unknown):

Can anyone suggest a way to debug that problem? How do i find out what  
the return values -32, and -110 mean? Where can i find the source code  
for usb_control_msg (the function that returns these values from  
within uvc_query_ctrl)?

Any help is much appreciated,

Stefan




From schmid.thomas at gmx.ch  Fri May 25 00:43:23 2007
From: schmid.thomas at gmx.ch (Thomas Schmid)
Date: Fri, 25 May 2007 00:43:23 +0200
Subject: [Linux-uvc-devel] Logitech Quickcam Pro 5000 (again)
In-Reply-To: <20070524225417.o59gzyvan8kgwso0@webmail.df.eu>
References: <20070524225417.o59gzyvan8kgwso0@webmail.df.eu>
Message-ID: <4656150B.8050003@gmx.ch>

Stefan Fuhrmann schrieb:
> Hi,
> 
> I am struggling to get my Logitech QuickCam Pro 5000 (046d:08ce) to  
> work properly.
> I tried several versions of uvcvideo, for example revision 108. I  
> tried with and without the 'reset patch', no change there. I am using  
> Ubuntu Feisty Fawn with kernel 2.6.20-15-generic.
> 
> Using Ekiga shows a moving image, however the software I really want  
> to use (zoneminder) does not. Xawtv doesn't work either. I presume  
> Ekiga and Xawtv use different modes to get the picture (streaming vs.  
> capture?), hence the different results.
> 
> The error messages dmesg is showing look like that:
> 
> uvcvideo: Failed to query (1) UVC control 2 (unit 0) : -32 (exp. 26).
> uvcvideo: Failed to query (135) UVC control 2 (unit 2) : -32 (exp. 2).
> uvcvideo: Failed to query (135) UVC control 3 (unit 2) : -110 (exp. 2).
> uvcvideo: Failed to query (135) UVC control 7 (unit 2) : -75 (exp. 2).
> uvcvideo: Failed to query (130) UVC control 7 (unit 2) : -32 (exp. 2).
> 
> Basically my results look similar to those of other people:
> http://article.gmane.org/gmane.linux.drivers.uvc.devel/834
> http://developer.berlios.de/bugs/?func=detailbug&bug_id=7605&group_id=5681
> 
> Using Xawtv, the webcam's LED lights up briefly 3 times. Format  
> negotiation seems to work, but the following ioctl calls fail with  
> Invalid argument:
> 
> ioctl: VIDIOC_REQBUFS(count=2;type=VIDEO_CAPTURE;memory=MMAP)
> 
> ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0  
> [];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.seconds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0;memory=unknown):
> 
> Can anyone suggest a way to debug that problem? How do i find out what  
> the return values -32, and -110 mean? Where can i find the source code  
> for usb_control_msg (the function that returns these values from  
> within uvc_query_ctrl)?
> 
> Any help is much appreciated,
> 
> Stefan
> 
> 
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 
Hi,

iv'e also use feisty, im not sure but theres a mistake in the makefile,

this is what i changed in the makefile

#INSTALL_MOD_DIR	:= usb/media
INSTALL_MOD_DIR := kernel/ubuntu/media/usbvideo

hope this helps

regards
tom



From sudhi.vm at gmail.com  Fri May 25 04:10:14 2007
From: sudhi.vm at gmail.com (Sudhi)
Date: Thu, 24 May 2007 19:10:14 -0700
Subject: [Linux-uvc-devel] UVC driver with Sony Camcorders
Message-ID: <f344c1330705241910w15d02b65ncfa9fa3471c10f1@mail.gmail.com>

Hi,

I have a Sony DCR-HC85 camcorder and I am trying its USB streaming feature
with Linux. The lsusb -v output shows the following. Could anyone please
tell me if it works with the Linux UVC driver.

Thanks,

Sudhi.
--------------------------------------------------------------------------------------
Bus 003 Device 005: ID 054c:00c0 Sony Corp. Handycam DCR-30
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0        64
  idVendor           0x054c Sony Corp.
  idProduct          0x00c0 Handycam DCR-30
  bcdDevice            1.00
  iManufacturer           0
  iProduct                0
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          284
    bNumInterfaces          3
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0xc0
      Self Powered
    MaxPower                2mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           2
      bInterfaceClass         0 (Defined at Interface level)
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       1
      bNumEndpoints           2
      bInterfaceClass         0 (Defined at Interface level)
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       2
      bNumEndpoints           2
      bInterfaceClass         0 (Defined at Interface level)
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0180  1x 384 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       3
      bNumEndpoints           2
      bInterfaceClass         0 (Defined at Interface level)
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       4
      bNumEndpoints           2
      bInterfaceClass         0 (Defined at Interface level)
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0280  1x 640 bytes
        bInterval               1
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       5
      bNumEndpoints           2
      bInterfaceClass         0 (Defined at Interface level)
      bInterfaceSubClass      0
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0300  1x 768 bytes
        bInterval               1
      ....
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070524/7ea4597a/attachment.html>

From protasnb at gmail.com  Fri May 25 22:53:07 2007
From: protasnb at gmail.com (Natalie Protasevich)
Date: Fri, 25 May 2007 14:53:07 -0600
Subject: [Linux-uvc-devel] uvcvideo driver for x86_64
In-Reply-To: <200704021153.50682.laurent.pinchart@skynet.be>
References: <32209efe0703272038k10a6f281v6cf0121e2442aefb@mail.gmail.com>
	<200704021153.50682.laurent.pinchart@skynet.be>
Message-ID: <32209efe0705251353t42ded626x3310daf91d968cc7@mail.gmail.com>

Hi Laurent,

 > V4l: device has no mmap support
> > ioctl VIDIOCSWIN: Input/output error
> > ioctl VIDIOCGWIN: Invalid argument
> > ioctl VIDIOCGCHAN: Invalid argument
> > ioctl VIDIOCGWIN: Invalid argument
> > yuvgrab, read failed!
> > yuvgrab, read failed!
> > yuvgrab, read failed!
>
> Those ioctls are from the V4L1 API, which the Linux UVC driver doesn't
> support. It might be possible to use the V4L1 compatibility layer, and
> that's
> probably what you're doing already (maybe without even being aware) if
> Marratech works on a 32 bits machine. In that case, there might be some
> issues with the V4L1 compatibility layer on 64 bit architectures.


That is exactly what I am suspecting...


> uvccapture and luvcview:
> >
> > nataliep at 4300-test:/tmp$ ./uvccapture
> > sending ioctl VIDIOC_QUERYCAP
> > sending ioctl VIDIOC_S_FMT
> > Unable to set format: 22.
> >  Init v4L2 failed !! exit fatal
>
> Those are definitely V4L2 calls. -22 means invalid argument. There might
> again
> be some issue with 64 bit architectures, either in the driver or in
> luvcview.
> I can't help you much as I have no 64 bit machine to test this on.


Actually, I am happy to report that the latest  kernel patches have resolved
this issue.


> I also have a kernel trace with my debug, this is a part of it that shows
> > that the driver calls into the l1 compat layer, which seems odd to me
> since
> > everything from application to kernel is all l2:
>
> compat_ioctl32 is the 32bit/64bit compatibility layer, not the V4L1
> compatibility layer.


With new updates to the kernel videodev and compat_ioctl32 layer we can run
UVC cameras very nicely, using applications like luvcview, it works just
great.

However, the problem is that we would like to use conferencing software that
is written to support old v4L1 mechanism, and the rewrite is going
on...slowly :)  But the V4L1 compat layer it it was working could be a
solution for the time being. I tracked couple first ioctl's that fail
without proper support/translation in the v4l_compat_ioctl32 - those are
VIDIOCGMBUF and VIDIOCGCHAN. I am not sure if it is feasible/easy to
implement those, the latter one seems to be just a matter of filling out a
structure according to the camera's features, but the memory mapped buffer
looks a bit challenging. Although looking at the way it is implemented in
videodev - it seems possible to do something similar. I would really
appreciate your opinion on this problem.

Thanks and regards,
--Natalie
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070525/f71b9be1/attachment.html>

From sven.burmeister at gmx.net  Sat May 26 16:51:03 2007
From: sven.burmeister at gmx.net (Sven Burmeister)
Date: Sat, 26 May 2007 16:51:03 +0200
Subject: [Linux-uvc-devel] Logitech Fusion (2007)
Message-ID: <20070526145103.237420@gmx.net>

Hello!

I just got a 2007 model of the Logitech Fusion. I installed r87 and it started (blue light), yet as soon as I tried to access it via kdetv X crashed. I had to update my kernel and installed the ati binary driver, after that r87 did not work anymore. I tried r110 but that does not start the webcam either (yet).

dmesg shows:
usb 4-1: USB disconnect, address 8
usb 4-1: new high speed USB device using ehci_hcd and address 9
usb 4-1: new device found, idVendor=046d, idProduct=08ca
usb 4-1: new device strings: Mfr=0, Product=0, SerialNumber=2
usb 4-1: SerialNumber: 410922B2
usb 4-1: configuration #1 chosen from 1 choice
uvcvideo: Found UVC 1.00 device <unnamed> (046d:08ca)

lsmod | grep uvc
uvcvideo               43780  0
videodev               26880  1 uvcvideo
v4l1_compat            16388  2 uvcvideo,videodev
v4l2_common            26240  2 uvcvideo,videodev
usbcore               128004  7 uvcvideo,snd_usb_audio,snd_usb_lib,usbhid,ehci_hcd,uhci_hcd

lsusb
Bus 004 Device 009: ID 046d:08ca Logitech, Inc.
Bus 004 Device 001: ID 0000:0000
Bus 002 Device 001: ID 0000:0000
Bus 003 Device 001: ID 0000:0000
Bus 001 Device 004: ID 1267:0210 Logic3 / SpectraVideo plc
Bus 001 Device 001: ID 0000:0000

I read that only the model from 2006 is supported. So before I decide whether I'd like to keep the webcam, I would like to know if it is planned to add support for the 2007 model.

Thanks

Sven
-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kanns mit allen: http://www.gmx.net/de/go/multimessenger


From laurent.pinchart at skynet.be  Sun May 27 19:34:18 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 27 May 2007 19:34:18 +0200
Subject: [Linux-uvc-devel] Logitech Fusion (2007)
In-Reply-To: <20070526145103.237420@gmx.net>
References: <20070526145103.237420@gmx.net>
Message-ID: <200705271934.18967.laurent.pinchart@skynet.be>

Hi Sven,

> I just got a 2007 model of the Logitech Fusion. I installed r87 and it
> started (blue light), yet as soon as I tried to access it via kdetv X
> crashed. I had to update my kernel and installed the ati binary driver,
> after that r87 did not work anymore. I tried r110 but that does not start
> the webcam either (yet).
>
> dmesg shows:
> usb 4-1: USB disconnect, address 8
> usb 4-1: new high speed USB device using ehci_hcd and address 9
> usb 4-1: new device found, idVendor=046d, idProduct=08ca
> usb 4-1: new device strings: Mfr=0, Product=0, SerialNumber=2
> usb 4-1: SerialNumber: 410922B2
> usb 4-1: configuration #1 chosen from 1 choice
> uvcvideo: Found UVC 1.00 device <unnamed> (046d:08ca)
>
> lsmod | grep uvc
> uvcvideo               43780  0
> videodev               26880  1 uvcvideo
> v4l1_compat            16388  2 uvcvideo,videodev
> v4l2_common            26240  2 uvcvideo,videodev
> usbcore               128004  7
> uvcvideo,snd_usb_audio,snd_usb_lib,usbhid,ehci_hcd,uhci_hcd
>
> lsusb
> Bus 004 Device 009: ID 046d:08ca Logitech, Inc.
> Bus 004 Device 001: ID 0000:0000
> Bus 002 Device 001: ID 0000:0000
> Bus 003 Device 001: ID 0000:0000
> Bus 001 Device 004: ID 1267:0210 Logic3 / SpectraVideo plc
> Bus 001 Device 001: ID 0000:0000
>
> I read that only the model from 2006 is supported. So before I decide
> whether I'd like to keep the webcam, I would like to know if it is planned
> to add support for the 2007 model.

The 2007 model should be supported as well. Could you raise the trace level to 
127 and post the kernel log after trying to "start the webcam" ? I assume you 
still use kdetv, which works for me.

Laurent Pinchart


From laurent.pinchart at skynet.be  Sun May 27 19:39:39 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 27 May 2007 19:39:39 +0200
Subject: [Linux-uvc-devel] Logitech Quickcam Pro 5000 (again)
In-Reply-To: <20070524225417.o59gzyvan8kgwso0@webmail.df.eu>
References: <20070524225417.o59gzyvan8kgwso0@webmail.df.eu>
Message-ID: <200705271939.39202.laurent.pinchart@skynet.be>

Hi Stefan,

> I am struggling to get my Logitech QuickCam Pro 5000 (046d:08ce) to
> work properly.
> I tried several versions of uvcvideo, for example revision 108. I
> tried with and without the 'reset patch', no change there. I am using
> Ubuntu Feisty Fawn with kernel 2.6.20-15-generic.
>
> Using Ekiga shows a moving image, however the software I really want
> to use (zoneminder) does not. Xawtv doesn't work either. I presume
> Ekiga and Xawtv use different modes to get the picture (streaming vs.
> capture?), hence the different results.

Xawtv has a little bug which makes the application not compatible with the 
Linux UVC driver. There's a patch available in the SVN repository at 
svn://svn.berlios.de/linux-uvc/patches/xawtv.

> The error messages dmesg is showing look like that:
>
> uvcvideo: Failed to query (1) UVC control 2 (unit 0) : -32 (exp. 26).
> uvcvideo: Failed to query (135) UVC control 2 (unit 2) : -32 (exp. 2).
> uvcvideo: Failed to query (135) UVC control 3 (unit 2) : -110 (exp. 2).
> uvcvideo: Failed to query (135) UVC control 7 (unit 2) : -75 (exp. 2).
> uvcvideo: Failed to query (130) UVC control 7 (unit 2) : -32 (exp. 2).
>
> Basically my results look similar to those of other people:
> http://article.gmane.org/gmane.linux.drivers.uvc.devel/834
> http://developer.berlios.de/bugs/?func=detailbug&bug_id=7605&group_id=5681
>
> Using Xawtv, the webcam's LED lights up briefly 3 times. Format
> negotiation seems to work, but the following ioctl calls fail with
> Invalid argument:
>
> ioctl: VIDIOC_REQBUFS(count=2;type=VIDEO_CAPTURE;memory=MMAP)
>
> ioctl: VIDIOC_DQBUF(index=0;type=VIDEO_CAPTURE;bytesused=0;flags=0x0
> [];field=ANY;;timecode.type=0;timecode.flags=0;timecode.frames=0;timecode.s
>econds=0;timecode.minutes=0;timecode.hours=0;timecode.userbits="";sequence=0
>;memory=unknown):
>
> Can anyone suggest a way to debug that problem?

Try to apply the abovementioned patch, it should fix your problem.

> How do i find out what 
> the return values -32, and -110 mean? Where can i find the source code
> for usb_control_msg (the function that returns these values from
> within uvc_query_ctrl)?

-32 is -EPIPE, and -110 is -ETIMEDOUT. Error codes are defined in errno.h. 
Those errors should not be fatal, but they certainly indicate that you suffer 
from the Logitech hardware bug.

Laurent Pinchart


From Sven.Burmeister at rwth-aachen.de  Sun May 27 20:13:12 2007
From: Sven.Burmeister at rwth-aachen.de (Sven.Burmeister at rwth-aachen.de)
Date: Sun, 27 May 2007 20:13:12 +0200
Subject: [Linux-uvc-devel] Logitech Fusion (2007)
In-Reply-To: <200705271934.18967.laurent.pinchart@skynet.be>
References: <20070526145103.237420@gmx.net>
	<200705271934.18967.laurent.pinchart@skynet.be>
Message-ID: <fc81933921d0.4659e658@rwth-aachen.de>

Hello again!

Sorry for sending you the previous email to your private address. I am used to kmail but this 
webmail-client does not use the list's address by default, so my apalogies for that!

> The 2007 model should be supported as well. Could you raise the 
> trace level to 
> 127 and post the kernel log after trying to "start the webcam" ? I 
> assume you 
> still use kdetv, which works for me.

Here is the full log again, this time including the crash. I plug-in the webcam, nothing happens 
concerning the blue light, yet it seems to be recognised. As soon as I start kdetv the blue light on the 
webcam is turned on and X crashes.

Sven

May 27 19:50:07 aphrodite kernel: Linux video capture interface: v2.00
May 27 19:50:07 aphrodite kernel: usbcore: registered new driver uvcvideo
May 27 19:50:07 aphrodite kernel: USB Video Class driver (v0.1.0)
May 27 19:50:17 aphrodite kernel: usbcore: deregistering driver uvcvideo
May 27 19:50:57 aphrodite kernel: Linux video capture interface: v2.00
May 27 19:50:57 aphrodite kernel: uvcvideo: Adding mapping Brightness to control 
00000000-0000-0000-0000-000000000101/2.
May 27 19:50:57 aphrodite kernel: uvcvideo: Adding mapping Contrast to control 
00000000-0000-0000-0000-000000000101/3.
May 27 19:50:57 aphrodite kernel: uvcvideo: Adding mapping Hue to control 
00000000-0000-0000-0000-000000000101/6.
May 27 19:50:57 aphrodite kernel: uvcvideo: Adding mapping Saturation to control 
00000000-0000-0000-0000-000000000101/7.
May 27 19:50:57 aphrodite kernel: uvcvideo: Adding mapping Sharpness to control 
00000000-0000-0000-0000-000000000101/8.
May 27 19:50:57 aphrodite kernel: uvcvideo: Adding mapping Gamma to control 
00000000-0000-0000-0000-000000000101/9.
May 27 19:50:57 aphrodite kernel: uvcvideo: Adding mapping Backlight Compensation to control 
00000000-0000-0000-0000-000000000101/1.
May 27 19:50:57 aphrodite kernel: uvcvideo: Adding mapping Gain to control 
00000000-0000-0000-0000-000000000101/4.
May 27 19:50:57 aphrodite kernel: uvcvideo: Adding mapping Power Line Frequency to control 
00000000-0000-0000-0000-000000000101/5.
May 27 19:50:57 aphrodite kernel: uvcvideo: Adding mapping Hue, Auto to control 
00000000-0000-0000-0000-000000000101/16.
May 27 19:50:57 aphrodite kernel: uvcvideo: Adding mapping Pan (relative) to control 
63610682-5070-49ab-b8cc-b3855e8d2256/1.
May 27 19:50:57 aphrodite kernel: uvcvideo: Adding mapping Tilt (relative) to control 
63610682-5070-49ab-b8cc-b3855e8d2256/1.
May 27 19:50:57 aphrodite kernel: uvcvideo: Adding mapping Pan/Tilt (reset) to control 
63610682-5070-49ab-b8cc-b3855e8d2256/2.
May 27 19:50:57 aphrodite kernel: uvcvideo: Adding mapping Exposure, Auto to control 
00000000-0000-0000-0000-000000000001/2.
May 27 19:50:57 aphrodite kernel: uvcvideo: Adding mapping Exposure (Absolute) to control 
00000000-0000-0000-0000-000000000001/4.
May 27 19:50:57 aphrodite kernel: uvcvideo: Adding mapping White Balance Temperature, Auto to 
control 00000000-0000-0000-0000-000000000101/11.
May 27 19:50:57 aphrodite kernel: uvcvideo: Adding mapping White Balance Temperature to control 
00000000-0000-0000-0000-000000000101/10.
May 27 19:50:57 aphrodite kernel: usbcore: registered new driver uvcvideo
May 27 19:50:57 aphrodite kernel: USB Video Class driver (v0.1.0)
May 27 19:51:23 aphrodite kernel: usb 4-2: new high speed USB device using ehci_hcd and address 5
May 27 19:51:23 aphrodite kernel: usb 4-2: new device found, idVendor=046d, idProduct=08ca
May 27 19:51:23 aphrodite kernel: usb 4-2: new device strings: Mfr=0, Product=0, SerialNumber=2
May 27 19:51:23 aphrodite kernel: usb 4-2: SerialNumber: 410922B2
May 27 19:51:23 aphrodite kernel: usb 4-2: configuration #1 chosen from 1 choice
May 27 19:51:23 aphrodite kernel: uvcvideo: Probing generic UVC device 2
May 27 19:51:23 aphrodite kernel: uvcvideo: Found format MJPEG.
May 27 19:51:23 aphrodite kernel: uvcvideo: - 160x120 (30.0 fps)
May 27 19:51:23 aphrodite kernel: uvcvideo: - 176x144 (30.0 fps)
May 27 19:51:23 aphrodite kernel: uvcvideo: - 320x240 (15.0 fps)
May 27 19:51:23 aphrodite kernel: uvcvideo: - 352x288 (15.0 fps)
May 27 19:51:23 aphrodite kernel: uvcvideo: - 640x480 (15.0 fps)
May 27 19:51:23 aphrodite kernel: uvcvideo: - 960x720 (15.0 fps)
May 27 19:51:23 aphrodite kernel: uvcvideo: Found format Uncompressed.
May 27 19:51:23 aphrodite kernel: uvcvideo: - 160x120 (30.0 fps)
May 27 19:51:23 aphrodite kernel: uvcvideo: - 176x144 (30.0 fps)
May 27 19:51:23 aphrodite kernel: uvcvideo: - 320x240 (15.0 fps)
May 27 19:51:23 aphrodite kernel: uvcvideo: - 352x288 (15.0 fps)
May 27 19:51:23 aphrodite kernel: uvcvideo: - 640x480 (15.0 fps)
May 27 19:51:23 aphrodite kernel: uvcvideo: - 960x720 (10.0 fps)
May 27 19:51:23 aphrodite kernel: uvcvideo: - 1280x960 (7.5 fps)
May 27 19:51:23 aphrodite kernel: uvcvideo: Found a Status endpoint (addr 87).
May 27 19:51:23 aphrodite kernel: uvcvideo: Found UVC 1.00 device <unnamed> (046d:08ca)
May 27 19:51:23 aphrodite kernel: uvcvideo: Added control 
00000000-0000-0000-0000-000000000101/2 to device 2 entity 2
May 27 19:51:23 aphrodite kernel: uvcvideo: Added control 
00000000-0000-0000-0000-000000000101/3 to device 2 entity 2
May 27 19:51:23 aphrodite kernel: uvcvideo: Added control 
00000000-0000-0000-0000-000000000101/7 to device 2 entity 2
May 27 19:51:23 aphrodite kernel: uvcvideo: Added control 
00000000-0000-0000-0000-000000000101/8 to device 2 entity 2
May 27 19:51:23 aphrodite kernel: uvcvideo: Added control 
00000000-0000-0000-0000-000000000101/1 to device 2 entity 2
May 27 19:51:23 aphrodite kernel: uvcvideo: Added control 
00000000-0000-0000-0000-000000000101/4 to device 2 entity 2
May 27 19:51:23 aphrodite kernel: uvcvideo: Added control 
00000000-0000-0000-0000-000000000101/5 to device 2 entity 2
May 27 19:51:23 aphrodite kernel: uvcvideo: Added control 
00000000-0000-0000-0000-000000000001/2 to device 2 entity 1
May 27 19:51:23 aphrodite kernel: uvcvideo: Added control 
00000000-0000-0000-0000-000000000001/4 to device 2 entity 1
May 27 19:51:23 aphrodite kernel: uvcvideo: Added control 
00000000-0000-0000-0000-000000000101/11 to device 2 entity 2
May 27 19:51:23 aphrodite kernel: uvcvideo: Added control 
00000000-0000-0000-0000-000000000101/10 to device 2 entity 2
May 27 19:51:23 aphrodite kernel: uvcvideo: Scanning UVC chain: OT 5 (-> 12 8 10 11) <- Unit 4 (-> 
13) <- Unit 3 <- Unit 2 <- IT 1
May 27 19:51:23 aphrodite kernel: uvcvideo: Found a valid video chain (1 -> 5).
May 27 19:51:23 aphrodite kernel: uvcvideo: UVC device initialized.
May 27 19:51:23 aphrodite kernel: usbcore: registered new driver snd-usb-audio
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_open
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_S_PRIORITY, dir=-w (0x40045644)
May 27 20:00:18 aphrodite kernel: uvcvideo: Unknown ioctl 0x40045644
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_ENUM_FMT, dir=rw (0xc0405602)
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_ENUM_FMT, dir=rw (0xc0405602)
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_ENUM_FMT, dir=rw (0xc0405602)
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_ENUMSTD, dir=rw (0xc0405619)
May 27 20:00:18 aphrodite kernel: uvcvideo: Unsupported ioctl 0xc0405619
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:18 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYMENU, dir=rw (0xc02c5625)
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYMENU, dir=rw (0xc02c5625)
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYMENU, dir=rw (0xc02c5625)
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYMENU, dir=rw (0xc02c5625)
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:18 aphrodite kernel: uvcvideo: Control 0x08000003 not found.
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:18 aphrodite kernel: uvcvideo: Control 0x08000004 not found.
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:18 aphrodite kernel: uvcvideo: Control 0x08000005 not found.
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:18 aphrodite kernel: uvcvideo: Control 0x08000006 not found.
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:18 aphrodite kernel: uvcvideo: Control 0x08000007 not found.
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:18 aphrodite kernel: uvcvideo: Control 0x08000008 not found.
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:18 aphrodite kernel: uvcvideo: Control 0x08000009 not found.
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:18 aphrodite kernel: uvcvideo: Control 0x0800000e not found.
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_G_INPUT, dir=r- (0x80045626)
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:18 aphrodite kernel: v4l2 ioctl VIDIOC_S_INPUT, dir=rw (0xc0045627)
May 27 20:00:18 aphrodite kernel: uvcvideo: uvc_v4l2_release
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_open
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_S_PRIORITY, dir=-w (0x40045644)
May 27 20:00:19 aphrodite kernel: uvcvideo: Unknown ioctl 0x40045644
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_ENUM_FMT, dir=rw (0xc0405602)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_ENUM_FMT, dir=rw (0xc0405602)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_ENUM_FMT, dir=rw (0xc0405602)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_ENUMSTD, dir=rw (0xc0405619)
May 27 20:00:19 aphrodite kernel: uvcvideo: Unsupported ioctl 0xc0405619
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:19 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:19 aphrodite kernel: uvcvideo: Failed to query (132) UVC control 1 (unit 2) : -32 (exp. 2).
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_G_INPUT, dir=r- (0x80045626)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_S_INPUT, dir=rw (0xc0045627)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_release
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_open
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_S_PRIORITY, dir=-w (0x40045644)
May 27 20:00:19 aphrodite kernel: uvcvideo: Unknown ioctl 0x40045644
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_ENUM_FMT, dir=rw (0xc0405602)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_ENUM_FMT, dir=rw (0xc0405602)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_ENUM_FMT, dir=rw (0xc0405602)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_ENUMSTD, dir=rw (0xc0405619)
May 27 20:00:19 aphrodite kernel: uvcvideo: Unsupported ioctl 0xc0405619
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:19 aphrodite kernel: uvcvideo: Failed to query (132) UVC control 7 (unit 2) : -32 (exp. 2).
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYMENU, dir=rw (0xc02c5625)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYMENU, dir=rw (0xc02c5625)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYMENU, dir=rw (0xc02c5625)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYMENU, dir=rw (0xc02c5625)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:19 aphrodite kernel: uvcvideo: Control 0x08000003 not found.
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:19 aphrodite kernel: uvcvideo: Control 0x08000004 not found.
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:19 aphrodite kernel: uvcvideo: Control 0x08000005 not found.
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:19 aphrodite kernel: uvcvideo: Control 0x08000006 not found.
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:19 aphrodite kernel: uvcvideo: Control 0x08000007 not found.
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:19 aphrodite kernel: uvcvideo: Control 0x08000008 not found.
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:19 aphrodite kernel: uvcvideo: Control 0x08000009 not found.
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:19 aphrodite kernel: uvcvideo: Control 0x0800000e not found.
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_G_INPUT, dir=r- (0x80045626)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_S_INPUT, dir=rw (0xc0045627)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_S_INPUT, dir=rw (0xc0045627)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_G_INPUT, dir=r- (0x80045626)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
May 27 20:00:19 aphrodite kernel: uvcvideo: Trying format 0x56595559 (YUYV): 392x313.
May 27 20:00:19 aphrodite kernel: uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_REQBUFS, dir=rw (0xc0145608)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYBUF, dir=rw (0xc0445609)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_mmap
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYBUF, dir=rw (0xc0445609)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_mmap
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:19 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYBUF, dir=rw (0xc0445609)
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_mmap
May 27 20:00:19 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:20 aphrodite kernel: v4l2 ioctl VIDIOC_QBUF, dir=rw (0xc044560f)
May 27 20:00:20 aphrodite kernel: uvcvideo: Queuing buffer 0.
May 27 20:00:20 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:20 aphrodite kernel: v4l2 ioctl VIDIOC_QBUF, dir=rw (0xc044560f)
May 27 20:00:20 aphrodite kernel: uvcvideo: Queuing buffer 1.
May 27 20:00:20 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:20 aphrodite kernel: v4l2 ioctl VIDIOC_QBUF, dir=rw (0xc044560f)
May 27 20:00:20 aphrodite kernel: uvcvideo: Queuing buffer 2.
May 27 20:00:20 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:20 aphrodite kernel: v4l2 ioctl VIDIOC_STREAMON, dir=-w (0x40045612)
May 27 20:00:20 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:20 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:00:20 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:20 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:00:20 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:20 aphrodite kernel: v4l2 ioctl VIDIOC_DQBUF, dir=rw (0xc0445611)
May 27 20:00:20 aphrodite kernel: uvcvideo: Dequeuing buffer 0.
May 27 20:00:20 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:20 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:00:20 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:20 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:00:20 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:20 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:00:20 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:20 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:00:20 aphrodite kernel: uvcvideo: Failed to query (1) UVC control 4 (unit 1) : -32 (exp. 4).
May 27 20:00:20 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:20 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:00:20 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:20 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:00:20 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:20 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:00:20 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:20 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:00:20 aphrodite kernel: uvcvideo: Failed to query (1) UVC control 10 (unit 2) : -32 (exp. 2).
May 27 20:00:20 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:20 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:00:20 aphrodite kernel: uvcvideo: Failed to query (1) UVC control 11 (unit 2) : -32 (exp. 1).
May 27 20:00:20 aphrodite kernel: uvcvideo: uvc_v4l2_release
May 27 20:00:20 aphrodite kdm[3314]: X server for display :0 terminated unexpectedly
May 27 20:00:26 aphrodite kernel: [fglrx] AGP detected, AgpState   = 0x1f000217 (hardware caps of 
chipset)
May 27 20:00:26 aphrodite kernel: agpgart: Found an AGP 2.0 compliant device at 0000:00:00.0.
May 27 20:00:26 aphrodite kernel: agpgart: Putting AGP V2 device at 0000:00:00.0 into 4x mode
May 27 20:00:26 aphrodite kernel: agpgart: Putting AGP V2 device at 0000:01:00.0 into 4x mode
May 27 20:00:26 aphrodite kernel: [fglrx] AGP enabled,  AgpCommand = 0x1f000314 (selected caps)
May 27 20:00:26 aphrodite kernel: [fglrx] total      GART = 268435456
May 27 20:00:26 aphrodite kernel: [fglrx] free       GART = 252440576
May 27 20:00:26 aphrodite kernel: [fglrx] max single GART = 252440576
May 27 20:00:26 aphrodite kernel: [fglrx] total      LFB  = 67108864
May 27 20:00:26 aphrodite kernel: [fglrx] free       LFB  = 47165440
May 27 20:00:26 aphrodite kernel: [fglrx] max single LFB  = 47165440
May 27 20:00:26 aphrodite kernel: [fglrx] total      Inv  = 0
May 27 20:00:26 aphrodite kernel: [fglrx] free       Inv  = 0
May 27 20:00:26 aphrodite kernel: [fglrx] max single Inv  = 0
May 27 20:00:26 aphrodite kernel: [fglrx] total      TIM  = 0
May 27 20:00:26 aphrodite kernel: uvcvideo: uvc_v4l2_open
May 27 20:00:26 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:26 aphrodite kernel: v4l1 ioctl VIDIOCGCAP, dir=r- (0x803c7601)
May 27 20:00:26 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
May 27 20:00:26 aphrodite kernel: v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
May 27 20:00:26 aphrodite kernel: v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
May 27 20:00:26 aphrodite kernel: v4l2 ioctl VIDIOC_ENUM_FMT, dir=rw (0xc0405602)
May 27 20:00:26 aphrodite kernel: v4l2 ioctl VIDIOC_TRY_FMT, dir=rw (0xc0cc5640)
May 27 20:00:26 aphrodite kernel: uvcvideo: Trying format 0x47504a4d (MJPG): 10000x10000.
May 27 20:00:26 aphrodite kernel: uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
May 27 20:00:26 aphrodite kernel: uvcvideo: Failed to query (1) UVC control 1 (unit 0) : -32 (exp. 26).
May 27 20:00:26 aphrodite kernel: uvcvideo: uvc_v4l2_release
May 27 20:00:56 aphrodite kernel: uvcvideo: uvc_v4l2_open
May 27 20:00:56 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:56 aphrodite kernel: v4l1 ioctl VIDIOCGCAP, dir=r- (0x803c7601)
May 27 20:00:56 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCAP, dir=r- (0x80685600)
May 27 20:00:56 aphrodite kernel: v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
May 27 20:00:56 aphrodite kernel: v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
May 27 20:00:56 aphrodite kernel: v4l2 ioctl VIDIOC_ENUM_FMT, dir=rw (0xc0405602)
May 27 20:00:56 aphrodite kernel: v4l2 ioctl VIDIOC_TRY_FMT, dir=rw (0xc0cc5640)
May 27 20:00:56 aphrodite kernel: uvcvideo: Trying format 0x47504a4d (MJPG): 10000x10000.
May 27 20:00:56 aphrodite kernel: uvcvideo: Using default frame interval 66666.6 us (15.0 fps).
May 27 20:00:56 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:56 aphrodite kernel: v4l1 ioctl VIDIOCGCHAN, dir=rw (0xc0307602)
May 27 20:00:56 aphrodite kernel: v4l2 ioctl VIDIOC_ENUMINPUT, dir=rw (0xc04c561a)
May 27 20:00:56 aphrodite kernel: v4l2 ioctl VIDIOC_G_STD, dir=r- (0x80085617)
May 27 20:00:56 aphrodite kernel: uvcvideo: Unsupported ioctl 0x80085617
May 27 20:00:56 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:56 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:00:56 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:56 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:00:56 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:56 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:00:56 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:56 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:00:56 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:56 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:00:56 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:57 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:00:57 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:57 aphrodite kernel: v4l1 ioctl VIDIOCSPICT, dir=-w (0x400e7607)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:57 aphrodite kernel: uvcvideo: Failed to query (130) UVC control 2 (unit 2) : -32 (exp. 2).
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:57 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:57 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
May 27 20:00:57 aphrodite kernel: uvcvideo: Trying format 0x59455247 (GREY): 352x288.
May 27 20:00:57 aphrodite kernel: uvcvideo: Unsupported format 0x59455247.
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_G_FBUF, dir=r- (0x802c560a)
May 27 20:00:57 aphrodite kernel: uvcvideo: Unknown ioctl 0x802c560a
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_S_FBUF, dir=-w (0x402c560b)
May 27 20:00:57 aphrodite kernel: uvcvideo: Unknown ioctl 0x402c560b
May 27 20:00:57 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:57 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:57 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:57 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:00:57 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:57 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:57 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:57 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:00:57 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:57 aphrodite kernel: v4l1 ioctl VIDIOCSPICT, dir=-w (0x400e7607)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:57 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:57 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
May 27 20:00:57 aphrodite kernel: uvcvideo: Trying format 0x00000000 (<7>uvcvideo: Unsupported 
format 0x00000000.
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_G_FBUF, dir=r- (0x802c560a)
May 27 20:00:57 aphrodite kernel: uvcvideo: Unknown ioctl 0x802c560a
May 27 20:00:57 aphrodite kernel: v4l2 ioctl VIDIOC_S_FBUF, dir=-w (0x402c560b)
May 27 20:00:58 aphrodite kernel: uvcvideo: Unknown ioctl 0x402c560b
May 27 20:00:58 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:58 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:00:58 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:58 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:00:58 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:58 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:00:58 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:58 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:00:58 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:58 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:00:58 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:58 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:00:58 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:00:58 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:58 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:00:58 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:58 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:00:58 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:58 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:00:58 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:58 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:00:58 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:58 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:00:58 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:58 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:00:58 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:00:58 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:58 aphrodite kernel: v4l1 ioctl VIDIOCSPICT, dir=-w (0x400e7607)
May 27 20:00:58 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:58 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:00:58 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:58 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:59 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
May 27 20:00:59 aphrodite kernel: uvcvideo: Trying format 0x4f424752 (RGBO): 352x288.
May 27 20:00:59 aphrodite kernel: uvcvideo: Unsupported format 0x4f424752.
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_G_FBUF, dir=r- (0x802c560a)
May 27 20:00:59 aphrodite kernel: uvcvideo: Unknown ioctl 0x802c560a
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_S_FBUF, dir=-w (0x402c560b)
May 27 20:00:59 aphrodite kernel: uvcvideo: Unknown ioctl 0x402c560b
May 27 20:00:59 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:59 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:59 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:59 aphrodite kernel: uvcvideo: Failed to query (130) UVC control 3 (unit 2) : -32 (exp. 2).
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:59 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:00:59 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:59 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:59 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:59 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:00:59 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:00:59 aphrodite kernel: v4l1 ioctl VIDIOCSPICT, dir=-w (0x400e7607)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:59 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:00:59 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
May 27 20:00:59 aphrodite kernel: uvcvideo: Trying format 0x00000000 (<7>uvcvideo: Unsupported 
format 0x00000000.
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_G_FBUF, dir=r- (0x802c560a)
May 27 20:00:59 aphrodite kernel: uvcvideo: Unknown ioctl 0x802c560a
May 27 20:00:59 aphrodite kernel: v4l2 ioctl VIDIOC_S_FBUF, dir=-w (0x402c560b)
May 27 20:00:59 aphrodite kernel: uvcvideo: Unknown ioctl 0x402c560b
May 27 20:00:59 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:00 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:00 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:00 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:00 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:00 aphrodite kernel: v4l1 ioctl VIDIOCSPICT, dir=-w (0x400e7607)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: uvcvideo: Failed to query (132) UVC control 7 (unit 2) : -32 (exp. 2).
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
May 27 20:01:00 aphrodite kernel: uvcvideo: Trying format 0x50424752 (RGBP): 352x288.
May 27 20:01:00 aphrodite kernel: uvcvideo: Unsupported format 0x50424752.
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_FBUF, dir=r- (0x802c560a)
May 27 20:01:00 aphrodite kernel: uvcvideo: Unknown ioctl 0x802c560a
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_S_FBUF, dir=-w (0x402c560b)
May 27 20:01:00 aphrodite kernel: uvcvideo: Unknown ioctl 0x402c560b
May 27 20:01:00 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:00 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:00 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:00 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:00 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:00 aphrodite kernel: v4l1 ioctl VIDIOCSPICT, dir=-w (0x400e7607)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
May 27 20:01:00 aphrodite kernel: uvcvideo: Trying format 0x00000000 (<7>uvcvideo: Unsupported 
format 0x00000000.
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_FBUF, dir=r- (0x802c560a)
May 27 20:01:00 aphrodite kernel: uvcvideo: Unknown ioctl 0x802c560a
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_S_FBUF, dir=-w (0x402c560b)
May 27 20:01:00 aphrodite kernel: uvcvideo: Unknown ioctl 0x402c560b
May 27 20:01:00 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:00 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:00 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:00 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:00 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:00 aphrodite kernel: v4l1 ioctl VIDIOCSPICT, dir=-w (0x400e7607)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:00 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
May 27 20:01:00 aphrodite kernel: uvcvideo: Trying format 0x33524742 (BGR3): 352x288.
May 27 20:01:00 aphrodite kernel: uvcvideo: Unsupported format 0x33524742.
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_G_FBUF, dir=r- (0x802c560a)
May 27 20:01:00 aphrodite kernel: uvcvideo: Unknown ioctl 0x802c560a
May 27 20:01:00 aphrodite kernel: v4l2 ioctl VIDIOC_S_FBUF, dir=-w (0x402c560b)
May 27 20:01:00 aphrodite kernel: uvcvideo: Unknown ioctl 0x402c560b
May 27 20:01:01 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:01 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:01 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:01 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:01 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:01 aphrodite kernel: v4l1 ioctl VIDIOCSPICT, dir=-w (0x400e7607)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
May 27 20:01:01 aphrodite kernel: uvcvideo: Trying format 0x00000000 (<7>uvcvideo: Unsupported 
format 0x00000000.
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_G_FBUF, dir=r- (0x802c560a)
May 27 20:01:01 aphrodite kernel: uvcvideo: Unknown ioctl 0x802c560a
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_S_FBUF, dir=-w (0x402c560b)
May 27 20:01:01 aphrodite kernel: uvcvideo: Unknown ioctl 0x402c560b
May 27 20:01:01 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:01 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: uvcvideo: Failed to query (131) UVC control 7 (unit 2) : -32 (exp. 2).
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:01 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:01 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:01 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:01 aphrodite kernel: v4l1 ioctl VIDIOCSPICT, dir=-w (0x400e7607)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:01 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
May 27 20:01:01 aphrodite kernel: uvcvideo: Trying format 0x34524742 (BGR4): 352x288.
May 27 20:01:01 aphrodite kernel: uvcvideo: Unsupported format 0x34524742.
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_G_FBUF, dir=r- (0x802c560a)
May 27 20:01:01 aphrodite kernel: uvcvideo: Unknown ioctl 0x802c560a
May 27 20:01:01 aphrodite kernel: v4l2 ioctl VIDIOC_S_FBUF, dir=-w (0x402c560b)
May 27 20:01:02 aphrodite kernel: uvcvideo: Unknown ioctl 0x402c560b
May 27 20:01:02 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:02 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:02 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:02 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:02 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:02 aphrodite kernel: v4l1 ioctl VIDIOCSPICT, dir=-w (0x400e7607)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
May 27 20:01:02 aphrodite kernel: uvcvideo: Trying format 0x00000000 (<7>uvcvideo: Unsupported 
format 0x00000000.
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_G_FBUF, dir=r- (0x802c560a)
May 27 20:01:02 aphrodite kernel: uvcvideo: Unknown ioctl 0x802c560a
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_S_FBUF, dir=-w (0x402c560b)
May 27 20:01:02 aphrodite kernel: uvcvideo: Unknown ioctl 0x402c560b
May 27 20:01:02 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:02 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:02 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:02 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: uvcvideo: Failed to query (130) UVC control 7 (unit 2) : -32 (exp. 2).
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:02 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:02 aphrodite kernel: v4l1 ioctl VIDIOCSPICT, dir=-w (0x400e7607)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:02 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_G_FBUF, dir=r- (0x802c560a)
May 27 20:01:02 aphrodite kernel: uvcvideo: Unknown ioctl 0x802c560a
May 27 20:01:02 aphrodite kernel: v4l2 ioctl VIDIOC_S_FBUF, dir=-w (0x402c560b)
May 27 20:01:02 aphrodite kernel: uvcvideo: Unknown ioctl 0x402c560b
May 27 20:01:02 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:03 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:03 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:03 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:03 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:03 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:03 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:03 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:03 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:03 aphrodite kernel: v4l1 ioctl VIDIOCSPICT, dir=-w (0x400e7607)
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:03 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:03 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
May 27 20:01:03 aphrodite kernel: uvcvideo: Trying format 0x59565955 (UYVY): 352x288.
May 27 20:01:03 aphrodite kernel: uvcvideo: Unsupported format 0x59565955.
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_G_FBUF, dir=r- (0x802c560a)
May 27 20:01:03 aphrodite kernel: uvcvideo: Unknown ioctl 0x802c560a
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_S_FBUF, dir=-w (0x402c560b)
May 27 20:01:03 aphrodite kernel: uvcvideo: Unknown ioctl 0x402c560b
May 27 20:01:03 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:03 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:03 aphrodite kernel: uvcvideo: Failed to query (131) UVC control 2 (unit 2) : -32 (exp. 2).
May 27 20:01:03 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:04 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:04 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:04 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:04 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:04 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:04 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:04 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:04 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:04 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:04 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:01:04 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:04 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:04 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:04 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:04 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:04 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:04 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:04 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:04 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:04 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:04 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:04 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:04 aphrodite kernel: v4l1 ioctl VIDIOCSPICT, dir=-w (0x400e7607)
May 27 20:01:04 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:04 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:04 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:04 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:04 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:04 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:04 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:05 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
May 27 20:01:05 aphrodite kernel: uvcvideo: Trying format 0x50323234 (422P): 352x288.
May 27 20:01:05 aphrodite kernel: uvcvideo: Unsupported format 0x50323234.
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_G_FBUF, dir=r- (0x802c560a)
May 27 20:01:05 aphrodite kernel: uvcvideo: Unknown ioctl 0x802c560a
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_S_FBUF, dir=-w (0x402c560b)
May 27 20:01:05 aphrodite kernel: uvcvideo: Unknown ioctl 0x402c560b
May 27 20:01:05 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:05 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:05 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:05 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:05 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:05 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:05 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:05 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:05 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:05 aphrodite kernel: v4l1 ioctl VIDIOCSPICT, dir=-w (0x400e7607)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:05 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_S_CTRL, dir=rw (0xc008561c)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:05 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_S_FMT, dir=rw (0xc0cc5605)
May 27 20:01:05 aphrodite kernel: uvcvideo: Trying format 0x32315559 (YU12): 352x288.
May 27 20:01:05 aphrodite kernel: uvcvideo: Unsupported format 0x32315559.
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_G_FBUF, dir=r- (0x802c560a)
May 27 20:01:05 aphrodite kernel: uvcvideo: Unknown ioctl 0x802c560a
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_S_FBUF, dir=-w (0x402c560b)
May 27 20:01:05 aphrodite kernel: uvcvideo: Unknown ioctl 0x402c560b
May 27 20:01:05 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:05 aphrodite kernel: v4l1 ioctl VIDIOCGPICT, dir=r- (0x800e7606)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:05 aphrodite kernel: uvcvideo: Control 0x00980903 not found.
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_G_CTRL, dir=rw (0xc008561b)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_QUERYCTRL, dir=rw (0xc0445624)
May 27 20:01:05 aphrodite kernel: uvcvideo: Control 0x00980910 not found.
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_G_FMT, dir=rw (0xc0cc5604)
May 27 20:01:05 aphrodite kernel: uvcvideo: uvc_v4l2_ioctl
May 27 20:01:05 aphrodite kernel: v4l1 ioctl VIDIOCGFBUF, dir=r- (0x8014760b)
May 27 20:01:05 aphrodite kernel: v4l2 ioctl VIDIOC_G_FBUF, dir=r- (0x802c560a)
May 27 20:01:05 aphrodite kernel: uvcvideo: Unknown ioctl 0x802c560a
May 27 20:01:05 aphrodite kernel: uvcvideo: Unknown ioctl 0x8014760b
May 27 20:01:05 aphrodite kernel: uvcvideo: uvc_v4l2_release



From laurent.pinchart at skynet.be  Sun May 27 21:01:31 2007
From: laurent.pinchart at skynet.be (Laurent Pinchart)
Date: Sun, 27 May 2007 21:01:31 +0200
Subject: [Linux-uvc-devel] Logitech Fusion (2007)
In-Reply-To: <fc81933921d0.4659e658@rwth-aachen.de>
References: <20070526145103.237420@gmx.net>
	<200705271934.18967.laurent.pinchart@skynet.be>
	<fc81933921d0.4659e658@rwth-aachen.de>
Message-ID: <200705272101.32110.laurent.pinchart@skynet.be>

Hi Sven,

> Sorry for sending you the previous email to your private address. I am used
> to kmail but this webmail-client does not use the list's address by
> default, so my apalogies for that!

No worries.

> > The 2007 model should be supported as well. Could you raise the
> > trace level to
> > 127 and post the kernel log after trying to "start the webcam" ? I
> > assume you
> > still use kdetv, which works for me.
>
> Here is the full log again, this time including the crash. I plug-in the
> webcam, nothing happens concerning the blue light, yet it seems to be
> recognised.

That's pretty normal. The blue light is only turned on when the webcam is 
streaming video data.

> As soon as I start kdetv the blue light on the webcam is turned 
> on and X crashes.

I'm afraid this is a bug in X, maybe in the ATI drivers. There's not much I 
can do there. Other applications might not trigger the problem. Could you try 
luvcview ?

Best regards,

Laurent Pinchart


From Sven.Burmeister at rwth-aachen.de  Mon May 28 12:41:15 2007
From: Sven.Burmeister at rwth-aachen.de (Sven.Burmeister at rwth-aachen.de)
Date: Mon, 28 May 2007 12:41:15 +0200
Subject: [Linux-uvc-devel] Logitech Fusion (2007)
In-Reply-To: <200705272101.32110.laurent.pinchart@skynet.be>
References: <20070526145103.237420@gmx.net>
	<200705271934.18967.laurent.pinchart@skynet.be>
	<fc81933921d0.4659e658@rwth-aachen.de>
	<200705272101.32110.laurent.pinchart@skynet.be>
Message-ID: <fc83842c32e7.465acdeb@rwth-aachen.de>

Hi Laurent!

> I'm afraid this is a bug in X, maybe in the ATI drivers. There's 
> not much I 
> can do there. Other applications might not trigger the problem. 
> Could you try 
> luvcview ?

Indeed, when I use the radeon-driver from X.org it does not crash. I first thought that the webcam 
would still not work, since it just showed a grey image, but that was due to contrast and saturation 
being set to 0.

The only errors I get are:
uvcvideo: Failed to query (132) UVC control 7 (unit 2) : -32 (exp. 2).
uvcvideo: Failed to query (1) UVC control 4 (unit 1) : -32 (exp. 4).
uvcvideo: Failed to query (1) UVC control 10 (unit 2) : -32 (exp. 2).

So it works in kdetv, yet a webcam is for chatting. :) So I tried kopete, which does not work and Ekiga, 
which gives me an error stating that the webcam does not support the requested video-format. If I 
have alook at Ekiga's settings there is only PAL, NTSC and SECAM. Or is Ekiga just not able to activate 
the webcam? The blue light is not turned on when it tries to access it.

Does anyone know how I can set up the webcam to be used with some chat-client?

Sven



From Sven.Burmeister at rwth-aachen.de  Mon May 28 12:45:30 2007
From: Sven.Burmeister at rwth-aachen.de (Sven.Burmeister at rwth-aachen.de)
Date: Mon, 28 May 2007 12:45:30 +0200
Subject: [Linux-uvc-devel] Logitech Fusion (2007)
In-Reply-To: <fc83842c32e7.465acdeb@rwth-aachen.de>
References: <20070526145103.237420@gmx.net>
	<200705271934.18967.laurent.pinchart@skynet.be>
	<fc81933921d0.4659e658@rwth-aachen.de>
	<200705272101.32110.laurent.pinchart@skynet.be>
	<fc83842c32e7.465acdeb@rwth-aachen.de>
Message-ID: <f724a32b7489.465aceea@rwth-aachen.de>

> So it works in kdetv, yet a webcam is for chatting. :) So I tried 
> kopete, which does not work and Ekiga, 
> which gives me an error stating that the webcam does not support 
> the requested video-format. If I 
> have alook at Ekiga's settings there is only PAL, NTSC and SECAM. 
> Or is Ekiga just not able to activate 
> the webcam? The blue light is not turned on when it tries to access 
> it.

What I forgot. Ekiga only shows V4L as video-plugin, yet the uvc-driver is V4L2 is it not? I read that 
some people can use the webcam with Ekiga, how come if it does not have a plugin for V4L2?

Sven



From Sven.Burmeister at rwth-aachen.de  Mon May 28 13:15:05 2007
From: Sven.Burmeister at rwth-aachen.de (Sven.Burmeister at rwth-aachen.de)
Date: Mon, 28 May 2007 13:15:05 +0200
Subject: [Linux-uvc-devel] Logitech Fusion (2007)
In-Reply-To: <f724a32b7489.465aceea@rwth-aachen.de>
References: <20070526145103.237420@gmx.net>
	<200705271934.18967.laurent.pinchart@skynet.be>
	<fc81933921d0.4659e658@rwth-aachen.de>
	<200705272101.32110.laurent.pinchart@skynet.be>
	<fc83842c32e7.465acdeb@rwth-aachen.de>
	<f724a32b7489.465aceea@rwth-aachen.de>
Message-ID: <fc83c440580e.465ad5d9@rwth-aachen.de>

Hello!

> What I forgot. Ekiga only shows V4L as video-plugin, yet the uvc-
> driver is V4L2 is it not? I read that 
> some people can use the webcam with Ekiga, how come if it does not 
> have a plugin for V4L2?

Found it. For opensuse one has to install the pwlib-plugins-v4l2 package and re-plug the webcam.

Sorry for spamming the list, maybe my struggle helps others when searching via google.

Sven



From richiek at optusnet.com.au  Wed May 30 20:08:45 2007
From: richiek at optusnet.com.au (Richard Khoury)
Date: Wed, 30 May 2007 20:08:45 +0200
Subject: [Linux-uvc-devel] Create Live! Cam Optia vs. Video IM
Message-ID: <20070530180845.GA21689@stella>

Hello,
I have the Creative Live! Cam Video IM and I'm wanting to get it
working in Linux. I see that the Live! Cam Optia is supported by the
current drivers; should this mean that the Video IM version will work
also? 
I have tried installing the drivers from the Debain testing
repository which are labelled as version 0.1.0.svn54-5. Loading the
module and plugging in my camera produces these messages in dmesg:
  Linux video capture interface: v2.00
  usbcore: registered new interface driver uvcvideo
  USB Video Class driver (v0.1.0-c)
  usb 2-1: new full speed USB device using uhci_hcd and address 2
  usb 2-1: configuration #1 chosen from 1 choice

The light on my camera doesn't turn on and tvtime doesn't list any
possible video sources (it's looking for /dev/video0 which doesn't
exist and I'm not sure if that's what the uvcvideo module should be
creating).

Any help or advice would be great. I happy to provide any other
information on my system if necessary.

Thanks,
Richard.


From Serge.A.S at tochka.ru  Wed May 30 21:20:04 2007
From: Serge.A.S at tochka.ru (Serge A. Suchkov)
Date: Wed, 30 May 2007 23:20:04 +0400
Subject: [Linux-uvc-devel] Create Live! Cam Optia vs. Video IM
In-Reply-To: <20070530180845.GA21689@stella>
References: <20070530180845.GA21689@stella>
Message-ID: <200705302320.04538.Serge.A.S@tochka.ru>

> I have the Creative Live! Cam Video IM and I'm wanting to get it
> working in Linux. 

Richard,

This webcam (0x041e:0x4053) supported by gspca driver since version 1.00.04 (September 2006)
see: http://mxhaard.free.fr/spca5xx.html


> 

-- 
Regards,
Serge A. Suchkov
--
Reality is bad enough, why should I tell the truth?
		-- Patrick Sky


From protasnb at gmail.com  Thu May 31 21:45:45 2007
From: protasnb at gmail.com (Natalie Protasevich)
Date: Thu, 31 May 2007 12:45:45 -0700
Subject: [Linux-uvc-devel] uvcvideo driver for x86_64
In-Reply-To: <32209efe0705251353t42ded626x3310daf91d968cc7@mail.gmail.com>
References: <32209efe0703272038k10a6f281v6cf0121e2442aefb@mail.gmail.com>
	<200704021153.50682.laurent.pinchart@skynet.be>
	<32209efe0705251353t42ded626x3310daf91d968cc7@mail.gmail.com>
Message-ID: <32209efe0705311245n1f181ef5xc6320e0808105d3f@mail.gmail.com>

On 5/25/07, Natalie Protasevich <protasnb at gmail.com> wrote:
>
> Hi Laurent,
>
>  > V4l: device has no mmap support
> > > ioctl VIDIOCSWIN: Input/output error
> > > ioctl VIDIOCGWIN: Invalid argument
> > > ioctl VIDIOCGCHAN: Invalid argument
> > > ioctl VIDIOCGWIN: Invalid argument
> > > yuvgrab, read failed!
> > > yuvgrab, read failed!
> > > yuvgrab, read failed!
> >
> > Those ioctls are from the V4L1 API, which the Linux UVC driver doesn't
> > support. It might be possible to use the V4L1 compatibility layer, and
> > that's
> > probably what you're doing already (maybe without even being aware) if
> > Marratech works on a 32 bits machine. In that case, there might be some
> > issues with the V4L1 compatibility layer on 64 bit architectures.
>
>
> That is exactly what I am suspecting...
>
>
> > uvccapture and luvcview:
> > >
> > > nataliep at 4300-test:/tmp$ ./uvccapture
> > > sending ioctl VIDIOC_QUERYCAP
> > > sending ioctl VIDIOC_S_FMT
> > > Unable to set format: 22.
> > >  Init v4L2 failed !! exit fatal
> >
> > Those are definitely V4L2 calls. -22 means invalid argument. There might
> > again
> > be some issue with 64 bit architectures, either in the driver or in
> > luvcview.
> > I can't help you much as I have no 64 bit machine to test this on.
>
>
> Actually, I am happy to report that the latest  kernel patches have
> resolved this issue.
>
>
> > I also have a kernel trace with my debug, this is a part of it that
> > shows
> > > that the driver calls into the l1 compat layer, which seems odd to me
> > since
> > > everything from application to kernel is all l2:
> >
> > compat_ioctl32 is the 32bit/64bit compatibility layer, not the V4L1
> > compatibility layer.
>
>
> With new updates to the kernel videodev and compat_ioctl32 layer we can
> run UVC cameras very nicely, using applications like luvcview, it works just
> great.
>
> However, the problem is that we would like to use conferencing software
> that is written to support old v4L1 mechanism, and the rewrite is going
> on...slowly :)  But the V4L1 compat layer it it was working could be a
> solution for the time being. I tracked couple first ioctl's that fail
> without proper support/translation in the v4l_compat_ioctl32 - those are
> VIDIOCGMBUF and VIDIOCGCHAN. I am not sure if it is feasible/easy to
> implement those, the latter one seems to be just a matter of filling out a
> structure according to the camera's features, but the memory mapped buffer
> looks a bit challenging. Although looking at the way it is implemented in
> videodev - it seems possible to do something similar. I would really
> appreciate your opinion on this problem.
>

Laurent,
I'm taking this back. With a closer look the software seems to assume that
device is capable of read and mmap, whereas the new Logitech cams are
streaming devices, so they can't really do read from the user mmaped
buffer...(am I right?) So since the software doesn't implement streaming (it
turns it off in fact), and doesn't call QBUF, DQBUF etc. instead it's just
sending reads that fail of course. So there is no really a point to
implement VIDOCGMBUF as I think I understand now.
Thanks,
--Natalie

>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20070531/21b3c684/attachment.html>

