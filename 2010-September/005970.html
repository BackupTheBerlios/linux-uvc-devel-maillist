<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] Slow frame rate windows/linux?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2010-September/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Slow%20frame%20rate%20windows/linux%3F&In-Reply-To=%3C02a201cb54a4%24517bd1f0%24f47375d0%24%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005981.html">
   <LINK REL="Next"  HREF="005937.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] Slow frame rate windows/linux?</H1>
    <B>Andrew Leech</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Slow%20frame%20rate%20windows/linux%3F&In-Reply-To=%3C02a201cb54a4%24517bd1f0%24f47375d0%24%40gmail.com%3E"
       TITLE="[Linux-uvc-devel] Slow frame rate windows/linux?">coronasensei at gmail.com
       </A><BR>
    <I>Wed Sep 15 09:04:58 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="005981.html">[Linux-uvc-devel] Slow frame rate windows/linux?
</A></li>
        <LI>Next message: <A HREF="005937.html">[Linux-uvc-devel] Running multiple webcams on the same hub
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5970">[ date ]</a>
              <a href="thread.html#5970">[ thread ]</a>
              <a href="subject.html#5970">[ subject ]</a>
              <a href="author.html#5970">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Just an update, yeah I've confirmed that the USB isoc packet sizes were the
culprit. Linux can handle overspec'd usb packets (1028 bytes), it appears
that the microsoft usb stack can handle them, but microsoft's usbvideo.sys
can't, it misses about every second frame. 

Fixed the usb packet size to be &lt;= 1024 and it streams just fine in both
windows and linux!

Cheers,
Andrew

-----Original Message-----
From: Laurent Pinchart [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">laurent.pinchart at ideasonboard.com</A>]
Sent: Monday, 13 September 2010 8:48 AM
To: <A HREF="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">linux-uvc-devel at lists.berlios.de</A>
Cc: Andrew Leech
Subject: Re: [Linux-uvc-devel] Slow frame rate windows/linux?

----

&gt;<i> I feel there must be something wrong in my uvc descriptors / setup 
</I>&gt;<i> that is confusing the windows driver where the linux one is more 
</I>&gt;<i> forgiving. I've tried playing with the mix/max bitrates, and 
</I>&gt;<i> continuous vs static frame intervals, all to no avail.
</I>
If you post the output of lsusb -v I could check the descriptors.

&gt;<i> I've also added timestamps to my frames (uncompressed yuy2) which I 
</I>&gt;<i> think are working, but also noticed no difference.
</I>&gt;<i> 
</I>&gt;<i> Is there any way with the linux driver to check the frame timestamps, 
</I>&gt;<i> if they're wrong it should show up as late/missed frames?
</I>
The uvcvideo driver ignores timestamps at the moment;

&gt;<i> Has anyone got any suggestions? I really want to ensure my hardware is 
</I>&gt;<i> going to be stable on as wide a range of computers as possible.
</I>
--
Regards,

Laurent Pinchart


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005981.html">[Linux-uvc-devel] Slow frame rate windows/linux?
</A></li>
	<LI>Next message: <A HREF="005937.html">[Linux-uvc-devel] Running multiple webcams on the same hub
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5970">[ date ]</a>
              <a href="thread.html#5970">[ thread ]</a>
              <a href="subject.html#5970">[ subject ]</a>
              <a href="author.html#5970">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
