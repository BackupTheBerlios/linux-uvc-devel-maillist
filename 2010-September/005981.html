<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Linux-uvc-devel] Slow frame rate windows/linux?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/linux-uvc-devel/2010-September/index.html" >
   <LINK REL="made" HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Slow%20frame%20rate%20windows/linux%3F&In-Reply-To=%3C201009161554.23611.laurent.pinchart%40ideasonboard.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005964.html">
   <LINK REL="Next"  HREF="005970.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Linux-uvc-devel] Slow frame rate windows/linux?</H1>
    <B>Laurent Pinchart</B> 
    <A HREF="mailto:linux-uvc-devel%40lists.berlios.de?Subject=Re%3A%20%5BLinux-uvc-devel%5D%20Slow%20frame%20rate%20windows/linux%3F&In-Reply-To=%3C201009161554.23611.laurent.pinchart%40ideasonboard.com%3E"
       TITLE="[Linux-uvc-devel] Slow frame rate windows/linux?">laurent.pinchart at ideasonboard.com
       </A><BR>
    <I>Thu Sep 16 15:54:22 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="005964.html">[Linux-uvc-devel] Slow frame rate windows/linux?
</A></li>
        <LI>Next message: <A HREF="005970.html">[Linux-uvc-devel] Slow frame rate windows/linux?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5981">[ date ]</a>
              <a href="thread.html#5981">[ thread ]</a>
              <a href="subject.html#5981">[ subject ]</a>
              <a href="author.html#5981">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Andrew,

On Monday 13 September 2010 01:30:35 Andrew Leech wrote:
&gt;<i> Hi Laurent, all,
</I>&gt;<i> That's interesting about the timestamps, I though they were supposed to be
</I>&gt;<i> essential for synchronising audio and video properly.
</I>
Yes they are... :-)

&gt;<i> I'm not using audio myself so not too concerned about that side of things.
</I>
Same here, that's why timestamp support hasn't been implemented yet. And also 
because it doesn't seem to be supported in the USB Audio Class driver either.

I'd love it if someone could write timestamps support for the uvcvideo driver, 
but that's a difficult task.

&gt;<i> Also, there was a small footnote on one of the msdn pages about interlacing
</I>&gt;<i> requiring timestamps so I had tried that for make interlacing work...it
</I>&gt;<i> didn't work and interlacing still isn't working properly so I stripped out
</I>&gt;<i> oll the interlacing descriptors and I'm going to do deinterlacing manually
</I>&gt;<i> now anyway because I need to do frame grabbing to disk so having proper
</I>&gt;<i> video card deinterlacing wouldn't help much anyway.
</I>&gt;<i> 
</I>&gt;<i> I think I may have found the source of my fps problems however, my frame is
</I>&gt;<i> 768 x576, and as a point of convenience I found that sending 4 lines in a
</I>&gt;<i> uvc packet seemed to work just fine. 4 x 768 + 12 (header) turns out to be
</I>&gt;<i> 1028 x 3 isoc usb packets, which is obviously more than you're allowed, but
</I>&gt;<i> because it was showing the picture just fine I thought it was ok.
</I>&gt;<i> Cropping the image to a smaller width though, and making the usb packets
</I>&gt;<i> smaller, seems to fix the frame rate in windows. It seems that while the
</I>&gt;<i> usb stack can handle the larger isoc packets, there's some buffering in
</I>&gt;<i> the uvc driver that's not large enough to work. I still need to do more
</I>&gt;<i> testing to confirm that's the root of the problem however. That's actually
</I>&gt;<i> what that other message I sent here by mistake was about, I meant to send
</I>&gt;<i> it to the lpc3000 group, I need a lot more buffering in chip to get my usb
</I>&gt;<i> packet sizes back down to legit sizes. I'll let you all know if I get it
</I>&gt;<i> sorted out, because it's a pretty deceptive problem, and highlights a way
</I>&gt;<i> your linux driver handles dodgy hardware better!
</I>
Given the amount of dodgy hardware out there, I'm not surprised that the Linux 
driver works better than the Windows driver :-) Several vendors ship (or at 
least used to ship) a custom UVC driver for Windows to work around device 
bugs.

-- 
Regards,

Laurent Pinchart

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005964.html">[Linux-uvc-devel] Slow frame rate windows/linux?
</A></li>
	<LI>Next message: <A HREF="005970.html">[Linux-uvc-devel] Slow frame rate windows/linux?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5981">[ date ]</a>
              <a href="thread.html#5981">[ thread ]</a>
              <a href="subject.html#5981">[ subject ]</a>
              <a href="author.html#5981">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/linux-uvc-devel">More information about the Linux-uvc-devel
mailing list</a><br>
</body></html>
