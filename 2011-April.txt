From pauljurczak at yahoo.com  Fri Apr  1 00:43:54 2011
From: pauljurczak at yahoo.com (Paul Jurczak)
Date: Thu, 31 Mar 2011 15:43:54 -0700 (PDT)
Subject: [Linux-uvc-devel] Adding dynamic controls
In-Reply-To: <150802.29942.qm@web65408.mail.ac4.yahoo.com>
Message-ID: <102244.70203.qm@web65409.mail.ac4.yahoo.com>

I did a similar exercise with uvcdynctrl and result is the same. I modified logitech.xml file to leave XU_COLOR_PROCESSING_DISABLE selector only. I created 8 versions of .xml file with GUID = e3deaebb-c2ec-4d42-802c-72f2eb3dfb57, control selector from 1 to 8, control id from 0x0A046D81 to 0x0A046D88 and control index from 0 to 7. All new control definitions were successfully imported by uvcdynctrl, but they don't show up on the list of available controls. Trying to redefine any of them returns error 17 (file exists). Trying to access any of them with ioctl VIDIOS_G_CTRL returns EINVAL error.

BTW, looking at XU listing above I noticed that bNumControl = 8, but there are only 6 bits set in bmControls (0x59, 0x80, 0x80). Is that UVC compliant?

Paul


From pulciux at fastwebnet.it  Sat Apr  2 13:40:55 2011
From: pulciux at fastwebnet.it (Gianluigi)
Date: Sat, 2 Apr 2011 13:40:55 +0200
Subject: [Linux-uvc-devel]  Philips Pico Pix 1020 Projector
Message-ID: <201104021340.55479.pulciux@fastwebnet.it>

Hi all, 
I've bought a LED Projector as in subject.
It's cheap, very small and it work well but not on linux.

The only interface present is USB and when it's connected lsusb show  vendor 
id 1de1 and product id 1101.
It appear as a USB mass storage.
Mounting it, in the partition, there is only a Windows exec file.

I've tried it with a Windows Xp on Virtual Box and after the execution of the 
exe file a minimalistic set of software is installed.
A driver and a simple application to start the projector. No option, no 
settings.

Launching the application the projector start to show the video content.

With the projector working under VM I've run again lsusb on the host machine; 
Now, it show a device identified by vendor id 21e7 and product id 000e.

I would like to make it working under linux directly.
I've googled a lot but I haven't found anything of useful.

Someone have some experience or can suggest me a start point to try to make it 
working?

lsusb -v output as mass storage is:

Bus 002 Device 008: ID 1de1:1101  
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  idVendor           0x1de1 
  idProduct          0x1101 
  bcdDevice            1.00
  iManufacturer           1 actions
  iProduct                2 Usb Device
  iSerial                 3 00000000000000000000000000000000
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           32
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          4 self-powered
    bmAttributes         0xc0
      Self Powered
    MaxPower               20mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           2
      bInterfaceClass         8 Mass Storage
      bInterfaceSubClass      5 SFF-8070i
      bInterfaceProtocol     80 
      iInterface              5 Mass Storage
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x01  EP 1 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0001
  Self Powered

and this is lsusb -v output after Windows on VM started it:


Bus 002 Device 007: ID 21e7:000e  
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          255 Vendor Specific Class
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  idVendor           0x21e7 
  idProduct          0x000e 
  bcdDevice            1.00
  iManufacturer           1 actions
  iProduct                2 Usb Device
  iSerial                 3 00000000000000000000000000000000
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           32
    bNumInterfaces          1
    bConfigurationValue     2
    iConfiguration          6 PICO PROJECTOR
    bmAttributes         0xc0
      Self Powered
    MaxPower                2mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      8 
      bInterfaceProtocol      8 
      iInterface              7 USB PICO
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x01  EP 1 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0001
  Self Powered

 
-- 
War is never imperative.
		-- McCoy, "Balance of Terror", stardate 1709.2


From bug-track at fisher-privat.net  Sat Apr  2 22:26:04 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Sat, 02 Apr 2011 22:26:04 +0200
Subject: [Linux-uvc-devel] Philips Pico Pix 1020 Projector
In-Reply-To: <201104021340.55479.pulciux@fastwebnet.it>
References: <201104021340.55479.pulciux@fastwebnet.it>
Message-ID: <1301775964.4441.1.camel@mini>

Hi,

this will be probably a good start:
http://media.koeln.ccc.de/browse/congress/2009/26c3-3353-de-reverse-engineering_displaylink_devices.html
http://libdlo.freedesktop.org/wiki/


Am Samstag, den 02.04.2011, 13:40 +0200 schrieb Gianluigi:
> Hi all, 
> I've bought a LED Projector as in subject.
> It's cheap, very small and it work well but not on linux.
> 
> The only interface present is USB and when it's connected lsusb show  vendor 
> id 1de1 and product id 1101.
> It appear as a USB mass storage.
> Mounting it, in the partition, there is only a Windows exec file.
> 
> I've tried it with a Windows Xp on Virtual Box and after the execution of the 
> exe file a minimalistic set of software is installed.
> A driver and a simple application to start the projector. No option, no 
> settings.
> 
> Launching the application the projector start to show the video content.
> 
> With the projector working under VM I've run again lsusb on the host machine; 
> Now, it show a device identified by vendor id 21e7 and product id 000e.
> 
> I would like to make it working under linux directly.
> I've googled a lot but I haven't found anything of useful.
> 
> Someone have some experience or can suggest me a start point to try to make it 
> working?
> 
> lsusb -v output as mass storage is:
> 
> Bus 002 Device 008: ID 1de1:1101  
> Device Descriptor:
>   bLength                18
>   bDescriptorType         1
>   bcdUSB               2.00
>   bDeviceClass            0 (Defined at Interface level)
>   bDeviceSubClass         0 
>   bDeviceProtocol         0 
>   bMaxPacketSize0        64
>   idVendor           0x1de1 
>   idProduct          0x1101 
>   bcdDevice            1.00
>   iManufacturer           1 actions
>   iProduct                2 Usb Device
>   iSerial                 3 00000000000000000000000000000000
>   bNumConfigurations      1
>   Configuration Descriptor:
>     bLength                 9
>     bDescriptorType         2
>     wTotalLength           32
>     bNumInterfaces          1
>     bConfigurationValue     1
>     iConfiguration          4 self-powered
>     bmAttributes         0xc0
>       Self Powered
>     MaxPower               20mA
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       0
>       bNumEndpoints           2
>       bInterfaceClass         8 Mass Storage
>       bInterfaceSubClass      5 SFF-8070i
>       bInterfaceProtocol     80 
>       iInterface              5 Mass Storage
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            2
>           Transfer Type            Bulk
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0200  1x 512 bytes
>         bInterval               0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x01  EP 1 OUT
>         bmAttributes            2
>           Transfer Type            Bulk
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0200  1x 512 bytes
>         bInterval               1
> Device Qualifier (for other device speed):
>   bLength                10
>   bDescriptorType         6
>   bcdUSB               2.00
>   bDeviceClass            0 (Defined at Interface level)
>   bDeviceSubClass         0 
>   bDeviceProtocol         0 
>   bMaxPacketSize0        64
>   bNumConfigurations      1
> Device Status:     0x0001
>   Self Powered
> 
> and this is lsusb -v output after Windows on VM started it:
> 
> 
> Bus 002 Device 007: ID 21e7:000e  
> Device Descriptor:
>   bLength                18
>   bDescriptorType         1
>   bcdUSB               2.00
>   bDeviceClass          255 Vendor Specific Class
>   bDeviceSubClass         0 
>   bDeviceProtocol         0 
>   bMaxPacketSize0        64
>   idVendor           0x21e7 
>   idProduct          0x000e 
>   bcdDevice            1.00
>   iManufacturer           1 actions
>   iProduct                2 Usb Device
>   iSerial                 3 00000000000000000000000000000000
>   bNumConfigurations      1
>   Configuration Descriptor:
>     bLength                 9
>     bDescriptorType         2
>     wTotalLength           32
>     bNumInterfaces          1
>     bConfigurationValue     2
>     iConfiguration          6 PICO PROJECTOR
>     bmAttributes         0xc0
>       Self Powered
>     MaxPower                2mA
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       0
>       bNumEndpoints           2
>       bInterfaceClass       255 Vendor Specific Class
>       bInterfaceSubClass      8 
>       bInterfaceProtocol      8 
>       iInterface              7 USB PICO
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            2
>           Transfer Type            Bulk
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0200  1x 512 bytes
>         bInterval               0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x01  EP 1 OUT
>         bmAttributes            2
>           Transfer Type            Bulk
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0200  1x 512 bytes
>         bInterval               1
> Device Qualifier (for other device speed):
>   bLength                10
>   bDescriptorType         6
>   bcdUSB               2.00
>   bDeviceClass            0 (Defined at Interface level)
>   bDeviceSubClass         0 
>   bDeviceProtocol         0 
>   bMaxPacketSize0        64
>   bNumConfigurations      1
> Device Status:     0x0001
>   Self Powered
> 
>  




From pulciux at fastwebnet.it  Mon Apr  4 10:09:15 2011
From: pulciux at fastwebnet.it (Gianluigi)
Date: Mon, 4 Apr 2011 10:09:15 +0200
Subject: [Linux-uvc-devel] Philips Pico Pix 1020 Projector
In-Reply-To: <1301775964.4441.1.camel@mini>
References: <201104021340.55479.pulciux@fastwebnet.it>
	<1301775964.4441.1.camel@mini>
Message-ID: <201104041009.15992.pulciux@fastwebnet.it>

On Saturday 02 April 2011 22:26:04 Alexey Fisher wrote:
> Hi,
> 
> this will be probably a good start:
> http://media.koeln.ccc.de/browse/congress/2009/26c3-3353-de-reverse-enginee
> ring_displaylink_devices.html http://libdlo.freedesktop.org/wiki/
> 

Many thanks, it could be.

> Am Samstag, den 02.04.2011, 13:40 +0200 schrieb Gianluigi:
> > Hi all,
> > I've bought a LED Projector as in subject.
> > It's cheap, very small and it work well but not on linux.
> >
> > The only interface present is USB and when it's connected lsusb show 
> > vendor id 1de1 and product id 1101.
> > It appear as a USB mass storage.
> > Mounting it, in the partition, there is only a Windows exec file.
> >
> > I've tried it with a Windows Xp on Virtual Box and after the execution of
> > the exe file a minimalistic set of software is installed.
> > A driver and a simple application to start the projector. No option, no
> > settings.
> >
> > Launching the application the projector start to show the video content.
> >
> > With the projector working under VM I've run again lsusb on the host
> > machine; Now, it show a device identified by vendor id 21e7 and product
> > id 000e.
> >
> > I would like to make it working under linux directly.
> > I've googled a lot but I haven't found anything of useful.
> >
> > Someone have some experience or can suggest me a start point to try to
> > make it working?
> >
> > lsusb -v output as mass storage is:
> >
> > Bus 002 Device 008: ID 1de1:1101
> > Device Descriptor:
> >   bLength                18
> >   bDescriptorType         1
> >   bcdUSB               2.00
> >   bDeviceClass            0 (Defined at Interface level)
> >   bDeviceSubClass         0
> >   bDeviceProtocol         0
> >   bMaxPacketSize0        64
> >   idVendor           0x1de1
> >   idProduct          0x1101
> >   bcdDevice            1.00
> >   iManufacturer           1 actions
> >   iProduct                2 Usb Device
> >   iSerial                 3 00000000000000000000000000000000
> >   bNumConfigurations      1
> >   Configuration Descriptor:
> >     bLength                 9
> >     bDescriptorType         2
> >     wTotalLength           32
> >     bNumInterfaces          1
> >     bConfigurationValue     1
> >     iConfiguration          4 self-powered
> >     bmAttributes         0xc0
> >       Self Powered
> >     MaxPower               20mA
> >     Interface Descriptor:
> >       bLength                 9
> >       bDescriptorType         4
> >       bInterfaceNumber        0
> >       bAlternateSetting       0
> >       bNumEndpoints           2
> >       bInterfaceClass         8 Mass Storage
> >       bInterfaceSubClass      5 SFF-8070i
> >       bInterfaceProtocol     80
> >       iInterface              5 Mass Storage
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x81  EP 1 IN
> >         bmAttributes            2
> >           Transfer Type            Bulk
> >           Synch Type               None
> >           Usage Type               Data
> >         wMaxPacketSize     0x0200  1x 512 bytes
> >         bInterval               0
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x01  EP 1 OUT
> >         bmAttributes            2
> >           Transfer Type            Bulk
> >           Synch Type               None
> >           Usage Type               Data
> >         wMaxPacketSize     0x0200  1x 512 bytes
> >         bInterval               1
> > Device Qualifier (for other device speed):
> >   bLength                10
> >   bDescriptorType         6
> >   bcdUSB               2.00
> >   bDeviceClass            0 (Defined at Interface level)
> >   bDeviceSubClass         0
> >   bDeviceProtocol         0
> >   bMaxPacketSize0        64
> >   bNumConfigurations      1
> > Device Status:     0x0001
> >   Self Powered
> >
> > and this is lsusb -v output after Windows on VM started it:
> >
> >
> > Bus 002 Device 007: ID 21e7:000e
> > Device Descriptor:
> >   bLength                18
> >   bDescriptorType         1
> >   bcdUSB               2.00
> >   bDeviceClass          255 Vendor Specific Class
> >   bDeviceSubClass         0
> >   bDeviceProtocol         0
> >   bMaxPacketSize0        64
> >   idVendor           0x21e7
> >   idProduct          0x000e
> >   bcdDevice            1.00
> >   iManufacturer           1 actions
> >   iProduct                2 Usb Device
> >   iSerial                 3 00000000000000000000000000000000
> >   bNumConfigurations      1
> >   Configuration Descriptor:
> >     bLength                 9
> >     bDescriptorType         2
> >     wTotalLength           32
> >     bNumInterfaces          1
> >     bConfigurationValue     2
> >     iConfiguration          6 PICO PROJECTOR
> >     bmAttributes         0xc0
> >       Self Powered
> >     MaxPower                2mA
> >     Interface Descriptor:
> >       bLength                 9
> >       bDescriptorType         4
> >       bInterfaceNumber        0
> >       bAlternateSetting       0
> >       bNumEndpoints           2
> >       bInterfaceClass       255 Vendor Specific Class
> >       bInterfaceSubClass      8
> >       bInterfaceProtocol      8
> >       iInterface              7 USB PICO
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x81  EP 1 IN
> >         bmAttributes            2
> >           Transfer Type            Bulk
> >           Synch Type               None
> >           Usage Type               Data
> >         wMaxPacketSize     0x0200  1x 512 bytes
> >         bInterval               0
> >       Endpoint Descriptor:
> >         bLength                 7
> >         bDescriptorType         5
> >         bEndpointAddress     0x01  EP 1 OUT
> >         bmAttributes            2
> >           Transfer Type            Bulk
> >           Synch Type               None
> >           Usage Type               Data
> >         wMaxPacketSize     0x0200  1x 512 bytes
> >         bInterval               1
> > Device Qualifier (for other device speed):
> >   bLength                10
> >   bDescriptorType         6
> >   bcdUSB               2.00
> >   bDeviceClass            0 (Defined at Interface level)
> >   bDeviceSubClass         0
> >   bDeviceProtocol         0
> >   bMaxPacketSize0        64
> >   bNumConfigurations      1
> > Device Status:     0x0001
> >   Self Powered
> 

-- 
Witch!  Witch!  They'll burn ya!
		-- Hag, "Tomorrow is Yesterday", stardate unknown


From wwj at 3jtech.com.tw  Mon Apr  4 12:49:14 2011
From: wwj at 3jtech.com.tw (Wen)
Date: Mon, 4 Apr 2011 10:49:14 +0000 (UTC)
Subject: [Linux-uvc-devel] uvc driver under linux 2.4
References: <200909010033.15269.dmit10@gmail.com>
	<200909181314.50360.laurent.pinchart@ideasonboard.com>
Message-ID: <loom.20110404T122752-557@post.gmane.org>



Hi do you know any one solve the problem for using UVC with Linux 2.4?  We 
would be willing to pay for it.  Please contact with me at wwj at 3jtech.com.tw.  
Thanks!





From hetzbh at gmail.com  Mon Apr 11 23:05:59 2011
From: hetzbh at gmail.com (Hetz Ben Hamo)
Date: Tue, 12 Apr 2011 00:05:59 +0300
Subject: [Linux-uvc-devel] Microsoft Lifecam cinerma and Autofocus
Message-ID: <BANLkTi=D5S7Ymg7WnLFfwJ-NaX2yrdYeag@mail.gmail.com>

Hi,

Could someone tell me how can I disable the autofocus when loading the uvc
kernel module? I have the Microsoft Lifecam Cinema and that autofocus drives
me nuts..

Thanks,
Hetz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110412/fe1c2f90/attachment.html>

From sjensen at versanet.de  Tue Apr 12 00:37:29 2011
From: sjensen at versanet.de (Stefan Jensen)
Date: Tue, 12 Apr 2011 00:37:29 +0200
Subject: [Linux-uvc-devel] Microsoft Lifecam cinerma and Autofocus
In-Reply-To: <BANLkTi=D5S7Ymg7WnLFfwJ-NaX2yrdYeag@mail.gmail.com>
References: <BANLkTi=D5S7Ymg7WnLFfwJ-NaX2yrdYeag@mail.gmail.com>
Message-ID: <1302561449.14958.5.camel@hurricane.lounge-warrior.org>

Hi,... 

Am Dienstag, den 12.04.2011, 00:05 +0300 schrieb Hetz Ben Hamo:
> Could someone tell me how can I disable the autofocus when loading the uvc
> kernel module? I have the Microsoft Lifecam Cinema and that autofocus drives
> me nuts..

putting something like

$ uvcdynctrl -d video0 --set="Focus, Auto" 0

in your rc.local should do it. You can see all available controls
of your cam with:

$ uvcdynctrl -c

I don't know, if there is a way to do it on module load, since those
controls are vendor specific.

best regards

Stefan
-- 





From hetzbh at gmail.com  Tue Apr 12 01:51:10 2011
From: hetzbh at gmail.com (Hetz Ben Hamo)
Date: Tue, 12 Apr 2011 02:51:10 +0300
Subject: [Linux-uvc-devel] Microsoft Lifecam cinerma and Autofocus
In-Reply-To: <1302561449.14958.5.camel@hurricane.lounge-warrior.org>
References: <BANLkTi=D5S7Ymg7WnLFfwJ-NaX2yrdYeag@mail.gmail.com>
	<1302561449.14958.5.camel@hurricane.lounge-warrior.org>
Message-ID: <BANLkTi=Rs1twOMjTn9EL7dEVtFg9S3GWfw@mail.gmail.com>

Thanks for your suggestion.

However, this solution could be problematic if a user doesn't have the
webcam connected and only later he connects it.

What I'm looking for is a solution through udev rules, if possible.

Thanks,
Hetz

2011/4/12 Stefan Jensen <sjensen at versanet.de>

> Hi,...
>
> Am Dienstag, den 12.04.2011, 00:05 +0300 schrieb Hetz Ben Hamo:
> > Could someone tell me how can I disable the autofocus when loading the
> uvc
> > kernel module? I have the Microsoft Lifecam Cinema and that autofocus
> drives
> > me nuts..
>
> putting something like
>
> $ uvcdynctrl -d video0 --set="Focus, Auto" 0
>
> in your rc.local should do it. You can see all available controls
> of your cam with:
>
> $ uvcdynctrl -c
>
> I don't know, if there is a way to do it on module load, since those
> controls are vendor specific.
>
> best regards
>
> Stefan
> --
>
>
>
>

-- 

*?? ?? ???
??-??? (???????)
*????? ?????? ?? ????? ??????
????? ????? ?????????? ???????? ??????? ??????? *?????*
???? ?????? ?????? hetz.biz <http://www.hetz.biz/> ?????? ????:
blog.hetz.biz
??????: 0783333113/4/5, ??????: sales at hetz.biz
????'?: sales at hetz.biz - ?????: heunique
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110412/68871ae9/attachment.html>

From zdenek.materna at gmail.com  Tue Apr 12 18:00:41 2011
From: zdenek.materna at gmail.com (=?UTF-8?Q?Zden=C4=9Bk_Materna?=)
Date: Tue, 12 Apr 2011 18:00:41 +0200
Subject: [Linux-uvc-devel] Genius UVC webcam problem on ARM
Message-ID: <BANLkTi=_NZLh2w-wSOo_vc5x0RfyeGu3yA@mail.gmail.com>

Hello,

I have problem with UVC webcam. It's Genius Facecam 1000. I would like
to use it with mjpg-streamer. Before this model, I had Facecam 1320,
but it wasn't mjpeg capable, so mjpg-streamer had to do jpeg
compresion and it was quite slow. Facecam 1000 can provide mjpg stream
by itself and it works great on x86, but it doesn't work on ARM. To
exclude problem in mjpg-streamer I compiled v4l capture example
(http://v4l2spec.bytesex.org/spec-single/v4l2.html#CAPTURE-EXAMPLE)
and it's same - works on x86 a not on ARM.

On embedded platform I'm using AT91SAM9260 (Olimex kit L9260) which
has USB2.0, but only full-speed - is it problem? I don't think so -
previous webcam works great.

On x86 I use kernel 2.6.35 and glibc. On ARM there is kernel
2.6.33.7.2-rt30 and uClibc.

v4l example fails with this error: VIDIOC_STREAMON error 5, Input/output error

webcam is detected correctly:
[ 2042.100000] usb 1-1: new full speed USB device using at91_ohci and address 3
[ 2042.290000] usb 1-1: New USB device found, idVendor=0458, idProduct=707e
[ 2042.290000] usb 1-1: New USB device strings: Mfr=1, Product=2, SerialNumber=0
[ 2042.310000] usb 1-1: Product: FaceCam 1000
[ 2042.320000] usb 1-1: Manufacturer: KYE SYSTEMS CORP.
[ 2042.400000] uvcvideo: Found UVC 1.00 device FaceCam 1000 (0458:707e)
[ 2042.460000] input: FaceCam 1000 as
/devices/platform/at91_ohci/usb1/1-1/1-1:1.0/input/input1

Thanks for any advice!

Best regards
Zdenek Materna


From zdenek.materna at gmail.com  Tue Apr 12 18:55:27 2011
From: zdenek.materna at gmail.com (=?UTF-8?Q?Zden=C4=9Bk_Materna?=)
Date: Tue, 12 Apr 2011 18:55:27 +0200
Subject: [Linux-uvc-devel] Genius UVC webcam problem on ARM
In-Reply-To: <BANLkTi=_NZLh2w-wSOo_vc5x0RfyeGu3yA@mail.gmail.com>
References: <BANLkTi=_NZLh2w-wSOo_vc5x0RfyeGu3yA@mail.gmail.com>
Message-ID: <BANLkTin-WS0UbL-sFfFE_XOrQMF5a1EkaA@mail.gmail.com>

Hello again,

now I discovered, that it's possible to change module parameters even
if they are compiled in kernel... So I did:

echo 2 > /sys/module/uvcvideo/parameters/quirks

And v4l example now ends like this:

VIDIOC_S_FMT error 28, No space left on device

Error "No space left" indicates problem with USB bandwidth? How can I
solve it? I tried to change resolution in v4l example from 640x480 to
160x120 but it didn't help.

Dne 12. dubna 2011 18:00 Zden?k Materna <zdenek.materna at gmail.com> napsal(a):
> Hello,
>
> I have problem with UVC webcam. It's Genius Facecam 1000. I would like
> to use it with mjpg-streamer. Before this model, I had Facecam 1320,
> but it wasn't mjpeg capable, so mjpg-streamer had to do jpeg
> compresion and it was quite slow. Facecam 1000 can provide mjpg stream
> by itself and it works great on x86, but it doesn't work on ARM. To
> exclude problem in mjpg-streamer I compiled v4l capture example
> (http://v4l2spec.bytesex.org/spec-single/v4l2.html#CAPTURE-EXAMPLE)
> and it's same - works on x86 a not on ARM.
>
> On embedded platform I'm using AT91SAM9260 (Olimex kit L9260) which
> has USB2.0, but only full-speed - is it problem? I don't think so -
> previous webcam works great.
>
> On x86 I use kernel 2.6.35 and glibc. On ARM there is kernel
> 2.6.33.7.2-rt30 and uClibc.
>
> v4l example fails with this error: VIDIOC_STREAMON error 5, Input/output error
>
> webcam is detected correctly:
> [ 2042.100000] usb 1-1: new full speed USB device using at91_ohci and address 3
> [ 2042.290000] usb 1-1: New USB device found, idVendor=0458, idProduct=707e
> [ 2042.290000] usb 1-1: New USB device strings: Mfr=1, Product=2, SerialNumber=0
> [ 2042.310000] usb 1-1: Product: FaceCam 1000
> [ 2042.320000] usb 1-1: Manufacturer: KYE SYSTEMS CORP.
> [ 2042.400000] uvcvideo: Found UVC 1.00 device FaceCam 1000 (0458:707e)
> [ 2042.460000] input: FaceCam 1000 as
> /devices/platform/at91_ohci/usb1/1-1/1-1:1.0/input/input1
>
> Thanks for any advice!
>
> Best regards
> Zdenek Materna
>


From zdenek.materna at gmail.com  Tue Apr 12 19:52:14 2011
From: zdenek.materna at gmail.com (=?UTF-8?Q?Zden=C4=9Bk_Materna?=)
Date: Tue, 12 Apr 2011 19:52:14 +0200
Subject: [Linux-uvc-devel] Genius UVC webcam problem on ARM
In-Reply-To: <BANLkTin-WS0UbL-sFfFE_XOrQMF5a1EkaA@mail.gmail.com>
References: <BANLkTi=_NZLh2w-wSOo_vc5x0RfyeGu3yA@mail.gmail.com>
	<BANLkTin-WS0UbL-sFfFE_XOrQMF5a1EkaA@mail.gmail.com>
Message-ID: <BANLkTiniSNm5LCtbMqBzr_fBqsARmHRD9g@mail.gmail.com>

Sorry for another mail. It works with quirks 128 and uncompressed YUV
format. Is there any way how to use compressed MJPEG? Should I try
compile never uvcvideo driver?

Dne 12. dubna 2011 18:55 Zden?k Materna <zdenek.materna at gmail.com> napsal(a):
> Hello again,
>
> now I discovered, that it's possible to change module parameters even
> if they are compiled in kernel... So I did:
>
> echo 2 > /sys/module/uvcvideo/parameters/quirks
>
> And v4l example now ends like this:
>
> VIDIOC_S_FMT error 28, No space left on device
>
> Error "No space left" indicates problem with USB bandwidth? How can I
> solve it? I tried to change resolution in v4l example from 640x480 to
> 160x120 but it didn't help.
>
> Dne 12. dubna 2011 18:00 Zden?k Materna <zdenek.materna at gmail.com> napsal(a):
>> Hello,
>>
>> I have problem with UVC webcam. It's Genius Facecam 1000. I would like
>> to use it with mjpg-streamer. Before this model, I had Facecam 1320,
>> but it wasn't mjpeg capable, so mjpg-streamer had to do jpeg
>> compresion and it was quite slow. Facecam 1000 can provide mjpg stream
>> by itself and it works great on x86, but it doesn't work on ARM. To
>> exclude problem in mjpg-streamer I compiled v4l capture example
>> (http://v4l2spec.bytesex.org/spec-single/v4l2.html#CAPTURE-EXAMPLE)
>> and it's same - works on x86 a not on ARM.
>>
>> On embedded platform I'm using AT91SAM9260 (Olimex kit L9260) which
>> has USB2.0, but only full-speed - is it problem? I don't think so -
>> previous webcam works great.
>>
>> On x86 I use kernel 2.6.35 and glibc. On ARM there is kernel
>> 2.6.33.7.2-rt30 and uClibc.
>>
>> v4l example fails with this error: VIDIOC_STREAMON error 5, Input/output error
>>
>> webcam is detected correctly:
>> [ 2042.100000] usb 1-1: new full speed USB device using at91_ohci and address 3
>> [ 2042.290000] usb 1-1: New USB device found, idVendor=0458, idProduct=707e
>> [ 2042.290000] usb 1-1: New USB device strings: Mfr=1, Product=2, SerialNumber=0
>> [ 2042.310000] usb 1-1: Product: FaceCam 1000
>> [ 2042.320000] usb 1-1: Manufacturer: KYE SYSTEMS CORP.
>> [ 2042.400000] uvcvideo: Found UVC 1.00 device FaceCam 1000 (0458:707e)
>> [ 2042.460000] input: FaceCam 1000 as
>> /devices/platform/at91_ohci/usb1/1-1/1-1:1.0/input/input1
>>
>> Thanks for any advice!
>>
>> Best regards
>> Zdenek Materna
>>
>


From uskokovic at gmail.com  Tue Apr 12 22:17:13 2011
From: uskokovic at gmail.com (Marko Uskokovic)
Date: Tue, 12 Apr 2011 22:17:13 +0200
Subject: [Linux-uvc-devel] Philips Pico Pix 1020 Projector
Message-ID: <bef0b076e58a5be860ae5f194e27b381.squirrel@kondor.etf.bg.ac.rs>

On Mon Apr 4 10:09:15 Gianluigi wrote
> On Saturday 02 April 2011 22:26:04 Alexey Fisher wrote:
> > Hi,
> >
> > this will be probably a good start:
> > http://media.koeln.ccc.de/browse/congress/2009/26c3-3353-de-reverse-enginee
> > ring_displaylink_devices.html http://libdlo.freedesktop.org/wiki/
> >

> Many thanks, it could be.



Hi,
Any luck with this projector?






From pulciux at fastwebnet.it  Wed Apr 13 07:34:01 2011
From: pulciux at fastwebnet.it (Gianluigi)
Date: Wed, 13 Apr 2011 07:34:01 +0200
Subject: [Linux-uvc-devel] Philips Pico Pix 1020 Projector
In-Reply-To: <bef0b076e58a5be860ae5f194e27b381.squirrel@kondor.etf.bg.ac.rs>
References: <bef0b076e58a5be860ae5f194e27b381.squirrel@kondor.etf.bg.ac.rs>
Message-ID: <201104130734.01472.pulciux@fastwebnet.it>

On Tuesday 12 April 2011 22:17:13 Marko Uskokovic wrote:
> Hi,
> Any luck with this projector?
> 

Not for now but because I've not found time to work on it.

If anybody have one of this projector we can try to share info and tasks.

-- 
Superior ability breeds superior ambition.
		-- Spock, "Space Seed", stardate 3141.9


From bug-track at fisher-privat.net  Wed Apr 13 09:46:03 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Wed, 13 Apr 2011 09:46:03 +0200
Subject: [Linux-uvc-devel] Genius UVC webcam problem on ARM
In-Reply-To: <BANLkTiniSNm5LCtbMqBzr_fBqsARmHRD9g@mail.gmail.com>
References: <BANLkTi=_NZLh2w-wSOo_vc5x0RfyeGu3yA@mail.gmail.com>
	<BANLkTin-WS0UbL-sFfFE_XOrQMF5a1EkaA@mail.gmail.com>
	<BANLkTiniSNm5LCtbMqBzr_fBqsARmHRD9g@mail.gmail.com>
Message-ID: <1302680763.8103.5.camel@zwerg>

Hallo,

On Di, 2011-04-12 at 19:52 +0200, Zden?k Materna wrote:
> Sorry for another mail. It works with quirks 128 and uncompressed YUV
> format. Is there any way how to use compressed MJPEG? Should I try
> compile never uvcvideo driver?

please attach the output of "lsusb -vd zzzz:xxxx"
zzzz:xxxx - is the usb id number of your webcam

and please attach complete trace of uvcvideo. You can enable it with:
sudo rmmod uvcvideo && sudo modprobe uvcvideo trace=0xffff

-- 
Regards,
        Alexey



From laurent.pinchart at ideasonboard.com  Wed Apr 13 16:39:57 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Wed, 13 Apr 2011 16:39:57 +0200
Subject: [Linux-uvc-devel] 0ac8:0332 Z-Star Microelectronics Corp.
	webcam not working
In-Reply-To: <AANLkTimDC3-J-zqfAd-AkiuNV4S5s3V=LRVV8nA1y1Ue@mail.gmail.com>
References: <AANLkTimhvfbxy2hyq-D=o79t0+ZdALh_Wp3K+FnvrZ1x@mail.gmail.com>
	<201103062201.30495.laurent.pinchart@ideasonboard.com>
	<AANLkTimDC3-J-zqfAd-AkiuNV4S5s3V=LRVV8nA1y1Ue@mail.gmail.com>
Message-ID: <201104131639.58779.laurent.pinchart@ideasonboard.com>

Hi Mohamed,

On Monday 07 March 2011 15:54:42 Mohamed Amine JALLOULI wrote:
> Hi Laurent,
> 
> #1- I set the option to 0x10
> modprobe uvcvideo quirks=0x10
> 
> #2- I Make sure the driver is not already loaded
> modprobe -r uvcvideo
>   # this command did not return any information.

You should have done it the other way around. If the driver is already loaded, 
remove it with modprobe -r uvcvideo. Then load it with modprobe uvcvideo 
quirks=0x10.

> #3- the result of the command sudo lsusb -v -d 0ac8:0332 is

Thanks.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Wed Apr 13 16:48:01 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Wed, 13 Apr 2011 16:48:01 +0200
Subject: [Linux-uvc-devel] Vimicro USB Camera (Altair)
In-Reply-To: <AANLkTinim3hjnz5DVhGdXZ4_BXQ9zgVex7fJm26887xh@mail.gmail.com>
References: <AANLkTimiuAZdxhSEhQmSE1rL3N0UxH2ytf+11GqESVA7@mail.gmail.com>
	<4D793DD1.3010703@skynet.be>
	<AANLkTinim3hjnz5DVhGdXZ4_BXQ9zgVex7fJm26887xh@mail.gmail.com>
Message-ID: <201104131648.01815.laurent.pinchart@ideasonboard.com>

Hi,

On Friday 11 March 2011 03:04:08 Misc Things wrote:
> On Thu, Mar 10, 2011 at 4:08 PM, borsprl wrote:
> > Le 10/03/11 00:51, Misc Things a ?crit :
> >> On Wed, Mar 9, 2011 at 3:30 PM, Jani Frilander wrote:
> >>> 2011/3/9 Misc Things<formisc at gmail.com>:
> >>>> Simon, Laurent
> >>>>  I recently got
> >>>> 
> >>>> 0ac8:3450 Z-Star Microelectronics Vimicro USB Camera (Altair) camera.
> >>>> And though i got the video working without an (major) issues i can't
> >>>> seemed to figure out how to get the sound to work.
> >>>> The details are here:
> >>>> 
> >>>> http://www.linuxquestions.org/questions/linux-hardware-18/web-cam-gear
> >>>> head-model-wc735i-vimicro-usb-camera-altair-0ac8-3450-z-star-microelec
> >>>> tr-sound-867108/

[snip]

Looking at the USB descriptors at the above link, your camera simply has no 
microphone.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Wed Apr 13 16:53:32 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Wed, 13 Apr 2011 16:53:32 +0200
Subject: [Linux-uvc-devel] Microsoft LifeCam HD-5000 exposure/fps
	problem and a workaround
In-Reply-To: <AANLkTinO6p5p6ajZMLtFLh2VzNG81uYjKQ_xpV7TM3=B@mail.gmail.com>
References: <AANLkTinwmkQBMnncZX2=MT7USfm5d3duqs5MqScHUwOF@mail.gmail.com>
	<201103061225.01067.laurent.pinchart@ideasonboard.com>
	<AANLkTinO6p5p6ajZMLtFLh2VzNG81uYjKQ_xpV7TM3=B@mail.gmail.com>
Message-ID: <201104131653.32543.laurent.pinchart@ideasonboard.com>

Hi Jani,

On Sunday 06 March 2011 16:12:01 Jani Frilander wrote:
> 2011/3/6 Laurent Pinchart wrote:
> > Could you please send me the output of
> > 
> > lsusb -v -d 045e:076d
> > 
> > (running as root if possible) ?
> 
> Gzipped file attached.

Thanks.

> > Looks like the webcam has been designed by yet another brain-dead
> > developer. *sigh* :-(
> 
> Or maybe they have crippled it for a purpose.

Never underestimate human stupidity :-)

> > What are the minimum, maximum, default and step values reported by the
> > driver when you query the exposure control ?
> 
> Output of v4l2-ctl -l:
> brightness (int)  : min=30 max=255 step=1 default=133 value=153
> contrast (int)  : min=0 max=10 step=1 default=5 value=5
> saturation (int)  : min=0 max=200 step=1 default=83 value=83
> white_balance_temperature_auto (bool) : default=1 value=1
> power_line_frequency (menu) : min=0 max=2 default=2 value=1
> white_balance_temperature (int)  : min=2800 max=10000 step=1
> default=4500 value=3935
> sharpness (int)  : min=0 max=50 step=1 default=20 value=50
> backlight_compensation (int)  : min=0 max=10 step=1 default=0 value=0
> exposure_auto (menu) : min=0 max=3 default=1 value=3
> exposure_absolute (int)  : min=5 max=20000 step=1 default=156 value=156

According to what the camera reports, all values between 5 and 20000 should be 
valid. That's obviously not the case, as showed by your tests. The driver 
unfortunately has no way to know that only a couple of exposure values are 
supported by the camera.

> focus_absolute (int)  : min=0 max=40 step=1 default=0 value=0
> focus_auto (bool) : default=0 value=1
> zoom_absolute (int)  : min=0 max=10 step=1 default=0 value=0
> 
> As a side note, this webcam doesn't support all exposure_auto values.
> Output from guvcview, when trying out all modes:
> 
> checking format: 1196444237
> VIDIOC_G_COMP:: Invalid argument
>    compression control not supported
> vid:045e
> pid:076d
> driver:uvcvideo
> VIDIOC_S_CTRL - Unable to set control: Input/output error
> Exposure, Auto change to 0 failed
> hardware value is 3
> VIDIOC_S_CTRL - Unable to set control: Input/output error
> Exposure, Auto change to 2 failed
> hardware value is 1

That's a known problem I need to fix in the driver. It will unfortunately not 
solve your absolute exposure issue though.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Wed Apr 13 16:57:48 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Wed, 13 Apr 2011 16:57:48 +0200
Subject: [Linux-uvc-devel] Extension unit documentation
In-Reply-To: <AANLkTin4Qbxr=nFxVxZ8TVBt9k=5btEsQ5i2NKavoyP_@mail.gmail.com>
References: <724909.66364.qm@web65406.mail.ac4.yahoo.com>
	<AANLkTin4Qbxr=nFxVxZ8TVBt9k=5btEsQ5i2NKavoyP_@mail.gmail.com>
Message-ID: <201104131657.48663.laurent.pinchart@ideasonboard.com>

Hi,

On Friday 18 March 2011 10:57:33 Paulo Assis wrote:
> 2011/3/18 Paul Jurczak <pauljurczak at yahoo.com>
> > 
> > I there any documentation available about XU (extension unit) for webcams
> > other than Logitech? XML definition files for uvcdynctrl maybe? I'm
> > specifically looking for disabling on-board image processing in order to
> > get raw Bayer data. Large number of modern UVC compliant webcam
> > controllers support this feature now.
> 
> None that I'm aware off. Even in the case of logitech, the new Cx10 models
> are currently missing this type of information.

I'm not aware of any documentation either. That kind of information needs to 
come from vendors, so you will need to contact them directly.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Wed Apr 13 17:01:12 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Wed, 13 Apr 2011 17:01:12 +0200
Subject: [Linux-uvc-devel] New UVC Device
In-Reply-To: <581520.54883.qm@web45303.mail.sp1.yahoo.com>
References: <581520.54883.qm@web45303.mail.sp1.yahoo.com>
Message-ID: <201104131701.12955.laurent.pinchart@ideasonboard.com>

Hi Ender,

On Wednesday 23 March 2011 01:18:21 Ender Tekin wrote:
> Hi,
> I have the following UVC device (which I am having issues with) that is not
> listed on http://www.ideasonboard.org/uvc/#devices.
> 
> My device has ID 0c45:6450, and is the integrated webcam in a Dell Vostro
> 3300 with Intel core i5. Below is part of the dmesg output:
> 
> Mar 22 15:34:44 kamyon-dell kernel: [   54.255630] usb 1-1.4: new high
> speed USB device using ehci_hcd and address 10
> Mar 22 15:34:44 kamyon-dell kernel: [   54.465583] uvcvideo: Found UVC 1.00
> device Laptop_Integrated_Webcam_2M (0c45:6450)
> Mar 22 15:34:44 kamyon-dell kernel: [   54.474277] input:
> Laptop_Integrated_Webcam_2M as
> /devices/pci0000:00/0000:00:1a.0/usb1/1-1/1-1.4/1-1.4:1.0/input/input15
> Mar 22 15:34:45 kamyon-dell kernel: [   55.113561] usb 1-1.4: USB
> disconnect, address 10
> Mar 22 15:34:45 kamyon-dell kernel: [   55.474784] usb 1-1.4: new high
> speed USB device using ehci_hcd and address 11
> Mar 22 15:34:45 kamyon-dell kernel: [   55.667568] uvcvideo: Found UVC 1.00
> device Laptop_Integrated_Webcam_2M (0c45:6450)
> Mar 22 15:34:45 kamyon-dell kernel: [   55.676179] input:
> Laptop_Integrated_Webcam_2M as
> /devices/pci0000:00/0000:00:1a.0/usb1/1-1/1-1.4/1-1.4:1.0/input/input16
> Mar 22 15:34:45 kamyon-dell kernel: [   55.782029] Bluetooth: HIDP (Human
> Interface Emulation) ver 1.2
> Mar 22 15:34:45 kamyon-dell kernel: [   55.880879] usb 1-1.4: USB
> disconnect, address 11

[snip]

> It seems to be connecting/disconnecting a whole lot, and in the end, I do
> not even get a /dev/video0, and any webcam software reports webcam not
> found. I am running Ubuntu 10.10 (Kernel 2.6.35.28), and did not seem to
> have this problem with Ubuntu 10.04, although I updated soon after. It
> will sometimes work, and once or twice it seemed to work after turning
> bluetooth off. Any ideas?

That kind of behaviour can be caused by a USB core bug (quite unlikely 
though), a camera firmware bug that makes the camera crash and reboot (much 
more likely) or by electrical issues such as bad cables or a noisy environment 
(both are usually related).

If you have a Windows partition on the computer, does the camera work on 
Windows ? Can you also try a Ubuntu 10.04 live CD ?

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Wed Apr 13 17:04:36 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Wed, 13 Apr 2011 17:04:36 +0200
Subject: [Linux-uvc-devel] Creative Live! Cam Chat HD
In-Reply-To: <AANLkTimwmxuUVa5UOihuh8ZXeYcPp7mZWe2YPdb55Kv1@mail.gmail.com>
References: <AANLkTin07prRE48amMj351QXZV1LyptwagOH7Cb=RfzP@mail.gmail.com>
	<AANLkTikFvu1JD+yZgprtnc8CByRSdJULFwjq=NxEsf44@mail.gmail.com>
	<AANLkTimwmxuUVa5UOihuh8ZXeYcPp7mZWe2YPdb55Kv1@mail.gmail.com>
Message-ID: <201104131704.36289.laurent.pinchart@ideasonboard.com>

Hi,

On Wednesday 23 March 2011 21:40:07 Jesper Skottfelt wrote:
> The webcam works fine in kubuntu 10.10, but it doesn't work in kubuntu
> 10.04.

As it works on 10.10, I'll mark it as supported. 

> 2011/3/23 Jesper Skottfelt <skottfelt at gmail.com>:
> > 'lsusb -v -d 041e:4088' as root gives:

[snip]

Thanks for the report. I've added the device to the supported devices list.

> > 2011/3/23 Riku Sepp?l? <riku.seppala at kymp.net>:
> >> On 03/23/2011 11:15 AM, Jesper Skottfelt wrote:
> >>> Hi
> >>> 
> >>> 'Creative Live! Cam Chat HD' is not on the list.
> >>> 
> >>> The ID number is:  041e:4088
> >> 
> >> I'll bet Laurent want you to send the output of
> >> 
> >> lsusb -v -d 041e:4088
> >> 
> >> (running as root if possible :)

Indeed :-) Thanks for pointing it out.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Wed Apr 13 17:09:29 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Wed, 13 Apr 2011 17:09:29 +0200
Subject: [Linux-uvc-devel] Raw Bayer data streaming from unknown camera
In-Reply-To: <381936.8308.qm@web65402.mail.ac4.yahoo.com>
References: <381936.8308.qm@web65402.mail.ac4.yahoo.com>
Message-ID: <201104131709.29479.laurent.pinchart@ideasonboard.com>

Hi Paul,

On Wednesday 23 March 2011 19:29:44 Paul Jurczak wrote:
> Hi,
> I have a project, which require raw pixel data from UVC camera (image
> processor off). There are products in China, which use UVC camera
> controller known to support streaming raw pixel data, for example Vimicro
> VC0345. Their Windows driver exposes 8-bit and 10-bit raw data modes, but
> they don't support it on Linux. What is the easiest way to make it
> available on Linux? If they tell me what is guidExtensionCode
> and bmControls address (bit mask) for the control to turn image processor
> off, is it going to be enough information to access this control?

Yes, that should be enough.

> If I can't get any information from them, is brute force method of testing
> each EXTENSION_UNIT control feasible?

It could work, but it might not be straightforward. If you're lucky you will 
just need to modify one control. If you're less lucky, the extension units 
will give you raw access to the device registers space, and you will need to 
modify several registers. If you're even less lucky, the extension units will 
give you access to firmware update, and you will erase the on-board flash.

> BTW, I know that some Logitech webcams support raw data streaming, but I
> can't use them for mechanical and other reasons.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Wed Apr 13 17:12:23 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Wed, 13 Apr 2011 17:12:23 +0200
Subject: [Linux-uvc-devel] USB camera DFK 22BUC03 from ImagingSource
In-Reply-To: <AANLkTintmyc76UruAQxv3g=i6437-nZj5rSLs_BRVyQT@mail.gmail.com>
References: <mailman.3885.1300892592.1407.linux-uvc-devel@lists.berlios.de>
	<02152457-BC49-4A9A-98AC-F18038ED4184@mpi-cbg.de>
	<AANLkTintmyc76UruAQxv3g=i6437-nZj5rSLs_BRVyQT@mail.gmail.com>
Message-ID: <201104131712.23675.laurent.pinchart@ideasonboard.com>

Hi Paulo,

On Thursday 24 March 2011 10:48:34 Paulo Assis wrote:
> Hi,
> 
> >     bFunctionClass        255 Vendor Specific Class
> >     bFunctionSubClass       3
> 
> The camera is not uvc compatible, should read something like:
> 
>       bFunctionClass         14 Video
>       bFunctionSubClass       3 Video Interface Collection
> 
> so I don't think it will work with the uvc driver, no matter how hard
> you try :C.

Some early Logitech devices were mostly UVC-compatible, and used a Vendor 
Specific Class. They're supported by the UVC video driver, as very little was 
needed to support them. A Vendor Specific Class is not a definitive sign that 
the device can't be supported by the uvcvideo driver.

However, in this case, camera is very far from being UVC-compatible, so the 
uvcvideo driver won't support it.

> You may have better luck with gspca, though, even if this implies a bit of
> reverse engineering from the windows driver.

-- 
Regards,

Laurent Pinchart


From zdenek.materna at gmail.com  Wed Apr 13 17:13:28 2011
From: zdenek.materna at gmail.com (=?UTF-8?Q?Zden=C4=9Bk_Materna?=)
Date: Wed, 13 Apr 2011 17:13:28 +0200
Subject: [Linux-uvc-devel] Genius UVC webcam problem on ARM
In-Reply-To: <1302680763.8103.5.camel@zwerg>
References: <BANLkTi=_NZLh2w-wSOo_vc5x0RfyeGu3yA@mail.gmail.com>
	<BANLkTin-WS0UbL-sFfFE_XOrQMF5a1EkaA@mail.gmail.com>
	<BANLkTiniSNm5LCtbMqBzr_fBqsARmHRD9g@mail.gmail.com>
	<1302680763.8103.5.camel@zwerg>
Message-ID: <BANLkTikiGg02uo=dLmyNcaNdTh-9SjQQ-w@mail.gmail.com>

Hello,

output of lsusb and uvcvideo traces are attached. Output from lsusb is
from PC, because lsusb on ARM kit doesn't support verbose parameter.

Best regards,
Zdenek Materna


Dne 13. dubna 2011 9:46 Alexey Fisher <bug-track at fisher-privat.net> napsal(a):
> Hallo,
>
> On Di, 2011-04-12 at 19:52 +0200, Zden?k Materna wrote:
>> Sorry for another mail. It works with quirks 128 and uncompressed YUV
>> format. Is there any way how to use compressed MJPEG? Should I try
>> compile never uvcvideo driver?
>
> please attach the output of "lsusb -vd zzzz:xxxx"
> zzzz:xxxx - is the usb id number of your webcam
>
> and please attach complete trace of uvcvideo. You can enable it with:
> sudo rmmod uvcvideo && sudo modprobe uvcvideo trace=0xffff
>
> --
> Regards,
> ? ? ? ?Alexey
>
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: uvcvideo-logs.tar.bz2
Type: application/x-bzip2
Size: 7841 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110413/b7fb6c50/attachment.bin>

From laurent.pinchart at ideasonboard.com  Wed Apr 13 17:15:05 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Wed, 13 Apr 2011 17:15:05 +0200
Subject: [Linux-uvc-devel] can't compile UVC package
In-Reply-To: <AANLkTi=6-8qTb+rtDASRXjHwv+XFikuAS8N2x=PBQjh=@mail.gmail.com>
References: <AANLkTin=_TatueMdACAmVvj9QoLipmmUtgzJ1XZ9dJ+8@mail.gmail.com>
	<AANLkTimu1No_ZR22f8b4LJoWSjA_xxjO=3ksGxXyjXRB@mail.gmail.com>
	<AANLkTi=6-8qTb+rtDASRXjHwv+XFikuAS8N2x=PBQjh=@mail.gmail.com>
Message-ID: <201104131715.05733.laurent.pinchart@ideasonboard.com>

H,

On Saturday 26 March 2011 19:37:38 Misc Things wrote:
> On Sat, Mar 26, 2011 at 11:25 AM, Misc Things <formisc at gmail.com> wrote:
> <skip>
> 
> > make -C /lib/modules/2.6.18-194.17.1.el5.centos.plus/build
> > SUBDIRS=/home/az/v4l-dvb-abd3aac6644e/v4l  modules
> > make[2]: Entering directory
> > `/usr/src/kernels/2.6.18-194.17.1.el5.centos.plus-i686'
> >  CC [M]  /home/az/v4l-dvb-abd3aac6644e/v4l/tuner-xc2028.o
> > In file included from
> > /home/az/v4l-dvb-abd3aac6644e/v4l/tuner-xc2028.c:19:
> > /home/az/v4l-dvb-abd3aac6644e/v4l/compat.h:133: error: static
> > declaration of 'strict_strtoul' follows non-static declaration
> > include/linux/kernel.h:141: error: previous declaration of
> > 'strict_strtoul' was here
> > make[3]: *** [/home/az/v4l-dvb-abd3aac6644e/v4l/tuner-xc2028.o] Error 1
> > make[2]: *** [_module_/home/az/v4l-dvb-abd3aac6644e/v4l] Error 2
> > make[2]: Leaving directory
> > `/usr/src/kernels/2.6.18-194.17.1.el5.centos.plus-i686'
> > make[1]: *** [default] Error 2
> > make[1]: Leaving directory `/home/az/v4l-dvb-abd3aac6644e/v4l'
> > make: *** [all] Error 2
> > 
> > [/code]
> > now i'm completely clueless. I also attached config file for the
> > reference.
> > 
> > Please advise.
> > Andrew
> 
> One another step - i commented out the declaration of strict_strtoul'
> from compact.h
> [code]
> diff -h ./compat.h ./compat.h0
> 132d131
> < /*
> 153d151
> < */
> [/code]
> 
> but now it's crashing on
> [code]
> CC [M]  /home/az/v4l-dvb-abd3aac6644e/v4l/bttv-driver.o
> In file included from /home/az/v4l-dvb-abd3aac6644e/v4l/bttvp.h:40,
>                  from /home/az/v4l-dvb-abd3aac6644e/v4l/bttv-driver.c:48:
> /home/az/v4l-dvb-abd3aac6644e/v4l/compat.h:66: error: static
> declaration of 'pci_msi_enabled' follows non-static declaration
> include/linux/pci.h:740: error: previous declaration of
> 'pci_msi_enabled' was here
> In file included from
> /home/az/v4l-dvb-abd3aac6644e/v4l/../linux/include/media/ir-common.h:29,
>                  from /home/az/v4l-dvb-abd3aac6644e/v4l/bttvp.h:45,
>                  from /home/az/v4l-dvb-abd3aac6644e/v4l/bttv-driver.c:48:
> /home/az/v4l-dvb-abd3aac6644e/v4l/../linux/include/media/ir-core.h: In
> function 'ir_input_register':
> /home/az/v4l-dvb-abd3aac6644e/v4l/../linux/include/media/ir-core.h:121:
> error: implicit declaration of function 'input_get_drv
>  data'
> /home/az/v4l-dvb-abd3aac6644e/v4l/../linux/include/media/ir-core.h:121:
> warning: assignment makes pointer from integer without
>   a cast
> make[3]: *** [/home/az/v4l-dvb-abd3aac6644e/v4l/bttv-driver.o] Error 1
> make[2]: *** [_module_/home/az/v4l-dvb-abd3aac6644e/v4l] Error 2
> make[2]: Leaving directory
> `/usr/src/kernels/2.6.18-194.17.1.el5.centos.plus-i686'
> make[1]: *** [default] Error 2
> make[1]: Leaving directory `/home/az/v4l-dvb-abd3aac6644e/v4l'
> make: *** [all] Error 2
> [/code]
> 
> can't move further again...
>  what a pain :(

Centos ships a Redhat kernel, which is heavily patches. v4l-dvb doesn't 
support that well. You might have more luck with the new media_build.git tree 
(although I somehow doubt it). Check the linuxtv.org wiki for instructions.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Wed Apr 13 17:15:41 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Wed, 13 Apr 2011 17:15:41 +0200
Subject: [Linux-uvc-devel] uvcvideo.txt missing?
In-Reply-To: <479273.89560.qm@web65401.mail.ac4.yahoo.com>
References: <479273.89560.qm@web65401.mail.ac4.yahoo.com>
Message-ID: <201104131715.41304.laurent.pinchart@ideasonboard.com>

Hi Paul,

On Sunday 27 March 2011 20:50:56 Paul Jurczak wrote:
> Hi,
> I'm trying to get UVC driver documentation and it seems that uvcvideo.txt
> file is missing. I looked at kernel.org sources for versions 2.6.38 and
> 2.6.31. Is there another place to look for current documentation of UVC
> driver API? Thank you,Paul

It's indeed missing :-) I'm working on the API documentation.

-- 
Regards,

Laurent Pinchart


From bug-track at fisher-privat.net  Wed Apr 13 17:38:04 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Wed, 13 Apr 2011 17:38:04 +0200
Subject: [Linux-uvc-devel] Genius UVC webcam problem on ARM
In-Reply-To: <BANLkTikiGg02uo=dLmyNcaNdTh-9SjQQ-w@mail.gmail.com>
References: <BANLkTi=_NZLh2w-wSOo_vc5x0RfyeGu3yA@mail.gmail.com>
	<BANLkTin-WS0UbL-sFfFE_XOrQMF5a1EkaA@mail.gmail.com>
	<BANLkTiniSNm5LCtbMqBzr_fBqsARmHRD9g@mail.gmail.com>
	<1302680763.8103.5.camel@zwerg>
	<BANLkTikiGg02uo=dLmyNcaNdTh-9SjQQ-w@mail.gmail.com>
Message-ID: <1302709084.3352.8.camel@mini>

Hallo,

Firs of all, your raw stream is working because it use smaller frame
size. Raw stream is 160x120, jpeg is 640x480. I'm sure if you will test
same size for jpeg it will work too.
Second, your cam provide correct data for raw stream (bitrate, urb
size). But also provide same settings for jpeg. It mean even if jpeg
consume lesser than raw, we do what webcam request us.

The quirk=128 make recalculation only for raw stream. We still need
quirk for jpeg stream.

Am Mittwoch, den 13.04.2011, 17:13 +0200 schrieb Zden?k Materna:
> Hello,
> 
> output of lsusb and uvcvideo traces are attached. Output from lsusb is
> from PC, because lsusb on ARM kit doesn't support verbose parameter.
> 
> Best regards,
> Zdenek Materna
> 
> 
> Dne 13. dubna 2011 9:46 Alexey Fisher <bug-track at fisher-privat.net> napsal(a):
> > Hallo,
> >
> > On Di, 2011-04-12 at 19:52 +0200, Zden?k Materna wrote:
> >> Sorry for another mail. It works with quirks 128 and uncompressed YUV
> >> format. Is there any way how to use compressed MJPEG? Should I try
> >> compile never uvcvideo driver?
> >
> > please attach the output of "lsusb -vd zzzz:xxxx"
> > zzzz:xxxx - is the usb id number of your webcam
> >
> > and please attach complete trace of uvcvideo. You can enable it with:
> > sudo rmmod uvcvideo && sudo modprobe uvcvideo trace=0xffff
> >
> > --
> > Regards,
> >        Alexey
> >
> >
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel




From formisc at gmail.com  Wed Apr 13 17:37:32 2011
From: formisc at gmail.com (Misc Things)
Date: Wed, 13 Apr 2011 11:37:32 -0400
Subject: [Linux-uvc-devel] Vimicro USB Camera (Altair)
In-Reply-To: <201104131648.01815.laurent.pinchart@ideasonboard.com>
References: <AANLkTimiuAZdxhSEhQmSE1rL3N0UxH2ytf+11GqESVA7@mail.gmail.com>
	<4D793DD1.3010703@skynet.be>
	<AANLkTinim3hjnz5DVhGdXZ4_BXQ9zgVex7fJm26887xh@mail.gmail.com>
	<201104131648.01815.laurent.pinchart@ideasonboard.com>
Message-ID: <BANLkTi=Q=8xr1cP1RYA0Kb-KXyutHa9O5g@mail.gmail.com>

On Wed, Apr 13, 2011 at 10:48 AM, Laurent Pinchart
<laurent.pinchart at ideasonboard.com> wrote:
> Hi,
>
> On Friday 11 March 2011 03:04:08 Misc Things wrote:
>> On Thu, Mar 10, 2011 at 4:08 PM, borsprl wrote:
>> > Le 10/03/11 00:51, Misc Things a ?crit :
>> >> On Wed, Mar 9, 2011 at 3:30 PM, Jani Frilander wrote:
>> >>> 2011/3/9 Misc Things<formisc at gmail.com>:
>> >>>> Simon, Laurent
>> >>>> ?I recently got
>> >>>>
>> >>>> 0ac8:3450 Z-Star Microelectronics Vimicro USB Camera (Altair) camera.
>> >>>> And though i got the video working without an (major) issues i can't
>> >>>> seemed to figure out how to get the sound to work.
>> >>>> The details are here:
>> >>>>
>> >>>> http://www.linuxquestions.org/questions/linux-hardware-18/web-cam-gear
>> >>>> head-model-wc735i-vimicro-usb-camera-altair-0ac8-3450-z-star-microelec
>> >>>> tr-sound-867108/
>
> [snip]
>
> Looking at the USB descriptors at the above link, your camera simply has no
> microphone.
>
> --
> Regards,
>
> Laurent Pinchart
>
Correct, it has a separate connector to the mic. I eventually got it
all sorted out. My problem was - i didn't know how to record from the
mic. And only remotely with uvc :).
Thank you
Andrew


From zdenek.materna at gmail.com  Wed Apr 13 21:11:07 2011
From: zdenek.materna at gmail.com (=?UTF-8?Q?Zden=C4=9Bk_Materna?=)
Date: Wed, 13 Apr 2011 21:11:07 +0200
Subject: [Linux-uvc-devel] Genius UVC webcam problem on ARM
In-Reply-To: <1302709084.3352.8.camel@mini>
References: <BANLkTi=_NZLh2w-wSOo_vc5x0RfyeGu3yA@mail.gmail.com>
	<BANLkTin-WS0UbL-sFfFE_XOrQMF5a1EkaA@mail.gmail.com>
	<BANLkTiniSNm5LCtbMqBzr_fBqsARmHRD9g@mail.gmail.com>
	<1302680763.8103.5.camel@zwerg>
	<BANLkTikiGg02uo=dLmyNcaNdTh-9SjQQ-w@mail.gmail.com>
	<1302709084.3352.8.camel@mini>
Message-ID: <BANLkTincBabCVYhxrPHWzknHhu5deqPwMQ@mail.gmail.com>

Hello,

thanks for making it clear. However lowest resolution supported by
camera in JPEG mode is 640x480, so it seems that I have to use YUV
mode. There is no quirk option for compressed mode? Even in some
development tree of uvc video driver? Any path?

Regards,
Zdenek Materna


From bug-track at fisher-privat.net  Wed Apr 13 21:24:46 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Wed, 13 Apr 2011 21:24:46 +0200
Subject: [Linux-uvc-devel] [patch] gather compression statistic for MJPEG
	(and other formats)
Message-ID: <1302722686.23854.70.camel@zwerg>

This is patch catch the biggest frame size and calculate compression
ratio.

Usage:
modprobe statistic=1

start capture some thing. The best possability to catch biggest frame is
to record lots of moving text. Point your camera to monitore and open
terminal with dmesg or some thing :D

After stop, result will be in dmesg.

Testers are welcome.
-- 
Regards,
        Alexey
-------------- next part --------------
A non-text attachment was scrubbed...
Name: uvc-stat.diff
Type: text/x-patch
Size: 4542 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110413/5db5fd99/attachment.bin>

From uskokovic at gmail.com  Wed Apr 13 21:35:05 2011
From: uskokovic at gmail.com (Marko Uskokovic)
Date: Wed, 13 Apr 2011 21:35:05 +0200
Subject: [Linux-uvc-devel] Philips Pico Pix 1020 Projector
In-Reply-To: <201104130734.01472.pulciux@fastwebnet.it>
References: <bef0b076e58a5be860ae5f194e27b381.squirrel@kondor.etf.bg.ac.rs>
	<201104130734.01472.pulciux@fastwebnet.it>
Message-ID: <570f08ddc816b97f34550ac2a1ea87e7.squirrel@kondor.etf.rs>

On Wed, April 13, 2011 7:34 am, Gianluigi wrote:
> If anybody have one of this projector we can try to share info and tasks.
>

I have one and I've tried compiling wine with USB patches and installation
of "PicoPix viewer Install.exe" went fine but execution of "PicoPix
Viewer.exe" failed at running devcon_i386.exe (which is called from from
install_subvga.bat).

I can't seem to get it working even under VirtualBox. I have Ubuntu 9.04
and AFAIK there is no VirtualBox version for it with support for USB
devices. I'll try with newer Ubuntu.

Anyway, I tried compiling
udlfb-0.2.3_and_xf86-video-displaylink-0.3.tar.gz like here:
http://mulchman.org/blog/?p=21 but I didn't get any /dev/fb? devices after
loading udlfb kernel module.

In summary, I'm stuck at recognising this device as 1de1:1101 USB Mass
Storage.






From bug-track at fisher-privat.net  Wed Apr 13 21:42:14 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Wed, 13 Apr 2011 21:42:14 +0200
Subject: [Linux-uvc-devel] Genius UVC webcam problem on ARM
In-Reply-To: <BANLkTincBabCVYhxrPHWzknHhu5deqPwMQ@mail.gmail.com>
References: <BANLkTi=_NZLh2w-wSOo_vc5x0RfyeGu3yA@mail.gmail.com>
	<BANLkTin-WS0UbL-sFfFE_XOrQMF5a1EkaA@mail.gmail.com>
	<BANLkTiniSNm5LCtbMqBzr_fBqsARmHRD9g@mail.gmail.com>
	<1302680763.8103.5.camel@zwerg>
	<BANLkTikiGg02uo=dLmyNcaNdTh-9SjQQ-w@mail.gmail.com>
	<1302709084.3352.8.camel@mini>
	<BANLkTincBabCVYhxrPHWzknHhu5deqPwMQ@mail.gmail.com>
Message-ID: <1302723734.26657.0.camel@zwerg>

I just send patch to the list, can you pleas test it:
[patch] gather compression statistic for MJPEG (and other formats)

On Mi, 2011-04-13 at 21:11 +0200, Zden?k Materna wrote:
> Hello,
> 
> thanks for making it clear. However lowest resolution supported by
> camera in JPEG mode is 640x480, so it seems that I have to use YUV
> mode. There is no quirk option for compressed mode? Even in some
> development tree of uvc video driver? Any path?
> 
> Regards,
> Zdenek Materna
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel

-- 
Regards,
        Alexey



From pauljurczak at yahoo.com  Thu Apr 14 03:56:45 2011
From: pauljurczak at yahoo.com (Paul Jurczak)
Date: Wed, 13 Apr 2011 18:56:45 -0700 (PDT)
Subject: [Linux-uvc-devel] Raw Bayer data streaming from unknown camera
In-Reply-To: <201104131709.29479.laurent.pinchart@ideasonboard.com>
Message-ID: <778904.87046.qm@web65408.mail.ac4.yahoo.com>

--- On Wed, 4/13/11, Laurent Pinchart <laurent.pinchart at ideasonboard.com> wrote:Hi Paul,

On Wednesday 23 March 2011 19:29:44 Paul Jurczak wrote:
> Hi,
> I have a project, which require raw pixel data from UVC camera (image
> processor off). There are products in China, which use UVC camera
> controller known to support streaming raw pixel data, for example Vimicro
> VC0345. Their Windows driver exposes 8-bit and 10-bit raw data modes, but
> they don't support it on Linux. What is the easiest way to make it
> available on Linux? If they tell me what is guidExtensionCode
> and bmControls address (bit mask) for the control to turn image processor
> off, is it going to be enough information to access this control?

Yes, that should be enough.

> If I can't get any information from them, is brute force method of testing
> each EXTENSION_UNIT control feasible?

It could work, but it might not be straightforward. If you're lucky you will 
just need to modify one control. If you're less lucky, the extension units 
will give you raw access to the device registers space, and you will need to 
modify several registers. If you're even less lucky, the extension units will 
give you access to firmware update, and you will erase the on-board flash.

> BTW, I know that some Logitech webcams support raw data streaming, but I
> can't use them for mechanical and other reasons.
Hi Laurent,
Thank you for responding. I'm glad to see that you didn't get discouraged by inbox overload ;-) I hope to find some time for more experiments in coming weeks.
Best regards,Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110413/b2c9c9da/attachment.html>

From bug-track at fisher-privat.net  Thu Apr 14 09:53:52 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Thu, 14 Apr 2011 09:53:52 +0200
Subject: [Linux-uvc-devel] [patch] gather compression statistic for
 MJPEG (and other formats)
In-Reply-To: <1302722686.23854.70.camel@zwerg>
References: <1302722686.23854.70.camel@zwerg>
Message-ID: <1302767632.9638.1.camel@zwerg>

Here is updated patch against newest git master tree.

On Mi, 2011-04-13 at 21:24 +0200, Alexey Fisher wrote:
> This is patch catch the biggest frame size and calculate compression
> ratio.
> 
> Usage:
> modprobe statistic=1
> 
> start capture some thing. The best possability to catch biggest frame is
> to record lots of moving text. Point your camera to monitore and open
> terminal with dmesg or some thing :D
> 
> After stop, result will be in dmesg.
> 
> Testers are welcome.
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel

-- 
Regards,
        Alexey
-------------- next part --------------
A non-text attachment was scrubbed...
Name: uvc-stat_v2.diff
Type: text/x-patch
Size: 4590 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110414/27580b09/attachment.bin>

From pulciux at fastwebnet.it  Thu Apr 14 10:00:50 2011
From: pulciux at fastwebnet.it (Gianluigi)
Date: Thu, 14 Apr 2011 10:00:50 +0200
Subject: [Linux-uvc-devel] Philips Pico Pix 1020 Projector
In-Reply-To: <570f08ddc816b97f34550ac2a1ea87e7.squirrel@kondor.etf.rs>
References: <bef0b076e58a5be860ae5f194e27b381.squirrel@kondor.etf.bg.ac.rs>
	<201104130734.01472.pulciux@fastwebnet.it>
	<570f08ddc816b97f34550ac2a1ea87e7.squirrel@kondor.etf.rs>
Message-ID: <201104141000.50379.pulciux@fastwebnet.it>

On Wednesday 13 April 2011 21:35:05 Marko Uskokovic wrote:
> On Wed, April 13, 2011 7:34 am, Gianluigi wrote:
> > If anybody have one of this projector we can try to share info and tasks.
> 
> I have one and I've tried compiling wine with USB patches and installation
> of "PicoPix viewer Install.exe" went fine but execution of "PicoPix
> Viewer.exe" failed at running devcon_i386.exe (which is called from from
> install_subvga.bat).
> 
> I can't seem to get it working even under VirtualBox. I have Ubuntu 9.04
> and AFAIK there is no VirtualBox version for it with support for USB
> devices. I'll try with newer Ubuntu.
> 
> Anyway, I tried compiling
> udlfb-0.2.3_and_xf86-video-displaylink-0.3.tar.gz like here:
> http://mulchman.org/blog/?p=21 but I didn't get any /dev/fb? devices after
> loading udlfb kernel module.
> 
> In summary, I'm stuck at recognising this device as 1de1:1101 USB Mass
> Storage.
> 
> 
> 
> 
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> 

First of all we must get it working with usb_modeswitch [1], I think.

Reading instructions on "Contribute" section it say:

"If all this has no effect you can try this approach:
Note the device's Vendor and Product ID from /proc/bus/usb/devices (or from 
the output of "lsusb"); the assigned driver is usually "usb-storage". Then spy 
out the USB communication to the device with the same ID inside M$ Windoze, 
with the on-board driver installed. The device must be switched there too, and 
you want to log that moment.
I recommend this tool: "SniffUSB" ( 
http://www.pcausa.com/Utilities/UsbSnoop/default.htm).
"

I've started my WindowsXP on VirtualBox and intalled SniffUSB (1.8 - the 
lastest wan't work for me) 

And I've got the log file.
It trace from usb connect, switch to projector mode and start streaming data:

[0 ms] UsbSnoop compiled on Jan 18 2003 22:41:32 loading             
[0 ms] UsbSnoop - DriverEntry(f9c58c40) : Windows NT WDM version 1.32
[1 ms] UsbSnoop - AddDevice(f9c58f50) : DriverObject 8172d340, pdo 81a88490
[1 ms] UsbSnoop - DispatchAny(f9c56610) : IRP_MJ_PNP (0x00000018)          
[1 ms] UsbSnoop - MyDispatchPNP(f9c58ee0) : IRP_MJ_PNP (0x00000018)        
[1 ms] UsbSnoop - DispatchAny(f9c56610) : IRP_MJ_PNP 
(IRP_MN_QUERY_RESOURCE_REQUIREMENTS)
[1 ms] UsbSnoop - MyDispatchPNP(f9c58ee0) : IRP_MJ_PNP 
(IRP_MN_QUERY_RESOURCE_REQUIREMENTS)
[1 ms] UsbSnoop - DispatchAny(f9c56610) : IRP_MJ_PNP 
(IRP_MN_FILTER_RESOURCE_REQUIREMENTS) 
[1 ms] UsbSnoop - MyDispatchPNP(f9c58ee0) : IRP_MJ_PNP 
(IRP_MN_FILTER_RESOURCE_REQUIREMENTS)
[1 ms] UsbSnoop - DispatchAny(f9c56610) : IRP_MJ_PNP (IRP_MN_START_DEVICE)                  
[1 ms] UsbSnoop - MyDispatchPNP(f9c58ee0) : IRP_MJ_PNP (IRP_MN_START_DEVICE)                
[1 ms] UsbSnoop - DispatchAny(f9c56610) : IRP_MJ_INTERNAL_DEVICE_CONTROL                    
[1 ms] UsbSnoop - MyDispatchInternalIOCTL(f9c57e80) : fdo=81a88490, 
Irp=816efe48, IRQL=0    
[1 ms]  >>>  URB 1 going down  >>>                                                          
-- URB_FUNCTION_GET_DESCRIPTOR_FROM_DEVICE:                                                 
  TransferBufferLength = 00000012                                                           
  TransferBuffer       = 81b9b940                                                           
  TransferBufferMDL    = 00000000                                                           
  Index                = 00000000                                                           
  DescriptorType       = 00000001 (USB_DEVICE_DESCRIPTOR_TYPE)                              
  LanguageId           = 00000000                                                           
[2 ms] UsbSnoop - DispatchAny(f9c56610) : IRP_MJ_SYSTEM_CONTROL                             
[6 ms] UsbSnoop - MyInternalIOCTLCompletion(f9c57db0) : fido=00000000, 
Irp=816efe48, Context=81a1e1e0, IRQL=2
[6 ms]  <<<  URB 1 coming back  <<<                                                                          
-- URB_FUNCTION_CONTROL_TRANSFER:                                                                            
  PipeHandle           = 815d6c68                                                                            
  TransferFlags        = 0000000b (USBD_TRANSFER_DIRECTION_IN, 
USBD_SHORT_TRANSFER_OK)                       
  TransferBufferLength = 00000012                                                                            
  TransferBuffer       = 81b9b940                                                                            
  TransferBufferMDL    = 81a0b0b8                                                                            
    00000000: 12 01 00 02 ff 00 00 40 e7 21 0e 00 00 01 01 02                                                
    00000010: 03 01                                                                                          
  UrbLink              = 00000000                                                                            
  SetupPacket          =                                                                                     
    00000000: 80 06 00 01 00 00 12 00                                                                        
[6 ms] UsbSnoop - DispatchAny(f9c56610) : IRP_MJ_INTERNAL_DEVICE_CONTROL                                     
[6 ms] UsbSnoop - MyDispatchInternalIOCTL(f9c57e80) : fdo=81a88490, 
Irp=816efe48, IRQL=0                     
[6 ms]  >>>  URB 2 going down  >>>                                                                           
-- URB_FUNCTION_GET_DESCRIPTOR_FROM_DEVICE:                                                                  
  TransferBufferLength = 00000009                                                                            
  TransferBuffer       = 818a37a0                                                                            
  TransferBufferMDL    = 00000000                                                                            
  Index                = 00000000                                                                            
  DescriptorType       = 00000002 (USB_CONFIGURATION_DESCRIPTOR_TYPE)                                        
  LanguageId           = 00000000                                                                            
[9 ms] UsbSnoop - MyInternalIOCTLCompletion(f9c57db0) : fido=00000000, 
Irp=816efe48, Context=81706a18, IRQL=2
[9 ms]  <<<  URB 2 coming back  <<<                                                                          
-- URB_FUNCTION_CONTROL_TRANSFER:                                                                            
  PipeHandle           = 815d6c68                                                                            
  TransferFlags        = 0000000b (USBD_TRANSFER_DIRECTION_IN, 
USBD_SHORT_TRANSFER_OK)                       
  TransferBufferLength = 00000009                                                                            
  TransferBuffer       = 818a37a0                                                                            
  TransferBufferMDL    = 81a0b0b8                                                                            
    00000000: 09 02 20 00 01 02 06 c0 01                                                                     
  UrbLink              = 00000000                                                                            
  SetupPacket          =                                                                                     
    00000000: 80 06 00 02 00 00 09 00                                                                        
[9 ms] UsbSnoop - DispatchAny(f9c56610) : IRP_MJ_INTERNAL_DEVICE_CONTROL                                     
[9 ms] UsbSnoop - MyDispatchInternalIOCTL(f9c57e80) : fdo=81a88490, 
Irp=816efe48, IRQL=0                     
[9 ms]  >>>  URB 3 going down  >>>                                                                           
-- URB_FUNCTION_GET_DESCRIPTOR_FROM_DEVICE:                                                                  
  TransferBufferLength = 00000020                                                                            
  TransferBuffer       = 816c6e98                                                                            
  TransferBufferMDL    = 00000000                                                                            
  Index                = 00000000                                                                            
  DescriptorType       = 00000002 (USB_CONFIGURATION_DESCRIPTOR_TYPE)                                        
  LanguageId           = 00000000                                                                            
[12 ms] UsbSnoop - MyInternalIOCTLCompletion(f9c57db0) : fido=00000000, 
Irp=816efe48, Context=8197e1f8, IRQL=2
[12 ms]  <<<  URB 3 coming back  <<<                                                                          
-- URB_FUNCTION_CONTROL_TRANSFER:                                                                             
  PipeHandle           = 815d6c68                                                                             
  TransferFlags        = 0000000b (USBD_TRANSFER_DIRECTION_IN, 
USBD_SHORT_TRANSFER_OK)                        
  TransferBufferLength = 00000020                                                                             
  TransferBuffer       = 816c6e98                                                                             
  TransferBufferMDL    = 81a0b0b8                                                                             
    00000000: 09 02 20 00 01 02 06 c0 01 09 04 00 00 02 ff 08                                                 
    00000010: 08 07 07 05 81 02 00 02 00 07 05 01 02 00 02 01                                                 
  UrbLink              = 00000000                                                                             
  SetupPacket          =                                                                                      
    00000000: 80 06 00 02 00 00 20 00                                                                         
[12 ms] UsbSnoop - DispatchAny(f9c56610) : IRP_MJ_INTERNAL_DEVICE_CONTROL                                     
[12 ms] UsbSnoop - MyDispatchInternalIOCTL(f9c57e80) : fdo=81a88490, 
Irp=816efe48, IRQL=0                     
[12 ms]  >>>  URB 4 going down  >>>                                                                           
-- URB_FUNCTION_SELECT_CONFIGURATION:                                                                         
  ConfigurationDescriptor = 0x816c6e98 (configure)                                                            
  ConfigurationDescriptor : bLength             = 9                                                           
  ConfigurationDescriptor : bDescriptorType     = 0x00000002                                                  
  ConfigurationDescriptor : wTotalLength        = 0x00000020                                                  
  ConfigurationDescriptor : bNumInterfaces      = 0x00000001                                                  
  ConfigurationDescriptor : bConfigurationValue = 0x00000002                                                  
  ConfigurationDescriptor : iConfiguration      = 0x00000006                                                  
  ConfigurationDescriptor : bmAttributes        = 0x000000c0                                                  
  ConfigurationDescriptor : MaxPower            = 0x00000001                                                  
  ConfigurationHandle     = 0x00000000                                                                        
  Interface[0]: Length            = 56                                                                        
  Interface[0]: InterfaceNumber   = 0                                                                         
  Interface[0]: AlternateSetting  = 0                                                                         
[53 ms] UsbSnoop - MyInternalIOCTLCompletion(f9c57db0) : fido=00000000, 
Irp=816efe48, Context=8182aa88, IRQL=0
[53 ms]  <<<  URB 4 coming back  <<<                                                                          
-- URB_FUNCTION_SELECT_CONFIGURATION:                                                                         
  ConfigurationDescriptor = 0x816c6e98 (configure)                                                            
  ConfigurationDescriptor : bLength             = 9                                                           
  ConfigurationDescriptor : bDescriptorType     = 0x00000002                                                  
  ConfigurationDescriptor : wTotalLength        = 0x00000020                                                  
  ConfigurationDescriptor : bNumInterfaces      = 0x00000001                                                  
  ConfigurationDescriptor : bConfigurationValue = 0x00000002                                                  
  ConfigurationDescriptor : iConfiguration      = 0x00000006                                                  
  ConfigurationDescriptor : bmAttributes        = 0x000000c0                                                  
  ConfigurationDescriptor : MaxPower            = 0x00000001                                                  
  ConfigurationHandle     = 0x81a15260                                                                        
  Interface[0]: Length            = 56                                                                        
  Interface[0]: InterfaceNumber   = 0                                                                         
  Interface[0]: AlternateSetting  = 0                                                                         
  Interface[0]: Class             = 0x000000ff                                                                
  Interface[0]: SubClass          = 0x00000008                                                                
  Interface[0]: Protocol          = 0x00000008                                                                
  Interface[0]: InterfaceHandle   = 0x819bd468                                                                
  Interface[0]: NumberOfPipes     = 2                                                                         
  Interface[0]: Pipes[0] : MaximumPacketSize = 0x00000200                                                     
  Interface[0]: Pipes[0] : EndpointAddress   = 0x00000081                                                     
  Interface[0]: Pipes[0] : Interval          = 0x00000000                                                     
  Interface[0]: Pipes[0] : PipeType          = 0x00000002 (UsbdPipeTypeBulk)                                  
  Interface[0]: Pipes[0] : PipeHandle        = 0x819bd484                                                     
  Interface[0]: Pipes[0] : MaxTransferSize   = 0xffffffff                                                     
  Interface[0]: Pipes[0] : PipeFlags         = 0x00000000                                                     
  Interface[0]: Pipes[1] : MaximumPacketSize = 0x00000200                                                     
  Interface[0]: Pipes[1] : EndpointAddress   = 0x00000001                                                     
  Interface[0]: Pipes[1] : Interval          = 0x00000001                                                     
  Interface[0]: Pipes[1] : PipeType          = 0x00000002 (UsbdPipeTypeBulk)                                  
  Interface[0]: Pipes[1] : PipeHandle        = 0x819bd4a4                                                     
  Interface[0]: Pipes[1] : MaxTransferSize   = 0xffffffff                                                     
  Interface[0]: Pipes[1] : PipeFlags         = 0x00000000                                                     
[53 ms] UsbSnoop - DispatchAny(f9c56610) : IRP_MJ_PNP 
(IRP_MN_QUERY_CAPABILITIES)                             
[53 ms] UsbSnoop - MyDispatchPNP(f9c58ee0) : IRP_MJ_PNP 
(IRP_MN_QUERY_CAPABILITIES)                           
[54 ms] UsbSnoop - DispatchAny(f9c56610) : IRP_MJ_PNP 
(IRP_MN_QUERY_PNP_DEVICE_STATE)                         
[54 ms] UsbSnoop - MyDispatchPNP(f9c58ee0) : IRP_MJ_PNP 
(IRP_MN_QUERY_PNP_DEVICE_STATE)                       
[54 ms] UsbSnoop - DispatchAny(f9c56610) : IRP_MJ_PNP 
(IRP_MN_QUERY_DEVICE_RELATIONS)                         
[54 ms] UsbSnoop - MyDispatchPNP(f9c58ee0) : IRP_MJ_PNP 
(IRP_MN_QUERY_DEVICE_RELATIONS)                       
[93 ms] UsbSnoop - DispatchAny(f9c56610) : IRP_MJ_INTERNAL_DEVICE_CONTROL                                     
[93 ms] UsbSnoop - MyDispatchInternalIOCTL(f9c57e80) : fdo=81a88490, 
Irp=816efe48, IRQL=0                     
[93 ms]  >>>  URB 5 going down  >>>                                                                           
-- URB_FUNCTION_BULK_OR_INTERRUPT_TRANSFER:                                                                   
  PipeHandle           = 819bd4a4 [endpoint 0x00000001]                                                       
  TransferFlags        = 00000002 (USBD_TRANSFER_DIRECTION_OUT, 
USBD_SHORT_TRANSFER_OK)                       
  TransferBufferLength = 00000018                                                                             
  TransferBuffer       = 00000000                                                                             
  TransferBufferMDL    = 81b00cb0                                                                             
    00000000: 01 00 00 00 00 00 c2 77 00 00 00 00 00 00 00 00                                                 
    00000010: 00 00 00 00 00 00 00 00                                                                         
  UrbLink              = 00000000                                                                             
[111 ms] UsbSnoop - MyInternalIOCTLCompletion(f9c57db0) : fido=81876da8, 
Irp=816efe48, Context=8197e1f8, IRQL=2
[111 ms]  <<<  URB 5 coming back  <<<                                                                          
-- URB_FUNCTION_BULK_OR_INTERRUPT_TRANSFER:                                                                    
  PipeHandle           = 819bd4a4 [endpoint 0x00000001]                                                        
  TransferFlags        = 00000002 (USBD_TRANSFER_DIRECTION_OUT, 
USBD_SHORT_TRANSFER_OK)                        
  TransferBufferLength = 00000018                                                                              
  TransferBuffer       = 00000000                                                                              
  TransferBufferMDL    = 81b00cb0                                                                              
  UrbLink              = 00000000                                                                              
[111 ms] UsbSnoop - DispatchAny(f9c56610) : IRP_MJ_INTERNAL_DEVICE_CONTROL                                     
[111 ms] UsbSnoop - MyDispatchInternalIOCTL(f9c57e80) : fdo=81a88490, 
Irp=816efe48, IRQL=0                     
[111 ms]  >>>  URB 6 going down  >>>                                                                           
-- URB_FUNCTION_BULK_OR_INTERRUPT_TRANSFER:                                                                    
  PipeHandle           = 819bd484 [endpoint 0x00000081]                                                        
  TransferFlags        = 00000003 (USBD_TRANSFER_DIRECTION_IN, 
USBD_SHORT_TRANSFER_OK)                         
  TransferBufferLength = 00000018                                                                              
  TransferBuffer       = 00000000                                                                              
  TransferBufferMDL    = 81b00cb0                                                                              
  UrbLink              = 00000000                                                                              
[113 ms] UsbSnoop - MyInternalIOCTLCompletion(f9c57db0) : fido=81876da8, 
Irp=816efe48, Context=8170e160, IRQL=2
[113 ms]  <<<  URB 6 coming back  <<<                                                                          
-- URB_FUNCTION_BULK_OR_INTERRUPT_TRANSFER:                                                                    
  PipeHandle           = 819bd484 [endpoint 0x00000081]                                                        
  TransferFlags        = 00000003 (USBD_TRANSFER_DIRECTION_IN, 
USBD_SHORT_TRANSFER_OK)                         
  TransferBufferLength = 00000018                                                                              
  TransferBuffer       = 00000000                                                                              
  TransferBufferMDL    = 81b00cb0                                                                              
    00000000: 01 00 00 00 01 10 00 00 20 03 00 00 58 02 00 00                                                  
    00000010: 00 00 00 00 03 00 00 00                                                                          
  UrbLink              = 00000000                                                                              
[389 ms] UsbSnoop - DispatchAny(f9c56610) : IRP_MJ_INTERNAL_DEVICE_CONTROL                                     
[389 ms] UsbSnoop - MyDispatchInternalIOCTL(f9c57e80) : fdo=81a88490, 
Irp=816efe48, IRQL=0                     
[389 ms]  >>>  URB 7 going down  >>>                                                                           
-- URB_FUNCTION_BULK_OR_INTERRUPT_TRANSFER:                                                                    
  PipeHandle           = 819bd4a4 [endpoint 0x00000001]                                                        
  TransferFlags        = 00000002 (USBD_TRANSFER_DIRECTION_OUT, 
USBD_SHORT_TRANSFER_OK)                        
  TransferBufferLength = 00000018                                                                              
  TransferBuffer       = 00000000                                                                              
  TransferBufferMDL    = 81b00cb0                                                                              
    00000000: 02 00 00 00 00 10 2c 10 01 00 00 00 20 03 00 00                                                  
    00000010: 58 02 00 00 33 f3 00 00                                                                          
  UrbLink              = 00000000                                                                              
[431 ms] UsbSnoop - MyInternalIOCTLCompletion(f9c57db0) : fido=81876da8, 
Irp=816efe48, Context=81abe768, IRQL=2
[431 ms]  <<<  URB 7 coming back  <<<                                                                          
-- URB_FUNCTION_BULK_OR_INTERRUPT_TRANSFER:                                                                    
  PipeHandle           = 819bd4a4 [endpoint 0x00000001]                                                        
  TransferFlags        = 00000002 (USBD_TRANSFER_DIRECTION_OUT, 
USBD_SHORT_TRANSFER_OK)                        
  TransferBufferLength = 00000018                                                                              
  TransferBuffer       = 00000000                                                                              
  TransferBufferMDL    = 81b00cb0                                                                              
  UrbLink              = 00000000                                                                              
[431 ms] UsbSnoop - DispatchAny(f9c56610) : IRP_MJ_INTERNAL_DEVICE_CONTROL                                     
[431 ms] UsbSnoop - MyDispatchInternalIOCTL(f9c57e80) : fdo=81a88490, 
Irp=816efe48, IRQL=0                     
[434 ms]  >>>  URB 8 going down  >>>                                                                           
-- URB_FUNCTION_BULK_OR_INTERRUPT_TRANSFER:                                                                    
  PipeHandle           = 819bd4a4 [endpoint 0x00000001]                                                        
  TransferFlags        = 00000002 (USBD_TRANSFER_DIRECTION_OUT, 
USBD_SHORT_TRANSFER_OK)                        
  TransferBufferLength = 0000f333                                                                              
  TransferBuffer       = 00000000                                                                              
  TransferBufferMDL    = 81b00cb0                                                                              
    00000000: ff d8 ff e0 00 10 4a 46 49 46 00 01 01 02 00 46                                                  
    00000010: 00 46 00 00 ff db 00 43 00 03 02 02 03 02 02 03                                                  
    00000020: 03 03 03 04 03 03 04 05 08 05 05 04 04 05 0a 07 
....

But I don't know how to use it.

Suggestions?

P.S.
Have you tried VitualBox from its website? There are .deb for Ubuntu 8.04, 
9.10 and more newer.

[1] http://www.draisberghof.de/usb_modeswitch/
-- 
Fascinating, a totally parochial attitude.
		-- Spock, "Metamorphosis", stardate 3219.8


From paolo at casaschi.net  Thu Apr 14 12:09:21 2011
From: paolo at casaschi.net (Paolo Casaschi)
Date: Thu, 14 Apr 2011 11:09:21 +0100
Subject: [Linux-uvc-devel] webcam issue: id codes changed (?)
Message-ID: <BANLkTi=aJDrBRn--Hw0cxmXPwGRNnfcS_A@mail.gmail.com>

hello. I have an issue with a netbook webcam that used to work
perfectly with uvcvideo on debian squeeze.

suddenly, the webcam is not working anymore. the webcam is recognized,
the device is created in /dev but no video is received.

lsusb identifies the webcam as

Bus 001 Device 003: ID 0402:5606 ALi Corp. M5606 Video CameraController [UVC]

issue is that, if I remember correctly, the webcam used to be
identified with differnt codes, going by memory lsusb used to report
it as "Acer something" with different id numbers.
I havent changed any driver/firmware/BIOS or anything like that recently.

Any advise how to try getting the webcam back to work?

So far I tried resetting the system controller of the netbook (an MSI
WIND U100) and repeadetly switching the webcam on/off (the hardware
key Fn-F6 to toggle the webcam still works, I can see the webcam in
and out in lsusb).

Any advise before assuming some kind of hardware failure?

TIA

--
Paolo


From jpiszcz at lucidpixels.com  Thu Apr 14 12:27:10 2011
From: jpiszcz at lucidpixels.com (Justin Piszcz)
Date: Thu, 14 Apr 2011 06:27:10 -0400 (EDT)
Subject: [Linux-uvc-devel] How to disable Quickcam Pro 9000 LED?
Message-ID: <alpine.DEB.2.02.1104140623240.31119@p34.internal.lan>

Hi,

Read these:
http://article.gmane.org/gmane.linux.drivers.uvc.devel/5105/match=led
http://article.gmane.org/gmane.linux.drivers.uvc.devel/1628/match=led

I do not appear to have a status_led sysfs entry,  yes the various led 
modules are loaded:

# find /sys/|grep status_led
#

# lsmod
Module                  Size  Used by
ledtrig_timer           1686  0
ledtrig_heartbeat       1381  0
ledtrig_default_on       860  0
ledtrig_backlight       1799  0
leds_pca955x            3093  0
leds_pca9532            3828  0
leds_lp5523             9330  0
leds_lp5521             6912  0
leds_lp3944             2828  0
leds_bd2802            13570  0
aes_generic            25962  1
pwc                    76567  0
ecb                     1897  2
rt2800usb               9357  0
rt2800lib              30597  1 rt2800usb
rt2x00usb               7987  1 rt2800usb
uvcvideo               59208  1
rt2x00lib              29392  3 rt2800usb,rt2800lib,rt2x00usb
mac80211              168705  3 rt2800lib,rt2x00usb,rt2x00lib
videodev               61566  3 pwc,uvcvideo
i2c_i801                7092  0
cfg80211              141671  2 rt2x00lib,mac80211

--

lsusb output:
Bus 002 Device 002: ID 046d:0990 Logitech, Inc. QuickCam Pro 9000

--

What is the proper way to disable the LEDs on the Quick Cam Pro 9000 and 
other Quick Cam Pro cameras? (I have a 4000 as well).

Justin.


From pj.assis at gmail.com  Thu Apr 14 13:29:53 2011
From: pj.assis at gmail.com (Paulo Assis)
Date: Thu, 14 Apr 2011 12:29:53 +0100
Subject: [Linux-uvc-devel] How to disable Quickcam Pro 9000 LED?
In-Reply-To: <alpine.DEB.2.02.1104140623240.31119@p34.internal.lan>
References: <alpine.DEB.2.02.1104140623240.31119@p34.internal.lan>
Message-ID: <BANLkTimR-VfnfECyYLxsmy_rnDvzbOwhzA@mail.gmail.com>

Hi,

>
> What is the proper way to disable the LEDs on the Quick Cam Pro 9000 and

You must use logitech extension controls for this,
you can use uvcdynctrl from libwebcam (command line) or guvcview
(gtk), you must be root to add these controls to the driver (libwebcam
installs a udev script to handle them automatically).

after adding them to the driver they will display like regular v4l2 controls.

For the pro9000 If I'm not mistaken you have focus control, led
control, led frequency control and possibly video processing control
(raw bayer).

> other Quick Cam Pro cameras? (I have a 4000 as well).
>

This is handle by pwc driver I think.

> Justin.
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From jpiszcz at lucidpixels.com  Thu Apr 14 13:44:31 2011
From: jpiszcz at lucidpixels.com (Justin Piszcz)
Date: Thu, 14 Apr 2011 07:44:31 -0400 (EDT)
Subject: [Linux-uvc-devel] How to disable Quickcam Pro 9000 LED?
In-Reply-To: <BANLkTimR-VfnfECyYLxsmy_rnDvzbOwhzA@mail.gmail.com>
References: <alpine.DEB.2.02.1104140623240.31119@p34.internal.lan>
	<BANLkTimR-VfnfECyYLxsmy_rnDvzbOwhzA@mail.gmail.com>
Message-ID: <alpine.DEB.2.02.1104140741460.31119@p34.internal.lan>



On Thu, 14 Apr 2011, Paulo Assis wrote:

> Hi,
>
>>
>> What is the proper way to disable the LEDs on the Quick Cam Pro 9000 and
>
> You must use logitech extension controls for this,
> you can use uvcdynctrl from libwebcam (command line) or guvcview
> (gtk), you must be root to add these controls to the driver (libwebcam
> installs a udev script to handle them automatically).

Do you have an example?
There are no examples in the man page.

Ah found this:
http://webcache.googleusercontent.com/search?q=cache:Z5XfwRTHPHkJ:forums.quickcamteam.net/showthread.php%3Ftid%3D45+uvcdynctrl+%22LED%22&cd=1&hl=en&ct=clnk&gl=us&source=www.google.com

It fails:
# uvcdynctrl -s 'LED1 Mode' 0
ERROR: Unknown control specified.

Thoughts?

>
> after adding them to the driver they will display like regular v4l2 controls.
>
> For the pro9000 If I'm not mistaken you have focus control, led
> control, led frequency control and possibly video processing control
> (raw bayer).
>
>> other Quick Cam Pro cameras? (I have a 4000 as well).
>>
>
> This is handle by pwc driver I think.
Ok, thanks.

Justin.


From jpiszcz at lucidpixels.com  Thu Apr 14 13:46:24 2011
From: jpiszcz at lucidpixels.com (Justin Piszcz)
Date: Thu, 14 Apr 2011 07:46:24 -0400 (EDT)
Subject: [Linux-uvc-devel] How to disable Quickcam Pro 9000 LED?
In-Reply-To: <alpine.DEB.2.02.1104140741460.31119@p34.internal.lan>
References: <alpine.DEB.2.02.1104140623240.31119@p34.internal.lan>
	<BANLkTimR-VfnfECyYLxsmy_rnDvzbOwhzA@mail.gmail.com>
	<alpine.DEB.2.02.1104140741460.31119@p34.internal.lan>
Message-ID: <alpine.DEB.2.02.1104140745500.31119@p34.internal.lan>



On Thu, 14 Apr 2011, Justin Piszcz wrote:

>
>
> On Thu, 14 Apr 2011, Paulo Assis wrote:
>
>> Hi,
>> 
>>> 
>>> What is the proper way to disable the LEDs on the Quick Cam Pro 9000 and
>> 
>> You must use logitech extension controls for this,
>> you can use uvcdynctrl from libwebcam (command line) or guvcview
>> (gtk), you must be root to add these controls to the driver (libwebcam
>> installs a udev script to handle them automatically).
>
> Do you have an example?
> There are no examples in the man page.
>
> Ah found this:
> http://webcache.googleusercontent.com/search?q=cache:Z5XfwRTHPHkJ:forums.quickcamteam.net/showthread.php%3Ftid%3D45+uvcdynctrl+%22LED%22&cd=1&hl=en&ct=clnk&gl=us&source=www.google.com
>
> It fails:
> # uvcdynctrl -s 'LED1 Mode' 0
> ERROR: Unknown control specified.
>
> Thoughts?

Got it:
# uvcdynctrl -i /usr/share/uvcdynctrl/data/046d/logitech.xml
Importing dynamic controls from file /usr/share/uvcdynctrl/data/046d/logitech.xml.
/usr/share/uvcdynctrl/data/046d/logitech.xml: error: video0: unable to add control with GUID {63610682-5070-49ab-b8cc-b3855e8d2250} and selector 5. ioctl(UVCIOC_CTRL_ADD) failed with return value -1 (error 17: File exists)
/usr/share/uvcdynctrl/data/046d/logitech.xml: error: video0: unable to add control with GUID {63610682-5070-49ab-b8cc-b3855e8d2250} and selector 8. ioctl(UVCIOC_CTRL_ADD) failed with return value -1 (error 17: File exists)
/usr/share/uvcdynctrl/data/046d/logitech.xml: error: video0: unable to add control with GUID {63610682-5070-49ab-b8cc-b3855e8d221f} and selector 1. ioctl(UVCIOC_CTRL_ADD) failed with return value -1 (error 17: File exists)
/usr/share/uvcdynctrl/data/046d/logitech.xml: error: video0: unable to add control with GUID {63610682-5070-49ab-b8cc-b3855e8d2256} and selector 3. ioctl(UVCIOC_CTRL_ADD) failed with return value -1 (error 17: File exists)
/usr/share/uvcdynctrl/data/046d/logitech.xml: error: video0: unable to add control with GUID {63610682-5070-49ab-b8cc-b3855e8d2256} and selector 1. ioctl(UVCIOC_CTRL_ADD) failed with return value -1 (error 17: File exists)
/usr/share/uvcdynctrl/data/046d/logitech.xml: error: video0: unable to add control with GUID {63610682-5070-49ab-b8cc-b3855e8d2256} and selector 2. ioctl(UVCIOC_CTRL_ADD) failed with return value -1 (error 17: File exists)
/usr/share/uvcdynctrl/data/046d/logitech.xml: error: video0: unable to map 'Pan (relative)' control. ioctl(UVCIOC_CTRL_MAP) failed with return value -1 (error 2: No such file or directory)
/usr/share/uvcdynctrl/data/046d/logitech.xml: error: video0: unable to map 'Tilt (relative)' control. ioctl(UVCIOC_CTRL_MAP) failed with return value -1 (error 2: No such file or directory)
/usr/share/uvcdynctrl/data/046d/logitech.xml: error: video0: unable to map 'Pan Reset' control. ioctl(UVCIOC_CTRL_MAP) failed with return value -1 (error 2: No such file or directory)
/usr/share/uvcdynctrl/data/046d/logitech.xml: error: video0: unable to map 'Tilt Reset' control. ioctl(UVCIOC_CTRL_MAP) failed with return value -1 (error 2: No such file or directory)
/usr/share/uvcdynctrl/data/046d/logitech.xml: error: video0: unable to map 'Pan/tilt Reset' control. ioctl(UVCIOC_CTRL_MAP) failed with return value -1 (error 2: No such file or directory)

# uvcdynctrl -s 'LED1 Mode' 0
[libwebcam] Unknown V4L2 private control ID encountered: 0x0A046D04 (V4L2_CID_PRIVATE_BASE + 33844484)

Will have to check the LED later, thanks.

Justin.



From bug-track at fisher-privat.net  Thu Apr 14 16:41:44 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Thu, 14 Apr 2011 16:41:44 +0200
Subject: [Linux-uvc-devel] [PATCH] Add support for Creative VF0700 Live!
	Cam Chat HD.
In-Reply-To: <1301399282-6430-1-git-send-email-bug-track@fisher-privat.net>
References: <AANLkTimU6K69Ns2XRvGY+uhJg5Qi32udHuC5dO-uDzmp@mail.gmail.com>
	<1301399282-6430-1-git-send-email-bug-track@fisher-privat.net>
Message-ID: <1302792104.6135.1.camel@mini>

Hi Laurent, did you received this patch?

Am Dienstag, den 29.03.2011, 13:48 +0200 schrieb Alexey Fisher:
> The camera requires the UVC_QUIRK_RESTRICT_FRAME_RATE quirk.
> 
> Reported-by: Benson Bear <benson.bear at gmail.com>
> Signed-off-by: Alexey Fisher <bug-track at fisher-privat.net>
> ---
>  drivers/media/video/uvc/uvc_driver.c |   11 +++++++++++
>  1 files changed, 11 insertions(+), 0 deletions(-)
> 
> diff --git a/drivers/media/video/uvc/uvc_driver.c b/drivers/media/video/uvc/uvc_driver.c
> index 0baa464..f8a1579 100644
> --- a/drivers/media/video/uvc/uvc_driver.c
> +++ b/drivers/media/video/uvc/uvc_driver.c
> @@ -1970,6 +1970,17 @@ MODULE_PARM_DESC(timeout, "Streaming control requests timeout");
>   * though they are compliant.
>   */
>  static struct usb_device_id uvc_ids[] = {
> +	/* Creative VF0700 Live! Cam Chat HD.
> +	 * Produce more frames als commited,
> +	 * so it partially overwrite buffer with new frame */
> +	{ .match_flags		= USB_DEVICE_ID_MATCH_DEVICE
> +				| USB_DEVICE_ID_MATCH_INT_INFO,
> +	  .idVendor		= 0x041e,
> +	  .idProduct		= 0x4088,
> +	  .bInterfaceClass	= USB_CLASS_VIDEO,
> +	  .bInterfaceSubClass	= 1,
> +	  .bInterfaceProtocol	= 0,
> +	  .driver_info		= UVC_QUIRK_RESTRICT_FRAME_RATE },
>  	/* Genius eFace 2025 */
>  	{ .match_flags		= USB_DEVICE_ID_MATCH_DEVICE
>  				| USB_DEVICE_ID_MATCH_INT_INFO,




From uskokovic at gmail.com  Thu Apr 14 23:03:38 2011
From: uskokovic at gmail.com (Marko Uskokovic)
Date: Thu, 14 Apr 2011 23:03:38 +0200
Subject: [Linux-uvc-devel] Philips Pico Pix 1020 Projector
In-Reply-To: <201104141000.50379.pulciux@fastwebnet.it>
References: <bef0b076e58a5be860ae5f194e27b381.squirrel@kondor.etf.bg.ac.rs>
	<201104130734.01472.pulciux@fastwebnet.it>
	<570f08ddc816b97f34550ac2a1ea87e7.squirrel@kondor.etf.rs>
	<201104141000.50379.pulciux@fastwebnet.it>
Message-ID: <166c6bcaa45acf4335510667fe336055.squirrel@kondor.etf.rs>

On Thu, April 14, 2011 10:00 am, Gianluigi wrote:
> On Wednesday 13 April 2011 21:35:05 Marko Uskokovic wrote:
> First of all we must get it working with usb_modeswitch [1], I think.


Thank you, that's valuable info!


I've sniffed my USB communication while running PicoPix Viewer.exe and got
a large UsbSnoop.log file. The important lines of log file are:

[557488 ms]  >>>  URB 1249 going down  >>>
-- URB_FUNCTION_BULK_OR_INTERRUPT_TRANSFER:
  PipeHandle           = f9da5bcc [endpoint 0x00000001]
  TransferFlags        = 00000000 (USBD_TRANSFER_DIRECTION_OUT,
~USBD_SHORT_TRANSFER_OK)
  TransferBufferLength = 0000001f
  TransferBuffer       = f9e4cb28
  TransferBufferMDL    = 00000000
    00000000: 55 53 42 43 08 90 d8 f9 00 00 00 00 00 00 0c ff
    00000010: 02 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  UrbLink              = 00000000

That is second last URB_FUNCTION_BULK_OR_INTERRUPT_TRANSFER in "going
down" mode. So my /etc/usb_modeswitch.conf file is (also attached):


DisableSwitching=0
EnableLogging=1
DefaultVendor = 0x1de1
DefaultProduct = 0x1101

MessageEndpoint = 0x01
MessageContent =
"555342430890d8f90000000000000cff020000000000000000000000000000"

After running:
sudo usb_modeswitch -c /etc/usb_modeswitch.conf

My PicoProjector went black, and lsusb showed:

Bus 001 Device 005: ID 21e7:000e
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          255 Vendor Specific Class
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0        64
  idVendor           0x21e7
  idProduct          0x000e
  bcdDevice            1.00
  iManufacturer           1 actions
  iProduct                2 Usb Device
  iSerial                 3 00000000000000000000000000000000
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           32
    bNumInterfaces          1
    bConfigurationValue     2
    iConfiguration          6 PICO PROJECTOR
    bmAttributes         0xc0
      Self Powered
    MaxPower                2mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      8
      bInterfaceProtocol      8
      iInterface              7 USB PICO
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x01  EP 1 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0001
  Self Powered


Yay!


dmesg said:
[  472.290119] usb 1-1: usbfs: process 4560 (usb_modeswitch) did not claim
interface 0 before use
[  472.319514] usb 1-1: USB disconnect, address 4
[  472.776066] usb 1-1: new high speed USB device using ehci_hcd and
address 5
[  472.909209] usb 1-1: configuration #2 chosen from 1 choice


I tried loading udlfb kernel module, and then dmesg said:

[  202.148996] usbcore: registered new interface driver udlfb
[  202.150096] VMODES initialized

But I didn't get any /dev/fb* files, and make check from libdlo-0.1.2
source said:

test: argv[0]:
/home/turncoat/projektor/staro/libdlo-0.1.2/test/.libs/lt-test1
test: init...
test: no DisplayLink devices found
test: error 0 'Successful'
FAIL: test/test1
=======================================
1 of 1 test failed
Please report to libdlo at displaylink.com
=======================================
make[2]: *** [check-TESTS] Error 1


Any ideas what to do next?

-------------- next part --------------
A non-text attachment was scrubbed...
Name: usb_modeswitch.conf
Type: application/x-extension-conf
Size: 750 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110414/fc5fc959/attachment.bin>

From sevenever at gmail.com  Fri Apr 15 06:04:23 2011
From: sevenever at gmail.com (Felix Shao)
Date: Fri, 15 Apr 2011 12:04:23 +0800
Subject: [Linux-uvc-devel] Motorola ROKR E6 'webcam' and resolution
	issues
In-Reply-To: <201003171750.17507.laurent.pinchart@ideasonboard.com>
References: <op.u76jtsfohdzqqm@asus.lan>
	<201003041131.56724.laurent.pinchart@ideasonboard.com>
	<20100310222720.4ce9b528@pomiocik.lan>
	<201003171750.17507.laurent.pinchart@ideasonboard.com>
Message-ID: <BANLkTimzs2uuq25+UCZoq7tTZP5MvnVvUw@mail.gmail.com>

On Thu, Mar 18, 2010 at 12:50 AM, Laurent Pinchart <
laurent.pinchart at ideasonboard.com> wrote:

> Hi Micha?,
>
> On Wednesday 10 March 2010 22:27:20 Micha? G?rny wrote:
> > On Thu, 4 Mar 2010 11:31:55 +0100 Laurent Pinchart wrote:
> > > I don't have much experience with Windows, so I can't advice for a
> > > test application that would allow you to configure the resolution.
> > > I've heard that amcap is often used for testing, maybe you could give
> > > it a try.
> >
> > amcap wasn't much of help but I've tested several applications and all
> > provided resolutions seem to work on Windows. And I'm especially sure
> > that 160x120 works fine (which seems to be the preferred one with most
> > of the software).
> >
> > What should I do now?
>
> The next step would be to use a software USB sniffer on Windows to capture
> the
> device initialization sequence in Windows, and compare that to what's done
> by
> the uvcvideo driver.
>


Hi, Is anybody still interesting on this?
I am using the same device and have same issue. Also have the similar ugly
workaround of software scaling...

I can test with software USB sniffer both on Windows and Linux, please give
me a name of such software.

But I hardly have USB knowledge, so I need send out sniffer result to
someone can understand it.


>
> --
> Regards,
>
> Laurent Pinchart
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110415/573d0710/attachment.html>

From floe at butterbrot.org  Fri Apr 15 09:20:07 2011
From: floe at butterbrot.org (Florian Echtler)
Date: Fri, 15 Apr 2011 09:20:07 +0200
Subject: [Linux-uvc-devel] Philips Pico Pix 1020 Projector
In-Reply-To: <166c6bcaa45acf4335510667fe336055.squirrel@kondor.etf.rs>
References: <bef0b076e58a5be860ae5f194e27b381.squirrel@kondor.etf.bg.ac.rs>
	<201104130734.01472.pulciux@fastwebnet.it>
	<570f08ddc816b97f34550ac2a1ea87e7.squirrel@kondor.etf.rs>
	<201104141000.50379.pulciux@fastwebnet.it>
	<166c6bcaa45acf4335510667fe336055.squirrel@kondor.etf.rs>
Message-ID: <1302852007.5526.6.camel@pumpernickel>

> > First of all we must get it working with usb_modeswitch [1], I think.
> Thank you, that's valuable info!
> After running:
> sudo usb_modeswitch -c /etc/usb_modeswitch.conf
> My PicoProjector went black, and lsusb showed:
> I tried loading udlfb kernel module, and then dmesg said:
> 
> [  202.148996] usbcore: registered new interface driver udlfb
> [  202.150096] VMODES initialized
> 
> But I didn't get any /dev/fb* files, and make check from libdlo-0.1.2
> source said:
[...]
udlfb and libdlo are completely independent. You should focus on udlfb,
since libdlo is a standalone userspace library. I think about the only
thing missing here is that udlfb by default only accepts devices with
vendor ID 0x17E9, whereas your projector has 0x21E7. I'm pretty sure
there is a workaround for that; I can't remember it at the moment.

Maybe we should move this discussion to libdlo at lists.freedesktop.org.
Perhaps there's already a mention of this workaround in the archives...

Florian
-- 
SENT FROM MY DEC VT50 TERMINAL



From zdenek.materna at gmail.com  Fri Apr 15 09:50:53 2011
From: zdenek.materna at gmail.com (=?UTF-8?Q?Zden=C4=9Bk_Materna?=)
Date: Fri, 15 Apr 2011 09:50:53 +0200
Subject: [Linux-uvc-devel] Genius UVC webcam problem on ARM
In-Reply-To: <1302723734.26657.0.camel@zwerg>
References: <BANLkTi=_NZLh2w-wSOo_vc5x0RfyeGu3yA@mail.gmail.com>
	<BANLkTin-WS0UbL-sFfFE_XOrQMF5a1EkaA@mail.gmail.com>
	<BANLkTiniSNm5LCtbMqBzr_fBqsARmHRD9g@mail.gmail.com>
	<1302680763.8103.5.camel@zwerg>
	<BANLkTikiGg02uo=dLmyNcaNdTh-9SjQQ-w@mail.gmail.com>
	<1302709084.3352.8.camel@mini>
	<BANLkTincBabCVYhxrPHWzknHhu5deqPwMQ@mail.gmail.com>
	<1302723734.26657.0.camel@zwerg>
Message-ID: <BANLkTik5G9r2Ux677tzWxmETSEHUuYX+QQ@mail.gmail.com>

Hello,

I've applied your patch. Here is result:

[  298.250000] uvc_uninit_video: Statistic for YUV 4:2:2 (YUYV) 160x120 at 15
[  298.260000] provided dwMaxVideoFrameBufferSize 38400, calculated bpp 16
[  298.260000] collected max_used_size 38400, calculated bpp 16
[  298.280000] provided dwMaxPayloadTransferSize 626
[  298.290000] calculated dwMaxPayloadTransferSize 626

It's only for YUV and 160x120, because I can't set higher resolution
(they are available only in jpeg mode). I will try it also on my
notebook later, where it's possible to use webcam in jpeg mode.

Best regards,
Zdenek Materna

Dne 13. dubna 2011 21:42 Alexey Fisher <bug-track at fisher-privat.net> napsal(a):
> I just send patch to the list, can you pleas test it:
> [patch] gather compression statistic for MJPEG (and other formats)
>


From bug-track at fisher-privat.net  Fri Apr 15 19:39:46 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Fri, 15 Apr 2011 19:39:46 +0200
Subject: [Linux-uvc-devel] [patch] jpeg compression hacks. Tester are
	welcome!!!
Message-ID: <1302889186.12477.18.camel@zwerg>

Hallo all,

here is patch (against current master git) to add two new quirks and
some more debug string to see what happening :D 

The quirks are:
UVC_QUIRK_FIX_JPEG_BANDWIDTH   0x00000040
/* to recalculate bandwidth needed for jpeg compressed stream */
UVC_QUIRK_DISABLE_URB_1024     0x00000400
/* by default we use safe bandwith restriction, to less than 1024 *
 * this quirk disables this restriction. So if you need URB less than 
 * 1024, use this quirk. It will work only with FIX*BANDWIDTH quirk. */

Also i added module option "jpeg_comp" to change calculation for
bandwith. Default is 4bpp, 1 is maximal compression, 16bpp is no
compression, just normal raw stream.

This patch also gather statistic about used buffers. It will report
biggest used buffer. You will need it to calculate best value for
jpeg_comp option.

Usage. Recalculate bandwidth for jpeg and disable 1024 restriction:
sudo rmmod uvcvideo && sudo modprobe quirks=0x440

reduce calculated bandwith to minimum:
sudo rmmod uvcvideo && sudo modprobe quirks=0x440 jpeg_comp=1

for more info enable trace=0xffff and seek for messages like:
...
[25495.869580] uvcvideo: Device requested 703 B/frame bandwidth.
[25495.869583] uvcvideo: Selecting alternate setting 5 (800 B/frame
bandwidth).
[25495.869758] uvcvideo: Allocated 5 URB buffers of 32x800 bytes each.
...
[25501.959475] uvcvideo: Biggest used buffer: 1382400/106438. Format:
MJPEG 960x720 at 15.

-- 
Regards,
        Alexey
-------------- next part --------------
A non-text attachment was scrubbed...
Name: uvc_stat_jpeg_v4.diff
Type: text/x-patch
Size: 7245 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110415/02d2a058/attachment.bin>

From bug-track at fisher-privat.net  Fri Apr 15 19:42:01 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Fri, 15 Apr 2011 19:42:01 +0200
Subject: [Linux-uvc-devel] Genius UVC webcam problem on ARM
In-Reply-To: <BANLkTik5G9r2Ux677tzWxmETSEHUuYX+QQ@mail.gmail.com>
References: <BANLkTi=_NZLh2w-wSOo_vc5x0RfyeGu3yA@mail.gmail.com>
	<BANLkTin-WS0UbL-sFfFE_XOrQMF5a1EkaA@mail.gmail.com>
	<BANLkTiniSNm5LCtbMqBzr_fBqsARmHRD9g@mail.gmail.com>
	<1302680763.8103.5.camel@zwerg>
	<BANLkTikiGg02uo=dLmyNcaNdTh-9SjQQ-w@mail.gmail.com>
	<1302709084.3352.8.camel@mini>
	<BANLkTincBabCVYhxrPHWzknHhu5deqPwMQ@mail.gmail.com>
	<1302723734.26657.0.camel@zwerg>
	<BANLkTik5G9r2Ux677tzWxmETSEHUuYX+QQ@mail.gmail.com>
Message-ID: <1302889321.12477.20.camel@zwerg>

There is new patch. With this patch you can recalculate bandwith for
jpeg stream. See my post in list and try it:
[patch] jpeg compression hacks. Tester are welcome!!!
-- 
Regards,
        Alexey



From bug-track at fisher-privat.net  Fri Apr 15 19:43:38 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Fri, 15 Apr 2011 19:43:38 +0200
Subject: [Linux-uvc-devel] Fixing bandwidth quirk ***just inquire
In-Reply-To: <AANLkTikzqv1N-9PJ-Mb1SXgEBeGiQ0q-cLZfNcVpdvDG@mail.gmail.com>
References: <loom.20110310T202522-717@post.gmane.org>
	<loom.20110310T204041-468@post.gmane.org>
	<1299794387.6124.8.camel@zwerg>
	<AANLkTimUkUjZLfdbnduDsTHTxsYCsiwzjMdObEYXznV4@mail.gmail.com>
	<1299838854.9529.24.camel@mini>
	<AANLkTikzqv1N-9PJ-Mb1SXgEBeGiQ0q-cLZfNcVpdvDG@mail.gmail.com>
Message-ID: <1302889418.12477.21.camel@zwerg>

There is new patch. With this patch you can recalculate bandwith for
jpeg stream. See my post in list and try it:
[patch] jpeg compression hacks. Tester are welcome!!!

On Fr, 2011-03-11 at 10:38 +0000, Paulo Assis wrote:
> Hi,
> 
> 2011/3/11 Alexey Fisher <bug-track at fisher-privat.net>:
> > Raw stream is "simple", for example YUYV need 16 bits to describe one
> > pixel. No extra action is done on this stream. Even if the camera lie
> > about it setting, we can still calculate it our self. For example if you
> > use YUYV 640x480 with 30 fps:
> > 640?480?16=4915200 bit or 4915200/8=614400 byte
> > so dwMaxVideoFrameSize=614400.
> >
> > Same value you will get if you check lsusb -vd xxxx:xxxx
> >
> > To calculate bandwidth uvc use framerate. This value deiced, can you or
> > not use your webcam with some particular settings on your usb hub.
> >
> > Compressed stream can use different compression algorithms, most populas
> > is jpeg. Compression depend on texture what your cam capture, and on the
> > time it has for compression. For example if camera forced to push 30fps,
> > it will choice speed against compression rate.
> 
> actually it can also only send a part of the sensor image, just try
> any of the logitech HD models,
> when you pick a different frame rate (even for the same resolution)
> you will get a very different image (more or less zoomed),
> The compression ration seems more or less the same (at least the
> quantization tables don't seem to alter).
> 
> 
> 
> > With compressed stream we can't say for sure, how match bandwidth do we
> > need. On cam's i tested it variate between 6% and  30% of uncompressed
> > stream. If you provide wrong bandwidth to the cam, it will just freeze
> > or send you black frame.
> 
> Yes but you can decide on a maximum (say 40% :D) that is never
> reached, this is better than allocating 100% of the bandwidth and can
> be the difference between a working camera and a non working one.
> 
> >
> > So, manufacture should provide correct settings and they are different
> > for each cam.
> 
> I totally agree with this, but unfortunately, this is not always the
> case, hence the need for the quirks.
> In fact the bandwidth settings should vary at least according to
> resolution, but what wee see in some cases is that manufactures just
> use the same value for every situation (laziness related maybe).
> 
> >
> > Or we should add new quirk setting, what adjust compression ratio too.
> > But before, we need some test cases, to find worts compression ratio,
> > and add statistic collection to the driver.
> 
> V4l2 has jpeg compression related ioctls, Laurent event created a
> patch for uvc, but for some reason it was never integrated, in fact I
> add support for it in guvcview, but as I remember although the cameras
> I tested seem to accepted it, it didn't really cause any change in the
> compression ratio, so I doubt very much it would cause any on the
> bandwidth settings.
> 
> Regards,
> Paulo
> 
> >
> > Am Freitag, den 11.03.2011, 00:35 +0200 schrieb Asmaa ElAssal:
> >> Yes, sir, but I use another one.
> >> I received that analysiz from someone on that site about that old
> >> webcam. I want to understand the problem of that previous cam
> >> Excuse me, Could you more explain "Compressed stream is not really
> >> predictable" and it's different of the uncompressed format.
> >>
> >> On Thu, Mar 10, 2011 at 11:59 PM, Alexey Fisher
> >> <bug-track at fisher-privat.net> wrote:
> >>         Compressed stream is not really predictable. Every camera can
> >>         act
> >>         differently, so my be it will brick more than fix.
> >>
> >>         Do your camera need this quirk?
> >>
> >>         Am Donnerstag, den 10.03.2011, 19:43 +0000 schrieb modysama:
> >>         > modysama <asmaa.elassal.student <at> pua.edu.eg> writes:
> >>         >
> >>         > >
> >>         > > Fixing bandwidth quirk is only works for uncompressed
> >>         stream
> >>         > the YUYV format, it doesn?t work for MJPG.
> >>         > > Why??need explain, please
> >>         > > _______________________________________________
> >>         > > Linux-uvc-devel mailing list
> >>         > > Linux-uvc-devel <at> lists.berlios.de
> >>         > > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> >>         > >
> >>         >
> >>         >
> >>         >
> >>         >
> >>         > _______________________________________________
> >>         > Linux-uvc-devel mailing list
> >>         > Linux-uvc-devel at lists.berlios.de
> >>         > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> >>
> >>         --
> >>         Regards,
> >>                Alexey
> >>
> >>
> >>
> >>
> >> --
> >> Asmaa El-said Rashad
> >> Pharos University of Alex
> >> Computer Department
> >> 5th year
> >>
> >>
> >>
> >
> >
> > _______________________________________________
> > Linux-uvc-devel mailing list
> > Linux-uvc-devel at lists.berlios.de
> > https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
> >

-- 
Regards,
        Alexey



From enssso at gmail.com  Sun Apr 17 03:26:49 2011
From: enssso at gmail.com (Emerson Esteves)
Date: Sun, 17 Apr 2011 01:26:49 +0000 (UTC)
Subject: [Linux-uvc-devel] Driver webcam ID 1b3b:2937
References: <56cbd4381001220005p6c54ad3fm67ca3fc11171792c@mail.gmail.com>
	<56cbd4381001220008r8c500qc339e8e9bb07a1d9@mail.gmail.com>
	<201001231408.47881.laurent.pinchart@ideasonboard.com>
Message-ID: <loom.20110417T030419-501@post.gmane.org>

Laurent Pinchart <laurent.pinchart <at> ideasonboard.com> writes:

> 
> Hi Sergio,
> 
> On Friday 22 January 2010 09:08:03 Sergio wrote:
> > Hello.
> > 
> > Recently I've bought a MSI starcam mini+ Webcam and it doesn't have support
> > under Linux..
> > 
> > The driver disk that shipped with it contains a Windows program named
> > iP293x.exe.  A Google search based on that suggests that this web cam is
> > based on the iPassion iP2936/37 series of chips.
> > Given that the USB product id is 2937, I assume that this one uses the
> > iP2397 chip. This web cam has a microphone and the iP2937 chip supports
> > microphones.
> > The technical brochure for this chip is
> > http://www.ipassion.com.tw/pdf/iP2937_DSH_1.pdf.
> > 
> > ID 1b3b:2937
> 
> Please read http://linux-uvc.berlios.de/faq/ to check if the camera is UVC 
> compatible. If it is, please send me the output of
> 
> lsusb -v -d 1b3b:2937
> 
> as well as all messages printed to the kernel log when you plug the camera to 
> your system.
> 
> If the camera isn't UVC compatible I'm afraid I won't be able to help you.
> 


Hi Laurent,

I have a webcam like, see:

Bus 003 Device 002: ID 1b3b:2936 iPassion Technology Inc. PC Camera/WebCam
controller

and details about the webcam:

ubuntu at ubuntu:$ sudo lsusb -v -d 1b3b:2936

Bus 003 Device 002: ID 1b3b:2936 iPassion Technology Inc. PC Camera/WebCam
controller
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0         8
  idVendor           0x1b3b iPassion Technology Inc.
  idProduct          0x2936 PC Camera/WebCam controller
  bcdDevice            1.00
  iManufacturer           0 
  iProduct                0 
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          170
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0 
      bInterfaceProtocol    255 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0000  1x 0 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x03  EP 3 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0020  1x 32 bytes
        bInterval               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       1
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0 
      bInterfaceProtocol    255 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0180  1x 384 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x03  EP 3 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0020  1x 32 bytes
        bInterval               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       2
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0 
      bInterfaceProtocol    255 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x03  EP 3 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0020  1x 32 bytes
        bInterval               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       3
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0 
      bInterfaceProtocol    255 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0280  1x 640 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x03  EP 3 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0020  1x 32 bytes
        bInterval               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       4
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0 
      bInterfaceProtocol    255 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0300  1x 768 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x03  EP 3 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0020  1x 32 bytes
        bInterval               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       5
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0 
      bInterfaceProtocol    255 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0380  1x 896 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x03  EP 3 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0020  1x 32 bytes
        bInterval               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       6
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0 
      bInterfaceProtocol    255 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            1
          Transfer Type            Isochronous
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x03ff  1x 1023 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x03  EP 3 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0020  1x 32 bytes
        bInterval               0
Device Status:     0x0000
  (Bus Powered)

but does not show the "14 Video" (from http://www.ideasonboard.org/uvc/faq/)

ubuntu at ubuntu:$ sudo lsusb -d 1b3b:2936 -v | grep "14 Video"
ubuntu at ubuntu:$ 

/dev/video* was not even created by running "modprobe uvcvideo"

it's compatible with uvc driver?



From lliubbo at gmail.com  Wed Apr 20 08:02:41 2011
From: lliubbo at gmail.com (Bob Liu)
Date: Wed, 20 Apr 2011 14:02:41 +0800
Subject: [Linux-uvc-devel] Fwd: [PATCH v2] media: uvc_driver: add NO-MMU
	arch support
In-Reply-To: <1302261394-25695-1-git-send-email-lliubbo@gmail.com>
References: <1302261394-25695-1-git-send-email-lliubbo@gmail.com>
Message-ID: <BANLkTikGxffMuxWq3P7QxM0213k9oRU4hw@mail.gmail.com>

---------- Forwarded message ----------
From: Bob Liu <lliubbo at gmail.com>
Date: Fri, Apr 8, 2011 at 7:16 PM
Subject: [PATCH v2] media: uvc_driver: add NO-MMU arch support
To: linux-kernel at vger.kernel.org
Cc: mchehab at redhat.com, hverkuil at xs4all.nl,
laurent.pinchart at ideasonboard.com,
sakari.ailus at maxwell.research.nokia.com, martin_rubli at logitech.com,
jarod at redhat.com, tj at kernel.org, arnd at arndb.de, fweisbec at gmail.com,
agust at denx.de, gregkh at suse.de, Bob Liu <lliubbo at gmail.com>


UVC driver used to have partial no-mmu arch support, but it's removed by
commit c29fcff3daafbf46d64a543c1950bbd206ad8c1c.

This patch added them back and expanded to fully support no-mmu arch, so that
uvc cameras can be used on no-mmu platforms like Blackfin.

Signed-off-by: Bob Liu <lliubbo at gmail.com>
---
?drivers/media/video/uvc/uvc_queue.c | ? 47 +++++++++++++++++++++++++++++++++++
?drivers/media/video/uvc/uvc_v4l2.c ?| ? 13 +++++++++
?drivers/media/video/uvc/uvcvideo.h ?| ? ?6 ++++
?drivers/media/video/v4l2-dev.c ? ? ?| ? 18 +++++++++++++
?include/media/v4l2-dev.h ? ? ? ? ? ?| ? ?2 +
?5 files changed, 86 insertions(+), 0 deletions(-)

diff --git a/drivers/media/video/uvc/uvc_queue.c
b/drivers/media/video/uvc/uvc_queue.c
index f14581b..e505afe 100644
--- a/drivers/media/video/uvc/uvc_queue.c
+++ b/drivers/media/video/uvc/uvc_queue.c
@@ -424,6 +424,7 @@ int uvc_queue_mmap(struct uvc_video_queue *queue,
struct vm_area_struct *vma)
? ? ? ? ? ? ? ? ? ? ? ?break;
? ? ? ?}

+#ifdef CONFIG_MMU
? ? ? ?if (i == queue->count || size != queue->buf_size) {
? ? ? ? ? ? ? ?ret = -EINVAL;
? ? ? ? ? ? ? ?goto done;
@@ -445,6 +446,20 @@ int uvc_queue_mmap(struct uvc_video_queue *queue,
struct vm_area_struct *vma)
? ? ? ? ? ? ? ?addr += PAGE_SIZE;
? ? ? ? ? ? ? ?size -= PAGE_SIZE;
? ? ? ?}
+#else
+ ? ? ? if (i == queue->count ||
+ ? ? ? ? ? ? ? ? ? ? ? PAGE_ALIGN(size) != queue->buf_size) {
+ ? ? ? ? ? ? ? ret = -EINVAL;
+ ? ? ? ? ? ? ? goto done;
+ ? ? ? }
+
+ ? ? ? /* documentation/nommu-mmap.txt */
+ ? ? ? vma->vm_flags |= VM_IO | VM_MAYSHARE;
+
+ ? ? ? addr = (unsigned long)queue->mem + buffer->buf.m.offset;
+ ? ? ? vma->vm_start = addr;
+ ? ? ? vma->vm_end = addr + ?queue->buf_size;
+#endif

? ? ? ?vma->vm_ops = &uvc_vm_ops;
? ? ? ?vma->vm_private_data = buffer;
@@ -489,6 +504,38 @@ done:
?}

?/*
+ * Get unmapped area.
+ *
+ * NO-MMU arch need this function to make mmap() work correctly.
+ */
+unsigned long uvc_queue_get_unmapped_area(struct uvc_video_queue *queue,
+ ? ? ? ? ? ? ? unsigned long addr, unsigned long len, unsigned long pgoff)
+{
+ ? ? ? struct uvc_buffer *buffer;
+ ? ? ? unsigned int i;
+ ? ? ? int ret = 0;
+
+ ? ? ? mutex_lock(&queue->mutex);
+ ? ? ? for (i = 0; i < queue->count; ++i) {
+ ? ? ? ? ? ? ? buffer = &queue->buffer[i];
+ ? ? ? ? ? ? ? if ((buffer->buf.m.offset >> PAGE_SHIFT) == pgoff)
+ ? ? ? ? ? ? ? ? ? ? ? break;
+ ? ? ? }
+
+ ? ? ? if (i == queue->count ||
+ ? ? ? ? ? ? ? ? ? ? ? PAGE_ALIGN(len) != queue->buf_size) {
+ ? ? ? ? ? ? ? ret = -EINVAL;
+ ? ? ? ? ? ? ? goto done;
+ ? ? ? }
+
+ ? ? ? addr = (unsigned long)queue->mem + buffer->buf.m.offset;
+ ? ? ? ret = addr;
+done:
+ ? ? ? mutex_unlock(&queue->mutex);
+ ? ? ? return ret;
+}
+
+/*
?* Enable or disable the video buffers queue.
?*
?* The queue must be enabled before starting video acquisition and must be
diff --git a/drivers/media/video/uvc/uvc_v4l2.c
b/drivers/media/video/uvc/uvc_v4l2.c
index 9005a8d..9efab61 100644
--- a/drivers/media/video/uvc/uvc_v4l2.c
+++ b/drivers/media/video/uvc/uvc_v4l2.c
@@ -1081,6 +1081,18 @@ static unsigned int uvc_v4l2_poll(struct file
*file, poll_table *wait)
? ? ? ?return uvc_queue_poll(&stream->queue, file, wait);
?}

+static unsigned long uvc_v4l2_get_unmapped_area(struct file *file,
+ ? ? ? ? ? ? ? unsigned long addr, unsigned long len, unsigned long pgoff,
+ ? ? ? ? ? ? ? unsigned long flags)
+{
+ ? ? ? struct uvc_fh *handle = file->private_data;
+ ? ? ? struct uvc_streaming *stream = handle->stream;
+
+ ? ? ? uvc_trace(UVC_TRACE_CALLS, "uvc_v4l2_get_unmapped_area\n");
+
+ ? ? ? return uvc_queue_get_unmapped_area(&stream->queue, addr, len, pgoff);
+}
+
?const struct v4l2_file_operations uvc_fops = {
? ? ? ?.owner ? ? ? ? ?= THIS_MODULE,
? ? ? ?.open ? ? ? ? ? = uvc_v4l2_open,
@@ -1089,5 +1101,6 @@ const struct v4l2_file_operations uvc_fops = {
? ? ? ?.read ? ? ? ? ? = uvc_v4l2_read,
? ? ? ?.mmap ? ? ? ? ? = uvc_v4l2_mmap,
? ? ? ?.poll ? ? ? ? ? = uvc_v4l2_poll,
+ ? ? ? .get_unmapped_area = uvc_v4l2_get_unmapped_area,
?};

diff --git a/drivers/media/video/uvc/uvcvideo.h
b/drivers/media/video/uvc/uvcvideo.h
index 45f01e7..48a2378 100644
--- a/drivers/media/video/uvc/uvcvideo.h
+++ b/drivers/media/video/uvc/uvcvideo.h
@@ -580,6 +580,12 @@ extern int uvc_queue_mmap(struct uvc_video_queue *queue,
? ? ? ? ? ? ? ?struct vm_area_struct *vma);
?extern unsigned int uvc_queue_poll(struct uvc_video_queue *queue,
? ? ? ? ? ? ? ?struct file *file, poll_table *wait);
+#ifdef CONFIG_MMU
+#define uvc_queue_get_unmapped_area NULL
+#else
+extern unsigned long uvc_queue_get_unmapped_area(struct uvc_video_queue *queue,
+ ? ? ? ? ? ? ? unsigned long addr, unsigned long len, unsigned long pgoff);
+#endif
?extern int uvc_queue_allocated(struct uvc_video_queue *queue);
?static inline int uvc_queue_streaming(struct uvc_video_queue *queue)
?{
diff --git a/drivers/media/video/v4l2-dev.c b/drivers/media/video/v4l2-dev.c
index 498e674..221e73f 100644
--- a/drivers/media/video/v4l2-dev.c
+++ b/drivers/media/video/v4l2-dev.c
@@ -368,6 +368,23 @@ static int v4l2_mmap(struct file *filp, struct
vm_area_struct *vm)
? ? ? ?return ret;
?}

+#ifdef CONFIG_MMU
+#define v4l2_get_unmapped_area NULL
+#else
+static unsigned long v4l2_get_unmapped_area(struct file *filp,
+ ? ? ? ? ? ? ? unsigned long addr, unsigned long len, unsigned long pgoff,
+ ? ? ? ? ? ? ? unsigned long flags)
+{
+ ? ? ? struct video_device *vdev = video_devdata(filp);
+
+ ? ? ? if (!vdev->fops->get_unmapped_area)
+ ? ? ? ? ? ? ? return -ENOSYS;
+ ? ? ? if (!video_is_registered(vdev))
+ ? ? ? ? ? ? ? return -ENODEV;
+ ? ? ? return vdev->fops->get_unmapped_area(filp, addr, len, pgoff, flags);
+}
+#endif
+
?/* Override for the open function */
?static int v4l2_open(struct inode *inode, struct file *filp)
?{
@@ -452,6 +469,7 @@ static const struct file_operations v4l2_fops = {
? ? ? ?.write = v4l2_write,
? ? ? ?.open = v4l2_open,
? ? ? ?.mmap = v4l2_mmap,
+ ? ? ? .get_unmapped_area = v4l2_get_unmapped_area,
? ? ? ?.unlocked_ioctl = v4l2_ioctl,
?#ifdef CONFIG_COMPAT
? ? ? ?.compat_ioctl = v4l2_compat_ioctl32,
diff --git a/include/media/v4l2-dev.h b/include/media/v4l2-dev.h
index 8266d5a..0616a43 100644
--- a/include/media/v4l2-dev.h
+++ b/include/media/v4l2-dev.h
@@ -63,6 +63,8 @@ struct v4l2_file_operations {
? ? ? ?long (*ioctl) (struct file *, unsigned int, unsigned long);
? ? ? ?long (*unlocked_ioctl) (struct file *, unsigned int, unsigned long);
? ? ? ?int (*mmap) (struct file *, struct vm_area_struct *);
+ ? ? ? unsigned long (*get_unmapped_area) (struct file *, unsigned long,
+ ? ? ? ? ? ? ? ? ? ? ? unsigned long, unsigned long, unsigned long);
? ? ? ?int (*open) (struct file *);
? ? ? ?int (*release) (struct file *);
?};
--
1.6.3.3




-- 
Regards,
--Bob


From zdenek.materna at gmail.com  Thu Apr 21 11:04:33 2011
From: zdenek.materna at gmail.com (=?UTF-8?Q?Zden=C4=9Bk_Materna?=)
Date: Thu, 21 Apr 2011 11:04:33 +0200
Subject: [Linux-uvc-devel] Genius UVC webcam problem on ARM
In-Reply-To: <1302889321.12477.20.camel@zwerg>
References: <BANLkTi=_NZLh2w-wSOo_vc5x0RfyeGu3yA@mail.gmail.com>
	<BANLkTin-WS0UbL-sFfFE_XOrQMF5a1EkaA@mail.gmail.com>
	<BANLkTiniSNm5LCtbMqBzr_fBqsARmHRD9g@mail.gmail.com>
	<1302680763.8103.5.camel@zwerg>
	<BANLkTikiGg02uo=dLmyNcaNdTh-9SjQQ-w@mail.gmail.com>
	<1302709084.3352.8.camel@mini>
	<BANLkTincBabCVYhxrPHWzknHhu5deqPwMQ@mail.gmail.com>
	<1302723734.26657.0.camel@zwerg>
	<BANLkTik5G9r2Ux677tzWxmETSEHUuYX+QQ@mail.gmail.com>
	<1302889321.12477.20.camel@zwerg>
Message-ID: <BANLkTinuibrYQkxfdYd-XS4a2r6Hcx6KUw@mail.gmail.com>

Hello,

there is problem patching my kernel - maybe it's too old for this
patch (2.6.33.7). Any idea?

Best regards,
Zdenek Materna

patch -Np1 --dry-run < ../../../uvc_stat_jpeg_v4.diff

patching file drivers/media/video/uvc/uvc_driver.c
Hunk #1 succeeded at 47 with fuzz 1.
Hunk #2 succeeded at 350 (offset 1 line).
Hunk #3 succeeded at 2237 with fuzz 2 (offset 279 lines).
patching file drivers/media/video/uvc/uvc_queue.c
Hunk #1 succeeded at 336 (offset -12 lines).
Hunk #2 succeeded at 360 (offset -12 lines).
patching file drivers/media/video/uvc/uvc_video.c
Hunk #1 succeeded at 90 (offset -29 lines).
Hunk #2 FAILED at 151.
Hunk #3 succeeded at 202 (offset -38 lines).
Hunk #4 succeeded at 229 (offset -38 lines).
Hunk #5 succeeded at 843 (offset -62 lines).
Hunk #6 succeeded at 1058 (offset -63 lines).
1 out of 6 hunks FAILED -- saving rejects to file
drivers/media/video/uvc/uvc_video.c.rej
patching file drivers/media/video/uvc/uvcvideo.h
Hunk #1 FAILED at 182.
Hunk #2 succeeded at 406 (offset 3 lines).
Hunk #3 succeeded at 465 with fuzz 2.

Dne 15. dubna 2011 19:42 Alexey Fisher <bug-track at fisher-privat.net> napsal(a):
>
> There is new patch. With this patch you can recalculate bandwith for
> jpeg stream. See my post in list and try it:
> [patch] jpeg compression hacks. Tester are welcome!!!
> --
> Regards,
> ? ? ? ?Alexey
>


From lliubbo at gmail.com  Wed Apr 20 12:18:15 2011
From: lliubbo at gmail.com (Bob Liu)
Date: Wed, 20 Apr 2011 18:18:15 +0800
Subject: [Linux-uvc-devel] Fwd: [PATCH v2] media: uvc_driver: add NO-MMU
	arch support
In-Reply-To: <20110420085908.GA7294@minime.bse>
References: <1302261394-25695-1-git-send-email-lliubbo@gmail.com>
	<BANLkTikGxffMuxWq3P7QxM0213k9oRU4hw@mail.gmail.com>
	<20110420085908.GA7294@minime.bse>
Message-ID: <BANLkTi=2Yd2JgoG2BxKqJ7KdW_ADbyUY5Q@mail.gmail.com>

On Wed, Apr 20, 2011 at 4:59 PM, Daniel Gl?ckner <daniel-gl at gmx.net> wrote:
> On Wed, Apr 20, 2011 at 02:02:41PM +0800, Bob Liu wrote:
>> ---------- Forwarded message ----------
>
> Forwarding broke tabs.
>

Hi, Daniel
Thanks for your review, I will make a new patch later.

>> @@ -445,6 +446,20 @@ int uvc_queue_mmap(struct uvc_video_queue *queue,
>> struct vm_area_struct *vma)
>> ? ? ? ? ? ? ? ?addr += PAGE_SIZE;
>> ? ? ? ? ? ? ? ?size -= PAGE_SIZE;
>> ? ? ? ?}
>> +#else
>> + ? ? ? if (i == queue->count ||
>> + ? ? ? ? ? ? ? ? ? ? ? PAGE_ALIGN(size) != queue->buf_size) {
>
> Why do you need to round up size on nommu?
>

If didn't round up, it always return  -EINVAL.
I don't know why config-mmu doesn't have this problem.

I use luvcview for testing and added some print, you can see that size
always != queue->buf_size.
So we need round up.

root:/> luvcview -f yuv -s 320x240 -i 30
luvcview 0.2.4

SDL information:
  Video driver: fbcon
  Hardware surfaces are available (382k video memory)
Device information:
  Device path:  /dev/video0
Stream settings:
  Frame format: YUYV
  Frame size:   320x240
  Fsaiz e tis  03x2f5800, align size is 0x26000, bufsize is 0x26000

size is 0x25800, align size is 0x26000, bufsize is 0x26000
Unable to map buffer: Invalid argument
 Init v4L2 failed !! exit fatal
root:/>

>> + ? ? ? ? ? ? ? ret = -EINVAL;
>> + ? ? ? ? ? ? ? goto done;
>> + ? ? ? }
>> +
>> + ? ? ? /* documentation/nommu-mmap.txt */
>
> I don't see where Documentation/nommu-mmap.txt provides any information
> on the following line(s).
>

I will rm it, sorry for that.

>> + ? ? ? vma->vm_flags |= VM_IO | VM_MAYSHARE;
>> +
>> + ? ? ? addr = (unsigned long)queue->mem + buffer->buf.m.offset;
>> + ? ? ? vma->vm_start = addr;
>> + ? ? ? vma->vm_end = addr + ?queue->buf_size;
>
> You don't need to do this here. vm_start and vm_end have already been
> modified like this by do_mmap_pgoff after get_unmapped_area had been
> called.
>

will rm also.

>> +#endif
>>
>> ? ? ? ?vma->vm_ops = &uvc_vm_ops;
>> ? ? ? ?vma->vm_private_data = buffer;
>> @@ -489,6 +504,38 @@ done:
>> ?}
>>
>> ?/*
>> + * Get unmapped area.
>> + *
>> + * NO-MMU arch need this function to make mmap() work correctly.
>> + */
>> +unsigned long uvc_queue_get_unmapped_area(struct uvc_video_queue *queue,
>> + ? ? ? ? ? ? ? unsigned long addr, unsigned long len, unsigned long pgoff)
>> +{
>> + ? ? ? struct uvc_buffer *buffer;
>> + ? ? ? unsigned int i;
>> + ? ? ? int ret = 0;
>
> ret should be an unsigned long. You later try to store a pointer in
> there.
>

okay.

>> +
>> + ? ? ? mutex_lock(&queue->mutex);
>> + ? ? ? for (i = 0; i < queue->count; ++i) {
>> + ? ? ? ? ? ? ? buffer = &queue->buffer[i];
>> + ? ? ? ? ? ? ? if ((buffer->buf.m.offset >> PAGE_SHIFT) == pgoff)
>> + ? ? ? ? ? ? ? ? ? ? ? break;
>> + ? ? ? }
>> +
>> + ? ? ? if (i == queue->count ||
>> + ? ? ? ? ? ? ? ? ? ? ? PAGE_ALIGN(len) != queue->buf_size) {
>> + ? ? ? ? ? ? ? ret = -EINVAL;
>> + ? ? ? ? ? ? ? goto done;
>> + ? ? ? }
>> +
>> + ? ? ? addr = (unsigned long)queue->mem + buffer->buf.m.offset;
>> + ? ? ? ret = addr;
>> +done:
>> + ? ? ? mutex_unlock(&queue->mutex);
>> + ? ? ? return ret;
>> +}
>> +
>> +/*
>> ?* Enable or disable the video buffers queue.
>> ?*
>> ?* The queue must be enabled before starting video acquisition and must be
>> diff --git a/drivers/media/video/uvc/uvc_v4l2.c
>> b/drivers/media/video/uvc/uvc_v4l2.c
>> index 9005a8d..9efab61 100644
>> --- a/drivers/media/video/uvc/uvc_v4l2.c
>> +++ b/drivers/media/video/uvc/uvc_v4l2.c
>> @@ -1081,6 +1081,18 @@ static unsigned int uvc_v4l2_poll(struct file
>> *file, poll_table *wait)
>> ? ? ? ?return uvc_queue_poll(&stream->queue, file, wait);
>> ?}
>>
>> +static unsigned long uvc_v4l2_get_unmapped_area(struct file *file,
>> + ? ? ? ? ? ? ? unsigned long addr, unsigned long len, unsigned long pgoff,
>> + ? ? ? ? ? ? ? unsigned long flags)
>> +{
>> + ? ? ? struct uvc_fh *handle = file->private_data;
>> + ? ? ? struct uvc_streaming *stream = handle->stream;
>> +
>> + ? ? ? uvc_trace(UVC_TRACE_CALLS, "uvc_v4l2_get_unmapped_area\n");
>> +
>> + ? ? ? return uvc_queue_get_unmapped_area(&stream->queue, addr, len, pgoff);
>> +}
>> +
>> ?const struct v4l2_file_operations uvc_fops = {
>> ? ? ? ?.owner ? ? ? ? ?= THIS_MODULE,
>> ? ? ? ?.open ? ? ? ? ? = uvc_v4l2_open,
>> @@ -1089,5 +1101,6 @@ const struct v4l2_file_operations uvc_fops = {
>> ? ? ? ?.read ? ? ? ? ? = uvc_v4l2_read,
>> ? ? ? ?.mmap ? ? ? ? ? = uvc_v4l2_mmap,
>> ? ? ? ?.poll ? ? ? ? ? = uvc_v4l2_poll,
>> + ? ? ? .get_unmapped_area = uvc_v4l2_get_unmapped_area,
>> ?};
>>
>> diff --git a/drivers/media/video/uvc/uvcvideo.h
>> b/drivers/media/video/uvc/uvcvideo.h
>> index 45f01e7..48a2378 100644
>> --- a/drivers/media/video/uvc/uvcvideo.h
>> +++ b/drivers/media/video/uvc/uvcvideo.h
>> @@ -580,6 +580,12 @@ extern int uvc_queue_mmap(struct uvc_video_queue *queue,
>> ? ? ? ? ? ? ? ?struct vm_area_struct *vma);
>> ?extern unsigned int uvc_queue_poll(struct uvc_video_queue *queue,
>> ? ? ? ? ? ? ? ?struct file *file, poll_table *wait);
>> +#ifdef CONFIG_MMU
>> +#define uvc_queue_get_unmapped_area NULL
>> +#else
>> +extern unsigned long uvc_queue_get_unmapped_area(struct uvc_video_queue *queue,
>> + ? ? ? ? ? ? ? unsigned long addr, unsigned long len, unsigned long pgoff);
>> +#endif
>> ?extern int uvc_queue_allocated(struct uvc_video_queue *queue);
>> ?static inline int uvc_queue_streaming(struct uvc_video_queue *queue)
>> ?{
>> diff --git a/drivers/media/video/v4l2-dev.c b/drivers/media/video/v4l2-dev.c
>
> Rest looks good.
> Did you change anything in the generic code or is this a plain
> git revert c29fcff3daafbf46d64a543c1950bbd206ad8c1c
> ?
>

It's not a simple revert, I added  uvc_v4l2_get_unmapped_area().

> Maybe one can unify the mmu and nommu versions of uvc_queue_mmap by using
> remap_vmalloc_range but IMHO the nommu versions of the remap_*_range
> functions are broken and should only validate if the source and destination
> addresses match.
>

Maybe we can try in future.
Thanks!
-- 
Regards,
--Bob


From lliubbo at gmail.com  Thu Apr 21 05:17:42 2011
From: lliubbo at gmail.com (Bob Liu)
Date: Thu, 21 Apr 2011 11:17:42 +0800
Subject: [Linux-uvc-devel] [PATCH v3] media:uvc_driver: add uvc support on
	no-mmu arch
Message-ID: <1303355862-17507-1-git-send-email-lliubbo@gmail.com>

UVC driver used to have partial no-mmu arch support, but it's removed by
commit c29fcff3daafbf46d64a543c1950bbd206ad8c1c.

This patch added them back and expanded to fully support no-mmu arch, so that
uvc cameras can be used on no-mmu platforms like Blackfin.

Signed-off-by: Bob Liu <lliubbo at gmail.com>
---
 drivers/media/video/uvc/uvc_queue.c |   30 ++++++++++++++++++++++++++++++
 drivers/media/video/uvc/uvc_v4l2.c  |   13 +++++++++++++
 drivers/media/video/uvc/uvcvideo.h  |    6 ++++++
 drivers/media/video/v4l2-dev.c      |   18 ++++++++++++++++++
 include/media/v4l2-dev.h            |    2 ++
 5 files changed, 69 insertions(+), 0 deletions(-)

diff --git a/drivers/media/video/uvc/uvc_queue.c b/drivers/media/video/uvc/uvc_queue.c
index f14581b..448a753 100644
--- a/drivers/media/video/uvc/uvc_queue.c
+++ b/drivers/media/video/uvc/uvc_queue.c
@@ -424,7 +424,11 @@ int uvc_queue_mmap(struct uvc_video_queue *queue, struct vm_area_struct *vma)
 			break;
 	}
 
+#ifdef CONFIG_MMU
 	if (i == queue->count || size != queue->buf_size) {
+#else
+	if (i == queue->count || PAGE_ALIGN(size) != queue->buf_size) {
+#endif
 		ret = -EINVAL;
 		goto done;
 	}
@@ -436,6 +440,7 @@ int uvc_queue_mmap(struct uvc_video_queue *queue, struct vm_area_struct *vma)
 	vma->vm_flags |= VM_IO;
 
 	addr = (unsigned long)queue->mem + buffer->buf.m.offset;
+#ifdef CONFIG_MMU
 	while (size > 0) {
 		page = vmalloc_to_page((void *)addr);
 		if ((ret = vm_insert_page(vma, start, page)) < 0)
@@ -445,6 +450,7 @@ int uvc_queue_mmap(struct uvc_video_queue *queue, struct vm_area_struct *vma)
 		addr += PAGE_SIZE;
 		size -= PAGE_SIZE;
 	}
+#endif
 
 	vma->vm_ops = &uvc_vm_ops;
 	vma->vm_private_data = buffer;
@@ -489,6 +495,30 @@ done:
 }
 
 /*
+ * Get unmapped area.
+ *
+ * NO-MMU arch need this function to make mmap() work correctly.
+ */
+unsigned long uvc_queue_get_unmapped_area(struct uvc_video_queue *queue,
+		unsigned long addr, unsigned long len, unsigned long pgoff)
+{
+	struct uvc_buffer *buffer;
+	unsigned int i;
+	int ret = 0;
+
+	mutex_lock(&queue->mutex);
+	for (i = 0; i < queue->count; ++i) {
+		buffer = &queue->buffer[i];
+		if ((buffer->buf.m.offset >> PAGE_SHIFT) == pgoff)
+			break;
+	}
+	addr = (unsigned long)queue->mem + buffer->buf.m.offset;
+	ret = addr;
+	mutex_unlock(&queue->mutex);
+	return ret;
+}
+
+/*
  * Enable or disable the video buffers queue.
  *
  * The queue must be enabled before starting video acquisition and must be
diff --git a/drivers/media/video/uvc/uvc_v4l2.c b/drivers/media/video/uvc/uvc_v4l2.c
index 9005a8d..9efab61 100644
--- a/drivers/media/video/uvc/uvc_v4l2.c
+++ b/drivers/media/video/uvc/uvc_v4l2.c
@@ -1081,6 +1081,18 @@ static unsigned int uvc_v4l2_poll(struct file *file, poll_table *wait)
 	return uvc_queue_poll(&stream->queue, file, wait);
 }
 
+static unsigned long uvc_v4l2_get_unmapped_area(struct file *file,
+		unsigned long addr, unsigned long len, unsigned long pgoff,
+		unsigned long flags)
+{
+	struct uvc_fh *handle = file->private_data;
+	struct uvc_streaming *stream = handle->stream;
+
+	uvc_trace(UVC_TRACE_CALLS, "uvc_v4l2_get_unmapped_area\n");
+
+	return uvc_queue_get_unmapped_area(&stream->queue, addr, len, pgoff);
+}
+
 const struct v4l2_file_operations uvc_fops = {
 	.owner		= THIS_MODULE,
 	.open		= uvc_v4l2_open,
@@ -1089,5 +1101,6 @@ const struct v4l2_file_operations uvc_fops = {
 	.read		= uvc_v4l2_read,
 	.mmap		= uvc_v4l2_mmap,
 	.poll		= uvc_v4l2_poll,
+	.get_unmapped_area = uvc_v4l2_get_unmapped_area,
 };
 
diff --git a/drivers/media/video/uvc/uvcvideo.h b/drivers/media/video/uvc/uvcvideo.h
index 45f01e7..48a2378 100644
--- a/drivers/media/video/uvc/uvcvideo.h
+++ b/drivers/media/video/uvc/uvcvideo.h
@@ -580,6 +580,12 @@ extern int uvc_queue_mmap(struct uvc_video_queue *queue,
 		struct vm_area_struct *vma);
 extern unsigned int uvc_queue_poll(struct uvc_video_queue *queue,
 		struct file *file, poll_table *wait);
+#ifdef CONFIG_MMU
+#define uvc_queue_get_unmapped_area NULL
+#else
+extern unsigned long uvc_queue_get_unmapped_area(struct uvc_video_queue *queue,
+		unsigned long addr, unsigned long len, unsigned long pgoff);
+#endif
 extern int uvc_queue_allocated(struct uvc_video_queue *queue);
 static inline int uvc_queue_streaming(struct uvc_video_queue *queue)
 {
diff --git a/drivers/media/video/v4l2-dev.c b/drivers/media/video/v4l2-dev.c
index 498e674..221e73f 100644
--- a/drivers/media/video/v4l2-dev.c
+++ b/drivers/media/video/v4l2-dev.c
@@ -368,6 +368,23 @@ static int v4l2_mmap(struct file *filp, struct vm_area_struct *vm)
 	return ret;
 }
 
+#ifdef CONFIG_MMU
+#define v4l2_get_unmapped_area NULL
+#else
+static unsigned long v4l2_get_unmapped_area(struct file *filp,
+		unsigned long addr, unsigned long len, unsigned long pgoff,
+		unsigned long flags)
+{
+	struct video_device *vdev = video_devdata(filp);
+
+	if (!vdev->fops->get_unmapped_area)
+		return -ENOSYS;
+	if (!video_is_registered(vdev))
+		return -ENODEV;
+	return vdev->fops->get_unmapped_area(filp, addr, len, pgoff, flags);
+}
+#endif
+
 /* Override for the open function */
 static int v4l2_open(struct inode *inode, struct file *filp)
 {
@@ -452,6 +469,7 @@ static const struct file_operations v4l2_fops = {
 	.write = v4l2_write,
 	.open = v4l2_open,
 	.mmap = v4l2_mmap,
+	.get_unmapped_area = v4l2_get_unmapped_area,
 	.unlocked_ioctl = v4l2_ioctl,
 #ifdef CONFIG_COMPAT
 	.compat_ioctl = v4l2_compat_ioctl32,
diff --git a/include/media/v4l2-dev.h b/include/media/v4l2-dev.h
index 8266d5a..0616a43 100644
--- a/include/media/v4l2-dev.h
+++ b/include/media/v4l2-dev.h
@@ -63,6 +63,8 @@ struct v4l2_file_operations {
 	long (*ioctl) (struct file *, unsigned int, unsigned long);
 	long (*unlocked_ioctl) (struct file *, unsigned int, unsigned long);
 	int (*mmap) (struct file *, struct vm_area_struct *);
+	unsigned long (*get_unmapped_area) (struct file *, unsigned long,
+			unsigned long, unsigned long, unsigned long);
 	int (*open) (struct file *);
 	int (*release) (struct file *);
 };
-- 
1.6.3.3



From lliubbo at gmail.com  Thu Apr 21 10:20:36 2011
From: lliubbo at gmail.com (Bob Liu)
Date: Thu, 21 Apr 2011 16:20:36 +0800
Subject: [Linux-uvc-devel] [PATCH v3] media:uvc_driver: add uvc support
	on no-mmu arch
In-Reply-To: <20110421075947.GA8178@minime.bse>
References: <1303355862-17507-1-git-send-email-lliubbo@gmail.com>
	<20110421075947.GA8178@minime.bse>
Message-ID: <BANLkTimHX8aYoeSU1ES0Tw0Swaz9xYLt=Q@mail.gmail.com>

On Thu, Apr 21, 2011 at 3:59 PM, Daniel Gl?ckner <daniel-gl at gmx.net> wrote:
> Hi Bob,
>
> On Thu, Apr 21, 2011 at 11:17:42AM +0800, Bob Liu wrote:
>> +#ifdef CONFIG_MMU
>> ? ? ? if (i == queue->count || size != queue->buf_size) {
>> +#else
>> + ? ? if (i == queue->count || PAGE_ALIGN(size) != queue->buf_size) {
>> +#endif
>
> on mmu systems do_mmap_pgoff contains a len = PAGE_ALIGN(len); line.
> If we depend on this behavior, why not do it here as well and get rid
> of the #ifdef?
>

If do it in do_mmap_pgoff() the whole system will be effected, I am
not sure whether
it's correct and needed for other subsystem.

>> +unsigned long uvc_queue_get_unmapped_area(struct uvc_video_queue *queue,
>> + ? ? ? ? ? ? unsigned long addr, unsigned long len, unsigned long pgoff)
>> +{
>> + ? ? struct uvc_buffer *buffer;
>> + ? ? unsigned int i;
>> + ? ? int ret = 0;
>
> You still didn't change ret to unsigned long.
>

Oh, Sorry. My fault.

>> + ? ? addr = (unsigned long)queue->mem + buffer->buf.m.offset;
>> + ? ? ret = addr;
>
> Why the intermediate step using addr?
>

If don't return addr, do_mmap_pgoff() will return failure and we can't
setup vma correctly.
See mm/nommu.c line 1386(add = file->f_op->get_unmmapped_area() ).

>> diff --git a/drivers/media/video/v4l2-dev.c b/drivers/media/video/v4l2-dev.c
>> index 498e674..221e73f 100644
>> --- a/drivers/media/video/v4l2-dev.c
>> +++ b/drivers/media/video/v4l2-dev.c
>> @@ -368,6 +368,23 @@ static int v4l2_mmap(struct file *filp, struct vm_area_struct *vm)
>> ? ? ? return ret;
>> ?}
>>
>> +#ifdef CONFIG_MMU
>> +#define v4l2_get_unmapped_area NULL
>> +#else
>> +static unsigned long v4l2_get_unmapped_area(struct file *filp,
>> + ? ? ? ? ? ? unsigned long addr, unsigned long len, unsigned long pgoff,
>> + ? ? ? ? ? ? unsigned long flags)
>> +{
>> + ? ? struct video_device *vdev = video_devdata(filp);
>> +
>> + ? ? if (!vdev->fops->get_unmapped_area)
>> + ? ? ? ? ? ? return -ENOSYS;
>> + ? ? if (!video_is_registered(vdev))
>> + ? ? ? ? ? ? return -ENODEV;
>> + ? ? return vdev->fops->get_unmapped_area(filp, addr, len, pgoff, flags);
>> +}
>> +#endif
>> +
>> ?/* Override for the open function */
>> ?static int v4l2_open(struct inode *inode, struct file *filp)
>> ?{
>> @@ -452,6 +469,7 @@ static const struct file_operations v4l2_fops = {
>> ? ? ? .write = v4l2_write,
>> ? ? ? .open = v4l2_open,
>> ? ? ? .mmap = v4l2_mmap,
>> + ? ? .get_unmapped_area = v4l2_get_unmapped_area,
>> ? ? ? .unlocked_ioctl = v4l2_ioctl,
>> ?#ifdef CONFIG_COMPAT
>> ? ? ? .compat_ioctl = v4l2_compat_ioctl32,
>> diff --git a/include/media/v4l2-dev.h b/include/media/v4l2-dev.h
>> index 8266d5a..0616a43 100644
>> --- a/include/media/v4l2-dev.h
>> +++ b/include/media/v4l2-dev.h
>> @@ -63,6 +63,8 @@ struct v4l2_file_operations {
>> ? ? ? long (*ioctl) (struct file *, unsigned int, unsigned long);
>> ? ? ? long (*unlocked_ioctl) (struct file *, unsigned int, unsigned long);
>> ? ? ? int (*mmap) (struct file *, struct vm_area_struct *);
>> + ? ? unsigned long (*get_unmapped_area) (struct file *, unsigned long,
>> + ? ? ? ? ? ? ? ? ? ? unsigned long, unsigned long, unsigned long);
>> ? ? ? int (*open) (struct file *);
>> ? ? ? int (*release) (struct file *);
>> ?};
>
> I'd prefer a git revert c29fcff3daafbf46d64a543c1950bbd206ad8c1c for
> this block instead of reverting it together with the UVC changes.
>

Okay, I will confirm that and do it.

Thanks a lot for your review.

-- 
Regards,
--Bob


From lliubbo at gmail.com  Thu Apr 21 11:57:31 2011
From: lliubbo at gmail.com (Bob Liu)
Date: Thu, 21 Apr 2011 17:57:31 +0800
Subject: [Linux-uvc-devel] [PATCH v3] media:uvc_driver: add uvc support
	on no-mmu arch
In-Reply-To: <20110421094743.GA8503@minime.bse>
References: <1303355862-17507-1-git-send-email-lliubbo@gmail.com>
	<20110421075947.GA8178@minime.bse>
	<BANLkTimHX8aYoeSU1ES0Tw0Swaz9xYLt=Q@mail.gmail.com>
	<20110421094743.GA8503@minime.bse>
Message-ID: <BANLkTimO-4ubi7qUCncB9Z+wwNx1LURvfQ@mail.gmail.com>

On Thu, Apr 21, 2011 at 5:47 PM, Daniel Gl?ckner <daniel-gl at gmx.net> wrote:
> On Thu, Apr 21, 2011 at 04:20:36PM +0800, Bob Liu wrote:
>> > on mmu systems do_mmap_pgoff contains a len = PAGE_ALIGN(len); line.
>> > If we depend on this behavior, why not do it here as well and get rid
>> > of the #ifdef?
>> >
>>
>> If do it in do_mmap_pgoff() the whole system will be effected, I am
>> not sure whether
>> it's correct and needed for other subsystem.
>
> With "here" I was referring to uvc_queue_mmap.
>

I am sorry, I didn't get your idea. You mean using  PAGE_ALIGN() here for both
mmu and no-mmu arch ?

>> >> + ? ? addr = (unsigned long)queue->mem + buffer->buf.m.offset;
>> >> + ? ? ret = addr;
>> >
>> > Why the intermediate step using addr?
>> >
>>
>> If don't return addr, do_mmap_pgoff() will return failure and we can't
>> setup vma correctly.
>> See mm/nommu.c line 1386(add = file->f_op->get_unmmapped_area() ).
>
> I know, but why not do
> ? ? ? ?ret = (unsigned long)queue->mem + buffer->buf.m.offset;
> instead?
>

Okay.
Thanks

-- 
Regards,
--Bob


From lliubbo at gmail.com  Fri Apr 22 11:08:51 2011
From: lliubbo at gmail.com (Bob Liu)
Date: Fri, 22 Apr 2011 17:08:51 +0800
Subject: [Linux-uvc-devel] [PATCH v4] media:uvc_driver: add uvc support on
	no-mmu arch
Message-ID: <1303463331-5024-1-git-send-email-lliubbo@gmail.com>

UVC driver used to have partial no-mmu arch support, but it's removed by
commit c29fcff3daafbf46d64a543c1950bbd206ad8c1c.

This patch added them back and expanded to fully support no-mmu arch, so that
uvc cameras can be used on no-mmu platforms like Blackfin.

Signed-off-by: Bob Liu <lliubbo at gmail.com>
---
 drivers/media/video/uvc/uvc_queue.c |   26 +++++++++++++++++++++++++-
 drivers/media/video/uvc/uvc_v4l2.c  |   13 +++++++++++++
 drivers/media/video/uvc/uvcvideo.h  |    6 ++++++
 drivers/media/video/v4l2-dev.c      |   18 ++++++++++++++++++
 include/media/v4l2-dev.h            |    2 ++
 5 files changed, 64 insertions(+), 1 deletions(-)

diff --git a/drivers/media/video/uvc/uvc_queue.c b/drivers/media/video/uvc/uvc_queue.c
index f14581b..caf8f6f 100644
--- a/drivers/media/video/uvc/uvc_queue.c
+++ b/drivers/media/video/uvc/uvc_queue.c
@@ -424,7 +424,7 @@ int uvc_queue_mmap(struct uvc_video_queue *queue, struct vm_area_struct *vma)
 			break;
 	}
 
-	if (i == queue->count || size != queue->buf_size) {
+	if (i == queue->count || PAGE_ALIGN(size) != queue->buf_size) {
 		ret = -EINVAL;
 		goto done;
 	}
@@ -436,6 +436,7 @@ int uvc_queue_mmap(struct uvc_video_queue *queue, struct vm_area_struct *vma)
 	vma->vm_flags |= VM_IO;
 
 	addr = (unsigned long)queue->mem + buffer->buf.m.offset;
+#ifdef CONFIG_MMU
 	while (size > 0) {
 		page = vmalloc_to_page((void *)addr);
 		if ((ret = vm_insert_page(vma, start, page)) < 0)
@@ -445,6 +446,7 @@ int uvc_queue_mmap(struct uvc_video_queue *queue, struct vm_area_struct *vma)
 		addr += PAGE_SIZE;
 		size -= PAGE_SIZE;
 	}
+#endif
 
 	vma->vm_ops = &uvc_vm_ops;
 	vma->vm_private_data = buffer;
@@ -489,6 +491,28 @@ done:
 }
 
 /*
+ * Get unmapped area.
+ *
+ * NO-MMU arch need this function to make mmap() work correctly.
+ */
+unsigned long uvc_queue_get_unmapped_area(struct uvc_video_queue *queue,
+		unsigned long addr, unsigned long len, unsigned long pgoff)
+{
+	struct uvc_buffer *buffer;
+	unsigned int i;
+
+	mutex_lock(&queue->mutex);
+	for (i = 0; i < queue->count; ++i) {
+		buffer = &queue->buffer[i];
+		if ((buffer->buf.m.offset >> PAGE_SHIFT) == pgoff)
+			break;
+	}
+	addr = (unsigned long)queue->mem + buffer->buf.m.offset;
+	mutex_unlock(&queue->mutex);
+	return addr;
+}
+
+/*
  * Enable or disable the video buffers queue.
  *
  * The queue must be enabled before starting video acquisition and must be
diff --git a/drivers/media/video/uvc/uvc_v4l2.c b/drivers/media/video/uvc/uvc_v4l2.c
index 9005a8d..9efab61 100644
--- a/drivers/media/video/uvc/uvc_v4l2.c
+++ b/drivers/media/video/uvc/uvc_v4l2.c
@@ -1081,6 +1081,18 @@ static unsigned int uvc_v4l2_poll(struct file *file, poll_table *wait)
 	return uvc_queue_poll(&stream->queue, file, wait);
 }
 
+static unsigned long uvc_v4l2_get_unmapped_area(struct file *file,
+		unsigned long addr, unsigned long len, unsigned long pgoff,
+		unsigned long flags)
+{
+	struct uvc_fh *handle = file->private_data;
+	struct uvc_streaming *stream = handle->stream;
+
+	uvc_trace(UVC_TRACE_CALLS, "uvc_v4l2_get_unmapped_area\n");
+
+	return uvc_queue_get_unmapped_area(&stream->queue, addr, len, pgoff);
+}
+
 const struct v4l2_file_operations uvc_fops = {
 	.owner		= THIS_MODULE,
 	.open		= uvc_v4l2_open,
@@ -1089,5 +1101,6 @@ const struct v4l2_file_operations uvc_fops = {
 	.read		= uvc_v4l2_read,
 	.mmap		= uvc_v4l2_mmap,
 	.poll		= uvc_v4l2_poll,
+	.get_unmapped_area = uvc_v4l2_get_unmapped_area,
 };
 
diff --git a/drivers/media/video/uvc/uvcvideo.h b/drivers/media/video/uvc/uvcvideo.h
index 45f01e7..48a2378 100644
--- a/drivers/media/video/uvc/uvcvideo.h
+++ b/drivers/media/video/uvc/uvcvideo.h
@@ -580,6 +580,12 @@ extern int uvc_queue_mmap(struct uvc_video_queue *queue,
 		struct vm_area_struct *vma);
 extern unsigned int uvc_queue_poll(struct uvc_video_queue *queue,
 		struct file *file, poll_table *wait);
+#ifdef CONFIG_MMU
+#define uvc_queue_get_unmapped_area NULL
+#else
+extern unsigned long uvc_queue_get_unmapped_area(struct uvc_video_queue *queue,
+		unsigned long addr, unsigned long len, unsigned long pgoff);
+#endif
 extern int uvc_queue_allocated(struct uvc_video_queue *queue);
 static inline int uvc_queue_streaming(struct uvc_video_queue *queue)
 {
diff --git a/drivers/media/video/v4l2-dev.c b/drivers/media/video/v4l2-dev.c
index 498e674..221e73f 100644
--- a/drivers/media/video/v4l2-dev.c
+++ b/drivers/media/video/v4l2-dev.c
@@ -368,6 +368,23 @@ static int v4l2_mmap(struct file *filp, struct vm_area_struct *vm)
 	return ret;
 }
 
+#ifdef CONFIG_MMU
+#define v4l2_get_unmapped_area NULL
+#else
+static unsigned long v4l2_get_unmapped_area(struct file *filp,
+		unsigned long addr, unsigned long len, unsigned long pgoff,
+		unsigned long flags)
+{
+	struct video_device *vdev = video_devdata(filp);
+
+	if (!vdev->fops->get_unmapped_area)
+		return -ENOSYS;
+	if (!video_is_registered(vdev))
+		return -ENODEV;
+	return vdev->fops->get_unmapped_area(filp, addr, len, pgoff, flags);
+}
+#endif
+
 /* Override for the open function */
 static int v4l2_open(struct inode *inode, struct file *filp)
 {
@@ -452,6 +469,7 @@ static const struct file_operations v4l2_fops = {
 	.write = v4l2_write,
 	.open = v4l2_open,
 	.mmap = v4l2_mmap,
+	.get_unmapped_area = v4l2_get_unmapped_area,
 	.unlocked_ioctl = v4l2_ioctl,
 #ifdef CONFIG_COMPAT
 	.compat_ioctl = v4l2_compat_ioctl32,
diff --git a/include/media/v4l2-dev.h b/include/media/v4l2-dev.h
index 8266d5a..0616a43 100644
--- a/include/media/v4l2-dev.h
+++ b/include/media/v4l2-dev.h
@@ -63,6 +63,8 @@ struct v4l2_file_operations {
 	long (*ioctl) (struct file *, unsigned int, unsigned long);
 	long (*unlocked_ioctl) (struct file *, unsigned int, unsigned long);
 	int (*mmap) (struct file *, struct vm_area_struct *);
+	unsigned long (*get_unmapped_area) (struct file *, unsigned long,
+			unsigned long, unsigned long, unsigned long);
 	int (*open) (struct file *);
 	int (*release) (struct file *);
 };
-- 
1.6.3.3



From laurent.pinchart at ideasonboard.com  Fri Apr 22 11:16:30 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 22 Apr 2011 11:16:30 +0200
Subject: [Linux-uvc-devel] BisonCam, NB Pro (5986:0203) crash ucview
In-Reply-To: <1300891391.5875.11.camel@localhost.localdomain>
References: <1300891391.5875.11.camel@localhost.localdomain>
Message-ID: <201104221116.30456.laurent.pinchart@ideasonboard.com>

Hi Alexandre,

On Wednesday 23 March 2011 15:43:11 Alexandre Felipe Muller de Souza wrote:
> Hello, I experienced some problems with Acer BisonCam builtin on
> Notebook. I tried to update packages to most updated (kernel, uvcdriver)
> but the problem occurs at the same way. When I use ucview application,
> sometimes it crashed when I try to initialize the cam. I found the
> device information as fully compatible at device list, but the name is
> different. When the problem occurs I have to remove and add again the
> module to work again.
> At terminal the application writes:
> 
> error: input/output error
> error: input/output error
> error: input/output error
> Aborted
> 
> The demsg output:
> uvcvideo: Failed to query (135) UVC control 3 (unit 5) : -110 (exp. 2).
> uvcvideo: Failed to query (135) UVC control 2 (unit 5) : -110 (exp. 2).
> uvcvideo: Failed to query (135) UVC control 2 (unit 5) : -110 (exp. 2).
> uvcvideo: Failed to query (135) UVC control 3 (unit 5) : -110 (exp. 2).
> uvcvideo: Failed to query (135) UVC control 7 (unit 5) : -110 (exp. 2).

Your camera times out when it receives those valid requests. This is probably 
caused by a camera firmware bug, leading to a camera crash. There's little 
that can be done on the host side. I'll mark the camera as potentially buggy 
in the list of supported devices.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Fri Apr 22 11:18:50 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 22 Apr 2011 11:18:50 +0200
Subject: [Linux-uvc-devel] How to 'quirk' more than 3 same "YUYV"
	streaming web-cams
In-Reply-To: <1301403592.8083.11.camel@mini>
References: <4D90B6C2.6020001@cybernet.su> <1301403592.8083.11.camel@mini>
Message-ID: <201104221118.50334.laurent.pinchart@ideasonboard.com>

On Tuesday 29 March 2011 14:59:52 Alexey Fisher wrote:
> Am Montag, den 28.03.2011, 20:26 +0400 schrieb "?????????? ?????
> 
> \"????????\"":
> > Hi.
> > 
> > I'm using zoneminder server to record events from usb uvcvideo web-cams.
> > 
> > 3 same A4tech PK-836MJ works well with 352x288 yuyv streaming if I
> > modify /sys/module/uvcvideo/parameters/quirks to 128.
> > 
> > But I unable to attach more webcams. These cams have no mjpeg. Could
> > anybody help me to apply quirks or recalculate bandwith to use more
> > webcams. As I understood "no space on left device" message depends on
> 
> i assume it mean your hard drive. uvcvideo do not have this kind of
> message.
> 
> > total bandwith utilisation of my usb hub. There is no other root usb 2.0
> > hubs on my motherboard. I'm use 2.6.36-gentoo-r8 kernel. I explore
> > /drivers/media/video/uvc. As I understand, the camera reports that it
> > can much better resolutiont than 640x480x24bit with 30fps. Is it
> > possible to manualy decrease bandwith of these cameras? Or maybe it is
> > possible to patch uvc_video.c?
> 
> can you please send more info about this cam. "lsusb -v" will be good
> start.
> 
> USB 2.0 theoretically can handle 480 Mbit/s. RAW yuyv (depends on
> resolution and frame rate) will  need say: 640x480 at 30fps (16bpp) =
> 140 Mbit/s .  So, theoretically you can use 3,4 cams. DO not forget a
> real usb bandwidth and uvc overhead.

Periodical transfers are limited to 80% of the USB bandwidth, so you're 
limited to 2.74 640x480 @30fps streams (not including UVC and USB overhead).

> If you need more cams, you need reduce resolution and/or frame rate. Not
> all webcams support different frame rates.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Fri Apr 22 11:26:51 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 22 Apr 2011 11:26:51 +0200
Subject: [Linux-uvc-devel] Adding dynamic controls
In-Reply-To: <150802.29942.qm@web65408.mail.ac4.yahoo.com>
References: <150802.29942.qm@web65408.mail.ac4.yahoo.com>
Message-ID: <201104221126.51878.laurent.pinchart@ideasonboard.com>

Hi Paul,

On Thursday 31 March 2011 08:13:07 Paul Jurczak wrote:
> Hello,
> 
> I'm trying to add dynamic controls for a camera with undocumented XUs (Gear
> Head WC1300). lsusb shows presence of XU: VideoControl Interface
> Descriptor:
>         bLength                28
>         bDescriptorType        36
>         bDescriptorSubtype      6 (EXTENSION_UNIT)
>         bUnitID                 4
>         guidExtensionCode         {e3deaebb-c2ec-4d42-802c-72f2eb3dfb57}
>         bNumControl             8
>         bNrPins                 1
>         baSourceID( 0)          1
>         bControlSize            3
>         bmControls( 0)       0x59
>         bmControls( 1)       0x80
>         bmControls( 2)       0x80
>         iExtension              0
> Documentation of camera processor (Vimicro VC0342) indicates availability
> of image processing on/off and 8/10-bit raw controls. My plan is a brute
> force approach to test all possible values of controls.
> 
> I'm having some problems with the API. Adding a control with
> UVCIOC_CTRL_ADD succeeds even with bogus parameters (e.g. wrong GUID).

On recent kernels UVCIOC_CTRL_ADD is a no-op and will always return -EEXIST. 
On older kernels it will succeed regardless of whether your webcam includes an 
XU with the given GUID, as added controls are not specific to a given webcam.

> Mapping it with UVCIOC_CTRL_MAP succeeds too.

Adding a mapping will succeed even if the camera doesn't implement the given 
control. Set the trace parameter to 65535 before adding mappings, the driver 
will print additional information to the kernel log, including whether the UVC 
control identified by the mapping is found in the device.

> Trying VIDIOC_QUERYCTRL or UVCIOC_CTRL_GET fails with EINVAL. Is it normal
> that UVCIOC_CTRL_ADD works fine with random GUID? In addition to 0 return
> value from UVCIOC_CTRL_ADD, trying to add the same control again produces
> EEXIST error, so it seems that it was accepted by the driver.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Fri Apr 22 11:28:00 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 22 Apr 2011 11:28:00 +0200
Subject: [Linux-uvc-devel] Adding dynamic controls
In-Reply-To: <102244.70203.qm@web65409.mail.ac4.yahoo.com>
References: <102244.70203.qm@web65409.mail.ac4.yahoo.com>
Message-ID: <201104221128.00735.laurent.pinchart@ideasonboard.com>

Hi Paul,

On Friday 01 April 2011 00:43:54 Paul Jurczak wrote:
> I did a similar exercise with uvcdynctrl and result is the same. I modified
> logitech.xml file to leave XU_COLOR_PROCESSING_DISABLE selector only. I
> created 8 versions of .xml file with GUID =
> e3deaebb-c2ec-4d42-802c-72f2eb3dfb57, control selector from 1 to 8,
> control id from 0x0A046D81 to 0x0A046D88 and control index from 0 to 7.
> All new control definitions were successfully imported by uvcdynctrl, but
> they don't show up on the list of available controls. Trying to redefine
> any of them returns error 17 (file exists). Trying to access any of them
> with ioctl VIDIOS_G_CTRL returns EINVAL error.
> 
> BTW, looking at XU listing above I noticed that bNumControl = 8, but there
> are only 6 bits set in bmControls (0x59, 0x80, 0x80). Is that UVC compliant?

No it isn't.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Fri Apr 22 11:31:22 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 22 Apr 2011 11:31:22 +0200
Subject: [Linux-uvc-devel] [PATCH] uvcvideo: FIX_BANDWIDTH quirk for
	Hercules Classic Silver
In-Reply-To: <4DA090D3.4060903@udo.edu>
References: <4DA090D3.4060903@udo.edu>
Message-ID: <201104221131.23030.laurent.pinchart@ideasonboard.com>

Hi Andrej,

On Saturday 09 April 2011 19:01:07 Andrej Gelenberg wrote:
> Hi,
> 
> heir a patch, which should fix issues with bandwidth allocation: it make
> possible to use more then 1 camera on the same usb hub.
> 
> You can add it to the list of supported devices:
> 06f8:300c Guillemot Corp.
> Hercules Classic Silver (newer hardware)
> (http://www.hercules.com/de/webcam/bdd/p/22/hercules-classic-silver/)

Thanks for the patch. Could you please send me the output of

lsusb -v -d 06f8:300C

(running as root if possible) ?

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Fri Apr 22 11:33:57 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 22 Apr 2011 11:33:57 +0200
Subject: [Linux-uvc-devel] Microsoft Lifecam cinerma and Autofocus
In-Reply-To: <BANLkTi=Rs1twOMjTn9EL7dEVtFg9S3GWfw@mail.gmail.com>
References: <BANLkTi=D5S7Ymg7WnLFfwJ-NaX2yrdYeag@mail.gmail.com>
	<1302561449.14958.5.camel@hurricane.lounge-warrior.org>
	<BANLkTi=Rs1twOMjTn9EL7dEVtFg9S3GWfw@mail.gmail.com>
Message-ID: <201104221133.57907.laurent.pinchart@ideasonboard.com>

On Tuesday 12 April 2011 01:51:10 Hetz Ben Hamo wrote:
> Thanks for your suggestion.
> 
> However, this solution could be problematic if a user doesn't have the
> webcam connected and only later he connects it.
> 
> What I'm looking for is a solution through udev rules, if possible.

You can create a udev rule that invokes uvcdynctrl (or v4l2-ctl, or yavta, or 
any other such command line V4L2 control tool).

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Fri Apr 22 11:40:25 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 22 Apr 2011 11:40:25 +0200
Subject: [Linux-uvc-devel] Creative VF0700 Live! Cam Chat HD works
	everywhere, except highly distorted video in Skype
In-Reply-To: <AANLkTimJWh6jV95t5-s0gq9JJtHAmPQywMBbbj7TcpkU@mail.gmail.com>
References: <AANLkTinS_D7gDOoqBR9K4s8QNYReNavCnFi-pZh=0jwF@mail.gmail.com>
	<1301304995.22264.18.camel@mini>
	<AANLkTimJWh6jV95t5-s0gq9JJtHAmPQywMBbbj7TcpkU@mail.gmail.com>
Message-ID: <201104221140.25519.laurent.pinchart@ideasonboard.com>

Hi Benson,

On Tuesday 29 March 2011 06:59:38 Benson Bear wrote:
> On Mon, Mar 28, 2011 at 5:36 AM, Alexey Fisher wrote:
> > The reason can be... lost packets by usb controller... or may be camera
> > send only this parts... or hmm...
> 
> You seem to be suggesting some hardware problem or a defect
> with the camera?  This seems very unlikely to me: recall the
> camera seems to works "out of the box" with cheese, camorama,
> xawtv, camstream, guvcview.   Only with skype and in some cases
> with luvcview do I get this distorted pattern, which is the same sort
> of pattern subjectively that I get when I run the gstreamer pipeline
> without the conversion element in it.
> 
> I also have now tested in in Windows 7 and it seems to work
> fine there "out of the box" as well.
> 
> > Can you please attach dmesg with trace, to enable trace you need:
> > sudo rmmod uvcvideo && sudo modprobe uvcvideo trace=0xffff
> 
> Don't know quite what you mean?  dmesg output during
> what?   I attached the dmesg output when the camera is
> plugged in, followed by two runs of luvcview (the
> first two command lines below). I
> 
> Except I edited out huge amounts of these lines
> throughout (which are very suggestive of a format
> mismatch as well):
> 
> "uvcvideo: Dropping payload (out of sync)."
> 
> > Can you please also try different frame rates with yuv.
> 
> Yes, before, per instruction, I used the default.   But I now
> find that lucview gives nice looking results for any frame rate
> above 17.
> 
> In other words,
> 
>  luvcview  -f yuv  -s 320x240  -d /dev/video1 -i 17
> 
> does not work, but
> 
>  luvcview  -f yuv  -s 320x240  -d /dev/video1 -i 18
>  luvcview  -f yuv  -s 320x240  -d /dev/video1 -i 19
> 
> etc all do work.

Have you tried all the frame rates supported by the camera (30, 25, 20, 15, 10 
and 5 fps) ? Do 5, 10 and 15 fail, and 20, 25 and 30 work ?

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Fri Apr 22 11:46:00 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 22 Apr 2011 11:46:00 +0200
Subject: [Linux-uvc-devel] [PATCH] Add support for Creative VF0700 Live!
	Cam Chat HD.
In-Reply-To: <1301399282-6430-1-git-send-email-bug-track@fisher-privat.net>
References: <AANLkTimU6K69Ns2XRvGY+uhJg5Qi32udHuC5dO-uDzmp@mail.gmail.com>
	<1301399282-6430-1-git-send-email-bug-track@fisher-privat.net>
Message-ID: <201104221146.01024.laurent.pinchart@ideasonboard.com>

Hi Alexey,

On Tuesday 29 March 2011 13:48:02 Alexey Fisher wrote:
> The camera requires the UVC_QUIRK_RESTRICT_FRAME_RATE quirk.

According to Benson, the camera seems to work at 30, 25 and 20 fps (I'm 
waiting for confirmation on that). Isn't it a bit restrictive to disable all 
frame rates except 30fps ? Allowing specific frame rates would be more complex 
though, I suppose we can live with 30fps only.

> Reported-by: Benson Bear <benson.bear at gmail.com>
> Signed-off-by: Alexey Fisher <bug-track at fisher-privat.net>
> ---
>  drivers/media/video/uvc/uvc_driver.c |   11 +++++++++++
>  1 files changed, 11 insertions(+), 0 deletions(-)
> 
> diff --git a/drivers/media/video/uvc/uvc_driver.c
> b/drivers/media/video/uvc/uvc_driver.c index 0baa464..f8a1579 100644
> --- a/drivers/media/video/uvc/uvc_driver.c
> +++ b/drivers/media/video/uvc/uvc_driver.c
> @@ -1970,6 +1970,17 @@ MODULE_PARM_DESC(timeout, "Streaming control
> requests timeout"); * though they are compliant.
>   */
>  static struct usb_device_id uvc_ids[] = {
> +	/* Creative VF0700 Live! Cam Chat HD.
> +	 * Produce more frames als commited,
> +	 * so it partially overwrite buffer with new frame */
> +	{ .match_flags		= USB_DEVICE_ID_MATCH_DEVICE
> +				| USB_DEVICE_ID_MATCH_INT_INFO,
> +	  .idVendor		= 0x041e,
> +	  .idProduct		= 0x4088,
> +	  .bInterfaceClass	= USB_CLASS_VIDEO,
> +	  .bInterfaceSubClass	= 1,
> +	  .bInterfaceProtocol	= 0,
> +	  .driver_info		= UVC_QUIRK_RESTRICT_FRAME_RATE },
>  	/* Genius eFace 2025 */
>  	{ .match_flags		= USB_DEVICE_ID_MATCH_DEVICE
> 
>  				| USB_DEVICE_ID_MATCH_INT_INFO,

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Fri Apr 22 11:47:32 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 22 Apr 2011 11:47:32 +0200
Subject: [Linux-uvc-devel] [patch] gather compression statistic for
	MJPEG (and other formats)
In-Reply-To: <1302767632.9638.1.camel@zwerg>
References: <1302722686.23854.70.camel@zwerg> <1302767632.9638.1.camel@zwerg>
Message-ID: <201104221147.32723.laurent.pinchart@ideasonboard.com>

Hi Alexey,

On Thursday 14 April 2011 09:53:52 Alexey Fisher wrote:
> Here is updated patch against newest git master tree.
> 
> On Mi, 2011-04-13 at 21:24 +0200, Alexey Fisher wrote:
> > This is patch catch the biggest frame size and calculate compression
> > ratio.
> > 
> > Usage:
> > modprobe statistic=1
> > 
> > start capture some thing. The best possability to catch biggest frame is
> > to record lots of moving text. Point your camera to monitore and open
> > terminal with dmesg or some thing :D
> > 
> > After stop, result will be in dmesg.
> > 
> > Testers are welcome.

Thanks for the patch. What do you use it for ?

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Fri Apr 22 11:49:01 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 22 Apr 2011 11:49:01 +0200
Subject: [Linux-uvc-devel] webcam issue: id codes changed (?)
In-Reply-To: <BANLkTi=aJDrBRn--Hw0cxmXPwGRNnfcS_A@mail.gmail.com>
References: <BANLkTi=aJDrBRn--Hw0cxmXPwGRNnfcS_A@mail.gmail.com>
Message-ID: <201104221149.01512.laurent.pinchart@ideasonboard.com>

Hi Paolo,

On Thursday 14 April 2011 12:09:21 Paolo Casaschi wrote:
> hello. I have an issue with a netbook webcam that used to work
> perfectly with uvcvideo on debian squeeze.
> 
> suddenly, the webcam is not working anymore. the webcam is recognized,
> the device is created in /dev but no video is received.
> 
> lsusb identifies the webcam as
> 
> Bus 001 Device 003: ID 0402:5606 ALi Corp. M5606 Video CameraController
> [UVC]
> 
> issue is that, if I remember correctly, the webcam used to be
> identified with differnt codes, going by memory lsusb used to report
> it as "Acer something" with different id numbers.
> I havent changed any driver/firmware/BIOS or anything like that recently.
> 
> Any advise how to try getting the webcam back to work?
> 
> So far I tried resetting the system controller of the netbook (an MSI
> WIND U100) and repeadetly switching the webcam on/off (the hardware
> key Fn-F6 to toggle the webcam still works, I can see the webcam in
> and out in lsusb).
> 
> Any advise before assuming some kind of hardware failure?

Could you please post the output of

lsusb -v -d 0402:5606

(running as root if possible) ?

-- 
Regards,

Laurent Pinchart


From bug-track at fisher-privat.net  Fri Apr 22 11:51:19 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Fri, 22 Apr 2011 11:51:19 +0200
Subject: [Linux-uvc-devel] [PATCH] Add support for Creative VF0700 Live!
	Cam Chat HD.
In-Reply-To: <201104221146.01024.laurent.pinchart@ideasonboard.com>
References: <AANLkTimU6K69Ns2XRvGY+uhJg5Qi32udHuC5dO-uDzmp@mail.gmail.com>
	<1301399282-6430-1-git-send-email-bug-track@fisher-privat.net>
	<201104221146.01024.laurent.pinchart@ideasonboard.com>
Message-ID: <1303465879.4552.6.camel@zwerg>

On Fr, 2011-04-22 at 11:46 +0200, Laurent Pinchart wrote:
> Hi Alexey,
> 
> On Tuesday 29 March 2011 13:48:02 Alexey Fisher wrote:
> > The camera requires the UVC_QUIRK_RESTRICT_FRAME_RATE quirk.
> 
> According to Benson, the camera seems to work at 30, 25 and 20 fps (I'm 
> waiting for confirmation on that). Isn't it a bit restrictive to disable all 
> frame rates except 30fps ? Allowing specific frame rates would be more complex 
> though, I suppose we can live with 30fps only.

I assume this cam is in aperture priority mode and send frames according
the light. So if we will trigger this bug, he need to try 20-30 fps with
max light. Say with flashlight pointing to the cam.

> > Reported-by: Benson Bear <benson.bear at gmail.com>
> > Signed-off-by: Alexey Fisher <bug-track at fisher-privat.net>
> > ---
> >  drivers/media/video/uvc/uvc_driver.c |   11 +++++++++++
> >  1 files changed, 11 insertions(+), 0 deletions(-)
> > 
> > diff --git a/drivers/media/video/uvc/uvc_driver.c
> > b/drivers/media/video/uvc/uvc_driver.c index 0baa464..f8a1579 100644
> > --- a/drivers/media/video/uvc/uvc_driver.c
> > +++ b/drivers/media/video/uvc/uvc_driver.c
> > @@ -1970,6 +1970,17 @@ MODULE_PARM_DESC(timeout, "Streaming control
> > requests timeout"); * though they are compliant.
> >   */
> >  static struct usb_device_id uvc_ids[] = {
> > +	/* Creative VF0700 Live! Cam Chat HD.
> > +	 * Produce more frames als commited,
> > +	 * so it partially overwrite buffer with new frame */
> > +	{ .match_flags		= USB_DEVICE_ID_MATCH_DEVICE
> > +				| USB_DEVICE_ID_MATCH_INT_INFO,
> > +	  .idVendor		= 0x041e,
> > +	  .idProduct		= 0x4088,
> > +	  .bInterfaceClass	= USB_CLASS_VIDEO,
> > +	  .bInterfaceSubClass	= 1,
> > +	  .bInterfaceProtocol	= 0,
> > +	  .driver_info		= UVC_QUIRK_RESTRICT_FRAME_RATE },
> >  	/* Genius eFace 2025 */
> >  	{ .match_flags		= USB_DEVICE_ID_MATCH_DEVICE
> > 
> >  				| USB_DEVICE_ID_MATCH_INT_INFO,
> 

-- 
Regards,
        Alexey



From bug-track at fisher-privat.net  Fri Apr 22 11:55:55 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Fri, 22 Apr 2011 11:55:55 +0200
Subject: [Linux-uvc-devel] [patch] gather compression statistic for
 MJPEG (and other formats)
In-Reply-To: <201104221147.32723.laurent.pinchart@ideasonboard.com>
References: <1302722686.23854.70.camel@zwerg> <1302767632.9638.1.camel@zwerg>
	<201104221147.32723.laurent.pinchart@ideasonboard.com>
Message-ID: <1303466155.4552.9.camel@zwerg>

On Fr, 2011-04-22 at 11:47 +0200, Laurent Pinchart wrote:
> Hi Alexey,
> 
> On Thursday 14 April 2011 09:53:52 Alexey Fisher wrote:
> > Here is updated patch against newest git master tree.
> > 
> > On Mi, 2011-04-13 at 21:24 +0200, Alexey Fisher wrote:
> > > This is patch catch the biggest frame size and calculate compression
> > > ratio.
> > > 
> > > Usage:
> > > modprobe statistic=1
> > > 
> > > start capture some thing. The best possability to catch biggest frame is
> > > to record lots of moving text. Point your camera to monitore and open
> > > terminal with dmesg or some thing :D
> > > 
> > > After stop, result will be in dmesg.
> > > 
> > > Testers are welcome.
> 
> Thanks for the patch. What do you use it for ?

For user who like to play with compressed stream. But i send already a
revoked version of it. I attach it again.

It add option for recalculating bandwidth.

-- 
Regards,
        Alexey
-------------- next part --------------
A non-text attachment was scrubbed...
Name: uvc_stat_jpeg_v4.diff
Type: text/x-patch
Size: 7245 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110422/5ec21b8f/attachment.bin>

From laurent.pinchart at ideasonboard.com  Fri Apr 22 11:56:13 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 22 Apr 2011 11:56:13 +0200
Subject: [Linux-uvc-devel] Fixing bandwidth quirk ***just inquire
In-Reply-To: <1302889418.12477.21.camel@zwerg>
References: <loom.20110310T202522-717@post.gmane.org>
	<AANLkTikzqv1N-9PJ-Mb1SXgEBeGiQ0q-cLZfNcVpdvDG@mail.gmail.com>
	<1302889418.12477.21.camel@zwerg>
Message-ID: <201104221156.13328.laurent.pinchart@ideasonboard.com>

Hi Alexey,

On Friday 15 April 2011 19:43:38 Alexey Fisher wrote:
> There is new patch. With this patch you can recalculate bandwith for
> jpeg stream. See my post in list and try it:
> [patch] jpeg compression hacks. Tester are welcome!!!

Now I understand what your patch is for :-)

One issue that you forgot to take into account is that, in addition to average 
bandwidth requirements, cameras also have peak bandwidth requirements. At low 
frame rates, an image could be transmitted with a lower bandwidth, but that 
would require buffering capabilities on the camera side to store the image and 
transmit it over a longer period of time. Most cameras have very little buffer 
memory, and thus require a high bandwidth even at low frame rates. Depending 
on the hardware MJPEG encoder, the average bandwidth for a frame will not 
match the peak bandwidth requirements.

-- 
Regards,

Laurent Pinchart


From paolo at casaschi.net  Fri Apr 22 11:57:08 2011
From: paolo at casaschi.net (Paolo Casaschi)
Date: Fri, 22 Apr 2011 10:57:08 +0100
Subject: [Linux-uvc-devel] webcam issue: id codes changed (?)
In-Reply-To: <201104221149.01512.laurent.pinchart@ideasonboard.com>
References: <BANLkTi=aJDrBRn--Hw0cxmXPwGRNnfcS_A@mail.gmail.com>
	<201104221149.01512.laurent.pinchart@ideasonboard.com>
Message-ID: <BANLkTikN6T6bBYt_C6G0fUr6CPW4EgrP8Q@mail.gmail.com>

>
> Could you please post the output of
>
> lsusb -v -d 0402:5606
>
> (running as root if possible) ?

# lsusb -v -d 0402:5606

Bus 001 Device 003: ID 0402:5606 ALi Corp. M5606 Video Camera Controller [UVC]
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass          239 Miscellaneous Device
  bDeviceSubClass         2 ?
  bDeviceProtocol         1 Interface Association
  bMaxPacketSize0        64
  idVendor           0x0402 ALi Corp.
  idProduct          0x5606 M5606 Video Camera Controller [UVC]
  bcdDevice            1.00
  iManufacturer           0
  iProduct                1 USB2.0 Camera
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          704
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Association:
      bLength                 8
      bDescriptorType        11
      bFirstInterface         0
      bInterfaceCount         2
      bFunctionClass         14 Video
      bFunctionSubClass       3 Video Interface Collection
      bFunctionProtocol       0
      iFunction               1 USB2.0 Camera
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      1 Video Control
      bInterfaceProtocol      0
      iInterface              1 USB2.0 Camera
      VideoControl Interface Descriptor:
        bLength                13
        bDescriptorType        36
        bDescriptorSubtype      1 (HEADER)
        bcdUVC               1.00
        wTotalLength           84
        dwClockFrequency       30.000000MHz
        bInCollection           1
        baInterfaceNr( 0)       1
      VideoControl Interface Descriptor:
        bLength                17
        bDescriptorType        36
        bDescriptorSubtype      2 (INPUT_TERMINAL)
        bTerminalID             1
        wTerminalType      0x0201 Camera Sensor
        bAssocTerminal          0
        iTerminal               0
        wObjectiveFocalLengthMin      0
        wObjectiveFocalLengthMax      0
        wOcularFocalLength            0
        bControlSize                  2
        bmControls           0x00000a0e
          Auto-Exposure Mode
          Auto-Exposure Priority
          Exposure Time (Absolute)
          Zoom (Absolute)
          PanTilt (Absolute)
      VideoControl Interface Descriptor:
        bLength                 9
        bDescriptorType        36
        bDescriptorSubtype      3 (OUTPUT_TERMINAL)
        bTerminalID             3
        wTerminalType      0x0101 USB Streaming
        bAssocTerminal          0
        bSourceID               6
        iTerminal               0
      VideoControl Interface Descriptor:
        bLength                 7
        bDescriptorType        36
        bDescriptorSubtype      4 (SELECTOR_UNIT)
        bUnitID                 4
        bNrInPins               1
        baSource( 0)            1
        iSelector               0
      VideoControl Interface Descriptor:
        bLength                11
        bDescriptorType        36
        bDescriptorSubtype      5 (PROCESSING_UNIT)
      Warning: Descriptor too short
        bUnitID                 5
        bSourceID               4
        wMaxMultiplier          0
        bControlSize            2
        bmControls     0x0000157f
          Brightness
          Contrast
          Hue
          Saturation
          Sharpness
          Gamma
          White Balance Temperature
          Backlight Compensation
          Power Line Frequency
          White Balance Temperature, Auto
        iProcessing             0
        bmVideoStandards     0x1b
          None
          NTSC - 525/60
          SECAM - 625/50
          NTSC - 625/50
      VideoControl Interface Descriptor:
        bLength                27
        bDescriptorType        36
        bDescriptorSubtype      6 (EXTENSION_UNIT)
        bUnitID                 6
        guidExtensionCode         {564c97a7-7ea7-904b-8cbf-1c71ec303000}
        bNumControl            16
        bNrPins                 1
        baSourceID( 0)          5
        bControlSize            2
        bmControls( 0)       0xff
        bmControls( 1)       0xff
        iExtension              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval              15
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      VideoStreaming Interface Descriptor:
        bLength                            15
        bDescriptorType                    36
        bDescriptorSubtype                  1 (INPUT_HEADER)
        bNumFormats                         2
        wTotalLength                      557
        bEndPointAddress                  129
        bmInfo                              0
        bTerminalLink                       3
        bStillCaptureMethod                 2
        bTriggerSupport                     1
        bTriggerUsage                       1
        bControlSize                        1
        bmaControls( 0)                    11
        bmaControls( 1)                    11
      VideoStreaming Interface Descriptor:
        bLength                            11
        bDescriptorType                    36
        bDescriptorSubtype                  6 (FORMAT_MJPEG)
        bFormatIndex                        1
        bNumFrameDescriptors                6
        bFlags                              1
          Fixed-size samples: Yes
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         1
        bmCapabilities                   0x01
          Still image supported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      921600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         2
        bmCapabilities                   0x01
          Still image supported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      230400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         3
        bmCapabilities                   0x01
          Still image supported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize       57600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         4
        bmCapabilities                   0x01
          Still image supported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      304128
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         5
        bmCapabilities                   0x01
          Still image supported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize       76032
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            34
        bDescriptorType                    36
        bDescriptorSubtype                  7 (FRAME_MJPEG)
        bFrameIndex                         6
        bmCapabilities                   0x01
          Still image supported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize     3932160
        dwDefaultFrameInterval         666666
        bFrameIntervalType                  2
        dwFrameInterval( 0)            666666
        dwFrameInterval( 1)           1428571
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               6
        wWidth( 0)                        640
        wHeight( 0)                       480
        wWidth( 1)                        320
        wHeight( 1)                       240
        wWidth( 2)                        160
        wHeight( 2)                       120
        wWidth( 3)                        352
        wHeight( 3)                       288
        wWidth( 4)                        176
        wHeight( 4)                       144
        wWidth( 5)                       1280
        wHeight( 5)                      1024
        bNumCompressionPatterns             6
      VideoStreaming Interface Descriptor:
        bLength                            27
        bDescriptorType                    36
        bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
        bFormatIndex                        2
        bNumFrameDescriptors                6
        guidFormat
{59555932-0000-1000-8000-00aa00389b71}
        bBitsPerPixel                      16
        bDefaultFrameIndex                  1
        bAspectRatioX                       0
        bAspectRatioY                       0
        bmInterlaceFlags                 0x00
          Interlaced stream or variable: No
          Fields per frame: 1 fields
          Field 1 first: No
          Field pattern: Field 1 only
          bCopyProtect                      0
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         1
        bmCapabilities                   0x01
          Still image supported
        wWidth                            640
        wHeight                           480
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      614400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         2
        bmCapabilities                   0x01
          Still image supported
        wWidth                            320
        wHeight                           240
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      230400
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         3
        bmCapabilities                   0x01
          Still image supported
        wWidth                            160
        wHeight                           120
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize       57600
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         4
        bmCapabilities                   0x01
          Still image supported
        wWidth                            352
        wHeight                           288
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize      304128
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            38
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         5
        bmCapabilities                   0x01
          Still image supported
        wWidth                            176
        wHeight                           144
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize       76032
        dwDefaultFrameInterval         333333
        bFrameIntervalType                  3
        dwFrameInterval( 0)            333333
        dwFrameInterval( 1)            666666
        dwFrameInterval( 2)           1000000
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
        bFrameIndex                         6
        bmCapabilities                   0x01
          Still image supported
        wWidth                           1280
        wHeight                          1024
        dwMinBitRate                   912384
        dwMaxBitRate                   912384
        dwMaxVideoFrameBufferSize     3932160
        dwDefaultFrameInterval        1428571
        bFrameIntervalType                  1
        dwFrameInterval( 0)           1428571
      VideoStreaming Interface Descriptor:
        bLength                            30
        bDescriptorType                    36
        bDescriptorSubtype                  3 (STILL_IMAGE_FRAME)
        bEndpointAddress                    0
        bNumImageSizePatterns               6
        wWidth( 0)                        640
        wHeight( 0)                       480
        wWidth( 1)                        320
        wHeight( 1)                       240
        wWidth( 2)                        160
        wHeight( 2)                       120
        wWidth( 3)                        352
        wHeight( 3)                       288
        wWidth( 4)                        176
        wHeight( 4)                       144
        wWidth( 5)                       1280
        wHeight( 5)                      1024
        bNumCompressionPatterns             6
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           1
      bInterfaceClass        14 Video
      bInterfaceSubClass      2 Video Streaming
      bInterfaceProtocol      0
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            5
          Transfer Type            Isochronous
          Synch Type               Asynchronous
          Usage Type               Data
        wMaxPacketSize     0x1400  3x 1024 bytes
        bInterval               1
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)


From bug-track at fisher-privat.net  Fri Apr 22 12:06:42 2011
From: bug-track at fisher-privat.net (Alexey Fisher)
Date: Fri, 22 Apr 2011 12:06:42 +0200
Subject: [Linux-uvc-devel] [patch] jpeg compression hacks. Tester are
 welcome!!!
In-Reply-To: <1302889186.12477.18.camel@zwerg>
References: <1302889186.12477.18.camel@zwerg>
Message-ID: <1303466802.4552.15.camel@zwerg>


> On Fr, 2011-04-15 at 19:39 +0200, Alexey Fisher wrote: 
> > Hallo all,
> > 
> > here is patch (against current master git) to add two new quirks and
> > some more debug string to see what happening :D 
> > 
> > The quirks are:
> > UVC_QUIRK_FIX_JPEG_BANDWIDTH   0x00000040
> > /* to recalculate bandwidth needed for jpeg compressed stream */
> > UVC_QUIRK_DISABLE_URB_1024     0x00000400
> > /* by default we use safe bandwith restriction, to less than 1024 *
> >  * this quirk disables this restriction. So if you need URB less than 
> >  * 1024, use this quirk. It will work only with FIX*BANDWIDTH quirk. */
> > 
> > Also i added module option "jpeg_comp" to change calculation for
> > bandwith. Default is 4bpp, 1 is maximal compression, 16bpp is no
> > compression, just normal raw stream.
> > 
> > This patch also gather statistic about used buffers. It will report
> > biggest used buffer. You will need it to calculate best value for
> > jpeg_comp option.
> > 
> > Usage. Recalculate bandwidth for jpeg and disable 1024 restriction:
> > sudo rmmod uvcvideo && sudo modprobe quirks=0x440
> > 
> > reduce calculated bandwith to minimum:
> > sudo rmmod uvcvideo && sudo modprobe quirks=0x440 jpeg_comp=1
> > 
> > for more info enable trace=0xffff and seek for messages like:
> > ...
> > [25495.869580] uvcvideo: Device requested 703 B/frame bandwidth.
> > [25495.869583] uvcvideo: Selecting alternate setting 5 (800 B/frame
> > bandwidth).
> > [25495.869758] uvcvideo: Allocated 5 URB buffers of 32x800 bytes each.
> > ...
> > [25501.959475] uvcvideo: Biggest used buffer: 1382400/106438. Format:
> > MJPEG 960x720 at 15.
> > 

Lets continue the conversation hier :D it is the proper place for it.

> Hi Alexey,
> 
> On Friday 15 April 2011 19:43:38 Alexey Fisher wrote:
> > There is new patch. With this patch you can recalculate bandwith for
> > jpeg stream. See my post in list and try it:
> > [patch] jpeg compression hacks. Tester are welcome!!!
> 
> Now I understand what your patch is for :-)
> 
> One issue that you forgot to take into account is that, in addition to
> average 
> bandwidth requirements, cameras also have peak bandwidth requirements.
> At low 
> frame rates, an image could be transmitted with a lower bandwidth, but
> that 
> would require buffering capabilities on the camera side to store the
> image and 
> transmit it over a longer period of time. Most cameras have very
> little buffer 
> memory, and thus require a high bandwidth even at low frame rates.
> Depending 
> on the hardware MJPEG encoder, the average bandwidth for a frame will
> not 
> match the peak bandwidth requirements.

I thick you mean this part of code:

-               bandwidth = max_t(u32, bandwidth, 1024);
+               if(!(stream->dev->quirks & UVC_QUIRK_DISABLE_URB_1024))
+                       bandwidth = max_t(u32, bandwidth, 1024);

but i did it optional. User who has good cam can try to use unsafe
option. May be i need to mark it "highly dangerous, use on your own
risk!!!" :)
-- 
Regards,
        Alexey



From ben at cardinalpeak.com  Sat Apr 23 00:13:27 2011
From: ben at cardinalpeak.com (Ben Mesander)
Date: Fri, 22 Apr 2011 15:13:27 -0700 (PDT)
Subject: [Linux-uvc-devel] Input/Output error setting V4L2_CID_EXPOSURE_AUTO
	values
Message-ID: <920349.12053.qm@web161304.mail.bf1.yahoo.com>

Hi,

I'm porting an application which uses the uvc video driver for a logitech webcam 
from Ubuntu 8.04 LTS to Ubuntu 10.04 LTS.

In the 8.04 release, there was some mismatch in the UVC driver from the V4L2 
driver for a few of the ioctl values. The V4L2 headers had:

#define V4L2_CID_EXPOSURE_AUTO (V4L2_CID_CAMERA_CLASS_BASE+1)
#define V4L2_CID_EXPOSURE_ABSOLUTE (V4L2_CID_CAMERA_CLASS_BASE+2)
#define V4L2_CID_EXPOSURE_AUTO_PRIORITY (V4L2_CID_CAMERA_CLASS_BASE+3)

But the uvcvideo driver expected:

#define V4L2_CID_EXPOSURE_AUTO (V4L2_CID_PRIVATE_BASE+10)
#define V4L2_CID_EXPOSURE_ABSOLUTE (V4L2_CID_PRIVATE_BASE + 11)
#define V4L2_CID_EXPOSURE_AUTO_PRIORITY (V4L2_CID_PRIVATE_BASE+14)

I found these values in the private header files that came with the luvcview 
software, and similar defines in the logitech libwebcam source, which also had a 
comment "Old uvcvideo pre-r178 control IDs"
See 
here: http://svn.quickcamteam.net/svn/qct/webcam-tools/trunk/libwebcam/compat.h

My desired camera behavior is to allow the camera to control aperture as 
necessary to handle lighting conditions, but my application must run at a fixed 
frame rate (30fps, set elsewhere), so it must not change the frame rate. By 
experimenting & reading sources mentioned above, I finally found that if I did:

request.id = (V4L2_CID_PRIVATE_BASE+10);
request.value = 8;
if (ioctl(fd, VIDIOC_S_CTRL, &request) < 0) {
...
}

request.id = (V4L2_CID_PRIVATE_BASE+14);
request.value = 0;
if (ioctl(fd, VIDIOC_S_CTRL, &request) < 0 {
...
}

I achieved the desired effect. Note that 8 is not defined in 
v4l2_exposure_auto_type, but I'm not the only person who's used it, 
see http://forums.quickcamteam.net/showthread.php?tid=1227 for an example of 
where it seems to mean aperture priority.

OK, fine, but under Ubuntu 10.04, the ioctls above return EINVAL. So I figured 
it was time to use the correct request values in the requests. So I tried:

request.id = V4L2_CID_EXPOSURE_AUTO;
request.value = V4L2_EXPOSURE_APERTURE_PRIORITY;
if (ioctl(fd, VIDIOC_S_CTRL, &request) < 0) {
... I end up here with "Input / Output Error" errno ...
}

request.id = V4L2_CID_EXPOSURE_AUTO_PRIORITY;
request.value = 0;
if (ioctl(fd, VIDIOC_S_CTRL, &request) < 0 {
...
}

No luck - initially I thought it worked, but after trying in a darkened room and 
bright sunlight and rebooting to clear out the current values in the driver, I 
see that it is no longer adapting to the lighting conditions, although it does 
seem to be correctly pinned to the framerate I set. Also, the 
V4L2_CID_EXPOSURE_AUTO ioctl() always returns "I/O error" - I have tried various 
values for the request.value - 0, 1, 3, 8, etc. without any success.

I see other people have reported similar issues in the past, but I see no 
resolution, for 
example: http://lists.berlios.de/pipermail/linux-uvc-devel/2008-March/003251.html -
 for example in that thread this is mentioned:
enum  v4l2_exposure_auto_type {         V4L2_EXPOSURE_MANUAL = 0,         
V4L2_EXPOSURE_AUTO = 1,         V4L2_EXPOSURE_SHUTTER_PRIORITY = 2,         
V4L2_EXPOSURE_APERTURE_PRIORITY = 3 };
But in my V4L2 headers, MANUAL = 1, and AUTO = 0.
I also tried the VIDIOC_S_EXT_CTRLS flavor of setting the exposure values, but 
no luck - same I/O error.
Any idea on how I can set V4L2_CID_EXPOSURE_AUTO on uvcvideo driver in Ubuntu 
10.04 LTS without getting an Input/Output error?
Thanks,
Ben
 
Ben Mesander
   (303) 570-1606      | Email | vCard | Web | Company Blog | LinkedIn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110422/d49062e4/attachment.html>

From mrmajhor at gmail.com  Sat Apr 23 20:45:14 2011
From: mrmajhor at gmail.com (Mark Majhor)
Date: Sat, 23 Apr 2011 11:45:14 -0700
Subject: [Linux-uvc-devel] lsusb listing for Creative Live Cam (which isn't
 in the uvcvideo devices list)
Message-ID: <BANLkTi=ghXeD1XD6SLy3QGp-cBuoZ7tcnA@mail.gmail.com>

Bus 002 Device 045: ID 041e:4045 Creative Technology, Ltd Live! Cam Voice
Bus 002 Device 044: ID 041e:4048 Creative Technology, Ltd
Bus 002 Device 043: ID 041e:404b Creative Technology, Ltd

Hope this helps get this supported

Thanks
A loyal user
Mark
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110423/d314efd9/attachment.html>

From laurent.pinchart at ideasonboard.com  Sun Apr 24 13:13:36 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Sun, 24 Apr 2011 13:13:36 +0200
Subject: [Linux-uvc-devel] Motorola ROKR E6 'webcam' and resolution
	issues
In-Reply-To: <BANLkTimzs2uuq25+UCZoq7tTZP5MvnVvUw@mail.gmail.com>
References: <op.u76jtsfohdzqqm@asus.lan>
	<201003171750.17507.laurent.pinchart@ideasonboard.com>
	<BANLkTimzs2uuq25+UCZoq7tTZP5MvnVvUw@mail.gmail.com>
Message-ID: <201104241313.36870.laurent.pinchart@ideasonboard.com>

Hi Felix,

On Friday 15 April 2011 06:04:23 Felix Shao wrote:
> On Thu, Mar 18, 2010 at 12:50 AM, Laurent Pinchart wrote:
> > On Wednesday 10 March 2010 22:27:20 Micha? G?rny wrote:
> > > On Thu, 4 Mar 2010 11:31:55 +0100 Laurent Pinchart wrote:
> > > > I don't have much experience with Windows, so I can't advice for a
> > > > test application that would allow you to configure the resolution.
> > > > I've heard that amcap is often used for testing, maybe you could give
> > > > it a try.
> > > 
> > > amcap wasn't much of help but I've tested several applications and all
> > > provided resolutions seem to work on Windows. And I'm especially sure
> > > that 160x120 works fine (which seems to be the preferred one with most
> > > of the software).
> > > 
> > > What should I do now?
> > 
> > The next step would be to use a software USB sniffer on Windows to capture
> > the device initialization sequence in Windows, and compare that to what's
> > done by the uvcvideo driver.
> 
> Hi, Is anybody still interesting on this?

Not that I know of.

> I am using the same device and have same issue. Also have the similar ugly
> workaround of software scaling...
> 
> I can test with software USB sniffer both on Windows and Linux, please give
> me a name of such software.

SniffUSB (http://www.pcausa.com/Utilities/UsbSnoop/) is the newest free USB 
analyzer for Windows that I know of. It doesn't support Windows Vista or 
Windows 7 though.

> But I hardly have USB knowledge, so I need send out sniffer result to
> someone can understand it.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Sun Apr 24 13:15:16 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Sun, 24 Apr 2011 13:15:16 +0200
Subject: [Linux-uvc-devel] Driver webcam ID 1b3b:2937
In-Reply-To: <loom.20110417T030419-501@post.gmane.org>
References: <56cbd4381001220005p6c54ad3fm67ca3fc11171792c@mail.gmail.com>
	<201001231408.47881.laurent.pinchart@ideasonboard.com>
	<loom.20110417T030419-501@post.gmane.org>
Message-ID: <201104241315.17261.laurent.pinchart@ideasonboard.com>

Hi,

On Sunday 17 April 2011 03:26:49 Emerson Esteves wrote:
> 
> I have a webcam like, see:
> 
> Bus 003 Device 002: ID 1b3b:2936 iPassion Technology Inc. PC Camera/WebCam
> controller
> 
> and details about the webcam:
> 
> ubuntu at ubuntu:$ sudo lsusb -v -d 1b3b:2936
> 
> Bus 003 Device 002: ID 1b3b:2936 iPassion Technology Inc. PC Camera/WebCam
> controller
> Device Descriptor:
>   bLength                18
>   bDescriptorType         1
>   bcdUSB               1.10
>   bDeviceClass            0 (Defined at Interface level)
>   bDeviceSubClass         0
>   bDeviceProtocol         0
>   bMaxPacketSize0         8
>   idVendor           0x1b3b iPassion Technology Inc.
>   idProduct          0x2936 PC Camera/WebCam controller
>   bcdDevice            1.00
>   iManufacturer           0
>   iProduct                0
>   iSerial                 0
>   bNumConfigurations      1
>   Configuration Descriptor:
>     bLength                 9
>     bDescriptorType         2
>     wTotalLength          170
>     bNumInterfaces          1
>     bConfigurationValue     1
>     iConfiguration          0
>     bmAttributes         0x80
>       (Bus Powered)
>     MaxPower              500mA
>     Interface Descriptor:
>       bLength                 9
>       bDescriptorType         4
>       bInterfaceNumber        0
>       bAlternateSetting       0
>       bNumEndpoints           2
>       bInterfaceClass       255 Vendor Specific Class
>       bInterfaceSubClass      0
>       bInterfaceProtocol    255
>       iInterface              0
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x81  EP 1 IN
>         bmAttributes            1
>           Transfer Type            Isochronous
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0000  1x 0 bytes
>         bInterval               1
>       Endpoint Descriptor:
>         bLength                 7
>         bDescriptorType         5
>         bEndpointAddress     0x03  EP 3 OUT
>         bmAttributes            2
>           Transfer Type            Bulk
>           Synch Type               None
>           Usage Type               Data
>         wMaxPacketSize     0x0020  1x 32 bytes
>         bInterval               0

[snip]

> but does not show the "14 Video" (from
> http://www.ideasonboard.org/uvc/faq/)
> 
> ubuntu at ubuntu:$ sudo lsusb -d 1b3b:2936 -v | grep "14 Video"
> ubuntu at ubuntu:$
> 
> /dev/video* was not even created by running "modprobe uvcvideo"
> 
> it's compatible with uvc driver?

No, the camera isn't UVC compatible.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Sun Apr 24 14:44:18 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Sun, 24 Apr 2011 14:44:18 +0200
Subject: [Linux-uvc-devel] webcam issue: id codes changed (?)
In-Reply-To: <BANLkTikN6T6bBYt_C6G0fUr6CPW4EgrP8Q@mail.gmail.com>
References: <BANLkTi=aJDrBRn--Hw0cxmXPwGRNnfcS_A@mail.gmail.com>
	<201104221149.01512.laurent.pinchart@ideasonboard.com>
	<BANLkTikN6T6bBYt_C6G0fUr6CPW4EgrP8Q@mail.gmail.com>
Message-ID: <201104241444.18779.laurent.pinchart@ideasonboard.com>

Hi Paolo,

On Friday 22 April 2011 11:57:08 Paolo Casaschi wrote:
> > Could you please post the output of
> > 
> > lsusb -v -d 0402:5606
> > 
> > (running as root if possible) ?
> 
> # lsusb -v -d 0402:5606

[snip]

Thank you. The descriptors look correct. Could you please describe your 
problem in more details ? What does "no video is received" mean exactly ? Does 
the uvcvideo driver print any message to the kernel log when the problem 
occurs ?

-- 
Regards,

Laurent Pinchart


From paolo at casaschi.net  Sun Apr 24 15:07:59 2011
From: paolo at casaschi.net (Paolo Casaschi)
Date: Sun, 24 Apr 2011 14:07:59 +0100
Subject: [Linux-uvc-devel] webcam issue: id codes changed (?)
In-Reply-To: <201104241444.18779.laurent.pinchart@ideasonboard.com>
References: <BANLkTi=aJDrBRn--Hw0cxmXPwGRNnfcS_A@mail.gmail.com>
	<201104221149.01512.laurent.pinchart@ideasonboard.com>
	<BANLkTikN6T6bBYt_C6G0fUr6CPW4EgrP8Q@mail.gmail.com>
	<201104241444.18779.laurent.pinchart@ideasonboard.com>
Message-ID: <BANLkTinm2poWpO1O6gSYPY-4f_uO9isktA@mail.gmail.com>

Thanks for looking into this.

> Thank you. The descriptors look correct. Could you please describe your
> problem in more details ?

When I start cheese (with the webcam enabled with the Fn-F6 hardware
key), I used to get the video from the webcam automatically after few
seconds. Now the part of the cheese screen that should contain the
video remains black.

Also the small led next to the netbook webcam remains off (it used to
light up showing the webcam was recording video).

Cheese's screen remains blank but still cheese thinks there is a
webcam available (while if I start cheese with the webcam disabled
with the Fn-F6 hardware key, then cheese reports no webcam available,
correctly).

When the webcam is switched on with the hardware key Fn-F6, cheese
preferences dialog shows a webcanm device "USB2.0 Camera
(/dev/video0)".

These are the attributes of the device:

# ls -l /dev/video0
crw-rw----+ 1 root video 81, 0 Apr 24 13:52 /dev/video0

The user trying cheese is part of the video group.

> What does "no video is received" mean exactly ?

The portion of the cheese screen that used to show the webcam video
remains black.

> Does the uvcvideo driver print any message to the kernel log when the problem
> occurs ?

This is the kernel.log when I switch the webcam on with the Fn-F6 hardware key:

Apr 24 13:52:34 paolo-lapfour kernel: [44231.237147] usb 1-5: new high
speed USB device using ehci_hcd and address 3
Apr 24 13:52:35 paolo-lapfour kernel: [44231.614504] usb 1-5: New USB
device found, idVendor=0402, idProduct=5606
Apr 24 13:52:35 paolo-lapfour kernel: [44231.614522] usb 1-5: New USB
device strings: Mfr=0, Product=1, SerialNumber=0
Apr 24 13:52:35 paolo-lapfour kernel: [44231.614535] usb 1-5: Product:
USB2.0 Camera
Apr 24 13:52:35 paolo-lapfour kernel: [44231.614896] usb 1-5:
configuration #1 chosen from 1 choice
Apr 24 13:52:35 paolo-lapfour kernel: [44231.724227] Linux video
capture interface: v2.00
Apr 24 13:52:35 paolo-lapfour kernel: [44231.766134] uvcvideo: Found
UVC 1.00 device USB2.0 Camera (0402:5606)
Apr 24 13:52:35 paolo-lapfour kernel: [44231.782809] input: USB2.0
Camera as /devices/pci0000:00/0000:00:1d.7/usb1/1-5/1-5:1.0/input/input10
Apr 24 13:52:35 paolo-lapfour kernel: [44231.783200] usbcore:
registered new interface driver uvcvideo
Apr 24 13:52:35 paolo-lapfour kernel: [44231.783223] USB Video Class
driver (v0.1.0)

After enabling the webcam, this is the kernel.log when I start cheese:

Apr 24 13:53:00 paolo-lapfour kernel: [44257.278402] uvcvideo: UVC non
compliance - GET_MIN/MAX(PROBE) incorrectly supported. Enabling
workaround.
Apr 24 13:53:00 paolo-lapfour kernel: [44257.313941] uvcvideo: device
USB2.0 Camera requested null bandwidth, defaulting to lowest.

Paolo


From danjde at msw.it  Tue Apr 26 17:27:38 2011
From: danjde at msw.it (Davide Marchi)
Date: Tue, 26 Apr 2011 17:27:38 +0200
Subject: [Linux-uvc-devel] webcam acer extensa 5635z [04f2:b044] fedora Core
	14 [kernel 2.6.35.12.88.fc14.i686]
Message-ID: <4DB6E46A.8060508@msw.it>

Hi,
i'm trying to enable the acer 5635z[04f2:b044]  webcam (on 
www.ideasonboard.org/uvc/ the webcam result ok) ;

for this i've follow the http://git.linuxtv.org/media_build.git 
procedure and build and installed the modules:

git clone git://linuxtv.org/media_build.git
cd media_build
./build.sh


but the webcam still does not work;

is there some other procedure that I follow?

many thanks!


-- 


cosmogoniA <http://www.cosmogonia.org/>
noprovarenofareononfarenonc'?provare


From shop at open-t.co.uk  Wed Apr 27 10:16:13 2011
From: shop at open-t.co.uk (Sebastian Arcus)
Date: Wed, 27 Apr 2011 09:16:13 +0100
Subject: [Linux-uvc-devel] Footage of objects in motion recorded from webcam
	is blurry
Message-ID: <4DB7D0CD.6070909@open-t.co.uk>

This might not be entirely related to the UVC driver, but there seems to 
be a great pool of knowledge about webcams here, so I appreciate any 
feedback on this.

I am using some Logitech QuickCam Pro 9000 cameras for a cctv project. 
Footage recorded by the camera of people/objects on the move is 
generally blurry. If the movement is slow, the footage is sharper - but 
as soon as they move a little faster (people walking about) - the 
footage is really quite blurry until they stop - and then it is sharp 
again. It is worse in low light, but it is still quite bad even in day 
light.

My questions are:

1. Would this be fairly specific to the Logitech QuickCam 9000, or is a 
more generic issue with webcam sensors?
2. Are other webcams better in this respect?
3. Can I use any of the UVC features to tweak the driver parameters in 
order to force sharper images of objects on the move?
4. Is this to do with the auto-focus of the camera, and can I turn it 
off or peg it in software at a certain value, to improve things?

Any hints on this are greatly appreciated.

Thank you,

Sebastian


From pj.assis at gmail.com  Wed Apr 27 10:42:14 2011
From: pj.assis at gmail.com (Paulo Assis)
Date: Wed, 27 Apr 2011 09:42:14 +0100
Subject: [Linux-uvc-devel] Footage of objects in motion recorded from
 webcam is blurry
In-Reply-To: <4DB7D0CD.6070909@open-t.co.uk>
References: <4DB7D0CD.6070909@open-t.co.uk>
Message-ID: <BANLkTinX0BDsTg9__bQoLQMhXXzV44uizw@mail.gmail.com>

Hi,

>
> 1. Would this be fairly specific to the Logitech QuickCam 9000, or is a more
> generic issue with webcam sensors?

Neither, you just need to lower exposure time.

> 2. Are other webcams better in this respect?

I don't think so, you can control exposure quite easily with this cam.

> 3. Can I use any of the UVC features to tweak the driver parameters in order
> to force sharper images of objects on the move?

Yes, just set exposure mode to manual, and tweak exposure absolute,
also remember to disable "exposure, auto priority".
You should also use the highest fps possible (30 fps I think)

> 4. Is this to do with the auto-focus of the camera, and can I turn it off or
> peg it in software at a certain value, to improve things?

Yes, use uvcdynctrl (command line) or guvcview (gtk) (guvcview
--control_only will let you use your program along side it)

Regards,
Paulo


From pj.assis at gmail.com  Wed Apr 27 10:47:21 2011
From: pj.assis at gmail.com (Paulo Assis)
Date: Wed, 27 Apr 2011 09:47:21 +0100
Subject: [Linux-uvc-devel] webcam acer extensa 5635z [04f2:b044] fedora
 Core 14 [kernel 2.6.35.12.88.fc14.i686]
In-Reply-To: <4DB6E46A.8060508@msw.it>
References: <4DB6E46A.8060508@msw.it>
Message-ID: <BANLkTi=KLxaM5e5baDG_=da4TexOre3s8Q@mail.gmail.com>

Hi,

2011/4/26 Davide Marchi <danjde at msw.it>:
> Hi,
> i'm trying to enable the acer 5635z[04f2:b044] ?webcam (on
> www.ideasonboard.org/uvc/ the webcam result ok) ;
>
> for this i've follow the http://git.linuxtv.org/media_build.git procedure
> and build and installed the modules:
>
> git clone git://linuxtv.org/media_build.git
> cd media_build
> ./build.sh
>
>
> but the webcam still does not work;
>

What you mean by "does not work", this is a little vague.
Could you post "dmesg" and "lsusb -v -d 04f2:b044" output, please?

Regards,
Paulo


> is there some other procedure that I follow?
>
> many thanks!
>
>
> --
>
>
> cosmogoniA <http://www.cosmogonia.org/>
> noprovarenofareononfarenonc'?provare
> _______________________________________________
> Linux-uvc-devel mailing list
> Linux-uvc-devel at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/linux-uvc-devel
>


From shop at open-t.co.uk  Wed Apr 27 11:08:02 2011
From: shop at open-t.co.uk (Sebastian Arcus)
Date: Wed, 27 Apr 2011 10:08:02 +0100
Subject: [Linux-uvc-devel] Footage of objects in motion recorded from
 webcam is blurry
In-Reply-To: <BANLkTinX0BDsTg9__bQoLQMhXXzV44uizw@mail.gmail.com>
References: <4DB7D0CD.6070909@open-t.co.uk>
	<BANLkTinX0BDsTg9__bQoLQMhXXzV44uizw@mail.gmail.com>
Message-ID: <4DB7DCF2.5030204@open-t.co.uk>


On 04/27/2011 09:42 AM, Paulo Assis wrote:
> Hi,
>
>>
>> 1. Would this be fairly specific to the Logitech QuickCam 9000, or is a more
>> generic issue with webcam sensors?
>
> Neither, you just need to lower exposure time.
>
>> 2. Are other webcams better in this respect?
>
> I don't think so, you can control exposure quite easily with this cam.
>
>> 3. Can I use any of the UVC features to tweak the driver parameters in order
>> to force sharper images of objects on the move?
>
> Yes, just set exposure mode to manual, and tweak exposure absolute,
> also remember to disable "exposure, auto priority".
> You should also use the highest fps possible (30 fps I think)
>
>> 4. Is this to do with the auto-focus of the camera, and can I turn it off or
>> peg it in software at a certain value, to improve things?
>
> Yes, use uvcdynctrl (command line) or guvcview (gtk) (guvcview
> --control_only will let you use your program along side it)

Thanks Paulo - that is very helpful. I'll try it out and see how it works.

Sebastian


>
> Regards,
> Paulo
>


From danjde at msw.it  Wed Apr 27 18:13:46 2011
From: danjde at msw.it (Davide Marchi)
Date: Wed, 27 Apr 2011 18:13:46 +0200
Subject: [Linux-uvc-devel] webcam acer extensa 5635z [04f2:b044] fedora
 Core 14 [kernel 2.6.35.12.88.fc14.i686]
In-Reply-To: <BANLkTi=KLxaM5e5baDG_=da4TexOre3s8Q@mail.gmail.com>
References: <4DB6E46A.8060508@msw.it>
	<BANLkTi=KLxaM5e5baDG_=da4TexOre3s8Q@mail.gmail.com>
Message-ID: <4DB840BA.7080504@msw.it>

Paulo Assis ha scritto:
> [..]
> What you mean by "does not work", this is a little vague.
> Could you post "dmesg" and "lsusb -v -d 04f2:b044" output, please?
>
> Regards,
> Paulo
>    
many thanks Paulo,

webcam show (with cheese and ekiga) video black.
I look at increasing the brightness of flashes yellow/white flashing


post as you request:

dmesg:

[    0.000000] Initializing cgroup subsys cpuset
[    0.000000] Initializing cgroup subsys cpu
[    0.000000] Linux version 2.6.35.12-88.fc14.i686 
(root at cosmogoniA-cristina) (gcc version 4.5.1 20100924 (Red Hat 4.5.1-4) 
(GCC) ) #1 SMP Tue Apr 26 13:47:23 CEST 2011
[    0.000000] BIOS-provided physical RAM map:
[    0.000000]  BIOS-e820: 0000000000000000 - 000000000009f400 (usable)
[    0.000000]  BIOS-e820: 000000000009f400 - 00000000000a0000 (reserved)
[    0.000000]  BIOS-e820: 00000000000d2000 - 00000000000d4000 (reserved)
[    0.000000]  BIOS-e820: 00000000000e0000 - 0000000000100000 (reserved)
[    0.000000]  BIOS-e820: 0000000000100000 - 000000007b6a1000 (usable)
[    0.000000]  BIOS-e820: 000000007b6a1000 - 000000007b6a7000 (reserved)
[    0.000000]  BIOS-e820: 000000007b6a7000 - 000000007b7ca000 (usable)
[    0.000000]  BIOS-e820: 000000007b7ca000 - 000000007b80f000 (reserved)
[    0.000000]  BIOS-e820: 000000007b80f000 - 000000007b909000 (usable)
[    0.000000]  BIOS-e820: 000000007b909000 - 000000007bb0f000 (reserved)
[    0.000000]  BIOS-e820: 000000007bb0f000 - 000000007bb19000 (usable)
[    0.000000]  BIOS-e820: 000000007bb19000 - 000000007bb1f000 (reserved)
[    0.000000]  BIOS-e820: 000000007bb1f000 - 000000007bb64000 (usable)
[    0.000000]  BIOS-e820: 000000007bb64000 - 000000007bb9f000 (ACPI NVS)
[    0.000000]  BIOS-e820: 000000007bb9f000 - 000000007bbe1000 (usable)
[    0.000000]  BIOS-e820: 000000007bbe1000 - 000000007bbff000 (ACPI data)
[    0.000000]  BIOS-e820: 000000007bbff000 - 000000007bc00000 (usable)
[    0.000000]  BIOS-e820: 000000007bc00000 - 000000007be00000 (reserved)
[    0.000000]  BIOS-e820: 000000007c000000 - 0000000080000000 (reserved)
[    0.000000]  BIOS-e820: 00000000e0000000 - 00000000f0000000 (reserved)
[    0.000000]  BIOS-e820: 00000000fec00000 - 00000000fec10000 (reserved)
[    0.000000]  BIOS-e820: 00000000fed00000 - 00000000fed00400 (reserved)
[    0.000000]  BIOS-e820: 00000000fed10000 - 00000000fed14000 (reserved)
[    0.000000]  BIOS-e820: 00000000fed18000 - 00000000fed1a000 (reserved)
[    0.000000]  BIOS-e820: 00000000fed1c000 - 00000000fed90000 (reserved)
[    0.000000]  BIOS-e820: 00000000fee00000 - 00000000fee01000 (reserved)
[    0.000000]  BIOS-e820: 00000000ffe00000 - 0000000100000000 (reserved)
[    0.000000] Notice: NX (Execute Disable) protection cannot be 
enabled: non-PAE kernel!
[    0.000000] DMI present.
[    0.000000] e820 update range: 0000000000000000 - 0000000000001000 
(usable) ==> (reserved)
[    0.000000] e820 remove range: 00000000000a0000 - 0000000000100000 
(usable)
[    0.000000] last_pfn = 0x7bc00 max_arch_pfn = 0x100000
[    0.000000] MTRR default type: uncachable
[    0.000000] MTRR fixed ranges enabled:
[    0.000000]   00000-9FFFF write-back
[    0.000000]   A0000-BFFFF uncachable
[    0.000000]   C0000-D3FFF write-protect
[    0.000000]   D4000-DBFFF uncachable
[    0.000000]   DC000-FFFFF write-protect
[    0.000000] MTRR variable ranges enabled:
[    0.000000]   0 base 07C000000 mask FFC000000 uncachable
[    0.000000]   1 base 000000000 mask F80000000 write-back
[    0.000000]   2 base 07BE00000 mask FFFE00000 uncachable
[    0.000000]   3 disabled
[    0.000000]   4 disabled
[    0.000000]   5 disabled
[    0.000000]   6 disabled
[    0.000000] x86 PAT enabled: cpu 0, old 0x7040600070406, new 
0x7010600070106
[    0.000000] original variable MTRRs
[    0.000000] reg 0, base: 1984MB, range: 64MB, type UC
[    0.000000] reg 1, base: 0GB, range: 2GB, type WB
[    0.000000] reg 2, base: 1982MB, range: 2MB, type UC
[    0.000000] total RAM covered: 1982M
[    0.000000] Found optimal setting for mtrr clean up
[    0.000000]  gran_size: 64K     chunk_size: 128M     num_reg: 3      
lose cover RAM: 0G
[    0.000000] New variable MTRRs
[    0.000000] reg 0, base: 0GB, range: 2GB, type WB
[    0.000000] reg 1, base: 1982MB, range: 2MB, type UC
[    0.000000] reg 2, base: 1984MB, range: 64MB, type UC
[    0.000000] initial memory mapped : 0 - 01000000
[    0.000000] found SMP MP-table at [c00f75f0] f75f0
[    0.000000] init_memory_mapping: 0000000000000000-0000000036ffe000
[    0.000000]  0000000000 - 0000400000 page 4k
[    0.000000]  0000400000 - 0036c00000 page 2M
[    0.000000]  0036c00000 - 0036ffe000 page 4k
[    0.000000] kernel direct mapping tables up to 36ffe000 @ 7000-e000
[    0.000000] RAMDISK: 373ee000 - 37ff0000
[    0.000000] Allocated new RAMDISK: 00c32000 - 01833284
[    0.000000] Move RAMDISK from 00000000373ee000 - 0000000037fef283 to 
00c32000 - 01833283
[    0.000000] ACPI: RSDP 000f7510 00024 (v02 PTLTD )
[    0.000000] ACPI: XSDT 7bbf56fe 00074 (v01 ACRSYS ACRPRDCT 06040000  
LTP 00000000)
[    0.000000] ACPI: FACP 7bbe5000 000F4 (v03 INTEL  CRESTLNE 06040000 
ALAN 00000001)
[    0.000000] ACPI: DSDT 7bbe6000 092DE (v02 Intel  CANTIGA  06040000 
INTL 20061109)
[    0.000000] ACPI: FACS 7bb9efc0 00040
[    0.000000] ACPI: HPET 7bbfed86 00038 (v01 INTEL  CRESTLNE 06040000 
LOHR 0000005A)
[    0.000000] ACPI: MCFG 7bbfedbe 0003C (v01 INTEL  CRESTLNE 06040000 
LOHR 0000005A)
[    0.000000] ACPI: APIC 7bbfedfa 00068 (v01 PTLTD  ? APIC   06040000  
LTP 00000000)
[    0.000000] ACPI: BOOT 7bbfee62 00028 (v01 PTLTD  $SBFTBL$ 06040000  
LTP 00000001)
[    0.000000] ACPI: SLIC 7bbfee8a 00176 (v01 ACRSYS ACRPRDCT 06040000 
acer 00000000)
[    0.000000] ACPI: SSDT 7bbf579a 001A6 (v01 SataRe SataAhci 00001000 
INTL 20061109)
[    0.000000] ACPI: SSDT 7bbe4000 00655 (v01  PmRef    CpuPm 00003000 
INTL 20061109)
[    0.000000] ACPI: SSDT 7bbe3000 00259 (v01  PmRef  Cpu0Tst 00003000 
INTL 20061109)
[    0.000000] ACPI: SSDT 7bbe2000 0020F (v01  PmRef    ApTst 00003000 
INTL 20061109)
[    0.000000] ACPI: Local APIC address 0xfee00000
[    0.000000] 1100MB HIGHMEM available.
[    0.000000] 879MB LOWMEM available.
[    0.000000]   mapped low ram: 0 - 36ffe000
[    0.000000]   low ram: 0 - 36ffe000
[    0.000000]   node 0 low ram: 00000000 - 36ffe000
[    0.000000]   node 0 bootmap 0000b000 - 00011e00
[    0.000000] (13/32 early reservations) ==> bootmem [0000000000 - 
0036ffe000]
[    0.000000]   #0 [0000001000 - 0000002000]    EX TRAMPOLINE ==> 
[0000001000 - 0000002000]
[    0.000000]   #1 [0000400000 - 0000c2c900]    TEXT DATA BSS ==> 
[0000400000 - 0000c2c900]
[    0.000000]   #2 [0000c2d000 - 0000c31178]              BRK ==> 
[0000c2d000 - 0000c31178]
[    0.000000]   #3 [00000f7600 - 0000100000]    BIOS reserved ==> 
[00000f7600 - 0000100000]
[    0.000000]   #4 [00000f75f0 - 00000f7600]     MP-table mpf ==> 
[00000f75f0 - 00000f7600]
[    0.000000]   #5 [000009f400 - 000009f971]    BIOS reserved ==> 
[000009f400 - 000009f971]
[    0.000000]   #6 [000009fad5 - 00000f75f0]    BIOS reserved ==> 
[000009fad5 - 00000f75f0]
[    0.000000]   #7 [000009f971 - 000009fad5]     MP-table mpc ==> 
[000009f971 - 000009fad5]
[    0.000000]   #8 [0000002000 - 0000003000]       TRAMPOLINE ==> 
[0000002000 - 0000003000]
[    0.000000]   #9 [0000003000 - 0000007000]      ACPI WAKEUP ==> 
[0000003000 - 0000007000]
[    0.000000]   #10 [0000007000 - 000000b000]          PGTABLE ==> 
[0000007000 - 000000b000]
[    0.000000]   #11 [0000c32000 - 0001834000]      NEW RAMDISK ==> 
[0000c32000 - 0001834000]
[    0.000000]   #12 [000000b000 - 0000012000]          BOOTMAP ==> 
[000000b000 - 0000012000]
[    0.000000] Zone PFN ranges:
[    0.000000]   DMA      0x00000001 -> 0x00001000
[    0.000000]   Normal   0x00001000 -> 0x00036ffe
[    0.000000]   HighMem  0x00036ffe -> 0x0007bc00
[    0.000000] Movable zone start PFN for each node
[    0.000000] early_node_map[8] active PFN ranges
[    0.000000]     0: 0x00000001 -> 0x0000009f
[    0.000000]     0: 0x00000100 -> 0x0007b6a1
[    0.000000]     0: 0x0007b6a7 -> 0x0007b7ca
[    0.000000]     0: 0x0007b80f -> 0x0007b909
[    0.000000]     0: 0x0007bb0f -> 0x0007bb19
[    0.000000]     0: 0x0007bb1f -> 0x0007bb64
[    0.000000]     0: 0x0007bb9f -> 0x0007bbe1
[    0.000000]     0: 0x0007bbff -> 0x0007bc00
[    0.000000] On node 0 totalpages: 506094
[    0.000000] free_area_init_node: node 0, pgdat c09fe140, node_mem_map 
c1835020
[    0.000000]   DMA zone: 32 pages used for memmap
[    0.000000]   DMA zone: 0 pages reserved
[    0.000000]   DMA zone: 3966 pages, LIFO batch:0
[    0.000000]   Normal zone: 1728 pages used for memmap
[    0.000000]   Normal zone: 219454 pages, LIFO batch:31
[    0.000000]   HighMem zone: 2201 pages used for memmap
[    0.000000]   HighMem zone: 278713 pages, LIFO batch:31
[    0.000000] Using APIC driver default
[    0.000000] ACPI: PM-Timer IO Port: 0x408
[    0.000000] ACPI: Local APIC address 0xfee00000
[    0.000000] ACPI: LAPIC (acpi_id[0x00] lapic_id[0x00] enabled)
[    0.000000] ACPI: LAPIC (acpi_id[0x01] lapic_id[0x01] enabled)
[    0.000000] ACPI: LAPIC_NMI (acpi_id[0x00] high edge lint[0x1])
[    0.000000] ACPI: LAPIC_NMI (acpi_id[0x01] high edge lint[0x1])
[    0.000000] ACPI: IOAPIC (id[0x02] address[0xfec00000] gsi_base[0])
[    0.000000] IOAPIC[0]: apic_id 2, version 32, address 0xfec00000, GSI 
0-23
[    0.000000] ACPI: INT_SRC_OVR (bus 0 bus_irq 0 global_irq 2 high edge)
[    0.000000] ACPI: INT_SRC_OVR (bus 0 bus_irq 9 global_irq 9 high level)
[    0.000000] ACPI: IRQ0 used by override.
[    0.000000] ACPI: IRQ2 used by override.
[    0.000000] ACPI: IRQ9 used by override.
[    0.000000] Using ACPI (MADT) for SMP configuration information
[    0.000000] ACPI: HPET id: 0x8086a201 base: 0xfed00000
[    0.000000] SMP: Allowing 2 CPUs, 0 hotplug CPUs
[    0.000000] nr_irqs_gsi: 40
[    0.000000] PM: Registered nosave memory: 000000000009f000 - 
00000000000a0000
[    0.000000] PM: Registered nosave memory: 00000000000a0000 - 
00000000000d2000
[    0.000000] PM: Registered nosave memory: 00000000000d2000 - 
00000000000d4000
[    0.000000] PM: Registered nosave memory: 00000000000d4000 - 
00000000000e0000
[    0.000000] PM: Registered nosave memory: 00000000000e0000 - 
0000000000100000
[    0.000000] Allocating PCI resources starting at 80000000 (gap: 
80000000:60000000)
[    0.000000] Booting paravirtualized kernel on bare hardware
[    0.000000] setup_percpu: NR_CPUS:64 nr_cpumask_bits:64 nr_cpu_ids:2 
nr_node_ids:1
[    0.000000] PERCPU: Embedded 14 pages/cpu @c2800000 s35136 r0 d22208 
u2097152
[    0.000000] pcpu-alloc: s35136 r0 d22208 u2097152 alloc=1*4194304
[    0.000000] pcpu-alloc: [0] 0 1
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  
Total pages: 502133
[    0.000000] Kernel command line: ro 
root=UUID=16d9270e-3d25-471c-a14b-d3dafa9d792c rd_NO_LUKS rd_NO_LVM 
rd_NO_MD rd_NO_DM LANG=it_IT.UTF-8 SYSFONT=latarcyrheb-sun16 
KEYBOARDTYPE=pc KEYTABLE=it rhgb quiet
[    0.000000] PID hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Dentry cache hash table entries: 131072 (order: 7, 524288 
bytes)
[    0.000000] Inode-cache hash table entries: 65536 (order: 6, 262144 
bytes)
[    0.000000] Enabling fast FPU save and restore... done.
[    0.000000] Enabling unmasked SIMD FPU exception support... done.
[    0.000000] Initializing CPU#0
[    0.000000] xsave/xrstor: enabled xstate_bv 0x3, cntxt size 0x240
[    0.000000] allocated 10137580 bytes of page_cgroup
[    0.000000] please try 'cgroup_disable=memory' option if you don't 
want memory cgroups
[    0.000000] Initializing HighMem for node 0 (00036ffe:0007bc00)
[    0.000000] Memory: 1976952k/2027520k available (3768k kernel code, 
47424k reserved, 2491k data, 544k init, 1123656k highmem)
[    0.000000] virtual kernel memory layout:
[    0.000000]     fixmap  : 0xff575000 - 0xfffff000   (10792 kB)
[    0.000000]     pkmap   : 0xff000000 - 0xff400000   (4096 kB)
[    0.000000]     vmalloc : 0xf77fe000 - 0xfeffe000   ( 120 MB)
[    0.000000]     lowmem  : 0xc0000000 - 0xf6ffe000   ( 879 MB)
[    0.000000]       .init : 0xc0a1d000 - 0xc0aa5000   ( 544 kB)
[    0.000000]       .data : 0xc07ae05e - 0xc0a1ceb0   (2491 kB)
[    0.000000]       .text : 0xc0400000 - 0xc07ae05e   (3768 kB)
[    0.000000] Checking if this processor honours the WP bit even in 
supervisor mode...Ok.
[    0.000000] SLUB: Genslabs=13, HWalign=64, Order=0-3, MinObjects=0, 
CPUs=2, Nodes=1
[    0.000000] Hierarchical RCU implementation.
[    0.000000]     RCU dyntick-idle grace-period acceleration is enabled.
[    0.000000]     RCU-based detection of stalled CPUs is disabled.
[    0.000000]     Verbose stalled-CPUs detection is disabled.
[    0.000000] NR_IRQS:2304
[    0.000000] Extended CMOS year: 2000
[    0.000000] Console: colour VGA+ 80x25
[    0.000000] console [tty0] enabled
[    0.000000] hpet clockevent registered
[    0.000000] Fast TSC calibration using PIT
[    0.000000] Detected 2095.426 MHz processor.
[    0.001004] Calibrating delay loop (skipped), value calculated using 
timer frequency.. 4190.85 BogoMIPS (lpj=2095426)
[    0.001009] pid_max: default: 32768 minimum: 301
[    0.001035] Security Framework initialized
[    0.001045] SELinux:  Initializing.
[    0.001054] SELinux:  Starting in permissive mode
[    0.001111] Mount-cache hash table entries: 512
[    0.001253] Initializing cgroup subsys ns
[    0.001258] Initializing cgroup subsys cpuacct
[    0.001263] Initializing cgroup subsys memory
[    0.001272] Initializing cgroup subsys devices
[    0.001275] Initializing cgroup subsys freezer
[    0.001277] Initializing cgroup subsys net_cls
[    0.001280] Initializing cgroup subsys blkio
[    0.002032] CPU: Physical Processor ID: 0
[    0.002034] CPU: Processor Core ID: 0
[    0.002037] mce: CPU supports 6 MCE banks
[    0.002045] CPU0: Thermal monitoring enabled (TM2)
[    0.002049] using mwait in idle threads.
[    0.002055] Performance Events: PEBS fmt0+, Core2 events, Intel PMU 
driver.
[    0.002064] ... version:                2
[    0.002066] ... bit width:              40
[    0.002068] ... generic registers:      2
[    0.002070] ... value mask:             000000ffffffffff
[    0.002072] ... max period:             000000007fffffff
[    0.002074] ... fixed-purpose events:   3
[    0.002076] ... event mask:             0000000700000003
[    0.002619] ACPI: Core revision 20100428
[    0.016010] ftrace: converting mcount calls to 0f 1f 44 00 00
[    0.016016] ftrace: allocating 23153 entries in 46 pages
[    0.017057] Enabling APIC mode:  Flat.  Using 1 I/O APICs
[    0.017515] ..TIMER: vector=0x30 apic1=0 pin1=2 apic2=-1 pin2=-1
[    0.027732] CPU0: Intel Pentium(R) Dual-Core CPU       T4300  @ 
2.10GHz stepping 0a
[    0.027999] Booting Node   0, Processors  #1 Ok.
[    0.001999] Initializing CPU#1
[    0.099015] Brought up 2 CPUs
[    0.099017] Total of 2 processors activated (8380.46 BogoMIPS).
[    0.099419] sizeof(vma)=88 bytes
[    0.099421] sizeof(page)=32 bytes
[    0.099422] sizeof(inode)=352 bytes
[    0.099424] sizeof(dentry)=132 bytes
[    0.099426] sizeof(ext3inode)=508 bytes
[    0.099427] sizeof(buffer_head)=56 bytes
[    0.099429] sizeof(skbuff)=192 bytes
[    0.099430] sizeof(task_struct)=3228 bytes
[    0.099479] devtmpfs: initialized
[    0.100910] atomic64 test passed for i586+ platform with CX8 and with SSE
[    0.100948] Time: 14:40:07  Date: 04/27/11
[    0.100991] NET: Registered protocol family 16
[    0.101098] ACPI FADT declares the system doesn't support PCIe ASPM, 
so disable it
[    0.101101] ACPI: bus type pci registered
[    0.101182] PCI: MMCONFIG for domain 0000 [bus 00-ff] at [mem 
0xe0000000-0xefffffff] (base 0xe0000000)
[    0.101186] PCI: MMCONFIG at [mem 0xe0000000-0xefffffff] reserved in E820
[    0.101188] PCI: Using MMCONFIG for extended config space
[    0.101190] PCI: Using configuration type 1 for base access
[    0.102445] bio: create slab <bio-0> at 0
[    0.104466] ACPI: EC: Look up EC in DSDT
[    0.110828] ACPI: BIOS _OSI(Linux) query ignored
[    0.112703] ACPI: SSDT 7bb1aca0 00223 (v01  PmRef  Cpu0Ist 00003000 
INTL 20061109)
[    0.113184] ACPI: Dynamic OEM Table Load:
[    0.113188] ACPI: SSDT (null) 00223 (v01  PmRef  Cpu0Ist 00003000 
INTL 20061109)
[    0.113497] ACPI: SSDT 7bb19620 005B3 (v01  PmRef  Cpu0Cst 00003001 
INTL 20061109)
[    0.113950] ACPI: Dynamic OEM Table Load:
[    0.113953] ACPI: SSDT (null) 005B3 (v01  PmRef  Cpu0Cst 00003001 
INTL 20061109)
[    0.114503] ACPI: SSDT 7bb1aa20 001CF (v01  PmRef    ApIst 00003000 
INTL 20061109)
[    0.114996] ACPI: Dynamic OEM Table Load:
[    0.115004] ACPI: SSDT (null) 001CF (v01  PmRef    ApIst 00003000 
INTL 20061109)
[    0.115179] ACPI: SSDT 7bb1af20 0008D (v01  PmRef    ApCst 00003000 
INTL 20061109)
[    0.115647] ACPI: Dynamic OEM Table Load:
[    0.115650] ACPI: SSDT (null) 0008D (v01  PmRef    ApCst 00003000 
INTL 20061109)
[    0.151098] ACPI: Interpreter enabled
[    0.151104] ACPI: (supports S0 S3 S4 S5)
[    0.151130] ACPI: Using IOAPIC for interrupt routing
[    0.161331] ACPI: EC: GPE = 0x18, I/O: command/status = 0x66, data = 0x62
[    0.161712] ACPI: No dock devices found.
[    0.161717] PCI: Ignoring host bridge windows from ACPI; if 
necessary, use "pci=use_crs" and report a bug
[    0.162310] ACPI: PCI Root Bridge [PCI0] (domain 0000 [bus 00-ff])
[    0.163472] pci_root PNP0A08:00: host bridge window [io  
0x0000-0x0cf7] (ignored)
[    0.163475] pci_root PNP0A08:00: host bridge window [io  
0x0d00-0xffff] (ignored)
[    0.163478] pci_root PNP0A08:00: host bridge window [mem 
0x000a0000-0x000bffff] (ignored)
[    0.163481] pci_root PNP0A08:00: host bridge window [mem 
0x000d4000-0x000d7fff] (ignored)
[    0.163484] pci_root PNP0A08:00: host bridge window [mem 
0x000d8000-0x000dbfff] (ignored)
[    0.163486] pci_root PNP0A08:00: host bridge window [mem 
0x000dc000-0x000dffff] (ignored)
[    0.163490] pci_root PNP0A08:00: host bridge window [mem 
0x80000000-0xdfffffff] (ignored)
[    0.163492] pci_root PNP0A08:00: host bridge window [mem 
0xf0000000-0xfebfffff] (ignored)
[    0.163527] DMAR: Forcing write-buffer flush capability
[    0.163529] DMAR: Disabling IOMMU for graphics on this chipset
[    0.163563] pci 0000:00:02.0: reg 10: [mem 0xf0000000-0xf03fffff 64bit]
[    0.163571] pci 0000:00:02.0: reg 18: [mem 0xd0000000-0xdfffffff 
64bit pref]
[    0.163576] pci 0000:00:02.0: reg 20: [io  0x1800-0x1807]
[    0.163614] pci 0000:00:02.1: reg 10: [mem 0xf0400000-0xf04fffff 64bit]
[    0.163734] pci 0000:00:1a.0: reg 20: [io  0x1820-0x183f]
[    0.163823] pci 0000:00:1a.1: reg 20: [io  0x1840-0x185f]
[    0.163909] pci 0000:00:1a.7: reg 10: [mem 0xf0904800-0xf0904bff]
[    0.163978] pci 0000:00:1a.7: PME# supported from D0 D3hot D3cold
[    0.163984] pci 0000:00:1a.7: PME# disabled
[    0.164037] pci 0000:00:1b.0: reg 10: [mem 0xf0700000-0xf0703fff 64bit]
[    0.164099] pci 0000:00:1b.0: PME# supported from D0 D3hot D3cold
[    0.164104] pci 0000:00:1b.0: PME# disabled
[    0.164203] pci 0000:00:1c.0: PME# supported from D0 D3hot D3cold
[    0.164208] pci 0000:00:1c.0: PME# disabled
[    0.164313] pci 0000:00:1c.3: PME# supported from D0 D3hot D3cold
[    0.164318] pci 0000:00:1c.3: PME# disabled
[    0.164421] pci 0000:00:1c.5: PME# supported from D0 D3hot D3cold
[    0.164425] pci 0000:00:1c.5: PME# disabled
[    0.164496] pci 0000:00:1d.0: reg 20: [io  0x1860-0x187f]
[    0.164585] pci 0000:00:1d.1: reg 20: [io  0x1880-0x189f]
[    0.164674] pci 0000:00:1d.2: reg 20: [io  0x18a0-0x18bf]
[    0.164765] pci 0000:00:1d.3: reg 20: [io  0x18c0-0x18df]
[    0.164849] pci 0000:00:1d.7: reg 10: [mem 0xf0904c00-0xf0904fff]
[    0.164918] pci 0000:00:1d.7: PME# supported from D0 D3hot D3cold
[    0.164924] pci 0000:00:1d.7: PME# disabled
[    0.165166] pci 0000:00:1f.2: reg 10: [io  0x1818-0x181f]
[    0.165174] pci 0000:00:1f.2: reg 14: [io  0x180c-0x180f]
[    0.165182] pci 0000:00:1f.2: reg 18: [io  0x1810-0x1817]
[    0.165190] pci 0000:00:1f.2: reg 1c: [io  0x1808-0x180b]
[    0.165198] pci 0000:00:1f.2: reg 20: [io  0x18e0-0x18ff]
[    0.165206] pci 0000:00:1f.2: reg 24: [mem 0xf0904000-0xf09047ff]
[    0.165253] pci 0000:00:1f.2: PME# supported from D3hot
[    0.165258] pci 0000:00:1f.2: PME# disabled
[    0.165299] pci 0000:00:1f.3: reg 10: [mem 0x00000000-0x000000ff 64bit]
[    0.165318] pci 0000:00:1f.3: reg 20: [io  0x1c00-0x1c1f]
[    0.165406] pci 0000:00:1c.0: PCI bridge to [bus 02-04]
[    0.165411] pci 0000:00:1c.0:   bridge window [io  0x0000-0x0000] 
(disabled)
[    0.165417] pci 0000:00:1c.0:   bridge window [mem 
0x00000000-0x000fffff] (disabled)
[    0.165425] pci 0000:00:1c.0:   bridge window [mem 
0x00000000-0x000fffff pref] (disabled)
[    0.165533] pci 0000:07:00.0: reg 10: [mem 0x00000000-0x0000ffff 64bit]
[    0.165625] pci 0000:07:00.0: supports D1
[    0.165627] pci 0000:07:00.0: PME# supported from D0 D1 D3hot
[    0.165633] pci 0000:07:00.0: PME# disabled
[    0.165670] pci 0000:00:1c.3: PCI bridge to [bus 07-07]
[    0.165676] pci 0000:00:1c.3:   bridge window [io  0x0000-0x0000] 
(disabled)
[    0.165681] pci 0000:00:1c.3:   bridge window [mem 
0x00000000-0x000fffff] (disabled)
[    0.165689] pci 0000:00:1c.3:   bridge window [mem 
0x00000000-0x000fffff pref] (disabled)
[    0.165797] pci 0000:09:00.0: reg 10: [mem 0x00000000-0x0003ffff 64bit]
[    0.165808] pci 0000:09:00.0: reg 18: [io  0x0000-0x007f]
[    0.165893] pci 0000:09:00.0: PME# supported from D0 D1 D2 D3hot D3cold
[    0.165899] pci 0000:09:00.0: PME# disabled
[    0.165935] pci 0000:00:1c.5: PCI bridge to [bus 09-09]
[    0.165940] pci 0000:00:1c.5:   bridge window [io  0x0000-0x0000] 
(disabled)
[    0.165945] pci 0000:00:1c.5:   bridge window [mem 
0x00000000-0x000fffff] (disabled)
[    0.165954] pci 0000:00:1c.5:   bridge window [mem 
0x00000000-0x000fffff pref] (disabled)
[    0.166056] pci 0000:00:1e.0: PCI bridge to [bus 0a-0a] (subtractive 
decode)
[    0.166062] pci 0000:00:1e.0:   bridge window [io  0xf000-0x0000] 
(disabled)
[    0.166067] pci 0000:00:1e.0:   bridge window [mem 
0xfff00000-0x000fffff] (disabled)
[    0.166076] pci 0000:00:1e.0:   bridge window [mem 
0xfff00000-0x000fffff pref] (disabled)
[    0.166079] pci 0000:00:1e.0:   bridge window [io  0x0000-0xffff] 
(subtractive decode)
[    0.166082] pci 0000:00:1e.0:   bridge window [mem 
0x00000000-0xffffffff] (subtractive decode)
[    0.166109] pci_bus 0000:00: on NUMA node 0
[    0.166114] ACPI: PCI Interrupt Routing Table [\_SB_.PCI0._PRT]
[    0.166336] ACPI: PCI Interrupt Routing Table [\_SB_.PCI0.P0P1._PRT]
[    0.166454] ACPI: PCI Interrupt Routing Table [\_SB_.PCI0.RP01._PRT]
[    0.166539] ACPI: PCI Interrupt Routing Table [\_SB_.PCI0.RP04._PRT]
[    0.179229] ACPI: PCI Interrupt Link [LNKA] (IRQs 1 3 4 *5 6 7 10 12 
14 15)
[    0.179348] ACPI: PCI Interrupt Link [LNKB] (IRQs 1 3 4 5 6 7 11 12 
14 15) *10
[    0.179468] ACPI: PCI Interrupt Link [LNKC] (IRQs 1 3 4 5 6 7 *10 12 
14 15)
[    0.179584] ACPI: PCI Interrupt Link [LNKD] (IRQs 1 3 4 5 6 7 11 12 
14 15) *10
[    0.179700] ACPI: PCI Interrupt Link [LNKE] (IRQs 1 3 4 5 6 7 10 12 
14 15) *0, disabled.
[    0.179817] ACPI: PCI Interrupt Link [LNKF] (IRQs 1 3 4 5 6 7 *11 12 
14 15)
[    0.179932] ACPI: PCI Interrupt Link [LNKG] (IRQs 1 3 4 5 6 7 10 12 
14 15) *11
[    0.180055] ACPI: PCI Interrupt Link [LNKH] (IRQs 1 3 4 5 6 *7 11 12 
14 15)
[    0.180106] HEST: Table is not found!
[    0.180169] vgaarb: device added: 
PCI:0000:00:02.0,decodes=io+mem,owns=io+mem,locks=none
[    0.180184] vgaarb: loaded
[    0.180292] SCSI subsystem initialized
[    0.180308] libata version 3.00 loaded.
[    0.180308] usbcore: registered new interface driver usbfs
[    0.180308] usbcore: registered new interface driver hub
[    0.180308] usbcore: registered new device driver usb
[    0.180308] PCI: Using ACPI for IRQ routing
[    0.180308] PCI: pci_cache_line_size set to 64 bytes
[    0.180308] reserve RAM buffer: 000000000009f400 - 000000000009ffff
[    0.180308] reserve RAM buffer: 000000007b6a1000 - 000000007bffffff
[    0.180308] reserve RAM buffer: 000000007b7ca000 - 000000007bffffff
[    0.180308] reserve RAM buffer: 000000007b909000 - 000000007bffffff
[    0.180308] reserve RAM buffer: 000000007bb19000 - 000000007bffffff
[    0.180308] reserve RAM buffer: 000000007bb64000 - 000000007bffffff
[    0.180308] reserve RAM buffer: 000000007bbe1000 - 000000007bffffff
[    0.180308] reserve RAM buffer: 000000007bc00000 - 000000007bffffff
[    0.180308] NetLabel: Initializing
[    0.180308] NetLabel:  domain hash size = 128
[    0.180308] NetLabel:  protocols = UNLABELED CIPSOv4
[    0.180308] NetLabel:  unlabeled traffic allowed by default
[    0.180308] HPET: 4 timers in total, 0 timers will be used for 
per-cpu timer
[    0.180310] hpet0: at MMIO 0xfed00000, IRQs 2, 8, 0, 0
[    0.180315] hpet0: 4 comparators, 64-bit 14.318180 MHz counter
[    0.183017] Switching to clocksource tsc
[    0.196025] pnp: PnP ACPI init
[    0.196049] ACPI: bus type pnp registered
[    0.198566] pnp 00:00: [bus 00-ff]
[    0.198569] pnp 00:00: [io  0x0000-0x0cf7 window]
[    0.198571] pnp 00:00: [io  0x0cf8-0x0cff]
[    0.198574] pnp 00:00: [io  0x0d00-0xffff window]
[    0.198576] pnp 00:00: [mem 0x000a0000-0x000bffff window]
[    0.198578] pnp 00:00: [mem 0x000c0000-0x000c3fff window]
[    0.198581] pnp 00:00: [mem 0x000c4000-0x000c7fff window]
[    0.198583] pnp 00:00: [mem 0x000c8000-0x000cbfff window]
[    0.198586] pnp 00:00: [mem 0x000cc000-0x000cffff window]
[    0.198588] pnp 00:00: [mem 0x000d0000-0x000d3fff window]
[    0.198590] pnp 00:00: [mem 0x000d4000-0x000d7fff window]
[    0.198593] pnp 00:00: [mem 0x000d8000-0x000dbfff window]
[    0.198595] pnp 00:00: [mem 0x000dc000-0x000dffff window]
[    0.198598] pnp 00:00: [mem 0x000e0000-0x000e3fff window]
[    0.198600] pnp 00:00: [mem 0x000e4000-0x000e7fff window]
[    0.198602] pnp 00:00: [mem 0x000e8000-0x000ebfff window]
[    0.198605] pnp 00:00: [mem 0x000ec000-0x000effff window]
[    0.198607] pnp 00:00: [mem 0x000f0000-0x000fffff window]
[    0.198610] pnp 00:00: [mem 0x80000000-0xdfffffff window]
[    0.198612] pnp 00:00: [mem 0xf0000000-0xfebfffff window]
[    0.198615] pnp 00:00: [mem 0xfed40000-0xfed44fff window]
[    0.198677] pnp 00:00: Plug and Play ACPI device, IDs PNP0a08 PNP0a03 
(active)
[    0.198786] pnp 00:01: [io  0x0000-0x001f]
[    0.198788] pnp 00:01: [io  0x0081-0x0091]
[    0.198790] pnp 00:01: [io  0x0093-0x009f]
[    0.198792] pnp 00:01: [io  0x00c0-0x00df]
[    0.198795] pnp 00:01: [dma 4]
[    0.198823] pnp 00:01: Plug and Play ACPI device, IDs PNP0200 (active)
[    0.198989] pnp 00:02: [mem 0xfed00000-0xfed003ff]
[    0.199043] pnp 00:02: Plug and Play ACPI device, IDs PNP0103 PNP0c01 
(active)
[    0.199059] pnp 00:03: [io  0x00f0]
[    0.199069] pnp 00:03: [irq 13]
[    0.199097] pnp 00:03: Plug and Play ACPI device, IDs PNP0c04 (active)
[    0.199113] pnp 00:04: [io  0x002e-0x002f]
[    0.199115] pnp 00:04: [io  0x0061]
[    0.199117] pnp 00:04: [io  0x0063]
[    0.199119] pnp 00:04: [io  0x0065]
[    0.199120] pnp 00:04: [io  0x0067]
[    0.199122] pnp 00:04: [io  0x0068-0x006f]
[    0.199124] pnp 00:04: [io  0x0070]
[    0.199126] pnp 00:04: [io  0x0080]
[    0.199131] pnp 00:04: [io  0x0092]
[    0.199133] pnp 00:04: [io  0x00b2-0x00b3]
[    0.199135] pnp 00:04: [io  0x0680-0x069f]
[    0.199137] pnp 00:04: [io  0x0480-0x048f]
[    0.199139] pnp 00:04: [io  0xffff]
[    0.199141] pnp 00:04: [io  0xffff]
[    0.199143] pnp 00:04: [io  0x1000-0x107f]
[    0.199145] pnp 00:04: [io  0x1180-0x11ff]
[    0.199147] pnp 00:04: [io  0x164e-0x164f]
[    0.199148] pnp 00:04: [io  0xfe00]
[    0.199150] pnp 00:04: [io  0x0400-0x047f]
[    0.199186] pnp 00:04: disabling [io  0x002e-0x002f] because it 
overlaps 0000:09:00.0 BAR 2 [io  0x0000-0x007f]
[    0.199189] pnp 00:04: disabling [io  0x0061] because it overlaps 
0000:09:00.0 BAR 2 [io  0x0000-0x007f]
[    0.199193] pnp 00:04: disabling [io  0x0063] because it overlaps 
0000:09:00.0 BAR 2 [io  0x0000-0x007f]
[    0.199196] pnp 00:04: disabling [io  0x0065] because it overlaps 
0000:09:00.0 BAR 2 [io  0x0000-0x007f]
[    0.199199] pnp 00:04: disabling [io  0x0067] because it overlaps 
0000:09:00.0 BAR 2 [io  0x0000-0x007f]
[    0.199202] pnp 00:04: disabling [io  0x0068-0x006f] because it 
overlaps 0000:09:00.0 BAR 2 [io  0x0000-0x007f]
[    0.199205] pnp 00:04: disabling [io  0x0070] because it overlaps 
0000:09:00.0 BAR 2 [io  0x0000-0x007f]
[    0.199235] pnp 00:04: Plug and Play ACPI device, IDs PNP0c02 (active)
[    0.199248] pnp 00:05: [io  0x0070-0x0077]
[    0.199253] pnp 00:05: [irq 8]
[    0.199284] pnp 00:05: Plug and Play ACPI device, IDs PNP0b00 (active)
[    0.199946] pnp 00:06: [io  0x0060]
[    0.199948] pnp 00:06: [io  0x0064]
[    0.199954] pnp 00:06: [irq 1]
[    0.199985] pnp 00:06: Plug and Play ACPI device, IDs PNP0303 (active)
[    0.200000] pnp 00:07: [irq 12]
[    0.200033] pnp 00:07: Plug and Play ACPI device, IDs SYN1b20 SYN1b00 
SYN0002 PNP0f13 (active)
[    0.200235] pnp 00:08: [mem 0xfed1c000-0xfed1ffff]
[    0.200238] pnp 00:08: [mem 0xfed10000-0xfed13fff]
[    0.200240] pnp 00:08: [mem 0xfed18000-0xfed18fff]
[    0.200242] pnp 00:08: [mem 0xfed19000-0xfed19fff]
[    0.200244] pnp 00:08: [mem 0xe0000000-0xefffffff]
[    0.200246] pnp 00:08: [mem 0xfed20000-0xfed3ffff]
[    0.200249] pnp 00:08: [mem 0xfed45000-0xfed8ffff]
[    0.200308] pnp 00:08: Plug and Play ACPI device, IDs PNP0c02 (active)
[    0.200662] pnp: PnP ACPI: found 9 devices
[    0.200664] ACPI: ACPI bus type pnp unregistered
[    0.200677] system 00:02: [mem 0xfed00000-0xfed003ff] has been reserved
[    0.200684] system 00:04: [io  0x0680-0x069f] has been reserved
[    0.200686] system 00:04: [io  0x0480-0x048f] has been reserved
[    0.200689] system 00:04: [io  0xffff] has been reserved
[    0.200692] system 00:04: [io  0xffff] has been reserved
[    0.200695] system 00:04: [io  0x1000-0x107f] has been reserved
[    0.200698] system 00:04: [io  0x1180-0x11ff] has been reserved
[    0.200701] system 00:04: [io  0x164e-0x164f] has been reserved
[    0.200704] system 00:04: [io  0xfe00] has been reserved
[    0.200706] system 00:04: [io  0x0400-0x047f] has been reserved
[    0.200713] system 00:08: [mem 0xfed1c000-0xfed1ffff] has been reserved
[    0.200716] system 00:08: [mem 0xfed10000-0xfed13fff] has been reserved
[    0.200719] system 00:08: [mem 0xfed18000-0xfed18fff] has been reserved
[    0.200723] system 00:08: [mem 0xfed19000-0xfed19fff] has been reserved
[    0.200726] system 00:08: [mem 0xe0000000-0xefffffff] has been reserved
[    0.200729] system 00:08: [mem 0xfed20000-0xfed3ffff] has been reserved
[    0.200732] system 00:08: [mem 0xfed45000-0xfed8ffff] has been reserved
[    0.237147] pci 0000:00:1c.0: BAR 14: assigned [mem 
0x80000000-0x801fffff]
[    0.237152] pci 0000:00:1c.0: BAR 15: assigned [mem 
0x80200000-0x803fffff 64bit pref]
[    0.237155] pci 0000:00:1c.3: BAR 14: assigned [mem 
0x80400000-0x805fffff]
[    0.237159] pci 0000:00:1c.3: BAR 15: assigned [mem 
0x80600000-0x807fffff 64bit pref]
[    0.237162] pci 0000:00:1c.5: BAR 14: assigned [mem 
0x80800000-0x809fffff]
[    0.237165] pci 0000:00:1c.5: BAR 15: assigned [mem 
0x80a00000-0x80bfffff 64bit pref]
[    0.237169] pci 0000:00:1c.0: BAR 13: assigned [io  0x2000-0x2fff]
[    0.237172] pci 0000:00:1c.3: BAR 13: assigned [io  0x3000-0x3fff]
[    0.237175] pci 0000:00:1c.5: BAR 13: assigned [io  0x4000-0x4fff]
[    0.237178] pci 0000:00:1f.3: BAR 0: assigned [mem 
0x80c00000-0x80c000ff 64bit]
[    0.237187] pci 0000:00:1f.3: BAR 0: set to [mem 
0x80c00000-0x80c000ff 64bit] (PCI address [0x80c00000-0x80c000ff]
[    0.237190] pci 0000:00:1c.0: PCI bridge to [bus 02-04]
[    0.237194] pci 0000:00:1c.0:   bridge window [io  0x2000-0x2fff]
[    0.237201] pci 0000:00:1c.0:   bridge window [mem 0x80000000-0x801fffff]
[    0.237206] pci 0000:00:1c.0:   bridge window [mem 
0x80200000-0x803fffff 64bit pref]
[    0.237215] pci 0000:07:00.0: BAR 0: assigned [mem 
0x80400000-0x8040ffff 64bit]
[    0.237226] pci 0000:07:00.0: BAR 0: set to [mem 
0x80400000-0x8040ffff 64bit] (PCI address [0x80400000-0x8040ffff]
[    0.237229] pci 0000:00:1c.3: PCI bridge to [bus 07-07]
[    0.237233] pci 0000:00:1c.3:   bridge window [io  0x3000-0x3fff]
[    0.237239] pci 0000:00:1c.3:   bridge window [mem 0x80400000-0x805fffff]
[    0.237245] pci 0000:00:1c.3:   bridge window [mem 
0x80600000-0x807fffff 64bit pref]
[    0.237254] pci 0000:09:00.0: BAR 0: assigned [mem 
0x80800000-0x8083ffff 64bit]
[    0.237265] pci 0000:09:00.0: BAR 0: set to [mem 
0x80800000-0x8083ffff 64bit] (PCI address [0x80800000-0x8083ffff]
[    0.237268] pci 0000:09:00.0: BAR 2: assigned [io  0x4000-0x407f]
[    0.237275] pci 0000:09:00.0: BAR 2: set to [io  0x4000-0x407f] (PCI 
address [0x4000-0x407f]
[    0.237277] pci 0000:00:1c.5: PCI bridge to [bus 09-09]
[    0.237281] pci 0000:00:1c.5:   bridge window [io  0x4000-0x4fff]
[    0.237288] pci 0000:00:1c.5:   bridge window [mem 0x80800000-0x809fffff]
[    0.237293] pci 0000:00:1c.5:   bridge window [mem 
0x80a00000-0x80bfffff 64bit pref]
[    0.237301] pci 0000:00:1e.0: PCI bridge to [bus 0a-0a]
[    0.237303] pci 0000:00:1e.0:   bridge window [io  disabled]
[    0.237309] pci 0000:00:1e.0:   bridge window [mem disabled]
[    0.237314] pci 0000:00:1e.0:   bridge window [mem pref disabled]
[    0.237329] pci 0000:00:1c.0: enabling device (0000 -> 0003)
[    0.237339] pci 0000:00:1c.0: PCI INT A -> GSI 17 (level, low) -> IRQ 17
[    0.237346] pci 0000:00:1c.0: setting latency timer to 64
[    0.237356] pci 0000:00:1c.3: enabling device (0000 -> 0003)
[    0.237362] pci 0000:00:1c.3: PCI INT D -> GSI 19 (level, low) -> IRQ 19
[    0.237368] pci 0000:00:1c.3: setting latency timer to 64
[    0.237378] pci 0000:00:1c.5: enabling device (0000 -> 0003)
[    0.237383] pci 0000:00:1c.5: PCI INT B -> GSI 16 (level, low) -> IRQ 16
[    0.237389] pci 0000:00:1c.5: setting latency timer to 64
[    0.237398] pci 0000:00:1e.0: setting latency timer to 64
[    0.237402] pci_bus 0000:00: resource 0 [io  0x0000-0xffff]
[    0.237405] pci_bus 0000:00: resource 1 [mem 0x00000000-0xffffffff]
[    0.237407] pci_bus 0000:02: resource 0 [io  0x2000-0x2fff]
[    0.237409] pci_bus 0000:02: resource 1 [mem 0x80000000-0x801fffff]
[    0.237412] pci_bus 0000:02: resource 2 [mem 0x80200000-0x803fffff 
64bit pref]
[    0.237414] pci_bus 0000:07: resource 0 [io  0x3000-0x3fff]
[    0.237417] pci_bus 0000:07: resource 1 [mem 0x80400000-0x805fffff]
[    0.237419] pci_bus 0000:07: resource 2 [mem 0x80600000-0x807fffff 
64bit pref]
[    0.237422] pci_bus 0000:09: resource 0 [io  0x4000-0x4fff]
[    0.237424] pci_bus 0000:09: resource 1 [mem 0x80800000-0x809fffff]
[    0.237427] pci_bus 0000:09: resource 2 [mem 0x80a00000-0x80bfffff 
64bit pref]
[    0.237429] pci_bus 0000:0a: resource 4 [io  0x0000-0xffff]
[    0.237432] pci_bus 0000:0a: resource 5 [mem 0x00000000-0xffffffff]
[    0.237458] NET: Registered protocol family 2
[    0.237492] IP route cache hash table entries: 32768 (order: 5, 
131072 bytes)
[    0.237616] TCP established hash table entries: 131072 (order: 8, 
1048576 bytes)
[    0.238071] TCP bind hash table entries: 65536 (order: 7, 524288 bytes)
[    0.238325] TCP: Hash tables configured (established 131072 bind 65536)
[    0.238328] TCP reno registered
[    0.238332] UDP hash table entries: 512 (order: 2, 16384 bytes)
[    0.238343] UDP-Lite hash table entries: 512 (order: 2, 16384 bytes)
[    0.238461] NET: Registered protocol family 1
[    0.238479] pci 0000:00:02.0: Boot video device
[    0.238668] PCI: CLS 64 bytes, default 64
[    0.238737] Trying to unpack rootfs image as initramfs...
[    0.593744] Freeing initrd memory: 12296k freed
[    0.600322] Simple Boot Flag at 0x36 set to 0x1
[    0.600686] apm: BIOS not found.
[    0.600853] audit: initializing netlink socket (disabled)
[    0.600868] type=2000 audit(1303915207.599:1): initialized
[    0.613878] highmem bounce pool size: 64 pages
[    0.613883] HugeTLB registered 4 MB page size, pre-allocated 0 pages
[    0.615407] VFS: Disk quotas dquot_6.5.2
[    0.615459] Dquot-cache hash table entries: 1024 (order 0, 4096 bytes)
[    0.615968] msgmni has been set to 1690
[    0.616029] SELinux:  Registering netfilter hooks
[    0.616325] alg: No test for stdrng (krng)
[    0.616383] Block layer SCSI generic (bsg) driver version 0.4 loaded 
(major 253)
[    0.616386] io scheduler noop registered
[    0.616388] io scheduler deadline registered
[    0.616402] io scheduler cfq registered (default)
[    0.616586] pcieport 0000:00:1c.0: setting latency timer to 64
[    0.616643] pcieport 0000:00:1c.0: irq 40 for MSI/MSI-X
[    0.616753] pcieport 0000:00:1c.3: setting latency timer to 64
[    0.616814] pcieport 0000:00:1c.3: irq 41 for MSI/MSI-X
[    0.616922] pcieport 0000:00:1c.5: setting latency timer to 64
[    0.616973] pcieport 0000:00:1c.5: irq 42 for MSI/MSI-X
[    0.617092] pci_hotplug: PCI Hot Plug PCI Core version: 0.5
[    0.617220] pciehp: PCI Express Hot Plug Controller Driver version: 0.4
[    0.617222] acpiphp: ACPI Hot Plug PCI Controller Driver version: 0.5
[    0.617645] intel_idle: MWAIT substates: 0x2220
[    0.617647] intel_idle: does not run on family 6 model 23
[    0.618896] ACPI: AC Adapter [ACAD] (on-line)
[    0.618980] input: Lid Switch as 
/devices/LNXSYSTM:00/LNXSYBUS:00/PNP0C0D:00/input/input0
[    0.619054] ACPI: Lid Switch [LID]
[    0.619101] input: Power Button as 
/devices/LNXSYSTM:00/LNXSYBUS:00/PNP0C0C:00/input/input1
[    0.619105] ACPI: Power Button [PWRB]
[    0.619151] input: Sleep Button as 
/devices/LNXSYSTM:00/LNXSYBUS:00/PNP0C0E:00/input/input2
[    0.619154] ACPI: Sleep Button [SLPB]
[    0.619213] input: Power Button as 
/devices/LNXSYSTM:00/LNXPWRBN:00/input/input3
[    0.619217] ACPI: Power Button [PWRF]
[    0.619574] ACPI: acpi_idle registered with cpuidle
[    0.622174] Monitor-Mwait will be used to enter C-1 state
[    0.622197] Monitor-Mwait will be used to enter C-2 state
[    0.622218] Monitor-Mwait will be used to enter C-3 state
[    0.622223] Marking TSC unstable due to TSC halts in idle
[    0.622270] Switching to clocksource hpet
[    0.633073] thermal LNXTHERM:01: registered as thermal_zone0
[    0.633081] ACPI: Thermal Zone [THRM] (37 C)
[    0.633094] ERST: Table is not found!
[    0.633107] isapnp: Scanning for PnP cards...
[    0.635075] ACPI: Battery Slot [BAT1] (battery absent)
[    0.990291] isapnp: No Plug & Play device found
[    0.990633] Non-volatile memory driver v1.3
[    0.990635] Linux agpgart interface v0.103
[    0.990777] agpgart-intel 0000:00:00.0: Intel GM45 Chipset
[    0.991802] agpgart-intel 0000:00:00.0: detected 65532K stolen 
memory, trimming to 32768K
[    1.018244] agpgart-intel 0000:00:00.0: AGP aperture is 256M @ 0xd0000000
[    1.018341] Serial: 8250/16550 driver, 4 ports, IRQ sharing enabled
[    1.019939] brd: module loaded
[    1.020559] loop: module loaded
[    1.020645] ahci 0000:00:1f.2: version 3.0
[    1.020662] ahci 0000:00:1f.2: PCI INT B -> GSI 19 (level, low) -> IRQ 19
[    1.020710] ahci 0000:00:1f.2: irq 43 for MSI/MSI-X
[    1.020797] ahci 0000:00:1f.2: AHCI 0001.0200 32 slots 4 ports 3 Gbps 
0x33 impl SATA mode
[    1.020802] ahci 0000:00:1f.2: flags: 64bit ncq sntf pm led clo pmp 
pio slum part ccc sxs
[    1.020807] ahci 0000:00:1f.2: setting latency timer to 64
[    1.021116] scsi0 : ahci
[    1.021233] scsi1 : ahci
[    1.021311] scsi2 : ahci
[    1.021389] scsi3 : ahci
[    1.021467] scsi4 : ahci
[    1.021546] scsi5 : ahci
[    1.021754] ata1: SATA max UDMA/133 abar m2048 at 0xf0904000 port 
0xf0904100 irq 43
[    1.021758] ata2: SATA max UDMA/133 abar m2048 at 0xf0904000 port 
0xf0904180 irq 43
[    1.021760] ata3: DUMMY
[    1.021762] ata4: DUMMY
[    1.021765] ata5: SATA max UDMA/133 abar m2048 at 0xf0904000 port 
0xf0904300 irq 43
[    1.021769] ata6: SATA max UDMA/133 abar m2048 at 0xf0904000 port 
0xf0904380 irq 43
[    1.021878] Fixed MDIO Bus: probed
[    1.021968] ehci_hcd: USB 2.0 'Enhanced' Host Controller (EHCI) Driver
[    1.021995] ehci_hcd 0000:00:1a.7: PCI INT C -> GSI 19 (level, low) 
-> IRQ 19
[    1.022030] ehci_hcd 0000:00:1a.7: setting latency timer to 64
[    1.022033] ehci_hcd 0000:00:1a.7: EHCI Host Controller
[    1.022090] ehci_hcd 0000:00:1a.7: new USB bus registered, assigned 
bus number 1
[    1.022127] ehci_hcd 0000:00:1a.7: debug port 1
[    1.025997] ehci_hcd 0000:00:1a.7: cache line size of 64 is not supported
[    1.026023] ehci_hcd 0000:00:1a.7: irq 19, io mem 0xf0904800
[    1.035020] ehci_hcd 0000:00:1a.7: USB 2.0 started, EHCI 1.00
[    1.035045] usb usb1: New USB device found, idVendor=1d6b, idProduct=0002
[    1.035048] usb usb1: New USB device strings: Mfr=3, Product=2, 
SerialNumber=1
[    1.035050] usb usb1: Product: EHCI Host Controller
[    1.035052] usb usb1: Manufacturer: Linux 2.6.35.12-88.fc14.i686 ehci_hcd
[    1.035054] usb usb1: SerialNumber: 0000:00:1a.7
[    1.035170] hub 1-0:1.0: USB hub found
[    1.035174] hub 1-0:1.0: 4 ports detected
[    1.035258] ehci_hcd 0000:00:1d.7: PCI INT A -> GSI 23 (level, low) 
-> IRQ 23
[    1.035273] ehci_hcd 0000:00:1d.7: setting latency timer to 64
[    1.035276] ehci_hcd 0000:00:1d.7: EHCI Host Controller
[    1.035316] ehci_hcd 0000:00:1d.7: new USB bus registered, assigned 
bus number 2
[    1.035350] ehci_hcd 0000:00:1d.7: debug port 1
[    1.039243] ehci_hcd 0000:00:1d.7: cache line size of 64 is not supported
[    1.039261] ehci_hcd 0000:00:1d.7: irq 23, io mem 0xf0904c00
[    1.049019] ehci_hcd 0000:00:1d.7: USB 2.0 started, EHCI 1.00
[    1.049036] usb usb2: New USB device found, idVendor=1d6b, idProduct=0002
[    1.049038] usb usb2: New USB device strings: Mfr=3, Product=2, 
SerialNumber=1
[    1.049041] usb usb2: Product: EHCI Host Controller
[    1.049043] usb usb2: Manufacturer: Linux 2.6.35.12-88.fc14.i686 ehci_hcd
[    1.049045] usb usb2: SerialNumber: 0000:00:1d.7
[    1.049146] hub 2-0:1.0: USB hub found
[    1.049150] hub 2-0:1.0: 8 ports detected
[    1.049235] ohci_hcd: USB 1.1 'Open' Host Controller (OHCI) Driver
[    1.049251] uhci_hcd: USB Universal Host Controller Interface driver
[    1.049279] uhci_hcd 0000:00:1a.0: PCI INT A -> GSI 16 (level, low) 
-> IRQ 16
[    1.049286] uhci_hcd 0000:00:1a.0: setting latency timer to 64
[    1.049289] uhci_hcd 0000:00:1a.0: UHCI Host Controller
[    1.049334] uhci_hcd 0000:00:1a.0: new USB bus registered, assigned 
bus number 3
[    1.049372] uhci_hcd 0000:00:1a.0: irq 16, io base 0x00001820
[    1.049405] usb usb3: New USB device found, idVendor=1d6b, idProduct=0001
[    1.049408] usb usb3: New USB device strings: Mfr=3, Product=2, 
SerialNumber=1
[    1.049410] usb usb3: Product: UHCI Host Controller
[    1.049412] usb usb3: Manufacturer: Linux 2.6.35.12-88.fc14.i686 uhci_hcd
[    1.049414] usb usb3: SerialNumber: 0000:00:1a.0
[    1.049515] hub 3-0:1.0: USB hub found
[    1.049521] hub 3-0:1.0: 2 ports detected
[    1.049590] uhci_hcd 0000:00:1a.1: PCI INT B -> GSI 21 (level, low) 
-> IRQ 21
[    1.049597] uhci_hcd 0000:00:1a.1: setting latency timer to 64
[    1.049600] uhci_hcd 0000:00:1a.1: UHCI Host Controller
[    1.049644] uhci_hcd 0000:00:1a.1: new USB bus registered, assigned 
bus number 4
[    1.049679] uhci_hcd 0000:00:1a.1: irq 21, io base 0x00001840
[    1.049712] usb usb4: New USB device found, idVendor=1d6b, idProduct=0001
[    1.049714] usb usb4: New USB device strings: Mfr=3, Product=2, 
SerialNumber=1
[    1.049717] usb usb4: Product: UHCI Host Controller
[    1.049719] usb usb4: Manufacturer: Linux 2.6.35.12-88.fc14.i686 uhci_hcd
[    1.049721] usb usb4: SerialNumber: 0000:00:1a.1
[    1.049814] hub 4-0:1.0: USB hub found
[    1.049818] hub 4-0:1.0: 2 ports detected
[    1.049887] uhci_hcd 0000:00:1d.0: PCI INT A -> GSI 23 (level, low) 
-> IRQ 23
[    1.049894] uhci_hcd 0000:00:1d.0: setting latency timer to 64
[    1.049897] uhci_hcd 0000:00:1d.0: UHCI Host Controller
[    1.049935] uhci_hcd 0000:00:1d.0: new USB bus registered, assigned 
bus number 5
[    1.049962] uhci_hcd 0000:00:1d.0: irq 23, io base 0x00001860
[    1.049996] usb usb5: New USB device found, idVendor=1d6b, idProduct=0001
[    1.049999] usb usb5: New USB device strings: Mfr=3, Product=2, 
SerialNumber=1
[    1.050018] usb usb5: Product: UHCI Host Controller
[    1.050020] usb usb5: Manufacturer: Linux 2.6.35.12-88.fc14.i686 uhci_hcd
[    1.050022] usb usb5: SerialNumber: 0000:00:1d.0
[    1.050122] hub 5-0:1.0: USB hub found
[    1.050126] hub 5-0:1.0: 2 ports detected
[    1.050193] uhci_hcd 0000:00:1d.1: PCI INT B -> GSI 19 (level, low) 
-> IRQ 19
[    1.050199] uhci_hcd 0000:00:1d.1: setting latency timer to 64
[    1.050202] uhci_hcd 0000:00:1d.1: UHCI Host Controller
[    1.050243] uhci_hcd 0000:00:1d.1: new USB bus registered, assigned 
bus number 6
[    1.050271] uhci_hcd 0000:00:1d.1: irq 19, io base 0x00001880
[    1.050304] usb usb6: New USB device found, idVendor=1d6b, idProduct=0001
[    1.050306] usb usb6: New USB device strings: Mfr=3, Product=2, 
SerialNumber=1
[    1.050309] usb usb6: Product: UHCI Host Controller
[    1.050311] usb usb6: Manufacturer: Linux 2.6.35.12-88.fc14.i686 uhci_hcd
[    1.050313] usb usb6: SerialNumber: 0000:00:1d.1
[    1.050410] hub 6-0:1.0: USB hub found
[    1.050414] hub 6-0:1.0: 2 ports detected
[    1.050485] uhci_hcd 0000:00:1d.2: PCI INT C -> GSI 18 (level, low) 
-> IRQ 18
[    1.050492] uhci_hcd 0000:00:1d.2: setting latency timer to 64
[    1.050495] uhci_hcd 0000:00:1d.2: UHCI Host Controller
[    1.050533] uhci_hcd 0000:00:1d.2: new USB bus registered, assigned 
bus number 7
[    1.050569] uhci_hcd 0000:00:1d.2: irq 18, io base 0x000018a0
[    1.050601] usb usb7: New USB device found, idVendor=1d6b, idProduct=0001
[    1.050604] usb usb7: New USB device strings: Mfr=3, Product=2, 
SerialNumber=1
[    1.050606] usb usb7: Product: UHCI Host Controller
[    1.050608] usb usb7: Manufacturer: Linux 2.6.35.12-88.fc14.i686 uhci_hcd
[    1.050610] usb usb7: SerialNumber: 0000:00:1d.2
[    1.050705] hub 7-0:1.0: USB hub found
[    1.050709] hub 7-0:1.0: 2 ports detected
[    1.050775] uhci_hcd 0000:00:1d.3: PCI INT D -> GSI 16 (level, low) 
-> IRQ 16
[    1.050782] uhci_hcd 0000:00:1d.3: setting latency timer to 64
[    1.050786] uhci_hcd 0000:00:1d.3: UHCI Host Controller
[    1.050826] uhci_hcd 0000:00:1d.3: new USB bus registered, assigned 
bus number 8
[    1.050854] uhci_hcd 0000:00:1d.3: irq 16, io base 0x000018c0
[    1.050889] usb usb8: New USB device found, idVendor=1d6b, idProduct=0001
[    1.050892] usb usb8: New USB device strings: Mfr=3, Product=2, 
SerialNumber=1
[    1.050894] usb usb8: Product: UHCI Host Controller
[    1.050896] usb usb8: Manufacturer: Linux 2.6.35.12-88.fc14.i686 uhci_hcd
[    1.050898] usb usb8: SerialNumber: 0000:00:1d.3
[    1.050990] hub 8-0:1.0: USB hub found
[    1.050994] hub 8-0:1.0: 2 ports detected
[    1.051139] PNP: PS/2 Controller [PNP0303:PS2K,PNP0f13:PS2M] at 
0x60,0x64 irq 1,12
[    1.058323] i8042.c: Detected active multiplexing controller, rev 1.1.
[    1.062144] serio: i8042 KBD port at 0x60,0x64 irq 1
[    1.062152] serio: i8042 AUX0 port at 0x60,0x64 irq 12
[    1.062155] serio: i8042 AUX1 port at 0x60,0x64 irq 12
[    1.062159] serio: i8042 AUX2 port at 0x60,0x64 irq 12
[    1.062162] serio: i8042 AUX3 port at 0x60,0x64 irq 12
[    1.062218] mice: PS/2 mouse device common for all mice
[    1.062454] rtc_cmos 00:05: RTC can wake from S4
[    1.062507] rtc_cmos 00:05: rtc core: registered rtc_cmos as rtc0
[    1.062540] rtc0: alarms up to one month, y3k, 242 bytes nvram, hpet irqs
[    1.062649] device-mapper: uevent: version 1.0.3
[    1.062771] device-mapper: ioctl: 4.19.1-ioctl (2010-10-12) 
initialised: dm-devel at redhat.com
[    1.062937] cpuidle: using governor ladder
[    1.063051] cpuidle: using governor menu
[    1.063292] usbcore: registered new interface driver hiddev
[    1.063307] usbcore: registered new interface driver usbhid
[    1.063309] usbhid: USB HID core driver
[    1.063333] nf_conntrack version 0.5.0 (16384 buckets, 65536 max)
[    1.063459] CONFIG_NF_CT_ACCT is deprecated and will be removed soon. 
Please use
[    1.063461] nf_conntrack.acct=1 kernel parameter, acct=1 nf_conntrack 
module option or
[    1.063463] sysctl net.netfilter.nf_conntrack_acct=1 to enable it.
[    1.063543] ip_tables: (C) 2000-2006 Netfilter Core Team
[    1.063557] TCP cubic registered
[    1.063558] Initializing XFRM netlink socket
[    1.063568] NET: Registered protocol family 17
[    1.063603] Using IPI No-Shortcut mode
[    1.063697] PM: Resume from disk failed.
[    1.063711] registered taskstats version 1
[    1.064059]   Magic number: 7:633:688
[    1.064159] rtc_cmos 00:05: setting system clock to 2011-04-27 
14:40:08 UTC (1303915208)
[    1.064240] Initalizing network drop monitor service
[    1.087658] input: AT Translated Set 2 keyboard as 
/devices/platform/i8042/serio0/input/input4
[    1.328069] ata5: SATA link down (SStatus 0 SControl 300)
[    1.328091] ata6: SATA link down (SStatus 0 SControl 300)
[    1.351082] usb 2-8: new high speed USB device using ehci_hcd and 
address 2
[    1.481053] ata1: SATA link up 3.0 Gbps (SStatus 123 SControl 300)
[    1.481078] ata2: SATA link up 1.5 Gbps (SStatus 113 SControl 300)
[    1.500705] ata2.00: ATAPI: TSSTcorp CDDVDW TS-L633C, AC01, max UDMA/100
[    1.500729] ata2.00: applying bridge limits
[    1.502832] usb 2-8: New USB device found, idVendor=04f2, idProduct=b044
[    1.502837] usb 2-8: New USB device strings: Mfr=2, Product=1, 
SerialNumber=3
[    1.502841] usb 2-8: Product: CNF7017
[    1.502845] usb 2-8: Manufacturer: Chicony Electronics Co., Ltd.
[    1.502848] usb 2-8: SerialNumber: SN0001
[    1.517740] ata2.00: configured for UDMA/100
[    1.853280] Synaptics Touchpad, model: 1, fw: 7.2, id: 0x1c0b1, caps: 
0xd04731/0xa44000/0xa0000
[    1.881103] ata1.00: unexpected _GTF length (8)
[    1.894859] ata1.00: ATA-8: TOSHIBA MK2555GSX, FG001J, max UDMA/100
[    1.894862] ata1.00: 488397168 sectors, multi 16: LBA48 NCQ (depth 
31/32), AA
[    1.899341] input: SynPS/2 Synaptics TouchPad as 
/devices/platform/i8042/serio2/input/input5
[    2.295099] ata1.00: unexpected _GTF length (8)
[    2.295247] ata1.00: configured for UDMA/100
[    2.306235] scsi 0:0:0:0: Direct-Access     ATA      TOSHIBA MK2555GS 
FG00 PQ: 0 ANSI: 5
[    2.306406] sd 0:0:0:0: Attached scsi generic sg0 type 0
[    2.306415] sd 0:0:0:0: [sda] 488397168 512-byte logical blocks: (250 
GB/232 GiB)
[    2.306480] sd 0:0:0:0: [sda] Write Protect is off
[    2.306483] sd 0:0:0:0: [sda] Mode Sense: 00 3a 00 00
[    2.306509] sd 0:0:0:0: [sda] Write cache: enabled, read cache: 
enabled, doesn't support DPO or FUA
[    2.306688]  sda:
[    2.311309] scsi 1:0:0:0: CD-ROM            TSSTcorp CDDVDW TS-L633C  
AC01 PQ: 0 ANSI: 5
[    2.321146] sr0: scsi3-mmc drive: 24x/24x writer dvd-ram cd/rw 
xa/form2 cdda tray
[    2.321149] Uniform CD-ROM driver Revision: 3.20
[    2.321246] sr 1:0:0:0: Attached scsi CD-ROM sr0
[    2.321317] sr 1:0:0:0: Attached scsi generic sg1 type 5
[    2.337439]  sda1 sda2 sda3 sda4
[    2.351690] sd 0:0:0:0: [sda] Attached SCSI disk
[    2.351718] Freeing unused kernel memory: 544k freed
[    2.352014] Write protecting the kernel text: 3772k
[    2.352088] Write protecting the kernel read-only data: 1836k
[    2.367582] dracut: dracut-006-6.fc14
[    2.373902] dracut: rd_NO_LUKS: removing cryptoluks activation
[    2.375117] dracut: rd_NO_LVM: removing LVM activation
[    2.382913] udev[93]: starting version 161
[    2.447167] [drm] Initialized drm 1.1.0 20060810
[    2.470274] i915 0000:00:02.0: PCI INT A -> GSI 16 (level, low) -> IRQ 16
[    2.470281] i915 0000:00:02.0: setting latency timer to 64
[    2.511412] [drm] detected 63M stolen memory, trimming to 32M
[    2.511541] i915 0000:00:02.0: irq 44 for MSI/MSI-X
[    2.511555] [drm] set up 32M of stolen space
[    2.511738] [drm:init_ring_common] *ERROR* render ring head not reset 
to zero ctl 00000000 head 02001000 tail 00000000 start 02001000
[    2.511805] [drm:init_ring_common] *ERROR* render ring head forced to 
zero ctl 00000000 head 00000000 tail 00000000 start 02001000
[    3.129839] fbcon: inteldrmfb (fb0) is primary device
[    3.399670] Console: switching to colour frame buffer device 170x48
[    3.404202] fb0: inteldrmfb frame buffer device
[    3.404203] drm: registered panic notifier
[    3.404208] Slow work thread pool: Starting up
[    3.404303] Slow work thread pool: Ready
[    3.415266] acpi device:01: registered as cooling_device2
[    3.415783] input: Video Bus as 
/devices/LNXSYSTM:00/LNXSYBUS:00/PNP0A08:00/LNXVIDEO:00/input/input6
[    3.415852] ACPI: Video Device [GFX0] (multi-head: yes  rom: no  
post: no)
[    3.415884] [drm] Initialized i915 1.6.0 20080730 for 0000:00:02.0 on 
minor 0
[    3.465527] dracut: Starting plymouth daemon
[    3.706747] dracut: rd_NO_DM: removing DM RAID activation
[    3.710607] dracut: rd_NO_MD: removing MD RAID activation
[    4.327536] EXT4-fs (sda2): mounted filesystem with ordered data 
mode. Opts: (null)
[    4.384592] dracut: Mounted root filesystem /dev/sda2
[    4.492673] dracut: Loading SELinux policy
[    4.912116] SELinux: 2048 avtab hash slots, 215688 rules.
[    4.996698] SELinux: 2048 avtab hash slots, 215688 rules.
[    5.401208] SELinux:  9 users, 14 roles, 3521 types, 184 bools, 1 
sens, 1024 cats
[    5.401215] SELinux:  81 classes, 215688 rules
[    5.407050] SELinux:  Completing initialization.
[    5.407053] SELinux:  Setting up existing superblocks.
[    5.407064] SELinux: initialized (dev sysfs, type sysfs), uses 
genfs_contexts
[    5.407072] SELinux: initialized (dev rootfs, type rootfs), uses 
genfs_contexts
[    5.407724] SELinux: initialized (dev bdev, type bdev), uses 
genfs_contexts
[    5.407732] SELinux: initialized (dev proc, type proc), uses 
genfs_contexts
[    5.407743] SELinux: initialized (dev tmpfs, type tmpfs), uses 
transition SIDs
[    5.407773] SELinux: initialized (dev devtmpfs, type devtmpfs), uses 
transition SIDs
[    5.408779] SELinux: initialized (dev sockfs, type sockfs), uses task 
SIDs
[    5.408785] SELinux: initialized (dev debugfs, type debugfs), uses 
genfs_contexts
[    5.410660] SELinux: initialized (dev pipefs, type pipefs), uses task 
SIDs
[    5.410670] SELinux: initialized (dev anon_inodefs, type 
anon_inodefs), uses genfs_contexts
[    5.410675] SELinux: initialized (dev devpts, type devpts), uses 
transition SIDs
[    5.410709] SELinux: initialized (dev hugetlbfs, type hugetlbfs), 
uses transition SIDs
[    5.410717] SELinux: initialized (dev mqueue, type mqueue), uses 
transition SIDs
[    5.410729] SELinux: initialized (dev selinuxfs, type selinuxfs), 
uses genfs_contexts
[    5.410757] SELinux: initialized (dev usbfs, type usbfs), uses 
genfs_contexts
[    5.410772] SELinux: initialized (dev sysfs, type sysfs), uses 
genfs_contexts
[    5.411636] SELinux: initialized (dev tmpfs, type tmpfs), uses 
transition SIDs
[    5.411654] SELinux: initialized (dev sda2, type ext4), uses xattr
[    5.414682] type=1403 audit(1303915212.849:2): policy loaded 
auid=4294967295 ses=4294967295
[    5.961058] dracut: Switching root
[    7.033351] readahead-collector: starting
[    8.510320] udev[439]: starting version 161
[    9.828438] microcode: CPU0 sig=0x1067a, pf=0x80, revision=0xa07
[    9.828449] microcode: CPU1 sig=0x1067a, pf=0x80, revision=0xa07
[    9.828527] microcode: Microcode Update Driver: v2.00 
<tigran at aivazian.fsnet.co.uk>, Peter Oruba
[    9.863409] i801_smbus 0000:00:1f.3: PCI INT C -> GSI 19 (level, low) 
-> IRQ 19
[    9.863417] ACPI: resource 0000:00:1f.3 [io  0x1c00-0x1c1f] conflicts 
with ACPI region SMBI [??? 0x00001c00-0x00001c0f flags 0x49]
[    9.863419] ACPI: If an ACPI driver is available for this device, you 
should use it instead of the native driver
[   10.199522] ACPI: WMI: Mapper loaded
[   10.217082] Linux media interface: v0.10
[   10.239717] iTCO_vendor_support: vendor-support=0
[   10.265426] cfg80211: Calling CRDA to update world regulatory domain
[   10.337067] atl1c 0000:09:00.0: enabling device (0000 -> 0002)
[   10.337078] atl1c 0000:09:00.0: PCI INT A -> GSI 17 (level, low) -> 
IRQ 17
[   10.337093] atl1c 0000:09:00.0: setting latency timer to 64
[   10.404375] atl1c 0000:09:00.0: version 1.0.0.2-NAPI
[   10.407221] iTCO_wdt: Intel TCO WatchDog Timer Driver v1.06
[   10.407334] iTCO_wdt: Found a ICH9M TCO device (Version=2, 
TCOBASE=0x0460)
[   10.407605] iTCO_wdt: initialized. heartbeat=30 sec (nowayout=0)
[   10.510005] microcode: CPU0 updated to revision 0xa0b, date = 2010-09-28
[   10.516843] microcode: CPU1 updated to revision 0xa0b, date = 2010-09-28
[   10.643231] Linux video capture interface: v2.00
[   10.643236] WARNING: You are using an experimental version of the 
media stack.
[   10.643237]     As the driver is backported to an older kernel, it 
doesn't offer
[   10.643238]     enough quality for its usage in production.
[   10.643239]     Use it with care.
[   10.643240] Latest git patches (needed if you report a bug to 
linux-media at vger.kernel.org):
[   10.643241]     a4761a092fd3b6bf8b5f9cfe361670c86cdcc8ca [media] 
tm6000: fix vbuf may be used uninitialized
[   10.643243]     7f925a2e2dc3716a42389c6fb46053486159c08d [media] 
lirc_sasem: key debug spew off debug modparam
[   10.643244]     852a4e05768feddd08206f12cbb39d5c31678a6b [media] 
ttusb-budget: driver has a debug param, use it
[   10.849642] uvcvideo: Found UVC 1.00 device CNF7017 (04f2:b044)
[   10.905279] input: CNF7017 as 
/devices/pci0000:00/0000:00:1d.7/usb2/2-8/2-8:1.0/input/input7
[   10.905371] usbcore: registered new interface driver uvcvideo
[   10.905373] USB Video Class driver (v1.0.0)
[   11.426088] ath9k 0000:07:00.0: enabling device (0000 -> 0002)
[   11.426098] ath9k 0000:07:00.0: PCI INT A -> GSI 19 (level, low) -> 
IRQ 19
[   11.426112] ath9k 0000:07:00.0: setting latency timer to 64
[   11.859716] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11108
[   11.859722] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11108
[   11.861225] ath: EEPROM regdomain: 0x65
[   11.861227] ath: EEPROM indicates we should expect a direct regpair map
[   11.861230] ath: Country alpha2 being used: 00
[   11.861232] ath: Regpair used: 0x65
[   11.861697] audit: name_count maxed, losing inode data: dev=00:07, 
inode=10906
[   11.861709] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11119
[   11.861714] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11119
[   11.861719] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11119
[   11.861731] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11119
[   11.861735] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11119
[   11.861788] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11119
[   11.861793] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11119
[   11.861797] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11119
[   11.861801] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11119
[   11.861805] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11119
[   11.861809] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11119
[   11.861813] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11119
[   11.861817] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11119
[   11.861821] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11119
[   11.861825] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11119
[   11.861829] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11119
[   11.861833] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11119
[   11.861837] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11119
[   11.861841] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11137
[   11.861845] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11137
[   11.861849] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11137
[   11.861853] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11137
[   11.861857] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11137
[   11.861861] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11137
[   11.861867] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11137
[   11.861876] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11137
[   11.861880] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11137
[   11.861884] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11137
[   11.861888] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11137
[   11.861892] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11137
[   11.861899] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11137
[   12.017535] HDA Intel 0000:00:1b.0: PCI INT A -> GSI 22 (level, low) 
-> IRQ 22
[   12.017611] HDA Intel 0000:00:1b.0: irq 45 for MSI/MSI-X
[   12.017647] HDA Intel 0000:00:1b.0: setting latency timer to 64
[   12.073669] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11119
[   12.073675] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11172
[   12.073678] phy0: Selected rate control algorithm 'ath9k_rate_control'
[   12.073697] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11119
[   12.073701] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11174
[   12.073706] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11174
[   12.073710] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11174
[   12.073714] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11174
[   12.073718] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11174
[   12.073722] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11174
[   12.073727] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11174
[   12.073731] audit: name_count maxed, losing inode data: dev=00:07, 
inode=11174
[   12.073918] Registered led device: ath9k-phy0::radio
[   12.073937] Registered led device: ath9k-phy0::assoc
[   12.073956] Registered led device: ath9k-phy0::tx
[   12.073976] Registered led device: ath9k-phy0::rx
[   12.073983] phy0: Atheros AR9280 Rev:2 mem=0xf9320000, irq=19
[   12.088531] input: HDA Intel Mic as 
/devices/pci0000:00/0000:00:1b.0/sound/card0/input8
[   12.088737] input: HDA Intel Mic as 
/devices/pci0000:00/0000:00:1b.0/sound/card0/input9
[   12.088912] input: HDA Intel Headphone as 
/devices/pci0000:00/0000:00:1b.0/sound/card0/input10
[   12.089334] audit: name_count maxed, losing inode data: dev=00:05, 
inode=11200
[   12.089435] audit: name_count maxed, losing inode data: dev=00:05, 
inode=11003
[   12.089447] audit: name_count maxed, losing inode data: dev=00:05, 
inode=11003
[   12.193563] cfg80211: World regulatory domain updated:
[   12.193568]     (start_freq - end_freq @ bandwidth), 
(max_antenna_gain, max_eirp)
[   12.193571]     (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 
2000 mBm)
[   12.193574]     (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 
2000 mBm)
[   12.193577]     (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 
2000 mBm)
[   12.193579]     (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 
2000 mBm)
[   12.193582]     (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 
2000 mBm)
[   12.656842] cfg80211: Calling CRDA for country: IT
[   12.662842] cfg80211: Regulatory domain changed to country: IT
[   12.662845]     (start_freq - end_freq @ bandwidth), 
(max_antenna_gain, max_eirp)
[   12.662848]     (2402000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm)
[   12.662851]     (5170000 KHz - 5250000 KHz @ 40000 KHz), (N/A, 2000 mBm)
[   12.662854]     (5250000 KHz - 5330000 KHz @ 40000 KHz), (N/A, 2000 mBm)
[   12.662856]     (5490000 KHz - 5710000 KHz @ 40000 KHz), (N/A, 2700 mBm)
[   14.300678] EXT4-fs (sda2): re-mounted. Opts: (null)
[   14.731673] EXT4-fs (sda1): mounted filesystem with ordered data 
mode. Opts: (null)
[   14.731686] SELinux: initialized (dev sda1, type ext4), uses xattr
[   14.793411] REISERFS (device sda4): found reiserfs format "3.6" with 
standard journal
[   14.793444] REISERFS (device sda4): using ordered data mode
[   14.803240] REISERFS (device sda4): journal params: device sda4, size 
8192, journal first block 18, max trans len 1024, max batch 900, max 
commit age 30, max trans age 30
[   14.803514] REISERFS (device sda4): checking transaction log (sda4)
[   14.859910] REISERFS (device sda4): Using r5 hash to sort names
[   14.910784] SELinux: initialized (dev sda4, type reiserfs), uses 
genfs_contexts
[   16.348415] Adding 3448828k swap on /dev/sda3.  Priority:-1 extents:1 
across:3448828k
[   16.355128] SELinux: initialized (dev binfmt_misc, type binfmt_misc), 
uses genfs_contexts
[   16.731274] readahead-disable-service: delaying service auditd
[   17.208476] NET: Registered protocol family 10
[   17.208711] lo: Disabled Privacy Extensions
[   17.228041] ip6_tables: (C) 2000-2006 Netfilter Core Team
[   21.300153] ADDRCONF(NETDEV_UP): wlan0: link is not ready
[   21.315104] atl1c 0000:09:00.0: irq 46 for MSI/MSI-X
[   21.315269] atl1c 0000:09:00.0: atl1c: eth0 NIC Link is Up<100 Mbps 
Full Duplex>
[   21.718099] RPC: Registered udp transport module.
[   21.718103] RPC: Registered tcp transport module.
[   21.718105] RPC: Registered tcp NFSv4.1 backchannel transport module.
[   21.733640] SELinux: initialized (dev rpc_pipefs, type rpc_pipefs), 
uses genfs_contexts
[   31.522055] eth0: no IPv6 routers present
[   38.799282] readahead-collector: starting delayed service auditd
[   39.098490] readahead-collector: sorting
[   39.233727] readahead-collector: finished
[   77.510342] fuse init (API version 7.14)
[   77.544067] SELinux: initialized (dev fusectl, type fusectl), uses 
genfs_contexts
[   77.610054] SELinux: initialized (dev fuse, type fuse), uses 
genfs_contexts
[ 3488.692444] TCP lp registered


lsusb:

Bus 002 Device 002: ID 04f2:b044 Chicony Electronics Co., Ltd Acer 
CrystalEye Webcam
Device Descriptor:
   bLength                18
   bDescriptorType         1
   bcdUSB               2.00
   bDeviceClass          239 Miscellaneous Device
   bDeviceSubClass         2 ?
   bDeviceProtocol         1 Interface Association
   bMaxPacketSize0        64
   idVendor           0x04f2 Chicony Electronics Co., Ltd
   idProduct          0xb044 Acer CrystalEye Webcam
   bcdDevice           11.12
   iManufacturer           2
   iProduct                1
   iSerial                 3
   bNumConfigurations      1
   Configuration Descriptor:
     bLength                 9
     bDescriptorType         2
     wTotalLength          524
     bNumInterfaces          2
     bConfigurationValue     1
     iConfiguration          0
     bmAttributes         0x80
       (Bus Powered)
     MaxPower              500mA
     Interface Association:
       bLength                 8
       bDescriptorType        11
       bFirstInterface         0
       bInterfaceCount         2
       bFunctionClass         14 Video
       bFunctionSubClass       3 Video Interface Collection
       bFunctionProtocol       0
       iFunction               5
     Interface Descriptor:
       bLength                 9
       bDescriptorType         4
       bInterfaceNumber        0
       bAlternateSetting       0
       bNumEndpoints           1
       bInterfaceClass        14 Video
       bInterfaceSubClass      1 Video Control
       bInterfaceProtocol      0
       iInterface              5
       VideoControl Interface Descriptor:
         bLength                13
         bDescriptorType        36
         bDescriptorSubtype      1 (HEADER)
         bcdUVC               1.00
         wTotalLength          104
         dwClockFrequency       15.000000MHz
         bInCollection           1
         baInterfaceNr( 0)       1
       VideoControl Interface Descriptor:
         bLength                 9
         bDescriptorType        36
         bDescriptorSubtype      3 (OUTPUT_TERMINAL)
         bTerminalID             2
         wTerminalType      0x0101 USB Streaming
         bAssocTerminal          0
         bSourceID               5
         iTerminal               0
       VideoControl Interface Descriptor:
         bLength                26
         bDescriptorType        36
         bDescriptorSubtype      6 (EXTENSION_UNIT)
         bUnitID                 4
         guidExtensionCode         {7033f028-1163-2e4a-ba2c-6890eb334016}
         bNumControl             8
         bNrPins                 1
         baSourceID( 0)          3
         bControlSize            1
         bmControls( 0)       0x0f
         iExtension              0
       VideoControl Interface Descriptor:
         bLength                26
         bDescriptorType        36
         bDescriptorSubtype      6 (EXTENSION_UNIT)
         bUnitID                 5
         guidExtensionCode         {3fae1228-d7bc-114e-a357-6f1edef7d61d}
         bNumControl             8
         bNrPins                 1
         baSourceID( 0)          4
         bControlSize            1
         bmControls( 0)       0xff
         iExtension              0
       VideoControl Interface Descriptor:
         bLength                18
         bDescriptorType        36
         bDescriptorSubtype      2 (INPUT_TERMINAL)
         bTerminalID             1
         wTerminalType      0x0201 Camera Sensor
         bAssocTerminal          0
         iTerminal               0
         wObjectiveFocalLengthMin      0
         wObjectiveFocalLengthMax      0
         wOcularFocalLength            0
         bControlSize                  3
         bmControls           0x00000000
       VideoControl Interface Descriptor:
         bLength                12
         bDescriptorType        36
         bDescriptorSubtype      5 (PROCESSING_UNIT)
       Warning: Descriptor too short
         bUnitID                 3
         bSourceID               1
         wMaxMultiplier          0
         bControlSize            3
         bmControls     0x000025bf
           Brightness
           Contrast
           Hue
           Saturation
           Sharpness
           Gamma
           White Balance Component
           Backlight Compensation
           Power Line Frequency
           White Balance Component, Auto
         iProcessing             0
         bmVideoStandards     0x 0
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x83  EP 3 IN
         bmAttributes            3
           Transfer Type            Interrupt
           Synch Type               None
           Usage Type               Data
         wMaxPacketSize     0x0010  1x 16 bytes
         bInterval               6
     Interface Descriptor:
       bLength                 9
       bDescriptorType         4
       bInterfaceNumber        1
       bAlternateSetting       0
       bNumEndpoints           0
       bInterfaceClass        14 Video
       bInterfaceSubClass      2 Video Streaming
       bInterfaceProtocol      0
       iInterface              0
       VideoStreaming Interface Descriptor:
         bLength                            14
         bDescriptorType                    36
         bDescriptorSubtype                  1 (INPUT_HEADER)
         bNumFormats                         1
         wTotalLength                      277
         bEndPointAddress                  129
         bmInfo                              0
         bTerminalLink                       2
         bStillCaptureMethod                 0
         bTriggerSupport                     1
         bTriggerUsage                       1
         bControlSize                        1
         bmaControls( 0)                    27
       VideoStreaming Interface Descriptor:
         bLength                            27
         bDescriptorType                    36
         bDescriptorSubtype                  4 (FORMAT_UNCOMPRESSED)
         bFormatIndex                        1
         bNumFrameDescriptors                5
         guidFormat                            
{59555932-0000-1000-8000-00aa00389b71}
         bBitsPerPixel                      16
         bDefaultFrameIndex                  1
         bAspectRatioX                       0
         bAspectRatioY                       0
         bmInterlaceFlags                 0x00
           Interlaced stream or variable: No
           Fields per frame: 1 fields
           Field 1 first: No
           Field pattern: Field 1 only
           bCopyProtect                      0
       VideoStreaming Interface Descriptor:
         bLength                            46
         bDescriptorType                    36
         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
         bFrameIndex                         1
         bmCapabilities                   0x00
           Still image unsupported
         wWidth                            640
         wHeight                           480
         dwMinBitRate                  3072000
         dwMaxBitRate                 18432000
         dwMaxVideoFrameBufferSize      614400
         dwDefaultFrameInterval         333333
         bFrameIntervalType                  5
         dwFrameInterval( 0)            333333
         dwFrameInterval( 1)            500000
         dwFrameInterval( 2)            666666
         dwFrameInterval( 3)           1000000
         dwFrameInterval( 4)           2000000
       VideoStreaming Interface Descriptor:
         bLength                            46
         bDescriptorType                    36
         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
         bFrameIndex                         2
         bmCapabilities                   0x00
           Still image unsupported
         wWidth                            352
         wHeight                           288
         dwMinBitRate                  1013760
         dwMaxBitRate                  6082560
         dwMaxVideoFrameBufferSize      202752
         dwDefaultFrameInterval         333333
         bFrameIntervalType                  5
         dwFrameInterval( 0)            333333
         dwFrameInterval( 1)            500000
         dwFrameInterval( 2)            666666
         dwFrameInterval( 3)           1000000
         dwFrameInterval( 4)           2000000
       VideoStreaming Interface Descriptor:
         bLength                            46
         bDescriptorType                    36
         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
         bFrameIndex                         3
         bmCapabilities                   0x00
           Still image unsupported
         wWidth                            320
         wHeight                           240
         dwMinBitRate                   768000
         dwMaxBitRate                  4608000
         dwMaxVideoFrameBufferSize      153600
         dwDefaultFrameInterval         333333
         bFrameIntervalType                  5
         dwFrameInterval( 0)            333333
         dwFrameInterval( 1)            500000
         dwFrameInterval( 2)            666666
         dwFrameInterval( 3)           1000000
         dwFrameInterval( 4)           2000000
       VideoStreaming Interface Descriptor:
         bLength                            46
         bDescriptorType                    36
         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
         bFrameIndex                         4
         bmCapabilities                   0x00
           Still image unsupported
         wWidth                            176
         wHeight                           144
         dwMinBitRate                   253440
         dwMaxBitRate                  1520640
         dwMaxVideoFrameBufferSize       50688
         dwDefaultFrameInterval         333333
         bFrameIntervalType                  5
         dwFrameInterval( 0)            333333
         dwFrameInterval( 1)            500000
         dwFrameInterval( 2)            666666
         dwFrameInterval( 3)           1000000
         dwFrameInterval( 4)           2000000
       VideoStreaming Interface Descriptor:
         bLength                            46
         bDescriptorType                    36
         bDescriptorSubtype                  5 (FRAME_UNCOMPRESSED)
         bFrameIndex                         5
         bmCapabilities                   0x00
           Still image unsupported
         wWidth                            160
         wHeight                           120
         dwMinBitRate                   192000
         dwMaxBitRate                  1152000
         dwMaxVideoFrameBufferSize       38400
         dwDefaultFrameInterval         333333
         bFrameIntervalType                  5
         dwFrameInterval( 0)            333333
         dwFrameInterval( 1)            500000
         dwFrameInterval( 2)            666666
         dwFrameInterval( 3)           1000000
         dwFrameInterval( 4)           2000000
       VideoStreaming Interface Descriptor:
         bLength                             6
         bDescriptorType                    36
         bDescriptorSubtype                 13 (COLORFORMAT)
         bColorPrimaries                     1 (BT.709,sRGB)
         bTransferCharacteristics            1 (BT.709)
         bMatrixCoefficients                 4 (SMPTE 170M (BT.601))
     Interface Descriptor:
       bLength                 9
       bDescriptorType         4
       bInterfaceNumber        1
       bAlternateSetting       1
       bNumEndpoints           1
       bInterfaceClass        14 Video
       bInterfaceSubClass      2 Video Streaming
       bInterfaceProtocol      0
       iInterface              0
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x81  EP 1 IN
         bmAttributes            5
           Transfer Type            Isochronous
           Synch Type               Asynchronous
           Usage Type               Data
         wMaxPacketSize     0x0080  1x 128 bytes
         bInterval               1
     Interface Descriptor:
       bLength                 9
       bDescriptorType         4
       bInterfaceNumber        1
       bAlternateSetting       2
       bNumEndpoints           1
       bInterfaceClass        14 Video
       bInterfaceSubClass      2 Video Streaming
       bInterfaceProtocol      0
       iInterface              0
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x81  EP 1 IN
         bmAttributes            5
           Transfer Type            Isochronous
           Synch Type               Asynchronous
           Usage Type               Data
         wMaxPacketSize     0x0100  1x 256 bytes
         bInterval               1
     Interface Descriptor:
       bLength                 9
       bDescriptorType         4
       bInterfaceNumber        1
       bAlternateSetting       3
       bNumEndpoints           1
       bInterfaceClass        14 Video
       bInterfaceSubClass      2 Video Streaming
       bInterfaceProtocol      0
       iInterface              0
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x81  EP 1 IN
         bmAttributes            5
           Transfer Type            Isochronous
           Synch Type               Asynchronous
           Usage Type               Data
         wMaxPacketSize     0x0320  1x 800 bytes
         bInterval               1
     Interface Descriptor:
       bLength                 9
       bDescriptorType         4
       bInterfaceNumber        1
       bAlternateSetting       4
       bNumEndpoints           1
       bInterfaceClass        14 Video
       bInterfaceSubClass      2 Video Streaming
       bInterfaceProtocol      0
       iInterface              0
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x81  EP 1 IN
         bmAttributes            5
           Transfer Type            Isochronous
           Synch Type               Asynchronous
           Usage Type               Data
         wMaxPacketSize     0x0b20  2x 800 bytes
         bInterval               1
     Interface Descriptor:
       bLength                 9
       bDescriptorType         4
       bInterfaceNumber        1
       bAlternateSetting       5
       bNumEndpoints           1
       bInterfaceClass        14 Video
       bInterfaceSubClass      2 Video Streaming
       bInterfaceProtocol      0
       iInterface              0
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x81  EP 1 IN
         bmAttributes            5
           Transfer Type            Isochronous
           Synch Type               Asynchronous
           Usage Type               Data
         wMaxPacketSize     0x1320  3x 800 bytes
         bInterval               1
     Interface Descriptor:
       bLength                 9
       bDescriptorType         4
       bInterfaceNumber        1
       bAlternateSetting       6
       bNumEndpoints           1
       bInterfaceClass        14 Video
       bInterfaceSubClass      2 Video Streaming
       bInterfaceProtocol      0
       iInterface              0
       Endpoint Descriptor:
         bLength                 7
         bDescriptorType         5
         bEndpointAddress     0x81  EP 1 IN
         bmAttributes            5
           Transfer Type            Isochronous
           Synch Type               Asynchronous
           Usage Type               Data
         wMaxPacketSize     0x1400  3x 1024 bytes
         bInterval               1
can't get device qualifier: Operation not permitted
can't get debug descriptor: Operation not permitted
cannot read device status, Operation not permitted (1)

-- 


cosmogoniA <http://www.cosmogonia.org/>
noprovarenofareononfarenonc'?provare


From laurent.pinchart at ideasonboard.com  Fri Apr 29 10:10:34 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 29 Apr 2011 10:10:34 +0200
Subject: [Linux-uvc-devel] [PATCH v4] media:uvc_driver: add uvc support
	on no-mmu arch
In-Reply-To: <1303463331-5024-1-git-send-email-lliubbo@gmail.com>
References: <1303463331-5024-1-git-send-email-lliubbo@gmail.com>
Message-ID: <201104291010.34858.laurent.pinchart@ideasonboard.com>

Hi Bob,

Thanks for the patch.

On Friday 22 April 2011 11:08:51 Bob Liu wrote:
> UVC driver used to have partial no-mmu arch support, but it's removed by
> commit c29fcff3daafbf46d64a543c1950bbd206ad8c1c.
> 
> This patch added them back and expanded to fully support no-mmu arch, so
> that uvc cameras can be used on no-mmu platforms like Blackfin.
> 
> Signed-off-by: Bob Liu <lliubbo at gmail.com>
> ---
>  drivers/media/video/uvc/uvc_queue.c |   26 +++++++++++++++++++++++++-
>  drivers/media/video/uvc/uvc_v4l2.c  |   13 +++++++++++++
>  drivers/media/video/uvc/uvcvideo.h  |    6 ++++++
>  drivers/media/video/v4l2-dev.c      |   18 ++++++++++++++++++
>  include/media/v4l2-dev.h            |    2 ++
>  5 files changed, 64 insertions(+), 1 deletions(-)
> 
> diff --git a/drivers/media/video/uvc/uvc_queue.c
> b/drivers/media/video/uvc/uvc_queue.c index f14581b..caf8f6f 100644
> --- a/drivers/media/video/uvc/uvc_queue.c
> +++ b/drivers/media/video/uvc/uvc_queue.c
> @@ -424,7 +424,7 @@ int uvc_queue_mmap(struct uvc_video_queue *queue,
> struct vm_area_struct *vma) break;
>  	}
> 
> -	if (i == queue->count || size != queue->buf_size) {
> +	if (i == queue->count || PAGE_ALIGN(size) != queue->buf_size) {
>  		ret = -EINVAL;
>  		goto done;
>  	}
> @@ -436,6 +436,7 @@ int uvc_queue_mmap(struct uvc_video_queue *queue,
> struct vm_area_struct *vma) vma->vm_flags |= VM_IO;
> 
>  	addr = (unsigned long)queue->mem + buffer->buf.m.offset;
> +#ifdef CONFIG_MMU
>  	while (size > 0) {
>  		page = vmalloc_to_page((void *)addr);
>  		if ((ret = vm_insert_page(vma, start, page)) < 0)
> @@ -445,6 +446,7 @@ int uvc_queue_mmap(struct uvc_video_queue *queue,
> struct vm_area_struct *vma) addr += PAGE_SIZE;
>  		size -= PAGE_SIZE;
>  	}
> +#endif
> 
>  	vma->vm_ops = &uvc_vm_ops;
>  	vma->vm_private_data = buffer;
> @@ -489,6 +491,28 @@ done:
>  }
> 
>  /*
> + * Get unmapped area.
> + *
> + * NO-MMU arch need this function to make mmap() work correctly.
> + */
> +unsigned long uvc_queue_get_unmapped_area(struct uvc_video_queue *queue,
> +		unsigned long addr, unsigned long len, unsigned long pgoff)

Please guard this function with

#ifndef CONFIG_MMU

> +{
> +	struct uvc_buffer *buffer;
> +	unsigned int i;
> +
> +	mutex_lock(&queue->mutex);
> +	for (i = 0; i < queue->count; ++i) {
> +		buffer = &queue->buffer[i];
> +		if ((buffer->buf.m.offset >> PAGE_SHIFT) == pgoff)
> +			break;
> +	}

If pgoff doesn't correspond to any existing buffer, you will end up returning 
the address of the last buffer. Shouldn't you return an error instead ?

> +	addr = (unsigned long)queue->mem + buffer->buf.m.offset;
> +	mutex_unlock(&queue->mutex);
> +	return addr;
> +}
> +
> +/*
>   * Enable or disable the video buffers queue.
>   *
>   * The queue must be enabled before starting video acquisition and must be
> diff --git a/drivers/media/video/uvc/uvc_v4l2.c
> b/drivers/media/video/uvc/uvc_v4l2.c index 9005a8d..9efab61 100644
> --- a/drivers/media/video/uvc/uvc_v4l2.c
> +++ b/drivers/media/video/uvc/uvc_v4l2.c
> @@ -1081,6 +1081,18 @@ static unsigned int uvc_v4l2_poll(struct file *file,
> poll_table *wait) return uvc_queue_poll(&stream->queue, file, wait);
>  }

#ifndef CONFIG_MMU
> +static unsigned long uvc_v4l2_get_unmapped_area(struct file *file,
> +		unsigned long addr, unsigned long len, unsigned long pgoff,
> +		unsigned long flags)
> +{
> +	struct uvc_fh *handle = file->private_data;
> +	struct uvc_streaming *stream = handle->stream;
> +
> +	uvc_trace(UVC_TRACE_CALLS, "uvc_v4l2_get_unmapped_area\n");
> +
> +	return uvc_queue_get_unmapped_area(&stream->queue, addr, len, pgoff);
> +}
#endif

>  const struct v4l2_file_operations uvc_fops = {
>  	.owner		= THIS_MODULE,
>  	.open		= uvc_v4l2_open,
> @@ -1089,5 +1101,6 @@ const struct v4l2_file_operations uvc_fops = {
>  	.read		= uvc_v4l2_read,
>  	.mmap		= uvc_v4l2_mmap,
>  	.poll		= uvc_v4l2_poll,
#ifndef CONFIG_MMU
> +	.get_unmapped_area = uvc_v4l2_get_unmapped_area,
#endif
>  };
> 
> diff --git a/drivers/media/video/uvc/uvcvideo.h
> b/drivers/media/video/uvc/uvcvideo.h index 45f01e7..48a2378 100644
> --- a/drivers/media/video/uvc/uvcvideo.h
> +++ b/drivers/media/video/uvc/uvcvideo.h
> @@ -580,6 +580,12 @@ extern int uvc_queue_mmap(struct uvc_video_queue
> *queue, struct vm_area_struct *vma);
>  extern unsigned int uvc_queue_poll(struct uvc_video_queue *queue,
>  		struct file *file, poll_table *wait);
> +#ifdef CONFIG_MMU
> +#define uvc_queue_get_unmapped_area NULL
> +#else

And remove the CONFIG_MMU guard here.

> +extern unsigned long uvc_queue_get_unmapped_area(struct uvc_video_queue
> *queue, +		unsigned long addr, unsigned long len, unsigned long pgoff);
> +#endif
>  extern int uvc_queue_allocated(struct uvc_video_queue *queue);
>  static inline int uvc_queue_streaming(struct uvc_video_queue *queue)
>  {
> diff --git a/drivers/media/video/v4l2-dev.c
> b/drivers/media/video/v4l2-dev.c index 498e674..221e73f 100644
> --- a/drivers/media/video/v4l2-dev.c
> +++ b/drivers/media/video/v4l2-dev.c

Please split the patch in two. The first part should be a revert of 
c29fcff3daafbf46d64a543c1950bbd206ad8c1c, the second one should be the 
uvcvideo code.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Fri Apr 29 10:26:05 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 29 Apr 2011 10:26:05 +0200
Subject: [Linux-uvc-devel] [PATCH] uvcvideo: FIX_BANDWIDTH quirk for
	Hercules Classic Silver
In-Reply-To: <4DB168A6.7050409@udo.edu>
References: <4DA090D3.4060903@udo.edu>
	<201104221131.23030.laurent.pinchart@ideasonboard.com>
	<4DB168A6.7050409@udo.edu>
Message-ID: <201104291026.05560.laurent.pinchart@ideasonboard.com>

Hi Andrej,

On Friday 22 April 2011 13:38:14 Andrej Gelenberg wrote:
> Hi,
> 
> On 04/22/2011 11:31 AM, Laurent Pinchart wrote:
> > lsusb -v -d 06f8:300C
> 
> here it is.

Thank you. I've updated the supported devices list, and I'll push a patch to 
enable the quirk by default.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Fri Apr 29 10:36:41 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 29 Apr 2011 10:36:41 +0200
Subject: [Linux-uvc-devel] Input/Output error setting
	V4L2_CID_EXPOSURE_AUTO values
In-Reply-To: <920349.12053.qm@web161304.mail.bf1.yahoo.com>
References: <920349.12053.qm@web161304.mail.bf1.yahoo.com>
Message-ID: <201104291036.41730.laurent.pinchart@ideasonboard.com>

Hi Ben,

On Saturday 23 April 2011 00:13:27 Ben Mesander wrote:
> Hi,
> 
> I'm porting an application which uses the uvc video driver for a logitech
> webcam from Ubuntu 8.04 LTS to Ubuntu 10.04 LTS.
> 
> In the 8.04 release, there was some mismatch in the UVC driver from the
> V4L2 driver for a few of the ioctl values. The V4L2 headers had:
> 
> #define V4L2_CID_EXPOSURE_AUTO (V4L2_CID_CAMERA_CLASS_BASE+1)
> #define V4L2_CID_EXPOSURE_ABSOLUTE (V4L2_CID_CAMERA_CLASS_BASE+2)
> #define V4L2_CID_EXPOSURE_AUTO_PRIORITY (V4L2_CID_CAMERA_CLASS_BASE+3)
> 
> But the uvcvideo driver expected:
> 
> #define V4L2_CID_EXPOSURE_AUTO (V4L2_CID_PRIVATE_BASE+10)
> #define V4L2_CID_EXPOSURE_ABSOLUTE (V4L2_CID_PRIVATE_BASE + 11)
> #define V4L2_CID_EXPOSURE_AUTO_PRIORITY (V4L2_CID_PRIVATE_BASE+14)
> 
> I found these values in the private header files that came with the
> luvcview software, and similar defines in the logitech libwebcam source,
> which also had a comment "Old uvcvideo pre-r178 control IDs"
> See
> here:
> http://svn.quickcamteam.net/svn/qct/webcam-tools/trunk/libwebcam/compat.h
> 
> My desired camera behavior is to allow the camera to control aperture as
> necessary to handle lighting conditions, but my application must run at a
> fixed frame rate (30fps, set elsewhere), so it must not change the frame
> rate. By experimenting & reading sources mentioned above, I finally found
> that if I did:
> 
> request.id = (V4L2_CID_PRIVATE_BASE+10);
> request.value = 8;
> if (ioctl(fd, VIDIOC_S_CTRL, &request) < 0) {
> ...
> }
> 
> request.id = (V4L2_CID_PRIVATE_BASE+14);
> request.value = 0;
> if (ioctl(fd, VIDIOC_S_CTRL, &request) < 0 {
> ...
> }
> 
> I achieved the desired effect. Note that 8 is not defined in
> v4l2_exposure_auto_type, but I'm not the only person who's used it,
> see http://forums.quickcamteam.net/showthread.php?tid=1227 for an example
> of where it seems to mean aperture priority.
> 
> OK, fine, but under Ubuntu 10.04, the ioctls above return EINVAL. So I
> figured it was time to use the correct request values in the requests. So
> I tried:
> 
> request.id = V4L2_CID_EXPOSURE_AUTO;
> request.value = V4L2_EXPOSURE_APERTURE_PRIORITY;
> if (ioctl(fd, VIDIOC_S_CTRL, &request) < 0) {
> ... I end up here with "Input / Output Error" errno ...
> }
> 
> request.id = V4L2_CID_EXPOSURE_AUTO_PRIORITY;
> request.value = 0;
> if (ioctl(fd, VIDIOC_S_CTRL, &request) < 0 {
> ...
> }

The interface changed over time as it was getting standardized. You should now 
use the V4L2_CID_EXPOSURE_AUTO and V4L2_CID_EXPOSURE_AUTO_PRIORITY ioctls as 
defined in videodev2.h, so your code is correct.

> No luck - initially I thought it worked, but after trying in a darkened
> room and bright sunlight and rebooting to clear out the current values in
> the driver, I see that it is no longer adapting to the lighting
> conditions, although it does seem to be correctly pinned to the framerate
> I set. Also, the
> V4L2_CID_EXPOSURE_AUTO ioctl() always returns "I/O error" - I have tried
> various values for the request.value - 0, 1, 3, 8, etc. without any
> success.
> 
> I see other people have reported similar issues in the past, but I see no
> resolution, for
> example:
> http://lists.berlios.de/pipermail/linux-uvc-devel/2008-March/003251.html -
> for example in that thread this is mentioned:
> enum  v4l2_exposure_auto_type {
> 	V4L2_EXPOSURE_MANUAL = 0,
> 	V4L2_EXPOSURE_AUTO = 1,
> 	V4L2_EXPOSURE_SHUTTER_PRIORITY = 2,
> 	V4L2_EXPOSURE_APERTURE_PRIORITY = 3
> };
> But in my V4L2 headers, MANUAL = 1, and AUTO = 0.

The uvcvideo driver had a bug until 2.6.27 that caused the manual and auto 
values to be inverted. Ubuntu 10.04 ships a 2.6.32 kernel, so the bug 
shouldn't be present there.

> I also tried the VIDIOC_S_EXT_CTRLS flavor of setting the exposure values,
> but no luck - same I/O error.

VIDIOC_S_EXT_CTRLS lets you set several controls in an atomic way, it won't 
help here if the device returns an error.

> Any idea on how I can set V4L2_CID_EXPOSURE_AUTO on uvcvideo driver in
> Ubuntu 10.04 LTS without getting an Input/Output error?

Have you tried setting the control with a command line application such as 
v4l2-ctl, yavta or uvcdynctrl ? If you don't get an error with them there 
might be an issue with your code. Otherwise we will need to look somewhere 
else.

What Logitech webcam are you using ?

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Fri Apr 29 10:37:51 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 29 Apr 2011 10:37:51 +0200
Subject: [Linux-uvc-devel] lsusb listing for Creative Live Cam (which
	isn't in the uvcvideo devices list)
In-Reply-To: <BANLkTi=ghXeD1XD6SLy3QGp-cBuoZ7tcnA@mail.gmail.com>
References: <BANLkTi=ghXeD1XD6SLy3QGp-cBuoZ7tcnA@mail.gmail.com>
Message-ID: <201104291037.52104.laurent.pinchart@ideasonboard.com>

Hi Mark,

On Saturday 23 April 2011 20:45:14 Mark Majhor wrote:
> Bus 002 Device 045: ID 041e:4045 Creative Technology, Ltd Live! Cam Voice
> Bus 002 Device 044: ID 041e:4048 Creative Technology, Ltd
> Bus 002 Device 043: ID 041e:404b Creative Technology, Ltd

I assume the webcam is the first device. Please send me the output of

lsusb -v -d 041e:4045

running as root if possible.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Fri Apr 29 10:42:09 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 29 Apr 2011 10:42:09 +0200
Subject: [Linux-uvc-devel] webcam issue: id codes changed (?)
In-Reply-To: <BANLkTinm2poWpO1O6gSYPY-4f_uO9isktA@mail.gmail.com>
References: <BANLkTi=aJDrBRn--Hw0cxmXPwGRNnfcS_A@mail.gmail.com>
	<201104241444.18779.laurent.pinchart@ideasonboard.com>
	<BANLkTinm2poWpO1O6gSYPY-4f_uO9isktA@mail.gmail.com>
Message-ID: <201104291042.09490.laurent.pinchart@ideasonboard.com>

Hi Paolo,

On Sunday 24 April 2011 15:07:59 Paolo Casaschi wrote:

[snip]

> After enabling the webcam, this is the kernel.log when I start cheese:
> 
> Apr 24 13:53:00 paolo-lapfour kernel: [44257.278402] uvcvideo: UVC non
> compliance - GET_MIN/MAX(PROBE) incorrectly supported. Enabling
> workaround.
> Apr 24 13:53:00 paolo-lapfour kernel: [44257.313941] uvcvideo: device
> USB2.0 Camera requested null bandwidth, defaulting to lowest.

That's the interesting part. Could you please try settings the quirks 
parameters 2 to when loading the uvcvideo driver ?

modprobe -r uvcvideo
modprobe uvcvideo quirks=2

This should get rid of the non compliance message (please check the kernel log 
to make sure it does). If that still doesn't help, try quirks=128 instead.

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Fri Apr 29 10:50:17 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 29 Apr 2011 10:50:17 +0200
Subject: [Linux-uvc-devel] webcam acer extensa 5635z [04f2:b044] fedora
	Core 14 [kernel 2.6.35.12.88.fc14.i686]
In-Reply-To: <4DB840BA.7080504@msw.it>
References: <4DB6E46A.8060508@msw.it>
	<BANLkTi=KLxaM5e5baDG_=da4TexOre3s8Q@mail.gmail.com>
	<4DB840BA.7080504@msw.it>
Message-ID: <201104291050.17776.laurent.pinchart@ideasonboard.com>

Hi Davide,

On Wednesday 27 April 2011 18:13:46 Davide Marchi wrote:
> Paulo Assis ha scritto:
> > [..]
> > What you mean by "does not work", this is a little vague.
> > Could you post "dmesg" and "lsusb -v -d 04f2:b044" output, please?
> 
> webcam show (with cheese and ekiga) video black.
> I look at increasing the brightness of flashes yellow/white flashing
> 
> post as you request:
> 
> dmesg:

[snip]

> [   10.849642] uvcvideo: Found UVC 1.00 device CNF7017 (04f2:b044)
> [   10.905279] input: CNF7017 as
> /devices/pci0000:00/0000:00:1d.7/usb2/2-8/2-8:1.0/input/input7
> [   10.905371] usbcore: registered new interface driver uvcvideo
> [   10.905373] USB Video Class driver (v1.0.0)

That looks good.

Does the uvcvideo driver print any additional message to the kernel log when 
you start cheese or ekiga ?

-- 
Regards,

Laurent Pinchart


From laurent.pinchart at ideasonboard.com  Fri Apr 29 10:56:57 2011
From: laurent.pinchart at ideasonboard.com (Laurent Pinchart)
Date: Fri, 29 Apr 2011 10:56:57 +0200
Subject: [Linux-uvc-devel] Footage of objects in motion recorded from
	webcam is blurry
In-Reply-To: <BANLkTinX0BDsTg9__bQoLQMhXXzV44uizw@mail.gmail.com>
References: <4DB7D0CD.6070909@open-t.co.uk>
	<BANLkTinX0BDsTg9__bQoLQMhXXzV44uizw@mail.gmail.com>
Message-ID: <201104291056.57844.laurent.pinchart@ideasonboard.com>

Hi,

On Wednesday 27 April 2011 10:42:14 Paulo Assis wrote:
> 
> > 1. Would this be fairly specific to the Logitech QuickCam 9000, or is a
> > more generic issue with webcam sensors?
> 
> Neither, you just need to lower exposure time.
> 
> > 2. Are other webcams better in this respect?
> 
> I don't think so, you can control exposure quite easily with this cam.
> 
> > 3. Can I use any of the UVC features to tweak the driver parameters in
> > order to force sharper images of objects on the move?
> 
> Yes, just set exposure mode to manual, and tweak exposure absolute,
> also remember to disable "exposure, auto priority".
> You should also use the highest fps possible (30 fps I think)
> 
> > 4. Is this to do with the auto-focus of the camera, and can I turn it off
> > or peg it in software at a certain value, to improve things?
> 
> Yes, use uvcdynctrl (command line) or guvcview (gtk) (guvcview
> --control_only will let you use your program along side it)

As far as I know, auto-focus for the Logitech QuickCam Pro 9000 is implemented 
in software in the Windows driver. The camera has a manual focus control only. 
You can tune it with any V4L2 application that supports controls, such as 
uvcdynctrl, guvcview, v4l2-ctl, yavta, ...

-- 
Regards,

Laurent Pinchart


From paolo at casaschi.net  Fri Apr 29 12:05:55 2011
From: paolo at casaschi.net (Paolo Casaschi)
Date: Fri, 29 Apr 2011 11:05:55 +0100
Subject: [Linux-uvc-devel] webcam issue: id codes changed (?)
In-Reply-To: <201104291042.09490.laurent.pinchart@ideasonboard.com>
References: <BANLkTi=aJDrBRn--Hw0cxmXPwGRNnfcS_A@mail.gmail.com>
	<201104241444.18779.laurent.pinchart@ideasonboard.com>
	<BANLkTinm2poWpO1O6gSYPY-4f_uO9isktA@mail.gmail.com>
	<201104291042.09490.laurent.pinchart@ideasonboard.com>
Message-ID: <BANLkTimitwKahdCBpitevYv7QPtuTCOkFw@mail.gmail.com>

Done what you suggested below, but still no video is shown in cheese :-(

Please find below the kernel.log entries after:
a) modprobe -r uvcvideo
b) modprobe uvcvideo quirks=2 then 128
c) starting cheese

> That's the interesting part. Could you please try settings the quirks
> parameters 2 to when loading the uvcvideo driver ?
>
> modprobe -r uvcvideo
> modprobe uvcvideo quirks=2
>
> This should get rid of the non compliance message (please check the kernel log
> to make sure it does). If that still doesn't help, try quirks=128 instead.

=== this is for quirks=2

Apr 29 10:59:00 paolo-lapfour kernel: [  331.860108] usbcore:
deregistering interface driver uvcvideo
Apr 29 10:59:15 paolo-lapfour kernel: [  347.073275] Linux video
capture interface: v2.00
Apr 29 10:59:15 paolo-lapfour kernel: [  347.083226] uvcvideo: Found
UVC 1.00 device USB2.0 Camera (0402:5606)
Apr 29 10:59:15 paolo-lapfour kernel: [  347.083236] uvcvideo: Forcing
device quirks 0x2 by module parameter for testing purpose.
Apr 29 10:59:15 paolo-lapfour kernel: [  347.083243] uvcvideo: Please
report required quirks to the linux-uvc-devel mailing list.
Apr 29 10:59:15 paolo-lapfour kernel: [  347.101075] input: USB2.0
Camera as /devices/pci0000:00/0000:00:1d.7/usb1/1-5/1-5:1.0/input/input13
Apr 29 10:59:15 paolo-lapfour kernel: [  347.101887] usbcore:
registered new interface driver uvcvideo
Apr 29 10:59:15 paolo-lapfour kernel: [  347.102535] USB Video Class
driver (v0.1.0)
Apr 29 10:59:22 paolo-lapfour kernel: [  353.390036] uvcvideo: device
USB2.0 Camera requested null bandwidth, defaulting to lowest.

=== this is for quirks=128

Apr 29 10:59:53 paolo-lapfour kernel: [  384.481164] usbcore:
deregistering interface driver uvcvideo
Apr 29 10:59:58 paolo-lapfour kernel: [  389.492477] Linux video
capture interface: v2.00
Apr 29 10:59:58 paolo-lapfour kernel: [  389.503759] uvcvideo: Found
UVC 1.00 device USB2.0 Camera (0402:5606)
Apr 29 10:59:58 paolo-lapfour kernel: [  389.503769] uvcvideo: Forcing
device quirks 0x80 by module parameter for testing purpose.
Apr 29 10:59:58 paolo-lapfour kernel: [  389.503776] uvcvideo: Please
report required quirks to the linux-uvc-devel mailing list.
Apr 29 10:59:58 paolo-lapfour kernel: [  389.522467] input: USB2.0
Camera as /devices/pci0000:00/0000:00:1d.7/usb1/1-5/1-5:1.0/input/input14
Apr 29 10:59:58 paolo-lapfour kernel: [  389.523160] usbcore:
registered new interface driver uvcvideo
Apr 29 10:59:58 paolo-lapfour kernel: [  389.523830] USB Video Class
driver (v0.1.0)
Apr 29 11:00:04 paolo-lapfour kernel: [  395.381759]
===>rt_ioctl_giwscan. 11(11) BSS returned, data->length = 1514
Apr 29 11:00:13 paolo-lapfour kernel: [  404.911120] uvcvideo: UVC non
compliance - GET_MIN/MAX(PROBE) incorrectly supported. Enabling
workaround.
Apr 29 11:00:13 paolo-lapfour kernel: [  405.016318] uvcvideo: device
USB2.0 Camera requested null bandwidth, defaulting to lowest.


From lliubbo at gmail.com  Fri Apr 29 12:11:35 2011
From: lliubbo at gmail.com (Bob Liu)
Date: Fri, 29 Apr 2011 18:11:35 +0800
Subject: [Linux-uvc-devel] [PATCH 2/2] media:uvc_driver: Add support for
	NOMMU arch
In-Reply-To: <1304071895-27898-1-git-send-email-lliubbo@gmail.com>
References: <1304071895-27898-1-git-send-email-lliubbo@gmail.com>
Message-ID: <1304071895-27898-2-git-send-email-lliubbo@gmail.com>

Add support to uvc driver for NOMMU arch including add function
uvc_queue_get_unmapped_area() and make some changes in uvc_queue_mmap().
So that uvc camera can be used on nommu arch like blackfin.

Signed-off-by: Bob Liu <lliubbo at gmail.com>
---
 drivers/media/video/uvc/uvc_queue.c |   34 +++++++++++++++++++++++++++++++++-
 drivers/media/video/uvc/uvc_v4l2.c  |   17 +++++++++++++++++
 drivers/media/video/uvc/uvcvideo.h  |    4 ++++
 3 files changed, 54 insertions(+), 1 deletions(-)

diff --git a/drivers/media/video/uvc/uvc_queue.c b/drivers/media/video/uvc/uvc_queue.c
index f14581b..109a063 100644
--- a/drivers/media/video/uvc/uvc_queue.c
+++ b/drivers/media/video/uvc/uvc_queue.c
@@ -424,7 +424,7 @@ int uvc_queue_mmap(struct uvc_video_queue *queue, struct vm_area_struct *vma)
 			break;
 	}
 
-	if (i == queue->count || size != queue->buf_size) {
+	if (i == queue->count || PAGE_ALIGN(size) != queue->buf_size) {
 		ret = -EINVAL;
 		goto done;
 	}
@@ -436,6 +436,7 @@ int uvc_queue_mmap(struct uvc_video_queue *queue, struct vm_area_struct *vma)
 	vma->vm_flags |= VM_IO;
 
 	addr = (unsigned long)queue->mem + buffer->buf.m.offset;
+#ifdef CONFIG_MMU
 	while (size > 0) {
 		page = vmalloc_to_page((void *)addr);
 		if ((ret = vm_insert_page(vma, start, page)) < 0)
@@ -445,6 +446,7 @@ int uvc_queue_mmap(struct uvc_video_queue *queue, struct vm_area_struct *vma)
 		addr += PAGE_SIZE;
 		size -= PAGE_SIZE;
 	}
+#endif
 
 	vma->vm_ops = &uvc_vm_ops;
 	vma->vm_private_data = buffer;
@@ -488,6 +490,36 @@ done:
 	return mask;
 }
 
+#ifndef CONFIG_MMU
+/*
+ * Get unmapped area.
+ *
+ * NO-MMU arch need this function to make mmap() work correctly.
+ */
+unsigned long uvc_queue_get_unmapped_area(struct uvc_video_queue *queue,
+		unsigned long pgoff)
+{
+	struct uvc_buffer *buffer;
+	unsigned int i;
+	unsigned long ret;
+
+	mutex_lock(&queue->mutex);
+	for (i = 0; i < queue->count; ++i) {
+		buffer = &queue->buffer[i];
+		if ((buffer->buf.m.offset >> PAGE_SHIFT) == pgoff)
+			break;
+	}
+	if (i == queue->count) {
+		ret = -EINVAL;
+		goto done;
+	}
+	ret = (unsigned long)queue->mem + buffer->buf.m.offset;
+done:
+	mutex_unlock(&queue->mutex);
+	return ret;
+}
+#endif
+
 /*
  * Enable or disable the video buffers queue.
  *
diff --git a/drivers/media/video/uvc/uvc_v4l2.c b/drivers/media/video/uvc/uvc_v4l2.c
index 9005a8d..d0da5d0 100644
--- a/drivers/media/video/uvc/uvc_v4l2.c
+++ b/drivers/media/video/uvc/uvc_v4l2.c
@@ -1081,6 +1081,20 @@ static unsigned int uvc_v4l2_poll(struct file *file, poll_table *wait)
 	return uvc_queue_poll(&stream->queue, file, wait);
 }
 
+#ifndef CONFIG_MMU
+static unsigned long uvc_v4l2_get_unmapped_area(struct file *file,
+		unsigned long addr, unsigned long len, unsigned long pgoff,
+		unsigned long flags)
+{
+	struct uvc_fh *handle = file->private_data;
+	struct uvc_streaming *stream = handle->stream;
+
+	uvc_trace(UVC_TRACE_CALLS, "uvc_v4l2_get_unmapped_area\n");
+
+	return uvc_queue_get_unmapped_area(&stream->queue, pgoff);
+}
+#endif
+
 const struct v4l2_file_operations uvc_fops = {
 	.owner		= THIS_MODULE,
 	.open		= uvc_v4l2_open,
@@ -1089,5 +1103,8 @@ const struct v4l2_file_operations uvc_fops = {
 	.read		= uvc_v4l2_read,
 	.mmap		= uvc_v4l2_mmap,
 	.poll		= uvc_v4l2_poll,
+#ifndef CONFIG_MMU
+	.get_unmapped_area = uvc_v4l2_get_unmapped_area,
+#endif
 };
 
diff --git a/drivers/media/video/uvc/uvcvideo.h b/drivers/media/video/uvc/uvcvideo.h
index 45f01e7..6aa63c0 100644
--- a/drivers/media/video/uvc/uvcvideo.h
+++ b/drivers/media/video/uvc/uvcvideo.h
@@ -580,6 +580,10 @@ extern int uvc_queue_mmap(struct uvc_video_queue *queue,
 		struct vm_area_struct *vma);
 extern unsigned int uvc_queue_poll(struct uvc_video_queue *queue,
 		struct file *file, poll_table *wait);
+#ifndef CONFIG_MMU
+extern unsigned long uvc_queue_get_unmapped_area(struct uvc_video_queue *queue,
+		unsigned long pgoff);
+#endif
 extern int uvc_queue_allocated(struct uvc_video_queue *queue);
 static inline int uvc_queue_streaming(struct uvc_video_queue *queue)
 {
-- 
1.6.3.3




From lliubbo at gmail.com  Fri Apr 29 12:11:34 2011
From: lliubbo at gmail.com (Bob Liu)
Date: Fri, 29 Apr 2011 18:11:34 +0800
Subject: [Linux-uvc-devel] [PATCH 1/2] V4L/DVB: v4l2-dev: revert commit
	c29fcff3daafbf46d64a543c1950bbd206ad8c1c
Message-ID: <1304071895-27898-1-git-send-email-lliubbo@gmail.com>

Revert commit:
V4L/DVB: v4l2-dev: remove get_unmapped_area(c29fcff3daafbf46d64a543c1950bb)
to restore NOMMU arch supporting.

Signed-off-by: Bob Liu <lliubbo at gmail.com>
---
 drivers/media/video/v4l2-dev.c |   18 ++++++++++++++++++
 include/media/v4l2-dev.h       |    2 ++
 2 files changed, 20 insertions(+), 0 deletions(-)

diff --git a/drivers/media/video/v4l2-dev.c b/drivers/media/video/v4l2-dev.c
index 6dc7196..19d5ae2 100644
--- a/drivers/media/video/v4l2-dev.c
+++ b/drivers/media/video/v4l2-dev.c
@@ -352,6 +352,23 @@ static long v4l2_ioctl(struct file *filp, unsigned int cmd, unsigned long arg)
 	return ret;
 }
 
+#ifdef CONFIG_MMU
+#define v4l2_get_unmapped_area NULL
+#else
+static unsigned long v4l2_get_unmapped_area(struct file *filp,
+		unsigned long addr, unsigned long len, unsigned long pgoff,
+		unsigned long flags)
+{
+	struct video_device *vdev = video_devdata(filp);
+
+	if (!vdev->fops->get_unmapped_area)
+		return -ENOSYS;
+	if (!video_is_registered(vdev))
+		return -ENODEV;
+	return vdev->fops->get_unmapped_area(filp, addr, len, pgoff, flags);
+}
+#endif
+
 static int v4l2_mmap(struct file *filp, struct vm_area_struct *vm)
 {
 	struct video_device *vdev = video_devdata(filp);
@@ -454,6 +471,7 @@ static const struct file_operations v4l2_fops = {
 	.read = v4l2_read,
 	.write = v4l2_write,
 	.open = v4l2_open,
+	.get_unmapped_area = v4l2_get_unmapped_area,
 	.mmap = v4l2_mmap,
 	.unlocked_ioctl = v4l2_ioctl,
 #ifdef CONFIG_COMPAT
diff --git a/include/media/v4l2-dev.h b/include/media/v4l2-dev.h
index 8266d5a..93e96fb 100644
--- a/include/media/v4l2-dev.h
+++ b/include/media/v4l2-dev.h
@@ -62,6 +62,8 @@ struct v4l2_file_operations {
 	unsigned int (*poll) (struct file *, struct poll_table_struct *);
 	long (*ioctl) (struct file *, unsigned int, unsigned long);
 	long (*unlocked_ioctl) (struct file *, unsigned int, unsigned long);
+	unsigned long (*get_unmapped_area) (struct file *, unsigned long,
+				unsigned long, unsigned long, unsigned long);
 	int (*mmap) (struct file *, struct vm_area_struct *);
 	int (*open) (struct file *);
 	int (*release) (struct file *);
-- 
1.6.3.3




From ben at cardinalpeak.com  Fri Apr 29 18:07:03 2011
From: ben at cardinalpeak.com (Ben Mesander)
Date: Fri, 29 Apr 2011 09:07:03 -0700 (PDT)
Subject: [Linux-uvc-devel] Input/Output error setting
	V4L2_CID_EXPOSURE_AUTO values
In-Reply-To: <201104291036.41730.laurent.pinchart@ideasonboard.com>
References: <920349.12053.qm@web161304.mail.bf1.yahoo.com>
	<201104291036.41730.laurent.pinchart@ideasonboard.com>
Message-ID: <825511.42773.qm@web161315.mail.bf1.yahoo.com>

Hi Laurent,

  Thank you for explaining the history behind some of the #define confusion I've 
seen between different versions of V4L2 and uvcvideo.

  I eventually determined the following experimentally - the uvcvideo driver, at 
least for my camera (a logitech, USB id 046d:0809) supports two of the four 
possible exposure modes. The others return I/O error - which I don't understand, 
if the camera doesn't support them, shouldn't it be EINVAL instead?

enum  v4l2_exposure_auto_type {
      V4L2_EXPOSURE_MANUAL = 0, /* Gives I/O error */
      V4L2_EXPOSURE_AUTO = 1, /* works */
      V4L2_EXPOSURE_SHUTTER_PRIORITY = 2, /* Gives I/O error */
      V4L2_EXPOSURE_APERTURE_PRIORITY = 3 /* works */
};

Fortunately, the mode I wanted, aperture priority, works.

Regards,
Ben
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110429/605ad0d9/attachment.html>

From shop at open-t.co.uk  Fri Apr 29 21:17:07 2011
From: shop at open-t.co.uk (Sebastian Arcus)
Date: Fri, 29 Apr 2011 20:17:07 +0100
Subject: [Linux-uvc-devel] Footage of objects in motion recorded from
 webcam is blurry
In-Reply-To: <201104291056.57844.laurent.pinchart@ideasonboard.com>
References: <4DB7D0CD.6070909@open-t.co.uk>
	<BANLkTinX0BDsTg9__bQoLQMhXXzV44uizw@mail.gmail.com>
	<201104291056.57844.laurent.pinchart@ideasonboard.com>
Message-ID: <4DBB0EB3.1090207@open-t.co.uk>

Hi,

On 04/29/2011 09:56 AM, Laurent Pinchart wrote:
> Hi,
>
> On Wednesday 27 April 2011 10:42:14 Paulo Assis wrote:
>>
>>> 1. Would this be fairly specific to the Logitech QuickCam 9000, or is a
>>> more generic issue with webcam sensors?
>>
>> Neither, you just need to lower exposure time.
>>
>>> 2. Are other webcams better in this respect?
>>
>> I don't think so, you can control exposure quite easily with this cam.
>>
>>> 3. Can I use any of the UVC features to tweak the driver parameters in
>>> order to force sharper images of objects on the move?
>>
>> Yes, just set exposure mode to manual, and tweak exposure absolute,
>> also remember to disable "exposure, auto priority".
>> You should also use the highest fps possible (30 fps I think)
>>
>>> 4. Is this to do with the auto-focus of the camera, and can I turn it off
>>> or peg it in software at a certain value, to improve things?
>>
>> Yes, use uvcdynctrl (command line) or guvcview (gtk) (guvcview
>> --control_only will let you use your program along side it)
>
> As far as I know, auto-focus for the Logitech QuickCam Pro 9000 is implemented
> in software in the Windows driver. The camera has a manual focus control only.
> You can tune it with any V4L2 application that supports controls, such as
> uvcdynctrl, guvcview, v4l2-ctl, yavta, ...

I've had a look and it indeed there is a focus control. Considering that 
by default it is set on 0 (and it was set on 0 during operation), does 
this mean that it is on auto?

Sebastian


From littlebean at live.it  Sat Apr 30 12:26:26 2011
From: littlebean at live.it (Marco Favetta)
Date: Sat, 30 Apr 2011 12:26:26 +0200
Subject: [Linux-uvc-devel] Acer Orbicam ID 0402:5602 ALi Corp. M5602 Video
	Camera Controller
Message-ID: <DUB105-w241151273CEB7E0F94D0C7DB9D0@phx.gbl>


Hi,
I have Acer Orbicam ID 0402:5602 ALi Corp. M5602 Video Camera Controller in my Acer Aspire 5100
and I don't find the drive for it on OS Linux. Now I trying from live CD Ubuntu 11.04 and finally the Cheese program run (with before distribution, nothing run with this camera), but the image isn't good. It is too dark, is there anyone that can help me?
And another question why i can see the image only with Cheese, and not with Skype? With Skype the camera not run because the led is off, Skype search the camera in this path /dev/video0.

P.S. I'm a novice at Linux

thank you in advance and good day to you
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/linux-uvc-devel/attachments/20110430/1f3160c4/attachment.html>

